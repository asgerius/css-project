[{"tags": ["c++", "variadic-templates", "sfinae"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1499907602, "post_id": 45069334, "comment_id": 77112651, "body": "You probably meant <code>std::decay_t&lt;Ys&gt;...</code>, but even if you fix that it will fail because <code>is_vector</code> is not variadic."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8255177"}, "edited": false, "score": 0, "creation_date": 1499910734, "post_id": 45069797, "comment_id": 77113380, "body": "thanks, now i understand solution before C++17, earlier i see this, but i had problem with understand."}], "tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": true, "score": 3, "last_activity_date": 1499908007, "last_edit_date": 1499908007, "creation_date": 1499907610, "answer_id": 45069797, "question_id": 45069334, "link": "https://stackoverflow.com/questions/45069334/variadic-template-with-sfinae/45069797#45069797", "title": "Variadic template with SFINAE", "body": "<p>You cannot check if the unexpaned pack is a vector.  You have to check for each element in the pack.  Your usage of <code>std::decay_t</code> indicates that you use C++17, so I assume you can use the fold expression.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;class T&gt; struct is_vector : public std::false_type {};\n\ntemplate&lt;class T, class Alloc&gt;\nstruct is_vector&lt;std::vector&lt;T, Alloc&gt;&gt; : public std::true_type {};\n\ntemplate&lt;typename... Ys, typename = typename std::enable_if&lt; (... &amp;&amp; is_vector&lt; std::decay_t&lt;Ys&gt; &gt;::value) &gt;::type &gt;\nvoid function(Ys&amp;&amp;...) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n'; }\n\nstruct A {};\n\nint main()\n{\n  std::vector&lt;int&gt; vi;\n  std::vector&lt;double&gt; vd;\n  std::vector&lt;A&gt; va;\n  function(vi, vd, va);\n}\n</code></pre>\n\n<p>Before C++17 you need a little helper struct which I call <code>all</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\ntemplate &lt; bool... &gt; struct all;\ntemplate &lt; &gt; struct all&lt;&gt; : std::true_type {};\ntemplate &lt; bool B, bool... Rest &gt; struct all&lt;B,Rest...&gt;\n{\n  constexpr static bool value = B &amp;&amp; all&lt;Rest...&gt;::value;\n};\n\ntemplate&lt;class T&gt; struct is_vector : public std::false_type {};\n\ntemplate&lt;class T, class Alloc&gt;\nstruct is_vector&lt;std::vector&lt;T, Alloc&gt;&gt; : public std::true_type {};\n\ntemplate&lt;typename... Ys, typename = typename std::enable_if&lt; all&lt; is_vector&lt; std::decay_t&lt;Ys&gt; &gt;::value... &gt;::value &gt;::type &gt;\nvoid function(Ys&amp;&amp;...) { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n'; }\n\nstruct A {};\n\nint main()\n{\n  std::vector&lt;int&gt; vi;\n  std::vector&lt;double&gt; vd;\n  std::vector&lt;A&gt; va;\n  function(vi, vd, va);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8255177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 1, "accepted_answer_id": 45069797, "answer_count": 1, "score": 0, "last_activity_date": 1499908007, "creation_date": 1499903868, "question_id": 45069334, "link": "https://stackoverflow.com/questions/45069334/variadic-template-with-sfinae", "title": "Variadic template with SFINAE", "body": "<pre><code>template&lt;class T&gt; struct is_vector : public std::false_type {};\n\ntemplate&lt;class T, class Alloc&gt;\nstruct is_vector&lt;std::vector&lt;T, Alloc&gt;&gt; : public std::true_type {};\n\ntemplate&lt;typename T&gt;\ntemplate&lt;typename... Ys, typename = typename std::enable_if&lt;is_vector&lt;std::decay_t&lt;Ys...&gt;&gt;::value&gt;::type&gt;\nvoid A&lt;T&gt;::function(Ys &amp;&amp;... y){}\n</code></pre>\n\n<p>For one vector work fine (version without variadic template), but if I try do for variadic template... it doesn't work, how can I make well SFINAE for variadic template. Someone can explain me why this doesn't work with variadic template and what I must improve.</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1499903418, "post_id": 45069219, "comment_id": 77111653, "body": "I don&#39;t know what the answer is but <a href=\"https://stackoverflow.com/a/22951601/560648\">stackoverflow.com/a/22951601/560648</a> suggests a third-party library is currently your best bet. <a href=\"https://stackoverflow.com/a/26961833/560648\">stackoverflow.com/a/26961833/560648</a> agrees with your concern. My first reaction is that <code>std::mt19937</code> is a nice portable framework that allows you to plug in external, non-standard sources of entropy. Note that <code>rand()</code> did not allow you to do that; perhaps that&#39;s the benefit? <a href=\"https://stackoverflow.com/a/34490647/560648\">stackoverflow.com/a/34490647/560648</a> agrees that it&#39;s down to your implementation, really, which frankly makes sense."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 6, "creation_date": 1499903584, "post_id": 45069219, "comment_id": 77111689, "body": "My personal thought was that perhaps values could be drawn from <code>std::random_device</code>, <code>time(NULL)</code>, and function addresses, then XORed together to produce a kind of best-effort entropy source."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1499904015, "post_id": 45069219, "comment_id": 77111800, "body": "It would be nice if there was function such as does_random_device_actually_work() so one could at least degrade gracefully, or produce warnings or errors for the user."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499904156, "post_id": 45069219, "comment_id": 77111841, "body": "@NeilButterworth: True that. And the <code>std::random_device::entropy()</code> function would seem well-suited to that purpose. But <b><a href=\"https://stackoverflow.com/questions/28390843/how-to-find-the-true-entropy-of-stdrandom-device\">no</a></b>."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 4, "creation_date": 1499904339, "post_id": 45069219, "comment_id": 77111894, "body": "The proper solution is not short, the short solution won&#39;t be proper. My approach I use in my <a href=\"https://github.com/milleniumbug/seed11\" rel=\"nofollow noreferrer\">seed11 library</a> is basically to implement <code>std::random_device</code> properly on the platforms you&#39;re planning to run your program on, and provide a helper function that creates a seeded generator (<code>seed11::make_seeded&lt;std::mt19937&gt;()</code>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1499904739, "post_id": 45069219, "comment_id": 77112003, "body": "@Richard I suppose you could call on the device a 100 (say) times and see if you always get the same value back?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 2, "creation_date": 1499904871, "post_id": 45069219, "comment_id": 77112035, "body": "@NeilButterworth: This doesn&#39;t identify if a statically-seeded PRNG is being used, as is the case in MinGW."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1499905134, "post_id": 45069219, "comment_id": 77112102, "body": "@Richard Even if you re-create the device each time?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499905515, "post_id": 45069219, "comment_id": 77112189, "body": "@NeilButterworth: I see your point. Indeed, this may detect the issue, but I&#39;m looking for a robust response to it."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 2, "creation_date": 1499907071, "post_id": 45069219, "comment_id": 77112550, "body": "<a href=\"https://gist.github.com/imneme/540829265469e673d045\" rel=\"nofollow noreferrer\"><code>random_utils.hpp</code></a> is linked from another pcg-random <a href=\"http://www.pcg-random.org/posts/simple-portable-cpp-seed-entropy.html\" rel=\"nofollow noreferrer\">blog post</a> on the subject and does much of what you mention in your &quot;thoughts&quot; section."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1499910845, "post_id": 45069219, "comment_id": 77113406, "body": "Are there any portable ways to turn the address of a function into an integer?  Cast to <code>void*</code> then <code>INT_PTR</code>?"}, {"owner": {"reputation": 718, "user_id": 7476755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29430191648c6413b5765ac16421e4c8?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit", "link": "https://stackoverflow.com/users/7476755/gambit"}, "edited": false, "score": 0, "creation_date": 1499917096, "post_id": 45069219, "comment_id": 77114746, "body": "Does <a href=\"http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine/seed\" rel=\"nofollow noreferrer\">mt19937::seed</a> not do what you want?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 718, "user_id": 7476755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29430191648c6413b5765ac16421e4c8?s=128&d=identicon&r=PG&f=1", "display_name": "Gambit", "link": "https://stackoverflow.com/users/7476755/gambit"}, "edited": false, "score": 2, "creation_date": 1499917443, "post_id": 45069219, "comment_id": 77114812, "body": "@Gambit: No. it&#39;s equivalent to passing a value to the constructor.  The difficulty is in finding a good unpredictable value to pass."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 5, "creation_date": 1499929354, "post_id": 45069219, "comment_id": 77119589, "body": "Aside: your second bullet doesn&#39;t add anything new. It is not surprising that you found some value that appears 12 times. <a href=\"http://www.wolframalpha.com/input/?i=2%5E32+%2A+binomial(2%5E32,+12)+%2A+(1%2F2%5E32)%5E12+%2A+(1+-+1%2F2%5E32)%5E(2%5E32+-+12)\" rel=\"nofollow noreferrer\">You should expect there to be just over three values that appear exactly 12 times</a>, assuming that you have 2^32 <i>independent, uniformly random</i> samples."}, {"owner": {"reputation": 21422, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 1, "creation_date": 1499937663, "post_id": 45069219, "comment_id": 77125297, "body": "@Hurkyl: True, but that&#39;s not really the point :) If you run a program using this scheme lots of times, and take the first number it outputs, you want to get an (at least approximately) uniform distribution, whereas in fact the output will in fact be skewed in a way that will make a noticeable difference to many applications. If you use a seed with the full possible entropy, those differences will be smoothed out much more."}, {"owner": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "edited": false, "score": 0, "creation_date": 1499937682, "post_id": 45069219, "comment_id": 77125310, "body": "<a href=\"http://www.pcg-random.org/posts/ease-of-use-without-loss-of-power.html\" rel=\"nofollow noreferrer\">This later blog post in the series you linked</a> should give you lots of good information."}, {"owner": {"reputation": 2683, "user_id": 3063736, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/siang.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3063736/mark"}, "edited": false, "score": 0, "creation_date": 1499995205, "post_id": 45069219, "comment_id": 77159007, "body": "If you need cryptographic randomness, you shouldn&#39;t be using <code>std::mt19937</code>.  It leaks internal state much too fast to be used for cryptographic purposes."}, {"owner": {"reputation": 864, "user_id": 9609025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a028356e4549baeabab70bc969af80a8?s=128&d=identicon&r=PG&f=1", "display_name": "mackycheese21", "link": "https://stackoverflow.com/users/9609025/mackycheese21"}, "edited": false, "score": 1, "creation_date": 1533739169, "post_id": 45069219, "comment_id": 90458657, "body": "&quot;unholy abomination&quot; +1"}], "answers": [{"comments": [{"owner": {"reputation": 815, "user_id": 1636656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5330d12dfb66219d3a4d377ad7e69316?s=128&d=identicon&r=PG", "display_name": "Ask About Monica", "link": "https://stackoverflow.com/users/1636656/ask-about-monica"}, "edited": false, "score": 0, "creation_date": 1499903800, "post_id": 45069285, "comment_id": 77111741, "body": "If interaction with the user is part of the platform, then it cannot be deterministic.  That&#39;s not much practical help, though."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 815, "user_id": 1636656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5330d12dfb66219d3a4d377ad7e69316?s=128&d=identicon&r=PG", "display_name": "Ask About Monica", "link": "https://stackoverflow.com/users/1636656/ask-about-monica"}, "edited": false, "score": 1, "creation_date": 1499904465, "post_id": 45069285, "comment_id": 77111933, "body": "@kbelder: 1. Who says the user is a person? 2. Not all programs have user interaction and you certainly can&#39;t assume there&#39;s always a user around..."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 8, "creation_date": 1499904728, "post_id": 45069285, "comment_id": 77111999, "body": "I appreciate this response, but also feel as though a program should make a reasonable best-effort attempt."}, {"owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 3, "creation_date": 1499958781, "post_id": 45069285, "comment_id": 77141879, "body": "@Richard Agreed, but the issue is the C++ standard writers have to (or at least try their darndest to) accommodate these sorts of bizarre situations. That&#39;s why you get these sorts of wishy-washy standard definitions, where you might get decent results, but the compiler can still be standards-compliant even if it gives back something that&#39;s functionally worthless. -- So your restrictions (&quot;short and cannot rely on other libraries&quot;) rule out any response, as you effectively need a platform-by-platform/compiler-by-compiler special casing. (e.g. what Boost does so well.)"}, {"owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 2, "creation_date": 1499972937, "post_id": 45069285, "comment_id": 77150738, "body": "@Richard what it explains, though, is that you get what you get in the standard <i>because</i> there is no portable way to do better. If you want to do better (which is a noble goal) you will have to accept some greater or lesser amount of abomination :)"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1499973201, "post_id": 45069285, "comment_id": 77150873, "body": "@hobbs: I am all about balanced abomination. :-)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1499979924, "post_id": 45069285, "comment_id": 77154295, "body": "@Richard: Sometimes you just have to accept that it&#39;s possible to make a standards-compliant C++ implementation which isn&#39;t useful.  Since the implementations people use for anything that matters <i>are</i> designed to be useful, you sometimes have to live with arguments like &quot;any sane implementation will do something reasonable&quot;.  I would have hoped that <code>std::random_device</code> would be in that category, but apparently it&#39;s not if some real implementations use a fixed-seed PRNG!  That goes way beyond einpoklum&#39;s argument."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1499984801, "post_id": 45069285, "comment_id": 77156363, "body": "@PeterCordes: Actually, I would argue that there probably are real platforms (with C++ compilers targeting them?) in which you just don&#39;t have effective access to a randomness source. For sure some embedded devices could be like that."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1499992353, "post_id": 45069285, "comment_id": 77158404, "body": "@einpoklum: A best-effort attempt to gather some randomness would maybe still be better than a fixed seed, though.  e.g. sample the low bits of a high-precision clock a few times, mix in a PID and maybe some other things that vary between runs.  Some argue that producing identical sequences every time is the best way to indicate that there isn&#39;t a good quality RNG available, but IMO that&#39;s a sign of an over-simplified API.  If there was an optional <code>high_quality_only=false</code> arg, you could run <code>rd(true)</code> to request failure if crypto-quality randomness wasn&#39;t available."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1499992515, "post_id": 45069285, "comment_id": 77158440, "body": "But code that wanted good-enough randomness for non-security use cases could get what they want from <code>rd()</code>.  And of course it&#39;s just a massive quality-of-implementation issue that MinGW is using a fixed seed on an OS that has a randomness source.  It sucks a lot that we can&#39;t trust <code>std::random_device</code> to give something close to as good as the platform can provide."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1500021592, "post_id": 45069285, "comment_id": 77168598, "body": "@PeterCordes: The point is that on some systems you probably can&#39;t sample the clock with high precision, and there are no processes."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1500039368, "post_id": 45069285, "comment_id": 77179785, "body": "Yes, I understand there will be some platforms where there&#39;s just so little randomness that you can&#39;t really do anything.  But as you say, usually only embedded, in which case any software that runs on it will (should) be tested carefully for that platform.  Not compiled from source by someone who just downloaded it, like will happen on MinGW, which is ruining <code>std::random_device</code> for everyone by providing an <i>unexpectedly</i> terrible implementation."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1500047087, "post_id": 45069285, "comment_id": 77185100, "body": "@PeterCordes: Fair enough."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 23, "last_activity_date": 1499903516, "creation_date": 1499903516, "answer_id": 45069285, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45069285#45069285", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>In a sense, this can't be done portably. That is, one can conceive a valid fully-deterministic platform running C++ (say, a simulator which steps the machine clock deterministically, and with \"determinized\" I/O) in which there is no source of randomness to seed a PRNG.</p>\n"}, {"comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1499904014, "post_id": 45069347, "comment_id": 77111799, "body": "This may fill the MT state, but still relies solely on <code>std::random_device</code>, and is therefore vulnerable to issues stemming from it."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499904066, "post_id": 45069347, "comment_id": 77111814, "body": "@Richard What issues are those?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1499904238, "post_id": 45069347, "comment_id": 77111868, "body": "I think I stated them clearly enough in the question. Happy to clarify/discuss, though."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 2, "creation_date": 1499904544, "post_id": 45069347, "comment_id": 77111956, "body": "@Richard Are there any real systems that don&#39;t actually implement a reasonable <code>std::random_device</code>? I know the standard allows a <code>PRNG</code> as  fall back but I feel that&#39;s just to cover themselves as it is hard to demand that every device that uses <code>C++</code> has a non-deterministic random source. And if they don&#39;t then what could you do about that anyway?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1499904657, "post_id": 45069347, "comment_id": 77111983, "body": "@Richard So I suspect that <code>std::random_device</code> is as good as it gets in terms of <i>portable</i> non-deterministic random source."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1499904683, "post_id": 45069347, "comment_id": 77111990, "body": "@Galik, yes, MinGW does not: it&#39;s deterministic. The fact that true randomness is not guaranteed should be reason enough to ignore it except as a fallback."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1499904796, "post_id": 45069347, "comment_id": 77112018, "body": "In fact, MinGW deliberately chose an identical starting sequence to make the fact that <code>std::random_device</code> is a PRNG, and not a CSPRNG, obvious. <a href=\"https://stackoverflow.com/questions/18880654/why-do-i-get-the-same-sequence-for-every-run-with-stdrandom-device-with-mingw\" title=\"why do i get the same sequence for every run with stdrandom device with mingw\">stackoverflow.com/questions/18880654/&hellip;</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1499905003, "post_id": 45069347, "comment_id": 77112063, "body": "@AlexanderHuszagh I don&#39;t use windows but I was under the impression that the problem with MinGW was a bug, not a feature, but I could be wrong. Is that true of all versions?"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1499905188, "post_id": 45069347, "comment_id": 77112114, "body": "@Galik, I am unsure, but I have confirmed it with my own code. I believe it is mostly unimplemented, and the consistency of the results is a feature (to notify an observant user). The fact that <code>std::random_device</code> is not guaranteed to be a CSPRNG is reason enough for me to consider it unreliable, and that other options should be used when possible."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1499905466, "post_id": 45069347, "comment_id": 77112171, "body": "@AlexanderHuszagh I think MinGW is a port so it tends to suffer from incomplete implementation for longer than other compilers perhaps. But I don&#39;t think compiler implementers are going to avoid implementing a proper non-deterministic source unless the device simply doesn&#39;t have one. That&#39;s what the &quot;get out&quot; clause of for."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 0, "creation_date": 1499906236, "post_id": 45069347, "comment_id": 77112346, "body": "That&#39;s dangerous though, since you are then making your portable solution highly dependent on the compiler and compiler version. Remember, this was back in 2013: it hasn&#39;t changed since. <code>std::random_device</code> may be good if a fallback is needed, but inherently, it&#39;s not reliable and should be considered a last resort if known CSPRNGs aren&#39;t available."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 5, "creation_date": 1499909151, "post_id": 45069347, "comment_id": 77113009, "body": "@AlexanderHuszagh I&#39;m not so sure. My intention is to make my &quot;portable solution&quot; dependent on <i>the device</i> because if the device supports non-deterministic generators then so should <code>std::random_device</code>. I believe that is the spirit of the standard. So I have searched and can only find <code>MinGW</code> that is broken in this respect. No one seems to be reporting this problem with anything else that I have found. So, in my library, I have simply marked <code>MinGW</code> as unsupported. If there was a wider problem then I&#39;d re-think it. I just don&#39;t see the evidence of that right now."}, {"owner": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "edited": false, "score": 0, "creation_date": 1499934811, "post_id": 45069347, "comment_id": 77123301, "body": "This code is wrong (at least) for 64-bit-MTs. <code>std::array&lt;typename Generator::result_type, Generator::state_size&gt;</code> does not work since seed_seq uses only 32 bit per element (and you only fill 32 bit of it anyway), so for a 64-bit MT you&#39;d need at least twice as many elements."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499975243, "post_id": 45069347, "comment_id": 77151906, "body": "@Galik: If you were to XOR the random device with time, then it would at least generate separate results for each run of the program (to the resolution of the timer). This seems to me an improvement over the current MinGW situation."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 5, "creation_date": 1499992974, "post_id": 45069347, "comment_id": 77158527, "body": "I&#39;m really disappointed that MinGW is ruining <code>std::random_device</code> for everyone by making it available in a form that doesn&#39;t deliver the platform&#39;s randomness capabilities.  Low-quality implementations defeat the purpose of the API existing.  It would be better IMO if they just didn&#39;t implement it at all until they have it working.  (Or better, if the API provided a way to request failure if high-quality randomness wasn&#39;t available, so MinGW could avoid causing security risks while still giving different seeds for games or whatever.)"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 5, "last_activity_date": 1499974308, "last_edit_date": 1499974308, "creation_date": 1499903922, "answer_id": 45069347, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45069347#45069347", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>The implementation I am working on takes advantage of the <code>state_size</code> property of the <code>mt19937</code> PRNG to decide how many seeds to provide on initialization:</p>\n\n<pre><code>using Generator = std::mt19937;\n\ninline\nauto const&amp; random_data()\n{\n    thread_local static std::array&lt;typename Generator::result_type, Generator::state_size&gt; data;\n    thread_local static std::random_device rd;\n\n    std::generate(std::begin(data), std::end(data), std::ref(rd));\n\n    return data;\n}\n\ninline\nGenerator&amp; random_generator()\n{\n    auto const&amp; data = random_data();\n\n    thread_local static std::seed_seq seeds(std::begin(data), std::end(data));\n    thread_local static Generator gen{seeds};\n\n    return gen;\n}\n\ntemplate&lt;typename Number&gt;\nNumber random_number(Number from, Number to)\n{\n    using Distribution = typename std::conditional\n    &lt;\n        std::is_integral&lt;Number&gt;::value,\n        std::uniform_int_distribution&lt;Number&gt;,\n        std::uniform_real_distribution&lt;Number&gt;\n    &gt;::type;\n\n    thread_local static Distribution dist;\n\n    return dist(random_generator(), typename Distribution::param_type{from, to});\n}\n</code></pre>\n\n<p>I think there is room for improvement because <code>std::random_device::result_type</code> could differ from <code>std::mt19937::result_type</code> in size and range so that should really be taken into account.</p>\n\n<p><strong>A note about <a href=\"http://en.cppreference.com/w/cpp/numeric/random/random_device\" rel=\"nofollow noreferrer\">std::random_device</a>.</strong></p>\n\n<p>According to the <code>C++11(/14/17)</code> standard(s):</p>\n\n<blockquote>\n  <p><strong>26.5.6</strong> Class random_device <strong>[</strong> rand.device <strong>]</strong></p>\n  \n  <p><strong>2</strong> If implementation limitations prevent generating non-deterministic random numbers, the implementation may employ a random number engine.</p>\n</blockquote>\n\n<p>This means the implementation may only generate <em>deterministic</em> values if it is prevented from generating <em>non-deterministic</em> ones by some limitation.</p>\n\n<p>The <code>MinGW</code> compiler on <code>Windows</code> famously does not provide <em>non-deterministic</em> values from its <code>std::random_device</code>, despite them being easily available from the Operating System. So I consider this a bug and not likely a common occurrence across implementations and platforms. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 11, "creation_date": 1499904835, "post_id": 45069417, "comment_id": 77112024, "body": "This is what I&#39;ve done in the past, but the, or at least a, question is WTF can&#39;t the library writers for these platforms do this for us? I expect file access and threads (for example) to be abstracted by library implementations, so why not random number generation?"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "edited": false, "score": 0, "creation_date": 1499934722, "post_id": 45069417, "comment_id": 77123247, "body": "@etarion, you can simply use a larger seed then. The <code>sysrandom</code> logic intentionally avoids any requirements on the input size. You can easily up the logic to the pool size of /dev/urandom (Linux 4.8 and below) to 512 bytes. This answer simply uses a simple example to show how to seed the generator, in most examples, fully seeding an mt19337 PRNG will not be practical (although you can reasonable do much more than what I&#39;ve done above)."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 2, "creation_date": 1499975013, "post_id": 45069417, "comment_id": 77151785, "body": "OP here: It would be nice if this answer demonstrated the seeding a bit better. As much as possible, I am hoping for answers which generate copy-pastable code that does the job better than the simple example I posted in my question without requiring much technical interpretation or thought on the part of the coder."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 4, "creation_date": 1499978200, "post_id": 45069417, "comment_id": 77153427, "body": "I thought <code>&#47;dev&#47;random</code> would be the better choice for seeding an RNG, but apparently <a href=\"https://www.2uo.de/myths-about-urandom/\" rel=\"nofollow noreferrer\"><code>&#47;dev&#47;urandom</code> is still considered computationally secure</a> even when <code>&#47;dev&#47;random</code> would block because of low available entropy, so <code>urandom</code> is the recommended choice for everything except maybe one-time pads.  See also <a href=\"https://unix.stackexchange.com/questions/324209/when-to-use-dev-random-vs-dev-urandom\" title=\"when to use dev random vs dev urandom\">unix.stackexchange.com/questions/324209/&hellip;</a>.  Beware of predictable seeds from <code>urandom</code> very early after bootup, though."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1499979265, "post_id": 45069417, "comment_id": 77153975, "body": "Linux&#39;s <a href=\"http://man7.org/linux/man-pages/man2/getrandom.2.html\" rel=\"nofollow noreferrer\"><code>getrandom(2)</code></a> system call is like opening and reading <code>&#47;dev&#47;urandom</code>, except it will block if the kernel&#39;s randomness sources haven&#39;t been initialized yet.  I think this saves you from the early-boot low-quality-randomness problem without blocking in other cases like <code>&#47;dev&#47;random</code> does."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1499980347, "post_id": 45069417, "comment_id": 77154518, "body": "@PeterCordes, for sure, and that&#39;s a great option when available. However, it does not work on BSD or other *Nixes, which is something <code>&#47;dev&#47;urandom</code> generally works on. The Python mailing list discussion on this is something I generally subscribe to: <a href=\"https://bugs.python.org/issue27266\" rel=\"nofollow noreferrer\">bugs.python.org/issue27266</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1500097671, "post_id": 45069417, "comment_id": 77201089, "body": "Suggestion: whitelist implementations where <code>std::random_device</code> is known to not suck, and use it instead of actually coding up a read() from <code>&#47;dev&#47;urandom</code>?  Then you don&#39;t have to worry about maintaining the platform support code if some OS decides there&#39;s an even better way to get randomness.  It&#39;s unlikely that an implementation will regress from usable to unusable.  Or if you don&#39;t use it for a security-sensitive purpose, it might make sense to take the riskier approach of only <code>random_device</code> on a few known-bad platforms like MinGW."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1500098085, "post_id": 45069417, "comment_id": 77201183, "body": "Also, for any x86 target, you can check <code>CPUID</code> and run <a href=\"http://felixcloutier.com/x86/RDSEED.html\" rel=\"nofollow noreferrer\"><code>RDSEED</code> (<code>int _rdseed64_step( unsigned __int64 *)</code></a> if CPUID says it&#39;s available.  (<a href=\"http://felixcloutier.com/x86/RDRAND.html\" rel=\"nofollow noreferrer\"><code>RDRAND</code></a> apparently doesn&#39;t have as high a randomness-quality guarantee, hence the existence of <code>RDSEED</code> which is compliant to NIST SP800-90B and NIST SP800-90C.)  But note that you still need a fallback because the API allows it to report an error (e.g. if it&#39;s physically damaged in a given CPU).  IDK if real hardware ever does that."}], "tags": [], "owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "is_accepted": false, "score": 59, "last_activity_date": 1500059231, "last_edit_date": 1500059231, "creation_date": 1499904331, "answer_id": 45069417, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45069417#45069417", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>I would argue the greatest flaw with <code>std::random_device</code> is the that it is allowed a deterministic fallback if no CSPRNG is available. This alone is a good reason not to seed a PRNG using <code>std::random_device</code>, since the bytes produced may be deterministic.  It unfortunately doesn't provide an API to find out when this happens, or to request failure instead of low-quality random numbers.</p>\n\n<p>That is, there is no completely <strong>portable</strong> solution: however, there is a decent, minimal approach. You can use a minimal wrapper around a CSPRNG (defined as <code>sysrandom</code> below) to seed the PRNG.</p>\n\n<h2>Windows</h2>\n\n<hr>\n\n<p>You can rely on <code>CryptGenRandom</code>, a CSPRNG. For example, you may use the following code:</p>\n\n<pre><code>bool acquire_context(HCRYPTPROV *ctx)\n{\n    if (!CryptAcquireContext(ctx, nullptr, nullptr, PROV_RSA_FULL, 0)) {\n        return CryptAcquireContext(ctx, nullptr, nullptr, PROV_RSA_FULL, CRYPT_NEWKEYSET);\n    }\n    return true;\n}\n\n\nsize_t sysrandom(void* dst, size_t dstlen)\n{\n    HCRYPTPROV ctx;\n    if (!acquire_context(&amp;ctx)) {\n        throw std::runtime_error(\"Unable to initialize Win32 crypt library.\");\n    }\n\n    BYTE* buffer = reinterpret_cast&lt;BYTE*&gt;(dst);\n    if(!CryptGenRandom(ctx, dstlen, buffer)) {\n        throw std::runtime_error(\"Unable to generate random bytes.\");\n    }\n\n    if (!CryptReleaseContext(ctx, 0)) {\n        throw std::runtime_error(\"Unable to release Win32 crypt library.\");\n    }\n\n    return dstlen;\n}\n</code></pre>\n\n<h2>Unix-Like</h2>\n\n<hr>\n\n<p>On many Unix-like systems, you should use <a href=\"http://www.2uo.de/myths-about-urandom/\" rel=\"noreferrer\">/dev/urandom</a> when possible (although this is not guaranteed to exist on POSIX-compliant systems).</p>\n\n<pre><code>size_t sysrandom(void* dst, size_t dstlen)\n{\n    char* buffer = reinterpret_cast&lt;char*&gt;(dst);\n    std::ifstream stream(\"/dev/urandom\", std::ios_base::binary | std::ios_base::in);\n    stream.read(buffer, dstlen);\n\n    return dstlen;\n}\n</code></pre>\n\n<h2>Other</h2>\n\n<hr>\n\n<p>If no CSPRNG is available, you might choose to rely on <code>std::random_device</code>. However, I would avoid this if possible, since various compilers (most notably, MinGW) implement it with as a <a href=\"https://stackoverflow.com/questions/18880654/why-do-i-get-the-same-sequence-for-every-run-with-stdrandom-device-with-mingw\">PRNG</a> (in fact, producing the same sequence every time to alert humans that it's not properly random).</p>\n\n<h2>Seeding</h2>\n\n<hr>\n\n<p>Now that we have our pieces with minimal overhead, we can generate the desired bits of random entropy to seed our PRNG. The example uses (an obviously insufficient) 32-bits to seed the PRNG, and you should increase this value (which is dependent on your CSPRNG).</p>\n\n<pre><code>std::uint_least32_t seed;    \nsysrandom(&amp;seed, sizeof(seed));\nstd::mt19937 gen(seed);\n</code></pre>\n\n<h2>Comparison To Boost</h2>\n\n<hr>\n\n<p>We can see parallels to boost::random_device (a true CSPRNG) after a quick look at the <a href=\"https://github.com/boostorg/random/blob/develop/src/random_device.cpp\" rel=\"noreferrer\">source code</a>. Boost uses <code>MS_DEF_PROV</code> on Windows, which is the provider type for <code>PROV_RSA_FULL</code>. The only thing missing would be verifying the cryptographic context, which can be done with <code>CRYPT_VERIFYCONTEXT</code>. On *Nix, Boost uses <code>/dev/urandom</code>. IE, this solution is portable, well-tested, and easy-to-use.</p>\n\n<h2>Linux Specialization</h2>\n\n<hr>\n\n<p>If you're willing to sacrifice succinctness for security, <a href=\"http://man7.org/linux/man-pages/man2/getrandom.2.html\" rel=\"noreferrer\"><code>getrandom</code></a> is an excellent choice on Linux 3.17 and above, and on recent Solaris. <code>getrandom</code> behaves identically to <code>/dev/urandom</code>, except it blocks if the kernel hasn't initialized its CSPRNG yet after booting.  The following snippet detects if Linux <code>getrandom</code> is available, and if not falls back to <code>/dev/urandom</code>.</p>\n\n<pre><code>#if defined(__linux__) || defined(linux) || defined(__linux)\n#   // Check the kernel version. `getrandom` is only Linux 3.17 and above.\n#   include &lt;linux/version.h&gt;\n#   if LINUX_VERSION_CODE &gt;= KERNEL_VERSION(3,17,0)\n#       define HAVE_GETRANDOM\n#   endif\n#endif\n\n// also requires glibc 2.25 for the libc wrapper\n#if defined(HAVE_GETRANDOM)\n#   include &lt;sys/syscall.h&gt;\n#   include &lt;linux/random.h&gt;\n\nsize_t sysrandom(void* dst, size_t dstlen)\n{\n    int bytes = syscall(SYS_getrandom, dst, dstlen, 0);\n    if (bytes != dstlen) {\n        throw std::runtime_error(\"Unable to read N bytes from CSPRNG.\");\n    }\n\n    return dstlen;\n}\n\n#elif defined(_WIN32)\n\n// Windows sysrandom here.\n\n#else\n\n// POSIX sysrandom here.\n\n#endif\n</code></pre>\n\n<h2>OpenBSD</h2>\n\n<hr>\n\n<p>There is one final caveat: modern OpenBSD does not have <code>/dev/urandom</code>. You should use <a href=\"https://man.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man2/getentropy.2\" rel=\"noreferrer\">getentropy</a> instead.</p>\n\n<pre><code>#if defined(__OpenBSD__)\n#   define HAVE_GETENTROPY\n#endif\n\n#if defined(HAVE_GETENTROPY)\n#   include &lt;unistd.h&gt;\n\nsize_t sysrandom(void* dst, size_t dstlen)\n{\n    int bytes = getentropy(dst, dstlen);\n    if (bytes != dstlen) {\n        throw std::runtime_error(\"Unable to read N bytes from CSPRNG.\");\n    }\n\n    return dstlen;\n}\n\n#endif\n</code></pre>\n\n<h2>Other Thoughts</h2>\n\n<hr>\n\n<p>If you need cryptographically secure random bytes, you should probably replace the fstream with POSIX's unbuffered open/read/close. This is because both <code>basic_filebuf</code> and <code>FILE</code> contain an internal buffer, which will be allocated via a standard allocator (and therefore not wiped from memory).</p>\n\n<p>This could easily be done by changing <code>sysrandom</code> to:</p>\n\n<pre><code>size_t sysrandom(void* dst, size_t dstlen)\n{\n    int fd = open(\"/dev/urandom\", O_RDONLY);\n    if (fd == -1) {\n        throw std::runtime_error(\"Unable to open /dev/urandom.\");\n    }\n    if (read(fd, dst, dstlen) != dstlen) {\n        close(fd);\n        throw std::runtime_error(\"Unable to read N bytes from CSPRNG.\");\n    }\n\n    close(fd);\n    return dstlen;\n}\n</code></pre>\n\n<h2>Thanks</h2>\n\n<hr>\n\n<p>Special thanks to Ben Voigt for pointing out <code>FILE</code> uses buffered reads, and therefore should not be used.</p>\n\n<p>I would also like to thank Peter Cordes for mentioning <code>getrandom</code>, and OpenBSD's lack of <code>/dev/urandom</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 2, "creation_date": 1499906767, "post_id": 45069584, "comment_id": 77112472, "body": "You really should use <code>&#47;dev&#47;urandom</code>, especially in a case like this. <code>&#47;dev&#47;random</code> blocks, and often without good reasons for doing so ([insert long explanation about how many different OSes estimate the randomness of the bytes produced by /dev/random])."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 2, "creation_date": 1499934245, "post_id": 45069584, "comment_id": 77122921, "body": "@AlexanderHuszagh True, although I\u2019ve had to code on systems where <code>&#47;dev&#47;urandom</code> didn\u2019t exist, and the alternative to blocking was determinism.  A box might have <code>&#47;dev&#47;hwrng</code> or <code>&#47;dev&#47;hw_random</code> as well, which should be even better."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1499977658, "post_id": 45069584, "comment_id": 77153129, "body": "Okay, I said, \u201csuch as <code>&#47;dev&#47;random</code>,\u201d and that seems to have sparked a holy war about <code>&#47;dev&#47;random</code> versus <code>&#47;dev&#47;urandom</code> on Linux that I did not intend when I gave that example.."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": -2, "last_activity_date": 1499905588, "creation_date": 1499905588, "answer_id": 45069584, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45069584#45069584", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>A given platform might have a source of entropy, such as <code>/dev/random</code>.  Nanoseconds since the Epoch with <code>std::chrono::high_resolution_clock::now()</code> is probably the best seed in the Standard Library.</p>\n\n<p>I previously have used something like <code>(uint64_t)( time(NULL)*CLOCKS_PER_SEC + clock() )</code> to get more bits of entropy for applications that aren\u2019t security-critical.</p>\n"}, {"comments": [{"owner": {"reputation": 1599, "user_id": 3748622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4499122363977cf6a85d7fc4dec39f35?s=128&d=identicon&r=PG&f=1", "display_name": "meneldal", "link": "https://stackoverflow.com/users/3748622/meneldal"}, "edited": false, "score": 3, "creation_date": 1499911252, "post_id": 45070076, "comment_id": 77113499, "body": "The addresses might have very little randomness. You always have the same allocations, so on smaller embedded systems where you have access the the whole memory, it&#39;s likely to get the same results each time. I&#39;d say it&#39;s likely good enough for a big system, but might do shit on a microcontroller."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1499914671, "post_id": 45070076, "comment_id": 77114238, "body": "I would guess <code>&amp;i ^ &amp;myseed</code> should have considerably less entropy than either one alone, since both are objects with static storage duration in the same translation unit and therefore likely to be rather close together.  And you don&#39;t seem to actually use the special value from the initialization of <code>myseed</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 7, "creation_date": 1499916169, "post_id": 45070076, "comment_id": 77114547, "body": "Converting dealocated pointers to ints is undefined behaviour; do it while it still exists.  <code>^</code> is a horrible hash combiner; if two values both have lots of entropy, but little compared to each other, it removes it.  <code>+</code> is usually better (as x+x only burns 1 bit of entropy in x, while x^x burns them all).  Function is not thead safe I suspect (<code>rd()</code>)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1499916512, "post_id": 45070076, "comment_id": 77114626, "body": "Oh and by <code>+</code> I mean on unsigned (<code>+</code> on signed is UB-bait).  While these are somewhat ridiculous UB cases, you did say portable.  Also consider getting the address of a function as an integral value if possible (uncertain if it is?)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 1599, "user_id": 3748622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4499122363977cf6a85d7fc4dec39f35?s=128&d=identicon&r=PG&f=1", "display_name": "meneldal", "link": "https://stackoverflow.com/users/3748622/meneldal"}, "edited": false, "score": 1, "creation_date": 1499917343, "post_id": 45070076, "comment_id": 77114795, "body": "@meneldal: Even on a full-strength PC, although the allocations might get different physical locations (depending on state of the machine external to the process), the pointers are abstracted by the process virtual address space, and likely highly repeatable, particularly is ASLR isn&#39;t in effect."}, {"owner": {"reputation": 1599, "user_id": 3748622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4499122363977cf6a85d7fc4dec39f35?s=128&d=identicon&r=PG&f=1", "display_name": "meneldal", "link": "https://stackoverflow.com/users/3748622/meneldal"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1499919638, "post_id": 45070076, "comment_id": 77115328, "body": "@Ben that&#39;s true, it&#39;s just worse on a system where all allocations are predictable. ASLR has been a thing for a while, so I forgot this wasn&#39;t always the standard."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1499954997, "post_id": 45070076, "comment_id": 77138789, "body": "I am unaware if <code>reinterpret_cast&lt;intptr_t&gt;(&amp;Entropyinator)</code> is defined behavior under the C++ standard.  Function pointers cannot be converted to <code>void*</code>, I don&#39;t know if they can be converted to <code>intptr_t</code> or not.  Prove this one way or the other, or don&#39;t use it in portable code."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1499975602, "post_id": 45070076, "comment_id": 77152105, "body": "@Yakk: XOR&#39;s poor performance as a hash combiner was what I was afraid of. Thanks for the addition suggestion."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 1599, "user_id": 3748622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4499122363977cf6a85d7fc4dec39f35?s=128&d=identicon&r=PG&f=1", "display_name": "meneldal", "link": "https://stackoverflow.com/users/3748622/meneldal"}, "edited": false, "score": 0, "creation_date": 1499975716, "post_id": 45070076, "comment_id": 77152164, "body": "@meneldal: The point of mucking with the addresses and timers is to try to find a best-effort offset such that even if random_device is a PRNG that restarts on each run of the application it will yield different results (provided the memory loads differently)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1499977277, "post_id": 45070076, "comment_id": 77152919, "body": "Don&#39;t add signed ints and cause undefined behavior as overflow when I told you it was a problem 6 comments above."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1499993395, "post_id": 45070076, "comment_id": 77158607, "body": "You should sample the low bits of the high-res clock between every other operation.  On x86, the CPU&#39;s timestamp counter increments at one count per reference cycle, where a reference cycle is the advertised CPU frequency (not the current turbo or power-saving  core clock frequency).  Differences in system load and other variations will change the number of cycles that calling other functions takes, especially functions that are being called for the first time in your program since they will probably miss in cache."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1499993719, "post_id": 45070076, "comment_id": 77158668, "body": "If you can scatter clock-sampling through other parts of your startup code (especially slow parts) before you need to seed your RNG, that&#39;s much better.  You&#39;ll get timestamps with more unpredictable variations in spacing, especially if you make some system calls or especially do any file or network I/O before you need the RNG."}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": false, "score": 0, "last_activity_date": 1499976007, "last_edit_date": 1499976007, "creation_date": 1499909801, "answer_id": 45070076, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45070076#45070076", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>Here's my own stab at the question:</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;cstdint&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nuint32_t LilEntropy(){\n  //Gather many potential forms of entropy and XOR them\n  const  uint32_t my_seed = 1273498732; //Change during distribution\n  static uint32_t i = 0;        \n  static std::random_device rd; \n  const auto hrclock = std::chrono::high_resolution_clock::now().time_since_epoch().count();\n  const auto sclock  = std::chrono::system_clock::now().time_since_epoch().count();\n  auto *heap         = malloc(1);\n  const auto mash = my_seed + rd() + hrclock + sclock + (i++) +\n    reinterpret_cast&lt;intptr_t&gt;(heap)    + reinterpret_cast&lt;intptr_t&gt;(&amp;hrclock) +\n    reinterpret_cast&lt;intptr_t&gt;(&amp;i)      + reinterpret_cast&lt;intptr_t&gt;(&amp;malloc)  +\n    reinterpret_cast&lt;intptr_t&gt;(&amp;LilEntropy);\n  free(heap);\n  return mash;\n}\n\n//Fully seed the mt19937 engine using as much entropy as we can get our\n//hands on\nvoid SeedGenerator(std::mt19937 &amp;mt){\n  std::uint_least32_t seed_data[std::mt19937::state_size];\n  std::generate_n(seed_data, std::mt19937::state_size, std::ref(LilEntropy));\n  std::seed_seq q(std::begin(seed_data), std::end(seed_data));\n  mt.seed(q);\n}\n\nint main(){\n  std::mt19937 mt;\n  SeedGenerator(mt);\n\n  for(int i=0;i&lt;100;i++)\n    std::cout&lt;&lt;mt()&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>The idea here is to use XOR to combine many potential sources of entropy (fast time, slow time, <code>std::random-device</code>, static variable locations, heap locations, function locations, library locations, program-specific values) to make a best-effort attempt at initializing the mt19937. As long as at least once source is \"good\", the result will be at least that \"good\".</p>\n\n<p>This answer is not as short as would be preferable and may contain one or more mistakes of logic. So I'm considering it a work in progress. Please comment if you have feedback.</p>\n"}, {"comments": [{"owner": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "edited": false, "score": 1, "creation_date": 1499945321, "post_id": 45078542, "comment_id": 77130838, "body": "seed_seq has issues though, <a href=\"http://www.pcg-random.org/posts/developing-a-seed_seq-alternative.html\" rel=\"nofollow noreferrer\">pcg-random.org/posts/developing-a-seed_seq-alternative.html</a>"}, {"owner": {"reputation": 269, "user_id": 2382517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qxrpb.jpg?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/2382517/kostas"}, "edited": false, "score": 0, "creation_date": 1575452552, "post_id": 45078542, "comment_id": 104568085, "body": "There is nothing in the C++ standard or anywere to guarantee that the random number generator will use the whole array when you seed from seed_seq. This method will lead to failure if you are using the rng for a scientific simulation, and obviously also for cryptography. About the only use case for this will be to randomize a videogame, but there it would be an overkill."}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": false, "score": 15, "last_activity_date": 1595493995, "last_edit_date": 1595493995, "creation_date": 1499943171, "answer_id": 45078542, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45078542#45078542", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>You can use a <a href=\"https://en.cppreference.com/w/cpp/numeric/random/seed_seq\" rel=\"nofollow noreferrer\"><code>std::seed_seq</code></a> and fill it to at least the requires state size for the generator using Alexander Huszagh's method of getting the entropy:</p>\n<pre><code>size_t sysrandom(void* dst, size_t dstlen); //from Alexander Huszagh answer above\n\nvoid foo(){\n\n    std::array&lt;std::mt19937::UIntType, std::mt19937::state_size&gt; state;\n    sysrandom(state.begin(), state.length*sizeof(std::mt19937::UIntType));\n    std::seed_seq s(state.begin(), state.end());\n\n    std::mt19937 g;\n    g.seed(s);\n}\n</code></pre>\n<p>If there was a proper way to fill or create a <a href=\"https://en.cppreference.com/w/cpp/named_req/SeedSequence\" rel=\"nofollow noreferrer\">SeedSequence</a> from a <a href=\"https://en.cppreference.com/w/cpp/named_req/UniformRandomBitGenerator\" rel=\"nofollow noreferrer\">UniformRandomBitGenerator</a> in the standard library using <code>std::random_device</code> for seeding properly would be much simpler.</p>\n"}, {"comments": [{"owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 1, "creation_date": 1500040791, "post_id": 45091979, "comment_id": 77180803, "body": "I agree with your point that seeding with the time is probably good enough in practice, if you don&#39;t need it to be secure.  But I can&#39;t agree with the rest of your answer.  Seeding with the hash of the time is no better than seeding with the time itself."}, {"owner": {"reputation": 13278, "user_id": 688624, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0714eded10b5ccee614c7134360974b?s=128&d=identicon&r=PG", "display_name": "imallett", "link": "https://stackoverflow.com/users/688624/imallett"}, "reply_to_user": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 0, "creation_date": 1500056856, "post_id": 45091979, "comment_id": 77190434, "body": "@D.W. Empirically, it is <b>much</b> better. The reason is that the hash is discontinuous and spans a much wider range of values (try this yourself: seed with <code>1</code> and <code>2</code> and observe that the sequence of floats generated by them takes a while to really diverge)."}, {"owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 0, "creation_date": 1500057398, "post_id": 45091979, "comment_id": 77190690, "body": "I don&#39;t see why that matters.  We&#39;re only running on a single seed at a time.  The space of possible values for the seed (the entropy of the seed) is the same either way -- hashing doesn&#39;t increase entropy.  Perhaps you could edit the question to explain why hashing is better?"}], "tags": [], "owner": {"reputation": 13278, "user_id": 688624, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0714eded10b5ccee614c7134360974b?s=128&d=identicon&r=PG", "display_name": "imallett", "link": "https://stackoverflow.com/users/688624/imallett"}, "is_accepted": false, "score": 2, "last_activity_date": 1499985603, "creation_date": 1499985603, "answer_id": 45091979, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/45091979#45091979", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>There's nothing wrong with seeding by using time, assuming you don't need it to be secure (and you didn't say this was necessary).  The insight is that you can use hashing to fix the non-randomness.  I've found this works adequately in all cases, including and in-particular for heavy Monte Carlo simulations.</p>\n\n<p>One nice feature of this approach is that it generalizes to initialization from other not-really-random sets of seeds.  For example, if you want each thread to have its own RNG (for threadsafety), you can just initialize based on hashed thread ID.</p>\n\n<p>The following is a <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>, distilled from <a href=\"https://geometrian.com/programming/projects/index.php?project=libash\" rel=\"nofollow noreferrer\">my codebase</a> (for simplicity; some OO support structures elided):</p>\n\n<pre><code>#include &lt;cstdint&gt; //`uint32_t`\n#include &lt;functional&gt; //`std::hash`\n#include &lt;random&gt; //`std::mt19937`\n#include &lt;iostream&gt; //`std::cout`\n\nstatic std::mt19937 rng;\n\nstatic void seed(uint32_t seed) {\n    rng.seed(static_cast&lt;std::mt19937::result_type&gt;(seed));\n}\nstatic void seed() {\n    uint32_t t = static_cast&lt;uint32_t&gt;( time(nullptr) );\n    std::hash&lt;uint32_t&gt; hasher; size_t hashed=hasher(t);\n    seed( static_cast&lt;uint32_t&gt;(hashed) );\n}\n\nint main(int /*argc*/, char* /*argv*/[]) {\n    seed();\n    std::uniform_int_distribution&lt;&gt; dis(0, 5);\n    std::cout &lt;&lt; dis(rng);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2037, "user_id": 9812548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VS24T.jpg?s=128&g=1", "display_name": "Dan Anderson", "link": "https://stackoverflow.com/users/9812548/dan-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1571671422, "creation_date": 1571671422, "answer_id": 58489438, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng/58489438#58489438", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<ul>\n<li>Use getentropy() to seed a pseudorandom number generator (PRNG).</li>\n<li>Use getrandom() if you want random values (instead of, say, <code>/dev/urandom</code> or <code>/dev/random</code>).</li>\n</ul>\n\n<p>These are available on modern UNIX-like systems, such as Linux, Solaris, and OpenBSD.</p>\n"}], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11991, "favorite_count": 40, "answer_count": 8, "score": 117, "last_activity_date": 1595493995, "creation_date": 1499903058, "last_edit_date": 1499959175, "question_id": 45069219, "link": "https://stackoverflow.com/questions/45069219/how-to-succinctly-portably-and-thoroughly-seed-the-mt19937-prng", "title": "How to succinctly, portably, and thoroughly seed the mt19937 PRNG?", "body": "<p>I seem to see many answers in which someone suggests using <code>&lt;random&gt;</code> to generate random numbers, usually along with code like this:</p>\n\n<pre><code>std::random_device rd;  \nstd::mt19937 gen(rd());\nstd::uniform_int_distribution&lt;&gt; dis(0, 5);\ndis(gen);\n</code></pre>\n\n<p>Usually this replaces some kind of \"unholy abomination\" such as:</p>\n\n<pre><code>srand(time(NULL));\nrand()%6;\n</code></pre>\n\n<p>We might <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"noreferrer\">criticize</a> the old way by arguing that <code>time(NULL)</code> provides low entropy, <code>time(NULL)</code> is predictable, and the end result is non-uniform.</p>\n\n<p>But all of that is true of the new way: it just has a shinier veneer. </p>\n\n<ul>\n<li><p><code>rd()</code> returns a single <code>unsigned int</code>. This has at least 16 bits and probably 32. That's not enough to seed MT's 19937 bits of state.</p></li>\n<li><p>Using <code>std::mt19937 gen(rd());gen()</code> (seeding with 32 bits and looking at the first output) doesn't give a good output distribution. 7 and 13 can never be the first output. Two seeds produce 0. Twelve seeds produce 1226181350. (<a href=\"http://www.pcg-random.org/posts/cpp-seeding-surprises.html\" rel=\"noreferrer\">Link</a>)</p></li>\n<li><p><code>std::random_device</code> can be, and sometimes is, implemented as a simple PRNG with a fixed seed. It might therefore produce the same sequence on every run. (<a href=\"https://stackoverflow.com/questions/18880654/why-do-i-get-the-same-sequence-for-every-run-with-stdrandom-device-with-mingw\">Link</a>) This is even worse than <code>time(NULL)</code>.</p></li>\n</ul>\n\n<p>Worse yet, it is very easy to copy and paste the foregoing code snippets, despite the problems they contain. Some solutions to the this require acquiring <a href=\"http://www.pcg-random.org/\" rel=\"noreferrer\">largish</a> <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/boost_random.html\" rel=\"noreferrer\">libraries</a> which may not be suitable to everyone.</p>\n\n<p>In light of this, my question is <strong>How can one succinctly, portably, and thoroughly seed the mt19937 PRNG in C++?</strong></p>\n\n<p>Given the issues above, a good answer:</p>\n\n<ul>\n<li>Must fully seed the mt19937/mt19937_64.</li>\n<li>Cannot rely solely on <code>std::random_device</code> or <code>time(NULL)</code> as a source of entropy.</li>\n<li>Should not rely on Boost or other libaries.</li>\n<li>Should fit in a small number of lines such that it would look nice copy-pasted into an answer.</li>\n</ul>\n\n<p><strong>Thoughts</strong></p>\n\n<ul>\n<li><p>My current thought is that outputs from <code>std::random_device</code> can be mashed up (perhaps via XOR) with <code>time(NULL)</code>, values derived from <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"noreferrer\">address space randomization</a>, and a hard-coded constant (which could be set during distribution) to get a best-effort shot at entropy.</p></li>\n<li><p><code>std::random_device::entropy()</code> <a href=\"https://stackoverflow.com/questions/28390843/how-to-find-the-true-entropy-of-stdrandom-device\">does not</a> give a good indication of what <code>std::random_device</code> might or might not do.</p></li>\n</ul>\n"}, {"tags": ["c++", "visual-studio-2010", "wstring"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1499903634, "post_id": 45069187, "comment_id": 77111702, "body": "I&#39;m pretty sure the first case is a compiler / standard library bug; that should work"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1499903956, "post_id": 45069187, "comment_id": 77111786, "body": "This is probably not a compiler/library bug.  There are reasons for not having implicit conversions between ASCII character conversion to wide character conversion. Or a string of <i>narrow</i> characters to a string of <i>wide</i> characters."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499904327, "post_id": 45069187, "comment_id": 77111892, "body": "If you&#39;re trying to append to an existing string, why do you have the type declaration on that line? That declares a new variable."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1499904457, "post_id": 45069187, "comment_id": 77111931, "body": "You should try a newer version of VC++.  Since <code>std::to_wstring</code> was added in C++11, it&#39;s no surprise that VC2010 support is incomplete."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1499912238, "post_id": 45069187, "comment_id": 77113735, "body": "@BenVoigt, an autocompletion does show his function inside IDE."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1499916753, "post_id": 45069187, "comment_id": 77114676, "body": "@Igor: But only with a fraction of the overloads it should come with.  It&#39;s not totally missing, but incomplete."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1499918277, "post_id": 45069187, "comment_id": 77114964, "body": "<code>std::to_wstring()</code> is a C++11 thing, and VS10 doesn&#39;t exactly have stellar C++11 support. My bet is that upgrading to a newer version of VS will resolve that particular problem."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 4, "last_activity_date": 1499903300, "creation_date": 1499903300, "answer_id": 45069256, "question_id": 45069187, "link": "https://stackoverflow.com/questions/45069187/append-an-integer-to-stdwstring-gives-an-error/45069256#45069256", "title": "Append an integer to std::wstring gives an error", "body": "<p>The regular <code>std::ostringstream</code> is not wide.  The <code>wstring</code> would like to be assigned a wide string.  </p>\n\n<p>You'll need <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostringstream\" rel=\"nofollow noreferrer\"><code>std::wostringstream</code></a>  </p>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 3, "last_activity_date": 1499904372, "creation_date": 1499904372, "answer_id": 45069424, "question_id": 45069187, "link": "https://stackoverflow.com/questions/45069187/append-an-integer-to-stdwstring-gives-an-error/45069424#45069424", "title": "Append an integer to std::wstring gives an error", "body": "<p>You cannot use a compound assignment in a variable declaration.</p>\n\n<p>The <code>=</code> introducing an initializer is not an assignment operator, it is part of the grammar for declarations.  You cannot substitute some seemingly-related token.</p>\n\n<p>If you want to initialize a variable, use simple <code>=</code>:</p>\n\n<pre><code>std::wstring temp = std::to_wstring( GetValue() );\n</code></pre>\n\n<p>If you want to do compound assignment, do it in a separate statement subsequent to the declaration:</p>\n\n<pre><code>std::wstring temp;\ntemp += std::to_wstring( GetValue() );\n</code></pre>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "accepted_answer_id": 45069256, "answer_count": 2, "score": 0, "last_activity_date": 1499904372, "creation_date": 1499902863, "question_id": 45069187, "link": "https://stackoverflow.com/questions/45069187/append-an-integer-to-stdwstring-gives-an-error", "title": "Append an integer to std::wstring gives an error", "body": "<p>ALL,</p>\n\n<p>I'm using MSVC 2010 and have a problem with the subject.</p>\n\n<p>Using following code:</p>\n\n<pre><code>int GetValue() {return m_int;};\n\nstd::wstring temp += std::to_wstring( GetValue() );\n</code></pre>\n\n<p>gives an error:</p>\n\n<pre><code>ambiguous call to overloaded function\n1&gt;          c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\string(771): could be 'std::wstring std::to_wstring(long double)'\n1&gt;          c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\string(762): or       'std::wstring std::to_wstring(_ULonglong)'\n1&gt;          c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\string(753): or       'std::wstring std::to_wstring(_Longlong)'\n1&gt;          while trying to match the argument list '(int)'\n</code></pre>\n\n<p>Using following code:</p>\n\n<pre><code>ostringstream ostr;\nostr &lt;&lt; GetValue();\nstd::wstring temp += ostr.str();\n</code></pre>\n\n<p>gives following error:</p>\n\n<pre><code>error C2679: binary '+=' : no operator found which takes a right-hand operand of type 'std::basic_string&lt;_Elem,_Traits,_Ax&gt;' (or there is no acceptable conversion)\n</code></pre>\n\n<p>Where I am wrong?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "arrays", "string", "templates"], "comments": [{"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 1, "creation_date": 1499902140, "post_id": 45069063, "comment_id": 77111340, "body": "What&#39;s the error?"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1499902163, "post_id": 45069063, "comment_id": 77111347, "body": "Your code seems really redundant and needs refactoring."}, {"owner": {"reputation": 11, "user_id": 8298736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2045ef13bd0d1dc85abd8b536b1cadb?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8298736/david"}, "edited": false, "score": 0, "creation_date": 1499958265, "post_id": 45069063, "comment_id": 77141450, "body": "I am a novice and trying to learn with the tools I currently know.  I know that I will get better and more efficient with practice."}], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1499902544, "post_id": 45069097, "comment_id": 77111432, "body": "Other than valgrind, I&#39;d recommend using the Clang Sanitizers. I personally prefer Clang&#39;s Santizers to valgrind, and some of them are easy to use in gcc as well"}, {"owner": {"reputation": 11, "user_id": 8298736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2045ef13bd0d1dc85abd8b536b1cadb?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8298736/david"}, "edited": false, "score": 0, "creation_date": 1499957978, "post_id": 45069097, "comment_id": 77141227, "body": "Thanks, that helped.  I looked at the code and I suppose what I did wrong was reverse the newSize and mSize, where I was essentially iterating nothing.  I changed it to be:  &quot;if larger, write set the new size and write up to what we have&quot; so the remaining indexes are null, and conversely only &quot;write up to the newSize&quot; when the  new Size is smaller.  Works now!"}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 0, "last_activity_date": 1499902343, "creation_date": 1499902343, "answer_id": 45069097, "question_id": 45069063, "link": "https://stackoverflow.com/questions/45069063/template-for-resizing-arrays/45069097#45069097", "title": "Template for resizing arrays", "body": "<p>Take a look at this code:</p>\n\n<pre><code>T* newArray = new T[newSize];\nif (newSize &gt;= mSize)\n{\n    for (int i = 0; i &lt; newSize; ++i)\n        newArray[i] = mData[i];\n}\n</code></pre>\n\n<p>Notice that if the new size is greater than the old size, you iterate from 0 up to <code>newSize</code> reading values from the old array. The problem is that the old array only has indices that are valid from 0 to <code>mSize - 1</code>, not from 0 to <code>newSize - 1</code>, so this reads off the end of the array. This leads to undefined behavior in all cases (oops!), but for primitive types this typically doesn't cause a crash and you'd only see this for strings.</p>\n\n<p>You might want to look at the rest of your code to make sure the loop bounds are correct, since I think you'll find at least one more loop that isn't set up properly.</p>\n\n<p>Also, consider looking at tools like <code>valgrind</code>, which are excellent at diagnosing memory errors like these.</p>\n\n<p>As a complete incidental finding, you might also want to think about whether you need to do two allocations and two deallocations. Can you do this with just one new allocation and one deallocation?</p>\n"}, {"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 1, "creation_date": 1499903146, "post_id": 45069155, "comment_id": 77111592, "body": "Wouldn&#39;t <code>std::fill</code> and <code>std::copy</code> essentially do the same thing, except more type-safely?"}, {"owner": {"reputation": 11, "user_id": 8298736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2045ef13bd0d1dc85abd8b536b1cadb?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8298736/david"}, "edited": false, "score": 0, "creation_date": 1499958332, "post_id": 45069155, "comment_id": 77141502, "body": "I was trying to write it with the limited tools I know right now.  Have not learned memset/memcpy yet.  I am sure those will make my life much easier!"}], "tags": [], "owner": {"reputation": 4147, "user_id": 6654077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa3deaf30afffe58c663f22106e4fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Fabien", "link": "https://stackoverflow.com/users/6654077/fabien"}, "is_accepted": false, "score": 0, "last_activity_date": 1499973002, "last_edit_date": 1499973002, "creation_date": 1499902669, "answer_id": 45069155, "question_id": 45069063, "link": "https://stackoverflow.com/questions/45069063/template-for-resizing-arrays/45069155#45069155", "title": "Template for resizing arrays", "body": "<p>Assuming <code>mData</code> is of type <code>T*</code>, you can try this something like:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid Array&lt;T&gt;::resize(int newSize)\n{       \n    if (newSize == mSize) {\n        return;\n    }\n    T* newArray = new T[newSize];\n    if (newSize &lt; mSize) {\n        memcpy(newArray, mData, newSize * sizeof(T));\n    } else {\n        memset(newArray, 0, mSize * sizeof(T));\n        memcpy(newArray, mData, mSize * sizeof(T));\n    }\n    delete[] mData;\n    mData = newArray;\n    mSize = newSize;\n}\n</code></pre>\n\n<p>Key points:</p>\n\n<ul>\n<li>if size is the same as previously, then there is no resize!</li>\n<li>You only copy once, and through a standard memcpy</li>\n<li>This function is type agnostic and can be used in all your templates resize features</li>\n<li>Memory is whiped with memset() when the resized array is larger, to avoid memory leak</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 8298736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2045ef13bd0d1dc85abd8b536b1cadb?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8298736/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 45069097, "answer_count": 2, "score": -2, "last_activity_date": 1499973002, "creation_date": 1499902057, "question_id": 45069063, "link": "https://stackoverflow.com/questions/45069063/template-for-resizing-arrays", "title": "Template for resizing arrays", "body": "<p>I am trying to write a template class with functions for a class of arrays.\nI put something together that seems to work for int, float, double, but will not work for strings.  I included , and am using namespace std.</p>\n\n<p>Everything compiles, and works fine unless I use strings, in which case it errors at the resize function. </p>\n\n<p>in the header file I have the following relevant code (because everything compiles and the error only exists HERE):</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid Array&lt;T&gt;::resize(int newSize)\n{\n    T* newArray = new T[newSize];\n    if (newSize &gt;= mSize)\n    {\n        for (int i = 0; i &lt; newSize; ++i)\n            newArray[i] = mData[i];\n    }\n    else\n        for (int i = 0; i &lt; mSize; ++i)\n            newArray[i] = mData[i];\n    delete[] mData;\n    mData = new T[newSize];\n    mSize = newSize;\n    for (int i = 0; i &lt; newSize; ++i)\n        mData[i] = newArray[i];\n    delete[] newArray;\n    newArray = 0;\n}\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "opengl", "3d", "glut", "volume"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8298740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa9bd8623e5c1b3cf9d477ea2f8c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "user8298740", "link": "https://stackoverflow.com/users/8298740/user8298740"}, "edited": false, "score": 0, "creation_date": 1499903048, "post_id": 45069071, "comment_id": 77111567, "body": "Thank you for the help, this worked. I&#39;m going to look at some more GLUT tutorials before jumping back into this."}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": false, "score": 0, "last_activity_date": 1499902703, "last_edit_date": 1499902703, "creation_date": 1499902201, "answer_id": 45069071, "question_id": 45068871, "link": "https://stackoverflow.com/questions/45068871/black-screen-with-glut/45069071#45069071", "title": "Black screen with GLUT?", "body": "<p>That is 100% not how to use GLUT.</p>\n\n<p>You need to:</p>\n\n<ol>\n<li>Set a <code>glutDisplayFunc()</code> callback </li>\n<li>Call <code>glFlush()</code> at the end of it</li>\n<li>Call <code>glutMainLoop()</code> in <code>main()</code> instead of throwing GL commands at the wall and hoping for the best</li>\n</ol>\n\n<p>Something like this (untested):</p>\n\n<pre><code>#include &lt;glut.h&gt;\n#include &lt;GL/gl.h&gt;\n\nGLfloat dOrthoSize = 1.0f;\n\n#define MAP_3DTEXT( TexIndex ) \\\n    glTexCoord3f(0.0f, 0.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(-dOrthoSize,-dOrthoSize,TexIndex);\\\n    glTexCoord3f(1.0f, 0.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(dOrthoSize,-dOrthoSize,TexIndex);\\\n    glTexCoord3f(1.0f, 1.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(dOrthoSize,dOrthoSize,TexIndex);\\\n    glTexCoord3f(0.0f, 1.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(-dOrthoSize,dOrthoSize,TexIndex);\n\nGLuint mu3DTex;\nvoid display()\n{\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glMatrixMode(GL_TEXTURE);\n    glLoadIdentity();\n\n    glEnable(GL_ALPHA_TEST);\n    glAlphaFunc(GL_GREATER, 0.03f);\n\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    glEnable(GL_TEXTURE_3D);\n    glBindTexture(GL_TEXTURE_3D, mu3DTex);\n\n    glBegin(GL_QUADS);\n    for (float fIndx = -1.0f; fIndx &lt;= 1.0f; fIndx += 0.003f)\n    {\n        MAP_3DTEXT(fIndx);\n    }\n    glEnd();\n\n    glFlush();\n}\n\nvoid main(int argc, char **argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowSize(500, 500);\n    glutCreateWindow(\"Name\");\n\n    char* chBuffer = new char[64];\n    for (int i = 0; i &lt; 64; ++i)\n        chBuffer[i] = ((i + (i / 8)) % 2) * 128 + 127;\n\n    char* chRGBABuffer = new char[256];\n    glGenTextures(1, (GLuint*)&amp;mu3DTex);\n\n    glBindTexture(GL_TEXTURE_3D, mu3DTex);\n    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_BORDER);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n\n    for (int nIndx = 0; nIndx &lt; 64; ++nIndx)\n    {\n        chRGBABuffer[nIndx * 4] = chBuffer[nIndx];\n        chRGBABuffer[nIndx * 4 + 1] = chBuffer[nIndx];\n        chRGBABuffer[nIndx * 4 + 2] = chBuffer[nIndx];\n        chRGBABuffer[nIndx * 4 + 3] = chBuffer[nIndx];\n    }\n\n    glTexImage3D(GL_TEXTURE_3D, 0, GL_RGBA, 4, 4, 4, 0,\n        GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)chRGBABuffer);\n    glBindTexture(GL_TEXTURE_3D, 0);\n\n    glutDisplayFunc( display );\n    glutMainLoop();\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8298740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa9bd8623e5c1b3cf9d477ea2f8c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "user8298740", "link": "https://stackoverflow.com/users/8298740/user8298740"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499902760, "creation_date": 1499900726, "last_edit_date": 1499902760, "question_id": 45068871, "link": "https://stackoverflow.com/questions/45068871/black-screen-with-glut", "title": "Black screen with GLUT?", "body": "<p>I am trying to do some volume rendering based on <a href=\"https://www.codeproject.com/Articles/352270/Getting-started-with-Volume-Rendering\" rel=\"nofollow noreferrer\">this code</a>.</p>\n\n<p>What I am doing right now is that I have some sample 3D data (the array chBuffer is essentially a 4*4*4 test data array) and I am converting that into an OpenGL 3D Texture. After that, I am attempting to render this texture using other OpenGL commands. However, when I run the application, the screen is completely black with something showing up. Is there anything specific I am doing wrong that should fix this problem?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;glut.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;gl/glext.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\nGLfloat dOrthoSize = 1.0f;\nGLuint mu3DTex;\n#define MAP_3DTEXT( TexIndex ) \\\n    glTexCoord3f(0.0f, 0.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(-dOrthoSize,-dOrthoSize,TexIndex);\\\n    glTexCoord3f(1.0f, 0.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(dOrthoSize,-dOrthoSize,TexIndex);\\\n    glTexCoord3f(1.0f, 1.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(dOrthoSize,dOrthoSize,TexIndex);\\\n    glTexCoord3f(0.0f, 1.0f, ((float)TexIndex+1.0f)/2.0f);  \\\n    glVertex3f(-dOrthoSize,dOrthoSize,TexIndex);\nvoid main(int argc, char **argv)\n{\n\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowSize(500, 500);\n    glutCreateWindow(\"Name\");\n\n\n    char* chBuffer = new char[64];\n    for (int i = 0; i &lt; 64; ++i)\n        chBuffer[i] = ((i + (i / 8)) % 2) * 128 + 127;\n\n\n    char* chRGBABuffer = new char[256];\n    glGenTextures(1, (GLuint*)&amp;mu3DTex);\n\n\n\n    glBindTexture(GL_TEXTURE_3D, mu3DTex);\n    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_BORDER);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n\n\n\n    for (int nIndx = 0; nIndx &lt; 64; ++nIndx)\n    {\n        chRGBABuffer[nIndx * 4] = chBuffer[nIndx];\n        chRGBABuffer[nIndx * 4 + 1] = chBuffer[nIndx];\n        chRGBABuffer[nIndx * 4 + 2] = chBuffer[nIndx];\n        chRGBABuffer[nIndx * 4 + 3] = chBuffer[nIndx];\n    }\n\n    glTexImage3D(GL_TEXTURE_3D, 0, GL_RGBA, 4, 4, 4, 0,\n        GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)chRGBABuffer);\n    glBindTexture(GL_TEXTURE_3D, 0);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glEnable(GL_ALPHA_TEST);\n    glAlphaFunc(GL_GREATER, 0.03f);\n\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    glMatrixMode(GL_TEXTURE);\n    glLoadIdentity();\n\n\n    glEnable(GL_TEXTURE_3D);\n    glBindTexture(GL_TEXTURE_3D, mu3DTex);\n\n    for (float fIndx = -1.0f; fIndx &lt;= 1.0f; fIndx += 0.003f)\n    {\n        glBegin(GL_QUADS);\n        MAP_3DTEXT(fIndx);\n        glEnd();\n    }\n    system(\"pause\");\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "sorting", "vector", "stdvector"], "comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "reply_to_user": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1499903279, "post_id": 45068782, "comment_id": 77111624, "body": "@Nemo this question looks complicated with Boost (that I don&#39;t use), the general wording is more complex (with an answer using Boost included at the end of the question...), and moreover the accepted answer uses <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">github.com/ericniebler/range-v3</a>, requires C++14, etc. Are you sure the question you point is really cleaner than this one? Even the title about STL is probably obvious for a confirmed user, but most intermediate people will only see Boost. Maybe this other question would require some cleaning, in order to be a good &quot;master&quot; question for this &quot;slave&quot; one, don&#39;t you think so?"}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1499962876, "post_id": 45068782, "comment_id": 77144812, "body": "Well, the question is certainly an exact duplicate... But I agree some of these answers are useful. Unfortunately, I know of no way to represent this sort of case on SO (and it is not the first time I have seen it). I have added a link back here in a comment. You are free to add an actual answer over there if you like; I would even upvote it"}], "answers": [{"comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901378, "post_id": 45068836, "comment_id": 77111120, "body": "Thanks for this answer! Just to be sure, why the &amp; in <code>std::sort(ordering.begin(), ordering.end(), [&amp;]...</code>?"}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901503, "post_id": 45068836, "comment_id": 77111158, "body": "@Basj to pass the vectors by reference into the lambda"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901534, "post_id": 45068836, "comment_id": 77111165, "body": "@Basj The <code>[...](...){...}</code> syntax is a lambda. Inside the <code>[]</code> you declare what variables you capture. Using a <code>[=]</code> means you capture everything you need by value. Using a <code>[&amp;]</code> means you capture everything you need by reference. So what this does is it captures <code>name</code> by reference, as we need to use it in the body of the lambda itself"}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901584, "post_id": 45068836, "comment_id": 77111181, "body": "@Justin Thanks. But why <code>[]</code> in the first code and <code>[&amp;]</code> for the second?"}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901611, "post_id": 45068836, "comment_id": 77111193, "body": "Also, for non (not-so)-new-c++-familiar-people like me, how would this translate without <code>auto</code> @Justin?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901733, "post_id": 45068836, "comment_id": 77111228, "body": "@Basj If you can&#39;t use <code>auto</code> you also can&#39;t use the lambda. You have to make a separate function or function-object. Minor, but non-trivial modification. For more on Lambda, read here: <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/lambda</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 1, "creation_date": 1499901817, "post_id": 45068836, "comment_id": 77111250, "body": "@Basj If you are using C++11, you have to write out the type you are using in the comparators. So that would be <code>std::wstring</code> in the first case, and <code>std::size_t</code> in the second case."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499901875, "post_id": 45068836, "comment_id": 77111273, "body": "@Basj In the first case, we don&#39;t need to capture anything. The thing we want to sort by is part of the objects we are sorting themselves, so we can get the data from the parameters passed in. In the second case, we want to sort by something external, so we need to capture it"}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499902166, "post_id": 45068836, "comment_id": 77111349, "body": "@Justin for better understanding, can I edit (or you) and replace auto by the relevant types? It would help to focus on the actual types of the data which are compared in the lambda."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499902408, "post_id": 45068836, "comment_id": 77111404, "body": "@Basj <a href=\"http://coliru.stacked-crooked.com/a/19c88f69b569c3b8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/19c88f69b569c3b8</a> . I did make a typo, it&#39;s supposed to be a <code>Person</code> in the first case"}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 2, "creation_date": 1499902873, "post_id": 45068836, "comment_id": 77111525, "body": "The second option adds another vector (extra space), plus an indirection for every access, plus it makes sequential access into random when iterating... For all of these reasons, it could wind up being slower than the first option. It is also considerably more complex. I would strongly suggest benchmarking both options before going with the second."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499903025, "post_id": 45068836, "comment_id": 77111559, "body": "Last quesiton @Justin about the 2nd solution: why pass a pointer / reference to a size_t whereas passing a size_t itself would be even easier. (i.e. why dealing on reference of an int, and not pass the actual value)? Wouldn&#39;t there be a way without all the &amp; ?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499903206, "post_id": 45068836, "comment_id": 77111610, "body": "@Basj For the comparators, that&#39;s because I&#39;ve gotten in the habit of usually taking parameters like that by <code>auto const&amp;</code>, so that if I end up using something that&#39;s bigger than a primitive, there&#39;ll be no expensive copy. The compiler will optimize the comparator and change it to take the parameters by value if it finds that that would be more efficient (and indeed it probably would)"}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1499903633, "post_id": 45068836, "comment_id": 77111700, "body": "@Justin thanks. Would the by value version be  <code>std::sort(ordering.begin(), ordering.end(),     [](std::size_t lhs, std::size_t rhs) {         return name[lhs] &lt; name[rhs];     });</code> or it would still require a &amp; (or something else) somewhere ?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 1, "creation_date": 1499903690, "post_id": 45068836, "comment_id": 77111718, "body": "@Basj That would yield a compiler error due to the compiler not knowing what <code>name</code> is; the by value version would be <code>std::sort(ordering.begin(), ordering.end(), [&amp;](std::size_t lhs, std::size_t rhs) { return name[lhs] &lt; name[rhs]; });</code>"}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 4, "last_activity_date": 1499903479, "last_edit_date": 1499903479, "creation_date": 1499900548, "answer_id": 45068836, "question_id": 45068782, "link": "https://stackoverflow.com/questions/45068782/have-many-vectors-sorted-together/45068836#45068836", "title": "Have many vectors sorted together", "body": "<p>There are a couple possible ways to do this. The easiest way is to wrap <code>name</code>, <code>x</code>, and <code>y</code> in a struct:</p>\n\n<pre><code>struct Person {\n    std::wstring name;\n    int x;\n    int y;\n};\n</code></pre>\n\n<p>Then you can have a <code>std::vector&lt;Person&gt; people</code> and sorting it would be (assuming C++14)</p>\n\n<pre><code>std::sort(people.begin(), people.end(),\n    [](auto const&amp; lhs, auto const&amp; rhs) { return lhs.name &lt; rhs.name; });\n</code></pre>\n\n<hr>\n\n<p>However, if you know that this will cause performance problems due to fewer elements fitting in the cache (that is, you'd frequently iterate over only <code>x</code> or only <code>y</code> and you are in a very constrained environment such as high performance gaming), I'd suggest only sorting one vector. Unless you know what you're doing, you'd need to benchmark both options.</p>\n\n<p>Basically, have a vector that keeps track of the ordering:</p>\n\n<pre><code>std::vector&lt;std::wstring&gt; name;\nstd::vector&lt;int&gt; x;\nstd::vector&lt;int&gt; y\n\nstd::vector&lt;std::size_t&gt; ordering(name.size());\nstd::iota(ordering.begin(), ordering.end(), 0);\n\nstd::sort(ordering.begin(), ordering.end(),\n    [&amp;](auto const&amp; lhs, auto const&amp; rhs) {\n        return name[lhs] &lt; name[rhs];\n    });\n</code></pre>\n\n<p>Then you can simply iterate over <code>ordering</code> to go through each parallel vector in the new order.</p>\n\n<p>It's possible that the extra level of indirection will make it less efficient. For example, the CPU might think that there's a data dependency where there is none. Furthermore, the extra data we are keeping track of in <code>ordering</code> could easily take enough room in the cache to counteract the benefit of separating <code>name</code>, <code>x</code>, and <code>y</code>; you'd need to know the specifications of your target architecture and profile to be sure.</p>\n\n<p>If you would want to keep iterating over them in this new order, you would want to use this <code>ordering</code> vector to sort the other vectors, because the access to the elements would become random. That would counteract the benefit of keeping the vectors separate (unless the vectors are small enough to fit in the cache anyway).</p>\n\n<p>The easiest way to do that would be to create a new vector:</p>\n\n<pre><code>std::vector&lt;std::wstring&gt; newNames;\nnewNames.reserve(name.size());\n\nfor (auto i : ordering) {\n    newNames.push_back(name[i]);\n}\n</code></pre>\n\n<p>Reconstructing the vectors like this is probably what you want to do if the sorting happens during initialization.</p>\n"}, {"tags": [], "owner": {"reputation": 568, "user_id": 4980645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f69bb7a04beacc46989f6412e5c0038?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/4980645/josh"}, "is_accepted": false, "score": 1, "last_activity_date": 1499901194, "creation_date": 1499901194, "answer_id": 45068948, "question_id": 45068782, "link": "https://stackoverflow.com/questions/45068782/have-many-vectors-sorted-together/45068948#45068948", "title": "Have many vectors sorted together", "body": "<p>It sounds like you want a struct to keep the data together. For example:</p>\n\n<pre><code>struct MyData\n{\n  wstring name;\n  int x;\n  int y;\n};\n\n...\nstd::vector&lt;MyData&gt; data;\n</code></pre>\n\n<p>From there, you'll want a comparison function to do a custom sort that ensures you are sorting from the field you want to sort by:</p>\n\n<pre><code>std::sort(data.begin(), data.end(), compareByName);\n\nbool compareByName(const MyData&amp; lhs, const MyData&amp; rhs)\n{\n    return lhs.name &lt; rhs.name; // This can be whatever\n}\n</code></pre>\n"}], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 2, "closed_date": 1499903089, "accepted_answer_id": 45068836, "answer_count": 2, "score": 0, "last_activity_date": 1499903479, "creation_date": 1499900199, "question_id": 45068782, "link": "https://stackoverflow.com/questions/45068782/have-many-vectors-sorted-together", "closed_reason": "Duplicate", "title": "Have many vectors sorted together", "body": "<p>I have three vectors of the same size (~ 1 million items):</p>\n\n<pre><code>std::vector&lt;wstring&gt; name;\nstd::vector&lt;int&gt; x;\nstd::vector&lt;int&gt; y;\n</code></pre>\n\n<p>which can be seen as three \"columns\".</p>\n\n<p><strong>How to sort A->Z the vector <code>name</code>:</strong></p>\n\n<pre><code>std::sort(name.begin(), name.end())\n</code></pre>\n\n<p><strong>but having the vectors <code>x</code> and <code>y</code> sorted accordingly?</strong></p>\n\n<hr>\n\n<p>Example:</p>\n\n<pre><code>name  x  y                 name  x  y\nBCD   7  9                 ABC   4  3\nZYX   1  4        =&gt;       BCD   7  9\nABC   4  3                 ZYX   1  4\n</code></pre>\n\n<hr>\n\n<p>The good thing about using a <code>std::vector</code>, is that I can easily select/filter a few items in the big <code>vector</code> by taking just a list of index to keep (example: let's keep items 12, 1872, 2834, 1831).\nI thought about using a <code>std::map</code> but I fear it won't be as efficient for this: how to keep a list of elements to keep in a map?</p>\n"}, {"tags": ["c++", "class", "copy-constructor", "code-duplication", "move-constructor"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1499898516, "post_id": 45068480, "comment_id": 77110283, "body": "What is Foo? Why are the constructors private? In other words, put a bit more effort into writing your question."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1499898605, "post_id": 45068480, "comment_id": 77110318, "body": "Depends on what you are doing. Can you e.g. put the common parts into a separate function?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1499898785, "post_id": 45068480, "comment_id": 77110366, "body": "<a href=\"https://stackoverflow.com/questions/16724657/why-do-we-copy-then-move\" title=\"why do we copy then move\">stackoverflow.com/questions/16724657/why-do-we-copy-then-mov&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 3, "creation_date": 1499899094, "post_id": 45068480, "comment_id": 77110462, "body": "<code>A(std::string str) { Foo foo(std::move(str)); }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 978965, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/96aea860b927344972db4d03bd7de274?s=128&d=identicon&r=PG", "display_name": "rivimey", "link": "https://stackoverflow.com/users/978965/rivimey"}, "is_accepted": false, "score": 1, "last_activity_date": 1499898747, "creation_date": 1499898747, "answer_id": 45068571, "question_id": 45068480, "link": "https://stackoverflow.com/questions/45068480/c-code-duplication-in-classes-with-both-move-and-copy-constructors/45068571#45068571", "title": "C++ code duplication in classes with both move and copy constructors", "body": "<p>Obvious answer: make a third fn which performs the common part, which is called from both the other fns.</p>\n\n<p>You may be able to directly call one from the other, but it would depend on the nature of the data stored within the class and what is being referenced. However, in many cases a copy constructor can be used to implement move, if desired, though not as efficiently.</p>\n"}, {"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 1, "last_activity_date": 1499898789, "creation_date": 1499898789, "answer_id": 45068580, "question_id": 45068480, "link": "https://stackoverflow.com/questions/45068480/c-code-duplication-in-classes-with-both-move-and-copy-constructors/45068580#45068580", "title": "C++ code duplication in classes with both move and copy constructors", "body": "<p>You can do this using universal references, but only in the cases where the constructor is templated.</p>\n\n<pre><code>class A {\npublic:\n    template&lt;typename T&gt;\n    A(T &amp;&amp; str) {\n        Foo foo(std::forward&lt;T&gt;(str));\n        //do something\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 906, "user_id": 978965, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/96aea860b927344972db4d03bd7de274?s=128&d=identicon&r=PG", "display_name": "rivimey", "link": "https://stackoverflow.com/users/978965/rivimey"}, "edited": false, "score": 0, "creation_date": 1499956186, "post_id": 45068736, "comment_id": 77139753, "body": "This is just another way of explicitly invoking the copy constructor -- which could be fine, but be aware of it."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "reply_to_user": {"reputation": 906, "user_id": 978965, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/96aea860b927344972db4d03bd7de274?s=128&d=identicon&r=PG", "display_name": "rivimey", "link": "https://stackoverflow.com/users/978965/rivimey"}, "edited": false, "score": 0, "creation_date": 1499959992, "post_id": 45068736, "comment_id": 77142795, "body": "@rivimey - You&#39;re unlikely to invoke the copy constructor on most compilers.  Shouldn&#39;t even invoke the move...your temporary will be built right into the parameter.  Your value has to have a copy or move constructor, but compilers can--and most do--remove the actual invocation."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 2, "last_activity_date": 1499899920, "creation_date": 1499899920, "answer_id": 45068736, "question_id": 45068480, "link": "https://stackoverflow.com/questions/45068480/c-code-duplication-in-classes-with-both-move-and-copy-constructors/45068736#45068736", "title": "C++ code duplication in classes with both move and copy constructors", "body": "<p>Accept by value.  That will do the trick of doing the same thing as both.</p>\n"}, {"tags": [], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "is_accepted": true, "score": 2, "last_activity_date": 1499900068, "creation_date": 1499900068, "answer_id": 45068761, "question_id": 45068480, "link": "https://stackoverflow.com/questions/45068480/c-code-duplication-in-classes-with-both-move-and-copy-constructors/45068761#45068761", "title": "C++ code duplication in classes with both move and copy constructors", "body": "<p>The first option is to use templated constructor:</p>\n\n<pre><code>class A\n{\npublic:\n    template&lt;typename T, typename = std::enable_if&lt;std::is_same&lt;std::remove_reference&lt;T&gt;::type, std::string&gt;::value&gt;::type&gt;\n    A(T &amp;&amp; str) {\n         Foo foo(std::forward&lt;T&gt;(str));\n        //do something\n    }\n};\n</code></pre>\n\n<p>But it looks a bit ugly. If <code>Foo(const std::string &amp;)</code> actually makes a copy of string, then I'd prefer to pass the parameter by value:</p>\n\n<pre><code>class A\n{\npublic:\n    A(std::string str) {\n         Foo foo(std::move(str));\n        //do something\n    }\n};\n</code></pre>\n\n<p>The overhead of this approach is additional move constructor.\nBut don't be bothered of it because the compiler is likely to optimize it.</p>\n"}], "owner": {"reputation": 23, "user_id": 6507207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f2c4dd0bd6652dd4f52efb958518e1?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Pham", "link": "https://stackoverflow.com/users/6507207/steven-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 1, "accepted_answer_id": 45068761, "answer_count": 4, "score": 1, "last_activity_date": 1499900068, "creation_date": 1499898308, "last_edit_date": 1499899081, "question_id": 45068480, "link": "https://stackoverflow.com/questions/45068480/c-code-duplication-in-classes-with-both-move-and-copy-constructors", "title": "C++ code duplication in classes with both move and copy constructors", "body": "<p>For example, a class with two constructors, one taking a reference and the other taking a string r-value reference.</p>\n\n<pre><code>class A {\n    public:\n\n    A(std::string&amp;&amp; str) {\n        Foo foo(std::move(str));\n        //do something with foo. (e.g., use it to initialize some members)\n        field = foo.bar();\n    }\n\n    A(const std::string&amp; str) {\n        Foo foo(str);\n        //do something with foo. (e.g., use it to initialize some members)\n        field = foo.bar();\n    }\n\n};\n</code></pre>\n\n<p>If these two constructors perform virtually the same thing besides std::move appearing in the move constructor, is there any way to avoid having two nearly identical chunks of code?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015", "function-pointers", "iostream"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1499897902, "post_id": 45068370, "comment_id": 77110100, "body": "Maybe try <a href=\"https://stackoverflow.com/questions/12432952/why-is-my-fstream-being-implicitly-deleted\">tossing those streams around by reference instead.</a> ?"}, {"owner": {"reputation": 4061, "user_id": 3393058, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/TmKho.png?s=128&g=1", "display_name": "Aloso", "link": "https://stackoverflow.com/users/3393058/aloso"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1499899896, "post_id": 45068370, "comment_id": 77110718, "body": "@WhozCraig It worked, but I don&#39;t understand why."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1499901536, "post_id": 45068370, "comment_id": 77111166, "body": "Please add the answer in the answer section and not as an edit to the post, I have rolled back but you can find your answer in this <a href=\"https://stackoverflow.com/revisions/45068370/4\">revision</a>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1499910008, "post_id": 45068370, "comment_id": 77113204, "body": "@Aloso Some objects are simply not copyable. Input and output stream derivations fall into that category. Your passing <code>wcout</code> to a function expecting a stream interface by <i>value</i>, which introduces a copy-construction, and thus not allowed. The compiler is telling you the code you&#39;re trying to use would invoke a function (in this case the copy-ctor) that is <i>deleted</i>, and thus not available. If you ever wondered why input and output streams seem to be consistently hurled about in C++ by reference, now you know."}], "owner": {"reputation": 4061, "user_id": 3393058, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/TmKho.png?s=128&g=1", "display_name": "Aloso", "link": "https://stackoverflow.com/users/3393058/aloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499901548, "creation_date": 1499897709, "last_edit_date": 1499901548, "question_id": 45068370, "link": "https://stackoverflow.com/questions/45068370/calling-function-pointer-with-a-stdwostream-parameter-doesnt-work", "title": "Calling function pointer with a std::wostream parameter doesn&#39;t work", "body": "<p>I have a class that simplifies printing to the terminal:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n// Functions to append line break(s):\nwstring ln(wostream s) { s &lt;&lt; endl; return L\"\\r\\n\"; }\nwstring ln2(wostream s) { s &lt;&lt; endl &lt;&lt; endl; return L\"\\r\\n\\r\\n\"; }\n\nclass Log {\n private:\n    wstring prefix, last_log;\n public:\n    void operator=(wstring w) {\n        system(\"cls\"); // clear terminal\n        wcout &lt;&lt; prefix &lt;&lt; w;\n        last_log = w;\n    }\n    void operator+=(wstring w) {\n        system(\"cls\"); // clear terminal\n        wcout &lt;&lt; prefix &lt;&lt; last_log &lt;&lt; w;\n        last_log += w;\n    }\n\n    void operator+=(wstring func(wostream s)) {\n        last_log += func(wcout);\n        //               ^^^^^\n        // Visual Studio reports a syntax error here:\n        // \"Function ...\" can not be referenced (is a deleted function)\n    }\n\n    void set_prefix(wstring w) {\n        prefix = w;\n        system(\"cls\");\n        wcout &lt;&lt; prefix &lt;&lt; last_log;\n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>int main() {\n    Log log;\n    log = L\"Hello\";\n    log += L\" World\";\n    log += ln; // Append line break!\n}\n</code></pre>\n\n<p>In line 23, Visual Studio 2015 says: <em>(German)</em></p>\n\n<blockquote>\n  <p>Auf \"Funktion \"<code>std::basic_ostream&lt;_Elem, _Traits&gt;::basic_ostream(const std::basic_ostream&lt;_Elem, _Traits&gt;::_Myt &amp;)</code> [mit _Elem=wchar_t, _Traits=std::char_traits]\" (deklariert in Zeile 84 von \"<strong><em>[...]</em></strong>\\VC\\include\\ostream\")\" kann nicht verwiesen werden (ist eine gel\u00f6schte Funktion).</p>\n</blockquote>\n\n<p>Translated:</p>\n\n<blockquote>\n  <p>\"Function \"<code>std::basic_ostream&lt;_Elem, _Traits&gt;::basic_ostream(const std::basic_ostream&lt;_Elem, _Traits&gt;::_Myt &amp;)</code> [mit _Elem=wchar_t, _Traits=std::char_traits]\" (declared in line 84 of \"<strong><em>[...]</em></strong>\\VC\\include\\ostream\")\" can't be referenced (is a deleted function).</p>\n</blockquote>\n\n<p>What is causing this error and how I can solve it?</p>\n"}, {"tags": ["c++", "c++11", "perfect-forwarding"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1499899293, "post_id": 45068265, "comment_id": 77110542, "body": "Shorter test case: <code>auto f = Test; f();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1499899365, "post_id": 45068317, "comment_id": 77110573, "body": "<code>void operator()(int = 0) { &#47;* ... *&#47; }</code> will work just fine."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 11, "last_activity_date": 1499897446, "creation_date": 1499897446, "answer_id": 45068317, "question_id": 45068265, "link": "https://stackoverflow.com/questions/45068265/why-function-default-parameters-cannot-be-perferct-forwarded-in-c/45068317#45068317", "title": "Why function default parameters cannot be perferct forwarded in C++?", "body": "<p><code>Test</code> is a function that always takes one argument. If its declaration with the default argument is visible when <code>Test</code> is invoked by name, the compiler will implicitly add the default argument to the call. However, once <code>Test</code> has been converted into a pointer or reference to function, the default argument information is no longer visible.</p>\n\n<p>This can be worked around by creating a functor which really does take zero or one arguments and has that information encoded into its type so it cannot be destroyed, like so:</p>\n\n<pre><code>struct Test {\n    void operator()(int) { /* ... */ }\n    void operator()() { operator(int{}); }\n} test;\n// ...\nFoo(test, 0); // ok\nFoo(test);    // ok\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 45068317, "answer_count": 1, "score": 7, "last_activity_date": 1499897446, "creation_date": 1499897160, "question_id": 45068265, "link": "https://stackoverflow.com/questions/45068265/why-function-default-parameters-cannot-be-perferct-forwarded-in-c", "title": "Why function default parameters cannot be perferct forwarded in C++?", "body": "<p>I found quite weird behavior from my perspective: function default arguments cannot be forwarded in code bellow.</p>\n\n<pre><code>void Test(int test = int{}) {}\n\ntemplate&lt;typename F, typename ...Args&gt;\nvoid Foo(F&amp;&amp; f, Args&amp;&amp;... args)\n{\n    std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n}\n\nint main()\n{\n    Foo(Test, 0); // This compiles\n    Foo(Test);    // This doesn't compile\n}\n</code></pre>\n\n<p>Clang reports:\nerror: too few arguments to function call, expected 1, have 0\nGCC and VC report same errors.</p>\n\n<p>Can anybody explain it?</p>\n\n<p>Code is here:\n<a href=\"http://rextester.com/live/JOCY22484\" rel=\"noreferrer\">http://rextester.com/live/JOCY22484</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 4, "creation_date": 1499896967, "post_id": 45068212, "comment_id": 77109748, "body": "The best tool to use for this is your debugger."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1499897150, "post_id": 45068212, "comment_id": 77109814, "body": "I think when you pass a <code>char</code> to <code>to_string</code> it doesn&#39;t do what you think it does."}, {"owner": {"reputation": 369, "user_id": 8143718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a146ec03c9f2cbb23c468288b3f0a5?s=128&d=identicon&r=PG&f=1", "display_name": "sBanda", "link": "https://stackoverflow.com/users/8143718/sbanda"}, "edited": false, "score": 1, "creation_date": 1499897198, "post_id": 45068212, "comment_id": 77109825, "body": "Use srand() to seed the random numbers, if you do not do this, it will in each execution show same numbers. Look into pseudo-random numbers."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1499897350, "post_id": 45068212, "comment_id": 77109879, "body": "You&#39;re not clearing <code>password</code> between each iteration of the outer loop, so you just keep appending to the previous password."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499897489, "post_id": 45068212, "comment_id": 77109945, "body": "put the MakePassword logic in a separate function, it will makes things clearer"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1499897943, "creation_date": 1499897943, "answer_id": 45068411, "question_id": 45068212, "link": "https://stackoverflow.com/questions/45068212/generate-random-password-c/45068411#45068411", "title": "generate random password [C++]", "body": "<p>You're getting only numbers because there's no specialization of <code>std::to_string()</code> for <code>char</code>. So when you do <code>to_string(alphabet[random]))</code>, it converts the <code>char</code> to <code>int</code> (which returns the letter's character code) and then converts that to a string. So <code>to_string('a')</code> is <code>\"97\"</code>, not <code>\"a\"</code>.</p>\n\n<p>Instead of an array, you could use a string containing the alphabet. <code>std::string::append()</code> allows you to specify a substring to copy from. So you can do:</p>\n\n<pre><code>string alphabet = \"abcdefghijklmnopqrstuvwxyz\";\nint random = rand() % alphabet.size();\npassword.append(alphabet, random, 1);\n</code></pre>\n\n<p>This also explains why your password isn't the desired length. When it intends to append a character, it's instead appending 2 or 3 digit numbers.</p>\n\n<p>Finally, you're not clearing <code>password</code> each time you want to generate a new password, so you're appending to the old password. The simple solution to this is to move the <code>string password;</code> declaration inside the first <code>for</code> loop.</p>\n\n<p>You should also call <code>srand(time())</code> at the beginning of your program, so you'll get different passwords every time you run it. Otherwise the program always starts with the same random seed.</p>\n"}], "owner": {"reputation": 103, "user_id": 8298564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e85fb229ed6150a8938776530cece98?s=128&d=identicon&r=PG&f=1", "display_name": "therealcain", "link": "https://stackoverflow.com/users/8298564/therealcain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 45068411, "answer_count": 1, "score": -5, "last_activity_date": 1499897943, "creation_date": 1499896896, "last_edit_date": 1499897058, "question_id": 45068212, "link": "https://stackoverflow.com/questions/45068212/generate-random-password-c", "title": "generate random password [C++]", "body": "<p>i'm learning c++ and i've been trying to create a 'generator passwords' and i have few problems:\nhere is source (int main):</p>\n\n<pre><code>//Declaring Variables\nint PasswordNumbers, PasswordChar;\nchar alphabet[26] = { 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z' };\nstring * passwords;\nstring password;\n\n//Message and Input\ncout &lt;&lt; \"How Many Passwords Should Generate ?\" &lt;&lt; endl;\ncin &gt;&gt; PasswordNumbers;\n\ncout &lt;&lt; \"How Many Letters/Numbers Should be in each Passowrd ?\" &lt;&lt; endl;\ncin &gt;&gt; PasswordChar;\n\npasswords = new string[PasswordNumbers];\n\nfor (int j = 0; j &lt; PasswordNumbers; j++) { //How Many Passwords?\n    for (int i = 0; i &lt; PasswordChar; i++) { //How Many Letters/Numbers?\n        int randomBool = rand() % 2;\n        if (randomBool == 1) {\n            int random = rand() % 10;\n            password.append(to_string(random));\n        }\n        else {\n            int random = rand() % 26;\n            string randomLetter = to_string(alphabet[random]);\n            password.append(randomLetter);\n        }\n    }\n    passwords[j] = password;\n}\n\nfor (int i = 0; i &lt; passwords-&gt;length(); i++) {\n    printf(\"Random Number: %s \\n\", passwords[i].c_str());\n}\n\ndelete[] passwords;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YqjaE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YqjaE.png\" alt=\"cmd\"></a></p>\n\n<p>Problems:</p>\n\n<ol>\n<li>Generating only numbers.</li>\n<li>not generating the amount of letters/numbers the user has chosen.</li>\n<li>Generating same numbers.</li>\n</ol>\n\n<p>the code looks fine to me, i cant see something wrong ...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1499896796, "post_id": 45068136, "comment_id": 77109669, "body": "The way to approach problems like this is to break them down into easier parts, and do one part at a time. Start out by testing whether the value is greater than or equal to zero and less than ten. Get that working. Hint: <code>10 &gt; value &gt; -1</code> won&#39;t work."}, {"owner": {"reputation": 1, "user_id": 8297610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-way1vcQ8NL0/AAAAAAAAAAI/AAAAAAAAAG0/KsbnbsB4Y3k/photo.jpg?sz=128", "display_name": "user8297610", "link": "https://stackoverflow.com/users/8297610/user8297610"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1499897047, "post_id": 45068136, "comment_id": 77109779, "body": "Thanks I got it to work. I don&#39;t know how I didn&#39;t notice that. :P"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1499897338, "post_id": 45068136, "comment_id": 77109875, "body": "You&#39;ve got a bunch of unneeded parentheses in your code. I realize that some of them are probably because your compiler tells you that you might not be smart enough to understand the code you&#39;ve written, but there are many that just aren&#39;t needed. For example, when you have an expression like <code>a &lt; 10 &amp;&amp; 0 &lt;= a</code> you don&#39;t have to decorate the two subexpressions with parentheses."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1499897402, "creation_date": 1499897402, "answer_id": 45068307, "question_id": 45068136, "link": "https://stackoverflow.com/questions/45068136/logical-data-operators-and-expressions/45068307#45068307", "title": "Logical data: Operators and Expressions", "body": "<p>Operator <code>&gt;</code> groups left-to-right, such that <code>10 &gt; value &gt; -1</code> is parsed as <code>(10 &gt; value) &gt; -1</code>; Expression <code>(10 &gt; value)</code> gives either <code>true</code> or <code>false</code>, and both options <code>true &gt; -1</code> and <code>false &gt; -1</code> will always evaluate to <code>true</code>. So your complex condition <code>(10 &gt; value &gt; -1) || ....</code> will always give <code>true</code> (shortcut evaluation).</p>\n\n<p>Write <code>(10 &gt; value &amp;&amp; value &gt; -1)</code> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 8297610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-way1vcQ8NL0/AAAAAAAAAAI/AAAAAAAAAG0/KsbnbsB4Y3k/photo.jpg?sz=128", "display_name": "user8297610", "link": "https://stackoverflow.com/users/8297610/user8297610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1499897402, "creation_date": 1499896518, "question_id": 45068136, "link": "https://stackoverflow.com/questions/45068136/logical-data-operators-and-expressions", "title": "Logical data: Operators and Expressions", "body": "<p>So I'm learning C++ and I'm doing a lab but I can't seem to figure out what's wrong. So the lab is:\nWe need a number that: Is greater than or equal to zero and less than ten - or - its value multiplied by 2 is less than twenty and its value reduced by two is greater than minus 2 - or - its value reduced by one is greater than one and its value divided by 2 is less than ten - or - it is equal to 11. Write the condition is the form of expression accepted by the C++ language and assign its result to the answer variable. The problem I'm having is that whatever the input, my output is always true.</p>\n\n<pre><code>bool answer;\nint value;\n\ncout &lt;&lt; \"Enter a value: \";\n\ncin &gt;&gt; value;\n\nif ((10 &gt; value &gt; -1) || ((20 &gt; (value * 2)) &amp;&amp; ((value - 2) &gt; -2)) || (((value - 1) &gt; 1) &amp;&amp; ((value / 2) &lt; 10)) || (value == 11))\n{\n    answer = true;\n}\n    else {\n    answer = false;\n    }\n    cout &lt;&lt; (answer ? \"THAT'S TRUE :)\" : \"THAT'S NOT TRUE :(\") &lt;&lt; endl;\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "gcc"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 3, "creation_date": 1499896518, "post_id": 45068129, "comment_id": 77109567, "body": "You can&#39;t pass a parameter that is <code>void</code>..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1499897661, "post_id": 45068129, "comment_id": 77110005, "body": "You should avoid to inherit from <code>std::vector</code> BTW, prefer composition."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1499988063, "post_id": 45068129, "comment_id": 77157307, "body": "I meant <code>template &lt;..&gt; class Menu { std::vector&lt;..&gt; data; };</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8298562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6917d1e303f7e46f8e8faeb0e3b312?s=128&d=identicon&r=PG&f=1", "display_name": "Arllk", "link": "https://stackoverflow.com/users/8298562/arllk"}, "edited": false, "score": 0, "creation_date": 1499983503, "post_id": 45068280, "comment_id": 77155889, "body": "Thanks that solved all, and what do you mean with composition?"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1499897250, "creation_date": 1499897250, "answer_id": 45068280, "question_id": 45068129, "link": "https://stackoverflow.com/questions/45068129/use-template-with-function/45068280#45068280", "title": "Use template with &lt;function&gt;", "body": "<p>you can change your declaration to</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nclass Menu : public std::vector&lt;std::tuple&lt;uint8_t,\n                                           std::wstring,\n                                           std::function&lt;void(Ts...)&gt;&gt;&gt; {\n    // ...\n};\n</code></pre>\n\n<p>and use it</p>\n\n<pre><code>Menu&lt;&gt; MenuName;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8298562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6917d1e303f7e46f8e8faeb0e3b312?s=128&d=identicon&r=PG&f=1", "display_name": "Arllk", "link": "https://stackoverflow.com/users/8298562/arllk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 45068280, "answer_count": 1, "score": -1, "last_activity_date": 1499916790, "creation_date": 1499896462, "last_edit_date": 1499916790, "question_id": 45068129, "link": "https://stackoverflow.com/questions/45068129/use-template-with-function", "title": "Use template with &lt;function&gt;", "body": "<p>Im trying to make template class of a menu class, and i try to pass a T type, to be able to change the Argument class to make it for more uses </p>\n\n<pre><code>    template&lt;class T&gt;\n    class Menu : public std::vector&lt;std::tuple&lt;uint8_t, std::wstring, std::function&lt;void(T)&gt;&gt;&gt; {\n/**code over here**/\n}\n</code></pre>\n\n<p>but every GCC give me an error </p>\n\n<blockquote>\n<pre><code> C:\\Users\\InfoLabA-PC04\\Desktop\\Ar\\Arley.hpp:188:8: error: invalid parameter type 'void'\n   class Menu : public std::vector&lt;std::tuple&lt;uint8_t, std::wstring, std::function&lt;void(T)&gt;&gt;&gt; {\n         ^~~~\n</code></pre>\n</blockquote>\n\n<p>when i try to use it like </p>\n\n<pre><code>Menu&lt;void&gt; MenuName;\n</code></pre>\n"}, {"tags": ["c++", "windows-10", "directx-11"], "comments": [{"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1499895818, "post_id": 45067894, "comment_id": 77109313, "body": "Sorry, for that. I just thought it would be good to add it. My actual question is, are those books still useful for programming against the Windows 10 SDK and what is the replacement for CompileD3DShader. I have found on the Internet much confusion about this and little to no answers."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1499895967, "post_id": 45067894, "comment_id": 77109367, "body": "<code>CompileD3DShader</code> is a function defined in the book you are reading. It is not a function defined by the DirectX API."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1499896166, "post_id": 45067894, "comment_id": 77109441, "body": "To set your mind at reast - 12 doesn&#39;t totally replace 11 - 11 is something which is still totally relevant and useful on Windows especially in the scenarios you mention."}, {"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1499896800, "post_id": 45067894, "comment_id": 77109671, "body": "Yeah, I am aware of that. DirectX 12 is meant for the triple A game developers while 11 will still be there for the Indie-Game developers and others who just need to add some graphics to their programs. The problem with DirectX 11 is not the question of depreciation, even if it were, Micrososft&#39;s policy of backwards compatibility would make that a non-issue. The problem really is, that the extensive tutorials targeted at beginners have not been updated yet and probably will never be."}], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "edited": false, "score": 0, "creation_date": 1500378403, "post_id": 45095615, "comment_id": 77299562, "body": "Sorry for the late reply, I wasn&#39;t home for a couple of days. Thanks for the code example. I will have a more detailed look in the next couple of days."}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 2, "last_activity_date": 1500011651, "creation_date": 1500011651, "answer_id": 45095615, "question_id": 45067894, "link": "https://stackoverflow.com/questions/45067894/directx-11-on-windows-10/45095615#45095615", "title": "DirectX 11 on Windows 10", "body": "<p>All the various books on Direct3D 11 are still applicable in their coverage of the core API, the concepts, and functionality of how to use DirectX 11. The problems come in due to their use of the now legacy DirectX SDK. Notably D3DX, D3DXMath or XNAMath, and use of the legacy Effects system. That said, you still end up learning how to do Direct3D graphics programming.  I've got a blog post that goes into some detail on the various books with some notes of things to watch out for. See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2014/04/07/book-recommendations/\" rel=\"nofollow noreferrer\">Book Recommendations</a>. Note to self: I should take a look at the Sherrod &amp; Jones book and update the post.</p>\n\n<blockquote>\n  <p>See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2015/08/05/where-is-the-directx-sdk-2015-edition/\" rel=\"nofollow noreferrer\">Where is the DirectX SDK (2015 Edition)?</a> and in particular <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx\" rel=\"nofollow noreferrer\">MSDN</a> on the proper method for 'mixing' the Windows 8.1/10 SDK with the legacy DirectX SDK if you still want to use the older stuff for learning.</p>\n</blockquote>\n\n<p>A complete guide to how to replace all the legacy DirectX SDK stuff when using the Windows 8.1 SDK or Windows 10 SDK is <a href=\"https://blogs.msdn.microsoft.com/chuckw/2013/08/20/living-without-d3dx/\" rel=\"nofollow noreferrer\">Living Without D3DX</a>. You'll note for the shader compilation API, it links to <a href=\"https://blogs.msdn.microsoft.com/chuckw/2012/05/07/hlsl-fxc-and-d3dcompile/\" rel=\"nofollow noreferrer\">HLSL, FXC, and D3DCompile</a>. As someone noted in the comments, <code>CompileD3DShader</code> is just some helper function provided by the book author. These days you can just call <code>D3DCompileFromFile</code>. I'm also using <a href=\"https://github.com/Microsoft/DirectXTK/wiki/ComPtr\" rel=\"nofollow noreferrer\">Microsoft::WRL::ComPtr</a> which is a good smart-pointer to make use of with modern Direct3D C++ programming.</p>\n\n<pre><code>#include &lt;d3d11.h&gt;\n#include &lt;d3dcompiler.h&gt;\n#include &lt;wrl/client.h&gt;\n\nusing Microsoft::WRL::ComPtr;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>ComPtr&lt;ID3DBlob&gt; shaderBlob;\nComPtr&lt;ID3DBlob&gt; errorBlob;\nHRESULT hr = D3DCompileFromFile( L\"SolidGreenColor.fx\",\n    nullptr,\n    D3D_COMPILE_STANDARD_FILE_INCLUDE,\n    \"VS_Main\", \"vs_4_0\",\n    0 /* You probably want to use D3DCOMPILE_DEBUG in debug builds */,\n    0,\n    shaderBlob.GetAddressOf(),\n    errorMsg.GetAddressOf()));\n\n#ifdef _DEBUG\nif (errorBlob) \n{ \n    OutputDebugStringA( reinterpret_cast&lt;const char*&gt;( errorBlob-&gt;GetBufferPointer() ) ); \n} \n#endif\n\nif (FAILED(hr))\n    // Error condition\n</code></pre>\n\n<p>Other useful starting resources for learning Direct3D 11:</p>\n\n<p><a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow noreferrer\">DirectX Tool Kit tutorials</a><br>\n<a href=\"https://blogs.msdn.microsoft.com/chuckw/2011/07/11/getting-started-with-direct3d-11/\" rel=\"nofollow noreferrer\">Getting Started with Direct3D 11</a><br>\n<a href=\"https://blogs.msdn.microsoft.com/chuckw/2014/02/05/anatomy-of-direct3d-11-create-device/\" rel=\"nofollow noreferrer\">Anatomy of Direct3D 11 Create Device</a>  </p>\n"}], "owner": {"reputation": 376, "user_id": 4284179, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d28b7a54f846ace2017a022547c5e999?s=128&d=identicon&r=PG&f=1", "display_name": "Willi", "link": "https://stackoverflow.com/users/4284179/willi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2464, "favorite_count": 3, "accepted_answer_id": 45095615, "answer_count": 1, "score": 2, "last_activity_date": 1500011651, "creation_date": 1499895362, "last_edit_date": 1499897528, "question_id": 45067894, "link": "https://stackoverflow.com/questions/45067894/directx-11-on-windows-10", "title": "DirectX 11 on Windows 10", "body": "<p>I am just trying to learn DirectX 11 (and no, I am neither interested in OpenGL nor Vulcan) and I am using the latest Windows 10 insider build. I know there is DirectX 12, but from what I have heard, it is more trouble for non-(A)AA than it is worth. I am perfectly aware, that for getting a game up and running, using an already existing game engine like Unreal Engine would be more appropriate. But I am not really interested in getting a working game. I just want something not depreciated and good to replace GDI(+). And I always wanted to learn DirectX anyways. I am using C++ which is by the way may main programming language. As my IDE, I am using Visual Studio 2017 Enterprise. I should also add that I am familiar with the Windows API (formerly called Win32 API).</p>\n\n<p>I have access to Allen Sherrod's and Wendy Jones's book Beginning DirectX 11 Game Programming and Frank D. Luna's book Introduction to 3D Game Programming with DirectX 11. But there is a major problem with both: They use the depreciated DirectX 11 June SDK which is incompatible with both the Windows 8 and 10 SDKs. While it is easy to replace the error management code with WinAPI code, I am stuck with:</p>\n\n<pre><code>bool compileResult = CompileD3DShader( \"SolidGreenColor.fx\", \"VS_Main\", \"vs_4_0\", &amp;vsBuffer );\n</code></pre>\n\n<p><code>CompileD3DShader</code> seems to be non existent. I hadn't much luck with Googling it. But from what I have found, I have concluded, that they have not just renamed it, but replaced it by some other mechanism. Though I am not sure about it. Could anyone help my write that line in an Windows 8/10 compatible way?</p>\n\n<p>And another question, are those books of any use, provided I am not interested in using the old DirectX SDK? I am thinking about looking for good online tutorials. If there aren't any that are good enough, I'd be forced to switch to Luna's DirectX 12 book and to DirectX 12 in general. Unfortunately, there does not seem to be a DirectX 12 successor to Beginning DirectX 11 Game Programming (There is a book for DirectX 9 and 10 respectively) which I like more (I prefer to learn the basics of the API first, so that I can focus on math afterwards).</p>\n\n<p>Does anybody know a good, comprehensive source to learn \"modern\" DirectX 11? I am open to both books and online content (including YouTube videos).</p>\n\n<p><strong>UPDATE 1:</strong>\nGiven that asking for advice on alternative leaning material seems to not be allowed (I forgot about that, sorry about that) I want to emphasize the most important part of my question. </p>\n\n<p>Are books / online tutorials written for the old Direct X SDK still applicable for Windows 8 / 8.1 / 10 SDKs? I know that I have to use different headers and that some things have been re-named and that the DirectX Error Handling Library has been removed. Apart from the DirectX Error Handling Library, can I just re-name some functions and the code will work or are the differences more substantial?</p>\n\n<p><strong>UPDATE 2:</strong>\nI have found two sources that seem to be more up to date. While I have to give them a closer look, I want to post their links for anybody who has the same problem as me and who can't find proper answers with Google:\n<a href=\"http://www.directxtutorial.com/Lesson.aspx?lessonid=111-4-1\" rel=\"nofollow noreferrer\">http://www.directxtutorial.com/Lesson.aspx?lessonid=111-4-1</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ee416804(v=VS.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ee416804(v=VS.85).aspx</a></p>\n\n<p>If those tutorials are up to date, I might be able to figure out if the two books are still useful.</p>\n"}, {"tags": ["c++", "sfinae"], "answers": [{"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": false, "score": 2, "last_activity_date": 1499895507, "creation_date": 1499895507, "answer_id": 45067920, "question_id": 45067791, "link": "https://stackoverflow.com/questions/45067791/msvc-sfinae-substitution-does-not-fail/45067920#45067920", "title": "MSVC SFINAE: Substitution does not fail", "body": "<p>Visual Studio is terrible at SFINAE. Even though they claim to have improved the situation, most if not all SFINAE code I write (although it's not much) fails to work or even compile even though Clang and GCC handle the same code just fine.</p>\n\n<p>Send all the failing code to Microsoft so you have a bigger chance of getting it fixed.</p>\n"}, {"comments": [{"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1499897197, "post_id": 45068140, "comment_id": 77109824, "body": "This void_t works. But I do not understand why this implementation is better than the other (that worked until now in my simple cases). This new void_t is better because he &quot;ensure&quot; the use of &quot;T&quot;?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "edited": false, "score": 0, "creation_date": 1499897464, "post_id": 45068140, "comment_id": 77109934, "body": "<code>::type</code> force the SFINAE, and there was a change/defect to support the simple alias for <code>void_t</code> in standard."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1506312996, "last_edit_date": 1506312996, "creation_date": 1499896534, "answer_id": 45068140, "question_id": 45067791, "link": "https://stackoverflow.com/questions/45067791/msvc-sfinae-substitution-does-not-fail/45068140#45068140", "title": "MSVC SFINAE: Substitution does not fail", "body": "<p>You should try:</p>\n\n<pre><code>template&lt;typename T&gt; struct make_void {\n    using type = void;\n};\n\ntemplate&lt;typename T&gt;\nusing void_t = typename make_void&lt;T&gt;::type;\n</code></pre>\n\n<p>The information on <a href=\"https://stackoverflow.com/questions/45249985/how-to-require-an-exact-function-signature-in-the-detection-idiom/45250180#45250180\"><code>is_detected</code></a> might also help.</p>\n"}], "owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 45068140, "answer_count": 2, "score": 1, "last_activity_date": 1506312996, "creation_date": 1499894804, "question_id": 45067791, "link": "https://stackoverflow.com/questions/45067791/msvc-sfinae-substitution-does-not-fail", "title": "MSVC SFINAE: Substitution does not fail", "body": "<p>I am trying to make a kind of a \"has_member\". Using Clang (for msvc) it works good (I get 0, 1), but using MSVC it does not (I get 1, 1).</p>\n\n<p>Here is my code </p>\n\n<pre><code>template&lt;typename T&gt;\nusing void_t = void;\n\nnamespace detail {\n    template&lt;typename AlwaysVoid, template&lt;typename...&gt; typename Operator, typename ...Args&gt;\n    struct _is_valid : std::false_type {};\n\n\n    template&lt;template&lt;typename...&gt; typename Operator, typename ...Args&gt;\n    struct _is_valid&lt;void_t&lt;Operator&lt;Args...&gt;&gt;, Operator, Args...&gt; : std::true_type { using type = Operator&lt;Args...&gt;; };\n}\n\ntemplate&lt;template&lt;typename ...&gt; typename Operator, typename ...Args&gt;\nusing is_valid = detail::_is_valid&lt;void, Operator, Args...&gt;;\n\ntemplate&lt;typename T&gt;\nusing _has_push_back = decltype(std::declval&lt;T&gt;().push_back(std::declval&lt;typename T::value_type&gt;()));\n\ntemplate&lt;typename T&gt;\nusing has_push_back = is_valid&lt;_has_push_back, T&gt;;\n\nint main() {\n    std::cout &lt;&lt; has_push_back&lt;float&gt;::value  &lt;&lt; \" \" &lt;&lt; has_push_back&lt;std::vector&lt;float&gt;&gt;::value &lt;&lt; std::endl;\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>IMHO, <code>Operator&lt;Args...&gt;</code> does not fail in <code>detail::_is_valid</code>. But I do not understand how to make it valid for MSVC.</p>\n\n<p>I am using Visual Studio 2017</p>\n"}, {"tags": ["c++", "boost", "buffer", "polygon", "boost-geometry"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1499936682, "post_id": 45067757, "comment_id": 77124600, "body": "The raw data &quot;in case that&#39;s useful&quot;. What. That&#39;s the most useful bit."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 2, "creation_date": 1499937111, "post_id": 45067757, "comment_id": 77124916, "body": "Geez. Who&#39;s being constructive. Or jumpy. I&#39;m sorry I spent the time. I guess?"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1499937515, "post_id": 45067757, "comment_id": 77125184, "body": "@ChrisD if you know what the problem was, why bother asking here?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1499973859, "post_id": 45067757, "comment_id": 77151189, "body": "I wasn&#39;t nitpicking that clause. I was pointing out that since you have a problem with a specific case, the specific case is the only thing that really matters. I&#39;d have preferred if you had none of the explanation and a solid self-contained code question. That, incidentally is in the guidelines for writing good questions. Even if you assume that the problem was with a &quot;probable misunderstanding of the library&quot;, I can tell you that there are probably 2 people in the know on this site. And they visit the site probably once a month. No need to bet your hedges on a freak incident."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1499973956, "post_id": 45067757, "comment_id": 77151232, "body": "Many people are willing to share their energy to help see issues, me included. In your verdict of what I said I wonder how you seem to know my motives. I don&#39;t assume I know yours. Here&#39;s a <a href=\"https://chat.stackoverflow.com/transcript/message/38102092#38102092\">peek behind the scenes that may give a little perspective</a> on that. I hope this clears up a bit on the perceived arrogance and dismissiveness. I truly hope my answer is helpful, regardless of whether  using the different join strategy makes sense at all."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 2560681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8a96460d18e11ff83c6c6e9d7c8e4?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/2560681/chris-d"}, "edited": false, "score": 0, "creation_date": 1499970323, "post_id": 45076238, "comment_id": 77149134, "body": "I appreciate the response. I&#39;ll have to figure out how my concept of orientation differs from Boost&#39;s. Unfortunately, my use case requires mitered ends. Anyone know why the mitered ends aren&#39;t working?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 131, "user_id": 2560681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8a96460d18e11ff83c6c6e9d7c8e4?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/2560681/chris-d"}, "edited": false, "score": 0, "creation_date": 1499974183, "post_id": 45076238, "comment_id": 77151341, "body": "I don&#39;t. Maybe you could ask a simplified, targeted question about that. And I&#39;d consider posting to the library mailing list, because the devs are quite active there (they sporadically contribute on SO too)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1499937085, "creation_date": 1499937085, "answer_id": 45076238, "question_id": 45067757, "link": "https://stackoverflow.com/questions/45067757/poor-or-incorrect-results-when-using-boost-geometry-for-polygon-buffering/45076238#45076238", "title": "Poor or incorrect results when using Boost Geometry for polygon buffering", "body": "<p>We can't tell, because you failed to include the source data. Your \"currentContour\" could contain anything.</p>\n\n<p>Working instead with the raw data you - fortunately - included, I read the polygon from WKT:</p>\n\n<pre><code>boost::geometry::read_wkt(\"POLYGON((61.2101898 81.9854202, 61.3715706 82.0616913, 61.4335442 82.1924744, 61.4778328 82.2606735, 61.5202942 82.3236465, 61.5283432 82.3527832, 61.5431557 82.4063950, 61.5221367 82.4381790, 61.3944855 82.4706116, 61.3497124 82.4679184, 61.3284111 82.4674301, 61.1539803 82.3401947, 61.1297760 82.2854843, 61.0671043 82.1489639, 61.0682831 82.0264740, 61.0667953 82.0112915, 61.0663414 82.0066376, 61.0707321 81.9976196, 61.0998306 81.9980850, 61.2101898 81.9854202))\", input);\n</code></pre>\n\n<p>Validation fails, because it's in the wrong orientation:</p>\n\n<blockquote>\n  <p>I can't tell whether your orientation was correctly managed by the clockwise flag, so check it as follows:</p>\n</blockquote>\n\n<pre><code>{\n    std::string reason;\n    if (!bg::is_valid(input, reason))\n        std::cout &lt;&lt; \"Input is not valid: \" &lt;&lt; reason &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>In case you need to fix any fixable errors:</p>\n\n<pre><code>bg::correct(input);\n</code></pre>\n\n<p>After that I got a clean buffer, but I see the spike. Not being well versed in all the options to <code>buffer</code>, I \"randomly\" changed <code>join_miter</code> to <code>join_round</code> and it went away:</p>\n\n<p><strong><kbd><a href=\"https://wandbox.org/permlink/4SOwaGC17qcXAgdZ\" rel=\"nofollow noreferrer\">Live On Wandbox</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/geometry/geometry.hpp&gt;\n#include &lt;boost/geometry/io/io.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nnamespace bg = boost::geometry;\ntypedef bg::model::d2::point_xy&lt;float&gt; BoostPoint;\ntypedef bg::model::polygon&lt;BoostPoint&gt; BoostPolygon;\ntypedef bg::model::multi_polygon&lt;BoostPolygon&gt; BoostMultipolygon;\n\nint main() {\n    BoostPolygon input;\n    BoostMultipolygon output;\n\n    boost::geometry::read_wkt(\"POLYGON((61.2101898 81.9854202, 61.3715706 82.0616913, 61.4335442 82.1924744, 61.4778328 82.2606735, 61.5202942 82.3236465, 61.5283432 82.3527832, 61.5431557 82.4063950, 61.5221367 82.4381790, 61.3944855 82.4706116, 61.3497124 82.4679184, 61.3284111 82.4674301, 61.1539803 82.3401947, 61.1297760 82.2854843, 61.0671043 82.1489639, 61.0682831 82.0264740, 61.0667953 82.0112915, 61.0663414 82.0066376, 61.0707321 81.9976196, 61.0998306 81.9980850, 61.2101898 81.9854202))\", input);\n    {\n        std::string reason;\n        if (!bg::is_valid(input, reason))\n            std::cout &lt;&lt; \"Input is not valid: \" &lt;&lt; reason &lt;&lt; \"\\n\";\n    }\n    bg::correct(input);\n    {\n        std::string reason;\n        if (!bg::is_valid(input, reason))\n            std::cout &lt;&lt; \"Input is not valid: \" &lt;&lt; reason &lt;&lt; \"\\n\";\n        else\n            std::cout &lt;&lt; \"Input is valid\";\n    }\n\n    // Declare boost strategies for buffer function.\n    bg::strategy::buffer::distance_symmetric&lt;double&gt; distance_strategy(-0.05);\n    bg::strategy::buffer::join_round join_strategy;\n    bg::strategy::buffer::end_round end_strategy;\n    bg::strategy::buffer::point_circle point_strategy;\n    bg::strategy::buffer::side_straight side_strategy;\n    // Perform polygon buffering.\n    bg::buffer(input, output, distance_strategy, side_strategy, join_strategy, end_strategy, point_strategy);\n\n    {\n        std::ofstream svg(\"output.svg\");\n        boost::geometry::svg_mapper&lt;BoostPoint&gt; mapper(svg, 400, 400);\n        mapper.add(output);\n        mapper.add(input);\n\n        mapper.map(input, \"fill-opacity:0.5;fill:rgb(153,204,0);stroke:rgb(153,204,0);stroke-width:2\");\n        mapper.map(output, \"fill-opacity:0.5;fill:rgb(204,153,0);stroke:rgb(202,153,0);stroke-width:2\");\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/tuffY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tuffY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 2560681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8a96460d18e11ff83c6c6e9d7c8e4?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/2560681/chris-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1499977121, "creation_date": 1499977121, "answer_id": 45090211, "question_id": 45067757, "link": "https://stackoverflow.com/questions/45067757/poor-or-incorrect-results-when-using-boost-geometry-for-polygon-buffering/45090211#45090211", "title": "Poor or incorrect results when using Boost Geometry for polygon buffering", "body": "<p>I wasn't able to get mitered ends working with Boost. I instead switched to the <a href=\"http://www.angusj.com/delphi/clipper.php\" rel=\"nofollow noreferrer\" title=\"Clipper library\">Clipper Library</a> which handled mitered ends without a hitch.</p>\n"}, {"tags": [], "owner": {"reputation": 50, "user_id": 4942755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef34376f2e26a04c2a0c31282117cd25?s=128&d=identicon&r=PG&f=1", "display_name": "Sandell0", "link": "https://stackoverflow.com/users/4942755/sandell0"}, "is_accepted": false, "score": 0, "last_activity_date": 1614258692, "creation_date": 1614258692, "answer_id": 66369154, "question_id": 45067757, "link": "https://stackoverflow.com/questions/45067757/poor-or-incorrect-results-when-using-boost-geometry-for-polygon-buffering/66369154#66369154", "title": "Poor or incorrect results when using Boost Geometry for polygon buffering", "body": "<p>Boost::geometry::strategy::buffer::join_miter had a bug that caused this behavior before version 1.71. Updating boost should fix this problem.</p>\n<p>Relevant GitHub issue:\n<a href=\"https://github.com/boostorg/geometry/issues/596\" rel=\"nofollow noreferrer\">https://github.com/boostorg/geometry/issues/596</a></p>\n"}], "owner": {"reputation": 131, "user_id": 2560681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8a96460d18e11ff83c6c6e9d7c8e4?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/2560681/chris-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1463, "favorite_count": 0, "accepted_answer_id": 45090211, "answer_count": 3, "score": 3, "last_activity_date": 1614258692, "creation_date": 1499894679, "last_edit_date": 1556216239, "question_id": 45067757, "link": "https://stackoverflow.com/questions/45067757/poor-or-incorrect-results-when-using-boost-geometry-for-polygon-buffering", "title": "Poor or incorrect results when using Boost Geometry for polygon buffering", "body": "<p>I am using Boost::Geometry::Buffer to create an inner offset, or dilation, of irregularly shaped polygons. The image below shows an example input and output. The original polygon is displayed in white and the offset polygon is displayed in purple. There are two sets of extraneous lines on the right side of the purple polygon (seen as the thicker/brighter regions) and a long extraneous spike on the left.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7CSsx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7CSsx.png\" alt=\"Example output from Boost::Geometry::Buffer\"></a></p>\n\n<p>The polygon used in the example is pretty basic. It lacks any kind of symmetry, but has no sharp turns or jagged edges. The raw data for the input polygon is this list of Cartesian points:</p>\n\n<pre><code>x: 61.2101898, y: 81.9854202\nx: 61.3715706, y: 82.0616913\nx: 61.4335442, y: 82.1924744\nx: 61.4778328, y: 82.2606735\nx: 61.5202942, y: 82.3236465\nx: 61.5283432, y: 82.3527832\nx: 61.5431557, y: 82.4063950\nx: 61.5221367, y: 82.4381790\nx: 61.3944855, y: 82.4706116\nx: 61.3497124, y: 82.4679184\nx: 61.3284111, y: 82.4674301\nx: 61.1539803, y: 82.3401947\nx: 61.1297760, y: 82.2854843\nx: 61.0671043, y: 82.1489639\nx: 61.0682831, y: 82.0264740\nx: 61.0667953, y: 82.0112915\nx: 61.0663414, y: 82.0066376\nx: 61.0707321, y: 81.9976196\nx: 61.0998306, y: 81.9980850\nx: 61.2101898, y: 81.9854202\n</code></pre>\n\n<p>This is the code that I am using to generate the offset polygon:</p>\n\n<pre><code>namespace bg = boost::geometry;\ntypedef bg::model::d2::point_xy&lt;float&gt; BoostPoint;\ntypedef bg::model::polygon&lt;BoostPoint&gt; BoostPolygon;\ntypedef bg::model::multi_polygon&lt;BoostPolygon&gt; BoostMultipolygon;\n\nstd::vector&lt;BoostPoint&gt; points;\nBoostPoint tmpPoint;\nBoostPolygon input;\nBoostMultipolygon output;\n\n/* currentContour is a pointer to a non-Boost specialized polygon\n*  structure. It contains a bool indicating clockwise/counterclockwise\n*  direction and a list of lines, each line defined by two x-y points.\n*  For each line, point 2 follows point 1 in the clockwise/counterclockwise\n*  direction of that polygon.\n*/\n\nif (currentContour-&gt;clockwise) {\n    for (int line = 0; line &lt; currentContour-&gt;lines.size(); line++) {\n        bg::set&lt;0&gt;(tmpPoint, currentContour-&gt;lines[line].x1);\n        bg::set&lt;1&gt;(tmpPoint, currentContour-&gt;lines[line].y1);\n        points.push_back(tmpPoint);\n    }\n    // Add last point to wrap back around to starting point.\n    bg::set&lt;0&gt;(tmpPoint, currentContour-&gt;lines.back().x2);\n    bg::set&lt;1&gt;(tmpPoint, currentContour-&gt;lines.back().y2);\n    points.push_back(tmpPoint);\n}\nelse {\n    for (int line = currentContour-&gt;lines.size() - 1; line &gt;= 0; line--) {\n        bg::set&lt;0&gt;(tmpPoint, currentContour-&gt;lines[line].x2);\n        bg::set&lt;1&gt;(tmpPoint, currentContour-&gt;lines[line].y2);\n        points.push_back(tmpPoint);\n    }\n    // Add last point to wrap back around to starting point.\n    bg::set&lt;0&gt;(tmpPoint, currentContour-&gt;lines.front().x1);\n    bg::set&lt;1&gt;(tmpPoint, currentContour-&gt;lines.front().y1);\n    points.push_back(tmpPoint);\n}\n\n// Transfer points to polygon object.\nbg::assign_points(input, points);\n// Declare boost strategies for buffer function.\nbg::strategy::buffer::distance_symmetric&lt;double&gt; distance_strategy(-0.05);\nbg::strategy::buffer::join_miter join_strategy;\nbg::strategy::buffer::end_round end_strategy;\nbg::strategy::buffer::point_circle point_strategy;\nbg::strategy::buffer::side_straight side_strategy;\n// Perform polygon buffering.\nbg::buffer(input, output, distance_strategy, side_strategy, join_strategy,\n    end_strategy, point_strategy);\n</code></pre>\n\n<p>Boost is a major reputable library, so I have a hard time believing that its geometry APIs would fail on a polygon so simple. Why am I getting those extraneous lines? If any additional information would be helpful, I will be happy to provide it.</p>\n"}, {"tags": ["javascript", "c++", "interop", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 1813, "user_id": 1514010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLtSx.png?s=128&g=1", "display_name": "zakki", "link": "https://stackoverflow.com/users/1514010/zakki"}, "is_accepted": false, "score": 2, "last_activity_date": 1500174550, "creation_date": 1500174550, "answer_id": 45124601, "question_id": 45067715, "link": "https://stackoverflow.com/questions/45067715/trouble-getting-c-sdl-code-working-through-emscripten-in-js/45124601#45124601", "title": "Trouble getting C++ SDL Code working through Emscripten in JS", "body": "<p>Instead of the main loop, we have to use <code>emscripten_set_main_loop()</code> and callback.</p>\n\n<p><a href=\"https://kripken.github.io/emscripten-site/docs/porting/emscripten-runtime-environment.html\" rel=\"nofollow noreferrer\">https://kripken.github.io/emscripten-site/docs/porting/emscripten-runtime-environment.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8297235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976417e90aaba940a477d23d25434a45?s=128&d=identicon&r=PG&f=1", "display_name": "AI coder", "link": "https://stackoverflow.com/users/8297235/ai-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500174550, "creation_date": 1499894491, "question_id": 45067715, "link": "https://stackoverflow.com/questions/45067715/trouble-getting-c-sdl-code-working-through-emscripten-in-js", "title": "Trouble getting C++ SDL Code working through Emscripten in JS", "body": "<p>The overall goal is to get a chess-like board game on a 10x10 checkered board, so if there is already a similar example in Emscripten-compatible SDL, do post a link. Anyway, here is the code I have: </p>\n\n<pre><code>//Using SDL and standard IO\n#include &lt;iostream&gt;\n#include &lt;SDL.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n//Screen dimension constants\nconst int SCREEN_WIDTH = 480;\nconst int SCREEN_HEIGHT = 480;\n\nbool init();\nvoid close();\nSDL_Window* gWindow = NULL;\nSDL_Surface* gScreenSurface = NULL;\nSDL_Surface* gHelloWorld = NULL;\n\nbool init()\n{\n    //Initialization flag\n    bool success = true;\n    //Initialize SDL\n    if (SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n    {\n        printf(\"SDL could not initialize! SDL_Error: %s\\n\", SDL_GetError());\n        success = false;\n    }\n    else\n    {\n        //Create window\n        gWindow = SDL_CreateWindow(\"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN);\n        if (gWindow == NULL)\n        {\n            printf(\"Window could not be created! SDL_Error: %s\\n\", SDL_GetError());\n            success = false;\n        }\n        else\n        {\n            //Get window surface\n            gScreenSurface = SDL_GetWindowSurface(gWindow);\n        }\n    }\n\n    return success;\n}\n\n\nvoid close()\n{\n    //Deallocate surface\n    SDL_FreeSurface(gHelloWorld);\n    gHelloWorld = NULL;\n\n    //Destroy window\n    SDL_DestroyWindow(gWindow);\n    gWindow = NULL;\n\n    //Quit SDL subsystems\n    SDL_Quit();\n}\n\nint main(int argc, char* args[])\n{\n    //Start up SDL and create window\n    if (!init())\n    {\n        printf(\"Failed to initialize!\\n\");\n    }\n    else\n    {\n        SDL_Event event;\n        int i = 0;\n        std::cout &lt;&lt; \"Working\\n\";\n        while (i&lt;10) {\n            if (SDL_PollEvent(&amp;event))\n            {\n                //If a key was pressed\n                if (event.type == SDL_MOUSEBUTTONDOWN)\n                {\n                    i++;\n                    int x, y;\n                    SDL_GetMouseState(&amp;x, &amp;y);\n                    printf(\"Mouse Location: %i %i\\n\", x/48, y/48);\n                }\n\n            }\n        }\n    }\n\n    //Free resources and close SDL\n    close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I know that the code is badly formatted, it's just a hack to test the capability. Anyway, it works perfectly on Visual Studio, and successfully compiles with emscripten, but crashes when the JS application is launched. I'm sure the problem is the event-polling loop in the main but am not sure why</p>\n"}, {"tags": ["c#", "c++", "arrays", "pointers", "dll"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1499894749, "post_id": 45067630, "comment_id": 77108839, "body": "I the function using Windows Parameters list or C language parameter list?  I would be using IntPtr in c# for pointers.  IntPtr are 4 bytes which is equivalent to a c# Int to the code may look like it is working.  I would also make the return parameter an uint not an int to be the same as as the dll."}], "answers": [{"tags": [], "owner": {"reputation": 317, "user_id": 8298327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32be090482d5af7292aaf5e3a3a84584?s=128&d=identicon&r=PG&f=1", "display_name": "bricx", "link": "https://stackoverflow.com/users/8298327/bricx"}, "is_accepted": true, "score": 0, "last_activity_date": 1499902219, "creation_date": 1499902219, "answer_id": 45069074, "question_id": 45067630, "link": "https://stackoverflow.com/questions/45067630/c-call-to-c-dll-function-that-requires-an-array-of-doubles-and-a-struct-as-in/45069074#45069074", "title": "C# call to C++ DLL function that requires an array of doubles and a struct as input", "body": "<p>Yes, as jdweng suggested, the solution is to use a IntPtr for dMemDouble in C#.\n as follows:</p>\n\n<pre><code>[DllImport(\"plsiqp32.dll\", EntryPoint = \"LoadMemDouble\", SetLastError = true, CharSet = CharSet.None)]\npublic static extern uint dLoadMemDouble(int handleCal, IntPtr dYvalues, ref DoubleHeader Header); \n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>IntPtr p = Marshal.AllocCoTaskMem(sizeof(double) * myYvalues.Length);\n            Marshal.Copy(myYvalues, 0, p, myYvalues.Length);\n\nloadFromMemory = dLoadMemDouble(handleCal, p, ref myHeader);\n\nMarshal.FreeHGlobal(p);\n</code></pre>\n\n<p>Now that works nicely.\nThanks!</p>\n"}], "owner": {"reputation": 317, "user_id": 8298327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32be090482d5af7292aaf5e3a3a84584?s=128&d=identicon&r=PG&f=1", "display_name": "bricx", "link": "https://stackoverflow.com/users/8298327/bricx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 45069074, "answer_count": 1, "score": 0, "last_activity_date": 1499902242, "creation_date": 1499894082, "last_edit_date": 1499902242, "question_id": 45067630, "link": "https://stackoverflow.com/questions/45067630/c-call-to-c-dll-function-that-requires-an-array-of-doubles-and-a-struct-as-in", "title": "C# call to C++ DLL function that requires an array of doubles and a struct as input", "body": "<p>I need to call the following function from an old C++ DLL in my C# code. I can't edit the C++ code and this is all the info I have about that function:</p>\n\n<blockquote>\n  <p>LoadMemDouble:        </p>\n  \n  <hr>\n  \n  <p>Function:  uint PASCAL LoadMemDoubleAB(void far* lpobj,double far* lpy,TARHDR far* lptar)</p>\n  \n  <p>Purpose:   Load data into DLL from a passed structure of 64-bit \n    floats. IMPORTANT - any passed arrays, data structures, etc. must be \n    global as the DLL just maintains a pointer back to the array / structure.</p>\n  \n  <p>Arguments:   </p>\n  \n  <ul>\n  <li><p>lpobj = Far pointer of prediction data structure;</p></li>\n  <li><p>lpy = Pointer of double type y value;       </p></li>\n  <li><p>lptar = Pointer of data header. Note TARHDR was defined as:</p></li>\n  </ul>\n</blockquote>\n\n<pre><code>typedef struct  {  dword   tarnpts;        //total number of data\n                   double  tarffp;         //x value of first y data    \n                   double  tarflp;         //x value of last y data\n                   char    tarxtype;       //data type of x value \n                   char    tarytype;       //data type of y value \n                   uint    tarx;           //1=has x value 0=only y trace \n}TARHDR;\n</code></pre>\n\n<blockquote>\n  <p>!!tarx field must be set to zero;</p>\n  \n  <p>Returns:   0 or error code.</p>\n</blockquote>\n\n<p>I imported the DLL in C# as follows:</p>\n\n<pre><code>[DllImport(\"plsiqp32.dll\", EntryPoint = \"LoadMemDouble\", SetLastError = true, CharSet = CharSet.None)]\npublic static extern int dLoadMemDouble(int handleCal, ref double dYvalues, ref DoubleHeader Header);\n</code></pre>\n\n<p>I built my structure in C# as follows:</p>\n\n<pre><code>public struct DoubleHeader\n        {\n            public int npts { get; set; }    \n            public double FFP { get; set; }  \n            public double FLP { get; set; }  \n            public byte Xtype { get; set; }   \n            public byte YType { get; set; }   \n            public int Xtra { get; set; }    //this must be 0.\n        }\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code> public DoubleHeader myHeader;\n public double[] myYvalues;\n\n myHeader = new DoubleHeader();\n\n myHeader.npts = npts;\n myHeader.FFP = FFP;\n myHeader.FLP = FLP;\n myHeader.XType= Xtype;\n myHeader.YType = Ytype;\n myHeader.Xtra = 0;\n\n myYvalues = dYvalues;\n\n int loadFromMemory;\n\n loadFromMemory = dLoadMemDouble(handleCal, ref myYvalues[0], ref myHeader);\n</code></pre>\n\n<p>I have no error message of any kind but it doesn't seems that this is working properly. I am suspecting there is an error in the way I am passing the double array and/or the structure. I am quite new to C# as well and I am stuck on this problem.</p>\n\n<p>Only info I could find about this is in German here: <a href=\"http://microsoft.public.de.german.entwickler.dotnet.csharp.narkive.com/g9rTQP1U/c-dll-in-c-nutzen#post9\" rel=\"nofollow noreferrer\">http://microsoft.public.de.german.entwickler.dotnet.csharp.narkive.com/g9rTQP1U/c-dll-in-c-nutzen#post9</a>\nand its dated from 14 years ago... that's a really old DLL.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["android", "c++", "cross-compiling"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1499894963, "post_id": 45067561, "comment_id": 77108944, "body": "Show the code that produced that error message. Chances are that the compiler is right."}, {"owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1499895340, "post_id": 45067561, "comment_id": 77109124, "body": "@PeteBecker well, it&#39;s just a call to fmax... <code>i &lt;= fmax(limit_, pipeline_);</code> includes <code>&lt;algorithm&gt;</code>"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1499896513, "post_id": 45067561, "comment_id": 77109563, "body": "What type are i,  limit_, and pipline_?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1499896516, "post_id": 45067561, "comment_id": 77109566, "body": "Well, duh. <b>Show the code</b>. You need to produce the smallest <b>code example</b> you can come up with that compiles and shows the problem."}, {"owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "edited": false, "score": 0, "creation_date": 1499898433, "post_id": 45067561, "comment_id": 77110252, "body": "here it is:  <code>int i; \tunsigned int a; \tboost::atomic&lt;int&gt; b; \ti = fmax(a,b);</code> . and <code>#include &lt;algorithm&gt;;</code> and <code>#include &lt;boost&#47;atomic.hpp&gt;;</code>"}, {"owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1499898644, "post_id": 45067561, "comment_id": 77110329, "body": "@TonyJ good hunch! i fixed it by explicit casting like <code>i &lt;= (int)fmax((double)limit_, (double)pipeline_);</code>"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 1, "creation_date": 1499899110, "post_id": 45067561, "comment_id": 77110469, "body": "@peetonn, fmax is for floating points, for int you can just use std::max. Also comparing unsigned int and int will give you problems. More over casting them to double than back to int could lose precision. You should really rethink what you are trying to do there. Edit: One more thing don&#39;t use c-style cast"}], "owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499895408, "creation_date": 1499893755, "last_edit_date": 1499895408, "question_id": 45067561, "link": "https://stackoverflow.com/questions/45067561/call-to-fmax-is-ambiguous-when-cross-compiling-for-android", "title": "Call to &#39;fmax&#39; is ambiguous when cross-compiling for android", "body": "<p>Getting <code>call to 'fmax' is ambiguous</code> when cross-compiling for android. There are three candidates:</p>\n\n<pre><code>src/interest-control.cpp:218:15: error: call to 'fmax' is ambiguous\n     i &lt;= fmax(limit_, pipeline_);\n          ^~~~\n&lt;...&gt;/toolchain/sysroot/usr/include/math.h:196:8: note: candidate function\ndouble  fmax(double, double) __attribute_const__;\n        ^\n&lt;...&gt;/toolchain/bin/../lib/gcc/arm-linux-androideabi/4.9.x/../../../../include/c++/4.9.x/math.h:1116:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY float       fmax(float __lcpp_x, float __lcpp_y) _NOEXCEPT             {return fmaxf(__lcpp_x, __lcpp_y);}\n                                             ^\n&lt;...&gt;/toolchain/bin/../lib/gcc/arm-linux-androideabi/4.9.x/../../../../include/c++/4.9.x/math.h:1117:46: note: candidate function\ninline _LIBCPP_INLINE_VISIBILITY long double fmax(long double __lcpp_x, long double __lcpp_y) _NOEXCEPT {return fmaxl(__lcpp_x, __lcpp_y);}\n</code></pre>\n\n<p>It does make sense to me that the compiler is confused. Here are my CFLAGS and CPPFLAGS:</p>\n\n<pre><code>$ echo $CFLAGS \n-isystem &lt;...&gt;/toolchain/include/c++/4.9.x/ --sysroot=&lt;...&gt;/toolchain/sysroot -I&lt;...&gt;/toolchain/sysroot/usr/include -I&lt;...&gt;/toolchain/include\n$ echo $CPPFLAGS\n-isystem &lt;...&gt;/toolchain/include/c++/4.9.x/ --sysroot=&lt;...&gt;/toolchain/sysroot -I&lt;...&gt;/toolchain/sysroot/usr/include -I&lt;...&gt;/toolchain/include\n</code></pre>\n\n<p>The compiler, however has more system search paths:</p>\n\n<pre><code>#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n .\n ./include\n ./src\n &lt;...&gt;/toolchain/include\n &lt;...&gt;/toolchain/bin/../lib/gcc/arm-linux-androideabi/4.9.x/../../../../include/c++/4.9.x\n &lt;...&gt;/toolchain/sysroot/usr/local/include\n &lt;...&gt;/toolchain/lib64/clang/5.0.300080/include\n &lt;...&gt;/toolchain/sysroot/usr/include\n</code></pre>\n\n<p>Which leads to confusion at build time. \nWhen I use <code>-nostdinc</code> flag it leads to more problems (like not finding <code>float.h</code> file, etc).\nI generated <a href=\"https://developer.android.com/ndk/guides/standalone_toolchain.html\" rel=\"nofollow noreferrer\">standalone android toolchain</a> and use GNU Autotools for compiling the library.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Why generated toolchain is ambiguous and conflicts with it's own <code>sysroot</code> and <code>include/c++/4.9.x</code> paths?</li>\n<li>Which search path directory one shall use - <code>sysroot</code> or <code>include/c++/4.9.x</code> (right now, both are used because either one is not sufficient, e.g. leads to files not found errors; but both of them result in ambiguous calls)? </li>\n</ol>\n"}, {"tags": ["c++", "multithreading", "time"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1499893742, "post_id": 45067491, "comment_id": 77108350, "body": "I would use std:chrono for this."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1499893742, "post_id": 45067491, "comment_id": 77108352, "body": "I think you need to explain the &quot;different result&quot;. What is different? Execution time? Or...?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1499893818, "post_id": 45067491, "comment_id": 77108388, "body": "<b><i>but in every experiment I recived diffrent result (small difference). Its even possible?</i></b> Yes I would expect a slightly different time each run. Remember you are likely running in an OS with other applications running."}, {"owner": {"reputation": 39, "user_id": 8130737, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c95cce6d157431659288e70c75c26927?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenz", "link": "https://stackoverflow.com/users/8130737/ferenz"}, "edited": false, "score": 0, "creation_date": 1499893892, "post_id": 45067491, "comment_id": 77108417, "body": "I have 4 thread and in all of them I measure time (for some reason...) and different is for exaplme the thread starts 30ms late."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1499894283, "post_id": 45067491, "comment_id": 77108627, "body": "You might find this interesting: <a href=\"http://en.cppreference.com/w/cpp/chrono/c/clock\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/chrono/c/clock</a>"}, {"owner": {"reputation": 39, "user_id": 8130737, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c95cce6d157431659288e70c75c26927?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenz", "link": "https://stackoverflow.com/users/8130737/ferenz"}, "edited": false, "score": 0, "creation_date": 1499894351, "post_id": 45067491, "comment_id": 77108658, "body": "In other words I want to make simulation and those little differences make every time diffrent simulation (I want to be same)."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1499894733, "post_id": 45067491, "comment_id": 77108830, "body": "To me it sounds as if this is an XY problem. See <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a> Describe what it is you really want to achieve and someone may help out."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1499895504, "post_id": 45067491, "comment_id": 77109202, "body": "It&#39;s virtually impossible to get precise, repeatable timing on a normal operating system. There are many background tasks occurring that interfere with the main application. There&#39;s also variation like which memory pages are in memory or need to be brought in from disk."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499895534, "post_id": 45067491, "comment_id": 77109210, "body": "You would have to use a specially-designed OS that gives your much more control over everything that&#39;s happening."}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": true, "score": 1, "last_activity_date": 1499928105, "creation_date": 1499928105, "answer_id": 45073160, "question_id": 45067491, "link": "https://stackoverflow.com/questions/45067491/measure-time-with-same-result/45073160#45073160", "title": "Measure time with same result", "body": "<p>The operating system runs in quanta - little chunks of processing which are are below our level of perception.</p>\n\n<p>Within a single quantum, the CPU should act reasonably stably.  If your task will use more than one quantum of time, then the operating system will be free to use slices of times for other tasks.</p>\n\n<p>Using a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">condition variable</a> You can notify_all to wake up any waiting threads.</p>\n\n<p>So start the number of threads, but before they are measured and start working have them waiting on a condition_variable.  Then when the condition_variable notify_all the threads will be runnable.  If they are started at the same time, you should get synchronized stable results.</p>\n\n<p>Variance occurs.</p>\n\n<ol>\n<li>Not scheduled - the cores on your CPU are doing other things, so 1 or more thread misses the quantum</li>\n<li>Blocked on IO.  If you need to interact with the disk, that can cause blocks until data is available.</li>\n<li>Blocked in mutex - if they are modifying a shared resource, the wait for the resource becoming free adds time.</li>\n<li>Cache behavior some operations cause the cache of all the CPUs to be flushed, this will affect the performance of all the threads.</li>\n<li>Whether data is in the cache or not the CPU runs faster from L1 cache, than from main memory.  If the threads read the same data, they will help each other cause the data to be cached, and run at the same (ish) speed.</li>\n</ol>\n"}], "owner": {"reputation": 39, "user_id": 8130737, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c95cce6d157431659288e70c75c26927?s=128&d=identicon&r=PG&f=1", "display_name": "Ferenz", "link": "https://stackoverflow.com/users/8130737/ferenz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45073160, "answer_count": 1, "score": 1, "last_activity_date": 1499928105, "creation_date": 1499893452, "question_id": 45067491, "link": "https://stackoverflow.com/questions/45067491/measure-time-with-same-result", "title": "Measure time with same result", "body": "<p>I want to measure time (very precisely in milliseconds) and start another thread (totally 4) at some time. I tried it with:</p>\n\n<pre><code>double Time()\n{\n    duration = (std::clock() - start);\n    return duration;\n}\n\n//...\n\nstart = std::clock();\nwhile (Time() &lt; 1000)\n{\n    //Start thread...\n    //...\n}\n</code></pre>\n\n<p>It works, but in every experiment I recived diffrent result (small difference).\nIts even possible? Does depends how many programs runs in background (It slows down my computer)? So if it possible what should I use? Thanks</p>\n\n<p>(sorry for my English)</p>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1499894715, "post_id": 45067467, "comment_id": 77108822, "body": "The problems seems to be the fact that objects returned by std::bind aren&#39;t movable (nor copyable) if they contain <code>std::unique_ptr</code>. I&#39;m not sure why."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1499895650, "post_id": 45067467, "comment_id": 77109246, "body": "<code>std::function&lt;void(int)&gt;</code> should be <i>CopyConstructible</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1499977920, "post_id": 45068051, "comment_id": 77153279, "body": "As I wrote <i>&quot;I have tried to sort of create my own lambda (using a struct with operator()) but I failed to get around the same issue&quot;</i>, how can you pass <code>MyFunctor</code> around (e.g to <code>processor</code>) so that someone else will call it?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1499978361, "post_id": 45068051, "comment_id": 77153508, "body": "As I said, <code>std::function</code> requires CopyConstructible callable, so you cannot use c++14 move capture lambda, of given equivalent. You have to wrap your resource in a copy constructible callable. <code>std::shared_ptr</code> might solve that."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 0, "creation_date": 1499979710, "post_id": 45068051, "comment_id": 77154189, "body": "Using <code>std::shared_ptr</code> was my original w\\e but I would like to avoid heap allocations in that flow so it is not an optimal solution for me. Aren&#39;t you referring to <code>MyFunctor</code> when you say  <i>&quot;wrap your resource in a copy constructible callable.&quot;</i>? if so then I don&#39;t understand how to create one..."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1499896086, "creation_date": 1499896086, "answer_id": 45068051, "question_id": 45067467, "link": "https://stackoverflow.com/questions/45067467/capture-moveable-only-objects-to-lambda-with-parameters/45068051#45068051", "title": "Capture moveable-only objects to lambda with parameters", "body": "<p>The equivalent to move capture of C++14 is</p>\n\n<pre><code>class MyFunctor\n{\npublic:\n    MyFunctor(ResourceType res) : res(std::move(res)) {}\n\n    void operator() (int x) const {\n        int usage_of_resource = *res + x;\n        std::cout &lt;&lt; usage_of_resource &lt;&lt; std::endl;\n    }\nprivate:\n    ResourceType res;\n};\n</code></pre>\n\n<p>And use it:</p>\n\n<pre><code>void handler(ResourceType r)\n{\n    MyFunctor f{std::move(r)};\n    f(42);\n}\n</code></pre>\n\n<p>You cannot use it for initialize anyway <code>std::function</code> as it requires <em>CopyConstructible</em> callable.</p>\n\n<p>You may wrap or transfer your resource in <code>std::shared_ptr</code> to store it in <code>std::function</code>, something like:</p>\n\n<pre><code>void handler(std::unique_ptr&lt;int&gt; r)\n{\n    std::shared_ptr&lt;int&gt; sr = std::move(r);\n    processor([sr](int x) {\n        int usage_of_resource = *sr + x;\n        std::cout &lt;&lt; usage_of_resource &lt;&lt; std::endl;\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1499896086, "creation_date": 1499893373, "last_edit_date": 1499895532, "question_id": 45067467, "link": "https://stackoverflow.com/questions/45067467/capture-moveable-only-objects-to-lambda-with-parameters", "title": "Capture moveable-only objects to lambda with parameters", "body": "<p>Basically I'm trying to create a lambda that captures an object that is moveable only (e.g unique_ptr), and take some argument as input.</p>\n\n<p>I have an expensive resource that is raised by callback which I need to move to another thread for processing. The object is moveable only (and this cannot change) and the callback signature takes it by value (can be changed to rvalue reference). The following is a minimal working example of the problem at state:</p>\n\n<pre><code>void processor(std::function&lt;void(int)&gt; func)\n{\n    auto thread = std::async(std::launch::async, func, 2);\n}\n\nusing ResourceType = std::unique_ptr&lt;int&gt;; //Example for moveable only type\n\nvoid handler(ResourceType r)\n{\n    processor([r](int x) // error C2280: ...unique_ptr...: attempting to reference a deleted function\n    {\n        int usage_of_resource = *r + x;\n        std::cout &lt;&lt; usage_of_resource &lt;&lt; std::endl;\n    });\n}\n</code></pre>\n\n<p>I tried following this question and answers (<a href=\"https://stackoverflow.com/questions/8236521/how-to-capture-a-unique-ptr-into-a-lambda-expression\">How to capture a unique_ptr into a lambda expression?</a>) \nBut, I can't use C++14 and the suggested answer there doesn't even compile.\nThis is what I tried:</p>\n\n<pre><code>std::function&lt;void(int)&gt; getAction(ResourceType p)\n{\n    return std::bind([](ResourceType&amp; r, int x)\n    { \n        int usage_of_resource = *r + x;\n        std::cout &lt;&lt; usage_of_resource &lt;&lt; std::endl; \n    }, std::move(p), std::placeholders::_1);\n}\nvoid handler(ResourceType r)\n{\n    processor(getAction(std::move(r)));\n}\n</code></pre>\n\n<blockquote>\n  <p>g++: error: use of deleted function</p>\n  \n  <p>msvc: error: attempting to reference a deleted function</p>\n</blockquote>\n\n<p>I have tried to sort of create my own lambda (using a <code>struct</code> with <code>operator()</code>) but I failed to get around the same issue. Eventually as a workaround I created a new pointer to my resource, and moved it there before calling the processor and then extracting it inside the lambda I pass. </p>\n\n<p>Is this a real issue with the C++ standard that is only solved in C++14? or is there a way to move the object somehow (preferably an elegant one of course)?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Capturing the underlying resource would potentially cause a memory leak, since the processor is a fixed size message queue that drops the first element (dequeues) when the queue is full and a new element arrives. So between the time of capture and the time of usage the lambda can be dropped and thus the resource would not be freed. </p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1499893356, "post_id": 45067435, "comment_id": 77108171, "body": "You can never use <code>p2</code> to modify an <code>int</code> it points to. If you could assign it <code>p2</code> to a <code>int*</code> then you would gain the ability to modify it. Consider the case  where <code>p2</code> actually pointed to a <code>const int</code>. The assignment <code>p1 = p2</code> would allow you to assign a value to a <code>const</code> object."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1499893411, "post_id": 45067435, "comment_id": 77108198, "body": "The compiler does not care about <code>var</code>. There&#39;s no <code>var</code> in <code>p1 = p2</code>. In <code>p1 = p2</code> you have an attempt to convert <code>const int *</code> to <code>int *</code>. This is not allowed in C++."}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1499893500, "post_id": 45067435, "comment_id": 77108238, "body": "I think what might be confusing you is that <code>var</code> is <i>actually</i> mutable, even though it was assigned to a pointer to const, and that you think the compiler should be able to figure this out and allow an assignment to a pointer to non-const? That opens a can of worms in flow analysis and would be impossible for a compiler to always get right. It would also be confusing to the programmer in more complicated code than above."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1499893646, "post_id": 45067435, "comment_id": 77108305, "body": "This is a mater of <i>rights</i> management. An analogy: just becuse some file is mutable does not mean that everyone who has access to that file should be allowed to modify it. The same thing happens in C++. If you have a <code>const int *</code> pointer it means that you have rights to read that <code>int</code>, but you don&#39;t have rights to modify it. You cannot simply &quot;upgrade&quot; your rights by nochalantly converting that pointer to <code>int *</code>. The compiler will not allow it."}, {"owner": {"reputation": 11, "user_id": 8298282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d5982ad4e8a7d68d75cd8dfa2c103f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk&#225;\u0161 J.", "link": "https://stackoverflow.com/users/8298282/luk%c3%a1%c5%a1-j"}, "edited": false, "score": 0, "creation_date": 1499893861, "post_id": 45067435, "comment_id": 77108403, "body": "Thank you so much."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1499894055, "post_id": 45067511, "comment_id": 77108487, "body": "I think OP is asking <i>why</i> there is a rule forbidding the assignment from <code>const int*</code> to <code>int*</code>."}, {"owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1499894342, "post_id": 45067511, "comment_id": 77108655, "body": "@Fran&#231;oisAndrieux Maybe. :) I think he was mislead by the fact that if it&#39;s legal <code>b=c</code> and <code>a=c</code>, then it should be legal <code>a=b</code>. But assignment operators are not such transitive, because they use kind of casting."}, {"owner": {"reputation": 11, "user_id": 8298282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d5982ad4e8a7d68d75cd8dfa2c103f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk&#225;\u0161 J.", "link": "https://stackoverflow.com/users/8298282/luk%c3%a1%c5%a1-j"}, "edited": false, "score": 0, "creation_date": 1499894806, "post_id": 45067511, "comment_id": 77108864, "body": "I was confused because I knew that <code>var</code> can be changed and didn&#39;t realise that <code>p2</code> is not able to &quot;tell&quot; the compiler that <code>var</code> is not const as that information is not available to compiler. So it is forbidden to assign <code>const int*</code> to <code>int*</code> because we don&#39;t know whether <code>const int*</code> is pointing to constant or not. And we can&#39;t assign <code>const int</code> to <code>int*</code>. Right?"}, {"owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "reply_to_user": {"reputation": 11, "user_id": 8298282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d5982ad4e8a7d68d75cd8dfa2c103f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk&#225;\u0161 J.", "link": "https://stackoverflow.com/users/8298282/luk%c3%a1%c5%a1-j"}, "edited": false, "score": 1, "creation_date": 1499895073, "post_id": 45067511, "comment_id": 77109004, "body": "@Luk&#225;\u0161J. Yes, <code>p2</code> doesn&#39;t remember that <code>var</code> can be changed."}], "tags": [], "owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "is_accepted": false, "score": 2, "last_activity_date": 1499893557, "creation_date": 1499893557, "answer_id": 45067511, "question_id": 45067435, "link": "https://stackoverflow.com/questions/45067435/c-cant-assign-top-const-pointer-to-another-non-const-pointer/45067511#45067511", "title": "C++ - can&#39;t assign top-const pointer to another non-const pointer", "body": "<p>Emm... Declared type of <code>p1</code> is <code>int *</code>. And type of <code>p2</code> in <code>const int *</code>.<br> So you want to assign <code>const int*</code> to <code>int*</code>, which isn't allowed. <br><code>p1 = &amp;var</code> is allowed, because <code>var</code> has <code>int</code> type, not <code>const int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14539397, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yS2KXKpiJYs/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclnhu8NNR4nfnG61buy9BsxjR9myA/s96-c/photo.jpg?sz=128", "display_name": "Usama Javed", "link": "https://stackoverflow.com/users/14539397/usama-javed"}, "is_accepted": false, "score": 0, "last_activity_date": 1603933811, "creation_date": 1603933811, "answer_id": 64583521, "question_id": 45067435, "link": "https://stackoverflow.com/questions/45067435/c-cant-assign-top-const-pointer-to-another-non-const-pointer/64583521#64583521", "title": "C++ - can&#39;t assign top-const pointer to another non-const pointer", "body": "<p>You simply cannot assign a pointer to constant to another pointer.\nFor example P1 is pointer which is pointing to a constant value, If you give the address of this const int to another pointer, So that can modify the the INT which we want to be constatnt.</p>\n"}], "owner": {"reputation": 11, "user_id": 8298282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d5982ad4e8a7d68d75cd8dfa2c103f?s=128&d=identicon&r=PG&f=1", "display_name": "Luk&#225;\u0161 J.", "link": "https://stackoverflow.com/users/8298282/luk%c3%a1%c5%a1-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1603933811, "creation_date": 1499893244, "question_id": 45067435, "link": "https://stackoverflow.com/questions/45067435/c-cant-assign-top-const-pointer-to-another-non-const-pointer", "title": "C++ - can&#39;t assign top-const pointer to another non-const pointer", "body": "<p>My compiler gives me error when I try to compile this. It tells me that </p>\n\n<pre><code>p1 = p2;\n</code></pre>\n\n<p>from this :</p>\n\n<pre><code>int main ()\n{\n    int var, *p1;\n    const int *p2 = &amp;var;\n    p1 = p2;\n    return 0;\n}\n</code></pre>\n\n<p>is invalid conversion (const int --> int). Var is not const so it shouldn't hinder. I get that p2 can't be used to change value of var, but I think it should just assign adress if var to p1. </p>\n\n<p>I know that this:</p>\n\n<pre><code>    p1 = &amp;var;\n</code></pre>\n\n<p>yields the same result, but what interests me is why the former doesn't work. It is just out of curiosity about inner workings of C++.</p>\n\n<p>Sorry about my languages (C++ and English), I'm not programmer, nor native speaker.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "cycle"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 7, "creation_date": 1499892783, "post_id": 45067303, "comment_id": 77107870, "body": "<code>cfab=0</code> -&gt; <code>cfab == 0</code> ?"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1499892862, "post_id": 45067303, "comment_id": 77107930, "body": "The best tool to use for this is your debugger."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1499893044, "post_id": 45067303, "comment_id": 77108020, "body": "@Charles Eclipse already marks it as a potential problem, when I copy/pasted the code into it for autoformatting it."}], "answers": [{"tags": [], "owner": {"reputation": 8038, "user_id": 304748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0a40ced265d8fde3bd35d5689c4181?s=128&d=identicon&r=PG", "display_name": "Brian Walker", "link": "https://stackoverflow.com/users/304748/brian-walker"}, "is_accepted": true, "score": 0, "last_activity_date": 1499893058, "creation_date": 1499893058, "answer_id": 45067390, "question_id": 45067303, "link": "https://stackoverflow.com/questions/45067303/i-have-a-cycle-error-in-c/45067390#45067390", "title": "I have a cycle error in c ++", "body": "<p>The code reads in a number to the <code>num</code> variable and does a <code>while(num&gt;0)</code> - but it never changes <code>num</code> so it is always greater than 0 and loops forever.</p>\n\n<p>Maybe change <code>while(num&gt;0) {</code> to <code>while(num-- &gt; 0) {</code> to decrement <code>num</code> each time and the loop will run <code>num</code> times instead of inifinite times.</p>\n"}], "owner": {"reputation": 1, "user_id": 8298294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c04ce425afeef0032ec46f22dc9c71c?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/8298294/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 45067390, "answer_count": 1, "score": -3, "last_activity_date": 1499893058, "creation_date": 1499892665, "last_edit_date": 1499892915, "question_id": 45067303, "link": "https://stackoverflow.com/questions/45067303/i-have-a-cycle-error-in-c", "title": "I have a cycle error in c ++", "body": "<p>The error is generated when the user adds the times he wants to repeat the cycle, but he keeps repeating the cycle without end</p>\n\n<p>Here is the code</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    char resp, copcion, varied, tprod;\n    int cfab, ncod, num;\n\n    cout &lt;&lt; \"How many products do you want to register ?, enter the respective number\";\n    cin &gt;&gt; num;\n\n    while (num &gt; 0)\n    {\n        cout &lt;&lt; \"Enter the product type If you are a Child (n) or Adult (a)\";\n        cin &gt;&gt; tprod;\n\n        if ((tprod != 'n') &amp;&amp; (tprod != 'N') &amp;&amp; (tprod != 'a') &amp;&amp; (tprod != 'A'))\n        {\n            cout &lt;&lt; \"ERROR: The product type is only Children (n) or Adults (a)\" &lt;&lt; endl;\n        }\n\n        cout &lt;&lt; \"Enter your Variety for Salted (s) and Sweets (d)\";\n        cin &gt;&gt; varied;\n\n        if ((varied != 'd') &amp;&amp; (varied != 'D') &amp;&amp; (varied != 's') &amp;&amp; (varied != 'S'))\n        {\n            cout &lt;&lt; \"ERROR: The variety of products are only Sweets (d) or Salted (s)\" &lt;&lt; endl;\n        }\n        //Code range\n        //Salted 1 to 10\n        //Sweets 11 to 20\n\n        cout &lt;&lt; \"Enter the product code you wish to assign\";\n        cin &gt;&gt; ncod;\n\n        if (ncod &gt; 20)\n        {\n            cout &lt;&lt; \"ERROR: There is a range of numbers, you exceeded that amount\" &lt;&lt; endl;\n        }\n\n        cout &lt;&lt; \"Enter the respective amount\";\n        cin &gt;&gt; cfab;\n\n        if (cfab = 0)\n        {\n            cout &lt;&lt; \"ERROR: Amount entered is not valid\";\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In advance thanks for solving the doubts.</p>\n"}, {"tags": ["c++", "string", "string-concatenation"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1499892557, "post_id": 45067263, "comment_id": 77107758, "body": "ask you coworker for a test app that shows the difference. Its certainly faster to type :-)"}, {"owner": {"reputation": 5380, "user_id": 376371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fc14191bcdb710343fdf049912ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Godard", "link": "https://stackoverflow.com/users/376371/erik-godard"}, "edited": false, "score": 2, "creation_date": 1499892603, "post_id": 45067263, "comment_id": 77107782, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35646537/why-is-stdstringappend-less-powerful-than-stdstringoperator\">Why is std::string::append() less powerful than std::string::operator+()?</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1499892682, "post_id": 45067263, "comment_id": 77107819, "body": "I would expect both versions to have the exact same result using any good standard library with any good compiler. However, <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/append#Complexity\" rel=\"nofollow noreferrer\"><code>append</code> has no restrictions on its complexity</a>, while <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%2B%3D#Complexity\" rel=\"nofollow noreferrer\"><code>operator+=</code> does</a>."}, {"owner": {"reputation": 1254, "user_id": 5179394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lg1MR.png?s=128&g=1", "display_name": "ClydeTheGhost", "link": "https://stackoverflow.com/users/5179394/clydetheghost"}, "reply_to_user": {"reputation": 5380, "user_id": 376371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fc14191bcdb710343fdf049912ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Godard", "link": "https://stackoverflow.com/users/376371/erik-godard"}, "edited": false, "score": 0, "creation_date": 1499892782, "post_id": 45067263, "comment_id": 77107869, "body": "@ErikGodard I meant other than the obvious semantic differences, i.e. append can take different kinds of arguments. For this specific example, is there any difference between using one or the other form."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1499893059, "post_id": 45067263, "comment_id": 77108024, "body": "I would probably favor using <code>+=</code> simply because its meaning is obvious in analogy with <code>+</code>, and <code>+</code> does not have an alternative afaik. Another nice bonus of <code>+=</code> and <code>+</code> is that you can write them yourself if you have a custom type you want to efficiently append to strings; operators get considered as both free and member functions in most cases, <code>append</code> has to be a member. In short perf is not a good argument but use <code>+=</code> anyhow."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1499893720, "post_id": 45067263, "comment_id": 77108338, "body": "If I see someone using <code>append(str)</code> this immediately raises eyebrows as I have to ask myself why they are not using <code>operator+=</code>. It could be a mistake, maybe they intended to call an overload of <code>append()</code> that provides different functionality than <code>operator+=</code>. When using <code>operator+=</code> the intention is clearer in my opinion."}], "answers": [{"comments": [{"owner": {"reputation": 1254, "user_id": 5179394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lg1MR.png?s=128&g=1", "display_name": "ClydeTheGhost", "link": "https://stackoverflow.com/users/5179394/clydetheghost"}, "edited": false, "score": 0, "creation_date": 1499893737, "post_id": 45067502, "comment_id": 77108345, "body": "Seems legit but what is the source of this documentation?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 1254, "user_id": 5179394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lg1MR.png?s=128&g=1", "display_name": "ClydeTheGhost", "link": "https://stackoverflow.com/users/5179394/clydetheghost"}, "edited": false, "score": 0, "creation_date": 1499893819, "post_id": 45067502, "comment_id": 77108389, "body": "@AdrianPadin Well, he linked it."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 1254, "user_id": 5179394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lg1MR.png?s=128&g=1", "display_name": "ClydeTheGhost", "link": "https://stackoverflow.com/users/5179394/clydetheghost"}, "edited": false, "score": 0, "creation_date": 1499894058, "post_id": 45067502, "comment_id": 77108493, "body": "@Adrian Padin: Its an online draft version (&quot;C++ standard working draft N3337 (C++11 + editorial fixes)&quot;, which is available for free and therefore often used here on SO. The normative version will very likely not differ in this point, but it is not free and cannot be linked therefore."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 17, "last_activity_date": 1499893516, "creation_date": 1499893516, "answer_id": 45067502, "question_id": 45067263, "link": "https://stackoverflow.com/questions/45067263/difference-between-c-string-append-and-operator/45067502#45067502", "title": "Difference between c++ string append and operator +=", "body": "<p>According to the standard concerning <a href=\"https://timsong-cpp.github.io/cppwp/n3337/string::op+=#1\" rel=\"noreferrer\">string::op+= / online c++ standard draft</a>, I wouldn't expect any difference:</p>\n\n<blockquote>\n  <p>basic_string&amp; operator+=(const basic_string&amp; str);</p>\n  \n  <p>(1) Effects: Calls append(str).</p>\n  \n  <p>(2) Returns: *this.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 6292847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23864c8725cfcb4e2d62a41f65138c80?s=128&d=identicon&r=PG&f=1", "display_name": "PatrickF", "link": "https://stackoverflow.com/users/6292847/patrickf"}, "is_accepted": false, "score": 8, "last_activity_date": 1571752604, "last_edit_date": 1571752604, "creation_date": 1499893853, "answer_id": 45067586, "question_id": 45067263, "link": "https://stackoverflow.com/questions/45067263/difference-between-c-string-append-and-operator/45067586#45067586", "title": "Difference between c++ string append and operator +=", "body": "<p>In Microsoft STL implementation, the operator <code>+=</code> is an inline function, which calls <code>append()</code>. Here are the implementations,</p>\n\n<ul>\n<li>string (1): <code>string&amp; operator+= (const string&amp; str)</code></li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>basic_string&amp; operator+=(const basic_string&amp; _Right) {\n    return append(_Right);\n}\n</code></pre>\n\n\n\n<ul>\n<li>c-string (2): <code>string&amp; operator+= (const char* s)</code></li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>basic_string&amp; operator+=(_In_z_ const _Elem* const _Ptr) {\n    return append(_Ptr);\n}\n</code></pre>\n\n\n\n<ul>\n<li>character (3): <code>string&amp; operator+= (char c)</code></li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>basic_string&amp; operator+=(_Elem _Ch) {\n    push_back(_Ch);\n    return *this;\n}\n</code></pre>\n\n\n\n<ul>\n<li>Source: <a href=\"https://github.com/microsoft/STL/blob/master/stl/inc/xstring\" rel=\"noreferrer\">GitHub: Microsoft/STL</a></li>\n</ul>\n"}], "owner": {"reputation": 1254, "user_id": 5179394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lg1MR.png?s=128&g=1", "display_name": "ClydeTheGhost", "link": "https://stackoverflow.com/users/5179394/clydetheghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7139, "favorite_count": 1, "accepted_answer_id": 45067502, "answer_count": 2, "score": 15, "last_activity_date": 1571752604, "creation_date": 1499892491, "last_edit_date": 1499892949, "question_id": 45067263, "link": "https://stackoverflow.com/questions/45067263/difference-between-c-string-append-and-operator", "title": "Difference between c++ string append and operator +=", "body": "<p>Is there any noticeable difference between the two lines? My coworker says that using += is \"faster\" but I don't see why they should be any different:</p>\n\n<pre><code>string s1 = \"hello\";\nstring s2 = \" world\";\n\n// Option 1\ns1 += s2;\n\n// Option 2\ns1.append(s2);\n</code></pre>\n\n<p>To clarify, I am not asking about the <strong>usage differences</strong> between the two functions - I am aware that <code>append()</code> can be used for a wider variety of uses and that <code>operator +=</code> is somewhat more specialized. What I care about is how this particular example gets treated.</p>\n"}, {"tags": ["c++", "boost", "visual-studio-2015", "path", "include"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1499893101, "post_id": 45067192, "comment_id": 77108044, "body": "What is exactly not clear with this message? You do know what your compiler, include paths, linker and library paths are for, right?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1499894587, "post_id": 45067192, "comment_id": 77108755, "body": "You should do what it says for whatever project you need boost (otherwise your compiler will not be able to find / use boost). For your projects that don&#39;t need boost you don&#39;t have to modify your compiler / linker settings."}, {"owner": {"reputation": 15037, "user_id": 1111371, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85fbe34f335b26ff6f6c8ef921a682ae?s=128&d=identicon&r=PG", "display_name": "ugoren", "link": "https://stackoverflow.com/users/1111371/ugoren"}, "edited": false, "score": 0, "creation_date": 1500073716, "post_id": 45067192, "comment_id": 77197044, "body": "Reworded to be clearer, fixed typo in title, improved message formatting."}], "answers": [{"tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": true, "score": 0, "last_activity_date": 1499893506, "creation_date": 1499893506, "answer_id": 45067500, "question_id": 45067192, "link": "https://stackoverflow.com/questions/45067192/compiler-and-linker-library-paths-when-building-boost/45067500#45067500", "title": "Compiler and linker library paths when building Boost", "body": "<p>When you go to use the boost library in your own project, you will need to set the include search path and library search path to include those noted above so that the compiler can successfully find the include and library files.</p>\n"}], "owner": {"reputation": 13, "user_id": 8227012, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211706273204954/picture?type=large", "display_name": "Pablo Bernal", "link": "https://stackoverflow.com/users/8227012/pablo-bernal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 45067500, "answer_count": 1, "score": 0, "last_activity_date": 1500073716, "creation_date": 1499892212, "last_edit_date": 1500073716, "question_id": 45067192, "link": "https://stackoverflow.com/questions/45067192/compiler-and-linker-library-paths-when-building-boost", "title": "Compiler and linker library paths when building Boost", "body": "<p>I'm building Boost for a project I'm doing (I'm using visual studio 2015 and windows 10, in case the OS is relevant).</p>\n\n<p>It builds fine (using the command prompt), but gives me the following \"warning\", and I'm not sure if I should ignore it or not:</p>\n\n<pre><code>The Boost C++ Libraries were successfully built!\nThe following directory should be added to compiler include paths:\nC:\\Local\\boost_1_61_0\nThe following directory should be added to linker library paths:\nC:\\Local\\boost_1_61_0\\stage\\lib\n</code></pre>\n\n<p>How should I proceed with this? What am I supposed to do with these paths?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 4, "creation_date": 1499891470, "post_id": 45066946, "comment_id": 77107252, "body": "Your function says it returns a <code>string</code>yet you return the number <code>0</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1499891493, "post_id": 45066946, "comment_id": 77107265, "body": "This isn&#39;t an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>; there is a lot of code that can be cut down to produce something that is compilable but still shows this error"}, {"owner": {"reputation": 33, "user_id": 8008398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d915dd30ae98b54ea267f4348659a352?s=128&d=identicon&r=PG&f=1", "display_name": "Brett", "link": "https://stackoverflow.com/users/8008398/brett"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1499891605, "post_id": 45066946, "comment_id": 77107325, "body": "@Galik I should have also mentioned that i tried to put return toString(); but that would just have it repeat over and over again nonstop"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1499891719, "post_id": 45066946, "comment_id": 77107384, "body": "@Brett You need to create a <code>string</code> before you can return one. Returning a number instead was never going to work."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1499892456, "post_id": 45066946, "comment_id": 77107709, "body": "OMG.  I was like, &quot;Why does that even compile,&quot; and then I realized what it&#39;s attempting to do.  FUGLY!  Yeah, that&#39;s where the problem is :p  @Galik called it.  You&#39;re lucky you got an exception."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8008398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d915dd30ae98b54ea267f4348659a352?s=128&d=identicon&r=PG&f=1", "display_name": "Brett", "link": "https://stackoverflow.com/users/8008398/brett"}, "edited": false, "score": 0, "creation_date": 1499893277, "post_id": 45067008, "comment_id": 77108134, "body": "Thanks again for you help, I just wanted to ask you another question. When i change the dimensions of the box it seems to be giving me the wrong volume. For example, i set the height to 13, the width to 5, and the depth to 3 and it should give me a volume of 195 but it actually gives me 507."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 33, "user_id": 8008398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d915dd30ae98b54ea267f4348659a352?s=128&d=identicon&r=PG&f=1", "display_name": "Brett", "link": "https://stackoverflow.com/users/8008398/brett"}, "edited": false, "score": 0, "creation_date": 1499893336, "post_id": 45067008, "comment_id": 77108162, "body": "<code>getHeight() * getHeight() * getDepth()</code>, &lt;- reread this, the error is pretty obvious."}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 5, "last_activity_date": 1499891852, "last_edit_date": 1499891852, "creation_date": 1499891546, "answer_id": 45067008, "question_id": 45066946, "link": "https://stackoverflow.com/questions/45066946/stdlogic-error-when-trying-to-return-a-stdstring/45067008#45067008", "title": "std::logic_error when trying to return a std::string", "body": "<p><code>cout</code> is meant to output stuff to the command line, but you are writing a function that's supposed to return a <code>string</code>, that makes little sense.</p>\n\n<p><code>ostringstream</code> is a neat class that allows you to build strings using the same mechanisms as <code>cout</code>, try this:</p>\n\n<pre><code>string Box::toString() \n{\n    std::ostringstream result;\n    result &lt;&lt; \"Height: \" &lt;&lt; getHeight() &lt;&lt; \" Width: \" &lt;&lt; getWidth() &lt;&lt; \" Depth: \" &lt;&lt; getDepth();\n    return result.str();\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8008398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d915dd30ae98b54ea267f4348659a352?s=128&d=identicon&r=PG&f=1", "display_name": "Brett", "link": "https://stackoverflow.com/users/8008398/brett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 45067008, "answer_count": 1, "score": 0, "last_activity_date": 1499892137, "creation_date": 1499891321, "last_edit_date": 1499892137, "question_id": 45066946, "link": "https://stackoverflow.com/questions/45066946/stdlogic-error-when-trying-to-return-a-stdstring", "title": "std::logic_error when trying to return a std::string", "body": "<p>I have written some code using a class that will display the measurements of a box. I am doing so by having the output in a <code>toString()</code> method and it appears to be working but when i run the program I get the following error: </p>\n\n<pre><code>Height: 1 Width: 1 Depth: 1terminate called after throwing an instance of 'std::logic_error'\n  what():  basic_string::_S_construct null not valid\n\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\n</code></pre>\n\n<p>Then the program chrashes. Also I've noticed that the program doesn't display the volume after the 3 dimensions.</p>\n\n<p><strong>Here is the code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;      // for output formatting\n#include &lt;stdexcept&gt;    // for out_of_range\n#include &lt;sstream&gt;      // for stringstream\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;      // for system()\n\nusing namespace std;\n\nclass Box \n{\n\n    public:\n        // Constructors\n        Box(double height=1, double width=1, double depth=1);\n\n        // Mutators\n        void setHeight(double height);\n        void setWidth(double width);\n        void setDepth(double depth);\n\n        // Accessors\n        double getHeight() const {return (boxHeight);};\n        double getWidth() const {return (boxWidth);};\n        double getDepth() const {return (boxDepth);};\n        double getVolume() const; \n        string toString() ;\n    private:\n        double boxHeight;\n        double boxWidth;\n        double boxDepth;\n        double boxVolume;\n};\n\nint main()\n{\n\n    cout &lt;&lt; \"\\nBox Mesurement!\";\n    cout &lt;&lt; \"\\n===============\";\n    cout &lt;&lt; endl;\n\n    Box boxDem(true);\n\n// WHERE THE STRING IS DISPLAYED\n        cout &lt;&lt; \"\\n\" &lt;&lt; boxDem.toString();\n        cout&lt;&lt; endl;    \n        cout &lt;&lt; \"\\n\" &lt;&lt; boxDem.getVolume();\n\n    return 0;\n}\n\nBox::Box(double height, double width, double depth)\n{\n    setHeight(height);\n    setWidth(width);\n    setDepth(depth);\n}\n\nvoid Box::setHeight(double height)\n{\n    const double MIN = 0.01;\n\n    if (height &gt; 0 &amp;&amp; height &lt; MIN)\n    {\n        height = 0.01;\n        boxHeight = height;\n    }\n    else if (height &lt; 0)\n    {\n        height *= -1;\n        boxHeight = height;\n    }\n    else \n    {\n        boxHeight = height;\n    }\n}\nvoid Box::setWidth(double width)\n{\n    const double MIN = 0.01;\n\n    if (width &gt; 0 &amp;&amp; width &lt; MIN)\n    {\n        width = 0.01;\n        boxWidth = width;\n    }\n    else if (width &lt; 0)\n    {\n        width *= -1;\n        boxWidth = width;\n    }\n    else \n    {\n        boxWidth = width;\n    }\n}\nvoid Box::setDepth(double depth)\n{\n    const double MIN = 0.01;\n\n    if (depth &gt; 0 &amp;&amp; depth &lt; MIN)\n    {\n        depth = 0.01;\n        boxDepth = depth;\n    }\n    else if (depth &lt; 0)\n    {\n        depth *= -1;\n        boxDepth = depth;\n    }\n    else \n    {\n        boxDepth = depth;\n    }\n}\n\ndouble Box::getVolume() const\n{\n    double volume = 0.0;\n\n    volume = getHeight() * getHeight() *getDepth();\n\n    return volume;\n\n}\n\n// WHERE THE PROBLEM IS\n    string Box::toString() \n    {\n        cout &lt;&lt; \"Height: \" &lt;&lt; getHeight() &lt;&lt; \" Width: \" &lt;&lt; getWidth() &lt;&lt; \" Depth: \" &lt;&lt; getDepth();\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["android", "c++", "tensorflow"], "comments": [{"owner": {"reputation": 82, "user_id": 7031681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zTPeN.jpg?s=128&g=1", "display_name": "raghavendrasri", "link": "https://stackoverflow.com/users/7031681/raghavendrasri"}, "edited": false, "score": 1, "creation_date": 1501511277, "post_id": 45066790, "comment_id": 77797925, "body": "The examples (<a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/tree/master/tensorflow/&hellip;</a> <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/android\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/tree/master/tensorflow/cont&zwnj;&#8203;rib/&hellip;</a>) show how to use tensorflow using JAVA apis. Has anyone tried to use tensorflow directly in C++ on Android? How can the tensorflow library be built and linked for using C++ libraries. Can you please guide me on that? I want to use C++ apis on Android in the similar way as done in iOS examples."}], "answers": [{"tags": [], "owner": {"reputation": 617, "user_id": 2061800, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1da7247880a87be1edeccf837a4142dc?s=128&d=identicon&r=PG", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2061800/leeor"}, "is_accepted": false, "score": 0, "last_activity_date": 1549204294, "creation_date": 1549204294, "answer_id": 54503865, "question_id": 45066790, "link": "https://stackoverflow.com/questions/45066790/tensorflow-c-example-for-android/54503865#54503865", "title": "TensorFlow C++ example for Android", "body": "<p>Check out <a href=\"https://github.com/leeor-langer/Tensorflow-Android-Cpp\" rel=\"nofollow noreferrer\">this repo</a> and the <a href=\"https://medium.com/@leeor.langer/tensorflow-c-api-for-android-a0c55fe226e8\" rel=\"nofollow noreferrer\">following blog</a> for a solution. These links will provide step by step instructions on how to use Tensorflow c++ API on Android. The idea is to create a dynamic library (.so file) that is Android friendly (i.e. does not include elements of Tensorflow which are desktop\\gpu compatible only). </p>\n"}, {"tags": [], "owner": {"reputation": 3979, "user_id": 2641587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/mLMnS.jpg?s=128&g=1", "display_name": "Dmytro Prylipko", "link": "https://stackoverflow.com/users/2641587/dmytro-prylipko"}, "is_accepted": false, "score": 0, "last_activity_date": 1549212873, "creation_date": 1549212873, "answer_id": 54505250, "question_id": 45066790, "link": "https://stackoverflow.com/questions/45066790/tensorflow-c-example-for-android/54505250#54505250", "title": "TensorFlow C++ example for Android", "body": "<p>I wrote this code for Raspberry PI, but I believe it must be pretty much the same for Android:</p>\n\n<p>tfbenchmark.h:</p>\n\n<pre><code>#ifndef TENSORFLOW_H\n#define TENSORFLOW_H\n\n#include \"tensorflow/core/platform/types.h\"\n#include \"tensorflow/core/public/session.h\"\n\nclass TensorFlowBenchmark\n{\n  public:\n    TensorFlowBenchmark();\n    virtual ~TensorFlowBenchmark();\n\n    bool init();\n    bool run();\n\n  private:\n    std::unique_ptr&lt;tensorflow::Session&gt; session_;\n};\n\n\n#endif /* TENSORFLOW_H */\n</code></pre>\n\n<p>tfbenchmark.cpp:</p>\n\n<pre><code>#include \"tfbenchmark.h\"\n\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;chrono&gt;\n#include &lt;ctime&gt;\n#include &lt;cstddef&gt;\n#include &lt;jpeglib.h&gt;\n#include &lt;setjmp.h&gt;\n\n#include \"tensorflow/core/framework/graph.pb.h\"\n#include \"tensorflow/core/framework/tensor.h\"\n#include \"tensorflow/core/graph/default_device.h\"\n#include \"tensorflow/core/graph/graph_def_builder.h\"\n#include \"tensorflow/core/lib/core/errors.h\"\n#include \"tensorflow/core/lib/core/stringpiece.h\"\n#include \"tensorflow/core/lib/core/threadpool.h\"\n#include \"tensorflow/core/lib/io/path.h\"\n#include \"tensorflow/core/lib/strings/stringprintf.h\"\n#include \"tensorflow/core/platform/init_main.h\"\n#include \"tensorflow/core/platform/logging.h\"\n#include \"tensorflow/core/platform/types.h\"\n#include \"tensorflow/core/public/session.h\"\n#include \"tensorflow/core/util/command_line_flags.h\"\n\n// These are all common classes it's handy to reference with no namespace.\nusing tensorflow::Flag;\nusing tensorflow::Tensor;\nusing tensorflow::TensorShape;\nusing tensorflow::Status;\nusing tensorflow::string;\nusing tensorflow::int32;\n\nconst static string root_dir = \".\";\nconst static string image = \"../input.jpg\";\nconst static string graph = \"models/frozen_graph.pb\";\nconst static int32 input_width = 224;\nconst static int32 input_height = 224;\nconst static int32 input_mean = 128;\nconst static int32 input_std = 128;\nconst static string input_layer = \"x_input_pl\";\nconst static string output_layer = \"out/out\";\n\nconst static int NUM_EVAL = 100;\nconst static int MAX_BATCH = 256;\n\ntemplate&lt;class T&gt;\nvoid report_metrics(const std::vector&lt;T&gt;&amp; v, int batch_size) {\n  double sum = std::accumulate(v.begin(), v.end(), 0.0);\n  double mean = sum / v.size();\n\n  LOG(INFO) &lt;&lt; \"Batch size = \" &lt;&lt; batch_size &lt;&lt; \": \"\n        &lt;&lt; mean/batch_size &lt;&lt; \"ms per image\";\n}\n\n// Error handling for JPEG decoding.\nvoid CatchError(j_common_ptr cinfo) {\n    (*cinfo-&gt;err-&gt;output_message)(cinfo);\n    jmp_buf* jpeg_jmpbuf = reinterpret_cast&lt;jmp_buf*&gt;(cinfo-&gt;client_data);\n    jpeg_destroy(cinfo);\n    longjmp(*jpeg_jmpbuf, 1);\n}\n\n// Decompresses a JPEG file from disk.\nStatus LoadJpegFile(string file_name, std::vector&lt;tensorflow::uint8&gt;* data,\n                    int* width, int* height, int* channels) {\n    struct jpeg_decompress_struct cinfo;\n    FILE* infile;\n    JSAMPARRAY buffer;\n    int row_stride;\n\n    if ((infile = fopen(file_name.c_str(), \"rb\")) == NULL) {\n        LOG(ERROR) &lt;&lt; \"Can't open \" &lt;&lt; file_name;\n        return tensorflow::errors::NotFound(\"JPEG file \", file_name,\n                                            \" not found\");\n    }\n\n    struct jpeg_error_mgr jerr;\n    jmp_buf jpeg_jmpbuf;  // recovery point in case of error\n    cinfo.err = jpeg_std_error(&amp;jerr);\n    cinfo.client_data = &amp;jpeg_jmpbuf;\n    jerr.error_exit = CatchError;\n    if (setjmp(jpeg_jmpbuf)) {\n        return tensorflow::errors::Unknown(\"JPEG decoding failed\");\n    }\n    jpeg_create_decompress(&amp;cinfo);\n    jpeg_stdio_src(&amp;cinfo, infile);\n    jpeg_read_header(&amp;cinfo, TRUE);\n    jpeg_start_decompress(&amp;cinfo);\n    *width = cinfo.output_width;\n    *height = cinfo.output_height;\n    *channels = cinfo.output_components;\n    data-&gt;resize((*height) * (*width) * (*channels));\n\n    row_stride = cinfo.output_width * cinfo.output_components;\n    buffer = (*cinfo.mem-&gt;alloc_sarray)((j_common_ptr) &amp; cinfo, JPOOL_IMAGE,\n                                        row_stride, 1);\n    while (cinfo.output_scanline &lt; cinfo.output_height) {\n        tensorflow::uint8* row_address =\n            &amp;((*data)[cinfo.output_scanline * row_stride]);\n        jpeg_read_scanlines(&amp;cinfo, buffer, 1);\n        memcpy(row_address, buffer[0], row_stride);\n    }\n\n    jpeg_finish_decompress(&amp;cinfo);\n    jpeg_destroy_decompress(&amp;cinfo);\n    fclose(infile);\n    return Status::OK();\n}\n\n// Given an image file name, read in the data, try to decode it as an image,\n// resize it to the requested size, and then scale the values as desired.\nStatus FillTensorFromImageData(std::vector&lt;tensorflow::uint8&gt;&amp; image_data,\n                               const int batch_size, const int image_height,\n                               const int image_width, const int image_channels,\n                               std::vector&lt;Tensor&gt;* out_tensors) {\n\n    // In these loops, we convert the eight-bit data in the image into float,\n    // resize\n    // it using bilinear filtering, and scale it numerically to the float range\n    // that\n    // the model expects (given by input_mean and input_std).\n    tensorflow::Tensor image_tensor(\n        tensorflow::DT_FLOAT,\n        tensorflow::TensorShape(\n            {batch_size, image_height, image_width, image_channels}));\n    auto image_tensor_mapped = image_tensor.tensor&lt;float, 4&gt;();\n    LOG(INFO) &lt;&lt; image_data.size() &lt;&lt; \"bytes in image_data\";\n    tensorflow::uint8* in = image_data.data();\n    float* out = image_tensor_mapped.data();\n    for(int n = 0; n &lt; batch_size; n++) {\n      for (int y = 0; y &lt; image_height; ++y) {\n        tensorflow::uint8* in_row = in + (y * image_width * image_channels);\n        float* out_row = out + (n * image_height * image_width * image_channels) + (y * image_width * image_channels);\n        for (int x = 0; x &lt; image_width; ++x) {\n            tensorflow::uint8* input_pixel = in_row + (x * image_channels);\n            float* out_pixel = out_row + (x * image_channels);\n            for (int c = 0; c &lt; image_channels; ++c) {\n                out_pixel[c] =\n                    static_cast&lt;float&gt;(input_pixel[c] - input_mean) / input_std;\n            }\n        }\n      }\n    }\n    out_tensors-&gt;push_back(image_tensor);\n    return Status::OK();\n}\n\n// Reads a model graph definition from disk, and creates a session object you\n// can use to run it.\nStatus LoadGraph(string graph_file_name,\n                 std::unique_ptr&lt;tensorflow::Session&gt;* session) {\n    tensorflow::GraphDef graph_def;\n    Status load_graph_status = ReadBinaryProto(tensorflow::Env::Default(),\n                                               graph_file_name, &amp;graph_def);\n    if (!load_graph_status.ok()) {\n        return tensorflow::errors::NotFound(\"Failed to load compute graph at '\",\n                                            graph_file_name, \"'\");\n    }\n    session-&gt;reset(tensorflow::NewSession(tensorflow::SessionOptions()));\n    Status session_create_status = (*session)-&gt;Create(graph_def);\n    if (!session_create_status.ok()) {\n        return session_create_status;\n    }\n    return Status::OK();\n}\n\nTensorFlowBenchmark::TensorFlowBenchmark() {}\nTensorFlowBenchmark::~TensorFlowBenchmark() {}\n\nbool TensorFlowBenchmark::init() {\n    // We need to call this to set up global state for TensorFlow.\n    int argc;\n    char** argv;\n    tensorflow::port::InitMain(\"benchmark\", &amp;argc, &amp;argv);\n\n    string graph_path = tensorflow::io::JoinPath(root_dir, graph);\n    Status load_graph_status = LoadGraph(graph_path, &amp;session_);\n    if (!load_graph_status.ok()) {\n        LOG(ERROR) &lt;&lt; load_graph_status;\n        return false;\n    }\n\n    return true;\n}\n\nbool TensorFlowBenchmark::run() {\n\n    string image_path = tensorflow::io::JoinPath(root_dir, image);\n    std::vector&lt;tensorflow::uint8&gt; image_data;\n    int image_width;\n    int image_height;\n    int image_channels;\n    Status load_img_status = LoadJpegFile(image_path, &amp;image_data, &amp;image_width, &amp;image_height,\n                                          &amp;image_channels);\n    if(!load_img_status.ok()) {\n        LOG(ERROR) &lt;&lt; load_img_status;\n        return false;\n    }\n\n    LOG(INFO) &lt;&lt; \"Loaded JPEG: \" &lt;&lt; image_width &lt;&lt; \"x\" &lt;&lt; image_height &lt;&lt; \"x\"\n              &lt;&lt; image_channels;\n\n\n    for(int batch_size = 1; batch_size &lt;= MAX_BATCH; batch_size &lt;&lt;= 1) {\n      LOG(INFO) &lt;&lt; \"Batch size \" &lt;&lt; batch_size;\n\n      std::vector&lt;Tensor&gt; resized_tensors;\n      Status read_tensor_status =\n        FillTensorFromImageData(image_data, batch_size, image_height, image_width,\n                                image_channels, &amp;resized_tensors);\n      if (!read_tensor_status.ok()) {\n        LOG(ERROR) &lt;&lt; read_tensor_status;\n        return false;\n      }\n      const Tensor&amp; resized_tensor = resized_tensors[0];\n\n      // Actually run the image through the model.\n      std::vector&lt;Tensor&gt; outputs;\n      std::vector&lt;long&gt; timings;\n      for (int i = 0; i &lt; NUM_EVAL; ++i) {\n        auto start = std::chrono::system_clock::now();\n\n        Status run_status = session_-&gt;Run({{input_layer, resized_tensor}},\n                                          {output_layer}, {}, &amp;outputs);\n\n        auto end = std::chrono::system_clock::now();\n    timings.push_back( std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end - start).count());\n        if (!run_status.ok()) {\n            LOG(ERROR) &lt;&lt; \"Running model failed: \" &lt;&lt; run_status;\n            return false;\n        }\n      }\n      report_metrics(timings, batch_size);\n    }\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 82, "user_id": 7031681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zTPeN.jpg?s=128&g=1", "display_name": "raghavendrasri", "link": "https://stackoverflow.com/users/7031681/raghavendrasri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 968, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1549212873, "creation_date": 1499890712, "last_edit_date": 1549211633, "question_id": 45066790, "link": "https://stackoverflow.com/questions/45066790/tensorflow-c-example-for-android", "title": "TensorFlow C++ example for Android", "body": "<p>I was looking into the examples provided in the TensorFlow git repository for Android devices. It uses Java interfaces as a wrapper for C++ API.\u00a0 Are there any examples where I can use C++ API directly for initialization \u00a0of TensorFlow, loading the model and for inference and etc.?</p>\n"}, {"tags": ["c++", "performance", "cpu-usage"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1499890640, "post_id": 45066748, "comment_id": 77106852, "body": "Have you looks at <a href=\"https://msdn.microsoft.com/en-us/library/ms182372.aspx\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499890994, "post_id": 45066748, "comment_id": 77107019, "body": "Yes thanks. I was hoping to get some pro tips for handling this situation. It&#39;s the first time i try to analyze the performance of a big project and hope to get some more advice from performance experts"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1499891167, "post_id": 45066748, "comment_id": 77107092, "body": "The pro tip is to profile. Also make sure you are running the release build. A debug build can be 100 times slower than release."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1499891195, "post_id": 45066748, "comment_id": 77107106, "body": "@darkThoughts what you are asking is awfully vague. You should go through the process as described by Microsoft, and come back to SE with specific questions if you get stuck."}], "owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 724, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1499890526, "creation_date": 1499890526, "question_id": 45066748, "link": "https://stackoverflow.com/questions/45066748/how-to-analyze-c-code-performance-using-visual-studio-2015", "title": "How to analyze C++ code performance using Visual Studio 2015?", "body": "<p>I have a big project in ANSI C++ that was originally written in C# and CLI C++, and was translated to ANSI C++. The performance of the ANSI C++ project is much slower on the same input then then of the original project. </p>\n\n<p>I am using VS2015. How can i analyze the ANSI C++ project to find out the CPU usage of every function, so i can find the culprits that slow down the execution?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1499890190, "post_id": 45066655, "comment_id": 77106639, "body": "<code>int winlose(g)</code> this is not a valid function declaration syntax"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1499890210, "post_id": 45066655, "comment_id": 77106645, "body": "<code>int winlose(g)</code> -&gt; <code>int winlose(int g)</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1499890238, "post_id": 45066655, "comment_id": 77106657, "body": "[Off Topic] Only call <code>srand</code> <b>once</b> unless you really know what you are doing."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1499890301, "post_id": 45066655, "comment_id": 77106685, "body": "You are picking a new number after every guess. This makes the hint that the number is too high or too low, as well as the request that they try again, meaningless."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1499890367, "post_id": 45066655, "comment_id": 77106722, "body": "<code>x</code> is uninitialized on first use. <code>n</code> is not accessible in <code>winlose</code>. <code>return n;</code> will never be reached, but then the return value of <code>winlose</code> is never used. You should really take a minute to understand the concept of a scope.  See this <a href=\"http://en.cppreference.com/w/cpp/language/scope\" rel=\"nofollow noreferrer\">cppreference page</a> and this <a href=\"https://stackoverflow.com/questions/11137516/scope-vs-lifetime-of-variable\">Stack Overflow question</a>."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1499891720, "post_id": 45066655, "comment_id": 77107385, "body": "<code>else (g=n)</code> this doesn&#39;t do what you think"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499894670, "post_id": 45066655, "comment_id": 77108800, "body": "make sure you give agata (and SO) full credit when you hand their code in"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499894746, "post_id": 45066655, "comment_id": 77108837, "body": "for real extra credit you should write a program that plays this game. ie tries to guess the answer as fast as possible"}, {"owner": {"reputation": 21, "user_id": 8298158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898c6879dd7a08ada3bb311c23914916?s=128&d=identicon&r=PG&f=1", "display_name": "Cry Bloodwing", "link": "https://stackoverflow.com/users/8298158/cry-bloodwing"}, "edited": false, "score": 0, "creation_date": 1499901817, "post_id": 45066655, "comment_id": 77111251, "body": "Thanks Agata, however in the class we have not learnd &quot;bool&quot; or to &quot;return false/return true&quot; yet, so I will not be able to use those."}], "answers": [{"tags": [], "owner": {"reputation": 560, "user_id": 2863666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3786db385513df87d5af723b6ed55dcf?s=128&d=identicon&r=PG", "display_name": "Talita", "link": "https://stackoverflow.com/users/2863666/talita"}, "is_accepted": false, "score": 2, "last_activity_date": 1499894373, "last_edit_date": 1499894373, "creation_date": 1499891811, "answer_id": 45067076, "question_id": 45066655, "link": "https://stackoverflow.com/questions/45066655/c-random-number-guessing-game-errors/45067076#45067076", "title": "C++ Random Number Guessing Game Errors", "body": "<p>You made a few mistakes in addition to the function declaration.\nFunction declarations must contain the type of each parameter, so the correct way is:</p>\n\n<pre><code>int winlose(int g);\n</code></pre>\n\n<p>You cannot use a condition in an else statement: (<code>else (g=n)</code>). An else statement is a catch-all, if none of the previous conditions (the ones in the <code>if</code> and <code>else if()</code>'s) were met. If you only want this to trigger on a specific condition, use another <code>else if()</code>. You are not required to have an <code>else</code> at the end of every <code>if</code> statement; it is perfectly correct to end with an <code>else if(){...}</code>. </p>\n\n<p>You also need to compare with <code>'=='</code> rather than <code>'='</code>. <code>=</code> is the assignment operator and <code>g=n</code> will set the value of g to n. If you want to check if g is equal to n, you will have to use <code>g==n</code></p>\n\n<p>You should call <code>srand()</code> in the outer loop, otherwise after every guess, value changes.</p>\n\n<p>The rest is corrected and sometimes slightly changed for correct performance:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nbool winlose(int number, int givenNumber);\n\nint main(){\n    int g, n, x;\n    bool guessed;\n    do {\n        srand(time(NULL));\n        n = 1 + rand()%100;\n        cout&lt;&lt;\"Welcome to the guessing game. I have a number between 1-100. Can you guess it?\"&lt;&lt;endl;\n        do {\n            cout&lt;&lt;\"Please enter your guess\"&lt;&lt;endl;\n            cin&gt;&gt;g;\n            guessed = winlose(g, n); \n        } while (!guessed);\n\n        cout&lt;&lt;\"Play again? Enter 0 for no, any other number for yes.\"&lt;&lt;endl;\n        cin&gt;&gt;x;\n    } while (x!=0);\n    return 0;\n}\n\nbool winlose(int g, int n) {\n    if (g&lt;n) {\n        cout&lt;&lt;\"Your guess is too low. Try again.\"&lt;&lt;endl;\n        return false;\n    }\n    else if (g&gt;n) {\n        cout&lt;&lt;\"Your guess is too high. Try again.\"&lt;&lt;endl;\n        return false;\n    }\n    else {\n        cout&lt;&lt;\"Congrats! You win. The number was \"&lt;&lt;n&lt;&lt;endl;\n        return true;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8298158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898c6879dd7a08ada3bb311c23914916?s=128&d=identicon&r=PG&f=1", "display_name": "Cry Bloodwing", "link": "https://stackoverflow.com/users/8298158/cry-bloodwing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499895213, "creation_date": 1499890081, "last_edit_date": 1499895213, "question_id": 45066655, "link": "https://stackoverflow.com/questions/45066655/c-random-number-guessing-game-errors", "title": "C++ Random Number Guessing Game Errors", "body": "<p>So, I have to write a program from a random guessing game. The program needs to ask the player to guess a number between 1-100. At least one function must be used. It needs to tell the player if they are too low/high, ask them to try again, or if they guess it, ask them to play again.</p>\n\n<p>I have a few errors that I can not figure out. </p>\n\n<p>44: error: \u2018int winlose\u2019 redeclared as different kind of symbol\n9: error: previous declaration of \u2018int winlose(int)\u2019\n44: error: \u2018g\u2019 was not declared in this scope</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nint winlose(int);\n\nint main()\n{\n    int g, n, x;\n\n    while (x!=0)\n    {\n        do\n        {\n            srand(time(NULL));\n            n = 1 + rand()%100;\n\n            cout&lt;&lt;\"Welcome to the guessing game. I have a number between 1-100. \n               Can you guess it?\"&lt;&lt;endl;\n            cout&lt;&lt;\"Please enter your guess\"&lt;&lt;endl;\n            cin&gt;&gt;g;\n\n        winlose(g); \n        } while (n!=0);\n\n        cout&lt;&lt;\"Play again? Enter 0 for no, any other number for yes.\"&lt;&lt;endl;\n        cin&gt;&gt;x;\n    }\n    return 0;\n}\n\nint winlose(g)\n{\n    if (g&lt;n)\n    {\n        cout&lt;&lt;\"Your guess is too low. Try again.\"&lt;&lt;endl;\n        cin&gt;&gt;g;\n    }\n    else if (g&gt;n)\n    {\n        cout&lt;&lt;\"Your guess is too high. Try again.\"&lt;&lt;endl;\n        cin&gt;&gt;g;\n    }\n    else (g=n)\n    {\n        cout&lt;&lt;\"Congrats! You win. The number was \"&lt;&lt;n&lt;&lt;endl;\n        n=0;\n    }\n    return g;\n    return n;\n}\n</code></pre>\n"}, {"tags": ["c++", "encryption", "cryptography", "rsa", "crypto++"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1499945274, "post_id": 45066624, "comment_id": 77130803, "body": "You are missing some information. We need to know what the string is. The public key is 128 bytes, so the max message size is going to be 85 bytes or so. I cannot duplicate the problem with 0-length messages and short messages. You might also be interested in <a href=\"https://www.cryptopp.com/wiki/Android_(Command_Line)\" rel=\"nofollow noreferrer\">Android (Command Line)</a> on the wiki."}, {"owner": {"reputation": 1, "user_id": 8298114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e704ab8e00c5a1557ea4fc40a91be8?s=128&d=identicon&r=PG&f=1", "display_name": "eldorado", "link": "https://stackoverflow.com/users/8298114/eldorado"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1499972623, "post_id": 45066624, "comment_id": 77150548, "body": "I&#39;ve edited my question to include the output for a single-character string which it should be able to encrypt. I understand this must have something to do with the OS/some other thing if it&#39;s working fine for you. Many thanks!"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500058120, "post_id": 45066624, "comment_id": 77191030, "body": "In your <code>EncryptWithRSA</code> function, add a <code>std::cout &lt;&lt; n.ByteCount() &lt;&lt; std::endl;</code> And maybe add a <code>pubKey.MaxPlaintextLength();</code>."}], "owner": {"reputation": 1, "user_id": 8298114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e704ab8e00c5a1557ea4fc40a91be8?s=128&d=identicon&r=PG&f=1", "display_name": "eldorado", "link": "https://stackoverflow.com/users/8298114/eldorado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 442, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499972494, "creation_date": 1499889955, "last_edit_date": 1499972494, "question_id": 45066624, "link": "https://stackoverflow.com/questions/45066624/exception-key-is-too-short-to-encrypt-any-messages-when-trying-to-use-rsa-encr", "title": "Exception &#39;key is too short to encrypt any messages&#39; when trying to use RSA encryption", "body": "<p>I'm trying to build a small encryption C++ library for Android with Crypto++.</p>\n\n<p>I've built the library and I'm testing parts of it on Linux (x64) to see if everything's alright. Note that I almost have no experience with C++ coding and I'm mostly copying the Crypto++ wiki.</p>\n\n<p>I'm having an issue with my RSA encryption function. I load a public key from two <code>CryptoPP::Integers</code> and then try to encrypt a message. I always get this exception from the try/catch statement:</p>\n\n<blockquote>\n  <p>RSA/OAEP-MGF1(SHA-1): this key is too short to encrypt any messages</p>\n</blockquote>\n\n<p>I've looked at Crypto++'s code and this seems to come from this exact part (code <a href=\"https://www.cryptopp.com/docs/ref/pubkey_8cpp_source.html\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>if (plaintextLength &gt; FixedMaxPlaintextLength())\n{\n    if (FixedMaxPlaintextLength() &lt; 1)\n      throw InvalidArgument(AlgorithmName() + \": this key is too short to encrypt any messages\");\n    ...\n}\n</code></pre>\n\n<p>Conversely, <a href=\"https://www.cryptopp.com/wiki/RSA_Encryption_Schemes\" rel=\"nofollow noreferrer\">the Crypto++ wiki says</a> about FixedMaxPlaintextLength:</p>\n\n<blockquote>\n  <p>The maximum length of a plaintext string that can be encrypted with RSA can be determined by FixedMaxPlaintextLength. On error, FixedMaxPlaintextLength returns 0. The value returned by FixedMaxPlaintextLength is directly related to the modulus size n and the padding scheme. </p>\n</blockquote>\n\n<p>I'm compiling with:</p>\n\n<pre><code>g++ code.cpp -lcrypto++\n</code></pre>\n\n<p>An excerpt from my code is below. Know that I'm encrypting a message short enough for this key size, and that the key passes the 'ThrowIfInvalid' check fine.</p>\n\n<pre><code>#include &lt;crypto++/rsa.h&gt;\n#include &lt;crypto++/integer.h&gt;\n#include &lt;crypto++/osrng.h&gt;\n#include &lt;crypto++/aes.h&gt;\n#include &lt;crypto++/modes.h&gt;\n#include &lt;crypto++/filters.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\n//Server public key\nCryptoPP::Integer n(\"151819660278907849564280096608257132054351407309758535974318074707969518724128280259037374014724406632325172752862895193195363199223664682104258638634769874466650499673675383641901147871521771256322561247704585104482417607961937338394672732384692437499643518759317209830786970636267836539513421170177732815387\");\nCryptoPP::Integer e(\"65537\");\n\nstd::string EncryptWithRSA(std::string message);\n\nint main(){\n    std::cout &lt;&lt; \"Input string: \" &lt;&lt; std::endl;\n    std::string message = \"\";\n    std::getline(std::cin, message);\n    std::string result = \"\";\n    result = EncryptWithRSA(message);\n    std::cout &lt;&lt; result &lt;&lt; std::endl;\n    return 0;\n}\n\nstd::string EncryptWithRSA(std::string message){\n    CryptoPP::Integer n(\"151819660278907849564280096608257132054351407309758535974318074707969518724128280259037374014724406632325172752862895193195363199223664682104258638634769874466650499673675383641901147871521771256322561247704585104482417607961937338394672732384692437499643518759317209830786970636267836539513421170177732815387\");\n    CryptoPP::Integer e(\"65537\");\n    CryptoPP::RSA::PublicKey pubKey;\n    CryptoPP::AutoSeededRandomPool rng;\n    pubKey.Initialize(n, e);\n    pubKey.ThrowIfInvalid(rng, 3);\n    std::cout &lt;&lt; \"Public key initialized and validated\" &lt;&lt; std::endl;\n    CryptoPP::RSAES_OAEP_SHA_Encryptor enc(pubKey);\n    std::string result = \"\";\n    std::cout &lt;&lt; \"Starting encryption with RSA\" &lt;&lt; std::endl;\n    try{\n        CryptoPP::StringSource ss1(message, true, new CryptoPP::PK_EncryptorFilter(rng, enc, new CryptoPP::StringSink(result)));\n    } catch (const CryptoPP::Exception&amp; e){\n        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n    return result;\n}\n</code></pre>\n\n<p><strong><em>EDITED</em></strong>\nHere's the output for an Input string = \"s\"</p>\n\n<pre><code>Input string:\ns\nPublic key initialized\nStarting encryption with RSA\nRSA/OAEP-MGF1(SHA-1): this key is too short to encrypt any messages\n</code></pre>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1499890515, "post_id": 45066595, "comment_id": 77106800, "body": "On a separate note, names that begin with an underscore followed by a capital letter (<code>_BASE_H_</code>, <code>_DERIVED_H_</code>, <code>_DERIVED_FACTORY_H_</code>)  and names that contain two consecutive underscores are reserved for use by the implementation. Don&#39;t use them in your code."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1499890747, "post_id": 45066595, "comment_id": 77106890, "body": "Also, make the Base destructor either virtual, or protected. With non-virtual destructor, calling delete on Base pointer is UB; when protected, calling delete is prevented and you might have a separate destroy method (which is better because DLL and EXE might have different heaps)."}], "answers": [{"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 3, "last_activity_date": 1499893709, "last_edit_date": 1499893709, "creation_date": 1499890207, "answer_id": 45066686, "question_id": 45066595, "link": "https://stackoverflow.com/questions/45066595/how-does-pure-virtual-functions-mechanism-in-c-exposes-functions-from-dll/45066686#45066686", "title": "How does pure virtual functions mechanism in c++ exposes functions from DLL", "body": "<ol>\n<li><p>The DLL  will contain the vtable of <code>Derived</code> somewhere in its global data section. Instances of <code>Derived</code> created within the DLL will have their vtable pointer assigned to that address.</p></li>\n<li><p>If <code>Base</code>'s declaration of <code>Add()</code> is not pure virtual, you must provide an definition  for it on top of the declaration.</p></li>\n</ol>\n\n<p><strong>Edit:</strong> For an explanation of what the vtable is, please refer to this answer:\n<a href=\"https://stackoverflow.com/questions/3004501/why-do-i-need-virtual-table\">why do I need virtual table?</a></p>\n\n<p>From a purely stylistic standpoint, I would also mention that in this type of situation, the factory typically returns instances of the <code>Base</code> class, like so:</p>\n\n<h3>DerivedFactory.hpp</h3>\n\n<pre><code>#include \"Base.hpp\"\n\nclass DerivedFactory\n{\npublic:\n  __declspec(dllexport) static  Base* Create();\n};\n</code></pre>\n\n<p>This way, the encapsulation of <code>Derived</code> stays entirely, and neatly, in the DLL.</p>\n"}, {"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 2, "last_activity_date": 1499892095, "last_edit_date": 1499892095, "creation_date": 1499891286, "answer_id": 45066934, "question_id": 45066595, "link": "https://stackoverflow.com/questions/45066595/how-does-pure-virtual-functions-mechanism-in-c-exposes-functions-from-dll/45066934#45066934", "title": "How does pure virtual functions mechanism in c++ exposes functions from DLL", "body": "<p>The virtual table in the Derived is set by the DLL when creating the instance, so when methods called through the Base pointer, the virtual table will already have the correct addresses set in the virtual table (the EXE will use the Derived virtual table coming from the DLL).</p>\n\n<p>Note that the EXE does not import the virtual table from the DLL when linking, because it does not need to (it accesses the virtual table of the DLL's Derived in memory through the Base interface). Therefore it works not only with implicit linkage, but also when the DLL is loaded at runtime (LoadLibrary/GetProcAddress - but for that the factory method is best not part of the factory class, but standalone extern \"C\" exported function).</p>\n\n<p>See also here for more details about pure virtual interfaces and DLLs: <a href=\"https://stackoverflow.com/a/34754531/1274747\">Providing SDK for my C++ Application</a></p>\n"}], "owner": {"reputation": 1661, "user_id": 1877002, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8a1c3de36e3fb239c77f4439d1866894?s=128&d=identicon&r=PG", "display_name": "Benny K", "link": "https://stackoverflow.com/users/1877002/benny-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 1, "accepted_answer_id": 45066686, "answer_count": 2, "score": 3, "last_activity_date": 1499893709, "creation_date": 1499889865, "question_id": 45066595, "link": "https://stackoverflow.com/questions/45066595/how-does-pure-virtual-functions-mechanism-in-c-exposes-functions-from-dll", "title": "How does pure virtual functions mechanism in c++ exposes functions from DLL", "body": "<p>Consider the next c++ code fragment </p>\n\n<p><strong>1. In an EXE:</strong></p>\n\n<p><strong>Base.hpp</strong></p>\n\n<pre><code>#ifndef _BASE_H_\n#define _BASE_H_ \nclass Base\n{\n    public:\n    Base(){};\n    virtual double Add(double &amp;x, double &amp;y) = 0; \n\n};\n#endif\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Base.hpp\"\n#include \"DerivedFactory.hpp\"\nvoid main()\n{\n    Base *theBase = DerivedFactory::Create();\n    double x = 4.9, y = 3.3,z;\n    z = theBase-&gt;Add(x, y);//Works when Add is pure virtual function, but how??? \n                           //Linker error when Add is not pure virtual\n}\n</code></pre>\n\n<p><strong>2. In an implicitly linked DLL</strong></p>\n\n<p><strong>Derived.hpp</strong></p>\n\n<pre><code>#ifndef _DERIVED_H_\n#define _DERIVED_H_\n#include \"Base.hpp\"\nclass Derived : public Base\n{\n    public:\n    double Add(double &amp;x, double &amp;y);\n};\n#endif\n</code></pre>\n\n<p><strong>DerivedFactory.hpp</strong></p>\n\n<pre><code>#ifndef _DERIVEDFACTORY_H_\n#define _DERIVEDFACTORY_H_\n#include \"Derived.hpp\"\n\nclass DerivedFactory\n{\n    public:\n    __declspec(dllexport) static  Derived* Create();\n};\n#endif\n</code></pre>\n\n<p><strong>Derived.cpp</strong></p>\n\n<pre><code>#include \"Derived.hpp\"\n double Derived::Add(double &amp;x, double &amp;y)\n{\n    return x + y;\n}\n</code></pre>\n\n<p><strong>DerivedFactory.cpp</strong></p>\n\n<pre><code>#include \"DerivedFactory.hpp\"\nDerived* DerivedFactory::Create()\n{\n    Derived* theDerived = new Derived;\n    return theDerived;\n}\n</code></pre>\n\n<ol>\n<li><p>The main question is how does the exe \"know\" to address the correct implementation of Add from the dll when the only exported function from it is Create()?</p></li>\n<li><p>Why do I get linker error when Add() is \"just\" virtual and not pure virtual?</p></li>\n</ol>\n"}, {"tags": ["c++", "visual-studio", "compilation", "cmake", "visual-studio-2017"], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 6307084, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/95b9B.jpg?s=128&g=1", "display_name": "ShadowDragon", "link": "https://stackoverflow.com/users/6307084/shadowdragon"}, "edited": false, "score": 0, "creation_date": 1499892472, "post_id": 45067153, "comment_id": 77107715, "body": "<b>To 1:</b> Could you state why a &quot;purely out-of-source-build&quot; would be better? <b>To 2:</b> I want the CMake settings to be the same as the settings in VS. <b>To 5:</b> How can I achieve to compile all source files then as I do not want to write hundreds of files in manually."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 1838, "user_id": 6307084, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/95b9B.jpg?s=128&g=1", "display_name": "ShadowDragon", "link": "https://stackoverflow.com/users/6307084/shadowdragon"}, "edited": false, "score": 1, "creation_date": 1499893475, "post_id": 45067153, "comment_id": 77108228, "body": "@ShadowDragon <b>1</b> It&#39;s not strictly necessary, but it&#39;s the preferred CMake mode of operation. &quot;CMake out-of-source&quot; should be googlable. But your original idea, where the directories are at least distinct, is reasonably fine as well. <b>2</b> The answer shows that. It actually works for your &quot;under-source&quot; setup as well. <b>5</b> You can move the list (the <code>set()</code> calls) to a separate file which you will <code>include()</code>, and use a script or something to generate it for the first time. Then just keep updating it manually."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 2, "last_activity_date": 1499894061, "last_edit_date": 1499894061, "creation_date": 1499892111, "answer_id": 45067153, "question_id": 45066382, "link": "https://stackoverflow.com/questions/45066382/cmake-multi-project-setup-for-visual-studio-2017/45067153#45067153", "title": "CMake Multi-Project setup for Visual Studio 2017", "body": "<p>There are multiple points to address:</p>\n\n<ol>\n<li><p><code>CMAKE_BINARY_DIR</code> is, for all intents and purposes, a read-only variable, and should definitely be treated as such. The way to specify the binary directory is to run CMake in that directory (when running from the command line), or set that directory as the binary/output directory (when using a CMake GUI). So in your case, to achieve the setup you claim you want, you'd do this:</p>\n\n<pre><code>&gt; cd project/bin\n&gt; cmake .. -G \"Visual Studio whatever\" ...\n</code></pre>\n\n<p>(\"<code>whatever</code>\" is, of course, a placeholder)</p>\n\n<p>However, I strongly suggest you do not use a layout like this. A much better layout would a purely out-of-source-build, like this:</p>\n\n<pre><code>project\nproject/source/CMakeLists.txt\nproject/source/include\nproject/source/...\nproject/build/Win32\nproject/build/Linux\n</code></pre>\n\n<p>With this setup, you'd then run like this:</p>\n\n<pre><code>&gt; cd project/build/Win32\n&gt; cmake ../../source -G \"Visual Studio whatever\" ...\n</code></pre></li>\n<li><p>There is a conflict between how you're setting your binary output paths in CMake, and what you've presented as your \"VS settings.\" I do not know which is your inteded state, but in case you want to set up CMake so that your binaries end up in the output directory you've listed in the VS settings, you'd do it like this:</p>\n\n<pre><code>set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/${CMAKE_CFG_INTDIR})\n</code></pre>\n\n<p>Ditto for <code>LIBRARY_OUTPUT_PATH</code>.</p></li>\n<li><p>As far as setting the intermediate directory goes, this is something CMake manages itself and you cannot really affect this. The question is why you'd want to, though.</p></li>\n<li><p>Regarding project dependencies: you haven't shown the CMake commands which actually create the binaries (<code>add_library()</code>/<code>add_executable()</code>) or commands which set up their properties. However, if you specify that the executable created by Project 2 links against the library created by Project 1, CMake will track the dependency correctly. You'd specify it like this:</p>\n\n<pre><code>target_link_libraries(targetNameOfProject2executable targetNameOfProject1library)\n</code></pre></li>\n<li><p>Please note that using <code>file(GLOB)</code> to construct a list of source files is a bad idea and is discouraged by CMake. The reason is simple: adding a source file will not cause the buildsystem to be regenerated, meaning the source file will not be picked up. If you instead list source files explicitly, adding the file will mean you must add it to the list in the CMakeList (or in a file included by it), which will trigger a re-generation of the buildsystem.</p></li>\n<li><p>A note for Linux: unlike Visual Studio, the Makefile generator (and in fact most of CMake's generators) are <em>single-configuration</em>, which means you must generate a buildsystem for each configuration. In the out-of-souce setup, you'd do it like this:</p>\n\n<pre><code>&gt; cd project/build/Linux/Debug\n&gt; cmake ../../../../source -DCMAKE_BUILD_TYPE=Debug ...\n&gt; cd project/build/Linux/Release\n&gt; cmake ../../../../source -DCMAKE_BUILD_TYPE=Release ...\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1838, "user_id": 6307084, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/95b9B.jpg?s=128&g=1", "display_name": "ShadowDragon", "link": "https://stackoverflow.com/users/6307084/shadowdragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2198, "favorite_count": 1, "accepted_answer_id": 45067153, "answer_count": 1, "score": 2, "last_activity_date": 1499894061, "creation_date": 1499889007, "question_id": 45066382, "link": "https://stackoverflow.com/questions/45066382/cmake-multi-project-setup-for-visual-studio-2017", "title": "CMake Multi-Project setup for Visual Studio 2017", "body": "<p>To begin with, I'm new to CMake.</p>\n\n<p>What I want to do is to switch from compiling my solution directly in VS 2017 to CMake in order to build the project easily on other platforms like Linux.</p>\n\n<h1>Folder structure:</h1>\n\n<pre><code>project\n  |\u2500\u2500\u2500 CMakeLists.txt\n  |\u2500\u2500\u2500 bin\n  |     | \u2500\u2500\u2500 intermediates\n  |     |       |\u2500\u2500\u2500 Win32\n  |     |       |      |\u2500\u2500\u2500 Debug\n  |     |       |      \u2514\u2500\u2500\u2500 Release\n  |     |       \u2514\u2500\u2500\u2500 Linux\n  |     |              |\u2500\u2500\u2500 Debug\n  |     |              \u2514\u2500\u2500\u2500 Release\n  |     |\u2500\u2500\u2500 Win32\n  |     |      |\u2500\u2500\u2500 Debug\n  |     |      \u2514\u2500\u2500\u2500 Release\n  |     \u2514\u2500\u2500\u2500 Linux\n  |            |\u2500\u2500\u2500 Debug\n  |            \u2514\u2500\u2500\u2500 Release\n  |\u2500\u2500\u2500 include\n  |\u2500\u2500\u2500 Project 1\n  |      |\u2500\u2500\u2500 CMakeLists.txt\n  |      |\u2500\u2500\u2500 src\n  |      |\u2500\u2500\u2500 res\n  |      \u2514\u2500\u2500\u2500 header\n  \u2514\u2500\u2500\u2500 Project 2\n         |\u2500\u2500\u2500 CMakeLists.txt\n         |\u2500\u2500\u2500 src\n         |\u2500\u2500\u2500 res\n         \u2514\u2500\u2500\u2500 header\n</code></pre>\n\n<h1>CMake files</h1>\n\n<p>And here are my CMakeLists, the first one for the root project, the second one is for the first project and the second project:</p>\n\n<pre><code># Specify the minimum version for CMake\ncmake_minimum_required(VERSION 3.8.2)\n\n# Project's name\nproject(Project X)\n\n# Set the C++ Version\nmessage(\"!REQUIRED! -- Supported features = ${cxx_std_14}\")\nmessage(\"Supported features = ${cxx_std_17}\")\n\nset(CMAKE_CXX_STANDARD 14)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\nset(CMAKE_CXX_EXTENSIONS OFF)\n\n# Set the output folder where the program will be created\n\nset(CMAKE_BINARY_DIR ${CMAKE_SOURCE_DIR}/bin)\nset(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR})\nset(LIBRARY_OUTPUT_PATH ${CMAKE_BINARY_DIR})\n\n# Add the modules\nadd_subdirectory(Project 1)\nadd_subdirectory(Project 2) # depends on Project 1\n</code></pre>\n\n<p>The CMakeLists.txt for the first and second project, as the content of the file is the same:</p>\n\n<pre><code># Specify the minimum version for CMake\ncmake_minimum_required(VERSION 3.8.2)\n\nproject(Project 1)\n\n# In order to find all cpp files automatically for compilation\nfile(GLOB CPP_FILES src/*.cpp)\nfile(GLOB CPP_FILES header/*.h)\n\n# Set the version number of the project here\nset(VERSION_MAJOR \"0\")\nset(VERSION_MINOR \"1\")\nset(VERSION_PATCH \"0\")\nset(VERSION ${VERSION_MAJOR}.${VERSION_MINOR}.${VERSION_PATCH})\n</code></pre>\n\n<p>And this are my VS settings:</p>\n\n<pre><code>Output Directory:       $(SolutionDir)bin\\$(Platform)\\$(Configuration)\\\nIntermediate Directory: $(SolutionDir)bin\\intermediates\\$(Platform)\\$(Configuration)\\\n</code></pre>\n\n<p>Project B is in this case the executable while project A is just a lib which has to be linked to Project B in order for Project B to compile.</p>\n\n<h1>Question:</h1>\n\n<ul>\n<li>How can I apply those Visual Studio 2017 settings to CMake? (how do I have to configure the <em>CMAKE_BINARY_DIR</em> setting etc.)</li>\n<li>Project 2 <strong>depends on</strong> Project 1, will CMake handle this automatically or do I have to add something to the CMakeLists.txt?</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1499888830, "post_id": 45066322, "comment_id": 77105927, "body": "Can you post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Example</a>?"}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1499888936, "post_id": 45066322, "comment_id": 77105994, "body": "@Curious sorry, fixed."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499889031, "post_id": 45066322, "comment_id": 77106054, "body": "@tobi303 fine, I added #include"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499889086, "post_id": 45066322, "comment_id": 77106085, "body": "@MK. well, its still just a template but nothing that will ever be executed. At least you need to instantiate it"}, {"owner": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "edited": false, "score": 2, "creation_date": 1499889104, "post_id": 45066322, "comment_id": 77106093, "body": "I think this operator at global level can generate ambiguity with a lot of types. operator &lt;&lt; (stream, something) is almost the definition of the operator &lt;&lt; for a stream"}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "edited": false, "score": 0, "creation_date": 1499889166, "post_id": 45066322, "comment_id": 77106131, "body": "@StefanoBuora is there a way to say that I want to define it for any, say, vector?"}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499889186, "post_id": 45066322, "comment_id": 77106140, "body": "@tobi303 I will try instantiating it once it compiles."}, {"owner": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "edited": false, "score": 0, "creation_date": 1499889462, "post_id": 45066322, "comment_id": 77106273, "body": "I would try to use some SFINAE rule (see <a href=\"http://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/sfinae</a>). Changing the prototype accrodling can make the trick"}], "answers": [{"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 4, "last_activity_date": 1499889280, "creation_date": 1499889280, "answer_id": 45066436, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066436#45066436", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>At this line:</p>\n\n<pre><code>os &lt;&lt; \"[\";\n</code></pre>\n\n<p>The compiler finds <strong>two</strong> valid functions: the STL's and yours.</p>\n\n<p>You need to be a bit more specific in your template declaration in order to resolve the conflict:</p>\n\n<pre><code>template &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::vector&lt;C&gt;&amp; c) {\n  ...\n</code></pre>\n\n<p>Expanding this to containers in general would require a bit of finagling with <code>std::enable_if&lt;&gt;</code> that will probably just confuse you further. I recommend you just add an overload for each type of container you want to support.</p>\n\n<p><strong>Edit:</strong> Also, overriding  <code>ostream &lt;&lt; T</code>, for types you don't own is generally a bad idea as it will eventually cause conflicts.</p>\n"}, {"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 3, "last_activity_date": 1499890208, "last_edit_date": 1499890208, "creation_date": 1499889296, "answer_id": 45066442, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066442#45066442", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>You get this error because your function matches every call to <code>&lt;&lt;</code> with a <code>std::ostream&amp;</code> on the left.</p>\n\n<blockquote>\n<pre><code>template &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const C&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n</blockquote>\n\n<p>When you write <code>os &lt;&lt; \"[\"</code>, the compiler finds multiple <code>operator&lt;&lt;</code> functions to call; your's is one of them. By adding a global <code>operator&lt;&lt;</code> that's templated to take any type, you intercept basically every call to <code>operator&lt;&lt;</code>.</p>\n\n<p>The cleanest way you could do this is to define a new function, say <code>print_collection</code>:</p>\n\n<pre><code>template &lt;typename C&gt;\nvoid print_collection(std::ostream&amp; os, const C&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n}\n</code></pre>\n\n<p>If you <em>really</em> want to define an <code>operator&lt;&lt;</code>, this gets more tricky. You could do this:</p>\n\n<pre><code>template &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::vector&lt;C&gt;&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n\n<p>However, if the standard library decides to add an <code>operator&lt;&lt;</code> of their own for <code>std::vector</code>, your code will break.</p>\n\n<p>I'd strongly recommend that if you wanted to add such an <code>operator&lt;&lt;</code>, you do it for your own type. Something like this:</p>\n\n<pre><code>template &lt;typename Iter&gt;\nclass Range {\n    Iter begin_;\n    Iter end_;\n\npublic:\n    Range() = default;\n    Range(Iter begin, Iter end)\n        : begin_{ begin }\n        , end_{ end }\n    {}\n\n    auto begin() const { return begin_; }\n    auto end() const { return end_; }\n};\n\ntemplate &lt;typename Iter&gt;\nauto range(Iter begin, Iter end) {\n    return Range&lt;Iter&gt;{ begin, end };\n}\n\ntemplate &lt;typename C&gt;\nauto range(const C&amp; collection) {\n    return range(std::begin(collection), std::end(collection));\n}\n\ntemplate &lt;typename Iter&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Range&lt;Iter&gt;&amp; range) {\n    os &lt;&lt; \"[\";\n    for (const auto&amp; v : range) {\n        os &lt;&lt; v &lt;&lt; \" \";\n    }\n    os &lt;&lt; \"]\";\n    return os;\n}\n</code></pre>\n\n<p>Then you could use it like this:</p>\n\n<pre><code>std::vector&lt;int&gt; vec = ...;\nstd::cout &lt;&lt; range(vec);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 9, "last_activity_date": 1499889311, "creation_date": 1499889311, "answer_id": 45066444, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066444#45066444", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>Adding</p>\n\n<pre><code>template &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const C&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n\n<p>Conflicts with the other <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"noreferrer\">global overloads</a> of <code>operator &lt;&lt;</code>.</p>\n\n<p>To fix this we can constrain your template to any vector instead of any type using</p>\n\n<pre><code>template &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::vector&lt;C&gt;&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1499890846, "post_id": 45066512, "comment_id": 77106944, "body": "Seems you&#39;ve typed <code>begin</code> twice."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499890926, "post_id": 45066512, "comment_id": 77106980, "body": "<i>check for the validity of begin() and end() methods on it</i> ... it&#39;s not a requirement for a container to provide <i>members</i> <code>begin()</code> and <code>end()</code> to be iterable."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499891246, "post_id": 45066512, "comment_id": 77107138, "body": "@zett42 it&#39;s a requirement for range based for loop, which this code uses."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499891330, "post_id": 45066512, "comment_id": 77107182, "body": "@zett42 ah nevermind, it&#39;s a requirement that <code>std::begin</code> and <code>std::end</code> works."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1499891552, "post_id": 45066512, "comment_id": 77107300, "body": "@EdgarRokyan no I have not, the return type of <code>begin()</code> and <code>end()</code> does not have to be the same and therefore I have only checked for <code>begin()</code>"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1499891591, "post_id": 45066512, "comment_id": 77107319, "body": "@GuillaumeRacicot I could not check for <code>std::begin</code> and <code>std::end</code> because that works for regular arrays as well and will cause a conflicting overload"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499891968, "post_id": 45066512, "comment_id": 77107497, "body": "<a href=\"http://coliru.stacked-crooked.com/a/7e2aee8c9016333a\" rel=\"nofollow noreferrer\">It will also create conflicts for things like <code>std::vector&lt;std::string&gt;</code></a>."}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": false, "score": 3, "last_activity_date": 1499889556, "creation_date": 1499889556, "answer_id": 45066512, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066512#45066512", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>The error occurs because your <code>operator&lt;&lt;</code> matches a lot of other overloads in the standard library.  In your case with the overload meant to go with <code>const char[2]</code>. </p>\n\n<p>If you want this to work with any iterable container, one way is to constrain it to check for the validity of <code>begin()</code> and <code>end()</code> methods on it</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing std::cout;\nusing std::endl;\n\ntemplate &lt;typename Container,\n          std::enable_if_t&lt;std::is_same&lt;\n            decltype(std::declval&lt;Container&gt;().begin()),\n            decltype(std::declval&lt;Container&gt;().begin())&gt;::value&gt;* = nullptr&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Container&amp; container) {\n    os &lt;&lt; \"[\";\n    for (const auto&amp; ele : container) {\n        os &lt;&lt; ele &lt;&lt; \" \";\n    }\n    os &lt;&lt; \"]\";\n    return os;\n}\n\nint main() {\n    auto vec = std::vector&lt;int&gt;{1, 2, 3};\n    cout &lt;&lt; vec &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "is_accepted": false, "score": 2, "last_activity_date": 1499889672, "creation_date": 1499889672, "answer_id": 45066539, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066539#45066539", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>I believe that your definition of the operator &lt;&lt; is causing an ambiguity with the standard operator defined for a C++ stream.</p>\n\n<p>I'd try to use some SFINAE technique changing your prototype in something like:</p>\n\n<pre><code>template &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const C&amp; c, C::const_iterator fakeVar = c.begin() ) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n\n<p>It should make your template suitable only if it can be compiled</p>\n"}, {"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499890759, "post_id": 45066563, "comment_id": 77106895, "body": "<i>I don&#39;t know if it&#39;s a good idea but I propose</i> ... why do you even write this then?"}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1499890943, "post_id": 45066563, "comment_id": 77106991, "body": "what is this -&gt; decltype syntax?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499892765, "post_id": 45066563, "comment_id": 77107857, "body": "@zett42 - I don&#39;t know if it&#39;s a good idea redefine <code>operator&lt;&lt;</code> for generic containers"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1499892823, "post_id": 45066563, "comment_id": 77107906, "body": "@MK - do you mean <code>auto [...] -&gt; decltype()</code> or the comma trick inside <code>decltype()</code>?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1499893344, "post_id": 45066563, "comment_id": 77108164, "body": "@MK. - are two different things; <code>auto [...] -&gt; type</code> is a new C++11 way to define the return type of functions; in this case the type is <code>decltype( os )</code>, that is &quot;the type of <code>os</code>&quot;, that is <code>std::ostream &amp;</code>. You can ask: why don&#39;t you simpli write <code>std::ostream &amp;</code> instead of <code>auto</code> (etc.). Answer: because I want use SFINAE (substitution failure isn&#39;t an error). (continue)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1499893448, "post_id": 45066563, "comment_id": 77108217, "body": "@MK. - The comma trick in <code>decltype()</code> is put <code>c.begin()</code> before the comma. If <code>c</code> support <code>begin()</code> (case <code>std::vector</code>, by example), there isn&#39;t a failure, the comma discard <code>c.begin()</code> and <code>decltype()</code> evaluate <code>os</code> and the operator is implemented. If <code>c</code> doesn&#39;t support <code>begin()</code> (<code>char[2]</code>, by example), failure and the <code>operator&lt;&lt;</code> isn&#39;t implemented (without error)."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1499889752, "creation_date": 1499889752, "answer_id": 45066563, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066563#45066563", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>As explained by others, for <code>os &lt;&lt; \"[\"</code> your operator introduce an ambiguity.</p>\n\n<p>I don't know if it's a good idea but I propose the use of SFINAE to enable your operator only for types supporting <code>begin()</code>.</p>\n\n<p>I mean </p>\n\n<pre><code>template &lt;typename C&gt;\nauto operator&lt;&lt;(std::ostream&amp; os, const C&amp; c)\n   -&gt; decltype( c.begin(), os ) {\n  os &lt;&lt; \"[\";\n  for (const auto &amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1499891179, "post_id": 45066828, "comment_id": 77107094, "body": "You should add a note that it will not work with <code>std::array</code> or any non template containers."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1499891309, "post_id": 45066828, "comment_id": 77107172, "body": "@GuillaumeRacicot I wrote that works with container which are template classes, but as you suggest, in order to be more clear I will add the negation&#39;s negation of the sentence"}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 0, "last_activity_date": 1499891528, "last_edit_date": 1499891528, "creation_date": 1499890827, "answer_id": 45066828, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector/45066828#45066828", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>The ambiguity comes from the fact that your template overloads the <code>operator&lt;&lt;</code> for the <code>std::ostream</code> and multiple definitions can be used.</p>\n\n<p>Practically, for example, the standard library defines:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const char*);\n</code></pre>\n\n<p>Your function will match the same with template substitution <code>typename C = const char*</code>.</p>\n\n<p>In order to solve this ambiguity you can either adopt another design choice (for example, avoid to overload <code>operator&lt;&lt;</code>) or solve the ambiguity specialising the template function.</p>\n\n<p>Many other answers can be good in that context, I'd suggest you another option (quite less verbose, but with some limitations. See below).</p>\n\n<p>Since you're trying to print <em>Containers</em>, it's likely that a container is a template class (<code>std::vector&lt;T&gt;</code>, <code>std::list&lt;T&gt;</code>, etc...). So your function can be slightly modified in order to handle only types which are template classes.</p>\n\n<pre><code>template &lt;template &lt;typename, typename...&gt; class Container, typename T,\n          typename... Args&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Container&lt;T, Args...&gt;&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n\n<p>Note that code will requires <em>C++11</em> because of <em>variadic templates</em>.</p>\n\n<p><a href=\"http://ideone.com/QqaXtM\" rel=\"nofollow noreferrer\">Here</a> an example to show that ambiguity has been solved.</p>\n\n<p>Note the limitation in that solution is, as said, that it works only with container which are template classes. And it does not work with <code>std::array</code> because the structure of array is <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">different</a>.</p>\n"}], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "answer_count": 7, "score": 6, "last_activity_date": 1499891528, "creation_date": 1499888768, "last_edit_date": 1499889935, "question_id": 45066322, "link": "https://stackoverflow.com/questions/45066322/writing-template-for-operator-for-any-vector", "title": "writing template for operator&lt;&lt; for any vector", "body": "<p>I'm trying to write a template operator for any iterable container.  Getting a strange error:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename C&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const C&amp; c) {\n  os &lt;&lt; \"[\";\n  for (const auto&amp; v : c) {\n    os &lt;&lt; v &lt;&lt; \" \";\n  }\n  os &lt;&lt; \"]\";\n  return os;\n}\n</code></pre>\n\n<blockquote>\n  <p>vec.cc:5:6: error: use of overloaded operator '&lt;&lt;' is ambiguous (with\n  operand types 'std::ostream' (aka 'basic_ostream') and 'const\n  char [2]')   os &lt;&lt; \"[\";   ~~ ^  ~~~</p>\n</blockquote>\n\n<p>Why this error?  And how do I achieve what I want?</p>\n"}, {"tags": ["c++", "multiple-inheritance"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1499888821, "post_id": 45066311, "comment_id": 77105918, "body": "So that it inherits only one instance of <code>W</code>?"}, {"owner": {"reputation": 85, "user_id": 565878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6978fb16e1acd068a8089eaeef151185?s=128&d=identicon&r=PG", "display_name": "Mart", "link": "https://stackoverflow.com/users/565878/mart"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1499889099, "post_id": 45066311, "comment_id": 77106090, "body": "@Charles I think virtual inheritance from W of AW and BW takes care of that."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 565878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6978fb16e1acd068a8089eaeef151185?s=128&d=identicon&r=PG", "display_name": "Mart", "link": "https://stackoverflow.com/users/565878/mart"}, "edited": false, "score": 0, "creation_date": 1500064518, "post_id": 45066383, "comment_id": 77194129, "body": "Why would you want to inherit from W directly, when it is already present in the inheritance tree and CW has access to any functions or instance variables it might have?"}], "tags": [], "owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "is_accepted": false, "score": 1, "last_activity_date": 1499889014, "creation_date": 1499889014, "answer_id": 45066383, "question_id": 45066311, "link": "https://stackoverflow.com/questions/45066311/multiple-virtual-diamond-inheritance/45066383#45066383", "title": "multiple virtual (diamond) inheritance", "body": "<p>From <em>The C++ Programming Language (Fourth Edition)</em> by Stroustrup (21.3.5, page 632):</p>\n\n<blockquote>\n  <p>All parts of an object [CW] must share a single copy of [W]. Otherwise, we could get two parts of something derived from [W] multiple times... We avoid replication by declaring a base <code>virtual</code>: every <code>virtual</code> base of a derived class is represented by the same (shared) object.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>I tried in VC2015 both with and without and it generates the same class layout.</p>\n</blockquote>\n\n<p>The reason that it's less important in this case is because <code>W</code> has no instance variables to replicate; all the methods within <code>W</code> were declared <code>virtual</code> anyway.</p>\n"}], "owner": {"reputation": 85, "user_id": 565878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6978fb16e1acd068a8089eaeef151185?s=128&d=identicon&r=PG", "display_name": "Mart", "link": "https://stackoverflow.com/users/565878/mart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537908976, "creation_date": 1499888741, "question_id": 45066311, "link": "https://stackoverflow.com/questions/45066311/multiple-virtual-diamond-inheritance", "title": "multiple virtual (diamond) inheritance", "body": "<p>I found the following code in \"The Design and Evolution of C++\" by Stroustrup:</p>\n\n<pre><code>class W\n{\npublic:\n  virtual void f();\n  virtual void g();\n};\n\nclass AW : public virtual W\n{\npublic:\n  void g() {}\n};\n\nclass BW : public virtual W\n{\npublic:\n  void f() {}\n};\n\nclass CW: public AW, public BW ***, public virtual W***\n{\n\n};\n\nCW* pcw = new CW;\nAW* paw = pcw;\nBW* pbw = pcw;\n\nvoid fff()\n{\n  pcw-&gt;f(); //invokes BW:f()\n  pcw-&gt;g(); //invokes AW:g()\n  paw-&gt;f(); //invokes BW:f() !\n  pbw-&gt;g(); //invokes AW:g() !\n}\n</code></pre>\n\n<p>It exemplifies mixin behavior ie. different classes adding behavior to a common base and which \"know of each other\".</p>\n\n<p>Why does CW inherit from W directly (<strong><em>, public virtual W</em></strong>)?\nI tried in VC2015 both with and without and it generates the same class layout.</p>\n"}, {"tags": ["c++", "arrays", "header-files"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1499888609, "post_id": 45066253, "comment_id": 77105821, "body": "Don&#39;t put function definitions in header files."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499888709, "post_id": 45066253, "comment_id": 77105869, "body": "Indentation is not something you should neglect this badly."}, {"owner": {"reputation": 1226, "user_id": 6324080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUqTh.jpg?s=128&g=1", "display_name": "K. Kirsz", "link": "https://stackoverflow.com/users/6324080/k-kirsz"}, "edited": false, "score": 1, "creation_date": 1499888842, "post_id": 45066253, "comment_id": 77105930, "body": "So what is the actual output of your program?"}, {"owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499888855, "post_id": 45066253, "comment_id": 77105934, "body": "Sorry. I&#39;ll make sure I&#39;ll do that the next time."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1499888862, "post_id": 45066253, "comment_id": 77105938, "body": "Your problem is that the pointer parameter is only changed within the function but not reflected outside. You can change the parameter signature like this: <code>unsigned long long*&amp;prime</code> to get your code working."}, {"owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499888890, "post_id": 45066253, "comment_id": 77105961, "body": "It prints a few elemnts and then It just stops working."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499888891, "post_id": 45066253, "comment_id": 77105963, "body": "@Barmar Serious reasons why not?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1499889428, "post_id": 45066253, "comment_id": 77106257, "body": "Use std::vector instead of new."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499889002, "post_id": 45066290, "comment_id": 77106038, "body": "You&#39;re right, It&#39;s not. What I meant to do is to have this part of code seperated since I use It alot. Then be able to call It whenever I need It."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499889238, "post_id": 45066290, "comment_id": 77106173, "body": "That&#39;s exactly why you break out your code into multiple <code>.cpp</code> files, and each <code>.cpp</code> with functions in it has an associated <code>.h</code> file that defines what those are. This complicates compilation, but you&#39;ll have to commit to a <code>Makefile</code>, or something like it eventually anyway. With a good compiler setup then only <code>.cpp</code> files which need to be recompiled will be compiled during a routine build, and this can speed up development considerably. the way you have it in the <code>.h</code> file leads to cascading rebuilds even if the function signature is untouched."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1499888667, "creation_date": 1499888667, "answer_id": 45066290, "question_id": 45066253, "link": "https://stackoverflow.com/questions/45066253/header-file-causes-problems-with-the-original-array-after-function-call/45066290#45066290", "title": "Header file causes problems with the original array after function call", "body": "<p>That's not a header file, it's a bunch of code. If you want to separate that code it should be in another <code>.cpp</code> file.</p>\n\n<p>An associated <code>.h</code> would look like this:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;new&gt;\n\nint generate_primes(const unsigned long long n, unsigned long long*prime);\n</code></pre>\n\n<p>Then you'd have <code>generate_primes.cpp</code> or something like it:</p>\n\n<pre><code> #include \"generate_primes.h\"\n\n int generate_primes(const unsigned long long n, unsigned long long*prime) {\n   // (function body)\n }\n</code></pre>\n\n<p>To build your application you'd need to compile both <code>.cpp</code> files and link them together with the required libraries.</p>\n"}, {"comments": [{"owner": {"reputation": 1226, "user_id": 6324080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUqTh.jpg?s=128&g=1", "display_name": "K. Kirsz", "link": "https://stackoverflow.com/users/6324080/k-kirsz"}, "edited": false, "score": 0, "creation_date": 1499889061, "post_id": 45066355, "comment_id": 77106071, "body": "It would generally be better to just allocate the whole array at the caller&#39;s side and manage it&#39;s lifetime from there. Now it is unclear who and how should take care of the array. Then you wouldn&#39;t even have such issues."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1226, "user_id": 6324080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUqTh.jpg?s=128&g=1", "display_name": "K. Kirsz", "link": "https://stackoverflow.com/users/6324080/k-kirsz"}, "edited": false, "score": 1, "creation_date": 1499889109, "post_id": 45066355, "comment_id": 77106096, "body": "@K.Kirsz And it would be even better to use <code>std::vector</code> so this whole thing becomes moot."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 1226, "user_id": 6324080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUqTh.jpg?s=128&g=1", "display_name": "K. Kirsz", "link": "https://stackoverflow.com/users/6324080/k-kirsz"}, "edited": false, "score": 0, "creation_date": 1499889128, "post_id": 45066355, "comment_id": 77106107, "body": "@K.Kirsz The <i>best way</i> would be to use a <code>std::vector</code> reference parameter."}, {"owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499889155, "post_id": 45066355, "comment_id": 77106122, "body": "Thank&#39;s. I just meant to have this part of code seperated and be able to use It whenever I need It."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499889289, "post_id": 45066355, "comment_id": 77106185, "body": "@lamriniyounes There&#39;s a lot of valid criticisms here you should pay attention to. Code separation is just one problem."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499889291, "post_id": 45066355, "comment_id": 77106187, "body": "@lamriniyounes The proper way to do that is with a separate <code>.cpp</code> file, as in @tadman&#39;s answer. But the problem you&#39;re having is due to the incorrect function definition, not whether it&#39;s in a .cpp or .h file."}, {"owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499889498, "post_id": 45066355, "comment_id": 77106292, "body": "@Barmar Thank&#39;s for making this much clearer. I have just started learning C++ so I&#39;m paying attention to everything you said."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1499888899, "creation_date": 1499888899, "answer_id": 45066355, "question_id": 45066253, "link": "https://stackoverflow.com/questions/45066253/header-file-causes-problems-with-the-original-array-after-function-call/45066355#45066355", "title": "Header file causes problems with the original array after function call", "body": "<p>The problem is that the parameter <code>prime</code> is being passed by value, not by reference. So when <code>generate_prime</code> assigns:</p>\n\n<pre><code>prime = new unsigned long long[n];\n</code></pre>\n\n<p>this only assigns to the local variable <code>prime</code>, not the caller's variable. You need to pass the parameter by reference so that the assignment will be visible to <code>main()</code>.</p>\n\n<pre><code>int generate_primes(const unsigned long long n, unsigned long long*&amp;prime) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "edited": false, "score": 0, "creation_date": 1499893156, "post_id": 45066690, "comment_id": 77108067, "body": "Thank&#39;s. I tried :  int generate_primes(const unsigned long long n, unsigned long long*&amp;prime) wich is the same."}], "tags": [], "owner": {"reputation": 1273, "user_id": 8285732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc625d1ed5c36dfef98d17dfeac7fe7?s=128&d=identicon&r=PG&f=1", "display_name": "milbrandt", "link": "https://stackoverflow.com/users/8285732/milbrandt"}, "is_accepted": false, "score": 0, "last_activity_date": 1499891222, "last_edit_date": 1499891222, "creation_date": 1499890220, "answer_id": 45066690, "question_id": 45066253, "link": "https://stackoverflow.com/questions/45066253/header-file-causes-problems-with-the-original-array-after-function-call/45066690#45066690", "title": "Header file causes problems with the original array after function call", "body": "<p>The value of the uninitialized pointer prime is an argument to the call of generate_primes. There it is not evaluated but the parameter assigned a new (local) value. Therefore inside the method the Array is accesible. But the new value is never returned, so in main the value of prime remains unchanged.</p>\n\n<p>Additionally you should change n from unsingned long long to a smaller type for teh sake of the compiler.</p>\n\n<p>Two possible solutions:\na) modify generate_prime so that it return the address of the Array</p>\n\n<pre><code>unsigned long long *prime generate_primes(const unsigned long n) \n</code></pre>\n\n<p>b) g\u00edve the address of the pointer as an Argument to the method</p>\n\n<pre><code>int generate_primes(const unsigned long n, unsigned long long **prime) \n{\n\n    try\n    {\n        *prime = new unsigned long long[n]; \n    } catch (const std::bad_alloc &amp;e) {\n    // your code\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int main(){\n    unsigned long n = 100;//example  \n    unsigned long long *prime;   \n    generate_primes(n, &amp;prime);\n\n    // your Code\n\n    delete[] prime; // free memeory\n    return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8116781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qKZx1kKpgLE/AAAAAAAAAAI/AAAAAAAAAJ0/KLvh5LhAHjQ/photo.jpg?sz=128", "display_name": "Younes", "link": "https://stackoverflow.com/users/8116781/younes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45066355, "answer_count": 3, "score": 0, "last_activity_date": 1499898989, "creation_date": 1499888527, "last_edit_date": 1499898989, "question_id": 45066253, "link": "https://stackoverflow.com/questions/45066253/header-file-causes-problems-with-the-original-array-after-function-call", "title": "Header file causes problems with the original array after function call", "body": "<p>I created a header file called primes.h\nWhat I want is to call a function generate_primes() defined in this header file to fill an array with a determined number of prime numbers.\nSo to test if everything works fine, I first printed the elements of the array from 'inside' the header file' wich works just fine. Then I tried printing them from outside the header file, in the program including the header file but It's not working, and the program just stops after printing a few elements. \nWhy is this unproper behaviour? And how can I do this the right way. \nThank's for helping. </p>\n\n<p>The header file : </p>\n\n<pre><code>int generate_primes(const unsigned long long n, unsigned long long*prime) \n{\n\n    try\n        {\n            prime = new unsigned long long[n]; \n        } \n    catch(const std::bad_alloc&amp;e) {\n        std::cerr &lt;&lt; e.what(); \n        exit(EXIT_FAILURE);  \n    }\n\n    prime[0] = 2, prime[1] = 3, prime[2] = 5; \n\n    unsigned long long p;\n    unsigned long long index = 3;\n\n    for (p = 7; index &lt; n; p += 2)\n        {\n            short isPrime = 1; \n            unsigned long long test_limit = (unsigned long long) sqrt(p); \n\n            for (int i = 1; prime[i] &lt;= test_limit &amp;&amp; i &lt; index; i++)\n                {\n                    if (!(p%prime[i]))\n                        {\n                            isPrime = 0; \n                            break;  \n                        }   \n                } \n            if (isPrime) prime[index++] = p; \n        }\n\n    //everything works fine when I print from inside the header file \n    /*for (int i = 0; i &lt; n; i++)\n      {\n      if (i &amp;&amp; i % 7 == 0) std::cout &lt;&lt; '\\n'; \n      std::cout &lt;&lt; prime[i] &lt;&lt; \"\\t\\t\"; \n      }\n    */\n    return 1; \n}\n</code></pre>\n\n<p>My program : </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;new&gt;\n#include &lt;cstdlib&gt;\n#include \"primes.h\"\n\nint main(){\n    unsigned long long n = 100;//example  \n    unsigned long long *prime;   \n    generate_primes(n, prime); \n\n    //but printing from here causes problems \n    //isn't the array now filled after calling the above function ? \n    for (unsigned long long i = 0; i &lt; n; i++) \n        {\n            if (i &amp;&amp; i % 5 == 0) std::cout&lt;&lt; '\\n'; \n            std::cout &lt;&lt; prime[i] &lt;&lt; \"\\t\"; \n        } \n\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "random", "srand"], "comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 5, "creation_date": 1499888649, "post_id": 45066246, "comment_id": 77105844, "body": "Have you considered using C++11 features for random number generation?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1499888717, "post_id": 45066246, "comment_id": 77105873, "body": "<code>time(NULL)</code> has a 1 second resolution so it will provide the same seed for every instance of your program that runs in the same second."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1499888772, "post_id": 45066246, "comment_id": 77105893, "body": "It looks like your implementation of <code>srand</code>/<code>rand</code> is pretty bad. Similar question: <a href=\"https://stackoverflow.com/questions/3032726/rand-generating-the-same-number-even-with-srandtimenull-in-my-main?rq=1\" title=\"rand generating the same number even with srandtimenull in my main\">stackoverflow.com/questions/3032726/&hellip;</a>"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1499891939, "post_id": 45066246, "comment_id": 77107481, "body": "The obligatory <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\"><code>rand()</code> considered harmful</a> link"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499892634, "post_id": 45066246, "comment_id": 77107795, "body": "What compiler did you use and what operating system did you run it on?"}, {"owner": {"reputation": 94, "user_id": 4335339, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2e2b09e84f981fd85df9922d504fd40e?s=128&d=identicon&r=PG&f=1", "display_name": "wrightMatthew", "link": "https://stackoverflow.com/users/4335339/wrightmatthew"}, "edited": false, "score": 0, "creation_date": 1499893533, "post_id": 45066246, "comment_id": 77108255, "body": "I&#39;m compiling g++ on Mac OSX 10.12.4"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499893765, "post_id": 45066246, "comment_id": 77108363, "body": "@wrightMatthew: Do you know the g++ version?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499894993, "post_id": 45066246, "comment_id": 77108960, "body": "@wrightMatthew: I&#39;m also <i>very</i> curious if you could provide values from <code>std::cout&lt;&lt;time(NULL)&lt;&lt;std::endl;</code>"}, {"owner": {"reputation": 94, "user_id": 4335339, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2e2b09e84f981fd85df9922d504fd40e?s=128&d=identicon&r=PG&f=1", "display_name": "wrightMatthew", "link": "https://stackoverflow.com/users/4335339/wrightmatthew"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499896152, "post_id": 45066246, "comment_id": 77109435, "body": "@Richard So outputs from time(NULL) are, 1499896059, 1499896060, 1499896061, 1499896062 -- Waiting two seconds between calls --, 1499896064, 1499896066. It makes sense, it is just getting a time, incrementing by seconds. my assumption is rand() really gives a small amount of entropy, (32XXX according to a video), and then adds it to the time and maybe shifts it. So rand() just seems to be bad. The link Mgetz provided was very helpful to understand what was happening. Also, my g++ version, though it might not be relevant anymore, is Apple LLVM version 8.0.0 (clang-800.0.38)"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499896404, "post_id": 45066246, "comment_id": 77109529, "body": "@wrightMatthew: I&#39;m sorry, but do you also have the random numbers associated with the times? I should have asked for: <code>auto ts=time(NULL);srand(ts);std::cout&lt;&lt;ts&lt;&lt;&quot; &quot;&lt;&lt;rand()&lt;&lt;std::endl;</code>"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499896757, "post_id": 45066246, "comment_id": 77109654, "body": "(I&#39;ve edited the question to contain the outputs in text format, so that the numbers can easily be copied by others.)"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499897833, "post_id": 45066246, "comment_id": 77110075, "body": "@wrightMatthew: When you say &quot;it is just getting a time, incrementing by seconds&quot;, are you aware that the value returned by <code>time(NULL)</code> does not need to be a number of seconds (though it generally is)? One hypothesis I had about the behaviour you were seeing is that you were getting a return from <code>time(NULL)</code> with few low-order bits set. Casting this to an <code>int</code> would then throw away most of your seed."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499897881, "post_id": 45066246, "comment_id": 77110089, "body": "Also, Apple LLVM clang and g++ are two different things. You can get the version with <code>clang++ --version</code> or <code>g++ --version</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1499892000, "post_id": 45066739, "comment_id": 77107517, "body": "my comment on the OP&#39;s question links to a video that explains this in a lot more depth."}, {"owner": {"reputation": 94, "user_id": 4335339, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2e2b09e84f981fd85df9922d504fd40e?s=128&d=identicon&r=PG&f=1", "display_name": "wrightMatthew", "link": "https://stackoverflow.com/users/4335339/wrightmatthew"}, "edited": false, "score": 0, "creation_date": 1499895776, "post_id": 45066739, "comment_id": 77109294, "body": "Great video link. Thank you, that was very helpful to help understand the issue."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1499899400, "post_id": 45066739, "comment_id": 77110583, "body": "OP&#39;s using a black box and having problems. This answer suggests that OP use a different black box, implicitly promising that it won&#39;t have problems. Or that said problems are not worth caring about. I disagree with this promise. <code>std::random_device</code> may be deterministic; it may block for unknown periods (<a href=\"http://www.pcg-random.org/posts/cpps-random_device.html\" rel=\"nofollow noreferrer\">link</a>). Further, seeding the MT this way leaves a lot of the state deterministic, which can result in odd effects (<a href=\"http://www.pcg-random.org/posts/cpp-seeding-surprises.html\" rel=\"nofollow noreferrer\">link</a>)."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499899638, "post_id": 45066739, "comment_id": 77110644, "body": "Stephan Levavej&#39;s talk is, in a meta-sense, a criticism of propagating and using PRNGs without thinking critically about what they do. Let&#39;s not repeat the mistakes of the past and, instead, try to ensure that we talk about randomness with the reverence and care it deserves."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1499902180, "post_id": 45066739, "comment_id": 77111353, "body": "@Richard Sure, but known unknowns are better than unknown unknowns. Especially when they stem from the C++ standard library."}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": true, "score": 5, "last_activity_date": 1499926963, "last_edit_date": 1499926963, "creation_date": 1499890469, "answer_id": 45066739, "question_id": 45066246, "link": "https://stackoverflow.com/questions/45066246/rand-with-srand-is-giving-strangely-similar-results-the-return-from-rand/45066739#45066739", "title": "rand() with srand() is giving strangely similar results. The return from rand() is very similar", "body": "<p>Using the modulus operator brings in some amount of bias in the resulting \"random number\".  Further the working of the <code>rand()</code> function is implementation defined and does not follow a standard algorithm across platforms. </p>\n\n<p>Consider using more modern C++11 random number generation features that use standard widely accepted random number generation algorithms, that work the same across platforms (given the same seed of course).   </p>\n\n<p>See the following example from the <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">cppreference page for std::uniform_int_distribution</a></p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::random_device rd;  //Will be used to obtain a seed for the random number engine\n    std::mt19937 gen(rd()); //Standard mersenne_twister_engine seeded with rd()\n    std::uniform_int_distribution&lt;&gt; dis(1, 6);\n\n    for (int n=0; n&lt;10; ++n)\n        //Use dis to transform the random unsigned int generated by gen into an int in [1, 6]\n        std::cout &lt;&lt; dis(gen) &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<hr>\n\n<p>Here is link to a great talk by Stephan Levavej that goes into this more in depth <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful</a></p>\n"}], "owner": {"reputation": 94, "user_id": 4335339, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2e2b09e84f981fd85df9922d504fd40e?s=128&d=identicon&r=PG&f=1", "display_name": "wrightMatthew", "link": "https://stackoverflow.com/users/4335339/wrightmatthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 45066739, "answer_count": 1, "score": 2, "last_activity_date": 1499926963, "creation_date": 1499888504, "last_edit_date": 1499898844, "question_id": 45066246, "link": "https://stackoverflow.com/questions/45066246/rand-with-srand-is-giving-strangely-similar-results-the-return-from-rand", "title": "rand() with srand() is giving strangely similar results. The return from rand() is very similar", "body": "<p>This is a seemingly common question, so I hope I don't sound redundant. But the range returned from rand() should be between 0 and RAND_MAX, however, when I do a very simple rand statement, I'm always getting returns within a very small range.</p>\n\n<p>This range is something like 1,4XX,XXX,XXX. I figured this might be a clock thing, so I waited thirty minutes and I'm still getting numbers in the same range.</p>\n\n<p>Here is some sample output from twenty minutes ago:</p>\n\n<pre><code>Matthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1439810968\n80\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1439827775\n29\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1439827775\n29\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1439844582\n78\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1439878196\n29\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1439895003\n78\n</code></pre>\n\n<p>and here is sample output from just now:</p>\n\n<pre><code>Matthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1456483512\n78\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1456500319\n80\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1456500319\n80\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1456517126\n29\nMatthews-Macbook-Pro:Data_Structures matthewwright$ ./main\n1456533933\n78\n</code></pre>\n\n<p>I know rand() isn't perfect, but this seems too similar to be correct. If the range is 0 - RAND_MAX, it seems weird that every number returned is in the same range.</p>\n\n<p>Here is the code I was testing:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;      /* printf, scanf, puts, NULL */\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n\nint main(int argc, char const *argv[])\n{\n    /* declarations */\n    srand(time(NULL));\n\n    std::cout &lt;&lt; std::rand() &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::rand()%100 &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I don't think I needed all those #include statements, but I saw other people using them so I included them just in case it would affect my output, but it didn't.</p>\n\n<h2>Edit</h2>\n\n<p>So the links provided by @Mgetz and @Curious were super helpful. To consolidate,</p>\n\n<p>Info page: <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution</a></p>\n\n<p>Super helpful lecture (for real, watch this): <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful</a></p>\n\n<p>I summarized what I heard in the lecture on my own notes, just so I won't have to re-research this another time if I forget. I didn't write the code here, most of the code is within on that \"Info page\" linked above. Most of the comments contain information from the lecture, though it isn't verbatim from the lecture. Again, I really recommend watching that. It is dense with good information.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nint main(int argc, char const *argv[])\n{\n    /* https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful */\n\n    /* Randomness Verson 1 : Deterministic */\n    std::mt19937 mt(1234);\n    std::uniform_int_distribution&lt;int&gt; dist(0,127);\n    /* Default is int, but we could specify others.\n     * The range is [inclusive, inclusive]\n     * \n     * Above is Mersenne Twister RNG. It is deterministic, meaning we can get the same result\n     * if we use \"std::mt19937 mt(1234)\"; or something like that. This could be useful for some\n     * people (He mentions games, some experiments, et cetera). It is stupid fast.\n     * \n     * However, it isn't cryptographically secure, but it pretty random as random goes. If you\n     * track the output though, you could guess the next numbers, so don't use it for anything\n     * secure.\n     */\n\n    /* Randomness Verson 2 */\n    std::random_device rd;  //Will be used to obtain a seed for the random number engine\n    std::mt19937 gen(rd()); //Standard mersenne_twister_engine seeded with rd()\n    std::uniform_int_distribution&lt;int&gt; dis(0, 127); // Inclusive\n    /* This is not reproducible. This is not deterministic.\n     * \"Possibly Crypto-secure.\" Seems like using Random Device makes this near perfect random,\n     * assuming some conditions. I'm not a man who's written security software, and if you are \n     * writing security software, I assume you're not looking at StackOverflow to figure out how\n     * to do random numbers. The way he talked about it in the lecture made this seem much more \n     * secure, but I'm not sure what I'm talking about when it comes to these things\n     */\n\n    for (int i = 0; i &lt; 3; ++i)\n    {\n        /* Below would output the pure Mersenne Twister output, deterministic. This seems to\n         * be pretty random, but it isn't totally random. */\n        std::cout &lt;&lt; dist(mt) &lt;&lt; \" \";\n\n        /* And below would output the random device output. This should be slower, but\n         * more truly random. */\n\n        //Use dis to transform the random unsigned int generated by gen into an int in [1, 6]\n        std::cout &lt;&lt; dis(gen) &lt;&lt; \" \";\n\n        std::cout&lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "header-files", "member"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1499887851, "post_id": 45066070, "comment_id": 77105474, "body": "You have 2 different Enemy classes."}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1499887842, "creation_date": 1499887842, "answer_id": 45066091, "question_id": 45066070, "link": "https://stackoverflow.com/questions/45066070/member-variable-in-header-undefined/45066091#45066091", "title": "Member Variable in Header Undefined", "body": "<p>Your cpp file shouldn't redefine the whole class. Instead of</p>\n\n<pre><code>class Enemy {\npublic:\n    Enemy::Enemy(){\n        attackPower = 0;\n    }\n    void Enemy::setAttackPower(int a){\n        attackPower = a;\n    }\n};\n</code></pre>\n\n<p>You should just have</p>\n\n<pre><code>Enemy::Enemy(){\n    attackPower = 0;\n}\n\nvoid Enemy::setAttackPower(int a){\n    attackPower = a;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1499887849, "creation_date": 1499887849, "answer_id": 45066095, "question_id": 45066070, "link": "https://stackoverflow.com/questions/45066070/member-variable-in-header-undefined/45066095#45066095", "title": "Member Variable in Header Undefined", "body": "<p>When you're defining implementations they should not be inside a <code>class</code> definition:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Enemy.h\"\n\nEnemy::Enemy() {\n    attackPower = 0;\n}\n\nvoid Enemy::setAttackPower(int a) {\n    attackPower = a;\n}\n</code></pre>\n\n<p>A better way of defining your constructor is this:</p>\n\n<pre><code>Enemy::Enemy() : attackPower(0) {\n}\n</code></pre>\n\n<p>You should also get in the habit of flagging arguments as <code>const</code> unless you absolutely need to mutate them:</p>\n\n<pre><code>void Enemy::setAttackPower(const int a) {\n    attackPower = a;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8281109, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NfOPiHjVfxI/AAAAAAAAAAI/AAAAAAAAAfY/kwB0PnyUtNM/photo.jpg?sz=128", "display_name": "Damino", "link": "https://stackoverflow.com/users/8281109/damino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "closed_date": 1499888154, "answer_count": 2, "score": -3, "last_activity_date": 1499887849, "creation_date": 1499887754, "question_id": 45066070, "link": "https://stackoverflow.com/questions/45066070/member-variable-in-header-undefined", "closed_reason": "Not suitable for this site", "title": "Member Variable in Header Undefined", "body": "<p>I'm trying to learn how to split my code up into header and source files, but don't understand why my member variable <code>attackPower</code> is considered undefined.</p>\n\n<p>Enemy.h</p>\n\n<pre><code>#pragma once\n\nclass Enemy{\nprotected:\n    int attackPower;\npublic:\n    Enemy();\n    void setAttackPower(int a);\n    virtual void attack() = 0;\n};\n</code></pre>\n\n<p>Enemy.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Enemy.h\"\n\nclass Enemy {\npublic:\n    Enemy::Enemy(){\n        attackPower = 0;\n    }\n    void Enemy::setAttackPower(int a){\n        attackPower = a;\n    }\n};\n</code></pre>\n\n<p>In Enemy.cpp, Visual Studio tells me </p>\n\n<blockquote>\n  <p>identifier \"attackPower\" is undefined</p>\n</blockquote>\n"}, {"tags": ["c++", "c", "telnet"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499887345, "post_id": 45065674, "comment_id": 77105200, "body": "&gt;default/design/magic   The word you are looking for is  &quot;luck&quot;, as there are no guarantees to that effect."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499888007, "post_id": 45065674, "comment_id": 77105546, "body": "In situations like this WireShark or <code>tcpdump</code> and a tried-and-true <code>telnet</code> client will provide some examples you can work from."}, {"owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499900976, "post_id": 45065674, "comment_id": 77111015, "body": "@Frank Well I will explicitly setup those two arrays if needed but that isn&#39;t really the core of my question - I would like a walk-through of <a href=\"https://tools.ietf.org/html/rfc1143#section-7\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc1143#section-7</a> so as to work with the options structures (well, <i>arrays</i>) I propose."}], "owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1501094166, "creation_date": 1499886254, "last_edit_date": 1501094166, "question_id": 45065674, "link": "https://stackoverflow.com/questions/45065674/telnet-q-state-option-logic-rfc1143-example-code-explaination-sought", "title": "Telnet Q State Option Logic RFC1143 example code - explaination sought", "body": "<p>I need/want to implement a <a href=\"https://tools.ietf.org/html/rfc1143\" rel=\"nofollow noreferrer\">RFC1143</a> compliant Telnet sub-option negotiation system in the MUD client I am coding for but I am having difficulty translating the methodology in <a href=\"https://tools.ietf.org/html/rfc1143#section-7\" rel=\"nofollow noreferrer\">Section 7</a> into workable C/C++ code.  I have, as the text suggests as one way to do it, two six state enums - I understand that given the bit patterns chosen an option is considered to be active if, and only if, for a <code>TelnetQStateFlag</code> instance <code>state</code> , <code>state == QStateYes</code>:</p>\n\n<pre><code>    enum TelnetQStateFlag {\n                                      // +-----If set then we have a queued\n                                      // |     request for the opposite state\n                                      // |+----If set then we want the opposite\n                                      // ||+---Must be only one set for option\n                                      // |||   to be active\n                      QStateNo = 0x0, // 000 - No\n                  QStateWantNo = 0x2, // 010 - Want No and we/he do not want to change to Yes\n                 QStateWantYes = 0x3, // 011 - Want Yes and we/he do not want to change to No\n                     QStateYes = 0x1, // 001 - Yes\n    QStateWantYesQueueOpposite = 0x7, // 111 - Yes but we/he wants to change to no\n     QStateWantNoQueueOpposite = 0x6  // 110 - No but we/he wants to change to yes\n    };\n\n    TelnetQStateFlag[256] mMyOptions;\n    TelnetQStateFlag[256] mHisOptions;\n</code></pre>\n\n<p>By default/design/magic all the options will default to the <code>QStateNo</code> but I can see that I should, on initialisation set the ones (specific values of the <code>size_t</code> variable <code>optionIndex</code>) that MY end is prepared to handle by setting <code>mMyOptions[optionIndex] = QStateWantYes</code> and similarly the ones that we are prepared to accept from HIM as <code>mHisOptions[optionIndex] = QStateWantYes</code>.</p>\n\n<p>Can someone talk me through - slowly - how to handle requests from one party to negotiate to control an option at the other end - both for the cases where the other end will <em>and</em> will not accept such an option; and how this works for <em>both</em> directions possibly in an overlapping situation?</p>\n\n<p>I have been through and starting from the referred to RFC I have edited it to express the transitions in six-states:</p>\n\n<pre><code>There are two sides, we (us) and he (him).  Originally RFC1143 kept two\nsets of two variables:\n\nus:      state of option on our side (NO/WANTNO/WANTYES/YES)  \nusq:     a queue bit (EMPTY/OPPOSITE) if us is WANTNO or WANTYES  \n\nhim:     state of option on his side  \nhimq:    a queue bit if him is WANTNO or WANTYES  \n\nAn option is enabled if and only if its state is YES.\n\nNote that below us/usq and him/himq has been combined into two six-choice\nstates:    \n\n\u2219 NO              default (starting) state\n\u2219 WANTYES         no pending request for this option to be enabled\n\u2219 WANTYESQUEUEDNO already requested for this option to be enabled  \n\u2219 WANTNO          no pending request for this option to be disabled  \n\u2219 WANTNOQUEUEDYES already requested for this option to be disabled  \n\u2219 YES             state is enabled - ONLY state in which option is ACTIVE\n\n\"ERROR\" below means that producing diagnostic information may be a good idea,\nthough it isn't required.\n\nUpon receipt of WILL(for his state){DO(for our state)}, we choose based upon\nhim{us} state:\n\n\u2218 NO (if we agree)        ==&gt; YES and send DO{WILL}\n\u2218 NO (if we do not agree) ==&gt; NOCHANGE but still send DONT{WONT}\n\u2218 YES                     ==&gt; NOCHANGE\n\u2218 WANTNO                  ==&gt; NO; ERROR: DONT{WONT} answered by WILL{DO}\n\u2218 WANTNOQUEUEDYES         ==&gt; WANTYES; ERROR: DONT{WONT} answered by WILL{DO}\u2020\n\u2218 WANTYES                 ==&gt; YES\n\u2218 WANTYESQUEUEDNO         ==&gt; WANTNO and send DONT{WONT}\n\n\u2020 This behaviour is debatable; DONT{WONT} will never be answered by WILL{DO}\nover a reliable connection between TELNETs compliant with this RFC, so this\nwas chosen:\n  1. not to generate further messages, because if we know we're dealing with\n     a non-compliant TELNET we shouldn't trust it to be sensible;\n  2. to empty the queue sensibly.\n\nUpon receipt of WONT{DONT}, we choose based upon him{us} state:\n\u2219 NO                      ==&gt; NOCHANGE\n\u2219 YES                     ==&gt; NO and send DONT{WONT}\n\u2219 WANTNO                  ==&gt; NO\n\u2219 WANTNOQUEUEDYES         ==&gt; WANTYES and send DO{WILL}\n\u2219 WANTYES                 ==&gt; NO \u2021\n\u2219 WANTYESQUEUEDNO         ==&gt; NO \u203b\n\n\u2021 Here is the only spot a length-two queue could be useful; after a WILL{DO}\nnegotiation was refused, a queue of WONT{DONT} WILL{DO} would mean to request\nthe option again. This seems of too little utility and too much potential\nwaste; there is little chance that the other side will change its mind\nimmediately.\n\n\u203b Here we don't have to generate another request because we've{he's} been\n\"refused into\" the correct state anyway.\n\nIf we decide to ask him to enable {we want to enable ourself}:\n\u2218 NO              ==&gt; WANTYES and send DO{WILL}\n\u2218 YES             ==&gt; NOCHANGE; ERROR: already enabled\n\u2218 WANTNO          ==&gt; WANTNOQUEUEDYES\n\u2218 WANTNOQUEUEDYES ==&gt; NOCHANGE; ERROR: cannot initiate new request in the\n                      middle of negotiation.\n\u2218 WANTYES         ==&gt; NOCHANGE; ERROR: already negotiating for enable\n\u2218 WANTYESQUEUEDNO ==&gt; WANTYES\n\nIf we decide to ask him to disable {we want to disable ourself}:\n\u2219 NO              ==&gt; NOCHANGE; ERROR: already disabled\n\u2219 YES             ==&gt; WANTNO and send DONT{WONT}\n\u2219 WANTNO          ==&gt; NOCHANGE; error: already negotiating for disable\n\u2219 WANTNOQUEUEDYES ==&gt; WANTNO\n\u2219 WANTYES         ==&gt; WANTYESQUEUEDNO\n\u2219 WANTYESQUEUEDNO ==&gt; NOCHANGE; error: already queued a disable request\n                      and must not initiate new request in the middle of\n                      negotiation\n\nWe handle the option on our side by the same procedures, with DO&lt;-&gt;WILL,\nDONT&lt;-&gt;WONT, him&lt;-&gt;us swapped as shown above.\n</code></pre>\n\n<p>Update 2017/07/26:\nOne aspect that is a little confusing to me is the case when he has an option that is enabled (in YES state) and we want him to disable it - according to this we set our record of his state to WANTNO {and send him the DONT command} - but this has moved our record of the state <em>away from the YES state</em> and the guide suggests that the option is now to be considered <em>disabled</em> even though we have not yet got a WONT to confirm it - fair enough he MUST accept it as the disabled state corresponding to the vanilla NVT requires that - but surely it does not take effect until we get the acknowledgement?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1499886077, "post_id": 45065606, "comment_id": 77104555, "body": "You should escape \\ properly. <code>\\P</code> is not a valid escape. I bet you received a warning about it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499887622, "post_id": 45065606, "comment_id": 77105349, "body": "You seemed to know that, since you doubled the first backslash. Why didn&#39;t you double all the rest for the same reason?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1499887643, "post_id": 45065606, "comment_id": 77105365, "body": "You can also use forward slash instead. Windows has allowed either type of slash in filenames for a very long time."}, {"owner": {"reputation": 1, "user_id": 8297872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ad4ad034b1ddae3bfcc55296a54589?s=128&d=identicon&r=PG&f=1", "display_name": "jianzhelin", "link": "https://stackoverflow.com/users/8297872/jianzhelin"}, "edited": false, "score": 0, "creation_date": 1499905231, "post_id": 45065606, "comment_id": 77112123, "body": "I have tried to change the code to    string fileName = &quot;C:/Users/PeterLin/Documents/Visual Studio 2015/Projects/Project7/x64/Debug/ball/images.txt&quot;; but the same problem exists. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8297872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ad4ad034b1ddae3bfcc55296a54589?s=128&d=identicon&r=PG&f=1", "display_name": "jianzhelin", "link": "https://stackoverflow.com/users/8297872/jianzhelin"}, "edited": false, "score": 0, "creation_date": 1499905474, "post_id": 45066197, "comment_id": 77112172, "body": "I have tried to change the code to    string fileName = &quot;C:/Users/PeterLin/Documents/Visual Studio 2015/Projects/Project7/x64/Debug/ball/images.txt&quot;; but the same problem exists. Thank you."}, {"owner": {"reputation": 110, "user_id": 3621843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002233477494/picture?type=large", "display_name": "oldink", "link": "https://stackoverflow.com/users/3621843/oldink"}, "reply_to_user": {"reputation": 1, "user_id": 8297872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ad4ad034b1ddae3bfcc55296a54589?s=128&d=identicon&r=PG&f=1", "display_name": "jianzhelin", "link": "https://stackoverflow.com/users/8297872/jianzhelin"}, "edited": false, "score": 0, "creation_date": 1499907889, "post_id": 45066197, "comment_id": 77112704, "body": "Could it be that some other program is accessing the file ? (A text editor etc). I really don&#39;t think it&#39;s a permission issue, and I do assume you have the path right."}], "tags": [], "owner": {"reputation": 110, "user_id": 3621843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002233477494/picture?type=large", "display_name": "oldink", "link": "https://stackoverflow.com/users/3621843/oldink"}, "is_accepted": false, "score": 0, "last_activity_date": 1499888267, "creation_date": 1499888267, "answer_id": 45066197, "question_id": 45065606, "link": "https://stackoverflow.com/questions/45065606/error-reading-the-character-of-a-string/45066197#45066197", "title": "Error reading the character of a string", "body": "<p>You are not escaping the \\ properly.</p>\n\n<p>If escaping them is too much of a pain, which they usually can be you can try using a verbatim string literal. \nUsed as a prefix it asks the compiler to ignore escape characters. Very useful when writing regex.</p>\n\n<p>Have a read here :\n<a href=\"http://stroustrup.com/C++11FAQ.html#raw-strings\" rel=\"nofollow noreferrer\">http://stroustrup.com/C++11FAQ.html#raw-strings</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8297872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ad4ad034b1ddae3bfcc55296a54589?s=128&d=identicon&r=PG&f=1", "display_name": "jianzhelin", "link": "https://stackoverflow.com/users/8297872/jianzhelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499888267, "creation_date": 1499885987, "last_edit_date": 1499886158, "question_id": 45065606, "link": "https://stackoverflow.com/questions/45065606/error-reading-the-character-of-a-string", "title": "Error reading the character of a string", "body": "<pre><code>#include &lt;algorithm&gt;\n\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n\n#include \"kcftracker.hpp\"\n\n#include &lt;dirent.h&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main(int argc, char* argv[]){\n\n    if (argc &gt; 5) return -1;\n\n    bool HOG = true;\n    bool FIXEDWINDOW = false;\n    bool MULTISCALE = true;\n    bool SILENT = true;\n    bool LAB = false;\n\n    for(int i = 0; i &lt; argc; i++){\n        if ( strcmp (argv[i], \"hog\") == 0 )\n            HOG = true;\n        if ( strcmp (argv[i], \"fixed_window\") == 0 )\n            FIXEDWINDOW = true;\n        if ( strcmp (argv[i], \"singlescale\") == 0 )\n            MULTISCALE = false;\n        if ( strcmp (argv[i], \"show\") == 0 )\n            SILENT = false;\n        if ( strcmp (argv[i], \"lab\") == 0 ){\n            LAB = true;\n            HOG = true;\n        }\n        if ( strcmp (argv[i], \"gray\") == 0 )\n            HOG = false;\n    }\n\n    // Create KCFTracker object\n    KCFTracker tracker(HOG, FIXEDWINDOW, MULTISCALE, LAB);\n\n    // Frame readed\n    Mat frame;\n\n    // Tracker results\n    Rect result;\n\n    // Path to list.txt\n    ifstream listFile;\n    string fileName = \"C:\\\\Users\\PeterLin\\Documents\\Visual Studio 2015\\Projects\\Project7\\x64\\Debug\\ball\\images.txt\";\n    listFile.open(fileName);\n</code></pre>\n\n<p>Every time I run this code, the system tell me that there's error in reading the string and cannot get the filename. I wonder the reason.</p>\n"}, {"tags": ["c++", "parallel-processing", "cuda", "nvcc"], "comments": [{"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 4, "creation_date": 1499885734, "post_id": 45065487, "comment_id": 77104366, "body": "Both <code>cudaMalloc</code> and <code>cudaMemcpy</code> return a value of type <code>cudaError_t</code> - might be worth checking these first."}, {"owner": {"reputation": 11612, "user_id": 266068, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/wzczi.png?s=128&g=1", "display_name": "Panos Kal.", "link": "https://stackoverflow.com/users/266068/panos-kal"}, "reply_to_user": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 0, "creation_date": 1499885849, "post_id": 45065487, "comment_id": 77104429, "body": "Thanks @iehrlich I&#39;ll check this"}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "edited": false, "score": 2, "creation_date": 1499886000, "post_id": 45065487, "comment_id": 77104508, "body": "Also take a look at <a href=\"https://stackoverflow.com/questions/34655893/cuda-large-input-arrays\">this</a>, and overall <a href=\"https://www.google.ru/search?q=cuda+large+array\" rel=\"nofollow noreferrer\">this</a> might give you some hints. Good luck!"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1499889394, "post_id": 45065487, "comment_id": 77106234, "body": "Any time you are having trouble with a CUDA code, it&#39;s strongly recommended that you do <a href=\"https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api\">proper CUDA error checking</a> and also run your code with <code>cuda-memcheck</code>.  Depending on how you are compiling this code (??), the choice of <code>N=1000000</code> may cause your kernel launch <code>add&lt;&lt;&lt;N, 1&gt;&gt;&gt;(da, db);</code> to fail.  (This is almost certainly what is happening here.)  Proper error checking is likely to focus your attention on what is wrong.  Also, what GPU are you running on?"}], "answers": [{"comments": [{"owner": {"reputation": 11612, "user_id": 266068, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/wzczi.png?s=128&g=1", "display_name": "Panos Kal.", "link": "https://stackoverflow.com/users/266068/panos-kal"}, "edited": false, "score": 0, "creation_date": 1499975412, "post_id": 45089675, "comment_id": 77151993, "body": "Thank you very much Robert, for your time and your awesome reply!"}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 5, "last_activity_date": 1499974974, "creation_date": 1499974974, "answer_id": 45089675, "question_id": 45065487, "link": "https://stackoverflow.com/questions/45065487/invalid-configuration-argument-for-thread-block-greater-than-16bit/45089675#45089675", "title": "Invalid configuration argument for thread block greater than 16bit", "body": "<p>Your device (GTX 470) is a cc2.0 device (compute capability).</p>\n\n<p>The invalid configuration argument error is due to the fact that for cc2.0 devices, the number of blocks for a 1-D grid is limited to 65535.  This information is discoverable in the <a href=\"http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#features-and-technical-specifications__technical-specifications-per-compute-capability\" rel=\"noreferrer\">programming guide</a> (\"Maximum x-dimension of a grid of thread blocks\") or by running the <code>deviceQuery</code> CUDA sample code.  So your choice of <code>N</code> here is too large:</p>\n\n<pre><code>add&lt;&lt;&lt;N, 1&gt;&gt;&gt;(da, db);\n      ^\n</code></pre>\n\n<p>The usual workaround for this with a cc2.0 device is to create a grid of threadblocks that is multidimensional, which allows for a much larger number of threadblocks.  The kernel launch parameters can actually be <code>dim3</code> variables which allow specification of multidimensional grids (of threadblocks) or multidimensional threadblocks (of threads).</p>\n\n<p>To do this properly, you will also need to change your kernel code to create a proper globally unique thread ID from the multidimensional variables available to you.</p>\n\n<p>The following worked example gives one possible minimal set of changes to demonstrate the concept, and appears to run correctly for me:</p>\n\n<pre><code>$ cat t363.cu\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n#include &lt;thrust/system_error.h&gt;\n#include &lt;thrust/system/cuda/error.h&gt;\n#include &lt;sstream&gt;\nconst int N = 70000;\n\n#define checkCudaErrors(error) {\\\n    if (error != cudaSuccess) {\\\n        printf(\"CUDA Error - %s:%d: '%s'\\n\",__FILE__,__LINE__,cudaGetErrorString(error));\\\n        exit(1);\\\n        }\\\n}\\\n\n__global__\nvoid add(int *a, int *b) {\n    int i = blockIdx.x + blockIdx.y*gridDim.x;\n    if (i&lt;N) {\n        b[i] = 2*a[i];\n    }\n}\nstatic int ha[N];\nstatic int hb[N];\nint main() {\n    int max_value[2];\n\n    int deviceCount = 0;\n    cudaGetDeviceCount(&amp;deviceCount);\n    cudaError_t err=cudaDeviceReset();\n    if(err!=cudaSuccess){printf(\"%s in %s at line %d\\n\",cudaGetErrorString(err),__FILE__,__LINE__);}\n    printf(\"Device count: %d \\n\", deviceCount);\n\n    for (int i = 0; i&lt;N; ++i) { ha[i] = i; }\n    int *da, *db;\n    checkCudaErrors(cudaMalloc((void **)&amp;da, N*sizeof(int)));\n    checkCudaErrors(cudaMalloc((void **)&amp;db, N*sizeof(int)));\n    checkCudaErrors(cudaMemcpy(da, ha, N*sizeof(int), cudaMemcpyHostToDevice));\n    dim3 mygrid(N/10, 10);\n    add&lt;&lt;&lt;mygrid, 1&gt;&gt;&gt;(da, db);\n    checkCudaErrors(cudaMemcpy(hb, db, N*sizeof(int), cudaMemcpyDeviceToHost));\n    max_value[0] = hb[0];\n    int i;\n    for (i = 0; i &lt; N; i++) {\n        if (hb[i] &gt; max_value[0]) {\n            max_value[0] = hb[i];\n            max_value[1] = i;\n        }\n    }\n    printf(\"max_value[0] = %d, max_value[1] = %d\\n\", max_value[0], max_value[1]);\n    cudaError_t error = cudaGetLastError();\n    if(error != cudaSuccess) {\n        printf(\"CUDA error: %s\\n\", cudaGetErrorString(error));\n        getchar();\n        exit(-1);\n    }\n    return 0;\n}\n$ nvcc -arch=sm_20 -o t363 t363.cu\nnvcc warning : The 'compute_20', 'sm_20', and 'sm_21' architectures are deprecated, and may be removed in a future release (Use -Wno-deprecated-gpu-targets to suppress warning).\n$ ./t363\nDevice count: 4\nmax_value[0] = 139998, max_value[1] = 69999\n$\n</code></pre>\n\n<p>Notes:</p>\n\n<p>If you ran your original code on a cc3.0 or higher device, it should not throw that error.  Newer CUDA devices raised the 1D grid limit to 2^31-1.  But if you wanted to exceed that number of blocks (around 2B) then you would again have to go to a multidimensional grid.</p>\n\n<p>cc2.0 devices are deprecated in CUDA 8, and support for them is being dropped from the upcoming CUDA 9 release.</p>\n"}], "owner": {"reputation": 11612, "user_id": 266068, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/wzczi.png?s=128&g=1", "display_name": "Panos Kal.", "link": "https://stackoverflow.com/users/266068/panos-kal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 45089675, "answer_count": 1, "score": 2, "last_activity_date": 1531886075, "creation_date": 1499885533, "last_edit_date": 1531886075, "question_id": 45065487, "link": "https://stackoverflow.com/questions/45065487/invalid-configuration-argument-for-thread-block-greater-than-16bit", "title": "Invalid configuration argument for thread block greater than 16bit", "body": "<p>This code works fine: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define N 1000 // &lt;-- Works for values &lt; 2^16\n\n__global__\nvoid add(int *a, int *b) {\n    int i = blockIdx.x;\n    if (i&lt;N) {\n        b[i] = 2*a[i];\n    }\n}\nint main() {\n    int max_value[2];\n    int ha[N], hb[N];\n    int *da, *db;\n    cudaMalloc((void **)&amp;da, N*sizeof(int));\n    cudaMalloc((void **)&amp;db, N*sizeof(int));\n    for (int i = 0; i&lt;N; ++i) {\n        ha[i] = i;\n    }\n    cudaMemcpy(da, ha, N*sizeof(int), cudaMemcpyHostToDevice);\n    add&lt;&lt;&lt;N, 1&gt;&gt;&gt;(da, db);\n    cudaMemcpy(hb, db, N*sizeof(int), cudaMemcpyDeviceToHost);\n    max_value[0] = hb[0];\n    int i;\n    for (i = 0; i &lt; N; i++) {\n        if (hb[i] &gt; max_value[0]) {\n            max_value[0] = hb[i];\n            max_value[1] = i;\n        }\n    }\n    cudaFree(da);\n    cudaFree(db);\n    printf(\"Max number %d, from value:%d \\n\", max_value[0], max_value[1]);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>But <strong>when I change the number <code>N</code> (items in the array) from 1000 to >(2<sup>16</sup>)-1</strong> the program crashes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yscdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yscdn.png\" alt=\"enter image description here\"></a></p>\n\n<p>I thought it was an overflow on host, so I moved the array declaration of <code>ha</code> and <code>hb</code> to <code>BSS segment</code> and changed <code>N</code> to 1 million.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define N 1000000 // &lt;----\n\n__global__\nvoid add(int *a, int *b) {\n    int i = blockIdx.x;\n    if (i&lt;N) {\n        b[i] = 2*a[i];\n    }\n}\nstatic int ha[N]; // &lt;----\nstatic int hb[N]; // &lt;----\nint main() {\n    int max_value[2];\n    // int ha[N], hb[N];\n    int *da, *db;\n    cudaMalloc((void **)&amp;da, N*sizeof(int));\n    cudaMalloc((void **)&amp;db, N*sizeof(int));\n    for (int i = 0; i&lt;N; ++i) {\n        ha[i] = i;\n    }\n    cudaMemcpy(da, ha, N*sizeof(int), cudaMemcpyHostToDevice);\n    add&lt;&lt;&lt;N, 1&gt;&gt;&gt;(da, db);\n    cudaMemcpy(hb, db, N*sizeof(int), cudaMemcpyDeviceToHost);\n    max_value[0] = hb[0];\n    int i;\n    for (i = 0; i &lt; N; i++) {\n        if (hb[i] &gt; max_value[0]) {\n            max_value[0] = hb[i];\n            max_value[1] = i;\n        }\n    }\n    cudaFree(da);\n    cudaFree(db);\n    printf(\"Max number %d, from value:%d \\n\", max_value[0], max_value[1]);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Now I don't get an error but the <code>hb</code> <strong>array is empty</strong>.<br>\nWhats wrong with my code? <br>\nHow can I allocate big arrays to device and get a valid result?</p>\n\n<blockquote>\n  <p>UPDATE: I've inserted the code for error checking, <br> the error I'm getting is -> <em>\"Invalid configuration argument\"</em>. <br>The updated code is:</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n#include &lt;thrust/system_error.h&gt;\n#include &lt;thrust/system/cuda/error.h&gt;\n#include &lt;sstream&gt;\nconst int N = 70000;\n\n#define checkCudaErrors(error) {\\\n    if (error != cudaSuccess) {\\\n        printf(\"CUDA Error - %s:%d: '%s'\\n\",__FILE__,__LINE__,cudaGetErrorString(error));\\\n        exit(1);\\\n        }\\\n}\\\n\n__global__\nvoid add(int *a, int *b) {\n    int i = blockIdx.x;\n    if (i&lt;N) {\n        b[i] = 2*a[i];\n    }\n}\nstatic int ha[N];\nstatic int hb[N];\nint main() {\n    // int ha[N], hb[N];\n    int max_value[2];\n\n    int deviceCount = 0;\n    cudaGetDeviceCount(&amp;deviceCount);\n    cudaError_t err=cudaDeviceReset();\n    if(err!=cudaSuccess){printf(\"%s in %s at line %d\\n\",cudaGetErrorString(err),__FILE__,__LINE__);}\n    printf(\"Device count: %d \\n\", deviceCount);\n\n    for (int i = 0; i&lt;N; ++i) { ha[i] = i; }\n    int *da, *db;\n    checkCudaErrors(cudaMalloc((void **)&amp;da, N*sizeof(int)));\n    checkCudaErrors(cudaMalloc((void **)&amp;db, N*sizeof(int)));\n    checkCudaErrors(cudaMemcpy(da, ha, N*sizeof(int), cudaMemcpyHostToDevice));\n    add&lt;&lt;&lt;N, 1&gt;&gt;&gt;(da, db);  // &lt;--- Invalid configuration error\n    checkCudaErrors(cudaMemcpy(hb, db, N*sizeof(int), cudaMemcpyDeviceToHost));\n    max_value[0] = hb[0];\n    int i;\n    for (i = 0; i &lt; N; i++) {\n        if (hb[i] &gt; max_value[0]) {\n            max_value[0] = hb[i];\n            max_value[1] = i;\n        }\n    }\n    cudaError_t error = cudaGetLastError();     \n    if(error != cudaSuccess) {\n        printf(\"CUDA error: %s\\n\", cudaGetErrorString(error));\n        getchar();\n        exit(-1);\n    }\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>The device is a GeForce GTX 470 and I'm compiling using <br>\n  <strong><em>nvcc -o foo new.cu</em></strong></p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/rUVPj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rUVPj.png\" alt=\"GeForce GTX 470\"></a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 6, "creation_date": 1499885377, "post_id": 45065424, "comment_id": 77104157, "body": "Your second sample does something different to the first. So asking about performance doesn&#39;t make sense. Did you mean <code>MyObj b(a);</code>?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1499885621, "post_id": 45065424, "comment_id": 77104300, "body": "And if it is <code>MyObj b(a);</code> you could&#39;ve done that in C++98."}, {"owner": {"reputation": 35, "user_id": 1739339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lFjnd.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1739339/stuart"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1499895394, "post_id": 45065424, "comment_id": 77109151, "body": "Yup, sorry, I mistyped it. I&#39;ll fix it. But, I guess you answered my question also. Hmm...I must have misunderstood something in C++98. I thought that wasn&#39;t possible prior to 11."}], "owner": {"reputation": 35, "user_id": 1739339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lFjnd.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/1739339/stuart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1499885507, "answer_count": 0, "score": 0, "last_activity_date": 1499895444, "creation_date": 1499885261, "last_edit_date": 1499895444, "question_id": 45065424, "link": "https://stackoverflow.com/questions/45065424/c-performance-based-on-object-creation", "closed_reason": "Duplicate", "title": "c++ performance based on object creation", "body": "<p>I work with legacy C++ that was originally written to compile with C++98. But, we compile now with C++11 (yay!) and try to use the newer compiler features when putting in new or modifying old code. This is a common thing seen in our code:</p>\n\n<pre><code>MyObj a = doCalc(); // some calculation result\nMyObj b = a; // copy a to b before modifying a\n</code></pre>\n\n<p>My question is this. If I change the above to take advantage of newer object creation techniques, am I making the code perform better? Is there any difference to the compiler? Like this:</p>\n\n<pre><code>MyObj b(a); // is this better for performance?\n</code></pre>\n"}, {"tags": ["c++", "git", "cmake", "git-submodules"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1499891935, "post_id": 45065290, "comment_id": 77107477, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44691109/in-cmake-how-to-create-targets-with-identical-names\">In CMake how to create targets with identical names?</a>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1499892794, "post_id": 45065290, "comment_id": 77107877, "body": "@Tsyvarev Not exactly a duplicate. Here it&#39;s about git submodules. The other question was about cmake subprojects. They are slightly different things."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1499895464, "post_id": 45065290, "comment_id": 77109178, "body": "@skypjack: This question just mention git submodules, but they are not main purpose of it. BTW, you have post very similar answer to the duplicate question."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1499895587, "post_id": 45065290, "comment_id": 77109225, "body": "@Tsyvarev Well, the same variable of cmake solves both the problems, even if they are part of different questions. So, yes, it makes perfectly sense to give similar answers indeed."}], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "edited": false, "score": 0, "creation_date": 1500804593, "post_id": 45066271, "comment_id": 77490712, "body": "I have accepted this answer because it solves the problem I have submitted. But I have to admit that I used cmake also because it allows people to build projects for their IDE (Xcode for example). And using duplicate targets seems to forbid this so I ended up not using git submodules and I build and test my libraries separately. I just needed to define a FindProjectA.cmake to handle the dependency in &#39;ProjectB&#39;."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "edited": false, "score": 0, "creation_date": 1500805139, "post_id": 45066271, "comment_id": 77490836, "body": "@PierreMarchand Yeah, to allow duplicate custom targets has some limitations that are mentioned in the documentation. Unfortunately it doesn&#39;t depend on cmake, instead it&#39;s due to the underlying tools used on the different platforms. There is no clean, up and running solution here but the handwritten workarounds like you did if you cannot deal with those limitations."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 0, "last_activity_date": 1499888934, "last_edit_date": 1499888934, "creation_date": 1499888596, "answer_id": 45066271, "question_id": 45065290, "link": "https://stackoverflow.com/questions/45065290/cmake-several-projects-using-custom-target-to-make-test/45066271#45066271", "title": "Cmake : several projects using custom target to make test", "body": "<blockquote>\n  <p>So, is there a way to define a custom target locally to a cmake project for example ? or is there a clever way to do what I would like to do ? (which seems quite natural)</p>\n</blockquote>\n\n<p>For you are working with custom targets, probably <a href=\"https://cmake.org/cmake/help/v3.9/prop_gbl/ALLOW_DUPLICATE_CUSTOM_TARGETS.html\" rel=\"nofollow noreferrer\"><code>ALLOW_DUPLICATE_CUSTOM_TARGETS</code></a> can do the job.<br>\nThe documentation is quite clear indeed:</p>\n\n<blockquote>\n  <p>Allow duplicate custom targets to be created.</p>\n</blockquote>\n\n<p>If you go a bit further you find that:</p>\n\n<blockquote>\n  <p>The property allows multiple <code>add_custom_target</code> command calls in different directories to specify the same target name.</p>\n</blockquote>\n\n<p>Unfortunately it has also some limitations:</p>\n\n<blockquote>\n  <p>[...] setting this property will cause non-Makefile generators to produce an error and refuse to generate the project.</p>\n</blockquote>\n\n<p>Read carefully the documentation (see the link above) to know if it's suitable for your purposes.</p>\n"}, {"tags": [], "owner": {"reputation": 10275, "user_id": 1202136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9c7ff368c2bf18f714e8bdb6acf28c6a?s=128&d=identicon&r=PG", "display_name": "user1202136", "link": "https://stackoverflow.com/users/1202136/user1202136"}, "is_accepted": false, "score": 0, "last_activity_date": 1547070582, "creation_date": 1547070582, "answer_id": 54118877, "question_id": 45065290, "link": "https://stackoverflow.com/questions/45065290/cmake-several-projects-using-custom-target-to-make-test/54118877#54118877", "title": "Cmake : several projects using custom target to make test", "body": "<p>I think I found a better solution. Let us assume:</p>\n\n<ol>\n<li>You have control of the <code>CMakeLists.txt</code> file in both projects.</li>\n<li>The shared target is expected to be configured identically.</li>\n</ol>\n\n<p>Then you can do something like:</p>\n\n<pre><code>if(NOT TARGET build-tests)\n    add_custom_target(build-tests ALL)\nendif()\n\nadd_custom_target(build-tests.ProjectA ...)\nadd_dependencies(build-tests build-tests.ProjectA)\n</code></pre>\n\n<p>The <code>build-tests</code> target will essentially become the union of each project's <code>build-tests</code> target.</p>\n"}], "owner": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 1, "accepted_answer_id": 45066271, "answer_count": 2, "score": 2, "last_activity_date": 1547070582, "creation_date": 1499884766, "question_id": 45065290, "link": "https://stackoverflow.com/questions/45065290/cmake-several-projects-using-custom-target-to-make-test", "title": "Cmake : several projects using custom target to make test", "body": "<p>Let say I have a library <code>ProjectA</code> where I defined a custom target <code>build-tests</code> in my CMakefile to build my tests such that I can do <code>make test</code> afterwards. (see <a href=\"https://stackoverflow.com/questions/733475/cmake-ctest-make-test-doesnt-build-tests\">CMake &amp; CTest : make test doesn&#39;t build tests</a>).</p>\n\n<p>Then, I have a second library <code>ProjectB</code> that depends on <code>ProjectA</code>. I use git submodule such that I can do <code>add_subdirectory(ProjectA)</code> in <code>ProjectB</code>'s CMakefile. The problem is that, I would like to do same thing: define a custom target <code>build-tests</code> to build the tests of <code>ProjectB</code> but I cannot because it has already been defined in <code>ProjectA</code>...</p>\n\n<p>My problem is similar to <a href=\"https://stackoverflow.com/questions/42978414/how-to-handle-a-transitive-dependency-conflict-using-git-submodules-and-cmake\">How to handle a transitive dependency conflict using Git submodules and CMake?</a> and <a href=\"https://stackoverflow.com/questions/43761594/cmake-and-using-git-submodule-for-dependence-projects?noredirect=1&amp;lq=1\">CMake and using git-submodule for dependence projects</a> but they can define one target to avoid this while I would like to be able to do <code>make build-tests</code> in <code>ProjectA</code> AND in <code>ProjectB</code>. </p>\n\n<p>So, is there a way to define a custom target locally to a cmake project for example ? or is there a clever way to do what I would like to do ? (which seems quite natural)</p>\n"}, {"tags": ["c++", "boost", "graph", "max", "flow"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499886671, "post_id": 45065036, "comment_id": 77104841, "body": "Can you show us the declaration of <code>new_src</code> and <code>new_sink</code> please? We are missing a fair bit of context in order to be able to help."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1499894151, "post_id": 45065036, "comment_id": 77108544, "body": "Gosh. You could just show the code that doesn&#39;t compile. This is <i>bound</i> to be one to the v-v-FAQ and it would be so convenient if we could just show you"}, {"owner": {"reputation": 163, "user_id": 1470455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420fc1513d0f8ae76205b981d29b39aa?s=128&d=identicon&r=PG", "display_name": "malger", "link": "https://stackoverflow.com/users/1470455/malger"}, "edited": false, "score": 0, "creation_date": 1499932002, "post_id": 45065036, "comment_id": 77121384, "body": "i added the code"}, {"owner": {"reputation": 163, "user_id": 1470455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420fc1513d0f8ae76205b981d29b39aa?s=128&d=identicon&r=PG", "display_name": "malger", "link": "https://stackoverflow.com/users/1470455/malger"}, "edited": false, "score": 0, "creation_date": 1499954390, "post_id": 45065036, "comment_id": 77138300, "body": "I did a bit of research and found out that directed_graph class template seems to be incompatible with the maximum flow algorithms. Can someone confirm that? if i use the adjacency_list template compilation does not fail"}, {"owner": {"reputation": 163, "user_id": 1470455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420fc1513d0f8ae76205b981d29b39aa?s=128&d=identicon&r=PG", "display_name": "malger", "link": "https://stackoverflow.com/users/1470455/malger"}, "edited": false, "score": 0, "creation_date": 1500301545, "post_id": 45065036, "comment_id": 77262615, "body": "also when i run the push_relabel_max_flow function i get segmentation faults, what is wrong with my code, what else do i need to provide for the algorithm to work?"}], "owner": {"reputation": 163, "user_id": 1470455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/420fc1513d0f8ae76205b981d29b39aa?s=128&d=identicon&r=PG", "display_name": "malger", "link": "https://stackoverflow.com/users/1470455/malger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499957397, "creation_date": 1499883830, "last_edit_date": 1499957397, "question_id": 45065036, "link": "https://stackoverflow.com/questions/45065036/boost-maximum-flow-doesnt-compile-when-template-directedgraph-is-used", "title": "boost maximum flow doesn&#39;t compile when template directedgraph is used?", "body": "<p>I want to calc a max flow with the boost graph libary.\nUPDATE Due to request here is the full code:+</p>\n\n<h3>CPP:</h3>  \n\n<pre><code>#include &lt;iostream&gt;\n#include \"PPINetwork.h\"\n#include &lt;boost/graph/kruskal_min_spanning_tree.hpp&gt;\n#include &lt;boost/graph/graphviz.hpp&gt;\n#include &lt;boost/graph/depth_first_search.hpp&gt;\n#include &lt;boost/graph/dijkstra_shortest_paths.hpp&gt;\n#include &lt;boost/graph/read_dimacs.hpp&gt;\n#include &lt;boost/graph/boykov_kolmogorov_max_flow.hpp&gt;\n#include &lt;boost/graph/push_relabel_max_flow.hpp&gt;\n\n#include \"interactions.h\"\n\n\nusing namespace std;\n\nvoid PPINetwork::addEdge(string &amp;p1, string &amp;p2, double w){\n Vertex s,e;\n if(g.vertex(p1)==g.null_vertex()){\n   s = g.add_vertex(p1);\n   g.graph()[s].name = p1;\n }\n else\n   s = g.vertex(p1);\n if(g.vertex(p2)==g.null_vertex()){\n   e = g.add_vertex(p2);\n   g.graph()[e].name = p2;\n }\n else\n   e = g.vertex(p2);\n\n g.graph().add_edge(s,e,{1-w,w});\n\n}\n\nvoid PPINetwork::readNetwork(ifstream &amp;ppin_file) {\n\n // Create a graph object\n string line;\n std::getline(ppin_file, line); //skip header\n while (std::getline(ppin_file, line)) {\n std::istringstream iss(line);\n string p1, p2;\n float w;\n if (!(iss &gt;&gt; p1 &gt;&gt; p2 &gt;&gt; w)) {\n  throw invalid_argument(\"line has wrong formaat\\n\" + line);\n } // error\n addEdge(p1,p2,w);\n}\ncout &lt;&lt; \"read \" &lt;&lt; boost::num_edges(g) &lt;&lt; \" Edges\" &lt;&lt; std::endl;\n}\n\nPPINetwork::PPINetwork(ifstream &amp;file) {\n readNetwork(file);\n}\n\ndouble PPINetwork::maxflow(vector&lt;string&gt; srcs,vector&lt;string&gt; sinks) {\n//add common src and sink\n vector&lt;string&gt; src_verticies;\n vector&lt;string&gt; sink_verticies;\n //filter out non existing verticies\n for (string s: srcs) {\n   Vertex src_v = g.vertex(s);\n   if (src_v != g.null_vertex())\n    src_verticies.push_back(s);\n   }\n  for (string s: sinks) {\n   Vertex sink_v = g.vertex(s);\n  if (sink_v != g.null_vertex())\n   sink_verticies.push_back(s);\n }\n double max_double = std::numeric_limits&lt;double&gt;::max();\n Vertex new_src = g.add_vertex(\"new_src\");\n Vertex new_sink = g.add_vertex(\"new_sink\");\n string ssrc = \"new_src\";\n string ssink = \"new_sink\";\n // add common sink and src\n for (string &amp;s : src_verticies) {\n  addEdge(ssrc, s, max_double);\n }\n for (string &amp;s : src_verticies) {\n  addEdge(s, ssink, max_double);\n }\n auto capacity = boost::get(boost::edge_capacity, g);\n auto reverse  = boost::get(boost::edge_reverse, g);\n auto residcap = boost::get(boost::edge_residual_capacity, g);\n auto indexmap = boost::get(boost::vertex_index, g);\n\n double flow = boost::push_relabel_max_flow(g, new_src, new_sink,capacity,residcap, reverse, indexmap);\n}\n\nPPINetwork::PPINetwork() {\n\n}\n</code></pre>\n\n<h3>H-File:</h3>  \n\n<pre><code>#ifndef UNTITLED_PPINETWORK_H\n#define UNTITLED_PPINETWORK_H\n\n#include &lt;fstream&gt;\n#include &lt;boost/graph/properties.hpp&gt;\n#include &lt;boost/graph/undirected_graph.hpp&gt;\n#include &lt;boost/graph/directed_graph.hpp&gt;\n#include &lt;boost/graph/labeled_graph.hpp&gt;\n#include &lt;vector&gt;\n\n\nusing namespace std;\nstruct VertexProperty\n{\n string name;\n};\n typedef boost::adjacency_list_traits&lt;boost::vecS, boost::vecS, boost::directedS&gt; Traits;\n typedef boost::property&lt;boost::edge_reverse_t, Traits::edge_descriptor&gt; rev;\n typedef boost::property&lt;boost::edge_weight_t, double,\n  boost::property&lt;boost::edge_capacity_t, double,\n   boost::property&lt;boost::edge_residual_capacity_t, long,\n    rev &gt; &gt; &gt; EdgeDesc;\n typedef boost::labeled_graph&lt;boost::directed_graph&lt;VertexProperty,EdgeDesc&gt;,std::string&gt; diGraph;\n typedef unordered_map&lt;string,unordered_map&lt;string,double&gt;&gt; ssf_map;\n typedef  boost::graph_traits&lt;diGraph&gt;::vertex_descriptor Vertex;\n typedef boost::graph_traits &lt; diGraph &gt;::edge_descriptor Edge;\n\nclass PPINetwork {\n public:\n  PPINetwork();\n  PPINetwork(ifstream &amp;ppin_file);\n  void addEdge(string &amp;p1, string &amp;p2, double w);\n  double maxflow(vector&lt;string&gt; srcs,vector&lt;string&gt; sinks);\n\n\n private:\n  void readNetwork(ifstream &amp;ppin_file);\n diGraph g;\n};\n\n#endif //UNTITLED_PPINETWORK_H\n</code></pre>\n\n<p>When i add the line:</p>\n\n<pre><code>double flow = boost::push_relabel_max_flow(g, new_src,new_sink,capacity,residcap, reverse, indexmap);}\n</code></pre>\n\n<p>it doesn't compile although i provided all the necessary arguments. I get long unreadable error message, but i think the problem is related to the graph type. Errors look like this:</p>\n\n<blockquote>\n  <p>error: conversion from 'boost::detail::edge_desc_impl boost::directed_tag, long long unsigned int' to non-scalar type \n   boost::detail::push_relabel boost::labeled_graph boost::directed_graph VertexProperty.......</p>\n</blockquote>\n\n<p>had to remove the &lt;,> signs to make stackoverflows cite function accept the error</p>\n"}, {"tags": ["c#", "c++", "windows", "filesystemwatcher", "wdk"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499885130, "post_id": 45065028, "comment_id": 77104028, "body": "I guess you could use dll injection, and monitor calls to <code>fclose()</code>. But if it&#39;s your own process, what&#39;s preventing you from outputing file completions events to stdout?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1499885184, "post_id": 45065028, "comment_id": 77104059, "body": "I know of no way to do this in the win32 API. Sysinternals has a few neat tools that let you snoop who has what handles are open, so it&#39;s possible  to poll whether the the file handle is still open. The thing is I think you&#39;ll have to dive into the barely documented space below win32 to do it. But if the file has been opened with exclusive access you could poll the file, periodically trying to open it. If the other process still has the file locked, it won&#39;t open."}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 8089332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1a20c63e0888ffcb2569928c15e97e?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/8089332/vlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1529472169, "last_edit_date": 1529472169, "creation_date": 1499927153, "answer_id": 45072892, "question_id": 45065028, "link": "https://stackoverflow.com/questions/45065028/howto-monitoring-file-access-by-another-process-in-windows/45072892#45072892", "title": "HOWTO: Monitoring file access by another process in Windows?", "body": "<p>What you might be interested in is sys internals procmon tool. Among other functionality it monitors file access giving you a lot of details.\nUnfortunately sources are not available but here's <a href=\"https://forum.sysinternals.com/topic8038_page1.html\" rel=\"nofollow noreferrer\">a thread about previous version</a> (filemon) started by somebody with an issue similar to yours.</p>\n\n<p>Also you may want to look into <a href=\"http://yaprocmon.sourceforge.net/\" rel=\"nofollow noreferrer\">open source alternative</a>, it may have the code you are looking for.</p>\n\n<p>Alternatively you can <a href=\"https://blogs.msdn.microsoft.com/carloc/2008/10/31/how-to-automate-process-monitor/\" rel=\"nofollow noreferrer\">use ProcMon as a monitor tool</a> and parse its output. Using built in filter functionality you'll be able to limit your log file entries to specific folder and type/data of file access event.</p>\n\n<hr>\n\n<p>[<strong>Update</strong>]</p>\n\n<p>Recently I had a chance to revisit this issue for one of my projects, what I found is that call </p>\n\n<pre><code>File.Open(filePath, FileMode.Open, FileAccess.Read, FileShare.None)\n</code></pre>\n\n<p>will throw IOException if file is still used by another process. </p>\n\n<p>So what you can do is after you get Created notification from FileSystemWatcher call File.Open every couple of seconds, once you stop getting exception you know that another process is done with the file.</p>\n"}], "owner": {"reputation": 1125, "user_id": 442806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2947e508ad7300f7005464056458762d?s=128&d=identicon&r=PG", "display_name": "Sam Carleton", "link": "https://stackoverflow.com/users/442806/sam-carleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 817, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1529472169, "creation_date": 1499883794, "last_edit_date": 1499893203, "question_id": 45065028, "link": "https://stackoverflow.com/questions/45065028/howto-monitoring-file-access-by-another-process-in-windows", "title": "HOWTO: Monitoring file access by another process in Windows?", "body": "<p>I am working on a program that processes image files.  The problem I am running into is some of the images are very large and I don't know when the copy process is done.  Right now the code is written in C# and is using the FileSystemWatcher class to monitor the files.  The only problem is there is no event for when another process is DONE with the file.  </p>\n\n<p>The current logic is to watch for created and changed events and than wait 5 seconds in hopes that by that point in time the copy process is done.  While this works on my development machine, unfortunately customers report issues with the whole process. </p>\n\n<p>Years ago when I wrote this code I did see that at a lower level, I think it was part of the DDK SDK or something, it is possible to find out a lot more information about how another program is accessing a file.</p>\n\n<p>Can anyone speak into this and point me in the right direction?  I do expect it to be C++ code, not C# code.</p>\n\n<hr>\n\n<p>To answer some questions below: </p>\n\n<p>The issue is that OTHER processes are copy images into directories that my program is monitoring.  Once the images are fully copied my program needs to start processing the images as soon as possible.  The issue is that many images, at times hundreds of images, will be copied at one time. Since each image needs to be processed as fast as possible, the system needs to know as soon as possible that the image is fully copied and can be processed.</p>\n\n<p>I am fully aware there is NO way to do what I want to do via the WinSDK, but I am 99.9% sure it IS possible via the WinDDK, maybe I have the name wrong, I Googled that and got \"Windows Driver Kit (WDK)\".  I am pretty sure the way SysInternals pulls off all their cool tricks is by using WDK level functions.</p>\n"}, {"tags": ["c++", "pointers", "winapi", "parameters"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 3, "creation_date": 1499883635, "post_id": 45064909, "comment_id": 77103191, "body": "Isn&#39;t this a C API? Where references do not exist?"}, {"owner": {"reputation": 420, "user_id": 7221943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SmgXq.png?s=128&g=1", "display_name": "sharyex", "link": "https://stackoverflow.com/users/7221943/sharyex"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499883741, "post_id": 45064909, "comment_id": 77103235, "body": "Well that would explain everything, didn&#39;t think of it since all the documentation examples were in C++."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499883858, "post_id": 45064909, "comment_id": 77103291, "body": "It is indeed a little weird that Microsoft has most of their low-level APIs as pure C, but seemingly refuse to acknowledge the existence of the language in their modern documentation."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1499883884, "post_id": 45064909, "comment_id": 77103305, "body": "The documentation for RmStartSession clearly states that the first parameter is an <code>out</code> value.  So why are you passing a null pointer?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1499883968, "post_id": 45064909, "comment_id": 77103344, "body": "There is no way a pointer to T can be modified and returned to the caller.  Try it yourself with your own code.  To modify a pointer, a pointer to the pointer would be passed."}, {"owner": {"reputation": 420, "user_id": 7221943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SmgXq.png?s=128&g=1", "display_name": "sharyex", "link": "https://stackoverflow.com/users/7221943/sharyex"}, "edited": false, "score": 0, "creation_date": 1499883994, "post_id": 45064909, "comment_id": 77103361, "body": "Yeah figured it out as soon as I finished my reply :)."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1499884261, "post_id": 45064909, "comment_id": 77103502, "body": "This is pretty much a non question. Stack Overflow is full of questions like this where nullptr is passed to a function that expects a valid pointer."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1499884446, "post_id": 45064909, "comment_id": 77103636, "body": "@David Heffernan I mildly disagree, the question is clumsily written, but the use of mutable reference instead of pointers for return value parameters when designing an API is a legit question in my mind."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499884527, "post_id": 45064909, "comment_id": 77103687, "body": "@Frank there&#39;s no question in that comment of yours."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499956540, "post_id": 45064909, "comment_id": 77140028, "body": "@Frank: <i>&quot;Microsoft has most of their low-level APIs as pure C&quot;</i> - The <b>entire</b> Windows API surface is exposed through C interfaces. There are a few concessions to C++ developers (like the GDI+ wrappers, or C++ interface declarations generated by the MIDL compiler). But those are simply higher-level abstractions over the C API."}], "answers": [{"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 1, "last_activity_date": 1499885344, "last_edit_date": 1499885344, "creation_date": 1499884253, "answer_id": 45065163, "question_id": 45064909, "link": "https://stackoverflow.com/questions/45064909/winapi-confusing-function-parameters/45065163#45065163", "title": "WinAPI confusing function parameters", "body": "<p>There are two answers to this question:</p>\n\n<ol>\n<li><p>This is a C api, so references were not available to the API writers.</p></li>\n<li><p>There is a school of thoughts that using references for output value parameters is bad API design, and pointers should always be used, even if it means that passing a <code>nullptr</code> would be a disaster.</p></li>\n</ol>\n\n<p>The idea is that reference-based output parameters are really confusing at the call site. Look at the following code:</p>\n\n<pre><code>void foo() {\n   my_struct val;\n   bar(val);\n}\n\nvoid foo_alt() {\n   my_struct val;\n   bar_alt(&amp;val);\n}\n</code></pre>\n\n<p>At first glance, one would not expect <code>bar</code> to modify <code>val</code> in the first example, but one would suspect it in the second.</p>\n\n<p>Understanding what a function does by only looking at the call site is fundamental to self-documenting code, and mutable references often break that (unless it's really clear in the function name).</p>\n"}], "owner": {"reputation": 420, "user_id": 7221943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SmgXq.png?s=128&g=1", "display_name": "sharyex", "link": "https://stackoverflow.com/users/7221943/sharyex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 45065163, "answer_count": 1, "score": -1, "last_activity_date": 1499885344, "creation_date": 1499883390, "question_id": 45064909, "link": "https://stackoverflow.com/questions/45064909/winapi-confusing-function-parameters", "title": "WinAPI confusing function parameters", "body": "<p>The API reference for the function in question: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa373668(v=vs.85).aspx\" rel=\"nofollow noreferrer\">RmStartSession</a>.</p>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;RestartManager.h&gt;\n\n/*\nDWORD WINAPI\nRmStartSession(\n    _Out_ DWORD *pSessionHandle,\n    _Reserved_ DWORD dwSessionFlags,\n    _Out_writes_(CCH_RM_SESSION_KEY + 1) WCHAR strSessionKey[]);\n*/\n\nint main(int /*argc*/, char** /*argv*/)\n{\n    WCHAR sessionKey[CCH_RM_SESSION_KEY + 1];\n\n    // 1.\n    DWORD *sessionOne = nullptr;\n    auto returnCodeOne = RmStartSession(sessionOne, NULL, sessionKey); // = 160 ERROR_BAD_ARGUMENTS\n\n    // 2.\n    DWORD sessionTwo = 0xFFFFFFF;\n    DWORD *pSessionHandleTwo = &amp;sessionTwo;\n    auto returnCodeTwo = RmStartSession(pSessionHandleTwo, NULL, sessionKey); // = 0 ERROR_SUCCESS\n\n    // 3.\n    DWORD sessionThree = 0xFFFFFFF;\n    auto returnCodeThree = RmStartSession(&amp;sessionThree, NULL, sessionKey); // = 0 ERROR_SUCCESS\n\n    return 0;\n}  \n</code></pre>\n\n<p>Took me a while to realize why <code>1.</code> was giving me a <code>BAD_ARGUMENTS</code> error, since all of the variations above compiled fine and were legit language constructs.  </p>\n\n<p>The problem is that the function actually needs a pointer to a valid object and just uses that pointer to modify the object, does not modify the pointer itself. So if the pointer is <code>nullptr</code> then there's no object to modify, the function does not allocate an object itself.<br>\n<em>(Please correct me if my understanding above is wrong)</em></p>\n\n<p>That being said, why wasn't the function defined to request a reference to a <code>DWORD</code> to make it clear that it cannot be null, is there a specific reason to use a pointer here?<br>\nWhat am I missing?</p>\n"}, {"tags": ["c++", "makefile", "header"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1499882565, "post_id": 45064573, "comment_id": 77102609, "body": "You didn&#39;t add any dependencies for header files, so why should <code>make</code> decide to recompile your source files?"}], "answers": [{"comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1499906806, "post_id": 45064670, "comment_id": 77112484, "body": "That will not work, Make will not rebuild the object files, it will simply rebuild the executable using the old object files, which will change nothing."}], "tags": [], "owner": {"reputation": 131, "user_id": 2965918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e14776b5de7269a1f6513a020fbd7fd?s=128&d=identicon&r=PG", "display_name": "architrex", "link": "https://stackoverflow.com/users/2965918/architrex"}, "is_accepted": false, "score": 0, "last_activity_date": 1499882418, "creation_date": 1499882418, "answer_id": 45064670, "question_id": 45064573, "link": "https://stackoverflow.com/questions/45064573/makefile-ignoring-headers-modifications/45064670#45064670", "title": "Makefile ignoring headers modifications", "body": "<p>You have to explicitly tell <code>make</code> that your targets depend on the header files. </p>\n\n<p>There are many automated ways to do this, but you can also simply just add the header files to your <code>SOURCES</code> list (which right now only contains <code>.cpp</code> files).</p>\n"}, {"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 0, "last_activity_date": 1499908687, "creation_date": 1499908687, "answer_id": 45069926, "question_id": 45064573, "link": "https://stackoverflow.com/questions/45064573/makefile-ignoring-headers-modifications/45069926#45069926", "title": "Makefile ignoring headers modifications", "body": "<p>The simplest way is to make <em>all</em> header files prerequisites of <em>each</em> object file:</p>\n\n<pre><code>INCDIR := include\nHEADERS := $(notdir $(wildcard $(INCDIR)/*.h))\n\n$(OBJDIR)/%.o: $(SRCDIR)/%.$(SRCEXT) $(HEADERS)\n    ...\n</code></pre>\n\n<p>This is <em>crude but effective.</em> It will cause Make to recompile <em>all</em> object files whenever <em>any</em> header file has been changed. This is overkill, and there are more subtle methods that avoid all of that unnecessary work, but you must understand this much before you attempt them.</p>\n"}], "owner": {"reputation": 33, "user_id": 7985205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WfXl.jpg?s=128&g=1", "display_name": "SarahHime", "link": "https://stackoverflow.com/users/7985205/sarahhime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 0, "closed_date": 1499912331, "answer_count": 2, "score": -1, "last_activity_date": 1499908687, "creation_date": 1499882072, "question_id": 45064573, "link": "https://stackoverflow.com/questions/45064573/makefile-ignoring-headers-modifications", "closed_reason": "Duplicate", "title": "Makefile ignoring headers modifications", "body": "<p>I have a project with several folders:</p>\n\n<p><code>Project\n  |_ include/\n  |     '- Eigen/\n  |_ obj/\n  |_ src/\n  |_ makefile</code> </p>\n\n<p>All <code>.cpp</code> files are in <code>src/</code> and have dependencies with several <code>.hpp</code>  files in <code>include/</code> and with the Eigen library too.</p>\n\n<p>Now, everytime I edit a source file I can use the make command, however when I change a header file it tells me that <code>all</code> is up to date.</p>\n\n<p>I've tried several examples that I found on similar questions and I've read some tutorials on makefiles but I cannot manage to make it work properly.</p>\n\n<p>Also every time it compiles, if a .cpp that uses the Eigen library was modified, it takes very very very long, like it is reading again through all Eigen headers.</p>\n\n<p>My makefile:</p>\n\n<pre><code>CC := g++\nSRCDIR := src\nOBJDIR := obj\nTARGET := main\n\nJPEG_LIB_DIR = /usr/local/lib\n\nSRCEXT := cpp\nSOURCES := $(shell find $(SRCDIR) -name *.$(SRCEXT))\nOBJECTS := $(SOURCES:$(SRCDIR)/%.$(SRCEXT)=$(OBJDIR)/%.o)\n\nCFLAGS := -W -Wall -g -rdynamic -std=c++11\nLIB += -pthread\nLIB += -ljpeg \nLFLAGS += -L$(JPEG_LIB_DIR)\nINC += -I include\n\n.PHONY: clean\n\nall: $(TARGET)\n\n$(TARGET): $(OBJECTS)\n    $(CC) $(LFLAGS) $^ $(LIB) -o $@\n\n$(OBJDIR)/%.o: $(SRCDIR)/%.$(SRCEXT)\n    @mkdir -p $(OBJDIR)\n    $(CC) $(INC) $(CFLAGS) -o $@ -c $&lt;\n\nclean:\n    $(RM) -r $(OBJDIR) $(TARGET)\n</code></pre>\n\n<p>(I've tried <a href=\"https://stackoverflow.com/questions/23451652/how-do-i-ensure-my-makefile-detects-changes-in-my-header-and-cpp-files\">this</a> and <a href=\"https://stackoverflow.com/questions/35676039/makefile-rebuild-with-modified-header-files\">that</a> but it won't even compile).</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499887067, "post_id": 45064275, "comment_id": 77105052, "body": "A subversive approach is to use <code>read(unsigned int in_one, unsigned int  value[1]</code>.  The calling code uses <code>unsigned v[1]; v[0] = foo(); read(in_one, v);</code> and <code>read()</code> uses <code>*value = ...</code>."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1499885425, "last_edit_date": 1499885425, "creation_date": 1499881235, "answer_id": 45064329, "question_id": 45064275, "link": "https://stackoverflow.com/questions/45064275/can-i-change-the-inputs-of-a-function-that-passes-reference-arguments-into-point/45064329#45064329", "title": "Can I change the inputs of a function that passes reference arguments into pointers and still have it work (C, C++)?", "body": "<p>What you want would probably work in practice, but is not really standard conforming (and depends upon the <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI</a> &amp; the <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling conventions</a>).</p>\n\n<p>I would recommend instead to code a trivial stub function (which calls the original one), e.g.</p>\n\n<pre><code>/// assume that `read` is declared like in your question (first declaration)\nextern \"C\" BOOL my_read(unsigned int in_one, unsigned int * value) {\n    return read(in_out, *value);\n}\n</code></pre>\n\n<p>(and tell matlab about <code>my_read</code>, not <code>read</code>) an optimizing compiler is likely to compile that in a single <code>jmp</code> machine instruction (which runs really fast).</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1499881807, "creation_date": 1499881807, "answer_id": 45064491, "question_id": 45064275, "link": "https://stackoverflow.com/questions/45064275/can-i-change-the-inputs-of-a-function-that-passes-reference-arguments-into-point/45064491#45064491", "title": "Can I change the inputs of a function that passes reference arguments into pointers and still have it work (C, C++)?", "body": "<blockquote>\n  <p>So assuming that I can somehow change the definition to match the header, would my pointer function above be a valid substitution?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>And you would simply pass <code>&amp;myInt</code> instead of <code>myInt</code> at the callsite.</p>\n\n<blockquote>\n  <p>And if I can't change the source code, is there a substitution that I could make that would be possible with C? Like a reference C-substitute that would still allow for the same definition?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>If MATLAB requires C calling convention and such, then you're stuck with C features (mostly).</p>\n\n<p>For what it's worth, I believe MATLAB is fine with C++; <a href=\"https://uk.mathworks.com/help/matlab/mex-library.html\" rel=\"nofollow noreferrer\">the documentation</a> refers to \"C/C++\" throughout (which, we must assume, they mean to be \"C and also C++\").</p>\n\n<p>So, looking at one final quote from your question:</p>\n\n<blockquote>\n  <p>But I'm running it via a MATLAB mex file, so it may have to be in C, not C++. Since references are a C++ only thing, someone suggested changing</p>\n</blockquote>\n\n<p>Stop. See whether it actually works as-is, first. Proceed from there.</p>\n"}], "owner": {"reputation": 21, "user_id": 4751055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fOuUZ.jpg?s=128&g=1", "display_name": "Mandeguz", "link": "https://stackoverflow.com/users/4751055/mandeguz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1499893260, "creation_date": 1499881001, "last_edit_date": 1499893260, "question_id": 45064275, "link": "https://stackoverflow.com/questions/45064275/can-i-change-the-inputs-of-a-function-that-passes-reference-arguments-into-point", "title": "Can I change the inputs of a function that passes reference arguments into pointers and still have it work (C, C++)?", "body": "<p>So I have this function prototype within a C++ header file I was given:</p>\n\n<pre><code>extern LIBRARY_API BOOL read(unsigned int in_one, unsigned int &amp; value);\n</code></pre>\n\n<p>But I'm running it via a MATLAB mex file, so it may have to be in C, not C++. Since references are a C++ only thing, someone suggested changing the function prototype into a pointer argument. Then I might have something like this:</p>\n\n<pre><code>extern LIBRARY_API BOOL read(unsigned int in_one, unsigned int * value);\n</code></pre>\n\n<p>And then in the mex file, I would make sure that I created <strong>unsigned int *value</strong> instead of <strong>unsigned int value</strong> and dereferenced it after running the read function.</p>\n\n<p>However, I'm worried that (1) I may be referencing/dereferencing one thing too many (or not enough), and (2) I won't be able to do this because I can't change the actual source code and changing the prototype will just cause a mismatch between instantiation and definition.</p>\n\n<p>So <em>assuming</em> that I can somehow change the definition to match the header, would my pointer function above be a valid substitution? And if I can't change the source code, is there a substitution that I could make that would be possible with C? Like a reference C-substitute that would still allow for the same definition?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 6, "creation_date": 1499881015, "post_id": 45064265, "comment_id": 77101666, "body": "Dereferencing generally does the opposite of getting an address."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 5, "creation_date": 1499881040, "post_id": 45064265, "comment_id": 77101684, "body": "A string literal is interpreted as a character array. Derefencing an array returns the first value."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1499881061, "post_id": 45064265, "comment_id": 77101703, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/13898535/what-is-the-effect-of-dereferencing-a-string-literal-in-c\" title=\"what is the effect of dereferencing a string literal in c\">stackoverflow.com/questions/13898535/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 5, "last_activity_date": 1499881061, "creation_date": 1499881061, "answer_id": 45064289, "question_id": 45064265, "link": "https://stackoverflow.com/questions/45064265/what-happens-when-you-dereference-a-string-in-c/45064289#45064289", "title": "what happens when you dereference a string in c++", "body": "<p>\"hello\" evaluates to a pointer to the first character of the string , dereferencing it evaluates to that character.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1499881111, "creation_date": 1499881111, "answer_id": 45064300, "question_id": 45064265, "link": "https://stackoverflow.com/questions/45064265/what-happens-when-you-dereference-a-string-in-c/45064300#45064300", "title": "what happens when you dereference a string in c++", "body": "<p>A string literal (<code>\"hello\"</code> in this case) is a array of <code>const char</code> of size <code>N</code> where <code>N</code> is the number of characters plus a null terminator.  That array can decay to a pointer to the first element.  When you dereference that pointer you now have the first element of the array, which is a character.  That is why <code>h</code> is printed as you gave <code>cout</code> a character.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499881461, "post_id": 45064318, "comment_id": 77101928, "body": "@stoicbutterfly No.  They are arrays of characters."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7938860"}, "edited": false, "score": 0, "creation_date": 1499881531, "post_id": 45064318, "comment_id": 77101975, "body": "then why is it converted to char *?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1499881669, "post_id": 45064318, "comment_id": 77102063, "body": "@stoicbutterfly A string <i>literal</i> is an expression that yields a <i>value</i> of type <code>const char *</code>.  The string literal is not the same thing as the string.  The literal is the bytes <code>&quot;hello&quot;</code> that appear in your source file,  The string is an array of characters <code>{&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;\\0&#39;}</code> that appear in the executable, and whenever you use the &quot;name&quot; of an array as an expression, you get a pointer to its first member.  It works that way in C++ because that&#39;s how it worked in C because...40 years of historical reasons."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1499881678, "post_id": 45064318, "comment_id": 77102071, "body": "A <code>char *</code> is usually a pointer to the first character of a character array.  Many functions will traverse the array, incrementing the pointer, until a &#39;\\0&#39; character is found.  The functions may access beyond the array if a &#39;\\0&#39; is not found. This is one reason that <code>std::string</code> is preferred to character arrays."}], "tags": [], "owner": {"reputation": 322, "user_id": 4421970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DH9v1ryfMNI/AAAAAAAAAAI/AAAAAAAAAJU/mmvfz1AB9CA/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/4421970/peter"}, "is_accepted": true, "score": 0, "last_activity_date": 1499881179, "creation_date": 1499881179, "answer_id": 45064318, "question_id": 45064265, "link": "https://stackoverflow.com/questions/45064265/what-happens-when-you-dereference-a-string-in-c/45064318#45064318", "title": "what happens when you dereference a string in c++", "body": "<p>The string is saved at some memory location in the binary (when the source is compiled).</p>\n\n<p>A string like <code>\"hello\"</code> is converted to a <code>char *</code> (pointer to char). Therefore when you dereference it, it will get you the first char of your \"string\".</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7938860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1707, "favorite_count": 0, "accepted_answer_id": 45064318, "answer_count": 3, "score": 0, "last_activity_date": 1499881179, "creation_date": 1499880946, "question_id": 45064265, "link": "https://stackoverflow.com/questions/45064265/what-happens-when-you-dereference-a-string-in-c", "title": "what happens when you dereference a string in c++", "body": "<p>Why does the following code produce the output \"h\"? I do not understand it. Since it's dereferencing it, shouldn't it print out its memory address?</p>\n\n<pre><code>#include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; *(\"hello\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "node.js", "jxcore"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "is_accepted": true, "score": 0, "last_activity_date": 1500060842, "creation_date": 1500060842, "answer_id": 45110420, "question_id": 45064248, "link": "https://stackoverflow.com/questions/45064248/how-to-use-require-in-jxcore-c-application/45110420#45110420", "title": "How to use &quot;require&quot; in JXCore C++ application", "body": "<p>Found the answer on here: <a href=\"https://github.com/jxcore/jxcore/blob/master/test/native-interface/test-require/test-posix.cpp#L9\" rel=\"nofollow noreferrer\">https://github.com/jxcore/jxcore/blob/master/test/native-interface/test-require/test-posix.cpp#L9</a></p>\n\n<p>Basically, 'require' needs to be defined in a global.</p>\n"}], "owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 45110420, "answer_count": 1, "score": 0, "last_activity_date": 1500060842, "creation_date": 1499880904, "last_edit_date": 1499884305, "question_id": 45064248, "link": "https://stackoverflow.com/questions/45064248/how-to-use-require-in-jxcore-c-application", "title": "How to use &quot;require&quot; in JXCore C++ application", "body": "<p>I'm attempting to use JXCore in order to call up some node.js code inside my c++ program.  I'm able to run my C++ program with the attached code if I comment out the line: <code>\"var path = require('fs'); \\n\"</code> So I've basically narrowed down my issue to when I use the \"require\" command.  The code works if I run it from jx directly.  I'm also using Visual Studio if that makes a difference. How do you tell jx where the additional modules like 'fs' are?</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n\nusing namespace std;\n#include \"jx.h\"\n#include &lt;node.h&gt;\n#include &lt;v8.h&gt;\n\n#define flush_console(...)        \\\n  do {                            \\\n    fprintf(stdout, __VA_ARGS__); \\\n    fflush(stdout);               \\\n        } while (0)\n\nvoid ConvertResult(JXValue *result, std::string &amp;to_result) {\n    switch (result-&gt;type_) {\n    case RT_Null:\n        to_result = \"null\";\n        break;\n    case RT_Undefined:\n        to_result = \"undefined\";\n        break;\n    case RT_Boolean:\n        to_result = JX_GetBoolean(result) ? \"true\" : \"false\";\n        break;\n    case RT_Int32: {\n        std::stringstream ss;\n        ss &lt;&lt; JX_GetInt32(result);\n        to_result = ss.str();\n    } break;\n    case RT_Double: {\n        std::stringstream ss;\n        ss &lt;&lt; JX_GetDouble(result);\n        to_result = ss.str();\n    } break;\n    case RT_Buffer: {\n        to_result = JX_GetString(result);\n    } break;\n    case RT_JSON:\n    case RT_String: {\n        to_result = JX_GetString(result);\n    } break;\n    case RT_Error: {\n        to_result = JX_GetString(result);\n    } break;\n    default:\n        to_result = \"null\";\n        return;\n    }\n}\n\nvoid callback(JXResult *results, int argc) {\n    // do nothing\n}\n\nvoid sampleMethod(JXResult *results, int argc) {\n    flush_console(\"sampleMethod Called;\\n\");\n\n    std::stringstream ss_result;\n    for (int i = 0; i &lt; argc; i++) {\n        std::string str_result;\n        ConvertResult(&amp;results[i], str_result);\n        ss_result &lt;&lt; i &lt;&lt; \" : \";\n        ss_result &lt;&lt; str_result &lt;&lt; \"\\n\";\n    }\n\n    flush_console(\"%s\", ss_result.str().c_str());\n\n    // return an Array back to JS Land\n    const char *str = \"[1, 2, 3]\";\n\n    // results[argc] corresponds to return value\n    JX_SetJSON(&amp;results[argc], str, strlen(str));\n}\n\nvoid TEST_JSON(char * logger, int log_length, char *path)\n{\n\n    JXValue result;\n\n\n\n    JX_Evaluate(\n\n        \"var path = require('fs'); \\n\"\n        \"var FileParser = require('./FileParser'); \\n\"\n        \"var eventDate; \\n\"\n        \"var depth; \\n\"\n        \"var moisture; \\n\"\n        \"var pressure; \\n\"\n        \"var code; \\n\"\n        \"var message; \\n\"\n        \"var token; \\n\"\n        \"var results; \\n\"\n        \"var action; \\n\"\n\n        \"try { \\n\"\n\n        \"console.log(); \\n\"\n        \"console.log('//--------------------------------------------------------'); \\n\"\n        \"console.log('//    Hello'); \\n\"\n        \"console.log();  \\n\"\n        \"} catch (err) { \\n\"\n        \"} \\n\", \"myscript\", &amp;result);\n\n    JX_Free(&amp;result);\n    // loop for possible IO\n    // or JX_Loop() without usleep / while\n\n\n    //return 0;\n}\n\nvoid startNodeInitialize(char *path)\n{\n    //char *path = args[0];\n\n    // Call JX_Initialize only once per app\n    JX_Initialize(path, callback);\n\n    // Creates a new engine for the current thread\n    // It's our first engine instance hence it will be the\n    // parent engine for all the other engine instances.\n    // If you need to destroy this engine instance, you should\n    // destroy everything else first. For the sake of this sample\n    // we have our first instance sitting on the main thread\n    // and it will be destroyed when the app exists.\n    JX_InitializeNewEngine();\n    char *contents = \"console.log('hi world');\";\n\n    // define the entry file contents\n    JX_DefineMainFile(contents);\n\n    // define native -named- method\n    // we will be reaching to this method from the javascript side like this;\n    // process.natives.sampleMethod( ... )\n    JX_DefineExtension(\"sampleMethod\", sampleMethod);\n\n    JX_StartEngine();\n}\n\nvoid startNodeEngine(void)\n{\n    // Creates a new engine for the current thread\n    // It's our first engine instance hence it will be the\n    // parent engine for all the other engine instances.\n    // If you need to destroy this engine instance, you should\n    // destroy everything else first. For the sake of this sample\n    // we have our first instance sitting on the main thread\n    // and it will be destroyed when the app exists.\n    JX_InitializeNewEngine();\n    char *contents = \"console.log('hi world');\";\n\n    // define the entry file contents\n    JX_DefineMainFile(contents);\n\n    // define native -named- method\n    // we will be reaching to this method from the javascript side like this;\n    // process.natives.sampleMethod( ... )\n    JX_DefineExtension(\"sampleMethod\", sampleMethod);\n\n    JX_StartEngine();\n}\n</code></pre>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1499880946, "post_id": 45064243, "comment_id": 77101622, "body": "std::list allocates one node at a time."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1499880950, "post_id": 45064243, "comment_id": 77101627, "body": "What makes you think std::list grows exponentially?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1499881024, "post_id": 45064243, "comment_id": 77101673, "body": "The standard library does not provide that functionality. <code>std::vector</code>&#39;s resizing scheme is firmly in the hands of the standard library implementer."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1499881107, "post_id": 45064243, "comment_id": 77101731, "body": "@Fran&#231;ois Andrieux That&#39;s not quite correct. Since back insertion time must be amortized constant, the implementation doesn&#39;t really have a choice but do exponential allocations."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499881243, "post_id": 45064243, "comment_id": 77101803, "body": "@Frank But the constant they you c an be different.  MSVS uses 1.5 while gcc and clang use 2 for instance."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499881337, "post_id": 45064243, "comment_id": 77101872, "body": "@NathanOliver but it&#39;s still exponential in both cases."}, {"owner": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499881341, "post_id": 45064243, "comment_id": 77101874, "body": "@Frank As far as I know all containers do this. If I&#39;m wrong, please correct me."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1499881401, "post_id": 45064243, "comment_id": 77101905, "body": "@the_drow actually, only std::vector (and adapters defaulting to std::vector, like std::stack) have that behavior."}], "answers": [{"comments": [{"owner": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "edited": false, "score": 0, "creation_date": 1499881543, "post_id": 45064353, "comment_id": 77101980, "body": "Since I don&#39;t care about runtime here I&#39;d rather have <code>O(n)</code> complexity. A list won&#39;t fit since I need to be able to allocate in bulks. Is there anything I can do about it?"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 3, "creation_date": 1499881596, "post_id": 45064353, "comment_id": 77102012, "body": "If you don&#39;t care about continuous storage, then it sounds like you want std::deque"}, {"owner": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "edited": false, "score": 0, "creation_date": 1499881711, "post_id": 45064353, "comment_id": 77102093, "body": "I do care (somewhat). I&#39;m trying to refactor <a href=\"https://github.com/rethinkdb/rethinkdb/blob/next/src/containers/segmented_vector.hpp\" rel=\"nofollow noreferrer\">github.com/rethinkdb/rethinkdb/blob/next/src/containers/&hellip;</a> to some STL container if possible."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1499881774, "post_id": 45064353, "comment_id": 77102132, "body": "From a cursory glance, <code>segmented_vector_t</code> looks to be exactly what std::deque is."}, {"owner": {"reputation": 8279, "user_id": 4759200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XqFYM.jpg?s=128&g=1", "display_name": "DAle", "link": "https://stackoverflow.com/users/4759200/dale"}, "reply_to_user": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "edited": false, "score": 2, "creation_date": 1499881858, "post_id": 45064353, "comment_id": 77102176, "body": "@the_drow, You should take a look at <code>std::deque</code>, seems quite similar"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1499884825, "post_id": 45064353, "comment_id": 77103849, "body": "If you explicitly call <code>resize</code> or <code>reserve</code> on the vector, you can explicitly control the growth scheme of the vector."}], "tags": [], "owner": {"reputation": 8279, "user_id": 4759200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XqFYM.jpg?s=128&g=1", "display_name": "DAle", "link": "https://stackoverflow.com/users/4759200/dale"}, "is_accepted": true, "score": 4, "last_activity_date": 1499882079, "last_edit_date": 1499882079, "creation_date": 1499881339, "answer_id": 45064353, "question_id": 45064243, "link": "https://stackoverflow.com/questions/45064243/stl-containers-with-fixed-growth/45064353#45064353", "title": "STL containers with fixed growth", "body": "<p><code>std::list</code> does not grow exponentially, it's a <a href=\"https://en.wikipedia.org/wiki/Doubly_linked_list\" rel=\"nofollow noreferrer\">doubly linked list</a> under the hood.</p>\n\n<p><code>std::vector</code> cannot grow by a constant number of elements, because of complexities of operations required by the standard. For example, the complexity of <code>push_back</code> should have <code>O(1)</code> amortized time complexity. With the constant size grow it would be <code>O(n)</code> complexity.</p>\n\n<p>If you need a container that is quite similar to <code>std::vector</code> and has no exponential growth factor, take a look at <code>std::deque</code>.</p>\n"}], "owner": {"reputation": 17094, "user_id": 85140, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecefdcbc16e0f1fd61be3011b0045761?s=128&d=identicon&r=PG", "display_name": "the_drow", "link": "https://stackoverflow.com/users/85140/the-drow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 45064353, "answer_count": 1, "score": 1, "last_activity_date": 1499882079, "creation_date": 1499880872, "question_id": 45064243, "link": "https://stackoverflow.com/questions/45064243/stl-containers-with-fixed-growth", "title": "STL containers with fixed growth", "body": "<p>I have a use case for containers that provide fixed growth patterns instead of exponential ones. In this use case, conserving memory is more important than runtime.<br>\nIs there a way to make <code>std::vector</code> or <code>std::list</code> to grow with N elements automatically instead of growing exponentially whenever the container runs out of space?<br>\nI know I can write an adapter that does this but I first want to find out if it's possible through standardized means.  </p>\n\n<p>If it's not possible, is there a boost container I can use?</p>\n"}, {"tags": ["c++", "video", "video-streaming", "video-processing"], "comments": [{"owner": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500128841, "post_id": 45064233, "comment_id": 77209380, "body": "Depends entirely on what you&#39;re doing with it.  Raw frames are about as elementary as it gets, but there is no standard without context."}, {"owner": {"reputation": 131, "user_id": 2514479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b630eefa9f48420c8295b579ed7039?s=128&d=identicon&r=PG", "display_name": "alexey", "link": "https://stackoverflow.com/users/2514479/alexey"}, "reply_to_user": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500138555, "post_id": 45064233, "comment_id": 77212324, "body": "@Brad, as I described, my program produces sequence of frames (on-screen animation), then some video-processing program (likely, ffmpeg) overlays them on another video to continuously save the result on disk or send to youtube. Was the explanation useful?"}, {"owner": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500152677, "post_id": 45064233, "comment_id": 77216318, "body": "You should add those details to your question.  If you&#39;re starting with animation and then using FFmpeg, I&#39;d stick with raw frames, RGB24 or similar."}, {"owner": {"reputation": 131, "user_id": 2514479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b630eefa9f48420c8295b579ed7039?s=128&d=identicon&r=PG", "display_name": "alexey", "link": "https://stackoverflow.com/users/2514479/alexey"}, "reply_to_user": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500282948, "post_id": 45064233, "comment_id": 77249308, "body": "@Brad so how would video-processors usually expect the video stream? On std in? Seems simple and reliable."}, {"owner": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500304509, "post_id": 45064233, "comment_id": 77264806, "body": "Yes, FFmpeg takes STDIN.  For the input file, just specify <code>-</code>."}, {"owner": {"reputation": 131, "user_id": 2514479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b630eefa9f48420c8295b579ed7039?s=128&d=identicon&r=PG", "display_name": "alexey", "link": "https://stackoverflow.com/users/2514479/alexey"}, "reply_to_user": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500471407, "post_id": 45064233, "comment_id": 77351749, "body": "@Brad It works, but now the image in ffplay is a little distorted in the middle, there&#39;re some slightly visible colourful lines and the whole picture cyclically floats right for some reason (on each new frame), though it is well-recognizable and the source image is proper... Don&#39;t you happen to know the reason?) The command is <code>my_prog.exe | .\\ffplay.exe -f rawvideo -s 1280x720 -pix_fmt rgb24 -i pipe:0</code>. Saving file using fmpeg instead of ffplay gives same artefacts in the picture."}, {"owner": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1500472958, "post_id": 45064233, "comment_id": 77353121, "body": "Sounds like your pixel count is wrong on some dimension."}], "owner": {"reputation": 131, "user_id": 2514479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b630eefa9f48420c8295b579ed7039?s=128&d=identicon&r=PG", "display_name": "alexey", "link": "https://stackoverflow.com/users/2514479/alexey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500282561, "creation_date": 1499880815, "last_edit_date": 1500282561, "question_id": 45064233, "link": "https://stackoverflow.com/questions/45064233/are-there-common-ways-or-standards-for-frameserving", "title": "Are there common ways or standards for frameserving?", "body": "<p>Posting <a href=\"https://video.stackexchange.com/questions/21896/is-there-standard-protocol-or-way-for-frameserving\">this</a> question from video.SE here for being about programming.</p>\n\n<p>My program produces sequence of frames (frameserver) of an on-screen animation, then some video-processing program (likely, ffmpeg) overlays them on another video to continuously save the result on disk or send to youtube-like service.</p>\n\n<p>So, are there any standard practices I can implement in my program-frameserver so that most video-processing software could pick up the stream? How-to would be appreciated.</p>\n\n<p>The intended workflow:</p>\n\n<p>[my program in C++] -> frames (up to 60fps 1080p) -> [consumer (videoprocessing program)] ->...</p>\n\n<p>Thanks for help!</p>\n"}, {"tags": ["c++", "clion"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 11, "creation_date": 1499879771, "post_id": 45063909, "comment_id": 77100948, "body": "<code>char s[]{};</code> and <code>char ss[]{};</code> are not legal c++. Even if your compiler offers extensions allowing it, the lines <code>cin &gt;&gt; s;</code> and <code>cin&gt;&gt;ss;</code> will almost certainly be undefined behavior."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1499879855, "post_id": 45063909, "comment_id": 77100996, "body": "Answer is simple: Undefined behavior. Most likely due to referencing items out of bounds of your arrays."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1499879863, "post_id": 45063909, "comment_id": 77101001, "body": "I dont know what you&#39;re trying to do with <code>char ss[]{}; cin&gt;&gt;ss;</code> but im pretty sure its wrong."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1499879959, "post_id": 45063909, "comment_id": 77101049, "body": "<code>&gt;&gt;</code> to a <code>char</code> array is risky at the best of times, and a zero length array is about the worst of times.There is no overflow protection."}, {"owner": {"reputation": 133, "user_id": 8114259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b635fc012d419d861c84e5bd916bd682?s=128&d=identicon&r=PG&f=1", "display_name": "m1350", "link": "https://stackoverflow.com/users/8114259/m1350"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1499880077, "post_id": 45063909, "comment_id": 77101111, "body": "@Ron  when i delete {}   it says me that (local incomplete array must be initialize )"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 5, "creation_date": 1499880145, "post_id": 45063909, "comment_id": 77101152, "body": "@m1350 Sounds like you could benefit from reading one of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these C++ books</a>."}, {"owner": {"reputation": 133, "user_id": 8114259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b635fc012d419d861c84e5bd916bd682?s=128&d=identicon&r=PG&f=1", "display_name": "m1350", "link": "https://stackoverflow.com/users/8114259/m1350"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1499880280, "post_id": 45063909, "comment_id": 77101219, "body": "@Borgleader when I comment cin&gt;&gt;ss;  it becomes ok what should i do?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 7, "creation_date": 1499880355, "post_id": 45063909, "comment_id": 77101260, "body": "@m1350: Programming by guessing doesn&#39;t work. You are going to have to take a break for learning the language from one of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these C++ books</a>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 1, "creation_date": 1499880405, "post_id": 45063909, "comment_id": 77101283, "body": "@LeonardoAlvesMachado <a href=\"http://ideone.com/BblXXD\" rel=\"nofollow noreferrer\">You sure about that?</a> The OP is confused enough as it is."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 1, "creation_date": 1499880684, "post_id": 45063909, "comment_id": 77101461, "body": "@LeonardoAlvesMachado Even if your suggest&#39;s syntax was valid, the proposed solution is overly complex and not robust. For c++ questions, it would be better to stick with idiomatic solutions, such as using <code>std::string</code> to store strings."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1499882246, "post_id": 45063909, "comment_id": 77102417, "body": "Replace <code>char []</code> with <code>std::string</code>.  Replace <code>cin &gt;&gt; ss</code> with <code>std::getline(cin, string_variable)</code>.  You could also read single words with <code>cin &gt;&gt; string_variable;</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1499882350, "post_id": 45063909, "comment_id": 77102490, "body": "Use a <code>switch</code> instead of an <code>if-else</code> ladder.  For example, your ladder is missing a final <code>else</code> clause.  What happens when the User enters <code>4</code> as a <i>choise</i>?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7393369"}, "is_accepted": true, "score": 1, "last_activity_date": 1499882770, "creation_date": 1499882770, "answer_id": 45064753, "question_id": 45063909, "link": "https://stackoverflow.com/questions/45063909/why-my-int-change-in-the-middle-of-c-programm/45064753#45064753", "title": "why my int change in the middle of c++ programm?", "body": "<p>As the other said the problem of your code is char <code>ss[]{};cin&gt;&gt;ss;</code> so if you comment if you will understand it</p>\n\n<p>so my suggestion is to use string instead of char[] and you can use <code>cin&lt;&lt;</code> for string and you can use [] operator e.x </p>\n\n<pre><code>string s = \"Code\";\ncout&lt;&lt;s[0];\n</code></pre>\n\n<p>and M.r @Ron is correct it's better to read <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">This Books</a></p>\n"}], "owner": {"reputation": 133, "user_id": 8114259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b635fc012d419d861c84e5bd916bd682?s=128&d=identicon&r=PG&f=1", "display_name": "m1350", "link": "https://stackoverflow.com/users/8114259/m1350"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 45064753, "answer_count": 1, "score": -3, "last_activity_date": 1499882770, "creation_date": 1499879612, "last_edit_date": 1499880480, "question_id": 45063909, "link": "https://stackoverflow.com/questions/45063909/why-my-int-change-in-the-middle-of-c-programm", "title": "why my int change in the middle of c++ programm?", "body": "<p>I have written the code below. The matter is this: after I read the <code>x</code> and <code>y</code> from input stream there is not matter - mean <code>x</code> and <code>y</code> are the exact value of input - but later they change to some other value.</p>\n\n<p>what's the matter?  I can not understand it!!</p>\n\n<pre><code>int count(char s[], char ss[] , long long int posF, long long int posE){}\nint main()\n{\n    char s[]{};\n    int q = 0;\n    cin &gt;&gt; s;\n    cin &gt;&gt; q;\n    int choise = 0;\n    while(q--)\n    {\n        cin&gt;&gt;choise;\n        if(choise == 1)\n        {\n            int x = 0;\n            cin&gt;&gt;x;\n            char c;\n            cin&gt;&gt;c;\n            s[x-1] = c;\n        }\n        else if(choise == 2)\n        {\n            int x = 0;\n            int y = 0;\n            cin&gt;&gt;x&gt;&gt;y;\n            //Fist LOG\n            cout&lt;&lt;\"First log x and y are correct    \"&lt;&lt;x&lt;&lt;\"  \"&lt;&lt;y&lt;&lt;endl;\n            char ss[]{};\n            cin&gt;&gt;ss;\n            //Second LOG\n            cout&lt;&lt;\"Second log x and y are  wrong?Why?\"&lt;&lt;x&lt;&lt;\"  \"&lt;&lt;y;\n            cout&lt;&lt;count(s, ss, x-1, y-1)&lt;&lt;endl;\n        }\n\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "ubuntu", "visual-studio-code"], "comments": [{"owner": {"reputation": 587, "user_id": 1866301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/751bc2824cedfebccd6ac147854e508c?s=128&d=identicon&r=PG", "display_name": "vaibhav kumar", "link": "https://stackoverflow.com/users/1866301/vaibhav-kumar"}, "edited": false, "score": 0, "creation_date": 1524083171, "post_id": 45063818, "comment_id": 86832816, "body": "I am having the same issue. Please let me know if you found the answer."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9711564, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/485a97cd6e8f25b71d2cd1a4ffbfcc5f?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/9711564/emanuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1524851371, "last_edit_date": 1524851371, "creation_date": 1524847718, "answer_id": 50066971, "question_id": 45063818, "link": "https://stackoverflow.com/questions/45063818/how-to-make-vs-code-not-open-a-terminal-when-debugging/50066971#50066971", "title": "How to make VS Code not open a terminal when debugging?", "body": "<p>Set <code>\"console\":\"none\"</code> like such:</p>\n\n<pre><code>\"name\": \"Python: Current File\",\n\"type\": \"python\",\n\"request\": \"launch\",\n\"program\": \"${file}\"\n\"cwd\": \"${workspaceFolder}\"\n\"console\": \"none\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 8686897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJQfk.jpg?s=128&g=1", "display_name": "r.beigi", "link": "https://stackoverflow.com/users/8686897/r-beigi"}, "is_accepted": false, "score": 2, "last_activity_date": 1581335383, "creation_date": 1581335383, "answer_id": 60149791, "question_id": 45063818, "link": "https://stackoverflow.com/questions/45063818/how-to-make-vs-code-not-open-a-terminal-when-debugging/60149791#60149791", "title": "How to make VS Code not open a terminal when debugging?", "body": "<p>For a C++ project, use <code>\"externalConsole\": false,</code> as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dQ6OE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQ6OE.png\" alt=\"enter image description here\"></a></p>\n\n<p>This will open integrated terminal instead of external terminal. You can use <code>\"internalConsoleOptions\": \"openOnSessionStart\"</code> if you want to open the debug console instead of the integrated/external console:</p>\n\n<p><a href=\"https://i.stack.imgur.com/89bjp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/89bjp.png\" alt=\"enter image description here\"></a></p>\n\n<p>For a Java project, use , <code>\"console\": \"integratedTerminal\"</code> in the configurations file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sm7Wk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sm7Wk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Use <code>\"console\": \"internalConsole\"</code> if you do not want to see any debug console.</p>\n"}], "owner": {"reputation": 7894, "user_id": 1020139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e6b113d9e9ab23110a4e5b611bcaad61?s=128&d=identicon&r=PG", "display_name": "Shuzheng", "link": "https://stackoverflow.com/users/1020139/shuzheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1581335383, "creation_date": 1499879282, "question_id": 45063818, "link": "https://stackoverflow.com/questions/45063818/how-to-make-vs-code-not-open-a-terminal-when-debugging", "title": "How to make VS Code not open a terminal when debugging?", "body": "<p>I've installed VS Code on Ubuntu 17.04. </p>\n\n<p>When I debug my C++ application, the output is displayed in a dedicated terminal and not within VS Code itself (like Eclipse does).</p>\n\n<p>How do I make VS Code display output within the editor itself, i.e., not open another terminal?</p>\n\n<p>My launch configuration is as follows:</p>\n\n<pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"gdb\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${workspaceRoot}/a.out\",\n            \"args\": [\"foo\", \"bar\", \"baz\"],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${workspaceRoot}\",\n            \"environment\": [],\n            \"externalConsole\": false,\n            \"MIMode\": \"gdb\",\n            \"setupCommands\": [\n                {\n                    \"description\": \"Enable pretty-printing for gdb\",\n                    \"text\": \"-enable-pretty-printing\",\n                    \"ignoreFailures\": true\n                }\n            ],\n            \"preLaunchTask\": \"g++\"\n        }\n    ]\n}\n</code></pre>\n\n<p>I'd hoped that setting <code>externalConsole</code> to false would solve the problem. However, it didn't change anything.</p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 3, "creation_date": 1499878590, "post_id": 45063594, "comment_id": 77100363, "body": "Just don&#39;t seed inside the function. Seed once in main before you call the other functions. You don&#39;t need to reseed every time."}, {"owner": {"reputation": 71, "user_id": 6445774, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-96dTh4CAxsE/AAAAAAAAAAI/AAAAAAAAABM/_1NhgHb5-GU/photo.jpg?sz=128", "display_name": "Linus Johansson", "link": "https://stackoverflow.com/users/6445774/linus-johansson"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1499878830, "post_id": 45063594, "comment_id": 77100478, "body": "That worked perfectly, shouldn&#39;t the seed stay the same at all times since it is set to a number once it is called?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1499878960, "post_id": 45063594, "comment_id": 77100537, "body": "No. The state of the random generator is automatically advanced after you have it generate a value. Manually seeding only sets the initial state to start generating from."}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1499878981, "post_id": 45063594, "comment_id": 77100547, "body": "@LinusJohansson That&#39;s the point of a seed! An PRNG generates a <i>sequence</i> (not just one) of random numbers based on a seed. Different seed =&gt; different sequence of random numbers."}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1499879303, "post_id": 45063594, "comment_id": 77100699, "body": "Why the downvote? It seems like a perfectly fair beginner question about a unique quirk of RNGs. It&#39;s well worded and it seems like the OP put in effort to understand the question. Unless you want every new question to be about template gunk...."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 1, "creation_date": 1499879626, "post_id": 45063594, "comment_id": 77100876, "body": "@yizzlez Not my downvote, but lack of research effort would be my guess. This is not hard to google."}], "owner": {"reputation": 71, "user_id": 6445774, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-96dTh4CAxsE/AAAAAAAAAAI/AAAAAAAAABM/_1NhgHb5-GU/photo.jpg?sz=128", "display_name": "Linus Johansson", "link": "https://stackoverflow.com/users/6445774/linus-johansson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1499878653, "answer_count": 0, "score": 0, "last_activity_date": 1499879934, "creation_date": 1499878546, "last_edit_date": 1499879934, "question_id": 45063594, "link": "https://stackoverflow.com/questions/45063594/generating-a-new-random-number-each-time-i-call-the-function", "closed_reason": "Duplicate", "title": "Generating a new random number each time I call the function", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;cstdlib&gt;\n\n using namespace std;\n\n int random_Number();\n int random_One();\n\n int main(){\n     cout &lt;&lt; \"You have : \" &lt;&lt; random_Number() &lt;&lt; endl;\n    cout &lt;&lt; \"The dealer has : \" &lt;&lt; random_Number() &lt;&lt; endl;\n}\n\n\nint random_Number(){\n    int v1, v2;\n    srand((unsigned)time(NULL));\n    v1 = rand() % 10 + 1;\n    v2 = rand() % 10 + 1;\n    return v1 + v2;\n}\n</code></pre>\n\n<p>If I understand correctly, srand() is a seed which will change each time I run the program since the time changes and therefore so does <code>srand()</code>. However, since time does not change once the program has been started, the program will keep using the same seed and thus generating the same numbers over and over.</p>\n\n<p>So, if I want my function <code>random_Number</code> to generate a new random number every time it is called, then I must also change the seed. I assume you need to set your seed to something else than time, but I don't know what else? It's a bit paradoxical that you can't loop the seed, since that would require a random number for each iteration - which is exactly the problem I have.</p>\n\n<p>Is there a better way to do this? And if not, how would you change the seed so that it varies every time the function is called?</p>\n"}, {"tags": ["c++", "tensorflow"], "comments": [{"owner": {"reputation": 5655, "user_id": 6708503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b6830ee25bc34994df9835cc17b64aa?s=128&d=identicon&r=PG&f=1", "display_name": "ash", "link": "https://stackoverflow.com/users/6708503/ash"}, "edited": false, "score": 0, "creation_date": 1499886616, "post_id": 45063535, "comment_id": 77104813, "body": "I think you&#39;re using it correctly, but perhaps there are some errors. Could you validate that <code>conf.SerializeToString(&amp;str)</code> is returning <code>true</code> and that <code>TF_GetCode(m_status) == TF_OK</code> after the call to <code>TF_SetConfig</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499888472, "post_id": 45063535, "comment_id": 77105758, "body": "That&#39;s clearly not C, but C++. You cannot mix C and C++ in the same compilation unit. According to Wikipedia, there is no C API."}, {"owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499892145, "post_id": 45063535, "comment_id": 77107580, "body": "@olaf Please see <a href=\"https://www.tensorflow.org/install/install_c\" rel=\"nofollow noreferrer\">tensorflow.org/install/install_c</a>. Mixing C and C++ is indeed a bit hacky, but it works."}, {"owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "reply_to_user": {"reputation": 5655, "user_id": 6708503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b6830ee25bc34994df9835cc17b64aa?s=128&d=identicon&r=PG&f=1", "display_name": "ash", "link": "https://stackoverflow.com/users/6708503/ash"}, "edited": false, "score": 0, "creation_date": 1499892149, "post_id": 45063535, "comment_id": 77107581, "body": "@ash Status is indeed OK (I check it, just didn&#39;t include it in the snippet above). I&#39;ll verify the serialization return value later, but I&#39;m pretty sure that the configuration is passed correctly, as I tried using illegal values - which made the session generation fail..."}, {"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1499902204, "post_id": 45063535, "comment_id": 77111360, "body": "Can you try adding <code>conf.set_use_per_session_threads(true);</code>? By default, if you created a session previously in the same process with a different number of threads (or the default value, equal to the number of cores), TensorFlow would reuse the same threadpool created for that session in all subsequent sessions, unless you use this configuration option."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499904021, "post_id": 45063535, "comment_id": 77111802, "body": "@oferlivny <i>sigh!</i> You cannot mix C and C++ source code as much as you cannot mix Python and Brainfuck source code. They are simply different languages. A C++ compiler will not compile C code, nor will a C compiler compile C++ code. <b>Identical syntax does not imply identical semantics</b>. What you can do is write C++ code <i>C-style</i>. It still is C++. And that&#39;s exactly what your code above seems to be."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499904459, "post_id": 45063535, "comment_id": 77111932, "body": "According to the linked site, the C API is for implementers of foreign language interfaces, not for use in an application program. As you already use C++, it is pointless to use it; use the C++ API as intended."}, {"owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1499917555, "post_id": 45063535, "comment_id": 77114827, "body": "@olaf There are reasons not to use the C++ API of tensorflow, such as: <a href=\"https://stackoverflow.com/questions/39379747/import-opencv-mat-into-c-tensorflow-without-copying\" title=\"import opencv mat into c tensorflow without copying\">stackoverflow.com/questions/39379747/&hellip;</a>"}, {"owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499918002, "post_id": 45063535, "comment_id": 77114913, "body": "@olaf My code compiles, and my compiler does not complain. Otherwise I would have been asking different questions. I can share my full code here if you like, it&#39;s simply not relevant to the question. There&#39;s are plenty of libraries that have C++ bindings around C implementations (zeromq, opencv...) Basically what I&#39;m doing is using the C API, not writing C myself. Again, hacky, but given the limitations of C API and the C++ API of tensorflow, I don&#39;t really see a choice. But then again, that&#39;s why I&#39;m here - am I doing something wrong?"}, {"owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1499925071, "post_id": 45063535, "comment_id": 77117216, "body": "Thanks @mrry, I tried your suggestion, which indeed feels relevant, and updated my question with my findings... Anything else I can try?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499950769, "post_id": 45063535, "comment_id": 77135267, "body": "@oferlivny Please read and understand my comment <b>carefully</b> again. Especially the bold part. As a sidenote: Neither the C nor the C++ compiler not complying guarantees the code is correct or does not invoke undefined behaviour. One possible expression of undefined behaviour is it might <b>appear</b> to work flawless for a specific run/compiled code/day/weather. That does not mean it will next time of for all input, system state, etc. Using the C A<b>B</b>I(!) from C++ does not justify the C tag, nor does it make your code C. To end this: I already wrote what you should do. Use the C++ A<b>P</b>I."}, {"owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499959401, "post_id": 45063535, "comment_id": 77142366, "body": "@olaf You have made your point clear, and I agree with everything you wrote. It might indeed be the root cause for my problems, although I tend to believe there should probably be a programmatic workaround for my problem. Considering my situtation (including your recommendation) I switched to the C++ API. So thanks :)"}, {"owner": {"reputation": 440, "user_id": 11160943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1165d73361bd3ff2b3e04a2c486f5d8?s=128&d=identicon&r=PG&f=1", "display_name": "Fisa", "link": "https://stackoverflow.com/users/11160943/fisa"}, "edited": false, "score": 0, "creation_date": 1597936857, "post_id": 45063535, "comment_id": 112301341, "body": "@oferlivny did switching to Tensorflow C++ API solve the problem?"}, {"owner": {"reputation": 440, "user_id": 11160943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1165d73361bd3ff2b3e04a2c486f5d8?s=128&d=identicon&r=PG&f=1", "display_name": "Fisa", "link": "https://stackoverflow.com/users/11160943/fisa"}, "edited": false, "score": 0, "creation_date": 1598264760, "post_id": 45063535, "comment_id": 112391772, "body": "@oferlivny how do you compile Tensorflow with hard coding number of threads to be 1?"}], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 7257838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0679212f933416f46e63d7f9d3c7ca?s=128&d=identicon&r=PG&f=1", "display_name": "Mike S.", "link": "https://stackoverflow.com/users/7257838/mike-s"}, "is_accepted": false, "score": 4, "last_activity_date": 1519805480, "last_edit_date": 1519805480, "creation_date": 1508684140, "answer_id": 46875491, "question_id": 45063535, "link": "https://stackoverflow.com/questions/45063535/change-number-of-threads-for-tensorflow-inference-with-c-api/46875491#46875491", "title": "Change number of threads for Tensorflow inference with C API", "body": "<p>I had the same problem and solved it by setting the number of threads when creating the first TF session my application is creating. If the first created session is not created with a options object TF will create worker threads as the number of cores on the machine * 2. </p>\n\n<p>Here is the C++ code I used:</p>\n\n<pre><code>// Call when application starts\nvoid InitThreads(int coresToUse)\n{\n    // initialize the number of worker threads\n    tensorflow::SessionOptions options;\n    tensorflow::ConfigProto &amp; config = options.config;\n    if (coresToUse &gt; 0)\n    {\n        config.set_inter_op_parallelism_threads(coresToUse);\n        config.set_intra_op_parallelism_threads(coresToUse);\n        config.set_use_per_session_threads(false);  \n    }\n    // now create a session to make the change\n    std::unique_ptr&lt;tensorflow::Session&gt; \n        session(tensorflow::NewSession(options));\n    session-&gt;Close();\n}\n</code></pre>\n\n<p>Pass 1 to limit the number of inter &amp; intra threads to 1 each.</p>\n\n<p><strong>Edit:</strong> \nIMPORTANT NOTE: This code works when called from the main application (google sample trainer) BUT stopped working when I moved it to a DLL dedicated to wrap tensorFlow). TF 1.4.1 ignores the parameter I pass and spins up all threads.\nI would like to hear your comments...</p>\n"}, {"tags": [], "owner": {"reputation": 440, "user_id": 11160943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1165d73361bd3ff2b3e04a2c486f5d8?s=128&d=identicon&r=PG&f=1", "display_name": "Fisa", "link": "https://stackoverflow.com/users/11160943/fisa"}, "is_accepted": false, "score": 0, "last_activity_date": 1601899028, "last_edit_date": 1601899028, "creation_date": 1599661869, "answer_id": 63813848, "question_id": 45063535, "link": "https://stackoverflow.com/questions/45063535/change-number-of-threads-for-tensorflow-inference-with-c-api/63813848#63813848", "title": "Change number of threads for Tensorflow inference with C API", "body": "<p>There is no problem in your use of TensorFlow C API. It is the limitation of C API to generate at least N number of threads, where N is the number of cores. You can't reduce it further.</p>\n<p>Setting OMP_NUM_THREADS from environment can change the number of threads but TensorFlow overwrites those setting and generate N threads.</p>\n<p>However, you can specify one or more cores to process. taskset, numatcl and setting thread affinity can lock a given process to a given core but don't change the number of threads.</p>\n<p>The above mentioned solutions will reduce the <strong>total number</strong> of threads (<strong>but not to 1</strong>) generated by TensorFlow. The <strong>total number</strong> of threads generated by TensorFlow will still be multiple, depending on the number of cores in the CPU. In most of the cases, only one thread will be active while others will be in sleeping mode. I don't think it is possible to have a <strong>single-threaded</strong> TensorFlow.</p>\n<p>The following github issues support my point of view.\n<a href=\"https://github.com/tensorflow/tensorflow/issues/33627\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/33627</a>\n<a href=\"https://github.com/usnistgov/frvt/issues/30\" rel=\"nofollow noreferrer\">https://github.com/usnistgov/frvt/issues/30</a></p>\n<p>Building TensorFlow C++ API from source and changing the source code may help.</p>\n"}], "owner": {"reputation": 280, "user_id": 1115400, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dbe9940d5204f38760a1f09333fbafc2?s=128&d=identicon&r=PG", "display_name": "oferlivny", "link": "https://stackoverflow.com/users/1115400/oferlivny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3934, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1601899028, "creation_date": 1499878343, "last_edit_date": 1499924995, "question_id": 45063535, "link": "https://stackoverflow.com/questions/45063535/change-number-of-threads-for-tensorflow-inference-with-c-api", "title": "Change number of threads for Tensorflow inference with C API", "body": "<p>I'm writing a c++ wrapper around tensorflow 1.2 C API (for inference purposes, if it matters). \nSince my application is a multi-process and multi-threaded one, where resources are explicitly allocated, I would like to limit Tensorflow to only use one thread.</p>\n\n<p>Currently, running a simple inference test that allows batch processing, I see it is using all CPU cores.\nI have tried limiting number of threads for a new session using a mixture of C and C++ as follows (forgive my partial code snippet, I hope this makes sense):</p>\n\n<pre><code>tensorflow::ConfigProto conf;\nconf.set_intra_op_parallelism_threads(1);\nconf.set_inter_op_parallelism_threads(1);\nconf.add_session_inter_op_thread_pool()-&gt;set_num_threads(1);\nstd::string str;\nconf.SerializeToString(&amp;str);\nTF_SetConfig(m_session_opts,(void *)str.c_str(),str.size(),m_status);\nm_session = TF_NewSession(m_graph, m_session_opts, m_status);\n</code></pre>\n\n<p>But I don't see it is making any difference - all cores are still fully utilized.</p>\n\n<p>Am I using the C API correctly?</p>\n\n<p>(My current work around is to recompile Tensorflow with hard coding number of threads to be 1, which will probably work, but its obviously not the best approach...)</p>\n\n<p>-- Update --</p>\n\n<p>I also tried adding:</p>\n\n<pre><code>conf.set_use_per_session_threads(true);\n</code></pre>\n\n<p>Without success. Still multiple cores are used...</p>\n\n<p>I also tried to run with high log verbosity, and got this output (showing only what I think is relevant):</p>\n\n<pre><code>tensorflow/core/common_runtime/local_device.cc:40] Local device intraop parallelism threads: 8\ntensorflow/core/common_runtime/session_factory.cc:75] SessionFactory type DIRECT_SESSION accepts target: \ntensorflow/core/common_runtime/direct_session.cc:95] Direct session inter op parallelism threads for pool 0: 1\n</code></pre>\n\n<p>The \"parallelism threads: 8\" message shows up as soon as I instantiate a new graph using TF_NewGraph(). I didn't find a way to specify options prior to this graph allocation though...</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1499879373, "post_id": 45063434, "comment_id": 77100734, "body": "you need set <code>SEE_MASK_NOCLOSEPROCESS</code> in <code>SHELLEXECUTEINFO.fMask</code> and use <code>SHELLEXECUTEINFO.hProcess</code> with some wait functions and finally call <code>GetExitCodeProcess</code> and <code>CloseHandle</code> - about stdin/stdout - this is impossible by design with elevated process"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499881291, "post_id": 45063434, "comment_id": 77101849, "body": "Time to graduate from &quot;cursory googling&quot; to actually studying the documentation. This website is not a replacement for that act. Start here: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff818516(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1499881903, "post_id": 45063434, "comment_id": 77102221, "body": "duplicate of: <a href=\"https://stackoverflow.com/q/30970718/103167\">stackoverflow.com/q/30970718/103167</a>"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1499883266, "post_id": 45063434, "comment_id": 77103007, "body": "I suggest to read up on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365590(v=vs.85).aspx\" rel=\"nofollow noreferrer\">named pipes API</a> which could be used quite similar to stdin/stdout. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365799(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Example code</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1499883927, "post_id": 45063434, "comment_id": 77103318, "body": "See <a href=\"https://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide\" rel=\"nofollow noreferrer\"><code>CreateProcessElevated()</code></a>, which supports starting an elevated process while redirecting std(in|out|err) using named pipes."}], "owner": {"reputation": 1253, "user_id": 697683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6065c081ec0bdeb9b6fe803054c3afbf?s=128&d=identicon&r=PG", "display_name": "user697683", "link": "https://stackoverflow.com/users/697683/user697683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499881332, "creation_date": 1499878007, "last_edit_date": 1499881332, "question_id": 45063434, "link": "https://stackoverflow.com/questions/45063434/start-elevated-subprocess-from-c-code-and-communicate-with-it-via-stdin-stdout", "title": "Start elevated subprocess from C++ code and communicate with it via stdin/stdout", "body": "<p>I need to start a subprocess with elevated privileges from C++ code. I'm not familiar with Windows APIs at all, and from cursory googling I found out that<br>\na) to start an elevated process I need to use <code>ShellExecute</code> with the <code>runas</code> verb.<br>\nb) to communicate with subprocess via stdin/stdout I have to use <code>CreateProcess</code></p>\n\n<p>But I haven't found a way to do both at the same time.</p>\n\n<p>Additionally, I need to </p>\n\n<ul>\n<li><p>either get a callback when the process finishes, or poll it to see whether it's still running</p></li>\n<li><p>check its return code</p></li>\n</ul>\n\n<p>As I said, I'm completely unfamiliar with Windows API, so could someone point me to the right functions?</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 6, "creation_date": 1499877865, "post_id": 45063380, "comment_id": 77099963, "body": "&quot;I cannot separate the function parameter out of the parameter pack because of... reasons&quot; Those reasons better be <i>very</i> good, because it really does not make any sense to me why you would constrain yourself like this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1499877878, "post_id": 45063380, "comment_id": 77099973, "body": "Can you please elaborate on those reasons?  Otherwise <code>template &lt;typename First, typename... Args&gt; void create(First&amp;&amp; first, Args&amp;&amp;... args)</code> is how you would normally do it."}, {"owner": {"reputation": 3978, "user_id": 3162383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b8754ab5c9bf4ed7cffed8a1d94f4c?s=128&d=identicon&r=PG", "display_name": "onqtam", "link": "https://stackoverflow.com/users/3162383/onqtam"}, "edited": false, "score": 0, "creation_date": 1499878100, "post_id": 45063380, "comment_id": 77100086, "body": "My &quot;reasons&quot; are that I&#39;m reusing a big template machinery and I&#39;m trying to extend it without rewriting it. It is a generic resource manager template class which inherits from a &quot;creator&quot; class which has the <code>create()</code> method and to it are passed a <code>std::string</code> (which I have omitted in my question) and a parameter pack. The idea is that a resource manager for a specific type needs the same arguments passed to <code>create</code>, but I want to extend it so <code>create</code> can behave differently - with different arguments. Not sure if this explains it..."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1499878308, "post_id": 45063380, "comment_id": 77100201, "body": "That doesn&#39;t really explain why you can&#39;t change the template parameter list - it shouldn&#39;t have to match anything else if it just hides a base class template method."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1499878361, "post_id": 45063380, "comment_id": 77100233, "body": "You can call, from <code>create()</code>, a <code>create2(F func, Args ... args)</code>?"}, {"owner": {"reputation": 3978, "user_id": 3162383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b8754ab5c9bf4ed7cffed8a1d94f4c?s=128&d=identicon&r=PG", "display_name": "onqtam", "link": "https://stackoverflow.com/users/3162383/onqtam"}, "edited": false, "score": 1, "creation_date": 1499878364, "post_id": 45063380, "comment_id": 77100235, "body": "Actually here is a <a href=\"https://github.com/onqtam/game/blob/3cfa652e11d20450d28b8b4701715bcdcd7356b5/src/core/GraphicsHelpers.h#L74\" rel=\"nofollow noreferrer\">link to my code</a> - the idea is that <code>createCube()</code> takes 0 arguments, but <code>createGrid()</code> may take 5 arguments. I was going to do runtime dispatch based on the string passed to <code>create()</code> but then it wouldn&#39;t compile if I pass a few arguments to <code>create()</code> because <code>createCube()</code> takes 0. So my idea is to pass the creator function as well and not do such runtime-string-dispatching. Hope that helps clear things a bit."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499878373, "post_id": 45063380, "comment_id": 77100239, "body": "Do your compiler support the upcoming C++17 standard? Then perhaps some creative overloading using <a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\"><code>std::enable_if</code></a> together with <a href=\"http://en.cppreference.com/w/cpp/types/is_invocable\" rel=\"nofollow noreferrer\"><code>std::is_invocable</code></a> for some SFINAE?"}, {"owner": {"reputation": 3978, "user_id": 3162383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b8754ab5c9bf4ed7cffed8a1d94f4c?s=128&d=identicon&r=PG", "display_name": "onqtam", "link": "https://stackoverflow.com/users/3162383/onqtam"}, "edited": false, "score": 0, "creation_date": 1499878409, "post_id": 45063380, "comment_id": 77100266, "body": "I&#39;m using VS 2017 with <code>&#47;std:c++latest</code> and gcc/clang with <code>-std=c++1z</code>"}, {"owner": {"reputation": 3978, "user_id": 3162383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b8754ab5c9bf4ed7cffed8a1d94f4c?s=128&d=identicon&r=PG", "display_name": "onqtam", "link": "https://stackoverflow.com/users/3162383/onqtam"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1499878470, "post_id": 45063380, "comment_id": 77100296, "body": "I&#39;ll try what @max66 suggests!!!"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1499878571, "post_id": 45063380, "comment_id": 77100349, "body": "Well... my was a question; as suggestion is too obvious. I suppose the answer is &quot;yes&quot;."}, {"owner": {"reputation": 3978, "user_id": 3162383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b8754ab5c9bf4ed7cffed8a1d94f4c?s=128&d=identicon&r=PG", "display_name": "onqtam", "link": "https://stackoverflow.com/users/3162383/onqtam"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1499878876, "post_id": 45063380, "comment_id": 77100497, "body": "@max66 well it worked - this <i>too obvious</i> thing was exactly what I needed - thanks! Put it as an answer and I shall accept it. So after all my question had a simple answer and there was no need for downvotes.... oh well :)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1499883175, "post_id": 45063380, "comment_id": 77102947, "body": "&quot;may take 5 arguments. I was going to do runtime dispatch based on the string passed to create() but then it wouldn&#39;t compile if I pass a few arguments to create() because createCube() takes 0. So my idea is to pass the creator function as well and not do such runtime-string-dispatching.&quot;  You seem to think that not having a separete arg from the pack will prevent compile time errors.  Your problem is, I cannot think of a situation where <code>template&lt;class F, class...Args&gt; void create</code> would break while <code>template&lt;class...Args&gt; void create</code> that invokes the first arg won&#39;t.  Please clarify."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1499885507, "post_id": 45063380, "comment_id": 77104231, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32918679/in-c-11-how-to-invoke-an-arbitrary-callable-object\">In c++ 11, how to invoke an arbitrary callable object?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1499883066, "post_id": 45063890, "comment_id": 77102879, "body": "Why <code>(void)</code>?  It seems vacuously in usefulness here."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1499885619, "post_id": 45063890, "comment_id": 77104299, "body": "@Yakk - fear; only and simple fear; since when you showed me the comma-hijack trick, I&#39;m afraid of not-void disabled values returned by generic functions :("}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1499890014, "post_id": 45063890, "comment_id": 77106558, "body": "You should at least forward arguments using <code>std::forward</code> within <code>create</code>."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1499890160, "post_id": 45063890, "comment_id": 77106625, "body": "@skypjack - within <code>create()</code>?  Or within <code>create_helper()</code>? Sorry but I have a lot of problems using correctly references."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1499890379, "post_id": 45063890, "comment_id": 77106729, "body": "@max66 Actually both of them. See my answer."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 3, "last_activity_date": 1499879538, "creation_date": 1499879538, "answer_id": 45063890, "question_id": 45063380, "link": "https://stackoverflow.com/questions/45063380/trying-to-call-the-first-element-of-a-parameter-pack-as-a-function-and-pass-the/45063890#45063890", "title": "Trying to call the first element of a parameter pack as a function and pass the rest of the pack to it as arguments", "body": "<p>A simple solution is demand the execution to an helper function without signature limitations.</p>\n\n<p>By example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename L, typename ... Args&gt;\nvoid create_helper (L const &amp; l, Args &amp;&amp; ... args)\n { (void)l(args...); }\n\ntemplate &lt;typename ... Args&gt;\nvoid create (Args &amp;&amp; ... args)\n { create_helper(args...); }\n\nint main()\n {\n   create([](int i, float f){ std::cout &lt;&lt; i &lt;&lt; \", \" &lt;&lt; f &lt;&lt; std::endl; },\n          42, 5.f);\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1499890999, "post_id": 45066433, "comment_id": 77107021, "body": "Why do you forward the function inside of invoke and the lambda? Seems unnecessary to me."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 1, "creation_date": 1499892608, "post_id": 45066433, "comment_id": 77107785, "body": "@MillieSmith As long as you use only lambdas it&#39;s unnecessary. Anyway the function accepts also functors. If you have a functor with a reference specifier on the <code>operator()</code>, things can vary if you forward <code>f</code> or not."}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1499893185, "post_id": 45066433, "comment_id": 77108086, "body": "That makes sense. Thanks."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1499893255, "post_id": 45066433, "comment_id": 77108126, "body": "You&#39;re welcome. At your disposal for any other question."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 2, "last_activity_date": 1499889681, "last_edit_date": 1499889681, "creation_date": 1499889271, "answer_id": 45066433, "question_id": 45063380, "link": "https://stackoverflow.com/questions/45063380/trying-to-call-the-first-element-of-a-parameter-pack-as-a-function-and-pass-the/45066433#45066433", "title": "Trying to call the first element of a parameter pack as a function and pass the rest of the pack to it as arguments", "body": "<blockquote>\n  <p>This should work with functions taking an arbitrary number of arguments - not just an int and a float.</p>\n</blockquote>\n\n<p>In C++14 you can unpack them by means of a generic lambda invoked in-place and to which you forward your arguments.<br>\nAs a minimal, working example:</p>\n\n<pre><code>#include&lt;utility&gt;\n\ntemplate &lt;typename... Args&gt;\nvoid create(Args&amp;&amp;... args) {\n    [](auto &amp;&amp;f, auto&amp;&amp;... p){\n        std::forward&lt;decltype(f)&gt;(f)(std::forward&lt;decltype(p)&gt;(p)...);\n    }(std::forward&lt;Args&gt;(args)...);\n}\n\nint main() {\n    create([](int, float){}, 42, 5.f);\n}\n</code></pre>\n\n<p>In C++11 you can use another function template or an equivalent functor that does the same job, then use them instead of the generic lambda.<br>\nAs a minimal, working example:</p>\n\n<pre><code>#include&lt;utility&gt;\n\nstruct Functor {\n    template&lt;typename F, typename... Args&gt;\n    static void invoke(F &amp;&amp;f, Args&amp;&amp;... args) {\n        std::forward&lt;F&gt;(f)(std::forward&lt;Args&gt;(args)...);\n    }\n};\n\ntemplate &lt;typename... Args&gt;\nvoid create(Args&amp;&amp;... args) {\n    Functor::invoke(std::forward&lt;Args&gt;(args)...);\n}\n\nint main() {\n    create([](int, float){}, 42, 5.f);\n}\n</code></pre>\n"}], "owner": {"reputation": 3978, "user_id": 3162383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76b8754ab5c9bf4ed7cffed8a1d94f4c?s=128&d=identicon&r=PG", "display_name": "onqtam", "link": "https://stackoverflow.com/users/3162383/onqtam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 45066433, "answer_count": 2, "score": 0, "last_activity_date": 1499889681, "creation_date": 1499877760, "question_id": 45063380, "link": "https://stackoverflow.com/questions/45063380/trying-to-call-the-first-element-of-a-parameter-pack-as-a-function-and-pass-the", "title": "Trying to call the first element of a parameter pack as a function and pass the rest of the pack to it as arguments", "body": "<p>I have to write a template function with the following interface:</p>\n\n<pre><code>template &lt;typename... Args&gt;\nvoid create(Args&amp;&amp;... args)\n</code></pre>\n\n<p>I need to be able to call it like this:</p>\n\n<pre><code>create([](int, float){}, 42, 5.f);\n</code></pre>\n\n<p>and I want the function (lambda) to be called with the 2 arguments passed after it. How can I achieve this?</p>\n\n<p>I'm constrained with the interface of <code>create()</code> - I cannot separate the function parameter ouf of the parameter pack because of... reasons (just trust me). Perhaps it can be extracted with some tricks like in <a href=\"https://stackoverflow.com/a/7664332/3162383\">here</a> and have the rest of the parameter pack forwarded to it...?</p>\n\n<p>This should work with functions taking an arbitrary number of arguments - not just an int and a float.</p>\n"}, {"tags": ["c++", "windows", "mfc"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1499877694, "post_id": 45063293, "comment_id": 77099875, "body": "I would recommend looking into a difference in the working directory. For example, a normal app start probably has a working directory of wherever the <code>.exe</code> is located, but I bet an Open With uses something else, such as the Windows directory or the directory of the opened file."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1499877924, "post_id": 45063293, "comment_id": 77100000, "body": "The reason I believe the working directory may be important is that it can participate in the DLL loading process and I would bet that you&#39;re getting an incompatible version of one or more DLLs you depend on. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586.aspx#search_order_for_desktop_applications\" rel=\"nofollow noreferrer\">DLL search order</a>"}, {"owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1499878478, "post_id": 45063293, "comment_id": 77100299, "body": "@DarkFalcon Thanks, I&#39;ll see if I can find out anything about that."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1499962313, "post_id": 45063293, "comment_id": 77144469, "body": "In <code>Configuration Properties</code>, <code>Command Arguments</code>, try putting the full path to that file and see if it crashes (use quotes). I believe it would be the same as <code>Open With</code>"}], "owner": {"reputation": 333, "user_id": 5455427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6600fbfcd7d2b4c980e2439efe2aa89a?s=128&d=identicon&r=PG&f=1", "display_name": "vacuumhead", "link": "https://stackoverflow.com/users/5455427/vacuumhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1499877443, "creation_date": 1499877443, "question_id": 45063293, "link": "https://stackoverflow.com/questions/45063293/opening-data-file-via-contextual-menu-crashes-app-before-my-code-begins", "title": "Opening data file via contextual menu crashes app before my code begins", "body": "<p>I don't even know how to debug this one. This app, developed using MFC in Visual Studio, has worked well for many years but I got a customer report that it was crashing when a data file was being opened in Windows by right-clicking on the file in Explorer and selecting \"Open with...\". The customer also reports that a crash ensues whenever he tries to open a file from within Outlook.</p>\n\n<p>I checked, and sure enough, that does happen consistently. I consistently get a crash with the message \"An unhandled Win32 exception occurred in MyApp.exe [<em>nnnn</em>].\" <em>nnnn</em> is a 4-digit number, not always the same. The most recent value it had was 2322. I then choose to debug with Visual Studio 2010, and next I get an alert \"Unhandled exception at 0x00c72cf3 in MyApp.exe: 0xC0000005: Access violation reading location 0x00000000.\" The debugger shows the break location as being inside <code>_heap_alloc(size)</code>, which was called from <code>_malloc_base(size)</code> with a reasonable value of <code>size</code> (around 6500000 usually). </p>\n\n<p>The debugger shows me that the code is in <code>msvcr100.dll!malloc(size)</code> but provides no further useful information about the call stack. I've tried setting the next execution location, thinking I might step out to see where it goes, but I first get a message that I will have the wrong stack frame and be in a different function. Pressing onward and trying to step out of <code>_malloc_base()</code> I quickly run into a situation where the debugger tells me the source isn't available.</p>\n\n<p>I've peppered my code with log messages, none of which are ever encountered. As nearly as I can tell, the crash is happening somewhere within <code>__DllMainCRTStartup()</code> long before execution even reaches <code>MyApp::InitInstance()</code> where my code begins.</p>\n\n<p>The digging I've done so far suggested that I should run <code>sfc/scannow</code> at a command propmt, using Admin privileges, to scan for corruption in the system. I did that, and got back a \"no problem\" report. </p>\n\n<p>I've done most of my testing on Windows 7 Ultimate (32 bit), but the problem happens consistently on Windows 10 as well.</p>\n\n<p>The app works well when files are opened via either the File menu or by drag-and-drop.</p>\n\n<p>Given that the crash seems to be happening in the Microsoft-provided app startup code, I am currently at a loss as how to even proceed to further debug or fix the problem.</p>\n\n<p>Everything works fine when I drag a data file onto the app icon. I had thought that that would trigger the same sequence of events that right-clicking on the data and selecting the app via \"Open With..\" would do, but that doesn't appear to be the case. </p>\n\n<hr>\n\n<p>I'd like to start the app in the debugger and give it the same initial data it would get if I launched it via the contextual menu, but I have no idea how to do that.</p>\n\n<p>Any suggestions will be welcome.</p>\n"}, {"tags": ["c++", "scala", "polymorphism"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1499877106, "post_id": 45063003, "comment_id": 77099568, "body": "So what are you asking? How can we make <code>C++</code> accept Scala syntax? What problem are you trying to solve here? How to extend class functionality without extending the class?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499877288, "post_id": 45063003, "comment_id": 77099657, "body": "This question seems like <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">an XY problem</a>: You have a solution you want our help with, but doesn&#39;t tell us what the problem it is supposed to solve. Since you can&#39;t really do what you want there may be other solutions to your problem that you have missed."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1499880023, "post_id": 45063003, "comment_id": 77101081, "body": "C++ doesn&#39;t have extension-methods contrary to C#."}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1499877464, "post_id": 45063249, "comment_id": 77099752, "body": "I think OP wants to use <code>frobnicate</code> from a <code>Foo</code> instance instead of <code>Bar</code>. Basically, letting the compiler implicitly cast a <code>Foo</code> to a <code>Bar</code> to call the function."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1499877500, "post_id": 45063249, "comment_id": 77099772, "body": "FYI: <a href=\"http://www.cplusplus.com\" rel=\"nofollow noreferrer\">cplusplus.com</a> is not a very reliable source, consider using <a href=\"http://cppreference.com\" rel=\"nofollow noreferrer\">cppreference.com</a> instead."}, {"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1499878143, "post_id": 45063249, "comment_id": 77100110, "body": "@Rakete1111 yep, that&#39;s why I said &quot;While you can&#39;t do exactly what you are asking&quot; And the section I linked is good enough for what OP is asking, it&#39;s just the introductory tutorial"}], "tags": [], "owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "is_accepted": false, "score": 3, "last_activity_date": 1499877312, "creation_date": 1499877312, "answer_id": 45063249, "question_id": 45063003, "link": "https://stackoverflow.com/questions/45063003/pimp-my-library-in-c/45063249#45063249", "title": "&quot;Pimp my Library&quot; in C++", "body": "<p>While you can't do exactly what you are asking you can inherit <code>Foo</code> and extend it.</p>\n\n<pre><code>class Bar : public Foo{\npublic:\nvoid frobnicate() {\n    cout &lt;&lt; \"Frobnicating :)\" &lt;&lt; endl;\n  }\n}\n</code></pre>\n\n<p>now <code>Bar</code> has everything <code>Foo</code> has plus the new method. see <a href=\"http://www.cplusplus.com/doc/tutorial/inheritance/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/tutorial/inheritance/</a></p>\n"}, {"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 9, "last_activity_date": 1499879608, "last_edit_date": 1499879608, "creation_date": 1499877470, "answer_id": 45063300, "question_id": 45063003, "link": "https://stackoverflow.com/questions/45063003/pimp-my-library-in-c/45063300#45063300", "title": "&quot;Pimp my Library&quot; in C++", "body": "<p>What you are describing is called <strong>U</strong>nified <strong>F</strong>unction <strong>C</strong>all <strong>S</strong>yntax (UFCS), and cannot be done in C++ as of today. Anyone who has worked with ranges and algorithm chaining in D can attest to how amazing that would be to have.</p>\n\n<p>The lack of UFCS support is actually one of the main reason why the general modern wisdom is to use free-floating functions and ADL for anything that does not need to be virtual or encapsulation.</p>\n\n<p>There has been proposals to bring D's UFCS to the language, but it's still just a proposal:</p>\n\n<p><a href=\"https://isocpp.org/files/papers/N4165.pdf\" rel=\"nofollow noreferrer\">https://isocpp.org/files/papers/N4165.pdf</a></p>\n\n<p><strong>Edit:</strong> For anyone wondering why we would ever want that feature, imagine being able to write the following:</p>\n\n<pre><code>std::vector&lt;int&gt; foo(const std::vector&lt;int&gt;&amp; v) {\n  return v.filter([](int x) {return x &gt; 5;})\n          .map([](int x) {return x*x;})\n          .sort();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 1, "last_activity_date": 1499877629, "creation_date": 1499877629, "answer_id": 45063341, "question_id": 45063003, "link": "https://stackoverflow.com/questions/45063003/pimp-my-library-in-c/45063341#45063341", "title": "&quot;Pimp my Library&quot; in C++", "body": "<blockquote>\n  <p>C++ doesn't seem to look for implicit conversions in that context.</p>\n</blockquote>\n\n<p>That is correct.  The mechanism you're looking for doesn't exist in the language.</p>\n"}], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 1, "accepted_answer_id": 45063300, "answer_count": 3, "score": 5, "last_activity_date": 1499879608, "creation_date": 1499876448, "question_id": 45063003, "link": "https://stackoverflow.com/questions/45063003/pimp-my-library-in-c", "title": "&quot;Pimp my Library&quot; in C++", "body": "<p>In Scala, there's a design pattern often called \"pimp my library\". The basic idea is that we have some class <code>Foo</code> (presumably in some library that we can't modify), and we want <code>Foo</code> to act like it has some method or behavior <code>frobnicate</code>, we can use an implicit class to add the method after the fact.</p>\n\n<pre><code>implicit class Bar(val foo: Foo) extends AnyVal {\n  def frobnicate(): Unit = {\n    // Something really cool happens here ...\n  }\n}\n</code></pre>\n\n<p>Then, if we have an instance of <code>Foo</code>, we can call <code>frobnicate</code> on it and, as long as <code>Bar</code> is in scope, the Scala compiler will be smart enough to implicitly cast <code>Foo</code> to <code>Bar</code>.</p>\n\n<pre><code>val foo = new Foo()\nfoo.frobnicate() // Correctly calls new Bar(foo).frobnicate()\n</code></pre>\n\n<p>I'd like to do this same sort of thing in C++. I know that C++ has implicit casts, but they don't seem to trigger when accessing members. For a concrete example, the following code in C++ produces an error.</p>\n\n<pre><code>class Foo {}; // Assume we can't modify this class Foo\n\nclass Bar {\nprivate:\n  Foo foo;\npublic:\n  Bar(Foo foo) : foo(foo) {}\n  void frobnicate() {\n    cout &lt;&lt; \"Frobnicating :)\" &lt;&lt; endl;\n  }\n};\n\nvoid frobnicate(Bar bar) {\n  cout &lt;&lt; \"Frobnicating :)\" &lt;&lt; endl;\n}\n\nint main() {\n  Foo value;\n  frobnicate(value);  // This works\n  value.frobnicate(); // But this doesn't\n  return 0;\n}\n</code></pre>\n\n<p>On the <code>value.frobnicate()</code> line, C++ doesn't seem to look for implicit conversions in that context.</p>\n\n<blockquote>\n  <p>main.cc:30:9: error: \u2018class Foo\u2019 has no member named \u2018frobnicate\u2019</p>\n</blockquote>\n\n<p><em>Note: I'm compiling with C++11 right now. At a cursory glance at the newer C++ versions, it doesn't seem like anything that would affect this question has changed since then. C++11-compatible solutions are ideal, but a way to do this in newer C++ versions would be good as well, for didactic purposes.</em></p>\n"}, {"tags": ["c++", "scientific-notation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1499876436, "post_id": 45062975, "comment_id": 77099220, "body": "Use the std::fixed manipulator <a href=\"http://en.cppreference.com/w/cpp/io/manip/fixed\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/fixed</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1499876493, "post_id": 45062975, "comment_id": 77099255, "body": "<a href=\"http://en.cppreference.com/w/cpp/io/manip/fixed\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/fixed</a>"}], "owner": {"reputation": 9, "user_id": 8257271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a434d70ef32055581630c36a5d19baa?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett B.", "link": "https://stackoverflow.com/users/8257271/garrett-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1499876530, "answer_count": 0, "score": 0, "last_activity_date": 1499876341, "creation_date": 1499876341, "question_id": 45062975, "link": "https://stackoverflow.com/questions/45062975/stop-numbers-going-into-scientific-notation", "closed_reason": "Duplicate", "title": "Stop numbers going into Scientific notation", "body": "<p>I have doubles that are very big and keep going into Scientific notation (e.g. 3.12002769e+27) when outputted. How can I stop this as I'm writing to a file and can't have this.</p>\n"}, {"tags": ["c++", "cmake", "libraries"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499876234, "post_id": 45062895, "comment_id": 77099104, "body": "If you set up the target dependencies correctly then only one of each library needed will be used by CMake. Not that it matters since even for static libraries it should not actually include the libraries twice. Once a symbol have been resolved and put into the executable, the linker will not search for that symbol in other libraries."}, {"owner": {"reputation": 61, "user_id": 6916748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9043f11dcac5a09f8f52bdb0c1f072f6?s=128&d=identicon&r=PG&f=1", "display_name": "MaXL130", "link": "https://stackoverflow.com/users/6916748/maxl130"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499877326, "post_id": 45062895, "comment_id": 77099679, "body": "@Someprogrammerdude Does that mean, that it is good style to include LIB3 explicitly in the root CMakeLists.txt, so that the dependency is not hidden behind another lib?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499877607, "post_id": 45062895, "comment_id": 77099828, "body": "The FindLib3.cmake script probably already sets up <code>LIB3</code> as a top-level imported library-target, which means you only have to add it to to the dependency list of <code>LIB1</code> and <code>LIB2</code>, then CMake will automatically handle it for you. You might do it with the <a href=\"https://cmake.org/cmake/help/latest/command/add_dependencies.html\" rel=\"nofollow noreferrer\"><code>add_dependencies</code></a> command, like <code>add_dependencies(LIB1 LIB3)</code>"}, {"owner": {"reputation": 61, "user_id": 6916748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9043f11dcac5a09f8f52bdb0c1f072f6?s=128&d=identicon&r=PG&f=1", "display_name": "MaXL130", "link": "https://stackoverflow.com/users/6916748/maxl130"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499878183, "post_id": 45062895, "comment_id": 77100126, "body": "@Someprogrammerdude LIB1 and LIB2 are not libraries I wrote myself. More concretly, I am trying to set up the PointCloudLibrary (PCL). PCL has it&#39;s own Config, that does include f.a. Boost by itself. Given this context, I could find Boost  at first, but after that I need to find PCL, which than does search for Boost, without me being able to avoid that (as far as I know). So what should I do?  Link to PCL: <a href=\"http://pointclouds.org/\" rel=\"nofollow noreferrer\">pointclouds.org</a>"}], "owner": {"reputation": 61, "user_id": 6916748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9043f11dcac5a09f8f52bdb0c1f072f6?s=128&d=identicon&r=PG&f=1", "display_name": "MaXL130", "link": "https://stackoverflow.com/users/6916748/maxl130"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499876061, "creation_date": 1499876061, "question_id": 45062895, "link": "https://stackoverflow.com/questions/45062895/cmake-avoid-adding-libraries-more-than-once", "title": "CMake: Avoid adding libraries more than once", "body": "<p>I am trying to set up a C++ project using CMake. In the end, there will be at least two big libraries, that I will need to use.</p>\n\n<p>Those big libraries themselves, lets call them LIB1 and LIB2, depend on another library, called LIB3. I also want to directly use LIB3.</p>\n\n<p>LIB1 and LIB2 are including LIB3 automaticly using their Find.cmake files.</p>\n\n<p>My question is: Does CMake notice, that LIB1 and LIB2 are including the same library? Do I even need to specify in the main CMakeLists.txt, that I want to use LIB3, too, as a direct dependency of my main application?</p>\n\n<p>How can I guarantee, that if there is more than one version of LIB3, that all other libs are including the same files?</p>\n"}, {"tags": ["c++", "hash", "pbkdf2"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499876253, "post_id": 45062886, "comment_id": 77099118, "body": "I think you have a misunderstanding of how PBKDF2 works, I would suggest researching that first."}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499876349, "post_id": 45062886, "comment_id": 77099171, "body": "@Mgetz, in my opinion I know how it works. I had it working returning me a 1024 length string however I switched to MSVC and now it keeps returning me a 16 length string? So how is this able to happen and what did I misunderstood about PBKDF2?"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499876654, "post_id": 45062886, "comment_id": 77099355, "body": "&quot;The derived key will be written to out. The size of the out buffer is specified via keylen&quot; the size of the buffer is not the size of the resultant key which is based on the hash. The difference is that windows zeros memory in most cases when using <code>new</code> and array syntax, or perhaps you just happened to get a page that had been previously zeroed."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499876824, "post_id": 45062886, "comment_id": 77099422, "body": "side note: this was always a variable thing because hashes can return null bytes, you can&#39;t use <code>strlen</code> on them."}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499876869, "post_id": 45062886, "comment_id": 77099451, "body": "@Mgetz, right. So how can I fix this? I indeed changed the digest initialization in order to compile with MSVC from <code>unsigned char* digest[HashLength];</code> into <code>unsigned char* digest = new unsigned char[HashLength]</code>. Is that what is giving me this unexpected behavior?"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499877180, "post_id": 45062886, "comment_id": 77099599, "body": "not unexpected at all, although you are flirting with &quot;undefined behavior&quot; in your code for other reasons. The output of a PBKDF2 run is determined by the hash algorithm which in this case is sha512, which produces a 512 bit result or 64bytes.  Although the fact you&#39;re getting back 16 would indicate to me that you&#39;re probably not passing in the hash you think you are."}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499877898, "post_id": 45062886, "comment_id": 77099991, "body": "@Mgetz, what are you referring to with &#39;hash&#39;, since it takes a password and salt?"}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1499878406, "post_id": 45062886, "comment_id": 77100264, "body": "@Mgetz, when I increase both the salt and password size and length (which I validate in the function and is identical), the output stays 16 still. So, the output is the hash right? So what do you mean with your last phrase  &quot;you&#39;re probably not passing in the hash you think you are&quot;. I also use meest to clear the hash as you can see at my edited question <code>memset(PBKDF2Hash, 0, sizeof(PBKDF2Hash));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 0, "creation_date": 1499886113, "post_id": 45064574, "comment_id": 77104573, "body": "Oke, but how should I change <code>digest[i]</code> within that for loop you are referring to with changing the range by <code>HashLength</code>? Since the <code>digest[i]</code> won&#39;t reach the same range as <code>HashLength</code> will? Should I use <code>delete digest</code> at the end of the function?"}, {"owner": {"reputation": 3140, "user_id": 700650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9babd166888c602545c93f15f4ce139?s=128&d=identicon&r=PG", "display_name": "Xiaotian Pei", "link": "https://stackoverflow.com/users/700650/xiaotian-pei"}, "reply_to_user": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 1, "creation_date": 1499888843, "post_id": 45064574, "comment_id": 77105931, "body": "@TVAvanHesteren, I don&#39;t follow. What do you mean by change digest[i], I don&#39;t see it&#39;s changed in the loop."}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 0, "creation_date": 1499889970, "post_id": 45064574, "comment_id": 77106532, "body": "Well you tell me to increase the upper limit of the for loop right? Within the loop the function also uses digest[i], what should I do if I change the upper limit to the HashLength with the digest within the loop itself?"}, {"owner": {"reputation": 3140, "user_id": 700650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9babd166888c602545c93f15f4ce139?s=128&d=identicon&r=PG", "display_name": "Xiaotian Pei", "link": "https://stackoverflow.com/users/700650/xiaotian-pei"}, "reply_to_user": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 1, "creation_date": 1499892765, "post_id": 45064574, "comment_id": 77107858, "body": "@TVAvanHesteren, I guess you don&#39;t need to change anything else. But I am not 100% sure since I do not fully understand what you are trying to achieve."}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 0, "creation_date": 1499922533, "post_id": 45064574, "comment_id": 77116226, "body": "Have a look within the for loop for the sprintf command which works with digest[i]. This range won&#39;t be as long as the HashLength range right? So I will also have to change that or will it be long enough?"}, {"owner": {"reputation": 3140, "user_id": 700650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9babd166888c602545c93f15f4ce139?s=128&d=identicon&r=PG", "display_name": "Xiaotian Pei", "link": "https://stackoverflow.com/users/700650/xiaotian-pei"}, "reply_to_user": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 1, "creation_date": 1499928182, "post_id": 45064574, "comment_id": 77118893, "body": "@TVAvanHesteren, what range are you talking about? Does this range mean out? digest&#39;s length is  HashLength, out&#39;s length is 2 * HashLength. Is there anything wrong with this?"}, {"owner": {"reputation": 3140, "user_id": 700650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9babd166888c602545c93f15f4ce139?s=128&d=identicon&r=PG", "display_name": "Xiaotian Pei", "link": "https://stackoverflow.com/users/700650/xiaotian-pei"}, "reply_to_user": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 1, "creation_date": 1499928316, "post_id": 45064574, "comment_id": 77118954, "body": "@TVAvanHesteren, have you ever tried your code after my suggestion, is the output what you expected?"}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 0, "creation_date": 1499928752, "post_id": 45064574, "comment_id": 77119220, "body": "I can&#39;t validate this right now, but I will try your solution within 2 days. However, I expect that HashLength outranges the digest[i]. But I&#39;m not sure so I will have to validate this"}, {"owner": {"reputation": 3140, "user_id": 700650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9babd166888c602545c93f15f4ce139?s=128&d=identicon&r=PG", "display_name": "Xiaotian Pei", "link": "https://stackoverflow.com/users/700650/xiaotian-pei"}, "reply_to_user": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 1, "creation_date": 1499929387, "post_id": 45064574, "comment_id": 77119606, "body": "@TVAvanHesteren, What do you mean by &quot;HashLength outranges digest[i]&quot;? Why are you even comparing them. HashLength is the length of digest, digest[i] is just an element of the array."}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 0, "creation_date": 1499930178, "post_id": 45064574, "comment_id": 77120147, "body": "So the problem you define is just that sizeof(digest) for the upper limit of the for loop is the whole issue? I can increase this by HashLength without a problem?"}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "edited": false, "score": 0, "creation_date": 1499948983, "post_id": 45064574, "comment_id": 77133671, "body": "I just validated the encryption changing the upper for loop limit with HashLength, which returns me an encrypted string of the requested length again. Great work! Thanks"}], "tags": [], "owner": {"reputation": 3140, "user_id": 700650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9babd166888c602545c93f15f4ce139?s=128&d=identicon&r=PG", "display_name": "Xiaotian Pei", "link": "https://stackoverflow.com/users/700650/xiaotian-pei"}, "is_accepted": true, "score": 2, "last_activity_date": 1499882385, "last_edit_date": 1499882385, "creation_date": 1499882076, "answer_id": 45064574, "question_id": 45062886, "link": "https://stackoverflow.com/questions/45062886/c-pbkdf2-issue/45064574#45064574", "title": "C++ PBKDF2 Issue", "body": "<p>Since <code>digest</code> is a <code>pointer</code>, <code>sizeof(digest)</code> will not give the length of the array. Depending on different platforms, <code>sizeof(digest)</code> may give you 4 or 8, which is not what you want. Maybe you should use <code>for (i = 0; i &lt; HashLength; i++)</code>.</p>\n\n<p>Another unrelated issue of your code is that, <code>digest</code> is not deleted in <code>PBKDF2_HMAC_SHA_512_string</code>, which causes <code>memory leak</code></p>\n"}], "owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 45064574, "answer_count": 1, "score": 0, "last_activity_date": 1499882455, "creation_date": 1499876020, "last_edit_date": 1499882455, "question_id": 45062886, "link": "https://stackoverflow.com/questions/45062886/c-pbkdf2-issue", "title": "C++ PBKDF2 Issue", "body": "<p>I have the following function:</p>\n\n<pre><code>void PBKDF2_HMAC_SHA_512_string(const char* pass, const char* salt, int32_t iterations, uint32_t HashLength, char* out) {\n    unsigned int i;\n    HashLength = HashLength / 2;\n    unsigned char* digest = new unsigned char[HashLength];\n    PKCS5_PBKDF2_HMAC(pass, strlen(pass), (const unsigned char*)salt, strlen(salt), iterations, EVP_sha512(), HashLength, digest);\n    for (i = 0; i &lt; sizeof(digest); i++) {\n        sprintf(out + (i * 2), \"%02x\", 255 &amp; digest[i]);\n    }\n}\n</code></pre>\n\n<p>When I call the function like below, I expect to get a hash back of 2400 in length, however it returns me 16:</p>\n\n<pre><code>char PBKDF2Hash[1025]; //\\0 terminating space?\nmemset(PBKDF2Hash, 0, sizeof(PBKDF2Hash));\nPBKDF2_HMAC_SHA_512_string(\"Password\", \"0123456789123456\", 3500, 1024, PBKDF2Hash);\n//PBKDF2Hash is now always 16 long -&gt; strlen(PBKDF2Hash),\n//while I expect it to be 2400 long?\n//How is this possible and why is this happening?\n//I can't figure it out\n</code></pre>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499876056, "post_id": 45062788, "comment_id": 77099014, "body": "You say &quot;C++ Primer 4th edition&quot;. Please disambiguate by providing an author name (&amp; ideally an ISBN)"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 0, "creation_date": 1499876766, "post_id": 45062850, "comment_id": 77099400, "body": "I just tried replacing  cin.clear(istream::failbit) with cin.clear() but it still didn&#39;t work. So how can I clear the buffer? I know this book is really old but it still helps. For the comma thing I think &quot;a, b&quot; is an expression that returns b."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 0, "creation_date": 1499877759, "post_id": 45062850, "comment_id": 77099910, "body": "@GuojunZhang: Yeah you have to do <i>everything</i> I said, not just part of it"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 0, "creation_date": 1499877815, "post_id": 45062850, "comment_id": 77099935, "body": "@GuojunZhang: Yes, <code>a, b</code> evaluates to <code>b</code>, but <code>a &lt;&lt; b, c</code> may not do exactly what you&#39;re expecting; depends on the relationship between <code>&lt;&lt;</code> and <code>,</code>. I don&#39;t have time to check right now and my favourite expression checking tool has gone offline :( (<code>geordi --precedence &lt;expr&gt;</code>)"}, {"owner": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 1, "creation_date": 1499880438, "post_id": 45062850, "comment_id": 77101307, "body": "I guess while ((cin &gt;&gt; ival) &amp;&amp; !cin.eof()) does not help because when you input a string cin &gt;&gt; ival automatically fails, which is not the goal of the program."}, {"owner": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 0, "creation_date": 1499880503, "post_id": 45062850, "comment_id": 77101342, "body": "never mind, I think this piece of code is outdated so I just give up."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 0, "creation_date": 1499880576, "post_id": 45062850, "comment_id": 77101396, "body": "@GuojunZhang: Yeah that&#39;s a really good point actually. I didn&#39;t spot that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "edited": false, "score": 0, "creation_date": 1499880590, "post_id": 45062850, "comment_id": 77101402, "body": "@GuojunZhang: hehe okay"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1499880617, "last_edit_date": 1499880617, "creation_date": 1499875884, "answer_id": 45062850, "question_id": 45062788, "link": "https://stackoverflow.com/questions/45062788/interrogating-and-controlling-state-of-the-stream/45062850#45062850", "title": "interrogating and controlling state of the stream", "body": "<p>When you enter a string, extraction into <code>ival</code> fails and the <em>failbit</em> is set. You then dutifully attempt to clear the bit and continue. But that string is still in the buffer! So the act repeats forever.</p>\n\n<p>Furthermore, <a href=\"https://stackoverflow.com/a/11247530/560648\">you didn't <em>actually</em> clear the bit; you just set the stream state to <em>failbit</em></a>.</p>\n\n<p>You'll need to call just <code>std::cin.clear()</code>, then pull out the unexpected data from the buffer before you continue.</p>\n\n<p><strike>Also, <code>while (cin &gt;&gt; ival, !cin.eof())</code> is odd; I haven't checked the behaviour or precedence but I guess you'd just write <code>while ((cin &gt;&gt; ival) &amp;&amp; !cin.eof())</code>.</strike></p>\n\n<p>In conclusion, if this is really the code in the book, you need a much better book because the code is wrong in several serious ways. If you're really programming C++14, you need a more up-to-date book anyway since Lippman's C++ Primer wasn't even updated for C++11 until the 5th edition.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1499882722, "creation_date": 1499882722, "answer_id": 45064743, "question_id": 45062788, "link": "https://stackoverflow.com/questions/45062788/interrogating-and-controlling-state-of-the-stream/45064743#45064743", "title": "interrogating and controlling state of the stream", "body": "<p>Finally made it work by adding cin.ignore(INT_MAX, '\\n'). This line is necessary because cin.clear() only removes the error flag while the data remains in the buffer. In order to clear the buffer cin.ignore is needed.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{\n    int ival;\n    // read cin and test only for EOF; loop is executed even if there are\n    // other IO failures\n    while (cin &gt;&gt; ival, (!cin.eof())){\n        if (cin.bad())  // input stream is corrupted; bail out\n            throw runtime_error(\"IO stream corrupted\");\n        if (cin.fail()){\n            cerr &lt;&lt; \"bad data, try again\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(INT_MAX, '\\n');\n        }\n        //ok to process ival\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8261298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qNPMOjxLDfY/AAAAAAAAAAI/AAAAAAAAAGQ/PLiQ17OseNo/photo.jpg?sz=128", "display_name": "Guojun Zhang", "link": "https://stackoverflow.com/users/8261298/guojun-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499882722, "creation_date": 1499875690, "last_edit_date": 1499875809, "question_id": 45062788, "link": "https://stackoverflow.com/questions/45062788/interrogating-and-controlling-state-of-the-stream", "title": "interrogating and controlling state of the stream", "body": "<p>I am learning C++ Primer 4th edition now and playing with IO stream. When I tried to run the code in the book (Page 289):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{\n    int ival;\n    // read cin and test only for EOF; loop is executed even if there are\n    // other IO failures\n    while (cin &gt;&gt; ival, !cin.eof()){\n        if (cin.bad())  // input stream is corrupted; bail out\n            throw runtime_error(\"IO stream corrupted\");\n        if (cin.fail()){\n            cerr &lt;&lt; \"bad data, try again\\n\";\n            cin.clear(istream::failbit);\n            continue;\n        }\n        //ok to process ival\n    }\n}\n</code></pre>\n\n<p>I met an infinite loop after typing a string (say \"as\"). So what is wrong with this code?</p>\n"}, {"tags": ["c++", "winapi"], "owner": {"reputation": 164, "user_id": 7623227, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fc3506d9f3e1c1923a2b8d311f094780?s=128&d=identicon&r=PG&f=1", "display_name": "dornadigital", "link": "https://stackoverflow.com/users/7623227/dornadigital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499877866, "creation_date": 1499875498, "last_edit_date": 1499877866, "question_id": 45062726, "link": "https://stackoverflow.com/questions/45062726/what-is-jobobject-cpu-rate-control-information-minrate", "title": "What is JOBOBJECT_CPU_RATE_CONTROL_INFORMATION MinRate?", "body": "<p>I'm pinvoking some c++ Job object functions, and I implemented both MinRate and MaxRate. MaxRate is self explanatory, I lower it and my program slows down, but what does MinRate do?</p>\n\n<p>The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh448384(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> says that it reserves a certain amount of processor cycles, but the rest of my system can still use those cycles even with the number absurdly high (9990).</p>\n\n<p>Does this indicate an error in my code, or is there some \"soft\" reservation the nuance and purpose of which escapes me?</p>\n"}, {"tags": ["c++", "macos-sierra", "guile"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499875466, "post_id": 45062678, "comment_id": 77098678, "body": "Did you actually link the library when building your application? With <code>-lffi</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499875544, "post_id": 45062678, "comment_id": 77098721, "body": "Did you follow the instructions on how to properly link Guile? <a href=\"https://www.gnu.org/software/guile/manual/guile.html#Linking-Guile-into-Programs\" rel=\"nofollow noreferrer\">gnu.org/software/guile/manual/&hellip;</a> perhaps (though I&#39;m not sure which &quot;guile&quot; you&#39;re referring to)"}, {"owner": {"reputation": 31, "user_id": 8283481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIewD.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/8283481/john"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499948357, "post_id": 45062678, "comment_id": 77133065, "body": "The linking is done via a Makefile that is generated via a configure file.  The configure file, in turn, is generated using auto tools, and the whole process starts from a download of guile-2.0.11 package from the GitHub repository and running the autogen.sh script file found in that package.  More details of the options to the configure command and output from make can be found here: [link] (<a href=\"https://stackoverflow.com/questions/45013549/build-of-guile-2-0-11-on-macos-sierra-fails-undefined-symbols-for-architecture\" title=\"build of guile 2 0 11 on macos sierra fails undefined symbols for architecture\">stackoverflow.com/questions/45013549/&hellip;</a>)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499949433, "post_id": 45062678, "comment_id": 77134084, "body": "In other words, no."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8283481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIewD.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/8283481/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1503717232, "last_edit_date": 1503717232, "creation_date": 1500037144, "answer_id": 45103652, "question_id": 45062678, "link": "https://stackoverflow.com/questions/45062678/where-are-ffi-symbols-defined/45103652#45103652", "title": "Where are ffi symbols defined?", "body": "<p>In Makefile, there is an environment variable (LIBFFI_LIBS) that specifies the path to the ffi library. I was missing the flag telling the linker to actually link the library. </p>\n\n<p>I changed its value from <code>LIBFFI_LIBS=\"-L/usr/local/opt/libffi/lib\"</code> to <code>LIBFFI_LIBS=\"-L/usr/local/opt/libffi/lib -lffi\"</code> and all errors about undefined ffi symbols have now disappeared.</p>\n"}], "owner": {"reputation": 31, "user_id": 8283481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIewD.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/8283481/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503717232, "creation_date": 1499875372, "last_edit_date": 1500037234, "question_id": 45062678, "link": "https://stackoverflow.com/questions/45062678/where-are-ffi-symbols-defined", "title": "Where are ffi symbols defined?", "body": "<p>I am trying to link a file, \"lib guile_2.0_la-foreign.o\" in order to build guile-2.0.11 on macOS Sierra.  The ld command from the make file returns more than a dozen errors similar to</p>\n\n<pre><code>\"_ffi_type_float\", referenced from:\n_fill_ffi_type in lib guile_2.0_la-foreign.o\n\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>where the \"_ffi_type_xxx\" varies in the \"xxx\" position.  I have installed libffi with hombrew, and have told CPPFLAGS and LDFLAGS where to find the lib and include directories, but I still get the same error.  Where are these symbols to be found?</p>\n"}, {"tags": ["c++", "image-processing", "raspberry-pi", "raspbian", "raspistill"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499875206, "post_id": 45062614, "comment_id": 77098504, "body": "IRTA &quot;racism&quot; to begin with heh"}, {"owner": {"reputation": 43, "user_id": 3776643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/629748387/picture?type=large", "display_name": "user3776643", "link": "https://stackoverflow.com/users/3776643/user3776643"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499876082, "post_id": 45062614, "comment_id": 77099030, "body": "lol maybe THAT&#39;S the real problem here"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499876151, "post_id": 45062614, "comment_id": 77099062, "body": "did you just assume my compiler error"}], "owner": {"reputation": 43, "user_id": 3776643, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/629748387/picture?type=large", "display_name": "user3776643", "link": "https://stackoverflow.com/users/3776643/user3776643"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1499875174, "creation_date": 1499875174, "question_id": 45062614, "link": "https://stackoverflow.com/questions/45062614/raspicam-and-c-camera-not-repoening-properly-after-a-release-call", "title": "Raspicam and C++: camera not repoening properly after a release() call", "body": "<p>I am using c++ and raspicam to take an image when certain conditions are hit in the image pixel values.  When the conditions are hit, I release the camera in the c++ code, call a bash script that invokes raspistill, then reopen the camera once the bash script has completed.  </p>\n\n<p>Unfortunately, when I reopen the camera, the data that I retrieve from the camera is stuck in the same state that it was in my last frame before releasing the camera.  I even tried jogging the camera for a few frames in my init method, but no dice.  All of my computed image values are stuck on the same vaule after it works once.</p>\n\n<p>Has anybody run into this issue before?  I know I could work around it by having the c++ program exit when it finds what I'm looking for and wrapping it in a bash script while loop, but this is bothering me.  </p>\n\n<p>For reference, I am on Raspbian 8 (jessie) and using  A Raspberry Pi NoIR Camera V2.</p>\n\n<p>Here is my main method including the main processing loop:</p>\n\n<pre><code>int main ( int argc,char **argv ) {\n\nraspicam::RaspiCam Camera = init_camera();\n// Allocate memory for camera buffer\nint bytes = Camera.getImageTypeSize ( raspicam::RASPICAM_FORMAT_GRAY );\nunsigned char *data=new unsigned char[bytes];\n\nunsigned int sum = 0;\nint consec_pass = 0;\nint finger_cnt = 0;\n\n// main processing loop\nwhile (true)\n{\n    // Capture frame\n    Camera.grab();\n\n    // Extract the image\n    Camera.retrieve (data,raspicam::RASPICAM_FORMAT_IGNORE);\n\n    int dmin = 255;\n    int dmax = 0;\n    int nmin = 0;\n    int nmax = 0;\n    for (int i = 0; i &lt; bytes; i++)\n    {\n        if (data[i] &lt; dmin)\n            dmin = data[i];\n        if (data[i] &gt; dmax)\n            dmax = data[i];\n    }\n    for (int i = 0; i &lt; bytes; i++)\n    {\n        if (data[i] &lt; dmin + 5)\n            nmin++;\n        if(data[i] &gt; dmax - 5)\n            nmax++;\n    }\n\n    cout &lt;&lt; \"nmin, nmax, dmin, dmax \" &lt;&lt; nmin &lt;&lt; nmax &lt;&lt; dmin &lt;&lt; dmax &lt;&lt; \"\\n\";\n    if ((nmin &gt; NMIN_THRESH) &amp;&amp; (nmax &gt; NMAX_THRESH) &amp;&amp; (dmin &lt; MIN_THRESH) &amp;&amp; (dmax &lt; MAX_THRESH))\n        consec_pass++;\n    else\n        consec_pass = 0;\n    if (consec_pass &gt; CONSEC_THRESH)\n    {\n        finger_cnt++;\n        cout &lt;&lt; \"FOUND FINGER! \" &lt;&lt; finger_cnt &lt;&lt; \"\\n\";\n        cout&lt;&lt;\"Closing camera and calling bash script to take image... \\n\";\n        Camera.release();\n        std::string script_str ( \"~/GetImage.sh \");\n            std::string num_str(std::to_string(finger_cnt));\n        system((script_str + num_str).c_str());\n        cout&lt;&lt;\"Done! Reinitializing camera\";\n        Camera = init_camera();\n        consec_pass = 0;\n    }   \n}\n</code></pre>\n\n<p>And here is the init_camera() method referenced</p>\n\n<pre><code>raspicam::RaspiCam init_camera(){\n\nraspicam::RaspiCam cam;\ncam.setFormat(raspicam::RASPICAM_FORMAT_GRAY);\ncam.setExposure(raspicam::RASPICAM_EXPOSURE_NIGHT);\n\n// Open camera \ncout&lt;&lt;\"Opening Camera...\"&lt;&lt;endl;\nif ( !cam.open()) {cerr&lt;&lt;\"Error opening camera\"&lt;&lt;endl;}\n\n// Wait until camera stabilizes\ncout&lt;&lt;\"Sleeping for 1 secs\"&lt;&lt;endl;\nusleep(1000000);\n\ncout&lt;&lt;\"Jogging the camera\";\n\nint bytes = cam.getImageTypeSize ( raspicam::RASPICAM_FORMAT_GRAY );\nunsigned char *data=new unsigned char[bytes];\n\nfor (int i = 0; i &lt; 5; i++)\n{\n    // Capture frame\n    cam.grab();\n\n    // Extract the image\n    cam.retrieve (data,raspicam::RASPICAM_FORMAT_IGNORE);\n}\nreturn cam;}\n</code></pre>\n\n<p>Finally here is the bash script I'm using (just a one-liner)</p>\n\n<pre><code>raspistill -w 400 -h 300 -co 75 -sh 100 -e png -roi 0.0,0.0,0.85,0.85 -t 2000 -o fingerprint$1.png \n</code></pre>\n\n<p>Sorry for the messy formatting, can't get it to copy in quite right from gedit</p>\n"}, {"tags": ["c++", "reference", "constants"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 3, "creation_date": 1499874409, "post_id": 45062285, "comment_id": 77097910, "body": "&quot;It results in compile time error.&quot; what does the compiler say? Usually the problem is written right there."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1499874416, "post_id": 45062285, "comment_id": 77097916, "body": "You want us to explain your own code to you? Also even if it did compile, what you&#39;re attempting to do is undefined behavior, so don&#39;t."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1499874493, "post_id": 45062285, "comment_id": 77097964, "body": "There are no pointers in your code, just a reference. And you are trying to modify a <code>const int</code> through a non<code>const</code> reference. It should be obvious why that won&#39;t work."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1499874818, "post_id": 45062285, "comment_id": 77098205, "body": "<code>T&amp; variable</code> declares a variable of type <code>T&amp;</code> - T reference. It does not declare a variable of type <code>T*</code> which would be a pointer to T."}, {"owner": {"reputation": 1, "user_id": 8282476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d557238ea82cfc2f824791a9a68fead7?s=128&d=identicon&r=PG&f=1", "display_name": "Aroona", "link": "https://stackoverflow.com/users/8282476/aroona"}, "edited": false, "score": 0, "creation_date": 1499875133, "post_id": 45062285, "comment_id": 77098442, "body": "Sorry it compiles successfully but with a warning. &quot;temporary used to initialize &#39;n&#39;. Basically I don&#39;t understand this code. someone asked to find out whats the output."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499875576, "post_id": 45062285, "comment_id": 77098735, "body": "@Aroona: Who asked you?"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1499874981, "creation_date": 1499874981, "answer_id": 45062547, "question_id": 45062285, "link": "https://stackoverflow.com/questions/45062285/please-explain-the-following-code-in-detail/45062547#45062547", "title": "Please explain the following code in detail", "body": "<p>I can see why you're having trouble with this pointer variable: <em>it isn't one</em>. It is a reference.</p>\n\n<p>You cannot have a non-<code>const</code> reference to a <code>const</code> thing. That would violate the <code>const</code>, and allow the <code>n = 11</code> line to succeed, thus again violating the original <code>const</code>.</p>\n\n<p><code>const</code> means \"I cannot and will not change this thing any more\".</p>\n\n<p>For more information, turn to the page in your C++ book about <code>const</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8282476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d557238ea82cfc2f824791a9a68fead7?s=128&d=identicon&r=PG&f=1", "display_name": "Aroona", "link": "https://stackoverflow.com/users/8282476/aroona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1499898403, "accepted_answer_id": 45062547, "answer_count": 1, "score": -7, "last_activity_date": 1499887593, "creation_date": 1499874311, "last_edit_date": 1499887593, "question_id": 45062285, "link": "https://stackoverflow.com/questions/45062285/please-explain-the-following-code-in-detail", "closed_reason": "Needs details or clarity", "title": "Please explain the following code in detail", "body": "<pre><code>const int m=10;    \nint &amp;n=m;    \nn=11;    \ncout &lt;&lt; m &lt;&lt; n;    \n</code></pre>\n\n<p>It results in compile time error. </p>\n\n<p>I am just unable to learn this pointer variable. Please explain. </p>\n"}, {"tags": ["c++", "visual-studio", "gcc"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1499874200, "post_id": 45062225, "comment_id": 77097780, "body": "The default implementation for <code>getSomething</code> is not valid c++. Shouldn&#39;t it also be pure virtual? What is the intention behind giving <code>getSomething</code> an empty body?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1499874405, "post_id": 45062225, "comment_id": 77097907, "body": "A function declared to return something, and that is implemented, <i>must</i> return something. It has nothing to do with inheritance or <code>virtual</code>, it&#39;s just that something must be returned from the function."}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 3, "creation_date": 1499874409, "post_id": 45062225, "comment_id": 77097911, "body": "Either make Interface::getSomething() pure virtual, or have it return something."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499874438, "post_id": 45062225, "comment_id": 77097931, "body": "I&#39;ve voted to close this as being caused by a simple typographic error. If you don&#39;t have an implementation in the current class, don&#39;t define one."}, {"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "edited": false, "score": 0, "creation_date": 1499874471, "post_id": 45062225, "comment_id": 77097950, "body": "@paperox do you want <i>some</i> classes that implement <code>getSomething()</code> and <i>all</i> classes implementing <code>someMethod()</code>? To do so you&#39;d need to break your original interface and derive from both when needed (multiple inheritance is allowed in C++)."}, {"owner": {"reputation": 11, "user_id": 4905130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c3dc69c0686818405aaa85a1b52cf4?s=128&d=identicon&r=PG&f=1", "display_name": "paperox", "link": "https://stackoverflow.com/users/4905130/paperox"}, "edited": false, "score": 0, "creation_date": 1499894497, "post_id": 45062225, "comment_id": 77108711, "body": "This is exactly what I need, but I don&#39;t know how to do it in practically. How to manage the situation when just some classes implement <code>someMethod</code>?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499941572, "post_id": 45062225, "comment_id": 77128278, "body": "@paperox Sergey asked if you need <i>all</i> classes to implement <code>someMethod()</code>, and you said that is exactly what you need, but then said you need only <i>some</i> classes to implement <code>someMethod()</code>. Which is it? Anyway, if you only need some classes to implement a method, two answers were already given: (A) declare the method pure virtual in the base and only implement where needed, or (B) create a new base class introducing the method and only inherit from that in classes that need to implement it. Which to choose depends on whether you need to instantiate classes that don&#39;t implement it."}, {"owner": {"reputation": 11, "user_id": 4905130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c3dc69c0686818405aaa85a1b52cf4?s=128&d=identicon&r=PG&f=1", "display_name": "paperox", "link": "https://stackoverflow.com/users/4905130/paperox"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499946729, "post_id": 45062225, "comment_id": 77131838, "body": "@underscore_d I need all classes to implement <code>someMethod()</code>, but only some implementing <code>getSomething()</code>, which returns some reference. I can&#39;t declare the <code>getSomething()</code> method pure virtual in the base class, otherwise I&#39;m forced to define its implementation in all derived.."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 8, "last_activity_date": 1499874313, "creation_date": 1499874313, "answer_id": 45062286, "question_id": 45062225, "link": "https://stackoverflow.com/questions/45062225/return-value-on-virtual-methods/45062286#45062286", "title": "Return value on virtual methods", "body": "<p>The function</p>\n\n<p><code>virtual QVector&lt;int &gt;&amp; getSomething(){}</code></p>\n\n<p>needs to return a reference to a <code>QVector&lt;int&gt;</code>. The empty function body that you have supplied by way of an <em>implementation</em> of this function is not doing that. Your helpful compiler is informing you of that.</p>\n"}], "owner": {"reputation": 11, "user_id": 4905130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c3dc69c0686818405aaa85a1b52cf4?s=128&d=identicon&r=PG&f=1", "display_name": "paperox", "link": "https://stackoverflow.com/users/4905130/paperox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499942895, "creation_date": 1499874122, "last_edit_date": 1499942895, "question_id": 45062225, "link": "https://stackoverflow.com/questions/45062225/return-value-on-virtual-methods", "title": "Return value on virtual methods", "body": "<p>I inherited an application that was building perfectly on clang and GCC. Now, I'm trying to port it on Windows. When I tried to built it with visual studio 2010 I got the error that I try to contextualize with the following example.</p>\n\n<p>Consider the <code>Interface</code> class:</p>\n\n<pre><code>class Interface\n{\npublic:\n\n    virtual ~Interface(){}\n\n    virtual void someMethod() = 0;\n    virtual QVector&lt;int &gt;&amp; getSomething(){}\n};\n</code></pre>\n\n<p>Where <code>someMethod</code> is pure virtual and <code>getSomething</code> is virtual.</p>\n\n<p>Then two derived classes <code>Derived</code></p>\n\n<pre><code>class Derived : public Interface\n{\npublic:\n    Derived(){ cout &lt;&lt; \"derived constructor\";}\n\n    ~Derived(){ cout &lt;&lt; \"derived destructor\";}\n\n    virtual void someMethod() override { cout &lt;&lt; \"derived someMethod\";}\n\n};\n</code></pre>\n\n<p>Which implements just the pure virtual method, and  <code>DerivedB</code>:</p>\n\n<pre><code>class DerivedB : public Interface\n{\npublic:\n    DerivedB(){ cout &lt;&lt; \"derivedB constructor\";}\n    ~DerivedB(){ cout &lt;&lt; \"derivedB destructor\";}\n    virtual void someMethod() override { cout &lt;&lt; \"derivedB someMethod\";}\n    virtual QVector&lt;int &gt;&amp; getSomething(){ return myComputedVector; }\n};\n</code></pre>\n\n<p>Which implements both the pure virtual and the virtual method.</p>\n\n<p>Summarizing, I have some classes that implement <code>getSomething()</code> and all classes implementing <code>someMethod()</code>.</p>\n\n<p>If I try to build this code with visual studio I get the following error:</p>\n\n<pre><code>error C4716: 'Interface::getSomething' : must return a value\n</code></pre>\n\n<p>I understand the compiler, but I don't know how to manage this situation.\nIf some one can explain me or give me a simple example on how to manage this, I'd be really helpful!!</p>\n"}, {"tags": ["c++", "windows-10", "restart"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499874174, "post_id": 45062111, "comment_id": 77097765, "body": "I&#39;m not sure that this is possible with Windows full stop, is it?"}, {"owner": {"reputation": 101, "user_id": 4475335, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100008966883174/picture?type=large", "display_name": "Ryan Holmes", "link": "https://stackoverflow.com/users/4475335/ryan-holmes"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499874589, "post_id": 45062111, "comment_id": 77098051, "body": "Yeah, I was just reading through that, it would be quite disappointing if this is impossible"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 4475335, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100008966883174/picture?type=large", "display_name": "Ryan Holmes", "link": "https://stackoverflow.com/users/4475335/ryan-holmes"}, "is_accepted": true, "score": 0, "last_activity_date": 1500663367, "creation_date": 1500663367, "answer_id": 45244901, "question_id": 45062111, "link": "https://stackoverflow.com/questions/45062111/windows-10-restart-without-updating-in-c/45244901#45244901", "title": "(Windows 10) Restart Without Updating in C++", "body": "<p>For me, a solution that worked was going into \"Services\" application and disabling \"Windows Updates\". Then whenever I restart normally, it won't update.</p>\n"}], "owner": {"reputation": 101, "user_id": 4475335, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100008966883174/picture?type=large", "display_name": "Ryan Holmes", "link": "https://stackoverflow.com/users/4475335/ryan-holmes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "closed_date": 1500673190, "accepted_answer_id": 45244901, "answer_count": 1, "score": -1, "last_activity_date": 1500663367, "creation_date": 1499873798, "question_id": 45062111, "link": "https://stackoverflow.com/questions/45062111/windows-10-restart-without-updating-in-c", "closed_reason": "Not suitable for this site", "title": "(Windows 10) Restart Without Updating in C++", "body": "<p>I need a way to restart my pc in C++ and do it in a way that Windows doesn't install updates on that restart. Is this possible?</p>\n\n<p>I know you can do a restart using <code>system(\"shutdown -r -t 0\");</code> </p>\n\n<p>or <code>ExitWindowsEx( EWX_REBOOT | EWX_FORCE, SHTDN_REASON_FLAG_PLANNED )</code></p>\n\n<p>but both of these install updates while restarting. Any Ideas?</p>\n"}, {"tags": ["c++", "vbscript", "com", "createobject"], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499874615, "post_id": 45062328, "comment_id": 77098072, "body": "Thanks much! I understood a lot, but what about echoed message <code>Text</code> variable? Is this variable gets assigned by this <code>Test.Method</code>?"}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "reply_to_user": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 1, "creation_date": 1499874711, "post_id": 45062328, "comment_id": 77098136, "body": "<code>Test.Method(&quot;Hello World!&quot;)</code> calls the <code>Method()</code> method in the COM server, if that method raises an event called <code>Event</code> (passing back the same string as an argument) then  <code>Testing_Event</code> is called and does the echo."}, {"owner": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499874884, "post_id": 45062328, "comment_id": 77098252, "body": "Okay, if I want to do this anyway (just to understand) without this prefix, what should I need to do before removing it from <code>CreateObject</code>? Can it be done from some source editing? I will expect to use this source until I understand how this works."}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "reply_to_user": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499874982, "post_id": 45062328, "comment_id": 77098338, "body": "You cannot catch events without specifying a prefix. If you really don&#39;t want to catch events delete the first 3 lines and use <code>WScript.CreateObject(&quot;Hello.World&quot;)</code> you can then call <code>Test.Method(&quot;Hello World!&quot;)</code>"}, {"owner": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499875241, "post_id": 45062328, "comment_id": 77098536, "body": "No no I want to  catch events without prefix <b>by modifying the source</b>. I tried above solution by removing first three lines, but as you said I got nothing echoed, I like very much to know some ways to modify this event in source so I can get this working fine without prefix. I don&#39;t need any code, just specify which parts of source to modify to achieve this."}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "reply_to_user": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499875601, "post_id": 45062328, "comment_id": 77098753, "body": "You cannot catch events without specifying a prefix, what is the problem with doing so?"}, {"owner": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499875786, "post_id": 45062328, "comment_id": 77098857, "body": "No I just like to do this without adding such prefixes, I understood - You say without a prefix, I can&#39;t catch events anyway. However, the declaration of this function from another example I found on this site are: <code>[id(1)] HRESULT Method([in] BSTR sText);</code> and <code>STDMETHOD(Method)(BSTR sText) throw() \t{ \t\tATLTRACE(atlTraceCOM, 4, _T(&quot;sText \\&quot;%s\\&quot;\\n&quot;), CString(sText)); \t\tATLVERIFY(SUCCEEDED(Fire_Event(sText))); \t\treturn S_OK; \t}</code>. Is there a possibility to return a message like this without those events in COM? I just want to display a message like this from COM dll even without events. :-|"}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "reply_to_user": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 1, "creation_date": 1499876781, "post_id": 45062328, "comment_id": 77099405, "body": "Make your method return a string?"}, {"owner": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "edited": false, "score": 0, "creation_date": 1499877716, "post_id": 45062328, "comment_id": 77099887, "body": "Yes yes, I just want to make my method ( like <code>Test.ShowMessage</code>) return a string. I will expect to practice with those events about COM later. Like much to replace this event raising function that&#39;s in example source with basic string returning function."}], "tags": [], "owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1499874411, "creation_date": 1499874411, "answer_id": 45062328, "question_id": 45062110, "link": "https://stackoverflow.com/questions/45062110/what-is-the-purpose-of-using-a-prefix-with-wscript-createobject/45062328#45062328", "title": "What is the purpose of using a prefix with WScript.CreateObject?", "body": "<p><code>Testing_</code> is an event prefix, so in your example when <code>Test</code> raises an event called <code>Event</code> then <em>prefix+event_name</em> maps to <code>Testing_Event</code> and that local procedure is called.</p>\n\n<p>If you omit the prefix then no events will be sunk, so if you need events you need the prefix.</p>\n\n<p>The rationale for doing it this way is that it it allows multiple instances of the same class to raise their own independent events by specifying different prefixes.</p>\n"}], "owner": {"reputation": 523, "user_id": 6597490, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eaf4018cef41ddcf23f42beffee08568?s=128&d=identicon&r=PG&f=1", "display_name": "Blueeyes789", "link": "https://stackoverflow.com/users/6597490/blueeyes789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 45062328, "answer_count": 1, "score": 0, "last_activity_date": 1499874411, "creation_date": 1499873797, "question_id": 45062110, "link": "https://stackoverflow.com/questions/45062110/what-is-the-purpose-of-using-a-prefix-with-wscript-createobject", "title": "What is the purpose of using a prefix with WScript.CreateObject?", "body": "<p>Does anyone know the actual purpose of using a prefix when using <code>WScript.CreateObject</code>?</p>\n\n<p>I have a C++ COM project example and it has a VB Script file that calls a method of COM object that's in the C++ dll project.</p>\n\n<pre><code>Function Testing_Event(Text)\n  WScript.Echo CStr(Text)\nEnd Function\n\nDim Test\nSet Test = WScript.CreateObject(\"Hello.World\", \"Testing_\")\nTest.Method(\"Hello World!\")\n</code></pre>\n\n<p>I also found an another <a href=\"https://stackoverflow.com/questions/11713418/exposing-com-events-to-vbscript-atl/11725613#11725613\">answer</a> that have the same calling behavior with a prefix.</p>\n\n<p>Above works fine with VB Script, but if I remove the prefix, wscript runs but outputs nothing like before.</p>\n\n<p>Please can anyone explain me what is the usage of <code>Testing_</code> prefix here? Is it possible to stop using that prefix and call this method normally like <code>Hello.World</code>? Do I need to make any changes to example's source files to call this method without this prefix?</p>\n"}, {"tags": ["c++", "c++11", "gcc"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499873936, "post_id": 45062090, "comment_id": 77097610, "body": "Show us your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1499874023, "post_id": 45062090, "comment_id": 77097678, "body": "Looks like it&#39;s <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933\" rel=\"nofollow noreferrer\">this bug</a> as explored in <a href=\"https://stackoverflow.com/q/22568642/560648\">this Q&amp;A</a>. Lambdas and variadics don&#39;t mix in 4.8, apparently."}], "owner": {"reputation": 1744, "user_id": 967713, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hOLzl.png?s=128&g=1", "display_name": "Chris Stewart", "link": "https://stackoverflow.com/users/967713/chris-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "closed_date": 1499874047, "answer_count": 0, "score": 0, "last_activity_date": 1499873932, "creation_date": 1499873738, "last_edit_date": 1499873932, "question_id": 45062090, "link": "https://stackoverflow.com/questions/45062090/gcc-4-8-4-error-parameter-packs-not-expanded-with", "closed_reason": "Duplicate", "title": "gcc 4.8.4 error: parameter packs not expanded with \u2018...\u2019", "body": "<p>I'm getting an error with the following bit of <a href=\"https://github.com/emil-e/rapidcheck/blob/master/include/rapidcheck/gen/Container.hpp#L491\" rel=\"nofollow noreferrer\">code</a>: </p>\n\n<pre><code>template &lt;typename Container, typename... Ts&gt;\nGen&lt;Container&gt; container(Gen&lt;Ts&gt;... gens) {\n  using Strategy = detail::GenericContainerStrategy&lt;Container&gt;;\n  detail::ContainerHelper&lt;Container, Strategy&gt; helper{Strategy()};\n\n  return [=](const Random &amp;random, int size) {\n    return helper.generate(random, size, gens...);\n  };\n}\n</code></pre>\n\n<p>Here is <a href=\"https://travis-ci.org/bitcoin/bitcoin/jobs/237245298#L490\" rel=\"nofollow noreferrer\">travis build log</a>. </p>\n\n<p>From the log, it says we are using gcc 4.8.4 to build this module. This seems to support parameter packs. </p>\n\n<pre><code>Configuring rapidcheck...\n\n-- The C compiler identification is GNU 4.8.4\n\n-- The CXX compiler identification is GNU 4.8.4\n\n-- Check for working C compiler: /usr/bin/cc\n\n-- Check for working C compiler: /usr/bin/cc -- works\n\n-- Detecting C compiler ABI info\n\n-- Detecting C compiler ABI info - done\n\n-- Detecting C compile features\n\n-- Detecting C compile features - done\n\n-- Check for working CXX compiler: /usr/bin/c++\n\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n\n-- Detecting CXX compiler ABI info\n\n-- Detecting CXX compiler ABI info - done\n\n-- Detecting CXX compile features\n\n-- Detecting CXX compile features - done\n\n-- Configuring done\n\n-- Generating done\n</code></pre>\n\n<p>So I am unsure of why this build is failing with gcc. </p>\n"}, {"tags": ["c++", "linux", "gcc"], "comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1499881699, "post_id": 45061354, "comment_id": 77102079, "body": "Did you also install <code>yum install devtoolset-2</code> on the worker computers (or at least the same version of gcc and its standard libraries)?"}, {"owner": {"reputation": 515, "user_id": 6475616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qehFY.jpg?s=128&g=1", "display_name": "Wokpak", "link": "https://stackoverflow.com/users/6475616/wokpak"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1499942216, "post_id": 45061354, "comment_id": 77128730, "body": "The head and worker nodes share the same file structure. gcc, g++, c++ and gfortran are all devtoolset-2 versions on the worker node, as on the head node"}], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 6475616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qehFY.jpg?s=128&g=1", "display_name": "Wokpak", "link": "https://stackoverflow.com/users/6475616/wokpak"}, "is_accepted": true, "score": 2, "last_activity_date": 1501590225, "creation_date": 1501590225, "answer_id": 45437702, "question_id": 45061354, "link": "https://stackoverflow.com/questions/45061354/c-runtime-error-catching-not-consistent-across-cluster-nodes/45437702#45437702", "title": "c++ runtime_error catching not consistent across cluster nodes", "body": "<p>Finally managed to work out what was going on...</p>\n\n<p>For those that find unexpected errors related to c++ code that runs normally on one part of a multi-node system but not on other parts even though the system shares a common file structure, this last point can be very misleading, although i'm sure rather obvious to those more clued up with system administration.</p>\n\n<p>Initially I was under the impression that the head and worker/computation nodes shared the entire file structure. This is only partly true as the worker nodes had access to certain parts of the file system, but importantly not the core files, such as <code>/lib</code> and <code>/lib64.</code> Essentially all packages installed via <code>yum</code> were independent to each computation node. Having updated the head node to the correct <code>gcc</code> version (<code>devtoolset-2</code> in this instance), I was under the impression that each worker node was also updated. This was not the case. </p>\n\n<h1>The Underlying Problem</h1>\n\n<p>c++ code compiled using <code>gcc 4.8.2 (Red Hat 4.8.2-15)</code> worked on the head-node which had <code>libstdc++.x86_64 (v4.1.2-55.el5)</code> in catching a <code>std::runtime_error</code> error thrown. This error was not properly caught when running on worker nodes.</p>\n\n<p>The problem was that the worker node system <code>libstdc++.x86_64</code> version was old (unfortunately I can't remember what version exactly) which meant errors were not being caught. It appears that a certain version of <code>libstdc++</code> is unable to catch errors from code compiled using <code>gcc 4.8.2</code>.</p>\n\n<h1>The Solution</h1>\n\n<p>Each worker node had to be manually updated using <code>yum</code> so that its <code>libstdc++</code> version was high enough to resolve this issue (<code>v4.1.2-55.el5</code> in our case). Updating <code>libstdc++</code> fixed the problem.</p>\n\n<h1>Extra Info</h1>\n\n<p>In our case the worker nodes were unable to connect to the internet directly so <code>yum</code> had to be done via proxy. Our version of <code>yum</code> was also too old to use the <code>socks5h</code> automatic ssh tunnelling proxy method. Because of this we had to use the <code>squid</code> package on the head node to allow a connection.</p>\n\n<p>Finally, this took a while to figure out as the file structure differences were very misleading. While the key folders are not shared between nodes, there contents looks exactly the same as the old/new versions of the packages had the exact same file structure, just with modified contents.</p>\n\n<p>Once again, this is probably all very obvious to a system admin, but there you go.</p>\n"}], "owner": {"reputation": 515, "user_id": 6475616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qehFY.jpg?s=128&g=1", "display_name": "Wokpak", "link": "https://stackoverflow.com/users/6475616/wokpak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 45437702, "answer_count": 1, "score": 1, "last_activity_date": 1501590225, "creation_date": 1499871743, "question_id": 45061354, "link": "https://stackoverflow.com/questions/45061354/c-runtime-error-catching-not-consistent-across-cluster-nodes", "title": "c++ runtime_error catching not consistent across cluster nodes", "body": "<h2>Problem</h2>\n\n<p>I am trying to set up a c++ program to run on a Redhat scientific linux (v5.11) cluster. I have been able to compile the software and it runs flawlessly on the head node, however it crashes when run on any worker nodes.</p>\n\n<p>I have traced the issue to part of the code where if some conditions return false, a <code>std::runtime_error</code> is thrown. This is deliberate as when the software is running correctly, this is caught and it continues to iterate. On the worker node the software aborts when the error is first thrown. The <code>abort</code> code and <code>backtrace</code> is shown below.</p>\n\n<p>As it works on one node but not the others my guess is that this is an issue of gcc versions. To compile I had to <code>yum install devtoolset-2</code> and built the software using <code>gcc 4.8.2 (Red Hat 4.8.2-15)</code> as the system <code>gcc 4.1.2 (Red Hat 4.1.2-55)</code> was too old to correctly compile. When I launch the application on both nodes I have the following:</p>\n\n<pre><code>which gcc &gt; /opt/rh/devtoolset-2/root/usr/bin/gcc\nwhich c++ &gt; /opt/rh/devtoolset-2/root/usr/bin/c++\nwhich g++ &gt; /opt/rh/devtoolset-2/root/usr/bin/g++\nwhich gfortran &gt; /opt/rh/devtoolset-2/root/usr/bin/gfortran\n$LD_LIBRARY_PATH &gt; /opt/rh/devtoolset-2/root/usr/lib64:/opt/rh/devtoolset-2/root/usr/lib\n</code></pre>\n\n<p>In terms of the differences between head and worker nodes, they are identical except in their kernel version:</p>\n\n<ul>\n<li>Head: Linux address.com 2.6.18-419.el5 #1 SMP x86_64 x86_64 x86_64 GNU/Linux</li>\n<li>Worker: Linux address.com 2.6.18-164.11.1.el5 #1 SMP x86_64 x86_64 x86_64 GNU/Linux</li>\n</ul>\n\n<p>Things I have tired:</p>\n\n<ul>\n<li>Running on worker nodes using SGE queue submission (with <code>-V</code> to pass environment)</li>\n<li>Running directly on worker nodes via <code>ssh worker</code> and exporting all the same environment variables as on the head node</li>\n<li>Compiling and running on the worker nodes</li>\n</ul>\n\n<p>Any help would be greatly appreciated! Here are a couple questions that I think getting answers to would help me narrow down the cause:</p>\n\n<ol>\n<li>Is it work pursuing the kernel version difference?</li>\n<li>Does this look like an issue with libraries and paths rather than the code?</li>\n<li>Has the way in which c++ error handling changed between library versions?</li>\n<li>Are there more debugging methods I could try to find the cause of this?  </li>\n</ol>\n\n<h2>Extra info</h2>\n\n<p>The <code>abort</code> is as follows:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::runtime_error'\n  what():  'custom error message'\n\nProgram received signal SIGABRT, Aborted.\n0x00000038b6830265 in raise () from /lib64/libc.so.6\n</code></pre>\n\n<p>The <code>backtrace</code> is as follows:</p>\n\n<pre><code>#0  0x00000038b6830265 in raise () from /lib64/libc.so.6\n#1  0x00000038b6831d10 in abort () from /lib64/libc.so.6\n#2  0x00000038bb0bec44 in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib64/libstdc++.so.6\n#3  0x00000038bb0bcdb6 in ?? () from /usr/lib64/libstdc++.so.6\n#4  0x00000038bb0bcde3 in std::terminate() () from /usr/lib64/libstdc++.so.6\n#5  0x00000038bb0bceca in __cxa_throw () from /usr/lib64/libstdc++.so.6\n#6  0x00002aaaab074bdc in Some::Function::Name() () from path/to/file.so\n</code></pre>\n\n<p>I must admit my knowledge of c++ is pretty limited, though iv been trying to improve over the last two days iv spent battling with this problem. Here is a simplified example of the code that throws and catches the error (This is obviously part of a much larger process that repeatedly calls <code>Func1</code>):</p>\n\n<pre><code>double Func1(int a, double b, int c)\n  {\n\n  for (bool OK = true ; OK &amp;&amp; d &gt; e &amp;&amp; f &lt; a ; f++)\n    {\n    try\n      {\n      for (d = 0, g = 1 ; g &lt; 10 ; g *= 2)\n        {\n        Func2() ;\n        }\n      }\n    catch (runtime_error problem)\n      {\n      *log &lt;&lt; problem.what() ;\n      OK = false ;\n      }\n    if (c &gt; 1)\n      {\n      *log &lt;&lt; f &lt;&lt; d;\n      }\n    }\n\nvoid Func2()\n  {\n  for (int j = 0 ; j &lt; ny &amp;&amp; (x &amp; 5) &gt; 0 ; j++)\n    {\n    if (Func3(j) &lt;= 0.0)\n      {\n      throw runtime_error(\"custom error message\") ;\n      }\n    Func4[j] = j ;\n    }\n  }\n</code></pre>\n\n<p>Running <code>ldd</code> on the compiled program (run on head node, line 1 missing on worker node):</p>\n\n<pre><code>linux-vdso.so.1 =&gt;  (0x00007fff2b6e7000)\n/users/username/software/version/Part1/Part1Extra.so (0x00002b3543587000)\nlibgfortran.so.3 =&gt; /usr/lib64/libgfortran.so.3 (0x00002b354385b000)\nlibm.so.6 =&gt; /lib64/libm.so.6 (0x0000003cc2000000)\nlibgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x000000315f800000)\nlibc.so.6 =&gt; /lib64/libc.so.6 (0x0000003cc1c00000)\n/users/username/software/version/Part2/Part2.so (0x00002b3543b4f000)\n/users/username/software/version/Part3/Part3.so (0x00002b3543d9b000)\nlibstdc++.so.6 =&gt; /usr/lib64/libstdc++.so.6 (0x0000003160000000)\n/lib64/ld-linux-x86-64.so.2 (0x0000003cc1800000)\n/users/username/software/version/Part3/Part3Extra.so (0x00002b3543fb2000)\n</code></pre>\n"}, {"tags": ["c++", "raspberry-pi", "netbeans-8"], "comments": [{"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1499875226, "post_id": 45061296, "comment_id": 77098525, "body": "Are you connecting to a remote build host, or using a remote project? If the latter, which file access mechanism are you using?"}, {"owner": {"reputation": 173, "user_id": 8223367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cbeecc8b25a119e46a949fe5fecfa8?s=128&d=identicon&r=PG&f=1", "display_name": "theother", "link": "https://stackoverflow.com/users/8223367/theother"}, "reply_to_user": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1499904137, "post_id": 45061296, "comment_id": 77111837, "body": "Well, the files access works with sftp and I&#39;m using a build host."}], "owner": {"reputation": 173, "user_id": 8223367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cbeecc8b25a119e46a949fe5fecfa8?s=128&d=identicon&r=PG&f=1", "display_name": "theother", "link": "https://stackoverflow.com/users/8223367/theother"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499871608, "creation_date": 1499871608, "question_id": 45061296, "link": "https://stackoverflow.com/questions/45061296/netbeans-c-change-remote-building-path", "title": "netbeans c++ change remote building path", "body": "<p>I'm using Netbeans 8.2 on a Win 10 Machine for remote developing on a RaspPi with Raspbian Jessi.</p>\n\n<p>I set up the remote building system and it works very well. </p>\n\n<p>There one think I do not like. Netbeans is using this path to copy the data</p>\n\n<pre><code>pi@raspberrypi:~/.netbeans/remote/192.168.1.46/workstation-Windows-x86_64/C/Users/user/Documents/NetBeansProjects/.....\n</code></pre>\n\n<p>How can I change this path e.g. to </p>\n\n<pre><code>pi@raspberrypi:~/NetBeansProjects/\n</code></pre>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1499871706, "post_id": 45061271, "comment_id": 77095889, "body": "Just return a <code>T*</code> a pointer is a valid random access iterator."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1499871783, "post_id": 45061271, "comment_id": 77095950, "body": "@RichardCritten But it is not an iterator. For example it can&#39;t be compared to <code>std::vector&lt;T&gt;::end()</code>."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 1, "creation_date": 1499871817, "post_id": 45061271, "comment_id": 77095968, "body": "Doesn&#39;t this apply to your problem: <a href=\"https://stackoverflow.com/q/37101525/1025391\">stackoverflow.com/q/37101525/1025391</a> ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1499871981, "post_id": 45061271, "comment_id": 77096090, "body": "You can use <code>return m_vec.begin() + (&amp;t - m_vec.data());</code>. <code>std::vector::iterator</code> is random access, you can advance it by an arbitrary mumber of elements with the <code>+</code> operator. <code>std::vector</code> also stores it&#39;s elements contiguously, so you can subtract an element&#39;s address from the start of the vector&#39;s data to get it&#39;s offset."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1499872523, "post_id": 45061271, "comment_id": 77096540, "body": "@Fran&#231;oisAndrieux -- a bit more accurately, <code>T*</code> is a valid iterator type, but it&#39;s not necessarily the same type as <code>std::vector&lt;T&gt;::end()</code> returns. So, for example, if you have two pointers into your vector&#39;s data you can pass those pointers to an algorithm that expects a pair of iterators that designate a sequence."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1499873609, "post_id": 45061271, "comment_id": 77097360, "body": "@PeteBecker I meant to say that it&#39;s not a <code>std::vector&lt;T&gt;::iterator</code>, because that&#39;s what the question is explicitly asking for. Too late to edit my comment now :(."}], "owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1499871956, "answer_count": 0, "score": 0, "last_activity_date": 1499871568, "creation_date": 1499871568, "question_id": 45061271, "link": "https://stackoverflow.com/questions/45061271/construct-stdvectortiterator-from-pointer-to-object-in-vector", "closed_reason": "Duplicate", "title": "Construct std::vector&lt;T&gt;::iterator from pointer to object in vector", "body": "<p>Say I have a reference to an object which I know for sure is contained in a vector. Is it possible to create an iterator on the vector from the address of an object?</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Container {\npublic:\n    using iterator = std::vector&lt;T&gt;::iterator;\n    iterator get_iterator(T &amp;t) {\n        // Realistically this would not be a public interface\n        // and I would guarantee t is in m_vec\n        return iterator(&amp;t); \n    }\n\nprivate:\n    std::vector&lt;T&gt; m_vec;\n}\n</code></pre>\n\n<p>Is this possible and well defined?</p>\n"}, {"tags": ["c++", "winapi", "visual-c++", "named-pipes"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1499873348, "post_id": 45061232, "comment_id": 77097174, "body": "in <code>SendData</code> need <code>WriteFile</code> use instead <code>ReadFile</code> or this is typo ?"}, {"owner": {"reputation": 304, "user_id": 7666772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkxar.jpg?s=128&g=1", "display_name": "Bryant", "link": "https://stackoverflow.com/users/7666772/bryant"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1499873647, "post_id": 45061232, "comment_id": 77097385, "body": "thank you. RbMm. It was my mistake."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1499904968, "post_id": 45061232, "comment_id": 77112056, "body": "The client always alternates between reading and writing, so it makes no sense for the server to try to read two values in a row.  What are you actually trying to achieve here?"}, {"owner": {"reputation": 304, "user_id": 7666772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkxar.jpg?s=128&g=1", "display_name": "Bryant", "link": "https://stackoverflow.com/users/7666772/bryant"}, "edited": false, "score": 0, "creation_date": 1499915510, "post_id": 45061232, "comment_id": 77114423, "body": "If server send data(WriteFile) to client, client function ReadFile will pass."}, {"owner": {"reputation": 304, "user_id": 7666772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkxar.jpg?s=128&g=1", "display_name": "Bryant", "link": "https://stackoverflow.com/users/7666772/bryant"}, "edited": false, "score": 0, "creation_date": 1499915940, "post_id": 45061232, "comment_id": 77114508, "body": "If server send data(WriteFile) to client, 1. client function ReadFile will pass &gt; then analysis the received data &gt; 2. WriteFile() -&gt; Data &gt; 3. Wait for server data at ReadFile() again. But in step 3., if server doesn&#39;t send data, only want to ReadFile, it&#39;s blocked at Client&amp;Server ReadFile. So I Want to know a method of how set ReadFile, WriteFile function time out. Even if I solve it, 30% is solved. Thankyou Harry Johnston. Have a good day."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1499976052, "post_id": 45061232, "comment_id": 77152307, "body": "Well ... you can abort a synchronous ReadFile using threads and the CancelSynchronousIo function, or you could use asynchronous I/O instead.  But note that timeouts are unlikely to resolve your problem.  Also, the code in the latest edit does not appear to make any sense.  I suspect that you are confused about what you are trying to achieve, and adding timeouts is only going to make things worse.  (If your goal is to share a variable between two processes, consider using shared memory and a named mutex instead of a pipe.)"}], "owner": {"reputation": 304, "user_id": 7666772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkxar.jpg?s=128&g=1", "display_name": "Bryant", "link": "https://stackoverflow.com/users/7666772/bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1500553547, "creation_date": 1499871473, "last_edit_date": 1499935559, "question_id": 45061232, "link": "https://stackoverflow.com/questions/45061232/c-pipe-skills-that-makes-the-readfile-and-writefile-functions-available-at-the", "title": "C++ Pipe Skills that makes the ReadFile and WriteFile functions available at the same time", "body": "<p>Pipe is being used, If server call <code>WriteFile</code>/<code>ReadFile</code>, client have to call <code>ReadFile</code>/<code>WriteFile</code> <strong>for synchronize each other</strong>.I implemented it like this.</p>\n\n<p>Example :</p>\n\n<p>**COMMON : **</p>\n\n<pre><code>BOOL RecvData(DWORD &amp;dwScore)\n{\n    DWORD dwRead = 0;\n    if(0 == ReadFile(g_hPipe, &amp;dwScore, sizeof(DWORD), &amp;dwRead, 0))\n        return FALSE;\n    if (sizeof(DWORD) != dwRead)\n        return FALSE;\n    return TRUE;\n}\nBOOL SendData(DWORD dwScore)\n{\n    DWORD dwSend = 0;\n    if(0 == WriteFile(g_hPipe, &amp;dwScore, sizeof(DWORD), &amp;dwSend, 0))\n        return FALSE;\n    if (sizeof(DWORD) != dwSend)\n        return FALSE;\n    return TRUE;\n}\n</code></pre>\n\n<p>**SERVER : **</p>\n\n<pre><code>VOID StartServerManager()\n{\n    DWORD dwScore = 0;\n    while (TRUE)\n    {\n        if(FALSE == RecvData(dwScore))\n            continue;\n        //.... do something dwScore + dwSkill ... \n        if(FALSE == SendData(dwScore))\n            continue;\n\n    }\n}\n</code></pre>\n\n<p>**CLIENT : **</p>\n\n<pre><code>#define VILLA_READ_MODE 0xDEDC\n#define VILLA_WRITE_MODE 0xCDEC\n\nVOID StartClientManager()\n{\n    DWORD dwScore = 4;\n    DWORD dwMode = VILLA_WRITE_MODE;\n    while(TRUE)\n    {\n        switch(dwMode)\n        {\n        case VILLA_WRITE_MODE:\n            SendData(dwScore);\n            dwMode = VILLA_READ_MODE;\n            break;\n        case VILLA_READ_MODE:\n            RecvData(dwScore);\n            dwMode = VILLA_WRITE_MODE;\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>If I change <code>StartServerManager()</code> into like this</strong> </p>\n\n<pre><code>VOID StartServerManager()\n{\n    DWORD dwScore = 0;\n    while (TRUE)\n    {\n        if(FALSE == RecvData(dwScore))\n            continue;\n        //.... do something dwScore + dwSkill ... \n\n        if(FALSE == SendData(dwScore))\n            continue;\n\n        if(FALSE == RecvData(dwScore))\n            continue;\n\n        if(FALSE == RecvData(dwScore))\n            continue;\n\n    }\n}\n</code></pre>\n\n<p><strong>Function will block at <code>ReadFile()</code></strong></p>\n\n<p><strong><code>if(0 == ReadFile(g_hPipe, &amp;dwScore, sizeof(DWORD), &amp;dwRead, 0))</code></strong></p>\n\n<pre><code>BOOL RecvData(DWORD &amp;dwScore)\n{\n    DWORD dwRead = 0;\n    if(0 == ReadFile(g_hPipe, &amp;dwScore, sizeof(DWORD), &amp;dwRead, 0))\n        return FALSE;\n    if (sizeof(DWORD) != dwRead)\n        return FALSE;\n    return TRUE;\n}\n</code></pre>\n\n<p>Implemented with threads, too.\nIs there any method pass block on ReadFile?\nI thought about this...</p>\n\n<pre><code>#define VILLA_READ_MODE 0xDEDC\n#define VILLA_WRITE_MODE 0xCDEC\nVOID StartClientManager()\n{\n    HANDLE hThread[2];\n    DWORD dwModeRead = VILLA_READ_MODE;\n    DWORD dwModeWrite = VILLA_WRITE_MODE;\n    hThread[1] = CreateThread(NULL, 0, SYNCTHREAD, &amp;dwModeRead, 0, 0);\n    hThread[2] = CreateThread(NULL, 0, SYNCTHREAD, &amp;dwModeWrite, 0, 0);\n    WaitForMultipleObjects(2, hThread, TRUE, INFINITE);\n}\nDWORD WINAPI SYNCTHREAD(DWORD &amp;dwMode)\n{\n    switch (dwMode)\n    {\n    case VILLA_READ_MODE:\n        RecvData(dwScore);\n        break;\n    case VILLA_WRITE_MODE:\n        SendData(dwScore);\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "macos", "qt", "opengl"], "comments": [{"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1499872569, "post_id": 45061160, "comment_id": 77096579, "body": "Please check if your Linux machine has <a href=\"https://www.khronos.org/registry/OpenGL/extensions/ARB/ARB_vertex_array_object.txt\" rel=\"nofollow noreferrer\"><code>GL_ARB_vertex_array_object</code></a> extension. Chances are that it does not, hence the problem."}, {"owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "reply_to_user": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1499872912, "post_id": 45061160, "comment_id": 77096862, "body": "@hidefromkgb The extension is listed under Nvidia X Server Settings."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1499873392, "post_id": 45061160, "comment_id": 77097203, "body": "The GL_INVALID_OPERATION error may be triggered by a previous gl command. When something works in a OS but not in other, I suspect about driver capabilities. In this case <code>glActiveTexture</code> max and <code>glUniform1iv</code> max uniform size."}, {"owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1499873604, "post_id": 45061160, "comment_id": 77097358, "body": "@Ripi2 CodeXL forces a debug context and lets me pinpoint which call triggers GL_INVALID_OPERATION. Also I just commented that out and still get the same issue."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1499873948, "post_id": 45061160, "comment_id": 77097626, "body": "A shot in the dark: call <code>glBindVertexArray</code>  before <code>glActiveTexture</code> and <code>glUniform1iv</code>"}, {"owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1499874155, "post_id": 45061160, "comment_id": 77097750, "body": "@Ripi2 Just tried binding <code>0</code>, and <code>mesh-&gt;getVao()</code> before <code>glActiveTexture</code> and <code>glUniform1iv</code>. Still nope."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1499875909, "post_id": 45061160, "comment_id": 77098924, "body": "The error can be triggered at <code>glBindVertexArray</code> but <b>due to</b> a previous command. Try without glActiveTexture and/or glUniform1iv."}, {"owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1499876781, "post_id": 45061160, "comment_id": 77099404, "body": "@Ripi2 As I mentioned, I tried commenting that out, and still get the same issue."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1499877269, "post_id": 45061160, "comment_id": 77099644, "body": "You have two contexts. Do you set as current the context whose VAO applies?"}, {"owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1499878005, "post_id": 45061160, "comment_id": 77100042, "body": "@Ripi2 Ah shoot. I feel like an idiot now. The VAO was being created on the wrong context. I guess macOS Qt happens to use the same context for everything, where as the Linux implementation seperates them."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1499878318, "post_id": 45061160, "comment_id": 77100208, "body": "@CraftedCart: That should be an answer, not part of the question."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1499878338, "post_id": 45061160, "comment_id": 77100218, "body": "It&#39;s okay to post an answer to your own question. Please don&#39;t put the answer in the question itself."}], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "is_accepted": true, "score": 2, "last_activity_date": 1499878530, "creation_date": 1499878530, "answer_id": 45063592, "question_id": 45061160, "link": "https://stackoverflow.com/questions/45061160/vao-renders-fine-on-macos-but-invalid-operation-on-linux/45063592#45063592", "title": "VAO renders fine on macOS, but INVALID_OPERATION on Linux", "body": "<p>Solved in the comments - Turns out the VAO was being created on the wrong context. I guess the macOS implementation of Qt shares a context for everything, whereas on Linux, they're seperated.</p>\n"}], "owner": {"reputation": 641, "user_id": 5495287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hlx9yRf3g_I/AAAAAAAAAAI/AAAAAAAAASM/c3121v5jt_E/photo.jpg?sz=128", "display_name": "CraftedCart", "link": "https://stackoverflow.com/users/5495287/craftedcart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45063592, "answer_count": 1, "score": 0, "last_activity_date": 1499878530, "creation_date": 1499871284, "last_edit_date": 1499878506, "question_id": 45061160, "link": "https://stackoverflow.com/questions/45061160/vao-renders-fine-on-macos-but-invalid-operation-on-linux", "title": "VAO renders fine on macOS, but INVALID_OPERATION on Linux", "body": "<p>I have an application that uses OpenGL within a Qt Widgets application. I used to develop it on macOS where everything worked fine, before switching over to Linux. Now when I call <code>glBindVertexArray(mesh-&gt;getVao());</code>, OpenGL spits out INVALID_OPERATION.</p>\n\n<p>Using AMD's CodeXL, I determined that <code>mesh-&gt;getVao()</code> retuened <code>2</code>. I also used it to get a list of all OpenGL calls. Upon examining it, it seems to generate a VAO with the ID of 2, and there is no <code>glDeleteVertexArrays</code> within the call list. I even commented out the code that would delete the vertex array.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XKSj7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XKSj7.png\" alt=\"The call list, when it generates the VAO\"></a></p>\n\n<p>The OpenGL docs state that the only reason <code>glBindVertexArray</code> could fail is if it is is not given zero, or a generated VAO.</p>\n\n<p>Are there any other possible reasons why <code>glBindVertexArray</code> could spit out INVALID_OPERATION, despite the VAO existing, and why it could work on macOS but not on Linux?</p>\n\n<hr>\n\n<p>A few code samples, if it helps</p>\n\n<p>Mesh rendering</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void renderMesh(const Resource::ResourceMesh *mesh) {\n    //Set up textures\n    for (unsigned int i = 0; i &lt; mesh-&gt;getTextures().size(); i++) {\n        glActiveTexture(GL_TEXTURE0 + i);\n        mesh-&gt;getTextures().at(i)-&gt;getTexture()-&gt;bind();\n    }\n    static const int texIDs[32] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31};\n    glUniform1iv(shaderTexID, MAX_SHADER_TEXTURES, texIDs);\n\n    //Draw the mesh\n    glBindVertexArray(mesh-&gt;getVao());\n    qDebug() &lt;&lt; \"mesh == nullptr:\" &lt;&lt; (mesh == nullptr);\n    glDrawElements(GL_TRIANGLES, mesh-&gt;getIndices().size(), GL_UNSIGNED_INT, 0);\n    glBindVertexArray(0);\n}\n</code></pre>\n\n<p>VAO generation</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//In ResourceMesh.hpp\n\nprotected:\n    QVector&lt;Model::Vertex&gt; vertices;\n    QVector&lt;unsigned int&gt; indices;\n    QVector&lt;Resource::ResourceTexture*&gt; textures;\n\n    GLuint vao;\n    GLuint vbo;\n    GLuint ebo;\n\n//In ResourceMesh.cpp\n\nvoid ResourceMesh::generateGlBuffers() {\n    glGenVertexArrays(1, &amp;vao);\n    glGenBuffers(1, &amp;vbo);\n    glGenBuffers(1, &amp;ebo);\n\n    glBindVertexArray(vao);\n\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    glBufferData(GL_ARRAY_BUFFER, vertices.size() * sizeof(Model::Vertex), &amp;vertices[0], GL_STATIC_DRAW);\n\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ebo);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, indices.size() * sizeof(unsigned int), &amp;indices[0], GL_STATIC_DRAW);\n\n    //Vertex positions\n    glEnableVertexAttribArray(GLManager::VertexAttribs::VERTEX_POSITION);\n    glVertexAttribPointer(GLManager::VertexAttribs::VERTEX_POSITION, 3, GL_FLOAT, GL_FALSE, sizeof(Model::Vertex), (void*) offsetof(Model::Vertex, position));\n\n    //Vertex normals\n    glEnableVertexAttribArray(GLManager::VertexAttribs::VERTEX_NORMAL);\n    glVertexAttribPointer(GLManager::VertexAttribs::VERTEX_NORMAL, 3, GL_FLOAT, GL_FALSE, sizeof(Model::Vertex), (void*) offsetof(Model::Vertex, normal));\n\n    //Vertex texture coordinates\n    glEnableVertexAttribArray(GLManager::VertexAttribs::VERTEX_TEX_COORD);\n    glVertexAttribPointer(GLManager::VertexAttribs::VERTEX_TEX_COORD, 2, GL_FLOAT, GL_FALSE, sizeof(Model::Vertex), (void*) offsetof(Model::Vertex, texCoord));\n\n    glBindVertexArray(0);\n}\n</code></pre>\n\n<p>And if it helps, here's a screenshot of CodeXL, breaking at <code>glBindVertexArray</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/LAGrz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LAGrz.png\" alt=\"AMD CodeXL\"></a></p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5985776, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4OnEaJUf06s/AAAAAAAAAAI/AAAAAAAAAWw/5QEFZ-3kf14/photo.jpg?sz=128", "display_name": "HydraulicHydrox", "link": "https://stackoverflow.com/users/5985776/hydraulichydrox"}, "edited": false, "score": 0, "creation_date": 1499878403, "post_id": 45061377, "comment_id": 77100262, "body": "THANKS SO MUCH MAN!! IVE BEEN STRUGGLING FOR DAYS THANKS SO MUCH"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7210680"}, "is_accepted": true, "score": 1, "last_activity_date": 1499871815, "creation_date": 1499871815, "answer_id": 45061377, "question_id": 45060955, "link": "https://stackoverflow.com/questions/45060955/vao-not-rendering/45061377#45061377", "title": "VAO not rendering", "body": "<p>You're using <code>sizeof</code> on a pointer type inside your function, which is almost certainly not what you want. Arrays are not <a href=\"https://en.wikipedia.org/wiki/First-class_citizen\" rel=\"nofollow noreferrer\">first-class citizens</a> in languages like C and C++, they decay to pointers, which do not carry the information about the amount of data that they store. What you want to do instead is to pass the size of the array as an additional argument:</p>\n\n<pre><code>GLuint Loader::loadToVAO(GLfloat* vertices, size_t num_vertices)\n{\n    GLuint VertexArrayID;\n    glGenVertexArrays(1, &amp;VertexArrayID);\n    glBindVertexArray(VertexArrayID);\n\n    GLuint vertexbuffer;\n    glGenBuffers(1, &amp;vertexbuffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(*vertices) * num_vertices, vertices, \n    GL_STATIC_DRAW);\n    return vertexbuffer;\n}\n</code></pre>\n\n<p>And then in your main function:</p>\n\n<pre><code>GLuint vertexbuffer = loader.loadToVAO(vertices, sizeof(vertices) / sizeof(vertices[0]));\n</code></pre>\n\n<p>I'd encourage you to read more about the topic <a href=\"http://www.cplusplus.com/forum/beginner/40783/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5985776, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4OnEaJUf06s/AAAAAAAAAAI/AAAAAAAAAWw/5QEFZ-3kf14/photo.jpg?sz=128", "display_name": "HydraulicHydrox", "link": "https://stackoverflow.com/users/5985776/hydraulichydrox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 45061377, "answer_count": 1, "score": 0, "last_activity_date": 1520795350, "creation_date": 1499870804, "last_edit_date": 1520795350, "question_id": 45060955, "link": "https://stackoverflow.com/questions/45060955/vao-not-rendering", "title": "VAO not rendering", "body": "<p>I made a loader class for loading V.A.Os textures etc but when i use this method</p>\n\n<pre><code>GLuint Loader::loadToVAO(GLfloat* vertices)\n{\n    GLuint VertexArrayID;\n    glGenVertexArrays(1, &amp;VertexArrayID);\n    glBindVertexArray(VertexArrayID);\n\n    GLuint vertexbuffer;\n    glGenBuffers(1, &amp;vertexbuffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n    return vertexbuffer;\n}\n</code></pre>\n\n<p>it doesnt render anything here is my render code:</p>\n\n<pre><code>window.createWindow();\n\nGLfloat vertices[] = {\n    -1.0f, -1.0f, 0.0f,\n    1.0f, -1.0f, 0.0f,\n    0.0f,  1.0f, 0.0f,\n};\n\nGLuint vertexbuffer = loader.loadToVAO(vertices);\n\nglClearColor(0, 1, 1, 0);\n\n// It works fine when i generate the vao in the main method but not in the loader class\nGLuint vertexbuffer1;\nglGenBuffers(1, &amp;vertexbuffer1);\nglBindBuffer(GL_ARRAY_BUFFER, vertexbuffer1);\nglBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\nstd::cout &lt;&lt; vertexbuffer1 &lt;&lt; std::endl;\nstd::cout &lt;&lt; vertexbuffer &lt;&lt; std::endl;\n\nwhile (!window.shouldClose())\n{\n    window.clearWindow();\n\n    // render here\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer1);\n    glVertexAttribPointer(\n        0,                  // attribute 0. No particular reason for 0, but must match the layout in the shader.\n        3,                  // size\n        GL_FLOAT,           // type\n        GL_FALSE,           // normalized?\n        0,                  // stride\n        (void*)0            // array buffer offset\n    );\n    // Draw the triangle !\n    glDrawArrays(GL_TRIANGLES, 0, 3); // Starting from vertex 0; 3 vertices total -&gt; 1 triangle\n    glDisableVertexAttribArray(0);\n\n    window.updateWindow();\n}\n\nreturn 0;\n</code></pre>\n\n<p>it renders fine when i try to render the <code>vertexbuffer1</code> (the one loaded in the main method) but the vertexbuffer doesn't render anything.\nany help would be appreciated </p>\n\n<p><strong>EDIT:</strong>\nhere is the tutorial im trying to follow - <a href=\"http://www.opengl-tutorial.org/\" rel=\"nofollow noreferrer\">http://www.opengl-tutorial.org/</a></p>\n"}, {"tags": ["c++", "opencv", "computer-vision", "dlib"], "comments": [{"owner": {"reputation": 477, "user_id": 2531686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S6nta.jpg?s=128&g=1", "display_name": "Ankur Jain", "link": "https://stackoverflow.com/users/2531686/ankur-jain"}, "edited": false, "score": 1, "creation_date": 1500332592, "post_id": 45060739, "comment_id": 77278871, "body": "Answered a duplicate question here. (It&#39;s in python) <a href=\"https://stackoverflow.com/questions/43938207/face-aligment-check-with-dlib/44274515#44274515\" title=\"face aligment check with dlib\">stackoverflow.com/questions/43938207/&hellip;</a>"}], "owner": {"reputation": 2218, "user_id": 2274492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/On2uu.png?s=128&g=1", "display_name": "konstantin_doncov", "link": "https://stackoverflow.com/users/2274492/konstantin-doncov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499870260, "creation_date": 1499870260, "last_edit_date": 1592644375, "question_id": 45060739, "link": "https://stackoverflow.com/questions/45060739/head-pose-estimation-fails-with-specific-image-sizes", "title": "Head pose estimation fails with specific image sizes", "body": "<p>I want to find angles of rotation of the head using <code>opencv</code> and <code>dlib</code>. So, I tried to use this code from the tutorial:</p>\n<pre><code>cv::Mat im = imread(&quot;img.jpg&quot;);\n\nmatrix&lt;bgr_pixel&gt; dlibImage;\nassign_image(dlibImage, cv_image&lt;bgr_pixel&gt;(im));\n\nauto face = detector(dlibImage)[0];\nauto shape = sp(dlibImage, face);\n\n// 2D image points.\nstd::vector&lt;cv::Point2d&gt; image_points;\nimage_points.push_back(cv::Point2d(shape.part(30).x(), shape.part(30).y()));    // Nose tip\nimage_points.push_back(cv::Point2d(shape.part(8).x(), shape.part(8).y()));    // Chin\nimage_points.push_back(cv::Point2d(shape.part(36).x(), shape.part(36).y()));     // Left eye left corner\nimage_points.push_back(cv::Point2d(shape.part(45).x(), shape.part(45).y()));    // Right eye right corner\nimage_points.push_back(cv::Point2d(shape.part(48).x(), shape.part(48).y()));    // Left Mouth corner\nimage_points.push_back(cv::Point2d(shape.part(54).x(), shape.part(54).y()));    // Right mouth corner\n\n\n// 3D model points.\nstd::vector&lt;cv::Point3d&gt; model_points;\nmodel_points.push_back(cv::Point3d(0.0f, 0.0f, 0.0f));               // Nose tip\nmodel_points.push_back(cv::Point3d(0.0f, -330.0f, -65.0f));          // Chin\nmodel_points.push_back(cv::Point3d(-225.0f, 170.0f, -135.0f));       // Left eye left corner\nmodel_points.push_back(cv::Point3d(225.0f, 170.0f, -135.0f));        // Right eye right corner\nmodel_points.push_back(cv::Point3d(-150.0f, -150.0f, -125.0f));      // Left Mouth corner\nmodel_points.push_back(cv::Point3d(150.0f, -150.0f, -125.0f));       // Right mouth corner\n\n// Camera internals\ndouble focal_length = im.cols; // Approximate focal length.\nPoint2d center = cv::Point2d(im.cols/2,im.rows/2);\ncv::Mat camera_matrix = (cv::Mat_&lt;double&gt;(3,3) &lt;&lt; focal_length, 0, center.x, 0 , focal_length, center.y, 0, 0, 1);\ncv::Mat dist_coeffs = cv::Mat::zeros(4,1,cv::DataType&lt;double&gt;::type); // Assuming no lens distortion\n\ncout &lt;&lt; &quot;Camera Matrix &quot; &lt;&lt; endl &lt;&lt; camera_matrix &lt;&lt; endl ;\n// Output rotation and translation\ncv::Mat rotation_vector; // Rotation in axis-angle form\n\ncv::Mat translation_vector;\n\n// Solve for pose\ncv::solvePnP(model_points, image_points, camera_matrix, dist_coeffs, rotation_vector, translation_vector);\n\n\n// Project a 3D point (0, 0, 1000.0) onto the image plane.\n// We use this to draw a line sticking out of the nose\n\nstd::vector&lt;Point3d&gt; nose_end_point3D;\nstd::vector&lt;Point2d&gt; nose_end_point2D;\nnose_end_point3D.push_back(Point3d(0,0,1000.0));\n\nprojectPoints(nose_end_point3D, rotation_vector, translation_vector, camera_matrix, dist_coeffs, nose_end_point2D);\n\n\nfor(int i=0; i &lt; image_points.size(); i++)\n{\n    circle(im, image_points[i], 3, Scalar(0,0,255), -1);\n}\n\ncv::line(im,image_points[0], nose_end_point2D[0], cv::Scalar(255,0,0), 2);\n\ncout &lt;&lt; &quot;Rotation Vector &quot; &lt;&lt; endl &lt;&lt; rotation_vector &lt;&lt; endl;\ncout &lt;&lt; &quot;Translation Vector&quot; &lt;&lt; endl &lt;&lt; translation_vector &lt;&lt; endl;\n\ncout &lt;&lt;  nose_end_point2D &lt;&lt; endl;\n\n// Display image.\ncv::imshow(&quot;Output&quot;, im);\ncv::waitKey(0);\n</code></pre>\n<p>But, unfortunately, I get completely different results depending on the size of the same image!</p>\n<p>If I use this <a href=\"https://i.stack.imgur.com/wq5ul.jpg\" rel=\"nofollow noreferrer\">img.jpg</a> which has size 299x299 px(many sizes are ok, but we take the nearest), then all ok and I get right result:</p>\n<p><a href=\"https://i.stack.imgur.com/oMhq8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oMhq8.png\" alt=\"enter image description here\" /></a></p>\n<p>Output:</p>\n<pre><code>Rotation Vector \n[-0,04450161828760668;\n -2,133664002574712;\n -0,2208024002827168]\n</code></pre>\n<p>But if I use this <a href=\"https://i.stack.imgur.com/Cbdgd.jpg\" rel=\"nofollow noreferrer\">img.jpg</a> which has size 298x298 px, then I get absolutely wrong result:</p>\n<p><a href=\"https://i.stack.imgur.com/T5DLo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T5DLo.png\" alt=\"enter image description here\" /></a></p>\n<p>Output:</p>\n<pre><code>Rotation Vector \n[-2,999117288644056;\n 0,0777816930911016;\n -0,7573144061217354]\n</code></pre>\n<p>I also understood that it's due to the coords of the landmarks, not due to size of image, because result are same for the same hardcoded landmarks while sizes of this image are different.</p>\n<p><strong>How can I always get a correct pose estimation, as in the first case?</strong></p>\n<p>P.S. also, I want to note this problem has very nondeterministic behaviour - now all ok with 298x298, but I get wrong result with 297x297 size.</p>\n"}, {"tags": ["c++", "string", "printing", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499870081, "post_id": 45060621, "comment_id": 77094610, "body": "You treat the list as a <i>stack</i>, by adding all new nodes at the head of the list."}, {"owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "edited": false, "score": 0, "creation_date": 1499870273, "post_id": 45060621, "comment_id": 77094742, "body": "Aren&#39;t you prepending your data to the linked list instead of appending it? That would explains why your data is in reverse."}], "answers": [{"tags": [], "owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "is_accepted": false, "score": 1, "last_activity_date": 1499870080, "creation_date": 1499870080, "answer_id": 45060661, "question_id": 45060621, "link": "https://stackoverflow.com/questions/45060621/linked-list-is-missing-out-nodes-and-reversing-order-when-printing/45060661#45060661", "title": "Linked List is missing out nodes and reversing order when printing", "body": "<p>You only allocate a new node once, outside the read loop. Make sure to allocate a new one every time you insert. Also you are inserting new elements at the head of the list and not the tail - hence the reverse order.</p>\n\n<p>Here's something to help you:</p>\n\n<pre><code>node dummy;\ndummy.next = nullptr;\nnode* tail = &amp;dummy;\n\nwhile (getline(...))\n{\n    node* newNode = new node();\n    // fill in data\n    tail-&gt;next = newNode;\n    tail = newNode;\n}\n\n// list.head = dummy.next;\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5125014, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1354f58cfa88d76c61fc6b9b2b449dda?s=128&d=identicon&r=PG&f=1", "display_name": "GuestUser140561", "link": "https://stackoverflow.com/users/5125014/guestuser140561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499870080, "creation_date": 1499869957, "question_id": 45060621, "link": "https://stackoverflow.com/questions/45060621/linked-list-is-missing-out-nodes-and-reversing-order-when-printing", "title": "Linked List is missing out nodes and reversing order when printing", "body": "<p>I'm creating a basic program that uses a Linked List and text file (to populate the Linked List) to perform some manipulation on the data.</p>\n\n<p>I've setup what I think is a working Linked List structure and a 'working' but possibly inefficient way of reading the text file and placing the data into the linked list nodes.</p>\n\n<p>When I read in the file I check to see whether what's being read is correct (by outputting to the screen) and then using an insertNode function I've created. </p>\n\n<p>However, when I go to print the Linked List I some of the nodes aren't the data that is being read in and the order in which it's being printed is in reverse?</p>\n\n<p>My program is quite large so I've only included the relevant functions (which I've edited down to basics) and text file / output.</p>\n\n<hr>\n\n<p><strong>Text file:</strong></p>\n\n<pre><code>car,Ferarri,12.0,aa,3,1,1,true\ncar,Mercedes,8.0,bb,5,4,0,false\n</code></pre>\n\n<p><strong>Linked List when printed:</strong></p>\n\n<pre><code>car -6.27744e_066 8.0 -842150451 5 4 false\ncar -6.27744e_066 12.0 -842150451 3 1 true\n</code></pre>\n\n<p>It's almost printing the correct output, but the order is in reverse, the strings are coming out as negative integers and it's missing the maxLoad nodes. Can anyone see why?</p>\n\n<hr>\n\n<h2><strong>Read File</strong></h2>\n\n<pre><code>void readFile()\n{\n    string text;\n    string temp; // Added this line\n    node* newNode = new node;\n\n    ifstream file;\n    file.open(\"example.txt\");\n\n    for (int i = 0; i &lt; 2; i++)\n    {\n        getline(file, temp);\n        text = temp;\n\n        string input = text;\n        istringstream ss(input);\n        string token;\n        node* newNode = new node;\n\n        int counter = 0;\n\n        while (getline(ss, token, ','))\n        {\n            cout &lt;&lt; token &lt;&lt; '\\n';\n            newNode-&gt;rented = token;\n            counter++;\n\n            if (counter == 0)\n            {\n                newNode-&gt;make = token;\n            }\n            else if (counter == 1)\n            {\n                newNode-&gt;model = token;\n            }\n            else if (counter == 2)\n            {\n                std::istringstream ss(token);\n                ss &gt;&gt; newNode-&gt;engine;\n            }\n            else if (counter == 3)\n            {\n                newNode-&gt;registration = token;\n            }\n            else if (counter == 4)\n            {\n                std::istringstream ss(token);\n                ss &gt;&gt; newNode-&gt;doors;\n            }\n            else if (counter == 5)\n            {\n                std::istringstream ss(token);\n                ss &gt;&gt; newNode-&gt;passengers;\n            }\n            else if (counter == 6)\n            {\n                std::istringstream ss(token);\n                ss &gt;&gt; newNode-&gt;maxload;\n            }\n            else\n            {\n                newNode-&gt;rented = token;\n            }\n        }\n        list.insertNode(newNode);\n    }\n    file.close();\n}\n</code></pre>\n\n<h2><strong>Insert Node</strong></h2>\n\n<pre><code>void linkedList::insertNode(node* newNode)\n{\n    newNode-&gt;nextNode = head;\n    head = newNode;\n}\n</code></pre>\n\n<h2><strong>Printing List</strong></h2>\n\n<pre><code>void linkedList::displayList()\n{\n\n    node* thisNode = head;\n\n        do\n        {\n            cout &lt;&lt; thisNode-&gt;make &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;model &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;engine &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;registration &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;doors &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;passengers &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;maxload &lt;&lt; \"\\t\";\n            cout &lt;&lt; thisNode-&gt;rented &lt;&lt; \"\\t\";\n            cout &lt;&lt; \"\\n\\t\";\n            thisNode = thisNode-&gt;nextNode;\n\n        } while (thisNode != NULL);\n\n}\n</code></pre>\n\n<hr>\n"}, {"tags": ["c++", "memory-leaks"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1499869994, "post_id": 45060559, "comment_id": 77094535, "body": "<code>fClassPointer2-&gt;message(); &#47;&#47; what could happen?</code> Undefined behaviour."}, {"owner": {"reputation": 3023, "user_id": 5587393, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1d83bf6603c6c7a002ab8e18e418e2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Luzzara", "link": "https://stackoverflow.com/users/5587393/marco-luzzara"}, "edited": false, "score": 0, "creation_date": 1499870499, "post_id": 45060559, "comment_id": 77094921, "body": "Just a note: it&#39;s better using an initialization list in your constructor <code>fakeClass::fakeClass(int id)</code>"}, {"owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "edited": false, "score": 0, "creation_date": 1499870888, "post_id": 45060559, "comment_id": 77095224, "body": "Calling <code>delete</code> or <code>free</code> doesn&#39;t necessarily erase the data from that memory location immediately, but rather it is marking that memory location as writable."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "edited": false, "score": 0, "creation_date": 1499871645, "post_id": 45060559, "comment_id": 77095841, "body": "@Thomas Phan This is a very dangerous assumption to be making. It might work like this some of the time, but expecting things to behave this way is simply wrong."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1499871740, "post_id": 45060559, "comment_id": 77095915, "body": "PS. Extra bonus answer: Almost certainly no. <code>delete[] myString;</code> is a bit more likely, but nowhere near certain. But really, the only place where <code>char* myString</code> should occur is somehere in the bowels of <code>std::string</code>, and <code>std::string::~string</code> handles cleanup."}, {"owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499888043, "post_id": 45060559, "comment_id": 77105566, "body": "@Frank Well my intention wasn&#39;t to tell the OP that it&#39;s a good thing to try to access data at a memory address after calling <code>free</code> or <code>delete</code>, but to simply offer an explanation of why OP was still able to access that data instead of getting garbage data or crashing."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "edited": false, "score": 0, "creation_date": 1499888313, "post_id": 45060559, "comment_id": 77105677, "body": "@Thomas Phan From a C++ standpoint, really, there is no other explanation than &quot;dumb luck&quot;. This is not an assembly question."}], "answers": [{"tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 1, "last_activity_date": 1499870564, "last_edit_date": 1499870564, "creation_date": 1499870118, "answer_id": 45060682, "question_id": 45060559, "link": "https://stackoverflow.com/questions/45060559/testing-raw-pointers-c-but-could-not-find-leaks/45060682#45060682", "title": "Testing raw pointers c++, but could not find leaks", "body": "<blockquote>\n  <p>That is my question, I suppose is because memory is freed, but not yet overwritten, and that is why I get the \"Object: 2\" message after deleting the object #2. Is that correct?</p>\n</blockquote>\n\n<p>This is \"correct\" in the sense that most implementations will behave this way, but your situation qualifies as \"undefined behavior\", so there is no guarantee that this will work accross different compilers, compiler versions, or architectures.</p>\n\n<blockquote>\n  <p>when running on Terminal \"leaks pruebaC\", I get no leak report... why?</p>\n</blockquote>\n\n<p>There is no leak detector added by default, because it adds unnecessary weight to the program (makes it slow to shut down). You have to add a leak detector explicitely by yourself (like linking to tcmalloc).</p>\n\n<blockquote>\n  <p>when I see examples with \"char *myString\", should I \"delete myString\" after?</p>\n</blockquote>\n\n<p>Here's a rule of thumb for this: Every <code>new</code> needs to be matched with a <code>delete</code>, and vice-versa.</p>\n"}], "owner": {"reputation": 105, "user_id": 4064499, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db88c574c2898c1b36ae5115dbb82dc8?s=128&d=identicon&r=PG&f=1", "display_name": "raululm", "link": "https://stackoverflow.com/users/4064499/raululm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1499871578, "answer_count": 1, "score": 0, "last_activity_date": 1499936953, "creation_date": 1499869802, "last_edit_date": 1499936953, "question_id": 45060559, "link": "https://stackoverflow.com/questions/45060559/testing-raw-pointers-c-but-could-not-find-leaks", "closed_reason": "Duplicate", "title": "Testing raw pointers c++, but could not find leaks", "body": "<p>I am playing a bit with raw pointers on c++, I know that nowadays it is good practices to use smart pointers, but as I am learning c++ on my own, I would like first understand raw pointers before moving to smart pointers.</p>\n\n<p>To play around I have created a fakeClass, and playing in a Xcode console project c++:</p>\n\n<pre><code>/** fakeClass.hpp **/\n#ifndef fakeClass_hpp\n#define fakeClass_hpp\n\nnamespace RPO {\n\n    class fakeClass {\n    private:\n        int _id;\n\n    public:\n        fakeClass(int id);\n        ~fakeClass();\n\n        void message();\n    }; // end class\n} // end namespace\n\n#endif\n\n/** fakeClass.cpp **/\n#include \"fakeClass.hpp\"\n\n#include &lt;iostream&gt;\n\nnamespace RPO {\n\n    fakeClass::fakeClass(int id) {\n        _id = id;\n        std::cout &lt;&lt; \"Creating object: \" &lt;&lt; _id &lt;&lt; std::endl;\n    }\n\n    fakeClass::~fakeClass() {\n        std::cout &lt;&lt; \"Destroying objet: \" &lt;&lt; _id &lt;&lt; std::endl;\n    }\n\n    void fakeClass::message() {\n        std::cout &lt;&lt; \"Object: \" &lt;&lt; _id &lt;&lt; std::endl;\n    }\n}\n\n/** main.cpp **/\nint main(int argc, const char * argv[]) {\n    // Instantiate on the stack\n    RPO::fakeClass fClass(1);\n    fClass.message();\n\n    // Instantiate on the heap\n    RPO::fakeClass *fClassPointer = new RPO::fakeClass(2);\n    fClassPointer-&gt;message();\n\n    fClassPointer = new RPO::fakeClass(3); // Create new object #3, on non deleted pointer\n    fClassPointer-&gt;message();\n\n    delete fClassPointer; // Free memory of object #3, but still pointing to the memory address\n    fClassPointer = nullptr; // pointer is pointing to null right now\n\n    fClassPointer-&gt;message(); // throws an error\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Creating object: 1\nObject: 1\nCreating object: 2\nObject: 2\nCreating object: 3\nObject: 3\nDestroying object: 3\nDestroying object: 1\n</code></pre>\n\n<p>Edited:</p>\n\n<blockquote>\n  <p>Thanks to the revisors, I have been searching but could not find anything, but the question posted by tobi303 answers one of my questions (about why one method is still responding after free the memory), but as I said on the title the main question was about leaks.</p>\n</blockquote>\n\n<p>As it can be seen, object #2 is never destroyed, so it is an obvious memory leak. I breakpointed after creating the object #3, and typed on Console \"leaks pruebaC\", following instructions from <a href=\"https://stackoverflow.com/questions/34441298/xcode-7-2-instruments-memory-leak-not-working-for-c-code\">this question</a>, but I get no leak report... why?</p>\n\n<pre><code>leaks Report Version:  2.0\nProcess 1292: 147 nodes malloced for 17 KB\n**Process 1292: 0 leaks for 0 total leaked bytes.**\n</code></pre>\n\n<p>Also tried after de <strong>fClassPointer = nullptr;</strong> with the same result.</p>\n\n<p>So, 2 questions, why the leak didn't showed up? and, do the memory used by an app is freed when the app is terminated? (even if it is a memory leak with no pointers)</p>\n\n<p>Thank you.</p>\n\n<p>PS: extra bonus, when I see examples with \"char *myString\", should I \"delete myString\" after?</p>\n"}, {"tags": ["c++", "memory", "data-structures", "reverse-engineering"], "comments": [{"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1499869987, "post_id": 45060536, "comment_id": 77094528, "body": "The memory does not contain pointers, so your struct shouldn&#39;t either. Use plain char arrays. And disable padding and alignment..."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1499870297, "post_id": 45060536, "comment_id": 77094765, "body": "They don&#39;t look like strings to me, how are you sure that&#39;s what they are?"}, {"owner": {"reputation": 103, "user_id": 7340629, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c7d016e1860016b1061f35d95c933349?s=128&d=identicon&r=PG&f=1", "display_name": "rflxdev", "link": "https://stackoverflow.com/users/7340629/rflxdev"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1499870477, "post_id": 45060536, "comment_id": 77094911, "body": "@harold I know the function they are being passed to. The function takes 4 parameters, and all 4 are strings."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5027489, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-ZxHEZZunve4/AAAAAAAAAAI/AAAAAAAAAKs/W7vMJL7RvQw/photo.jpg?sz=128", "display_name": "WhiteSword", "link": "https://stackoverflow.com/users/5027489/whitesword"}, "edited": false, "score": 0, "creation_date": 1499873070, "post_id": 45060835, "comment_id": 77096986, "body": "there&#39;s a typo, you have written null character as <code>&#39;&#47;0&#39;</code> whereas it should be &#39;<code>\\0&#39;</code>"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1499881027, "post_id": 45060835, "comment_id": 77101677, "body": "<i>This will only work if your string size are equal to the buffer size.</i> That&#39;s incorrect. The strings are 0-terminated, so as long as the string length doesn&#39;t exceed the buffer size, the <code>char[]</code> will work."}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1499932384, "post_id": 45060835, "comment_id": 77121629, "body": "@JimMischel Incorrect. If you allocate buffers with fixed size you must pray that the strings that will come will exactly match the allocated buffers. If that is not true the data from the strings will fill the buffers sequentially till there is no more space. So if you strbuffer1(<code>char[]</code>) is 50 bytes you may fit all of the strings there and when you try to read them you&#39;ll get only the first. The next 3 buffers will be filled with garbage"}], "tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 0, "last_activity_date": 1499873183, "last_edit_date": 1499873183, "creation_date": 1499870492, "answer_id": 45060835, "question_id": 45060536, "link": "https://stackoverflow.com/questions/45060536/c-convert-memory-into-data-structure/45060835#45060835", "title": "c++ convert memory into data structure", "body": "<p>You are using pointers(<code>char*</code>) and the structure size of your structure is the size of the 4 pointers. If you want to get the strings you should use arrays(<code>char[]</code>) with fixed size. </p>\n\n<p>This will only work if your string size are equal to the buffer size.</p>\n\n<p>IMO the best way is to get the in a char array then find the null terminators\n<code>/0</code> and then configure your pointers to point to the start of each string(at the start and right after the first 3 null terminators).</p>\n\n<pre><code>char* pointerToMem = something; //your strings data\nyourStruct.str1 = pointerToMem;\nwhile(*pointerToMem != '\\0')\n{\n    pointerToMem++;\n}\nyourStruct.str2 = pointerToMem + 1;\n</code></pre>\n\n<p>This is how you can make the struct of pointers work. This code is not optimal and you should not use it as it but it shows how can you get the strings from the memory. To have a C string you only need the address of the first character and some null terminator at the end.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 7340629, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c7d016e1860016b1061f35d95c933349?s=128&d=identicon&r=PG&f=1", "display_name": "rflxdev", "link": "https://stackoverflow.com/users/7340629/rflxdev"}, "edited": false, "score": 0, "creation_date": 1499870868, "post_id": 45060956, "comment_id": 77095215, "body": "The problem is that the strings are not a consistent size. I.e. they will sometimes change so they are not always what I have put in the example code above"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 103, "user_id": 7340629, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c7d016e1860016b1061f35d95c933349?s=128&d=identicon&r=PG&f=1", "display_name": "rflxdev", "link": "https://stackoverflow.com/users/7340629/rflxdev"}, "edited": false, "score": 0, "creation_date": 1499880947, "post_id": 45060956, "comment_id": 77101624, "body": "@reflexdev: You make the char arrays the <i>maximum size</i> that the strings can be. For example, if your first string is always one or two characters, plus the null terminator, you&#39;d make the first array length 3, as shown in the answer. It looks like the data is several maximum-length buffers with 0-terminated strings. If that&#39;s the case, then this answer is the correct one (provided you give the correct buffer sizes for <code>data2</code>, <code>data3</code>, etc.)."}], "tags": [], "owner": {"reputation": 21, "user_id": 8296543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc611a13081918e8756a38037336f619?s=128&d=identicon&r=PG&f=1", "display_name": "T. Edison", "link": "https://stackoverflow.com/users/8296543/t-edison"}, "is_accepted": false, "score": 2, "last_activity_date": 1499870808, "creation_date": 1499870808, "answer_id": 45060956, "question_id": 45060536, "link": "https://stackoverflow.com/questions/45060536/c-convert-memory-into-data-structure/45060956#45060956", "title": "c++ convert memory into data structure", "body": "<p>You have a pointer to a structure of pointers so even if you point the structure to the correct memory address, you still have uninitialized pointers inside the structure. You need to provide them with actual memory. I would try setting up your structure like this ...</p>\n\n<pre><code>struct reversedConnectionDat_t\n{\n    char data1 [3];\n    char data2 [50];\n    char data3 [50];\n    char data4 [50];\n}\n</code></pre>\n\n<p>BTW, I didn't count the spaces. I just kind of guessed at it but you get the idea.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 5027489, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-ZxHEZZunve4/AAAAAAAAAAI/AAAAAAAAAKs/W7vMJL7RvQw/photo.jpg?sz=128", "display_name": "WhiteSword", "link": "https://stackoverflow.com/users/5027489/whitesword"}, "is_accepted": false, "score": 0, "last_activity_date": 1499871906, "creation_date": 1499871906, "answer_id": 45061410, "question_id": 45060536, "link": "https://stackoverflow.com/questions/45060536/c-convert-memory-into-data-structure/45061410#45061410", "title": "c++ convert memory into data structure", "body": "<p>I couldn't understand what's wrong with your code except for your <code>magicnumber:0x123456</code>, casting which might not suit your structure. Are you sure your <code>magic-number</code> results in data compatible to the struct defined by you? Like, if you'll try to access <code>storeDat-&gt;data3</code>, it'll definitely be leading to seg-fault except you do something as follows or you are very lucky.</p>\n\n<pre><code>struct R{\n    char *a;\n    char *b;\n};\n\nint main(void)\n{\n    struct R *r1 = (struct R*) malloc(sizeof(struct R));\n    r1-&gt;a = \"12333\";      //Pointing to a string literal\n    r1-&gt;b = \"12331\";      //Pointing to a string literal\n\n    int address = (int)&amp;r1;\n    struct R *r2 = (struct R*) address;\n    std::cout&lt;&lt;r2-&gt;b;\n    return 0;\n}\n</code></pre>\n\n<p>P.S. - I'm not a good programmer. But was just curious to answer, as I thought it might be of some help. Sorry, if I couldn't understand your problem properly.</p>\n"}, {"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": false, "score": 1, "last_activity_date": 1499882123, "creation_date": 1499882123, "answer_id": 45064585, "question_id": 45060536, "link": "https://stackoverflow.com/questions/45060536/c-convert-memory-into-data-structure/45064585#45064585", "title": "c++ convert memory into data structure", "body": "<p>I think you've mis-identified that data structure. I suspect that what you have is three independent buffers, each of which can hold one or more null-terminated strings.</p>\n\n<p>The first structure is 68 bytes long and contains <code>\"ad\\0dgdhkkkkkkhkk\\0\"</code> (followed by enough <code>\\0</code> to fill the buffer.</p>\n\n<p>It's possible that this buffer is really only 64 bytes long, and that the four bytes after it are used for some other data element.</p>\n\n<p>The second buffer looks to be 64 bytes long, containing a single string and padded with <code>\\0</code> characters to fill out the 64 bytes.</p>\n\n<p>It's impossible to say how long the third buffer is. All we know is that it's long enough to hold the string <code>\"dgcfoh\\0\"</code>. I'd <em>guess</em> that the buffer is 64 bytes long, but be willing to revise that opinion if I get more data.</p>\n\n<p>I think the structure you want is:</p>\n\n<pre><code>struct s\n{\n    char data1[68]; // buffer holds one or more null-terminated strings\n    char data2[64];\n    char data3[64].\n}\n</code></pre>\n\n<p>Based on the scant information you've given us, that's what I'd start with. Then you need a way to parse a buffer of null-terminated strings. That is, get the two individual strings from the first buffer. That's a pretty easy bit of C code.</p>\n"}], "owner": {"reputation": 103, "user_id": 7340629, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c7d016e1860016b1061f35d95c933349?s=128&d=identicon&r=PG&f=1", "display_name": "rflxdev", "link": "https://stackoverflow.com/users/7340629/rflxdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1499882123, "creation_date": 1499869747, "last_edit_date": 1499870987, "question_id": 45060536, "link": "https://stackoverflow.com/questions/45060536/c-convert-memory-into-data-structure", "title": "c++ convert memory into data structure", "body": "<p>When debugging an application I have found in memory a structure that I am 100% certain only consists of 4 strings. Though I am not quite sure how I would convert it to a data structure so I can use the structures pointer address to access values. For example here is what the data struct looks like in memory (as an example lets say it is CONSISTENTLY located at the memory address 0x123456) <a href=\"https://i.stack.imgur.com/uJumB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uJumB.png\" alt=\"enter image description here\"></a></p>\n\n<p>The data structureconsists of 4 separate strings</p>\n\n<pre><code>string 1 = ad\nstring 2 = dgdhkkkkkkhkk\nstring 3 = ggghhjk\nstring 4 = dgcfoh\n</code></pre>\n\n<p>And I have tried creating a data struct like</p>\n\n<pre><code>struct reversedConnectionDat_t\n{\n    char * data1;\n    char * data2;\n    char * data3;\n    char * data4;\n}\n</code></pre>\n\n<p>and this is how I tried accessing the data</p>\n\n<pre><code>reversedConnectionDat_t * storeDat = (reversedConnectionDat_t*)0x123456;\nprint(storeDat-&gt;data3);\n</code></pre>\n\n<p>But it does not seem to work. Am I not reading the strings from memory properly?</p>\n\n<p>(Oh and the strings will sometimes change from what I posted in the example code posted above, i.e sometimes string 1 will be 7 in length and string 3 will only be 2 in length etc...)</p>\n"}, {"tags": ["c++", "bash", "pbs"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1499869672, "post_id": 45060457, "comment_id": 77094265, "body": "What dies this have to do with C++?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499869751, "post_id": 45060457, "comment_id": 77094332, "body": "<code>-v ARC_LENGTH_ARG=$ARC_LENGTH&#47;10, RANDOM_NUM_ARG=$ARC_LENGTH</code> is three separate arguments passed to the program: <code>-v</code>, <code>ARC_LENGTH_ARG=$ARC_LENGTH&#47;10,</code> and <code>RANDOM_NUM_ARG=$ARC_LENGTH</code>. My guess is that you should use <code>-v ARC_LENGTH_ARG=$ARC_LENGTH&#47;10,RANDOM_NUM_ARG=$ARC_LENGTH</code> instead (note the lack of space after the comma)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1499869844, "post_id": 45060457, "comment_id": 77094416, "body": "Are you aware that <code>$ARC_LENGTH&#47;10</code> is just a string, not the result of dividing a value by 10? If not, you are also probably not aware that the shell doesn&#39;t do floating-point arithmetic. <code>$((25&#47;10))</code> is 2, not 2.5."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499869901, "post_id": 45060457, "comment_id": 77094460, "body": "Also note that the shell will not do any arithmetic for <code>$ARC_LENGTH&#47;10</code>. It will simply expand the <code>ARC_LENGTH</code> variable and append the string <code>&#47;10</code>. I suggest you read <a href=\"http://man7.org/linux/man-pages/man1/bash.1.html\" rel=\"nofollow noreferrer\">the Bash manual page</a>, especially the section about <a href=\"http://man7.org/linux/man-pages/man1/bash.1.html#ARITHMETIC_EVALUATION\" rel=\"nofollow noreferrer\">arithmetic evaluation</a> if you intend to do a real division."}, {"owner": {"reputation": 5, "user_id": 7914704, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd76d2ead25dfd63836565c9674c90b2?s=128&d=identicon&r=PG&f=1", "display_name": "michael kovacevich", "link": "https://stackoverflow.com/users/7914704/michael-kovacevich"}, "edited": false, "score": 0, "creation_date": 1499870379, "post_id": 45060457, "comment_id": 77094815, "body": "I used the atof function in my program to convert from a string to a double so that should work right? Also, I will try to run the program with the space removed now"}, {"owner": {"reputation": 15799, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1499870585, "post_id": 45060457, "comment_id": 77094987, "body": "No, <code>atof</code> will not divide numbers, it&#39;ll just return the first one it parses."}, {"owner": {"reputation": 5, "user_id": 7914704, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd76d2ead25dfd63836565c9674c90b2?s=128&d=identicon&r=PG&f=1", "display_name": "michael kovacevich", "link": "https://stackoverflow.com/users/7914704/michael-kovacevich"}, "edited": false, "score": 0, "creation_date": 1499870794, "post_id": 45060457, "comment_id": 77095157, "body": "So when the argument is 1/10 is passed into the program, atof will not produce .1 and instead only see 1? I am a little confused, also deleting the extra space worked and I am not sure why. Also, I use atoi to convert RANDOM_NUM_ARG from a string to integer but that should be fine? I edited my post to include the portion of the code that converts from strings to numbers."}, {"owner": {"reputation": 15799, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1499870971, "post_id": 45060457, "comment_id": 77095297, "body": "Yes, <code>atof</code> will parse <code>1&#47;10</code> as <code>1</code>, not <code>0.1</code>. Deleting the space in between worked because with space, you were passing two separate arguments, one belonging to <code>-v</code> option, and one positional. You can also try wrapping the list with double quotes, like: <code>-v &quot;ARC_LENGTH_ARG=$ARC_LENGTH&#47;10, RANDOM_NUM_ARG=$ARC_LENGTH&quot;</code>, that way space is preserved, and <code>-v</code> gets the complete list as a single argument."}, {"owner": {"reputation": 15799, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1499871175, "post_id": 45060457, "comment_id": 77095458, "body": "The C code you added, does not handle <code>-v</code> option at all."}, {"owner": {"reputation": 5, "user_id": 7914704, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd76d2ead25dfd63836565c9674c90b2?s=128&d=identicon&r=PG&f=1", "display_name": "michael kovacevich", "link": "https://stackoverflow.com/users/7914704/michael-kovacevich"}, "edited": false, "score": 0, "creation_date": 1499871245, "post_id": 45060457, "comment_id": 77095524, "body": "Why is that? Isn&#39;t -v used to handle multiple arguments?"}, {"owner": {"reputation": 15799, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1499872692, "post_id": 45060457, "comment_id": 77096675, "body": "It&#39;s not clear from the portion you inserted how are you handling arguments parsing, <code>getopt</code>? If you read directly from <code>argv</code> (as the code suggests), how are you handling other options?"}, {"owner": {"reputation": 5, "user_id": 7914704, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd76d2ead25dfd63836565c9674c90b2?s=128&d=identicon&r=PG&f=1", "display_name": "michael kovacevich", "link": "https://stackoverflow.com/users/7914704/michael-kovacevich"}, "edited": false, "score": 0, "creation_date": 1499873349, "post_id": 45060457, "comment_id": 77097175, "body": "I do not think I understand what you&#39;re saying so I apologize for that but I will try to explain how I think the arugments are parsed. Since I have 3 arguments then argc should equal 3 and I can use atof(argv[1]) to pass the value of ARC_LENGTH_ARG into my program and the same for atoi(argv[2]) which should contain the value of RANDOM_NUM_ARG into the program and convert it into a integer. I do not understand the use of getopt but would appreciate it if you could explain a little more?"}, {"owner": {"reputation": 15799, "user_id": 404556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32018ce9b9c7fb9c7587eba9e4dad4?s=128&d=identicon&r=PG", "display_name": "randomir", "link": "https://stackoverflow.com/users/404556/randomir"}, "edited": false, "score": 0, "creation_date": 1499873773, "post_id": 45060457, "comment_id": 77097481, "body": "The &quot;usage&quot; for qsub says it handles multiple options and switches, <code>-v</code> being only one of them. How do you handle all those? The <a href=\"https://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html#Example-of-Getopt\" rel=\"nofollow noreferrer\"><code>getopt</code></a> is a standard <code>libc</code> way of parsing command line options."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1499883677, "post_id": 45060457, "comment_id": 77103206, "body": "This is an excellent example of why printing a usage statement instead of a good error message is incorrect behavior.  Rather than reporting a generic usage statement, the program ought to say something specific like <code>unexpected argument: RANDOM_NUM_ARG=...</code> which would point the user to the error."}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1499878525, "creation_date": 1499878525, "answer_id": 45063590, "question_id": 45060457, "link": "https://stackoverflow.com/questions/45060457/bash-script-and-command-line-arguments/45063590#45063590", "title": "Bash script and Command line arguments", "body": "<p>To do floating point arithmetic from bash, you need to call out to an external program. You could do one of:</p>\n\n<pre><code>qsub -v \"ARC_LENGTH_ARG=$(bc -l &lt;&lt;&lt;\"$ARC_LENGTH/10\"),...\"\nqsub -v \"ARC_LENGTH_ARG=$(awk -v \"a=$ARC_LENGTH\" 'BEGIN {print a/10}'),...\"\n</code></pre>\n\n<p>Using <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution\" rel=\"nofollow noreferrer\">command substitution</a> syntax <code>$(cmd ...)</code> within a double quoted string.</p>\n"}], "owner": {"reputation": 5, "user_id": 7914704, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd76d2ead25dfd63836565c9674c90b2?s=128&d=identicon&r=PG&f=1", "display_name": "michael kovacevich", "link": "https://stackoverflow.com/users/7914704/michael-kovacevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499878525, "creation_date": 1499869551, "last_edit_date": 1499871105, "question_id": 45060457, "link": "https://stackoverflow.com/questions/45060457/bash-script-and-command-line-arguments", "title": "Bash script and Command line arguments", "body": "<p>So I have a file that is called \"run_correlation_study.pbs\" and \"correlation_study.pbs\". In correlation_study.pbs, I run a bash script that uses portable batch software(pbs) and assign 3 command line arguments that will be used in my actual program. In run_correlation_study.pbs, I loop through the command line arguments that are used in correlation_study.pbs so that I can split up my program into multiple jobs for a computing cluster. However, I have been getting errors with my run_correlation_study.pbs file when I try to run it (I turn it into an executable file before running it). I have posted both file below, run_correlation_study.pbs is listed first and correlation_study.pbs is listed second. I can provide the part of my program where the command line arguments are used but I do not think the problem is caused in there. Also, the error/text that shows up when I try to run my program is listed last.</p>\n\n<p>Run_correlation_study.pbs:</p>\n\n<pre><code>    for ((ARC_LENGTH = 0; ARC_LENGTH &lt;= 35; ARC_LENGTH++)); do\n       qsub -v ARC_LENGTH_ARG=$ARC_LENGTH/10, RANDOM_NUM_ARG=$ARC_LENGTH correlation_study.pbs\n    done\n</code></pre>\n\n<p>Correlation_study.pbs:</p>\n\n<pre><code>    #PBS -l walltime=24:00:00\n    #PBS -l nodes=1:ppn=1\n    #PBS -N Correlation_study_data\n    #PBS -j oe\n    #PBS -m abe\n\n    #COMMANDS TO RUN\n    cd /home/kovacevich.9/correlation_study/corrstudies\n    ./correlation_study.x ${ARC_LENGTH_ARG} ${RANDOM_NUM_ARG}\n</code></pre>\n\n<p>Error/text:</p>\n\n<pre><code>   usage: qsub [-a date_time] [-A account_string] [-b secs]\n   [-c [ none | { enabled | periodic | shutdown |\n   depth=&lt;int&gt; | dir=&lt;path&gt; | interval=&lt;minutes&gt;}... ]\n   [-C directive_prefix] [-d path] [-D path]\n   [-e path] [-h] [-I] [-j oe] [-k {oe}] [-l resource_list] [-m n \n   {abe}]\n   [-M user_list] [-N jobname] [-o path] [-p priority] [-P proxy_user] \n   [-q queue] \n   [-r y|n] [-S path] [-t number_to_submit] [-T type]  [-u user_list] \n   [-w] path\n   [-W additional_attributes] [-v variable_list] [-V ] [-x] [-X] [-z] \n   [script]\n</code></pre>\n\n<p>Portion of program:</p>\n\n<pre><code>    if(argc == 3)\n    {\n       double test_arc_length = atof(argv[1]);\n       unsigned long int seed = atoi(argv[2]);\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtcpsocket"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499868157, "post_id": 45059854, "comment_id": 77093097, "body": "How do you know you don&#39;t receive everything? And what do you send? How do you send it? And can you please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us? Of both the receiver and sender?"}, {"owner": {"reputation": 5593, "user_id": 3179310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffeUP.png?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/3179310/mateusz"}, "edited": false, "score": 1, "creation_date": 1499868482, "post_id": 45059854, "comment_id": 77093322, "body": "<code>ReadAll()</code> will return currently available data in it&#39;s buffer. You should create some kind of protocol ( message framing ) to distinguish how many bytes to read from data or stick to one packet length. Either way <code>ReadAll()</code> is not the best thing to do when dealing with networking ... additionaly read <a href=\"https://stackoverflow.com/questions/28955961/qt-socket-does-no-read-all-data\">this answer</a>"}], "owner": {"reputation": 11, "user_id": 8278682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a7ee2b9916a6c88ed7fe04ea4a9a0ee?s=128&d=identicon&r=PG&f=1", "display_name": "mehdi", "link": "https://stackoverflow.com/users/8278682/mehdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1499869349, "answer_count": 0, "score": 0, "last_activity_date": 1499868043, "creation_date": 1499868043, "question_id": 45059854, "link": "https://stackoverflow.com/questions/45059854/receive-whole-data-from-qtcpsocket", "closed_reason": "Duplicate", "title": "receive whole data from qtcpsocket", "body": "<p>i write this code but unfortunately i cant receive whole data and only receive 1.4 k byte but i should receive 64 K byte. what should I do please help me.</p>\n\n<pre><code>     QByteArray ba2;\n     ba2.resize(2);\n     ba2[0] = 0x00;\n     ba2[1] = 0xc0;\n     Client ob;\n     ob.connectToHost();\n     ob.writeData(ba2);\n\n\n\n    QByteArray Client:: readback(QByteArray data)\n      {\n    qDebug() &lt;&lt; socket-&gt;readAll();\n\n     return data;\n      }\n\n       void Client::connectToHost()\n     {\n      socket-&gt;connectToHost(\"192.168.100.17\", 1134);\n\n      }\n\n\n     void Client::close()\n    {\n  socket-&gt;close();\n\n       }\n\n   Client::Client(QObject *parent) : QObject(parent)\n    {\n    socket = new QTcpSocket();\n   connect(socket, SIGNAL(readyRead()), this, SLOT(readback(QByteArray data)));\n\n     }\n</code></pre>\n"}, {"tags": ["c++", "math", "modular-arithmetic"], "comments": [{"owner": {"reputation": 55420, "user_id": 52443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a220753dbb4d24a76430971a18ed4dce?s=128&d=identicon&r=PG", "display_name": "Welbog", "link": "https://stackoverflow.com/users/52443/welbog"}, "edited": false, "score": 1, "creation_date": 1499867993, "post_id": 45059796, "comment_id": 77092952, "body": "&quot;Does it have something to do with negative numbers?&quot; Have you tried using negative numbers with both methods and comparing the answers you get?"}, {"owner": {"reputation": 83, "user_id": 8264038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7nxOwKR0U_o/AAAAAAAAAAI/AAAAAAAAAB8/V5s1TW2tzYs/photo.jpg?sz=128", "display_name": "Daniel Oravec", "link": "https://stackoverflow.com/users/8264038/daniel-oravec"}, "reply_to_user": {"reputation": 55420, "user_id": 52443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a220753dbb4d24a76430971a18ed4dce?s=128&d=identicon&r=PG", "display_name": "Welbog", "link": "https://stackoverflow.com/users/52443/welbog"}, "edited": false, "score": 0, "creation_date": 1499868446, "post_id": 45059796, "comment_id": 77093293, "body": "Oh, now I see. I was inattentive when I was trying to come up with answer on my own, sorry. Thanks a lot :)"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1499878897, "post_id": 45059796, "comment_id": 77100513, "body": "Are you sure it wasn&#39;t <code>((a + b) % d + d) % d</code>?"}, {"owner": {"reputation": 83, "user_id": 8264038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7nxOwKR0U_o/AAAAAAAAAAI/AAAAAAAAAB8/V5s1TW2tzYs/photo.jpg?sz=128", "display_name": "Daniel Oravec", "link": "https://stackoverflow.com/users/8264038/daniel-oravec"}, "edited": false, "score": 0, "creation_date": 1499882880, "post_id": 45059796, "comment_id": 77102773, "body": "No, it was like I wrote last time I&#39;ve seen this, but It was probably because of that particular problem input constraints. Your version is more general, isn&#39;t it? Thanks, I edited question."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 9, "last_activity_date": 1499868068, "creation_date": 1499868068, "answer_id": 45059867, "question_id": 45059796, "link": "https://stackoverflow.com/questions/45059796/modular-arithmetic-competitive-programming/45059867#45059867", "title": "Modular arithmetic - competitive programming", "body": "<p>Yes you are correct. Until C++11 the behaviour of the remainder operator <code>%</code> for negative arguments was left to the implementation, subject to some constraints. And adding <code>d</code> to the left argument can help that so long as the other terms in that argument sum to greater or equal to <code>-d</code>, which, in general is not the case. (<code>-a / d</code> multiples of <code>d</code> for the case of negative <code>a</code> would have been a better additive constant in your particular case.)</p>\n"}, {"tags": [], "owner": {"reputation": 17061, "user_id": 507738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1", "display_name": "MC Emperor", "link": "https://stackoverflow.com/users/507738/mc-emperor"}, "is_accepted": false, "score": 2, "last_activity_date": 1499868500, "creation_date": 1499868500, "answer_id": 45060030, "question_id": 45059796, "link": "https://stackoverflow.com/questions/45059796/modular-arithmetic-competitive-programming/45060030#45060030", "title": "Modular arithmetic - competitive programming", "body": "<p>Yes, it has something to do with negative numbers. It prevents the result from being a negative number under certain conditions. In this case, when the <code>b</code> variable is negative, the result of <code>b % d</code> is also negative. This result can never be greater than <code>d</code>, so adding <code>d</code> to this result forces the result to be positive.</p>\n\n<p>Below code is Java code, but it has the same principle:</p>\n\n<pre><code>int a = 13;\nint b = -23;\nint d = 31;\n\nint result1 = (a + b % d + d) % d;\nint result2 = (a + b % d) % d;\n\nSystem.out.println(result1);\nSystem.out.println(result2);\n</code></pre>\n\n<p>It outputs the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>21\n-10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3568, "user_id": 5811973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/B4tie.jpg?s=128&g=1", "display_name": "Ishpreet", "link": "https://stackoverflow.com/users/5811973/ishpreet"}, "is_accepted": false, "score": 0, "last_activity_date": 1505478235, "creation_date": 1505478235, "answer_id": 46239528, "question_id": 45059796, "link": "https://stackoverflow.com/questions/45059796/modular-arithmetic-competitive-programming/46239528#46239528", "title": "Modular arithmetic - competitive programming", "body": "<p>To avoid integer overflow and to always keep number positive we use modular arithmetic. \nCompettitve programmers tend to use <strong><code>(a+b)%b</code></strong> instead of <strong><code>a%b</code></strong> when a is a negative number. </p>\n\n<pre><code>a%b = (a+b)%b\n(a+b)%b = a%b + b%b = a%b + 0 = a%b\n</code></pre>\n\n<p>Like <code>a=-2</code> &amp; <code>b=5</code> then <code>a%b = 3</code></p>\n"}], "owner": {"reputation": 83, "user_id": 8264038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7nxOwKR0U_o/AAAAAAAAAAI/AAAAAAAAAB8/V5s1TW2tzYs/photo.jpg?sz=128", "display_name": "Daniel Oravec", "link": "https://stackoverflow.com/users/8264038/daniel-oravec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 3, "accepted_answer_id": 45059867, "answer_count": 3, "score": 7, "last_activity_date": 1505478235, "creation_date": 1499867917, "last_edit_date": 1505476908, "question_id": 45059796, "link": "https://stackoverflow.com/questions/45059796/modular-arithmetic-competitive-programming", "title": "Modular arithmetic - competitive programming", "body": "<p>I saw a lot of competitive programmers writing code with <code>((a + b) % d + d) % d</code> in C++. Why don't they just use <code>(a + b) % d</code>? What is that <code>+ d</code> inside parentheses good for? Does it have something to do with negative numbers?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "file", "object", "scons"], "comments": [{"owner": {"reputation": 3807, "user_id": 628011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4e665fcec7fa0bc88afbccf60f1c882?s=128&d=identicon&r=PG&f=1", "display_name": "dirkbaechle", "link": "https://stackoverflow.com/users/628011/dirkbaechle"}, "edited": false, "score": 0, "creation_date": 1499871594, "post_id": 45059605, "comment_id": 77095801, "body": "Why does the command line show the path <code>cpp&#47;build&#47;testlibxml2.o</code> when you only specify <code>testlibxml2.cpp</code> in the SConstruct? Are you using variant dirs? If yes, please say so and present the full build setup (MWE), such that other people can reproduce the problem."}, {"owner": {"reputation": 3807, "user_id": 628011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4e665fcec7fa0bc88afbccf60f1c882?s=128&d=identicon&r=PG&f=1", "display_name": "dirkbaechle", "link": "https://stackoverflow.com/users/628011/dirkbaechle"}, "edited": false, "score": 1, "creation_date": 1499871976, "post_id": 45059605, "comment_id": 77096087, "body": "You also may want to have a look at the <a href=\"http://scons.org/doc/production/HTML/scons-user.html\" rel=\"nofollow noreferrer\">UserGuide</a> and search for the description of the <code>ParseConfig</code> method..."}, {"owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "reply_to_user": {"reputation": 3807, "user_id": 628011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4e665fcec7fa0bc88afbccf60f1c882?s=128&d=identicon&r=PG&f=1", "display_name": "dirkbaechle", "link": "https://stackoverflow.com/users/628011/dirkbaechle"}, "edited": false, "score": 0, "creation_date": 1499924075, "post_id": 45059605, "comment_id": 77116823, "body": "Yes, I&#39;m using variant dir which is specified as &quot;cpp/build&quot;. Thanks."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501083057, "post_id": 45059605, "comment_id": 77624584, "body": "Why are you using <code>g++</code> for compiling and <code>clang</code> for linking?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1501091660, "post_id": 45059605, "comment_id": 77630458, "body": "shouldn&#39;t source be a list?"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536893266, "creation_date": 1499867453, "last_edit_date": 1592644375, "question_id": 45059605, "link": "https://stackoverflow.com/questions/45059605/scons-adding-extra-flags-from-external-command-line-leads-to-compilation-error", "title": "scons: adding extra flags from external command line leads to compilation error", "body": "<p>I've got a libxml2 test file called testlibxml2.cpp. I tried to compile it wish scons like this:</p>\n<pre><code>import os\nenv=Environment(ENV=os.environ)\n\ncflags=os.popen(&quot;xml2-config --cflags&quot;).read()\nlflags=os.popen(&quot;xml2-config --libs&quot;).read()\nenv.Program(target='testlibxml2', \nsource='testlibxml2.cpp',CCFLAGS=cflags, LIBS=lflags)\n</code></pre>\n<p>Compilation has error because the g++ command is missing the source filename, and no linking is eventuall done:</p>\n<pre><code>g++ -o cpp/build/testlibxml2.o -c -I/usr/include/libxml2\n\nclang: error: no input files\n</code></pre>\n<p>Then I tried to fix it using an Object file as intermediate step:</p>\n<pre><code>cflags=os.popen(&quot;xml2-config --cflags&quot;).read()\nlflags=os.popen(&quot;xml2-config --libs&quot;).read()\nenv.Append(CCFLAGS=cflags)\nobj=Object('testlibxml2.cpp',CCFLAGS=cflags)\nenv.Program(target='testlibxml2', source=obj,CCFLAGS=cflags, LIBS=lflags)\n</code></pre>\n<p>Still it fails with error:</p>\n<pre><code>g++ -o cpp/build/testlibxml2.o -c -I/usr/include/libxml2\n</code></pre>\n<p>clang: error: no input files</p>\n<p>Why the behavior of scons is so weird:</p>\n<blockquote>\n<p>It fail to populate the source file name when using external command output</p>\n<p>It fail to provide a link step after that.</p>\n</blockquote>\n<p>How to fix it?</p>\n<hr />\n<p>Thanks, got 2 kinds of fixes:</p>\n<pre><code>cflags=os.popen(&quot;xml2-config --cflags&quot;).read()\nlflags=os.popen(&quot;xml2-config --exec-prefix=/usr --libs&quot;).read()\nenv.Append(CCFLAGS=cflags)\nenv.Append(LINKFLAGS=lflags)\n</code></pre>\n<p>Another is:</p>\n<pre><code>env.ParseConfig(&quot;xml2-config --cflags --exec-prefix=/usr --libs&quot;)\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499867610, "post_id": 45059490, "comment_id": 77092667, "body": "afaik you cant connect to something before it is created. I wouldnt even know how to do this with a single instance"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499867654, "post_id": 45059490, "comment_id": 77092697, "body": "anyhow why has it to be connected before creating the instances?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 6, "creation_date": 1499867807, "post_id": 45059490, "comment_id": 77092819, "body": "why dont you connect it in the constructor (ie while creating) ? Imho it is not so obvious why this would be tiresome, because of course you write the code only once"}, {"owner": {"reputation": 317, "user_id": 4039888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thzYl.jpg?s=128&g=1", "display_name": "Do\u011fukan Tun&#231;", "link": "https://stackoverflow.com/users/4039888/do%c4%9fukan-tun%c3%a7"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499867870, "post_id": 45059490, "comment_id": 77092859, "body": "@tobi303 , I was just curious whether there is a smarter approach other than connecting every object one by one. You may want to create 1000 instances of that class, then you will definitely have a lot of difficulty."}, {"owner": {"reputation": 317, "user_id": 4039888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thzYl.jpg?s=128&g=1", "display_name": "Do\u011fukan Tun&#231;", "link": "https://stackoverflow.com/users/4039888/do%c4%9fukan-tun%c3%a7"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499867933, "post_id": 45059490, "comment_id": 77092909, "body": "@tobi303 connecting in the constructor was the first thing I thought but it leads to cyclic inclusion."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1499868028, "post_id": 45059490, "comment_id": 77092979, "body": "what difficulty? You write a single line to connect a slot to a signal in a constructor and then create as many instances as you like... maybe you should show some code, because what seems obvious to you may be not so obvious for others"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1499868058, "post_id": 45059490, "comment_id": 77093001, "body": "You can&#39;t connect anything to something <i>before</i> it exists. I would say either the constructor or write a factory method."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1499869903, "post_id": 45059490, "comment_id": 77094462, "body": "What&#39;s so hard about <code>Widget *makeWidget() { auto w = new Widget(this);  connect(this, signal, w, &amp;Widget::mySlot); return w; }</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 4259, "user_id": 1074799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/840606377197bd43b839d0b62f6d6d9a?s=128&d=identicon&r=PG", "display_name": "S.M.Mousavi", "link": "https://stackoverflow.com/users/1074799/s-m-mousavi"}, "is_accepted": true, "score": 1, "last_activity_date": 1499930917, "last_edit_date": 1499930917, "creation_date": 1499925913, "answer_id": 45072574, "question_id": 45059490, "link": "https://stackoverflow.com/questions/45059490/how-to-connect-signals-to-the-slots-of-all-instances-of-a-class/45072574#45072574", "title": "How to connect signals to the slots of all instances of a class", "body": "<p>you can store pointers of all instances in an static list within constructor and remove it within destructor:  </p>\n\n<p><strong>myclass.h</strong>  </p>\n\n<pre><code>#ifndef MYCLASS_H\n#define MYCLASS_H\n\n#include &lt;QObject&gt;\n\nclass MyClass : public QObject\n{\n    Q_OBJECT\npublic:\n    explicit MyClass(QObject *parent = nullptr);\n    void myMethod1();\n    ~MyClass();\n\nsignals:\n    void globalSignal();\n\npublic slots:\n\nprivate:\n    static QList&lt;MyClass *&gt; m_allInstances;\n    void emitSignal4All();\n};\n\n#endif // MYCLASS_H\n</code></pre>\n\n<p><strong>myclass.cpp</strong>  </p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include \"myclass.h\"\n\nQList&lt;MyClass *&gt; MyClass::m_allInstances;\n\nMyClass::MyClass(QObject *parent) : QObject(parent)\n{\n    m_allInstances.append(this);\n}\n\nvoid MyClass::myMethod1()\n{\n    //... sample usage of `emitSignal4All()`\n    emitSignal4All();\n}\n\nMyClass::~MyClass()\n{\n    m_allInstances.removeOne(this);\n}\n\nvoid MyClass::emitSignal4All()\n{\n    for(int i = 0; i&lt;m_allInstances.count(); i++) {\n        emit m_allInstances.at(i)-&gt;globalSignal();\n    }\n}\n</code></pre>\n\n<p><strong>sample usage</strong>  </p>\n\n<pre><code>    MyClass instance1;\n    MyClass *instance2 = new MyClass();\n    connect(&amp;instance1, &amp;MyClass::globalSignal, this, [&amp;instance1, this]() {\n        qDebug() &lt;&lt; \"signal of instance1 is fired!\";\n    });\n    connect(instance2, &amp;MyClass::globalSignal, this, [instance2, this]() {\n        qDebug() &lt;&lt; \"signal of instance2 is fired!\";\n    });\n\n    MyClass instance3;\n    instance3.myMethod1();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1350, "user_id": 919155, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/90bf6a3dc0a54d71e7c480b1ae1df9ed?s=128&d=identicon&r=PG", "display_name": "Damien", "link": "https://stackoverflow.com/users/919155/damien"}, "is_accepted": false, "score": 2, "last_activity_date": 1499929942, "last_edit_date": 1499929942, "creation_date": 1499927274, "answer_id": 45072930, "question_id": 45059490, "link": "https://stackoverflow.com/questions/45059490/how-to-connect-signals-to-the-slots-of-all-instances-of-a-class/45072930#45072930", "title": "How to connect signals to the slots of all instances of a class", "body": "<p>There is a simple way to do it by using a singleton class to which the instantiated class will connect by their own:</p>\n\n<hr>\n\n<p>Singleton class which will provide a single entry point:</p>\n\n<pre><code>class Linker : public QObject\n{\n    Q_OBJECT\n\npublic:\n        static Linker * getInstance(QObject *parent = 0)\n        {\n           static Linker * instance = new Linker(parent);\n           return instance;\n        }\n\n        sendSignal()\n        {\n            emit mySignal();\n        }\n\n signals:\n        void mySignal();\n};\n</code></pre>\n\n<p>Class to be instantiated:</p>\n\n<pre><code>class ClassToBeInstencied  : public QObject\n{\n    Q_OBJECT\n\nprivate slots:\n    void mySlot() {}\n\npublic:\n\n    ClassToBeInstencied() // constructor\n    {\n        connect(this, &amp;ClassToBeInstencied::mySlot, Linker::getInstance(), &amp;Linker::mySignal);\n    }\n};\n</code></pre>\n\n<p>This has the advantage to keep your code clean and simple as you don't have to handle the connection to the signal / slot outside of the class, so it is well encapsulated.</p>\n\n<p>You just need to create a new instance:</p>\n\n<pre><code>ClassToBeInstencied  * a = new ClassToBeInstencied();\nClassToBeInstencied  * b = new ClassToBeInstencied();\nClassToBeInstencied  * c = new ClassToBeInstencied();\n</code></pre>\n\n<p>and the connection will be automatically done. </p>\n\n<p>You can send a signal to all directly with:</p>\n\n<pre><code>Linker::getInstance()-&gt;sendSignal();\n</code></pre>\n\n<p>Advantage: No list, no loop nothing necessary to manage outside the class and no need of manually connecting each instance.</p>\n"}], "owner": {"reputation": 317, "user_id": 4039888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/thzYl.jpg?s=128&g=1", "display_name": "Do\u011fukan Tun&#231;", "link": "https://stackoverflow.com/users/4039888/do%c4%9fukan-tun%c3%a7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 45072574, "answer_count": 2, "score": 0, "last_activity_date": 1499930917, "creation_date": 1499867155, "last_edit_date": 1499869484, "question_id": 45059490, "link": "https://stackoverflow.com/questions/45059490/how-to-connect-signals-to-the-slots-of-all-instances-of-a-class", "title": "How to connect signals to the slots of all instances of a class", "body": "<p>I have a simple class, and I will create let's say, 100 instances of that class.</p>\n\n<p>Is there a way to connect a slot in all and any of this his class' objects' to a single signal (or vice versa) <strong>before</strong> creating the instances (since connecting every object one by one is tiresome work, obviously).</p>\n\n<p>Thanks for any ideas in advance and I gladly welcome any different approaches.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "parameters", "default-value", "stdlist"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1499866712, "post_id": 45059278, "comment_id": 77091960, "body": "you could check if it is empty and initialize it to that.."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499866718, "post_id": 45059278, "comment_id": 77091964, "body": "And how do you know that attempt is invalid? What errors do you get?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499866760, "post_id": 45059278, "comment_id": 77091998, "body": "what is wrong with it? I dont know what <code>CString</code> is, but otherwise your approach <a href=\"http://ideone.com/oT4uR4\" rel=\"nofollow noreferrer\">seems to be fine</a>"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1499866765, "post_id": 45059278, "comment_id": 77092003, "body": "you can&#39;t really have a default value for a reference, because the reference necessarily references something else, in this case the default would be that nothing else existed"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499866796, "post_id": 45059278, "comment_id": 77092025, "body": "<a href=\"http://coliru.stacked-crooked.com/a/464d2c737d410739\" rel=\"nofollow noreferrer\">This works</a>.  What error do you get?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499866841, "post_id": 45059278, "comment_id": 77092057, "body": "@tobi303 that may be legal (I don&#39;t actually know), but I don&#39;t understand the utility of it."}, {"owner": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "edited": false, "score": 0, "creation_date": 1499866885, "post_id": 45059278, "comment_id": 77092097, "body": "this is the error: error C2143: Syntaxfehler: Es fehlt &#39;)&#39; vor &#39;{&#39;"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1499866918, "post_id": 45059278, "comment_id": 77092124, "body": "your compiler speaks german and c++? I took both in highschool, but am not really great at either."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499866929, "post_id": 45059278, "comment_id": 77092135, "body": "@muaz What compiler and version are you using?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1499866944, "post_id": 45059278, "comment_id": 77092148, "body": "the utility of it being a reference in that case."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1499866956, "post_id": 45059278, "comment_id": 77092160, "body": "please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I didnt manage to reproduce the error you report with the line you show here"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1499866993, "post_id": 45059278, "comment_id": 77092185, "body": "@GradyPlayer ..that no copy has to be made when a parameter is passed"}, {"owner": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499867241, "post_id": 45059278, "comment_id": 77092367, "body": "@NathanOliver it is Visual Studio 2010 compiler"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499867459, "post_id": 45059278, "comment_id": 77092540, "body": "@muaz This code will not work in MSVS 2010.  It does not support C++11.  You will need to upgrade your compiler.  If you can get 2017 as it is the most complaint compiler they have."}, {"owner": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499867560, "post_id": 45059278, "comment_id": 77092625, "body": "@NathanOliver but still there should be a way to address this for my current compiler"}, {"owner": {"reputation": 576, "user_id": 6674126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQpYa.png?s=128&g=1", "display_name": "J-M. Gorius", "link": "https://stackoverflow.com/users/6674126/j-m-gorius"}, "edited": false, "score": 1, "creation_date": 1499867949, "post_id": 45059278, "comment_id": 77092919, "body": "@muaz Take a look at <a href=\"https://msdn.microsoft.com/de-de/library/hh567368.aspx\" rel=\"nofollow noreferrer\">this list</a>."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1499867891, "creation_date": 1499867891, "answer_id": 45059784, "question_id": 45059278, "link": "https://stackoverflow.com/questions/45059278/c-stdlist-paramerter-with-default-values/45059784#45059784", "title": "C++ std::list paramerter with default values", "body": "<p>Micrsoft Visual Studio 2010 <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">does not support <code>std::initializer_list</code></a>.  When you do</p>\n\n<pre><code>std::list&lt;CString&gt;({\"Val1\", \"Val2\", \"Val3\"})\n</code></pre>\n\n<p>You attempt to initialize the <code>std::list</code> using it's <code>std::initializer_list</code> constructor.  Since MSVS 2010 doesn't support that you can call it.</p>\n\n<p>One thing you can do is write a function that creates and initializes a list like</p>\n\n<pre><code>std::list&lt;CString&gt; default_list()\n{\n    std::list&lt;CString&gt; temp;\n    temp.push_back(\"Val1\");\n    temp.push_back(\"Val2\");\n    temp.push_back(\"Val3\");\n    return temp;\n}\n</code></pre>\n\n<p>And then you can use that like</p>\n\n<pre><code>void myFunc(std::list&lt;CString&gt; const &amp; myList = default_list());\n</code></pre>\n"}], "owner": {"reputation": 358, "user_id": 1149948, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49a9c5ca86812dbc680e1930a239bdd1?s=128&d=identicon&r=PG", "display_name": "muaz", "link": "https://stackoverflow.com/users/1149948/muaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 45059784, "answer_count": 1, "score": 1, "last_activity_date": 1499868263, "creation_date": 1499866624, "last_edit_date": 1499868263, "question_id": 45059278, "link": "https://stackoverflow.com/questions/45059278/c-stdlist-paramerter-with-default-values", "title": "C++ std::list paramerter with default values", "body": "<p>I want to have a method that takes a list as a parameter but this list should have default values, here is an invalid example for what I need:</p>\n\n<pre><code>void myFunc(std::list&lt;CString&gt; const &amp; myList = std::list&lt;CString&gt;({\"Val1\", \"Val2\", \"Val3\"}));\n</code></pre>\n\n<p>When I try to use it I get</p>\n\n<blockquote>\n  <p>Error C2143: syntax error: missing ')' before '{'</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499866579, "post_id": 45059221, "comment_id": 77091845, "body": "Are these factories and registerers stored as global variables?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1499866618, "post_id": 45059221, "comment_id": 77091887, "body": "static initialization order fiasco"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1499866638, "post_id": 45059221, "comment_id": 77091904, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1005685/c-static-initialization-order\">C++ static initialization order</a>"}, {"owner": {"reputation": 1, "user_id": 4964039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a4b540d4d6d060842dfaa4a6d71033?s=128&d=identicon&r=PG&f=1", "display_name": "SparksH", "link": "https://stackoverflow.com/users/4964039/sparksh"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499866763, "post_id": 45059221, "comment_id": 77092002, "body": "@Frank The factor classes are made my a macro that&#39;s called in each subclass, they map is a static member of the superclass, not a global variable."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1499866854, "post_id": 45059221, "comment_id": 77092067, "body": "@SparksH static member variables are global.  The name is scoped to the class but it suffers the same thing as regular global variables."}, {"owner": {"reputation": 1, "user_id": 4964039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a4b540d4d6d060842dfaa4a6d71033?s=128&d=identicon&r=PG&f=1", "display_name": "SparksH", "link": "https://stackoverflow.com/users/4964039/sparksh"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499866934, "post_id": 45059221, "comment_id": 77092140, "body": "@Frank I&#39;ve tried wrapping the initialization in a function, but where do I call that one? I can&#39;t call it outside the class definition."}], "owner": {"reputation": 1, "user_id": 4964039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a4b540d4d6d060842dfaa4a6d71033?s=128&d=identicon&r=PG&f=1", "display_name": "SparksH", "link": "https://stackoverflow.com/users/4964039/sparksh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499866466, "creation_date": 1499866466, "question_id": 45059221, "link": "https://stackoverflow.com/questions/45059221/visual-studio-executing-subclasss-cpp-before-superclasss", "title": "Visual Studio executing subclass&#39;s .cpp before superclass&#39;s", "body": "<p>I've got an abstract superclass, <code>KFilter</code> with a static map member, <code>static map&lt;KFILTER_TYPE, FilterFactory*&gt; factories;</code>. As you can see, I use factories and this map has the respective ones for each subclass by a custom Enum, <code>KFILTER_TYPE</code>. Now, I initialize the <code>factories</code> map in the cpp file of the superclass:</p>\n\n<pre><code>//KFilter.cpp\n\n&lt;KFILTER_TYPE, FilterFactory*&gt; KFilter::factories = &lt;KFILTER_TYPE, FilterFactory*&gt;();\n</code></pre>\n\n<p>To automatically bind the factories, I have a macro, <code>#define REGISTER_TYPE(filterName, filterENUM)</code>, which I use at the top of each subclass, like <code>REGISTER_TYPE(EKFilter, EKF)</code>. This uses a line which registers the factory of the subclass to the map of the superclass.</p>\n\n<p>However, I get a runtime error, with <code>Exception thrown: read access violation.</code>. After durdling around, I've figured this is because the macro executed in the subclass gets called <em>before</em> the static map is initialized in the cpp of the superclass. My question is, why does this happen? I thought that the superclass, with its .h and .cpp would compile before the subclasses. Heck, I didn't even include the subclasses in either my main or the superclass header. What gives and how could I fix it?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "windows", "g++", "zlib"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 5, "creation_date": 1499867948, "post_id": 45059177, "comment_id": 77092918, "body": "You need to install zlib obviously. Use cygwin package manager"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4869409"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499920302, "post_id": 45059177, "comment_id": 77115516, "body": "Thanks a lot @M.M It worked fine. Previously, I had simply installed zlib after downloading from their <a href=\"http://gnuwin32.sourceforge.net/packages/zlib.htm\" rel=\"nofollow noreferrer\">website</a>. But it should have been installed with cygwin package manager as you said. Thanks a lot"}], "owner": {"user_type": "does_not_exist", "display_name": "user4869409"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 792, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499866379, "creation_date": 1499866379, "question_id": 45059177, "link": "https://stackoverflow.com/questions/45059177/windows-cannot-find-lz", "title": "Windows: Cannot find -lz", "body": "<p>I am trying to compile cpp source files and link with zlib library using the command</p>\n\n<pre><code>g++ $SRC_FILES -lz -o src\n</code></pre>\n\n<p>where </p>\n\n<pre><code>$SRC_FILES = \"Source1.cpp\\\n              Source2.cpp\\\n              Source3.cpp\"\n</code></pre>\n\n<p>When I try it on Linux it builds perfectly. But the same doesn't build in Windows. And I get an error saying</p>\n\n<pre><code>/usr/lib/gcc/x86_64-pc-cygwin/5.4.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lz\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I have installed cygwin and used g++ from the one provided in cygwin.</p>\n\n<p>Does anybody know how to solve it?</p>\n"}, {"tags": ["c++", "c++11", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 2, "last_activity_date": 1499883179, "creation_date": 1499883179, "answer_id": 45064864, "question_id": 45059160, "link": "https://stackoverflow.com/questions/45059160/copying-mpi-win/45064864#45064864", "title": "Copying MPI_Win?", "body": "<p>Making a copy of the <code>MPI_Win</code> handle and then freeing it once the first wrapper goes out of scope, is a bad idea. You won't be able to use any copies any longer and a destruction of a copy will likely crash (although I can't reproduce the segfault on my system).</p>\n\n<p>I am not aware of a way to copy an existing <code>MPI_Win</code>. The most straight forward way is to actually delete the copy operations, and treat the wrapper type as move-only. When you use the type, you should have a clear idea about ownership - <code>WinWrapper</code> on the stack or in a <code>std::unique_ptr&lt;WinWrapper&gt;</code> and others hold references or raw pointers. You have to guarantee that the lifetime of the refs/raw pointers cannot exceed the pointed to wrapper. If you must copy around and have no idea bout lifetime, put it into a <code>std::shared_ptr&lt;WinWrapper&gt;</code>. Now you could also hide the <code>std::shared_ptr</code> in another wrapper, but that can lead to intransparent performance issues.</p>\n\n<p>For proper RAII (resource acquisition is initialization), you should also take care of the memory within the wrapper. Otherwise you must manually take care <code>Scalar*</code> is not freed before the wrapper is destructed. I would recommend using <code>MPI_Win_allocate</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "is_accepted": false, "score": 0, "last_activity_date": 1570507067, "creation_date": 1570507067, "answer_id": 58280016, "question_id": 45059160, "link": "https://stackoverflow.com/questions/45059160/copying-mpi-win/58280016#58280016", "title": "Copying MPI_Win?", "body": "<p>There is no good definition of copying a window. MPI_Comm_dup copies the state of the MPI_Comm object, which is all hidden. An MPI window consists of hidden state plus the memory attached to the window. Copying the state would copy the pointers but not the data to which they pointed. That isn\u2019t very useful (there are reasons to do this but they are very nuanced).</p>\n\n<p>You can write your own copy constructor easily enough, but first you need to decide what you mean by it. If you define your requirements, I\u2019ll tell you how to implement them.</p>\n"}], "owner": {"reputation": 793, "user_id": 5144825, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4cbcab1ee1bcc24718df68739d4e5226?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Nikolov", "link": "https://stackoverflow.com/users/5144825/teodor-nikolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1570507067, "creation_date": 1499866340, "last_edit_date": 1499883241, "question_id": 45059160, "link": "https://stackoverflow.com/questions/45059160/copying-mpi-win", "title": "Copying MPI_Win?", "body": "<p>I'm writing a <code>MPI_Win</code> wrapper in C++11 which looks as follows. </p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;mpi.h&gt;\n\nclass WinWrapper {\n    MPI_Win win;\n\npublic:\n    template&lt;typename Scalar&gt;\n    WinWrapper(Scalar *data, std::size_t dataSize, MPI_Comm comm) {\n        MPI_Win_create(data, dataSize * sizeof(Scalar), sizeof(Scalar),\n                       MPI_INFO_NULL, comm, &amp;win);\n    }\n\n    WinWrapper(WinWrapper const &amp;wrapper) {\n        win = wrapper.win;\n    }\n\n    WinWrapper(WinWrapper &amp;&amp;wrapper) : win(wrapper.win) {\n        wrapper.win = MPI_WIN_NULL;\n    }\n\n    WinWrapper &amp;operator=(WinWrapper const &amp;wrapper) {\n        win = wrapper.win;\n        return *this;\n    }\n\n    WinWrapper &amp;operator=(WinWrapper &amp;&amp;wrapper) {\n        if (&amp;wrapper != this) {\n            win = wrapper.win;\n            wrapper.win = MPI_WIN_NULL;\n        }\n        return *this;\n    }\n\n    ~WinWrapper() {\n        if (win != MPI_WIN_NULL) {\n            MPI_Win_free(&amp;win);\n        }\n    }\n\n};  // end class WinWrapper\n\nint main(int argc, char **argv) {\n    MPI_Init(&amp;argc, &amp;argv);\n\n    {\n        std::size_t dataSize{100};\n        int* data;\n        MPI_Alloc_mem(sizeof(int) * dataSize, MPI_INFO_NULL, &amp;data);\n        WinWrapper w1{data, dataSize, MPI_COMM_WORLD};\n        // WinWrapper w2 = w1;\n        WinWrapper w3 = std::move(w1);\n        WinWrapper w4{std::move(w3)};\n        //WinWrapper w5{w4};\n    }\n\n    MPI_Finalize();\n}\n</code></pre>\n\n<p>I pass a <code>Scalar *</code> which can be <code>int *</code>, <code>double *</code>, etc ... pointers allocated using <code>MPI_Alloc_mem</code>. When I uncomment the copy constructor or the copy assignment operator in <code>main</code>, I get a segmentation fault</p>\n\n<pre><code>[latitude:21878] *** Process received signal ***\n[latitude:21878] Signal: Segmentation fault (11)\n[latitude:21878] Signal code: Address not mapped (1)\n[latitude:21878] Failing at address: 0x18\n[latitude:21878] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)    [0x7fbc12c1c390]\n[latitude:21878] [ 1] /home/teodor/soft/lib    /libmpi.so.20(ompi_win_free+0xe)[0x7fbc12e70f7e]\n[latitude:21878] [ 2] /home/teodor/soft/lib/libmpi.so.20(MPI_Win_free+0x9b)[0x7fbc12ea3ecb]\n[latitude:21878] [ 3] ./example/winwrapper(main+0xbd)[0x400c0d]\n[latitude:21878] [ 4] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7fbc11fb7830]\n[latitude:21878] [ 5] ./example/winwrapper(_start+0x29)[0x400a79]\n[latitude:21878] *** End of error message ***\n[2]    21878 segmentation fault (core dumped)  ./example/winwrapper\n</code></pre>\n\n<p>Is there a similar routine to <code>MPI_Comm_dup</code> for <code>MPI_Win</code>? If not, how do I make the copy operations work? </p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1499867386, "post_id": 45059086, "comment_id": 77092482, "body": "Could you describe what xx is and how macros affect it?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1499869573, "post_id": 45059086, "comment_id": 77094199, "body": "We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to understand why this is happenning."}, {"owner": {"reputation": 21, "user_id": 6332268, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204987782949084/picture?type=large", "display_name": "Flemming Jahn", "link": "https://stackoverflow.com/users/6332268/flemming-jahn"}, "edited": false, "score": 0, "creation_date": 1499928139, "post_id": 45059086, "comment_id": 77118867, "body": "Hi Nicol. Thanks for forcing me to make a minimal example :). That pointed me in the right direction. Turns out the I had to set &quot;PREDEFINED  = __cplusplus&quot;, because I have #ifdef __cplusplus in the header file."}], "owner": {"reputation": 21, "user_id": 6332268, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204987782949084/picture?type=large", "display_name": "Flemming Jahn", "link": "https://stackoverflow.com/users/6332268/flemming-jahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1375, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1499869361, "creation_date": 1499866169, "last_edit_date": 1499869361, "question_id": 45059086, "link": "https://stackoverflow.com/questions/45059086/doxygen-warning-documented-symbol-xx-was-not-declared-or-defined", "title": "Doxygen: &quot;warning: documented symbol xx was not declared or defined.&quot;", "body": "<p>I have a mixed c/c++ environment, and all my c++ class member functions gives, when I try to use Doxygen to generate documentation, this warning: <code>warning: documented symbol xx was not declared or defined.</code></p>\n\n<p>After some searching I have found that other people having this issue have solved it by setting <code>ENABLE_PREPROCESSING</code> to <code>NO</code> in the Doxygen file. </p>\n\n<p>This also works for me, but I really like to also be able to use doxygen for our macros, so I don't like to setting <code>ENABLE_PREPROCESSING</code> to <code>NO</code>. </p>\n\n<p>Anyone have an idea to how to configure Doxygen to supporting both features at the same time?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1499866435, "post_id": 45059085, "comment_id": 77091724, "body": "seems like you forgot to call <code>sprintf</code> or the like."}, {"owner": {"reputation": 4665, "user_id": 6383857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPDaW.jpg?s=128&g=1", "display_name": "StaticBeagle", "link": "https://stackoverflow.com/users/6383857/staticbeagle"}, "edited": false, "score": 1, "creation_date": 1499866459, "post_id": 45059085, "comment_id": 77091743, "body": "You might want to look into sprintf( ... ) or use std::string"}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 1, "creation_date": 1499866471, "post_id": 45059085, "comment_id": 77091754, "body": "Look into using a <code>stringstream</code> -- <a href=\"http://www.cplusplus.com/doc/tutorial/basic_io/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/basic_io</a> I think you&#39;re using too much C library stuff when there&#39;s perfectly good C++ solutions"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 0, "creation_date": 1499866501, "post_id": 45059085, "comment_id": 77091781, "body": "@Peri461 or the question is mistagged ;)"}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1499866562, "post_id": 45059085, "comment_id": 77091831, "body": "@Borgleader the title of the question itself addresses a &quot;file in <code>cpp</code>&quot;"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 1, "creation_date": 1499866618, "post_id": 45059085, "comment_id": 77091889, "body": "@Peri461 I know but I&#39;ve seen a few users say &quot;theyre doing c++&quot; when in fact theyre learning/programming in C, hence the question should be retagged as C."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1499867581, "post_id": 45059085, "comment_id": 77092640, "body": "Surely the rename will fail in the second time around the loop"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499871231, "post_id": 45059085, "comment_id": 77095506, "body": "<code>return(0)</code> - <code>return</code> is a statement, not a function. The parentheses are unnecessary and obfuscatory. Besides, your <code>while</code> loop seems pointless: it would loop forever, which would be bad, but then you defeat it by unconditionally <code>return</code>ing at the end of the 1st iteration, which means there&#39;s no point having a loop."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1499871253, "post_id": 45059085, "comment_id": 77095535, "body": "I&#39;m surprised this code even compiles. There is an illegal variable redeclaration."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499871379, "post_id": 45059085, "comment_id": 77095636, "body": "Please try to take a bit longer to make your writing legible."}, {"owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1499872901, "post_id": 45059085, "comment_id": 77096854, "body": "All i needed was a hint and i got it.Thank you @Borgleader and RatHat was your valuable suggestions."}, {"owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "edited": false, "score": 0, "creation_date": 1499873064, "post_id": 45059085, "comment_id": 77096983, "body": "the while loop forms a part of my code, the header and this part of code was used for testing purpose only."}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500118774, "post_id": 45061075, "comment_id": 77206637, "body": "What is the point of <code>k++;</code>? What is the point of <code>k</code>. Why not just write <code>rename(&quot;file.txt&quot;, &quot;file1.txt&quot;)</code>"}, {"owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520438394, "post_id": 45061075, "comment_id": 85317086, "body": "just as I mentioned in my question i have over 500 files and i cant rename everything manually. Wanted them to be renamed incrementally."}], "tags": [], "owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "is_accepted": true, "score": 0, "last_activity_date": 1500118494, "last_edit_date": 1500118494, "creation_date": 1499871103, "answer_id": 45061075, "question_id": 45059085, "link": "https://stackoverflow.com/questions/45059085/simple-renaming-of-file-in-cpp-without-the-need-to-write-anything-in-it/45061075#45061075", "title": "simple renaming of file in cpp without the need to write anything in it", "body": "<p>thank you for your valuable suggestions.sprintf() was the solution to my problem.Hears the code for future help for somebody.</p>\n\n<pre><code>    int k = 1;\n    char filename[16]; \n    sprintf( filename, \"file%d.txt\", k );  \n    rename(\"file.txt\", filename);\n    k++;\n    return(0);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 45061075, "answer_count": 1, "score": -1, "last_activity_date": 1500118494, "creation_date": 1499866168, "last_edit_date": 1499871336, "question_id": 45059085, "link": "https://stackoverflow.com/questions/45059085/simple-renaming-of-file-in-cpp-without-the-need-to-write-anything-in-it", "title": "simple renaming of file in cpp without the need to write anything in it", "body": "<p>My <code>pcl</code> module produces an output file <code>result.pcd</code>. This said module runs in a loop, so it takes up to 100 <code>pcd</code> files and for each iteration produces an output file <code>result.pcd</code>. The thing is this <code>result.pcd</code> gets overwritten in every iteration, so before the next iteration I'm trying to rename this file. I want this file to be named incrementally (i.e <code>file1.pcd</code>, <code>file2.pcd</code>, <code>file3.pcd</code>...)</p>\n\n<p>My renaming code doesn't fit the syntax. Please help me with this.</p>\n\n<p>My aim is not to write anything in the new file, rather to rename an old one incrementally. (Please include comments and headers in code.)</p>\n\n<p>If my method of thinking is wrong, I need expert advice on pointing me to the right direction.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    while (true) \n    {\n        int k = 1;\n        char newname[] = \"file%i.txt\", k;\n        rename(\"result.pcd\", newname);\n        k++;\n        return 0;\n    }\n}\n</code></pre>\n\n<p>The new file gets renamed as <code>file%i.txt</code> rather than <code>file1.txt</code></p>\n"}, {"tags": ["c++", "class", "include", "multiple-definition-error"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1499867019, "post_id": 45059073, "comment_id": 77092204, "body": "It is hard to tell <i>exactly</i> what the problem is with your code, but it is likely you are breaking the <a href=\"https://en.wikipedia.org/wiki/One_Definition_Rule\" rel=\"nofollow noreferrer\">one definition rule</a>."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1499867055, "post_id": 45059073, "comment_id": 77092231, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/622229/error-lnk2005-already-defined-c\">error LNK2005: already defined - C++</a>"}, {"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 0, "creation_date": 1499880520, "post_id": 45059073, "comment_id": 77101356, "body": "Did you add include guards in your headers? <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Include_guard</a>"}], "owner": {"reputation": 63, "user_id": 8271202, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-YNecUVPTayQ/AAAAAAAAAAI/AAAAAAAABnU/nXIjjj1oydg/photo.jpg?sz=128", "display_name": "Gugu", "link": "https://stackoverflow.com/users/8271202/gugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1499902196, "creation_date": 1499866149, "last_edit_date": 1499902196, "question_id": 45059073, "link": "https://stackoverflow.com/questions/45059073/already-defined-lnk2005-c", "title": "Already defined LNK2005 (C++)", "body": "<p>I've got LNK2005 error when compiling my solution. It says</p>\n\n<pre><code>\"public: class Vector3 const__cdecl Vector3::operator+=(double const &amp;)\" (??_0Vector3@@QEAA?BV0@AEBN@Z) already defined in Game.obg            file: GameObject.obj\n\"public: class Vector3 const__cdecl Vector3::operator+=(double const &amp;)\" (??_0Vector3@@QEAA?BV0@AEBN@Z) already defined in Game.obg            file: Main.obj\n\"public: class Vector3 const__cdecl Vector3::operator+=(double const &amp;)\" (??_0Vector3@@QEAA?BV0@AEBN@Z) already defined in Game.obg            file: MainWindow.obj\n\"public: class Vector3 const__cdecl Vector3::operator+=(double const &amp;)\" (??_0Vector3@@QEAA?BV0@AEBN@Z) already defined in Game.obg            file: Transform.obj\n\"public: class Vector3 const__cdecl Vector3::operator+=(double const &amp;)\" (??_0Vector3@@QEAA?BV0@AEBN@Z) already defined in Game.obg            file: Vector3.obj\n</code></pre>\n\n<p>My solution is organized as below:</p>\n\n<p><em>Game.h includes GameObject.h and other things</em></p>\n\n<p><em>GameObject.h includes Transform.h and Component.h</em></p>\n\n<p><em>Component.h includes all components headers, like Rigidbody.h</em></p>\n\n<p><em>Transform.h includes Vector3.h</em></p>\n\n<p><em>Vector3.h includes cmath</em></p>\n\n<p>In Game.h there is this:</p>\n\n<pre><code>#include \"GameObject.h\"\n// other includes\nclass Game\n{\npublic:\n    Game( class MainWindow&amp; wnd );\n    // other things\nprivate:\n    MainWindow&amp; wnd;\n    // other things\n}\n// other things again\n</code></pre>\n\n<p>So the question is: what I'm doing wrong?\nPS: I've tried to comment all the code in Game.cpp to see what happens, but without success</p>\n\n<p>EDIT: I've resolved it by moving \"Vector3::operator+=\" definition from Vector3.h to Vector3.cpp... but don't know why it works now, anyone knows? (Vector3.h don't have include guard but it has #pragma once, Vector3.cpp don't have neither include guard nor #pragma once)</p>\n"}, {"tags": ["c++", "for-loop", "vector"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499865814, "post_id": 45058867, "comment_id": 77091259, "body": "just add a <code>std::vector&lt;double&gt; sum_distance</code> and inside the loop <code>sum_distance[i]+= distance;</code>. Btw imho it would be better if you showed what you tried and explain why it didnt work, because its not so clear what is the problem here"}, {"owner": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499931915, "post_id": 45058867, "comment_id": 77121339, "body": "I just didn&#39;t know the syntax with <code>sum_distance[i]+=</code> and in my work I tried a lot with the iterators i and j but it clearly wasn&#39;t the right solution."}], "answers": [{"tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": false, "score": 0, "last_activity_date": 1499865828, "creation_date": 1499865828, "answer_id": 45058937, "question_id": 45058867, "link": "https://stackoverflow.com/questions/45058867/sum-up-distances-in-a-for-loop/45058937#45058937", "title": "Sum up distances in a for loop", "body": "<p>You are not adding <code>distance</code> anywhere.After the first iteration of the inner loop, the answer for first point would be ready which you can save.</p>\n\n<p>Also you don't need to find the difference between same points so skip when <code>i=j</code></p>\n\n<pre><code>  for (int i = 0, iend = centroids_1.size(); i &lt; iend; i++) \n  {\n    double distance=0.0;\n    for (int j = 0, jend = centroids_1.size(); j &lt; jend; j++) \n        {\n            if(i==j)\n                continue;\n            distance+ = norm(centroids_1[i] - centroids_1[j]);\n        }\n        distance_vector.push_back(distance);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "edited": false, "score": 0, "creation_date": 1499931721, "post_id": 45059022, "comment_id": 77121187, "body": "Thanks! If I wanted to add a statement like: &quot;Just add the distance to the vector when it is under a certain threshold&quot;. Where would I put the if-loop or does this also work with standard library? It is more difficult to understand for me than the solution below."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "edited": false, "score": 0, "creation_date": 1499931890, "post_id": 45059022, "comment_id": 77121309, "body": "@Grillteller - You&#39;d add it in the <code>[](){ }</code> construct. That&#39;s a C++ lambda, a sort of function you define inline to do your operation. You can put any logic you want in it, so long as you return the accumulated result at the end (perhaps even unchanged)."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "edited": false, "score": 0, "creation_date": 1499932100, "post_id": 45059022, "comment_id": 77121440, "body": "@Grillteller - And I know it requires some more reading about C++. But once you have the syntax for it down, it really is less noisy than using indices."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1499872293, "last_edit_date": 1499872293, "creation_date": 1499866016, "answer_id": 45059022, "question_id": 45058867, "link": "https://stackoverflow.com/questions/45058867/sum-up-distances-in-a-for-loop/45059022#45059022", "title": "Sum up distances in a for loop", "body": "<p>Use the standard library instead of raw loops. It will be easier to read and maintain. Plus, the indices are noise. They aren't <em>required</em> for iteration.</p>\n\n<pre><code>for(auto const&amp; point : centroids_1)\n  distance_vector.push_back(std::accumulate(begin(centroids_1), end(centroids_1), 0.0,\n    [&amp;](auto res, auto const&amp; point2) { return res + norm(point - point2); }\n  ));\n</code></pre>\n\n<p>Specifically, we used a <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-based-for</a> loop along with <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate</code></a>. This is the description of what you want to do. Store for each point the accumulated sum of distances between it and other points.</p>\n"}], "owner": {"reputation": 664, "user_id": 5707440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54a4defbda5f9d7982bde84371a83c87?s=128&d=identicon&r=PG&f=1", "display_name": "Grillteller", "link": "https://stackoverflow.com/users/5707440/grillteller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 45059022, "answer_count": 2, "score": 0, "last_activity_date": 1499872293, "creation_date": 1499865635, "question_id": 45058867, "link": "https://stackoverflow.com/questions/45058867/sum-up-distances-in-a-for-loop", "title": "Sum up distances in a for loop", "body": "<p>I have a vector of Points and I calculate the distances between every Point (P1P2, P1P3, P1P4,....P1PN, P2P1, ... ,PMPN).<br>\nNow I want to sum all the distances of Point 1 to every other point, then all the distances of Point 2 to every other point and so on (P1P2+P1P3+...+P1PN, P2P1+P2P2+...+P2PN) an put these distances into a vector. I am stuck in my for loop now:</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    // Calculate mass centers\n    vector&lt;Point2f&gt; centroids_1;\n\n    // Calculate distances between all mass centers\n    vector&lt;double&gt; distance_vector;\n\n\n    for (int i = 0, iend = centroids_1.size(); i &lt; iend; i++) {\n        for (int j = 0, jend = centroids_1.size(); j &lt; jend; j++) {\n            double distance = norm(centroids_1[i] - centroids_1[j]);\n            distance_vector.push_back(distance);\n            // Here I tried many things with for loops and while loops but \n            // I couldn't find a proper solution\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost", "c++14", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1499964833, "post_id": 45058769, "comment_id": 77145922, "body": "To do this you need a push strategy. How many bytes will be enough to send? How many are to be expected? Just write a loop to copy the streams. Stream copy is still copy. Unless you copy a raw fd, in which case you might use <code>sendfile</code> or similar &quot;splicing&quot; APIs and act on the raw socket handle"}, {"owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1500017743, "post_id": 45058769, "comment_id": 77166492, "body": "the entire range would be enough to send. The range is not endless and is at most 65k long. But I have only forward iterator category. I am just wondering why it&#39;s not possible to send some bytes and let asio chunk them for me. It just forces many people to repeat the same code, instead of saying: we will chunk byte for you internally and make it efficient for 90% of the cases."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1500018064, "post_id": 45058769, "comment_id": 77166665, "body": "Asio does that. But only for existing buffer sequences. It might not be impossible to make a generic adaptor for that I suppose. I certainly don&#39;t think this is something that very often comes up. Usually you have the goods to send in tangible firm before sending"}, {"owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1500020152, "post_id": 45058769, "comment_id": 77167799, "body": "You are right for sure and I&#39;d even be good without all the upper requirements, but than I started to write test code and want to calculate sha256 of sent data on the fly, and here we go! Ideally, I&#39;d prefer asio to work with boost range library, than there are no limits :) In my case some_range_ctor is just a simple vector of random byte octets and asio is totally fine to accept it with <code>boost::asio::buffer(my_vector_of_pod_byte_octets)</code>. But now I just want every byte_octet go through a hasher and calculate sha2 on the fly."}], "owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499870298, "creation_date": 1499865395, "last_edit_date": 1499870298, "question_id": 45058769, "link": "https://stackoverflow.com/questions/45058769/boostasioasync-write-with-forward-traversal-iterator", "title": "boost::asio::async_write with forward traversal iterator", "body": "<p>I have a forward iterator which generates/handles bytes on-the-fly and I'd like to use use it as is to send data with <code>boost::asio::async_write</code>.</p>\n\n<p>In fact, what I have is some custom developed iterator using <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/iterator/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Iterator</a> library which has the Forward Traversal Iterator category. This iterator is used to generate some bytes and generate the SHA256 on-the-fly. Is there any way to send these bytes using <code>boost::asio::async_write</code> without the need to copy them into some buffer?</p>\n\n<p>The code looks like that:</p>\n\n<pre><code>sha256hasher hasher;\nauto on_the_fly_range = some_range_ctor|boost::adaptors::transformed(std::ref(hasher));\n\nboost::asio::async_write(socket_, on_the_fly_range, [](auto const&amp; ec, auto size){});\n</code></pre>\n\n<p>Don't worry, that hasher might go out of scope, in my case it'll not, this is just the simplified view. I am only interested, how to make <code>async_write</code> accepting <code>on_the_fly_range</code>. <code>on_the_fly_range</code> is very well copyable and will maintain the internal state.</p>\n\n<p>I understand, that I can introduce a <code>for</code> loop, iterate through the <code>on_the_fly_range</code> create chunks of data and send them, but is there a more elegant way to do that without intermediate data prefetch?</p>\n"}, {"tags": ["c++", "visual-c++", "struct", "extern"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499865340, "post_id": 45058667, "comment_id": 77090874, "body": "<code>&amp;((char *)b.start);</code> is an error. You cannot use the <code>&amp;</code> operator on an rvalue.  (MSVC has an extension that a cast to the same type can be an lvalue, the other problems you experience perhaps cascade from this)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1499865368, "post_id": 45058667, "comment_id": 77090902, "body": "If you have to do that casting, has it not occurred to you that there is something very basic wrong with your code?"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499865522, "post_id": 45058667, "comment_id": 77091012, "body": "@M.M: but what is the &quot;proper&quot; way of instantiating a <code>char * const</code> field then? The extension you are referring to was producing a &quot;non-standard extension&quot; warning, so I switched to a rvalue to get rid of the warning."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499865574, "post_id": 45058667, "comment_id": 77091056, "body": "Also your code (even if it compiled) would modify a const object, which is undefined behaviour"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1499865584, "post_id": 45058667, "comment_id": 77091065, "body": "@Lou - Give <code>b</code> a proper initializer. Anything in scope can be used in it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499865610, "post_id": 45058667, "comment_id": 77091088, "body": "@Lou an initializer is the proper way. <code>Buffer b = { buffer, buffer + size, buffer };</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1499865632, "post_id": 45058667, "comment_id": 77091103, "body": "I guess you mean &quot;initializing&quot;, not &quot;instantiating&quot;.  you can initialize using the syntax for initialization.  I would recommend you simply not use a struct with const members, they&#39;re more trouble than they are worth"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499865700, "post_id": 45058667, "comment_id": 77091159, "body": "Crap, I am sorry, this is probably an XY problem then. I wasn&#39;t aware that simply using C99 initializers would solve the issue."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499865840, "post_id": 45058667, "comment_id": 77091277, "body": "That initialization syntax has been in C and C++ since before standardization"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499865961, "post_id": 45058667, "comment_id": 77091375, "body": "I also would not recommend using an <code>inline</code> function in a header intended to be included from both C and C++,  it&#39;s outside the purview of standards and asking for trouble.  <code>inline</code> has different semantics in C than in C++. Also,  the warning message you got suggests that the compiler might not even support language-mixing for functions that return a struct  by value"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499866234, "post_id": 45058667, "comment_id": 77091579, "body": "@M.M: right, designated initializers are C99, but a non-constant initializer also throws a &quot;nonstandard extension&quot; warning."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499868005, "post_id": 45058667, "comment_id": 77092965, "body": "Never use a cast just to silence the compiler <b>unless you really know what you are doing</b>."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499868107, "post_id": 45058667, "comment_id": 77093052, "body": "@Olaf: that would be a good tip, if there was any other way to assign these fields in MSVC without warnings."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499868203, "post_id": 45058667, "comment_id": 77093130, "body": "@Lou: If you can&#39;t, there is something else wrong with your code! As you wrote: XY problem. As a sidenote: C is not a subset of C++, it is a different language. Compiling C code with a C++ compiler is often doomed for non-trivial, well written code.."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499868403, "post_id": 45058667, "comment_id": 77093267, "body": "@Olaf: my point is: there doesn&#39;t seem to be any single way, apart from the &quot;cast&quot; above, to <b>assign a const pointer struct field in MSVC</b>. The casting part does not produce a warning and is not even related to my question, but if you want, throw everything else a way and try to assign it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499868726, "post_id": 45058667, "comment_id": 77093523, "body": "@Lou: There very well is. Just get the types and qualifiers correct."}], "answers": [{"comments": [{"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499867472, "post_id": 45059203, "comment_id": 77092559, "body": "Well, I guess I&#39;ll just remove <code>const</code> then. Removing <code>inline</code> and separating the function into two <code>.h</code>/<code>.c</code> files didn&#39;t solve any warnings, and switching to a different testing framework would be a pain right now."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499867960, "post_id": 45059203, "comment_id": 77092931, "body": "Btw, regarding your first comment on my question: &quot;<code>&amp;((char *)b.start);</code> is an error. You cannot use the <code>&amp;</code> operator on an rvalue.&quot; - is this from the C standard? Because this part compiles with zero warnings (with <code>&#47;Wall</code> flag). How does this differ from, say, <code>&amp;buffer[5]</code> (which I often encounter)?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499868037, "post_id": 45059203, "comment_id": 77092985, "body": "Yes it&#39;s from the C Standard. MSVC has a non-standard extension that using a cast to the same type yields an lvalue. I conjecture that it also applies this extension if casting to a type which would be the same apart from your cast. Have you tried disabling MS extensions (I think it is <code>&#47;Za</code>) ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499868101, "post_id": 45059203, "comment_id": 77093045, "body": "<code>buffer[5]</code> is an lvalue; the rest of a cast is not an lvalue"}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499873746, "post_id": 45059203, "comment_id": 77097458, "body": "Ok, sorry for disturbing you again, so if I had written <code>char** startPtr = ((char**)&amp;b.start)</code> instead, then if would have been ok? According to this answer: <a href=\"https://stackoverflow.com/a/9691556/1488067\">How to initialize const in a struct in C</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 1, "creation_date": 1499901388, "post_id": 45059203, "comment_id": 77111125, "body": "That line is OK but it would be undefined behaviour when you go on to write <code>*startPtr =</code> because you are assigning to a const object.  The answer you link to is different to your case and this is explained why in the bullet points in that answer."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1499866425, "creation_date": 1499866425, "answer_id": 45059203, "question_id": 45058667, "link": "https://stackoverflow.com/questions/45058667/char-const-field-considered-incompatible-with-c-by-msvc-vs2015/45059203#45059203", "title": "`char * const` field considered &quot;incompatible with C&quot; by MSVC (VS2015)", "body": "<p>According to <a href=\"https://docs.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-1-c4190\" rel=\"nofollow noreferrer\">the documentation you linked</a> for warning C4190,  it is not supported to have a function which returns a <code>struct</code> by value, called from both C and C++.</p>\n\n<p>(In the C++ Standard most of the details of language-mixing are given as implementation-defined, and in this case MSVC complies by documenting that this is not supported).</p>\n\n<p>I also would not recommend having an <code>inline</code> function in a header that is compiled as both C and C++, because the semantics of <code>inline</code> differs between the two languages so it is asking for trouble.</p>\n\n<p>You will have to make a major design change to avoid this problem, if you want to use <code>Buffer_create</code> from both languages. For example, \"return\" the result via a pointer out-parameter, and do away with the <code>const</code> struct members.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499867259, "post_id": 45059498, "comment_id": 77092381, "body": "I guess the goal is that the pointers never change, not that they point to some const data."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1499867317, "post_id": 45059498, "comment_id": 77092430, "body": "Of course that&#39;s what it means, but maybe not what the OP intended."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499867320, "post_id": 45059498, "comment_id": 77092433, "body": "As Felix wrote, it&#39;s not that the data won&#39;t change, it&#39;s just a &quot;bounded buffer&quot; UDT which has some functions for appending data to it. It&#39;s just to make sure only <code>pos</code> will change, while <code>pos</code> can be moved around and dereferenced."}, {"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499867611, "post_id": 45059498, "comment_id": 77092668, "body": "Thanks, although the initializer again throws a &quot;nonstandard extension&quot; warning in MSVC. The only way it didn&#39;t throw any warnings (when accessed through C code) was through the ugly casts. :) I made a (perhaps stupid) decision to try to make <code>start</code> and <code>end</code> const pointers, which was supposed to give me some additional safety, but it all went to pieces when I wrote the first unit test in gtest."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1499869722, "post_id": 45059498, "comment_id": 77094307, "body": "@Lou: I guess the easy path is to give up fighting the MSVC compiler and drop the <code>const</code> keyword. Or maybe use a <code>#define</code> to only have it in the C version."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1500073217, "last_edit_date": 1500073217, "creation_date": 1499867179, "answer_id": 45059498, "question_id": 45058667, "link": "https://stackoverflow.com/questions/45058667/char-const-field-considered-incompatible-with-c-by-msvc-vs2015/45059498#45059498", "title": "`char * const` field considered &quot;incompatible with C&quot; by MSVC (VS2015)", "body": "<p>Are you sure about the structure definition? It does not make much sense to define the members as <code>const</code>, but rather the pointers as <code>const char *</code> or <code>char const *</code> which is equivalent:</p>\n\n<pre><code>typedef struct {\n    char const *start; // start of the buffer\n    char const *end;   // one byte after the end of the buffer\n    char * pos;        // current position\n} Buffer;\n</code></pre>\n\n<p>Try this definition in both C and C++ contexts.</p>\n\n<p>If your intend is to have constant pointers in the structure, you could use an initializer in the <code>Buffer_create</code> function instead of these ugly casts:</p>\n\n<pre><code>static inline Buffer Buffer_create(char *buffer, int size) {\n    Buffer b = { buffer, buffer + size, buffer };\n    return b;\n}\n</code></pre>\n"}], "owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 45059203, "answer_count": 2, "score": 2, "last_activity_date": 1500073217, "creation_date": 1499865151, "last_edit_date": 1499868690, "question_id": 45058667, "link": "https://stackoverflow.com/questions/45058667/char-const-field-considered-incompatible-with-c-by-msvc-vs2015", "title": "`char * const` field considered &quot;incompatible with C&quot; by MSVC (VS2015)", "body": "<p>I have the following code which compiles without warnings in VS2015 (all warnings enabled):</p>\n\n<pre><code>// buffer.h\n\ntypedef struct {\n    char * const start; // start of the buffer\n    char * const end;   // one byte after the end of the buffer\n    char * pos;         // current position\n} Buffer;\n\nstatic inline Buffer Buffer_create(char *buffer, int size) {\n    Buffer b;\n\n    char ** const startPtr = &amp;((char *)b.start);\n    char ** const endPtr = &amp;((char *)b.end);\n\n    *startPtr = buffer;\n    *endPtr = buffer + size;\n    b.pos = buffer;\n\n    return b;\n}\n</code></pre>\n\n<p>Since <code>.start</code> and <code>.end</code> members are <code>const</code>, I am doing the casting thingy to avoid getting compile warnings, and the code indeed compiles without warnings and works without issues.</p>\n\n<p>However, if I want to test this using gtest, and if I want to reference this file from a .cpp file:</p>\n\n<pre><code>// some_file.cpp\n\nextern \"C\" {\n    #include \"buffer.h\"\n}\n</code></pre>\n\n<p>I get the the <a href=\"https://docs.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-1-c4190\" rel=\"nofollow noreferrer\">C4190 warning</a> from Visual Studio, described as:</p>\n\n<blockquote>\n  <p>'Buffer_create' has C-linkage specified, but returns UDT 'Buffer' which is incompatible with C</p>\n</blockquote>\n\n<p>But the UDT is clearly \"compatible with C\", since I can build it without warnings until I try to reference it from a cpp file. </p>\n\n<p><strong>If I remove <code>const</code> from the <code>struct</code> definition, the warning goes away.</strong></p>\n\n<p>So, it seems like MSVC thinks <code>char * const</code> is not \"compatible with C\". Am I doing something illegal, or is this a compiler bug?</p>\n"}, {"tags": ["android", "c++", "bluetooth", "winsock", "at-command"], "comments": [{"owner": {"reputation": 23253, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 1, "creation_date": 1499896233, "post_id": 45058642, "comment_id": 77109465, "body": "Is it just SMS related commands that fail, or is <code>ATD</code> the only that works? Try to run <code>AT+CLAC</code> which should list all available AT command. Try most/all of them to get a feeling of what work/does not work."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 23253, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 0, "creation_date": 1499925335, "post_id": 45058642, "comment_id": 77117346, "body": "I would say 50/50, some of them works&#39;s, some of them don&#39;t. For example <code>ATD, AT+CLIP, AT+CHUP, ... </code> work&#39;s but SMS related, deleting or creating new contact in phonebook fail&#39;s. Unfortunately <code>AT+CLAC</code> return&#39;s ERROR aswell :/"}, {"owner": {"reputation": 23253, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 0, "creation_date": 1499940129, "post_id": 45058642, "comment_id": 77127170, "body": "Notice that SMS commands operate relative to a storage selected with <code>AT+CPMS</code>. What values does <code>AT+CPMS=?</code> return and does sms commands fail for all or them? Similarly for phonebook there is the select phonebook storage command <code>AT+CPBS</code>."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 23253, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 0, "creation_date": 1499940639, "post_id": 45058642, "comment_id": 77127586, "body": "Choosing SMS storage fail&#39;s, but choosing phonebook storage doesn&#39;t fail and i can read all contact&#39;s and call history, but command&#39;s for creating/removing contact like <code>AT+CPBW=,\u201d6187759088\u2033,129,\u201dAdam\u201d</code> fail. :/ It is strange."}], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501678277, "creation_date": 1499865064, "last_edit_date": 1499877523, "question_id": 45058642, "link": "https://stackoverflow.com/questions/45058642/sending-sms-via-at-commands-bluetooth-doesnt-work-in-c", "title": "Sending SMS via AT Command&#39;s &amp; bluetooth doesn&#39;t work in C++", "body": "<p>I'm creating an application which provide all function's like phone device from PC.</p>\n\n<p>Phone is connected with PC via bluetooth and winsock, dial number with AT command ATD work's fine, but all other's command's look's like that:</p>\n\n<pre><code>BTMobileApp DEBUG: WINSOCK: 'send' Return Code: 0\n\nBTMobileApp DEBUG:    Bytes Sent: AT+CMGL\n\nBTMobileApp DEBUG: WINSOCK: 'recv' Return Code: 0\n\nBTMobileApp DEBUG:    Data Received: \n\n+CME ERROR: 0\n</code></pre>\n\n<p>Return error code mean's </p>\n\n<blockquote>\n  <p>Phone failure</p>\n</blockquote>\n\n<p>Syntax of AT command's (/r | /n) is correct for sure. Don't know where could be the problem.</p>\n\n<p>Here's the important part of code:</p>\n\n<pre><code>SOCKADDR_BTH RemoteEndPoint;\nRemoteEndPoint.port = 0;\nRemoteEndPoint.addressFamily = AF_BTH;\nRemoteEndPoint.btAddr = // BT device address\nRemoteEndPoint.serviceClassId = HandsfreeServiceClass_UUID;\nint BTHAddrLength = sizeof(RemoteEndPoint);\n\n// Create the socket.\nif ((m_localSocket = socket(AF_BTH, SOCK_STREAM, BTHPROTO_RFCOMM)) == INVALID_SOCKET)\n{\n    // handle error.\n}\n\n// Connect the socket.\nif ((iResult = connect(m_localSocket, (SOCKADDR *)&amp;RemoteEndPoint, sizeof(RemoteEndPoint))) == INVALID_SOCKET)\n{\n    // handle error.\n}\n\nchar recvbuf[DEFAULT_BUFLEN] = \"\";\nconst char *sendbuf = \"AT+CMGL\\r\";\nint len = (int)strlen(sendbuf);\nif ((iResult = send(m_localSocket, sendbuf, len, MSG_OOB)) == SOCKET_ERROR)\n{\n    // handle error.\n}\n\nif ((iResult = recv(m_localSocket, recvbuf, recvbuflen, 0)) == SOCKET_ERROR)\n{\n    // handle error.\n}\n</code></pre>\n\n<p>-- Could anybody give me some advice how to make that AT command's work?</p>\n\n<p>I'm trying to solve this about two week's and i'm kinda exhausted of solving that.\nThank you.</p>\n"}, {"tags": ["android", "c++", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 1894850, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/851ed60249b9d50a19e50b728dbc9691?s=128&d=identicon&r=PG", "display_name": "Hug", "link": "https://stackoverflow.com/users/1894850/hug"}, "edited": false, "score": 0, "creation_date": 1500968588, "post_id": 45059447, "comment_id": 77555501, "body": "One more question, the JNI lib is inside the android phone as lib? If I have a very old phone could be possible that it is not able to load JNI_1_6?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 439, "user_id": 1894850, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/851ed60249b9d50a19e50b728dbc9691?s=128&d=identicon&r=PG", "display_name": "Hug", "link": "https://stackoverflow.com/users/1894850/hug"}, "edited": false, "score": 2, "creation_date": 1500969027, "post_id": 45059447, "comment_id": 77555777, "body": "The implementation of the JNI functions is part of the VM, in this case <a href=\"https://android.googlesource.com/platform/dalvik.git/+/froyo/vm/Jni.c\" rel=\"nofollow noreferrer\">Dalvik</a> or Art. Android has supported <code>JNI_VERSION_1_6</code> as far back as Android 1.6 (aka Donut) - that&#39;s the oldest version I could find info for. At that point you&#39;re far more likely to get problems with SDK version incompatibilities than JNI version incompatibilities."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": true, "score": 2, "last_activity_date": 1499867047, "creation_date": 1499867047, "answer_id": 45059447, "question_id": 45058588, "link": "https://stackoverflow.com/questions/45058588/jni-version-1-6-vs-jni-version-1-4/45059447#45059447", "title": "JNI_VERSION_1_6 vs JNI_VERSION_1_4", "body": "<p>You can search <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow noreferrer\">the JNI function reference</a> for notes about when the function was added (e.g. <em>\"SINCE: JDK/JRE 1.6\"</em>). As far as I can tell, the only function added in 1.6 was <code>GetObjectRefType</code>.</p>\n\n<p>That said, there's no real reason to return anything below 1_6 on Android. </p>\n"}], "owner": {"reputation": 439, "user_id": 1894850, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/851ed60249b9d50a19e50b728dbc9691?s=128&d=identicon&r=PG", "display_name": "Hug", "link": "https://stackoverflow.com/users/1894850/hug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2563, "favorite_count": 0, "accepted_answer_id": 45059447, "answer_count": 1, "score": 0, "last_activity_date": 1499867047, "creation_date": 1499864929, "question_id": 45058588, "link": "https://stackoverflow.com/questions/45058588/jni-version-1-6-vs-jni-version-1-4", "title": "JNI_VERSION_1_6 vs JNI_VERSION_1_4", "body": "<p>Hello I'm maintaining an Android JNI library that uses JNI_VERSION_1_4.</p>\n\n<p>I was wondering if I could change it to JNI_VERSION_1_6, but I didn't found any documentation explaining the differences between them.</p>\n\n<p>Are they changing any function?\nIs any one faster than the otherone?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "raii", "c++98"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1499864899, "post_id": 45058404, "comment_id": 77090514, "body": "Not sure I understand your problem, but what&#39;s wrong with just a single class providing the two overloads that internally call the corresponding C function on your private member?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1499865135, "post_id": 45058404, "comment_id": 77090694, "body": "tbh I dont get at all what you gain from the code that follows the &quot;I can do something like this :&quot;. Also I dont understand this &quot;I&#39;d rather not directly put pointers directly in the public interface as that would make the interface depend on boost::shared_ptr&quot; If the public interface asks for raw pointers then why is boost::shared_ptr relevant?"}, {"owner": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "edited": false, "score": 0, "creation_date": 1499865152, "post_id": 45058404, "comment_id": 77090711, "body": "I think what you are looking for is a code review. There is a forum for that <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "edited": false, "score": 0, "creation_date": 1499865225, "post_id": 45058404, "comment_id": 77090767, "body": "@Pumkko Code Review will not accept this question."}, {"owner": {"reputation": 11, "user_id": 8295721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa708050c2caae7aee05f73947978702?s=128&d=identicon&r=PG&f=1", "display_name": "Strackeror", "link": "https://stackoverflow.com/users/8295721/strackeror"}, "edited": false, "score": 0, "creation_date": 1499865893, "post_id": 45058404, "comment_id": 77091316, "body": "@Felix essentially, a or b define given objects in the C api, not just numbers so it&#39;s more complicated than that"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1499866834, "post_id": 45058404, "comment_id": 77092048, "body": "Why do you not overload <code>add</code> and let them accept both <code>int</code> and <code>long</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1736, "user_id": 7216259, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyCby.jpg?s=128&g=1", "display_name": "Maro\u0161 Be\u0165ko", "link": "https://stackoverflow.com/users/7216259/maro%c5%a1-be%c5%a5ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1499867338, "creation_date": 1499867338, "answer_id": 45059563, "question_id": 45058404, "link": "https://stackoverflow.com/questions/45058404/wrapping-c-in-raii-without-exposing-types/45059563#45059563", "title": "Wrapping C in RAII without exposing types", "body": "<p>Here is your solution as close to what you wrote in your example as possible:</p>\n\n<pre><code>class AB {\n    friend List;\nprotected:\n    virtual void addToList(ablist* list) = 0;\n};\n\nclass A : private AB {\n    void addToList(ablist* list) override { add_list_a(list, id); }\n    int id;\n};\n\nclass B : private AB {\n    void addToList(ablist* list) override { add_list_b(list, id); }\n    long id;\n};\n\nclass List {\n    ablist* l;\n\npublic:\n    void add(AB* ab) {\n        ab-&gt;addToList(l);\n    }\n};\n</code></pre>\n\n<p>Only accessible function to call is List::add. List class is wrapping the ablist structure and classes A and B are based on the ones from your example.</p>\n"}], "owner": {"reputation": 11, "user_id": 8295721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa708050c2caae7aee05f73947978702?s=128&d=identicon&r=PG&f=1", "display_name": "Strackeror", "link": "https://stackoverflow.com/users/8295721/strackeror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499867338, "creation_date": 1499864451, "last_edit_date": 1499864690, "question_id": 45058404, "link": "https://stackoverflow.com/questions/45058404/wrapping-c-in-raii-without-exposing-types", "title": "Wrapping C in RAII without exposing types", "body": "<p>I'm trying to write a wrapper for a certain c api, specifically around a pair of functions that take this form :</p>\n\n<pre><code>int add_list_a(ablist *l, int id);\nint add_list_b(ablist *l, long id);\n</code></pre>\n\n<p>What I'd like to do is hide the difference between those two and have something like this :</p>\n\n<pre><code>class List\n{\n    void addAB(AB *ab);\n};\n\nclass AB {};\nclass A: public AB {int id;};\nclass B: public AB {long id;};\n</code></pre>\n\n<p>I'd rather not directly put pointers directly in the public interface as that would make the interface depend on boost::shared_ptr. (Can't use modern c++)</p>\n\n<p>I then realized it was difficult to define classes that didn't need to be wrapped in a smart pointer and did not expose some internals for this to work well.</p>\n\n<p>I can do something like this :</p>\n\n<pre><code>class List\n{ \nprivate:\n  ablist *l;\npublic:\n  void addAB(AB ab) {\n    ab.addToList(l);\n  }\n};\n\nclass AB { \nprivate:\n  boost::shared_ptr&lt;InternalAB&gt; ab;\npublic:\n  void addToList(list *l) {\n    ab-&gt;addToList(l);\n  }\n};\n\nclass InternalAB { virtual void addToList(list *l) = 0; }\n</code></pre>\n\n<p>with these types internally :</p>\n\n<pre><code>class InternalA: public InternalAB {\npublic:\n  int id;\n  void addToList(list *l)\n  {\n    add_list_a(l, id);\n  }\n\n};\nclass InternalB: public InternalAB {\npublic:\n  long id;\n  void addToList(list *l)\n  {\n    add_list_b(l, id);\n  }\n};\n</code></pre>\n\n<p>but it's pretty convoluted and still exposes addToList().<br>\nA and B are created from static functions, so their initialization is not a problem, they have a lot of common code in my case which is why I'd like to keep a common type between them.<br>\nIs there a better way to do this ? I might have missed something entirely but it's kind of a specific case and I can't find anything similar</p>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499864440, "post_id": 45058327, "comment_id": 77090135, "body": "You <i>really</i> should have checks for the return values of just about all function you call. Especially the <code>send</code> and <code>recv</code> function, as they will return how much was sent or received in that call, <i>or</i> (which is also important) if there was an error."}, {"owner": {"reputation": 55, "user_id": 4457658, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ed3d7c3693d2c4a28e00352ea1f7583?s=128&d=identicon&r=PG&f=1", "display_name": "JavaOdd", "link": "https://stackoverflow.com/users/4457658/javaodd"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499864880, "post_id": 45058327, "comment_id": 77090493, "body": "Agreed, I&#39;ll change this in my main code. But about the problem what do you think? I dont think its an error, since the code is working as it should, but something that is lacking on my knowledge of sockets."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4457658, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ed3d7c3693d2c4a28e00352ea1f7583?s=128&d=identicon&r=PG&f=1", "display_name": "JavaOdd", "link": "https://stackoverflow.com/users/4457658/javaodd"}, "edited": false, "score": 0, "creation_date": 1499871018, "post_id": 45058785, "comment_id": 77095330, "body": "Not sure how to implement it, but i did my best and edited the code in the main post. I tested it, and apparently i didnt receive any error, for every recv i received the message &quot;The operation was completed with success&quot;. I think maybe the connection being closed after recv receive zero bytes is a default behavior for the code, not an error."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 55, "user_id": 4457658, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ed3d7c3693d2c4a28e00352ea1f7583?s=128&d=identicon&r=PG&f=1", "display_name": "JavaOdd", "link": "https://stackoverflow.com/users/4457658/javaodd"}, "edited": false, "score": 0, "creation_date": 1499874316, "post_id": 45058785, "comment_id": 77097849, "body": "@JavaOdd Before checking for errors you must make sure that the functions actually <i>failed</i>. You do that by checking what e.g. <code>recv</code> <i>returns</i>. I think you need to find some socket tutorial as a good one should have explained all this."}, {"owner": {"reputation": 55, "user_id": 4457658, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ed3d7c3693d2c4a28e00352ea1f7583?s=128&d=identicon&r=PG&f=1", "display_name": "JavaOdd", "link": "https://stackoverflow.com/users/4457658/javaodd"}, "edited": false, "score": 0, "creation_date": 1499897690, "post_id": 45058785, "comment_id": 77110017, "body": "In my knowledge i&gt;0 buffer bytes, i=0 closed and i&lt;0 error. If by returns you mean i=recv(e,b,sizeof(b),0), then it returns the number of bytes in the buffer and then multiple zeros, because its closed. It didnt receive negative/error. If you mean something else, i will search a tutorial, if you have one i thank you."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1499865434, "creation_date": 1499865434, "answer_id": 45058785, "question_id": 45058327, "link": "https://stackoverflow.com/questions/45058327/receive-whole-page-without-closing-connection/45058785#45058785", "title": "Receive whole page without closing connection", "body": "<p>The problem is most likely that the socket is <em>blocking</em> so if there's nothing to read then <code>recv</code> will block indefinitely and not return until it has either received something or detected an error.</p>\n\n<p>On the other side, while your program is being blocked in the <code>recv</code> function the server will timeout and close the connection. That will cause <code>recv</code> in your program to be unblocked and to return <code>0</code>.</p>\n\n<p>If you want to keep using the same connection you need to make the socket <em>non-blocking</em> and check for failures from the <code>recv</code> call. When <code>recv</code> would normally block it returns with an error (<code>SOCKET_ERROR</code>) and sets the error code (which you get from <code>WSAGetLastError</code>) to <code>WSAEWOULDBLOCK</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 4457658, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ed3d7c3693d2c4a28e00352ea1f7583?s=128&d=identicon&r=PG&f=1", "display_name": "JavaOdd", "link": "https://stackoverflow.com/users/4457658/javaodd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499937917, "creation_date": 1499864253, "last_edit_date": 1499937917, "question_id": 45058327, "link": "https://stackoverflow.com/questions/45058327/receive-whole-page-without-closing-connection", "title": "Receive whole page without closing connection", "body": "<p>Please dont give too much importance to little fouls in the code, focus on the problem.</p>\n\n<p>The code request the same page 10 times. It call recv until the buffer has zero bytes, to make sure i received everything. Problem is, when recv has zero bytes it closes the connection, meaning i only received the first page. I need to receive the whole page before requesting the next one.</p>\n\n<p>How to receive the whole page and to know its the last time i should call recv without going to the zero bytes?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;time.h&gt;\n#pragma comment(lib,\"ws2_32.lib\")\nusing namespace std;\nint main() {\n\n    WSADATA w;\n    WORD DllVersion = MAKEWORD(2, 1);\n    WSAStartup(DllVersion, &amp;w);\n    SOCKADDR_IN u = { AF_INET,htons(80),0,0 };\n    u.sin_addr.s_addr = inet_addr(\"1.1.1.1\");\n    SOCKET e = socket(AF_INET, 0, 0);\n    connect(e, (SOCKADDR*)&amp;u, sizeof(u));\n\n    string l=\"GET / HTTP/1.1\\r\\nHost:www.site.com\\r\\nConnection:keep-alive\\r\\n\\r\\n\";\n\n    char b[100000];\n        int i,iResult,iError,error;\n    ofstream z(\"pg.htm\");\n\n    for(i=0;i&lt;10;i++){\n        send(e, l.c_str(), strlen(l.c_str()), 0);\n        do{\n\n            clock_t begin = clock();\n\n            z &lt;&lt; b;\n            memset(b, 0, sizeof(b));\n            int iResult=recv(e, b, sizeof(b), 0);\n                if (iResult == SOCKET_ERROR ) {\n                        int iError = WSAGetLastError();\n                        if (iError == WSAEWOULDBLOCK)\n                    printf(\"recv failed with error: WSAEWOULDBLOCK\\n\");\n                else\n                    printf(\"recv failed with error: %ld\\n\", iError);\n            }\n\n            wchar_t *s=NULL;\n            FormatMessageW(FORMAT_MESSAGE_ALLOCATE_BUFFER|FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_IGNORE_INSERTS,NULL,WSAGetLastError(),MAKELANGID(LANG_NEUTRAL,SUBLANG_DEFAULT),(LPWSTR)&amp;s,0,NULL);\n            fprintf(stderr,\"%S\\n\",s);\n            LocalFree(s);\n\n            clock_t end = clock();\n            double time_spent = (double)(end - begin) / CLOCKS_PER_SEC;\n            cout &lt;&lt; time_spent;\n            cout &lt;&lt; \"#\";\n            cout &lt;&lt; iResult;\n            cout &lt;&lt; \"#\";\n\n        }while(strlen(b)!=0);\n        memset(b, 0, sizeof(b));\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 9, "creation_date": 1499863710, "post_id": 45058102, "comment_id": 77089543, "body": "I suggest you get <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good book</a> and read a little."}], "answers": [{"tags": [], "owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "is_accepted": false, "score": 0, "last_activity_date": 1499863714, "creation_date": 1499863714, "answer_id": 45058152, "question_id": 45058102, "link": "https://stackoverflow.com/questions/45058102/any-one-explain-the-below-code-and-what-is-its-output/45058152#45058152", "title": "Any one explain the below code and what is its output?", "body": "<p>It's a default argument, so you can call <code>BixString()</code> with no arguments, and the txtTemp variable will be <code>NULL</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5047966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a343523cb11ed821d01587a0c92163c9?s=128&d=identicon&r=PG&f=1", "display_name": "sairamkamalay", "link": "https://stackoverflow.com/users/5047966/sairamkamalay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1499863811, "creation_date": 1499863548, "last_edit_date": 1499863811, "question_id": 45058102, "link": "https://stackoverflow.com/questions/45058102/any-one-explain-the-below-code-and-what-is-its-output", "title": "Any one explain the below code and what is its output?", "body": "<p>The c++ code\nI am unable to understand the pointer inside the class.\nWhat does this line <code>char *txtTemp = NULL</code> represents?</p>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;string.h&gt;\n#include&lt;malloc.h&gt;\nclass BixString\n{\n    char txtName[20]; \n    public:\n    BixString(char *txtTemp = NULL)\n    {\n        if(txtTemp != NULL)\n        strcpy(txtName, txtTemp);\n    }\n    void Display(void)\n    {\n        cout&lt;&lt;txtName;\n    }\n};\nint main()\n{\n    char *txtName = (char*)malloc(10);\n    strcpy(txtName, \"IndiaBIX\");\n    *txtName = 48;\n    BixString objTemp(txtName);\n    cout&lt;&lt; sizeof(txtName);\n    return 0; \n}\n</code></pre>\n"}]