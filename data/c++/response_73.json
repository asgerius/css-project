[{"tags": ["c++", "opengl", "shader", "fragment-shader", "vertex-shader"], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 5, "last_activity_date": 1464827053, "creation_date": 1464827053, "answer_id": 37580822, "question_id": 37580597, "link": "https://stackoverflow.com/questions/37580597/best-way-to-use-multiple-shaders/37580822#37580822", "title": "Best way to use multiple shaders", "body": "<p>Of course that doesn't work. The <code>glUniform*</code> calls change the <em>currently bound</em> program's uniform state. So whatever program was passed to <code>glUseProgram</code> most recently.</p>\n\n<p>If you want to modify a uniform in another program, you have to switch to the other program. Or <a href=\"https://www.opengl.org/sdk/docs/man/html/glProgramUniform.xhtml\" rel=\"noreferrer\">use <code>glProgramUniform*</code></a>.</p>\n"}], "owner": {"reputation": 119, "user_id": 5029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/751d92c3a5f54c731d4e1813f40bcd58?s=128&d=identicon&r=PG&f=1", "display_name": "javierMarquez", "link": "https://stackoverflow.com/users/5029956/javiermarquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2390, "favorite_count": 1, "accepted_answer_id": 37580822, "answer_count": 1, "score": 2, "last_activity_date": 1464827053, "creation_date": 1464825196, "last_edit_date": 1464825728, "question_id": 37580597, "link": "https://stackoverflow.com/questions/37580597/best-way-to-use-multiple-shaders", "title": "Best way to use multiple shaders", "body": "<p>Few weeks I learn OpenGL on famous <a href=\"http://learnopengl.com\" rel=\"nofollow\">http://learnopengl.com</a> and have question about a organise multiple materials (shaders).\nIn this tutorial is using Shader class which compose Shader program from list of vert/frag shaders:</p>\n\n<pre><code>Shader shader(\"vert.glsl\", \"frag.glsl\");\n</code></pre>\n\n<p>After that for shader I create uniforms: </p>\n\n<pre><code>    glUniformMatrix4fv(glGetUniformLocation(shader.Program, \"model\"), 1, GL_FALSE, glm::value_ptr(model));\n    glUniformMatrix4fv(glGetUniformLocation(shader.Program, \"view\"), 1, GL_FALSE, glm::value_ptr(view));\netc.\n</code></pre>\n\n<p>And at the end we receive one Shader program. How in this case I can make multiple shaders? \nI try to make:</p>\n\n<pre><code>Shader shader(\"vertDiff.glsl\", \"fragDiff.glsl\");\nShader shaderGlass (\"vertGlass.glsl\", \"fragGlass.glsl\");\nShader shaderLight(\"vertLight.glsl\", \"fragLight.glsl\")\n</code></pre>\n\n<p>And after that i make uniforms for .glsl for each shader :</p>\n\n<pre><code>glUniformMatrix4fv(glGetUniformLocation(shader.Program, \"model\"), 1, GL_FALSE, glm::value_ptr(model));\nglUniformMatrix4fv(glGetUniformLocation(shaderGlass.Program, \"model\"), 1, GL_FALSE, glm::value_ptr(model));\n</code></pre>\n\n<p>But shading doesn't work correctly. The same uniforms needs to be declared few times for each shader and that make program incorrect.\nHow is a correctly to make this part? Thank you and sorry for my stupid question.:)</p>\n"}, {"tags": ["c++", "floating-point", "integer"], "comments": [{"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 1, "creation_date": 1464827360, "post_id": 37580501, "comment_id": 62648585, "body": "I&#39;m not sure a library is needed...  <code>double convert(int16_t x) {return x &lt; 0 ? x&#47;double(32768) : x&#47;double(32767);}</code>. It can easily be templated and generalized to all int types using <code>std::numeric_limits</code>. Anyway it&#39;s very short to make and surely not in the std library. Look also here: <a href=\"http://stackoverflow.com/questions/929103/convert-a-number-range-to-another-range-maintaining-ratio\" title=\"convert a number range to another range maintaining ratio\">stackoverflow.com/questions/929103/&hellip;</a>"}, {"owner": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "reply_to_user": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 1, "creation_date": 1464828707, "post_id": 37580501, "comment_id": 62648871, "body": "@coyotte508 Although I haven&#39;t found it yet, I was really looking/hoping for something already templated, like std::numeric_limits in the standard library, that already does this since I know I&#39;m not the only one to need this. I spent so much of my career writing code that could and should have already been standardized only to find out later that someone <i>already had</i> written that these days I try to find existing, standardized code before writing it myself. BTW, thanks for the link."}, {"owner": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 1, "creation_date": 1464831034, "post_id": 37580501, "comment_id": 62649322, "body": "I would normally agree but when it&#39;s one line, it is clearer to have it &quot;inline&quot; (on site) than wrapped in an obscure wannabe-standard name function call. by the way, orthogonally to the question, are you sure you want to use floats ? the precision vary enormously in the range between 0 and 1."}, {"owner": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "reply_to_user": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 1, "creation_date": 1464839091, "post_id": 37580501, "comment_id": 62651006, "body": "@v.oddou That is a good point, and even with a simple problem like this, there can be issues depending on your usage case, e.g.,  <a href=\"http://stackoverflow.com/questions/599976/convert-quantize-float-range-to-integer-range?rq=1\" title=\"convert quantize float range to integer range\">stackoverflow.com/questions/599976/&hellip;</a>. BTW, I am using doubles (or float64_t as it appears in my code), but I wanted to ask the question generically so that I wouldn&#39;t limit the answers I got. I&#39;ve come across so many good but obscure links on SO, and even if it&#39;s not exactly what you&#39;re looking (e.g., it uses floats instead of doubles), you can still often find some really good things out there."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1581451557, "post_id": 37580501, "comment_id": 106436200, "body": "This problem is incompletely stated. If \u221232768 and 32767 represent \u22121 and 1, then either the scaling is different for positive and negative numbers or 0 does not represent 0. In the former case, addition and subtraction between representatives of numbers of opposite sign will give wrong results. In the latter case, simple multiplication of representatives will give wrong results."}], "answers": [{"tags": [], "owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "is_accepted": false, "score": -2, "last_activity_date": 1464830649, "last_edit_date": 1464830649, "creation_date": 1464830320, "answer_id": 37581190, "question_id": 37580501, "link": "https://stackoverflow.com/questions/37580501/normalized-integer-to-from-float-conversion/37581190#37581190", "title": "Normalized Integer to/from Float Conversion", "body": "<blockquote>\n  <p>Although it's a bit tedious to do this for each integer type, both\n  signed and unsigned, it's still easy enough to write by hand.</p>\n</blockquote>\n\n<p>You certainly don't need to do this for each integer type!  Use <code>&lt;limits&gt;</code> instead.</p>\n\n<pre><code>template&lt;class T&gt; double AsDouble(const T x) {\n    const double valMin = std::numeric_limits&lt;T&gt;::min();\n    const double valMax = std::numeric_limits&lt;T&gt;::max();\n    return 2 * (x - valMin) / (valMax - valMin) - 1; // note: 0 does not become 0.\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "edited": false, "score": 1, "creation_date": 1464839697, "post_id": 37581284, "comment_id": 62651111, "body": "This is very nice code, and good usage case testing. Thank you."}, {"owner": {"reputation": 3945, "user_id": 794283, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ac26595a27ea0c78f26be97ddb600b1?s=128&d=identicon&r=PG", "display_name": "Tim MB", "link": "https://stackoverflow.com/users/794283/tim-mb"}, "edited": false, "score": 2, "creation_date": 1471364092, "post_id": 37581284, "comment_id": 65312201, "body": "Converting from integer to double is easy enough, but it would be nice to also see a correct solution to go from double to integer (i.e. where <code>0.99999999999 == 32767</code> rather than <code>0.99999999999 == 32766</code> as is the case when using a similar approach in this direction of <code>static_cast&lt;uint16_t&gt;(value * std::numeric_limits&lt;uint16_t&gt;::max()</code> due to the way static_cast truncates rather than rounds."}], "tags": [], "owner": {"reputation": 10234, "user_id": 4698882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb0d3ed63da5a5d65872d5b0d147e3d?s=128&d=identicon&r=PG", "display_name": "Binary Birch Tree", "link": "https://stackoverflow.com/users/4698882/binary-birch-tree"}, "is_accepted": true, "score": 9, "last_activity_date": 1464831411, "last_edit_date": 1464831411, "creation_date": 1464831104, "answer_id": 37581284, "question_id": 37580501, "link": "https://stackoverflow.com/questions/37580501/normalized-integer-to-from-float-conversion/37581284#37581284", "title": "Normalized Integer to/from Float Conversion", "body": "<p>Here's a templated solution using <code>std::numeric_limits</code>:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;limits&gt;\n\ntemplate &lt;typename T&gt;\nconstexpr double normalize (T value) {\n  return value &lt; 0\n    ? -static_cast&lt;double&gt;(value) / std::numeric_limits&lt;T&gt;::min()\n    :  static_cast&lt;double&gt;(value) / std::numeric_limits&lt;T&gt;::max()\n    ;\n}\n\nint main () {\n  // Test cases evaluated at compile time.\n  static_assert(normalize(int16_t(32767)) == 1, \"\");\n  static_assert(normalize(int16_t(0)) == 0, \"\");\n  static_assert(normalize(int16_t(-32768)) == -1, \"\");\n  static_assert(normalize(int16_t(-16384)) == -0.5, \"\");\n  static_assert(normalize(uint16_t(65535)) == 1, \"\");\n  static_assert(normalize(uint16_t(0)) == 0, \"\");\n}\n</code></pre>\n\n<p>This handles both signed and unsigned integers, and 0 does normalize to 0.</p>\n\n<p><kbd><a href=\"https://ideone.com/4kIJtU\" rel=\"noreferrer\">View Successful Compilation Result</a></kbd></p>\n"}], "owner": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3899, "favorite_count": 0, "accepted_answer_id": 37581284, "answer_count": 2, "score": 7, "last_activity_date": 1581451129, "creation_date": 1464824554, "last_edit_date": 1500452997, "question_id": 37580501, "link": "https://stackoverflow.com/questions/37580501/normalized-integer-to-from-float-conversion", "title": "Normalized Integer to/from Float Conversion", "body": "<p>I need to convert normalized integer values to and from real floating-point values. For instance, for int16_t, a value of 1.0 is represented by 32767 and -1.0 is represented by -32768. Although it's a bit tedious to do this for each integer type, both signed and unsigned, it's still easy enough to write by hand.</p>\n\n<p>However, I want to use standard methods whenever possible rather than going off and reinventing the wheel, so what I'm looking for is something like a standard C or C++ header, a Boost library, or some other small, portable, easily-incorporated source that already performs these conversions.</p>\n"}, {"tags": ["c++", "line-intersection"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1464823318, "post_id": 37580306, "comment_id": 62647510, "body": "<code>pointB[0]-pointB[0]</code> should be <code>pointB[0]-pointA[0]</code>. But you still need to check for division by 0."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1464823753, "post_id": 37580306, "comment_id": 62647641, "body": "Have two vectors v0 = A to B and v1 = C to D. Then, if the vector product (cross product) v0 x v1 is zero, the lines do not intersect."}], "answers": [{"comments": [{"owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "reply_to_user": {"reputation": 11, "user_id": 6412035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df8386bb8153180f645b668e22190ef4?s=128&d=identicon&r=PG&f=1", "display_name": "TStro", "link": "https://stackoverflow.com/users/6412035/tstro"}, "edited": false, "score": 0, "creation_date": 1464823878, "post_id": 37580335, "comment_id": 62647677, "body": "@TStro If this fixes your problem, don&#39;t forget to mark the question answered."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1464824077, "post_id": 37580335, "comment_id": 62647726, "body": "That does not fix the cases <code>pointB[0] == pointA[0]</code> and <code>pointD[0] == pointC[0]</code>"}], "tags": [], "owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "is_accepted": true, "score": 1, "last_activity_date": 1464823279, "creation_date": 1464823279, "answer_id": 37580335, "question_id": 37580306, "link": "https://stackoverflow.com/questions/37580306/inf-output-computing-line-slopes/37580335#37580335", "title": "inf output computing line slopes", "body": "<p>This line:</p>\n\n<pre><code>LineSeg1 = ((pointB[1]-pointA[1])/(pointB[0]-pointB[0]));\n</code></pre>\n\n<p>has a divide by zero error.</p>\n\n<p>I believe the equation should be: </p>\n\n<pre><code>LineSeg1 = ((pointB[1]-pointA[1])/(pointB[0]-pointA[0]));\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6412035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df8386bb8153180f645b668e22190ef4?s=128&d=identicon&r=PG&f=1", "display_name": "TStro", "link": "https://stackoverflow.com/users/6412035/tstro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 37580335, "answer_count": 1, "score": 0, "last_activity_date": 1552852267, "creation_date": 1464823088, "last_edit_date": 1552852267, "question_id": 37580306, "link": "https://stackoverflow.com/questions/37580306/inf-output-computing-line-slopes", "title": "inf output computing line slopes", "body": "<p>I am very new at C++.</p>\n\n<p>I wrote this code below which is supposed to tell me if 2 lines have an intersection point, so I figured two lines with equal \"M\" in the y=Mx+B equation should not intersect and all others would.</p>\n\n<p>The program seems to be understanding this, but unless the slope of the inputted line segment is 0 it outputs inf or -inf.</p>\n\n<p>why is this happening? </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main ()\n{\ntypedef double vector2d[2];\nvector2d pointA, pointB, pointC, pointD;\ndouble LineSeg1, LineSeg2;\ndouble yes, no;\n\n\ncout &lt;&lt; \"Enter x for point A: \";\ncin &gt;&gt; pointA[0];\ncout &lt;&lt; \"Enter y for point A: \";\ncin &gt;&gt; pointA[1];\ncout &lt;&lt; \"Point A = (\" &lt;&lt; pointA[0] &lt;&lt; \",\" &lt;&lt; pointA[1] &lt;&lt; \")\" &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter x for point B: \";\ncin &gt;&gt; pointB[0];\ncout &lt;&lt; \"Enter y for point B: \";\ncin &gt;&gt; pointB[1];\ncout &lt;&lt; \"Point B = (\" &lt;&lt; pointB[0] &lt;&lt; \",\" &lt;&lt; pointB[1] &lt;&lt; \")\" &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter x for point C: \";\ncin &gt;&gt; pointC[0];\ncout &lt;&lt; \"Enter y for point C: \";\ncin &gt;&gt; pointC[1];\ncout &lt;&lt; \"Point C = (\" &lt;&lt; pointC[0] &lt;&lt; \",\" &lt;&lt; pointC[1] &lt;&lt; \")\" &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter x for point D: \";\ncin &gt;&gt; pointD[0];\ncout &lt;&lt; \"Enter y for point D: \";\ncin &gt;&gt; pointD[1];\ncout &lt;&lt; \"Point D = (\" &lt;&lt; pointD[0] &lt;&lt; \",\" &lt;&lt; pointD[1] &lt;&lt; \")\" &lt;&lt; endl;\n\nLineSeg1 = ((pointB[1]-pointA[1])/(pointB[0]-pointB[0]));\ncout &lt;&lt; \"slope segment 1 = (\" &lt;&lt; LineSeg1 &lt;&lt; endl;\n\nLineSeg2 = ((pointD[1]-pointC[1])/(pointD[0]-pointC[0]));\ncout &lt;&lt; \"slope segment 2 = (\" &lt;&lt; LineSeg2 &lt;&lt; endl;\n\n\nif ( LineSeg1 == LineSeg2 ) {\n    cout &lt;&lt; \"no\\n\";\n}\n\nelse ( LineSeg1 != LineSeg2 ) ;{\n    cout &lt;&lt; \"yes\\n\";\n}\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 6, "creation_date": 1464822507, "post_id": 37580179, "comment_id": 62647285, "body": "The implementation of virtual function tables is compiler dependent.  There is not even a requirement to use virtual function tables."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 7, "creation_date": 1464822573, "post_id": 37580179, "comment_id": 62647306, "body": "Please update your question to show how you would use a pointer to a virtual function table (why do you <i>need</i> a pointer to the function table?)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1464822953, "post_id": 37580179, "comment_id": 62647414, "body": "This question is hard to understand because it&#39;s not clear what context you are asking it in. Are you asking how to modify the code? How to add existing code without changing that code? How to do it with a debugger? It would help an awful lot to understand what problem you are trying to solve with this as that would make the context clear."}, {"owner": {"reputation": 61, "user_id": 1888474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXmmy.jpg?s=128&g=1", "display_name": "Samboy786", "link": "https://stackoverflow.com/users/1888474/samboy786"}, "edited": false, "score": 1, "creation_date": 1464824110, "post_id": 37580179, "comment_id": 62647736, "body": "Why do you want to see the virtual function table ? I am too curious to know"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464826416, "post_id": 37580179, "comment_id": 62648370, "body": "Hmmm, for downvoters and arguers from all above comments, the question is pretty straight forward, isn&#39;t it?"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 8, "last_activity_date": 1464829471, "last_edit_date": 1464829471, "creation_date": 1464822701, "answer_id": 37580238, "question_id": 37580179, "link": "https://stackoverflow.com/questions/37580179/getting-virtual-table-pointer-c/37580238#37580238", "title": "getting virtual table pointer c++", "body": "<blockquote>\n  <p>How would I get a pointer to the variable x and a pointer to the virtual function table of that class using just the pointer \"thing\"?</p>\n</blockquote>\n\n<p>You can't without casting <code>thing</code> back to the original type:</p>\n\n<pre><code>Stuff* stuff2 = reinterpret_cast&lt;Stuff*&gt;(thing);\n</code></pre>\n\n<p>and at least that doesn't redeem you from privacy policies of that class, and how you could access class member pointers publicly. </p>\n\n<p>The actual layout is implementation defined, and trying to use offsets from <em>thing</em> and size assumptions is beyond standard c++ mechanisms.</p>\n\n<hr>\n\n<p>It sounds like you want to circumvent the <code>private</code> member access policies of a class with known layout of these members. Here's an extremely dirty hack:<br>\n<sub><strong>Disclamer:</strong> Don't do that in production code!!</sub></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Stuff {\nprivate:\n    int x;\n    virtual int business() {\n        std::cout &lt;&lt; \"Have that 42 ... \" &lt;&lt; std::endl;\n        return 42;\n    }\npublic:\n    Stuff() {\n      x = 5;\n    }\n};\n\nstruct StuffProxy {\n    // Make the layout public:\n    int x;\n    virtual int business();\n};\n\nint main() {\n    Stuff stuff;\n    void* thing = &amp;stuff;\n\n    // Here's the nasty stuff\n    StuffProxy* stuffProxy = reinterpret_cast&lt;StuffProxy*&gt;(thing);\n    int* addrX = &amp;(stuffProxy-&gt;x); // Get the address of x\n    std::cout &lt;&lt; \"x = \" &lt;&lt; *addrX &lt;&lt; std::endl;\n\n    typedef int (Stuff::*StuffFunc)();\n    StuffFunc stuffFunc = (StuffFunc)(&amp;StuffProxy::business);\n    std::cout &lt;&lt; \"business() = \" &lt;&lt; (stuff.*stuffFunc)() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<hr>\n\n<p>Output:</p>\n\n<pre><code>x = 5\nHave that 42 ... \nbusiness() = 42\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b4fc1f944e7a1f67\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n\n<p>The above works because it's guaranteed that <code>class</code> and <code>struct</code> will have the same layout in a c++ compilers implementation, with the only difference of the members visibility during compilation.</p>\n\n<p>So if you have the layout of a class (e.g. from a header), and you are willing to maintain that over the lifetime of your project, you can provide such proxy like above to access the <code>private</code> stuff from a class.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464826668, "post_id": 37580288, "comment_id": 62648421, "body": "You can well circumvent all of these rules (not that I recommend so), unless you hide everything beyond a <code>pimpl</code> (and best use unnamed namespaces for the actual implementation)."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 2, "last_activity_date": 1464822955, "creation_date": 1464822955, "answer_id": 37580288, "question_id": 37580179, "link": "https://stackoverflow.com/questions/37580179/getting-virtual-table-pointer-c/37580288#37580288", "title": "getting virtual table pointer c++", "body": "<p>To access the <code>private</code> member <code>x</code>:  </p>\n\n<p>1) Declare the function, that needs to access <code>x</code>, as a friend of the class.  </p>\n\n<p>2) Change access to <code>public</code>.  </p>\n\n<p>3) Write public <em>getter</em> or <em>setter</em> functions.  </p>\n\n<p>4) Change your design; Other classes should not know about member variables.</p>\n"}, {"tags": [], "owner": {"reputation": 683, "user_id": 4535459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-kdfdRy-50hs/AAAAAAAAAAI/AAAAAAAAAF4/KXX1O_2Hwrs/photo.jpg?sz=128", "display_name": "Cread Dotson", "link": "https://stackoverflow.com/users/4535459/cread-dotson"}, "is_accepted": false, "score": 0, "last_activity_date": 1464909071, "creation_date": 1464909071, "answer_id": 37603557, "question_id": 37580179, "link": "https://stackoverflow.com/questions/37580179/getting-virtual-table-pointer-c/37603557#37603557", "title": "getting virtual table pointer c++", "body": "<p>This may be compiler dependant.\nI just made a char array from the pointer \"thing\"</p>\n\n<pre><code>char *array;\narray = (char*)thing;\n</code></pre>\n\n<p>Then traverse that array until I found the private variables</p>\n\n<pre><code>int x = array[8];\n</code></pre>\n"}], "owner": {"reputation": 683, "user_id": 4535459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-kdfdRy-50hs/AAAAAAAAAAI/AAAAAAAAAF4/KXX1O_2Hwrs/photo.jpg?sz=128", "display_name": "Cread Dotson", "link": "https://stackoverflow.com/users/4535459/cread-dotson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1636, "favorite_count": 0, "accepted_answer_id": 37580238, "answer_count": 3, "score": 1, "last_activity_date": 1464909071, "creation_date": 1464822272, "last_edit_date": 1464840939, "question_id": 37580179, "link": "https://stackoverflow.com/questions/37580179/getting-virtual-table-pointer-c", "title": "getting virtual table pointer c++", "body": "<p>I have a class such as</p>\n\n<pre><code>class Stuff\n{\nprivate:\nint x;\nvirtual int buisness()\n{\n  return 42;\n}\npublic:\n Stuff(){\n  x = 5;\n}\n</code></pre>\n\n<p>Given a pointer to an instance of this class</p>\n\n<pre><code>Stuff stuff;\nvoid* thing = &amp;stuff;\n</code></pre>\n\n<p>How would I get a pointer to the variable x and a pointer to the virtual function table of that class using just the pointer \"thing\"?</p>\n\n<p>Edit:  to clarify this was a challenge sent to me and I have been assured that it is not a trick question.</p>\n"}, {"tags": ["c++", "templates", "partial-specialization"], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1464826896, "post_id": 37580724, "comment_id": 62648472, "body": "Classic traits approach.  Plus, with this approach, <code>Size</code> can default to a specific trait unless explicitly stated otherwise, eg: <code>template&lt;class T, class Size = DynamicSize&gt; class Container {...}; ... Container&lt;char&gt; b;</code>"}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 1, "last_activity_date": 1464826289, "creation_date": 1464826289, "answer_id": 37580724, "question_id": 37580040, "link": "https://stackoverflow.com/questions/37580040/partial-specialization-for-an-integral-constant-vs-a-type/37580724#37580724", "title": "Partial Specialization for an Integral Constant vs a Type", "body": "<p>I think the only way to do this is to have the <code>Container</code> template take a type parameter for the <code>Size</code>. Then it's the responsibility of the type to handle whether it's dynamic or static. I'm thinking any details specific to type of storage type could be confined to the <code>struct</code> types. Perhaps the following example is helpful.</p>\n\n<h3>Example Code</h3>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct DynamicSize\n{\n    static const int size = -1;\n};\n\ntemplate&lt;int Size&gt;\nstruct FixedSize\n{\n    static const int size = Size;\n};\n\ntemplate&lt;class T, class Size&gt;\nclass Container\n{\npublic:\n    Container()\n    {\n        std::cout &lt;&lt; Size::size &lt;&lt; \"\\n\";\n    }\n};\n\nint main()\n{\n    Container&lt;char, FixedSize&lt;20&gt;&gt; a;\n    Container&lt;char, DynamicSize&gt; b;\n\n    return 0;\n}\n</code></pre>\n\n<h3>Example Output</h3>\n\n<pre><code>20\n-1\n</code></pre>\n\n<p><kbd><a href=\"http://ideone.com/lp2jgJ\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1465078327, "creation_date": 1465078327, "answer_id": 37635513, "question_id": 37580040, "link": "https://stackoverflow.com/questions/37580040/partial-specialization-for-an-integral-constant-vs-a-type/37635513#37635513", "title": "Partial Specialization for an Integral Constant vs a Type", "body": "<p>The proposed solution by James is very nice!</p>\n\n<p>However, if there is an actual need for <strong><em>partial specialization</em></strong>, as requested originally in the question (e.g. for implementing a different behavior in the two different cases), riding on James answer I would propose:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct DynamicSize {};\n\ntemplate&lt;int Size&gt;\nstruct FixedSize {};\n\ntemplate&lt;class T, class Size&gt;\nclass Container;\n\ntemplate&lt;class T, int size&gt;\nclass Container&lt;T, FixedSize&lt;size&gt;&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"FixedSize: \" &lt;&lt; size &lt;&lt; \"\\n\"; }\n};\n\ntemplate&lt;class T&gt;\nclass Container&lt;T, DynamicSize&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"dynamic size\\n\"; }\n};\n\n// you can also do that    \ntemplate&lt;class T&gt;\nclass Container&lt;T, FixedSize&lt;0&gt;&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"Special case of FixedSize 0\\n\"; }\n};\n\nint main() {\n    Container&lt;char, FixedSize&lt;20&gt;&gt; a;\n    Container&lt;char, DynamicSize&gt; b;\n    Container&lt;char, FixedSize&lt;0&gt;&gt; c;\n}\n</code></pre>\n\n<h2>Example Output</h2>\n\n<pre><code>FixedSize: 20\ndynamic size\nSpecial case of FixedSize 0\n</code></pre>\n\n<hr>\n\n<h2>But why stop here?</h2>\n\n<p>If there is a need to <strong><em>specialize on the size itself</em></strong> (i.e. to create different implementation for different fixed size values, by predefined range selection), one can do:</p>\n\n<pre><code>enum class SIZE_RANGE {SMALL, MEDIUM = 10, BIG = 100};\nconstexpr bool operator&lt;(int size, SIZE_RANGE s) {\n    return size &lt; (int)s;\n}\n\n//------------------------------------------------------------------------------------\n// FixedSize manages its own range selection here\ntemplate&lt;int Size, \n         SIZE_RANGE SizeRange = (Size &lt; SIZE_RANGE::MEDIUM? SIZE_RANGE::SMALL :\n                                 Size &lt; SIZE_RANGE::BIG?    SIZE_RANGE::MEDIUM :\n                                                            SIZE_RANGE::BIG)&gt;\nstruct FixedSize {};\n//------------------------------------------------------------------------------------\n</code></pre>\n\n<h2>Now we can specialize on the Container's size, according to its range:</h2>\n\n<pre><code>template&lt;class T, class Size&gt;\nclass Container;\n\ntemplate&lt;class T&gt;\nclass Container&lt;T, FixedSize&lt;0&gt;&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"Special case of FixedSize 0\\n\"; }\n};\n\ntemplate&lt;class T, int size&gt;\nclass Container&lt;T, FixedSize&lt;size, SIZE_RANGE::SMALL&gt;&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"Small FixedSize: \" &lt;&lt; size &lt;&lt; \"\\n\"; }\n};\n\ntemplate&lt;class T, int size&gt;\nclass Container&lt;T, FixedSize&lt;size, SIZE_RANGE::MEDIUM&gt;&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"Medium FixedSize: \" &lt;&lt; size &lt;&lt; \"\\n\"; }\n};\n\ntemplate&lt;class T, int size&gt;\nclass Container&lt;T, FixedSize&lt;size, SIZE_RANGE::BIG&gt;&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"Big FixedSize: \" &lt;&lt; size &lt;&lt; \"\\n\"; }\n};\n\ntemplate&lt;class T&gt;\nclass Container&lt;T, DynamicSize&gt; {\npublic:\n    Container() { std::cout &lt;&lt; \"dynamic size\\n\"; }\n};\n</code></pre>\n\n<p>Which can be demonstrated by the following main:</p>\n\n<pre><code>int main() {\n    Container&lt;char, DynamicSize&gt; a;\n    Container&lt;char, FixedSize&lt;0&gt;&gt; b;\n    Container&lt;char, FixedSize&lt;5&gt;&gt; c;\n    Container&lt;char, FixedSize&lt;42&gt;&gt; d;\n    Container&lt;char, FixedSize&lt;100&gt;&gt; e;\n}\n</code></pre>\n\n<h2>Example Output</h2>\n\n<pre><code>dynamic size\nSpecial case of FixedSize 0\nSmall FixedSize: 5\nMedium FixedSize: 42\nBig FixedSize: 100\n</code></pre>\n\n<p><kbd><a href=\"http://ideone.com/Npj44d\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}], "owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 1, "accepted_answer_id": 37580724, "answer_count": 2, "score": 2, "last_activity_date": 1465078327, "creation_date": 1464821475, "question_id": 37580040, "link": "https://stackoverflow.com/questions/37580040/partial-specialization-for-an-integral-constant-vs-a-type", "title": "Partial Specialization for an Integral Constant vs a Type", "body": "<p>Is it possible to specialize a template based on whether a template argument is either a type or an integral constant? Here's an example that doesn't compile but which illustrates the intent:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstddef&gt;\n\n// tag struct\nstruct DynamicSize {};\n\ntemplate&lt;class T, class Size&gt;\nclass Container;\n\ntemplate&lt;class T&gt;\nclass Container&lt;T, DynamicSize&gt;\n{\npublic:\n    Container() {\n        std::puts(\"dynamic size\");\n    }\n};\n\ntemplate&lt;class T, int Size&gt;\nclass Container&lt;T, Size&gt;\n{\npublic:\n    Container() {\n        std::puts(\"static size\");\n    }\n};\n\nint main(int argc, char* argv[]) {\n    Container&lt;char, 20&gt; a;\n    Container&lt;char, DynamicSize&gt; b;\n}\n</code></pre>\n\n<p>The Eigen library has support for matrices of fixed size or runtime determined size and does something similar to this. The implementation there is that the template argument is always an integral constant and the dynamic tag is just a constant equal to -1 but I'm curious if there's another way.</p>\n"}, {"tags": ["c++", "cmake", "conan"], "comments": [{"owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "edited": false, "score": 0, "creation_date": 1464826279, "post_id": 37580003, "comment_id": 62648339, "body": "Seems a bit complex, I will be able to clone your project tonight and have a look, but unfortunately, it will be some hours."}, {"owner": {"reputation": 571, "user_id": 2302414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUa6f.jpg?s=128&g=1", "display_name": "lasote", "link": "https://stackoverflow.com/users/2302414/lasote"}, "edited": false, "score": 0, "creation_date": 1464846558, "post_id": 37580003, "comment_id": 62653341, "body": "I think the def file can be the best option for you. As @drodi said it&#39;s a complex problem and doesn&#39;t have a unique solution. The truly problem is the lack of DLL support for Google&#39;s Gumbo&#39;s parser. The better way should be fork que repository, add CMake and DLL support with symbols or a def file and then make a pull request (you can always package your fork if it&#39;s not merged). I think there are isolated problems, first the DLL support and then the conan package. Maybe we can help you with the DLL support with little time! ;)"}, {"owner": {"reputation": 33, "user_id": 4729369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q99uy.jpg?s=128&g=1", "display_name": "Rui Pires", "link": "https://stackoverflow.com/users/4729369/rui-pires"}, "edited": false, "score": 0, "creation_date": 1464848592, "post_id": 37580003, "comment_id": 62654218, "body": "I know its a bit complex, it has made for excellent learning material so far. I am also considering just dropping support for shared builds on visual studio, but that feels like giving up."}, {"owner": {"reputation": 571, "user_id": 2302414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUa6f.jpg?s=128&g=1", "display_name": "lasote", "link": "https://stackoverflow.com/users/2302414/lasote"}, "edited": false, "score": 0, "creation_date": 1464851290, "post_id": 37580003, "comment_id": 62655647, "body": "Yeah, I understand you, having a whole package with all settings combinations gives you a lot of satisfaction :) But no one can use this library as a DLL with or without conan, and just the static packages in conan makes a GREAT improvement! Moreover, in my experience often developers prefers to embed the static library in his shared library or just link against that. By the way, the &quot;fPIC&quot; option can allow embeding the static library in a shared library, you can see an example here: <a href=\"https://github.com/lasote/conan-jansson\" rel=\"nofollow noreferrer\">github.com/lasote/conan-jansson</a> with autotools, you can also use it with CMake setting CMAKE_CXX_FLAGS"}], "owner": {"reputation": 33, "user_id": 4729369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q99uy.jpg?s=128&g=1", "display_name": "Rui Pires", "link": "https://stackoverflow.com/users/4729369/rui-pires"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464821224, "creation_date": 1464821224, "question_id": 37580003, "link": "https://stackoverflow.com/questions/37580003/how-to-wrap-an-external-library-in-a-conan-package-adding-support-for-building", "title": "how to wrap an external library in a conan package, adding support for building as a shared library", "body": "<p>I am attempting to wrap Google's Gumbo parser as a Conan package.\nI have mostly succeed supporting Linux Mac and Windows, but I am having some issues creating (and consuming) it as a shared library in Windows (.dll + .lib).</p>\n\n<p>My current progress is <a href=\"https://github.com/ruipires/conan-gumbo\" rel=\"nofollow\">here</a>.\nI have decided to bypass Gumbo's autoconf build system a provide a CMakeLists.txt that I copy when fetching the sources. This way I hoped to be able to also fully support Windows.</p>\n\n<p>I am not very familiar with Visual C++, but from what I understand Visual C++ is different from other compilers in that it does not export symbols by default, where Gcc and Clang export everything.</p>\n\n<p>This is causing my Conan package to fail its build in some scenarios, because in shared mode it is just generating a .dll (and no corresponding .lib).</p>\n\n<p>Tried using CMake's GENERATE_EXPORT_HEADER module, but it did little to help, since then I'd have to actually use the macros it generated in the methods that should be exported. But I'm just trying to wrap the library without having to fork and adapt it.</p>\n\n<p>Another option would be to use a <a href=\"https://msdn.microsoft.com/en-us/library/0b9xe492.aspx\" rel=\"nofollow\">.def file</a>. This might work in this case (not that many symbols to export), but it would not be very helpful to me (harder to test if I actually exported everything I should have, harder to maintain, not very helpful for solving the same issue in other situations with far more symbols to export).</p>\n\n<p>Is there a recommended way of doing this?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 7, "last_activity_date": 1464821035, "creation_date": 1464821035, "answer_id": 37579981, "question_id": 37579916, "link": "https://stackoverflow.com/questions/37579916/intermediate-calculations-inside-initialization-list/37579981#37579981", "title": "Intermediate calculations inside initialization list", "body": "<p>Typically, delegating constructors offer a simple solution to this type of problem. In this case you'll have to introduce some way to distinguish between the two constructors:</p>\n\n<pre><code>private:\n  // the int param is unused\n  Foo(double fc, int) : a(g(fc)), b(h(fc)) {}\n\npublic:\n  Foo(double c) : Foo(f(c), 0) {}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user674155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37579981, "answer_count": 1, "score": 3, "last_activity_date": 1464821035, "creation_date": 1464820634, "question_id": 37579916, "link": "https://stackoverflow.com/questions/37579916/intermediate-calculations-inside-initialization-list", "title": "Intermediate calculations inside initialization list", "body": "<p>I have something like</p>\n\n<pre><code>struct Foo {\n    const double a;\n    const double b;\n    Foo(double c);\n}\n\nFoo::Foo(double c) {\n    double tmp = f(c);\n    a = g(tmp);\n    b = h(tmp);\n}\n</code></pre>\n\n<p>where <code>f,g,h</code> are functions implemented elsewhere. This gives the expected \"uninitialized const member\" error.</p>\n\n<p>I could fix it with</p>\n\n<pre><code>Foo::Foo(double c): a (g(f(c))), b (h(f(c))) {}\n</code></pre>\n\n<p>but <code>f</code> is an expensive function and I wouldn't like to run it twice.</p>\n\n<p>My question is, how can I solve this problem without running <code>f</code> twice or making <code>tmp</code> a permanent member of <code>Foo</code>?</p>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1464821516, "post_id": 37579850, "comment_id": 62646973, "body": "Related: <a href=\"http://stackoverflow.com/questions/2505328/calling-class-method-through-null-class-pointer\">Calling class method through NULL class pointer</a>"}, {"owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464821795, "post_id": 37579850, "comment_id": 62647067, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That&#39;s even more interesting!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464821897, "post_id": 37579850, "comment_id": 62647108, "body": "It&#39;s merely the same regarding the outcome :-P ..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464824565, "post_id": 37579850, "comment_id": 62647863, "body": "The cast should give a diagnostic"}, {"owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464824737, "post_id": 37579850, "comment_id": 62647901, "body": "@M.M I was expecting an error when I faced it, but at least <a href=\"http://ideone.com/FokQed\" rel=\"nofollow noreferrer\">some compilers</a> don&#39;t complain."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464824758, "post_id": 37579850, "comment_id": 62647911, "body": "@EissaN. ideone suppresses a lot of error messages. Use an actual compiler"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1464826590, "post_id": 37579850, "comment_id": 62648407, "body": "You should never rely on undefined behavior... On the other hand, an undefined behavior by the standard might not necessarily mean that the behavior is not defined by the compiler or platform (for example, COM virtual table format under Windows is well defined). Also the actual behavior in such case might depends on many factors like declaration modifiers or inheritance."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464827704, "post_id": 37579850, "comment_id": 62648661, "body": "@EissaN. Interestingly <a href=\"http://stackoverflow.com/questions/37580179/getting-virtual-table-pointer-c\">related Q&amp;A</a> I also answered."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464827831, "post_id": 37579850, "comment_id": 62648683, "body": "@EissaN. <i>&quot;I was expecting an error when I faced it&quot;</i> No, not all compilers really warn you or issue an error message if you call UB. Especially not in conjunction with <code>reinterpret_cast&lt;&gt;()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1464827014, "post_id": 37579879, "comment_id": 62648500, "body": "The fact that it could crash might depend on the calling convention as the incorrect cast might cause &quot;this&quot; to not be pushed on the stack but poped out anyway or it could maybe cause registers conflicts depending on what is assumed for a member call vs a free function call."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1464830215, "post_id": 37579879, "comment_id": 62649169, "body": "@Phil1970 You&#39;re assuming the compiler does the &quot;reasonable&quot; thing in undefined behavior."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1464830653, "post_id": 37579879, "comment_id": 62649259, "body": "<a href=\"http://stackoverflow.com/questions/36893251/why-does-the-enhanced-gcc-6-optimizer-break-practical-c-code\">Didn&#39;t we just discuss something like this a month ago?</a>"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 5, "last_activity_date": 1464829707, "last_edit_date": 1464829707, "creation_date": 1464820452, "answer_id": 37579879, "question_id": 37579850, "link": "https://stackoverflow.com/questions/37579850/calling-non-static-member-function-without-instantiation-using-reinterpret-cast/37579879#37579879", "title": "calling non-static member function without instantiation using `reinterpret_cast`", "body": "<blockquote>\n  <p>Is such a conclusion correct? How can this behavior be justified?</p>\n</blockquote>\n\n<p><strong>It's undefined behavior.</strong></p>\n\n<p>Pretty useless to ask for how it should <em>specifically behave</em>. Pick one or more from the list:</p>\n\n<ul>\n<li><sup>2)</sup>Schroedingers cat is always found dead when you open the chest<sup>1</sup></li>\n<li>Your fridge explodes</li>\n<li>You see the behavior you get</li>\n<li>Little demons are flying out from your nostrils</li>\n<li><sup>1)</sup>You get time warped back to the point, when you put the living cat into the chest<sup>2</sup></li>\n<li>...</li>\n<li>All of the above happens simultaneously </li>\n</ul>\n\n<hr>\n\n<blockquote>\n<pre><code>void f() { cout &lt;&lt; \"Hello World!\"; }  \n</code></pre>\n</blockquote>\n\n<p>Well, the fact that your code doesn't rely on any member variable data makes it likely, that any decent implementation works without <em>\"crashing\"</em>.</p>\n\n<p>Though, it's simply UB to call a class member function without a valid class instance, as mentioned above.<br>\nSo you can't predict what happens, or should rely on your observations.</p>\n"}], "owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464829707, "creation_date": 1464820335, "question_id": 37579850, "link": "https://stackoverflow.com/questions/37579850/calling-non-static-member-function-without-instantiation-using-reinterpret-cast", "title": "calling non-static member function without instantiation using `reinterpret_cast`", "body": "<p>As it's shown in the following code, I can call a non-static member function <code>A::f</code> without instantiating an object of the class. This is only possible when the function is not bound to any other member. For example, I cannot call <code>A::g</code> in a similar fashion. </p>\n\n<p>It seems to me that the call to <code>A::f</code> as shown in the code below behaves like calling a static member function. Is such a conclusion correct? How can this behavior be justified?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct A {\n    void f() { cout &lt;&lt; \"Hello World!\"; }    \n    void g() { cout &lt;&lt; i; } \n    int i = 10;\n};\n\nint main() {\n    auto fPtr = reinterpret_cast&lt;void(*)()&gt;(&amp;A::f);\n    (*fPtr)(); // OK\n\n//  auto gPtr = reinterpret_cast&lt;void(*)()&gt;(&amp;A::g); \n//  (*gPtr)(); // Error!\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "stl", "std"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464819189, "post_id": 37579616, "comment_id": 62646160, "body": "A loop, <code>std::find_if()</code> and a lambda?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1464819266, "post_id": 37579616, "comment_id": 62646186, "body": "How about <code>std::mismatch</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1464819493, "post_id": 37579616, "comment_id": 62646264, "body": "<code>std::set_difference</code>?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 3, "creation_date": 1464819513, "post_id": 37579616, "comment_id": 62646278, "body": "Not sure why this has been downvoted; it&#39;s a clear, reasonable and useful question."}, {"owner": {"reputation": 2339, "user_id": 4979733, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-x2WgsC4Euv8/AAAAAAAAAAI/AAAAAAAAAAA/JGqytYIG2kI/photo.jpg?sz=128", "display_name": "user4979733", "link": "https://stackoverflow.com/users/4979733/user4979733"}, "edited": false, "score": 0, "creation_date": 1464819812, "post_id": 37579616, "comment_id": 62646397, "body": "Thanks. I looked at docs of <code>std::mismatch</code>. That would only work because my vector is sorted right? Is my understanding correct? <code>std::set_difference</code> should work well as it takes two sorted ranges. Didn&#39;t realize you didn&#39;t have to give 2 set containers."}], "answers": [{"comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1464820369, "post_id": 37579770, "comment_id": 62646578, "body": "That&#39;s O(n log m), but the other options suggested are O(n + m), which is better."}, {"owner": {"reputation": 154, "user_id": 6411310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be6814e647e760c07377ee0a7225765?s=128&d=identicon&r=PG&f=1", "display_name": "lllllllllll", "link": "https://stackoverflow.com/users/6411310/lllllllllll"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1464820664, "post_id": 37579770, "comment_id": 62646683, "body": "Can we assume s is std::unordered_set? Then, it&#39;s O(n)"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1464820744, "post_id": 37579770, "comment_id": 62646709, "body": "True, although OP specified <code>set</code>."}], "tags": [], "owner": {"reputation": 154, "user_id": 6411310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be6814e647e760c07377ee0a7225765?s=128&d=identicon&r=PG&f=1", "display_name": "lllllllllll", "link": "https://stackoverflow.com/users/6411310/lllllllllll"}, "is_accepted": false, "score": 2, "last_activity_date": 1465514284, "last_edit_date": 1465514284, "creation_date": 1464819893, "answer_id": 37579770, "question_id": 37579616, "link": "https://stackoverflow.com/questions/37579616/c-find-any-element-from-container1-not-in-container2/37579770#37579770", "title": "C++: Find any element from container1 not in container2", "body": "<p>I think you are looking for <code>std::set::count</code> or <code>std::unordered_set::count</code>:</p>\n\n<pre><code>if( v.size() &gt; s.size() )\n{\n    // since v has unique values\n    // v is not subset of s\n    // if you need to find a first element of v not in s\n    // you need to run the loop below anyway\n}\nfor( auto i : v )\n{\n    if( !s.count( i ))\n    {\n        // i not in s\n    }\n}\n</code></pre>\n\n<p>If you need all elements of v not in s, just use <code>std::set_difference</code></p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1464896031, "last_edit_date": 1464896031, "creation_date": 1464820191, "answer_id": 37579829, "question_id": 37579616, "link": "https://stackoverflow.com/questions/37579616/c-find-any-element-from-container1-not-in-container2/37579829#37579829", "title": "C++: Find any element from container1 not in container2", "body": "<p>The <code>std::set&lt;int&gt;</code> will be ordered. If the <code>std::vector&lt;int&gt;</code> is guaranteed to be ordered and contain unique values, you can iterate over both of them and compare the values of the items.</p>\n\n<pre><code>std::set&lt;int&gt; s = {...};\nstd::vector&lt;int&gt; v = {...};\n\n// Default answer. If v.size() &gt; s.size(), the answer is\n// definitely false. Otherwise, assume the answer to be true.\nbool ans = ( v.size() &lt;= s.size() );\n\nauto si = s.begin();\nauto vi = v.begin();\n\n// We need to check for si != s.end()\nfor ( ; ans == true &amp;&amp; vi != v.end() &amp;&amp; si != s.end(); ++si )\n{\n    if ( *si == *vi ) ++vi;\n    else if ( *si &gt; *vi ) ans = false;\n}\nif ( vi != v.end() ) ans = false;\n// ...\nreturn ans;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 9, "last_activity_date": 1464820366, "creation_date": 1464820366, "answer_id": 37579857, "question_id": 37579616, "link": "https://stackoverflow.com/questions/37579616/c-find-any-element-from-container1-not-in-container2/37579857#37579857", "title": "C++: Find any element from container1 not in container2", "body": "<p>What's about <a href=\"http://en.cppreference.com/w/cpp/algorithm/includes\">std::includes</a> algorithm?</p>\n\n<p>Here's a short usage example:</p>\n\n<pre><code>vector&lt;int&gt; v1 { 1, 2, 4, 8 };\nvector&lt;int&gt; v2 { 1, 2, 3, 8 };\nset&lt;int&gt; s { 0, 1, 2, 4, 8, 16 };\ncout &lt;&lt; includes(s.begin(), s.end(), v1.begin(), v1.end()) &lt;&lt; endl;\ncout &lt;&lt; includes(s.begin(), s.end(), v2.begin(), v2.end()) &lt;&lt; endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "is_accepted": false, "score": 0, "last_activity_date": 1464824304, "creation_date": 1464824304, "answer_id": 37580466, "question_id": 37579616, "link": "https://stackoverflow.com/questions/37579616/c-find-any-element-from-container1-not-in-container2/37580466#37580466", "title": "C++: Find any element from container1 not in container2", "body": "<p>O(n) solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;vector&gt;\n\nbool incCase(std::set&lt;int&gt; &amp;s, std::vector&lt;int&gt; &amp;v)\n{\n    if( v.size() &gt; s.size())\n        return false;\n\n    auto si = s.begin();\n\n    for(int&amp; vv : v)\n    {\n        for(;;si++)\n        {\n            if(si==s.end() || *si&gt;vv)\n                return false;\n            if(*si==vv)\n            {\n                si++;\n                break;\n            }\n        }\n    }\n\n    return true;\n}\n\nint main()\n{\n    std::set&lt;int&gt; s { 0, 1, 2, 4, 8, 16 };\n    std::vector&lt; std::vector&lt;int&gt; &gt; vv { \n        { 0, 1, 2, 4, 8, 16 },\n        { 0, 2 },\n        { 4, 16 },\n        { 2, 8, },\n        { 4},\n        { 1, 4, 16 },\n        { 0, 2, 8},\n        { },\n        { -1, 1, 2, 4, 8, 16 },\n        { 0, 1, 2, 4, 8, 32 },\n        { 0, 2, 3 },\n        { 4, 5, 16 },\n        { 3, 8, },\n        { 5},\n        { 1, 5, 16 },\n        { 0, 3, 8},\n    };\n\n    int i = 1;\n    for(auto &amp;v : vv)\n    {\n        std::cout&lt;&lt; i++ &lt;&lt; (incCase(s,v)?\" = True\":\" = False\") &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2339, "user_id": 4979733, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-x2WgsC4Euv8/AAAAAAAAAAI/AAAAAAAAAAA/JGqytYIG2kI/photo.jpg?sz=128", "display_name": "user4979733", "link": "https://stackoverflow.com/users/4979733/user4979733"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 37579857, "answer_count": 4, "score": 9, "last_activity_date": 1477462172, "creation_date": 1464819062, "last_edit_date": 1477462172, "question_id": 37579616, "link": "https://stackoverflow.com/questions/37579616/c-find-any-element-from-container1-not-in-container2", "title": "C++: Find any element from container1 not in container2", "body": "<p>I have a <code>std::set&lt;int&gt;</code> (s) and a <code>std::vector&lt;int&gt;</code> (v). The vector is guaranteed to be sorted/unique. I want to know if all elements of v are in s (or just stop at the first element of v not in s). I could convert v into a set and do == test, but is there another way without changing the container type?</p>\n"}, {"tags": ["c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 3813, "user_id": 6290553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvOsJ.jpg?s=128&g=1", "display_name": "Raktim Biswas", "link": "https://stackoverflow.com/users/6290553/raktim-biswas"}, "edited": false, "score": 0, "creation_date": 1464819619, "post_id": 37579615, "comment_id": 62646322, "body": "clean your solution and then rebuild it again...not sure what is causing that though..."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 5032094, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/dbd538f05550a2432577671ab7a41549?s=128&d=identicon&r=PG&f=1", "display_name": "Alex5775", "link": "https://stackoverflow.com/users/5032094/alex5775"}, "is_accepted": false, "score": 0, "last_activity_date": 1464827131, "creation_date": 1464827131, "answer_id": 37580834, "question_id": 37579615, "link": "https://stackoverflow.com/questions/37579615/visual-c-2012-fatalexecutionengineerror/37580834#37580834", "title": "Visual C++ 2012 FatalExecutionEngineError", "body": "<p>I managed to fix it. I hadn't included Windows.h before and didn't have the correct parameters. I also had it's return type as void even though it apparently requires int.</p>\n"}], "owner": {"reputation": 15, "user_id": 5032094, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/dbd538f05550a2432577671ab7a41549?s=128&d=identicon&r=PG&f=1", "display_name": "Alex5775", "link": "https://stackoverflow.com/users/5032094/alex5775"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464827131, "creation_date": 1464819061, "question_id": 37579615, "link": "https://stackoverflow.com/questions/37579615/visual-c-2012-fatalexecutionengineerror", "title": "Visual C++ 2012 FatalExecutionEngineError", "body": "<p>I'm making a program in Visual Studio 2012 (I'm using 2012 because 2015 didn't seem to have the visual aspect for C++). I've been getting a FatalExecutionEngineError in the program when I close it specifically when I'm using 'WinMain' as the entry point instead of just 'main'. I tried running it without any code at all and got the same error. Does anyone have a suggestion for fixing this problem?</p>\n\n<p>Note: My OS is Windows 7 Ultimate</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 9, "user_id": 6411812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b8d2d2bcaa7c1d71c37d7fb3763492?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz", "link": "https://stackoverflow.com/users/6411812/fritz"}, "edited": false, "score": 0, "creation_date": 1464817595, "post_id": 37579304, "comment_id": 62645555, "body": "Sorry, the call to LoadImage should have be ... 0.0. not just 0,"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1464846057, "post_id": 37579304, "comment_id": 62653159, "body": "Use a good IDE like Visual Studio, it should stop on these typing errors and give you the right information."}, {"owner": {"reputation": 9, "user_id": 6411812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b8d2d2bcaa7c1d71c37d7fb3763492?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz", "link": "https://stackoverflow.com/users/6411812/fritz"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1464967353, "post_id": 37579304, "comment_id": 62718807, "body": "Thanks for the typing advice but I was looking for help on the LoadImage problem."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1464975870, "post_id": 37579304, "comment_id": 62723592, "body": "It&#39;s not clear what you are asking. If the typing error solves the problem then delete the question, or you may add an answer yourself and accept it. If the problem persists then edit the question and show updated information."}, {"owner": {"reputation": 9, "user_id": 6411812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b8d2d2bcaa7c1d71c37d7fb3763492?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz", "link": "https://stackoverflow.com/users/6411812/fritz"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1465067159, "post_id": 37579304, "comment_id": 62749711, "body": "Sorry, I thought the question was clear but I will restate: LoadImage returned null indicated and error, and subsequent GetLastError also returned null which seems contradictory."}, {"owner": {"reputation": 9, "user_id": 6411812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b8d2d2bcaa7c1d71c37d7fb3763492?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz", "link": "https://stackoverflow.com/users/6411812/fritz"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1465067258, "post_id": 37579304, "comment_id": 62749744, "body": "The typo has nothing to do with it and only occurred when transferring the code to this post. Thanks"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1465067752, "post_id": 37579304, "comment_id": 62749904, "body": "I can&#39;t reproduce this behavior. What compiler are you using? Also use a full path name."}], "owner": {"reputation": 9, "user_id": 6411812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b8d2d2bcaa7c1d71c37d7fb3763492?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz", "link": "https://stackoverflow.com/users/6411812/fritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1465067418, "creation_date": 1464817422, "last_edit_date": 1465067418, "question_id": 37579304, "link": "https://stackoverflow.com/questions/37579304/windows-loadimage-function-fails-but-gelasterror-function-also-returns-null", "title": "Windows loadimage function fails but gelasterror function also returns null", "body": "<p>How can LoadImage return null but GetLastError also returns null - doesn't make sense. Here is a simple program that demonstrates the problem:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\nvoid main() {\nint E;\nHICON  ICON;\n\nICON = (HICON)LoadImage(NULL, \"\\\\TEMP\\\\ICONA.ICO\", IMAGE_ICON,0,0,LR_LOADFROMFILE);\nE = GetLastError();\nprintf(\"result: %X %d \\n\",ICON, E );\nreturn; }\n</code></pre>\n\n<p>When I compile, link and run I get:</p>\n\n<blockquote>\n  <p><code>result: 0 0</code></p>\n</blockquote>\n"}, {"tags": ["c++", "windows", "locale", "wstring"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1464819175, "post_id": 37579201, "comment_id": 62646155, "body": "You are using a Unicode string, encoded in utf-16 at runtime.  It does not depend on locale, it is Unicode.  Anything you get from the winapi will be Unicode as well with UNICODE #defined.  String literals with non-ASCII characters do depend on your text editor saving the .cpp file in a Unicode encoding that the compiler can recognize, use utf-8 with a BOM so it doesn&#39;t turn into mojibake when your source code travels elsewhere."}, {"owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1464820504, "post_id": 37579201, "comment_id": 62646625, "body": "@HansPassant Thank you for the tip! But I need only small range of ASCII symbols (a-zA-Z, space, dot). I don&#39;t have big experience with Windows/Unicode stuff therefore I asked to be 100% sure. Seems that I&#39;m  right and representation of these symbols do not depends on anything."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1464824161, "post_id": 37579201, "comment_id": 62647749, "body": "It might help to forget about ASCII. In the Win32 API, you are using Unicode/UTF-16. Almost nobody would use the whole Unicode character set so almost every program will use a subset of Unicode. It doesn&#39;t matter if the subset you use is also a subset of a character set you aren&#39;t using."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1464838205, "post_id": 37579201, "comment_id": 62650829, "body": "@TomBlodget: the source code probably isn&#39;t UTF-16, so I think ASCII is still relevant here."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1464841356, "post_id": 37579201, "comment_id": 62651566, "body": "@HarryJohnston Whatever it is, it&#39;s less likely ASCII than UTF-16. The user saves the file in one specific encoding and the compiler has to know what that is. My VS2015 seems to default to Windows-1252 when creating and saving, and lets the compiler default by what is likely the same convention. Not very controlled, which leads to Hans&#39;s recommendation."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1464842607, "post_id": 37579201, "comment_id": 62651966, "body": "@TomBlodget: I think <i>most</i> ASCII characters are common to all Windows locales, aren&#39;t they?  I know there are a few exceptions, but dammit, you shouldn&#39;t have to worry about what your source code encoding is.  If you have a constant string with anything outside of the safe character set - which is certainly a subset of ASCII - the best option IMO is to use an escape sequence."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1464842643, "post_id": 37579201, "comment_id": 62651974, "body": "@TomBlodget: <a href=\"https://msdn.microsoft.com/en-us/library/bt0y4awe.aspx\" rel=\"nofollow noreferrer\">this is interesting</a>: &quot;The source character set of C source programs is contained within the 7-bit ASCII character set&quot;.  I don&#39;t think it&#39;s actually true (?) but it&#39;s interesting. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "edited": false, "score": 0, "creation_date": 1464819424, "post_id": 37579463, "comment_id": 62646240, "body": "Thank you!!! I need only narrow range of ASCII symbols - characters a-zA-Z and several special symbols like space, dot etc. Now I am more confident ))"}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": true, "score": 1, "last_activity_date": 1464819431, "last_edit_date": 1495542693, "creation_date": 1464818222, "answer_id": 37579463, "question_id": 37579201, "link": "https://stackoverflow.com/questions/37579201/byte-representation-of-ascii-symbols-in-stdwstring-with-different-locales/37579463#37579463", "title": "byte representation of ASCII symbols in std::wstring with different locales", "body": "<p>In general, for characters (not escape sequence) <code>wchar_t</code> and <code>wstring</code> have to use the same codes as ASCII (just extended to 2 bytes).\nBut I am not sure about codes less then 32 and of course codes greater than 128 can has different meaning (as in ASCII) in the moment of output, so to avoid problem on output set particular locale explicitly, e.g.:</p>\n\n<pre><code>  locale(\"en_US.UTF-8\")\n</code></pre>\n\n<p>for standard output</p>\n\n<pre><code>  wcout.imbue(locale(\"en_US.UTF-8\")); \n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I found one more suggestion about adding </p>\n\n<pre><code>  std::ios_base::sync_with_stdio(false);\n</code></pre>\n\n<p>before setting localization with <code>imbue</code></p>\n\n<p>see details on <a href=\"https://stackoverflow.com/questions/26387054/how-can-i-use-stdimbue-to-set-the-locale-for-stdwcout\">How can I use std::imbue to set the locale for std::wcout?</a></p>\n"}, {"tags": [], "owner": {"reputation": 330, "user_id": 864520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20bc2171855bb87ec0a19e71668c61ce?s=128&d=identicon&r=PG", "display_name": "Jim Beveridge", "link": "https://stackoverflow.com/users/864520/jim-beveridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1464819642, "last_edit_date": 1495542241, "creation_date": 1464819642, "answer_id": 37579716, "question_id": 37579201, "link": "https://stackoverflow.com/questions/37579201/byte-representation-of-ascii-symbols-in-stdwstring-with-different-locales/37579716#37579716", "title": "byte representation of ASCII symbols in std::wstring with different locales", "body": "<p>The byte representation of the literal string does not depend on the environment. It's hardcoded to the binary data from the editor. However, the way that binary data is interpreted depends on the current code page, so you can end up with different results when converted at runtime to a wide string (as opposed to defining the string using a leading L, which means that the wide characters will be set at compile time.)</p>\n\n<p>To be safe, use <code>setlocale()</code> to guarantee the encoding used for conversion. Then you don't have to worry about the environment.</p>\n\n<p>This might help: \"By definition, the ASCII character set is a subset of all multibyte-character sets. In many multibyte character sets, each character in the range 0x00 \u2013 0x7F is identical to the character that has the same value in the ASCII character set. For example, in both ASCII and MBCS character strings, the 1-byte NULL character ('\\0') has value 0x00 and indicates the terminating null character.\"</p>\n\n<p>From:\n<a href=\"https://stackoverflow.com/questions/17742379/visual-studio-character-sets-not-set-vs-multi-byte-character-set\">Visual Studio Character Sets &#39;Not set&#39; vs &#39;Multi byte character set&#39;</a></p>\n"}], "owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 1, "accepted_answer_id": 37579463, "answer_count": 2, "score": 0, "last_activity_date": 1464819642, "creation_date": 1464816965, "last_edit_date": 1464818218, "question_id": 37579201, "link": "https://stackoverflow.com/questions/37579201/byte-representation-of-ascii-symbols-in-stdwstring-with-different-locales", "title": "byte representation of ASCII symbols in std::wstring with different locales", "body": "<p>Windows C++ app. We have a string that contain only ASCII symbols: <code>std::wstring(L\"abcdeABCDE ... any other ASCII symbol\")</code>. Note that this is <code>std::wstring</code> that uses <code>wchar_t</code>.</p>\n\n<p>Question - do byte representation of this string depends on the localization settings, or something else? Can I assume that if I receive such string (for example, from WindowsAPI) while app is running its bytes will be the same as on the my PC?</p>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt"], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1464817679, "last_edit_date": 1495541348, "creation_date": 1464816913, "answer_id": 37579187, "question_id": 37579121, "link": "https://stackoverflow.com/questions/37579121/eclipse-implement-method-function-will-not-work-with-a-template-class/37579187#37579187", "title": "Eclipse &quot;implement method&quot; function will not work with a template class", "body": "<blockquote>\n  <p>when I tried to use this implement method function I find that eclipse tells me that there \"no implement file found for one or more methods\" and instead creates inline function in my header file (like i really need that!). Is this a bug in eclipse or is there some underlying c++ rule that cannot be avoided?</p>\n</blockquote>\n\n<p>No, it's not a bug, but what you actually needed (as you noticed).</p>\n\n<p>It's finally a c++ rule that <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">template definitions must be seen from the header file</a>.</p>\n\n<p>So there's no <em>source file</em> that can be deduced by Eclipse for a template class.</p>\n\n<hr>\n\n<p>You can though setup file types for <code>.tcc</code> or <code>.icc</code> files as c++ source, and include these from your template class header (I'm not sure if Eclipse is clever enough to place auto implementations there ATM, but I'm pretty sure the usual switching between source and header works with such setup).</p>\n"}], "owner": {"reputation": 85, "user_id": 4730464, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/514f8c16d66af22eaac29d3cd17e1f27?s=128&d=identicon&r=PG&f=1", "display_name": "spstephens", "link": "https://stackoverflow.com/users/4730464/spstephens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464817679, "creation_date": 1464816652, "question_id": 37579121, "link": "https://stackoverflow.com/questions/37579121/eclipse-implement-method-function-will-not-work-with-a-template-class", "title": "Eclipse &quot;implement method&quot; function will not work with a template class", "body": "<p>I have been using eclipse for quite some time, but I have only recently used it for c++ programming. It was bunch of fun figuring out how to actual compile c++ on eclipse on my system, but I have figured that out with 100% success, but now I have stumbled upon another annoying issue. I have seen that If i create a class in a header file I can use the nifty tool under the source menu called \"implement method\" that will take my function declarations from my header file and place them in the source file with a body that is ready to code. </p>\n\n<p>Well today I was messing around with some new code and I needed a template class for what I was working on, but behold when I tried to use this implement method function I find that eclipse tells me that there \"no implement file found for one or more methods\" and instead creates inline function in my header file (like i really need that!). Is this a bug in eclipse or is there some underlying c++ rule that cannot be avoided? I just dont seem to understand why having my class declration as <code>class foo{};</code> would work just fine, but having <code>template &lt;typename T&gt; class foo{};</code> causes this error. I know that this is the only issue becuase if I declare a normal class with just one public function it works, but if i take the same class and declare it as template class I find the error occurs again.</p>\n\n<p>tldr:</p>\n\n<p>eclipse \"implement method\" will place declared fucntion in header file into source file ready to code if class is declared as <code>class foo{};</code> but fails if class is declared as <code>template &lt;typename T&gt; class foo{};</code></p>\n"}, {"tags": ["c++", "ncurses", "pdcurses"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464817822, "post_id": 37578958, "comment_id": 62645638, "body": "this may be of interest to you - <a href=\"http://meta.stackexchange.com/questions/10811/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackexchange.com/questions/10811/&hellip;</a>"}, {"owner": {"reputation": 1007, "user_id": 6090706, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NbSpn.png?s=128&g=1", "display_name": "Kostas Andrianos", "link": "https://stackoverflow.com/users/6090706/kostas-andrianos"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464818152, "post_id": 37578958, "comment_id": 62645766, "body": "That was actually pretty helpful."}], "answers": [{"comments": [{"owner": {"reputation": 1007, "user_id": 6090706, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NbSpn.png?s=128&g=1", "display_name": "Kostas Andrianos", "link": "https://stackoverflow.com/users/6090706/kostas-andrianos"}, "edited": false, "score": 0, "creation_date": 1464864175, "post_id": 37580792, "comment_id": 62664118, "body": "This seems like a good way to do it but... I need to use ncurses so, even if I do it like that it won&#39;t be accepted:/"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1007, "user_id": 6090706, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NbSpn.png?s=128&g=1", "display_name": "Kostas Andrianos", "link": "https://stackoverflow.com/users/6090706/kostas-andrianos"}, "edited": false, "score": 0, "creation_date": 1464883291, "post_id": 37580792, "comment_id": 62678659, "body": "This just provides the menu system. All the cin-cout is for example purposes and is easily replaced by whatever you want as a front end--curses, ncurses, a GUI, an army of murderous Care Bears...."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1464826753, "creation_date": 1464826753, "answer_id": 37580792, "question_id": 37578958, "link": "https://stackoverflow.com/questions/37578958/c-code-reduction-for-identical-submenus/37580792#37580792", "title": "C++ code reduction for identical submenus", "body": "<p>A simple menu-driven program. This is based on using <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow\"><code>std::map</code></a> instead of conditional logic. This map stores a list of <code>menuitem</code> structures that define what the menu looks like and what each option does. </p>\n\n<p>This is best explained as we work through the code, so let's dive in!</p>\n\n<pre><code>// headers for everything used in this example\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;functional&gt;\n#include &lt;cctype&gt;\n\n// function to perform menu option B sub option 1\nvoid optionB1()\n{\n    std::cout &lt;&lt; \"perfoming B1\" &lt;&lt; std::endl;\n}\n\n// function to perform menu option B sub option 2\nvoid optionB2()\n{\n    std::cout &lt;&lt; \"perfoming B2\" &lt;&lt; std::endl;\n}\n\n// function to perform menu option A\nvoid optionA()\n{\n    std::cout &lt;&lt; \"perfoming A\" &lt;&lt; std::endl;\n}\n\n// defines a menu item. Good naming can often save the need to comment\nstruct menuitem \n{\n    std::function&lt;void()&gt; doIt; // function to run if option chosen\n    std::string description; // pretty message describing option\n};\n\n// draw menu and wait for the user to select an option.\nvoid domenu(const std::map&lt;char, menuitem&gt; &amp; menu)\n{\n    while (true) // loop until user gives a good option. Or use a retry count. \n                 // You decide.\n    {\n        for (auto &amp;items : menu)\n        { // for all items in the menu, print out the item and it's description text\n          // for what first and second mean, read up on std::map and std::pair\n            std::cout &lt;&lt; items.first &lt;&lt; \") \" &lt;&lt; items.second.description &lt;&lt; std::endl;\n        }\n        char ch;\n        std::cin &gt;&gt; ch; // get the user's choice\n        // often you may want to eliminate one of the cases to reduce the amount \n        // of possible inputs you need to provide handling code for.\n        // the line below allows us to use the same code for input of A and a.\n        ch = std::tolower(ch); // convert input to lower case\n        try\n        {\n            menu.at(ch).doIt(); // call the function mapped to user's choice.\n                                // this may do produce something or it may\n                                // display another menu. It could end the wor--\n            return; // done.\n        }\n        catch (...)\n        { // print error message on unsupported input\n            std::cout &lt;&lt; \"Error. Invalid option!\" &lt;&lt; std::endl;\n        }\n    }\n}\n\n\n// the B menu\nstd::map&lt;char, menuitem&gt; bmenu\n{ // User input  doIt function      Description\n    {'1',       {optionB1,          \"Option B1\"}},\n    {'2',       {optionB2,          \"Option B2\"}}\n    // add more options here. Or don't. Up to you.\n};\n\n// the main menu\nstd::map&lt;char, menuitem&gt; mainmenu\n{ // User input  doIt function              Description\n    {'a',       {optionA,                   \"Option A\"}},\n    {'b',       {std::bind(domenu, bmenu),  \"Option B\"}}\n    // OK, so that last one was a bit weird. std::bind makes a function and\n    // specifies the arguments with which it will be called. This takes\n    // domenu binds it with bmenu so that std::function&lt;void()&gt; is\n    // satisfied. As far as the world is concerned, the bound function\n    // returns nothing and takes no parameters. Very complicated functions \n    // can be bound so long as the end result returns nothing and requires \n    // no parameters. \n    // what it's doing here is allowing us to call domenu to draw the B \n    // submenu, wait for valid input, and call the chosen function.\n};\n\n// good 'ol trusty main so we can test that the above code isn't utter BS.\nint main()\n{\n    while (true) // loop forever. Or use whatever exit logic is required.\n    {\n        domenu(mainmenu); // kick-start by calling do menu to run the main menu\n    }\n    return(0);\n}\n</code></pre>\n\n<p>This will keep the code down to a minimum. All of the duplicated code is reduced to the <code>domenu</code> function and a smurfload of code hidden from sight in the standard library and written by folks who likely have far more experience in getting this stuff right than you or I. Whenever possible, stand on the shoulders of giants.</p>\n\n<p><code>domenu</code> is driven by lists of options and execution instructions for the option. Want another option? Add an item to a list and possibly provide a new function to fulfill the obligations of that option.</p>\n\n<p>All you have to do is fill in the blanks.</p>\n"}], "owner": {"reputation": 1007, "user_id": 6090706, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NbSpn.png?s=128&g=1", "display_name": "Kostas Andrianos", "link": "https://stackoverflow.com/users/6090706/kostas-andrianos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1579163504, "creation_date": 1464815942, "last_edit_date": 1579163504, "question_id": 37578958, "link": "https://stackoverflow.com/questions/37578958/c-code-reduction-for-identical-submenus", "title": "C++ code reduction for identical submenus", "body": "<p>I am coding my way to the last project of the semester and I have a code duplication issue.\nI am using <code>ncurses</code> or <code>pdcurses</code> to make a menu to interact with the user.</p>\n\n<p>The problem: For each choice of the menu(Five in total) I need a submenu. The submenu's only difference from the main menu is, the array of <code>Items</code> to be printed, and the parameters that go into some functions, as a result of the <code>Items</code> array size. Since I need five submenus, I need five times the same code(six if you add the main menu).</p>\n\n<p>Could any of you help me make a function that does the same thing, which I'll then call six times to create my menu?</p>\n\n<p>Here's my code</p>\n\n<pre><code>void Menu(){\n    const char* Items[]={\n        \"[1]...New tax declaration\",\n        \"[2]...Modify tax declaration\",\n        \"[3]...Cancel tax declaration\",\n        \"[4]...Additional Information\",\n        \"[5]...Exit\"\n    };\n    int Cur=0;\n    int ch, i;\n    int flag=0;\n    do{\n        werase(wm);\n        mvwaddstr(wm, 2, 16, \"MENU\");\n        for(int i=0; i&lt;5;i++){\n            if(i==Cur)\n                wattr_on(wm, A_REVERSE, 0);\n            mvwaddstr(wm, 4+i, 4, Items[i]);\n            wattr_off(wm, A_REVERSE, 0);\n        }\n        mvwaddstr(wm, 14, 3, \"Choice: \");\n        wprintw(wm, \"%1d\", Cur+1);\n        wrefresh(wm);\n        ch=wgetch(wm);\n        switch(ch){\n            case '1':Cur=0;Sub2();break;\n            case '2':Cur=1;Sub1();break;\n            case '3':Cur=2;break;\n            case '4':Cur=3;break;\n            case '5':flag=1;break;\n            case KEY_UP:\n            case KEY_LEFT: Cur--; if (Cur&lt;0) Cur=4; break;\n            case KEY_DOWN:\n            case KEY_RIGHT: Cur++; if(Cur&gt;4) Cur=0; break;\n            case 27: flag=1; break;\n            case 32:\n            case 13:\n                switch (Cur){\n                    case 0:Sub2();break;\n                    case 1:Sub1();break;\n                    case 2:break;\n                    case 3:break;\n                    case 4:flag=1;break;\n                }\n        }\n    }while(!flag);\n}\n</code></pre>\n\n<p>Thank you.</p>\n\n<p>p.s The code is from a book. I have little experience with ncurses</p>\n"}, {"tags": ["c++", "graphics", "texture2d", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 4778266, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-baMHm1GmKzU/AAAAAAAAAAI/AAAAAAAAAvE/2yPBo7xnTkk/photo.jpg?sz=128", "display_name": "NULLPTR", "link": "https://stackoverflow.com/users/4778266/nullptr"}, "is_accepted": true, "score": 5, "last_activity_date": 1465145478, "creation_date": 1465145478, "answer_id": 37644433, "question_id": 37578939, "link": "https://stackoverflow.com/questions/37578939/how-to-read-data-from-a-utexture2d-in-c/37644433#37644433", "title": "How to read data from a UTexture2D in C++", "body": "<p>I figured that out. You have to get the UTexture2D's RHI texture reference first, and then use RHILockTexture2D to read it's data, and you have to do it in the RenderThread. The following code just an example:</p>\n\n<pre><code>FTexture2DResource* uTex2DRes = (FTexture2DResource*)(RealSenseDelegator-&gt;VideoTexturePixelDepth)-&gt;Resource;\nfloat* cpuDataPtr = (float*)RHILockTexture2D(\n        uTex2DRes-&gt;GetTexture2DRHI(),\n        0,\n        RLM_ReadOnly,\n        destStride,\n        false);\n\nfor (uint32 j = 0; j &lt; 480; j++) {\n    for (uint32 i = 0; i &lt; 640; i++) {\n        uint32 idx = j * 640 + i;\n\n        // TODO Read the pixel data right here\n\n    }\n}\nRHIUnlockTexture2D(uTex2DRes-&gt;GetTexture2DRHI(), 0, false);\n</code></pre>\n\n<p>To do this in the Render Thread, you have to use the Macro such as ENQUEUE_UNIQUE_RENDER_COMMAND_ONEPARAMETER // If you just one to pass one parameter to the render thread, use this one.+</p>\n"}], "owner": {"reputation": 183, "user_id": 4778266, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-baMHm1GmKzU/AAAAAAAAAAI/AAAAAAAAAvE/2yPBo7xnTkk/photo.jpg?sz=128", "display_name": "NULLPTR", "link": "https://stackoverflow.com/users/4778266/nullptr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6362, "favorite_count": 2, "accepted_answer_id": 37644433, "answer_count": 1, "score": 3, "last_activity_date": 1554099245, "creation_date": 1464815878, "last_edit_date": 1464842701, "question_id": 37578939, "link": "https://stackoverflow.com/questions/37578939/how-to-read-data-from-a-utexture2d-in-c", "title": "How to read data from a UTexture2D in C++", "body": "<p>I am trying to read the pixel data from a populated UTexture2D in an Unreal Engine C++ project. Before I post the question here, I tried to use the method described in this link: <a href=\"https://answers.unrealengine.com/questions/25594/accessing-pixel-values-of-texture2d.html\" rel=\"nofollow\">https://answers.unrealengine.com/questions/25594/accessing-pixel-values-of-texture2d.html</a>. However, it doesn't work for me. All pixel values I got from the texture are some garbage data.</p>\n\n<p>I just want to get the depth values from the SceneCapture2D and a post-processing material that contains SceneTexture: Depth node. I need the depth values available in C++ so that I can do further processing with OpenCV. In Directx11, staging texture can be used for CPU read, but in the unreal engine, I don't know how to create a 'staging texture' like Dx11 has. I can't get the correct pixel values from the current method which makes me think I may try to access a no-CPU-readable texture. </p>\n\n<p>Here is my experimental code for reading data back from an RGB UTexture2D. </p>\n\n<p>Initialize the RGB Texture:</p>\n\n<pre><code>VideoTextureColor= UTexture2D::CreateTransient(640, 480, PF_B8G8R8A8);\nVideoTextureColor-&gt;UpdateResource();\nVideoUpdateTextureRegionColor = new FUpdateTextureRegion2D(0, 0, 0, 0, 640, 480);\nColorRegionData = new FUpdateTextureRegionsData;\n\nPixelDepthData.Init(FColor(0, 0, 0, 255), 640 * 480);\n\n// Populate the texture with blue color\nfor (int i = 0; i &lt; 640; i++) {\n    for (int j = 0; j &lt; 480; j++) {\n        int idx = j * 640 + i;\n        PixelDepthData[idx].B = 255;\n        PixelDepthData[idx].G = 0;\n        PixelDepthData[idx].R = 0;\n        PixelDepthData[idx].A = 255;\n    }\n}\n\nUpdateTextureRegions(\n    VideoTextureColor,\n    (int32)0,\n    (uint32)1,\n    VideoUpdateTextureRegionColor,\n    (uint32)(4 * 640),\n    (uint32)4,\n    (uint8*)PixelDepthData.GetData(),\n    false,\n    ColorRegionData\n);\n</code></pre>\n\n<p>Then, update read its value back to the PixelDepthData (TArray type) array and update this texture with values storing in the PixelDepthData, which is its old value.</p>\n\n<pre><code>UpdateTextureRegions(\n    VideoTextureColor,\n    (int32)0,\n    (uint32)1,\n    VideoUpdateTextureRegionColor,\n    (uint32)(4 * 640),\n    (uint32)4,\n    (uint8*)PixelDepthData.GetData(),\n    false,\n    ColorRegionData\n);\n\nENQUEUE_UNIQUE_RENDER_COMMAND_ONEPARAMETER(\n    FRealSenseDelegator,\n    ARealSenseDelegator*, RealSenseDelegator, this,\n    {\n        FColor* tmpImageDataPtr = static_cast&lt;FColor*&gt;((RealSenseDelegator-&gt;VideoTextureColor)-&gt;PlatformData-&gt;Mips[0].BulkData.Lock(LOCK_READ_ONLY));\n        for (uint32 j = 0; j &lt; 480; j++) {\n            for (uint32 i = 0; i &lt; 640; i++) {\n                uint32 idx = j * 640 + i;\n                RealSenseDelegator-&gt;PixelDepthData[idx] = tmpImageDataPtr[idx];\n                RealSenseDelegator-&gt;PixelDepthData[idx].A = 255;\n            }\n        }\n        (RealSenseDelegator-&gt;VideoTextureColor)-&gt;PlatformData-&gt;Mips[0].BulkData.Unlock();\n    }\n);\n</code></pre>\n\n<p>All I got is a white color texture instead of a blue color texture in the visualization scene.</p>\n\n<p>Does anyone know how to read the data of the UTexture2D Object?</p>\n"}, {"tags": ["c++", "c", "arduino", "trigonometry"], "comments": [{"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 1, "creation_date": 1464818277, "post_id": 37578938, "comment_id": 62645809, "body": "It is not clear how microphones are oriented, where they are, why do you expect the voltages to be in this relation to the direction, e.t.c. elaborate please."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1464870394, "creation_date": 1464870394, "answer_id": 37591851, "question_id": 37578938, "link": "https://stackoverflow.com/questions/37578938/arduino-calculating-the-resultant-direction-of-the-magnitude-of-three-microphon/37591851#37591851", "title": "Arduino, Calculating the resultant direction of the magnitude of three microphones", "body": "<p>Well... I'm not sure but... if you write</p>\n\n<pre><code>//Mic2\nfloat x1 =volts[1]*cos(120.0/360 * 2*Pi);\nfloat y1 =volts[1]*sin(120.0/360 * 2*Pi);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>//Mic3\nfloat x2 =volts[2]*cos(240.0/360 * 2*Pi);\nfloat y2 = volts[2]*sin(240.0/360 * 2*Pi);\n</code></pre>\n\n<p>I suppose that your intention for Mic1 (<code>x0</code> and <code>y0</code>) was</p>\n\n<pre><code>//Mic1\nfloat x0 =volts[0]*cos(0.0/360 * 2*Pi);\nfloat y0 =volts[0]*sin(0.0/360 * 2*Pi);\n</code></pre>\n\n<p>that is</p>\n\n<pre><code>//Mic1\nfloat x0 =volts[0]*cos(0.0);\nfloat y0 =volts[0]*sin(0.0);\n</code></pre>\n\n<p>and, remembering that <code>cos(0.0)</code> is 1 ans <code>sin(0.0)</code> is 0,</p>\n\n<pre><code>//Mic1\nfloat x0 =volts[0];\nfloat y0 =0.0;\n</code></pre>\n\n<p>But in your code I see</p>\n\n<pre><code>//Mic1\nfloat x0 =0;\nfloat y0 =volts[0];\n</code></pre>\n\n<p>Briefly, I suspect you've switched <code>x0</code> with <code>y0</code>.</p>\n\n<p>p.s.: sorry for my bad English.</p>\n"}], "owner": {"reputation": 11, "user_id": 6264231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb8fa9c308f7197c4d3c747d194452d?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6264231/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "closed_date": 1465974957, "answer_count": 1, "score": 0, "last_activity_date": 1464870394, "creation_date": 1464815861, "question_id": 37578938, "link": "https://stackoverflow.com/questions/37578938/arduino-calculating-the-resultant-direction-of-the-magnitude-of-three-microphon", "closed_reason": "Needs details or clarity", "title": "Arduino, Calculating the resultant direction of the magnitude of three microphones", "body": "<p>I am trying to calculate the direction where theta is a range from 0 - 2 pi to indicate the direction of the resultant vector of three microphones placed at the 0 degree, 120, and 240 degree marks. All of the microphones are working but somehow I can't seem to get the correct degree values. Can someone look at my code?</p>\n\n<pre><code>void detDirection(){\n\n//Mic1\nfloat x0 =0;\nfloat y0 =volts[0];\n//Serial.println(x0);\n// Serial.println(y0);\n//Mic2\nfloat x1 =volts[1]*cos(120.0/360 * 2*Pi);\nfloat y1 =volts[1]*sin(120.0/360 * 2*Pi);\n// Serial.println(x1);\n//Serial.println(y1);\n//Mic3\nfloat x2 =volts[2]*cos(240.0/360 * 2*Pi);\nfloat y2 = volts[2]*sin(240.0/360 * 2*Pi);\n//Serial.println(x2);\n//Serial.println(y2);\n//Calculate resultant\nfloat sumX = x0 + x1 + x2;\nfloat sumY = y0 + y1 + y2;\n//Serial.println(sumX);\n//Serial.println(sumY);\nfloat resultant = pow(pow(sumX,2)+pow(sumY,2),0.5);\nfloat degree = atan2(sumY,sumX);\nfloat fixDegree= 0 ;\n//Fix degree\nif(!isNeg(sumX) &amp;&amp; !isNeg(sumY)){\n  fixDegree = degree;\n}\nelse if(isNeg(sumX) &amp;&amp; !isNeg(sumY)){\n  fixDegree = Pi - degree;\n}\nelse if(isNeg(sumX) &amp;&amp; isNeg(sumY)){\n  fixDegree = Pi+ degree;\n}\nelse if (!isNeg(sumX) &amp;&amp; isNeg(sumY)){\n  fixDegree = 2*Pi - degree;\n}\n\nString text = \"\";\ntext.concat(resultant);\ntext.concat(\" \");\ntext.concat(fixDegree);\ntext.concat(\" \");\n//Serial.println(text);  \n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "unity3d", "enumeration", "component-based"], "comments": [{"owner": {"reputation": 2304, "user_id": 4251829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2e4559d674d70d38f3bd5cdb9c3b39?s=128&d=identicon&r=PG&f=1", "display_name": "Gunnar B.", "link": "https://stackoverflow.com/users/4251829/gunnar-b"}, "edited": false, "score": 0, "creation_date": 1464821015, "post_id": 37578849, "comment_id": 62646807, "body": "If you have a look at what unity does you see that every class (component type) you can use <code>GetComponent</code> on actually derives from <code>Component</code> at some point. You are talking about <code>derived components</code>, but you are not using inheritance at all."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1464823567, "post_id": 37578849, "comment_id": 62647582, "body": "Are you sure you want to implement your template in cpp ?"}, {"owner": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "edited": false, "score": 0, "creation_date": 1464872227, "post_id": 37578849, "comment_id": 62669798, "body": "The &#180;Transform&#180; class is actually inherited from &#180;Component&#180;, Sorry I didnt mention that"}, {"owner": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "edited": false, "score": 0, "creation_date": 1464872295, "post_id": 37578849, "comment_id": 62669860, "body": "And yes, I <code>#include &quot;Entity.cpp&quot;</code> in the end of header file so it should be OK"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1464888960, "post_id": 37578849, "comment_id": 62682110, "body": "better to rename it <code>.inl</code>/<code>.hxx</code> or similar."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "edited": false, "score": 0, "creation_date": 1464872607, "post_id": 37580620, "comment_id": 62670104, "body": "This is really clever! I used to think I could only use curiously recurring template pattern (CRTP) to do that, but you actually get rid off the inheritance, and the pointers vector as well. Bravo!"}, {"owner": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "edited": false, "score": 0, "creation_date": 1464872874, "post_id": 37580620, "comment_id": 62670327, "body": "I will try it first though"}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "reply_to_user": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "edited": false, "score": 0, "creation_date": 1464872937, "post_id": 37580620, "comment_id": 62670371, "body": "@X&#250;Ji\u0101f\u0113ng Sure. Try it and let me know if there is any problem."}, {"owner": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "edited": false, "score": 1, "creation_date": 1465314185, "post_id": 37580620, "comment_id": 62844662, "body": "It works. I packed all components  in a &#180;class ComponentList&#180; and I then  everytime I write new components I put it into the inheritance list. I also made components as shared_ptr to reserve a pointer space. So for &#180;class Entity&#180; I only need to inherit componentList whatsoever and call a template function &#180;AddComponent&#180; when I need to add extra components. Thank you very much!"}], "tags": [], "owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "is_accepted": true, "score": 3, "last_activity_date": 1464825446, "creation_date": 1464825446, "answer_id": 37580620, "question_id": 37578849, "link": "https://stackoverflow.com/questions/37578849/how-to-index-all-the-derived-components-in-a-base-component-list-in-entity/37580620#37580620", "title": "How to index all the derived components in a base component list in Entity", "body": "<p>Did something similar long time ago. I think you are doing this the hard way. You can easily modify the code below to suit your need. The <code>Components</code> are inherited. You can remove the inheritance and replace it with class inside class or all component classes inside the <code>Component</code> class.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Vector3\n{\n    float x, y, z;\n    Vector3(float x, float y){}\n    Vector3(float x, float y,float z){}\n};\n\ntemplate &lt;class T&gt;\nclass Component\n{\npublic:\n    T t;\n    void adNewComponent(){\n\n    }\n};\n\nclass Mesh{\npublic:\n    Mesh(){}\n};\n\nclass Rigidbody{\npublic:\n    Rigidbody(){}\n    void AddForce(float x,float y, float z){}\n    void AddForce(Vector3 force){}\n};\n\n\nclass Transform{\npublic:\n    Transform(){}\n};\n\nclass Object{\n\n};\n\nclass GameObject:Object,\n    Component&lt;Mesh&gt;,\n    Component&lt;Rigidbody&gt;,\n    Component&lt;Transform&gt;\n{\npublic:\n     template &lt;class T&gt;\n     T &amp;GetComponent()\n    {\n        return this-&gt;Component&lt;T&gt;::t;\n    }\n\n     template &lt;class T&gt;\n     T &amp;AddComponent(){\n         this-&gt;Component&lt;T&gt;::adNewComponent();\n         return this-&gt;Component&lt;T&gt;::t;\n     }\n};\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\n    GameObject gameObject;\n    gameObject.AddComponent&lt;Rigidbody&gt;();\n    Rigidbody rigidBody = gameObject.GetComponent&lt;Rigidbody&gt;();\n    rigidBody.AddForce(9,0,0);\n\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4324635, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004136862770/picture?type=large", "display_name": "X&#250; Ji\u0101f\u0113ng", "link": "https://stackoverflow.com/users/4324635/x%c3%ba-ji%c4%81f%c4%93ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 1, "accepted_answer_id": 37580620, "answer_count": 1, "score": 2, "last_activity_date": 1464825446, "creation_date": 1464815473, "question_id": 37578849, "link": "https://stackoverflow.com/questions/37578849/how-to-index-all-the-derived-components-in-a-base-component-list-in-entity", "title": "How to index all the derived components in a base component list in Entity", "body": "<p>I am trying to do a entity component system design for simulation. Here is what confuses me now.\nI am trying to make a Entity class</p>\n\n<pre><code>Entity.h\nclass Entity\n{\npublic:\n    Entity();\n    virtual ~Entity() = 0;\n    //---------------------Methods---------------------//\n    void AddComponent(const shared_ptr&lt;Component&gt; component);\n\n    template&lt;class T&gt;\n    T* GetComponent() const;\n\n    //---------------------Members---------------------//\n    vector&lt;shared_ptr&lt;Component&gt;&gt;   m_components;\n}\n\nEntity.cpp\ntemplate&lt;typename T&gt;\nT* Entity::GetComponent() const\n{\n    Component::component_type_t typeIndex = /*T::component_type*/\n    T* returnPtr = dynamic_pointer_cast&lt;T&gt;(m_components[component_type].get());\n    return returnPtr;\n}\n</code></pre>\n\n<p>And the Component class looks like this</p>\n\n<pre><code>class Component\n{\npublic:\n    Component();\n    virtual ~Component() = 0;\n    //---------------------Methods---------------------//\n\n    //---------------------Members---------------------//\n    typedef enum component_type_t\n    {\n        MESH_T,\n        RIGIDBODY_T,\n        TRANSFORM_T,\n        NUM_TYPES\n    };\n    component_type_t componentType;\n};\n</code></pre>\n\n<p>They way I want to use <code>GetComponent()</code> is the same as in Unity3D</p>\n\n<pre><code>Transform* t = GetComponent&lt;Transform&gt;()\n</code></pre>\n\n<p>But as you can see I cannot find a way to do that yet. The way I used to do it was</p>\n\n<pre><code>class Entity\n{\n    .....\n    Component* GetComponent(Component::component_type_t componentType) const\n    {\n      return m_components[component_type].get()\n    };\n}\n</code></pre>\n\n<p>And I could only use it as</p>\n\n<pre><code>Transform* t = dynamic_pointer_cast&lt;Transform&gt;(GetComponent(Component::component_type_t::TRANSFORM_T));\n</code></pre>\n\n<p>Clearly it is tedious.</p>\n\n<p>So my question is can I use some form as this?</p>\n\n<pre><code>class Entity\n{\n    .....\n    template&lt;class T&gt;\n    T* GetComponent() const\n    {\n    Component::component_type_t typeIndex = /*T::component_type*/\n    T* returnPtr = dynamic_pointer_cast&lt;T&gt;(m_components[component_type].get());\n    return returnPtr;\n    };\n}\n</code></pre>\n\n<p>I feel the cleanness and the speed to keep using <code>std::vector&lt;&gt;</code> for storing all my component pointers, is that also a valid design?</p>\n"}, {"tags": ["c++", "qt", "qthread"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 0, "creation_date": 1464815773, "post_id": 37578856, "comment_id": 62644740, "body": "I just want to call a function of the obj somehow. Since obj-&gt;Func(); is not threadsafe I am searching for a threadsafe way. I tought maybe emit signal from obj and connect that signal in the obj-constructor to the Slot Func(). How can I call the Func()  threadsafe ????"}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "reply_to_user": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 0, "creation_date": 1464851220, "post_id": 37578856, "comment_id": 62655593, "body": "@Bob Assuming <code>Class B</code> is the object living in another thread, just connect a signal from <code>Class A</code> to a slot in <code>Class B</code>. You don&#39;t have to connect a signal from <code>Class B</code> to a slot in <code>Class B</code>, and then call this signal."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 0, "creation_date": 1464870867, "post_id": 37578856, "comment_id": 62668706, "body": "@Bob well... you can just call that function directly if you want, no one can stop you. But it breaks the thread boundary and is not safe to do so. To call your object function safely the mechanism is to send a signal... its like two lines of code extra! One line to connect, one line to emit the signal (oh yeah and you need to declare the signal)... that&#39;s it! then all this fuss goes away. Alternatively if this is some kind of &quot;helper&quot; function where you don&#39;t need the object to be instantiated you could make it a static function...  what is your use case? or what does your function do?"}], "tags": [], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1464815501, "creation_date": 1464815501, "answer_id": 37578856, "question_id": 37578522, "link": "https://stackoverflow.com/questions/37578522/qthread-communicate-threadsafe/37578856#37578856", "title": "QThread communicate threadsafe", "body": "<p>I am not 100% sure what would happen if you do this. However, you are still crossing/breaking the thread boundary - and probably the signal will be emitted from the thread that you are calling emit in.</p>\n\n<p>I believe a better approach is to connect a signal in your \"calling\" object to the signal in your \"target\" object. But even this is a bit bad in that the signal gets emitted immediately (maybe this is your intent), which is similar to a direct connection signal - which across threads, in my opinion, is very bad unless you have a very good reason (I can think of none).</p>\n\n<p>But why not just connect a signal to a slot in your object which then emits your signal. This way you keep your thread boundary?</p>\n\n<p>It seems like you are trying to force a signal in a different thread to run immediately... what is your use-case?</p>\n"}, {"comments": [{"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1464851012, "post_id": 37579212, "comment_id": 62655506, "body": "When you use <a href=\"http://doc.qt.io/qt-5/qt.html#ConnectionType-enum\" rel=\"nofollow noreferrer\"><code>Qt::AutoConnection</code></a>, the check is made when the signal is emitted, not when the connection is made."}], "tags": [], "owner": {"reputation": 1450, "user_id": 6216811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c3f4852b869530a7fcca4d2f1d615e?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6216811/david"}, "is_accepted": false, "score": 2, "last_activity_date": 1464817001, "creation_date": 1464817001, "answer_id": 37579212, "question_id": 37578522, "link": "https://stackoverflow.com/questions/37578522/qthread-communicate-threadsafe/37579212#37579212", "title": "QThread communicate threadsafe", "body": "<p><code>connect</code> takes a 5th argument which is the connecion type.\nThe default value, <code>AutoConnection</code>, will use the thread safe <code>QueuedConnection</code> connection type assuming the objects were in different threads when the connect call was made. If they are in the same thread when the connection is made it will use a non threadsafe <code>DirectConnection</code> type connection.</p>\n\n<p>Thread safetly is achieved by queueing the slot call as an event calling it in the destination thread when control returns to the event loop.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 0, "creation_date": 1464821809, "post_id": 37579393, "comment_id": 62647072, "body": "Do you know what is the approch to call a function from another thread? Why not just call the function from another threads object from main-gui-thread? I see no problem, if i only call functions from other threads from there?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 0, "creation_date": 1464824000, "post_id": 37579393, "comment_id": 62647707, "body": "@Bob If the functions you&#39;re calling are not thread-safe, you&#39;re facing undefined behavior. You might &quot;see&quot; no problem, but you might be silently formatting your hard drive."}, {"owner": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 0, "creation_date": 1464827501, "post_id": 37579393, "comment_id": 62648619, "body": "Idk i dont get an answer. Can i call a function of another thread without my programm crashes? Why should i use Signal and Slots when its extra code."}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "reply_to_user": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "edited": false, "score": 1, "creation_date": 1464850903, "post_id": 37579393, "comment_id": 62655435, "body": "@Bob You can also use <a href=\"http://doc.qt.io/qt-5/qmetaobject.html#invokeMethod\" rel=\"nofollow noreferrer\"><code>QMetaObject::invokeMethod</code></a>, if signals and slots are too much work for you. If you call a function directly, it will run in the thread you call it from. Unless the function you&#39;re calling is made thread-safe, you&#39;re risking getting a <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">race condition</a> among other things."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1464817891, "creation_date": 1464817891, "answer_id": 37579393, "question_id": 37578522, "link": "https://stackoverflow.com/questions/37578522/qthread-communicate-threadsafe/37579393#37579393", "title": "QThread communicate threadsafe", "body": "<p><strong>Yes!</strong> A signal can be called from any thread as long as you use the default automatic connection to the signal. Such slots/functors will execute in their context object's thread. You can emit signals from callbacks from 3rd party libraries, for example, even if these libraries don't use Qt.</p>\n\n<p><strong>Warning</strong>: Any explicitly directly connected slots/functors will execute in the thread where the signal was invoked. </p>\n"}], "owner": {"reputation": 43, "user_id": 6304337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c161733ad0208c2b554be7ed564811a3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/6304337/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1464817891, "creation_date": 1464814189, "last_edit_date": 1464816506, "question_id": 37578522, "link": "https://stackoverflow.com/questions/37578522/qthread-communicate-threadsafe", "title": "QThread communicate threadsafe", "body": "<p>I know it's not allowed to call a function of another thread in Mainthread. Is it allowed to call a signal form another thread without any problems? Lets say this code is in MainWindow:</p>\n\n<p>thread->moveTOThread(obj);\nemit obj->Signal();</p>\n\n<p>thank you</p>\n\n<hr>\n\n<p>or is this the way to go:</p>\n\n<pre><code> Obj.h\nsignals:\n    void testSignal(); \npublic slots:\nvoid Func();\n\n    MainWindow.h\n    void testSignal(); \n\n    MainWindow.cpp\n    thread-&gt;moveTOThread(obj); \n    connect(this,SIGNAL(testSignal()),obj,SIGNAL(testSignal()));\n    emit testSignal(); \n\n    Obj.cpp\n    connect(this,SIGNA(testSignal()),this,SLOT(Func()));\n</code></pre>\n"}, {"tags": ["c++", "systemc"], "comments": [{"owner": {"reputation": 307, "user_id": 3321588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c320d6c2332874d88565a29b3157b9f9?s=128&d=identicon&r=PG&f=1", "display_name": "mas", "link": "https://stackoverflow.com/users/3321588/mas"}, "edited": false, "score": 0, "creation_date": 1464814212, "post_id": 37578515, "comment_id": 62643940, "body": "Moreover, these errors remain even with int main()."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1464819511, "post_id": 37578515, "comment_id": 62646277, "body": "Your linker switches are wrong, but to help I need to know... how you are building - graphically in Xcode, or at the command-line? Please show the command you use to compile and link. How did you install SystemC?"}, {"owner": {"reputation": 307, "user_id": 3321588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c320d6c2332874d88565a29b3157b9f9?s=128&d=identicon&r=PG&f=1", "display_name": "mas", "link": "https://stackoverflow.com/users/3321588/mas"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1464873733, "post_id": 37578515, "comment_id": 62670996, "body": "Thanks for the reply. I&#39;m using the command line. I downloaded the systemc tarball and then installed it using the command line. I&#39;m assuming everything went fine because the programs at www.asic-world.com/systemc/first1.html run fine.  g++ -I/Users/ahmadmas/Downloads/systemc-2.3.1/include -L/Users/ahmadmas/Downloads/systemc-2.3.1/lib-macosx64 main.cpp producer.cpp consumer.cpp -lsystemc"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1464882652, "post_id": 37578515, "comment_id": 62678207, "body": "I think you must put the names of the <code>.cpp</code> files on the command line before (i.e. to the left of) the <code>-L</code> parameters."}, {"owner": {"reputation": 307, "user_id": 3321588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c320d6c2332874d88565a29b3157b9f9?s=128&d=identicon&r=PG&f=1", "display_name": "mas", "link": "https://stackoverflow.com/users/3321588/mas"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1464887291, "post_id": 37578515, "comment_id": 62681147, "body": "One of the files didnt have cstdlib included as a header file. I added it and that solved it. Maybe it wasnt picking up everything in the C++ library when systemc is added. Thank You though."}], "owner": {"reputation": 307, "user_id": 3321588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c320d6c2332874d88565a29b3157b9f9?s=128&d=identicon&r=PG&f=1", "display_name": "mas", "link": "https://stackoverflow.com/users/3321588/mas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523811926, "creation_date": 1464814149, "last_edit_date": 1523811926, "question_id": 37578515, "link": "https://stackoverflow.com/questions/37578515/systemc-mac-undefined-symbols-for-architecture-x86-64", "title": "SystemC Mac : Undefined symbols for architecture x86_64", "body": "<p>I'm trying to run SystemC programs on Mac, with some base programs compiling and running fine.</p>\n\n<p>However I get the following errors: </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"PktTrans::PktTrans()\", referenced from:\n      producer::processGen() in producer-110ef6.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>Functions:</p>\n\n<pre><code>void producer::processGen()\n{\n    int x;\n    x = rand() % 50 + 1;\n    cout&lt;&lt;clk&lt;&lt;\":gen random x=\"&lt;&lt;x&lt;&lt;endl;\n    PktTrans* intrans=new PktTrans;\n    intrans-&gt;setAddr(rand() %50 +1);\n    intrans-&gt;setId(transid);\n    intrans-&gt;setOpc(1);\n    incoming.push_back(intrans);\n    transid++;\n}\n\nPktTrans::PktTrans()\n{\n    id = -1;\n    addr = 0;\n    opc=0;\n}\n</code></pre>\n\n<p>I just added the SystemC header file and changed <code>int main()</code> to <code>int sc_main()</code>. The programs compile and run fine without SystemC. Any ideas on why are these errors occurring?</p>\n"}, {"tags": ["c++", "compilation", "linkage"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1464813890, "post_id": 37578441, "comment_id": 62643743, "body": "By convention one should never include a cpp file in another cpp file."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 4, "creation_date": 1464813925, "post_id": 37578441, "comment_id": 62643763, "body": "What command line are you passing to g++?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1464813935, "post_id": 37578441, "comment_id": 62643768, "body": "Yes, by including cpp file you end up having definition twice - in the original cpp file and in the file which includes it (I am assuming, you are also compiling the included cpp file independently). <b>THOU SHANT INCLUDE CPP FILES</b>."}, {"owner": {"reputation": 1980, "user_id": 6375498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ade4f86c3426c9f67f1a54b270b398?s=128&d=identicon&r=PG&f=1", "display_name": "Seva", "link": "https://stackoverflow.com/users/6375498/seva"}, "edited": false, "score": 0, "creation_date": 1464814559, "post_id": 37578441, "comment_id": 62644135, "body": "I would suspect that you only have Main.cpp in your project in Visual Studio, but you compile both cpp files when building on Linux. So, check what files exactly you compile on Linux. Also see Brian&#39;s comment above."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464814475, "post_id": 37578561, "comment_id": 62644076, "body": "<code>other_file.cpp</code> should not contain <code>extern int var1; extern int var2;</code> - they should go in a common header file also (be it <code>other_file.h</code> or another)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464814481, "post_id": 37578561, "comment_id": 62644077, "body": "Out of curiosity, when would one include a source file (here by source file I mean something which is compiled into it&#39;s own object file)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464814598, "post_id": 37578561, "comment_id": 62644153, "body": "@SergeyA I&#39;ve seen it in some low-lever direct-to-hardware simple RTOS code, but then the included source file isn&#39;t compiled into an object file that is linked."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1464814736, "post_id": 37578561, "comment_id": 62644230, "body": "@JoachimPileborg, so it is not really a translation unit, just a file which happens to have .c extension?"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 0, "creation_date": 1464815060, "post_id": 37578561, "comment_id": 62644382, "body": "Is there a way for me to compile it on Linux the way the program is set up right now? (However inefficient it may be)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 0, "creation_date": 1464815210, "post_id": 37578561, "comment_id": 62644463, "body": "@PaulWarnick The only &quot;Windowsy&quot; thing with the code you show is the <code>#include &quot;stdafx.h&quot;</code>. Precompiled headers may be used using GCC, but I&#39;ve never seen it &quot;in the wild&quot;, it&#39;s mostly used in Windows and Visual C++. Besides that, I see nothing in the code or the makefile that should not work, out of the box, on just about any system with the right tools."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1464814801, "last_edit_date": 1464814801, "creation_date": 1464814342, "answer_id": 37578561, "question_id": 37578441, "link": "https://stackoverflow.com/questions/37578441/multiple-definitions-error-in-c/37578561#37578561", "title": "Multiple definitions error in C++", "body": "<p>Don't <code>#include</code> a source file into another source file. There times and places when that is okay, but only in like less than 0.001% of all programs is that needed.</p>\n\n<p>What you should do is create a <em>header</em> file which contains <em>declarations</em> of the things needed in both source files.</p>\n\n<p>Then your code would look like this:</p>\n\n<ol>\n<li><p><code>main.cpp</code> source file</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"Other_File.h\"  // Note inclusion of header file here\n\nint var1;\nint var2;\n\nint main()\n{\n    var1 = 1;\n    var2 = 2;\n    otherFunction();\n    var4 = 4; // From Other_File.cpp\n\n    std::cout &lt;&lt; var1 &lt;&lt; \" \" &lt;&lt; var2 &lt;&lt; \" \" &lt;&lt; var3 &lt;&lt; \" \" &lt;&lt; var4 &lt;&lt; std::endl;\n}\n</code></pre></li>\n<li><p><code>other_file.cpp</code> source file, just like you have it now</p></li>\n<li><p><code>other_file.h</code> header file, a new file</p>\n\n<pre><code>#pragma once\n\n// Declare the variables, so the compiler knows they exist somewhere\nextern int var3;\nextern int var4;\n\n// Forward declaration of the function prototype\nvoid otherFunction();\n</code></pre></li>\n</ol>\n\n<p>Both source files would then be compiled separately and <em>linked</em> together to form the final executable. This <em>linking</em> step is where your build fails. It will notice that the variables defined in <code>other_source.cpp</code> are defined in the object file created from that source file, but since you include it into the <code>main.cpp</code> source file then the object file created from that source file as well.</p>\n\n<p>This is why you need to learn about <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow\"><em>translation units</em></a>, which is what the compiler actually see. A C++ source file goes through many <a href=\"http://en.cppreference.com/w/cpp/language/translation_phases\" rel=\"nofollow\">phases of translation</a>, each one doing its own special part. Roughly a <em>translation unit</em> is a single source file with all the headers included.</p>\n\n<p>This is also a good reason to learn what the <a href=\"http://en.cppreference.com/w/cpp/preprocessor/include\" rel=\"nofollow\">preprocessor <code>#include</code> directive</a> does. It basically inserts the included file, as is, into the source file being preprocessed. Where the <code>#include</code> directive was, after preprocessing it will be the contents of the included file, and that is what the compiler will see.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1464816607, "creation_date": 1464816607, "answer_id": 37579106, "question_id": 37578441, "link": "https://stackoverflow.com/questions/37578441/multiple-definitions-error-in-c/37579106#37579106", "title": "Multiple definitions error in C++", "body": "<p>An include effectively pastes the included file into the including file before the compiler starts working, so what this looks like to the compiler is:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n// #include \"Other_File.cpp\" sub in other file here\nextern int var1;\nextern int var2;\n\nint var3;\nint var4;\n\nvoid otherFunction()\n{\n     var3 = var1 + var2;\n     var4 = 0;\n}\n\n\nint var1;\nint var2;\n\nint main()\n{\n    var1 = 1;\n    var2 = 2;\n    otherFunction();\n    var4 = 4; // From Other_File.cpp\n\n    std::cout &lt;&lt; var1 &lt;&lt; \" \" &lt;&lt; var2 &lt;&lt; \" \" &lt;&lt; var3 &lt;&lt; \" \" &lt;&lt; var4 &lt;&lt; std::endl;\n\n    return(0);\n}\n</code></pre>\n\n<p>By itself this isn't a problem. It's funny looking, but it's not a problem. There are no duplicated variables.</p>\n\n<pre><code>extern int var1;\n</code></pre>\n\n<p>tells the compiler that somewhere else the there exists <code>var1</code>. It will be found and linked later. Carry on. The linker will complain if you lied. In this case, there it is about 10 lines down.</p>\n\n<p>The problem comes when Other_File.cpp is compiled and linked with Main.cpp. The linker finds a full definition of <code>var3</code> and <code>var4</code> in both Main.o and Other_File.o</p>\n\n<p>You can exclude Other_File.cpp from the build, likely what Visual Studio did for you, and all will be good except for a serious violation of convention: Never include a .cpp file.</p>\n\n<p>Why? Because cpp files, by convention, define stuff and make them real. You can botch a .h file just as badly by defining a variable or function in the header. eg:</p>\n\n<pre><code>#ifndef BADHEADER_H_\n#define BADHEADER_H_\n\n\nint fubar; // don't do this\n/* do this instead:\nextern int fubar;\nand place int fubar; into the most logical cpp file\n*/\n\n\n#endif /* BADHEADER_H_ */\n</code></pre>\n\n<p>Everyone who includes badheader.h now has a variable named <code>fubar</code> whether they want it or not and when the linker comes along to assemble the program, which <code>fubar</code> is the real <code>fubar</code>? All of them. Whoops. All the poor linker can do is spit out an error and wait for you to fix the ambiguity.</p>\n\n<p>At the end of the day you can <code>#include</code> anything. It won't compile, but you could include a Word doc. You can even perform little tricks like </p>\n\n<pre><code>int array[] =\n{\n#include \"filtercoefs.h\"\n};\n</code></pre>\n\n<p>where array.h is simply</p>\n\n<pre><code>1,2,3,4,5\n</code></pre>\n\n<p>Useful when you have something like Matlab spitting out filter coefficients, but prefer sticking to the convention to prevent confusion among your fellow coders. </p>\n\n<p>Anyway, C++ lets you do all sorts of stuff. Most of them you better think over a few times before doing them. </p>\n"}], "owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4390, "favorite_count": 0, "accepted_answer_id": 37578561, "answer_count": 2, "score": 0, "last_activity_date": 1464816607, "creation_date": 1464813820, "last_edit_date": 1464814723, "question_id": 37578441, "link": "https://stackoverflow.com/questions/37578441/multiple-definitions-error-in-c", "title": "Multiple definitions error in C++", "body": "<p>I'm writing a C++ program where each file has it's own set of global variable declarations. Most of these files make use of global variables that were defined in the other files using extern. </p>\n\n<p>Here's an example similar to my program:</p>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"Other_File.cpp\"\n\nint var1;\nint var2;\n\nint main()\n{\n    var1 = 1;\n    var2 = 2;\n    otherFunction();\n    var4 = 4; // From Other_File.cpp\n\n    std::cout &lt;&lt; var1 &lt;&lt; \" \" &lt;&lt; var2 &lt;&lt; \" \" &lt;&lt; var3 &lt;&lt; \" \" &lt;&lt; var4 &lt;&lt; std::endl;\n\n    return(0);\n}\n</code></pre>\n\n<p><strong>Other_File.cpp</strong></p>\n\n<pre><code>extern int var1;\nextern int var2;\n\nint var3;\nint var4;\n\nvoid otherFunction()\n{\n     var3 = var1 + var2;\n     var4 = 0;\n}\n</code></pre>\n\n<p>When I build this code in Visual Studio (Windows), everything runs fine and the output is correct. But when I attempt to build using g++ on Linux I receive the following error:</p>\n\n<blockquote>\n  <p>g++ -o Testing Testing.o Other_File.o Other_File.o:(.bss+0x0):\n  multiple definition of <code>var3' Testing.o:(.bss+0x0): first defined here\n  Other_File.o:(.bss+0x4): multiple definition of</code>var4'\n  Testing.o:(.bss+0x4): first defined here Other_File.o: In function\n  <code>otherFunction()': Other_File.cpp:(.text+0x0): multiple definition of\n  </code>otherFunction()' Testing.o:Testing.cpp:(.text+0x0): first defined\n  here collect2: ld returned 1 exit status make: *** [Testing] Error 1</p>\n</blockquote>\n\n<p><strong>Is this because I'm \"including\" the other file in my main file?</strong></p>\n\n<p>If not what's the issue with my code?</p>\n\n<p><em>Edit: This is the content of my Makefile for g++:</em></p>\n\n<pre><code>Testing: Testing.o Other_File.o\n    g++ -o Testing Testing.o Other_File.o\n\nTesting.o: Testing.cpp\n    g++ -c -std=c++0x Testing.cpp\n\nOther_File.o: Other_File.cpp\n    g++ -c -std=c++0x Other_File.cpp\n\nclean:\n    rm *.o Calculator\n</code></pre>\n"}, {"tags": ["c++", "typedef", "user-defined-types", "preprocessor-directive"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1464813671, "post_id": 37578352, "comment_id": 62643625, "body": "If you wanna &#39;rename&#39; <code>std::string</code> into <code>string</code>, write <code>using std::string</code> at the beginning of your code."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1464813769, "post_id": 37578352, "comment_id": 62643674, "body": "No matter how you do it - performance will not be affected. Unless you talk about compile time performance ;)"}, {"owner": {"reputation": 1841, "user_id": 6245072, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e93796ec6c5c6a3f05ff00d232200208?s=128&d=identicon&r=PG", "display_name": "user6245072", "link": "https://stackoverflow.com/users/6245072/user6245072"}, "edited": false, "score": 0, "creation_date": 1464813869, "post_id": 37578352, "comment_id": 62643724, "body": "Thanks everyone for the quick answer, I&#39;m still pretty noob at this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1464814845, "post_id": 37578352, "comment_id": 62644280, "body": "The #define my lead to funny compiler and linker errors (in libraries)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464816065, "post_id": 37578352, "comment_id": 62644886, "body": "<code>#define string std::string</code> will get you laughed out of the room"}, {"owner": {"reputation": 1841, "user_id": 6245072, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e93796ec6c5c6a3f05ff00d232200208?s=128&d=identicon&r=PG", "display_name": "user6245072", "link": "https://stackoverflow.com/users/6245072/user6245072"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464843224, "post_id": 37578352, "comment_id": 62652212, "body": "@M.M y u so tragical lol."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1464814673, "post_id": 37578390, "comment_id": 62644198, "body": "Like the bit about discouraging use of macros."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1464815085, "post_id": 37578390, "comment_id": 62644402, "body": "Thanks! I added a little more info. ;-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1464817245, "post_id": 37578390, "comment_id": 62645427, "body": "That <code>&#167;17.6.4.2.2&#47;1</code> is a good reason not to define any lowercase_only (with/without underscores) +1"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1464817448, "post_id": 37578390, "comment_id": 62645501, "body": "Plus one: especially for the bit about UB."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 12, "last_activity_date": 1464815411, "last_edit_date": 1464815411, "creation_date": 1464813640, "answer_id": 37578390, "question_id": 37578352, "link": "https://stackoverflow.com/questions/37578352/whats-the-best-type-renaming-method/37578390#37578390", "title": "What&#39;s the best &quot;type renaming&quot; method?", "body": "<p>Just</p>\n\n<pre><code>using std::string;\n</code></pre>\n\n<hr>\n\n<p>If you want a slightly different name, e.g.</p>\n\n<pre><code>using String = std::string;\n</code></pre>\n\n<hr>\n\n<p>Avoid macros, they don't respect scopes and are generally Evil&trade;.</p>\n\n<p>For example, the proposed macro</p>\n\n<pre><code>#define string std::string\n</code></pre>\n\n<p>&hellip; yields formal Undefined Behavior if you include any standard library header, because it defines a name used by the standard library.</p>\n\n<b>C++11 \u00a717.6.4.2.2/1</b> [macro.names]:\n\n<blockquote>\n  <p><strong>&rdquo;</strong> A translation unit that includes a standard library header shall not <code>#define</code> or <code>#undef</code> names declared in any standard library header.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "is_accepted": false, "score": 4, "last_activity_date": 1464813648, "creation_date": 1464813648, "answer_id": 37578391, "question_id": 37578352, "link": "https://stackoverflow.com/questions/37578352/whats-the-best-type-renaming-method/37578391#37578391", "title": "What&#39;s the best &quot;type renaming&quot; method?", "body": "<p>You should use <code>using</code> if you only want not to write namespace</p>\n\n<pre><code>using std::string;\n</code></pre>\n\n<p>Neither will be more performant since all of them are compile time.</p>\n\n<p>For more complex cases you may use other form of <code>using</code></p>\n\n<pre><code>using short_name = complex_name&lt;possibly, with, templates&gt;;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1464814164, "post_id": 37578455, "comment_id": 62643902, "body": "I know that the practice of writing namespace qualifications, in particular <code>std::</code>, has been adopted into some coding guidelines. And many programmers from such companies/projects have claimed that they find it <i>easier</i> to read the code with the qualifications, after a period getting used to it. However since it&#39;s more to write and more to read and parse (both of which takes time), and since a modern IDE will tell you the definition of anything, I suspect that much valuable programmers&#39; time is lost because of this practice."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1464814613, "post_id": 37578455, "comment_id": 62644160, "body": "@Cheersandhth.-Alf, since close to 80% of developers&#39; time is spent on code maintenance, IMO the extra time spent on explicitly using <code>std::</code> pales in comparison to the overall cost of a project."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1464814903, "post_id": 37578455, "comment_id": 62644309, "body": "@RSahu: Well the 80% is my (unmentioned) argument, except I draw the opposite conclusion: I think the time spent on making the code readable and clear, pays for itself over and over again during maintenance."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1464815328, "post_id": 37578455, "comment_id": 62644513, "body": "@Cheersandhth.-Alf, different strokes for different folks. I find it more readable with the <code>std::</code> prefix."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1464813864, "creation_date": 1464813864, "answer_id": 37578455, "question_id": 37578352, "link": "https://stackoverflow.com/questions/37578352/whats-the-best-type-renaming-method/37578455#37578455", "title": "What&#39;s the best &quot;type renaming&quot; method?", "body": "<p>Writing</p>\n\n<pre><code>using std::string;\n</code></pre>\n\n<p>is the best way. That has the effect of bringing the standard c++ library string class into the current namespace.</p>\n\n<p>But really you should learn to read code that contains scope resolution operators fluently. In writing</p>\n\n<pre><code>std::string\n</code></pre>\n\n<p>folk reading your code know exactly what is going on.</p>\n"}], "owner": {"reputation": 1841, "user_id": 6245072, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e93796ec6c5c6a3f05ff00d232200208?s=128&d=identicon&r=PG", "display_name": "user6245072", "link": "https://stackoverflow.com/users/6245072/user6245072"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3240, "favorite_count": 1, "accepted_answer_id": 37578390, "answer_count": 3, "score": 2, "last_activity_date": 1464815411, "creation_date": 1464813498, "question_id": 37578352, "link": "https://stackoverflow.com/questions/37578352/whats-the-best-type-renaming-method", "title": "What&#39;s the best &quot;type renaming&quot; method?", "body": "<p>If I wanted to rename the <code>std::string</code> type to a simpler and more naturally looking <code>string</code>, which of these two methods should I use (based on performance and what is usually the standard)</p>\n\n<p>Should I rename it as a preprocessed directive</p>\n\n<pre><code>#define string std::string\n</code></pre>\n\n<p>Or do it with a type definition</p>\n\n<pre><code>typedef std::string string;\n</code></pre>\n\n<p>What's the most performant method? What is also more familiar and recognized to the community?</p>\n"}, {"tags": ["c++", "iterator", "constants", "overloading", "const-iterator"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 2, "creation_date": 1464812883, "post_id": 37578157, "comment_id": 62643214, "body": "&quot;Is this just based on whether foo is const or not?&quot; Yes."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1464813776, "post_id": 37578157, "comment_id": 62643678, "body": "You can also call <code>cbegin</code> if you know for sure you want a <code>const_iterator</code>."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 3, "last_activity_date": 1464813336, "last_edit_date": 1495535339, "creation_date": 1464812934, "answer_id": 37578193, "question_id": 37578157, "link": "https://stackoverflow.com/questions/37578157/how-does-the-compiler-know-whether-to-call-the-const-overload/37578193#37578193", "title": "How does the Compiler Know Whether to Call the const Overload?", "body": "<blockquote>\n  <p>Is this just based on whether <code>foo</code> is const or not?</p>\n</blockquote>\n\n<p><strong>Yes</strong></p>\n\n<p><code>auto</code> is meant for deducing the <em>exact type</em><sup>*</sup></p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/questions/9453383/how-to-select-iterator-type-using-auto-variable\">How to select iterator type using auto variable?</a> indirectly agrees with this answer.</p>\n\n<p>*<sub>Taken from: <a href=\"https://stackoverflow.com/questions/15233188/how-do-i-get-a-const-iterator-using-auto\">How do I get a const_iterator using auto?</a></sub></p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37578193, "answer_count": 1, "score": 0, "last_activity_date": 1464813336, "creation_date": 1464812819, "question_id": 37578157, "link": "https://stackoverflow.com/questions/37578157/how-does-the-compiler-know-whether-to-call-the-const-overload", "title": "How does the Compiler Know Whether to Call the const Overload?", "body": "<p>Given <code>string foo</code>, when I call:</p>\n\n<pre><code>auto bar = foo.begin();\n</code></pre>\n\n<p>There are 2 overloads of <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/begin\" rel=\"nofollow\"><code>string::begin</code></a>. One returns an <code>string::iterator</code> and the other returns a <code>string::const_iterator</code>. How can I know the type of <code>bar</code>? Is this just based on whether <code>foo</code> is <code>const</code> or not?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1464812007, "post_id": 37577936, "comment_id": 62642759, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1464812229, "post_id": 37577936, "comment_id": 62642881, "body": "what input did you use? maybe it just takes too long to finish"}, {"owner": {"reputation": 9, "user_id": 6411526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b49add916a534ef1922209dcda3836d?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepycoder", "link": "https://stackoverflow.com/users/6411526/sleepycoder"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1464812714, "post_id": 37577936, "comment_id": 62643110, "body": "@tobi303 input 1,6 (1 triangle, longest hypotenuse 6) leads to hanging too. Also if it would find an answer it would post it right away so I doubt that it is the case."}, {"owner": {"reputation": 9, "user_id": 6411526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b49add916a534ef1922209dcda3836d?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepycoder", "link": "https://stackoverflow.com/users/6411526/sleepycoder"}, "edited": false, "score": 0, "creation_date": 1464813508, "post_id": 37577936, "comment_id": 62643532, "body": "I think the problem is: c=rand()%(hypoth-1)+1; as it can take a while until it guesses a large enough number which was not guessed before."}], "answers": [{"tags": [], "owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "is_accepted": true, "score": 2, "last_activity_date": 1464813603, "creation_date": 1464813603, "answer_id": 37578379, "question_id": 37577936, "link": "https://stackoverflow.com/questions/37577936/generate-right-triangles-c/37578379#37578379", "title": "Generate right triangles c++", "body": "<p>The code you provided works fine on my machine: inputting 1 and 6 gives output <code>sides: 3 4 5</code>.</p>\n\n<p>However, the problem probably arises from the line: <code>pow(a,2)+pow(b,2)==pow(c,2)</code>.  <code>pow</code> returns a <code>double</code>. Comparing floating-point numbers for equality is slippery, and practically never a good idea, since it's likely to be off by a tiny amount, and be false.</p>\n\n<p>Replace it with <code>a*a + b*b == c*c</code> (and the condition within the for loop just above with <code>a*a + b*b &lt;= c*c</code>).</p>\n"}], "owner": {"reputation": 9, "user_id": 6411526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b49add916a534ef1922209dcda3836d?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepycoder", "link": "https://stackoverflow.com/users/6411526/sleepycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 37578379, "answer_count": 1, "score": -1, "last_activity_date": 1464813731, "creation_date": 1464811970, "question_id": 37577936, "link": "https://stackoverflow.com/questions/37577936/generate-right-triangles-c", "title": "Generate right triangles c++", "body": "<p>I am trying to make a program which would generate 3 sides given following input: longest allowed hypotenuse and  number of triangles required. The sides can be only integers.\nThe program I have written just hangs on me and does not return any output.\nIf you are to downvote me explain why.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n\nint generator(int number, int hypoth){\n\n    int a,b,c;\n\n    while (number&gt;0){\n        c=rand()%(hypoth-1)+1;\n        for (a=1;a&lt;hypoth-2;a++){\n            for (b=1;pow(a,2)+pow(b,2)&lt;=pow(c,2); b++){\n                if (pow(a,2)+pow(b,2)==pow(c,2)){\n                    std::cout&lt;&lt;\"sides: \"&lt;&lt;a&lt;&lt;\" \"&lt;&lt;b&lt;&lt;\" \"&lt;&lt;c&lt;&lt;std::endl;\n                    number--;\n                }\n            }\n        }\n    }\n    return 0;\n}\n\nint main(){\n    int triangle_number, hypothenuse;\n    std::cout &lt;&lt; \"How many triangles to generate? \";\n    std::cin &gt;&gt; triangle_number;\n    std::cout &lt;&lt; \"How long is max hypothenuse?\";\n    std::cin &gt;&gt; hypothenuse;\n    generator(triangle_number, hypothenuse);\n    return 0;\n} \n</code></pre>\n\n<p>If you think I should improve my algorithm please hint me in right direction.\nThank you for your time.</p>\n"}, {"tags": ["c++", "qtableview"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1464813171, "post_id": 37577922, "comment_id": 62643354, "body": "Does the model actually contain any data? How do you know that your insertions succeeded?"}, {"owner": {"reputation": 33, "user_id": 3407352, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000204325810/picture?type=large", "display_name": "user3407352", "link": "https://stackoverflow.com/users/3407352/user3407352"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1464815216, "post_id": 37577922, "comment_id": 62644465, "body": "Evidently, it doesn&#39;t. The model insertions fail with &quot;unable to find table Errors&quot;."}, {"owner": {"reputation": 33, "user_id": 3407352, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000204325810/picture?type=large", "display_name": "user3407352", "link": "https://stackoverflow.com/users/3407352/user3407352"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1464815272, "post_id": 37577922, "comment_id": 62644484, "body": "Does QT support what I am trying to do? Use a QTableView without a real database behind it? Just loading up stuff for prototyping purposes?"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1464816618, "last_edit_date": 1464816618, "creation_date": 1464815700, "answer_id": 37578897, "question_id": 37577922, "link": "https://stackoverflow.com/questions/37577922/qtableview-doesnt-show-anything/37578897#37578897", "title": "QTableView doesn&#39;t show anything", "body": "<p>You cannot use a <code>QSqlTableModel</code> without a database. As a quick workaround, you could connect it to a temporary in-memory sqlite table that literally can be created in two statements. For prototyping you should probably use a <code>QStandardItemModel</code>, though. Here's a complete example:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/dummymodel-37577922\n#include &lt;QtWidgets&gt;\n\ntemplate &lt;typename T&gt; QStandardItem * newItem(const T val) {\n  auto item = new QStandardItem;\n  item-&gt;setData(val, Qt::DisplayRole);\n  return item;\n}\n\nint main(int argc, char ** argv) {\n   QApplication app{argc, argv};\n\n   QStandardItemModel model;\n   model.setColumnCount(3);\n   model.setHorizontalHeaderLabels(QStringList{\"Error Number\", \"Message\", \"Details\"});\n\n   auto newRow = []{ return QList&lt;QStandardItem*&gt;{\n         newItem(1),\n         newItem(\"Unable to perform snapshot\"),\n         newItem(\"Unable to perform snapshot. Please try again\")};\n   };\n   model.appendRow(newRow());\n   model.appendRow(newRow());\n\n   QTableView view;\n   view.setModel(&amp;model);\n   view.show();\n\n   return app.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3407352, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000204325810/picture?type=large", "display_name": "user3407352", "link": "https://stackoverflow.com/users/3407352/user3407352"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464816618, "creation_date": 1464811916, "last_edit_date": 1464812565, "question_id": 37577922, "link": "https://stackoverflow.com/questions/37577922/qtableview-doesnt-show-anything", "title": "QTableView doesn&#39;t show anything", "body": "<p>I am trying to prototype a window with a <code>QTableView</code>. There isn't yet any database behind it, but there will be at some point. I can't get the tableview to show anything. I get a rectangle with white space. I've looked at the examples online and seem to be doing everything right, as far as I can tell.</p>\n\n<p>I set up a <code>QTableView</code> object with the GUI builder and then added the following code immediately after the call to <code>ui.setupUi(this);</code></p>\n\n<pre><code>// set up prototype table model to hold dummy data\nQSqlTableModel * model = new QSqlTableModel(this);\n\nmodel-&gt;setTable(\"Errors\");\nmodel-&gt;setEditStrategy(QSqlTableModel::OnManualSubmit);\nmodel-&gt;select();\n\n// set header names\nmodel-&gt;setHeaderData(0, Qt::Horizontal, QObject::tr(\"Error Number\"));\nmodel-&gt;setHeaderData(1, Qt::Horizontal, QObject::tr(\"Message\"));\nmodel-&gt;setHeaderData(2, Qt::Horizontal, QObject::tr(\"Details\"));\n\n// insert a dummy record\n{\n  QSqlRecord record;\n  QSqlField field1(\"Errno\", QVariant::Int);\n  field1.setValue(1);\n  record.insert(0, field1);\n\n  QSqlField field2(\"Msg\", QVariant::String);\n  field2.setValue(QString(\"Unable to perform snapshot\"));\n  record.insert(1, field2);\n\n  QSqlField field3(\"Details\", QVariant::String);\n  field3.setValue(QString(\"Unable to perform snapshot. Please try again\"));\n  record.insert(2, field3);\n\n  model-&gt;insertRecord(0, record);\n}\n\n// insert a dummy record\n{\n  QSqlRecord record;\n  QSqlField field1(\"Errno\", QVariant::Int);\n  field1.setValue(1);\n  record.insert(0, field1);\n\n  QSqlField field2(\"Msg\", QVariant::String);\n  field2.setValue(QString(\"Unable to perform snapshot\"));\n  record.insert(1, field2);\n\n  QSqlField field3(\"Details\", QVariant::String);\n  field3.setValue(QString(\"Unable to perform snapshot. Please try again\"));\n  record.insert(2, field3);\n\n  model-&gt;insertRecord(1, record);\n}\n\nui.errMsgsTableView-&gt;setEditTriggers(QAbstractItemView::NoEditTriggers);\nui.errMsgsTableView-&gt;setModel(model);\n\nui.errMsgsTableView-&gt;show();\n</code></pre>\n\n<p>Anyone have any suggestions? What am I missing?</p>\n"}, {"tags": ["c++", "algorithm", "date"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464812421, "post_id": 37577869, "comment_id": 62642966, "body": "No standard library is going to help you. Best place to start is with pen and paper. Figure out the sort of math you need to separate months, probably division, and months into days, probably modulo. Make it work with months all of the same size. Then build in a switch, an if, or just an array of month lengths to handle the months with odd lengths. The point of this exercise looks to be not code, but algorithm development. Handing you an algorithm would defeat the purpose."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1464813567, "post_id": 37577869, "comment_id": 62643560, "body": "Are the other 12 months the same as our existing calendar? Are there leap years in this world?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1464814602, "post_id": 37577869, "comment_id": 62644155, "body": "An excellent question to ask on 14 Prairial CCXXIV."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 3756824, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b039d3e4967362cced2974e86d39b4e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3756824", "link": "https://stackoverflow.com/users/3756824/user3756824"}, "edited": false, "score": 0, "creation_date": 1464812448, "post_id": 37577977, "comment_id": 62642978, "body": "Yes, that is clear, however, I still don&#39;t have any idea, what should be in DayToDate&#39;s body"}], "tags": [], "owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "is_accepted": false, "score": 1, "last_activity_date": 1464812145, "creation_date": 1464812145, "answer_id": 37577977, "question_id": 37577869, "link": "https://stackoverflow.com/questions/37577869/calgorithm-for-adding-days-to-an-abstract-date-eg-year-that-has-13-months/37577977#37577977", "title": "[C++]Algorithm for adding days to an abstract date, eg. year that has 13 months, 13th month has 40 days", "body": "<p>You can write 2 functions:</p>\n\n<pre><code>int DateToDay(const Date&amp; date);\nDate DayToDate(int day);\n</code></pre>\n\n<p>Which would convert Date to days spent since 00/00/00 and back in your calendar (this is straightforward, and can be expressed in generic formulas - you need to know month per Year, and days per each month which define your calendar + some logic for leap years). After that, you can add day to date by</p>\n\n<pre><code>Date result_date = DayToDate(DateToDay(start_date)+days_to_add);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464814067, "creation_date": 1464814067, "answer_id": 37578496, "question_id": 37577869, "link": "https://stackoverflow.com/questions/37577869/calgorithm-for-adding-days-to-an-abstract-date-eg-year-that-has-13-months/37578496#37578496", "title": "[C++]Algorithm for adding days to an abstract date, eg. year that has 13 months, 13th month has 40 days", "body": "<p>First of all, consider the good way to store information that describe your calendar, i.e. how to store number of monthes in a year and number of days in each month. Find answer also for question: are there leap years and what the difference from non-leap ones?</p>\n\n<p>Then, design logic for desired operations, like \n<a href=\"http://alcor.concordia.ca/~gpkatch/gdate-algorithm.html\" rel=\"nofollow\">http://alcor.concordia.ca/~gpkatch/gdate-algorithm.html</a>\nbut with your specificity</p>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1464819060, "creation_date": 1464819060, "answer_id": 37579614, "question_id": 37577869, "link": "https://stackoverflow.com/questions/37577869/calgorithm-for-adding-days-to-an-abstract-date-eg-year-that-has-13-months/37579614#37579614", "title": "[C++]Algorithm for adding days to an abstract date, eg. year that has 13 months, 13th month has 40 days", "body": "<p>In the most basic form, the years all have the same number of days, and every month has a specified number of days as well. So, for example, the <code>i</code>th month has <code>d_i</code> days, and there are <code>n</code> months in a year. We can look at this as a table:</p>\n\n<pre><code>month | 1 | 2 | 3 | ... | n\ndays  | d1| d2| d3| ... | dn\n</code></pre>\n\n<p>from this a year is going to have <code>d1+d2+d3+...+dn</code> days.</p>\n\n<p>Now, as mentioned before, the algorithm to convert a date (<code>dd/mm/yyyy</code>) to number of days is just going to use the table above to get the number of days that has passed since a certain date, for example, since 01/01/1000.</p>\n\n<pre><code>number of days in whole years = (yyyy - 1000) * days_in_year\nnumber of days in whole months = sum(d_i) for all i &lt; mm\nnumber of days in current month = dd\ntotal number of days = sum of the three numbers you get above\n</code></pre>\n\n<p>The reverse is going to be similar, you have the number of days (<code>d</code>) that have passed since that specific date, and you want to get the calendar date from it, so you need to find:</p>\n\n<pre><code>how many years have passed = floor(d / days_in_year)\nyyyy = 1000 + how_many_years_have_passed\n</code></pre>\n\n<p>and so on and so forth for <code>mm</code> and <code>dd</code>.</p>\n\n<p>If you want to take leap years into account as well, you just need to adjust the algorithms a bit to account for the logic of leap years. For example, if leap years happen every 5 years, then you need to find out how many leap years were in between years <code>1000</code> and <code>yyyy</code> and add one day for each of those leap years. Also, you need to tell the reverse algorithm which month is going to have an extra day during the leap year.</p>\n\n<p>Leap years in Gregorian calendar have a very strange pattern: they happen every four years (if the year is divisible by four it is a leap year), but not if the year is divisible by 100. However, if the year is divisible by 400, then it is a leap year. So you might need to consider a complex case like that in your algorithm.</p>\n"}], "owner": {"reputation": 89, "user_id": 3756824, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b039d3e4967362cced2974e86d39b4e1?s=128&d=identicon&r=PG&f=1", "display_name": "user3756824", "link": "https://stackoverflow.com/users/3756824/user3756824"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1464819060, "creation_date": 1464811718, "question_id": 37577869, "link": "https://stackoverflow.com/questions/37577869/calgorithm-for-adding-days-to-an-abstract-date-eg-year-that-has-13-months", "title": "[C++]Algorithm for adding days to an abstract date, eg. year that has 13 months, 13th month has 40 days", "body": "<p>I have a task with a twist, and I don't know where to start. I need to write a function that will add days to a given date (dd/mm/yyyy), and return a date in result, but the problem is, the year not neccessarily needs to be georgian, eg. It can have 13 months, where a 13th month has 40 days. I do not need a code, I need some kind of algorithm to know, where to start. I tried to use Julian Day Number, but I cannot edit it for my needs. If anyone has suggestions, they'd be appreciated. I cannot use any wrappers like time_t</p>\n"}, {"tags": ["c++", "qt5"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1464812127, "post_id": 37577865, "comment_id": 62642831, "body": "Clipping is set by <code>update</code>. Here is a relevant question: <a href=\"http://stackoverflow.com/q/11707768/2988730\">stackoverflow.com/q/11707768/2988730</a>. If you want to update your output, you need to add a call to <code>update</code> with whatever frequency you want it to be redrawn."}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1464813573, "post_id": 37577865, "comment_id": 62643564, "body": "@MadPhysicist: I see... I hoped there would be nicer solution."}], "owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570614261, "creation_date": 1464811708, "last_edit_date": 1464811913, "question_id": 37577865, "link": "https://stackoverflow.com/questions/37577865/custom-painting-over-qgraphicsview", "title": "custom painting over QGraphicsView", "body": "<p>I want to put some text with information about scene on <code>QGraphicsView</code>.</p>\n\n<p>So I've inherited from <code>QGraphicsView</code> then I've overrided <code>paintEvent</code> and I do my drawings there.</p>\n\n<p>It seemd fine however very quickly I've realized that my drawings are being updated only when there is an item moving near them. So what comes to my mind is that there is some clipping, however I cannot find where is it set and how can I obey it.</p>\n\n<p>My painting routine:</p>\n\n<pre><code>void ObjectsView::paintEvent(QPaintEvent* event)\n{\n    QGraphicsView::paintEvent(event);\n\n    const int fps = m_controller-&gt;fps();\n    const QString info = QString(tr(\"Information about simulation: FPS: %1\"))\n                         .arg(fps);\n\n    QPainter painter(viewport());\n    const QRect infoRect = painter.boundingRect(QRect(), 0, info);\n\n    painter.setPen(Qt::black);\n    painter.drawText(infoRect.bottomLeft(), info);\n    painter.drawLine(QPoint(), viewport()-&gt;rect().bottomRight());\n}\n</code></pre>\n"}, {"tags": ["c++", "unicode", "utf-8", "sdl", "sdl-ttf"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1464882683, "post_id": 37577816, "comment_id": 62678227, "body": "Do you have a C++11 compiler?  Might try a <a href=\"http://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\"><code>u8</code> string literal</a>."}, {"owner": {"reputation": 395, "user_id": 3429916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f5003020975cd6ab8b851b0fff2f16?s=128&d=identicon&r=PG&f=1", "display_name": "huzzm", "link": "https://stackoverflow.com/users/3429916/huzzm"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1464987427, "post_id": 37577816, "comment_id": 62729165, "body": "I am not sure but I don&#39;t think so because my compiler does not allow u8 as prefix. (How do I figure that out though?). As IDE, I use Microsoft Visual Studio 2012 Express."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 3429916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f5003020975cd6ab8b851b0fff2f16?s=128&d=identicon&r=PG&f=1", "display_name": "huzzm", "link": "https://stackoverflow.com/users/3429916/huzzm"}, "edited": false, "score": 0, "creation_date": 1464817344, "post_id": 37578855, "comment_id": 62645460, "body": "When I had some Unicode glyphs in my source file the IDE asked me &quot;Do you want to resave this file as Unicode in order to maintain your data?&quot;, and I said yes, so my source code should be encoded correctly or am I getting this wrong?"}, {"owner": {"reputation": 430, "user_id": 2277264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KytzI.png?s=128&g=1", "display_name": "Peter Stock", "link": "https://stackoverflow.com/users/2277264/peter-stock"}, "reply_to_user": {"reputation": 395, "user_id": 3429916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f5003020975cd6ab8b851b0fff2f16?s=128&d=identicon&r=PG&f=1", "display_name": "huzzm", "link": "https://stackoverflow.com/users/3429916/huzzm"}, "edited": false, "score": 0, "creation_date": 1464849258, "post_id": 37578855, "comment_id": 62654536, "body": "Try with using the \\u.... char constants in your strings instead. Then you know exactly what you&#39;re passing. If that works, investigate source file encoding - you might not be passing what you think you are. Use a debugger and breakpoint to examine the bytes of char * being passed. Use a hex editor (or maybe IDE if it allows opening file as raw bytes) to examine bytes in source file."}, {"owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 0, "creation_date": 1464881946, "post_id": 37578855, "comment_id": 62677722, "body": "There are 6 or 8 different kinds of unicode your editor could have saved in. utf-7, utf-8, utf-16, ucs-2, and others, with or without a BOM (Byte-Order-Mark). Which one did your editor save?"}, {"owner": {"reputation": 395, "user_id": 3429916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f5003020975cd6ab8b851b0fff2f16?s=128&d=identicon&r=PG&f=1", "display_name": "huzzm", "link": "https://stackoverflow.com/users/3429916/huzzm"}, "edited": false, "score": 0, "creation_date": 1464985933, "post_id": 37578855, "comment_id": 62728459, "body": "I don&#39;t know which one my editor saved, how can I check that?"}, {"owner": {"reputation": 430, "user_id": 2277264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KytzI.png?s=128&g=1", "display_name": "Peter Stock", "link": "https://stackoverflow.com/users/2277264/peter-stock"}, "reply_to_user": {"reputation": 395, "user_id": 3429916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f5003020975cd6ab8b851b0fff2f16?s=128&d=identicon&r=PG&f=1", "display_name": "huzzm", "link": "https://stackoverflow.com/users/3429916/huzzm"}, "edited": false, "score": 0, "creation_date": 1465022765, "post_id": 37578855, "comment_id": 62736681, "body": "@huzzm debugger and/or hex editor, as previous comment."}], "tags": [], "owner": {"reputation": 430, "user_id": 2277264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KytzI.png?s=128&g=1", "display_name": "Peter Stock", "link": "https://stackoverflow.com/users/2277264/peter-stock"}, "is_accepted": true, "score": 1, "last_activity_date": 1464815501, "creation_date": 1464815501, "answer_id": 37578855, "question_id": 37577816, "link": "https://stackoverflow.com/questions/37577816/rendering-font-with-utf8-in-sdl-ttf/37578855#37578855", "title": "Rendering font with UTF8 in SDL_ttf", "body": "<p>If you have non-ASCII characters in a source file, the character encoding of that source code file matters. So in your text editor or IDE, you need to set the character set (e.g. UTF-8) when you save it.</p>\n\n<p>Alternatively, you can use the \\x... or \\u.... format to specify non-ASCII characters using only ASCII characters, so source file encoding doesn't matter.</p>\n\n<p>Microsoft doc, but not MS-specific:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/6aw8xdf2.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/6aw8xdf2.aspx</a></p>\n"}], "owner": {"reputation": 395, "user_id": 3429916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78f5003020975cd6ab8b851b0fff2f16?s=128&d=identicon&r=PG&f=1", "display_name": "huzzm", "link": "https://stackoverflow.com/users/3429916/huzzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3099, "favorite_count": 2, "accepted_answer_id": 37578855, "answer_count": 1, "score": 1, "last_activity_date": 1465667307, "creation_date": 1464811520, "last_edit_date": 1465667307, "question_id": 37577816, "link": "https://stackoverflow.com/questions/37577816/rendering-font-with-utf8-in-sdl-ttf", "title": "Rendering font with UTF8 in SDL_ttf", "body": "<p>I am trying to render characters using the <code>TTF_RenderUTF8_Blended</code> method provided by the SDL_ttf library. I implemented user input (keyboard) and pressing '\u00e4' or '\u00df' for example works fine. These are special characters of the German language. In this case, they are even in the extended ASCII 8-bit code, but even when I copy and paste some Greek letters for example, the fonts get rendered correctly using UTF8. (However not <em>all</em> the UNICODE glyphs you can find here (<a href=\"http://unicode-table.com/\" rel=\"nofollow\">http://unicode-table.com/</a>) am I able to render as I recognized during testing but I guess that is normal because the Arial font might not have every single glyph. Anyways most of the UNICODE glyphs work fine.)</p>\n\n<p>My problem is that passing strings (parameter as <code>const char*</code>) the additional characters (to ASCII) aren't rendered correctly. So entering '\u00c4', '\u00df', or some other UNICODE chars with the keyboard at runtime works but passing them as a parameter to get - let's say a title for my game - inside the code like this does not work:</p>\n\n<pre><code>font_srf = TTF_RenderUTF8_Blended(font, \"H\u00e4ll\u00f6\", font_clr);\n</code></pre>\n\n<p>I don't really understand why this is happening. What I get on the screen is:</p>\n\n<p>H_ll_<br>\nAnd I am using _ to represent the typical vertical rectangle that the guy who gave the following speech used as a funny way of an introduction:\n<a href=\"https://www.youtube.com/watch?v=MW884pluTw8\" rel=\"nofollow\">https://www.youtube.com/watch?v=MW884pluTw8</a></p>\n\n<p>Ironically, when I use TTF_RenderText_Blended(font, \"H\u00e4ll\u00f6\", font_clr); it works because '\u00e4' and '\u00f6' are 8-bit extended ASCII encoded, but what I want is UNICODE support, so that does not help.</p>\n\n<p><strong>Edit &amp; Semi-Solution</strong> </p>\n\n<p>I kind of (not really good) fixed the problem, Because my input works fine, I just checked what values I get as input when I press '\u00e4', '\u00df', ... on my keyboard using the following code: </p>\n\n<pre><code>const char* c = input.c_str();\n\nfor (int i = 0; i &lt; input.length(); i++)\n{\n    std::cout &lt;&lt; int(c[i]) &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Then I printed those characters in the following way:</p>\n\n<pre><code>const char char_array[] = {-61, -74, -61, -97, '\\0'};\nconst char* char_pointer = char_array;\n</code></pre>\n\n<p>-61, -74 is '\u00f6' and -61, -97 is '\u00df'.\nThis does fit the UTF8 encoding right?</p>\n\n<ul>\n<li>U+00F6 | \u00f6 | C3 B6 (from UTF8 data table)</li>\n<li>256-61=195 which is C3</li>\n<li><p>and 256-74=182 which is B6</p>\n\n<p>const char char_array[] = {0xC3, 0xB6};</p></li>\n</ul>\n\n<p>This code works fine as well in case some of you were wondering. And I think this is what I will keep doing for now. Looking up the Hex-code for some Unicode glyphs isn't that hard.</p>\n\n<p>But what I still can't figure out is how to get to the extended ASCII integer value of 246. Plus, isn't there a more human-friendly solution to my problem?</p>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1464812173, "post_id": 37577700, "comment_id": 62642858, "body": "You basically need to get the debug version of the Python library, I believe (could be wrong, I usually use MinGW for Windows stuff, but see the suggested duplicate)."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1464813798, "post_id": 37577700, "comment_id": 62643691, "body": "I&#39;m pretty sure it&#39;s one of the python headers that opens the &quot;_d.lib&quot; if one of the &quot;DEBUG&quot; or &quot;_DEBUG&quot; macros are set, I don&#39;t think this is a qtcreator thing"}, {"owner": {"reputation": 1, "user_id": 6411473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a52f909c743c9a6abd9aa464c6bfed0?s=128&d=identicon&r=PG&f=1", "display_name": "roni", "link": "https://stackoverflow.com/users/6411473/roni"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1464813857, "post_id": 37577700, "comment_id": 62643719, "body": "Thank you, @hyde, both for the link and for the suggestion. In this particular case I could probably build Python debug library from the source (it is not available pre-built). However I ran into a similar problem before. Sometimes the 3d party libraries are not available in both release and debug version. I would like to to control what library I am linking with, instead of QtCreator making decision for me (even if it is a good practice)."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1464814027, "post_id": 37577700, "comment_id": 62643819, "body": "@roni just do something like <code>#undef _DEBUG</code> before including python.h (and re-define it in debug mode afterwards)"}, {"owner": {"reputation": 1, "user_id": 6411473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a52f909c743c9a6abd9aa464c6bfed0?s=128&d=identicon&r=PG&f=1", "display_name": "roni", "link": "https://stackoverflow.com/users/6411473/roni"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1464814387, "post_id": 37577700, "comment_id": 62644038, "body": "Thank you, @PeterT, you are probably right, in might not be QtCreator itself. I hope to find correct syntax/setting for the *.pro file that will enforce linking with the right library."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1464814546, "post_id": 37577700, "comment_id": 62644122, "body": "again, nothing to do with the *.pro file QtCreator or qmake, somewhere in the python header there&#39;s a <code>#pragma comment(lib,&quot;python27_d.lib&quot;)</code>"}, {"owner": {"reputation": 1, "user_id": 6411473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a52f909c743c9a6abd9aa464c6bfed0?s=128&d=identicon&r=PG&f=1", "display_name": "roni", "link": "https://stackoverflow.com/users/6411473/roni"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1464814843, "post_id": 37577700, "comment_id": 62644276, "body": "Thank you very much, @PeterT! The &quot;#undef _DEBUG&quot; solution worked!"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1464814934, "post_id": 37577700, "comment_id": 62644323, "body": "just don&#39;t forget to re-enable it in debug mode like in this answer: <a href=\"http://stackoverflow.com/a/32425901/777689\">stackoverflow.com/a/32425901/777689</a>"}, {"owner": {"reputation": 1, "user_id": 6411473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a52f909c743c9a6abd9aa464c6bfed0?s=128&d=identicon&r=PG&f=1", "display_name": "roni", "link": "https://stackoverflow.com/users/6411473/roni"}, "edited": false, "score": 0, "creation_date": 1464815669, "post_id": 37577700, "comment_id": 62644679, "body": "Yes, that is exactly what I used. Thanks again!"}], "owner": {"reputation": 1, "user_id": 6411473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a52f909c743c9a6abd9aa464c6bfed0?s=128&d=identicon&r=PG&f=1", "display_name": "roni", "link": "https://stackoverflow.com/users/6411473/roni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "closed_date": 1464978076, "answer_count": 0, "score": 0, "last_activity_date": 1464813200, "creation_date": 1464811088, "last_edit_date": 1464813200, "question_id": 37577700, "link": "https://stackoverflow.com/questions/37577700/how-to-prevent-qmake-from-adding-a-d-suffix-to-the-libraries-in-the-debug-mod", "closed_reason": "Duplicate", "title": "How to prevent qmake from adding a `_d` suffix to the libraries in the Debug mode?", "body": "<p>My Qt project links with the library python27.lib on Windows 8.1. The .pro file contains the following line:</p>\n\n<pre><code>win32:LIBS += C:\\Python27_11\\libs\\python27.lib\n</code></pre>\n\n<p>When building the project in Release mode, it links correctly with python27.lib.</p>\n\n<p>When building the project in Debug mode, it looks for python27_d.lib:</p>\n\n<pre><code>Error: LNK1104: cannot open file 'python27_d.lib'\n</code></pre>\n\n<p>How to enforce linking with python27.lib in the Debug mode?</p>\n\n<p>Thank you in advance!</p>\n\n<p>Roni.</p>\n\n<p>P.S. I tried to use different syntax <code>win32:LIBS += -LC:/Python27_11/libs -lpython27</code>, and to enclose the declaration into <code>CONFIG(debug, debug|release) {}</code>. None of these worked.</p>\n\n<p>The system info:\nQt Creator 3.5.1 (opensource)\nBased on Qt 5.5.1 (MSVC 2013, 32 bit)\nThe OS is Windows 8.1 Pro 64 bit</p>\n"}, {"tags": ["python", "c++", "object", "cython"], "comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1464811249, "post_id": 37577676, "comment_id": 62642347, "body": "If you are going to literally rewrite Python code in C++ then you will gain nothing. But you can extract data from Python objects and operate on pure C++, that will definitely give you great performance boost, mostly because you can drop heavy polymorphism."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1464816059, "post_id": 37577676, "comment_id": 62644882, "body": "So, essentially you want to implement the data structure in <code>Python</code> and implement the algorithm that acts on that DS is <code>C++</code>, right?"}, {"owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1464870906, "post_id": 37577676, "comment_id": 62668729, "body": "@Jim That&#39;s the idea :)"}], "answers": [{"comments": [{"owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "edited": false, "score": 0, "creation_date": 1464875825, "post_id": 37592955, "comment_id": 62672679, "body": "Thanks for this.   I agree, the effort put into learning the API is probably not worth my time. Extracting the data seems like a good idea. I decided last night that I mine aswell try to rewrite my classes in C++ if I&#39;m going seriously commit myself to learning the language.  If it so happens that I can&#39;t manage it, I&#39;ll look into the data extraction."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 2, "last_activity_date": 1464873266, "creation_date": 1464873266, "answer_id": 37592955, "question_id": 37577676, "link": "https://stackoverflow.com/questions/37577676/using-python-objects-in-c/37592955#37592955", "title": "Using Python objects in C++", "body": "<p>Yes. You will get a speed-up over pure python but not on par with the increase you'd get if you were using pure <code>C/C++</code>. If you want to handle Python Objects you'll need to do it via the <a href=\"https://docs.python.org/3/c-api/index.html\" rel=\"nofollow\"><code>Python C/API</code></a>; this adds overhead to the execution, the price you must pay for being allowed to interact with Python. </p>\n\n<p>Do note this involves a lot of complexity since you need to be familiar with the API and read up what functions do with object references, how to create Lists, pack Tuples et cetera. You can skip through all these if you just create a couple of <code>public</code> Cython <code>cdef</code> functions that wrap the methods on your objects. This generates all the <code>CPython</code> code that handles these for you.</p>\n\n<p>A little example in which a silly object is wrapped and embedded might look like this (note, I'm using <code>.c</code> for this, <code>c++</code> has similar steps):</p>\n\n<pre><code>class PyClass(object):\n\n    def __init__(self):\n        self.data = []\n\n    def add(self, val):\n        self.data.append(val)\n\n    def __str__(self):\n        return \"Data: \" + str(self.data)\n\ncdef public object createPyClass():\n    return PyClass()\n\ncdef public void addData(object p, int val):\n    p.add(val)\n\ncdef public char* printCls(object p):\n    return bytes(str(p), encoding = 'utf-8')\n</code></pre>\n\n<p>Compiling with <code>cython pycls.pyx</code> (use <code>--cplus</code> for <code>c++</code>) will generate a <code>.c</code> and <code>.h</code> file containing the source and the function declarations respectively. All you need to do now is create a <code>main.c</code> file that starts up Python and you're ready to call these functions:</p>\n\n<pre><code>#include \"Python.h\"   // Python.h always gets included first.\n#include \"pycls.h\"    // Include your header file.\n\nint main(int argc, char *argv[])\n{\n    Py_Initialize();   // initialize Python\n    PyInit_pycls();    // initialize module (initpycls(); in Py2)\n    PyObject *obj = createPyClass();\n    for(int i=0; i&lt;10; i++){\n        addData(obj, i);\n    }\n    printf(\"%s\\n\", printCls(obj));\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Compiling this with the proper flags (which you can obtain from <code>python3.5-config</code> of <code>python-config</code> [Py2]):</p>\n\n<pre><code>gcc pycls.c main.c -L$(python3.5-config --cflags) -I$(python3.5-config --ldflags) -std=c99\n</code></pre>\n\n<p>Will create your executable which interacts with your object:</p>\n\n<pre><code>./a.out\nData: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>All this is done by using <code>Cython</code> along with the <code>public</code> keyword that generates the <code>.h</code> header file. You could alternatively just compile a python module with Cython and create the header/handle the additional boilerplate yourself. Since I don't think you want to get boggled down with <code>C-API</code> learning, this shouldn't be the way to go.</p>\n\n<p>As @freakish states in his comment, it would be ideal to extract the data (<a href=\"http://docs.scipy.org/doc/numpy-1.11.0/reference/c-api.array.html#c.PyArray_DATA\" rel=\"nofollow\"><code>numpy</code> has a <code>C-API</code> you can use for this</a>) and work on it in pure <code>C++</code>. Generally if you work your loops in <code>C/C++</code> and perform the grunt work there, you'll get good speed ups. </p>\n"}], "owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2648, "favorite_count": 0, "accepted_answer_id": 37592955, "answer_count": 1, "score": 3, "last_activity_date": 1464873266, "creation_date": 1464810968, "last_edit_date": 1464811264, "question_id": 37577676, "link": "https://stackoverflow.com/questions/37577676/using-python-objects-in-c", "title": "Using Python objects in C++", "body": "<p>I'm writing a code that calculates the images of nonlinear maps using methods from interval analysis, applies a minkowski sum and repeats for an arbitrary number of iterations.</p>\n\n<p>I've written a working code in Python, however I would like to be able to implement some of the more iteration/recursion intensive parts of the algorithm in C++ to benefit from the increased speed. I have used Cython in the past with great results, but I'd like to practice my C++.</p>\n\n<p>Also, my objects are complicated enough that I'd rather avoid having to implement them in C++ (baby steps!).</p>\n\n<p>So my questions are:</p>\n\n<p>1) Does using Python objects in C++ prevent any improvement in efficiency?</p>\n\n<p>2) If not, is it possible to use Cython to wrap a C++ function which iterates/recurses over a python object?</p>\n\n<p>To be more specific, I have a recursive algorithm that recurses over the left and right children of a BST (though it's a fairly heavily modified BST so I'd rather not get bogged down with the details of implementing it in C++), however the runtime is quite prohibitive, so I'd like to write it in C++.</p>\n"}, {"tags": ["c++", "build", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 2, "creation_date": 1464812257, "post_id": 37577534, "comment_id": 62642897, "body": "You don&#39;t have to rewrite the existing makefiles to add dependency information. You can add that all in one or more additional makefiles if you can specify the information manually (or auto-generate it). That can be as &quot;automatic&quot; as you can be smart about discovering the dependencies. That&#39;s, ultimately, what Electric Cloud has put serious time/work into doing, sorting out these details from <i>inside</i> a make process."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464815120, "post_id": 37577534, "comment_id": 62644422, "body": "@EtanReisner how do I auto-generate it?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464832330, "post_id": 37577534, "comment_id": 62649570, "body": "That depends <i>entirely</i> on what the dependencies are and how you can discover them. I believe at least some of EC&#39;s tools figure this out by literally tracing <code>open</code>/etc. system calls during the build to construct a profile and do this over a number of fake and then real and then re-run builds to ensure they get it right. If you can parse your files for dependencies that&#39;s one thing. If you need to run them for it (dynamic plugins, assets. etc.) that&#39;s another. There&#39;s no &quot;simple&quot; solution here (that&#39;s why EC has a meaningful product)."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464833966, "post_id": 37577534, "comment_id": 62649926, "body": "@EtanReisner I tried running &#39;make --dry-run&#39; but it failed because some of the recipes create directories which are effectively implicit prerequisites to other targets. Yeah. I guess Electric-Cloud is definitely special."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464866475, "post_id": 37577534, "comment_id": 62665573, "body": "None of the targets should have run in that case so things shouldn&#39;t have failed for missing directories/prerequisites. Auto-generated makefiles/etc. will still need to have their rules run so those <i>could</i> fail even with <code>--dry-run</code> if they were <b>really</b> written badly."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464876404, "post_id": 37577534, "comment_id": 62673164, "body": "@EtanReisner the place where my <code>--dry-run</code> fails is in <code>make -C dir1</code>. <code>make</code> tries entering a <b>directory</b> to execute a <b>makefile</b> that were both generated via a recipe from another target. Since <code>--dry-run</code> doesn&#39;t execute the recipes that create these two things, running <code>--dry-run</code> on the non-existent <b>makefile</b> in the non-existent <b>directory</b> will fail. In short, yes I know these makefiles were horribly written; I work for a services firm that inherited a project from totally diff co. My past 5 questions have to do with fixing these! Lol. I&#39;m glad that Electric-Cloud exists."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1464881893, "post_id": 37577534, "comment_id": 62677688, "body": "Ah, I see. Yeah, that&#39;s not a poorly written makefile issue that&#39;s just a poor design decision issue. That&#39;s not avoidable really (without writing the rules to understand <code>--dry-run</code>). I assume the recipe line is <code>$(MAKE) -C $&lt;</code> or similar. Because make runs lines with <code>$(MAKE)</code> even during <code>--dry-run</code> (which is often what you want). You can probably work around that but it would take some work/re-writing."}], "answers": [{"comments": [{"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1464812079, "post_id": 37577823, "comment_id": 62642796, "body": "Probably. But Electric-Cloud works without providing anything additional. I&#39;m looking for a tool like that."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1464812341, "post_id": 37577823, "comment_id": 62642935, "body": "@Adrian Well, you somehow introduce a <i>main makefile</i> for that tool, didn&#39;t you?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1464815299, "post_id": 37577823, "comment_id": 62644499, "body": "Yes there&#39;s a main makefile . . . but the only work that I&#39;m doing is replacing <code>make all</code> with <code>emake all</code>. I accept that I&#39;ll have to do SOME additional work for a free-er solution than Electric-Cloud. @EtanReisner&#39;s comment to my main question is on the right path: I need a tool to auto-generate the dependencies and then feed that into my makefile."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1465587705, "post_id": 37577823, "comment_id": 62981488, "body": "I tried editing your answer but guess it was rejected but add the following and I&#39;ll accept it. &quot;Yes I always knew that&#39;s what I had to do; the question was HOW to obtain that information using tool rather than manually. The answer is Electric-Cloud Huddle: for each job, it outputs dependencies but more importantly, even the implicit dependencies and even more specifically, filesystem I/O dependencies. I can use this information to manually add inter-job dependencies so that I can just <code>make</code> to run my build in parallel&quot;"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1464812629, "last_edit_date": 1464812629, "creation_date": 1464811573, "answer_id": 37577823, "question_id": 37577534, "link": "https://stackoverflow.com/questions/37577534/gnu-make-accelerate-non-parallel-makefile-without-modification/37577823#37577823", "title": "GNU make - accelerate non-parallel makefile without modification", "body": "<blockquote>\n  <p>I am currently using Huddle, by Electric-Cloud.com, and it does exactly what I need: it parses the makefile and then executes the jobs in parallel and accounts for the unspecified dependencies.</p>\n</blockquote>\n\n<p>I actually don't know about these tools, but can't you provide them with a <em>super makefile</em> under your control, that clarifies the inner dependencies of the various targets?</p>\n\n<p>You probably just have to add some indirection level for these (imported?) projects directory structure and another <code>Makefile</code>.</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1465498336, "creation_date": 1464810492, "last_edit_date": 1495540353, "question_id": 37577534, "link": "https://stackoverflow.com/questions/37577534/gnu-make-accelerate-non-parallel-makefile-without-modification", "title": "GNU make - accelerate non-parallel makefile without modification", "body": "<p>I have a project consisting of a set of makefiles that CANNOT be run with <code>make --jobs=N</code> because the dependencies are not specified tightly enough for <code>make</code> to correctly execute the recipes in correct order (ie I get race conditions).</p>\n\n<p>I am currently using Huddle, by Electric-Cloud.com, and it does exactly what I need: it parses the makefile and then executes the jobs in parallel and accounts for the unspecified dependencies.</p>\n\n<p>Question: is there a free or free-er thing that does this?</p>\n\n<p>Yes I know I could re-write the makefiles but project management says \"no way\".</p>\n\n<p><strong>UPDATE #1</strong></p>\n\n<p>I understand that I'll have to do <em>some</em> work to get functionality similar to Electric-Cloud's functionality.</p>\n\n<p>I know that Electric-Cloud parses the makefile(s) to find the dependencies so wouldn't the same thing be accomplished using <code>makedepend</code>?</p>\n\n<p>I'm thinking:</p>\n\n<ol>\n<li>Run <code>makedepend</code> on existing makefiles</li>\n<li>Feed in the output using <code>include &lt;makedepend.output&gt;</code></li>\n<li><code>make all --jobs=64</code> </li>\n</ol>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Turns out <code>makedepend</code> is specific to C/C++: it merely runs the pre-processor on source files and parses any <code>#include</code> statements; not what I need. </p>\n\n<p>I need what this guy is asking for:\n<a href=\"https://stackoverflow.com/questions/14563302/build-a-makefile-dependency-inheritance-tree\">Build a makefile dependency / inheritance tree</a></p>\n\n<p><strong>UPDATE 3</strong></p>\n\n<p>The makefile \"dependency graph generator\" actually already exists</p>\n\n<p><a href=\"http://plindenbaum.blogspot.com/2012/11/visualizing-dependencies-of-makefile.html?m=1\" rel=\"nofollow noreferrer\">http://plindenbaum.blogspot.com/2012/11/visualizing-dependencies-of-makefile.html?m=1</a></p>\n\n<p>but that's not going to help me. </p>\n\n<p>Many of my recipes create directories which are used by other targets' recipes, effectively making them implicit prerequisites. </p>\n\n<p>The graph dependency tool at above URL works by parsing the build log's statements but those statements don't indicate the implicit dependencies. </p>\n\n<p>Even if I try to run my makefile with <code>--dry-run</code>, the build fails because some of the recipes that aren't executed - cause it's a dry run - create directories that other invocations of <code>make</code> need simply to 'pretend execute' a recipe. </p>\n\n<p><strong>UPDATE 4</strong></p>\n\n<p>Electric-Cloud has made Huddle - 4 local cores, non-clustered - free for anyone forever.\nFurthermore, they output an .xml file that lists each job's dependencies so I can use it to fix my makefiles compatible so they're compatible with the <code>--jobs</code> option.</p>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464809746, "post_id": 37577350, "comment_id": 62641552, "body": "<code>ifstream(args[1])</code> creates a temporary. You can&#39;t bind non-const reference to it. And your first example (reftofile) defines a function, not an object."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464809820, "post_id": 37577350, "comment_id": 62641592, "body": "I added <code>const</code>, but it does not change the essential problem."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464809972, "post_id": 37577350, "comment_id": 62641678, "body": "Yes, I will explain in the answer."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1464810121, "post_id": 37577350, "comment_id": 62641751, "body": "Related, possible duplicate: <a href=\"https://stackoverflow.com/questions/24706480/why-does-stdistringstream-appear-to-resolve-differently-to-stdifstream-in-th\" title=\"why does stdistringstream appear to resolve differently to stdifstream in th\">stackoverflow.com/questions/24706480/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464810151, "post_id": 37577350, "comment_id": 62641766, "body": "@abelenky Is <code>FileIsProvided()</code> usable as <code>constexpr</code> actually?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1464810280, "post_id": 37577350, "comment_id": 62641836, "body": "I wonder who downvoted / VTCed the question. There is nothing inherently wrong with it."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1464811223, "post_id": 37577350, "comment_id": 62642334, "body": "I suspect the VTC was by a &quot;rage-voter&quot;.  My questions are frequently down-voted by someone who I suspect has a grudge against me."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464811758, "post_id": 37577350, "comment_id": 62642636, "body": "@SergeyA Well, it was me. I&#39;m not a <i>rage voter</i> or alike. Besides I grip what&#39;s the problem asked for is, the question clearly misses to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This could be easily improved."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1464812112, "post_id": 37577350, "comment_id": 62642820, "body": "That code is very nearly ready to compile as is.  Everyone else understood it.  Here&#39;s your <a href=\"http://ideone.com/CJ7vl5\" rel=\"nofollow noreferrer\"><b><i>MCVE</i></b></a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1464812480, "post_id": 37577350, "comment_id": 62642992, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I know you are not. I do not neccessarily agree with you here, but we don&#39;t have to agree on everything, do we? :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464812788, "post_id": 37577350, "comment_id": 62643153, "body": "@SergeyA <i>&quot;do we? :)&quot;</i> Certainly not. I&#39;m just failing at occasional times with my judgments though."}], "answers": [{"comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1464812315, "post_id": 37577460, "comment_id": 62642922, "body": "Forgive the edit, but I wanted to show my final solution based on your answer, without a separate post."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 2, "creation_date": 1464812372, "post_id": 37577460, "comment_id": 62642950, "body": "@abelenky - edit forgiven :) One thing though - you better to replace the rdbuf back before closing the file."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1464813287, "post_id": 37577460, "comment_id": 62643411, "body": "Alright, now my answer is downvoted. Can the venerable downvoter please provide the reasoning?"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1464813751, "last_edit_date": 1464813751, "creation_date": 1464810161, "answer_id": 37577460, "question_id": 37577350, "link": "https://stackoverflow.com/questions/37577350/initializing-reference-to-istream/37577460#37577460", "title": "Initializing reference to istream", "body": "<p>The problem with your code is following:</p>\n\n<p>Your left-hand side of the ternary operator is a temporary (rvalue). However, your right hand-side is an lvalue (<code>cin</code> is an lvalue). As a result, compiler is trying to create a temporary out of <code>cin</code>, and fails because of copy constructor being not available.</p>\n\n<p>As for the sultions - you can simply replace <code>rdbuf()</code> of cin with <code>rdbuf()</code> of your file, and use <code>cin</code> everywhere.</p>\n\n<hr>\n\n<p>Here's the ultimate solution OP came up with:</p>\n\n<pre><code>ifstream file;\nstd::streambuf* old_cin_buf = cin.rdbuf(); // Store the old value\nif (FileIsProvided())\n{\n    file.open(args[1]);\n    old_cin_buf = cin.rdbuf(file.rdbuf()); // Replace the ReadBuffer on cin.\n    // Store the previous value as well.\n}\n// Use cin for all operations now.  It will either use the File or StdIn as appropriate.\n...\n// Restore the original value, in case it was changed by using a file.\ncin.rdbuf(old_cin_buf); // This is better be done before file object here goes out of scope\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1464813104, "post_id": 37578149, "comment_id": 62643313, "body": "I don&#39;t intend to import the Boost libraries when the entire, finished program is only 70 lines long, and compiles to 20K.   In a larger-scale program this may be advisable.  But when the whole thing fits on screen at once, I don&#39;t mind managing a few items myself."}], "tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": false, "score": 1, "last_activity_date": 1464812793, "creation_date": 1464812793, "answer_id": 37578149, "question_id": 37577350, "link": "https://stackoverflow.com/questions/37577350/initializing-reference-to-istream/37578149#37578149", "title": "Initializing reference to istream", "body": "<p>This smells like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> because you don't <em>need</em> a ternary conditional or reference here.</p>\n\n<p>As a matter of convention, many programs use <code>-</code> to denote <code>stdin</code> rather than omitting a filename. That's one possible avenue. On a similar line of thought, I would use Boost.ProgramOptions or <code>getopt</code> instead of manually parsing the command line. This will indirectly solve your XY problem as it'll make the <code>FileIsProvided()</code> function redundant and you'll be getting your options via other methods than using <code>argv[1]</code> directly.</p>\n\n<p>If you have C++11, there's smart pointers or <code>std::reference_wrapper</code>, which allows you to \"reseat\" references.</p>\n\n<p>As a anti-motivator, consider that classes like <a href=\"http://en.cppreference.com/w/cpp/experimental/ostream_joiner\" rel=\"nofollow\"><code>ostream_joiner</code></a> keep a pointer to their internal stream objects, <em>not</em> a reference. Besides, I doubt that you enjoy the thought of having to deal with dangling references from innocuous looking code.</p>\n\n<p>Otherwise...</p>\n\n<pre><code>if (FileIsProvided())\n{\n    std::ifstream ifs(argv[1]);\n    if (ifs)\n    {\n        ProcessStream(ifs);\n    }\n} else {\n    ProcessStream(std::cin);\n}\n</code></pre>\n"}], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1160, "favorite_count": 1, "accepted_answer_id": 37577460, "answer_count": 2, "score": 7, "last_activity_date": 1464813751, "creation_date": 1464809668, "last_edit_date": 1495542242, "question_id": 37577350, "link": "https://stackoverflow.com/questions/37577350/initializing-reference-to-istream", "title": "Initializing reference to istream", "body": "<p>I am trying to write my program so that it can process either StdIn or a file specified on the command line.</p>\n\n<p>I'm doing this by trying to initialize a reference to an <code>istream</code> to either refer to <code>cin</code> or an <code>ifstream</code>, using a conditional.</p>\n\n<p><em>(similar techniques are described <a href=\"https://stackoverflow.com/questions/14882995/how-to-declare-a-reference-and-initialize-later\">here</a> and <a href=\"https://stackoverflow.com/questions/1305055/reference-initialization-in-c\">here</a>)</em></p>\n\n<p>But when I try with <code>ifstream</code>, I seem to get an error that the basic_istream move-constructor is declared <code>protected</code>.</p>\n\n<pre><code>istream&amp; refToCIN  ( cin );                      // This is OK\nconst istream&amp; refToFile = ifstream(args[1]);    // This is OK\n\nconst istream&amp; inStream ( FileIsProvided()? ifstream(args[1]) : cin );\n// This causes error:\n// std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;::basic_istream' : \n// cannot access protected member declared in class std::basic_istream&lt;char,std::char_traits&lt;char&gt;&gt;\n\nProcessStream(inStream); // This could either be a file or cin\n</code></pre>\n\n<p>Can this be reasonably done this way?  Is there a good alternative I'm overlooking?</p>\n"}, {"tags": ["c++", "list", "sorting", "stdlist"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1464809991, "post_id": 37577347, "comment_id": 62641688, "body": "<a href=\"http://stackoverflow.com/a/4288479/212870\">stackoverflow.com/a/4288479/212870</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1464810384, "post_id": 37577347, "comment_id": 62641888, "body": "Make the comparison function <code>static</code> and try again.  But let me warn you of the <i>strict-weak-order</i> requirement for the comparison function.  Your implementation is complex and it&#39;s hard to tell if it follows this requirement."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464811903, "post_id": 37577699, "comment_id": 62642709, "body": "Now I&#39;m getting an &quot;unresolved external symbol &quot;private: static struct Point2D GrahamScan::lowest&quot;&quot; error.  I have tried declaring my Point2D variable lowest as static to no avail."}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464812447, "post_id": 37577699, "comment_id": 62642976, "body": "@awbasham Make sure you properly declare a static variable. If you make <code>lowest</code> static, then inside GrahamClass use <code>static Point2D lowest</code>, put <code>Point2D GrahamScan::lowest</code> somewhere outside GrahamScan, and reference lowest by <code>GrahamScan::lowest</code>."}, {"owner": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464813197, "post_id": 37577699, "comment_id": 62643367, "body": "What do you mean &quot;put Point2D GrahamScan::lowest somewhere outside GrahamScan&quot;?"}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464813641, "post_id": 37577699, "comment_id": 62643605, "body": "@awbasham, I expanded my answer to illustrate."}, {"owner": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464814228, "post_id": 37577699, "comment_id": 62643949, "body": "LNK2005 &quot;public: static struct Point2D GrahamScan::lowest&quot; (?lowest@GrahamScan@@2UPoint2D@@A) already defined in ConsoleApplication2.obj error after implementing."}, {"owner": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464814406, "post_id": 37577699, "comment_id": 62644046, "body": "Or maybe the more useful error &quot;one or more multiply defined symbols found&quot;"}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "edited": false, "score": 0, "creation_date": 1464814527, "post_id": 37577699, "comment_id": 62644107, "body": "@awbasham, make sure you have the <code>Point2D GrahamScan::lowest;</code> definition in only 1 cpp file, or if it&#39;s in the header, the header doesn&#39;t get included multiple times."}], "tags": [], "owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "is_accepted": false, "score": 2, "last_activity_date": 1464813557, "last_edit_date": 1464813557, "creation_date": 1464811085, "answer_id": 37577699, "question_id": 37577347, "link": "https://stackoverflow.com/questions/37577347/custom-list-sort-comparisons-in-c/37577699#37577699", "title": "Custom list.sort comparisons in C++", "body": "<p>If you want to keep <code>compare_points</code> in <code>GrahamScan</code> namespace you need to make it static:</p>\n\n<pre><code>static bool GrahamScan::compare_points\n</code></pre>\n\n<p>The reason the compiler complains is that <code>compare_points</code> is a member function. It needs a <code>GrahamScan</code> object to be applied on. Behind the curtains the real function signature of <code>compare_points</code> is something like <code>bool compare_points(GrahamScan *this, const Point2D&amp; a, const Point2D&amp; b)</code>. So either make it static or don't define it as a member function.</p>\n\n<p>Once you make compare_points static, your lowest variable will no longer be accessible to it. Easier way to work around that is to make lowest also static:</p>\n\n<pre><code>class GrahamScan\n{\n    // declaration is inside class\n    static Point2D lowest;\n}\n\n// definition is outside class\nPoint2D GrahamScan::lowest;\n</code></pre>\n\n<p>and use it like this:</p>\n\n<pre><code>std::vector&lt;Point2D&gt; GrahamScan::getSortedPointSet(std::vector&lt;Point2D&gt; points)\n{\n    GrahamScan::lowest = getLowestPoint(points);\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6411416, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d3725b82b023c22b2877e437e87621dc?s=128&d=identicon&r=PG&f=1", "display_name": "awbasham", "link": "https://stackoverflow.com/users/6411416/awbasham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464813557, "creation_date": 1464809657, "question_id": 37577347, "link": "https://stackoverflow.com/questions/37577347/custom-list-sort-comparisons-in-c", "title": "Custom list.sort comparisons in C++", "body": "<p>I have an std::list that I'm trying to sort based on some calculations.  Point2D is a struct with only int no, double x, and double y;</p>\n\n<p>Here's the method that contains my list.sort code:</p>\n\n<pre><code>std::vector&lt;Point2D&gt; GrahamScan::getSortedPointSet(std::vector&lt;Point2D&gt; points) {\nPoint2D lowest = getLowestPoint(points);\n\nstd::list&lt;Point2D&gt; list;\n\nfor (int i = 0; i &lt; (int)points.size(); i++) {\n    list.push_back(points[i]);\n}\n\nlist.sort(compare_points);\n\nstd::vector&lt;Point2D&gt; temp;\nfor (int i = 0; i &lt; (int)list.size(); i++) {\n    temp.push_back(list.front());\n    list.pop_front();\n}\nreturn temp;\n}\n</code></pre>\n\n<p>And here's the compare_points method I wrote:</p>\n\n<pre><code>bool GrahamScan::compare_points(const Point2D&amp; a, const Point2D&amp; b) {\nif (a.x == b.x &amp;&amp; a.y == b.y) {\n    return false;\n}\n\ndouble thetaA = atan2((long)a.y - lowest.y, (long)a.x - lowest.x);\ndouble thetaB = atan2((long)b.y - lowest.y, (long)b.x - lowest.x);\n\nif (thetaA &lt; thetaB) {\n    return false;\n}\nelse if (thetaA &gt; thetaB) {\n    return true;\n}\nelse {\n    double distanceA = sqrt((((long)lowest.x - a.x) * ((long)lowest.x - a.x)) +\n        (((long)lowest.y - a.y) * ((long)lowest.y - a.y)));\n    double distanceB = sqrt((((long)lowest.x - b.x) * ((long)lowest.x - b.x)) +\n        (((long)lowest.y - b.y) * ((long)lowest.y - b.y)));\n\n    if (distanceA &lt; distanceB) {\n        return false;\n    }\n    else {\n        return true;\n    }\n}\n}\n</code></pre>\n\n<p>The error Visual Studio is spitting out at me is \"GrahamScan::compare_points\":non-standard syntax; use '&amp;' to create a pointer to member\"</p>\n\n<p>I don't have much experience in C++, but I'm trying to convert some Java code that uses a TreeSet to C++ and this is my attempt.</p>\n\n<p>Any assistance would be appreciated.</p>\n"}, {"tags": ["c++", "compilation"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1464809318, "post_id": 37577176, "comment_id": 62641334, "body": "Oh my. Just don&#39;t do that. Looks like a serious XY problem."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1464823747, "post_id": 37577176, "comment_id": 62647640, "body": "One question per question please."}], "answers": [{"comments": [{"owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "edited": false, "score": 0, "creation_date": 1464810123, "post_id": 37577322, "comment_id": 62641753, "body": "What is proper way when one wants to distribute projA? Just tell to users what they should define? Or is there any other practice?"}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "edited": false, "score": 0, "creation_date": 1464810587, "post_id": 37577322, "comment_id": 62641994, "body": "@MertMertce if you distribute in binary form you shouldn&#39;t have any defines like this. If you distribute in source form, you can add a config.h file where these macros are defined, and require the users to #include it in their code."}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 2, "last_activity_date": 1464809587, "creation_date": 1464809587, "answer_id": 37577322, "question_id": 37577176, "link": "https://stackoverflow.com/questions/37577176/do-i-need-to-redefine-preprocessor-defines-in-parent-projects/37577322#37577322", "title": "Do I need to redefine preprocessor defines in parent projects?", "body": "<p>The definitions of <code>myClass</code> used in both projects must be the same, otherwise it's a violation of <a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow\">One Definition Rule</a>, causing undefined behavior, no diagnostic required (that is, the compiler isn't required to tell you about the violation). </p>\n\n<p>So yes, you must define <code>MYVAR</code> in projB, as well as other defines affecting the definitions used in both projects.</p>\n\n<p>This applies of course, only for entities ODR-used in both projects.</p>\n"}], "owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "closed_date": 1464848771, "accepted_answer_id": 37577322, "answer_count": 1, "score": 0, "last_activity_date": 1464809587, "creation_date": 1464809055, "question_id": 37577176, "link": "https://stackoverflow.com/questions/37577176/do-i-need-to-redefine-preprocessor-defines-in-parent-projects", "closed_reason": "Needs details or clarity", "title": "Do I need to redefine preprocessor defines in parent projects?", "body": "<p>Maybe since I could not find the right keywords, I was unable to clarify my doubt on google.</p>\n\n<p>Let say I have 2 C++ projects; <strong>projA</strong> and <strong>projB</strong>.\nIn a <strong>exmpl.h</strong> file in projA, there is this condition:</p>\n\n<pre><code>class myClass\n{\n...\n#ifdef MYVAR\nvirtual ~myClass() {}\n#endif\n}\n</code></pre>\n\n<p>I define <code>MYVAR</code> as a project setting and compile projA to generate <strong>projA.a</strong> static library.</p>\n\n<p>Now, from projB, I need to use <code>exmpl.h</code> of projA. Simply I include it and compile projB using projA.a static library.</p>\n\n<p>However, imagine that in projB I did <strong>not define</strong> <code>MYVAR</code>.</p>\n\n<ul>\n<li><p>What would happen in this case? Does projB skip the code within <code>#ifdef</code>, but uses a static library which do was compiled with the code within <code>#ifdef</code>?</p></li>\n<li><p>So, is this an error and would cause unexpected behavior?</p></li>\n<li><p>Do we have to define all preprocessor defines which were used in sub-projects, also in all projects that use them?</p></li>\n</ul>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "eclipse-cdt"], "answers": [{"tags": [], "owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "is_accepted": false, "score": 0, "last_activity_date": 1485630919, "creation_date": 1485630919, "answer_id": 41913791, "question_id": 37577173, "link": "https://stackoverflow.com/questions/37577173/c-eclipse-organize-include/41913791#41913791", "title": "C++ - Eclipse - Organize include", "body": "<blockquote>\n  <p>Why is Eclipse behaving in that way?</p>\n</blockquote>\n\n<p>The type of a static data member is not required to be complete at the point of the data member's declaration. That is, the declaration will compile with the type having been just forward-declared, not defined.</p>\n\n<p>The default settings for \"Organize Includes\" try to minimize the number of headers that are included in other headers, to speed up compile times, so when a forward declaration of a type is sufficient, it prefers to create one rather than to include the header than defines the type.</p>\n\n<blockquote>\n  <p>Can I configure Eclipse in such a way that I get my way of organizing the includes (I have seen the many options, but I got things worst)</p>\n</blockquote>\n\n<p>Unchecking <code>Forward declare classes, structs and unions</code> in <code>Preferences | C/C++ | Code Style | Organize Includes</code> should give you the behaviour you desire.</p>\n"}], "owner": {"reputation": 513, "user_id": 6056446, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/608ca1aa4490b8298466e14f07590059?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideChain", "link": "https://stackoverflow.com/users/6056446/peptidechain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485630919, "creation_date": 1464809042, "question_id": 37577173, "link": "https://stackoverflow.com/questions/37577173/c-eclipse-organize-include", "title": "C++ - Eclipse - Organize include", "body": "<p>I have defined a class <code>Executer</code> splited in <code>Executer.hpp</code> and <code>Executer.cpp</code>.</p>\n\n<p>In <code>Executer.hpp</code> there is the code:</p>\n\n<pre><code>static std::unique_ptr&lt;Executer&gt; mInstance;\nstatic std::once_flag mOnceFlag;\n</code></pre>\n\n<p>In <code>Executer.cpp</code> there is the code:</p>\n\n<pre><code>std::unique_ptr&lt;Executer&gt; Executer::mInstance;\nstd::once_flag Executer::mOnceFlag; // without this apparently\n    // useless line of code, the program using this shared lib\n    // claims: undefined reference to `Executer::mOnceFlag'\n</code></pre>\n\n<p>After that I try to let eclipse organize my imports.</p>\n\n<p>What I get is:</p>\n\n<pre><code>//------------------------------- Executer.hpp\n#include &lt;memory&gt;\n#include &lt;stdexcept&gt;\n#include &lt;string&gt;\n\nnamespace std {\nstruct once_flag;\n} /* namespace std */\n//------------------------------- Executer.cpp\n#include \"Executer.hpp\"    \n#include &lt;mutex&gt;\n</code></pre>\n\n<p>What I expect (and also is compiled correctly):</p>\n\n<pre><code>//------------------------------- Executer.hpp\n#include &lt;memory&gt;\n#include &lt;mutex&gt;\n#include &lt;stdexcept&gt;\n#include &lt;string&gt;\n//------------------------------- Executer.cpp    \n#include \"Executer.hpp\"    \n</code></pre>\n\n<ol>\n<li>Why is Eclipse behaving in that way?</li>\n<li>Can I configure Eclipse in such a way that I get <em>my way</em> of organizing the includes (I have seen the many options, but I got things worst)</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464808946, "post_id": 37577080, "comment_id": 62641136, "body": "<i>&quot;What advantage am I gaining over code that would instead look like this ...&quot;</i> Well, you prevent any code trying to change it, when that&#39;s not intended?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464809011, "post_id": 37577080, "comment_id": 62641169, "body": "Your first example has no sense and there is no reason to do it (there are reasons to not!). Your second example is different - it might make sense if copy constructor for your instance is not available. But the question is unclear."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464809045, "post_id": 37577080, "comment_id": 62641184, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That doesn&#39;t really answer the crux of my question though; you could just declare the object <code>const</code> without making it a <code>const reference</code> if that was all you needed. Is there something beyond that that yields a benefit by making it a <code>const reference</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1464809062, "post_id": 37577080, "comment_id": 62641195, "body": "It is unclear to me exactly what you want.  It really depends on what you need to do with the temporary after you have it."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1464811167, "post_id": 37577080, "comment_id": 62642309, "body": "Voted to reopen since it&#39;s a clear simple question that hasn&#39;t been answered (the existing single attempted answer is not relevant)."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1464811380, "post_id": 37577080, "comment_id": 62642427, "body": "Possible duplicate: (<a href=\"http://stackoverflow.com/questions/20546981/what-is-the-rationale-for-extending-the-lifetime-of-temporaries/24895239#24895239\" title=\"what is the rationale for extending the lifetime of temporaries\">stackoverflow.com/questions/20546981/&hellip;</a>), but it&#39;s not <i>quite</i> fitting this question."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464816266, "post_id": 37577080, "comment_id": 62644979, "body": "@Xirema it is an important difference as to whether the factory method returns by value or by reference, your question should cover this (preferably show the actual factory method)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464816291, "post_id": 37577080, "comment_id": 62644992, "body": "The <code>10</code> case has nothing to do with the factory case"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1464816340, "post_id": 37577080, "comment_id": 62645012, "body": "suggest using a shorter name than <code>complicated_class_which_takes_time_to_construct</code> so readers can read the code in the question without having to scroll multiple code boxes"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1464820331, "post_id": 37577080, "comment_id": 62646567, "body": "<code>const auto&amp;</code> allow to uniformly takes return value without have to worry if it is a temporary or a const reference. So implementation may change without to create an extra copy if return value change from value to const reference."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464854868, "post_id": 37577080, "comment_id": 62657726, "body": "@M.M: Your comments are only meaningful for an incorrect and mostly meaningless interpretation of the question. It&#39;s not about using reference to <code>const</code>. It&#39;s about using that to create a lifetime extension of a temporary. Check the title. For example."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1464883145, "post_id": 37577080, "comment_id": 62678550, "body": "So is your question about <code>int</code>? Or about <code>const ClassType&amp; x = ClassType();</code>? These are different, so you should clarify"}], "answers": [{"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1464809284, "post_id": 37577203, "comment_id": 62641313, "body": "So if I&#39;m understanding correctly, it&#39;s broadly a solution for factory methods for classes which don&#39;t have copy or move constructors?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1464809366, "post_id": 37577203, "comment_id": 62641351, "body": "@Xirema Either that or they are expensive to create, so you want to make sure you only create them once."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1464809494, "post_id": 37577203, "comment_id": 62641414, "body": "Right, because in the specific situation you described, it would be impossible to copy-elide the result. Alright. That makes sense. I&#39;ll accept the answer when the system lets me."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1464811069, "post_id": 37577203, "comment_id": 62642247, "body": "<b>\u22121</b> This does not address the question of &quot;holding a Temporary&quot;. The case in this attempted answer is not about lifetime extension of a temporary."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464850004, "post_id": 37577203, "comment_id": 62654941, "body": "+1, the question is &quot;What problems are solved by holding a Temporary using <code>const T &amp;</code>?&quot; , and this answer describes one such problem."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1464851857, "post_id": 37577203, "comment_id": 62655929, "body": "@M.M Can you please clarify which <b>temporary</b> is held by a <code>const T &amp;</code> in this case?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1464853340, "post_id": 37577203, "comment_id": 62656713, "body": "@Angew I added a temporary. I thought the answer would be valid just explaining the encountered syntax choice without an actual temporary, but apparently people disagree."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1464853612, "post_id": 37577203, "comment_id": 62656898, "body": "The question is specifically about temporaries, so showing a case without a temporary is off. But the consistency of accepting return values is a very good argument. s/-1/+1/ for me."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1464854256, "post_id": 37577203, "comment_id": 62657314, "body": "@Angew: Rather than being a plus, that &quot;consistency&quot; will generally introduce bugs, inadvertently referring to a global object whose value is in the habit of changing. However, unfortunately <b>there&#39;s no way to downvote this more than once</b>. But summing up, it&#39;s an attempted answer that is (1) irrelevant, has nothing to do with the question, and (2) gives very very dangerous advice, an open invitation to a bug infestation. We need a way to say &quot;This answer has very large negative value&quot;. Downvote doesn&#39;t cover it."}], "tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": true, "score": 2, "last_activity_date": 1464853215, "last_edit_date": 1464853215, "creation_date": 1464809146, "answer_id": 37577203, "question_id": 37577080, "link": "https://stackoverflow.com/questions/37577080/what-problems-are-solved-by-holding-a-temporary-using-const-t/37577203#37577203", "title": "What problems are solved by holding a Temporary using `const T &amp;`?", "body": "<p>Imagine the factory is \"clever\" and does something like</p>\n\n<pre><code>using cc = enterprise::complicated_class_which_takes_time_to_construct;\nstruct Factory{\n    const cc &amp;create_instance(){\n        static const cc instance;\n        return instance;\n    }\n} factory;\n</code></pre>\n\n<p>and further assume <code>cc</code> is not copyable then the <code>const &amp;</code> version works while the other 2 don't. This is fairly common for classes that implement a cache and keep a local <code>map</code> of objects and you get a reference to the object inside the map.</p>\n\n<p>Edit:</p>\n\n<p>It is possible a coding guideline would say <em>Take return values from functions by <code>const &amp;</code></em>, because that works universally with values and references.</p>\n\n<pre><code>cc foo();\ncc &amp;foo();\nconst cc &amp;foo();\n</code></pre>\n\n<p>If you use <code>const cc &amp;var = foo();</code> it will work without an unnecessary copy in all the cases. Sometimes you get a temporary, sometimes you don't, but the code always does the right thing, freeing you to change the implementation and to not having to care about how the function you use returns its return-value. There is still the issue of having a <code>const</code> in there, so it is not the superior notation in all cases, but it is a viable design choice.</p>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 2, "last_activity_date": 1464848919, "creation_date": 1464848919, "answer_id": 37584243, "question_id": 37577080, "link": "https://stackoverflow.com/questions/37577080/what-problems-are-solved-by-holding-a-temporary-using-const-t/37584243#37584243", "title": "What problems are solved by holding a Temporary using `const T &amp;`?", "body": "<p>There's one \"pathological\" case that comes to mind: non-copyable and non-movable objects. Such an object <em>cannot</em> be stored by value, so holding it by a reference is your only chance:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Immovable\n{\n    Immovable(int i) : i(i) {}\n\n    Immovable(const Immovable&amp;) = delete;\n    Immovable(Immovable&amp;&amp;) = delete;\n\n    const int i;\n};\n\n\nImmovable factory()\n{\n    return {42};\n}\n\n\nint main()\n{\n    const Immovable &amp;imm = factory();\n    std::cout &lt;&lt; imm.i;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/65e4cf017fa015e7\" rel=\"nofollow\">[Live example]</a></p>\n\n<p>On a less contrived note, you dismissed the \"heavy object\" optimisation by citing copy elision. Note, however, that copy elision is <em>optional.</em> You can never guarantee that the compiler will do it. Storing the temporary in a <code>const &amp;</code>, on the contrary, <em>guarantees</em> that no copying or moving will happen.</p>\n"}, {"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1464885372, "last_edit_date": 1495541757, "creation_date": 1464852883, "answer_id": 37585451, "question_id": 37577080, "link": "https://stackoverflow.com/questions/37577080/what-problems-are-solved-by-holding-a-temporary-using-const-t/37585451#37585451", "title": "What problems are solved by holding a Temporary using `const T &amp;`?", "body": "<p>The rationale for the lifetime extension rule is known \u00b9(<a href=\"https://stackoverflow.com/questions/20546981/what-is-the-rationale-for-extending-the-lifetime-of-temporaries\">because Bjarne Stroustrup, the language creator, said so</a>) to be to have uniform simple rules. In particular, the lifetime of a temporary used as actual argument in a function call, is extended to the end of the full-expression, covering the lifetime of any reference that it's bound to. And the rule for local reference to <code>const</code>, or local rvalue reference, makes that aspect of the behavior the same.</p>\n\n<hr>\n\n<p>In C++03 one practical use case, as far as I know \u00b2<a href=\"http://www.drdobbs.com/cpp/generic-change-the-way-you-write-excepti/184403758\" rel=\"nofollow noreferrer\">invented by Petru Marginean</a>, was to create a local object of an unknown automatically deduced type, like this:</p>\n\n<pre><code>Base const&amp; o = foo( arg1, arg2, arg3 );\n</code></pre>\n\n<p>This works when <code>Base</code> is an accessible base class of any possible <code>foo</code>  result type, because the lifetime extension mechanism does not slice: it extends the lifetime of the full temporary object. When <code>foo</code> returns a <code>T</code> it's a complete <code>T</code> object that has its lifetime extended. The compiler knows <code>T</code> even though the programmer may not necessarily know <code>T</code>.</p>\n\n<p>Of course, in C++11 and later one can instead, generally, use <code>auto</code>:</p>\n\n<pre><code> auto const o = foo( arg1, arg2, arg3 );\n</code></pre>\n\n<p>With return value optimization and/or moving this will be just as efficient as Marginean's trick, and it's more clear and simple.</p>\n\n<hr>\n\n<p>However, when the type <code>T</code> is non-movable <em>and</em> non-copyable, then binding to a reference with lifetime extension of the temporary, appears to be the only way to hold on to it, which is a second use case.</p>\n\n<hr>\n\n<p>Now, surprise?, the type <code>T</code> of the full temporary object needs not be derived from the statically known type. It's enough that compiler knows that you're holding a reference to <em>a part</em> of the temporary. Whether that part is a base class sub-object, or some other sub-object, doesn't matter, so you can do:</p>\n\n<pre><code>auto const&amp; part = foo( arg1, arg2, arg3 ).a_part;\n</code></pre>\n\n<p>Which is a third use case, which is only about not introducing an otherwise never used name for the complete object, keeping the code simple.</p>\n\n<hr>\n\n<p>Standardese about the hold-on-to-a-part (and thus the whole object) case:</p>\n\n<b>C++15 \u00a712.2/5</b> [class.temporary]\n\n<blockquote>\n  <p><strong>&rdquo;</strong> The temporary to which the reference is\n  bound or the temporary that is the complete object of a subobject to which the reference is bound persists for the lifetime of the reference except &hellip;</p>\n</blockquote>\n\n<p>The exceptions include that a temporary used as actual argument in a function call, persists till the end of the full-expression, i.e. a bit longer than any formal argument reference that it's bound to.</p>\n\n<hr>\n\n<p><sup>\n\u00b9 In <a href=\"https://groups.google.com/d/msg/comp.lang.c++/nSlM8t2bUd0/h4I3x6kuMK4J\" rel=\"nofollow noreferrer\">an exchange with me in the Usenet group <em>comp.lang.c++</em></a>.<br>\n\u00b2 In the C++03 implementation of the <code>ScopeGuard</code> class, which was invented by Petru. In C++11 a <code>ScopeGuard</code> can be trivially implemented using <code>std::function</code> and <code>auto</code> in the client code's dceclaration.\n</sup></p>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 37577203, "answer_count": 3, "score": 0, "last_activity_date": 1464885372, "creation_date": 1464808767, "last_edit_date": 1592644375, "question_id": 37577080, "link": "https://stackoverflow.com/questions/37577080/what-problems-are-solved-by-holding-a-temporary-using-const-t", "title": "What problems are solved by holding a Temporary using `const T &amp;`?", "body": "<p>Like, if I write code that looks like the following:</p>\n<pre><code>const int &amp; const_value = 10;\n</code></pre>\n<p>What advantage am I gaining over code that would instead look like this:</p>\n<pre><code>int value = 10;\n</code></pre>\n<p>or</p>\n<pre><code>const int const_value = 10;\n</code></pre>\n<p>Even for a more complicated example, like</p>\n<pre><code>const enterprise::complicated_class_which_takes_time_to_construct &amp; obj = factory.create_instance();\n</code></pre>\n<p>Thanks to copy elision, both of the following code snippets shouldn't be significantly faster or less memory consuming.</p>\n<pre><code>enterprise::complicated_class_which_takes_time_to_construct obj = factory.create_instance();\n</code></pre>\n<p>or</p>\n<pre><code>const enterprise::complicated_class_which_takes_time_to_construct obj = factory.create_instance();\n</code></pre>\n<p>Is there something I'm missing that explains the use of this construct, or a hidden benefit I'm not accounting for?</p>\n<h1>Edit:</h1>\n<p>The answer provided by @nwp supplied the example of a factory method that looks like the following:</p>\n<pre><code>using cc = enterprise::complicated_class_which_takes_time_to_construct;\nstruct Factory{\n    const cc &amp;create_instance(){\n        static const cc instance;\n        return instance;\n    }\n} factory;\n</code></pre>\n<p>While this is a good example of why you'd need the exact <code>const reference</code> construct in general, it doesn't answer why it would be needed for dealing with temporaries, or why this particular construct would be better than just seating the temporary in a proper stack-allocated object, which the compiler should still be able to copy-elide in normal situations.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qbytearray", "qaudiorecorder"], "answers": [{"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1464811069, "post_id": 37577537, "comment_id": 62642248, "body": "<code>appends bytes until zero is encountered</code> - Are you sure about that? I have not got my dev PC nearby, but I am always using QByteArray for binary data, I do not recall having any issue with appending binary data (i.e. non-ASCII strings)..."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1464811295, "post_id": 37577537, "comment_id": 62642378, "body": "YES. You are using this overload: <code>QByteArray::append(const char * str)</code> and this is standard behavior inherited from ANSI C-strings."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1464811887, "post_id": 37577537, "comment_id": 62642699, "body": "well... I just made a qt project test. I made an array of char[10] and set values to <code>&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, (char) 0x00, &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, (char) 0x00</code> and then used the append <code>ba.append(&amp;arr[0], 8)</code> and it worked fine... QByteArray is not just for ANSI C-Strings... its for &quot;bytes&quot;"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 1, "creation_date": 1464812119, "post_id": 37577537, "comment_id": 62642826, "body": "Another read of the Qt docs suggests that this overload does the count as the users specifies. If count is -1 it uses qstrlen() to determine the size - which I assume <code>QByteArray::append(const char * str)</code> does as well.... so looks like you can use this as it is"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1464810508, "creation_date": 1464810508, "answer_id": 37577537, "question_id": 37577036, "link": "https://stackoverflow.com/questions/37577036/fill-qbytearray-from-qaudiobuffer/37577537#37577537", "title": "Fill QByteArray from QAudioBuffer", "body": "<p>You are using method <a href=\"http://doc.qt.io/qt-4.8/qbytearray.html#append-3\" rel=\"nofollow\">QByteArray::append</a> which does something else than you expect. This overload of append you are using appends bytes until zero is encountered. This API should be used for c-strings!</p>\n\n<p>So fix code like this:</p>\n\n<pre><code>QByteArray byteArr; // there is no point of create this on heap\nbyteArr.reserve(8*1024*1024); // reserve 8 MB - it will improve performance\n\nvoid AudioRecorder::processBuffer(const QAudioBuffer &amp;buffer)\n{\n    byteArr.append(buffer.constData&lt;char&gt;(), buffer.size());\n    qDebug() &lt;&lt; buffer.byteCount();\n    qDebug() &lt;&lt; byteArr.size();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 331, "user_id": 2142668, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3102b38249a815816a4349b33394705c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2142668/alex"}, "edited": false, "score": 0, "creation_date": 1464815763, "post_id": 37577612, "comment_id": 62644734, "body": "This worked, although I had to use <code>buffer.byteCount();</code>. And sorry, I should have mentioned that the byte array is initialized. The pointer was just out of testing."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 331, "user_id": 2142668, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3102b38249a815816a4349b33394705c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2142668/alex"}, "edited": false, "score": 0, "creation_date": 1464815880, "post_id": 37577612, "comment_id": 62644788, "body": "@Alex oh yeah, sorry... <code>.size()</code> is QByteArray, my mistake :p"}], "tags": [], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "is_accepted": true, "score": 3, "last_activity_date": 1464869896, "last_edit_date": 1464869896, "creation_date": 1464810753, "answer_id": 37577612, "question_id": 37577036, "link": "https://stackoverflow.com/questions/37577036/fill-qbytearray-from-qaudiobuffer/37577612#37577612", "title": "Fill QByteArray from QAudioBuffer", "body": "<p>You have a QByteArray pointer, but have not set it to anything.</p>\n\n<p>You need to set it to a QByteArray, in your case you can use <code>QByteArray(const char * data, int size)</code>:</p>\n\n<pre><code>byteArr = new QByteArray(buffer.constData&lt;char&gt;(), buffer.byteCount());\n</code></pre>\n\n<p>But to be honest, I am not sure why you are using a pointer.</p>\n\n<p>You could just do:</p>\n\n<pre><code>QByteArray byteArr; // Your global declaration \n   :\n   :\nbyteArr.append(buffer.constData&lt;char&gt;(), buffer.byteCount());\n</code></pre>\n\n<p>You might want to try printing like this if you are using binary data...:</p>\n\n<pre><code>qDebug() &lt;&lt; byteArr.toHex();\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 2142668, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3102b38249a815816a4349b33394705c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2142668/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 0, "accepted_answer_id": 37577612, "answer_count": 2, "score": 3, "last_activity_date": 1464869896, "creation_date": 1464808622, "question_id": 37577036, "link": "https://stackoverflow.com/questions/37577036/fill-qbytearray-from-qaudiobuffer", "title": "Fill QByteArray from QAudioBuffer", "body": "<p>My goal is to save a <code>QAudioRecorder</code> recording into memory. From my research it seems the best way to store the recording is to use a <code>QByteArray</code>. My audio recorder is probed using a <code>QAudioProbe</code>. </p>\n\n<p>From the <code>audioBufferProbed</code> signal I try to append the data to the byte array using this slot method.</p>\n\n<pre><code>QByteArray *byteArr;\n\nvoid AudioRecorder::processBuffer(const QAudioBuffer &amp;buffer)\n{\n    byteArr-&gt;append(buffer.constData&lt;char&gt;());\n    qDebug() &lt;&lt; buffer.byteCount();\n    qDebug() &lt;&lt; byteArr-&gt;size();\n}\n</code></pre>\n\n<p>However that doesn't seem to work considering <code>buffer.byteCount();</code> returns 4092 constantly which seems normal but <code>byteArr-&gt;size();</code> returns weird and irregular increments starting off usually with 2, 4, 6, 7, 189.</p>\n\n<p>The data also usually only ends up being around 18kb in size which also leads me to believe that the data is not being appended into the byte array correctly.</p>\n\n<p>According to the <a href=\"http://doc.qt.io/qt-5/qbytearray.html#size\" rel=\"nofollow\">QByteArray::size()</a> docs <code>size()</code> should give how many bytes are in the array. Along with <a href=\"http://doc.qt.io/qt-5/qaudiobuffer.html#byteCount\" rel=\"nofollow\">QAudioBuffer::byteCount()</a> which also should give the amount of bytes in the current buffer, shouldn't the full 4092 from the buffer be copied to the array?</p>\n\n<p>I am also open to another solution that doesn't use <code>QByteArray</code> if there is a better way to store the data.</p>\n"}, {"tags": ["c++", "polymorphism", "assignment-operator"], "comments": [{"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1464809414, "post_id": 37577027, "comment_id": 62641374, "body": "Use <code>dynamic_cast</code> instead, it&#39;s safer because it checks if reference is <i>really</i> refers to <code>Derived</code> object."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1464808792, "creation_date": 1464808792, "answer_id": 37577094, "question_id": 37577027, "link": "https://stackoverflow.com/questions/37577027/virtual-assignment-operator-not-allowing-static-cast/37577094#37577094", "title": "Virtual assignment operator not allowing static_cast", "body": "<p>Your code has a typo and inherently unsafe behavior. The typo is here:</p>\n\n<pre><code>virtual Base&amp; operator=(Base obj) // &lt;-- should be base&amp;\n{\n    swap(*this, static_cast&lt;Derived&amp;&gt;(obj));\n    return *this;\n}\n</code></pre>\n\n<p>If you fix this, your code should work <strong>in the simple example provided</strong>. But it would still fail at large, because how would you guarantee the argument passed to <code>operator=</code> will be in fact of <code>Derived</code> type?</p>\n"}, {"comments": [{"owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "edited": false, "score": 0, "creation_date": 1464811908, "post_id": 37577132, "comment_id": 62642714, "body": "Ah. Of course. I was trying to use the copy-swap idiom and make use of the copy-constructor, but of course that&#39;ll only create a copy of <code>Base</code>. However, does this mean copy-swap doesn&#39;t work in such a case? I can&#39;t use <code>swap()</code> on a constant reference or on an rvalue."}, {"owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "edited": false, "score": 0, "creation_date": 1464812664, "post_id": 37577132, "comment_id": 62643081, "body": "Or should I use the const reference to create a temporary object and use that in the <code>swap</code>, as what the <a href=\"http://stackoverflow.com/a/3279550/2175231\">SO C++ FAQ on copy-swap</a> calls a &quot;naive implementation of the idiom&quot;?"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1464808902, "creation_date": 1464808902, "answer_id": 37577132, "question_id": 37577027, "link": "https://stackoverflow.com/questions/37577027/virtual-assignment-operator-not-allowing-static-cast/37577132#37577132", "title": "Virtual assignment operator not allowing static_cast", "body": "<p>Passing an argument by value slices that argument.  So by the time your <code>operator=</code> function is called, you have an actual <code>Base</code>, not a <code>Derived</code>.</p>\n\n<p>I'm afraid you'll need to overload your assignment for lvalues and rvalues.</p>\n\n<pre><code>virtual Base&amp; operator=(const Base&amp;);\nvirtual Base&amp; operator=(Base&amp;&amp;);\n</code></pre>\n"}], "owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1464808902, "creation_date": 1464808594, "question_id": 37577027, "link": "https://stackoverflow.com/questions/37577027/virtual-assignment-operator-not-allowing-static-cast", "title": "Virtual assignment operator not allowing static_cast", "body": "<p>I have the following MWE code:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nclass Base{\npublic:\n    int baseMember;\n    friend void swap(Base&amp; in, Base&amp; out)\n    {\n        using std::swap;\n        swap(in.baseMember, out.baseMember);\n    }\n    virtual Base&amp; operator=(Base obj)\n    {\n        swap(*this, obj);\n        return *this;\n    }\n    Base() : baseMember(1)\n    {       \n    }\n};\nclass Derived : public Base\n{\npublic:\n    int derivedMember;\n    friend void swap(Derived&amp; in, Derived&amp; out)\n    {\n        using std::swap;\n        swap(in.derivedMember, out.derivedMember);\n        swap(static_cast&lt;Base&amp;&gt;(in), static_cast&lt;Base&amp;&gt;(out));\n    }\n    virtual Base&amp; operator=(Base obj)\n    {\n        swap(*this, static_cast&lt;Derived&amp;&gt;(obj));\n        return *this;\n    }\n    Derived() : Base(), derivedMember(2)\n    {\n    }\n};\n\nint main()\n{\n    Base *b1 = new Derived();\n    Base *b2 = new Derived();\n    *b1 = *b2;\n    delete b1;\n    delete b2;\n}\n</code></pre>\n\n<p>I have two <code>Base</code> pointers pointing to <code>Derived</code> data. I then do an assignment of the contents of the pointers. Since the <code>Base</code> class' assignment operator is <code>virtual</code>, polymorphism kicks in and the assignment operator of the <code>Derived</code> class (with the same signature) is called instead.</p>\n\n<p>However, the <code>static_cast</code> to transform the source into a <code>Derived</code> object fails. Or, well, it successfully transforms it into a <code>Derived</code> object, but its <code>derivedMember</code> is garbage (after being initially set in the constructor).</p>\n\n<p>How can this be avoided? How can an assignment between the <code>Derived</code> contents of two <code>Base</code> pointers be done?</p>\n"}, {"tags": ["c++", "visual-studio", "file", "visual-c++", "file-io"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464807953, "post_id": 37576831, "comment_id": 62640640, "body": "MSVS By default sets the working directory to the directory where the project and source code files are located."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1464807969, "post_id": 37576831, "comment_id": 62640647, "body": "When you run it in the debugger?  You need to set the working directory in the options for the solution."}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1464808016, "post_id": 37576831, "comment_id": 62640676, "body": "@RetiredNinja yes, when I&#39;m debugging. But would this hold for a Release build too?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464808631, "post_id": 37576831, "comment_id": 62640973, "body": "@audiFanatic -- You can debug release builds in Visual Studio, and you can run debug builds outside of Visual Studio, so your question is not clear.  When you say &quot;release build&quot; do you mean when you run it outside of Visual Studio?"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464808695, "post_id": 37576831, "comment_id": 62640999, "body": "@PaulMcKenzie correct"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464808922, "post_id": 37576831, "comment_id": 62641121, "body": "@audiFanatic - Well, you&#39;re at the mercy of the relative path issue.  I guess wherever the .exe file is run is where that file needs to be located, unless you set the working directory programatically."}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1464809040, "post_id": 37576831, "comment_id": 62641181, "body": "That&#39;s the problem. When I put the file in the same directory as the exe, it does not work. However, when I put it one level up, it does."}], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1464873791, "post_id": 37584990, "comment_id": 62671042, "body": "I&#39;m using VC++6, not quite the same. But there is a spot for the working directory. Not sure that I can use path macros unfortunately."}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1464874390, "post_id": 37584990, "comment_id": 62671513, "body": "Eh, I&#39;ve gotten help with it before here. Not my first choice of IDE. it&#39;s unfortunately what&#39;s been forced upon me."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1464894610, "post_id": 37584990, "comment_id": 62685296, "body": "I don&#39;t have any access to VC6. I cannot show the screenshot, nor the instructions to set current directory. Can you not find how to set &quot;Current working directory&quot; for current project? How hard is that?"}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1464851496, "creation_date": 1464851496, "answer_id": 37584990, "question_id": 37576831, "link": "https://stackoverflow.com/questions/37576831/visual-c6-looking-for-text-file-in-the-solution-directory-rather-than-output/37584990#37584990", "title": "Visual C++6 looking for text file in the &quot;solution&quot; directory rather than output directory", "body": "<p>For both Debug and Release projects, specify same path in project settings <strong>Debugging -> Working Directory</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pHfqB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pHfqB.png\" alt=\"enter image description here\"></a>\nOther than this, ensure you run the program from Windows Explorer (or command propmpt from the same path). You may need to create a shortcut, where you'd specify <strong>directory</strong>.</p>\n\n<p>Since you are on Windows, you can also use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365530(v=vs.85).aspx\" rel=\"nofollow noreferrer\">SetCurrentDirectory</a> within your program.</p>\n"}], "owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1464851496, "creation_date": 1464807860, "question_id": 37576831, "link": "https://stackoverflow.com/questions/37576831/visual-c6-looking-for-text-file-in-the-solution-directory-rather-than-output", "title": "Visual C++6 looking for text file in the &quot;solution&quot; directory rather than output directory", "body": "<p>I have a VC++6 project and I have the following code snippet:</p>\n\n<pre><code>string s;\nint i=0, indx;\nifstream myReadFile;\n\nmyReadFile.open(\"chanmap.txt\");\n</code></pre>\n\n<p>For some reason, when I run the program, it is looking for the text file in the \"solution\"/root/dsw directory rather than the output directory (i.e. Debug folder) This is a legacy project, so I'm sure that some settings were probably mangled here and there. But this IDE is almost as old as me and very foreign. Any help is appreciated.</p>\n"}, {"tags": ["c++", "templates", "design-patterns", "factory", "c++03"], "answers": [{"comments": [{"owner": {"reputation": 21830, "user_id": 946850, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd2b0800be217835ac2c333a654fa67f?s=128&d=identicon&r=PG", "display_name": "krlmlr", "link": "https://stackoverflow.com/users/946850/krlmlr"}, "edited": false, "score": 0, "creation_date": 1464808366, "post_id": 37576886, "comment_id": 62640839, "body": "Thanks. Is this compatible with C++03? How would that work with only one template argument for <code>Create</code>?"}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1464808082, "creation_date": 1464808082, "answer_id": 37576886, "question_id": 37576790, "link": "https://stackoverflow.com/questions/37576790/factory-with-switch-over-enum-that-instantiates-templates/37576886#37576886", "title": "Factory with switch over enum that instantiates templates", "body": "<p>You could make it a template</p>\n\n<pre><code>template&lt;typename Base, typename Derive, template&lt;Derive&gt; class Derived&gt;\nBase* Base::Create(Derive t) {\n  switch (t) {\n  case Derive::A: return new Derived&lt;Derive::A&gt;;\n  case Derive::B: return new Derived&lt;Derive::B&gt;;\n  case Derive::C: return new Derived&lt;Derive::C&gt;;\n  default: return nullptr;\n  }\n}\n</code></pre>\n\n<p>but that assumes that there are only ever <code>A</code>, <code>B</code>, and <code>C</code> in <code>struct enum Derive</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21830, "user_id": 946850, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd2b0800be217835ac2c333a654fa67f?s=128&d=identicon&r=PG", "display_name": "krlmlr", "link": "https://stackoverflow.com/users/946850/krlmlr"}, "edited": false, "score": 0, "creation_date": 1464810846, "post_id": 37577066, "comment_id": 62642137, "body": "Thanks. I&#39;d still need at least one switch(t), because I still get plain old enums as input. That&#39;s fine, I guess. Would you like to sketch an implementation for two Base -&gt; Derived hierarchies?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 21830, "user_id": 946850, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd2b0800be217835ac2c333a654fa67f?s=128&d=identicon&r=PG", "display_name": "krlmlr", "link": "https://stackoverflow.com/users/946850/krlmlr"}, "edited": false, "score": 0, "creation_date": 1464814925, "post_id": 37577066, "comment_id": 62644319, "body": "Not really; I have every confidence you can fill in the detail."}], "tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 1, "last_activity_date": 1464808704, "creation_date": 1464808704, "answer_id": 37577066, "question_id": 37576790, "link": "https://stackoverflow.com/questions/37576790/factory-with-switch-over-enum-that-instantiates-templates/37577066#37577066", "title": "Factory with switch over enum that instantiates templates", "body": "<p>Instead of using a C++ style enum you could use a Java style enum where each value is a singleton of a class derived from a common base. </p>\n\n<p>Then define a set of pure virtual functions on the base class that create the desired flavour of derived class, and implement them appropriately in each of the singletons.</p>\n\n<p>Then instead of <code>switch (t) ...</code> you can use <code>t-&gt;createDerived()</code>.</p>\n\n<p>Or to put it more succinctly: replace switch with polymorphism.</p>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1464813561, "last_edit_date": 1464813561, "creation_date": 1464812298, "answer_id": 37578027, "question_id": 37576790, "link": "https://stackoverflow.com/questions/37576790/factory-with-switch-over-enum-that-instantiates-templates/37578027#37578027", "title": "Factory with switch over enum that instantiates templates", "body": "<p>We can abstract away the Factory details, and rely on the client to provide us the mapping of enum to class type:</p>\n\n<pre><code>template&lt;typename ENUM, typename T&gt;\nstruct Factory\n{\n    typedef std::map&lt;ENUM, T*(*)()&gt; map_type;\n    static map_type factoryMapping_;\n\n    static T* Create(ENUM c)\n    {\n        return factoryMapping_[c]();\n    }\n\n    static void Init(map_type _mapping)\n    {\n        factoryMapping_ = _mapping;\n    }\n};\n\ntemplate&lt;typename ENUM, typename T&gt;\ntypename Factory&lt;ENUM, T&gt;::map_type Factory&lt;ENUM,T&gt;::factoryMapping_;\n</code></pre>\n\n<p>Now it's the client's job to provide us methods for creating a <code>Base*</code> given some enum value.</p>\n\n<p>If you're willing and able to abstract away the creation of a derived class with a template, then you can save a fair bit of typing.</p>\n\n<p>What I mean is, let's create a templated function to create a derived class (without any real checking for correctness):</p>\n\n<pre><code>template&lt;typename Base, typename Derived&gt;\nBase* CreateDerived()\n{\n    return new Derived();\n}\n</code></pre>\n\n<p>Now I can define an enum and associated class hierarchy:</p>\n\n<pre><code>enum ClassType {A, B};\nstruct Foo\n{\n    virtual void PrintName() const\n    {\n        std::cout &lt;&lt; \"Foo\\n\";\n    }\n};\n\ntypedef Factory&lt;ClassType, Foo&gt; FooFactory ;\n\nstruct DerivedOne : public Foo\n{\n    virtual void PrintName() const\n    {\n        std::cout &lt;&lt; \"DerivedOne\\n\";\n    }\n};\n\nstruct DerivedTwo : public Foo\n{\n    virtual void PrintName() const\n    {\n        std::cout &lt;&lt; \"DerivedTwo\\n\";\n    }\n};\n</code></pre>\n\n<p>And then use it like so:</p>\n\n<pre><code>// set up factory\nstd::map&lt;ClassType, Foo*(*)()&gt; mapping;\nmapping[A] = &amp;CreateDerived&lt;Foo, DerivedOne&gt;;\nmapping[B] = &amp;CreateDerived&lt;Foo, DerivedTwo&gt;;\nFooFactory::Init(mapping);\n\n// Use the factory\nFoo* f = FooFactory::Create(A);\nf-&gt;PrintName();\n</code></pre>\n\n<h2><a href=\"http://coliru.stacked-crooked.com/a/46076a7da72294a3\" rel=\"nofollow\">Live Demo</a></h2>\n\n<p>Of course this simplifies your problem a bit, namely moving the factory details out of the base class and ignoring for a minute that the children themselves are templated. Depending on how hard it is in your domain to create a good <code>CreateDerived</code> function for each type, you may not end up saving a ton of typing.</p>\n\n<p><strong>EDIT</strong>: We can modify our <code>Create</code> function to return NULL by taking advantage of <a href=\"http://en.cppreference.com/w/cpp/container/map/find\" rel=\"nofollow\">std::map::find</a>. I omitted it for brevity. If you concerned about performance, then yes, an O(log n) search is slower asymptotically than a simple switch, but I strongly doubt this will wind up being the hot path.</p>\n"}], "owner": {"reputation": 21830, "user_id": 946850, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd2b0800be217835ac2c333a654fa67f?s=128&d=identicon&r=PG", "display_name": "krlmlr", "link": "https://stackoverflow.com/users/946850/krlmlr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1464813561, "creation_date": 1464807734, "question_id": 37576790, "link": "https://stackoverflow.com/questions/37576790/factory-with-switch-over-enum-that-instantiates-templates", "title": "Factory with switch over enum that instantiates templates", "body": "<p>I have the following hierarchy pattern in various places in the codebase:</p>\n\n<pre><code>enum DerivedType {\n    A, B, C };\n\nclass Base {\npublic:\n  static Base* Create(DerivedType t);\n};\n\ntemplate &lt;DerivedType T&gt;\nclass Derived : public Base {\n};\n</code></pre>\n\n<p>The <code>Create</code> method returns a new object of class <code>Derived&lt;A&gt;</code>, <code>Derived&lt;B&gt;</code>, or  <code>Derived&lt;C&gt;</code>, depending on its argument:</p>\n\n<pre><code>Base* Base::Create(DerivedType t) {\n  switch (t) {\n  case A: return new Derived&lt;A&gt;;\n  case B: return new Derived&lt;B&gt;;\n  case C: return new Derived&lt;C&gt;;\n  default: return NULL;\n  }\n}\n</code></pre>\n\n<p>The problem is that there are many such <code>Base -&gt; Derived</code> hierarchies, with essentially the same implementation of <code>Create()</code> copy-pasted all over the place. Is there an elegant, yet easy-to-understand way to avoid duplication here?</p>\n"}, {"tags": ["c++", "qt", "io"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1464807662, "post_id": 37576687, "comment_id": 62640518, "body": "Your code is totally messed up. You&#39;re missing a <code>;</code> at the end of the <code>myFile&lt;&lt;</code> line, and you have unmatched <code>{</code> characters. Please post code that will actually compile."}, {"owner": {"reputation": 11, "user_id": 6411209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c674346481e945c7c3a9b121db3c18ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6411209/dan"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464807732, "post_id": 37576687, "comment_id": 62640546, "body": "oh im sorry those are typos when i made this question , my main code is fine lol ill fix the post"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464807758, "post_id": 37576687, "comment_id": 62640563, "body": "Please also post a readable example of the input file."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1464808018, "post_id": 37576687, "comment_id": 62640678, "body": "This has absolutely nothing to do with Qt aside from the use of <code>qDebug</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464808168, "post_id": 37576687, "comment_id": 62640744, "body": "You still have unmatched braces. There&#39;s no closing brace for the <code>addReadings</code> and <code>read</code> functions."}, {"owner": {"reputation": 11, "user_id": 6411209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c674346481e945c7c3a9b121db3c18ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6411209/dan"}, "edited": false, "score": 0, "creation_date": 1464808519, "post_id": 37576687, "comment_id": 62640910, "body": "lol Eric i&#39;m working on qt creator thats why i added the tag , should i remove it ?"}, {"owner": {"reputation": 11, "user_id": 6411209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c674346481e945c7c3a9b121db3c18ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6411209/dan"}, "edited": false, "score": 1, "creation_date": 1464808617, "post_id": 37576687, "comment_id": 62640963, "body": "Barmar i think fixed the mistakes"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464808771, "post_id": 37576687, "comment_id": 62641034, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1474790/how-to-read-write-into-from-text-file-with-comma-separated-values\">How to read-write into/from text file with comma separated values</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464808809, "post_id": 37576687, "comment_id": 62641057, "body": "The problem is that you&#39;re using comma as the <code>getline</code> delimiter. So it skips over the newlines to get to the next comma. See the duplicate question for the proper way to do it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464808891, "post_id": 37576687, "comment_id": 62641097, "body": "Why do you use comma as the delimiter when the question says that the numbers are separated by <code>|</code>? And what about the parentheses? Is <code>(1 | 10)</code> really the format of your file?"}, {"owner": {"reputation": 11, "user_id": 6411209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c674346481e945c7c3a9b121db3c18ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6411209/dan"}, "edited": false, "score": 1, "creation_date": 1464809135, "post_id": 37576687, "comment_id": 62641239, "body": "No , excuse my messy question, i typed the (1 | 10) just for the example , i&#39;m not using parentheses or this | in my file , i use excel to read the csv so its just 1 simple integer in each cell, and im using the coma to separate the cells and the \\r for new rows"}, {"owner": {"reputation": 11, "user_id": 6411209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c674346481e945c7c3a9b121db3c18ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6411209/dan"}, "edited": false, "score": 0, "creation_date": 1464811154, "post_id": 37576687, "comment_id": 62642305, "body": "i tried the solution in the question you linked and is till have the same problem :("}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1464813362, "post_id": 37576687, "comment_id": 62643448, "body": "In Qt Creator, please create a new project, with only <code>main.cpp</code> in it, and write a minimal, stand-alone, correct test case that reproduces the issue. Make sure you do Ctrl-A, Ctrl-I to indent it properly, then post it here."}], "answers": [{"tags": [], "owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1464818301, "last_edit_date": 1464818301, "creation_date": 1464813694, "answer_id": 37578402, "question_id": 37576687, "link": "https://stackoverflow.com/questions/37576687/reading-a-csv-file-with-the-getline-function-is-not-working-properly/37578402#37578402", "title": "Reading a CSV file with the getline() function is not working properly", "body": "<p>Your problem is that on second call <code>getline</code> is returning <code>10\\n2</code>. Then <code>atoi</code> converts this to 10. So you lose the 2. <code>getline</code> is supposed to discard newlines so I'm not sure why this is happening. It's a bit ugly, but parse <code>10\\n2</code> in <code>data</code> to pick up anything after <code>\\n</code> and add to vector.</p>\n\n<p>I tested this with VC 2013 and that is the behaviour of <code>getline</code> with delimiter. I googled around and it does seem as if it is intended behaviour that <code>getline</code> with delimiter treats newline as a literal character. This works:</p>\n\n<pre><code>string line;\nfor (int i = 0; std::getline(myFile, line); i++)\n{\n    stringstream ss(line);\n    for (int i = 0; std::getline(ss, data, ','); i++)\n    {\n        values.insert(values.end(), atoi(data.c_str()));\n    }\n}\nfor (int i = 0; i &lt; values.size(); i++)\n{\n    cout &lt;&lt; \"vec=\" &lt;&lt; values[i] &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6411209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c674346481e945c7c3a9b121db3c18ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/6411209/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 757, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464820646, "creation_date": 1464807362, "last_edit_date": 1464820646, "question_id": 37576687, "link": "https://stackoverflow.com/questions/37576687/reading-a-csv-file-with-the-getline-function-is-not-working-properly", "title": "Reading a CSV file with the getline() function is not working properly", "body": "<p>I'm working on an app in QT, and I'm kinda new to C++ I/O; I want to read some data from a CSV file that currently has 2 columns and some rows, for example: (1 | 10)  (2 | 20) I just want to store them in an array like this (1,10,2,20); for some, only values from the second column get stored in my array. Here is some code; I've checked many times, but I still can't see what I'm doing wrong:</p>\n\n<pre><code>void readingFiles::openFile(){\n\nofstream myFile;\nmyFile.open(\"/home/Dan/Desktop/mainFile.csv\" ,std::ios::app);}\n\nvoid readingFiles::addReadings(int readings1 , int readings2){\n\n\n\n    if(myFile.is_open()){\n\n            myFile&lt;&lt;readings1&lt;&lt;\",\"&lt;&lt;readings2&lt;&lt;\"\\r\";\n            myFile.close();\n\n\n}\n}\n\nvector&lt;int&gt; values ;\nifstream iFile;\niFile.open(\"/home/Dan/Desktop/mainFile.csv\");}\nstring data;\n\nvoid readingFiles::read(){\n  for(int i =0; std::getline(iFile,data, ',') ; i++){\n             values.insert(values.end() , atoi(data.c_str())); \n             qDebug(\"vector list is %i\" , values[i]);}\n}\n</code></pre>\n\n<p>So, the result I get is that it reads the first row in the first column, then moves to read from the second column, and never goes back to the first (1, 10, 20, 30, 40 etc). Again, what I'm trying to get is (1, 10, 2, 20, 3, 30 etc.).</p>\n"}, {"tags": ["c++", "c++11", "namespaces"], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 8, "last_activity_date": 1464807427, "creation_date": 1464807427, "answer_id": 37576707, "question_id": 37576671, "link": "https://stackoverflow.com/questions/37576671/is-there-a-way-to-call-a-class-in-a-global-namespace/37576707#37576707", "title": "Is there a way to call a class in a global namespace?", "body": "<p>You can force the name lookup to begin at the global scope using a leading <code>::</code>.</p>\n\n<pre><code>::UserInterface::UiClass uiClass;\n</code></pre>\n"}], "owner": {"reputation": 2501, "user_id": 1078232, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fb6d0399965f116e29f112b8fbea4734?s=128&d=identicon&r=PG", "display_name": "Pittfall", "link": "https://stackoverflow.com/users/1078232/pittfall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 37576707, "answer_count": 1, "score": 2, "last_activity_date": 1464807464, "creation_date": 1464807293, "question_id": 37576671, "link": "https://stackoverflow.com/questions/37576671/is-there-a-way-to-call-a-class-in-a-global-namespace", "title": "Is there a way to call a class in a global namespace?", "body": "<p>I have a tough time wording this question but here's my code to start:</p>\n\n<pre><code>namespace UserInterface\n{\n   class UiClass\n   {\n   };\n}\n\nnamespace Project\n{\n   namespace UserInterface\n   {\n\n   }\n}\n\n\nnamespace Project\n{\n   UserInterface::UiClass uiClass;\n}\n</code></pre>\n\n<p>So that code won't work because a <code>UserInterface</code> is a global namespace but it's also inside <code>Project</code> so when I instaniate <code>UiClass</code> inside <code>Project</code> it tries to look inside <code>Project-&gt;UserInterface</code> instead of just <code>UserInterface</code>.  Is there a some way to be specific that I want to use the global <code>UserInterface</code> and not the one inside <code>Project</code> or do I need to change my design?  </p>\n"}, {"tags": ["c++", "visual-studio-2010"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1464806820, "post_id": 37576492, "comment_id": 62640120, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please! (This includes to post verbatim error messages in your question)"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464808351, "post_id": 37576492, "comment_id": 62640831, "body": "Do NOT start user-defined identifiers with an underscore ! (if your lib has a function named fm_lookup inside it ,it might not get linked in)"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464808515, "post_id": 37576492, "comment_id": 62640907, "body": "I removed the underscore, but I&#39;m still getting the same error"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 1, "creation_date": 1464808578, "post_id": 37576492, "comment_id": 62640942, "body": "Too bad, but it&#39;s illegal anyway,"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464808681, "post_id": 37576492, "comment_id": 62640992, "body": "Thanks, I&#39;ll keep it in mind going forward."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464810036, "post_id": 37576492, "comment_id": 62641710, "body": "So you use it during compilation ,but do you actually link the library ?"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464810279, "post_id": 37576492, "comment_id": 62641835, "body": "I&#39;ve included the internal2003.lib file as an additional dependency into the project, yes. It also shows up under the command line"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464810702, "post_id": 37576492, "comment_id": 62642056, "body": "what is the extension of the sourcefile with the function thrabs( ... ) ? if it&#39;s .cpp than your function is probably not a c-function but a c++-function."}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464810933, "post_id": 37576492, "comment_id": 62642185, "body": "I&#39;m calling thrabs from a .cpp file, but thrabs is declared in a .h file. I&#39;ve surrounded all the declarations with extern &quot;c&quot; since the static-library being used was created in c. Does that makes sense?"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464811310, "post_id": 37576492, "comment_id": 62642383, "body": "Did you try it without extern C around the include directive ? In regard to the c or c++ issue : many compilers determine how to compile (c or c++) from the extension used by source files ( .c == c and .cpp == c++)"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464811410, "post_id": 37576492, "comment_id": 62642444, "body": "I did ya, no dice :-(."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464812075, "post_id": 37576492, "comment_id": 62642793, "body": "after reading your description of the problem again : In hthres.c you must have a reference to an externally defined symbol _fm_lookup ! If this symbol is to be defined by the user(s) of the library then this IMHO a design-flaw better to be corrected or documented better."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464812497, "post_id": 37576492, "comment_id": 62643001, "body": "try extern C around the definition of _fm_lookup ( NOTE with the _ )"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464812515, "post_id": 37576492, "comment_id": 62643014, "body": "Hmm, I&#39;m not entirely sure if I follow. I need to define somewhere _fm_lookup? Where would I define this and how would the .lib file know it&#39;s there."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464812810, "post_id": 37576492, "comment_id": 62643166, "body": "you removed the undersore from _fm_lookup ,not ? put the underscore back (for now) and put extern C in front of the definition. If it builds well then that was a/the problem.."}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464813894, "post_id": 37576492, "comment_id": 62643747, "body": "The compiler doesn&#39;t like that. Thanks for your help. This is painful."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464814193, "post_id": 37576492, "comment_id": 62643923, "body": "sorry ,got sloppy ,meant of course extern &quot;C&quot;"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464814462, "post_id": 37576492, "comment_id": 62644070, "body": "I knew what you meant. It didn&#39;t like it because I was declaring inside a class, so I moved it outside and it still doesn&#39;t work."}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464814861, "post_id": 37576492, "comment_id": 62644289, "body": "I wonder is it because the name of my .h and .cpp file is different."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464815302, "post_id": 37576492, "comment_id": 62644500, "body": "Difference in filenames doesn&#39;t have influence. Has the source-file of hthres.obj a .cpp or a .c extension ?"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464815465, "post_id": 37576492, "comment_id": 62644583, "body": "I have no idea how to find that out since hthres is part of a .lib that I have no access to the internals of. It&#39;s 3rd party."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464816506, "post_id": 37576492, "comment_id": 62645101, "body": "Almost out of ideas. Last idea : place your algorithm in a function in a .c file and call this new c-function instead."}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464816655, "post_id": 37576492, "comment_id": 62645163, "body": "I&#39;ll try it tomorrow and report back. Thanks for your time."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1464816727, "post_id": 37576492, "comment_id": 62645207, "body": "good luck, and sometimes painfull is educational"}, {"owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "edited": false, "score": 0, "creation_date": 1464820879, "post_id": 37576492, "comment_id": 62646769, "body": "It worked. Couldn&#39;t go to bed without one last try!!! I&#39;ve learned a lot today. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 1, "creation_date": 1464863024, "post_id": 37579967, "comment_id": 62663371, "body": "Congrats ! Glad to see that my last suggestion worked."}, {"owner": {"reputation": 2713, "user_id": 2016831, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ba446f99c6f43a5a59255faaba912d9f?s=128&d=identicon&r=PG", "display_name": "bluejayke", "link": "https://stackoverflow.com/users/2016831/bluejayke"}, "edited": false, "score": 0, "creation_date": 1604036870, "post_id": 37579967, "comment_id": 114230261, "body": "how exactly was it done? how did you call it from C++? is it possible at all?"}], "tags": [], "owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "is_accepted": false, "score": 2, "last_activity_date": 1464820951, "creation_date": 1464820951, "answer_id": 37579967, "question_id": 37576492, "link": "https://stackoverflow.com/questions/37576492/called-c-static-library-with-everything-wrapped-in-extern-c-and-its-still-not/37579967#37579967", "title": "Called C static library with everything wrapped in extern &quot;C&quot; and it&#39;s still not working", "body": "<p>Needed to move the offending code into its own c file and call it from there while using extern \"C\". Painful lesson learned.</p>\n"}], "owner": {"reputation": 89, "user_id": 2984023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4fabc713fdee2e61d38d76802f8bfcb?s=128&d=identicon&r=PG&f=1", "display_name": "daithioronain", "link": "https://stackoverflow.com/users/2984023/daithioronain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "closed_date": 1464978237, "answer_count": 1, "score": 0, "last_activity_date": 1464820951, "creation_date": 1464806696, "last_edit_date": 1464809477, "question_id": 37576492, "link": "https://stackoverflow.com/questions/37576492/called-c-static-library-with-everything-wrapped-in-extern-c-and-its-still-not", "closed_reason": "Duplicate", "title": "Called C static library with everything wrapped in extern &quot;C&quot; and it&#39;s still not working", "body": "<p>I'm calling a C static-link library in VS2010 by wrapping the header file with extern \"C\", but I'm still getting a LNK2001: unresolved external symbol. I'm calling the same .lib file somewhere else with no problems and I'm reusing old code from somewhere else that definitely works. The code I'm using can be found at github.com/toots/microsoft-audio-watermarking. I'm trying to use the \"thrabs\" function found in hthres.h. I can't think of any obvious reasons it's not working. Here's the example code. <code>thrabs</code> is the c external. Is it possible my variable <code>_fm_lookup</code> which is normally defined in C++ is the problem?</p>\n\n<pre><code>int i;\nfor(i = 0; i &lt; NFREQ; i++) \n    _fm_lookup[i] = thrabs((0.5 + i) * (float) fs * 0.5 / (float) NFREQ);\n</code></pre>\n\n<p>the C static lib is being included by using</p>\n\n<p><code>extern \"C\"\n{\n    #include \"htres.h\"\n}</code></p>\n\n<p>the error is</p>\n\n<pre><code>Error   37  error LNK2001: unresolved external symbol _fm_lookup    C:\\Users\\David\\Documents\\Projects\\watermarking\\Builds\\VisualStudio2010\\internal2003.lib(hthres.obj)\n</code></pre>\n"}, {"tags": ["c#", "c++", "graphics", "directx", "uwp"], "comments": [{"owner": {"reputation": 1853, "user_id": 1779027, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/57d8e023069b5223aaaa6726c870fe2f?s=128&d=identicon&r=PG", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/1779027/vishnu"}, "edited": false, "score": 0, "creation_date": 1501677718, "post_id": 37576284, "comment_id": 77882561, "body": "I&#39;m also getting same issue. Found any solution?"}, {"owner": {"reputation": 303, "user_id": 2272235, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a68259d69c46dc51a6115495520af88d?s=128&d=identicon&r=PG", "display_name": "Nolan Blew", "link": "https://stackoverflow.com/users/2272235/nolan-blew"}, "reply_to_user": {"reputation": 1853, "user_id": 1779027, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/57d8e023069b5223aaaa6726c870fe2f?s=128&d=identicon&r=PG", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/1779027/vishnu"}, "edited": false, "score": 0, "creation_date": 1502213513, "post_id": 37576284, "comment_id": 78108689, "body": "@Vishnu, I unfortunately have not. I ended up changing our internal code to work around this issue. It&#39;s dumb, but basically we are writing to a stream, then reading the stream in c# and writing the file headers there. Apologies for a poor solution"}], "owner": {"reputation": 303, "user_id": 2272235, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a68259d69c46dc51a6115495520af88d?s=128&d=identicon&r=PG", "display_name": "Nolan Blew", "link": "https://stackoverflow.com/users/2272235/nolan-blew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464805933, "creation_date": 1464805933, "question_id": 37576284, "link": "https://stackoverflow.com/questions/37576284/uwp-bitmapencoder-setproperties-is-not-supported", "title": "UWP BitmapEncoder SetProperties is not supported", "body": "<p>So I'm creating a UWP app and need to write text and images to an image file and save them. I've currently created a D2D wrapper in C++ using <a href=\"https://code.msdn.microsoft.com/windowsapps/How-to-add-wartermark-f6313fad/view/SourceCode\" rel=\"nofollow\">this source</a> and then a C# wrapper that simply lets you access the functions of the C++ class in nice C# code (it does nothing else but access the WINMD C++ wrapper).</p>\n\n<p>However, after we write the image and text to the stream, we need to be able to save the file <b>with EXIF headers</b> containing info about rotation and location.</p>\n\n<p>We are using <code>encoder.BitmapProperties.SetPropertiesAsync</code> to accomplish this, but it returns:</p>\n\n<pre><code>Exception thrown: 'System.Exception' in Tester.exe\n\nAdditional information: The operation is unsupported. (Exception from HRESULT: 0x88982F81)\n</code></pre>\n\n<p>There is no inner exception and the stack trace is:</p>\n\n<pre><code>   at Windows.Graphics.Imaging.BitmapEncoder.get_BitmapProperties()\n   at Tester.ViewModels.&lt;_SaveImageWithPropertiesAsync&gt;d__56.MoveNext()\n</code></pre>\n\n<p>I want to try to avoid manually adding the headers, as I fear the returned stream from the D2DContext doesn't contain any header information or whatnot so it can't append anything to it.</p>\n\n<p>Here is the relevant part of my code:</p>\n\n<h2>C++</h2>\n\n<p>Again, you can find the original source <a href=\"https://code.msdn.microsoft.com/windowsapps/How-to-add-wartermark-f6313fad/view/SourceCode\" rel=\"nofollow\">here</a></p>\n\n<pre><code>IRandomAccessStream^ D2DWrapper::EndDraw()\n{\n    DX::ThrowIfFailed(\n        m_d2dContext-&gt;EndDraw()\n    );\n\n    // If needPreview is true, we return a valid IRandomAccessStream reference.\n\n    GUID wicFormat = GUID_ContainerFormatBmp;\n    ComPtr&lt;IStream&gt; stream;\n    ComPtr&lt;ISequentialStream&gt; ss;\n    auto inMemStream = ref new InMemoryRandomAccessStream();\n    DX::ThrowIfFailed(\n        CreateStreamOverRandomAccessStream(inMemStream, IID_PPV_ARGS(&amp;stream))\n        );\n\n    SaveBitmapToStream(m_targetBitmap, m_wicFactory, m_d2dContext, wicFormat, stream.Get());\n\n    return inMemStream;\n\n}\n</code></pre>\n\n<h2>C# Wrapper</h2>\n\n<pre><code>public IRandomAccessStream EndDraw() {\n    return _context.EndDraw()\n}\n</code></pre>\n\n<h2>C# Tester</h2>\n\n<pre><code>async Task _SaveImageWithPropertiesAsync(UWPImaging.Image image, PhotoOrientation photoOrientation)\n{\n    var ras = await image.EndDraw();\n\n    var decoder = await BitmapDecoder.CreateAsync(ras);\n\n    var file = await KnownFolders.PicturesLibrary.CreateFileAsync(\n        \"test.jpeg\",\n        CreationCollisionOption.GenerateUniqueName);\n\n    using (var outputStream = await file.OpenAsync(FileAccessMode.ReadWrite))\n    {\n        var encoder = await BitmapEncoder.CreateForTranscodingAsync(outputStream, decoder);\n\n        var properties = new BitmapPropertySet { { \"System.Photo.Orientation\", new BitmapTypedValue(photoOrientation, PropertyType.UInt16) } };\n\n        await encoder.BitmapProperties.SetPropertiesAsync(properties); // This is where the error occurs\n\n        await encoder.FlushAsync();\n    }\n}\n</code></pre>\n\n<p>Any help on how to get those headers in would be much appreciated!</p>\n\n<p>Thanks,</p>\n\n<h3>Nolan</h3>\n"}, {"tags": ["c++", "opencv", "visual-studio-2015"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1464805844, "post_id": 37576202, "comment_id": 62639574, "body": "That&#39;s not an error it&#39;s a warning issued by the debugger. It just means you&#39;re using an executable module that was not built with any debug infomation. Consider it lives in Windows\\System32 it&#39;s likely a DLL you don&#39;t own and is not something you should be concerned about. If your application does not start it is because of reasons you have not provided any context for."}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 6407297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUKK9.jpg?s=128&g=1", "display_name": "Lucas C.", "link": "https://stackoverflow.com/users/6407297/lucas-c"}, "is_accepted": true, "score": -1, "last_activity_date": 1464806336, "last_edit_date": 1495535339, "creation_date": 1464806336, "answer_id": 37576403, "question_id": 37576202, "link": "https://stackoverflow.com/questions/37576202/error-when-debbuging-in-visual-studio-2015-community/37576403#37576403", "title": "Error when Debbuging in Visual Studio 2015 Community", "body": "<p>I think your answer is already on SO:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/21757048/binary-was-not-built-with-debug-information\">Binary was not built with debug information</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12721864/binary-was-not-built-with-debug-information-warning-meaning-in-mfc-applicatio\">&quot;binary was not built with debug information &quot; warning meaning in mfc application?</a></li>\n</ul>\n\n<p>From your output I think that your program is compiling and starting fine. You have nvcompiler.dll as one of your dependencies and the output is simply telling you that you're running in debug but don't have the debug version of nvcompiler.</p>\n\n<p>We need more info to help further...</p>\n"}], "owner": {"reputation": 29, "user_id": 6203061, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ihIafD-hoyg/AAAAAAAAAAI/AAAAAAAAAdY/GJLxreZehSQ/photo.jpg?sz=128", "display_name": "Patricia Javierre", "link": "https://stackoverflow.com/users/6203061/patricia-javierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1464806668, "accepted_answer_id": 37576403, "answer_count": 1, "score": -1, "last_activity_date": 1464806336, "creation_date": 1464805639, "question_id": 37576202, "link": "https://stackoverflow.com/questions/37576202/error-when-debbuging-in-visual-studio-2015-community", "closed_reason": "Duplicate", "title": "Error when Debbuging in Visual Studio 2015 Community", "body": "<p>I get the following error when I try to debug my program:</p>\n\n<pre><code>'Project1.exe': Loaded 'C:\\Windows\\System32\\nvcompiler.dll', Binary was not built with debug information.\n</code></pre>\n\n<p>I have debugged it previously with no problem. I just added a piece of code, but got no error compiling. </p>\n\n<p>The program doesn't even start. I have all the .dll of all the libraries I use.</p>\n"}, {"tags": ["c++", "winforms"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464806070, "post_id": 37576201, "comment_id": 62639720, "body": "What do you want us to say? You already linked the relevant links that answer your question. Consider posting your code, and describing the problem completely. :)"}, {"owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464808176, "post_id": 37576201, "comment_id": 62640749, "body": "Im sorry if Im not clear enough. I want to implement it in c++. I dont know how to translate the code in the links for cpp..and my problem is, to be more clear, the KeyDown event is detecting all the keys except the arrow keys, return, tab and space.. so i think what i need is the cpp code to properly override the IsInputKey property"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464808271, "post_id": 37576201, "comment_id": 62640800, "body": "You don&#39;t override it, you should call it in previewkeydown, as explained in your last link ;)"}, {"owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464808578, "post_id": 37576201, "comment_id": 62640941, "body": "well , i said i tried taht...this is the code in my previewkeydown. doesnt work..   previewkeydown"}, {"owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464808605, "post_id": 37576201, "comment_id": 62640954, "body": "switch (e-&gt;KeyCode) \t{ \tcase Keys::Down: \tcase Keys::Up: \tcase Keys::Right: \tcase Keys::Left: \tcase Keys::Space: \t\te-&gt;IsInputKey = true; \t\tbreak; \t}"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464808681, "post_id": 37576201, "comment_id": 62640991, "body": "Edit your question then :)"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464808915, "post_id": 37576201, "comment_id": 62641115, "body": "Do you have something in keydown??"}, {"owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1464809792, "post_id": 37576201, "comment_id": 62641576, "body": "yes there is..ive updated the question.."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466183660, "post_id": 37576201, "comment_id": 63228658, "body": "You are using C++/CLI with WinForms. The code is almost <b><i>identical</i></b> to the C# code. The only thing you have to change from <a href=\"http://stackoverflow.com/a/5606692/366904\">this answer</a> is <code>Keys.Xxx</code> to <code>Keys::Xxx</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "edited": false, "score": 0, "creation_date": 1464809834, "post_id": 37576466, "comment_id": 62641599, "body": "I saw that one..but im not on working on a console application..its a forms application. But thnx for the second link."}], "tags": [], "owner": {"reputation": 59, "user_id": 6407297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yUKK9.jpg?s=128&g=1", "display_name": "Lucas C.", "link": "https://stackoverflow.com/users/6407297/lucas-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1464806608, "last_edit_date": 1495542722, "creation_date": 1464806608, "answer_id": 37576466, "question_id": 37576201, "link": "https://stackoverflow.com/questions/37576201/set-arrow-keys-as-input-keys-winforms/37576466#37576466", "title": "Set Arrow Keys As Input Keys - WinForms", "body": "<p>Here is a C++ example of how to capture Key presses:\n<a href=\"https://stackoverflow.com/questions/24708700/c-detect-when-user-presses-arrow-key\">C++ Detect when user presses arrow key</a></p>\n\n<p>And here is the MSDN doc for the KeyDown event with some C++ code examples:\n<a href=\"https://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(v=vs.110).aspx?cs-save-lang=1&amp;cs-lang=cpp#code-snippet-1\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(v=vs.110).aspx?cs-save-lang=1&amp;cs-lang=cpp#code-snippet-1</a></p>\n\n<p>hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "is_accepted": true, "score": 0, "last_activity_date": 1484399016, "last_edit_date": 1484399016, "creation_date": 1464850487, "answer_id": 37584696, "question_id": 37576201, "link": "https://stackoverflow.com/questions/37576201/set-arrow-keys-as-input-keys-winforms/37584696#37584696", "title": "Set Arrow Keys As Input Keys - WinForms", "body": "<p>I managed to solve it.</p>\n\n<p>For anyone facing the same, it worked when I added events <code>PreviewKeydown</code> and <code>KeyDown</code> events with the same code, for <strong>each of the controls</strong> in the form, but not for the form. </p>\n"}], "owner": {"reputation": 2174, "user_id": 3201403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y6kSC.png?s=128&g=1", "display_name": "Divins Mathew", "link": "https://stackoverflow.com/users/3201403/divins-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 0, "closed_date": 1466183686, "accepted_answer_id": 37584696, "answer_count": 2, "score": -1, "last_activity_date": 1484399016, "creation_date": 1464805636, "last_edit_date": 1495541373, "question_id": 37576201, "link": "https://stackoverflow.com/questions/37576201/set-arrow-keys-as-input-keys-winforms", "closed_reason": "Duplicate", "title": "Set Arrow Keys As Input Keys - WinForms", "body": "<p>I need to detect arrow keystrokes in the <code>KeyDown</code> event. I do understand that they need to be set as input keys but I'm not clear on how to accomplish it in C++ . Found good answers <a href=\"https://stackoverflow.com/questions/1646998/up-down-left-and-right-arrow-keys-do-not-trigger-keydown-event\">here</a>, <a href=\"https://stackoverflow.com/questions/13163447/detecting-arrows-keys-in-winforms\">here</a> and <a href=\"https://stackoverflow.com/questions/13163447/detecting-arrows-keys-in-winforms\">here</a>. But that is C# and I need C++. Tried implementing like described <a href=\"http://www.codeease.com/arrow-keys-can-not-be-captured-in-keydown-event.html\" rel=\"nofollow noreferrer\">here</a> have this code in <code>PreviewKeyDown</code> but no luck. </p>\n\n<pre><code>switch (e-&gt;KeyCode)\n{\n    case Keys::Down:\n    case Keys::Up:\n    case Keys::Right:\n    case Keys::Left:\n    case Keys::Space:\n    e-&gt;IsInputKey = true;\n       break;\n}\n</code></pre>\n\n<p>and my <code>KeyDown</code> have :</p>\n\n<pre><code>if (e-&gt;KeyCode == Keys::Left)\n{\n    ///\n}\n</code></pre>\n\n<p>Which is not working on pressing left.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c++", "gstreamer"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2114184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d77f41f7f6086016e7fae867261527?s=128&d=identicon&r=PG", "display_name": "Sergey Simonenko", "link": "https://stackoverflow.com/users/2114184/sergey-simonenko"}, "edited": false, "score": 0, "creation_date": 1464947892, "post_id": 37584548, "comment_id": 62705822, "body": "I&#39;ve create a gist: <a href=\"https://gist.github.com/simonenkos/9e31fc66b38a09afea362f1180c8296d\" rel=\"nofollow noreferrer\">gist.github.com/simonenkos/9e31fc66b38a09afea362f1180c8296d</a> I&#39;ve tried to add a videoconvert element, but nothing changes.  And I also don&#39;t understand about the decodebin. I don&#39;t have such element in my pipeline. I only have a &#39;pad-added&#39; signal handler for rtspsrc, which has a sometimes source pad."}, {"owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "reply_to_user": {"reputation": 23, "user_id": 2114184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d77f41f7f6086016e7fae867261527?s=128&d=identicon&r=PG", "display_name": "Sergey Simonenko", "link": "https://stackoverflow.com/users/2114184/sergey-simonenko"}, "edited": false, "score": 0, "creation_date": 1464951401, "post_id": 37584548, "comment_id": 62707936, "body": "I got tricked by reading demuxer, but that is just a depayloader, so this will actually work (part 1))."}, {"owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "reply_to_user": {"reputation": 23, "user_id": 2114184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d77f41f7f6086016e7fae867261527?s=128&d=identicon&r=PG", "display_name": "Sergey Simonenko", "link": "https://stackoverflow.com/users/2114184/sergey-simonenko"}, "edited": false, "score": 0, "creation_date": 1464951584, "post_id": 37584548, "comment_id": 62708059, "body": "Sorry, demux is just a depayloader. This works, so please disregard point 1. For the negotiation, you&#39;ll probably have to check the debug log :/"}], "tags": [], "owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "is_accepted": false, "score": 0, "last_activity_date": 1464849927, "creation_date": 1464849927, "answer_id": 37584548, "question_id": 37576131, "link": "https://stackoverflow.com/questions/37576131/gstreamer-caps-negotiation-failure/37584548#37584548", "title": "GStreamer: Caps negotiation failure", "body": "<p>A few points:</p>\n\n<ol>\n<li>The code you posted above should listed for pad-added messages of decodebin. I am surprised if the code would work as is (maybe put the full code on a gist and link from here). See <a href=\"https://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/chapter-pads.html\" rel=\"nofollow\">https://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/chapter-pads.html</a></li>\n<li>Insert a videoconvert between the decoder and the encoder.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 1363984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9928fee979c213e211c9bd0d646dbe75?s=128&d=identicon&r=PG", "display_name": "Vishwanath Patil", "link": "https://stackoverflow.com/users/1363984/vishwanath-patil"}, "is_accepted": false, "score": 0, "last_activity_date": 1465383962, "creation_date": 1465383962, "answer_id": 37700749, "question_id": 37576131, "link": "https://stackoverflow.com/questions/37576131/gstreamer-caps-negotiation-failure/37700749#37700749", "title": "GStreamer: Caps negotiation failure", "body": "<p>Where are you linking reciever to demuxer ? that is needed as i understand.</p>\n"}], "owner": {"reputation": 23, "user_id": 2114184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d77f41f7f6086016e7fae867261527?s=128&d=identicon&r=PG", "display_name": "Sergey Simonenko", "link": "https://stackoverflow.com/users/2114184/sergey-simonenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 767, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465383962, "creation_date": 1464805378, "last_edit_date": 1464948133, "question_id": 37576131, "link": "https://stackoverflow.com/questions/37576131/gstreamer-caps-negotiation-failure", "title": "GStreamer: Caps negotiation failure", "body": "<p>I have a problem with linking of a two elements: avdec_h264 and avenc_mpeg4. I think that somehow these elements can't negotiate a capabilities of a data. </p>\n\n<p>I've tested my pipeline with gst-launch:</p>\n\n<pre><code>gst-launch-1.0 rtspsrc location=\"rtsp://camera\" ! rtph264depay ! h264parse ! avdec_h264 ! avenc_mpeg4 ! fakesink\n</code></pre>\n\n<p>It have worked fine. </p>\n\n<p>When I use my application where the pipeline is implemented:</p>\n\n<pre><code>    pipeline_ = gst_pipeline_new(\"default\");\n\n    if (!pipeline_)\n    {\n        return false;\n    }\n\n    receiver_ = gst_element_factory_make(\"rtspsrc\",      \"receiver\");\n    demuxer_  = gst_element_factory_make(\"rtph264depay\", \"demuxer\");\n    parser_   = gst_element_factory_make(\"h264parse\",    \"parser\");\n    decoder_  = gst_element_factory_make(\"avdec_h264\",   \"decoder\");\n    encoder_  = gst_element_factory_make(\"avenc_mpeg4,   \"encoder\");\n    output_   = gst_element_factory_make(\"fakesink\",     \"output\");\n\n    if (!receiver_ || !demuxer_ || !parser_ || \n        !decoder_  || !encoder_ || !output_)\n    {\n        return false;\n    }\n\n    g_object_set(GST_OBJECT(receiver_), \"location\", \"rtsp://camera\", nullptr);\n    // On this signal source pad of the receiver is being connected to\n    // the sink pad of the demuxer.\n    g_signal_connect(receiver_, \"pad-added\", G_CALLBACK(on_pad_added), this);\n\n    gst_bin_add_many(GST_BIN(pipeline_), receiver_, demuxer_, parser_,\n                     decoder_, encoder_, output, nullptr);\n\n    if (!gst_element_link_many(demuxer_, parser_, decoder_,\n                               encoder_, output_, nullptr))\n    {\n        return false;\n    }\n</code></pre>\n\n<p>Everything links successfully. All elements change their state to PLAYING, but I get nothing: I do not get GST_MESSAGE_STREAM_START on the pipeline's bus.</p>\n\n<p>Here is the graphs from gst-launch and my application:\n<a href=\"https://i.stack.imgur.com/y5xsQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y5xsQ.jpg\" alt=\"Graph generated by gst-launch\"></a>\n<a href=\"https://i.stack.imgur.com/lkzeu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lkzeu.jpg\" alt=\"Graph generated by my application\"></a></p>\n\n<p>If I change avenc_mpeg4 to, videoconvert element, which is not an encoder, everything will works well. If I put an other encoder, I will still have current problem.</p>\n\n<p>Probably I don't know about some particular things on how to work with the encoder. But I could not find solution.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464806277, "post_id": 37576165, "comment_id": 62639840, "body": "Right idea, but needs a bit more explanation of why this is the right idea."}, {"owner": {"reputation": 91, "user_id": 6275794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d127323240da1e952c23ff9dc8d10e5?s=128&d=identicon&r=PG&f=1", "display_name": "bcpermafrost", "link": "https://stackoverflow.com/users/6275794/bcpermafrost"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1464806534, "post_id": 37576165, "comment_id": 62639974, "body": "Simple Problem, Simple answer."}], "tags": [], "owner": {"reputation": 91, "user_id": 6275794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d127323240da1e952c23ff9dc8d10e5?s=128&d=identicon&r=PG&f=1", "display_name": "bcpermafrost", "link": "https://stackoverflow.com/users/6275794/bcpermafrost"}, "is_accepted": false, "score": 1, "last_activity_date": 1464805521, "creation_date": 1464805521, "answer_id": 37576165, "question_id": 37576078, "link": "https://stackoverflow.com/questions/37576078/create-a-new-struct-inside-a-while-loop-when-condition-changes/37576165#37576165", "title": "Create a new struct inside a while loop when condition changes", "body": "<p>Reassign the value?</p>\n\n<pre><code>area = ConstellationArea(tokens[0]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "edited": false, "score": 0, "creation_date": 1464806524, "post_id": 37576353, "comment_id": 62639966, "body": "Oh, this is very embarrassing. I don&#39;t know why I have forgotten this. Maybe, I was a lit bit obfuscated."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 4, "last_activity_date": 1464806183, "creation_date": 1464806183, "answer_id": 37576353, "question_id": 37576078, "link": "https://stackoverflow.com/questions/37576078/create-a-new-struct-inside-a-while-loop-when-condition-changes/37576353#37576353", "title": "Create a new struct inside a while loop when condition changes", "body": "<p><code>ConstellationArea(std::string cons)</code> is a constructor and must be called during initialization of an object.</p>\n\n<p>So it's legal to have <code>ConstellationArea area(\"foo\")</code> because you are initializing the object.</p>\n\n<p>But <code>area(\"foo\")</code> is not an <a href=\"http://en.cppreference.com/w/cpp/language/initialization\" rel=\"nofollow\">initialization</a>, actually it's an invocation of <code>operator()</code> on the object. In that situation the compiler is looking for <code>ConstellationArea::operator()(std::string str)</code> which is not defined.</p>\n\n<p>You must initialize another object and assign it to the variable, eg</p>\n\n<pre><code>area = ConstellationArea(tokens[0])\n</code></pre>\n\n<p>This will create another object and then assign the value to it through <code>ConstellationArea&amp; ConstellationArea::operator=(const ConstellationArea&amp; other)</code> which is the <a href=\"http://en.cppreference.com/w/cpp/language/copy_assignment\" rel=\"nofollow\">copy assignment operator</a> and it is provided by default.</p>\n"}], "owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 37576353, "answer_count": 2, "score": 0, "last_activity_date": 1464806183, "creation_date": 1464805207, "question_id": 37576078, "link": "https://stackoverflow.com/questions/37576078/create-a-new-struct-inside-a-while-loop-when-condition-changes", "title": "Create a new struct inside a while loop when condition changes", "body": "<p>I'm developing a C++ static library with Visual Studio 2015.</p>\n\n<p>I have the following struct:</p>\n\n<pre><code>struct ConstellationArea\n{\n    // Constellation's abbrevation.\n    std::string abbrevation;\n    // Area's vertices.\n    std::vector&lt;std::string&gt; coordinate;\n\n    ConstellationArea(std::string cons) : abbrevation(cons)\n    {}\n};\n</code></pre>\n\n<p>I use it in a while (note that the method is not ended):</p>\n\n<pre><code>vector&lt;ConstellationArea&gt;ConstellationsArea::LoadFile(string filePath)\n{\n    ifstream constellationsFile;\n    vector&lt;ConstellationArea&gt; areas;\n\n    string line;\n    ConstellationArea area(\"\");\n    string currentConstellation;\n\n    // Check if path is null or empty.\n    if (!IsNullOrWhiteSpace(filePath))\n    {\n        constellationsFile.open(filePath.c_str(), fstream::in);\n\n        // Check if I can open it...\n        if (constellationsFile.good())\n        {\n            // Read file line by line.\n            while (getline(constellationsFile, line))\n            {\n                vector&lt;string&gt; tokens = split(line, '|');\n\n                if ((currentConstellation.empty()) ||\n                    (currentConstellation != tokens[0]))\n                {\n                    currentConstellation = tokens[0];\n\n                    areas.push_back(area);\n\n                    area(tokens[0]);\n                }\n            }\n        }\n    }\n\n    return areas;\n}\n</code></pre>\n\n<p>I want to create a new <code>area</code> object when <code>tokens[0]</code> changes but I don't know how to do it.</p>\n\n<p>This statement <code>area(tokens[0]);</code> throws the following error:</p>\n\n<blockquote>\n  <p>call an object of a class type without any conversion function or\n  operator () suitable for the type of function pointer</p>\n</blockquote>\n\n<p>How can I create a new struct when I need it?</p>\n\n<p>I'm a C# developer and I can't figure out how to do it in C++.</p>\n"}, {"tags": ["c++", "c++11", "vector", "compiler-optimization"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1464805463, "post_id": 37576045, "comment_id": 62639365, "body": "Where do you see it&#39;s preferable, and what is the rationale?"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464805737, "post_id": 37576045, "comment_id": 62639507, "body": "I saw it in some SO answers as a side note.. I can not remember what is the reason or if the reason was even mentioned. Maybe I should ask first if it is really better :)"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1464805773, "post_id": 37576045, "comment_id": 62639533, "body": "@HumamHelfawi: no, why do <b>you</b> think <code>erase</code> looks better?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1464805774, "post_id": 37576045, "comment_id": 62639534, "body": "Those two calls will almost certainly do the same thing - so whichever you prefer is whichever you prefer."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1464805786, "post_id": 37576045, "comment_id": 62639542, "body": "@Barry no, that&#39;s not the case."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464806119, "post_id": 37576045, "comment_id": 62639751, "body": "@HumamHelfawi, well, here is my very strong advice to you. Do not go along with &#39;preferable&#39;. Preference is subjective. Instead, <b>always</b> understand what is the technical reason behind it. And if you do, you do not have to answer questions like this - you already know the answer."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1464806186, "post_id": 37576045, "comment_id": 62639793, "body": "@MarcusM&#252;ller. Opinion-based thing. I think erase will be understandable even for a non c++ programmer or even a very very beginner programmer."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464806252, "post_id": 37576045, "comment_id": 62639825, "body": "@SergeyA thanks for advice. Yes you are true. I should first be sure that resize is better then asking this question."}, {"owner": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "edited": false, "score": 0, "creation_date": 1464806455, "post_id": 37576045, "comment_id": 62639935, "body": "Take a look at the generated assembly code. This will tell you exactly what the compiler does."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "edited": false, "score": 0, "creation_date": 1464806553, "post_id": 37576045, "comment_id": 62639985, "body": "@orbitcowboy Yeah it will help in one direction of the proof. However, I am asking theoretically question about the possibility of it regarding to the standards"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1464805908, "post_id": 37576259, "comment_id": 62639613, "body": "Wait, where does <code>resize</code> specify reverse order?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1464805996, "post_id": 37576259, "comment_id": 62639667, "body": "@T.C.: Yeah, I found that strange too. It&#39;s defined in terms of a sequence of <code>pop_back</code> calls: &quot;<i>If <code>sz &lt;= size()</code>, equivalent to calling <code>pop_back()</code> <code>size() - sz</code> times.</i>&quot;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 6, "creation_date": 1464806015, "post_id": 37576259, "comment_id": 62639685, "body": "Oh, <a href=\"http://cplusplus.github.io/LWG/lwg-defects.html#2160\" rel=\"nofollow noreferrer\">that was a defect</a>. Only affects C++14 too."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1464806196, "last_edit_date": 1464806196, "creation_date": 1464805868, "answer_id": 37576259, "question_id": 37576045, "link": "https://stackoverflow.com/questions/37576045/optimizing-erase-from-the-end-of-vector-into-resize/37576259#37576259", "title": "Optimizing erase from the end of vector into resize", "body": "<p>Is it legal and possible for such optimizations to happen? Yes. Nothing in the specification forbids converting one into the other. So it's legal for <code>erase</code> operations from the end of the <code>vector</code> to be implemented in terms of the guts of a shrinking <code>resize</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1464806386, "post_id": 37576359, "comment_id": 62639899, "body": "So helpful. Thanks"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464807207, "post_id": 37576359, "comment_id": 62640318, "body": "A reason to have <code>std::vector::shrink_by</code>, which matches <code>pop_back</code>.  I suspect a loop of <code>pop_back</code> might be less efficient than a <code>shrink_by</code> can be, but maybe not: what should happen if one of the destructors of the objects throws?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464807255, "post_id": 37576359, "comment_id": 62640350, "body": "@Yakk UB, as usual. Using a throwing destructor with the standard library is UB."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 9, "last_activity_date": 1464806195, "creation_date": 1464806195, "answer_id": 37576359, "question_id": 37576045, "link": "https://stackoverflow.com/questions/37576045/optimizing-erase-from-the-end-of-vector-into-resize/37576359#37576359", "title": "Optimizing erase from the end of vector into resize", "body": "<p>The type requirements are different.</p>\n\n<ul>\n<li><p><code>vector::resize</code> (the one-parameter version) doesn't demand <code>MoveAssignable</code> but does require <code>DefaultInsertable</code> and <code>MoveInsertable</code>, because it can also be used to grow the container.</p></li>\n<li><p><code>vector::erase</code> is the reverse; it requires <code>MoveAssignable</code> but not the others, because it can be used to erase in the middle.</p></li>\n<li><p><code>vector::pop_back</code> requires none of the above, but only pops off one element at a time, so you will have to call it multiple times.</p></li>\n</ul>\n\n<p>There should be no perceivable performance difference in any sane implementation.</p>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 37576359, "answer_count": 2, "score": 2, "last_activity_date": 1464806196, "creation_date": 1464805101, "question_id": 37576045, "link": "https://stackoverflow.com/questions/37576045/optimizing-erase-from-the-end-of-vector-into-resize", "title": "Optimizing erase from the end of vector into resize", "body": "<p>Is it legal and possible that the compiler optimizes this code:</p>\n\n<pre><code>std::vector&lt;T&gt; my_vec(10);\n//some code\nmy_vec.erase(my_vec.begin()+5,my_vec.end());\n</code></pre>\n\n<p>into:</p>\n\n<pre><code>std::vector&lt;T&gt; my_vec(10);\n//some code\nmy_vec.resize(5);\n</code></pre>\n\n<p>I am asking because I always read that <code>std::vector::resize</code> is preferable when erasing from the end over an <code>std::vector::erase</code>. However, I see that <code>std::vector::erase</code> is more readable.</p>\n"}, {"tags": ["c++", "arrays", "sorting", "bubble-sort"], "comments": [{"owner": {"reputation": 13412, "user_id": 14356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69370061947718cd218597558f9adc53?s=128&d=identicon&r=PG", "display_name": "Paul Beckingham", "link": "https://stackoverflow.com/users/14356/paul-beckingham"}, "edited": false, "score": 3, "creation_date": 1464804002, "post_id": 37575709, "comment_id": 62638632, "body": "Show us what you&#39;re tried so far, so we can help you fix it."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1464804114, "post_id": 37575709, "comment_id": 62638699, "body": "fixed array size or always 4x4? and here <a href=\"http://stackoverflow.com/questions/20914410/sorting-an-array-diagonally\" title=\"sorting an array diagonally\">stackoverflow.com/questions/20914410/&hellip;</a>"}], "owner": {"reputation": 44, "user_id": 2993591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z53Bh.jpg?s=128&g=1", "display_name": "Joe Karam", "link": "https://stackoverflow.com/users/2993591/joe-karam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "closed_date": 1464804157, "answer_count": 0, "score": 0, "last_activity_date": 1464804187, "creation_date": 1464803820, "last_edit_date": 1464804187, "question_id": 37575709, "link": "https://stackoverflow.com/questions/37575709/diagonally-sorting-a-two-dimensional-array-in-c", "closed_reason": "Duplicate", "title": "Diagonally Sorting a Two Dimensional Array in C++", "body": "<p>I have a two dimensional array that needs to be sorted diagonally, for example,</p>\n\n<pre><code>1  2  4  7\n3  5  8  11\n6  9  12 14\n10 13 15 16\n</code></pre>\n\n<p>I managed to create a new one dimensional array that contains the elements of the two dimensional array and bubble sort it. I am stuck on how to fill the two dimensional array diagonally with the sorted one dimensional array. \nAny help?</p>\n\n<p>The row and column of the original array are not necessarily equal but in the diagonally sorted array they should be I think.</p>\n\n<pre><code>//Function that swaps two values (used in bubble sort)\nvoid swap(int &amp;a, int &amp;b){\n    int hold = a;\n    a = b;\n    b = hold;\n}\n\n//Function that bubble sorts a one dimensional array\nvoid bubbleSort(int a[], int r){\n    for (int pass = 1; pass &lt; r; pass++){\n        for (int i = 0; i &lt; r - 1; i++){\n            if (a[i + 1] &lt; a[i]){\n                //Swap a[i] and a[i + 1]\n                swap(a[i + 1], a[i]);\n            }\n        }\n    }\n}\n\n//Function that diagonally sorts a two dimensional array\nvoid diagonalSort(int array[][column], int row){\n\n    //Step 1: Store the two dimensional array in a one dimensional array\n    int flatSize = row*column, *flat = new int[flatSize], a = 0;\n    for (int b = 0; b &lt; row; b++){\n        for (int c = 0; c &lt; column; c++){\n            flat[a] = array[b][c];\n            a++;\n        }\n    }\n\n    //Step 2: Bubble sort the one dimensional array that was created\n    bubbleSort(flat, flatSize);\n\n    //Step 3: ??\n}\n</code></pre>\n"}, {"tags": ["c++", "sorting", "winapi", "lambda", "bitmap"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1464808346, "post_id": 37575655, "comment_id": 62640829, "body": "<code>comp1&gt;comp2</code> should be <code>comp1&lt;comp2</code> no?"}], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 5270403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f45e3ce9c4ac573b30767600f449e7f?s=128&d=identicon&r=PG&f=1", "display_name": "AlanKalane", "link": "https://stackoverflow.com/users/5270403/alankalane"}, "edited": false, "score": 0, "creation_date": 1464808623, "post_id": 37575808, "comment_id": 62640966, "body": "oh, thank you. I&#39;ve been starring into the screen for hours with no results and the fix proved to be so simple..."}], "tags": [], "owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "is_accepted": true, "score": 4, "last_activity_date": 1464804487, "last_edit_date": 1464804487, "creation_date": 1464804215, "answer_id": 37575808, "question_id": 37575655, "link": "https://stackoverflow.com/questions/37575655/sorting-a-vector-using-lambda-functions-in-winapi/37575808#37575808", "title": "Sorting a vector using lambda functions in winapi", "body": "<p>The important bit is </p>\n\n<blockquote>\n  <p>\"C:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|133|warning: lambda expressions only available with -std=c++11 or -std=gnu++11|\" </p>\n</blockquote>\n\n<p>You should turn C++11 functionality on using the compiler switch mentioned in the message.</p>\n\n<p>Also, I imagine the comparison you are doing is likely going to be slow. It is probably wise to calculate all the image scores once, and then sort using the cached results.</p>\n"}], "owner": {"reputation": 869, "user_id": 5270403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f45e3ce9c4ac573b30767600f449e7f?s=128&d=identicon&r=PG&f=1", "display_name": "AlanKalane", "link": "https://stackoverflow.com/users/5270403/alankalane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 37575808, "answer_count": 1, "score": 0, "last_activity_date": 1464804487, "creation_date": 1464803640, "question_id": 37575655, "link": "https://stackoverflow.com/questions/37575655/sorting-a-vector-using-lambda-functions-in-winapi", "title": "Sorting a vector using lambda functions in winapi", "body": "<p>I' making a program which allows the user to choose a .bmp from a folder and then displays the other pictures in the folder according to how similar they are to the selected image. As such I have created a function which compares two bitmaps and returns a score</p>\n\n<pre><code>double compareImages(HBITMAP pic1,HBITMAP pic2);\n</code></pre>\n\n<p>the higher the score the more similar the two pictures are. </p>\n\n<p>I have also created a vector which holds the handles to the instances of every picture in the folder</p>\n\n<pre><code>std::vector&lt;HBITMAP&gt; pictures;\n</code></pre>\n\n<p>Now I want to sort the handles in the vector according to their score when compared to the selected picture. Higher score should come first.</p>\n\n<pre><code>std::sort(pictures.begin(),pictures.end(),[](const HBITMAP&amp; pic1,const HBITMAP&amp; pic2) -&gt; bool \n{ \ndouble comp1 = compareImages(pic1,selectedPicture); //the score of pic1\ndouble comp2 = compareImages(pic2,selectedPicture); //the score of pic2\nreturn comp1&gt;comp2;\n}\n);\n</code></pre>\n\n<p>getting an error:</p>\n\n<pre><code>||=== Build: Debug in imageComparator (compiler: GNU GCC Compiler) ===|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\leftWindow.h||In function 'LRESULT WindowProcedureLeft(HWND, UINT, WPARAM, LPARAM)':|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|133|warning: lambda expressions only available with -std=c++11 or -std=gnu++11|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|error: no matching function for call to 'sort(std::vector&lt;HBITMAP__*&gt;::iterator, std::vector&lt;HBITMAP__*&gt;::iterator, WindowProcedureRight(HWND, UINT, WPARAM, LPARAM)::&lt;lambda(HBITMAP__* const&amp;, HBITMAP__* const&amp;)&gt;)'|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|note: candidates are:|\n\nC:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\gcc\\mingw32\\4.9.2\\include\\c++\\bits\\stl_algo.h|4676|note: template&lt;class _RAIter&gt; void std::sort(_RAIter, _RAIter)|\n\nC:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\gcc\\mingw32\\4.9.2\\include\\c++\\bits\\stl_algo.h|4676|note:   template argument deduction/substitution failed:|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|note:   candidate expects 2 arguments, 3 provided|\n\nC:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\gcc\\mingw32\\4.9.2\\include\\c++\\bits\\stl_algo.h|4705|note: template&lt;class _RAIter, class _Compare&gt; void std::sort(_RAIter, _RAIter, _Compare)|\n\nC:\\Program Files (x86)\\CodeBlocks\\MinGW\\lib\\gcc\\mingw32\\4.9.2\\include\\c++\\bits\\stl_algo.h|4705|note:   template argument deduction/substitution failed:|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|required from here|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|error: template argument for 'template&lt;class _RAIter, class _Compare&gt; void std::sort(_RAIter, _RAIter, _Compare)' uses local type 'WindowProcedureRight(HWND, UINT, WPARAM, LPARAM)::&lt;lambda(HBITMAP__* const&amp;, HBITMAP__* const&amp;)&gt;'|\n\nC:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|error:   trying to instantiate 'template&lt;class _RAIter, class _Compare&gt; void std::sort(_RAIter, _RAIter, _Compare)'|\n</code></pre>\n\n<p>The important bits being probably:</p>\n\n<pre><code>C:\\Users\\GS\\Desktop\\Programy\\imageComparator\\src\\rightWindow.h|134|error: template argument for 'template&lt;class _RAIter, class _Compare&gt; void std::sort(_RAIter, _RAIter, _Compare)' uses local type 'WindowProcedureRight(HWND, UINT, WPARAM, LPARAM)::&lt;lambda(HBITMAP__* const&amp;, HBITMAP__* const&amp;)&gt;'|\n</code></pre>\n\n<p>what is wrong and what does </p>\n\n<pre><code>local type 'WindowProcedureRight(HWND, UINT, WPARAM, LPARAM)::&lt;lambda(HBITMAP__* const&amp;, HBITMAP__* const&amp;)&gt;\n</code></pre>\n\n<p>actually mean?</p>\n"}, {"tags": ["c++", "string", "line"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1464803335, "post_id": 37575516, "comment_id": 62638309, "body": "?? you will get down voted if you don&#39;t edit your question. Please state <b>What</b> is your problem/error, <b>Where</b> and <b>How</b> are you trying to fix it. <b>Remove</b> all personal/unneeded information if you really want to get a good response"}, {"owner": {"reputation": 91, "user_id": 5915148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-bjlMMkK9dsg/AAAAAAAAAAI/AAAAAAAAABQ/83dJ2HBGlV4/photo.jpg?sz=128", "display_name": "TaGi Asadullazadeh", "link": "https://stackoverflow.com/users/5915148/tagi-asadullazadeh"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1464803757, "post_id": 37575516, "comment_id": 62638506, "body": "This example not my question&#39;s answer"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1464804265, "post_id": 37575516, "comment_id": 62638776, "body": "Change <code>cin&gt;&gt;line;</code> to <code>getline(cin, line);</code>"}, {"owner": {"reputation": 91, "user_id": 5915148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-bjlMMkK9dsg/AAAAAAAAAAI/AAAAAAAAABQ/83dJ2HBGlV4/photo.jpg?sz=128", "display_name": "TaGi Asadullazadeh", "link": "https://stackoverflow.com/users/5915148/tagi-asadullazadeh"}, "edited": false, "score": 0, "creation_date": 1464807055, "post_id": 37575516, "comment_id": 62640236, "body": "work .. thank you:)"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 91, "user_id": 5915148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-bjlMMkK9dsg/AAAAAAAAAAI/AAAAAAAAABQ/83dJ2HBGlV4/photo.jpg?sz=128", "display_name": "TaGi Asadullazadeh", "link": "https://stackoverflow.com/users/5915148/tagi-asadullazadeh"}, "edited": false, "score": 0, "creation_date": 1464807398, "post_id": 37576480, "comment_id": 62640412, "body": "@TaGiAsadullazadeh <i>&quot;great&quot;</i> Not really. Take a look at your question score. I&#39;ve just been answering because this would have been too long and poorly formatted as a comment. Please do a bit better research before asking the next time. There&#39;s plenty of <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt2\" rel=\"nofollow noreferrer\">material to be found</a>, why <code>cin &gt;&gt; line;</code> doesn&#39;t work like your expect it to do."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1464806655, "last_edit_date": 1495540731, "creation_date": 1464806655, "answer_id": 37576480, "question_id": 37575516, "link": "https://stackoverflow.com/questions/37575516/find-numbers-at-string-line-c/37576480#37576480", "title": "find numbers at string line c++", "body": "<p>As mentioned in <a href=\"https://stackoverflow.com/questions/37575516/find-numbers-at-string-line-c#comment62638776_37575516\">@Jhonny Mopp's comment</a> the primary problem is, that you don't read a whole line here:</p>\n\n<pre><code>cin&gt;&gt;line;\n</code></pre>\n\n<p>it just reads up to the next whitespace delimiter.</p>\n\n<p>What you actually want is:</p>\n\n<pre><code>getline(cin, line);\n</code></pre>\n\n<p>This would read in the whole input until you hit <kbd>Enter</kbd>.</p>\n\n<hr>\n\n<p>Regarding the rest of processing refer to that Q&amp;A I formerly marked as duplicate:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\">How to test whether stringstream operator>> has parsed a bad type and skip it\n</a></p>\n"}], "owner": {"reputation": 91, "user_id": 5915148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-bjlMMkK9dsg/AAAAAAAAAAI/AAAAAAAAABQ/83dJ2HBGlV4/photo.jpg?sz=128", "display_name": "TaGi Asadullazadeh", "link": "https://stackoverflow.com/users/5915148/tagi-asadullazadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 37576480, "answer_count": 1, "score": -8, "last_activity_date": 1464806655, "creation_date": 1464803155, "last_edit_date": 1464806305, "question_id": 37575516, "link": "https://stackoverflow.com/questions/37575516/find-numbers-at-string-line-c", "title": "find numbers at string line c++", "body": "<pre><code>#include&lt;striang&gt;\n#include&lt;iostream&gt;\n#include&lt;sstream&gt;\n#include&lt;stdlib.h&gt;\nusing namespace std;\nint main()\n{\n    string line;\n    cin&gt;&gt;line;\n    istringstream iss(line);\n    int i, count, numbers[100];\n    count = 0;\n    do\n    {\n        string sub;\n        iss &gt;&gt; sub;\n\n        numbers[count] = atoi(sub.c_str());\n        count++;\n\n    } while (iss);\n\n    cout&lt;&lt;\"Numbers\"&lt;&lt;endl;\n\n    for (i=0; i&lt;count;i++)\n      cout&lt;&lt;numbers[i]&lt;&lt;endl;\n\n}\n</code></pre>\n\n<hr>\n\n<p>For the input</p>\n\n<pre><code> 1                   2      3  -4   8\n</code></pre>\n\n<p>I need the output </p>\n\n<pre><code> 1 2 3 -4 8\n</code></pre>\n"}, {"tags": ["c++", "linux", "compilation", "makefile"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 5, "creation_date": 1464802979, "post_id": 37575454, "comment_id": 62638089, "body": "I would consider using <code>CMake</code> to generate your project files for linux and for Visual Studio."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464803031, "post_id": 37575454, "comment_id": 62638126, "body": "Thanks I&#39;ll definitely give it a try!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1464803085, "post_id": 37575454, "comment_id": 62638164, "body": "There will be a learning curve but I believe in the long run it will make things simpler for what you want. Although I admit it will be work to take an  existing project and convert it to use <code>CMake</code>. You may want to start with smaller examples first before you try your large project."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1464803362, "post_id": 37575454, "comment_id": 62638319, "body": "Can you rephrase your question and remove &#39;life and times of Paul Warnick&#39; section completely? We are really not interested in it. Instead, provide the description of the errors you got, relevant code and compiliation commands."}, {"owner": {"reputation": 52633, "user_id": 3155639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d254eedd932f950213109aa3706aba74?s=128&d=identicon&r=PG", "display_name": "Alexander O&#39;Mara", "link": "https://stackoverflow.com/users/3155639/alexander-omara"}, "edited": false, "score": 1, "creation_date": 1464803580, "post_id": 37575454, "comment_id": 62638421, "body": "Microsoft isn&#39;t exactly known for their standards compliance. If you don&#39;t need to support the MS compilers at the end of the day, but do need to supports more-standardized ones, why develop with a more-non-standard compiler?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 2, "creation_date": 1464803952, "post_id": 37575454, "comment_id": 62638609, "body": "Turn up your sleeves: Fix the errors, one by one. Then turn on <code>-Wall -Wextra</code> and fix those warnings too. Also be aware which C++ standard you are building against, though using a more recent standard than original should not cause problems (assuming code is some standard C++)."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1464804111, "post_id": 37575454, "comment_id": 62638694, "body": "Then set up a CI system, which will build the software every time you make a commit (running Jenkins in local Linux VM is perhaps the simplest way), so you can keep your code cross-platform. Add automatic tests to be more sure it really works."}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1464805117, "post_id": 37575454, "comment_id": 62639178, "body": "@PaulWarnick did you add <code>-std=c++11</code> to the compile flags when you get the &quot;no match for &#39;operator=&#39;&quot; error? Or are you compiling without it?"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464805208, "post_id": 37575454, "comment_id": 62639236, "body": "@SergeyA I&#39;ve edited my post so that there&#39;s an example error but I think you misunderstand the point of my question. I&#39;m not trying to find fixes for every single compilation error I&#39;ve received. I&#39;m wondering if there&#39;s a different solution then compiling with g++. My thinking was that if it compiles fine with VC, then there has to be some sort of compiler that would allow me to do the same on Linux."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1464805325, "post_id": 37575454, "comment_id": 62639308, "body": "@RaphaelMiedl I&#39;m compiling without it. As a matter of fact, I don&#39;t even know what a compile flag is, so I&#39;ll definitely look into it. Would you mind posting an example of how I would go about adding it though?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1464805753, "post_id": 37575454, "comment_id": 62639516, "body": "Suggestion, rather than images, paste in the actual text. Once those image links get shuffled or go dead the question readability suffers. For adding the compiler flag, hard to say without seeing how you&#39;ve got the makefile laid out, but the end result should look something like <code>g++ -std=c++11 &lt;bunch of other options&gt; example.cpp </code>"}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 1, "creation_date": 1464806905, "post_id": 37575454, "comment_id": 62640164, "body": "@PaulWarnick &quot;My thinking was that if it compiles fine with VC, then there has to be some sort of compiler that would allow me to do the same on Linux.&quot; Yes, GCC should work just fine for that, it&#39;s just that these two compilers got some different <code>default settings</code> so you sometimes have to tell one of them to use a different setting."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1464807016, "post_id": 37575454, "comment_id": 62640213, "body": "@RaphaelMiedl Yes! I&#39;m just reading your answer now. You completely understood what I was asking and I&#39;m hoping I can use what you said to fix my issues. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 0, "creation_date": 1464803888, "post_id": 37575671, "comment_id": 62638580, "body": "Actually, that was one of the errors I was getting but I managed to remove all occurrences. I&#39;ll edit my question to post some of the error messages I&#39;m getting."}], "tags": [], "owner": {"reputation": 39, "user_id": 2131795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f92daf2b1c148217d78283b99cd3d0f?s=128&d=identicon&r=PG", "display_name": "technik", "link": "https://stackoverflow.com/users/2131795/technik"}, "is_accepted": false, "score": 1, "last_activity_date": 1464803698, "creation_date": 1464803698, "answer_id": 37575671, "question_id": 37575454, "link": "https://stackoverflow.com/questions/37575454/how-to-compile-windows-visual-c-code-on-linux/37575671#37575671", "title": "How to compile Windows Visual C++ code on Linux", "body": "<p>It's hard to know without seeing the exact errors, but it is posible that your errors are not due to the makefile. Compilers are not always strictly compliant with the standard, and sometimes they tolerate certain things that are considered errors in others.</p>\n\n<p>Somethings to look at:\n- C++11 std support. Visual studio automatically supports some features of the standard, while some (not sure if all) versions of gcc require you to explicitly pass the -std=c++11 flag.\n- <code>&gt;&gt;</code> when using nested templates. Old versions of gcc will give an error when they see something like:</p>\n\n<pre><code>std::vector&lt;std::pair&lt;bool,bool&gt;&gt;\n</code></pre>\n\n<p>because they consider the end of that to be the <code>&gt;&gt;</code> operator. So if you use an old version of gcc, try putting a space in between.</p>\n\n<p>Even if your errors may not be related to the makefile build system, I'd still consider giving cmake a try if you keep encountering troubles with portability.</p>\n"}, {"comments": [{"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 0, "creation_date": 1464804603, "post_id": 37575898, "comment_id": 62638925, "body": "I&#39;m pretty sure I&#39;m not using g++/gcc to compile on Windows, just the standard compiler that comes with VC, but I&#39;ll give it a shot!"}, {"owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "reply_to_user": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 1, "creation_date": 1464805028, "post_id": 37575898, "comment_id": 62639137, "body": "This actually might not work if you are using Visual Studio, which I don&#39;t think uses g++ (which you said while I was writing this comment). I would happily post a tutorial on how to use TDM gcc/g++ and Netbeans in windows."}, {"owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "reply_to_user": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 1, "creation_date": 1464805353, "post_id": 37575898, "comment_id": 62639320, "body": "I think @technik was on to something too, usually I have to declare my std vectors more like what he posted. For example:            <code>using namespace std;</code>       <code>vector&lt;double&gt; WiHm = {4.71,0.33,0.52,0.066};</code>"}], "tags": [], "owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "is_accepted": false, "score": 0, "last_activity_date": 1464806503, "last_edit_date": 1464806503, "creation_date": 1464804523, "answer_id": 37575898, "question_id": 37575454, "link": "https://stackoverflow.com/questions/37575454/how-to-compile-windows-visual-c-code-on-linux/37575898#37575898", "title": "How to compile Windows Visual C++ code on Linux", "body": "<p>In both machines (windows and linux) open a terminal and type \"g++ --version\" and \"gcc --version\" to make sure you are using the same compiler version, this may not be related to your problem but it is worth a look. I think your problem is the syntax of the initialization. I had never initialized an std::vector before by just using a variable name and brackets. Your declaration does not include the type as far as I can tell. I tested both ways using my TDM g++ 5.1. and leaving out <code>std::vector&lt;double&gt;</code> from <code>std::vector&lt;double&gt; WiHm = {4.71,0.33,0.52,0.066};</code> caused a compiler error.</p>\n"}, {"comments": [{"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 1, "creation_date": 1464808783, "post_id": 37576450, "comment_id": 62641043, "body": "I&#39;d like to note that I had to use the flag &quot;-std=c++0x&quot;"}], "tags": [], "owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "is_accepted": true, "score": 5, "last_activity_date": 1571780602, "last_edit_date": 1571780602, "creation_date": 1464806549, "answer_id": 37576450, "question_id": 37575454, "link": "https://stackoverflow.com/questions/37575454/how-to-compile-windows-visual-c-code-on-linux/37576450#37576450", "title": "How to compile Windows Visual C++ code on Linux", "body": "<p>As long as you write your code in a portable manner (not using OS/compiler specific functionality like <code>windows.h</code> or specific compiler extensions) and use portable libraries it should compile with both Visual studio and GCC.</p>\n\n<p>The thing is that whilst they both work, they do so a little differently. Mostly it's different default settings, that you might have to explicitly override. As an example:</p>\n\n<ul>\n<li><p>Visual Studio 2017 and later defaults to C++14. Use the <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/std-specify-language-standard-version?view=vs-2019\" rel=\"nofollow noreferrer\">/std</a> option to specify a different standard.</p></li>\n<li><p>GCC has a default set, but allows you to change the standard you use for compilation. Compiling with</p>\n\n<pre><code>g++ example.cpp\n</code></pre>\n\n<p>uses the default standard (C++98 standard for GCC before version 6 and C++14 for GCC after version 6). Your code seems to fail because you use C++11 features but your compiler uses an older standard by default.</p>\n\n<pre><code>g++ -std=c++11 example.cpp\n</code></pre>\n\n<p>should make some of your errors disappear by explicitly specifying the standard, in this case C++11 standard.</p></li>\n</ul>\n\n<p>These are just different trade offs that the compilers choose. Having only one standard supported probably makes the support and fixing errors easier, since you don't have different compiler + standard version combinations that could possibly have different bugs. Being able to change the standard used for compilation makes it easier to test if a program works well with a new standard or what breaking changes you have to fix etc...</p>\n\n<p>In general GCC is more of minimal and has you explicitly specify it if you want it to do some extra stuff. I'd recommend using something like:</p>\n\n<pre><code>g++ -Wall -Wextra -pedantic -std=c++11 example.cpp\n</code></pre>\n\n<p>Using <code>-Wall</code> and <code>-Wextra</code> give a decent warning level to start out with <code>-pedantic</code> tells you if you're trying to use a compiler extension that works but would make your code less portable, and last but not least you should always specify the standard you want to use, be it <code>-std=c++11</code>, <code>-std=c++14</code> or the older <code>-std=c++98</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2345, "user_id": 1278334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FEjuO.png?s=128&g=1", "display_name": "A.J.Bauer", "link": "https://stackoverflow.com/users/1278334/a-j-bauer"}, "is_accepted": false, "score": 2, "last_activity_date": 1471768520, "creation_date": 1471768520, "answer_id": 39062365, "question_id": 37575454, "link": "https://stackoverflow.com/questions/37575454/how-to-compile-windows-visual-c-code-on-linux/39062365#39062365", "title": "How to compile Windows Visual C++ code on Linux", "body": "<p>You might also like to check out the possibility of developping and remote debugging using VS 2015 and the Linux Development extension.\n<a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/03/30/visual-c-for-linux-development/\" rel=\"nofollow\">Visual C++ for Linux Development (March 30, 2016)</a></p>\n"}], "owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16041, "favorite_count": 5, "accepted_answer_id": 37576450, "answer_count": 4, "score": 8, "last_activity_date": 1571780602, "creation_date": 1464802907, "last_edit_date": 1495540943, "question_id": 37575454, "link": "https://stackoverflow.com/questions/37575454/how-to-compile-windows-visual-c-code-on-linux", "title": "How to compile Windows Visual C++ code on Linux", "body": "<p><strong>Note: The intent of this question was to find if there exists a standard way of developing in VC for Windows and porting that code smoothly (meaning, making as few edits to the code as possible) over to a Linux system so that it can be compiled into an executable and run.</strong></p>\n\n<p><strong>Based on the answers I've received I can see that there is a misunderstanding. Therefore, I'm going to break this question into two separate questions. One being my original (revised question) and the other being my specific issues and how to fix it. (I'll add the links to this question once they're posted).</strong></p>\n\n<p><em>Note: I'm pretty new to C++ and compiling with makefiles.</em></p>\n\n<p>I've been creating a C++ program that will run on a Linux server and so far I've been using Visual Studio (<strong><em>Window's current release</em></strong>) to write all the code. To be safe, before I started writing my program I attempted to create some basic C++ files in VC, transfer them over to my server then compile them with g++ and run the executable. Everything worked out so I thought:</p>\n\n<p><em>\"Hey, I can go ahead and write my <strong>entire</strong> program, follow the same process and everything will be fine!\"</em></p>\n\n<p>Clearly, I was <strong>wrong</strong> and that's why I'm here.</p>\n\n<p>When I run my makefile I get dozens of errors and I'm not exactly sure how to approach the situation. A large number of the error messages seem to be hinting at my use of vectors (which of course, run fine when compiling with VC).</p>\n\n<p>I've had a look at the following questions: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/9171414/how-to-compile-in-visual-studio-2010-for-linux\">How to compile in Visual Studio 2010 for Linux</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3298053/port-visual-studio-c-to-linux?rq=1\">Port Visual Studio C++ to Linux</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/11183217/compiling-visual-c-code-in-linux\">Compiling Visual C++ code in Linux?</a></p>\n\n<p>But I can't really find a direct solution to my issue (for example I'd prefer to avoid installing VC on a Linux platform and just working from there).</p>\n\n<p>I've also looked into (<em>and tried using</em>) <a href=\"https://www.winehq.org/docs/winegcc\" rel=\"noreferrer\">wineg++</a> but it didn't seem to change anything upon compilation.</p>\n\n<p><strong>How should I go about this issue?</strong></p>\n\n<p><strong>Meaning: Is it common practice to develop on Windows VC then port over to Linux? If so, is there a standard way of ensuring that everything goes smoothly? Or is it just a matter of knowing how your compiler on Linux works and coding appropriately so that no errors occur?</strong></p>\n\n<p>Preferably a solution that allows me to keep developing on Windows and simply port over everything to Linux when I'm done. Also if possible, try to make any answers as simple as possible, I'm still very amateur when it comes to most of this stuff.</p>\n\n<p><em>Edit: I'd also like to mention that I'm not really using any crazy libraries. Just <strong>math.h</strong> and <strong>vector</strong>.</em></p>\n\n<p>Some examples of errors are:</p>\n\n<p>Initializing a vector with some doubles:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2RL3E.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2RL3E.png\" alt=\"enter image description here\"></a></p>\n\n<p>Corresponding compilation error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/62LJS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/62LJS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "boost", "boost-python"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1464805103, "creation_date": 1464805103, "answer_id": 37576046, "question_id": 37575412, "link": "https://stackoverflow.com/questions/37575412/can-boostpython-pass-ownership-of-an-object-to-a-python-callback-function/37576046#37576046", "title": "Can boost::python pass ownership of an object to a python callback function?", "body": "<p>The way <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/python/doc/v2/manage_new_object.html\" rel=\"nofollow\"><code>manage_new_object</code></a> works is by being a metafunction class that converts an argument into a converted result that the caller must take responsibility for. With the normal call policies, it's used under the hood. We just have to use that metafunction class explicitly ourselves: </p>\n\n<pre><code>struct Foo {\n    X* x = ...;\n\n    void give_up_x(py::object callback) {\n        py::manage_new_object::apply&lt;X*&gt;::type wrapper;\n        callback(py::handle&lt;&gt;{wrapper(x)});\n    }\n};\n</code></pre>\n\n<p>You need <code>py::handle&lt;&gt;</code> since wrapper gives you back a <code>PyObject*</code> instead of a <code>py::object</code>. If you want to be more direct, you can skip some of the intermediate type instantiations and just use:</p>\n\n<pre><code>void give_up_x(py::object callback) {\n    callback(py::handle&lt;&gt;{py::detail::make_owning_holder::execute(x)});\n}\n</code></pre>\n\n<hr />\n\n<p>I came upon the above through guess-and-check. It looks like it works at least?</p>\n"}], "owner": {"reputation": 2094, "user_id": 2069572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96d9436269fcd61678ca4543145cb1f1?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2069572/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 2, "accepted_answer_id": 37576046, "answer_count": 1, "score": 4, "last_activity_date": 1464805103, "creation_date": 1464802782, "question_id": 37575412, "link": "https://stackoverflow.com/questions/37575412/can-boostpython-pass-ownership-of-an-object-to-a-python-callback-function", "title": "Can boost::python pass ownership of an object to a python callback function?", "body": "<p>I am currently passing a C++ pointer to a python callback function with the <code>boost::python::call</code> function. This works fine, but if I don't subsequently delete the pointer in the C++ code, I introduce a memory leak.</p>\n\n<p>I would like to pass the pointer to the callback and have python's garbage collector handle the lifetime of the object. Right now, if I want to save the object passed to the callback, I have to do a deep copy.</p>\n\n<p>I have seen <a href=\"https://wiki.python.org/moin/boost.python/PointersAndSmartPointers\" rel=\"nofollow\">here</a> that this sort of thing is possible with return values of wrapped C++ function with <code>return_value_policy&lt;manage_new_object&gt;</code>. Is it possible to do something similar with the arguments to <code>boost::python::call</code>?</p>\n"}, {"tags": ["c++", "eclipse", "opencv"], "comments": [{"owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 0, "creation_date": 1464858625, "post_id": 37575338, "comment_id": 62660155, "body": "First mistake is you need to read image like this <code>Mat img = imread(&quot;image_path);</code> and second Why you have included <code>highgui.h</code> two times?"}, {"owner": {"reputation": 21, "user_id": 5562739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-_lUZPFrO7Hg/AAAAAAAAAAI/AAAAAAAAAHI/afsgqqQ41H4/photo.jpg?sz=128", "display_name": "Ashutosh Mishra", "link": "https://stackoverflow.com/users/5562739/ashutosh-mishra"}, "reply_to_user": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 0, "creation_date": 1464863370, "post_id": 37575338, "comment_id": 62663594, "body": "Actually, I got this from a video on youtube hence wrote it like that. Please tell me the correct procedure then !!"}, {"owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 0, "creation_date": 1464863742, "post_id": 37575338, "comment_id": 62663832, "body": "Image you have provided is of error tab.Can you please post image of console output?"}], "owner": {"reputation": 21, "user_id": 5562739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-_lUZPFrO7Hg/AAAAAAAAAAI/AAAAAAAAAHI/afsgqqQ41H4/photo.jpg?sz=128", "display_name": "Ashutosh Mishra", "link": "https://stackoverflow.com/users/5562739/ashutosh-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464802583, "creation_date": 1464802583, "question_id": 37575338, "link": "https://stackoverflow.com/questions/37575338/opencv-compilation-error-with-eclipse-ubuntu-14-04", "title": "Opencv Compilation error with Eclipse Ubuntu 14.04", "body": "<p>I am trying to write a simple OpenCV program using Eclipse of reading an image and simply displaying it. I have included all the libraries and paths in the respective folders. But still I am getting this error:</p>\n\n<pre><code>  Multiple markers at this line\n- Line breakpoint: test.cpp [line: 11]\n- within this context\n- character constant too long for its type [enabled by default]\n</code></pre>\n\n<p>The image of the error is attached: <a href=\"http://i.stack.imgur.com/m2StA.png\" rel=\"nofollow\">Error on Console</a></p>\n\n<p>Please help me out, thanks in advance !!</p>\n"}, {"tags": ["c++", "arduino", "c++-standard-library"], "comments": [{"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 2, "creation_date": 1464803091, "post_id": 37575303, "comment_id": 62638169, "body": "This does not seem to be a duplicate at all. It does not mention the Arduino string library at all and has a completely different context and scope."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1464804651, "post_id": 37575303, "comment_id": 62638947, "body": "&quot;Arduino&quot; is kind of broad. That&#39;s like asking if the standard library is available on a microcontroller. You need to find out if a SDK is available or if somebody has ported the standard library for your specific platform."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1464804831, "post_id": 37575303, "comment_id": 62639035, "body": "&quot;Standard-Library is probably the most efficient&quot;, well, actually, it&#39;s not."}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "edited": false, "score": 2, "creation_date": 1464821006, "post_id": 37575303, "comment_id": 62646805, "body": "@NonCreature0714 FYI: Check out my <code>BitBool</code> lib in the library manager, it manages a bitset like an array."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1516835050, "post_id": 37575303, "comment_id": 83857596, "body": "Arduino Due toolset has the standard library, while Arduino Uno is lacking it. But someone fixed that (and this is only one of several such projects on Github): <a href=\"https://github.com/maniacbug/StandardCplusplus\" rel=\"nofollow noreferrer\">github.com/maniacbug/StandardCplusplus</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1464807710, "post_id": 37576456, "comment_id": 62640538, "body": "Great answer, that&#39;s what I was looking for, thanks!"}, {"owner": {"reputation": 594, "user_id": 1689844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9e64fb2a826cb6caf5f3119501d09433?s=128&d=identicon&r=PG", "display_name": "statueuphemism", "link": "https://stackoverflow.com/users/1689844/statueuphemism"}, "edited": false, "score": 0, "creation_date": 1499878515, "post_id": 37576456, "comment_id": 77100323, "body": "As an added comment, even the microcontroller manufacturers often do not supply the C++ standard library implementation. If they did, it would be easy to incorporate into the Arduino development environment. For example: Atmel microcontrollers are used in a lot of the Arduino boards and here&#39;s a post from Atmel on the lack of support for various C++ features, including the standard library using Atmel&#39;s development infrastructure: <a href=\"http://www.atmel.com/webdoc/avrlibcreferencemanual/FAQ_1faq_cplusplus.html\" rel=\"nofollow noreferrer\">atmel.com/webdoc/avrlibcreferencemanual/FAQ_1faq_cplusplus.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 1689, "user_id": 634355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmjuf.jpg?s=128&g=1", "display_name": "jose.angel.jimenez", "link": "https://stackoverflow.com/users/634355/jose-angel-jimenez"}, "edited": false, "score": 6, "creation_date": 1547843883, "post_id": 37576456, "comment_id": 95346370, "body": "Not at all, Arduino does NOT use its own language. Arduino uses standard C++ and a standard industrial grade C++ compiler (gcc). It is not black magic nor has any substantial difference to any other embedded project. The main and biggest difference is they have really managed to lower the entry barrier to developing simple embedded applications."}, {"owner": {"reputation": 1800, "user_id": 37370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1", "display_name": "RichieHH", "link": "https://stackoverflow.com/users/37370/richiehh"}, "edited": false, "score": 3, "creation_date": 1552137613, "post_id": 37576456, "comment_id": 96901862, "body": "Totally wrong. It doesn&#39;t use its own language at all. It uses hex files compiled from, generally, c++ and the gnu and Arduino toolchain."}, {"owner": {"reputation": 942, "user_id": 4034192, "user_type": "registered", "profile_image": "https://graph.facebook.com/1236216622/picture?type=large", "display_name": "hardyVeles", "link": "https://stackoverflow.com/users/4034192/hardyveles"}, "reply_to_user": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "edited": false, "score": 0, "creation_date": 1582148614, "post_id": 37576456, "comment_id": 106682375, "body": "In @Mark Amery&#39;s defense: Arduino documentation tells such fake narrative. They are talking about Ardunio as language... God knows why and how they got there."}, {"owner": {"reputation": 1006, "user_id": 1214248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96b793b149396fad6ae08f65bf245a7b?s=128&d=identicon&r=PG", "display_name": "JB. With Monica.", "link": "https://stackoverflow.com/users/1214248/jb-with-monica"}, "edited": false, "score": 0, "creation_date": 1606481993, "post_id": 37576456, "comment_id": 114980871, "body": "Nice answer but so.... to be clear we are on our own if we want to use std::bitset on arduino...  Not reinventing the wheel is NOT ridiculous."}], "tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": true, "score": 8, "last_activity_date": 1547493473, "last_edit_date": 1547493473, "creation_date": 1464806563, "answer_id": 37576456, "question_id": 37575303, "link": "https://stackoverflow.com/questions/37575303/is-the-c-standard-library-fully-supported-on-arduino/37576456#37576456", "title": "Is the C++ Standard Library fully supported on Arduino?", "body": "<p>Arduino is quite different from other embedded system projects. For one thing, it uses its own <a href=\"https://www.arduino.cc/en/Reference/HomePage\" rel=\"nofollow noreferrer\">language</a> based on C/C++. For another thing, you're dealing with incredible specialized software where it's unlikely that you'll need the heavy abstraction  of <code>&lt;string&gt;</code> or <code>&lt;bitset&gt;</code>. Contrast with say a homebrew kernel, where you're dealing with desktop-grade hardware and the standard library aids development. Further, homebrew kernels eventually want to become \"self-hosted\", that is they can port GCC and libstdc++ to userspace. Again, this is something you're not going to see in an Arduino context.</p>\n\n<p>Now when you're talking about the <a href=\"https://www.arduino.cc/en/Reference/Librariesa\" rel=\"nofollow noreferrer\">libraries</a> that come with Arduino, it's a completely different story. These are written in C or C++ and <em>could</em> benefit from a ported standard library, but it's unlikely to be helpful. Porting the STL is no easy task and it is <a href=\"http://eel.is/c++draft/library\" rel=\"nofollow noreferrer\">very, very big</a>. Most of the functionality is much more than necessary - do you really need a <code>&lt;string&gt;</code> or <code>&lt;bitset&gt;</code> to read or write bytes to a port? Then think about the cost and complexity from a developer point of view: the Arduino developers are going to take on this arduous (pun not intended) task to implement it, <strong>and</strong> support it when most of it is going to be unused or ripped out (think custom allocators.)</p>\n\n<p>And one final point, there are a plethora of Arduino boards out there with different specs. The standard library is an abstraction built on top of an existing C library. At one point, you're going to have to get down and dirty and actually write the code for the C library and runtime, making the standard library inherently unportable (think libstdc++-arm-none-eabi-newlib).</p>\n\n<p>Now if you're unhappy with this, you can still port a subset of the STL by following their <a href=\"https://www.arduino.cc/en/Hacking/LibraryTutorial\" rel=\"nofollow noreferrer\">tutorial</a> on writing your own library for Arduino.</p>\n"}], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13324, "favorite_count": 3, "accepted_answer_id": 37576456, "answer_count": 1, "score": 13, "last_activity_date": 1547493473, "creation_date": 1464802446, "last_edit_date": 1547493291, "question_id": 37575303, "link": "https://stackoverflow.com/questions/37575303/is-the-c-standard-library-fully-supported-on-arduino", "title": "Is the C++ Standard Library fully supported on Arduino?", "body": "<p>Not asking about <code>&lt;string&gt;</code> but about the Standard-Library as a whole for use on micro-controllers.</p>\n\n<p>I don't yet own an Arduino board to execute code on, and as the title says, I'm curious if the C++ Standard-Library is fully supported on Arduino and already part of the Arduino IDE. It really goes without saying that the Standard-Library is probably the most efficient, fully tested, and resource-minimal publicly available C++ code out there, and would make life much easier to code for micro controllers like Arduino.</p>\n\n<p>Or, am I missing the point of Arduino/micro-controllers somehow? That, because their resources are so limited, most code has to be completely tailored to a specific function, and not generic or templatized? </p>\n\n<p>If the Standard-library is not a part of Arduino IDE, then how can I include specific libraries such as <code>&lt;algorithm&gt;</code> and <code>&lt;bitset&gt;</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 2, "creation_date": 1464802874, "post_id": 37575219, "comment_id": 62638024, "body": "No, because it needs to behave as if it was being run by an abstract machine in complete accordance with C++ rules, and that function could be changing global static variables, so even if the condition evaluates to false, the function call must still be performed"}], "answers": [{"tags": [], "owner": {"reputation": 1451, "user_id": 210971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460c2a459e69df7edc17f4d0aed1a61c?s=128&d=identicon&r=PG", "display_name": "LookAheadAtYourTypes", "link": "https://stackoverflow.com/users/210971/lookaheadatyourtypes"}, "is_accepted": false, "score": 1, "last_activity_date": 1464802595, "creation_date": 1464802595, "answer_id": 37575345, "question_id": 37575219, "link": "https://stackoverflow.com/questions/37575219/c-short-circuit-evaluation-w-r-t-optimization/37575345#37575345", "title": "C++ short circuit evaluation w.r.t optimization", "body": "<p>According to <a href=\"https://isocpp.org/files/papers/N3797.pdf\" rel=\"nofollow\">standard</a>:</p>\n\n<p>5.14 Logical AND operator:</p>\n\n<p>1 The &amp;&amp; operator groups left-to-right. The operands are both contextually converted to bool.\nThe result is true if both operands are true and false otherwise. Unlike &amp;, &amp;&amp; <strong>guarantees left-to-right evaluation</strong>: the second operand is not evaluated if the first operand is false.</p>\n\n<p>2 The result is a bool. If the second expression is evaluated, every value computation and <strong>side effect associated with the first expression</strong> is sequenced <strong>before</strong> every value computation and side effect associated with the\nsecond expression.</p>\n\n<p>So, according to these rules compiler will generate code where <code>function_with_side_effects()</code> will be evaluated.</p>\n"}, {"comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1464809105, "post_id": 37575376, "comment_id": 62641224, "body": "Note: the observable behavior can have quite far-reaching consequences. For example, because printing the address of an object is possible and two different objects cannot share an address at the same time, there are many cases where an object that could be stored purely in registers has to be materialized in memory just so it has a unique memory address."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 10, "last_activity_date": 1464803950, "last_edit_date": 1495535338, "creation_date": 1464802686, "answer_id": 37575376, "question_id": 37575219, "link": "https://stackoverflow.com/questions/37575219/c-short-circuit-evaluation-w-r-t-optimization/37575376#37575376", "title": "C++ short circuit evaluation w.r.t optimization", "body": "<p>A compiler is allowed to optimise out anything, as long as it doesn't break the <strong>as-if rule</strong>. The as-if rule states that with respect to <em>observable behaviour,</em> a program must behave <em>as if</em> it was executed by the exact rules of the C++ abstract machine (basically normal, unoptimised semantics of code).</p>\n\n<p>Observable behaviour is:</p>\n\n<ul>\n<li>Access to <code>volatile</code> objects</li>\n<li>Writing to files</li>\n<li>Input &amp; output on interactive devices</li>\n</ul>\n\n<p>As long as the program does the three things above in correct order, it is allowed to deviate from other source code functionality as much as it wants.</p>\n\n<p>Of course, in practice, the number of operations which must be left intact by the compiler is much larger than the above, simply because the compiler has to assume that any function whose code it cannot see can, potentially, have an observable effect.</p>\n\n<p>So, in your case, unless the compiler can <em>prove</em> that no action inside <code>function_with_side_effects</code> can ever affect observable behaviour (directly or indirectly by e.g. setting a flag tested later), it has to execute a call of <code>function_with_side_effects</code>, because it could violate the as-if rule if it didn't.</p>\n\n<hr>\n\n<p>As <a href=\"https://stackoverflow.com/users/2756719/t-c\">@T.C.</a> correctly pointed out in comments, there are a few exceptions to the as-if rule, when a compiler is allowed to perform optimisations which change observable behaviour; the most commonly encountered among these exceptions being copy elision. However, none of the exceptions come into play in the code in question.</p>\n"}, {"tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1464803251, "last_edit_date": 1592644375, "creation_date": 1464803251, "answer_id": 37575537, "question_id": 37575219, "link": "https://stackoverflow.com/questions/37575219/c-short-circuit-evaluation-w-r-t-optimization/37575537#37575537", "title": "C++ short circuit evaluation w.r.t optimization", "body": "<p><strong>No.</strong></p>\n<hr />\n<p>In general, the C++ Standard specifies the result of the computation in terms of observable effects and as long as your code is written in a Standard-compliant way (avoid Undefined Behavior, Unspecified Behavior and Implementation-Defined Behavior) then a compliant compiler has to produce the observable effects in the order they are specified.</p>\n<p>There are only <em>two</em> caveats in the Standard: Copy Elision when returning a value allows the compiler to omit a call to the Copy Constructor or to the Move Constructor without a care for their (potential) observable effects.</p>\n<p>The compiler is otherwise only allowed to optimize non-observable behavior, such as for example using less CPU registers or not writing a value in a memory location you never read afterward.</p>\n<p><em>Note: in C++, the address of an object can be observed, and is thus considered observable; it's low-level like that.</em></p>\n<hr />\n<p>In your particular case, let's refer to <a href=\"https://github.com/cplusplus/draft/blob/6be63b64af6c2a6cb40ddf76268dd6d5297f5394/source/expressions.tex#L4364\" rel=\"nofollow noreferrer\">the Standard</a>:</p>\n<blockquote>\n<p><strong>[expr.log.and] Logical AND operator</strong></p>\n<ol>\n<li><p>The <code>&amp;&amp;</code> operator groups left-to-right. The operands are both contextually converted to <code>bool</code> (Clause 4). The result is <code>true</code> if both operands are <code>true</code> and <code>false</code> otherwise. Unlike <code>&amp;</code>, <code>&amp;&amp;</code> guarantees left-to-right evaluation: the second operand is not evaluated if the first operand is <code>false</code>.</p>\n</li>\n<li><p>The result is a <code>bool</code>. If the second expression is evaluated, every value computation and side effect associated with the first expression is sequenced before every value computation and side effect associated with the second expression.</p>\n</li>\n</ol>\n</blockquote>\n<p>The key here is (2): <em>sequenced after</em>/<em>sequenced before</em> is standardese speak for ordering the observable events.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1464803596, "post_id": 37575546, "comment_id": 62638429, "body": "ODR violations of the missing-definition kind are generally NDR."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1464803278, "creation_date": 1464803278, "answer_id": 37575546, "question_id": 37575219, "link": "https://stackoverflow.com/questions/37575219/c-short-circuit-evaluation-w-r-t-optimization/37575546#37575546", "title": "C++ short circuit evaluation w.r.t optimization", "body": "<p>The expression <code>function_with_side_effects() &amp;&amp; false</code> is the same as <code>function_with_side_effects()</code> except that the result value is unconditionally false. The function call cannot be eliminated. The left operand of <code>&amp;&amp;</code> is always evaluated; it is only the right operand whose evaluation is conditional.</p>\n\n<p>Perhaps you're really asking about <code>false &amp;&amp; function_with_side_effects()</code>?</p>\n\n<p>In this expression, the function call must not happen. This is obvious statically, from the <code>false</code>. Since it must not happen, the translation of the code can be such that the function isn't referenced in the generated code.</p>\n\n<p>However, suppose that we have <code>false &amp;&amp; nonexistent_function()</code> which is the only reference to <code>nonexistent_function</code>, and that function isn't defined anywhere. If this is completely optimized away, then the program will link. Thereby, the implementation will fail to diagnose a violation of the One Definition Rule.</p>\n\n<p>So I suspect that, for conformance, the symbol still has to be referenced, even if it isn't used in the code.</p>\n"}], "owner": {"reputation": 666, "user_id": 1837688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0573d95f5dc38e251075f9c994b98f1?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1837688/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 37575376, "answer_count": 4, "score": 4, "last_activity_date": 1464803950, "creation_date": 1464802146, "question_id": 37575219, "link": "https://stackoverflow.com/questions/37575219/c-short-circuit-evaluation-w-r-t-optimization", "title": "C++ short circuit evaluation w.r.t optimization", "body": "<p>Simple question, but surprisingly hard to search for.\nFor the statement <code>A &amp;&amp; B</code> I know there is a sequence point between the evaluation of <code>A</code> and <code>B</code>, and I know that the order of evaluation is left-to-right, but what is a compiler allowed to do when it can prove that <code>B</code> is always false (perhaps even explicitly so)?</p>\n\n<p>Namely, for <code>function_with_side_effects() &amp;&amp; false</code> is the compiler allowed to optimize away the function call?</p>\n"}, {"tags": ["c++", "c++11", "console", "cross-platform", "platform-independent"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1464803756, "post_id": 37575215, "comment_id": 62638504, "body": "Do you mean  &quot;is it in the standard&quot;?  Or &quot;is there a library that does this?&quot;  The first is easy.  No.  The second is easy.  Off-topic for SO.  Another question is &quot;how can I catch and process the console/terminal closing event on every single C++ platform that exists or can exist?&quot;, which is too broad.  Can you make a <i>concrete</i> and <i>narrow</i> question, such as &quot;I need to be able to catch the console/terminal closing event on the following platforms, how do I do it with the least code repetition&quot; followed by a list of platforms?"}, {"owner": {"reputation": 153, "user_id": 5381371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d6d0899cb2c451d698f74b8f319f1d18?s=128&d=identicon&r=PG&f=1", "display_name": "MathIsNice1729", "link": "https://stackoverflow.com/users/5381371/mathisnice1729"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464833611, "post_id": 37575215, "comment_id": 62649838, "body": "@Yakk Basically, I need it to work on both Windows Linux."}, {"owner": {"reputation": 153, "user_id": 5381371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d6d0899cb2c451d698f74b8f319f1d18?s=128&d=identicon&r=PG&f=1", "display_name": "MathIsNice1729", "link": "https://stackoverflow.com/users/5381371/mathisnice1729"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464833698, "post_id": 37575215, "comment_id": 62649862, "body": "@Yakk And also, if I need to ask about such a library, which Stack Exchange site would be appropriate?"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1464842205, "post_id": 37582717, "comment_id": 62651822, "body": "Oh, and feel free to find a better name for the function. Don&#39;t really like it myself..."}, {"owner": {"reputation": 153, "user_id": 5381371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d6d0899cb2c451d698f74b8f319f1d18?s=128&d=identicon&r=PG&f=1", "display_name": "MathIsNice1729", "link": "https://stackoverflow.com/users/5381371/mathisnice1729"}, "edited": false, "score": 0, "creation_date": 1464851624, "post_id": 37582717, "comment_id": 62655816, "body": "Seems like it&#39;s the only way. Sad there isn&#39;t a general way. Anyways, it is quite acceptable. Thanks a lot."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1464841965, "creation_date": 1464841965, "answer_id": 37582717, "question_id": 37575215, "link": "https://stackoverflow.com/questions/37575215/platform-independent-way-to-catch-console-terminal-close-event/37582717#37582717", "title": "Platform independent way to catch console/terminal close event", "body": "<p>There is no standard way to do so, and I am not aware of a library available, but it is not that hard to write it yourself:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#if defined(_WIN32) || defined(WIN32)\nstatic void (*theHandler)(int);\nstatic BOOL WINAPI winHandler(DWORD ctrlType)\n{\n    theHandler((int)ctrlType);\n    return TRUE;\n}\n#endif\n\nvoid installConsoleHandler(void (*handler)(int))\n{\n#if defined(_WIN32) || defined(WIN32)\n    theHandler = handler;\n    SetConsoleCtrlHandler(&amp;winHandler, TRUE);\n#else\n    /* sigaction, as you find in your links */\n#endif\n}\n</code></pre>\n\n<p>If you keep this code, you might extend it later for other platforms:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#if windows\n#elif linux || compatible\n#elif whatever\n#else\n#error \"not implemented for current platform\"\n#endif\n</code></pre>\n\n<p>and you get a real library...</p>\n\n<p>The code above is usable in C and C++ (for this I preferred <code>static</code> over an anonymous namespace...), so you can place it in a .c file (and compile it as C). To make it work in C++ again (as you requested), you need to tell the C++ compiler that it is a C function (meaning that there is no name mangling as in C++, which would otherwise be applied and thus the function not found during linkage), so the header would contain:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#ifdef __cplusplus\nextern \"C\"\n{\n#endif\n    void installConsoleHandler(void (*handler)(int));\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>(Sure, you did not ask for C, but if you can get it <em>almost</em> for free (except for the <code>extern \"C\"</code> stuff), why not take it along? One never knows...)</p>\n"}], "owner": {"reputation": 153, "user_id": 5381371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d6d0899cb2c451d698f74b8f319f1d18?s=128&d=identicon&r=PG&f=1", "display_name": "MathIsNice1729", "link": "https://stackoverflow.com/users/5381371/mathisnice1729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 37582717, "answer_count": 1, "score": 0, "last_activity_date": 1464841965, "creation_date": 1464802139, "last_edit_date": 1495535338, "question_id": 37575215, "link": "https://stackoverflow.com/questions/37575215/platform-independent-way-to-catch-console-terminal-close-event", "title": "Platform independent way to catch console/terminal close event", "body": "<p>My question simply is:</p>\n\n<blockquote>\n  <p>Is it possible to catch and process console/terminal closing event platform independently?</p>\n</blockquote>\n\n<p>My question isn't the same as <a href=\"https://stackoverflow.com/questions/1641182/how-can-i-catch-a-ctrl-c-event-c\">this question</a>, or <a href=\"https://stackoverflow.com/questions/6546509/detect-when-console-application-is-closing-killed\">this</a>, or <a href=\"https://stackoverflow.com/questions/696117/what-happens-when-you-close-a-c-console-application\">this</a>. None of the answers on these questions provide a platform independent way. So, is there any way? If yes, then what is it? Or is it flat impossible? If so, why is that? I mean, why is it not possible to develop a library that could handle this?</p>\n\n<p><strong>EDIT:</strong> As @Yakk asked, I need it to work on both Windows and Linux, with the least code repetition possible. If it helps, I'm learning basic networking. I've built a simple chat app, in which I need to add entries in a chat history file while closing the app. I've implemented a way to close it from inside the app. But, as users are more likely to click the close button, I need to be able that event to do the operations. </p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "vector", "subset"], "comments": [{"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 1, "creation_date": 1464802195, "post_id": 37575163, "comment_id": 62637634, "body": "Take a look at eric nieblers ranges and views: <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">github.com/ericniebler/range-v3</a> Might be what you want."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1464802463, "post_id": 37575163, "comment_id": 62637782, "body": "erasing first and last element?"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 7, "creation_date": 1464803971, "post_id": 37575163, "comment_id": 62638618, "body": "Don&#39;t use <code>new</code> like this, ugh. :("}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1464809761, "post_id": 37575163, "comment_id": 62641560, "body": "Be aware that not all solution are equivalent in case an exception is thrown and this might have an impact on which one you should use."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1464810462, "post_id": 37575163, "comment_id": 62641928, "body": "By the way, it does not make much sense to want to avoid extra internal allocation while you have external allocation... You fail to make trivial optimization and want to do probably useless optimization."}, {"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1465233420, "post_id": 37575163, "comment_id": 62804846, "body": "@Phil1970 I think in this case it is more efficient and more elegant to do it in-place. Allocating new list and moving elements will make the code-reader think more, instead of just erasing both sides of vector (which is the answer I&#39;ve accepted)"}], "answers": [{"comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1464803639, "post_id": 37575285, "comment_id": 62638449, "body": "Alternatively, after the rotate, you can just use <code>resize</code> to reduce the size."}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1464807220, "post_id": 37575285, "comment_id": 62640331, "body": "On second thought, this is not a particulary efficient solution. <code>rotate</code> will copy/move elements that are going to be deleted on the next line."}], "tags": [], "owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "is_accepted": false, "score": 2, "last_activity_date": 1464802400, "creation_date": 1464802400, "answer_id": 37575285, "question_id": 37575163, "link": "https://stackoverflow.com/questions/37575163/how-to-slice-a-vector-in-c-and-assign-to-itself/37575285#37575285", "title": "How to slice a vector in c++ and assign to itself?", "body": "<p>You can use a combination of <code>std::rotate</code> and <code>vector::erase</code></p>\n\n<pre><code>void slice(vector&lt;int&gt; &amp; v, std::size_t start, std::size_t size)\n{\n    assert( v.size() &gt; start + size );\n    std::rotate( v.begin(), v.begin() + start, v.end() );\n    // Vector is now {2,3,4,5,1}\n    v.erase( v.begin() + size, v.end() );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1464804754, "post_id": 37575324, "comment_id": 62638999, "body": "Erase at the end can be achieved by calling <code>resize</code> with argument less than current size. In this case <code>resize(4)</code>"}, {"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1464805442, "post_id": 37575324, "comment_id": 62639352, "body": "@Revolver_Ocelot but this will incur a reallocation and moving/copying the remaining elements. ;-)"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1464805684, "post_id": 37575324, "comment_id": 62639480, "body": "no, it will not reallocate, as it would invalidate iterators, and it can do that only if capacity changes (resize was called with argument larger than current capacity)."}, {"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1464805941, "post_id": 37575324, "comment_id": 62639630, "body": "@Revolver_Ocelot upon reading the doc once more it appears you&#39;re right. Thanks for pointing it out."}], "tags": [], "owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "is_accepted": true, "score": 5, "last_activity_date": 1464802512, "creation_date": 1464802512, "answer_id": 37575324, "question_id": 37575163, "link": "https://stackoverflow.com/questions/37575163/how-to-slice-a-vector-in-c-and-assign-to-itself/37575324#37575324", "title": "How to slice a vector in c++ and assign to itself?", "body": "<p>The question is not clear on the usage scope, but two calls to <code>std::vector::erase</code> would suffice and don't incur any reallocation.</p>\n\n<p>For your example:</p>\n\n<pre><code>std::vector&lt;int&gt; testVec{1, 2, 3, 4, 5};\ntestVec.erase(testVec.begin() + 4, testVec.end());\ntestVec.erase(testVec.begin(), testVec.begin() + 1);\n</code></pre>\n\n<p>By first removing the tail of the vector you can make sure the values are only moved once.</p>\n\n<p><a href=\"http://ideone.com/T8OnGm\" rel=\"noreferrer\">Here is the full code</a>.</p>\n\n<p>Note that I assumed that you don't actually need to use a pointer to <code>std::vector</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1464802532, "creation_date": 1464802532, "answer_id": 37575329, "question_id": 37575163, "link": "https://stackoverflow.com/questions/37575163/how-to-slice-a-vector-in-c-and-assign-to-itself/37575329#37575329", "title": "How to slice a vector in c++ and assign to itself?", "body": "<p>Just remove the parts you don't want:</p>\n\n<pre><code>std::vector&lt;int&gt; vec{1, 2, 3, 4, 5};\nvec.erase(vec.begin() + 4, vec.end());\nvec.erase(vec.begin(), vec.begin() + 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 3, "last_activity_date": 1464802586, "creation_date": 1464802586, "answer_id": 37575340, "question_id": 37575163, "link": "https://stackoverflow.com/questions/37575163/how-to-slice-a-vector-in-c-and-assign-to-itself/37575340#37575340", "title": "How to slice a vector in c++ and assign to itself?", "body": "<p>A simple way is to use a read/write approach:</p>\n\n<pre><code>int wp = 0; // \"write ptr\"\nint rp = 0; // \"read ptr\"\nfor (auto&amp; x : v) {\n    if (... i want to keep element x, index rp ...) {\n      if (rp != wp) v[wp] = std::move(x);\n      wp++;\n    }\n    rp++;\n}\nv.resize(wp);\n</code></pre>\n\n<p>this kind of scheme works also for filtering on conditions that depend both on the index and on the element value.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1464804354, "last_edit_date": 1464804354, "creation_date": 1464803166, "answer_id": 37575519, "question_id": 37575163, "link": "https://stackoverflow.com/questions/37575163/how-to-slice-a-vector-in-c-and-assign-to-itself/37575519#37575519", "title": "How to slice a vector in c++ and assign to itself?", "body": "<p>This is a little function that takes a predicate.</p>\n\n<p>For every element of the container that passes the predicate, the element is erased from the container.</p>\n\n<p>No reallocation is done, and each element is <code>std::move</code>'d at most once:</p>\n\n<pre><code>template&lt;class C, class F&gt;\nvoid erase_if( C&amp; c, F&amp;&amp; f ) {\n  using std::begin; using std::end;\n  auto it = std::remove( begin(c), end(c), std::forward&lt;F&gt;(f) );\n  c.erase( it, end(c) );\n}\n</code></pre>\n\n<p>Doing this with indexes is a bit tricky.  If the indexes are contiguous, you can just rotate the first one into the first position, then erase the tail end of the container, or erase the tail and the front, or a number of myriad ways.</p>\n\n<p>If they are not, you basically have to write a manual version of <code>std::remove</code> that works on indexes instead of on element values.</p>\n\n<p>It would probably work if you had a \"counting\" test function that kept count of which elements it was called on, but relying on the order that the test function is called on seems overly fragile.  And <code>remove_by_index</code> is easy enough:</p>\n\n<pre><code>template&lt;class Begin, class End, class Test&gt;\nvoid remove_by_index(Begin b, End e, Test t) {\n  auto writer = b;\n  auto reader = b;\n  std::size_t index = 0;\n  while (reader != e) {\n    if (t(index)) {\n      ++reader; ++index;\n      continue;\n    }\n    if (reader != writer) {\n      *writer = std::move(*reader);\n    }\n    ++reader; ++writer; ++index;\n    continue;\n  }\n  return writer;\n}\n</code></pre>\n\n<p>giving us:</p>\n\n<pre><code>template&lt;class C, class F&gt;\nvoid erase_by_index( C&amp; c, F&amp;&amp; f ) {\n  using std::begin; using std::end;\n  auto it = remove_by_index( begin(c), end(c), std::forward&lt;F&gt;(f) );\n  c.erase( it, end(c) );\n}\n</code></pre>\n\n<p>Suppose you want to keep the slice of all even position elements:</p>\n\n<pre><code>erase_by_index( vec, [](auto i){return i&amp;1;} );\n</code></pre>\n\n<p>or suppose we want to keep an interval:</p>\n\n<pre><code>template&lt;class C&gt;\nvoid keep_interval( C&amp; c, std::size_t start_index, std::size_t length ) {\n  erase_by_index(c, [=](auto i){ return i &lt; start_index || i &gt;= (start_index+length); } );\n}\n</code></pre>\n\n<hr>\n\n<p>Now a more generic way would consist of creating an alternative view of your container, where each element in the view corresponds to some range of elements in your original container, doing tests on that view, then applying the operation back on the original container.</p>\n\n<p>Not sure how to write that succinctly.</p>\n"}], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2622, "favorite_count": 1, "accepted_answer_id": 37575324, "answer_count": 5, "score": 3, "last_activity_date": 1464804354, "creation_date": 1464801915, "question_id": 37575163, "link": "https://stackoverflow.com/questions/37575163/how-to-slice-a-vector-in-c-and-assign-to-itself", "title": "How to slice a vector in c++ and assign to itself?", "body": "<p>I would like to know how I can replace the contents of a vector with a subset of that vector, without re-allocating a new vector (every question I have found appears to have the purpose of allocating a new vector)</p>\n\n<p>example:</p>\n\n<pre><code>vector&lt;int&gt;* testVec = new vector&lt;int&gt;{1, 2, 3, 4, 5};\n//do some operation to slice vector, to say {2, 3, 4} without re-allocating\n//testVec should now have contents {2, 3, 4}\n</code></pre>\n"}, {"tags": ["c++", "parsing"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1464801011, "post_id": 37574763, "comment_id": 62636923, "body": "Instead of using C-style arrays, consider using <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> instead."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1464801375, "post_id": 37574763, "comment_id": 62637143, "body": "Are you sure it&#39;s complaining about a hyphen and not a dot?"}, {"owner": {"reputation": 1, "user_id": 6410763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b3f80fcf1c2f3008a35c058def072?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6410763/john-doe"}, "edited": false, "score": 0, "creation_date": 1464802104, "post_id": 37574763, "comment_id": 62637558, "body": "I started off with Java and got the syntax mixed up. In Java it would be correct to use the <code>.</code> operator and I forgot that it&#39;s <code>::</code> in C++"}], "answers": [{"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1464800752, "creation_date": 1464800752, "answer_id": 37574838, "question_id": 37574763, "link": "https://stackoverflow.com/questions/37574763/expected-primary-expression-before-token/37574838#37574838", "title": "Expected primary-expression before &#39;-&#39; token", "body": "<ul>\n<li><code>colors.WHITE</code> is Java style. In C++ you should write like <code>colors::WHITE</code>.</li>\n<li><code>names.size()</code> is invalid because <code>names</code> is not a class but an array.</li>\n</ul>\n\n<p>Try this:</p>\n\n<pre><code>Bunny::Bunny() : radioactive_mutant_vampire_bunny(false), age(0)\n{\n    srand(time(NULL));\n    if(rand()%100 + 1 &lt;= 2)\n        radioactive_mutant_vampire_bunny = true;\n    switch(rand()%4 + 1){\n    case 1:\n        color = colors::WHITE;\n        break;\n    case 2:\n        color = colors::BROWN;\n        break;\n    case 3:\n        color = colors::BLACK;\n        break;\n    case 4:\n        color = colors::SPOTTED;\n        break;\n    default:\n        cout &lt;&lt; \"The number entered is outside the range of 1 to 4.\";\n        break;\n    }\n    name = names[rand()%(sizeof(names)/sizeof(*names))];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1464800775, "creation_date": 1464800775, "answer_id": 37574845, "question_id": 37574763, "link": "https://stackoverflow.com/questions/37574763/expected-primary-expression-before-token/37574845#37574845", "title": "Expected primary-expression before &#39;-&#39; token", "body": "<pre><code>    enum class sex{MALE, FEMALE};\n    sex sex;\n</code></pre>\n\n<p>The name of the <code>enum class</code> is <code>sex</code>, you can't use <code>sex</code> again, rename your member: <code>sex _sex;</code></p>\n\n<pre><code>case 1:\n    color = colors.WHITE;\n    break;\ncase 2:\n    color = colors.BROWN;\n    break;\ncase 3:\n    color = colors.BLACK;\n    break;\ncase 4:\n    color = colors.SPOTTED;\n    break;\n</code></pre>\n\n<p>This is not how <code>enum classes</code> work. Use the <code>::</code> operator instead of the <code>.</code> operator.</p>\n\n<p>Your <code>strings</code> array is a plain C array, a plain array doesn't have a <code>size()</code> method, either make it a <code>vector</code> or use the <code>sizeof</code> idiom to check for array length.</p>\n"}], "owner": {"reputation": 1, "user_id": 6410763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547b3f80fcf1c2f3008a35c058def072?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6410763/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1464800775, "creation_date": 1464800496, "question_id": 37574763, "link": "https://stackoverflow.com/questions/37574763/expected-primary-expression-before-token", "title": "Expected primary-expression before &#39;-&#39; token", "body": "<p>However I don't have this token ('-') in my code. All I'm doing is attempting to assign a variable of a <code>colors</code> enum class type, one of the possible values of <code>colors</code> in each case, and I'm getting this error:</p>\n\n<pre><code>error: expected primary-expression before '-' token\n</code></pre>\n\n<p>In each first statement of each case statement.Can someone explain this error and why it's happening?</p>\n\n<p><strong>Complete code:</strong></p>\n\n<p><strong>Source file</strong></p>\n\n<pre><code>#include \"Bunny.h\"\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nBunny::Bunny() : radioactive_mutant_vampire_bunny(false), age(0)\n{\n    srand(time(NULL));\n    if(rand()%100 + 1 &lt;= 2)\n        radioactive_mutant_vampire_bunny = true;\n    switch(rand()%4 + 1){\n    case 1:\n        color = colors.WHITE;\n        break;\n    case 2:\n        color = colors.BROWN;\n        break;\n    case 3:\n        color = colors.BLACK;\n        break;\n    case 4:\n        color = colors.SPOTTED;\n        break;\n    default:\n        cout &lt;&lt; \"The number entered is outside the range of 1 to 4.\";\n        break;\n    }\n    name = names[rand()%names.size()];\n}\n\nBunny::~Bunny()\n{\n    //dtor\n}\n</code></pre>\n\n<p><strong>Header</strong></p>\n\n<pre><code>#ifndef BUNNY_H\n#define BUNNY_H\n#include &lt;string&gt;\nusing namespace std;\nclass Bunny\n{\n    public:\n        Bunny();\n        virtual ~Bunny();\n    protected:\n    private:\n        enum class sex{MALE, FEMALE};\n        sex sex;\n        enum class colors{WHITE, BROWN, BLACK, SPOTTED};\n        colors color;\n        int age;\n        string names[6] = {\"Berry\", \"Jerry\", \"Terry\", \"Marie\", \"Perry\", \"Kerry\"};\n        string name;\n        bool radioactive_mutant_vampire_bunny;\n};\n\n#endif // BUNNY_H\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "edited": false, "score": 1, "creation_date": 1464801514, "post_id": 37574738, "comment_id": 62637223, "body": "What is the error?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1464801533, "post_id": 37574738, "comment_id": 62637239, "body": "Avoid naked arrays. Use <code>std::vector</code> or <code>std::array</code> instead"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1464801702, "post_id": 37574738, "comment_id": 62637336, "body": "From short inspection, taking into account padding and aligment, it seems that you will need at least 4718592 bytes, not counting other stuff on stack. Anyway, you shouldn&#39;t have such large arrays on stack."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1464802144, "post_id": 37575200, "comment_id": 62637595, "body": "A loop is not needed:  <code>std::vector&lt;std::vector&lt;Analysis&gt;&gt; slotsChecker(256, std::vector&lt;Analysis&gt;(256));</code>"}, {"owner": {"reputation": 39, "user_id": 2131795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f92daf2b1c148217d78283b99cd3d0f?s=128&d=identicon&r=PG", "display_name": "technik", "link": "https://stackoverflow.com/users/2131795/technik"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464802584, "post_id": 37575200, "comment_id": 62637850, "body": "That is completely true. However, wouldn&#39;t that allocate memory for 256 Analysis structs more than the loop version? The std::vector you provide in the constructor is itself allocating memory, even though it will be destructed right away."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1464802719, "post_id": 37575200, "comment_id": 62637918, "body": "@PaulMcKenzie, that does 256 copy-constructors of 256-size vector. Hardly a good thing."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 2, "creation_date": 1464803640, "post_id": 37575200, "comment_id": 62638451, "body": "Shouldn&#39;t that be <code>auto &amp;s</code>, not <code>auto s</code>? Otherwise, it doesn&#39;t resize anything!"}, {"owner": {"reputation": 39, "user_id": 2131795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f92daf2b1c148217d78283b99cd3d0f?s=128&d=identicon&r=PG", "display_name": "technik", "link": "https://stackoverflow.com/users/2131795/technik"}, "reply_to_user": {"reputation": 517, "user_id": 2139488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XlrM0.jpg?s=128&g=1", "display_name": "SHADOW.NET", "link": "https://stackoverflow.com/users/2139488/shadow-net"}, "edited": false, "score": 0, "creation_date": 1464804388, "post_id": 37575200, "comment_id": 62638827, "body": "@SHADOW.NET, could you show what error it gives exactly? It&#39;s hard to help without seeing the error."}, {"owner": {"reputation": 517, "user_id": 2139488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XlrM0.jpg?s=128&g=1", "display_name": "SHADOW.NET", "link": "https://stackoverflow.com/users/2139488/shadow-net"}, "edited": false, "score": 0, "creation_date": 1464804499, "post_id": 37575200, "comment_id": 62638875, "body": "@technik  thank you for your help, problem solved big thumb for you guys"}], "tags": [], "owner": {"reputation": 39, "user_id": 2131795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f92daf2b1c148217d78283b99cd3d0f?s=128&d=identicon&r=PG", "display_name": "technik", "link": "https://stackoverflow.com/users/2131795/technik"}, "is_accepted": false, "score": -1, "last_activity_date": 1464804116, "last_edit_date": 1464804116, "creation_date": 1464802075, "answer_id": 37575200, "question_id": 37574738, "link": "https://stackoverflow.com/questions/37574738/array-size-error-c-visual-studio/37575200#37575200", "title": "Array size error, c++ visual studio", "body": "<p>When stack size is a limitation, you must resort to dynamic memory allocation. The most recommended option is to use <code>std::vector</code>, which will handle the memory for you. In the simplest form, would be something like this:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;Analysis&gt;&gt; slotsChecker;\nslotsChecker.resize(256);\nfor(auto &amp;s : slotsChecker)\n    s.resize(256);\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 2139488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XlrM0.jpg?s=128&g=1", "display_name": "SHADOW.NET", "link": "https://stackoverflow.com/users/2139488/shadow-net"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1464804116, "creation_date": 1464800419, "question_id": 37574738, "link": "https://stackoverflow.com/questions/37574738/array-size-error-c-visual-studio", "title": "Array size error, c++ visual studio", "body": "<p>My problem is related to stack size I guess,so I am using c++ on visual studio </p>\n\n<p>I have class called <code>Tag</code></p>\n\n<p>This is the header    \"Tag.h\"</p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nclass Tag\n{\npublic:\n    Tag();\n    ~Tag();\n    void setID(string);\n    void setMute(bool);\n    void setSlotTime(int);\n    void setPointer(int);\n    void setGroupNo(int);\n    void setSlot(int);\n    void setParticipate(bool);\n\n    string getID();\n    bool getMuted();\n    int getSlot();\n    int getSlotTime();\n    int getPointer();\n    int getGroupNo();\n    int getParticipate();\n\n\nprivate:\n    string ID;\n    int slot;\n    int slotTime;\n    bool muted;\n    int groupNo;\n    int pointer;\n    bool participate;\n\n};\n</code></pre>\n\n<p>and I have a <code>struct</code></p>\n\n<pre><code>struct Analysis {\n    int cnt = 0;\n    Tag tag;\n    int tagIndex = 0;\n};\n</code></pre>\n\n<p>The problem is here with the array size </p>\n\n<pre><code>Analysis slotsChecker[256][256];\n</code></pre>\n\n<p>this array definition causing an error unless I reduce the array size. \nI tried to set the stack size to 4194304 but it didn't work</p>\n"}, {"tags": ["c++", "serial-communication"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 2131795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f92daf2b1c148217d78283b99cd3d0f?s=128&d=identicon&r=PG", "display_name": "technik", "link": "https://stackoverflow.com/users/2131795/technik"}, "reply_to_user": {"reputation": 5, "user_id": 6200109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd268b79724d1ef9d4fc64962c5177fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jyo", "link": "https://stackoverflow.com/users/6200109/jyo"}, "edited": false, "score": 0, "creation_date": 1464803926, "post_id": 37575301, "comment_id": 62638600, "body": "For the first problem, try reading whatever may be on the serial port at the beginning of your program, before you send anything. For the second problem, try std::this_thread::sleep_for, and delay your program a bit."}], "tags": [], "owner": {"reputation": 39, "user_id": 2131795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f92daf2b1c148217d78283b99cd3d0f?s=128&d=identicon&r=PG", "display_name": "technik", "link": "https://stackoverflow.com/users/2131795/technik"}, "is_accepted": false, "score": 0, "last_activity_date": 1464802445, "creation_date": 1464802445, "answer_id": 37575301, "question_id": 37574681, "link": "https://stackoverflow.com/questions/37574681/serial-communication-with-arduino-in-c/37575301#37575301", "title": "serial communication with ARDUINO in C++", "body": "<p>Assuming your arduino is actually connected to that port and echoing what it receives, you have to take two things into account:\na) Before your arduino code gets control of the serial port, it first tries to load the serial bootloader, so it is possible for the first bytes of communication to never reach your code.\nb) Even if it does, arduino is probably way slower than your computer and it may not have time to process the answer before you do the check.</p>\n"}], "owner": {"reputation": 5, "user_id": 6200109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd268b79724d1ef9d4fc64962c5177fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jyo", "link": "https://stackoverflow.com/users/6200109/jyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464802445, "creation_date": 1464800262, "last_edit_date": 1464800742, "question_id": 37574681, "link": "https://stackoverflow.com/questions/37574681/serial-communication-with-arduino-in-c", "title": "serial communication with ARDUINO in C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nchar j='a';\nmain()\n{\nfstream arduino;\narduino.open(\"/dev/ttyACM0\",ios::in | ios::out);\n//Opening device file\n\nif(!arduino)\ncout&lt;&lt;\"error\";\narduino&lt;&lt;2;\narduino.clear();\nif(arduino &gt;&gt; j)\ncout &lt;&lt; \"Value received: \" &lt;&lt; j &lt;&lt; '\\n';\nelse if(arduino.eof())\ncerr &lt;&lt; \"Premature EOF\\n\";\nelse if(arduino.bad())\ncerr &lt;&lt; \"Attempt to read from device failed.\\n\";\nelse\ncerr &lt;&lt; \"Logical I/O error.\\n\";\narduino.close();\nreturn 0;\n}\n</code></pre>\n\n<p>arduino code:\n      int p;\n      void setup() \n      {\n          pinMode(13,OUTPUT);\n          Serial.begin(9600);\n       }</p>\n\n<pre><code>   void loop() \n   {\n       if(Serial.available())\n       {\n           p=Serial.read();\n           if(p!=-1)\n           {\n               Serial.write(1);\n               digitalWrite(13,HIGH);\n               delay(5000);\n            }   \n        }\n        else\n        {\n            digitalWrite(13,LOW);\n            delay(1000);\n        } \n    }\n</code></pre>\n\n<p>i have tried this code in C++ for serial communication with the arduino. i got an error \"premature eof\". what is  the problem here??  </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1464800427, "post_id": 37574669, "comment_id": 62636586, "body": "Have you considered using a <code>unordered_map&lt;int, int&gt; um;</code> so you could do <code>um[2] = 1;</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1464800433, "post_id": 37574669, "comment_id": 62636593, "body": "O(1) ? I doubt that&#39;s possible. And what do you mean, &quot;without deleting it&quot; ? Either you have two <code>2</code>&#39;s in your multiset, or you don&#39;t..."}, {"owner": {"reputation": 61, "user_id": 4492391, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005275459008/picture?type=large", "display_name": "Karthik Priyatham", "link": "https://stackoverflow.com/users/4492391/karthik-priyatham"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1464800736, "post_id": 37574669, "comment_id": 62636753, "body": "@nwp , Actually after certain number of insertions and deletions , i need to report the element with maximum frequency in less than O(n) =&gt; O(logN) where the set is only thing i found...."}, {"owner": {"reputation": 61, "user_id": 4492391, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005275459008/picture?type=large", "display_name": "Karthik Priyatham", "link": "https://stackoverflow.com/users/4492391/karthik-priyatham"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1464800996, "post_id": 37574669, "comment_id": 62636917, "body": "@Quentin , Suppose i have an array where i need to tell max repeated element with some queries having a range between the bounds of this array.. So im using Mo algorithm here . SO if i answerd query [1-5] ( i.e 1st to 5th element . So i go on adding them to set and report maximum for that range ) and later if i need to answer [2-4] , i need to decrease the count of 1 and 5th element in the set .... Hope i made it clear to you"}, {"owner": {"reputation": 61, "user_id": 4492391, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005275459008/picture?type=large", "display_name": "Karthik Priyatham", "link": "https://stackoverflow.com/users/4492391/karthik-priyatham"}, "edited": false, "score": 0, "creation_date": 1464801162, "post_id": 37574669, "comment_id": 62637015, "body": "And so if by chance any of the 1st and 5th element in repeated in 2,3,4 , then when i need to answer maximum count of an element in the set , i need to decrease the elements count but not the entire element till it completely gets deleted"}], "answers": [{"comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1464803731, "post_id": 37575628, "comment_id": 62638487, "body": "<code>map</code> and <code>set</code> complexity to find an element is O(log N)"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1464803879, "post_id": 37575628, "comment_id": 62638570, "body": "Oh yeah, that&#39;s what I meant to say :) Thanks!"}, {"owner": {"reputation": 61, "user_id": 4492391, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005275459008/picture?type=large", "display_name": "Karthik Priyatham", "link": "https://stackoverflow.com/users/4492391/karthik-priyatham"}, "edited": false, "score": 0, "creation_date": 1464843182, "post_id": 37575628, "comment_id": 62652194, "body": "Thank you for the info . And i Want to report the element with maximum count value  . i.e which was inserted maximum times And i need to do  it in less than or equal to O(logN) . Is there any possibility while using unordered _map by the way ....."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1464854442, "post_id": 37575628, "comment_id": 62657440, "body": "You can do that in linear time at best using the container, or constant time if you just track the current max frequency and most frequent value as you go inserting. Correcting that after decrement is linear again though."}, {"owner": {"reputation": 61, "user_id": 4492391, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005275459008/picture?type=large", "display_name": "Karthik Priyatham", "link": "https://stackoverflow.com/users/4492391/karthik-priyatham"}, "edited": false, "score": 0, "creation_date": 1465293324, "post_id": 37575628, "comment_id": 62829308, "body": "Thanks for your comment . I GOT it useless"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 4, "last_activity_date": 1464806179, "last_edit_date": 1464806179, "creation_date": 1464803570, "answer_id": 37575628, "question_id": 37574669, "link": "https://stackoverflow.com/questions/37574669/how-do-i-decrease-the-count-of-an-element-in-a-multiset-in-c/37575628#37575628", "title": "How do I decrease the count of an element in a multiset in C++?", "body": "<blockquote>\n  <p>... I am using a multi-set in c++, which stores an element and the respective count of it  ...</p>\n</blockquote>\n\n<p>No you aren't. You're using a multi-set which stores <em>n</em> copies of a value which was inserted <em>n</em> times.</p>\n\n<p>If you want to store something relating a value to a count, use an associative container like <code>std::map&lt;int, int&gt;</code>, and use <code>map[X]++</code> to increment the number of Xs.</p>\n\n<blockquote>\n  <p>... i need an O(1) constant time function ... to decrease the count ...</p>\n</blockquote>\n\n<p>Both <code>map</code> and <code>set</code> have O(log N) complexity just to <em>find</em> the element you want to alter, so this is impossible with them. Use <code>std::unordered_map</code>/<code>set</code> to get O(1) complexity.</p>\n\n<blockquote>\n  <p>... I just want to decrease the count of that element in the set by 1 till it is >0</p>\n</blockquote>\n\n<p>I'm not sure what that means.</p>\n\n<ul>\n<li><p>with a set:</p>\n\n<ul>\n<li>to remove <em>all</em> copies of an element from the set, use <code>equal_range</code> to get a range (pair of iterators), and then erase that range</li>\n<li>to remove all-but-one copies in a non-empty range, just increment the first iterator in the pair and check it's still not equal to the second iterator before erasing the new range.</li>\n</ul>\n\n<p>these both have an O(log N) lookup (<code>equal_range</code>) step followed by a linear-time erase step (although it's linear with the number of elements having the same key, not N).</p></li>\n<li><p>with a map:</p>\n\n<ul>\n<li>to remove the count from a map, just erase the key</li>\n<li>to set the count to one, just use <code>map[key]=1;</code></li>\n</ul>\n\n<p>both of these have an O(log N) lookup followed by a constant-time erase</p></li>\n<li>with an unordered map ... for your purposes it's identical to the map above, except with O(1) complexity.</li>\n</ul>\n\n<p>Here's a quick example using <code>unordered_map</code>:</p>\n\n<pre><code>template &lt;typename Key&gt;\nclass Counter {\n    std::unordered_map&lt;Key, unsigned&gt; count_;\npublic:\n    int inc(Key k, unsigned delta = 1) {\n        auto result = count_.emplace(k, delta);\n        if (result.second) {\n            return delta;\n        } else {\n            unsigned&amp; current = result.first-&gt;second;\n            current += delta;\n            return current;\n        }\n    }\n    unsigned dec(Key k, unsigned delta = 1) {\n        auto iter = count_.find(k);\n        if (iter == count_.end()) return 0;\n        unsigned&amp; current = iter-&gt;second;\n        if (current &gt; delta) {\n            current -= delta;\n            return current;\n        }\n        // else current &lt;= delta means zero\n        count_.erase(iter);\n        return 0;\n    }\n    unsigned get(Key k) const {\n        auto iter = count_.find(k);\n        if (iter == count_.end()) return 0;\n        return iter-&gt;second;\n    }\n};\n</code></pre>\n\n<p>and use it like so:</p>\n\n<pre><code>int main() {\n    Counter&lt;int&gt; c;\n    // test increment\n    assert(c.inc(1) == 1);\n    assert(c.inc(2) == 1);\n    assert(c.inc(2) == 2);\n    // test lookup\n    assert(c.get(0) == 0);\n    assert(c.get(1) == 1);\n    // test simple decrement\n    assert(c.get(2) == 2);\n    assert(c.dec(2) == 1);\n    assert(c.get(2) == 1);\n    // test erase and underflow\n    assert(c.dec(2) == 0);\n    assert(c.dec(2) == 0);\n    assert(c.dec(1, 42) == 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4492391, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005275459008/picture?type=large", "display_name": "Karthik Priyatham", "link": "https://stackoverflow.com/users/4492391/karthik-priyatham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464806179, "creation_date": 1464800207, "last_edit_date": 1464804206, "question_id": 37574669, "link": "https://stackoverflow.com/questions/37574669/how-do-i-decrease-the-count-of-an-element-in-a-multiset-in-c", "title": "How do I decrease the count of an element in a multiset in C++?", "body": "<p>I am using a multi-set in c++, which I believe stores an element and the respective count of it when it is inserted. </p>\n\n<p>Here, when I want to delete an element, I just want to decrease the count of that element in the set by 1 till it is greater than 0.</p>\n\n<p>Example C++ code:</p>\n\n<pre><code>    multiset&lt;int&gt;mset;\n    mset.insert(2);\n    mset.insert(2);\n    printf(\"%d \",mset.count(2)); //this returns 2\n    // here I need an O(1) constant time function (in-built or whatever )\n    // to decrease the count of 2 in the set without deleting it \n    // Remember constant time only\n\n      -&gt; Function and its specifications\n\n    printf(\"%d \",mset.count(2)); // it should print 1 now .\n</code></pre>\n\n<p>Is there any way to achieve that or should i go by deleting that and inserting the element 2 by the required (count-1) times?</p>\n"}, {"tags": ["c++", "ros", "catkin"], "comments": [{"owner": {"reputation": 2794, "user_id": 5836291, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1327347077/picture?type=large", "display_name": "Vtik", "link": "https://stackoverflow.com/users/5836291/vtik"}, "edited": false, "score": 0, "creation_date": 1464817585, "post_id": 37574644, "comment_id": 62645550, "body": "It looks like things here are getting pretty complicated to tell the exact solution, but I would suggest that you try to compile only <code>robot_controller_library</code> as it looks like it&#39;s the one throwing errors and no other dependencies are needed for it&#39;s building. So, restart simple, get the library files to compile then add the other libraries... Keep it simple, keep it clear !"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1464842535, "post_id": 37574644, "comment_id": 62651939, "body": "<i>Possibly</i> (I&#39;m not sure about this), you are clearing out some necessary flags: <code>set(CMAKE_CXX_FLAGS &quot;-std=c++11&quot;)</code>. You could give this: <code>set(CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS} &quot;-std=c++11&quot;)</code> a try instead."}, {"owner": {"reputation": 3, "user_id": 6067017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1268cd7a966721213a6e151832a66492?s=128&d=identicon&r=PG&f=1", "display_name": "S. Perfees", "link": "https://stackoverflow.com/users/6067017/s-perfees"}, "edited": false, "score": 0, "creation_date": 1464869008, "post_id": 37574644, "comment_id": 62667356, "body": "I just edited the post for the building without the node.  if I replace by:      &lt;code&gt;     set(CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS}      &lt;/code&gt;   I get the following error :     &lt;code&gt;     c++: fatal error: no input files     compilation terminated.     /bin/sh: 1: -std=c++11: not found     make[2]: *** [ur10/CMakeFiles/Robot_controller_lib.dir/src/List_Container&zwnj;&#8203;/List_Container.cpp.&zwnj;&#8203;o] Erreur 127     &lt;/code&gt;"}], "owner": {"reputation": 3, "user_id": 6067017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1268cd7a966721213a6e151832a66492?s=128&d=identicon&r=PG&f=1", "display_name": "S. Perfees", "link": "https://stackoverflow.com/users/6067017/s-perfees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2870, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464867812, "creation_date": 1464800134, "last_edit_date": 1464867812, "question_id": 37574644, "link": "https://stackoverflow.com/questions/37574644/catkin-ros-undefined-reference-to", "title": "Catkin/Ros &quot;undefined reference to&quot;", "body": "<p>I'm trying to build a project with ROS, but I keep getting \"undefined reference to &lt;>\" errors, for exemple :</p>\n\n<pre><code>\n\n    CMakeFiles/robot_controller_node.dir/src/Node_Robot_Controller.cpp.o: dans la fonction \u00ab main \u00bb:\n    Node_Robot_Controller.cpp:(.text+0x1f1): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab trajectoryclass::trajectoryclass(ros::NodeHandle) \u00bb\n    Node_Robot_Controller.cpp:(.text+0x796): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::getElement(int) \u00bb\n    Node_Robot_Controller.cpp:(.text+0x7ab): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab Task_Interface::getTaskDescription() \u00bb\n    Node_Robot_Controller.cpp:(.text+0x7d1): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::getElement(int) \u00bb\n    Node_Robot_Controller.cpp:(.text+0x7d9): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab Task_Interface::getTaskId() \u00bb\n    Node_Robot_Controller.cpp:(.text+0x83a): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::getElement(int) \u00bb\n    Node_Robot_Controller.cpp:(.text+0x977): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::next() \u00bb\n    Node_Robot_Controller.cpp:(.text+0xa60): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::getElement(int) \u00bb\n    Node_Robot_Controller.cpp:(.text+0xa68): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab Task_Interface::getTaskId() \u00bb\n    Node_Robot_Controller.cpp:(.text+0xab5): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::getElement(int) \u00bb\n    Node_Robot_Controller.cpp:(.text+0xadd): r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab List_Container::isEmpty() \u00bb\n    /home/tcozic/Documents/git_ur10/catkin_ws/devel/lib/librobot_controller_library.so: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab error_norm(std::vector >, std::vector >) \u00bb\n    /home/tcozic/Documents/git_ur10/catkin_ws/devel/lib/librobot_controller_library.so: r\u00e9f\u00e9rence ind\u00e9finie vers \u00ab Position_Joint::getVector() \u00bb\n    collect2: error: ld returned 1 exit status\n    make[2]: *** [/home/tcozic/Documents/git_ur10/catkin_ws/devel/lib/ur10/robot_controller_node] Erreur 1\n    make[1]: *** [ur10/CMakeFiles/robot_controller_node.dir/all] Erreur 2\n    make: *** [all] Erreur 2\n    Invoking \"make install -j4 -l4\" failed\n\n</code></pre>\n\n<p>This is my CmakeLists.txt for the compilation of this package :</p>\n\n<pre><code>&lt;pre&gt;&lt;code&gt;\ncmake_minimum_required(VERSION 2.8.3)\nproject(ur10)\n\nset(MSG_DEPS\n  std_msgs\n  sensor_msgs\n  geometry_msgs\n  trajectory_msgs\n  moveit_msgs\n)\n\n\nfind_package(catkin REQUIRED COMPONENTS\n  message_generation\n  moveit_core\n  moveit_ros_planning\n  moveit_ros_planning_interface\n  dynamic_reconfigure\n  moveit_ros_move_group\n  pcl_conversions ##adding\n  pcl_msgs ##adding\n  roscpp\n  rospy\n  roslib\n  #tf\n  #urdf\n  genmsg\n ${MSG_DEPS}\n)\n\n\n\n\nfind_package(VISP REQUIRED)\nfind_library(VISP_LIBRARIES NAMES visp HINTS ${VISP_LIBRARY_DIRS} )\n\nfind_package(PCL REQUIRED)\nfind_package(OpenCV REQUIRED)\n\nfind_package( ur_package REQUIRED)\n\n## Generate messages in the 'msg' folder\n add_message_files(\n   FILES\n   Task_move.msg\n   Task_wait.msg\n   Piece.msg\n   Task.msg\n   Task_tool.msg\n )\n# Generate services in the 'srv' folder\n add_service_files(\n   FILES\n   Validation.srv\n   NewPiece.srv\n )\n\n## Generate added messages and services with any dependencies listed here\n generate_messages(\n   DEPENDENCIES\n   std_msgs  # Or other packages containing msgs\n )\ncatkin_package(\n  INCLUDE_DIRS include\n  LIBRARIES ${PROJECT_NAME}\n  CATKIN_DEPENDS message_runtime roscpp rospy roslib moveit_core moveit_ros_planning_interface   #moveit_plan_execution\n moveit_trajectory_execution_manager moveit_ros_planning  moveit_planning_scene_monitor ${MSG_DEPS}\n  DEPENDS VISP OpenCV\n)\n\n\n###########\n## Build ##\n###########\n\n\ninclude(CheckCXXCompilerFlag)\nCHECK_CXX_COMPILER_FLAG(\"-std=c++11\" COMPILER_SUPPORTS_CXX11)\nCHECK_CXX_COMPILER_FLAG(\"-std=c++0x\" COMPILER_SUPPORTS_CXX0X)\nif(COMPILER_SUPPORTS_CXX11)\n    set(CMAKE_CXX_FLAGS \"-std=c++11\")\nelseif(COMPILER_SUPPORTS_CXX0X)\n    set(CMAKE_CXX_FLAGS \"-std=c++0x\")\nelse()\n    message(FATAL_ERROR \"The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler. Suggested solution: update the pkg build-essential \")\nendif()\n\n\n## Specify additional locations of header files\n## Your package locations should be listed before other locations\ninclude_directories(include ${catkin_INCLUDE_DIRS})\ninclude_directories(${ur_package_INCLUDE_DIRS})\n\n## Declare a C++ library\n add_library(robot_controller_library\n     src/List_Container/List_Container.cpp\n\n     src/Piece_Description/Piece.cpp\n\n     src/Robot_Description/Robot.cpp\n     src/Robot_Description/Tool.cpp\n     src/Robot_Description/Tool_IO_Config.cpp\n\n     src/Position/Position_Interface.cpp\n     src/Position/Position_Joint.cpp\n     src/Position/Position_TCP.cpp\n\n     src/Task/Task_Move.cpp\n     src/Task/Task_Tool.cpp\n     src/Task/Task_Wait.cpp\n )\nadd_dependencies(robot_controller_library ur10_gencpp)\n\n# Declare a C++ executable\nadd_executable(robot_controller_node src/Node_Robot_Controller.cpp)\n #add_dependencies(robot_controller ${${PROJECT_NAME}_EXPORTED_TARGETS} ${catkin_EXPORTED_TARGETS})\n target_link_libraries(robot_controller_node  robot_controller_library ${catkin_LIBRARIES} ${VISP_LIBRARIES})\n\n\n&lt;/code&gt;&lt;/pre&gt;\n</code></pre>\n\n<p>All *.cpp files are classes, with theirs own headers in the include/ur10/ [Directory_name]/directories, except for the Node_controller_node.cpp</p>\n\n<p>This is my first big project with ROS and I don't understand where the problem come from....</p>\n\n<p>Thanks in advance for your help !</p>\n\n<p>Edit : I tried to compile the library without the node:</p>\n\n<pre> <code>\n\n\n## Declare a C++ library\nset(SOURCE_robot_controller_library\n     src/List_Container/List_Container.cpp\n\n     src/Piece_Description/Piece.cpp\n\n     src/Robot_Description/Robot.cpp\n     src/Robot_Description/Tool.cpp\n     src/Robot_Description/Tool_IO_Config.cpp\n\n     src/Position/Position_Interface.cpp\n     src/Position/Position_Joint.cpp\n     src/Position/Position_TCP.cpp\n\n     src/Task/Task_Move.cpp\n     src/Task/Task_Tool.cpp\n     src/Task/Task_Wait.cpp\n\n\n     src/Task/Task_Interface.cpp\n\n )\nadd_library(Robot_controller_lib ${SOURCE_robot_controller_library})\nadd_dependencies(Robot_controller_lib ur10_gencpp)\ntarget_link_libraries(Robot_controller_lib\n        ${catkin_LIBRARIES}\n        ${VISP_LIBRARIES})\n</code></pre>\n\n<p>I don't have any errrors, but I keep getting the reference error when I try to add the compilation of the node :</p>\n\n<pre><code>\nadd_executable(robot_controller_node src/Node_Robot_Controller.cpp)\nadd_dependencies(robot_controller_node ${${PROJECT_NAME}_EXPORTED_TARGETS} ${catkin_EXPORTED_TARGETS})\ntarget_link_libraries(robot_controller_node \n    Robot_controller_lib\n    ${catkin_LIBRARIES}\n        ${VISP_LIBRARIES})\n</code></pre>\n\n<p>PS: I can't post code here, it is for a professionnal project.</p>\n\n<p>Could it be a probleme with the use of inheritance or virtual functions with catkin ? The classes List_Container and Task_Interface possess virtual functions and inherit others class. I already make sure that all functions have been implemented.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1464799885, "post_id": 37574516, "comment_id": 62636289, "body": "What&#39;s that: <code>cout&lt;return 0;</code> ?"}, {"owner": {"reputation": 180, "user_id": 5757546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/102898655207f4d4a5203449e003be60?s=128&d=identicon&r=PG&f=1", "display_name": "temre", "link": "https://stackoverflow.com/users/5757546/temre"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1464801178, "post_id": 37574516, "comment_id": 62637026, "body": "I write it wrong actually there is not a thing like that"}], "answers": [{"comments": [{"owner": {"reputation": 180, "user_id": 5757546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/102898655207f4d4a5203449e003be60?s=128&d=identicon&r=PG&f=1", "display_name": "temre", "link": "https://stackoverflow.com/users/5757546/temre"}, "edited": false, "score": 0, "creation_date": 1464811664, "post_id": 37574577, "comment_id": 62642585, "body": "It still says &quot;unary minus operator applied to unsigned type, result still unsigned&quot;"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 180, "user_id": 5757546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/102898655207f4d4a5203449e003be60?s=128&d=identicon&r=PG&f=1", "display_name": "temre", "link": "https://stackoverflow.com/users/5757546/temre"}, "edited": false, "score": 0, "creation_date": 1464820445, "post_id": 37574577, "comment_id": 62646604, "body": "It seems because unary minus operator is applied to unsigned type and the result is used as unsigned number. Updated."}, {"owner": {"reputation": 180, "user_id": 5757546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/102898655207f4d4a5203449e003be60?s=128&d=identicon&r=PG&f=1", "display_name": "temre", "link": "https://stackoverflow.com/users/5757546/temre"}, "edited": false, "score": 0, "creation_date": 1464856944, "post_id": 37574577, "comment_id": 62659053, "body": "I want to read a file and calculate its crc32. Can you help me to modify the code?"}, {"owner": {"reputation": 180, "user_id": 5757546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/102898655207f4d4a5203449e003be60?s=128&d=identicon&r=PG&f=1", "display_name": "temre", "link": "https://stackoverflow.com/users/5757546/temre"}, "edited": false, "score": 0, "creation_date": 1464857058, "post_id": 37574577, "comment_id": 62659124, "body": "This code takes chars from an array and calculates its crc. So, i need to read a file put the information in array and calculate its crc again. Is there a better solution?"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 1, "last_activity_date": 1464821398, "last_edit_date": 1464821398, "creation_date": 1464799916, "answer_id": 37574577, "question_id": 37574516, "link": "https://stackoverflow.com/questions/37574516/crc-32-does-not-work/37574577#37574577", "title": "CRC 32 Does not work", "body": "<ul>\n<li>This <code>crc32</code> function calls for null-terminated message, so passing pointer to <code>char</code> variable is bad.</li>\n<li>The line <code>cout&lt;return 0;</code> doesn't make sense.</li>\n<li>There is conflict of loop variable between <code>for(j=7; j&gt;=0; j--){</code> and <code>for(j=0; j&gt;= 0; j--) {</code>. Remove the inner loop because it is one-time loop and it need not be a loop.</li>\n<li>The lines <code>i = i + 1;</code> and <code>return ~crc;</code> are in wrong place. You should format your code properly.</li>\n<li>The compiler seems hated to use <code>-(crc &amp; 1)</code> to obtain <code>0xFFFFFFFF</code>.</li>\n</ul>\n\n<p>Corrected code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\n\nunsigned int crc32(unsigned char* message) {\n    int i, j;\n\n    unsigned int byte, crc;\n\n    i = 0;\n\n    crc = 0xFFFFFFFF;\n    while(message[i] != 0) {\n        byte = message[i];\n        crc = crc ^ byte;\n        for(j=7; j&gt;=0; j--){\n            crc = (crc &gt;&gt; 1) ^ (crc &amp; 1 ? 0xEDB88320 : 0);\n        }\n        i = i + 1;\n\n    }\n    return ~crc;\n}\n\nint main()\n{\n    unsigned char a[] = {'a', 0};\n    cout &lt;&lt; crc32(a);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 180, "user_id": 5757546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/102898655207f4d4a5203449e003be60?s=128&d=identicon&r=PG&f=1", "display_name": "temre", "link": "https://stackoverflow.com/users/5757546/temre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 37574577, "answer_count": 1, "score": -2, "last_activity_date": 1464821398, "creation_date": 1464799740, "last_edit_date": 1464799816, "question_id": 37574516, "link": "https://stackoverflow.com/questions/37574516/crc-32-does-not-work", "title": "CRC 32 Does not work", "body": "<p>Hello i found a C++ implementation but it does not work. Here:</p>\n\n<pre><code>unsigned int crc32(unsigned char* message) {\n    int i, j;\n\n    unsigned int byte, crc, mask;\n\n    i = 0;\n\n    crc = 0xFFFFFFFF;\n    while(message[i] != 0) {\n     byte = message[i];\n     crc = crc ^ byte;\n    for(j=7; j&gt;=0; j--){\n     for(j=0; j&gt;= 0; j--) {\n      mask = -(crc &amp; 1);\n      crc = (crc &gt;&gt; 1) ^ (0xEDB88320 &amp; mask);\n        }\n        i = i + 1;\n       }\n\n    return ~crc;\n\n }\n}\n\nint main()\n{\nunsigned char a='a';\ncrc32(&amp;a);\n\ncout&lt;return 0;\n</code></pre>\n\n<p>It says unary operator applied to unsigned type, result still unsigned.</p>\n\n<p>When i delete the minus it does not give me a true CRC code.</p>\n"}, {"tags": ["c++", "wifstream"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464801684, "post_id": 37574489, "comment_id": 62637327, "body": "Is your platform Windows? If so did you set the correct code page? If not does your terminal properly support Unicode? Did you look at the actual contents of the string in a debugger to see if they were correct?"}, {"owner": {"reputation": 53, "user_id": 5635877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dETlgp_f9VU/AAAAAAAAAAI/AAAAAAAAAOc/oWG1iAa8GjM/photo.jpg?sz=128", "display_name": "G_glop", "link": "https://stackoverflow.com/users/5635877/g-glop"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1464802337, "post_id": 37574489, "comment_id": 62637703, "body": "Yes. I don&#39;t know how to detect it from the .txt files i&#39;m reading. Standard windows/VS terminal doesn&#39;t support unicode. And no, they weren&#39;t correct in the debugger."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": -1, "last_activity_date": 1464800276, "creation_date": 1464800276, "answer_id": 37574686, "question_id": 37574489, "link": "https://stackoverflow.com/questions/37574489/wstring-read-from-txt-file-doesnt-print-properly-but-when-written-back-to-a-f/37574686#37574686", "title": "wstring read from .txt file doesn&#39;t print properly, but when written back to a file it&#39;s fine", "body": "<p>I don't know if this is the cause of your problem but...</p>\n\n<p>If you write</p>\n\n<pre><code> while (fileStream.eof() == false) {\n getline(fileStream, input);\n text += input + L'\\n';\n}\n</code></pre>\n\n<p>You read two times the last line because <code>filestream.eof()</code> is <code>false</code> until you try to read past the last line.</p>\n\n<p>I suggest you something like</p>\n\n<pre><code> while ( getline(fileStream, input) )\n    text += input + L'\\n';\n</code></pre>\n\n<p>p.s.: sorry for my bad English</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 5635877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dETlgp_f9VU/AAAAAAAAAAI/AAAAAAAAAOc/oWG1iAa8GjM/photo.jpg?sz=128", "display_name": "G_glop", "link": "https://stackoverflow.com/users/5635877/g-glop"}, "is_accepted": true, "score": 0, "last_activity_date": 1464881253, "creation_date": 1464881253, "answer_id": 37596107, "question_id": 37574489, "link": "https://stackoverflow.com/questions/37574489/wstring-read-from-txt-file-doesnt-print-properly-but-when-written-back-to-a-f/37596107#37596107", "title": "wstring read from .txt file doesn&#39;t print properly, but when written back to a file it&#39;s fine", "body": "<p>Solved by reading the file as binary and then converting to wstring using MultiByteToWideChar function from win32 api:</p>\n\n<pre><code>std::ifstream fileStream(path, std::ios::binary | std::ios::ate);\nauto size = fileStream.tellg();\nfileStream.seekg(0, std::ios::beg);\n\nLPCCH memory = new CCHAR[size];\n\nfileStream.read((char*)memory, size);\n\ntext.resize(size);\nMultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, memory, size, (LPWSTR)text.c_str(), text.length());\ndelete[] memory;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5635877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dETlgp_f9VU/AAAAAAAAAAI/AAAAAAAAAOc/oWG1iAa8GjM/photo.jpg?sz=128", "display_name": "G_glop", "link": "https://stackoverflow.com/users/5635877/g-glop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 37596107, "answer_count": 2, "score": 0, "last_activity_date": 1464881253, "creation_date": 1464799651, "question_id": 37574489, "link": "https://stackoverflow.com/questions/37574489/wstring-read-from-txt-file-doesnt-print-properly-but-when-written-back-to-a-f", "title": "wstring read from .txt file doesn&#39;t print properly, but when written back to a file it&#39;s fine", "body": "<p>I'm reading a wstring from .txt file using a while !eof loop:</p>\n\n<pre><code>std::wifstream fileStream(path);\nstd::wstring input;\n while (fileStream.eof() == false) {\n getline(fileStream, input);\n text += input + L'\\n';\n}\n</code></pre>\n\n<p>But when i print it in wcout some characters get turned into other ones. So far \u010d has turned to e(with a backwards comma ontop), \u011b to i(with a backwards comma ontop) and \u0161 to an error character. First i suspected some format issue. But when i write the string to a new .txt file it's completely fine.</p>\n\n<p>Also i'm using <code>_setmode(_fileno(stdout), _O_U8TEXT);</code> to get wcout to even work.</p>\n"}, {"tags": ["c++", "gcc", "visual-c++", "clang", "language-lawyer"], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 3, "last_activity_date": 1464800366, "last_edit_date": 1464800366, "creation_date": 1464799925, "answer_id": 37574580, "question_id": 37574449, "link": "https://stackoverflow.com/questions/37574449/visual-studio-and-clang-do-not-throw-stdbad-array-new-length/37574580#37574580", "title": "Visual Studio and Clang do not throw std::bad_array_new_length", "body": "<p>GCC is correct, the behavior is defined by the standard.</p>\n\n<p><code>$5.3.4/7 New [expr.new]</code></p>\n\n<blockquote>\n  <p>The expression in a noptr-new-declarator is erroneous if:</p>\n  \n  <p>...</p>\n  \n  <p>(7.4) \u2014 the new-initializer is a braced-init-list and the number of\n  array elements for which initializers are provided (including the\n  terminating \u2019\\0\u2019 in a string literal (2.13.5)) exceeds the number of\n  elements to initialize.</p>\n  \n  <p>...</p>\n  \n  <p>a new-expression with an erroneous expression does not call an\n  allocation function and terminates by throwing an exception of a type\n  that would match a handler (15.3) of type <code>std::bad_array_new_length</code>\n  (18.6.2.2).</p>\n</blockquote>\n"}], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 37574580, "answer_count": 1, "score": 3, "last_activity_date": 1464800366, "creation_date": 1464799538, "last_edit_date": 1495535338, "question_id": 37574449, "link": "https://stackoverflow.com/questions/37574449/visual-studio-and-clang-do-not-throw-stdbad-array-new-length", "title": "Visual Studio and Clang do not throw std::bad_array_new_length", "body": "<p>This is a follow up to to a <a href=\"https://stackoverflow.com/q/37573209/1460794\">prior question</a>.</p>\n\n<p>In the following program Visual Studio 2015 <a href=\"http://coliru.stacked-crooked.com/a/143c79643f16035e\" rel=\"nofollow noreferrer\">and Clang</a> both do not throw <code>std::bad_array_new_length</code>. <a href=\"http://coliru.stacked-crooked.com/a/f9f9f132cb41d151\" rel=\"nofollow noreferrer\">gcc does</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;exception&gt;\n#include &lt;new&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::uniform_int_distribution&lt;int&gt; dist(2,2);\n    try {\n\n        auto arr = new int[dist(rd)][4][2]{{{1}},{{2}},{{3}}}; // may write to unallocated memory\n\n        auto val1 = arr[0][0][0];\n        auto val2 = arr[1][0][0];\n        auto val3 = arr[2][0][0];\n        auto result = val1 + val2 + val3;\n        std::cout &lt;&lt; result;\n    }\n    catch (std::exception const&amp; e) {\n        std::cerr &lt;&lt; e.what() &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In Visual Studio the program crashes without any message. In Clang there is no error (perhaps because it <a href=\"https://stackoverflow.com/a/22455263/1460794\">avoided the allocation</a> as mentioned in <a href=\"https://stackoverflow.com/a/37573446/1460794\">this answer</a>). </p>\n\n<p>Three compilers, three results. Is this undefined behavior or is this is a bug in Visual Studio?</p>\n"}, {"tags": ["c++", "opencv", "houghlinesp"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1464799705, "post_id": 37574385, "comment_id": 62636192, "body": "The image you used to compute Hough would helpful"}, {"owner": {"reputation": 75, "user_id": 6271584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-yi9jKklIpbY/AAAAAAAAAAI/AAAAAAAAF8E/brWI0r2DrMA/photo.jpg?sz=128", "display_name": "Ilario Piconese", "link": "https://stackoverflow.com/users/6271584/ilario-piconese"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1464870057, "post_id": 37574385, "comment_id": 62668120, "body": "basically I have to detect the geometric features in the images . I would like to be able to calculate for example the number of windows within an image , then I consider a window as a polygon composed of 4 segments that form a closed path"}], "answers": [{"tags": [], "owner": {"reputation": 2492, "user_id": 2807860, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd25593e6c2a32247f10feebe10a0b63?s=128&d=identicon&r=PG&f=1", "display_name": "Elad Joseph", "link": "https://stackoverflow.com/users/2807860/elad-joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1465465192, "creation_date": 1465465192, "answer_id": 37722244, "question_id": 37574385, "link": "https://stackoverflow.com/questions/37574385/search-of-segments-that-form-an-angle-with-houghlinesp-and-c/37722244#37722244", "title": "search of segments that form an angle with HoughLinesP and c++", "body": "<p>If I understand correctly, given a polygon you want to know how many vertices it has.</p>\n\n<p>I think a nice option is to use <a href=\"http://docs.opencv.org/3.1.0/d3/dc0/group__imgproc__shape.html#ga0012a5fdaea70b8a9970165d98722b4c&amp;gsc.tab=0\" rel=\"nofollow\">cv::approxPolyDP</a>, which will give you the minimum number of vertices needed to represent your polygon. According to the number of vertices, you can classify the polygons.</p>\n\n<p>You can look at <a href=\"http://www.pyimagesearch.com/2016/02/08/opencv-shape-detection/\" rel=\"nofollow\">pyImageSerach</a> blog for a good tutorial (in Python).</p>\n"}], "owner": {"reputation": 75, "user_id": 6271584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-yi9jKklIpbY/AAAAAAAAAAI/AAAAAAAAF8E/brWI0r2DrMA/photo.jpg?sz=128", "display_name": "Ilario Piconese", "link": "https://stackoverflow.com/users/6271584/ilario-piconese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465465192, "creation_date": 1464799370, "last_edit_date": 1465465169, "question_id": 37574385, "link": "https://stackoverflow.com/questions/37574385/search-of-segments-that-form-an-angle-with-houghlinesp-and-c", "title": "search of segments that form an angle with HoughLinesP and c++", "body": "<p>I want to call a function to compare all of the segments that I calculate in my code and know how many polygons there are in my view, made up of straight lines, which consist of 3, 4 or more segments that form a closed path, or alternatively i would like to know how many pairs of straight segments form an angle (thus have a common point):</p>\n\n<pre><code>           vector&lt;Vec4i&gt; lines;\n       HoughLinesP(dst, lines, 1, CV_PI/180, 80, 50, 10 );\n       for( size_t i = 0; i &lt; lines.size(); i++ )\n           {\n           Vec4i l = lines[i];\n           double x = l[0]-l[2];\n           double y = l[1]-l[3];\n           double dist = pow(x,2) + pow(y,2);\n           dist= sqrt(dist);\n           segments.push_back(round(dist));\n           line( cdst, Point(l[0], l[1]), Point(l[2], l[3]), Scalar(0,0,255), 3, CV_AA);\n           }\n</code></pre>\n\n<p>alternatvely, trying to simplify, how can i calculate the number of intersections between segments?</p>\n"}, {"tags": ["c++", "qt", "user-interface"], "comments": [{"owner": {"reputation": 584, "user_id": 1288414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8900980242afbf0612f998f77dfb7a9?s=128&d=identicon&r=PG", "display_name": "Md. Minhazul Haque", "link": "https://stackoverflow.com/users/1288414/md-minhazul-haque"}, "edited": false, "score": 2, "creation_date": 1464800586, "post_id": 37574381, "comment_id": 62636680, "body": "It would be great if you can post some code samples, specially when and where you defined/declared the widgets. You can always start the app in debug mode and check step by step where the unwanted forms are appearing."}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 4301117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81eee027be0d8a17a2dbced4f0ccede2?s=128&d=identicon&r=PG&f=1", "display_name": "Leherenn", "link": "https://stackoverflow.com/users/4301117/leherenn"}, "is_accepted": true, "score": 0, "last_activity_date": 1472479619, "creation_date": 1472479619, "answer_id": 39208301, "question_id": 37574381, "link": "https://stackoverflow.com/questions/37574381/blinking-form-windows-in-qt5-application/39208301#39208301", "title": "Blinking form windows in Qt5 application", "body": "<p>This was due to widgets not having parents when they were created, but they quickly disappeared because they were then immediately added in a layout.</p>\n"}], "owner": {"reputation": 450, "user_id": 4301117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81eee027be0d8a17a2dbced4f0ccede2?s=128&d=identicon&r=PG&f=1", "display_name": "Leherenn", "link": "https://stackoverflow.com/users/4301117/leherenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1578601697, "accepted_answer_id": 39208301, "answer_count": 1, "score": 0, "last_activity_date": 1578598736, "creation_date": 1464799348, "last_edit_date": 1464864648, "question_id": 37574381, "link": "https://stackoverflow.com/questions/37574381/blinking-form-windows-in-qt5-application", "closed_reason": "Not suitable for this site", "title": "Blinking form windows in Qt5 application", "body": "<p>I have a rather complex Qt application with a lot of different ui elements/files.<br>\nBasically, when going from a welcome screen to the main application view, I have a few small windows appearing and almost immediately disappearing. The only text on them is the window title \"Form\", like so.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sug6Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sug6Q.png\" alt=\"The unknown windows\"></a></p>\n\n<p>I assume this has something to do with some ui elements not having a parent, or something like that, but I have no idea what to look for exactly? I don't know where to look for either because there are no clue on the windows themselves and too many graphical elements to blindly go through each of them.</p>\n\n<p>Any idea on to remove them, or at least a method to try to solve this would be much appreciated.</p>\n\n<p>Cheers.</p>\n\n<p>EDIT:\nMost of the code looks like this:</p>\n\n<pre><code>myPanelQWidget = new MyPanel(this);\nleftPanelQStackedWidgets-&gt;addWidget(myPanelQWidget);\nleftPanelQStackedWidgets-&gt;setCurrentWidget(myPanelQWidget);\n</code></pre>\n"}, {"tags": ["c++", "iostream", "cin"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1464800141, "post_id": 37574355, "comment_id": 62636433, "body": "If possible for you, changing <code>std::cin</code> to a <code>std::istringstream</code> object works. Instead of functions using <code>std::cin</code> directly, they would have a <code>std::istream&amp;</code> parameter."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1464800004, "creation_date": 1464800004, "answer_id": 37574603, "question_id": 37574355, "link": "https://stackoverflow.com/questions/37574355/how-to-substitute-dummy-values-to-stdcin/37574603#37574603", "title": "How to Substitute &quot;Dummy&quot; values to std::cin?", "body": "<p>You can manipulate the <code>rdbuf</code> associated with <code>std::cin</code> to pull that off.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nint main() {\n   int v;\n   std::vector&lt;int&gt; values;\n\n   // Create a istringstream using a hard coded string.\n   std::string data = \"10 15 20\";\n   std::istringstream str(data);\n\n   // Use the rdbuf of the istringstream as the rdbuf of std::cin.\n   auto old = std::cin.rdbuf(str.rdbuf());\n\n   while(std::cin &gt;&gt; v) {\n      values.emplace_back(v);\n   }\n   std::cout &lt;&lt; \"The Sum is \" &lt;&lt; std::accumulate(values.begin(), values.end(), 0) &lt;&lt; std::endl;\n\n   // Restore the rdbuf of std::cin.\n   std::cin.rdbuf(old);\n\n   return 0;\n}\n</code></pre>\n\n<p>See it working at <a href=\"http://ideone.com/ZF02op\" rel=\"nofollow\">http://ideone.com/ZF02op</a>.</p>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 1, "accepted_answer_id": 37574603, "answer_count": 1, "score": 2, "last_activity_date": 1464800004, "creation_date": 1464799278, "question_id": 37574355, "link": "https://stackoverflow.com/questions/37574355/how-to-substitute-dummy-values-to-stdcin", "title": "How to Substitute &quot;Dummy&quot; values to std::cin?", "body": "<p>Given the simple program below:</p>\n\n<pre><code>int main() {\n    int v;\n    std::vector&lt;int&gt; values;\n    while(std::cin &gt;&gt; v) {\n        values.emplace_back(v);\n    }\n    std::cout &lt;&lt; \"The Sum is \" &lt;&lt; std::accumulate(values.begin(), values.end(), 0) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I'd like to fill up <code>std::cin</code> programmatically before this code executes, in a similar manner to the following:</p>\n\n<pre><code>int main() {\n    int v;\n    std::vector&lt;int&gt; values;\n    for(int i = 0; i &lt; 10; i++) {\n        std::cin &lt;&lt; i &lt;&lt; \" \"; //Doesn't compile, obviously\n    }\n    /*\n    The Rest of the Code.\n    */\n    return 0;\n}\n</code></pre>\n\n<p>But of course, that code does not work. Is there something I could do which would allow me to \"pipe\" data into <code>std::cin</code> <em>without manually piping in data from a different program or from the command line shell</em> like <code>echo \"1 2 3 4 5 6 7 8 9 10\" | myprogram.exe</code> would?</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464800291, "post_id": 37574343, "comment_id": 62636511, "body": "@NathanOliver verrified the above example in msvc 2015 14.0.24720.00 update 1"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464801491, "post_id": 37574343, "comment_id": 62637204, "body": "I can confirm it does not compile in MSVS.  Both clang and gcc compile."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464816744, "post_id": 37574343, "comment_id": 62645214, "body": "try making the constructor <code>constexpr</code>"}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1464882431, "post_id": 37574343, "comment_id": 62678046, "body": "Hi @M.M constexpr causes another error for sizeof. &quot;statement may not appear in a constexpr constructor.&quot; Is that what you expected? If so what does it prove?"}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "is_accepted": true, "score": 5, "last_activity_date": 1464979683, "last_edit_date": 1464979683, "creation_date": 1464804246, "answer_id": 37575819, "question_id": 37574343, "link": "https://stackoverflow.com/questions/37574343/static-constexpr-char-m-pszfoo-foo-has-compile-error-expression-did/37575819#37575819", "title": "static constexpr char m_pszFoo[] = &quot;***FOO***&quot; has compile error expression did not evaluate constant", "body": "<p>So I came up with a work around b\\c that error message made it seem like i needed to add a const somewhere </p>\n\n<pre><code>static constexpr char const m_pszFoo[] = \"**FOO***\";\n</code></pre>\n\n<p>for some reason if we tell the compiler that we should not be able to change  the char to which the string points msvc is happy.</p>\n\n<p><strong>* Edit *</strong></p>\n\n<p>I got some suggestions to file a bug with microsoft and let them investigate as this looks to be an interop bug with msvc.\nhere is the  connect.microsoft link: <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/2781048\" rel=\"nofollow\">https://connect.microsoft.com/VisualStudio/feedback/details/2781048</a></p>\n"}], "owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 2, "accepted_answer_id": 37575819, "answer_count": 1, "score": 5, "last_activity_date": 1464979683, "creation_date": 1464799263, "last_edit_date": 1464800622, "question_id": 37574343, "link": "https://stackoverflow.com/questions/37574343/static-constexpr-char-m-pszfoo-foo-has-compile-error-expression-did", "title": "static constexpr char m_pszFoo[] = &quot;***FOO***&quot; has compile error expression did not evaluate constant", "body": "<p>error code is C2131.</p>\n\n<p>intelisense does not complain even when I call size of on this variable in other files intelisense knows the size. what am I missing to get this working? Any help is greatly appreciated. In the pic below see intelisense  not complaining and also determining size.</p>\n\n<p><a href=\"https://i.stack.imgur.com/a6I71.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/a6I71.png\" alt=\"enter image description here\"></a></p>\n\n<p>example a.h:</p>\n\n<pre><code>class a\n{\nprivate:\nstatic constexpr char m_pszFoo[] = \"***FOO***\"; // compile error on this line C2131 expression did not evaluate to a constant\n\npublic:\na() { sizeof(m_pszFoo); }; // no compile error here\n};\n</code></pre>\n\n<p>to reproduce all you need to do is include a.h in any other file. It won't reproduce without the include.</p>\n"}, {"tags": ["c++", "reference", "member"], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 3, "last_activity_date": 1464799553, "last_edit_date": 1464799553, "creation_date": 1464799195, "answer_id": 37574331, "question_id": 37574290, "link": "https://stackoverflow.com/questions/37574290/c-reference-to-class-data-member/37574331#37574331", "title": "C++ reference to class data member", "body": "<p>No, there are no references to class members, nor are there values of type \"class member\". The only thing you can have is a pointer to a non-static class member (to either a data member or a member function).</p>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/types/is_member_pointer\" rel=\"nofollow\"><code>std::is_member_pointer</code> trait</a> summarizes this nicely: a pointer-to-member is a type <code>T U::*</code>, where <code>U</code> is a class type and <code>T</code> is an object or function type. (As always, there are no pointers to references.)</p>\n"}], "owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 0, "closed_date": 1464799257, "accepted_answer_id": 37574331, "answer_count": 1, "score": 6, "last_activity_date": 1464799553, "creation_date": 1464799029, "question_id": 37574290, "link": "https://stackoverflow.com/questions/37574290/c-reference-to-class-data-member", "closed_reason": "Duplicate", "title": "C++ reference to class data member", "body": "<p>I've only recently discovered the existance of pointer to class data member, for example:</p>\n\n<pre><code>class Car\n{\n    public:\n    int speed;\n};\n\nint main()\n{\n    int Car::*pSpeed = &amp;Car::speed;\n    return 0;\n}\n</code></pre>\n\n<p>Do reference to class data member also exist? If so, which is the sintax to declare them?</p>\n"}, {"tags": ["c++", "c", "windows", "header", "linker"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1464798544, "post_id": 37574117, "comment_id": 62635461, "body": "Would you mind posting a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 117, "user_id": 6410671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcfd340b94d18b6258c31ef997dcb3da?s=128&d=identicon&r=PG&f=1", "display_name": "Cecil", "link": "https://stackoverflow.com/users/6410671/cecil"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1464798574, "post_id": 37574117, "comment_id": 62635485, "body": "@MikeCAT Okay sure! Give me a few minutes please."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1464798782, "post_id": 37574117, "comment_id": 62635620, "body": "@RandyGaul Keep the <b>minimal</b> in mind."}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1464799504, "post_id": 37574191, "comment_id": 62636062, "body": "I&#39;d be careful to specify the proper calling convention modifier in the prototypes too, and put them in an <code>extern C</code> section."}, {"owner": {"reputation": 117, "user_id": 6410671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcfd340b94d18b6258c31ef997dcb3da?s=128&d=identicon&r=PG&f=1", "display_name": "Cecil", "link": "https://stackoverflow.com/users/6410671/cecil"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1464800230, "post_id": 37574191, "comment_id": 62636477, "body": "Alright, I&#39;ve added an example! @MarkRansom Actually I haven&#39;t tried to add the <code>extern C</code> section yet. I definitely need that..."}, {"owner": {"reputation": 117, "user_id": 6410671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcfd340b94d18b6258c31ef997dcb3da?s=128&d=identicon&r=PG&f=1", "display_name": "Cecil", "link": "https://stackoverflow.com/users/6410671/cecil"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1464800288, "post_id": 37574191, "comment_id": 62636507, "body": "@MarkRansom Yep, that was exactly the problem. I forgot the <code>extern C</code>, if added my example code compiles perfectly fine."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 4, "last_activity_date": 1464798682, "creation_date": 1464798682, "answer_id": 37574191, "question_id": 37574117, "link": "https://stackoverflow.com/questions/37574117/compile-on-win32-without-windows-h/37574191#37574191", "title": "Compile on WIN32 without Windows.h", "body": "<p>No, the tools don't do anything especially for windows.h.</p>\n\n<p>I'd guess you've gotten your header wrong. It's hard to guess what the problem might be without seeing the header, but one possibility sticks out.</p>\n\n<p>For most functions, Windows has both \"ANSI\" and \"Wide\" versions, so what you see as <code>CreateWindow</code> is really two functions <code>CreateWindowA</code> and <code>CreateWindowW</code>. <code>CreateWindow</code> exists only as a macro that maps to either the <code>*A</code> or <code>*W</code> name, depending upon whether <code>UNICODE</code> is defined.</p>\n\n<p>So, if you've provided a prototype/declaration for a function named <code>CreateWindow</code>, it's not going to link--what exists in the library are <code>CreateWindowA</code> and <code>CreateWindowW</code>, not <code>CreateWindow</code>.</p>\n"}], "owner": {"reputation": 117, "user_id": 6410671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcfd340b94d18b6258c31ef997dcb3da?s=128&d=identicon&r=PG&f=1", "display_name": "Cecil", "link": "https://stackoverflow.com/users/6410671/cecil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1664, "favorite_count": 0, "accepted_answer_id": 37574191, "answer_count": 1, "score": 2, "last_activity_date": 1464800182, "creation_date": 1464798425, "last_edit_date": 1464800182, "question_id": 37574117, "link": "https://stackoverflow.com/questions/37574117/compile-on-win32-without-windows-h", "title": "Compile on WIN32 without Windows.h", "body": "<p>As a learning exercise I've written a standard Windows program that registers and creates a window without explicitly including <code>Windows.h</code>. All header symbols from <code>Windows.h</code> have been extracted and placed into a custom header which I include into the source. The custom header has type definitions like <code>CreateWindow</code> and <code>WNDCLASSEX</code>.</p>\n\n<p>The program is compiled with <code>cl.exe</code> with a command line like so:</p>\n\n<p><code>cl main.cpp /link opengl32.lib gdi32.lib kernel32.lib user32.lib</code></p>\n\n<p>It is my understanding that these .lib files are import libs which do setup work for loading in function addresses from the associated DLLs upon process startup. The above command line will work perfectly fine if <code>main.cpp</code> includes <code>Windows.h</code> directly. However, when including the custom header <code>cl.exe</code> fails to link all function calls made into the Windows API, despite having specified the associated import libs on the command line (unresolved external symbol errors).</p>\n\n<p>Is there some kind of special-case magic <code>cl.exe</code> performs specifically for <code>Windows.h</code>? What steps are necessary to ensure proper linking in this scenario?</p>\n\n<p>Here is the smallest example I could construct:</p>\n\n<pre><code>typedef unsigned __int64 UINT_PTR, *PUINT_PTR;\ntypedef __int64 LONG_PTR, *PLONG_PTR;\ntypedef UINT_PTR            WPARAM;\ntypedef LONG_PTR            LPARAM;\ntypedef LONG_PTR            LRESULT;\ntypedef int                 INT;\ntypedef unsigned int        UINT;\ntypedef char CHAR;\ntypedef unsigned short      WORD;\n#define CONST const\n#define DECLARE_HANDLE(name) struct name##__{int unused;}; typedef struct name##__ *name\nDECLARE_HANDLE(HWND);\nDECLARE_HANDLE(HINSTANCE);\nDECLARE_HANDLE(HICON);\nDECLARE_HANDLE(HCURSOR);\nDECLARE_HANDLE(HBRUSH);\nDECLARE_HANDLE(HMODULE);\ntypedef unsigned __int64 ULONG_PTR, *PULONG_PTR;\ntypedef CHAR *NPSTR, *LPSTR, *PSTR;\ntypedef CONST CHAR *LPCSTR, *PCSTR;\n#define CALLBACK    __stdcall\n#define WINAPI      __stdcall\ntypedef LRESULT (CALLBACK* WNDPROC)(HWND, UINT, WPARAM, LPARAM);\n#define DECLSPEC_IMPORT __declspec(dllimport)\n#define WINUSERAPI DECLSPEC_IMPORT\n#define WINBASEAPI DECLSPEC_IMPORT\n#define CS_VREDRAW          0x0001\n#define CS_HREDRAW          0x0002\n#define CS_OWNDC            0x0020\n#define MAKEINTRESOURCEA(i) ((LPSTR)((ULONG_PTR)((WORD)(i))))\n#define MAKEINTRESOURCE  MAKEINTRESOURCEA\n#define IDC_ARROW           MAKEINTRESOURCE(32512)\n#define NULL 0\ntypedef WORD                ATOM;   //BUGBUG - might want to remove this from minwin\n\ntypedef struct tagWNDCLASSEXA {\n    UINT        cbSize;\n    /* Win 3.x */\n    UINT        style;\n    WNDPROC     lpfnWndProc;\n    int         cbClsExtra;\n    int         cbWndExtra;\n    HINSTANCE   hInstance;\n    HICON       hIcon;\n    HCURSOR     hCursor;\n    HBRUSH      hbrBackground;\n    LPCSTR      lpszMenuName;\n    LPCSTR      lpszClassName;\n    /* Win 4.0 */\n    HICON       hIconSm;\n} WNDCLASSEXA, *PWNDCLASSEXA, *NPWNDCLASSEXA, *LPWNDCLASSEXA;\n\nWINUSERAPI LRESULT CALLBACK DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);\nWINBASEAPI HMODULE WINAPI GetModuleHandleA(LPCSTR lpModuleName);\nWINUSERAPI HCURSOR WINAPI LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);\nWINUSERAPI ATOM WINAPI RegisterClassExA(CONST WNDCLASSEXA *);\n\nLRESULT CALLBACK WndProc( HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam )\n{\n    return DefWindowProcA( hWnd, message, wParam, lParam );\n}\n\nINT WINAPI WinMain( HINSTANCE hInst, HINSTANCE hPrev, LPSTR szCmdLine, INT sw )\n{\n    // register window class\n    WNDCLASSEXA wcex = { 0 };\n    wcex.cbSize            = sizeof( WNDCLASSEXA );\n    wcex.style            = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;\n    wcex.lpfnWndProc    = WndProc;\n    wcex.hInstance        = (HINSTANCE)GetModuleHandleA( NULL );\n    wcex.hIcon            = NULL;\n    wcex.hCursor        = LoadCursorA( NULL, IDC_ARROW );\n    wcex.lpszClassName    = \"Title\";\n    RegisterClassExA( &amp;wcex );\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with:</p>\n\n<pre><code>@echo off\ncall \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat\" x64\n\nset CONSOLE= -subsystem:windows\nset CFLAGS= -Zi -nologo\nset CFLAGS= -D__WINDOWS__ -D_CRT_SECURE_NO_WARNINGS %CFLAGS%\nset LFLAGS= -incremental:no -opt:ref\nset LFLAGS= user32.lib kernel32.lib %LFLAGS%\n\ncl %CFLAGS% main.cpp -Fegame.exe /link %LFLAGS% %CONSOLE%\n</code></pre>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 1, "creation_date": 1464798350, "post_id": 37573950, "comment_id": 62635328, "body": "BTW, since it&#39;s tagged <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>, you don&#39;t need those <code>typedef</code>s"}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 5075147, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc012826cd46b0fee58b7757dcea8d4?s=128&d=identicon&r=PG", "display_name": "btald1331", "link": "https://stackoverflow.com/users/5075147/btald1331"}, "edited": false, "score": 0, "creation_date": 1464798671, "post_id": 37574037, "comment_id": 62635560, "body": "Thank you for your help! This makes sense and it was the solution!"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1464798182, "creation_date": 1464798182, "answer_id": 37574037, "question_id": 37573950, "link": "https://stackoverflow.com/questions/37573950/dereferencing-void-pointer-that-will-point-to-a-structure/37574037#37574037", "title": "Dereferencing Void Pointer that will point to a structure", "body": "<p>The arrow <code>-&gt;</code> operator only accepts a member name as its right-hand side, so you can't place a cast there. You're looking for the following syntax:</p>\n\n<pre><code>((struct myStruct_t*)tcapMessage-&gt;components[0]-&gt;pParameterSet)-&gt;...\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 5075147, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc012826cd46b0fee58b7757dcea8d4?s=128&d=identicon&r=PG", "display_name": "btald1331", "link": "https://stackoverflow.com/users/5075147/btald1331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 37574037, "answer_count": 1, "score": -1, "last_activity_date": 1464798182, "creation_date": 1464797881, "question_id": 37573950, "link": "https://stackoverflow.com/questions/37573950/dereferencing-void-pointer-that-will-point-to-a-structure", "title": "Dereferencing Void Pointer that will point to a structure", "body": "<p>I have the following structures: </p>\n\n<pre><code>typedef struct TTCAPMessage {\n        uint8_t packagetype; //{should be Query /w Permission or Response}\n        uint32_t transid; //{transaction ID number}\n        std::vector&lt;TTCAPComponent_t&gt; components; //{a string of component Information elements}\n        bool parseok; //{false if error occured}\n} TTCAPMessage_t;\n\ntypedef struct TTCAPComponent {\n        uint8_t componenttype; //{should be Invoke, Return Result, Reject, etc.}\n        uint8_t componentid; //{component ID code}\n        uint8_t operationcode; //Query operation code, \"Private TCAP\"\n        void* pParameterSet;\n} TTCAPComponent_t;\n\ntypedef struct myStruct {\n      .....\n} mySruct_t;\n</code></pre>\n\n<p>In TTCAPComponent_t, there is a void * that is supposed to point to two different types of structures. In this case it will point to myStruct_t. I want to retrieve the data within it. </p>\n\n<p>So to dereference I've tried many variations of the following with no luck:</p>\n\n<pre><code>tcapMessage-&gt;components[0]-&gt;(myStruct_t*)pParameterSet-&gt;(Accessing Structure data) ....\n</code></pre>\n\n<p>I've tried finding resources online but for some reason I cannot get this to work. Thanks in advance for your help!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1464797800, "post_id": 37573893, "comment_id": 62634994, "body": "Do not access <code>a[5]</code> like <code>strcpy(a[5][1],&quot;SUM&quot;);</code>, <code>a[5][i]=int(s1);</code> and  <code>grand1=grand1+int(a[5][i]);</code> because it is out-of-range."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1464797856, "post_id": 37573893, "comment_id": 62635029, "body": "Also note that using <code>gets()</code> from the standard library, which has unavoidable risk of buffer overrun, isn&#39;t good."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1464797952, "post_id": 37573893, "comment_id": 62635076, "body": "Defining <code>void main()</code> in global namespace is illegal in standard C++. You should use standard <code>int main()</code> unless you have some special reason to use non-standard declaration."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1464798152, "post_id": 37573893, "comment_id": 62635207, "body": "I suggest you should format your code properly with indents."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464798263, "post_id": 37573893, "comment_id": 62635275, "body": "Are you by chance using turbo c++?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1464798360, "post_id": 37573893, "comment_id": 62635337, "body": "You cannot assign values to <code>a[5][i]</code> because it is an array and what is converted from it is not a lvalue. Converting (a pointer converted from) <code>a[5][i]</code> to <code>int</code> also doesn&#39;t make sense."}, {"owner": {"reputation": 9, "user_id": 6410398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ClUkbFvH6M4/AAAAAAAAAAI/AAAAAAAAAB4/NlUy78At71Q/photo.jpg?sz=128", "display_name": "Vishal Rathi", "link": "https://stackoverflow.com/users/6410398/vishal-rathi"}, "edited": false, "score": 0, "creation_date": 1464798417, "post_id": 37573893, "comment_id": 62635377, "body": "yes i am using turbo c++"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1464798475, "post_id": 37573893, "comment_id": 62635416, "body": "Are you required to use string matrix, not integer matrix?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464798481, "post_id": 37573893, "comment_id": 62635422, "body": "If you can I suggest you get rid of it.  It is <b>way</b> out of date."}, {"owner": {"reputation": 9, "user_id": 6410398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ClUkbFvH6M4/AAAAAAAAAAI/AAAAAAAAAB4/NlUy78At71Q/photo.jpg?sz=128", "display_name": "Vishal Rathi", "link": "https://stackoverflow.com/users/6410398/vishal-rathi"}, "edited": false, "score": 0, "creation_date": 1464798560, "post_id": 37573893, "comment_id": 62635471, "body": "grand1=grand1+int(a[5][i]); if  it is out-of-range; then what must i do to get the desired results"}, {"owner": {"reputation": 9, "user_id": 6410398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ClUkbFvH6M4/AAAAAAAAAAI/AAAAAAAAAB4/NlUy78At71Q/photo.jpg?sz=128", "display_name": "Vishal Rathi", "link": "https://stackoverflow.com/users/6410398/vishal-rathi"}, "edited": false, "score": 0, "creation_date": 1464798628, "post_id": 37573893, "comment_id": 62635521, "body": "i know it is way out of date <b>turbo c++</b> but that&#39;s what i am expected to use as per schoolnorms. :("}, {"owner": {"reputation": 9, "user_id": 6410398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ClUkbFvH6M4/AAAAAAAAAAI/AAAAAAAAAB4/NlUy78At71Q/photo.jpg?sz=128", "display_name": "Vishal Rathi", "link": "https://stackoverflow.com/users/6410398/vishal-rathi"}, "edited": false, "score": 0, "creation_date": 1464798848, "post_id": 37573893, "comment_id": 62635664, "body": "and no buffer overrun is detected,,,,for the gets() function"}], "owner": {"reputation": 9, "user_id": 6410398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ClUkbFvH6M4/AAAAAAAAAAI/AAAAAAAAAB4/NlUy78At71Q/photo.jpg?sz=128", "display_name": "Vishal Rathi", "link": "https://stackoverflow.com/users/6410398/vishal-rathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1464798400, "creation_date": 1464797719, "last_edit_date": 1464798400, "question_id": 37573893, "link": "https://stackoverflow.com/questions/37573893/to-add-the-sum-of-the-column-as-last-row-of-a-string-type-matrix-also-the-first", "title": "to add the sum of the column as last row of a string type matrix. Also the first row is for headings and first column for names", "body": "<pre><code>#include&lt;iostream.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main()\n{\n  int i,j,k,grand1;\n  char s1;\n  char a[5][5][20];/*a 3x3 matrix of string data type*/\n  clrscr();\n  for(i=0;i&lt;5;i++)\n  {\n    for(j=0;j&lt;5;j++)\n    {\n      cout&lt;&lt;\"enter value in (\"&lt;&lt;i&lt;&lt;\",\"&lt;&lt;j&lt;&lt;\" )cell of first sheet \";\n      gets(a[i][j]);\n    }\n  }\n  /*value enter in the first matrix*/\n  cout&lt;&lt;endl;\n\n  /*display table1*/\n  for(i=0;i&lt;5;i++)\n  {\n    for(j=0;j&lt;5;j++)\n    {\n      cout&lt;&lt;a[i][j]&lt;&lt;\"\\t\";\n    }\n    cout&lt;&lt;endl;\n  }\n\n\n  strcpy(a[5][1],\"SUM\");\n  for(i=1;i&lt;5;i++)\n  {\n    s1=0;\n    for(k=0;k&lt;4;k++)\n    {\n      s1=s1+int(a[i][k]); /*here it shows Lvalue error*/\n    }\n    a[5][i]=int(s1);\n  }\n\n\n  for(i=1;i&lt;5;i++)\n  {\n    grand1=grand1+int(a[5][i]);\n  }\n  cout&lt;&lt;\"grand sum of table1\"&lt;&lt;grand1&lt;&lt;endl;\n  /*here the table1 terminates*/\n\n  getche();\n}\n</code></pre>\n\n<p>the code is done.....and the error is still there please help.all the code is getting compiled and run too if only i make the errored line a comment; i.e. rest of the code is fine . The error persists in the last line only. Also since the first row is for heading and rest alll rows contain numerical values except the first column...so over all I need coumn-wise sum of last 4 rows as an element the matrix.(last row).</p>\n"}, {"tags": ["c++", "vector", "duplicates", "sorted"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1464798129, "post_id": 37573890, "comment_id": 62635197, "body": "And what is the result of the program? What is the expected result? Have you tried to step through the code line by line in a debugger, to see what happens?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1464798218, "post_id": 37573890, "comment_id": 62635250, "body": "Don&#39;t reinvent the wheel.  Use <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\"><code>std::unique</code></a> and <a href=\"http://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\"><code>std::vector::erase</code></a>.  The link for <code>std::unique</code> even shows how this is done."}, {"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 0, "creation_date": 1464798220, "post_id": 37573890, "comment_id": 62635251, "body": "After call of <code>erase</code> all vector&#39;s iterators became invalid. You better work with indices"}, {"owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1464798366, "post_id": 37573890, "comment_id": 62635341, "body": "@ Joachim Pileborg : I tried debugging to my best, inserting so many print statements here and there, still couldn&#39;t detect where I am going wrong!!, FOr Posting the code, I removed comments to make it clearer"}, {"owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464798424, "post_id": 37573890, "comment_id": 62635380, "body": "@NathanOliver: I didn&#39;t get you?"}, {"owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1464798516, "post_id": 37573890, "comment_id": 62635445, "body": "@ Semyon Burov: thanks, I will try that, but can&#39;t it be done using itertors anyway??"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464798662, "post_id": 37573890, "comment_id": 62635552, "body": "@user6038386 What don&#39;t you get?  Instead of trying to do this yourself use the built in standard functions that will do it for you."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1464798876, "post_id": 37573890, "comment_id": 62635685, "body": "@NathanOliver, I assume, it is an assingment (or an interview question)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464799004, "post_id": 37573890, "comment_id": 62635762, "body": "@SergeyA Nothing I proposed violates the constraints in the question."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464799034, "post_id": 37573890, "comment_id": 62635784, "body": "@NathanOliver, agreed. But possibly violates the spirit of it :) It is actually a good interview question, I believe, i used it a couple of times. I would not accept <code>std::unique</code> as an answer (but candidate would get a plus point for knowing it)"}, {"owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1464857460, "post_id": 37573890, "comment_id": 62659395, "body": "@SergeyA: you are right, surely <code>std::unique</code> was addition yo my knowledge, but its a potential interview question, where this will not help!!"}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 5006325, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TpZdZ.jpg?s=128&g=1", "display_name": "Viktor Simk&#243;", "link": "https://stackoverflow.com/users/5006325/viktor-simk%c3%b3"}, "is_accepted": false, "score": -1, "last_activity_date": 1464799859, "last_edit_date": 1464799859, "creation_date": 1464799177, "answer_id": 37574329, "question_id": 37573890, "link": "https://stackoverflow.com/questions/37573890/remove-duplicates-from-sorted-array/37574329#37574329", "title": "Remove duplicates from Sorted Array", "body": "<p>You can do it using iterators like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\n\nint removeDuplicates(vector&lt;int&gt; &amp;A) {\n    int m = A.size();\n    if(m &lt;= 1) return m;\n\n    for (auto it1 = A.begin(); it1 != A.end(); it1++) {\n        for (auto it2 = it1 + 1; it2 != A.end();) {\n            if (*it1 == *it2) {\n                it2 = A.erase(it2);\n            } else {\n                it2++;\n            }\n        }\n    }\n\n    return A.size();\n}\n\nint main()\n{\n    vector&lt;int&gt; vec = { 0, 0, 0, 0, 0, 0, 0, 4, 4, 7, 7, 7, 7, 9 };\n    cout &lt;&lt; \"ans=\" &lt;&lt; removeDuplicates(vec);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1464846471, "post_id": 37574709, "comment_id": 62653310, "body": "whatever you told is perfectly correct...it works if I put  <b>j=A.erase(j)</b>  in place of  <b>temp=j; j++; A.erase(temp);</b>  .....but I still couldn&#39;t understand how i am skipping over an element by incrementing"}, {"owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1464857174, "post_id": 37574709, "comment_id": 62659194, "body": "potentially how <code>j=A.erase(j)</code> is different from <code>temp=j; j++; A.erase(temp);</code> ??"}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1464800339, "creation_date": 1464800339, "answer_id": 37574709, "question_id": 37573890, "link": "https://stackoverflow.com/questions/37573890/remove-duplicates-from-sorted-array/37574709#37574709", "title": "Remove duplicates from Sorted Array", "body": "<p>When you increment <code>j</code>, then <code>erase</code> the element there, the elements starting at j+1 are moved down. You're skipping over an element by incrementing.</p>\n\n<p>A better approach would be to simply copy the non-repeating elements from one iterator to the other and setting the new length at the end of the main loop. Your current approach is potentially O(n^2), too slow for practical use.</p>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 4744069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694e1f497a17039768948aec87f56f02?s=128&d=identicon&r=PG&f=1", "display_name": "Plump Worm", "link": "https://stackoverflow.com/users/4744069/plump-worm"}, "is_accepted": false, "score": 0, "last_activity_date": 1464810753, "last_edit_date": 1464810753, "creation_date": 1464800649, "answer_id": 37574803, "question_id": 37573890, "link": "https://stackoverflow.com/questions/37573890/remove-duplicates-from-sorted-array/37574803#37574803", "title": "Remove duplicates from Sorted Array", "body": "<p>You are asked to use an array. Although vector is similar in many ways, it is not the same. Have a look at the example code below. </p>\n\n<p>In addition you are asked to keep memory allocated the same. You cannot ensure that using vector, it's size can grow / shrink once you add / remove elements and when an element is removed the data in the array behind the vector will be reallocated and rewritten.</p>\n\n<pre><code>int main()\n{\n\n    int arr[14] = {0,0,0,0,0,4,4,4,4,5,5,5,7,9};\n    int last_non_duplicate_index = 0;\n    int current_index = 0;\n    int size = 14;\n    int new_size = size;\n    bool is_last_value = false;\n\n    // you can use for interchangeably\n    while(!is_last_value)\n    {\n        current_index++; // move one position ahead\n        if(current_index &lt; size) // out of bonds check\n        {\n            if(arr[last_non_duplicate_index] != arr[current_index]) // value at position of current index is different\n            {\n                last_non_duplicate_index++; // increase index of the last value which was not a duplicate by one\n                arr[last_non_duplicate_index] = arr[current_index]; // write at that index \n                // e.g. if last index was 0 -&gt; increase it to 1 and rewrite whatsever under arr[1] (current index)\n            }\n            else // values are the same\n            { \n                new_size--; // devrease the size\n            }\n        }\n        else\n        {\n            is_last_value = true; // current_index &gt;= size -&gt; out of bonds\n        }\n    }\n\n    for (int i = 0; i &lt; new_size; i++)\n    {\n        std::cout &lt;&lt; \"arr[\" &lt;&lt; i &lt;&lt; \"]\" &lt;&lt; \" = \" &lt;&lt; arr[i] &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; \"New size: \" &lt;&lt; new_size &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464801907, "post_id": 37574926, "comment_id": 62637454, "body": "This has a subtle bug.  If the maximum value of <code>std::vector::size_type</code> is larger than the maximum value of <code>int</code> then it is possible that <code>currentVal = vec.size() - 1;</code> can be UB as you overflow <code>currentVal</code>.  This is also true if an 0 sized vector is passed."}, {"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464802141, "post_id": 37574926, "comment_id": 62637592, "body": "The problem in question looks like homework, so I used more student like type <code>int</code>. Changing <code>int</code> to <code>std::ptrdiff_t</code> should solve this problem."}], "tags": [], "owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "is_accepted": false, "score": 0, "last_activity_date": 1464801004, "creation_date": 1464801004, "answer_id": 37574926, "question_id": 37573890, "link": "https://stackoverflow.com/questions/37573890/remove-duplicates-from-sorted-array/37574926#37574926", "title": "Remove duplicates from Sorted Array", "body": "<p>I think this is that you need. This func loops array from tail to head and counts same values. Then performs shift of already unique values on ununique one.\nIt doesn't change actual size of vector due process because it would probably involve reallocation of memory inside of vector. </p>\n\n<pre><code>int removeDuplicates(vector&lt;int&gt; &amp;vec) {\n    int currentVal = vec.size() - 1;\n    int uniqueNumber = 0;\n\n    while (currentVal &gt;= 0) {\n        ++uniqueNumber;\n        int sameVal = currentVal;\n        while (sameVal &gt; 0 &amp;&amp; vec[sameVal - 1] == vec[currentVal])\n            --sameVal;\n\n        int shiftSize = uniqueNumber;\n        for (int k = 1; k &lt; shiftSize; ++k) {\n            vec[sameVal + k] = vec[currentVal + k];\n        }\n\n        currentVal = sameVal - 1;\n    }\n    return uniqueNumber;\n}\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 6038386, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9b4ed7e117767c12232c98bbda6308e8?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/6038386/naveen-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1380, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1605689662, "creation_date": 1464797715, "question_id": 37573890, "link": "https://stackoverflow.com/questions/37573890/remove-duplicates-from-sorted-array", "title": "Remove duplicates from Sorted Array", "body": "<p><strong>Qus:</strong> Remove duplicates from Sorted Array\nGiven a sorted array, remove the duplicates in place such that each element appears only once and return the new length.</p>\n\n<p>Note that even though we want you to return the new length, make sure to change the original array as well in place</p>\n\n<p>Do not allocate extra space for another array, you must do this in place with constant memory.</p>\n\n<p>I tried following code, can anyone help where I am going wrong??</p>\n\n<pre><code>   #include&lt;iostream&gt;\n    #include&lt;vector&gt;\n    using namespace std;\n\n    int removeDuplicates(vector&lt;int&gt; &amp;A) {\n        int m=A.size();\n        if(m&lt;=1) return m;\n        vector&lt;int&gt; :: iterator i=A.begin();\n        vector&lt;int&gt; :: iterator j=A.begin()+1;\n        vector&lt;int&gt; :: iterator temp;\n        while(i!=A.end() &amp;&amp; j!=A.end())\n        {\n            while(j!=A.end() &amp;&amp; *i == *j)\n            {\n                temp=j;\n                j++;\n                A.erase(temp);\n            }\n            i=j;\n            j++;\n        }\n        return A.size();\n    }\n\n    int main()\n    {\n        vector&lt;int&gt; vec={0,0,0,0,0,0,0,4,4,7,7,7,7,9};\n        cout&lt;&lt;\"ans=\"&lt;&lt;removeDuplicates(vec);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "default-constructor", "aggregate-initialization"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464797753, "post_id": 37573885, "comment_id": 62634969, "body": "If you declare a constructor for your class, it is not an aggregate."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464797807, "post_id": 37573885, "comment_id": 62634998, "body": "So it isn&#39;t possible just by looking at this piece of code to tell if a constructor will be invoked or if all members will be set to zero?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464797914, "post_id": 37573885, "comment_id": 62635061, "body": "AFAIK, if <code>Struct</code> has a defaulted or deleted default constructor, this will perform an aggregate initialization"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464798366, "post_id": 37573885, "comment_id": 62635342, "body": "@Danra Without knowing is <code>Struct</code> is an aggregate or not you cannot just tell from <code>Struct s {};</code> what will happen."}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464797739, "creation_date": 1464797705, "last_edit_date": 1464797739, "question_id": 37573885, "link": "https://stackoverflow.com/questions/37573885/struct-aggregate-initialization-vs-default-constructor", "title": "Struct aggregate initialization vs. default constructor", "body": "<p>Given the following initialization of a struct:</p>\n\n<pre><code>void f() {\n    Struct s {};\n    ...\n}\n</code></pre>\n\n<p>Will this always do aggregate initialization, or will the <code>Struct()</code> constructor be called instead, if it is explicitly defined?</p>\n"}, {"tags": ["c++", "pointers", "vector", "struct"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1464797605, "post_id": 37573836, "comment_id": 62634881, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1464797688, "post_id": 37573836, "comment_id": 62634925, "body": "Also copying the <code>surn</code> char pointer is wrong. Rather use a <code>std::string</code> data type than <code>char*</code>."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1464797749, "post_id": 37573836, "comment_id": 62634965, "body": "Causing memory leak doesn&#39;t seem good."}, {"owner": {"reputation": 21, "user_id": 6410546, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208084821132925/picture?type=large", "display_name": "Aitor Solana", "link": "https://stackoverflow.com/users/6410546/aitor-solana"}, "edited": false, "score": 1, "creation_date": 1464797832, "post_id": 37573836, "comment_id": 62635012, "body": "I cannot use std::string, coz i need the struct to ve POD."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464798032, "post_id": 37573836, "comment_id": 62635127, "body": "You need to use <code>strcpy()</code> or <code>strdup()</code> to make a copy of <code>surn</code>."}, {"owner": {"reputation": 21, "user_id": 6410546, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208084821132925/picture?type=large", "display_name": "Aitor Solana", "link": "https://stackoverflow.com/users/6410546/aitor-solana"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464798806, "post_id": 37573836, "comment_id": 62635642, "body": "Thanks @Barmar ,I used strcpy() and it worked. I post the new code If it can be helpfull for someone."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1464799253, "post_id": 37573836, "comment_id": 62635927, "body": "Rather than editing the answer into the question, post it as an actual answer, then accept it."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1464799775, "post_id": 37573836, "comment_id": 62636224, "body": "I found <code>char *s1 = new char[strlen(ag.getPersona(i).getSurname())];</code> from the revision history. You forgot to allocate space for terminating null character and will cause out-of-range access."}, {"owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "edited": false, "score": 0, "creation_date": 1464799883, "post_id": 37573836, "comment_id": 62636287, "body": "<code>emplace_back(new indx(...))</code> causes memory leaks, and totally defeats the purpose of emplacement. Just do <code>indexvec.emplace_back(i, ag.getPersona(i).getSurname());</code>"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464803892, "post_id": 37575633, "comment_id": 62638585, "body": "Almost right. You need to add 1 to <code>strlen()</code> to allow room for the trailing null."}, {"owner": {"reputation": 21, "user_id": 6410546, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208084821132925/picture?type=large", "display_name": "Aitor Solana", "link": "https://stackoverflow.com/users/6410546/aitor-solana"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464804157, "post_id": 37575633, "comment_id": 62638721, "body": "There is no trailing null."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464804218, "post_id": 37575633, "comment_id": 62638751, "body": "C strings have to have a trailing null. That&#39;s how <code>strcpy()</code> knows when to stop copying."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464804245, "post_id": 37575633, "comment_id": 62638766, "body": "And it&#39;s how <code>strlen()</code> figures out the length of the string."}], "tags": [], "owner": {"reputation": 21, "user_id": 6410546, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208084821132925/picture?type=large", "display_name": "Aitor Solana", "link": "https://stackoverflow.com/users/6410546/aitor-solana"}, "is_accepted": true, "score": 0, "last_activity_date": 1464803577, "creation_date": 1464803577, "answer_id": 37575633, "question_id": 37573836, "link": "https://stackoverflow.com/questions/37573836/c-struct-vector-filling/37575633#37575633", "title": "C++, Struct Vector Filling", "body": "<p><strong>Solution</strong></p>\n\n<pre><code>void Menu::sortIndex(){\n    //Preparacion del fichero indices\n    for (int i = 0; i &lt; ag.getArrSize(); i++){\n       char *s1 = new char[strlen(ag.getPersona(i).getSurname())];\n       strcpy(s1, ag.getPersona(i).getSurname());\n       indexvec.emplace_back(new indx(i, s1));\n   }\n   //Ordenacion del fichero indices\n   std::sort(indexvec.begin(), indexvec.end(), menor_surn());\n</code></pre>\n\n<p>}</p>\n\n<p>This Is my first post so sorry for my mistakes.</p>\n"}], "owner": {"reputation": 21, "user_id": 6410546, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208084821132925/picture?type=large", "display_name": "Aitor Solana", "link": "https://stackoverflow.com/users/6410546/aitor-solana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 37575633, "answer_count": 1, "score": -2, "last_activity_date": 1464803577, "creation_date": 1464797522, "last_edit_date": 1464799302, "question_id": 37573836, "link": "https://stackoverflow.com/questions/37573836/c-struct-vector-filling", "title": "C++, Struct Vector Filling", "body": "<p>I got a problem filling a struct vector:</p>\n\n<p>Here is the struct:</p>\n\n<pre><code>struct indx{\n    int inK;\n    char* surn;\n\n    indx(int k, char* s) : inK(k), surn(s) {}\n    indx(){}\n    indx(indx *ind) : inK((*ind).inK), surn((*ind).surn){}\n\n};\n\nstd::vector &lt;indx&gt; indexvec;\n</code></pre>\n\n<p>And here is the filling function:</p>\n\n<pre><code>void Menu::sortIndex(){\n    //Preparacion del fichero indices\n    for (int i = 0; i &lt; ag.getArrSize(); i++){\n        indexvec.emplace_back(new indx(i, ag.getPersona(i).getSurname()));\n    }\n    //Ordenacion del fichero indices\n    std::sort(indexvec.begin(), indexvec.end(), menor_surn());\n}\n</code></pre>\n\n<p>The problem is when fill the vector in the <code>indexvec[0].surn</code> is the same as <code>indexvec[1].surn</code>.\nI've alredy checked that <code>ag.getPersona(0).getSurename</code> and <code>ag.getPersona(1).getSurename</code> are not the same.</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "clr", "wrapper"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1464798238, "post_id": 37573779, "comment_id": 62635259, "body": "Uncheck /clr option in compiler (compatibility mode)."}, {"owner": {"reputation": 1060, "user_id": 615243, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/aff09be09611bb9949fb8ac3022e91d0?s=128&d=identicon&r=PG&f=1", "display_name": "Nic", "link": "https://stackoverflow.com/users/615243/nic"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1464799655, "post_id": 37573779, "comment_id": 62636164, "body": "Hi @jdweng, thanks for your reply. I set &quot;No Common Language RunTime Support&quot; in WrapperProject--&gt;Property--&gt;C/C++--&gt;General---&gt; Common Language Runtime Support and got a bunch of other errors : C2871, C2653, C2337"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1464801553, "post_id": 37573779, "comment_id": 62637249, "body": "Well your aren&#39;t getting the /clr error any  more.  On one project this year it took me a week to go from VS2010 to VS2013 and get all the options set correctly where the code was running fine on VS2010.  I had three different vendors dll in the project.  Don&#39;t give up.  Make sure you are using C-language rather than the default window option for passing parameters from c++ to c#.  It took me a while in VS2010 to get the parameters type correct.  I had to modify vendor c++ source code to change parameter type."}], "owner": {"reputation": 1060, "user_id": 615243, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/aff09be09611bb9949fb8ac3022e91d0?s=128&d=identicon&r=PG&f=1", "display_name": "Nic", "link": "https://stackoverflow.com/users/615243/nic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4050, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1576145090, "creation_date": 1464797319, "last_edit_date": 1495540810, "question_id": 37573779, "link": "https://stackoverflow.com/questions/37573779/error-c1189-error-thread-is-not-supported-when-compiling-with-clr-or-clr", "title": "error C1189: #error : &lt;thread&gt; is not supported when compiling with /clr or /clr:pure", "body": "<p>I am trying to wrap a C++ library which depends on <a href=\"https://github.com/libigl/libigl\" rel=\"nofollow noreferrer\">libigl</a> and <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">Eigen</a> in order to use it in C#. This requires a CRL wrapper class.</p>\n\n<p>When compiling the wrapper, I get the following error:</p>\n\n<pre><code>error C1189: #error :  &lt;thread&gt; is not supported when compiling with /clr or /clr:pure. \n</code></pre>\n\n<p>I understand this is a <a href=\"https://stackoverflow.com/questions/3368802/what-is-the-difference-in-managed-and-unmanaged-code-memory-and-size\">managed vs unmanaged</a> compilation type of problem. </p>\n\n<p>''thread'' is not used in my class but deeper in the Libigl stack. </p>\n\n<p>Is there a workaround for this problem? </p>\n"}, {"tags": ["c++", "linux", "matlab", "sockets", "bluetooth"], "answers": [{"tags": [], "owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "is_accepted": true, "score": 0, "last_activity_date": 1464804557, "creation_date": 1464804557, "answer_id": 37575906, "question_id": 37573761, "link": "https://stackoverflow.com/questions/37573761/bluetooth-can-receive-data-but-cannot-transmit-it-socket-programming-in-c-to/37575906#37575906", "title": "Bluetooth can receive data but cannot transmit it (socket programming in C++ to communicate Matlab)", "body": "<p>Just figured it out. Leaving this here in case it helps someone else as well.</p>\n\n<p>When a connection is accepted, a new descriptor is returned (along with a new socket). This is a significant difference from connect(). So I was wrong at the following line. </p>\n\n<pre><code>status = write(s, \"hello!\", 6);\n</code></pre>\n\n<p>changing it to </p>\n\n<pre><code>status = write(client, \"hello!\", 6);\n</code></pre>\n\n<p>worked like a charm.</p>\n\n<p>(Reference: <a href=\"http://users.pja.edu.pl/~jms/qnx/help/tcpip_4.25_en/prog_guide/sock_advanced_tut.html\" rel=\"nofollow\">http://users.pja.edu.pl/~jms/qnx/help/tcpip_4.25_en/prog_guide/sock_advanced_tut.html</a>)</p>\n"}], "owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 37575906, "answer_count": 1, "score": 1, "last_activity_date": 1464804557, "creation_date": 1464797250, "last_edit_date": 1464803580, "question_id": 37573761, "link": "https://stackoverflow.com/questions/37573761/bluetooth-can-receive-data-but-cannot-transmit-it-socket-programming-in-c-to", "title": "Bluetooth can receive data but cannot transmit it (socket programming in C++ to communicate Matlab)", "body": "<p>I am using Raspberry Pi 3's internal bluetooth and I am writing a c++ code to connect the bluetooth of my windows PC. On the PC side, I use Matlab and I am able to send bytes to raspberry. However when I try to send bytes from raspberry to PC, I get the following error:</p>\n\n<p>\"Transport endpoint is not connected\"</p>\n\n<p>and Matlab says \"Unsuccessful read: the specified amount of data was not returned within the timeout period\". </p>\n\n<p>Another interesting thing is that, when I try to send more than three bytes from Matlab, raspberry only receives the first three as if the rest did not exist. If I use two reads in a row, I am able to get 6 bytes and so on. Just pointing this odd fact since I thought it might be connected with my main problem and be a clue. </p>\n\n<p>I have also tried to send a file manually, using the bluetooth symbol on menubar and it worked. So c++ code should be doing something different to cause this problem.</p>\n\n<p>What is likely to be the cause of my problem? How can I send data from raspberry to my computer using c++?</p>\n\n<p>My code is as follows:\n(Referred website: <a href=\"http://people.csail.mit.edu/albert/bluez-intro/index.html\" rel=\"nofollow\">http://people.csail.mit.edu/albert/bluez-intro/index.html</a>)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/rfcomm.h&gt;\n\nint main(int argc, char **argv)\n{\nstruct sockaddr_rc loc_addr = { 0 }, rem_addr = { 0 };\nchar buf[1024] = { 0 };\nint s, client, bytes_read;\nsocklen_t opt = sizeof(rem_addr);\n\n// allocate socket\ns = socket(AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);\n\nbdaddr_t tempBDADDR = {0};\n// bind socket to port 1 of the first available \n// local bluetooth adapter\nloc_addr.rc_family = AF_BLUETOOTH;\nloc_addr.rc_bdaddr = tempBDADDR;\nloc_addr.rc_channel = (uint8_t) 1;\nbind(s, (struct sockaddr *)&amp;loc_addr, sizeof(loc_addr));\n\n// put socket into listening mode\nlisten(s, 1);\n\n// accept one connection\nclient = accept(s, (struct sockaddr *)&amp;rem_addr, &amp;opt);\n\nba2str( &amp;rem_addr.rc_bdaddr, buf );\nfprintf(stderr, \"accepted connection from %s\\n\", buf);\nmemset(buf, 0, sizeof(buf));\n\n// read data from the client\nbytes_read = read(client, buf, sizeof(buf));\nif( bytes_read &gt; 0 ) {\n    printf(\"received [%s]\\n\", buf);\n}\n\nint status = 0;\n// send a message\nif( status == 0 ) {\n    status = write(s, \"hello!\", 6);\n}\n\nif( status &lt; 0 ) perror(\"uh oh\");\n\n// close connection\nclose(client);\nclose(s);\nreturn 0;\n}\n</code></pre>\n\n<p>Matlab side is as straight forward as:</p>\n\n<pre><code>b = Bluetooth('raspberrypi', 1);\nfopen(b);\nfwrite(b, uint('1234'));\ninput = fread(b,6)\nfclose(b);\nclear('b');\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Just figured that I do not get the \"Transport endpoint is not connected\" when I use the following line. However this only allows me to connect as client, whereas matlab only has a client type of connection. So now, I am able to send data to my computer from another socket without getting any errors, but cannot read it with matlab. </p>\n\n<pre><code>status = connect(s, (struct sockaddr *)&amp;addr, sizeof(addr));\n</code></pre>\n"}, {"tags": ["c++", "c++11", "move-semantics", "rvo"], "comments": [{"owner": {"reputation": 1546, "user_id": 1427533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c34e2bab0f80a9edfc45a81cceea7b43?s=128&d=identicon&r=PG&f=1", "display_name": "miguel.martin", "link": "https://stackoverflow.com/users/1427533/miguel-martin"}, "edited": false, "score": 0, "creation_date": 1464797313, "post_id": 37573660, "comment_id": 62634695, "body": "Compiles fine for me. Using <code>Apple LLVM version 7.3.0 (clang-703.0.31)</code>. Also <a href=\"http://ideone.com/xTpD56\" rel=\"nofollow noreferrer\">ideone.com/xTpD56</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464797636, "post_id": 37573660, "comment_id": 62634900, "body": "If you declare a copy constructor, no move constructor is implicitly declared at all."}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464797652, "post_id": 37573712, "comment_id": 62634906, "body": "Does that mean that in the first snippet local <code>a</code> from function <code>f</code> is being returned by move-semantics and then optimizer decides to use rvo and throw call to move-constructor away?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464798159, "post_id": 37573712, "comment_id": 62635211, "body": "It is hard to say what happens first and second in the compiler :) But the code has to be correct first, and optimized second."}, {"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464798347, "post_id": 37573712, "comment_id": 62635325, "body": "Let&#39;s rephrase: first code snipped is correct, because move ctor is defined and accessible, which allows to return local <code>a</code> from <code>f</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464798503, "post_id": 37573712, "comment_id": 62635436, "body": "@Anton, that&#39;s correct. Returning from local values (or arguments) treats them as temporaries."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1464797114, "creation_date": 1464797114, "answer_id": 37573712, "question_id": 37573660, "link": "https://stackoverflow.com/questions/37573660/how-implementing-move-constructor-affects-return-value-optimization/37573712#37573712", "title": "How implementing move constructor affects return value optimization?", "body": "<p>You need to keep in mind that (N)RVO is an optimization. Even if it kicks in, the code should be conforming to standard, which says that value is constructed using copy (or move) constructor. Even if constructor is not eventually called, it has to be available.</p>\n\n<p>There is a proposal to allow for missing/unavailable constructors if it is not going to be called due to optimizations, but I doubt it will be implemented.</p>\n"}, {"comments": [{"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464798167, "post_id": 37573808, "comment_id": 62635215, "body": "I don&#39;t get how compiler chooses what constructor (copy or move) to use to return local from function before applying rvo. Is that defined?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464798295, "post_id": 37573808, "comment_id": 62635294, "body": "@Anton Compiler is using the best match. If the value is an rvalue, and move ctor is availale, it is going to be called. If it is not an rvalue, or move constructor is not available, copy ctor will be used. In that regard, it is not different from overload resolution for regular functions."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "edited": false, "score": 0, "creation_date": 1464798675, "post_id": 37573808, "comment_id": 62635565, "body": "@Anton Yes which one will be picked up is defined well. For your code, move ctor will be selected because <code>f()</code> will return a temoprary which could be bound to rvalue reference. Anyway it seems to be aonther problem."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 4, "last_activity_date": 1464798905, "last_edit_date": 1464798905, "creation_date": 1464797422, "answer_id": 37573808, "question_id": 37573660, "link": "https://stackoverflow.com/questions/37573660/how-implementing-move-constructor-affects-return-value-optimization/37573808#37573808", "title": "How implementing move constructor affects return value optimization?", "body": "<p>Note that in <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision#Notes\" rel=\"nofollow\">copy elision</a> optimization, the copy/move constructor still has to be present and accessible. And it's not guaranteed that copy elision will be performed in each case.</p>\n\n<p>(emphasis mine)</p>\n\n<blockquote>\n  <p>Even when copy elision takes place and the copy-/move-constructor is\n  not called, <strong>it must be present and accessible (as if no optimization\n  happened at all</strong>), otherwise the program is ill-formed.</p>\n</blockquote>\n\n<p>For your code, the copy constructor has been <code>delete</code>ed, and if you remove the definition of move constructor, and it won't be implicitly declared because class <code>A</code> has a user-defined destructor, then both of move/copy constructor are not present and accessible, that's why compile failed.</p>\n\n<p>In summary, the copy/move syntax is needed here and compiler will check for it. Then compiler will decide to perform copy elision or not (e.g. in debug mode).</p>\n\n<p>BTW: You can use <code>-fno-elide-constructors</code> with clang and gcc to prohibit it.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464798221, "post_id": 37573817, "comment_id": 62635253, "body": "This is a comment (and incorrect one) at best. Not an answer in any way."}], "tags": [], "owner": {"reputation": 1, "user_id": 6410632, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/04f15c0bc5959efdb730760fd1f156d1?s=128&d=identicon&r=PG", "display_name": "user6410632", "link": "https://stackoverflow.com/users/6410632/user6410632"}, "is_accepted": false, "score": -3, "last_activity_date": 1464797446, "creation_date": 1464797446, "answer_id": 37573817, "question_id": 37573660, "link": "https://stackoverflow.com/questions/37573660/how-implementing-move-constructor-affects-return-value-optimization/37573817#37573817", "title": "How implementing move constructor affects return value optimization?", "body": "<p>If you have copy constructor you also must have move constructor if i recall correctly.</p>\n"}], "owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 37573808, "answer_count": 3, "score": 4, "last_activity_date": 1464798905, "creation_date": 1464796956, "last_edit_date": 1464797156, "question_id": 37573660, "link": "https://stackoverflow.com/questions/37573660/how-implementing-move-constructor-affects-return-value-optimization", "title": "How implementing move constructor affects return value optimization?", "body": "<p>Consider the following code snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass A { \n public:\n    A() { \n        std::cout &lt;&lt; \"A::A()\\n\";\n    } \n\n    ~A() { \n        std::cout &lt;&lt; \"A::~A()\\n\";\n    } \n\n    A(const A&amp;) = delete;\n\n    A(A&amp;&amp;) { \n        std::cout &lt;&lt; \"A::A(A&amp;&amp;)\\n\";\n    };\n\n};\n\nA f() { \n    A a;\n    return a;\n}\n\nint main() { \n    A a = f();\n    return 0;\n}\n</code></pre>\n\n<p>It compiles fine with <code>g++</code> and <code>clang++</code> and output is</p>\n\n<pre><code>A::A()\nA::~A()\n</code></pre>\n\n<p>It seems like RVO kicks in in that case. Note that no move constructor is being called.</p>\n\n<p>However, if one will remove that non-used move constructor from the code above and snippet turns into this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass A { \n public:\n    A() { \n        std::cout &lt;&lt; \"A::A()\\n\";\n    } \n\n    ~A() { \n        std::cout &lt;&lt; \"A::~A()\\n\";\n    } \n\n    A(const A&amp;) = delete;\n\n};\n\nA f() { \n    A a;\n    return a;\n}\n\nint main() { \n    A a = f();\n    return 0;\n}\n</code></pre>\n\n<p>Both <code>clang++</code> and <code>g++</code> refuse to compile this because of copy-constructor of class <code>A</code> is marked as deleted, so it seems that no RVO takes place.</p>\n\n<p>How removing non-used move constructor could lead to this?</p>\n"}, {"tags": ["c++", "templates", "c++11", "unordered-map", "unordered-set"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1464957694, "post_id": 37573473, "comment_id": 62711905, "body": "@Downvoter help me improve my question and tell me what&#39;s wrong with it..."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465047128, "post_id": 37573473, "comment_id": 62743397, "body": "btw, you <b>can</b> specialize <code>std::hash</code>"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465048119, "post_id": 37573473, "comment_id": 62743688, "body": "@bolov I&#39;ve changed cannot -&gt; shouldn&#39;t and forbidden -&gt; discouraged as specification says it may cause undefined behaviour"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465049363, "post_id": 37573473, "comment_id": 62744058, "body": "you cannot (it&#39;s illegal) to extend namespace <code>std</code>. One exception is specializing <code>std::hash</code>: it is allowed and encouraged."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465049532, "post_id": 37573473, "comment_id": 62744099, "body": "see this: <a href=\"http://stackoverflow.com/questions/23339298/stdhash-template-partial-specialization\" title=\"stdhash template partial specialization\">stackoverflow.com/questions/23339298/&hellip;</a>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465049624, "post_id": 37573473, "comment_id": 62744141, "body": "and this: <a href=\"http://en.cppreference.com/w/cpp/language/extending_std\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/extending_std</a>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465049655, "post_id": 37573473, "comment_id": 62744156, "body": "and this: <a href=\"http://stackoverflow.com/questions/8157937/how-to-specialize-stdhashkeyoperator-for-user-defined-type-in-unordered\" title=\"how to specialize stdhashkeyoperator for user defined type in unordered\">stackoverflow.com/questions/8157937/&hellip;</a>"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465052268, "post_id": 37573473, "comment_id": 62745018, "body": "@bolov thanks! I was sure that there is no exception from the rule!"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465052817, "post_id": 37573473, "comment_id": 62745194, "body": "@bolov Does this mean one is allowed to partially specialize std::hash for the std::tuple that will in a future specialization contain his type as follows: <code>template &lt;class First, class... Other&gt; struct hash&lt;std::tuple&lt;First, Other...&gt;&gt; {&#47;*...*&#47;}</code>?"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1465053365, "post_id": 37573473, "comment_id": 62745374, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/113812/discussion-between-w-f-and-bolov\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1464967624, "post_id": 37618043, "comment_id": 62719005, "body": "Good point with the forward compatibility! But about first drawback - creating alias for each possible <code>std::unordered_map</code> isn&#39;t quite scalable especially when it comes to variadics like <code>std::tuple</code>..."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1464979468, "post_id": 37618043, "comment_id": 62725360, "body": "what to you think if I would switch default parameter values to: <code>class KeyEqual = std::unordered_map&lt;Key, T, Hash&gt;::key_equal</code> and <code>class Allocator = std::unordered_map&lt;Key, T, Hash, KeyEqual&gt;::allocator_type</code> ? Do you think it would break less the possible future standard?"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1465161798, "post_id": 37618043, "comment_id": 62773938, "body": "Yes, that would be better. However, maybe I should say at the beginning of my post - these are very minor drawbacks - your original code is not bad, it is acceptable..."}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": false, "score": 1, "last_activity_date": 1464967434, "last_edit_date": 1495540726, "creation_date": 1464967119, "answer_id": 37618043, "question_id": 37573473, "link": "https://stackoverflow.com/questions/37573473/does-templated-using-make-a-good-pattern-for-unordered-map-set-with-custom-keys/37618043#37618043", "title": "Does templated using make a good pattern for unordered_map/set with custom keys", "body": "<p>I see 2 drawbacks:</p>\n\n<p><strong>First</strong> drawback is disputable - I'd just use \"raw\" std types, for me such code is easier to read/understand:</p>\n\n<pre><code>using mkey = std::tuple&lt;int, int&gt;;\nstd::unordered_map&lt;mkey, int, my_hash&lt;my_key&gt;&gt; mum;\n</code></pre>\n\n<p><strong>Second</strong> is that some newer version of C++ standard might have other defaults - so your projects will be in trouble of not being confirmed to new C++ standard, like - I can easy imagine that they change default comparator to <a href=\"https://stackoverflow.com/questions/20317413/what-are-transparent-comparators\"><code>std::equal_to&lt;&gt;</code></a>  for all types and (what is much less probable) allocator parameter type from <code>pair</code> to <code>tuple</code> - deprecating pair - or even to <code>std::allocator&lt;&gt;</code> expressing that it is not really important this parameter type to allocator...</p>\n"}], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "closed_date": 1465052173, "answer_count": 1, "score": 1, "last_activity_date": 1465047990, "creation_date": 1464796395, "last_edit_date": 1495541279, "question_id": 37573473, "link": "https://stackoverflow.com/questions/37573473/does-templated-using-make-a-good-pattern-for-unordered-map-set-with-custom-keys", "closed_reason": "Duplicate", "title": "Does templated using make a good pattern for unordered_map/set with custom keys", "body": "<p>For known reasons (elaborated e.g. <a href=\"https://stackoverflow.com/questions/37541022/what-are-the-reasons-that-extending-the-std-namespace-is-considered-undefined-be#comment62571546_37541022\">here</a>) one shouldn't customize <code>std</code> namespace. This cause one is discouraged to use minimalistic approach of redefining hasher for (not only) user-defined types by specialization <code>std::hash</code> which, as every modification of <code>std</code> namespace, may bring undefined behaviour. As such only valid way to use unordered collection with custom key is by creating his own hash helper struct and passing it to the collection. However passing it every time when accessing collection type is in my opinion somewhat inconvenient. On the other hand c++11 comes with a syntax of templated using to perform templated type aliasing. I haven't seen any answer on stackoverflow about unordered collections encouraging to use that approach. Are there any downsides for adopting templated using to create custom default values of templated parameters? Is there any better pattern covering general problem of introducing new/changing existing default values of templated parameters of classes from <code>std</code> namespace? Example applying hash of <code>std::tuple</code>:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;utility&gt;\n#include &lt;unordered_map&gt;\n\ntemplate &lt;class T&gt;\nstruct my_hash: std::hash&lt;T&gt; { };\n\ntemplate &lt;\n    class Key,\n    class T,\n    class Hash = my_hash&lt;Key&gt;,\n    class KeyEqual = std::equal_to&lt;Key&gt;,\n    class Allocator = std::allocator&lt; std::pair&lt;const Key, T&gt; &gt; &gt;\nusing my_unordered_map = std::unordered_map&lt;Key, T, Hash, KeyEqual, Allocator&gt;;\n\ntemplate &lt;class...&gt;\nstruct integral_sequence { };\n\ntemplate &lt;int Start, int End, class = integral_sequence&lt;&gt;&gt;\nstruct make_integral_sequence_impl;\n\ntemplate &lt;int Start, int End, class... Integrals&gt;\nstruct make_integral_sequence_impl&lt;Start, End, integral_sequence&lt;Integrals...&gt; &gt;: make_integral_sequence_impl&lt;Start+1, End, integral_sequence&lt;Integrals..., std::integral_constant&lt;int, Start&gt;&gt;&gt; { };\n\ntemplate &lt;int StartAndBegin, class... Integrals&gt;\nstruct make_integral_sequence_impl&lt;StartAndBegin, StartAndBegin, integral_sequence&lt;Integrals...&gt;&gt;{\n   using type = integral_sequence&lt;Integrals..., std::integral_constant&lt;int, StartAndBegin&gt;&gt;;\n};\n\ntemplate &lt;int Start, int End&gt;\nusing make_integral_sequence = typename make_integral_sequence_impl&lt;Start, End&gt;::type;\n\ntemplate &lt;class Tuple&gt;\nstruct sizer;\n\ntemplate &lt;class... Args&gt;\nstruct sizer&lt;std::tuple&lt;Args...&gt;&gt; {\n   static constexpr size_t value = sizeof...(Args);\n};\n\ntemplate &lt;class Tuple, class Indices = make_integral_sequence&lt;1, sizer&lt;Tuple&gt;::value - 1 &gt; &gt;\nstruct tuple_tail_impl;\n\ntemplate &lt;class Head, class... Tail, class... Indices&gt;\nstruct tuple_tail_impl&lt;std::tuple&lt;Head, Tail...&gt;, integral_sequence&lt;Indices...&gt;&gt; {\n    using type = std::tuple&lt;Tail...&gt;;\n    std::tuple&lt;Head, Tail...&gt; tuple;\n    std::tuple&lt;Tail...&gt; get() {\n       std::tuple&lt;Tail...&gt; result { std::get&lt;Indices::value&gt;(tuple)... };\n       return result;\n    }\n};\n\ntemplate &lt;class Tuple&gt;\ntypename tuple_tail_impl&lt;Tuple&gt;::type tuple_tail(const Tuple &amp;t) {\n   tuple_tail_impl&lt;Tuple&gt; tti { t };\n   return tti.get();\n}\n\ntemplate &lt;class First, class... Other&gt;\nstruct my_hash&lt;std::tuple&lt;First, Other...&gt;&gt; {\n   std::size_t operator()(const std::tuple&lt;First, Other...&gt;&amp; val) const {\n      return 805306457 * my_hash&lt;std::tuple&lt;Other...&gt;&gt;()(tuple_tail(val)) + my_hash&lt;First&gt;()(std::get&lt;0&gt;(val));\n   }\n};\n\ntemplate &lt;class First&gt;\nstruct my_hash&lt;std::tuple&lt;First&gt;&gt; {\n   std::size_t operator()(const std::tuple&lt;First&gt;&amp; val) const {\n      return my_hash&lt;First&gt;()(std::get&lt;0&gt;(val));\n   }\n};\n\n\nint main() {\n   my_unordered_map&lt;std::tuple&lt;int, int&gt;, int&gt; mum;\n   mum[std::make_tuple(1, 2)] = 10;\n   mum[std::make_tuple(2, 3)] = 20;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "binary-search", "divide-and-conquer"], "answers": [{"comments": [{"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 0, "creation_date": 1464950933, "post_id": 37611797, "comment_id": 62707641, "body": "Maybe a bit of an explanation on which cases this code would behave correctly compared to the incorrect behavior exhibited to the OP&#39;s code?"}], "tags": [], "owner": {"reputation": 135, "user_id": 5082616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb0d097a1f4dd060c74302206bf5fdae?s=128&d=identicon&r=PG&f=1", "display_name": "Deepam Sarmah", "link": "https://stackoverflow.com/users/5082616/deepam-sarmah"}, "is_accepted": true, "score": 0, "last_activity_date": 1464949252, "creation_date": 1464949252, "answer_id": 37611797, "question_id": 37573421, "link": "https://stackoverflow.com/questions/37573421/codechef-wormholes-whats-wrong-with-my-logic/37611797#37611797", "title": "Codechef Wormholes: What&#39;s wrong with my logic?", "body": "<p>Change </p>\n\n<pre><code>`if (*t1 &gt; ar[i].s &amp;&amp; t1 &gt; v) --t1;\n if (*t1 &gt; ar[i].s &amp;&amp; t1 == v) continue;`\n</code></pre>\n\n<p>To </p>\n\n<pre><code>if (*t1 != ar[i].s) {\n    if (t1 == v)\n      continue;\n    else\n      --t1;\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5082616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb0d097a1f4dd060c74302206bf5fdae?s=128&d=identicon&r=PG&f=1", "display_name": "Deepam Sarmah", "link": "https://stackoverflow.com/users/5082616/deepam-sarmah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 37611797, "answer_count": 1, "score": 1, "last_activity_date": 1464949252, "creation_date": 1464796228, "question_id": 37573421, "link": "https://stackoverflow.com/questions/37573421/codechef-wormholes-whats-wrong-with-my-logic", "title": "Codechef Wormholes: What&#39;s wrong with my logic?", "body": "<p>I've been trying to solve this <a href=\"https://www.codechef.com/ZCOPRAC/problems/ZCO12002\" rel=\"nofollow noreferrer\">problem</a> from <a href=\"https://www.codechef.com/\" rel=\"nofollow noreferrer\">Codechef</a>. But there's something wrong with my logic that I'm unable to correct and I cannot wait for editorials to come up because the contest runs for many days (like 200 days). </p>\n\n<p>My code: </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\nstruct exam {int s,e;};\n\nint main() {\n    int n,x,y;\n    scanf(\"%d%d%d\",&amp;n,&amp;x,&amp;y);\n\n    exam ar[n];\n    int v[x],w[y];\n\n    for (int i = 0; i &lt; n; ++i) scanf(\"%d%d\",&amp;ar[i].s,&amp;ar[i].e);\n    for (int i = 0; i &lt; x; ++i) scanf(\"%d\",&amp;v[i]);\n    for (int i = 0; i &lt; y; ++i) scanf(\"%d\",&amp;w[i]);\n    stable_sort(v,v+x); stable_sort(w,w+y);\n\n    int mini = 1e6;\n\n    for (int i = 0; i &lt; n; ++i) {\n\n        int *t1 = lower_bound(v,v+x,ar[i].s);\n\n        if (*t1 &gt; ar[i].s &amp;&amp; t1 &gt; v) --t1;\n        if (*t1 &gt; ar[i].s &amp;&amp; t1 == v) continue;\n\n        int *t2 = lower_bound(w,w+y,ar[i].e);\n\n        if (t2 == w+y) continue;\n\n        mini = min(mini,(*t2-*t1)+1);\n    }\n\n    printf(\"%d\",mini);\n    return 0;\n}\n</code></pre>\n\n<p>And sadly this code doesn't pass two test cases: \n<a href=\"https://i.stack.imgur.com/BrijL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BrijL.png\" alt=\"\"></a></p>\n\n<p>Can anyone tell me what's wrong with my logic?</p>\n"}, {"tags": ["c++", "openmp", "atomic", "pragma", "single-threaded"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1464796905, "post_id": 37573265, "comment_id": 62634465, "body": "with openmp enabled, pragmas are expanded to GOMP code that probably induces overhead compared to sequential code"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6410293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e53b50704e8a9adac4038c9391a1210c?s=128&d=identicon&r=PG", "display_name": "sparappaband", "link": "https://stackoverflow.com/users/6410293/sparappaband"}, "edited": false, "score": 0, "creation_date": 1465203159, "post_id": 37576198, "comment_id": 62785867, "body": "To avoid the problem I added an if statement to check the number of threads so that in the case of single thread the code is serial, without any pragma directive. Thank you."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 0, "last_activity_date": 1464805983, "last_edit_date": 1464805983, "creation_date": 1464805622, "answer_id": 37576198, "question_id": 37573265, "link": "https://stackoverflow.com/questions/37573265/performance-issues-of-pragma-omp-atomic-with-omp-num-threads-1/37576198#37576198", "title": "Performance issues of #pragma omp atomic with OMP_NUM_THREADS=1", "body": "<p>If you enable OpenMP, gcc has to generate different code that works for any number of threads that is only known at runtime.</p>\n\n<p>In this particular case take a look at output of <code>gcc -S</code> (slightly shortened by lables).</p>\n\n<p>Without OpenMP:</p>\n\n<pre><code>.loc 1 38 0 discriminator 2  # Line 38 is J[k]+=1;\nmovsd   8(%rsp), %xmm1\ncvttsd2si   %xmm0, %edx\ncvttsd2si   %xmm1, %eax\nmovsd   .LC3(%rip), %xmm0\nimull   $1000, %eax, %eax\naddl    %edx, %eax\ncltq\nsalq    $3, %rax\nleaq    0(%r13,%rax), %rdx\n.loc 1 40 0 discriminator 2   # Line 40 is Jb[k]+=1;\naddq    %r12, %rax\n.loc 1 29 0 discriminator 2\ncmpq    $8000000, %r15\n.loc 1 38 0 discriminator 2\naddsd   (%rdx), %xmm0\nmovsd   %xmm0, (%rdx)\n.loc 1 40 0 discriminator 2\nmovsd   .LC3(%rip), %xmm0\naddsd   (%rax), %xmm0\nmovsd   %xmm0, (%rax)\n</code></pre>\n\n<p>The loop is unrolled making this rather complicated.</p>\n\n<p>With <code>-fopenmp</code>:</p>\n\n<pre><code>movsd   (%rsp), %xmm2\ncvttsd2si   %xmm0, %eax\ncvttsd2si   %xmm2, %ecx\nimull   $1000, %ecx, %ecx\naddl    %eax, %ecx\nmovslq  %ecx, %rcx\nsalq    $3, %rcx\nmovq    %rcx, %rsi\naddq    16(%rbp), %rsi\nmovq    (%rsi), %rdx\nmovsd   8(%rsp), %xmm1\njmp .L4\nmovq    %rax, %rdx\nmovq    %rdx, (%rsp)\nmovq    %rdx, %rax\nmovsd   (%rsp), %xmm3\naddsd   %xmm1, %xmm3\nmovq    %xmm3, %rdi\nlock cmpxchgq   %rdi, (%rsi)\ncmpq    %rax, %rdx\njne .L9\n.loc 1 40 0\naddq    24(%rbp), %rcx\nmovq    (%rcx), %rdx\njmp .L5\n.p2align 4,,10\n.p2align 3\nmovq    %rax, %rdx\nmovq    %rdx, (%rsp)\nmovq    %rdx, %rax\nmovsd   (%rsp), %xmm4\naddsd   %xmm1, %xmm4\nmovq    %xmm4, %rsi\nlock cmpxchgq   %rsi, (%rcx)\ncmpq    %rax, %rdx\njne .L10\naddq    $8, %r12\ncmpq    %r12, %rbx\njne .L6\n</code></pre>\n\n<p>I'm not going to try to explain or understand all the details of what is happening here, but thats not necessary for the message: The compiler has to use different atomic instructions that are likely more costly, especially <code>lock cmpxchgq</code>.</p>\n\n<p>Besides this fundamental issue, OpenMP may mess with the optimizer in any imaginable way, e.g. interfer with unrolling. I've also seen a curious case where the intel compiler actually generates more efficient serial code for an OpenMP loop.</p>\n\n<p>P.S. Consider yourself lucky - it could be much worse. If the compiler cannot map the atomic instruction to a hardware instruction, it has to use locks which would be even slower.</p>\n"}], "owner": {"reputation": 13, "user_id": 6410293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e53b50704e8a9adac4038c9391a1210c?s=128&d=identicon&r=PG", "display_name": "sparappaband", "link": "https://stackoverflow.com/users/6410293/sparappaband"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 37576198, "answer_count": 1, "score": 1, "last_activity_date": 1464805983, "creation_date": 1464795825, "question_id": 37573265, "link": "https://stackoverflow.com/questions/37573265/performance-issues-of-pragma-omp-atomic-with-omp-num-threads-1", "title": "Performance issues of #pragma omp atomic with OMP_NUM_THREADS=1", "body": "<p>I have observed an unexpected (for me!) behavior of an openmp code which I am writing. The code structure is the following: </p>\n\n<pre><code>#pragma omp parallel for\nfor(int i=0;i&lt;N;i++){ \n // lots of calculations that produce 3 integers i1,i2,i3 and 3 doubles d1,d2,d3 \n #pragma omp atomic \n J1[i1] += d1;\n #pragma omp atomic\n J2[i2] += d2; \n #pragma omp atomic\n J3[i3] += d3; \n}\n</code></pre>\n\n<p>I have compiled three different versions of this code: </p>\n\n<p>1) with openmp (-fopenmp)</p>\n\n<p>2) without openmp</p>\n\n<p>3) with openmp, but without the 3 atomic operations (just as a test, since atomic operations are necessary)</p>\n\n<p>When I run version 1) with environment variable OMP_NUM_THREADS=1, I observe a significant slowdown with respect to version 2); while version 3) runs as fast as version 2). </p>\n\n<p>I would like to know the reason for this behavior (why do atomic operations slow the code down even if single-threded?!) and if it is possible to compile/rewrite the code in such a way that version 1) runs as fast as version 2). </p>\n\n<p>I attach at the end of the question a working example which shows the aforementioned behavior. I compiled 1) with: </p>\n\n<pre><code>g++ -fopenmp -o toy_code toy_code.cpp -std=c++11 -O3\n</code></pre>\n\n<p>2) with:</p>\n\n<pre><code>g++ -o toy_code_NO_OMP toy_code.cpp -std=c++11 -O3\n</code></pre>\n\n<p>and 3) with:</p>\n\n<pre><code>g++ -fopenmp -o toy_code_NO_ATOMIC toy_code_NO_ATOMIC.cpp -std=c++11 -O3\n</code></pre>\n\n<p>The version of the compiler is gcc version 5.3.1 20160519 (Debian 5.3.1-20).\nThe execution time of the 3 versions is:</p>\n\n<p>1) 1 min 24 sec</p>\n\n<p>2) 51 sec</p>\n\n<p>3) 51 sec</p>\n\n<p>Thanks in advance for any advice! </p>\n\n<pre><code>// toy_code.cpp \n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;cmath&gt;\n#include &lt;omp.h&gt;\n#define Np 1000000\n#define N 1000\n\nint main (){\n        double* Xp, *Yp, *J,*Jb;\n        Xp = new double[Np];\n        Yp = new double[Np];  \n        J = new double [N*N];\n        Jb = new double [N*N];\n\n        for(int i=0;i&lt;N*N;i++){\n            J[i]=0.0;\n            Jb[i]=0.0;\n        }\n\n        for(int i=0;i&lt;Np;i++){\n            Xp[i] = rand()*1.0/RAND_MAX - 0.5;\n            Yp[i] = rand()*1.0/RAND_MAX - 0.5;\n        }\n\n        for(int n=0; n&lt;2000; n++){\n        #pragma omp parallel for\n        for(int p=0;p&lt;Np;p++){\n            double rx = (Xp[p]+0.5)*(N-1);\n            double ry = (Yp[p]+0.5)*(N-1);\n            int xindex = (int)floor(rx+0.5);\n            int yindex = (int)floor(ry+0.5);\n            int k;\n            k=xindex*N+yindex;\n\n            #pragma omp atomic\n            J[k]+=1;\n            #pragma omp atomic\n            Jb[k]+=1;\n         }\n         }\n\n        delete[] Xp;\n        delete[] Yp;\n        delete[] J;\n        delete[] Jb;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 2, "last_activity_date": 1464796934, "last_edit_date": 1495541277, "creation_date": 1464796298, "answer_id": 37573446, "question_id": 37573209, "link": "https://stackoverflow.com/questions/37573209/initializer-list-overwrites-memory-for-dynamic-multi-dimensional-array/37573446#37573446", "title": "Initializer list overwrites memory for dynamic multi dimensional array", "body": "<p>The compiler is required to generate a throw of an exception of type <a href=\"http://en.cppreference.com/w/cpp/memory/new/bad_array_new_length\" rel=\"nofollow noreferrer\"><code>bad_array_new_length</code></a> if there are too many initializers for the array-new expression.</p>\n\n<p>g++ 6.1 does emit a throw of <code>bad_array_new_length</code> as expected; clang does not, but this is because it is able to eliminate the allocation (<a href=\"https://stackoverflow.com/questions/22453001/clang-fails-to-throw-a-stdbad-alloc-when-allocating-objects-that-would-exceed\">Clang fails to throw a std::bad_alloc when allocating objects that would exceed the limit</a>). If the allocation is forced to occur, clang throws an exception but <a href=\"https://llvm.org/bugs/show_bug.cgi?id=11644\" rel=\"nofollow noreferrer\">of the wrong type</a> (<code>std::bad_alloc</code>).</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b8990c56d2001570\" rel=\"nofollow noreferrer\">Example</a>:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::bad_array_new_length'\n  what():  std::bad_array_new_length\n</code></pre>\n"}], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 37573446, "answer_count": 1, "score": 1, "last_activity_date": 1464796934, "creation_date": 1464795714, "last_edit_date": 1495542695, "question_id": 37573209, "link": "https://stackoverflow.com/questions/37573209/initializer-list-overwrites-memory-for-dynamic-multi-dimensional-array", "title": "Initializer list overwrites memory for dynamic multi dimensional array", "body": "<p>Why is the following allowed?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::uniform_int_distribution&lt;int&gt; dist(2,3);\n\n    auto arr = new int[dist(rd)][4][2]{{{1}},{{2}},{{3}}}; // may write to unallocated memory\n\n    auto val1 = arr[0][0][0];\n    auto val2 = arr[1][0][0];\n    auto val3 = arr[2][0][0];\n\n    auto result = val1 + val2 + val3;\n    std::cout &lt;&lt; result;\n\n    return 0;\n}\n</code></pre>\n\n<p>The initializer will write over unallocated memory if the random value is 2. </p>\n\n<p>Similar to the answer found <a href=\"https://stackoverflow.com/a/7125040/1460794\">here</a>, I would not have expected the compiler to allow this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 0, "creation_date": 1464857488, "post_id": 37573141, "comment_id": 62659417, "body": "Possible duplicate <a href=\"http://stackoverflow.com/questions/35907454/why-stdfunctionargument-type-has-ben-deprecated\" title=\"why stdfunctionargument type has ben deprecated\">stackoverflow.com/questions/35907454/&hellip;</a>"}, {"owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "reply_to_user": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 1, "creation_date": 1464857896, "post_id": 37573141, "comment_id": 62659676, "body": "@Damian I actually mention this link as it is the starting point of my question..."}, {"owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 0, "creation_date": 1464879651, "post_id": 37573141, "comment_id": 62675898, "body": "Sorry missed that. Still believe that it answers all your questions?"}, {"owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "reply_to_user": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 1, "creation_date": 1464880972, "post_id": 37573141, "comment_id": 62676932, "body": "It does not answer my questions, it caused them."}], "owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464795526, "creation_date": 1464795526, "last_edit_date": 1495541279, "question_id": 37573141, "link": "https://stackoverflow.com/questions/37573141/functors-argument-type-considered-bad-how-to-replace-it", "title": "Functor&#39;s argument_type considered bad: how to replace it?", "body": "<p>I have been intrigued by <code>std::function</code>'s <code>argument_type</code> being deprecated. The response given to this <a href=\"https://stackoverflow.com/questions/35907454/why-stdfunctionargument-type-has-ben-deprecated\">previous question</a> references a paper that actually goes further, implying that <code>result_type</code> and similar type definitions to be old/bad practice. The paper suggests in particular that perfect forwarding killed the need for <code>argument_type</code>.</p>\n\n<p>Is that always so however? Sometimes you do want to have the type of the argument to do more elaborate things than just forwarding. For example, a numerical optimization object may take a functor to minimize as a template argument, and use its <code>argument_type</code> to deduce the input's precision and therefore adapt stopping criteria constants accordingly.</p>\n\n<p>Would there be a more post-C++11 way than typedefs to do that? Is there a way to deduce automatically the type of the argument without having to specify it again in one form or another? Or are those kind of constructions (a class depending on the argument type of another) also considered bad practice, and what would be an alternative implementation?</p>\n"}, {"tags": ["c++", "stdvector", "armadillo", "dynamic-allocation"], "comments": [{"owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "edited": false, "score": 2, "creation_date": 1464795741, "post_id": 37573116, "comment_id": 62633716, "body": "<a href=\"http://arma.sourceforge.net/docs.html#resize_member\" rel=\"nofollow noreferrer\">arma.sourceforge.net/docs.html#resize_member</a>"}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "edited": false, "score": 0, "creation_date": 1465029625, "post_id": 37573116, "comment_id": 62738322, "body": "The link does not tell you how ot will compare to std::vectors at all. What is needed is a comparison how memory is handled."}, {"owner": {"reputation": 22750, "user_id": 1900149, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8aae825f3d54701124d88693ff2cad9f?s=128&d=identicon&r=PG", "display_name": "tonytonov", "link": "https://stackoverflow.com/users/1900149/tonytonov"}, "edited": false, "score": 1, "creation_date": 1465212801, "post_id": 37573116, "comment_id": 62791518, "body": "In similar conditions I went with (2): grow <code>std::vector</code> and convert back with <code>conv_to</code>. There&#39;s a copy, obviously, but it&#39;s critical, look into setting <code>copy_aux_mem = false</code> (advanced constructors subsection)."}, {"owner": {"reputation": 428, "user_id": 3565667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/381e93ca234b2ce078b1c4f87da3a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen", "link": "https://stackoverflow.com/users/3565667/naveen"}, "edited": false, "score": 0, "creation_date": 1465221733, "post_id": 37573116, "comment_id": 62797519, "body": "I think @Tenzirg&#39;s link answers the question. The resize() function in armadillo preserves the elements in the array while resizing, unlike valarray::resize() which formats the existing array."}], "owner": {"reputation": 428, "user_id": 3565667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/381e93ca234b2ce078b1c4f87da3a35f?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen", "link": "https://stackoverflow.com/users/3565667/naveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464795432, "creation_date": 1464795432, "question_id": 37573116, "link": "https://stackoverflow.com/questions/37573116/implementing-dynamically-growing-arrays-within-loops-in-c", "title": "Implementing dynamically growing arrays within loops in C++", "body": "<p>I have a scenario in my c++ project which necessitates the use of a dynamically expanding array within a for loop and it is not conducive or highly inefficient to preallocate. Simply put, after each iteration of the loop the array is appended by a sub-array of length that is different from the previous iteration. One possible solution is <strong><em>std::vector::push_back</em></strong>. But, currently I rely heavily on the armadillo library. My questions are as follows,</p>\n\n<ol>\n<li><p>Is a push_back like operation possible with armadillo armadillo Col, Colvec or mat data structures?</p></li>\n<li><p>If (1) is not possible, Is it easy/efficient to switch back and forth between std::vector and armadillo vectors?</p></li>\n<li><p>Is the use of arma::fields an efficient alternative?\nThe idea is to allocate a field of size equal to the range of the loop.<br>\nCopy vectors into the field elements during each iteration of the for    loop and once the loop is exited, consolidate the field elements into a single vector. </p></li>\n</ol>\n"}, {"tags": ["c++", "linux", "java-native-interface", "shared-libraries"], "comments": [{"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464795600, "post_id": 37572993, "comment_id": 62633626, "body": "with segfault i have a feeling the code you are using has a logic error. since a segfault is trying to access memory that is not there, like when you go over the bounds of an array. also makes sense you get the first three print statments since fails at the line <code>jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;&amp;env, &amp;vm_args);</code>"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464796386, "post_id": 37572993, "comment_id": 62634135, "body": "what command do you use to run the program? also compile with -Wall and -Werror"}, {"owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "reply_to_user": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464796807, "post_id": 37572993, "comment_id": 62634399, "body": "I run with just ./exe/jniExp Or with gdb, gdb exe/jniExp followed by run"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464797140, "post_id": 37572993, "comment_id": 62634602, "body": "in that case i think it might be trying to read an expected argument that is not there. i mean it is hard to read with no comments so i could be wrong."}, {"owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "reply_to_user": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464797592, "post_id": 37572993, "comment_id": 62634875, "body": "Here&#39;s the example code I was looking at with more comments: <a href=\"http://www.codeproject.com/Articles/993067/Calling-Java-from-Cplusplus-with-JNI\" rel=\"nofollow noreferrer\">codeproject.com/Articles/993067/&hellip;</a>"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464797914, "post_id": 37572993, "comment_id": 62635060, "body": "hmm it was made for windows which might be a problem with low level calls being used"}, {"owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "reply_to_user": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1464798873, "post_id": 37572993, "comment_id": 62635682, "body": "That could be the issue. I&#39;ll try to look for some Linux examples and see what differences there are."}], "answers": [{"comments": [{"owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "edited": false, "score": 0, "creation_date": 1464800336, "post_id": 37574582, "comment_id": 62636538, "body": "Oops, that was actually a typo. The machine that I&#39;m developing on doesn&#39;t have internet access, so I had to copy the code over by hand and I messed up. On the machine where I&#39;m actually trying to run this, it only has the one &#39;&amp;&#39;. I&#39;ll fix it in my post. You&#39;re absolutely right based on what I posted though."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "edited": false, "score": 0, "creation_date": 1464800521, "post_id": 37574582, "comment_id": 62636643, "body": "If it&#39;s only a typo, then the code as is should work. It doesn&#39;t fail on either the mac or linux that I tried it on - both running java 8 latest, though."}, {"owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "edited": false, "score": 0, "creation_date": 1464800760, "post_id": 37574582, "comment_id": 62636775, "body": "Hmm... Well, my guess is that if it works on java 8, then it would work on java 6 (since the example I copied was made for java 6). I think it must be something about the way my environment is set up. Thank you so much for taking a look at it."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "edited": false, "score": 0, "creation_date": 1464801900, "post_id": 37574582, "comment_id": 62637451, "body": "I just tested it on java 6 - looks to be the same as on your system and it worked correctly. The only suspicion I have is that the line <code>options[0].optionString = &quot;-Djava.class.path=.&quot;;</code> isn&#39;t actually what you&#39;ve got in the <code>.cpp</code> file of yours. There&#39;s a <code>strlen()</code> which would catch a null pointer, but if you used single quotes, and intentionally cast to a char *, and ignored the warning, I can trigger the same error as you."}, {"owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "edited": false, "score": 0, "creation_date": 1464805202, "post_id": 37574582, "comment_id": 62639232, "body": "Good thought, but unfortunately I used double quotes, so that&#39;s not it."}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1464799929, "creation_date": 1464799929, "answer_id": 37574582, "question_id": 37572993, "link": "https://stackoverflow.com/questions/37572993/segfault-on-jni-createjavavm/37574582#37574582", "title": "Segfault on JNI_CreateJavaVM", "body": "<p>The bug you're getting is on this line:</p>\n\n<pre><code>jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;&amp;env, &amp;vm_args);\n</code></pre>\n\n<p>You're asking for the address of the address of a pointer to the env; whereas if you look at the reference <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html\" rel=\"nofollow\">example source</a>:</p>\n\n<pre><code>#include &lt;jni.h&gt;       /* where everything is defined */\n...\nJavaVM *jvm;       /* denotes a Java VM */\nJNIEnv *env;       //&lt;!-- same as yours\nJavaVMInitArgs vm_args; /* JDK/JRE 6 VM initialization arguments */\nJavaVMOption* options = new JavaVMOption[1];\noptions[0].optionString = \"-Djava.class.path=/usr/lib/java\";\nvm_args.version = JNI_VERSION_1_6;\nvm_args.nOptions = 1;\nvm_args.options = options;\nvm_args.ignoreUnrecognized = false;\n/* load and initialize a Java VM, return a JNI interface\n * pointer in env */\nJNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args); // &lt;!-- NOT the same!\ndelete options;\n/* invoke the Main.test method using the JNI */\njclass cls = env-&gt;FindClass(\"Main\");\njmethodID mid = env-&gt;GetStaticMethodID(cls, \"test\", \"(I)V\");\nenv-&gt;CallStaticVoidMethod(cls, mid, 100);\n/* We are done. */\njvm-&gt;DestroyJavaVM();\n</code></pre>\n\n<p>You should change the code to read:</p>\n\n<pre><code>jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "is_accepted": true, "score": 1, "last_activity_date": 1465931343, "creation_date": 1465931343, "answer_id": 37820245, "question_id": 37572993, "link": "https://stackoverflow.com/questions/37572993/segfault-on-jni-createjavavm/37820245#37820245", "title": "Segfault on JNI_CreateJavaVM", "body": "<p>Well this is embarrassing...</p>\n\n<p>I finally found out my problem and there's no way anyone on stack overflow could have fixed it because the code I posted in the question is actually correct, but it is not the same code as what I was running.</p>\n\n<p>As I mentioned, I am running this code on a standalone system without internet access, so I had to copy the code by hand. In copying it, I corrected my mistake.</p>\n\n<p>The code that is on my standalone system, includes the following lines:</p>\n\n<pre><code>JavaVMOption* options = new JavaVMOption[1];\noptions[0].optionString = \"-Djava.class.path=.\";\nvm_args.version = JNI_VERSION_1_6;\nvm_args.nOptions = 1;\nvm_args.ignoreUnrecognized = false;\n</code></pre>\n\n<p>Which you'll notice is not the same as the code I posted in the question. Because it is missing the line:</p>\n\n<pre><code>vm_args.options = options;\n</code></pre>\n\n<p>So of course it would cause a segfault because vm_args.options was never set to anything.</p>\n"}], "owner": {"reputation": 558, "user_id": 2423283, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75057ee1361d4d3d169413ed4d8e88f5?s=128&d=identicon&r=PG", "display_name": "NateW", "link": "https://stackoverflow.com/users/2423283/natew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1547, "favorite_count": 0, "accepted_answer_id": 37820245, "answer_count": 2, "score": 2, "last_activity_date": 1508240753, "creation_date": 1464795032, "last_edit_date": 1465233619, "question_id": 37572993, "link": "https://stackoverflow.com/questions/37572993/segfault-on-jni-createjavavm", "title": "Segfault on JNI_CreateJavaVM", "body": "<p>I am trying for the first time to load a JVM from C++ via JNI but I can't seem to get it to work. I get a segfault when I call JNI_CreateJavaVM.</p>\n\n<p>The code is pretty straight forward (copied mostly from an online example):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;jni.h&gt;\n\nusing namespace std;\n\nint main(int argc, char** argv) {\n\n    printf(\"Initializing JVM\\n\");\n    JavaVM *jvm;\n    JNIEnv *env;\n\n    printf(\"Setting up args\\n\";\n    JavaVMInitArgs vm_args;\n    JavaVMOption* options = new JavaVMOption[1];\n    options[0].optionString = \"-Djava.class.path=.\";\n    vm_args.version = JNI_VERSION_1_6;\n    vm_args.nOptions = 1;\n    vm_args.options = options;\n    vm_args.ignoreUnrecognized = false;\n\n    printf(\"Attempting to create JVM\\n\");\n    jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n\n    if(rc != JNI_OK) {\n        printf(\"didn't work :(\\n\");\n    }\n    else {\n        printf(\"JVM load succeeded!\\n\");\n        jint ver = env-&gt;GetVersion();\n        printf(\"Version: %i.%i\\n\", (ver&gt;&gt;16)&amp;0x0f, ver&amp;0x0f);\n\n        printf(\"Cleaning up\\n\");\n        delete options;\n        jvm-&gt;DestroyJavaVM();\n    }\n    printf(\"Done\\n\");\n}\n</code></pre>\n\n<p>My LD_LIBRARY_PATH contains /usr/java/jdk1.6.0_45/jre/lib/amd64/server which is the path containing a libjvm.so library. There are a few other libjvm.so libraries on my system, but most of them are for java 1.4. There is only one other jdk 1.6 libjvm.so and I tried using it as well with the same results.</p>\n\n<p>I compile with:</p>\n\n<pre><code>g++ -g -c src/jniExpCppPart.cpp -I/usr/java/jdk1.6.0_45/include -I/usr/java/jdk1.6.0_45/include/linux -o obj/jniExpCppPart.o\ng++ obj/jniExpCppPart.o -L/usr/java/jdk1.6.0_45/jre/lib/amd64/server -ljvm -o exe/jniExp\n</code></pre>\n\n<p>And when I run it within gdb, I get the first three print statements, followed by:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault\n0x0000003249479e27 in strncmp () from /lib64/libc.so.6\n(gdb) bt\n#0 0x0000003249479e27 in strncmp () from /lib64/libc.so.6\n#1 0x00002aaaaacd8c10 in Arguments::process_sun_java_launcher_properties(JavaVMInitArgs*) () from /usr/java/jdk1.6.0_45/jre/lib/amd64/server/libjvm.so\n#2 0x00002aaaab2cfe7d in Thread::create_vm(JavaVMInitArgs*, bool*) () from /usr/java/jdk1.6.0_45/jre/lib/amd64/server/libjvm.so\n#3 0x00002aaaaafcc800 in JNI_CreateJavaVM () from /usr/java/jdk1.6.0_45/jre/lib/amd64/server/libjvm.so\n#4 0x0000000000400761 in main(argc=1, argv=0x7fffffffe568) at src/jni/ExpCppPart.cpp:22\n</code></pre>\n\n<p>My guess is that the issue has more to do with how my environment is set up or how I built the executable rather than the code. Its been a few years since I really dealt with linking shared libraries, so its definitely possible that I messed something up.</p>\n\n<p>Any ideas what I might be doing wrong?</p>\n\n<p><strong>Update</strong>\nI tried loading the library using dlopen instead (because I saw it in some Linux code that uses JNI). It didn't make difference, but I thought I'd include it here to see if it gives anyone a hint of what I may be doing wrong.</p>\n\n<p>Once again I'm copying this by hand from a system that isn't connected to the internet, so there may be some typos.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;jni.h&gt;\n#include&lt;dlfcn.h&gt;\n\nusing namespace std;\n\n//Create type for pointer to the JNI_CreateJavaVM function\ntypedef jint (*CreateJvmFuncPtr) (JavaVM**, void**, JavaVMInitArgs*);\n\n//New method returns pointer to the JNI_CreateJavaVM function\nCreateJvmFuncPtr findCreateJvm() {\n    CreateJavaFuncPtr createJvm = NULL;\n\n    void* jvmLib = dlopen(\"libjvm.so\", RTLD_LAZY); //Get handle to jvm shared library\n    char* error = dlerror(); //Check for errors on dlopen\n\n    if(jvmLib = NULL || error != NULL) {\n        printf(\"FailedToLoadJVM\\n\");\n    }\n\n    //Load pointer to the function within the shared library\n    createJvm = (CreateJvmFuncPtr) dlsym(jvmLib, \"JNI_CreateJavaVM\");\n\n    error = dlerror();\n    if(error != NULL) {\n        printf(\"Success\\n\");\n    }\n\n    return createJVM;\n}\n\nint main(int argc, char** argv) {\n\n    printf(\"Initializing JVM\\n\");\n    JavaVM *jvm;\n    JNIEnv *env;\n\n    printf(\"Setting up args\\n\";\n    JavaVMInitArgs vm_args;\n    JavaVMOption* options = new JavaVMOption[1];\n    options[0].optionString = \"-Djava.class.path=.\";\n    vm_args.version = JNI_VERSION_1_6;\n    vm_args.nOptions = 1;\n    vm_args.options = options;\n    vm_args.ignoreUnrecognized = false;\n\n    printf(\"Attempting to create JVM\\n\");\n    //Old code: jint rc = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n    //New code:\n    CreateJvmFuncPtr createJVM = findCreateJvm();\n    printf(\"findCreateJVM() returned 0x%x\\n\", createJVM);\n\n    jint rc = createJVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n    //End new code\n\n    if(rc != JNI_OK) {\n        printf(\"didn't work :(\\n\");\n    }\n    else {\n        printf(\"JVM load succeeded!\\n\");\n        jint ver = env-&gt;GetVersion();\n        printf(\"Version: %i.%i\\n\", (ver&gt;&gt;16)&amp;0x0f, ver&amp;0x0f);\n\n        printf(\"Cleaning up\\n\");\n        delete options;\n        jvm-&gt;DestroyJavaVM();\n    }\n    printf(\"Done\\n\");\n}\n</code></pre>\n\n<p>The output (similar to before) shows that everything is successful until it throws a segfault from within the JNI_CreateJavaVM method.</p>\n\n<pre><code>Initializing JVM\nSetting up args\nAttempting to create JVM\nSuccess!\nfindCreateJVM() returned 0xc1e70780\nSegmentation fault\n</code></pre>\n\n<p>So it seems that at the very least the program can find the library/function just fine. But something goes wrong when it's called. To me this indicates that it could either be just a simple API misunderstanding (I'm passing it something other than what I should be) or there's something weird with the shared library. Could this be caused perhaps if the shared library was compiled for an architecture/word size different than my program was compiled for? If so, how can I check the target architecture for both my program and the library?</p>\n"}, {"tags": ["c++", "fonts", "directwrite"], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "edited": false, "score": 0, "creation_date": 1465053198, "post_id": 37591337, "comment_id": 62745315, "body": "<code>IDWriteFontFace</code> doesn&#39;t seem to solve the problem (see <a href=\"http://stackoverflow.com/questions/11921592/how-to-create-idwritetextformat-from-idwritefontface\">this question</a>). Now to the four steps you suggested: I can create code that creates a custom font collection and compiles fine but I just don&#39;t know where to add my custom font."}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "reply_to_user": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "edited": false, "score": 0, "creation_date": 1465057403, "post_id": 37591337, "comment_id": 62746736, "body": "You mean where to add a physical font file? It&#39;s up to you, it could be a separate file, embedded resource in your executable, anything really, as long as custom collection code you provide can make it accessible to directwrite system."}, {"owner": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "edited": false, "score": 0, "creation_date": 1465058834, "post_id": 37591337, "comment_id": 62747205, "body": "I believe that I was totally on the wrong track. I&#39;m currently looking at <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/dd941728(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this page</a> and trying to adapt my code. I&#39;ll let you know if I succeeded in a few minutes."}, {"owner": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "edited": false, "score": 0, "creation_date": 1465123365, "post_id": 37591337, "comment_id": 62761789, "body": "It still doesn&#39;t work. However, I understand the basic principles of creating a custom font collection much better now. If neccessary, I will post a new question which is more specific after a little more trial and error."}, {"owner": {"reputation": 30359, "user_id": 255688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b63650ed07d745fd9accf52e4d286b?s=128&d=identicon&r=PG", "display_name": "phimuemue", "link": "https://stackoverflow.com/users/255688/phimuemue"}, "edited": false, "score": 0, "creation_date": 1513156954, "post_id": 37591337, "comment_id": 82539916, "body": "@bunglehead I think the key is not only meaningful to the client, but also used internally, possibly to re-use cached versions of previously created font collections. (I passed <code>nullptr</code> and got a status access violation.)"}, {"owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "reply_to_user": {"reputation": 30359, "user_id": 255688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b63650ed07d745fd9accf52e4d286b?s=128&d=identicon&r=PG", "display_name": "phimuemue", "link": "https://stackoverflow.com/users/255688/phimuemue"}, "edited": false, "score": 1, "creation_date": 1513161550, "post_id": 37591337, "comment_id": 82542886, "body": "@phimuemue sure, I&#39;d say it&#39;s expected. What I meant is that key format is up to application, but as you discovered it should be readable to the specified length. NULL is probably special too and will crash regardless if anything was cached before or not."}], "tags": [], "owner": {"reputation": 894, "user_id": 5758312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15560486f98d522b0e9a43cc60c82144?s=128&d=identicon&r=PG&f=1", "display_name": "bunglehead", "link": "https://stackoverflow.com/users/5758312/bunglehead"}, "is_accepted": true, "score": 4, "last_activity_date": 1464868950, "last_edit_date": 1592644375, "creation_date": 1464868950, "answer_id": 37591337, "question_id": 37572961, "link": "https://stackoverflow.com/questions/37572961/c-directwrite-load-font-from-file-at-runtime/37591337#37591337", "title": "C++ - DirectWrite: Load font from file at runtime", "body": "<p>Sure, it's possible to do that. You'll need to:</p>\n<ul>\n<li><p>implement <code>IDWriteFontCollectionLoader</code> interface in your code;</p>\n<p>You should also implement <code>IDWriteFontFileEnumerator</code> obviously, but this should be trivial.</p>\n</li>\n<li><p>register loader with the factory using <code>RegisterFontCollectionLoader</code></p>\n</li>\n<li><p>create a collection using <code>CreateCustomFontCollection</code> and same factory;</p>\n</li>\n<li><p>pass it to <code>CreateTextFormat</code> called on same factory.</p>\n</li>\n</ul>\n<p>When you call <code>CreateCustomFontCollection</code> you have to provide a collection key and its size, it's a blob only meaningful to you, could be anything. Later on your loader will be called with this key, so you can identify it. For example you can use a string 'myspecialkey' as a key, and in <code>CreateEnumeratorFromKey</code> check if it's called with that key, rejecting any other key.</p>\n<p>If you only wanted to create a fontface object from a path to a file, you don't need any of above, just use <code>CreateFontFileReference</code> followed by <code>CreateFontFace</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 937938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixgsg.jpg?s=128&g=1", "display_name": "Dwayne Robinson", "link": "https://stackoverflow.com/users/937938/dwayne-robinson"}, "edited": false, "score": 1, "creation_date": 1504855516, "post_id": 37645622, "comment_id": 79184157, "body": "Tis a little easier in Windows 10 Fall SDK 16232:  dwriteFactory-&gt;CreateFontSetBuilder(OUT &amp;fontSetBuilder2); fontSetBuilder2-&gt;AddFontFile(fullFontFilePath.c_str()); fontSetBuilder2-&gt;CreateFontSet(OUT &amp;fontSet); dwriteFactory3-&gt;CreateFontCollectionFromFontSet(fontSet, OUT &amp;fontCollection);"}, {"owner": {"reputation": 7510, "user_id": 1132334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8o6Nl.png?s=128&g=1", "display_name": "Cee McSharpface", "link": "https://stackoverflow.com/users/1132334/cee-mcsharpface"}, "edited": false, "score": 0, "creation_date": 1575578268, "post_id": 37645622, "comment_id": 104623667, "body": "Yes but the problem with this approach is that <code>CreateFontCollectionFromFontSet</code> creates a <code>IDWriteFontCollection1</code>, and <code>CreateTextFormat</code> takes an <code>IDWriteFontCollection</code>. those two cannot be reconciled, so we still have to take the <code>CreateCustomFontCollection</code> route."}, {"owner": {"reputation": 460, "user_id": 5629588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7328de76fe9e6676ef43c69753fd46a1?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/5629588/stefan"}, "edited": false, "score": 0, "creation_date": 1578418038, "post_id": 37645622, "comment_id": 105428715, "body": "I am using this code and it does work pretty well. However, very sporadic it crashes in MFFontFileEnumerator::MoveNext(). The line SafeRelease(&amp;currentFile_); throws the exception 0xC0000005: Access violation. I can&#39;t figure out what causes this, maybe you have an idea?"}, {"owner": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "reply_to_user": {"reputation": 460, "user_id": 5629588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7328de76fe9e6676ef43c69753fd46a1?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/5629588/stefan"}, "edited": false, "score": 0, "creation_date": 1578510561, "post_id": 37645622, "comment_id": 105466053, "body": "@Stefan I fear I cannot really help you there. I can hardly remember anymore what my code is doing, and on top of that, I copied large parts of it (in particular the line where the exception is thrown) from <a href=\"https://docs.microsoft.com/de-de/previous-versions/technical-content/dd941728(v=vs.85)?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">here</a>. The only thing I can tell you is that SafeRelease is actually defined in Common.h - if you didn&#39;t already notice yourself. If you remove the inline keyword, you might get more details... even though I can&#39;t imagine that will get you very far - sorry."}], "tags": [], "owner": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "is_accepted": false, "score": 5, "last_activity_date": 1578510699, "last_edit_date": 1578510699, "creation_date": 1465153025, "answer_id": 37645622, "question_id": 37572961, "link": "https://stackoverflow.com/questions/37572961/c-directwrite-load-font-from-file-at-runtime/37645622#37645622", "title": "C++ - DirectWrite: Load font from file at runtime", "body": "<p>If anyone is interested in the code which finally worked:<br>\nAdd <code>Common.h</code>, <code>FontLoader.h</code> and <code>FontLoader.cpp</code> to your project (code is given below) and add the following lines to your application:</p>\n\n<pre><code>#include \"FontLoader.h\"\n// ...\nIDWriteFactory* pDWriteFactory;\nIDWriteFontCollection *fCollection;\nIDWriteTextFormat* pTextFormat;\n// ...\nMFFontContext fContext(pDWriteFactory);\nstd::vector&lt;std::wstring&gt; filePaths; // vector containing ABSOLUTE file paths of the font files which are to be added to the collection\nstd::wstring fontFileFilePath = L\"C:\\\\xyz\\\\abc.ttf\";\nfilePaths.push_back(fontFileFilePath);\nHRESULT hr = fContext.CreateFontCollection(filePaths, &amp;fCollection); // create custom font collection\nhr = pDWriteFactory-&gt;CreateTextFormat(\n            L\"Font Family\",    // Font family name\n            fCollection,\n            DWRITE_FONT_WEIGHT_REGULAR,\n            DWRITE_FONT_STYLE_NORMAL,\n            DWRITE_FONT_STRETCH_NORMAL,\n            16.0f,\n            L\"en-us\",\n            &amp;pTextFormat       // IDWriteTextFormat object\n        );\n</code></pre>\n\n<h1>FontLoader.h</h1>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include \"Common.h\"\n\ntypedef std::vector&lt;std::wstring&gt; MFCollection;\n\nclass MFFontCollectionLoader : public IDWriteFontCollectionLoader\n{\npublic:\n    MFFontCollectionLoader() : refCount_(0)\n    {\n    }\n\n    // IUnknown methods\n    virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID iid, void** ppvObject);\n    virtual ULONG STDMETHODCALLTYPE AddRef();\n    virtual ULONG STDMETHODCALLTYPE Release();\n\n    // IDWriteFontCollectionLoader methods\n    virtual HRESULT STDMETHODCALLTYPE CreateEnumeratorFromKey(\n        IDWriteFactory* factory,\n        void const* collectionKey,                      // [collectionKeySize] in bytes\n        UINT32 collectionKeySize,\n        OUT IDWriteFontFileEnumerator** fontFileEnumerator\n    );\n\n    // Gets the singleton loader instance.\n    static IDWriteFontCollectionLoader* GetLoader()\n    {\n        return instance_;\n    }\n\n    static bool IsLoaderInitialized()\n    {\n        return instance_ != NULL;\n    }\n\nprivate:\n    ULONG refCount_;\n\n    static IDWriteFontCollectionLoader* instance_;\n};\n\nclass MFFontFileEnumerator : public IDWriteFontFileEnumerator\n{\npublic:\n    MFFontFileEnumerator(\n        IDWriteFactory* factory\n    );\n\n    HRESULT Initialize(\n        UINT const* collectionKey,    // [resourceCount]\n        UINT32 keySize\n    );\n\n    ~MFFontFileEnumerator()\n    {\n        SafeRelease(&amp;currentFile_);\n        SafeRelease(&amp;factory_);\n    }\n\n    // IUnknown methods\n    virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID iid, void** ppvObject);\n    virtual ULONG STDMETHODCALLTYPE AddRef();\n    virtual ULONG STDMETHODCALLTYPE Release();\n\n    // IDWriteFontFileEnumerator methods\n    virtual HRESULT STDMETHODCALLTYPE MoveNext(OUT BOOL* hasCurrentFile);\n    virtual HRESULT STDMETHODCALLTYPE GetCurrentFontFile(OUT IDWriteFontFile** fontFile);\n\nprivate:\n    ULONG refCount_;\n\n    IDWriteFactory* factory_;\n    IDWriteFontFile* currentFile_;\n    std::vector&lt;std::wstring&gt; filePaths_;\n    size_t nextIndex_;\n};\n\nclass MFFontContext\n{\npublic:\n    MFFontContext(IDWriteFactory *pFactory);\n    ~MFFontContext();\n\n    HRESULT Initialize();\n\n    HRESULT CreateFontCollection(\n        MFCollection &amp;newCollection,\n        OUT IDWriteFontCollection** result\n    );\n\nprivate:\n    // Not copyable or assignable.\n    MFFontContext(MFFontContext const&amp;);\n    void operator=(MFFontContext const&amp;);\n\n    HRESULT InitializeInternal();\n    IDWriteFactory *g_dwriteFactory;\n    static std::vector&lt;unsigned int&gt; cKeys;\n\n    // Error code from Initialize().\n    HRESULT hr_;\n};\n\nclass MFFontGlobals\n{\npublic:\n    MFFontGlobals() {}\n    static unsigned int push(MFCollection &amp;addCollection)\n    {\n        unsigned int ret = fontCollections.size();\n        fontCollections.push_back(addCollection);\n        return ret;\n    }\n    static std::vector&lt;MFCollection&gt;&amp; collections()\n    {\n        return fontCollections;\n    }\nprivate:\n    static std::vector&lt;MFCollection&gt; fontCollections;\n};\n</code></pre>\n\n<h1>FontLoader.cpp</h1>\n\n<pre><code>#include \"FontLoader.h\"\n\nIDWriteFontCollectionLoader* MFFontCollectionLoader::instance_(\n    new(std::nothrow) MFFontCollectionLoader()\n);\n\nHRESULT STDMETHODCALLTYPE MFFontCollectionLoader::QueryInterface(REFIID iid, void** ppvObject)\n{\n    if (iid == IID_IUnknown || iid == __uuidof(IDWriteFontCollectionLoader))\n    {\n        *ppvObject = this;\n        AddRef();\n        return S_OK;\n    }\n    else\n    {\n        *ppvObject = NULL;\n        return E_NOINTERFACE;\n    }\n}\n\nULONG STDMETHODCALLTYPE MFFontCollectionLoader::AddRef()\n{\n    return InterlockedIncrement(&amp;refCount_);\n}\n\nULONG STDMETHODCALLTYPE MFFontCollectionLoader::Release()\n{\n    ULONG newCount = InterlockedDecrement(&amp;refCount_);\n    if (newCount == 0)\n        delete this;\n\n    return newCount;\n}\n\nHRESULT STDMETHODCALLTYPE MFFontCollectionLoader::CreateEnumeratorFromKey(\n    IDWriteFactory* factory,\n    void const* collectionKey,                      // [collectionKeySize] in bytes\n    UINT32 collectionKeySize,\n    OUT IDWriteFontFileEnumerator** fontFileEnumerator\n)\n{\n    *fontFileEnumerator = NULL;\n\n    HRESULT hr = S_OK;\n\n    if (collectionKeySize % sizeof(UINT) != 0)\n        return E_INVALIDARG;\n\n    MFFontFileEnumerator* enumerator = new(std::nothrow) MFFontFileEnumerator(\n        factory\n    );\n    if (enumerator == NULL)\n        return E_OUTOFMEMORY;\n\n    UINT const* mfCollectionKey = static_cast&lt;UINT const*&gt;(collectionKey);\n    UINT32 const mfKeySize = collectionKeySize;\n\n    hr = enumerator-&gt;Initialize(\n        mfCollectionKey,\n        mfKeySize\n    );\n\n    if (FAILED(hr))\n    {\n        delete enumerator;\n        return hr;\n    }\n\n    *fontFileEnumerator = SafeAcquire(enumerator);\n\n    return hr;\n}\n\n// ------------------------------ MFFontFileEnumerator ----------------------------------------------------------\n\nMFFontFileEnumerator::MFFontFileEnumerator(\n    IDWriteFactory* factory\n) :\n    refCount_(0),\n    factory_(SafeAcquire(factory)),\n    currentFile_(),\n    nextIndex_(0)\n{\n}\n\nHRESULT MFFontFileEnumerator::Initialize(\n    UINT const* collectionKey,    // [resourceCount]\n    UINT32 keySize\n)\n{\n    try\n    {\n        // dereference collectionKey in order to get index of collection in MFFontGlobals::fontCollections vector\n        UINT cPos = *collectionKey;\n        for (MFCollection::iterator it = MFFontGlobals::collections()[cPos].begin(); it != MFFontGlobals::collections()[cPos].end(); ++it)\n        {\n            filePaths_.push_back(it-&gt;c_str());\n        }\n    }\n    catch (...)\n    {\n        return ExceptionToHResult();\n    }\n    return S_OK;\n}\n\nHRESULT STDMETHODCALLTYPE MFFontFileEnumerator::QueryInterface(REFIID iid, void** ppvObject)\n{\n    if (iid == IID_IUnknown || iid == __uuidof(IDWriteFontFileEnumerator))\n    {\n        *ppvObject = this;\n        AddRef();\n        return S_OK;\n    }\n    else\n    {\n        *ppvObject = NULL;\n        return E_NOINTERFACE;\n    }\n}\n\nULONG STDMETHODCALLTYPE MFFontFileEnumerator::AddRef()\n{\n    return InterlockedIncrement(&amp;refCount_);\n}\n\nULONG STDMETHODCALLTYPE MFFontFileEnumerator::Release()\n{\n    ULONG newCount = InterlockedDecrement(&amp;refCount_);\n    if (newCount == 0)\n        delete this;\n\n    return newCount;\n}\n\nHRESULT STDMETHODCALLTYPE MFFontFileEnumerator::MoveNext(OUT BOOL* hasCurrentFile)\n{\n    HRESULT hr = S_OK;\n\n    *hasCurrentFile = FALSE;\n    SafeRelease(&amp;currentFile_);\n\n    if (nextIndex_ &lt; filePaths_.size())\n    {\n        hr = factory_-&gt;CreateFontFileReference(\n            filePaths_[nextIndex_].c_str(),\n            NULL,\n            &amp;currentFile_\n        );\n\n        if (SUCCEEDED(hr))\n        {\n            *hasCurrentFile = TRUE;\n\n            ++nextIndex_;\n        }\n    }\n\n    return hr;\n}\n\nHRESULT STDMETHODCALLTYPE MFFontFileEnumerator::GetCurrentFontFile(OUT IDWriteFontFile** fontFile)\n{\n    *fontFile = SafeAcquire(currentFile_);\n\n    return (currentFile_ != NULL) ? S_OK : E_FAIL;\n}\n\n// ---------------------------------------- MFFontContext ---------------------------------------------------------\n\nMFFontContext::MFFontContext(IDWriteFactory *pFactory) : hr_(S_FALSE), g_dwriteFactory(pFactory)\n{\n}\n\nMFFontContext::~MFFontContext()\n{\n    g_dwriteFactory-&gt;UnregisterFontCollectionLoader(MFFontCollectionLoader::GetLoader());\n}\n\nHRESULT MFFontContext::Initialize()\n{\n    if (hr_ == S_FALSE)\n    {\n        hr_ = InitializeInternal();\n    }\n    return hr_;\n}\n\nHRESULT MFFontContext::InitializeInternal()\n{\n    HRESULT hr = S_OK;\n\n    if (!MFFontCollectionLoader::IsLoaderInitialized())\n    {\n        return E_FAIL;\n    }\n\n    // Register our custom loader with the factory object.\n    hr = g_dwriteFactory-&gt;RegisterFontCollectionLoader(MFFontCollectionLoader::GetLoader());\n\n    return hr;\n}\n\nHRESULT MFFontContext::CreateFontCollection(\n    MFCollection &amp;newCollection,\n    OUT IDWriteFontCollection** result\n)\n{\n    *result = NULL;\n\n    HRESULT hr = S_OK;\n\n    // save new collection in MFFontGlobals::fontCollections vector\n    UINT collectionKey = MFFontGlobals::push(newCollection);\n    cKeys.push_back(collectionKey);\n    const void *fontCollectionKey = &amp;cKeys.back();\n    UINT32 keySize = sizeof(collectionKey);\n\n    hr = Initialize();\n    if (FAILED(hr))\n        return hr;\n\n    hr = g_dwriteFactory-&gt;CreateCustomFontCollection(\n        MFFontCollectionLoader::GetLoader(),\n        fontCollectionKey,\n        keySize,\n        result\n    );\n\n    return hr;\n}\n\nstd::vector&lt;unsigned int&gt; MFFontContext::cKeys = std::vector&lt;unsigned int&gt;(0);\n\n// ----------------------------------- MFFontGlobals ---------------------------------------------------------\n\nstd::vector&lt;MFCollection&gt; MFFontGlobals::fontCollections = std::vector&lt;MFCollection&gt;(0);\n</code></pre>\n\n<h1>Common.h</h1>\n\n<pre><code>// THIS CODE AND INFORMATION IS PROVIDED \"AS IS\" WITHOUT WARRANTY OF\n// ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n// THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A\n// PARTICULAR PURPOSE.\n//\n// Copyright (c) Microsoft Corporation. All rights reserved\n//\n//----------------------------------------------------------------------------\n\n#pragma once\n\n// The following macros define the minimum required platform.  The minimum required platform\n// is the earliest version of Windows, Internet Explorer etc. that has the necessary features to run \n// your application.  The macros work by enabling all features available on platform versions up to and \n// including the version specified.\n\n// Modify the following defines if you have to target a platform prior to the ones specified below.\n// Refer to MSDN for the latest info on corresponding values for different platforms.\n\n#ifndef WINVER                  // Minimum platform is Windows 7\n#define WINVER 0x0601\n#endif\n\n#ifndef _WIN32_WINNT            // Minimum platform is Windows 7\n#define _WIN32_WINNT 0x0601\n#endif\n\n#ifndef _WIN32_WINDOWS          // Minimum platform is Windows 7\n#define _WIN32_WINDOWS 0x0601\n#endif\n\n#define WIN32_LEAN_AND_MEAN\n#define NOMINMAX\n\n#ifndef UNICODE\n#define UNICODE\n#endif\n\n// Windows header files\n#include &lt;windows.h&gt;\n#include &lt;dwrite.h&gt;\n#include &lt;d2d1.h&gt;\n\n// C RunTime Header Files\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\n// Ignore unreferenced parameters, since they are very common\n// when implementing callbacks.\n#pragma warning(disable : 4100)\n\n\n////////////////////////////////////////\n// COM inheritance helpers.\n\n// Releases a COM object and nullifies pointer.\ntemplate &lt;typename InterfaceType&gt;\ninline void SafeRelease(InterfaceType** currentObject)\n{\n    if (*currentObject != NULL)\n    {\n        (*currentObject)-&gt;Release();\n        *currentObject = NULL;\n    }\n}\n\n\n// Acquires an additional reference, if non-null.\ntemplate &lt;typename InterfaceType&gt;\ninline InterfaceType* SafeAcquire(InterfaceType* newObject)\n{\n    if (newObject != NULL)\n        newObject-&gt;AddRef();\n\n    return newObject;\n}\n\n\n// Sets a new COM object, releasing the old one.\ntemplate &lt;typename InterfaceType&gt;\ninline void SafeSet(InterfaceType** currentObject, InterfaceType* newObject)\n{\n    SafeAcquire(newObject);\n    SafeRelease(&amp;currentObject);\n    currentObject = newObject;\n}\n\n\n// Maps exceptions to equivalent HRESULTs,\ninline HRESULT ExceptionToHResult() throw()\n{\n    try\n    {\n        throw;  // Rethrow previous exception.\n    }\n    catch (std::bad_alloc&amp;)\n    {\n        return E_OUTOFMEMORY;\n    }\n    catch (...)\n    {\n        return E_FAIL;\n    }\n}\n</code></pre>\n\n<p>The code is certainly not perfect but it worked for me.<br>\nIf you have any questions concerning this code just leave a comment (even though I probably won't be able to give a satisfying answer anymore). Note that I copied large parts of the code from <a href=\"https://docs.microsoft.com/de-de/previous-versions/technical-content/dd941710(v=vs.85)?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 386, "user_id": 5354506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Mw38.png?s=128&g=1", "display_name": "M_F", "link": "https://stackoverflow.com/users/5354506/m-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4164, "favorite_count": 2, "accepted_answer_id": 37591337, "answer_count": 2, "score": 3, "last_activity_date": 1578510699, "creation_date": 1464794941, "last_edit_date": 1495540906, "question_id": 37572961, "link": "https://stackoverflow.com/questions/37572961/c-directwrite-load-font-from-file-at-runtime", "title": "C++ - DirectWrite: Load font from file at runtime", "body": "<p>I'm trying to load a font from a file at runtime and display it with DirectWrite. The following code should initialize a IDWriteTextFormat object with that font:</p>\n\n<pre><code>hr = pDWriteFactory-&gt;CreateTextFormat(\n            L\"Font Family\",    // Font family name\n            NULL,              // Font collection (NULL sets it to use the system font collection)\n                               // Somehow, a custom font collection should be used here, but I don't know how to do that\n            DWRITE_FONT_WEIGHT_REGULAR,\n            DWRITE_FONT_STYLE_NORMAL,\n            DWRITE_FONT_STRETCH_NORMAL,\n            16.0f,\n            L\"en-us\",\n            &amp;pTextFormat       // IDWriteTextFormat object\n        );\n</code></pre>\n\n<p>It works perfectly with system fonts but I don't know how to load a custom font file. I would appreciate any examples on how to achieve that.</p>\n\n<p>What I tried so far:<br>\n&bull; I read <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee264312%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">this article</a> and <a href=\"https://stackoverflow.com/questions/21814876/trying-to-use-a-custom-font-file-using-directx-what-is-the-collection-key\">this question on Stackoverflow</a> but I don't see where one should pass the file path of the font file (therefore, I completely failed to implement any of the code provided on those two pages)<br>\n&bull; I also read <a href=\"http://www.codeproject.com/Articles/42041/How-to-Use-a-Font-Without-Installing-it\" rel=\"nofollow noreferrer\">this article</a> but if I'm right, it has nothing to do with DirectWrite (?) (I tried to implement the AddFontResourceEx-method, but to no avail)<br>\n&bull; Finally, the answer to <a href=\"https://stackoverflow.com/questions/31112857/use-specified-font-with-directx-11\">this question</a> suggested using ResourceFontContext::CreateFontCollection could solve the problem but after reading <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/dd941710(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this page</a> (it's in German but the screenshot is in English) I believe that it can only be used with fonts embedded as resources (which is not an option in my case)</p>\n"}, {"tags": ["c#", "c++", "shared-memory"], "answers": [{"tags": [], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "is_accepted": false, "score": 7, "last_activity_date": 1464796750, "creation_date": 1464796750, "answer_id": 37573593, "question_id": 37572938, "link": "https://stackoverflow.com/questions/37572938/stream-data-from-c-to-c-over-shared-memory/37573593#37573593", "title": "stream data from c++ to c# over shared memory", "body": "<p>..Actually this is working, I had the update for the variable in the wrong place. I have edited and will leave the code for others. </p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3566, "favorite_count": 6, "answer_count": 1, "score": 11, "last_activity_date": 1464796807, "creation_date": 1464794886, "last_edit_date": 1464796807, "question_id": 37572938, "link": "https://stackoverflow.com/questions/37572938/stream-data-from-c-to-c-over-shared-memory", "title": "stream data from c++ to c# over shared memory", "body": "<p>I am attempting to stream data from a c++ application to a C# application using shared memory. Based on example I found, I have:</p>\n\n<p>c++ (sending)</p>\n\n<pre><code>    struct Pair {\n    int length; \n    float data[3];\n};\n\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct Pair* p;\nHANDLE handle;\n\nfloat dataSend[3]{ 22,33,44 };\n\nbool startShare()\n{\n    try\n    {\n        handle = CreateFileMappingW(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(Pair), L\"DataSend\");\n        p = (struct Pair*) MapViewOfFile(handle, FILE_MAP_READ | FILE_MAP_WRITE, 0, 0, sizeof(Pair));\n        return true;\n    }\n    catch(...)\n    {\n        return false;\n    }\n\n}\n\n\nint main()\n{\n\n    if (startShare() == true)\n    {\n\n            while (true)\n            {\n                if (p != 0) {\n\n                //dataSend[0] += 1;  // here the value doesn't refresh\n                for (int h = 0; h &lt; 3; h++)\n                {\n                    p-&gt;data[h] = dataSend[h];\n                }\n             //dataSend[0] += 1;  // here it does\n            }\n\n\n        else\n            puts(\"create shared memory error\");\n    }\n    }\n    if (handle != NULL)\n        CloseHandle(handle);\n    return 0;\n}\n</code></pre>\n\n<p>C# (receiving)</p>\n\n<pre><code>namespace sharedMemoryGET\n{\n    class Program\n    {\n        public static float[] data = new float[3];\n        public static MemoryMappedFile mmf;\n        public static MemoryMappedViewStream mmfvs;\n\n        static public bool MemOpen()\n        {\n            try {\n                mmf = MemoryMappedFile.OpenExisting(\"DataSend\");\n                mmfvs = mmf.CreateViewStream();\n                return true;\n            }\n            catch\n            {\n                return false;\n            }\n\n        }\n\n       public static void Main(string[] args)\n        {\n            while (true)\n            {\n                if (MemOpen())\n            {\n\n                    byte[] blen = new byte[4];\n                    mmfvs.Read(blen, 0, 4);\n                    int len = blen[0] + blen[1] * 256 + blen[2] * 65536 + blen[2] * 16777216;\n\n                    byte[] bPosition = new byte[12];\n                    mmfvs.Read(bPosition, 0, 12);\n                    Buffer.BlockCopy(bPosition, 0, data, 0, bPosition.Length);\n                    Console.WriteLine(data[0]);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The c++ side never updates the variable, making me think i have missed something in my if-loop. Additionally, is a always-running loop the best way to go here? Is there a way to 'request' the data somehow from the C# side, to make this a more efficient system? Thank you.</p>\n"}, {"tags": ["java", "c++", "java-native-interface", "wrapper", "swig"], "comments": [{"owner": {"reputation": 4420, "user_id": 4851751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tOGRH.jpg?s=128&g=1", "display_name": "Doron Yakovlev-Golani", "link": "https://stackoverflow.com/users/4851751/doron-yakovlev-golani"}, "edited": false, "score": 0, "creation_date": 1464795567, "post_id": 37572915, "comment_id": 62633601, "body": "Can you share your SWIG definition as well?"}, {"owner": {"reputation": 2119, "user_id": 3230626, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fe50022a8a66d837e8b23f207704d9e7?s=128&d=identicon&r=PG", "display_name": "nikk", "link": "https://stackoverflow.com/users/3230626/nikk"}, "reply_to_user": {"reputation": 4420, "user_id": 4851751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tOGRH.jpg?s=128&g=1", "display_name": "Doron Yakovlev-Golani", "link": "https://stackoverflow.com/users/4851751/doron-yakovlev-golani"}, "edited": false, "score": 0, "creation_date": 1464797074, "post_id": 37572915, "comment_id": 62634574, "body": "@DoronYakovlev-Golani I just did."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1464852876, "post_id": 37572915, "comment_id": 62656453, "body": "Looks like whoever built libmath.so forgot to link it against libltdl."}, {"owner": {"reputation": 2591, "user_id": 1366016, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6ZjQr.jpg?s=128&g=1", "display_name": "Wheezil", "link": "https://stackoverflow.com/users/1366016/wheezil"}, "edited": false, "score": 0, "creation_date": 1465242281, "post_id": 37572915, "comment_id": 62809615, "body": "Does adding &#39;load_library(&quot;libltdl.so&quot;);&#39; help?"}], "owner": {"reputation": 2119, "user_id": 3230626, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fe50022a8a66d837e8b23f207704d9e7?s=128&d=identicon&r=PG", "display_name": "nikk", "link": "https://stackoverflow.com/users/3230626/nikk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464798063, "creation_date": 1464794803, "last_edit_date": 1464798063, "question_id": 37572915, "link": "https://stackoverflow.com/questions/37572915/calling-funtion-in-a-c-shared-library-from-java", "title": "Calling funtion in a C++ Shared Library from Java", "body": "<p>I have implemented a Java code that calls a C++ shared library named math (libmath.so). However, when I try to call a function that is implemented by the library, I get the an error: </p>\n\n<blockquote>\n  <p>libmath.so: undefined symbol: lt_dlinit</p>\n</blockquote>\n\n<p>Any guidance on this? </p>\n\n<p>The Java code:</p>\n\n<pre><code>public class runme \n{\n  static {\n    try {\n        System.loadLibrary(\"math\");\n    } catch (UnsatisfiedLinkError e) {\n      System.err.println(\"Native code library failed to load\\n\" + e);\n      System.exit(1);\n    }\n  }\n\n public static void main(String argv[]) \n {\n    System.out.println( \"Hello and welcome to test_program.\" );\n\n   //assuming that I have NumberVectr filled correctly. \n   NumbersVectr numbers = new NumberVectr(10);\n   for (int i=0; i&lt; 10; i++)\n   {\n      numbers.add((Number)i);  \n   }\n\n    //Now, the problem I am having is in invoking the library\n    //MathematicsWrapper is a Java wrapper class that wraps the original Mathematics class implemented in C++. \n    //compute is an arbitrary function implemented in the original C++ class, which itself loads another native library once instantiated.\n    MathematicsWrapper myMaths = new MathematicsWrapper();\n        myMaths.compute(numbers); \n }\n} \n</code></pre>\n\n<p>The original C++  Mathematics class looks like this:</p>\n\n<pre><code>class MathematicsWrapper \n{\npublic:\n\n  MathematicsWrapper ()\n  {\n    load_library(\"math_core.so\");\n  };\n\n  ~MathematicsWrapper (){\n    unload_library();\n  };\n\n  int compute(std::vector&lt;int&gt; &amp;numbers);\n</code></pre>\n\n<p>I have the following output:</p>\n\n<blockquote>\n  <p>Hello and welcome to test_program.</p>\n  \n  <p>/usr/lib/jvm/java-7-openjdk-amd64/bin/java: symbol lookup error:\n  /home/kevin/test_prgram/src/libmath.so:\n  undefined symbol: lt_dlinit</p>\n</blockquote>\n\n<p>The MathematicsWrapper is defined as:</p>\n\n<pre><code>/* ----------------------------------------------------------------------------\n * This file was automatically generated by SWIG (http://www.swig.org).\n * Version 3.0.9\n *\n * Do not make changes to this file unless you know what you are doing--modify\n * the SWIG interface file instead.\n * ----------------------------------------------------------------------------- */\n\npublic class MathematicsWrapper {\n  private transient long swigCPtr;\n  protected transient boolean swigCMemOwn;\n\n  protected MathematicsWrapper(long cPtr, boolean cMemoryOwn) {\n    swigCMemOwn = cMemoryOwn;\n    swigCPtr = cPtr;\n  }\n\n  protected static long getCPtr(MathematicsWrapper obj) {\n    return (obj == null) ? 0 : obj.swigCPtr;\n  }\n\n  protected void finalize() {\n    delete();\n  }\n\n  public synchronized void delete() {\n    if (swigCPtr != 0) {\n      if (swigCMemOwn) {\n        swigCMemOwn = false;\n        mathsJNI.delete_MathematicsWrapper(swigCPtr);\n      }\n      swigCPtr = 0;\n    }\n  }\n\n  public MathematicsWrapper() {\n    this(mathsJNI.new_MathematicsWrapper(), true);\n  }\n\n  public int compute() {\n    return mathsJNI.MathematicsWrapper_compute(swigCPtr, this, NumbersVectr.getCPtr(numbers), numbers);\n  }\n}\n</code></pre>\n\n<p>Swig definition:</p>\n\n<pre><code>%module math_module   \n%{\n    mathematics.h   //contains C++ header for MathematicsWrapper class\n                    //so that Java class for MathematicsWrapper can be genereated\n%}\n\n\n%include \"std_vector.i\"\n%template(NumbersVectr) std::vector&lt;int&gt;;\n</code></pre>\n"}, {"tags": ["c++", "tree", "project", "avl-tree"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1464794515, "post_id": 37572672, "comment_id": 62632856, "body": "The obvious reason is that <code>temp</code> is an invalid pointer value.  You should use the debugger that comes with your compiler to determine why it ends up that way."}, {"owner": {"reputation": 33, "user_id": 5234875, "user_type": "registered", "profile_image": "https://graph.facebook.com/981587765194928/picture?type=large", "display_name": "\u0391\u03bb\u03ad\u03be\u03b1\u03bd\u03b4\u03c1\u03bf\u03c2 \u03a7\u03bf\u03bd\u03b4\u03c1\u03bf\u03b3\u03b9\u03ac\u03bd\u03bd\u03b7\u03c2", "link": "https://stackoverflow.com/users/5234875/%ce%91%ce%bb%ce%ad%ce%be%ce%b1%ce%bd%ce%b4%cf%81%ce%bf%cf%82-%ce%a7%ce%bf%ce%bd%ce%b4%cf%81%ce%bf%ce%b3%ce%b9%ce%ac%ce%bd%ce%bd%ce%b7%cf%82"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464794592, "post_id": 37572672, "comment_id": 62632919, "body": "Well I tried using some prints to solve this and everything seems perfectly fine with temp"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464794750, "post_id": 37572672, "comment_id": 62633044, "body": "Use the debugger, not &quot;print&quot; statements -- the running of the program is showing that <code>temp</code> is not valid.  Unless that pointer is NULL or a &quot;magic&quot; bad value, there is no way you can tell if a pointer is valid or not by just looking at the value.  A &quot;bad&quot; pointer value can look just as valid as a &quot;good&quot; value."}, {"owner": {"reputation": 33, "user_id": 5234875, "user_type": "registered", "profile_image": "https://graph.facebook.com/981587765194928/picture?type=large", "display_name": "\u0391\u03bb\u03ad\u03be\u03b1\u03bd\u03b4\u03c1\u03bf\u03c2 \u03a7\u03bf\u03bd\u03b4\u03c1\u03bf\u03b3\u03b9\u03ac\u03bd\u03bd\u03b7\u03c2", "link": "https://stackoverflow.com/users/5234875/%ce%91%ce%bb%ce%ad%ce%be%ce%b1%ce%bd%ce%b4%cf%81%ce%bf%cf%82-%ce%a7%ce%bf%ce%bd%ce%b4%cf%81%ce%bf%ce%b3%ce%b9%ce%ac%ce%bd%ce%bd%ce%b7%cf%82"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464795064, "post_id": 37572672, "comment_id": 62633269, "body": "Indeed, temp-&gt;data is an invalid pointer, but why?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464795305, "post_id": 37572672, "comment_id": 62633436, "body": "<i>But why?</i> -- You have a bug in your program.  You&#39;re asking us to debug the program for you -- learning how to debug your own programs is part and parcel of learning how to write programs.  If you wrote the program, you had a plan in mind before you wrote it.  So use the debugger to see where your program goes against that plan by single stepping through your program and seeing where the flow goes off course, or a variable isn&#39;t set correctly, etc."}, {"owner": {"reputation": 33, "user_id": 5234875, "user_type": "registered", "profile_image": "https://graph.facebook.com/981587765194928/picture?type=large", "display_name": "\u0391\u03bb\u03ad\u03be\u03b1\u03bd\u03b4\u03c1\u03bf\u03c2 \u03a7\u03bf\u03bd\u03b4\u03c1\u03bf\u03b3\u03b9\u03ac\u03bd\u03bd\u03b7\u03c2", "link": "https://stackoverflow.com/users/5234875/%ce%91%ce%bb%ce%ad%ce%be%ce%b1%ce%bd%ce%b4%cf%81%ce%bf%cf%82-%ce%a7%ce%bf%ce%bd%ce%b4%cf%81%ce%bf%ce%b3%ce%b9%ce%ac%ce%bd%ce%bd%ce%b7%cf%82"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464795677, "post_id": 37572672, "comment_id": 62633668, "body": "I mean temp-&gt;linked-&gt;data is fine but when I pass temp-&gt;linked as temp in a function and call temp-&gt;data I get a seg fault."}, {"owner": {"reputation": 33, "user_id": 5234875, "user_type": "registered", "profile_image": "https://graph.facebook.com/981587765194928/picture?type=large", "display_name": "\u0391\u03bb\u03ad\u03be\u03b1\u03bd\u03b4\u03c1\u03bf\u03c2 \u03a7\u03bf\u03bd\u03b4\u03c1\u03bf\u03b3\u03b9\u03ac\u03bd\u03bd\u03b7\u03c2", "link": "https://stackoverflow.com/users/5234875/%ce%91%ce%bb%ce%ad%ce%be%ce%b1%ce%bd%ce%b4%cf%81%ce%bf%cf%82-%ce%a7%ce%bf%ce%bd%ce%b4%cf%81%ce%bf%ce%b3%ce%b9%ce%ac%ce%bd%ce%bd%ce%b7%cf%82"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464795694, "post_id": 37572672, "comment_id": 62633683, "body": "I&#39;m new in c++ and this doesn&#39;t make sense to me"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464795960, "post_id": 37572672, "comment_id": 62633867, "body": "Accessing an invalid pointer is undefined behavior.  When you call a function with <code>node *</code> as a parameter, you are passing by value, thus a temporary is created.  The temporary that is created is revealing that <code>temp-&gt;linked</code> is invalid.  You also did not post your test case in a simple <code>main</code> program."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5234875, "user_type": "registered", "profile_image": "https://graph.facebook.com/981587765194928/picture?type=large", "display_name": "\u0391\u03bb\u03ad\u03be\u03b1\u03bd\u03b4\u03c1\u03bf\u03c2 \u03a7\u03bf\u03bd\u03b4\u03c1\u03bf\u03b3\u03b9\u03ac\u03bd\u03bd\u03b7\u03c2", "link": "https://stackoverflow.com/users/5234875/%ce%91%ce%bb%ce%ad%ce%be%ce%b1%ce%bd%ce%b4%cf%81%ce%bf%cf%82-%ce%a7%ce%bf%ce%bd%ce%b4%cf%81%ce%bf%ce%b3%ce%b9%ce%ac%ce%bd%ce%bd%ce%b7%cf%82"}, "edited": false, "score": 0, "creation_date": 1464796043, "post_id": 37573121, "comment_id": 62633917, "body": "I also tried this but the general logic is wrong. I want to create a big AVL tree and then create a new one for each node in it. This code doesn&#39;t do what I want"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1464797730, "post_id": 37573121, "comment_id": 62634956, "body": "The general logic may be wrong, but did the answer given stop the segmentation fault?  If it did, then the answer should be upvoted.  Anything else, start another question and proivide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> when asking (and also, learn to use the debugger)."}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 1, "last_activity_date": 1464795461, "creation_date": 1464795461, "answer_id": 37573121, "question_id": 37572672, "link": "https://stackoverflow.com/questions/37572672/segmentation-fault-on-avl-tree-children-project/37573121#37573121", "title": "Segmentation Fault on AVL Tree Children project", "body": "<p>I think the link2 function is called with a temp->right or temp->left with a NULL value. Then segfaults immediatelly at recursion level 1.</p>\n\n<p>You can try something like that maybe ? </p>\n\n<pre><code>node *tree::link2(int b,node *temp)\n{\n    cout &lt;&lt; b;\n    if (temp == NULL)\n    {\n       temp = new node;\n       temp-&gt;left = NULL;\n       temp-&gt;right = NULL;\n       temp-&gt;data = b;\n       return temp;\n    }\n\n    if (b &gt; temp-&gt;data)\n    {\n        temp-&gt;linked = link2(b,temp-&gt;right);\n    }\n    else if (b &lt; temp-&gt;data)\n    {\n        temp-&gt;linked = link2(b,temp-&gt;left);\n    }\n    return temp-&gt;linked;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1464798584, "creation_date": 1464798584, "answer_id": 37574164, "question_id": 37572672, "link": "https://stackoverflow.com/questions/37572672/segmentation-fault-on-avl-tree-children-project/37574164#37574164", "title": "Segmentation Fault on AVL Tree Children project", "body": "<p>I don't know if this is the cause of your segmentation fault, but it's an error and I suspect it's related.</p>\n\n<p>To read \"input.txt\" you do</p>\n\n<pre><code>while(true)\n{\n    int a;\n    int b;\n    f &gt;&gt; a;\n    f &gt;&gt; b;\n    root = insert(root,a,b);\n    if (f.eof())\n    {\n        break;\n    }\n}\n</code></pre>\n\n<p>Wrong!</p>\n\n<p>Because <code>f.eof()</code> is <code>true</code> when you have read the last line of the file. So you try to read other values past the end, <code>f &gt;&gt; a;</code> and <code>f &gt;&gt; b;</code> give and error that you don't test and you do a second call <code>insert(root,a,b)</code> with the last values.</p>\n\n<p>I suggest you something like</p>\n\n<pre><code>int a, b;\nwhile ( f &gt;&gt; a &gt;&gt; b )\n   root = insert(root,a,b);\n</code></pre>\n\n<p>In this way, when you try to read past the end of the file, you get an error and exit from the <code>while</code> without call <code>insert()</code> one more time.</p>\n\n<p>Another point: the solution from Tezirg isn't what do you want but his observation is correct: your <code>link2()</code> is dangerous because you call recursively with <code>link2(b,temp-&gt;left);</code> and with <code>link2(b,temp-&gt;right);</code>, and if you don't check if <code>temp</code> is <code>NULL</code> or not... it's a wonderful way to generate a segmentation fault.</p>\n\n<p>p.s.: sorry for my bad English.</p>\n"}], "owner": {"reputation": 33, "user_id": 5234875, "user_type": "registered", "profile_image": "https://graph.facebook.com/981587765194928/picture?type=large", "display_name": "\u0391\u03bb\u03ad\u03be\u03b1\u03bd\u03b4\u03c1\u03bf\u03c2 \u03a7\u03bf\u03bd\u03b4\u03c1\u03bf\u03b3\u03b9\u03ac\u03bd\u03bd\u03b7\u03c2", "link": "https://stackoverflow.com/users/5234875/%ce%91%ce%bb%ce%ad%ce%be%ce%b1%ce%bd%ce%b4%cf%81%ce%bf%cf%82-%ce%a7%ce%bf%ce%bd%ce%b4%cf%81%ce%bf%ce%b3%ce%b9%ce%ac%ce%bd%ce%bd%ce%b7%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464798584, "creation_date": 1464794193, "question_id": 37572672, "link": "https://stackoverflow.com/questions/37572672/segmentation-fault-on-avl-tree-children-project", "title": "Segmentation Fault on AVL Tree Children project", "body": "<pre><code>#include \"tree.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint counter;\n\ntree::tree()\n{\n    root = NULL;\n}\n\n\nint tree::height(node *temp)\n{\n    int h = 0;\n    if (temp != NULL)\n    {\n        int l_height = height (temp-&gt;left);\n        int r_height = height (temp-&gt;right);\n        int max_height = max (l_height, r_height);\n        h = max_height + 1;\n    }\n    return h;\n}\n\n\n\nint tree::difference(node *temp)\n{\n    int l_height = height (temp-&gt;left);\n    int r_height = height (temp-&gt;right);\n    int sum= l_height - r_height;\n    return sum;\n}\n\nvoid tree::READ_DATA()\n{\n    ifstream f;\n    f.open(\"input.txt\", ios::in);\n    while(true)\n    {\n        int a;\n        int b;\n        f &gt;&gt; a;\n        f &gt;&gt; b;\n        root = insert(root,a,b);\n        if (f.eof())\n        {\n            break;\n        }\n    }\n    f.close();\n}\n\nnode *tree::insert(node *root,int x,int b)\n{\n    if (root == NULL)\n    {\n        root = new node;\n        root-&gt;data = x;\n        root-&gt;left = NULL;\n        root-&gt;right = NULL;\n        root-&gt;linked = NULL;\n        cout&lt;&lt;root-&gt;data&lt;&lt;endl;\n        root = link(b,root);\n        return root;\n    }\n    else if(x &lt; root-&gt;data)\n    {\n        root-&gt;left = insert(root-&gt;left,x,b);\n        root = balance(root);\n    }\n    else if(x &gt; root-&gt;data)\n    {\n        root-&gt;right = insert(root-&gt;right,x,b);\n        root = balance(root);\n    }\n    else if (x == root-&gt;data)\n    {\n        root = link(b,root);\n    }\n    return root;\n}\n\nvoid inorder(node *root)\n{\n    if (root==NULL)\n    {\n        return;\n    }\n    inorder(root-&gt;left);\n    ofstream k;\n    k.open(\"output.txt\",ios::app);\n    k&lt;&lt;root-&gt;data&lt;&lt;\" \";\n    while (true)\n    {\n        if (root-&gt;linked != NULL)\n        {\n            root = root-&gt;linked-&gt;left;\n        }\n        else\n        {\n            while (root-&gt;linked-&gt;right != NULL)\n            {\n                cout &lt;&lt; root-&gt;linked-&gt;data;\n                root = root-&gt;linked-&gt;right;\n            }\n            break;\n        }\n    }\n    cout &lt;&lt; endl;\n    k.close();\n    inorder(root-&gt;right);\n}\n\nvoid tree::WRITE_INDEX()\n{\n    inorder(root);\n}\n\n//left rotate\nnode *tree::l_rotation(node *parent)\n{\n    //cout &lt;&lt; \"tost\"&lt;&lt;endl;\n    node *temp;\n    temp = parent-&gt;left;\n    parent-&gt;left = temp-&gt;right;\n    temp-&gt;right = parent;\n    return temp;\n}\n\n//right rotate\nnode *tree::r_rotation(node *parent)\n{\n    //cout &lt;&lt; \"krepa\"&lt;&lt;endl;\n    node *temp;\n    temp = parent-&gt;right;\n    parent-&gt;right = temp-&gt;left;\n    temp-&gt;left = parent;\n    return temp;\n}\n\n//right-left rotate\nnode *tree::rl_rotation(node *parent)\n{\n    //cout &lt;&lt; \"rl\"&lt;&lt;endl;\n    node *temp;\n    temp = parent-&gt;right;\n    parent-&gt;right = l_rotation(temp);\n    return r_rotation(parent);\n}\n\n//left-right rotate\nnode *tree::lr_rotation(node *parent)\n{\n    //cout &lt;&lt; \"lr\"&lt;&lt;endl;\n    node *temp;\n    temp = parent-&gt;left;\n    parent-&gt;left = r_rotation(temp);\n    return l_rotation(parent);\n}\n\n//balancing the tree\nnode *tree::balance(node *temp)\n{\n    int diff = difference(temp);\n    if (diff &gt; 1)\n    {\n        if (difference(temp-&gt;left)&gt;0)\n            temp = l_rotation(temp);\n        else\n            temp = lr_rotation(temp);\n    }\n    else if (diff &lt; -1)\n    {\n        if (difference(temp-&gt;right) &gt; 0)\n            temp = rl_rotation(temp);\n        else\n            temp = r_rotation(temp);\n    }\n    return temp;\n}\n\nnode *tree::link(int b,node *temp)\n{\n    if (temp-&gt;linked == NULL)\n    {\n        temp-&gt;linked = new node;\n        temp-&gt;linked-&gt;left = NULL;\n        temp-&gt;linked-&gt;right = NULL;\n        temp-&gt;linked-&gt;data = b;\n        return temp;\n    }\n    else\n    {\n        cout &lt;&lt; \"tost\";\n        link2(b,temp-&gt;linked);\n    }\n}\n\nnode *tree::link2(int b,node *temp)\n{\n    cout &lt;&lt; b;\n    if (b &gt; temp-&gt;data)\n    {\n        link2(b,temp-&gt;right);\n    }\n    else if (b &lt; temp-&gt;data)\n    {\n        link2(b,temp-&gt;left);\n    }\n    else\n    {\n        temp = new node;\n        temp-&gt;left = NULL;\n        temp-&gt;right = NULL;\n        temp-&gt;data = b;\n        return temp;\n    }\n}\n</code></pre>\n\n<p>I have this function that is supposed to store information on an AVL tree.\nIn main I call READ_DATA and WRITE_INDEX\nWhen link2 executes I get a segmentation fault in \"if (b > temp->data)\" this statement\nAny help?</p>\n"}, {"tags": ["c++", "function-pointers"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1464794288, "post_id": 37572603, "comment_id": 62632687, "body": "The line <code>name_ascending = llistStudent::sort_name_ascending</code> fails to provide any type for <code>name_ascending</code>, hence the error."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1464794340, "post_id": 37572603, "comment_id": 62632723, "body": "What do you want to do by the wrong line <code>name_ascending = llistStudent::sort_name_ascending;</code>?"}, {"owner": {"reputation": 370, "user_id": 3468249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000729712115/picture?type=large", "display_name": "PeterO", "link": "https://stackoverflow.com/users/3468249/petero"}, "edited": false, "score": 0, "creation_date": 1464794514, "post_id": 37572603, "comment_id": 62632855, "body": "I assume you want name_ascending to be a function pointer?!  A function pointer to a member function can not be called without a pointer to an object of that class, except the function is static."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1464794764, "post_id": 37572603, "comment_id": 62633055, "body": "If you want to initialize <code>name_ascending</code> to <code>sort_name_ascending</code>, why do you initialize it to <code>&amp;llistStudent::method</code> on the previous line?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1464796974, "post_id": 37572603, "comment_id": 62634506, "body": "Where&#39;s the definition of <code>sort_GPA_ascending</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1464795190, "post_id": 37572756, "comment_id": 62633351, "body": "The answer will be more useful if you can suggest how to fix the problems."}, {"owner": {"reputation": 507, "user_id": 5959593, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/78d489b31ec60519733298259e8c1dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Minh Ngh\u0129a", "link": "https://stackoverflow.com/users/5959593/minh-ngh%c4%a9a"}, "edited": false, "score": 0, "creation_date": 1464838356, "post_id": 37572756, "comment_id": 62650860, "body": "thanks! but how to use it? how do I call the function I passed into sort_list()?"}], "tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": true, "score": 6, "last_activity_date": 1464795622, "last_edit_date": 1464795622, "creation_date": 1464794388, "answer_id": 37572756, "question_id": 37572603, "link": "https://stackoverflow.com/questions/37572603/does-not-name-a-type-err-when-trying-to-use-pointer-to-function/37572756#37572756", "title": "&quot;does not name a type&quot; err when trying to use pointer to function", "body": "<p>There are two problems:</p>\n\n<p>1) <code>name_ascending = llistStudent::sort_name_ascending;</code> is illegal in class definition. You cannot just slap random code in class like that. You should place it in some method, probably constuctor or make it part of declarator.<br>\nTo fix this simply initialize your function pointer in declaration (C++11 and later only):  </p>\n\n<pre><code>bool (llistStudent::*name_ascending)(int &amp;, int &amp;) = &amp;llistStudent::sort_name_ascending;     \n</code></pre>\n\n<p>2) <code>sort_list(sort_GPA_ascending);</code> is not going to work. <code>sort_list</code> expect parameter of type <code>bool (*)(int &amp;, int &amp;)</code>, and <code>name_ascending</code> has type <code>bool (llistStudent::*)(int &amp;, int &amp;)</code></p>\n\n<p>To fix this we need to know if your sorting function should have access to the class internals. If it should not (as it appears from your usecase), you should make it <code>static</code> and adjust pointer type accordingly:</p>\n\n<pre><code>static bool sort_name_ascending(int&amp; positionA, int&amp; positionB);\nbool (*name_ascending)(int &amp;, int &amp;) = &amp;llistStudent::sort_name_ascending; \n</code></pre>\n\n<p>Otherwise, you need to change type of <code>sort_list</code> argument to <code>bool (llistStudent::*)(int &amp;, int &amp;)</code>. Notice that member function pointers should be called on class instance (in your case it is probably <code>*this</code>).</p>\n"}], "owner": {"reputation": 507, "user_id": 5959593, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/78d489b31ec60519733298259e8c1dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Minh Ngh\u0129a", "link": "https://stackoverflow.com/users/5959593/minh-ngh%c4%a9a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "accepted_answer_id": 37572756, "answer_count": 1, "score": 2, "last_activity_date": 1464804648, "creation_date": 1464794010, "last_edit_date": 1464804648, "question_id": 37572603, "link": "https://stackoverflow.com/questions/37572603/does-not-name-a-type-err-when-trying-to-use-pointer-to-function", "title": "&quot;does not name a type&quot; err when trying to use pointer to function", "body": "<p>I want to make a sorting function with a custom comparator, and the function lies inside a class. At first I followed my lecturer's instruction, but it turned out to be wrong when it came to member function (pointer-to-member and pointer-to-function is 2 different pointers, and they can't be treated as the other). I followed the instruction showed here, but it wouldn't make any different\n<a href=\"http://www.radmangames.com/programming/how-to-use-function-pointers-in-cplusplus\" rel=\"nofollow\">http://www.radmangames.com/programming/how-to-use-function-pointers-in-cplusplus</a></p>\n\n<p>Here's my code:</p>\n\n<pre><code>class llistStudent\n{\npublic:\n    void sort_list(bool (*comparator)(int &amp;, int &amp;));\n    void swapStudent(int&amp; positionA, int&amp; positionB);\n\n    bool sort_name_ascending(int&amp; positionA, int&amp; positionB);\n    bool (llistStudent::*name_ascending)(int &amp;, int &amp;) = &amp;llistStudent::method;\n    name_ascending = llistStudent::sort_name_ascending;\n};\n</code></pre>\n\n<p>And how I use it:</p>\n\n<pre><code>sort_list(sort_name_ascending);\n</code></pre>\n\n<p>It says:</p>\n\n<pre><code>'name_ascending' does not name a type\n</code></pre>\n\n<p>Where did I go wrong? Thanks!\nEdit: It was a typo when I was editing the code to post it here: <code>sort_name_ascending</code>!` </p>\n"}, {"tags": ["c++", "sockets", "user-interface", "server", "gtkmm3"], "answers": [{"tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": false, "score": 1, "last_activity_date": 1464818369, "last_edit_date": 1495541279, "creation_date": 1464818369, "answer_id": 37579493, "question_id": 37572348, "link": "https://stackoverflow.com/questions/37572348/socket-server-using-gtkmm3/37579493#37579493", "title": "Socket server using gtkmm3", "body": "<p>You just need to explicitly call out the global namespace here. That is, when attempting to call the <code>close</code> function in libc instead of the <code>close</code> method of your base class, you should prepend the global namespace designator:</p>\n\n<pre><code>::close(sock);\n</code></pre>\n\n<p>Basically, the presence of a <code>close</code> method in the object namespace hides the global symbol of the same name. See the first answer here for a fuller explanation: <a href=\"https://stackoverflow.com/questions/10269012/global-scope-vs-global-namespace\">Global scope vs global namespace</a></p>\n"}], "owner": {"reputation": 53, "user_id": 6257212, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03641dd7000a4368f1800125b96dd48a?s=128&d=identicon&r=PG&f=1", "display_name": "nt387", "link": "https://stackoverflow.com/users/6257212/nt387"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464818369, "creation_date": 1464793263, "question_id": 37572348, "link": "https://stackoverflow.com/questions/37572348/socket-server-using-gtkmm3", "title": "Socket server using gtkmm3", "body": "<p>I'm trying to make a GUI that will connect to the network when the user presses a button. I am getting a compilation error when trying to compile the gui_ex.cpp file.</p>\n\n<pre><code>gui_ex.cpp: In member function \u2018void Gui_Ex::on_connect()\u2019:\ngui_ex.cpp:110:19: error: no matching function for call to \u2018Gui_Ex::close(int&amp;)\u2019\n         close(sock);\n                   ^\ngui_ex.cpp:110:19: note: candidate is:\nIn file included from /usr/include/gtkmm-3.0/gtkmm/dialog.h:30:0,\n                 from /usr/include/gtkmm-3.0/gtkmm/aboutdialog.h:33,\n                 from /usr/include/gtkmm-3.0/gtkmm.h:99,\n                 from gui_ex.h:4,\n                 from gui_ex.cpp:1:\n/usr/include/gtkmm-3.0/gtkmm/window.h:2026:8: note: void Gtk::Window::close()\n   void close();\n        ^\n/usr/include/gtkmm-3.0/gtkmm/window.h:2026:8: note:   candidate expects 0 arguments, 1 provided\ngui_ex.cpp:117:19: error: no matching function for call to \u2018Gui_Ex::close(int&amp;)\u2019\n         close(sock);\n                   ^\ngui_ex.cpp:117:19: note: candidate is:\nIn file included from /usr/include/gtkmm-3.0/gtkmm/dialog.h:30:0,\n                 from /usr/include/gtkmm-3.0/gtkmm/aboutdialog.h:33,\n                 from /usr/include/gtkmm-3.0/gtkmm.h:99,\n                 from gui_ex.h:4,\n                 from gui_ex.cpp:1:\n/usr/include/gtkmm-3.0/gtkmm/window.h:2026:8: note: void Gtk::Window::close()\n   void close();\n        ^\n/usr/include/gtkmm-3.0/gtkmm/window.h:2026:8: note:   candidate expects 0 arguments, 1 provided\n</code></pre>\n\n<p>It seems like the program is getting confused between the close command for the socket and the close command for the Gtk::Window. Is it possible to adjust the code so that the compiler can differentiate the two?</p>\n\n<p>Here is my code: \ngui_ex.h file</p>\n\n<pre><code>#ifndef GTKMM_EX_GUI_H\n#define GTKMM_EX_GUI_H\n\n#include &lt;gtkmm.h&gt;\n\nclass Gui_Ex : public Gtk::Window\n{\npublic:\n    Gui_Ex();\n    virtual ~Gui_Ex();\n\nprotected:\n    // Signal handlers:\n    // new button\n    void on_connect();\n  void on_spin();\n\n  //void on_spinbutton_digits_changed();\n\n    //child widgets\n  //Gtk::Frame m_Frame_Init, m_Frame_Control;\n  Glib::RefPtr&lt;Gtk::Adjustment&gt; m_adjustment;\n  Gtk::Label m_label;\n  Gtk::Grid m_grid;\n\n  Gtk::SpinButton m_spin;\n    Gtk::Button m_button2, m_button3; //m_connect;\n\n\n\n};\n\n#endif // GTKMM_EX_GUI_H\n</code></pre>\n\n<p>gui_ex.cpp</p>\n\n<pre><code>#include \"gui_ex.h\"\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;string.h&gt; // memset\n#include &lt;pthread.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#define PORT \"8888\"\n//#define BACKLOG 2\n#define IP_ADDR \"192.168.137.99\"\n#define MAXLEN 1024\n\nint BACKLOG =0;\nstatic unsigned int cli_count = 0;\nstatic int uid = 20;\nvector&lt;int&gt; cliarray;\n\nGui_Ex::Gui_Ex()\n:\n  // m_button1(\"Button 1\"),\n   m_adjustment( Gtk::Adjustment::create(1.0, 1.0, 5.0, 1.0, 5.0, 0.0) ),\n   m_button2(\"Enter\"),\n   m_button3(\"Connect\"),\n   m_spin(m_adjustment),\n   m_label(\"Choose # clients\")\n\n\n{\n    set_title(\"Grid\");\n  set_border_width(12);\n\n\n  m_grid.attach(m_label, 0,0,1,1); //column, row, width (# col span), height (# row span)\n  m_grid.attach(m_spin, 1,0,1,1);\n  m_spin.set_wrap();\n  m_spin.set_numeric(true);\n\n  m_grid.attach(m_button2, 2,0,1,1);\n\n  m_grid.attach(m_button3, 0,1,3,1);\n  m_button3.set_sensitive(false);\n\n  m_button2.signal_clicked().connect(sigc::mem_fun(*this, &amp;Gui_Ex::on_spin));\n  m_button3.signal_clicked().connect(sigc::mem_fun(*this, &amp;Gui_Ex::on_connect));\n  //m_button3.signal_clicked().connect(sigc::bind&lt;int&gt;(sigc::mem_fun(*this, &amp;Gui_Ex::on_connect), m_spin.get_value_as_int()));  \n\n  add(m_grid);\n  m_grid.show_all();\n  //show_all_children();\n\n}\n\nGui_Ex::~Gui_Ex()\n{\n}\n\n\nvoid Gui_Ex::on_spin()\n{\n  cout&lt;&lt;\"Spin value =: \" &lt;&lt; m_spin.get_value_as_int() &lt;&lt; endl;\n  BACKLOG = m_spin.get_value_as_int();\n  m_spin.set_sensitive(false);\n  m_button2.set_sensitive(false);\n  m_button3.set_sensitive(true);\n\n}\n\nvoid Gui_Ex::on_connect()\n{\n    int connfd =0, n = 0;\n    int *new_sock, sock;\n\n    cout &lt;&lt; BACKLOG &lt;&lt; endl;\n    pthread_t thread;\n    struct addrinfo hints, *res;\n    int reuseaddr = 1; // True \n\n    // Get the address info \n    memset(&amp;hints, 0, sizeof hints);\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    if (getaddrinfo(IP_ADDR, PORT, &amp;hints, &amp;res) != 0) {\n        perror(\"getaddrinfo\");\n        //return 1;\n    }\n\n    // Create the socket \n    sock = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);\n    if (sock == -1) {\n        perror(\"socket\");\n       // return 1;\n    }\n\n    // Enable the socket to reuse the address \n    if (setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &amp;reuseaddr, sizeof(int)) == -1) {\n        perror(\"setsockopt\");\n        close(sock);\n       // return 1;\n    }\n\n    // Bind to the address \n    if (bind(sock, res-&gt;ai_addr, res-&gt;ai_addrlen) == -1) {\n        perror(\"bind\");\n        close(sock);\n        //return 0;\n    }\n\n    freeaddrinfo(res);\n\n    // Listen \n    if (listen(sock, BACKLOG) == -1) {\n        perror(\"listen\");\n       // return 0;\n    }\n    cout &lt;&lt; \"listening for connections\" &lt;&lt; endl;\n    // Main loop \n    bool running = true;\n    // Initialize clients \n    while (running)\n    {  \n      size_t size = sizeof(struct sockaddr_in);\n      struct sockaddr_in their_addr;\n      int clilen = sizeof(their_addr);\n      int newsock = accept(sock, (struct sockaddr*)&amp;their_addr, &amp;size);\n      if (newsock == -1) \n      {\n        perror(\"accept\");\n       // return -1;\n      }\n      cli_count++;\n      printf(\"Got a connection from %s on port %d\\n\", inet_ntoa(their_addr.sin_addr), htons(their_addr.sin_port));\n      cliarray.push_back(newsock);\n      if (cli_count == BACKLOG)\n      {\n         cout &lt;&lt; \"Max clients reached\" &lt;&lt; endl;\n        running = false;\n        break;\n      }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "viewport", "orthographic"], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1464849223, "post_id": 37572763, "comment_id": 62654510, "body": "Well, that doesn&#39;t work. Could you edit your post and decribe how have you come up with this solution? And maby share refference to it? Because wiki page about ortho projection have no information about it."}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 0, "last_activity_date": 1464794407, "creation_date": 1464794407, "answer_id": 37572763, "question_id": 37572162, "link": "https://stackoverflow.com/questions/37572162/glviewport-offset-and-ortho-projection/37572763#37572763", "title": "glViewport offset and ortho projection", "body": "<p>First, aspect ratio is always width/height.</p>\n\n<p>Then I think what you are looking for is : </p>\n\n<pre><code>m_ProjectionMatrix.m_fLeft = x;\nm_ProjectionMatrix.m_fRight = x + m_WindowWidth;\nm_ProjectionMatrix.m_fBottom = y;\nm_ProjectionMatrix.m_fTop = y + m_WindowHeight;\nm_ProjectionMatrix.m_fNear = -(10.0f)*m_fWindowSize;\nm_ProjectionMatrix.m_fFar = (10.0f)*m_fWindowSize;\n</code></pre>\n\n<p>Have a look at this <a href=\"https://en.wikipedia.org/wiki/Orthographic_projection\" rel=\"nofollow\">wiki page</a></p>\n"}, {"tags": [], "owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "is_accepted": true, "score": 0, "last_activity_date": 1464860792, "last_edit_date": 1492085921, "creation_date": 1464860792, "answer_id": 37588268, "question_id": 37572162, "link": "https://stackoverflow.com/questions/37572162/glviewport-offset-and-ortho-projection/37588268#37588268", "title": "glViewport offset and ortho projection", "body": "<p>I found solution to this problem and posted it on the gamedev forum:\n<a href=\"https://gamedev.stackexchange.com/questions/122284/glviewport-offset-and-ortho-projection/122289#122289\">https://gamedev.stackexchange.com/questions/122284/glviewport-offset-and-ortho-projection/122289#122289</a></p>\n\n<p>In short: \nI was drawing my whole scene to the framebuffer and then I rendered generated texture to the screen. This operation caused unwanted glViewport()  transformations accumulation. </p>\n\n<p>Solution to this is setting the glViewport() to origin befrore rendering to the framebuffer and then setting offset when rendering texture to the screen.</p>\n"}], "owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 37588268, "answer_count": 2, "score": 0, "last_activity_date": 1464860792, "creation_date": 1464792795, "last_edit_date": 1464849355, "question_id": 37572162, "link": "https://stackoverflow.com/questions/37572162/glviewport-offset-and-ortho-projection", "title": "glViewport offset and ortho projection", "body": "<p>In all tutorials I found about creating projection matrix based on viewport size all of them assumed that left bottom coordinates of viewport will be (0,0).</p>\n\n<p>Now I want to draw to the different parts of the screen and for that purpose I want to switch viewports accordingly:</p>\n\n<pre><code>glViewport(0,0,windowWidth/2, windowHeight/2); //left bottom\nglViewport(0,windowHeight/2,windowWidth/2, windowHeight/2);//left top\nglViewport(windowWidth/2,0,windowWidth/2, windowHeight/2);//right bottom\nglViewport(windowWidth/2, windowHeight/2,windowWidth/2, windowHeight/2);//right top\n</code></pre>\n\n<p>Now I have a problem with defining my projection matrix. Without having any (x,y) offest I was using this code for calculating my ortho projection matrix:</p>\n\n<pre><code>if (m_WindowWidth &gt; m_WindowHeight)\n{\n    auto viewportAspectRatio = (float)m_WindowWidth / (float)m_WindowHeight;\n\n    m_ProjectionMatrix.m_fLeft = (-1.0f) * m_fWindowSize * viewportAspectRatio;\n    m_ProjectionMatrix.m_fRight = m_fWindowSize * viewportAspectRatio;\n    m_ProjectionMatrix.m_fBottom = (-1.0f)*m_fWindowSize;\n    m_ProjectionMatrix.m_fTop = m_fWindowSize;\n    m_ProjectionMatrix.m_fNear = -(10.0f)*m_fWindowSize;\n    m_ProjectionMatrix.m_fFar = (10.0f)*m_fWindowSize;\n\n    m_fMoveSpeed = static_cast&lt;GLfloat&gt;(m_fWindowSize * 2 / static_cast&lt;float&gt;(m_WindowHeight));\n}\nelse\n{\n    auto viewportAspectRatio = (float)m_WindowHeight / (float)m_WindowWidth;\n\n    m_ProjectionMatrix.m_fLeft = (-1.0f)*m_fWindowSize;\n    m_ProjectionMatrix.m_fRight = m_fWindowSize;\n    m_ProjectionMatrix.m_fBottom = (-1.0f)*m_fWindowSize * viewportAspectRatio;\n    m_ProjectionMatrix.m_fTop = m_fWindowSize * viewportAspectRatio;\n    m_ProjectionMatrix.m_fNear = -(10.0f)*m_fWindowSize;\n    m_ProjectionMatrix.m_fFar = (10.0f)*m_fWindowSize;\n\n    m_fMoveSpeed = static_cast&lt;GLfloat&gt;(m_fWindowSize * 2 / static_cast&lt;float&gt;(m_WindowWidth));\n}\n</code></pre>\n\n<p>And this works fine <strong>UNTIL</strong> I will add any (x,y) offset to my viewport. The effect is following when using <code>glViewport(0, m_WindowHeight/2,  m_WindowWidth/2, m_WindowHeight/2</code>):</p>\n\n<p><a href=\"https://i.stack.imgur.com/K4nTz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K4nTz.png\" alt=\"glViewport(0, m_WindowHeight/2,  m_WindowWidth/2, m_WindowHeight/2)\"></a></p>\n\n<p>And with <code>glViewport(0, 0,  m_WindowWidth/2, m_WindowHeight/2)</code>:\n<a href=\"https://i.stack.imgur.com/0X3qY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0X3qY.png\" alt=\"glViewport(0, 0,  m_WindowWidth/2, m_WindowHeight/2)\"></a></p>\n\n<p><strong>How can I make it work?</strong></p>\n"}, {"tags": ["c++", "automake"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6400631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd948beef8c57c24d085438040fcd37?s=128&d=identicon&r=PG&f=1", "display_name": "Caro Strickland", "link": "https://stackoverflow.com/users/6400631/caro-strickland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464805338, "creation_date": 1464805338, "answer_id": 37576121, "question_id": 37572140, "link": "https://stackoverflow.com/questions/37572140/automake-issue-with-linking/37576121#37576121", "title": "Automake issue with linking", "body": "<p>Update: I ended up solving the issue I was having. Basically, the .so file was not being accessed, so I used make clean and then the linked library compiled properly. Next, the issues with the base library was just an extra character within a header file that was causing the compiler to blow up with over 1500 lines of errors. After fixing that, it was able to link up properly and is working fine now.</p>\n"}], "owner": {"reputation": 1, "user_id": 6400631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd948beef8c57c24d085438040fcd37?s=128&d=identicon&r=PG&f=1", "display_name": "Caro Strickland", "link": "https://stackoverflow.com/users/6400631/caro-strickland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464805338, "creation_date": 1464792747, "last_edit_date": 1464797245, "question_id": 37572140, "link": "https://stackoverflow.com/questions/37572140/automake-issue-with-linking", "title": "Automake issue with linking", "body": "<p>I'm working on a library that links another library to use its static functions. </p>\n\n<p>Everything was working perfectly until I switched from including all my code in the header file to sharing it between the .h and .cpp file.</p>\n\n<p>I tried to use <code>./configure --prefix=\"&lt;same path as before&gt;\"</code> and then make install but ended up with a <code>\"/usr/bin/install: cannot stat .libs/&lt;library name&gt;.so.0.0.0': No such file or directory\"</code> error. (also, I did change my makefile to accommodate for the inclusion of the .cpp file)</p>\n\n<p>Then, trying to compile my old library (which should've still worked since the linked library didn't make install correctly and was still technically using the older version) I get a pile of errors that seem to have to do with c++ itself. For example:</p>\n\n<pre><code>.../gcc/4.9.1/linux64/include/c++/4.9.1/bits/stl_bvector.h:354:13: error: expected ';' at end of member declaration\n</code></pre>\n\n<p>There are an absolute ton of errors similar to the one above, all having to do with issues in the path <code>.../gcc/4.9.1/linux64/include/c++/4.9.1/</code></p>\n\n<p>Has anyone run into this error before? Let me know if I need to provide any more information, it's just that I've never had this happen so I'm at a loss as to where to proceed. It's likely something simple I'm missing but the longer I stare at it the less it makes sense.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "linker-errors", "pure-virtual", "virtual-functions"], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1464793221, "post_id": 37572108, "comment_id": 62631903, "body": "Why have the function to be defined when it is not called?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1464793349, "post_id": 37572108, "comment_id": 62631997, "body": "&quot;<i>A function is pure virtual if it is not defined</i>&quot; is not correct. A function is pure virtual if it has been declared pure virtual. A pure virtual function can have a definition (but doesn&#39;t need to have)."}], "tags": [], "owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "is_accepted": false, "score": 1, "last_activity_date": 1464792683, "creation_date": 1464792683, "answer_id": 37572108, "question_id": 37572034, "link": "https://stackoverflow.com/questions/37572034/why-does-non-pure-virtual-method-have-to-be-defined-in-base-class/37572108#37572108", "title": "Why does non-pure virtual method have to be defined in base class?", "body": "<p>The answer is in the definition itself. A function is pure virtual if it is not defined. Then, if you don't flag it as pure virtual, you have to define it. It's a constraint of the <code>C++</code> language.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1464793386, "last_edit_date": 1592644375, "creation_date": 1464793386, "answer_id": 37572378, "question_id": 37572034, "link": "https://stackoverflow.com/questions/37572034/why-does-non-pure-virtual-method-have-to-be-defined-in-base-class/37572378#37572378", "title": "Why does non-pure virtual method have to be defined in base class?", "body": "<p>From the C++11 Standard:</p>\n<blockquote>\n<p><strong>10.3 Virtual functions</strong></p>\n<p>11 A virtual function declared in a class shall be defined, or declared pure (10.4) in that class, or both; but no diagnostic is required (3.2).</p>\n</blockquote>\n<p>It's OK to define a pure virtual function but it is not necessary.</p>\n<p>It is necessary to define a virtual function if it is declared but not declared as pure virtual.</p>\n<p>It's good that the linker complains even though the language does not require it to.</p>\n"}, {"comments": [{"owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "edited": false, "score": 0, "creation_date": 1464797070, "post_id": 37572487, "comment_id": 62634573, "body": "Thanks for the additional explanation"}], "tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": false, "score": 3, "last_activity_date": 1464793716, "creation_date": 1464793716, "answer_id": 37572487, "question_id": 37572034, "link": "https://stackoverflow.com/questions/37572034/why-does-non-pure-virtual-method-have-to-be-defined-in-base-class/37572487#37572487", "title": "Why does non-pure virtual method have to be defined in base class?", "body": "<p><strong>R Sahu</strong> already provided standard quote related to this, I will provide slightly longer explanation why error happens \u2014 sometimes you can get away with not defining functions if they are not used, but not in this case.</p>\n\n<p>Virtual functions are always used. Their <em>address</em> is used in virtual tables which are built for each class with virtual functions and which are used for dynamic dispatch. </p>\n\n<p>Linker emits an error, because base class <code>A</code> constructor sets up pointer to base class virtual table, virtual table contains pointer to <code>bar</code> and linker cannot find definition of <code>bar</code> member function to find its address.</p>\n"}], "owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 37572378, "answer_count": 3, "score": 0, "last_activity_date": 1464793716, "creation_date": 1464792496, "question_id": 37572034, "link": "https://stackoverflow.com/questions/37572034/why-does-non-pure-virtual-method-have-to-be-defined-in-base-class", "title": "Why does non-pure virtual method have to be defined in base class?", "body": "<p>In this particular case, why do I have to define the non-pure virtual method in the base class in order to avoid a linker error?</p>\n\n<p>This gives a linker error:</p>\n\n<pre><code>class A\n{\n  public:\n  virtual ~A(){}\n  virtual void foo() = 0;\n  virtual void bar();\n};\n\nclass B : public A\n{\n  public:\n  void foo()\n  {\n  }\n  void bar()\n  {\n  }\n};\n\nint main()\n{\n    B b;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>/tmp/cc5E8Tit.o: In function `A::~A()':\n:(.text._ZN1AD2Ev[_ZN1AD5Ev]+0x13): undefined reference to `vtable for\nA' /tmp/cc5E8Tit.o:(.rodata._ZTI1B[_ZTI1B]+0x10): undefined reference\nto `typeinfo for A' collect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>But if i define the bar method in class <code>A</code> it links ok:</p>\n\n<pre><code>class A\n{\n  public:\n  virtual ~A(){}\n  virtual void foo() = 0;\n  virtual void bar(){}\n};\n\nclass B : public A\n{\n  public:\n  void foo()\n  {\n  }\n  void bar()\n  {\n  }\n};\n\nint main()\n{\n    B b;\n}\n</code></pre>\n\n<p>... no linker error.</p>\n\n<p>Why is this?</p>\n"}, {"tags": ["c++", "c++11", "tuples"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1464792030, "post_id": 37571816, "comment_id": 62631027, "body": "It&#39;s a great way to represent a type list with one element that is <code>int[2]</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1464792164, "post_id": 37571816, "comment_id": 62631128, "body": "Is it a personal question to Barry? :) On a less joking mode, I would assume, it has it&#39;s use when the actual number of arguments to tuple is unknown, and a single array is a particular case?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464792223, "post_id": 37571816, "comment_id": 62631177, "body": "@SergeyA it is a question to the community, perhaps there is a good rationale for allowing this?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1464792286, "post_id": 37571816, "comment_id": 62631231, "body": "@JohannesSchaub-litb, allowing or using? It is allowed because it falls under general rule. There is nothing to prohibit it. But using it is another question."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1464793047, "post_id": 37571816, "comment_id": 62631777, "body": "When does a <code>std::tuple&lt;X&gt;</code> not be better replaced with an <code>X</code>?  The question about why not <code>int var[2]</code> seems a poor one that distracts from the rest of your question, no?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1464795015, "post_id": 37571816, "comment_id": 62633237, "body": "@FirstStep your question is a bit ambiguous. Do you mean me to give an example of how to get my SO score, or an example declaration of a <code>tuple&lt;int[2]&gt; x;</code>?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1464795061, "post_id": 37571816, "comment_id": 62633267, "body": "@johannes nah I stated that &quot;MCVE just <i>with me</i>&quot; means on my question ))"}, {"owner": {"reputation": 4306, "user_id": 484230, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d558a3b98b144707ae0d006717d8f66?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/484230/martin"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1464811934, "post_id": 37571816, "comment_id": 62642722, "body": "@Yakk: For X some use cases come to mind e.g. wrapping an error prone type (e.g. void* or sth. alike) into some robust shell. For int[2] I have no idea, since std::array actually does exactly this and more for x[n]"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1464828674, "post_id": 37580989, "comment_id": 62648861, "body": "That requires clause only applies to <code>tuple_cat</code>."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1464829084, "post_id": 37580989, "comment_id": 62648948, "body": "It&#39;s amazing the effort people go through to format standardese without fact checking."}], "tags": [], "owner": {"reputation": 1, "user_id": 6412192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f1d543b0542a6188dca23c49daafd5?s=128&d=identicon&r=PG&f=1", "display_name": "user6412192", "link": "https://stackoverflow.com/users/6412192/user6412192"}, "is_accepted": false, "score": -1, "last_activity_date": 1464828458, "creation_date": 1464828458, "answer_id": 37580989, "question_id": 37571816, "link": "https://stackoverflow.com/questions/37571816/whats-the-use-of-stdtupleintn/37580989#37580989", "title": "What&#39;s the use of `std::tuple&lt;int[N]&gt;`?", "body": "<p>I'm pretty sure this is undefined behavior. See the <em>Requires</em> and <em>Returns</em> clause:</p>\n\n<p><a href=\"http://eel.is/c++draft/tuple#tuple.creation-10\" rel=\"nofollow\">tuple.creation-10 and 12</a> says:</p>\n\n<blockquote>\n  <p><em>Requires:</em> For all <em>i</em>, <em>U<sub>i</sub></em> shall be the type <em>cv<sub>i</sub></em> <code>tuple&lt;<em>Args<sub>i</sub>...</em>&gt;</code>, where\n  <em>cv<sub>i</sub></em> is the (possibly empty) <em><sup>i</sup>th</em> cv-qualifier-seq and <em>Args<sub>i</sub></em> is the parameter pack\n  representing the element types in <em>U<sub>i</sub></em>. Let\n  <em>A<sub>ik</sub></em> be the <em>k<sub>i</sub><sup>th</sup></em> type in <em>Args<sub>i</sub></em>. For all <em>A<sub>ik</sub></em> the following requirements shall be satisfied: If <em>T<sub>i</sub></em> is deduced as an\n  lvalue reference type, then <code>is_constructible&lt;<em>A<sub>ik</sub></em>, <em>cv<sub>i</sub></em> <em>A<sub>ik</sub></em>&amp;>::value == true</code>, otherwise <code>is_constructible&lt;<em>A<sub>ik</sub></em>, <em>cv<sub>i</sub></em> <em>A<sub>ik</sub></em>&amp;&amp;>::value == true</code>.</p>\n  \n  <p><em>Returns:</em> A <code>tuple</code> object constructed by initializing the <em>k<sub>i</sub><sup>th</sup></em> type element <em>e<sub>ik</sub></em> in <em>e<sub>i</sub>...</em> with <code>get&lt;<em>k<sub>i</sub></em>>(std::forward&lt;<em>T<sub>i</sub></em>>(<em>tp<sub>i</sub></em>))</code>\n  for each valid <em>k<sub>i</sub></em> and each group <em>e<sub>i</sub></em> in\n  order.</p>\n</blockquote>\n\n<p>Like Barry says, there's nothing preventing <code>std::tuple&lt;int[2]&gt; t;</code> but trying to do anything with it is likely to cause a hard error in a compiler. Example:</p>\n\n<pre><code>std::tuple&lt;int[2]&gt; t; // fine\nstd::tuple&lt;int[2]&gt; t{}; // fine\n</code></pre>\n\n<p>While:</p>\n\n<pre><code>std::tuple&lt;int[2]&gt; a() {\n  int a[2] = { 1, 2};\n  return std::tuple&lt;int[2]&gt;(a);\n}\n\nint main() {\n   auto x = a();\n   // ...\n}\n</code></pre>\n\n<p>gives errors like:</p>\n\n<pre><code>error: array initializer must be an initializer list\n        : _M_head_impl(std::forward&lt;_UHead&gt;(__h)) { }\n</code></pre>\n"}], "owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1464828458, "creation_date": 1464791953, "last_edit_date": 1495541776, "question_id": 37571816, "link": "https://stackoverflow.com/questions/37571816/whats-the-use-of-stdtupleintn", "title": "What&#39;s the use of `std::tuple&lt;int[N]&gt;`?", "body": "<p>Here (<a href=\"https://stackoverflow.com/a/37550660/34509\">https://stackoverflow.com/a/37550660/34509</a>) user <a href=\"https://stackoverflow.com/a/37550660/34509\">@Barry</a> notes in the comment section that you can use <code>std::tuple&lt;int[2]&gt;</code> and that it is not apparently forbidden to instantiate such a type. I have not yet heard about this beast and I wonder what uses it could have, as opposed to storing a <code>int var[2]</code> directly or using <code>std::array&lt;int, 2&gt;</code>. </p>\n\n<p>Reportedly, <code>std::tuple&lt;int[2]&gt;</code> is not copyable, neither movable nor construtable from an <code>int var[2]</code>. What other uses does it have?</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1464791986, "post_id": 37571791, "comment_id": 62630994, "body": "Call the <code>Create</code> function instead of <code>DoModal</code>."}, {"owner": {"reputation": 272, "user_id": 6183937, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/171054708d89a14cfe823bdeb2f60cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Elamir Ohana", "link": "https://stackoverflow.com/users/6183937/elamir-ohana"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1464792285, "post_id": 37571791, "comment_id": 62631230, "body": "then how can i know the dialog result <code>int iReturn = m_RedesignSheet.DoModal()</code> ? @CodyGray"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1464795647, "post_id": 37571791, "comment_id": 62633651, "body": "@AmirYouhana google &quot;mfc modeless dialog&quot;"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1465291642, "post_id": 37571791, "comment_id": 62828099, "body": "Non-modal dialogs don&#39;t return a result. They don&#39;t return at all. Just like regular windows."}], "answers": [{"tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": true, "score": 1, "last_activity_date": 1464878836, "last_edit_date": 1464878836, "creation_date": 1464867088, "answer_id": 37590607, "question_id": 37571791, "link": "https://stackoverflow.com/questions/37571791/create-dialog-that-doesnt-block-the-main-app-mfc/37590607#37590607", "title": "create dialog that doesn&#39;t block the main app mfc", "body": "<p>You need to create a <a href=\"https://msdn.microsoft.com/en-us/library/5w2h2y4y.aspx\" rel=\"nofollow\">modeless dialog</a>. Click the link for more details.</p>\n\n<p>There is a good tutorial about it <a href=\"http://www.codeproject.com/Articles/1651/Tutorial-Modeless-Dialogs-with-MFC\" rel=\"nofollow\">here</a>.</p>\n\n<p>Example to display:</p>\n\n<pre><code>CModeLess *m_pmodeless = new CModeLess(this);\nm_pmodeless-&gt;Create(CModeLess::IDD);\nm_pmodeless-&gt;ShowWindow(SW_SHOW);   \n</code></pre>\n\n<p>I won't repeat the tutorial but it explains how you using <strong>messages</strong> to relay to the parent what the dialog result is.</p>\n"}], "owner": {"reputation": 272, "user_id": 6183937, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/171054708d89a14cfe823bdeb2f60cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Elamir Ohana", "link": "https://stackoverflow.com/users/6183937/elamir-ohana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 37590607, "answer_count": 1, "score": -2, "last_activity_date": 1464878836, "creation_date": 1464791899, "question_id": 37571791, "link": "https://stackoverflow.com/questions/37571791/create-dialog-that-doesnt-block-the-main-app-mfc", "title": "create dialog that doesn&#39;t block the main app mfc", "body": "<p>I'm using mfc, is there any way to create a dialog that doesn't block the main app without using threads?\nif yes, how can i do it?\nthanks in advance  </p>\n"}, {"tags": ["c++", "c++11", "vector", "language-lawyer"], "answers": [{"comments": [{"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1464793708, "post_id": 37571873, "comment_id": 62632279, "body": "@KerrekSB Do you think the description on cppreference is not accurate? (Should be fixed?)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1464793992, "post_id": 37571873, "comment_id": 62632476, "body": "No, I&#39;m completely convinced that the intention is for capacity to control reallocation both ways. It&#39;s just slightly sloppy wording. It would be insane otherwise, and there&#39;s probably a lot of real-world code that depends on this behaviour."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1464802784, "post_id": 37571873, "comment_id": 62637961, "body": "Actually, the specification is complete and airtight, it&#39;s just spread out over a few sections. See my updated answer."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 8, "last_activity_date": 1464797053, "last_edit_date": 1464797053, "creation_date": 1464792111, "answer_id": 37571873, "question_id": 37571737, "link": "https://stackoverflow.com/questions/37571737/can-stdvector-move-its-data-to-another-address-at-emplace-back-even-though-t/37571873#37571873", "title": "Can std::vector move its data to another address at emplace_back() even though there is still unused space according to capacity()?", "body": "<p>The description of standard is not clear enough. </p>\n\n<p>$23.3.6.5 vector modifiers [vector.modifiers]:</p>\n\n<blockquote>\n  <p>Remarks: Causes reallocation if the new size is greater than the old capacity. If no reallocation happens,\n  all the iterators and references before the insertion point remain valid.</p>\n</blockquote>\n\n<p>So when add elements to <code>std::vector</code> reallocation will certainly happen when the new size is greater than current capacity, but it doesn't says reallocation won't happen even if the new size is less than or equal to current capacity. Anyway if reallocation doesn't happen then all the iterators and references to the elements before the insertion point must remain valid, implies data won't be moved.</p>\n\n<p>It's the same for <code>insert()</code>, <code>emplace_back()</code>, <code>emplace()</code> and <code>push_back()</code>.</p>\n\n<p>Quote from <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow\">cppreference.com</a> just as reference:</p>\n\n<blockquote>\n  <p>If the new <code>size()</code> is greater than <code>capacity()</code> then all iterators and\n  references (including the past-the-end iterator) are invalidated.\n  Otherwise only the past-the-end iterator is invalidated.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464792316, "post_id": 37571889, "comment_id": 62631245, "body": "Looks like another under specified piece of behavior."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1464804586, "post_id": 37571889, "comment_id": 62638917, "body": "@NathanOliver: Actually it&#39;s fine, just a bit spread out. See update."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1464804751, "post_id": 37571889, "comment_id": 62638998, "body": "@KerrekSB Talk about having to stitch the answer together :)  Unfortunetly I cannot upvote you again.  Thanks for your time and effort to flesh this all out."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1464812916, "post_id": 37571889, "comment_id": 62643229, "body": "Thanks a lot for putting that together. I only knew about the &quot;causes reallocation if new size is greater than old capacity&quot; part, which - taken in isolation - wouldn&#39;t prohibit reallocation otherwise. I can now optimise a container I wrote to leverage this."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 30, "last_activity_date": 1464802487, "last_edit_date": 1464802487, "creation_date": 1464792156, "answer_id": 37571889, "question_id": 37571737, "link": "https://stackoverflow.com/questions/37571737/can-stdvector-move-its-data-to-another-address-at-emplace-back-even-though-t/37571889#37571889", "title": "Can std::vector move its data to another address at emplace_back() even though there is still unused space according to capacity()?", "body": "<p>The specification is a bit indirect. <code>capacity</code> is specified as:</p>\n\n<blockquote>\n<pre><code>size_type capacity() const noexcept;\n</code></pre>\n  \n  <p><em>Returns</em>: The total number of elements that the vector can hold without requiring reallocation.</p>\n</blockquote>\n\n<p>The second part comes from <code>reserve</code>:</p>\n\n<blockquote>\n<pre><code>reserve(size_type n);\n</code></pre>\n  \n  <p><em>Remarks</em>: Reallocation invalidates all the references, pointers, and iterators referring to the elements in\n  the sequence. <strong>No reallocation shall take place during insertions that happen after a call to <code>reserve()</code>\n  until the time when an insertion would make the size of the vector greater than the value of <code>capacity()</code></strong>.</p>\n</blockquote>\n\n<p>From that you can conclude that if the size is less than the capacity, then insertion does not cause reallocation.</p>\n\n<p>There is no single, direct statement that the vector will not reallocate if there is spare capacity and you haven't explicitly called <code>reserve</code>. However, there is a general container requirement in [container.requirements.general]:</p>\n\n<blockquote>\n  <p>Unless otherwise specified (either explicitly or by defining a function in terms of other functions), invoking a container member function or passing a container as an argument to a library function shall not invalidate iterators to, or change the values of, objects within that container.</p>\n</blockquote>\n\n<p>Finally, we have description of the effects of insertion:</p>\n\n<blockquote>\n<pre><code>[insert/emplace_back/push_back:]\n</code></pre>\n  \n  <p><em>Remarks</em>: Causes reallocation if the new size is greater than the old capacity.  If no reallocation happens, all the iterators and references before the insertion point remain valid.</p>\n</blockquote>\n\n<p>Putting it all together: Unless otherwise specified, calling a member function does not invalidate iterators. Reallocation invalidates iterators (as described as part of <code>reserve</code> above), so unless otherwise specified, calling a member function, and in particular an insertion, does not reallocate, One such an overriding specification is given for the case where the new size exceeds the current capacity.</p>\n"}], "owner": {"reputation": 3192, "user_id": 582235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e223d8b9696861a2ed29be81b74680a3?s=128&d=identicon&r=PG", "display_name": "kynnysmatto", "link": "https://stackoverflow.com/users/582235/kynnysmatto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "answer_count": 2, "score": 27, "last_activity_date": 1464802487, "creation_date": 1464791776, "last_edit_date": 1464793984, "question_id": 37571737, "link": "https://stackoverflow.com/questions/37571737/can-stdvector-move-its-data-to-another-address-at-emplace-back-even-though-t", "title": "Can std::vector move its data to another address at emplace_back() even though there is still unused space according to capacity()?", "body": "<p>Is it guaranteed that <code>std::vector</code> only moves its data when <code>size()==capacity()</code> and calling <code>push_back()</code> or <code>emplace_back()</code> or can it do it otherwise also?</p>\n"}, {"tags": ["c++", "winapi", "opengl"], "comments": [{"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 1, "creation_date": 1464805275, "post_id": 37571674, "comment_id": 62639275, "body": "Creating a modern OpenGL rendering context in Windows takes a bit more effort. Essentially you first have to create a proxy context to load the necessary extensions, then you create the proper context using those. I wrote a small library that does the internal proxy context housekeeping behind the curtains and lets you get right to the core business without further ado: <a href=\"https://github.com/datenwolf/wglarb/\" rel=\"nofollow noreferrer\">github.com/datenwolf/wglarb</a>"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "reply_to_user": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1464806511, "post_id": 37571674, "comment_id": 62639957, "body": "thank you; if you cp that as an answer, I&#39;ll accept it :)"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1464793005, "post_id": 37572150, "comment_id": 62631749, "body": "\\That&#39;s partially where the source code is from actually"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1464793067, "post_id": 37572150, "comment_id": 62631792, "body": "(from opengl Wiki) also, they state that there shouldn&#39;t be any problem using this method"}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1464793662, "post_id": 37572150, "comment_id": 62632240, "body": "Also, I&#39;m using glew, so it shouldn&#39;t be a problem"}], "tags": [], "owner": {"reputation": 430, "user_id": 2277264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KytzI.png?s=128&g=1", "display_name": "Peter Stock", "link": "https://stackoverflow.com/users/2277264/peter-stock"}, "is_accepted": false, "score": 1, "last_activity_date": 1464792771, "creation_date": 1464792771, "answer_id": 37572150, "question_id": 37571674, "link": "https://stackoverflow.com/questions/37571674/opengl-rendering-to-a-win32-api-context/37572150#37572150", "title": "Opengl: Rendering to a Win32 API context", "body": "<p>Look at the code for SDL to see what it does - I think there's some faffing about to get a context with modern (>=3 or >=4) OpenGL.</p>\n\n<p><a href=\"https://www.opengl.org/wiki/Creating_an_OpenGL_Context_%28WGL%29\" rel=\"nofollow\">https://www.opengl.org/wiki/Creating_an_OpenGL_Context_%28WGL%29</a></p>\n"}, {"comments": [{"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1464869170, "post_id": 37577714, "comment_id": 62667473, "body": "unfortunetly, it&#39;s for a commerical project, so i&#39;ll have to write my own, but thanks; it helped a lot"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1464873843, "post_id": 37577714, "comment_id": 62671087, "body": "@Coder32: This is the MIT license. You may use this code, even with modifications, free of charge even in closed source programs under the sole requirement that you mention its use in your program&#39;s copyright and legal notices. Essentially it boils down that you have to put a notice somewhere in your programs distribution package (a file LEGAL.txt that comes with the installer or is placed in the program installation directory) in which there is a line &quot;This program uses the wglarb library by Wolfgang Draxinger&quot;, you don&#39;t even have to supply the sources for it."}, {"owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "edited": false, "score": 0, "creation_date": 1464878466, "post_id": 37577714, "comment_id": 62674939, "body": "oh; thank you ! in that case, we might consider using it; great work by the way :)"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1464811136, "creation_date": 1464811136, "answer_id": 37577714, "question_id": 37571674, "link": "https://stackoverflow.com/questions/37571674/opengl-rendering-to-a-win32-api-context/37577714#37577714", "title": "Opengl: Rendering to a Win32 API context", "body": "<p>Creating a modern OpenGL rendering context in Windows takes a bit more effort. Essentially you first have to create a proxy context to load the necessary extensions, then you create the proper context using those. I wrote a small library that does the internal proxy context housekeeping behind the curtains and lets you get right to the core business without further ado: <a href=\"http://github.com/datenwolf/wglarb\" rel=\"nofollow\">http://github.com/datenwolf/wglarb</a></p>\n\n<p>For the sake of StackOverflow best practice of include code in answeres instead of linking here's the main implementation file (it's a mere 238 lines):</p>\n\n<pre><code>/*\nCopyright (c) 2014 Wolfgang 'datenwolf' Draxinger\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n#include &lt;GL/gl.h&gt;\n#include \"wglarb.h\"\n\n#define wglarb_BuildAssert(cond) ((void)sizeof(char[1 - 2*!(cond)]))\n\nstatic HANDLE wglarb_intermediary_mutex = NULL;\n\nstatic DWORD wglarb_intermediary_lock(void)\n{\n    wglarb_BuildAssert( sizeof(PVOID) == sizeof(HANDLE) );\n\n    if( !wglarb_intermediary_mutex ) {\n        /* Between testing for the validity of the mutex handle,\n         * creating a new mutex handle and using the interlocked\n         * exchange there is a race... */\n\n        /* //// START \\\\\\\\ */\n\n        HANDLE const new_mutex =\n            CreateMutex(NULL, TRUE, NULL);\n\n        HANDLE const dst_mutex =\n            InterlockedCompareExchangePointer(\n                &amp;wglarb_intermediary_mutex,\n                new_mutex,\n                NULL );\n\n        /* //// FINISH \\\\\\\\ */\n\n        if( !dst_mutex ) {\n            /* mutex created in one time initialization and held\n             * by calling thread. Return signaled status. */\n            return WAIT_OBJECT_0;\n        }\n        /* In this case we lost the race and another thread\n         * beat this thread in creating a mutex object.\n         * Clean up and wait for the proper mutex. */\n        ReleaseMutex(new_mutex);\n        CloseHandle(new_mutex);\n    }\n    return WaitForSingleObject(wglarb_intermediary_mutex, INFINITE);\n}\n\nstatic BOOL wglarb_intermediary_unlock(void)\n{\n    return ReleaseMutex(wglarb_intermediary_mutex);\n}\n\n#define WGLARB_INTERMEDIARY_CLASS   \"wglarb intermediary\"\n#define WGLARB_INTERMEDIARY_STYLE   (WS_CLIPSIBLINGS|WS_CLIPCHILDREN)\n#define WGLARB_INTERMEDIARY_EXSTYLE 0\n\nstatic HWND wglarb_intermediary_hWnd = 0;\n\nstatic BOOL wglarb_intermediary_create_Wnd(void)\n{\n    HINSTANCE const hInstance = GetModuleHandle(NULL);\n\n    WNDCLASS wc;\n    memset(&amp;wc,0,sizeof(wc));\n    wc.hInstance = hInstance;\n    wc.style = CS_HREDRAW|CS_VREDRAW|CS_OWNDC;\n    wc.lpfnWndProc = DefWindowProc;\n    wc.lpszClassName = WGLARB_INTERMEDIARY_CLASS;\n    RegisterClass(&amp;wc);\n\n    wglarb_intermediary_hWnd =\n        CreateWindowEx(\n            WGLARB_INTERMEDIARY_EXSTYLE,\n            WGLARB_INTERMEDIARY_CLASS,\n            NULL,\n            WGLARB_INTERMEDIARY_STYLE,\n            0,0,0,0,\n            NULL,NULL,\n            hInstance,\n            NULL );\n\n    if( !wglarb_intermediary_hWnd ) {\n        return FALSE;\n    }\n\n    return TRUE;\n}\n\nstatic HDC wglarb_intermediary_hDC = 0;\n\nstatic BOOL wglarb_intermediary_create_DC(void)\n{\n    if( !wglarb_intermediary_hWnd\n     &amp;&amp; !wglarb_intermediary_create_Wnd() ) {\n        return FALSE;\n    }\n\n    wglarb_intermediary_hDC = GetDC(wglarb_intermediary_hWnd);\n    if( !wglarb_intermediary_hDC ) {\n        return FALSE;\n    }\n\n    return TRUE;\n}\n\nstatic HGLRC wglarb_intermediary_hRC = 0;\n\nstatic BOOL wglarb_intermediary_create_RC(void)\n{\n    if( !wglarb_intermediary_hDC\n     &amp;&amp; !wglarb_intermediary_create_DC() ) {\n        return FALSE;\n    }\n\n    PIXELFORMATDESCRIPTOR pfd;\n    memset(&amp;pfd,0,sizeof(pfd));\n    pfd.nSize = sizeof(pfd);\n    pfd.nVersion = 1;\n    pfd.dwFlags = PFD_SUPPORT_OPENGL|PFD_GENERIC_ACCELERATED|PFD_DRAW_TO_WINDOW;\n    pfd.iPixelType = PFD_TYPE_RGBA;\n    pfd.iLayerType = PFD_MAIN_PLANE;\n\n    int iPF;\n    if( !(iPF = ChoosePixelFormat(wglarb_intermediary_hDC, &amp;pfd))\n     || !(SetPixelFormat(wglarb_intermediary_hDC, iPF, &amp;pfd))\n     || !(wglarb_intermediary_hRC = wglCreateContext(wglarb_intermediary_hDC))\n    ) {\n        return FALSE;\n    }\n\n    return TRUE;\n}\n\nstatic BOOL wglarb_intermediary_makecurrent(HDC *hOrigDC, HGLRC *hOrigRC)\n{\n    *hOrigDC = wglGetCurrentDC();\n    *hOrigRC = wglGetCurrentContext();\n\n    if( !wglarb_intermediary_hRC\n     &amp;&amp; !wglarb_intermediary_create_RC() )  {\n        return FALSE;\n    }\n\n    return wglMakeCurrent(wglarb_intermediary_hDC, wglarb_intermediary_hRC);\n}\n\nHGLRC WINAPI wglarb_CreateContextAttribsARB(\n    HDC hDC,\n    HGLRC hShareContext,\n    const int *attribList)\n{\n    if( WAIT_OBJECT_0 != wglarb_intermediary_lock() ) {\n        return NULL;\n    }\n\n    HDC   hOrigDC;\n    HGLRC hOrigRC;\n    if( !wglarb_intermediary_makecurrent(&amp;hOrigDC, &amp;hOrigRC) ) {\n        wglarb_intermediary_unlock();\n        return NULL;\n    }\n\n    PFNWGLCREATECONTEXTATTRIBSARBPROC impl =\n        (PFNWGLCREATECONTEXTATTRIBSARBPROC)\n            wglGetProcAddress(\"wglCreateContextAttribsARB\");\n\n    HGLRC ret = NULL;\n    if( impl ) {\n        ret = impl(hDC, hShareContext, attribList);\n    }   \n\n    wglMakeCurrent(hOrigDC, hOrigRC);\n    wglarb_intermediary_unlock();\n    return ret;\n}\n\nBOOL WINAPI wglarb_ChoosePixelFormatARB(\n    HDC hdc,\n    const int *piAttribIList,\n    const FLOAT *pfAttribFList,\n    UINT nMaxFormats,\n    int *piFormats,\n    UINT *nNumFormats)\n{\n    if( WAIT_OBJECT_0 != wglarb_intermediary_lock() ) {\n        return FALSE;\n    }\n\n    HDC   hOrigDC;\n    HGLRC hOrigRC;\n    if( !wglarb_intermediary_makecurrent(&amp;hOrigDC, &amp;hOrigRC) ) {\n        wglarb_intermediary_unlock();\n        return FALSE;\n    }\n\n    PFNWGLCHOOSEPIXELFORMATARBPROC impl = NULL;\n\n    impl = (PFNWGLCHOOSEPIXELFORMATARBPROC)\n            wglGetProcAddress(\"wglChoosePixelFormatARB\");\n    if( !impl ) {\n        /* WGL_EXT_pixel_format uses the same function prototypes\n         * as the WGL_ARB_pixel_format extension */\n        impl = (PFNWGLCHOOSEPIXELFORMATARBPROC)\n                wglGetProcAddress(\"wglChoosePixelFormatEXT\");\n    }\n\n    BOOL ret = FALSE;\n    if( impl ) {\n        ret = impl(\n            hdc,\n            piAttribIList,\n            pfAttribFList,\n            nMaxFormats,\n            piFormats,\n            nNumFormats );\n    }   \n\n    wglMakeCurrent(hOrigDC, hOrigRC);\n    wglarb_intermediary_unlock();\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 5166868, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1a35d24a84e33e38359c850cc0648a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder32", "link": "https://stackoverflow.com/users/5166868/coder32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 0, "accepted_answer_id": 37577714, "answer_count": 2, "score": 1, "last_activity_date": 1464811136, "creation_date": 1464791609, "last_edit_date": 1464795114, "question_id": 37571674, "link": "https://stackoverflow.com/questions/37571674/opengl-rendering-to-a-win32-api-context", "title": "Opengl: Rendering to a Win32 API context", "body": "<p>I'm trying to create an opengl context (ogl 4.5 at least) and render to it; it works fine with SDL2 but I can't figure out why it doesn't with Win32: I'm trying the screen color to RGBA(1, 0, 0, 1) with glClearColor()/glClear, but nothing seems to happen. Here is my code: \n --EDIT I updated the code as you suggested but still, nothing seems rendered; also the problem is not because of gl 3.x/4.x features because I initialized GLEW after having created a wiggle context</p>\n\n<pre><code>LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);\nHGLRC ourOpenGLRenderingContext;\nbool running = true;\n\nint WinMain(__in HINSTANCE hInstance, __in_opt HINSTANCE hPrevInstance, __in_opt LPSTR lpCmdLine, __in int nShowCmd)\n{\n    MSG msg = { 0 };\n    WNDCLASS wc = { 0 };\n    wc.lpfnWndProc = WndProc;\n    wc.hInstance = hInstance;\n    wc.hbrBackground = (HBRUSH)(COLOR_BACKGROUND);\n    wc.lpszClassName = L\"oglversionchecksample\";\n    wc.style = CS_OWNDC;\n    if (!RegisterClass(&amp;wc))\n        return 1;\n    CreateWindowW(wc.lpszClassName, L\"openglversioncheck\",\n        WS_OVERLAPPEDWINDOW | WS_VISIBLE, 0, 0, 640, 480, 0, 0, hInstance, 0);\n\n\n        while (GetMessage(&amp;msg, NULL, 0, 0) &gt; 0)\n            DispatchMessage(&amp;msg);\n\n\n    return 0;\n}\n\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch (message)\n    {\n    case WM_PAINT:\n        glViewport(0, 0, 100, 100); //render to a viewport of width (100; 100)\n        glClearColor(1.0, 0.0, 0.0, 1.0);\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        break;\n    case WM_CREATE:\n    {\n        PIXELFORMATDESCRIPTOR pfd =\n        {\n            sizeof(PIXELFORMATDESCRIPTOR),\n            1,\n            PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,    //Flags\n            PFD_TYPE_RGBA,            //The kind of framebuffer. RGBA or palette.\n            32,                        //Colordepth of the framebuffer.\n            0, 0, 0, 0, 0, 0,\n            0,\n            0,\n            0,\n            0, 0, 0, 0,\n            24,                        //Number of bits for the depthbuffer\n            8,                        //Number of bits for the stencilbuffer\n            0,                        //Number of Aux buffers in the framebuffer.\n            PFD_MAIN_PLANE,\n            0,\n            0, 0, 0\n        };\n\n        HDC ourWindowHandleToDeviceContext = GetDC(hWnd);\n\n        int  letWindowsChooseThisPixelFormat;\n        letWindowsChooseThisPixelFormat = ChoosePixelFormat(ourWindowHandleToDeviceContext, &amp;pfd);\n        SetPixelFormat(ourWindowHandleToDeviceContext, letWindowsChooseThisPixelFormat, &amp;pfd);\n\n        ourOpenGLRenderingContext = wglCreateContext(ourWindowHandleToDeviceContext);\n        wglMakeCurrent(ourWindowHandleToDeviceContext, ourOpenGLRenderingContext);\n        MessageBoxA(0, (char*)glGetString(GL_VERSION), \"OPENGL VERSION\", 0);\n\n        if(glewInit() != GLEW_OK) {\n            MessageBoxA(0, (char*)glGetString(GL_VERSION), \"Error: Could not init OGL API (GLEW)\", 0);\n        }\n\n    }\n    break;\n    case WM_CLOSE:\n        //quit code\n        wglDeleteContext(ourOpenGLRenderingContext);\n        PostQuitMessage(0);\n        break;\n    default:\n        return DefWindowProc(hWnd, message, wParam, lParam);\n    }\n    return 0;\n\n}\n</code></pre>\n"}]