[{"tags": ["c++"], "comments": [{"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 1, "creation_date": 1449100925, "post_id": 34055438, "comment_id": 55865034, "body": "If the array <code>GetItemData</code> tries to read is length-0 or length-1, then <code>GetItemData(1)</code> will be index-out-of-bounds."}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449101052, "post_id": 34055438, "comment_id": 55865060, "body": "why is that function returning a <code>long</code> when it should return a <code>double*</code>?"}, {"owner": {"reputation": 2235, "user_id": 1408096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5bb575e41dc47935b4f46ffc543da8ee?s=128&d=identicon&r=PG", "display_name": "xhudik", "link": "https://stackoverflow.com/users/1408096/xhudik"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1535695830, "post_id": 34055438, "comment_id": 91169387, "body": "@SergeyA - flagged by security sw  like qualsys"}], "answers": [{"tags": [], "owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "is_accepted": false, "score": 0, "last_activity_date": 1449103831, "creation_date": 1449103831, "answer_id": 34055942, "question_id": 34055438, "link": "https://stackoverflow.com/questions/34055438/out-of-bounds-read-off-by-one-vulnerability/34055942#34055942", "title": "Out-of-bounds read: off-by-one vulnerability", "body": "<p>As a comment pointed out, what if the list is empty? What if the list has only one item in it?</p>\n\n<p>On a different note, casting a long to a double* and then dereferencing it is undefined behavior in most modern C++ compilers (violates strict type-aliasing rules). And as a portability concern, 'long' is not necessarily the same size as 'double*'.</p>\n"}, {"comments": [{"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "edited": false, "score": 0, "creation_date": 1449105281, "post_id": 34055985, "comment_id": 55866369, "body": "I believe it&#39;s actually undefined behavior at the point where he dereferences it, by the strict aliasing rule: <a href=\"http://stackoverflow.com/a/7005988/5557309\">stackoverflow.com/a/7005988/5557309</a>"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1449104069, "creation_date": 1449104069, "answer_id": 34055985, "question_id": 34055438, "link": "https://stackoverflow.com/questions/34055438/out-of-bounds-read-off-by-one-vulnerability/34055985#34055985", "title": "Out-of-bounds read: off-by-one vulnerability", "body": "<p>Yes, your code may be in an incorrect manner.</p>\n\n<p>Converting integer to pointer is implementation-defined and if pointer requires more memory than <code>long</code> -- for example, <code>sizeof(long)=4, sizeof(double*)=8</code> -- The conversion will lead to dropping some information and it may lead to Segmentation Fault.</p>\n\n<p>To pass pointers, you should use correct pointer types.</p>\n\n<p>I don't know if there will be out-of-bounds error because I do bot know the implementation of <code>GetItemData()</code>.</p>\n"}], "owner": {"reputation": 197, "user_id": 1742785, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fc66b0a43e993efffcbf65a77b330985?s=128&d=identicon&r=PG", "display_name": "user12222", "link": "https://stackoverflow.com/users/1742785/user12222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1449104069, "creation_date": 1449100707, "question_id": 34055438, "link": "https://stackoverflow.com/questions/34055438/out-of-bounds-read-off-by-one-vulnerability", "title": "Out-of-bounds read: off-by-one vulnerability", "body": "<p>The following code is being flagged as a probable out of bounds read vulnerability. I don't understand how this can be an issue because the variable <code>value</code> should contain the data present in the address of the <code>valuePtr</code>. I would like to know if the code below is writing the data to <code>value</code> in an incorrect manner.</p>\n\n<pre><code> long GetItemData(long Index);\n double* valuePtr = (double*) GetItemData(1);\n double value = *valuePtr;\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2015", "visual-studio-macros"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 2805681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnT2F.jpg?s=128&g=1", "display_name": "Andy Evans", "link": "https://stackoverflow.com/users/2805681/andy-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1449525293, "creation_date": 1449525293, "answer_id": 34144002, "question_id": 34055392, "link": "https://stackoverflow.com/questions/34055392/cannot-find-vcclcompilertool-in-vs2015-macro-using-visual-commander/34144002#34144002", "title": "Cannot find VCCLCompilerTool in VS2015 macro (using Visual Commander)", "body": "<p>Thanks to Sergey Vlasov, author of Visual Commander, I found the answer. He pointed out that the C# version of the sample code worked in VS2015. The C# and VB code are slightly different in the line in question. The C# code is:</p>\n\n<pre><code>tool = \n  (Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool)\n  tools.Item(\"VCCLCompilerTool\");\n</code></pre>\n\n<p>while the VB code is:</p>\n\n<pre><code>tool = CType(cfg.Tools(\"VCCLCompilerTool\"), _\n  Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool)\n</code></pre>\n\n<p>This VB works fine in VS2010, but it looks like in VS2015, the Tools collection can no longer be indexed by name by default. So I just needed to add \".Item\", which changed the VB code to this:</p>\n\n<pre><code>tool = CType(cfg.Tools.Item(\"VCCLCompilerTool\"), _\n  Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool)\n</code></pre>\n\n<p>Now everything's fine with this macro. </p>\n"}], "owner": {"reputation": 71, "user_id": 2805681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnT2F.jpg?s=128&g=1", "display_name": "Andy Evans", "link": "https://stackoverflow.com/users/2805681/andy-evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449525293, "creation_date": 1449100454, "last_edit_date": 1449180858, "question_id": 34055392, "link": "https://stackoverflow.com/questions/34055392/cannot-find-vcclcompilertool-in-vs2015-macro-using-visual-commander", "title": "Cannot find VCCLCompilerTool in VS2015 macro (using Visual Commander)", "body": "<p>I am using Visual Commander (from <a href=\"https://vlasovstudio.com/visual-commander/\" rel=\"nofollow\">https://vlasovstudio.com/visual-commander/</a>) to port some macros for manipulating C++ projects from VS2010 to VS2015. Things seem to work OK (I can access solutions, create VCProjects, loop through Configurations, etc.), but I am having one problem - the call which worked in VS2010:</p>\n\n<pre><code>cfg.Tools(\"VCCLCompilerTool\")\n</code></pre>\n\n<p>...fails in VS2015, with a \"System.MissingMemberException: No default member found for type 'VCCollectionShim'.\" error, suggesting that the collection doesn\u2019t have a \"VCCLCompilerTool\" item.</p>\n\n<p>Does anyone know how to fix this? Or another way to get access to the C++ compiler settings for a configuration? (Other than manually parsing the vcxproj XML file.)</p>\n\n<p>If I print out the ToString() value of each item in cfg.Tools, I just see 'shims' such as 'Microsoft.VisualStudio.Project.VisualC.VCProjectEngine.VCCLCompilerToolShim'.</p>\n\n<p>If I do the same in a real VS2010 macro (which works), every item shows as 'System.__ComObject'.</p>\n\n<p>Searching on the internet suggests that a \u2018shim\u2019 error means that the code is accessing the wrong version of the VCProjectEngine or VCProject assemblies. I do have VS2005 and VS2010 installed for use in other projects, but I\u2019ve temporarily renamed every place where old versions of these DLLs live and still get the same problem. Maybe it\u2019s still getting it from somewhere else, like the GAC?</p>\n\n<p>I tried inserting the sample from the IVCCollection.Item Method documentation at <a href=\"https://msdn.microsoft.com/en-US/library/microsoft.visualstudio.vcprojectengine.ivccollection.item(v=vs.140).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-US/library/microsoft.visualstudio.vcprojectengine.ivccollection.item(v=vs.140).aspx</a> into a Visual Commander command, and got the same result.</p>\n\n<pre><code>Imports EnvDTE\nImports EnvDTE80\nImports Microsoft.VisualBasic\n\nImports System\n\nImports System.Diagnostics\nImports Microsoft.VisualStudio.VCProjectEngine\nImports System.Text\n\nPublic Class C\n    Implements VisualCommanderExt.ICommand\n\n    Sub Run(DTE As EnvDTE80.DTE2, package As Microsoft.VisualStudio.Shell.Package) Implements VisualCommanderExt.ICommand.Run\n        EnablePREfastExample(DTE)\n    End Sub\n\nSub EnablePREfastExample(ByVal dte As DTE2)\n    Dim prj As VCProject\n    Dim cfgs, tools As IVCCollection\n    Dim cfg As VCConfiguration\n    Dim tool As VCCLCompilerTool\n    Dim sb As New StringBuilder\n\n    prj = CType(dte.Solution.Projects.Item(1).Object, _\n      Microsoft.VisualStudio.VCProjectEngine.VCProject)\n\n    cfgs = CType(prj.Configurations, _\n      Microsoft.VisualStudio.VCProjectEngine.IVCCollection)\n\n    cfg = CType(cfgs.Item(1), _\n      Microsoft.VisualStudio.VCProjectEngine.VCConfiguration)\n\n' This fails\n    tool = CType(cfg.Tools(\"VCCLCompilerTool\"), _\n      Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool)\n\n\n    sb.Length = 0\n    sb.Append(\"Current project PREfast setting: \" _\n      &amp; tool.EnablePREfast &amp; Environment.NewLine)\n    sb.Append(\"Flag: \" &amp; tool.AdditionalOptions)\n    MsgBox(sb.ToString)\n\nEnd Sub\nEnd Class\n</code></pre>\n\n<p>I set the value in the References\u2026 dialog in Visual Commander to \"Microsoft.VisualStudio.VCProjectEngine\". (I also tried fully specifying the path name like \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\PublicAssemblies\\Microsoft.VisualStudio.VCProjectEngine.dll\", or a full GAC name like \u201cMicrosoft.VisualStudio.VCProjectEngine, Version=14.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\u201d and got the same bad result.)</p>\n"}, {"tags": ["c++", "validation", "loops", "input"], "comments": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1449100503, "post_id": 34055375, "comment_id": 55864904, "body": "Please post <a href=\"https://stackoverflow.com/help/mcve\">a Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 2, "creation_date": 1449100907, "post_id": 34055375, "comment_id": 55865026, "body": "please for the love jove - format your code..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449102218, "post_id": 34055375, "comment_id": 55865399, "body": "Instead of <code>rand</code>, take a look at <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\"><code>std::uniform_int_distribution</code></a>. It will give you better randomness and front-loads all of the difficulty in use. (Or in English, harder to set up, but then it is fire and forget)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449102968, "post_id": 34055375, "comment_id": 55865615, "body": "Last edit made things worse. Stop messing with this code and write a simple little program that does nothing but read a 1 or 0 from the user. Play with that for a while. If you can&#39;t get it to work, you are in great position to ask a tightly focused, complete question."}, {"owner": {"reputation": 311, "user_id": 588960, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/964d268f687b2d410e03d9845a87ca75?s=128&d=identicon&r=PG&f=1", "display_name": "aasthetic", "link": "https://stackoverflow.com/users/588960/aasthetic"}, "edited": false, "score": 0, "creation_date": 1449105711, "post_id": 34055375, "comment_id": 55866484, "body": "Please use something like this for formatting the code :- <a href=\"http://prettyprinter.de/\" rel=\"nofollow noreferrer\">prettyprinter.de</a> . It is difficult for a lot of people to follow the code. You will get better responses if you indent your code properly."}, {"owner": {"reputation": 311, "user_id": 588960, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/964d268f687b2d410e03d9845a87ca75?s=128&d=identicon&r=PG&f=1", "display_name": "aasthetic", "link": "https://stackoverflow.com/users/588960/aasthetic"}, "edited": false, "score": 0, "creation_date": 1449106171, "post_id": 34055375, "comment_id": 55866631, "body": "I have edited the code to the best of my abilities."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449105178, "post_id": 34056016, "comment_id": 55866339, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow noreferrer\"><code>atoi</code></a> is no better than <code>cin</code> directly to an <code>int</code>. This is the right idea, but you want <a href=\"http://en.cppreference.com/w/cpp/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtol</code></a> or <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\"><code>std::stoi</code></a> to ensure the user typed in 1 or 0 and nothing else."}], "tags": [], "owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1449104258, "creation_date": 1449104258, "answer_id": 34056016, "question_id": 34055375, "link": "https://stackoverflow.com/questions/34055375/c-input-validation-to-avoid-ability-to-break-code/34056016#34056016", "title": "C++ Input Validation to avoid ability to break code", "body": "<p>You should take input from the user as a string/character array first and then attempt to convert it to an int (there are a number of ways to do this - Google is your friend ;)) but atoi (ASCII to int) is probably the quickest/simplest. If that fails, ask the user to enter a valid input, repeat until you get a 1 or 0, something like that.</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 0, "last_activity_date": 1449107032, "creation_date": 1449107032, "answer_id": 34056437, "question_id": 34055375, "link": "https://stackoverflow.com/questions/34055375/c-input-validation-to-avoid-ability-to-break-code/34056437#34056437", "title": "C++ Input Validation to avoid ability to break code", "body": "<p>There are multiple places where you expect input. I couldn't make much sense of your code.</p>\n\n<p>Based on your description you just need one place to read the integer: a loop reading the choice and verifying the correct input was received. That should be rather straight forward...</p>\n\n<pre><code> for (int choice(0); true; ) {\n     std::cout &lt;&lt; \"some message goes here\\n\";\n     if (std::cin &gt;&gt; choice) {   // successfully read a value\n         if (choice == 0) {      // the choice is to stop\n             break;\n         }\n         else if (choice == 1) { // the choice is to carry on\n             play_again();\n         }\n         else {                  // an invalid choice was made\n             std::cout &lt;&lt; \"value \" &lt;&lt; choice &lt;&lt; \" is out of range\\n\"\n         }\n     }\n     else if (std::cin.eof()) {  // input failed because nor more input\n         break;\n     }\n     else {                      // a non-integer was entered\n         std::cout &lt;&lt; \"a non-integer was entered\\n\";\n         std::cin.clear(); // clear error state and ignore current line\n         std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max();\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5472249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464bf62935b13a44fa9a33008f2f44cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/5472249/tiffany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449107032, "creation_date": 1449100352, "last_edit_date": 1449102809, "question_id": 34055375, "link": "https://stackoverflow.com/questions/34055375/c-input-validation-to-avoid-ability-to-break-code", "title": "C++ Input Validation to avoid ability to break code", "body": "<p>I have written a program that simulates a fishing game. The program is inside a running loop to iterate as long as the user wishes. The issue is that anything that is entered, other than 1 or 0, breaks my code. I have been trying different things for hours now, and I need some help! My main cpp file code is included. Please let me know if my header files are needed for your review as well. </p>\n\n<p>It has been requested for me to edit the code. The problem is that anything other than an integer breaks my code when entered. I do not want this. I want the program to catch the input and continue looping until the user enter's the right input ( 1 or 0) or quits the game. </p>\n\n<pre><code>Game game; // Game object game declared\ncout&lt;&lt;\"Welcome to Go Fish 2.0!\"&lt;&lt;endl; // welcome message\ncout&lt;&lt;\"Would you like to play?\"&lt;&lt;endl; // Prompts user to play\ncout&lt;&lt;\"1 to play, 0 to exit:\"&lt;&lt;endl; // Provides user with input choices\ncin&gt;&gt;choice; // user enters game play choice\n\nif (choice == 1) // while user chooses to play game\nplay = true; // play boolean is set to true\nelse if (choice == 0) // while user chooses to end game\n   play = false; // play boolean is false\nwhile ( ! cin&gt;&gt;choice) { // while user entry is not valid\n// display correct inpout choices again\n    cin.clear();\n    cin.ignore (100, '\\n');\ncout &lt;&lt;\"You entered invalid data. Please enter the numerical value 1 if you want to play again or 0 if you dont.\"&lt;&lt;endl;\ncin &gt;&gt; choice; // hopefully user enters valid input\n\nif (choice == 1) { // if user chooses proper input after improper input\nplay = true;// play boolean is set to true\nbreak;// break\n}\n}\n\n\ntotal=0; // variable total is initialized to 0\nwhile (play == true) { // while play boolean is set to true; user wants to play game\n\ntotal1 += game.playgame(total); // total1 variable keeps a running total of the game\n//game.playgame(total) uses the game object to call the playgame function that passes the variable total\n// when game.playgame(total) is called this funciton essentially mobilizes game play of die rolling and point accumulation\n//each time this function is called (as many times as user wants to play game), the running total is incremented\n\ncout&lt;&lt; \"Do you want to play again? (0 for no, 1 for yes)\"&lt;&lt;endl;// asks user if they want to play again\ncin &gt;&gt; choice;// user enters choice\n\nif (choice == 1) // if user enters 1\n{\nplay = true; // play is assigned to true\n}\n\n\nelse if (choice == 0) // if user enters 0\n{\nplay = false; // play is assigned to false\n}\n/*  \nwhile ( ! cin&gt;&gt;choice) { // while user entry is not valid\n// display correct inpout choices again\n    cin.clear();\n    cin.ignore (100, '\\n');\ncout &lt;&lt;\"You entered invalid data. Please enter the numerical value 1 if you want to play again or 0 if you dont.\"&lt;&lt;endl;\ncin &gt;&gt; choice; // hopefully user enters valid input\n\nif (choice == 1) { // if user chooses proper input after improper input\nplay = true;// play boolean is set to true\nbreak;// break\n}\n}\n\n\nif (choice == 1) { // if user chooses proper input after improper input\nplay = true;// play boolean is set to true\nbreak;// break\ncout&lt;&lt;\"My Total game points are \"&lt;&lt;total1&lt;&lt;endl; // displays user's total points from whole game\nif (total1&gt;100) // if game total greater than 100\ncout&lt;&lt;\"Awesome! You're a great fisher!\"&lt;&lt;endl; // congratulate user\nif (total1&lt;100)// if game total is less than 100\ncout&lt;&lt;\"Good job, but play again so you can fish some more.\"&lt;&lt;endl;// chastise user\nsystem(\"pause\");\n}\n\n}\nreturn 0;// end main function\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "inline", "header-files"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1449100712, "post_id": 34055343, "comment_id": 55864974, "body": "<i>Will compiler be controllable so that they don&#39;t have to be inline, for example, when the function is huge?</i> - Compilers do this anyway, whether it&#39;s marked <code>inline</code> (including an inline member function definition) or not. Following the One Definition Rule is the larger part of it these days."}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1449101125, "post_id": 34055470, "comment_id": 55865083, "body": "If you&#39;re going to split them up within the header like that, you&#39;d better also make up for the lost implicit <code>inline</code> that you get from definitions within in the class so that you don&#39;t violate ODR."}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1449101962, "post_id": 34055470, "comment_id": 55865331, "body": "I&#39;m not sure if this is exactly related to the ODR (One Definition Rule - I had to look up that acronym ;)) but you&#39;re totally right about the implicit inline - This article has a good explanation - <a href=\"http://www.informit.com/blogs/blog.aspx?uk=30-C-Tips-in-30-Days-Tip-3-inline-Dos-and-Donts-\" rel=\"nofollow noreferrer\">informit.com/blogs/&hellip;</a>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1449102265, "post_id": 34055470, "comment_id": 55865417, "body": "By providing a regular definition in the header, two separate translation units including the header will produce two copies of the definition. Two plain old definitions doesn&#39;t fit the One Definition Rule. I&#39;m also not so sure about the article: <i>For example, if you declare a member function in a class and then define that member function outside the class body, the in-class declaration must include an explicit inline in both places.</i> - Either place (the declaration or definition) is fine and will work the same. Personally, I feel it should be the latter, treated as an implementation detail."}, {"owner": {"reputation": 1238, "user_id": 2175975, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/994fd0b30b1cd46b51af699c4a80a7ce?s=128&d=identicon&r=PG", "display_name": "Splash", "link": "https://stackoverflow.com/users/2175975/splash"}, "edited": false, "score": 0, "creation_date": 1449159964, "post_id": 34055470, "comment_id": 55895408, "body": "Thanks folks.  I guess I will do it this way (all in .h), and if I encounter a problem when building, I will break them up to two places."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1450527982, "post_id": 34055470, "comment_id": 56483003, "body": "Compiletimes will not necessarily go up, as you end up with fewer translation units."}], "tags": [], "owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "is_accepted": false, "score": 2, "last_activity_date": 1449100911, "creation_date": 1449100911, "answer_id": 34055470, "question_id": 34055343, "link": "https://stackoverflow.com/questions/34055343/can-i-implemented-all-c-member-function-in-header-file-but-not-intended-for-in/34055470#34055470", "title": "Can I implemented all C++ member function in header file but not intended for inline?", "body": "<p>It is perfectly fine to place all implementation code in the .h file if you want, it usually depends on the situation. It's usually good practice to split up the interface and implementation even if all the code is in the .h file by doing something like this</p>\n\n<pre><code>class MyClass {\npublic:\n    void doSomethingUseful();\n};\n\n....\n\nvoid MyClass::doSomethingUseful() {\n    // code goes here....\n}\n</code></pre>\n\n<p>Not all functions will automatically be inlined, the compiler usually decides what to inline or not. Larger functions will likely not be inlined even if they're in the header. You can use the inline keyword to give a hint to the compiler that you'd like the function to be inlined but this is no guarantee (also as a small aside, functions marked as inline in a .cpp file will be inlined, but only when called from other functions within that same .cpp file)</p>\n\n<p>Compile times will be slower with more code in the .h file so it's best to try and reduce the amount of code in them as much as possible. I guess in your case though it shouldn't be that noticeable.</p>\n\n<p>I hope that is of some help! :)</p>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1449161015, "creation_date": 1449161015, "answer_id": 34071528, "question_id": 34055343, "link": "https://stackoverflow.com/questions/34055343/can-i-implemented-all-c-member-function-in-header-file-but-not-intended-for-in/34071528#34071528", "title": "Can I implemented all C++ member function in header file but not intended for inline?", "body": "<p>You can put defines around functions to prevent them being implemented more than once\nheader file:-</p>\n\n<pre><code>class MyClass {\npublic:\n    void doSomethingUseful();\n};\n// inline functions\n\n....\n// non inline function\n#ifdef MYCLASSCPP\nvoid MyClass::doSomethingUseful() {\n    // code goes here....\n}\n#endif\n</code></pre>\n\n<p>Then define MYCLASSCPP in just one CPP file. (or complier parameter).</p>\n"}], "owner": {"reputation": 1238, "user_id": 2175975, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/994fd0b30b1cd46b51af699c4a80a7ce?s=128&d=identicon&r=PG", "display_name": "Splash", "link": "https://stackoverflow.com/users/2175975/splash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2377, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1449161015, "creation_date": 1449100102, "last_edit_date": 1449160308, "question_id": 34055343, "link": "https://stackoverflow.com/questions/34055343/can-i-implemented-all-c-member-function-in-header-file-but-not-intended-for-in", "title": "Can I implemented all C++ member function in header file but not intended for inline?", "body": "<p>For C programs, I know I need .h, and .cpp to allow multiple .h to be read and compiled together but linked later.</p>\n\n<p>However, for C++, I don't want to break up the class member function declaration and definition to two parts.  Although it is the typical C++ way, I am trying to merge member function declaration and definition in one header file.  I saw some people doing that.  I would like to know if there is any problem to do this.  </p>\n\n<ol>\n<li>I know all members defined in .h class definition are then inline functions, but can they be non-inline in any way?  Will compiler be controllable so that they don't have to be inline, for example, when the function is huge?</li>\n<li>The VS2015 intellisense shows error when the 2s is in a member function defined in header file, but doesn't show that in cpp file.  But it compiles.  Is it showing that I am doing it wrong, or it's a bug for VS2015?  I deleted the sdf, restarted the project, as long as copy the function into the .h file, it shows a read line under <code>std::this_thread::sleep_for(2s);</code></li>\n</ol>\n\n<p>see</p>\n\n<pre><code>class testtest {\n    void tryagain() {\n        using namespace std::chrono_literals;\n        auto twosec = 2s;\n        std::this_thread::sleep_for(2s);// problem is here\n    }\n};\n</code></pre>\n\n<ol start=\"3\">\n<li>Is compiling faster if we separate the .h and .cpp?</li>\n<li>My final compiler would be g++4.9.2, and I am using VS2015 to test build.  The final code will run on an ARM with 1GB RAM on Linux.</li>\n</ol>\n\n<p>I don't intend to argue about wich style is better, but hope to focus on whether it works, and what are the trade offs.</p>\n"}, {"tags": ["c++", "c++11", "memory", "vector", "deep-copy"], "comments": [{"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449100663, "post_id": 34055339, "comment_id": 55864962, "body": "I&#39;ve read this question a couple of times (may be it&#39;s late) but it&#39;s not clear whether you are having a problem implementing the swap for the <i>custom type</i> or the <i>vector</i>? (btw. I don&#39;t think <code>memset()</code> will work) And it&#39;s not clear where the copy-swap with unitialized memory kicks in (implies you are trying to access an element that is outside of the &quot;bounds&quot; of your vector...)"}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "reply_to_user": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449101174, "post_id": 34055339, "comment_id": 55865099, "body": "Hey Nim! Sorry if my explanation isn&#39;t great, I&#39;ll try and clarify. Basically when doing the swap the, info_ pointer that is sitting in uninitialised memory value gets moved into the temporary that I pass into that function, and then when the scope ends, the destructor is called on that temporary, but the info_ pointer is just garbage, so calling delete[] causes a crash. If I memset the memory before, it will be null, and calling delete has no effect. I just want to know if this is an okay thing to do or bad practice. I can&#39;t think of a good alternative :("}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449101369, "post_id": 34055339, "comment_id": 55865157, "body": "...but that implies you are <i>swapping</i> with an element that is <i>out-of-bounds</i> (i.e. beyond the <i>size</i> of the vector..)"}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "reply_to_user": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449101756, "post_id": 34055339, "comment_id": 55865272, "body": "No I&#39;ve allocated space for it (see the example code) it is just uninitialised so anything could be in that space because no constructor has been called and I haven&#39;t zeroed the memory (unless I do call memset). You can copy and paste the code into ideone to have a look at what it&#39;s doing and what happens if you comment out the memset line if that&#39;d help."}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449102010, "post_id": 34055339, "comment_id": 55865343, "body": "..I understand - but what you are modelling is a case where you are swapping with an object that has not been constructed - this is invalid. You cannot swap with an object that has not been constructed (in the context of your vector, you are accessing an element outside of it&#39;s bounds - i.e. one that has not been constructed - reserving storage is <i>not the same</i> as constructing an object...)"}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "reply_to_user": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1449102507, "post_id": 34055339, "comment_id": 55865486, "body": "Ah okay I see what you&#39;re saying... that makes sense! Thanks! So then how the hell does std::vector work then when you reserve a bunch of space and then push_back an element? It doesn&#39;t call the constructor on those elements initially during reserve as you can use std::vector with objects without a default constructor."}], "answers": [{"comments": [{"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1449102369, "post_id": 34055612, "comment_id": 55865445, "body": "Ah okay I see - so my problem then becomes what if that object does not have a default constructor? I take it I need to call placement new on that element but what if I want to call a specific constructor. Is there a way to do that? How does std::vector handle this case when you call reserve on it and then push_back elements? Thank you very much for your answer!"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1449102450, "post_id": 34055612, "comment_id": 55865466, "body": "@Tom <code>vector::push_back</code> uses the copy or move constructor. If the type cannot be copied or moved, you can&#39;t have a vector of it (or at least you can&#39;t <code>push_back</code> into it)."}, {"owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1449102920, "post_id": 34055612, "comment_id": 55865600, "body": "Ah okay I see, thank you Brian! I&#39;ve got my solution! :) If I understand correctly I just need to update the code so instead of doing as assignment I do this - new (customType) CustomType(customTypeToCopy); Thank you very much!! :)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "edited": false, "score": 0, "creation_date": 1449103086, "post_id": 34055612, "comment_id": 55865651, "body": "@Tom You might also want to add an rvalue overload for <code>push_back</code> and use <code>std::move</code>"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 1, "last_activity_date": 1449101782, "creation_date": 1449101782, "answer_id": 34055612, "question_id": 34055339, "link": "https://stackoverflow.com/questions/34055339/how-to-best-handle-copy-swap-idiom-with-uninitialised-memory/34055612#34055612", "title": "How to best handle copy-swap idiom with uninitialised memory", "body": "<p>You don't use copy-and-swap for construction.</p>\n\n<p>You use copy-and-swap for assignment in order to solve the following problem: the left side of the assignment is an already-initialized object, so it needs to free the resources it holds before having the right side's state copied or moved into it; but if the copy or move construction fails by throwing an exception, we want to keep the original state.</p>\n\n<p>If you're doing construction rather than assignment---because the target is uninitialized---the problem solved by copy-and-swap doesn't exist. You just invoke the constructor with placement new. If it succeeds, great. If it fails by throwing an exception, the language guarantees that any subobjects already constructed are destroyed, and you just let the exception propagate upward; in the failure case the state of the target will be the same as it was before: uninitialized.</p>\n"}], "owner": {"reputation": 1446, "user_id": 1947066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gR6Eb.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1947066/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 34055612, "answer_count": 1, "score": 1, "last_activity_date": 1449103127, "creation_date": 1449100077, "last_edit_date": 1449103127, "question_id": 34055339, "link": "https://stackoverflow.com/questions/34055339/how-to-best-handle-copy-swap-idiom-with-uninitialised-memory", "title": "How to best handle copy-swap idiom with uninitialised memory", "body": "<p>As an academic exercise I created a custom vector implementation I'd like to support copying of non-pod types.</p>\n\n<p>I would like the container to support storing elements that do not provide a default constructor.</p>\n\n<p>When I reserve memory for the vector, and then push_back an element (which manages it's own resources and has a copy and assignment operator implemented - I'm ignoring move constructors for the moment) I have an issue using the copy-swap idiom for that type.</p>\n\n<p>Because the swap happens on a type that is still uninitialised memory, after the swap, the destructor which is called for the temporary will attempt to free some piece of uninitialised data which of course blows up.</p>\n\n<p>There are a few possible solutions I can see. One is ensure all non-pod types implement a default constructor and call that (placement new) on each element in the collection. I'm not a fan of this idea as it seems both wasteful and cumbersome. </p>\n\n<p>Another is to memset the memory for the space of the type in the container to 0 before doing the swap (that way the temporary will be null and calling the destructor will operate without error). This feels kind of hacky to me though and I'm not sure if there is a better alternative (see the code below for an example of this) You could also memset all the reserved space to 0 after calling reserve for a bunch of elements but again this could be wasteful.</p>\n\n<p>Is there documentation on how this is implemented for std::vector as calling reserve will not call the constructor for allocated elements, whereas resize will (and for types not implementing a default constructor a constructed temporary can be passed as a second parameter to the call)</p>\n\n<p>Below is some code you can run to demonstrate the problem, I've omitted the actual vector code but the principle remains the same.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\n// Dumb example type - not something to ever use\nclass CustomType {\npublic:\n    CustomType(const char* info) {\n        size_t len = strlen(info) + 1;\n        info_ = new char[len];\n        for (int i = 0; i &lt; len; ++i) {\n            info_[i] = info[i];\n        }\n    }\n\n    CustomType(const CustomType&amp; customType) {\n        size_t len = strlen(customType.info_) + 1;\n        info_ = new char[len];\n        for (int i = 0; i &lt; len; ++i) {\n            info_[i] = customType.info_[i];\n        }\n    }\n\n    CustomType&amp; operator=(CustomType customType) {\n        swap(*this, customType);\n        return *this;\n    }\n\n    void swap(CustomType&amp; lhs, CustomType&amp; rhs) {\n        std::swap(lhs.info_, rhs.info_);\n    }\n\n    ~CustomType() {\n        delete[] info_;\n    }\n\n    char* info_;\n};\n\nint main() {\n    CustomType customTypeToCopy(\"Test\");\n\n    // Mimics one element in the array - uninitialised memory\n    char* mem = (char*)malloc(sizeof(CustomType));\n\n    // Cast to correct type (would be T for array element)\n    CustomType* customType = (CustomType*)mem;  \n    // If memory is cleared, delete[] of null has no effect - all good\n    memset(mem, 0, sizeof(CustomType));\n    // If the above line is commented out, you get malloc error - pointer \n    // being freed, was not allocated\n\n    // Invokes assignment operator and copy/swap idiom\n    *customType = customTypeToCopy;\n\n    printf(\"%s\\n\", customType-&gt;info_);\n    printf(\"%s\\n\", customTypeToCopy.info_);\n\n    return 0;\n}\n</code></pre>\n\n<p>Any information/advice would be greatly appreciated!</p>\n\n<p>Solved!</p>\n\n<p>Thank you to @Brian and @Nim for helping me understand the use case for when assignment (copy/swap) is valid.</p>\n\n<p>To achieve what I wanted I simply needed to replace the line</p>\n\n<pre><code>*customType = customTypeToCopy;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>new (customType) CustomType(customTypeToCopy);\n</code></pre>\n\n<p>Invoking the copy constructor not the assignment operator!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "input", "stream", "cin", "data-entry"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1449099847, "post_id": 34055243, "comment_id": 55864701, "body": "&quot;<i>Is there a way I can force the CIN input to match exactly, so that the program will input the data on its own according to my specifications?</i>&quot; Huh? Are you talking about validating input or output?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1449100000, "post_id": 34055243, "comment_id": 55864750, "body": "Why are you typing into the validation script instead of piping your program&#39;s output into it?"}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449103569, "post_id": 34055243, "comment_id": 55865820, "body": "I tried putting it in like submit &lt; myinput.txt ... but it didn&#39;t work for some reason."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449103591, "post_id": 34055243, "comment_id": 55865823, "body": "see here <a href=\"http://stackoverflow.com/questions/34055210/script-program-inputs-in-bash-ubuntu-linux/34055278?noredirect=1#comment55865419_34055278\" title=\"script program inputs in bash ubuntu linux\">stackoverflow.com/questions/34055210/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449103635, "post_id": 34055275, "comment_id": 55865840, "body": "I do know what is being expected. I just want to be able to do this: cin &lt;&lt; &quot;This is what will be entered&quot;"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5632744"}, "is_accepted": true, "score": 3, "last_activity_date": 1449099841, "creation_date": 1449099841, "answer_id": 34055275, "question_id": 34055243, "link": "https://stackoverflow.com/questions/34055243/spoofing-stdcin-in-c/34055275#34055275", "title": "Spoofing std::cin in C++", "body": "<p>No, there isn't. You must know what is being expected beforehand to pass the validation.</p>\n"}], "owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 34055275, "answer_count": 1, "score": 0, "last_activity_date": 1449099841, "creation_date": 1449099652, "question_id": 34055243, "link": "https://stackoverflow.com/questions/34055243/spoofing-stdcin-in-c", "title": "Spoofing std::cin in C++", "body": "<p>I'm in a course for C++ programming.</p>\n\n<p>Our professor created a linux validation script against which our program output must match exactly.</p>\n\n<p>The problem is, this program excepts probably 150-200 lines of input and if anything goes in wrong you have to start all over again. If you even enter an incorrect char, it must be restarted as the backspace registers as a character of its own.</p>\n\n<p>Is there a way I can force the CIN input to match exactly, so that the program will input the data on its own according to my specifications?</p>\n"}, {"tags": ["c++", "windows", "disk"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1449100101, "post_id": 34055209, "comment_id": 55864789, "body": "Already had a look at <code>WMI</code> ? See what <code>wmic logicaldisk get *</code> returns and then call the WMI API from C++ (I bet there are examples here on SO)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6233690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGLLA.png?s=128&g=1", "display_name": "JAtkins", "link": "https://stackoverflow.com/users/6233690/jatkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1461218610, "creation_date": 1461218610, "answer_id": 36760905, "question_id": 34055209, "link": "https://stackoverflow.com/questions/34055209/c-method-for-diskpart-list-disk/36760905#36760905", "title": "C++ method for Diskpart list disk", "body": "<p>I use this method:</p>\n\n<ol>\n<li><p>Get a list of disks using GetLogicalDriveStrings().  You can filter for removable or fixed disks with this call.</p></li>\n<li><p>Get a handle to each Volume using something like the following.</p>\n\n<pre><code>HANDLE hVolume = CreateFile(volumeName, access, FILE_SHARE_READ |    FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL);</code></pre></li>\n<li><p>Get the Disk Number using the volume handle.  I cant remember if you need to lock/unmount the volume for this next bit but those are well documented and easy to do now that you have the volume handle.</p>\n\n<pre><code>\n    STORAGE_DEVICE_NUMBER sdn;\n    DWORD dwBytesReturned = 0;\n    if (!DeviceIoControl(hVolume, IOCTL_STORAGE_GET_DEVICE_NUMBER, NULL, 0, &sdn, sizeof(sdn), &dwBytesReturned, NULL)){\n\n<pre><code>}\n\nreturn sdn.DeviceNumber;\n</code></pre>\n\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3723, "user_id": 3731622, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/34ed93a2cf922f7064184109e4b9c16a?s=128&d=identicon&r=PG&f=1", "display_name": "user3731622", "link": "https://stackoverflow.com/users/3731622/user3731622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461218610, "creation_date": 1449099509, "question_id": 34055209, "link": "https://stackoverflow.com/questions/34055209/c-method-for-diskpart-list-disk", "title": "C++ method for Diskpart list disk", "body": "<p>If I run diskpart and give it the command list disk, then it shows me a table like</p>\n\n<pre><code>Disk ###  Status         Size     Free     Dyn  Gpt \n--------  -------------  -------  -------  ---  ---\n\nDisk 0    Online          100 GB      0 B           \nDisk 1    Online         3000 GB      0 B        *  \nDisk 2    No Media           0 B      0 B           \nDisk 3    Foreign         500 GB   490 GB   *         \nDisk 4    No Media           0 B      0 B           \n</code></pre>\n\n<p>How can I obtain obtain such a list using C++?       </p>\n"}, {"tags": ["c++", "type-conversion", "c++builder-xe8"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1449099368, "post_id": 34055135, "comment_id": 55864527, "body": "<code>0xD8</code> is not a valid char value (char ranges from <code>-128</code> to <code>+127</code>)"}, {"owner": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449099409, "post_id": 34055135, "comment_id": 55864545, "body": "hmm then we should use unsigned char then ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1449099479, "post_id": 34055135, "comment_id": 55864574, "body": "One option would be <code>unsigned char sz = strtol( a.c_str(), NULL, 16 );</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1449100618, "post_id": 34055135, "comment_id": 55864943, "body": "What is <code>AnsiString</code>? Where is it defined?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1449106643, "post_id": 34055135, "comment_id": 55866780, "body": "@KeithThompson: <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.AnsiString\" rel=\"nofollow noreferrer\"><code>AnsiString</code></a> is a native string class in C++Builder."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "edited": false, "score": 0, "creation_date": 1449099782, "post_id": 34055236, "comment_id": 55864673, "body": "Yep ur right. :) i never thought about it. i knew that int is -32xxx to + 32xxx  and we are not working with - so i figured out writing unsigned int is better option. But couldnt figure it on chars ^^"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "edited": false, "score": 1, "creation_date": 1449099845, "post_id": 34055236, "comment_id": 55864698, "body": "@RepiatX you&#39;ll find that int is 32-bit in C++Builder"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "edited": false, "score": 1, "creation_date": 1449099869, "post_id": 34055236, "comment_id": 55864707, "body": "Yes , it performs out-of-range conversion (which is OK but it&#39;s generally better to avoid that if there&#39;s an easy alternative)"}, {"owner": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "edited": false, "score": 0, "creation_date": 1449100399, "post_id": 34055236, "comment_id": 55864877, "body": "what you meant by 32 bit? can u explain(or just give me sites to resource) 2-  Why we write 16 as a paramater on strtol? (because 16base?)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "edited": false, "score": 0, "creation_date": 1449100504, "post_id": 34055236, "comment_id": 55864906, "body": "&quot;int is 32-bit&quot; means the range of <code>int</code> is <code>-2147483648</code> to <code>+2147483647</code>, not 32768 etc. as you seemed to be suggesting.  The <code>16</code> in strtol does indeed mean base 16. You could look up its documentation."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1449099634, "creation_date": 1449099634, "answer_id": 34055236, "question_id": 34055135, "link": "https://stackoverflow.com/questions/34055135/how-to-cast-ansistring-to-char/34055236#34055236", "title": "How to cast AnsiString to char?", "body": "<p>One way is:</p>\n\n<pre><code>unsigned char sz = strtol( a.c_str(), NULL, 16 );\n</code></pre>\n\n<p>Note that <code>unsigned char</code> is preferable because plain char is signed, and <code>0xD8</code> is out of range of plain char.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 4611837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd982fb4c8ee9d6c8386add4a3d5340?s=128&d=identicon&r=PG&f=1", "display_name": "kamerunka", "link": "https://stackoverflow.com/users/4611837/kamerunka"}, "is_accepted": false, "score": 1, "last_activity_date": 1449106769, "last_edit_date": 1449106769, "creation_date": 1449099729, "answer_id": 34055255, "question_id": 34055135, "link": "https://stackoverflow.com/questions/34055135/how-to-cast-ansistring-to-char/34055255#34055255", "title": "How to cast AnsiString to char?", "body": "<p>try this:</p>\n\n<pre><code>unsigned char sz = (unsigned char) std::stoul(a, 0, 16);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "edited": false, "score": 0, "creation_date": 1449100013, "post_id": 34055268, "comment_id": 55864757, "body": "thx for replyn thou i get my answer. Yet i got too deep on c functions and forgot about &quot;StrToInt&quot; lol :) thx again"}], "tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": false, "score": 2, "last_activity_date": 1449099795, "creation_date": 1449099795, "answer_id": 34055268, "question_id": 34055135, "link": "https://stackoverflow.com/questions/34055135/how-to-cast-ansistring-to-char/34055268#34055268", "title": "How to cast AnsiString to char?", "body": "<p>A more \"C++Builder-ish\" way of doing this is</p>\n\n<pre><code>unsigned char sz = StrToInt(\"0x\" + a);\n</code></pre>\n\n<p>Though it will make an unnecessary memory allocation.</p>\n"}], "owner": {"reputation": 75, "user_id": 2670737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6crxN.png?s=128&g=1", "display_name": "RepiatX", "link": "https://stackoverflow.com/users/2670737/repiatx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3671, "favorite_count": 0, "accepted_answer_id": 34055236, "answer_count": 3, "score": 3, "last_activity_date": 1449106769, "creation_date": 1449099101, "last_edit_date": 1449099657, "question_id": 34055135, "link": "https://stackoverflow.com/questions/34055135/how-to-cast-ansistring-to-char", "title": "How to cast AnsiString to char?", "body": "<p>What I'm troubling about is conversion. I'm using C++ Rad Studio XE8 (don't ask why cause I had to).</p>\n\n<p>I have variables</p>\n\n<pre><code>AnsiString a = \"D8\";\nchar sz;\n</code></pre>\n\n<p>I want <code>sz</code> to look like this</p>\n\n<pre><code>char sz = 0xD8;\n</code></pre>\n\n<p>How do I cast the <code>AnsiString</code> <code>a</code> to <code>char</code> so that <code>sz</code> will end up equaling <code>0xD8</code>?</p>\n\n<p>I have tried <code>memcpy</code>, <code>strcpy</code>, etc. yet couldn't find solutions.</p>\n"}, {"tags": ["c++", "string", "file", "search", "struct"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449100170, "post_id": 34055106, "comment_id": 55864810, "body": "<code>for (int k=0; k&lt; 10; k++ )</code> will continue the search after the end of the string if the string is less than 9 characters. Consider using <a href=\"http://en.cppreference.com/w/c/string/byte/strncmp\" rel=\"nofollow noreferrer\"><code>strncmp</code></a> instead."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5621921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc4b333e517ccd5895af846f5e86624f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Faber", "link": "https://stackoverflow.com/users/5621921/jack-faber"}, "edited": false, "score": 0, "creation_date": 1449107469, "post_id": 34055195, "comment_id": 55867046, "body": "thanks. The one that I wrote,  its kind of rudimentary but it gets the job done."}, {"owner": {"reputation": 37, "user_id": 5621921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc4b333e517ccd5895af846f5e86624f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Faber", "link": "https://stackoverflow.com/users/5621921/jack-faber"}, "edited": false, "score": 0, "creation_date": 1449107832, "post_id": 34055195, "comment_id": 55867131, "body": "Made a for loop, running through the two names, checking the first letter and if first letter was found, it would run through the whole word. But only thing- when it runs thourgh- b/c if statement, it outputs: found at 1, found at 2 found at...."}], "tags": [], "owner": {"reputation": 32, "user_id": 4864461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vrz8wVmawMo/AAAAAAAAAAI/AAAAAAAAABk/q0HTdzTTAdg/photo.jpg?sz=128", "display_name": "JoyStickFanatic", "link": "https://stackoverflow.com/users/4864461/joystickfanatic"}, "is_accepted": true, "score": 0, "last_activity_date": 1449099451, "creation_date": 1449099451, "answer_id": 34055195, "question_id": 34055106, "link": "https://stackoverflow.com/questions/34055106/how-to-search-for-a-name-in-a-struct-file/34055195#34055195", "title": "How to search for a name in a struct/file", "body": "<p>your current structure is assuming that the name starts at index 0 of the array. \nWhat I would recommend is check every char in the name array against the first char of the searched for name until you either hit the end of the name array or find a match. If you find a match then check the remaining chars in name array against the next char in the searched for string.\nBecause right now all you check for is if both strings start with the same letter.\nTo return the start pos of the name hold onto the index of the first match.\nYou can also use strcomp() if my suggestion was not at all what you were looking for.</p>\n"}], "owner": {"reputation": 37, "user_id": 5621921, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc4b333e517ccd5895af846f5e86624f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Faber", "link": "https://stackoverflow.com/users/5621921/jack-faber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 34055195, "answer_count": 1, "score": 0, "last_activity_date": 1449099451, "creation_date": 1449098926, "last_edit_date": 1449099181, "question_id": 34055106, "link": "https://stackoverflow.com/questions/34055106/how-to-search-for-a-name-in-a-struct-file", "title": "How to search for a name in a struct/file", "body": "<p>I have a struct that holds two names, but they are in character form- so an array\nchar[2][10]\nit's supposed to be two names that are a maximum of ten characters long.\nAnd I want to search through them. </p>\n\n<pre><code>    while (ans3==1)\n{\n    cout &lt;&lt; \"\\nPlease enter the name you want to search\"\n        &lt;&lt;endl;\n    cin &gt;&gt; searchName;\n    for (int i=0; i &lt; size; i++)\n    {\n        cout &lt;&lt;\"\\nsearching \" &lt;&lt;endl;\n        for (int k=0; k&lt; 10; k++ )\n        if ( MyData.name[i][k]==searchName[k])\n        {\n            cout &lt;&lt; \"\\nName was found at position \"&lt;&lt; k &lt;&lt;endl;\n        }\n        else \n            cout &lt;&lt; \"\\nName not found at position \" &lt;&lt;k &lt;&lt;endl;\n    }\n\n    cout &lt;&lt; \"\\nDo you want to search for a name? (1 for y, 2 for n)\" &lt;&lt;endl;\n    cin &gt;&gt; ans3;\n}\n</code></pre>\n\n<p>this compiles, but doesn't do what i want it to do. Can someone please assist. thanks. </p>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1449098893, "post_id": 34055052, "comment_id": 55864339, "body": "&#39;Tree with no root node&#39; is a contradiction in terms. Of course there is a root node: otherwise there is no tree. But it doesn&#39;t have to be <i>in the tree</i>. Your variable <code>e</code> <b>is</b> a pointer to the root node, and so is the value of <code>this</code> inside the first call to <code>evaluate()</code>. Unclear what you&#39;re asking."}, {"owner": {"reputation": 316, "user_id": 3272903, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ba7dba3b99f98de0e6851665ef6b5826?s=128&d=identicon&r=PG&f=1", "display_name": "BryanLavinParmenter", "link": "https://stackoverflow.com/users/3272903/bryanlavinparmenter"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1449099050, "post_id": 34055052, "comment_id": 55864396, "body": "I rephrased the question a bit to add clarity. I cannot edit the first and third snippets of code, only the second. When I try to use e in my <code>evaluate()</code> function I get undeclared identifier errors."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449099138, "post_id": 34055052, "comment_id": 55864434, "body": "Your root pointer is <code>this</code>. Do you understand how objects work in C++? (<code>this</code> roughly means &quot;the current object&quot;)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449099291, "post_id": 34055052, "comment_id": 55864494, "body": "Also, I suspect your crash has nothing to do with <code>this</code> or <code>e</code>, and everything to do with trying to use objects after they&#39;re destroyed. But there&#39;s no way to know that with only the posted code."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1449099301, "post_id": 34055052, "comment_id": 55864501, "body": "Nobody said anything about using <code>e</code> in <code>evaluate()</code>. You can&#39;t. It&#39;s out of scope. Please read what I wrote."}, {"owner": {"reputation": 316, "user_id": 3272903, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ba7dba3b99f98de0e6851665ef6b5826?s=128&d=identicon&r=PG&f=1", "display_name": "BryanLavinParmenter", "link": "https://stackoverflow.com/users/3272903/bryanlavinparmenter"}, "edited": false, "score": 0, "creation_date": 1449099551, "post_id": 34055052, "comment_id": 55864599, "body": "I&#39;ve rephrased / changed the question to be more specific. I now understand using <code>this</code> as a means of pointing to the root node. Now I&#39;m asking about how to solve the problem using recursion given no node in the parameter of the <code>evaluate()</code> function."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1449099639, "post_id": 34055052, "comment_id": 55864624, "body": "You don&#39;t <i>need</i> a node parameter in <code>evaluate()</code>. You have <code>this</code>. It is the current node. The first time, it&#39;s the root, Next time, it&#39;s the root&#39;s left or right child. And so on."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1449100336, "post_id": 34055052, "comment_id": 55864857, "body": "Where are the constructors and <code>+</code> and <code>*</code> operators defined for this class?"}, {"owner": {"reputation": 2202, "user_id": 4230643, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2NkJN.png?s=128&g=1", "display_name": "Throw Away Account", "link": "https://stackoverflow.com/users/4230643/throw-away-account"}, "edited": false, "score": 0, "creation_date": 1449100645, "post_id": 34055052, "comment_id": 55864954, "body": "I can&#39;t help but notice that ExpressionTree has no constructor. That means  your <code>left</code> and <code>right</code> pointers will be uninitialized, which appears to be the cause of your segmentation fault."}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 3272903, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ba7dba3b99f98de0e6851665ef6b5826?s=128&d=identicon&r=PG&f=1", "display_name": "BryanLavinParmenter", "link": "https://stackoverflow.com/users/3272903/bryanlavinparmenter"}, "edited": false, "score": 0, "creation_date": 1449100171, "post_id": 34055229, "comment_id": 55864811, "body": "I rewrote the <code>evaluate()</code> function, and there are no longer any errors, however when I use <code>x=2, y=3, and z=4</code>, it answers out 14, instead of the correct answer of 20."}, {"owner": {"reputation": 316, "user_id": 3272903, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ba7dba3b99f98de0e6851665ef6b5826?s=128&d=identicon&r=PG&f=1", "display_name": "BryanLavinParmenter", "link": "https://stackoverflow.com/users/3272903/bryanlavinparmenter"}, "edited": false, "score": 0, "creation_date": 1449100310, "post_id": 34055229, "comment_id": 55864848, "body": "Disregard that last comment. I realized I put a plus instead of a multiplication sign on the multiplication case. Thanks for your help!"}], "tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": true, "score": 3, "last_activity_date": 1449099580, "creation_date": 1449099580, "answer_id": 34055229, "question_id": 34055052, "link": "https://stackoverflow.com/questions/34055052/evaluating-expression-tree-c/34055229#34055229", "title": "Evaluating expression tree - C++", "body": "<p>You're calling <code>evaluate</code> on the same node, creating an infinite loop.</p>\n\n<p>If you want to call it on the sub-expressions, use <code>left-&gt;evaluate()</code>.</p>\n\n<hr>\n\n<p>There are likely more problems, one I've noticed is this one:</p>\n\n<pre><code>else if(right != NULL)\n</code></pre>\n\n<p>This makes no sense, just because <code>left</code> wasn't <code>NULL</code> you're going to ignore the right subexpression?</p>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1449100497, "last_edit_date": 1449100497, "creation_date": 1449100000, "answer_id": 34055321, "question_id": 34055052, "link": "https://stackoverflow.com/questions/34055052/evaluating-expression-tree-c/34055321#34055321", "title": "Evaluating expression tree - C++", "body": "<p>Your <code>evaluate()</code> method is nonsense. It should look something like this:</p>\n\n<pre><code>double ExpressionTree::evaluate() const\n{\n    if (left != NULL &amp;&amp; right != NULL)\n    {\n        switch (operation)\n        {\n        case '+':\n            return left-&gt;evaluate()+right-&gt;evaluate();\n        case '-':\n            // remaining operators left as an exercise for the reader\n        // ....\n        }\n    }\n    // I'm assuming there are only binary operators,\n    // but if you have unary operators, i.e. unary '-', it's a simple\n    // extension of what's here\n    return data;\n}\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 3272903, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ba7dba3b99f98de0e6851665ef6b5826?s=128&d=identicon&r=PG&f=1", "display_name": "BryanLavinParmenter", "link": "https://stackoverflow.com/users/3272903/bryanlavinparmenter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2031, "favorite_count": 0, "accepted_answer_id": 34055229, "answer_count": 2, "score": -2, "last_activity_date": 1449180409, "creation_date": 1449098676, "last_edit_date": 1449180409, "question_id": 34055052, "link": "https://stackoverflow.com/questions/34055052/evaluating-expression-tree-c", "title": "Evaluating expression tree - C++", "body": "<p>I'm having some trouble with this evaluation function with no pointer as a parameter.</p>\n\n<p>Here's the class definition:</p>\n\n<pre><code>class ExpressionTree\n    {\n    private:\n        double data;            // Used for leaf nodes only.\n        char operation;         // Used for non-leaf nodes only.\n        ExpressionTree *left;   // Will be NULL for a leaf.\n        ExpressionTree *right;  // Will be NULL for a leaf.\n    };\n</code></pre>\n\n<p>As you can see, there are only pointers for the <code>left</code> and <code>right</code> subtrees of the expression tree.</p>\n\n<p>Here's my attempt at an <code>evaluate()</code> function (note no pointer being passed as a parameter)</p>\n\n<pre><code>double ExpressionTree::evaluate() const {\n    if(left != NULL &amp;&amp; right != NULL) {\n        double val;\n\n        double left_val = left-&gt;data;\n        double right_val = right-&gt;data;\n\n        if(operation == '+') val = left-&gt;evaluate() + right-&gt;evaluate();\n        else if(operation == '*') val = left-&gt;evaluate() + right-&gt;evaluate();\n        else val = this-&gt;data;\n        return val;\n    }\n    else {\n        return data;\n    }\n}\n</code></pre>\n\n<p>When running it against this code, I get a Segmentation Fault:</p>\n\n<pre><code>ExpressionTree buildComplex() {\n    double x, y, z;\n    cout &lt;&lt; \"enter three double values, x, then y, then z\\n\";\n    cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n    ExpressionTree ex(x), ey(y), ez(z), e2(2),\n        yz = ey * ez,\n        y2 = e2 * ey,\n        sum1 = ex + yz,\n        full = sum1 + y2;\n    return full;\n}\n\nvoid test4() {\n    cout &lt;&lt; \"test4: construct and evaluate more complex\\n\";\n    ExpressionTree e = buildComplex();\n    cout &lt;&lt; \"x + y * z + 2 * y = \" &lt;&lt; e.evaluate() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I believe the segmentation fault is from the recursive call in the <code>evaluate()</code> function. </p>\n\n<p>The question I am asking is: How can I recursively evaluate the tree without a node being passed as a parameter to the function? I could understand if there was only one layer below the root node, but there will be multiple layers and I don't understand how to solve all of the other layers.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "visual-c++", "overloading", "operator-keyword"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1449098688, "post_id": 34054982, "comment_id": 55864266, "body": "When you used the debugger, which statement is causing the failure?  Remember to <i>watch</i> the values of variables as you execute each statement individually."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5628170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41f7b0b210b7be39e81cce8c9888e56?s=128&d=identicon&r=PG&f=1", "display_name": "Coleslaw234", "link": "https://stackoverflow.com/users/5628170/coleslaw234"}, "edited": false, "score": 0, "creation_date": 1449099066, "post_id": 34055089, "comment_id": 55864400, "body": "How could I fix that?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 11, "user_id": 5628170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41f7b0b210b7be39e81cce8c9888e56?s=128&d=identicon&r=PG&f=1", "display_name": "Coleslaw234", "link": "https://stackoverflow.com/users/5628170/coleslaw234"}, "edited": false, "score": 0, "creation_date": 1449099118, "post_id": 34055089, "comment_id": 55864429, "body": "It depends what rules you actually want to follow. For example, do you want to follow Dutch rules if the computer is running on a machine whose default language is Dutch? If I knew your requirements, I could give you suggestions, but you haven&#39;t stated them. Short answer: Code what you actually want. Or maybe what you want is already there."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 11, "user_id": 5628170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41f7b0b210b7be39e81cce8c9888e56?s=128&d=identicon&r=PG&f=1", "display_name": "Coleslaw234", "link": "https://stackoverflow.com/users/5628170/coleslaw234"}, "edited": false, "score": 1, "creation_date": 1449099235, "post_id": 34055089, "comment_id": 55864471, "body": "The lesson, by the way, is this: Before you choose and implement an algorithm, make sure you clearly understand the requirements for the implementation. Before you write code to compare two strings, know precisely what the comparison rules you&#39;re supposed to be using are."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1449098837, "creation_date": 1449098837, "answer_id": 34055089, "question_id": 34054982, "link": "https://stackoverflow.com/questions/34054982/operator-overloading-test-failure/34055089#34055089", "title": "Operator Overloading Test Failure", "body": "<p>\"[The strcmp] function starts comparing the first character of each string. If they are equal to each other, it continues with the following pairs until the characters differ or until a terminating null-character is reached. <em>This function performs a binary comparison of the characters</em>.\"</p>\n\n<p>Since <code>'t'</code> is greater than <code>'T'</code>, <code>\"test\"</code> is greater than <code>\"Test\"</code> by this rule. Perhaps you're expecting <code>strcmp</code> to do something more than it actually does, such as implement English language rules for word comparisons. Have a look at things like <code>std::collate</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 5628170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41f7b0b210b7be39e81cce8c9888e56?s=128&d=identicon&r=PG&f=1", "display_name": "Coleslaw234", "link": "https://stackoverflow.com/users/5628170/coleslaw234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449098837, "creation_date": 1449098333, "question_id": 34054982, "link": "https://stackoverflow.com/questions/34054982/operator-overloading-test-failure", "title": "Operator Overloading Test Failure", "body": "<p>Build is successful, but the test case #2 keep failing. I don't know what to change or fix. The test program says that</p>\n\n<p>Test Case #2 operator &lt;=() FAILED and operator >() Failed.</p>\n\n<p>Here is My header </p>\n\n<pre><code>#ifndef MYSTRING_H\n\n#define MYSTRING_H\n\n#include &lt;iostream&gt;\n\n#include &lt;cstring&gt; //library functions \n\n#include &lt;cstdlib&gt; //exit() function \nusing namespace std;\n\n\n// MyString class\nclass MyString\n{\nprivate:\nchar *str;\nint len;\n\npublic:\n//constructor\nMyString()\n{\n    *str = 0;\n    len = 0;\n}\n\n// convert and copy constructors. \nMyString(char *);\nMyString(MyString &amp;);\n\n\n// Destructor. \n~MyString()\n{\n    if (len != 0)\n        delete[]  str;\n    str = 0;\n    len = 0;\n}\n// operators.   \nint length() { return len; }\nchar *getValue() { return str; };\n\n//==\nbool operator==(MyString &amp;);\n\n//!=\nbool operator!=(MyString &amp;);\n\n//&gt;\nbool operator&gt;(MyString &amp;);\n\n//&lt;\nbool operator&lt;(MyString &amp;);\n\n//&gt;=\nbool operator&gt;=(MyString &amp;);\n\n//&lt;=\nbool operator&lt;=(MyString &amp;);\n\n// insertion and extraction operators.\nfriend ostream &amp;operator&lt;&lt;(ostream &amp;, const MyString &amp;);\n};\n// NOTE: Below is the implementation for the functions that are declared   above\n\n//constructor\nMyString::MyString(char *sptr)\n{\nlen = strlen(sptr);\n\nstr = new char[len + 1];\n\nstrcpy(str, sptr);\n}\n//Copy Constructor\nMyString::MyString(MyString &amp;right)\n{\nstr = new char[right.length() + 1];\n\nstrcpy(str, right.getValue());\n\nlen = right.length();\n}\n\n//==\nbool MyString::operator==(MyString &amp;right) \n{\nreturn !strcmp(str, right.getValue());\n}\n\n//!=\nbool MyString::operator!=(MyString &amp;right)\n{\nreturn strcmp(str, right.getValue());\n}\n//&gt;\nbool MyString::operator&gt;(MyString &amp;right)\n{\nif (strcmp(str, right.getValue()) &gt; 0)\n    return true;\nelse\n    return false;\n}\n\n//&lt;\nbool MyString::operator&lt;(MyString &amp;right)\n{\nif (strcmp(str, right.getValue()) &lt; 0)\n    return true;\nelse\n    return false;\n}\n\n//&gt;=\nbool MyString::operator&gt;=(MyString &amp;right)\n{\nif (strcmp(str, right.getValue()) &gt;= 0)\n    return true;\nelse\n    return false;\n\n}\n\n//&lt;=\nbool MyString::operator&lt;=(MyString &amp;right)\n{\nif (strcmp(str, right.getValue()) &lt;= 0)\n    return true;\nelse\n    return false;\n\n}\n\n//stream operators\nostream &amp;operator&lt;&lt;(ostream &amp;strm, const MyString &amp;obj)\n{\nstrm &lt;&lt; obj.str;\n return strm;\n}\n\n#endif\n</code></pre>\n\n<p>And here is the test program.</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include &lt;iostream&gt;\n\n#include \"MyString.h\"\n\nusing namespace std;\n\n// Declare a new datatype that defines requires test case parameters\ntypedef struct {\nchar str1[128];\nchar str2[128];\nbool equalNotEqual;\nbool lessThan;\nbool lessThanEqual;\nbool greaterThan;\nbool greaterThanEqual;\nbool testPassed;\n} TEST_CASE;\n\n// Declare various test cases used to test the MyString object                          \nTEST_CASE testCases[] = {\n/* str1           str2         ==       &lt;       &lt;=       &gt;       &gt;=     P/F flag                                                        */\n{ \"test\",        \"test\",      true,   false,   true,   false,   true,     true },\n{ \"test\",        \"Test\",      false,  false,   true,   false,   true,     true },\n{ \"test\",        \"test1\",     false,  true,    true,   false,   false,    true },\n{ \"test \",       \"test\",      false,  false,   false,  true,    true,        true }\n};\n\n\n// Main programentry point\nint main()\n{\n\n// Flag used to determine if any test case failed\nbool failed = false;\n\n// Loop through all test cases\nfor (int i = 0; i &lt; sizeof(testCases) / sizeof(TEST_CASE); ++i)\n{\n\n    // Instantiate two MyString objects that will be used to test overloaded operators\n    MyString myStrObj1(testCases[i].str1);\n    MyString myStrObj2(testCases[i].str2);\n\n    cout &lt;&lt; \"Test Case #\" &lt;&lt; i + 1 &lt;&lt; endl;\n\n    //-------------------------\n    // Test the operator==()\n    //vvvvvvvvvvvvvvvvvvvvvvvvv\n    if ((myStrObj1 == myStrObj2) != testCases[i].equalNotEqual)\n    {\n        cout &lt;&lt; \"\\t***** operator==() FAILED\" &lt;&lt; endl;\n        testCases[i].testPassed = false;\n    }\n\n    //-------------------------\n    // Test the operator!=()\n    //vvvvvvvvvvvvvvvvvvvvvvvvv\n    if ((myStrObj1 != myStrObj2) == testCases[i].equalNotEqual)\n    {\n        cout &lt;&lt; \"\\t***** operator!=() FAILED\" &lt;&lt; endl;\n        testCases[i].testPassed = false;\n    }\n\n    //-------------------------\n    // Test the operator&lt;()\n    //vvvvvvvvvvvvvvvvvvvvvvvvv\n    if ((myStrObj1 &lt; myStrObj2) != testCases[i].lessThan)\n    {\n        cout &lt;&lt; \"\\t***** operator&lt;() FAILED\" &lt;&lt; endl;\n        testCases[i].testPassed = false;\n    }\n\n    //-------------------------\n    // Test the operator&lt;=()\n    //vvvvvvvvvvvvvvvvvvvvvvvvv\n    if ((myStrObj1 &lt;= myStrObj2) != testCases[i].lessThanEqual)\n    {\n        cout &lt;&lt; \"\\t***** operator&lt;=() FAILED\" &lt;&lt; endl;\n        testCases[i].testPassed = false;\n    }\n\n    //-------------------------\n    // Test the operator&gt;()\n    //vvvvvvvvvvvvvvvvvvvvvvvvv\n    if ((myStrObj1 &gt; myStrObj2) != testCases[i].greaterThan)\n    {\n        cout &lt;&lt; \"\\t***** operator&gt;() FAILED\" &lt;&lt; endl;\n        testCases[i].testPassed = false;\n    }\n\n    //-------------------------\n    // Test the operator&gt;=()\n    //vvvvvvvvvvvvvvvvvvvvvvvvv\n    if ((myStrObj1 &gt;= myStrObj2) != testCases[i].greaterThanEqual)\n    {\n        cout &lt;&lt; \"\\t***** operator&gt;=() FAILED\" &lt;&lt; endl;\n        testCases[i].testPassed = false;\n    }\n\n    // Use the ostream operator to display the string stored in the MyString operator \n    cout &lt;&lt; \"The string should be \\'\" &lt;&lt; testCases[i].str1 &lt;&lt; \"\\' string   returned from MyClass \\'\" &lt;&lt; myStrObj1 &lt;&lt; \"\\'\" &lt;&lt; endl &lt;&lt; endl;\n\n    // Did this test case passed?\n    //vvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    if (testCases[i].testPassed)\n    {\n        // yes!!!\n        cout &lt;&lt; \"Test Case #\" &lt;&lt; i + 1 &lt;&lt; \" PASSED!!!!\" &lt;&lt; endl &lt;&lt; endl;\n    }\n    else\n    {\n        // Nope, set failed flag\n        failed = true;\n    }\n} /* end of for loop */\n\n  //-------------------------\n  // Display Overall Status\n  //vvvvvvvvvvvvvvvvvvvvvvvvv\nif (!failed)\n{\n    cout &lt;&lt; \"**************************\" &lt;&lt; endl;\n    cout &lt;&lt; \"***** OVERALL PASSED *****\" &lt;&lt; endl;\n    cout &lt;&lt; \"**************************\" &lt;&lt; endl;\n}\nelse\n{\n    cout &lt;&lt; \"**************************\" &lt;&lt; endl;\n    cout &lt;&lt; \"***** OVERALL FAILED *****\" &lt;&lt; endl;\n    cout &lt;&lt; \"**************************\" &lt;&lt; endl;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Thanks is advance for any help.</p>\n"}, {"tags": ["c++", "qt", "static", "gstreamer"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1449102456, "post_id": 34054856, "comment_id": 55865470, "body": "Are you on a *nix platform by any chance? Because if you linked statically to Qt Multimedia, that includes its own copy of GStreamer. If that&#39;s the case it&#39;s probably a linking issue."}, {"owner": {"reputation": 137, "user_id": 3737155, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9f21d811a9bc773e6d614724c921432b?s=128&d=identicon&r=PG&f=1", "display_name": "Psy-Kai", "link": "https://stackoverflow.com/users/3737155/psy-kai"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1449139740, "post_id": 34054856, "comment_id": 55880996, "body": "I use debian. I tryed to compile Qt with -no-gstreamer but same effect."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 3737155, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9f21d811a9bc773e6d614724c921432b?s=128&d=identicon&r=PG&f=1", "display_name": "Psy-Kai", "link": "https://stackoverflow.com/users/3737155/psy-kai"}, "is_accepted": false, "score": 0, "last_activity_date": 1449141080, "creation_date": 1449141080, "answer_id": 34064459, "question_id": 34054856, "link": "https://stackoverflow.com/questions/34054856/qt-static-linked-call-gstreamer-functions/34064459#34064459", "title": "Qt static linked call gstreamer functions", "body": "<p>If you use a QThread you need to initiate a QCoreApplication. Without this QEventLoop will not run.</p>\n"}], "owner": {"reputation": 137, "user_id": 3737155, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9f21d811a9bc773e6d614724c921432b?s=128&d=identicon&r=PG&f=1", "display_name": "Psy-Kai", "link": "https://stackoverflow.com/users/3737155/psy-kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449141080, "creation_date": 1449097776, "last_edit_date": 1449139682, "question_id": 34054856, "link": "https://stackoverflow.com/questions/34054856/qt-static-linked-call-gstreamer-functions", "title": "Qt static linked call gstreamer functions", "body": "<p>I write a library (a plugin) for another application with Qt. In this library I use gstreamer to decode audio/video data. Until today I used dynamic linked Qt. Now I tried to link Qt static (compiled, add in Qt-Creator, made and use new kit). Compiling worked fine but gstreamer does nothing. I did not changed anything in the project file. I get no error, no output, nothing. When I set a breakpoint (e.g. at <code>g_object_set()</code> or <code>gst_element_set_state()</code>) the debugger stops at the right place but nothing happens.</p>\n\n<p>Do I need to configure Qt special for static compiling or something?</p>\n\n<p>My setup: Debian 8, Qt 5.5.1, gstreamer 1.0<br>\nConfigure options for Qt: <code>-static- no-use-gold-linker -no-gstreamer -qt-xcb -nomake examples</code></p>\n"}, {"tags": ["c++", "encryption", "random", "codeblocks", "srand"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1449097911, "post_id": 34054809, "comment_id": 55863973, "body": "I don&#39;t see what the difference is between your input and deciphered message. Or is that what it&#39;s meant to be, but you are not getting that? If so, can you post what YOUR code produces?"}, {"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1449098225, "post_id": 34054809, "comment_id": 55864090, "body": "yea that&#39;s a sample of how it should be.   im getting  UIWUMTOUVWHHJHJFQGIXWOSDCWQKIYIV and the decrypted is even worse"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1449098484, "post_id": 34054809, "comment_id": 55864205, "body": "There is no reason to expect the encrypted text to be the same as the sample, unless you&#39;re using the same compiler and runtime library as whoever created the sample. You should, of course, be able to get the original text back."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1449099008, "post_id": 34054809, "comment_id": 55864383, "body": "Be aware that <code>srand()</code> and <code>rand()</code> are <b>not suitable</b> for serious encryption. If you&#39;re doing non-serious encryption, they&#39;re ok."}, {"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1449099072, "post_id": 34054809, "comment_id": 55864403, "body": "@KeithThompson it&#39;s a homework actually"}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1449100456, "post_id": 34054809, "comment_id": 55864891, "body": "If the key is smaller than the message then this is technically not a One-Time Pad and therefore not perfectly secure (if used with a CSPRNG)."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "edited": false, "score": 0, "creation_date": 1449098761, "post_id": 34055006, "comment_id": 55864299, "body": "thank you so much for the tips! i tried putting the srand before the decrypting and it didn&#39;t produce the same message again."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1449098405, "creation_date": 1449098405, "answer_id": 34055006, "question_id": 34054809, "link": "https://stackoverflow.com/questions/34054809/using-rand-and-srand-in-an-encryption-code/34055006#34055006", "title": "Using rand() and srand() in an encryption code", "body": "<p>The code should call <code>srand(seed)</code> again, after encrypting the message and before decrypting it so that <code>rand()</code> will generate the same sequence of values when decrypting as it did when encrypting.</p>\n\n<p>Note also that that loop with <code>i++</code> and <code>j++</code> is just setting <code>i</code> and <code>j</code> to <code>key.length()</code>. Then the code throws away the new value of <code>i</code>.</p>\n\n<p>Note, too, that it's bad practice to define all your variables at the top of the function when they aren't used until much later. Define variables at their point of first use, and initialize them as part of their definition. So, for example, instead of</p>\n\n<pre><code>int messagevalue;\n.\n.\n.\nmessagevalue = message.length();\n</code></pre>\n\n<p>use</p>\n\n<pre><code>int messagevalue = message.length();\n</code></pre>\n\n<p>And, finally, a better name for <code>messagevalue</code> would be <code>message_length</code>, since that's what it actually holds.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "edited": false, "score": 0, "creation_date": 1449174998, "post_id": 34056568, "comment_id": 55904558, "body": "That actually worked perfectly!! thanks alot. but the decrypting message is still not the same."}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1449107936, "creation_date": 1449107936, "answer_id": 34056568, "question_id": 34054809, "link": "https://stackoverflow.com/questions/34054809/using-rand-and-srand-in-an-encryption-code/34056568#34056568", "title": "Using rand() and srand() in an encryption code", "body": "<pre><code>for (i=0; i &lt; messagevalue; i++)\n{\n   seed = seed + key[i];\n}\n</code></pre>\n\n<p><code>key</code> is shorter than <code>message</code>, so <code>key[i]</code> is out of bounds access. Should be</p>\n\n<pre><code>for (i=0; i &lt; keyvalue; i++)\n{\n   seed = seed + key[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1075, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449107936, "creation_date": 1449097563, "last_edit_date": 1449098387, "question_id": 34054809, "link": "https://stackoverflow.com/questions/34054809/using-rand-and-srand-in-an-encryption-code", "title": "Using rand() and srand() in an encryption code", "body": "<p>The question wants me to program a One-Time-Small Pad cryptosystem where the message is longer than the key. the program will use srand() and rand() to generate numbers from 0 to 4 (if the key has 5 letters) and use them on the whole sentence. the srand uses the seed which is the sum of the ASCII values of the letters of the initial key. The problem now is that the sentence encrypted is not the same as the example (attached below). </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;cmath&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\nint main ()\n{\n    string message, key;\n    int messagevalue, keyvalue, i=0, j=0, seed=0;\n\n\n    cout&lt;&lt;\"Enter the message: \";\n\n    getline(cin, message);\n\n    cout &lt;&lt; \"Enter the key: \";\n\n    getline(cin, key);\n\n    messagevalue = message.length();\n    keyvalue = key.length();\n\n    while (key[i] != 0)\n    {\n        i++;\n        j++;\n    }\n\n\n    cout &lt;&lt; \"The message is: \" &lt;&lt; setw(20)  &lt;&lt; message &lt;&lt; endl;\n\n    for (i=0; i &lt; messagevalue; i++)\n    {\n       seed = seed + key[i];\n    }\n\n    srand(seed);\n\n    for(i=0; i &lt; messagevalue; i++)\n    {\n\n    message[i] = 65 + (message[i] + key[rand()%j]) % 26;\n\n    }\n\n    cout &lt;&lt;\"The cipher is: \" &lt;&lt; setw(21)  &lt;&lt; message &lt;&lt;endl;\n\n\n    for(i=0; i &lt; messagevalue; i++)\n    {\n      message[i] = 65 + 26 + (message[i] - key[rand()%j]) % 26;\n\n      if ((message[i] - key[i]) &gt;= 0)\n      {\n          message[i] = message[i] - 26;\n      }\n\n    }\n\n    cout &lt;&lt; \"The message again is: \" &lt;&lt; setw(14)  &lt;&lt; message &lt;&lt; endl;\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OJJu1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OJJu1.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "windows", "visual-c++"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1449099035, "post_id": 34054785, "comment_id": 55864390, "body": "If you don&#39;t want &quot;blocking&quot; then you don&#39;t want a hotkey.  &quot;Blocking&quot; is what hotkeys are <i>for</i>.  If checking for WM_CHAR messages in your window procedure won&#39;t meet your needs, please explain what your actual requirements are."}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1449102688, "post_id": 34055037, "comment_id": 55865527, "body": "I hope the operating system lets both program recognize the keystroke. I&#39;m curious how AutoHotKey did it(No conflicts)."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1449104084, "post_id": 34055037, "comment_id": 55865983, "body": "I have no idea wht AutoHotKey is or does. But the description of the <code>RegisterHotKey</code> does describe quite clearly what it does and how it works - and that the relevant keypress is sent to the <code>HWND</code> passed to the function, or to the current process if the value is <code>NULL</code>."}, {"owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 0, "creation_date": 1449117592, "post_id": 34055037, "comment_id": 55869812, "body": "I think you use a global hook to examine all key strokes and then decide if you want to act on them and swallow them, act on them and let them pass thru, or ignore them. This may be what AutoHotKey does."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1449098607, "creation_date": 1449098607, "answer_id": 34055037, "question_id": 34054785, "link": "https://stackoverflow.com/questions/34054785/is-there-a-way-to-register-hotkey-on-windows-without-conflict/34055037#34055037", "title": "Is there a way to register hotkey on windows without conflict?", "body": "<p>The MSDN page for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>RegisterHotKey</code></a> says:</p>\n\n<blockquote>\n  <p><code>RegisterHotKey</code> fails if the keystrokes specified for the hot key have\n  already been registered by another hot key.</p>\n</blockquote>\n\n<p>along with:</p>\n\n<blockquote>\n  <p>Return value</p>\n  \n  <p>Type: <code>BOOL</code></p>\n  \n  <p>If the function succeeds, the return value is nonzero.</p>\n  \n  <p>If the function fails, the return value is zero. To get extended error\n  information, call <code>GetLastError</code>.</p>\n</blockquote>\n\n<p>In other words, <code>if(!RegisterHotKey(...)) ... deal with error ...</code> would catch various forms of \"didn't work\", including that the hotkey is already in use - you need to look at <code>GetLastError</code> to tell the difference between \"key already in use\" and others. </p>\n\n<p>I think the whole point of registering a hotkey is that YOUR application ALWAYS gets that keypress, regardless of what is going on. Which of course is a bit annoying if it happens to be popular key in some other application, but it's still the point of registering a hotkey. If you don't like that effect, then don't register a hotkey, or use a more obscure combination that is less likely to be used by some other application. Not sure how else this can be solved - exactly what would you like the system to do if you run IE together with your application, and ALT-uparrow is pressed?</p>\n"}], "owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1084, "favorite_count": 0, "closed_date": 1449132394, "accepted_answer_id": 34055037, "answer_count": 1, "score": 1, "last_activity_date": 1449116464, "creation_date": 1449097445, "last_edit_date": 1449116464, "question_id": 34054785, "link": "https://stackoverflow.com/questions/34054785/is-there-a-way-to-register-hotkey-on-windows-without-conflict", "closed_reason": "Needs details or clarity", "title": "Is there a way to register hotkey on windows without conflict?", "body": "<p>I'm writing a Windows program and I need to register a hotkey. However, I'm afraid of the conflicts caused by <code>RegisterHotKey()</code>. </p>\n\n<p>Furthermore, Key Events are blocked when you triggered a Hotkey message. For example, you call <code>RegisterHotkey(0, 0, MOD_NOREPEAT | MOD_ALT, VK_UP)</code> To register hot key <kbd>ALT</kbd> + <kbd>\u2191</kbd>. If you press <kbd>ALT</kbd> + <kbd>\u2191</kbd> in explorer.exe, explorer.exe won't receive this message(Originally <kbd>ALT</kbd> + <kbd>\u2191</kbd> is go up a level in explorer.exe).</p>\n\n<p>Is there a way to register hot key without conflicts and blocking?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1449097560, "post_id": 34054760, "comment_id": 55863821, "body": "Why do you need more complicated logic with <code>static_assert</code>? Reversing your two <code>static_if</code> conditions should work the same way. In the first <code>static_assert</code> you have, assuming an unsigned type, <code>size \u2260 0 \u21d4 size \u2265 1</code>, so either one is redundant."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 5, "creation_date": 1449097692, "post_id": 34054760, "comment_id": 55863877, "body": "<code>static_assert( size != 0, &quot;Must not be empty&quot;)</code> and <code>static_assert(size &lt;= 1, &quot;Too many&quot;)</code> appear to be what you want."}, {"owner": {"reputation": 13772, "user_id": 944430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d2b181af01c96927ac05eb864d6b7b6?s=128&d=identicon&r=PG", "display_name": "Maik Klein", "link": "https://stackoverflow.com/users/944430/maik-klein"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1449098220, "post_id": 34054760, "comment_id": 55864089, "body": "@MatsPetersson You are right, I am not sure why I didn&#39;t write it like you.  I think I must have been confused that <code>false</code> triggers the assert and not <code>true</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13772, "user_id": 944430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d2b181af01c96927ac05eb864d6b7b6?s=128&d=identicon&r=PG", "display_name": "Maik Klein", "link": "https://stackoverflow.com/users/944430/maik-klein"}, "edited": false, "score": 0, "creation_date": 1449098387, "post_id": 34054862, "comment_id": 55864162, "body": "It appears that I was just confused, but you need to negate your two expressions before I can accept the answer, because <code>static_assert</code> triggers at <code>false</code>."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1449101391, "last_edit_date": 1449101391, "creation_date": 1449097798, "answer_id": 34054862, "question_id": 34054760, "link": "https://stackoverflow.com/questions/34054760/multiple-static-asserts-that-depend-on-the-same-value/34054862#34054862", "title": "Multiple static_assert&#39;s that depend on the same value", "body": "<p><code>static_assert</code> allows boolean logic. What it does not allow is calling (non-<code>constexpr</code>) functions. So there is no reason you can't use that logic in your code.</p>\n\n<pre><code>static_assert(sizeof(Args...) != 0, \"Empty\");\nstatic_assert(sizeof(Args...) &lt; 2, \"More than 1\");\n</code></pre>\n"}], "owner": {"reputation": 13772, "user_id": 944430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d2b181af01c96927ac05eb864d6b7b6?s=128&d=identicon&r=PG", "display_name": "Maik Klein", "link": "https://stackoverflow.com/users/944430/maik-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 34054862, "answer_count": 1, "score": 0, "last_activity_date": 1449101391, "creation_date": 1449097313, "question_id": 34054760, "link": "https://stackoverflow.com/questions/34054760/multiple-static-asserts-that-depend-on-the-same-value", "title": "Multiple static_assert&#39;s that depend on the same value", "body": "<p>I am filtering a tuple at compile time, I want to output a custom error message if the tuple is empty or if the tuple contains more than one element.</p>\n\n<p><code>static_assert</code> seems a bit too complicated because I need to use boolean logic.</p>\n\n<pre><code>static_assert(size != 0 || size &gt;= 1, \"Empty\");\nstatic_assert(size == 1 || size == 0, \"More than 1\");\n</code></pre>\n\n<p>I don't suppose that something like this would be possible?</p>\n\n<pre><code>static_if(size == 0) compile_err(\"Empty\");\nstatic_if(size &gt; 1) compile_err(\"More than 1\");\n</code></pre>\n\n<p>Do newer version of C++ offer an alternative to static_assert?</p>\n"}, {"tags": ["c++", "performance", "stl"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1449097055, "post_id": 34054683, "comment_id": 55863609, "body": "Don&#39;t guess, just try both and measure (with optimization enabled of course). If you are not able to measure a difference, it does not matter."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449097347, "post_id": 34054683, "comment_id": 55863719, "body": "Write elegant code. Let the optimiser worry about performance. The time for <i>you</i> to worry about performance is when you have the most elegant algorithm, no blocking, good cache concurrency and your users are complaining about CPU load. Trust me, that time is years away."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4832129"}, "edited": false, "score": 2, "creation_date": 1449098079, "post_id": 34054683, "comment_id": 55864045, "body": "Note that using a reference may be dangerous as you can get a dangling reference if underlying memory is reallocated due to insert operations."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1449100884, "post_id": 34054683, "comment_id": 55865015, "body": "The short answer is &quot;it depends&quot;. And without seeing the actual code, we really can&#39;t even guess. (Are there changes to the vector? Are there calls to code that might change the vector but happen not to?)"}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1449098310, "post_id": 34054945, "comment_id": 55864126, "body": "&quot;Calling a non-inline function multiple times result in context switching&quot; - what is this nonsense?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1449098397, "post_id": 34054945, "comment_id": 55864166, "body": "@KarolyHorvath I used the wrong term, corrected. I don&#39;t know exactly how it&#39;s called, but basically you switch the stack frame."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449099274, "post_id": 34054945, "comment_id": 55864485, "body": "@vsoftco the optimiser will elide all redundant calls to operator[]. It&#39;s not a concern."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449099964, "post_id": 34054945, "comment_id": 55864735, "body": "Most likely the compiler will inline the call even if it&#39;s not marked <code>inline</code> explicitly"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449100015, "post_id": 34054945, "comment_id": 55864758, "body": "@M.M That&#39;s what seem to be happening indeed, and also mentioned in the answer. On my machine, there is no difference when I turn on optimizations."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 1, "last_activity_date": 1449099978, "last_edit_date": 1449099978, "creation_date": 1449098167, "answer_id": 34054945, "question_id": 34054683, "link": "https://stackoverflow.com/questions/34054683/how-is-the-vector-element-access-performance/34054945#34054945", "title": "How is the vector element access performance", "body": "<p>In general, when you use <code>v[i]</code>, you invoke the member function <a href=\"http://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"nofollow\"><code>std::vector::operator[]</code></a>. If you use it multiple times, then you call a function multiple times. Calling a non-inline function multiple times result in stack switching so it will take more time. Whereas storing the result (reference) in a variable calls the function only once.</p>\n\n<p>Now, most decent compilers can optimize the call (or even inline it), so most likely you won't see a difference. However, the best way to do it is to test it with a profiler and see the results.</p>\n\n<p><strong>EDIT1</strong> Please read <a href=\"http://cpphints.com/hints/34\" rel=\"nofollow\">this</a>. It discusses something similar, where calling a function inside a loop condition multiple times may result in a decrease of performance.</p>\n\n<p><strong>EDIT2</strong> I tested your code on my machine (gcc5, i5 8GB RAM) and timed it, code below. With optimizers turned on, there is no difference (g++). Without optimization, the reference version is twice as fast.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;vector&gt;\n\nauto timing = [](auto &amp;&amp; F, auto &amp;&amp; ... params)\n{\n    auto start = std::chrono::steady_clock::now();\n    std::forward&lt;decltype(F)&gt;(F)(std::forward&lt;decltype(params)&gt;(params)...);\n    return std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(\n               std::chrono::steady_clock::now() - start).count();\n};\n\nstd::vector&lt;int&gt; v(1024);\n\nlong long f(std::size_t i) // we pick the i-th element\n{\n    auto&amp; e = v[i];\n    long long sum = 0;\n    for(volatile std::size_t k = 0 ; k &lt; 1000000000; ++k)\n        sum += e;\n    return sum;\n}\n\nlong long g(std::size_t i)\n{\n    long long sum = 0;\n    for(volatile std::size_t k = 0 ; k &lt; 1000000000; ++k)\n        sum += v[i];\n    return sum;\n}\n\nint main()\n{\n    for(std::size_t i = 0; i &lt; 1024; ++i)\n        v[i] = i * i;\n\n    auto time0 = timing(f, 42);\n    auto time1 = timing(g, 42);\n\n    std::cout &lt;&lt; time0 &lt;&lt; std::endl;\n    std::cout &lt;&lt; time1 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/18cfe0bbee047535\" rel=\"nofollow\"><kbd>Live on Coliru, with optimizations turned on</kbd></a>\n<a href=\"http://coliru.stacked-crooked.com/a/8690430225525fea\" rel=\"nofollow\"><kbd>Live on Coliru, no optimizations</kbd></a></p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 5166832, "user_type": "registered", "profile_image": "https://graph.facebook.com/688226600/picture?type=large", "display_name": "alfalfasprout", "link": "https://stackoverflow.com/users/5166832/alfalfasprout"}, "is_accepted": false, "score": 1, "last_activity_date": 1449102029, "last_edit_date": 1449102029, "creation_date": 1449101506, "answer_id": 34055576, "question_id": 34054683, "link": "https://stackoverflow.com/questions/34054683/how-is-the-vector-element-access-performance/34055576#34055576", "title": "How is the vector element access performance", "body": "<p>Believe it or not, it can make a huge difference (even accounting for cache-hits making access of the same element over and over very efficient). </p>\n\n<p>Here's some test code:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n\nstatic inline std::uint64_t RDTSC()\n{\n  unsigned int hi, lo;\n  __asm__ volatile(\"rdtsc\" : \"=a\" (lo), \"=d\" (hi));\n  return ((uint64_t)hi &lt;&lt; 32) | lo;\n}\n\nvoid v1(const std::vector&lt;double&gt; &amp; v, std::vector&lt;double&gt; &amp; ov)\n{\n    for(int i=0 ; i&lt;100000000 ; ++i)\n        ov.push_back(v[5]);\n}\n\nvoid v2(const std::vector&lt;double&gt; &amp; v, std::vector&lt;double&gt; &amp; ov)\n{\n    auto fixed_var = v[5];\n    for(int i=0 ; i&lt;100000000 ; ++i)\n        ov.push_back(fixed_var);\n}\n\nvoid v3(const std::vector&lt;double&gt; &amp; v, std::vector&lt;double&gt; &amp; ov)\n{\n    const double fixed_var = v[5];\n    for(int i=0 ; i&lt;100000000 ; ++i)\n        ov.push_back(fixed_var);\n}\n\nvoid flush_cache()\n{\n    //Flush L1 and L2 cache by thrashing it with garbage\n    const int cache_size = 256*1024*1024;\n    auto garbage = new char[cache_size];\n    for(int i=0 ; i &lt; 48; ++i)\n    {\n        for (int j=0 ; j&lt;cache_size ; j++)\n            garbage[j] = i*j;\n    }\n    delete[] garbage;\n    std::cout &lt;&lt; \"flushed cache\\n\";\n}\n\n                 int main(void)\n{\n    std::vector&lt;double&gt; v;\n    std::vector&lt;double&gt; ov;\n    for(int i=0 ; i&lt;10000000 ; ++i)\n    {\n        v.push_back(i/(i+1000000));\n    }\n\n    //try v1\n    auto start = RDTSC();\n    v1(v,ov);\n    auto end = RDTSC();\n    auto v1t = end-start;\n    std::cout &lt;&lt; \"V1: 1.0x\\n\";\n\n    //flush and clear\n    ov.clear();\n    flush_cache();\n\n    //try v2\n    start = RDTSC();\n    v2(v,ov);\n    end = RDTSC();\n    auto v2t = end-start;\n    std::cout &lt;&lt; \"V2: \" &lt;&lt; ((double)v2t)/v1t &lt;&lt; \"x\\n\";\n\n    //flush and clear\n    ov.clear();\n    flush_cache();\n\n    //try v3\n    start = RDTSC();\n    v3(v,ov);\n    end = RDTSC();\n    auto v3t = end-start;\n    std::cout &lt;&lt; \"V3: \" &lt;&lt; ((double)v3t)/v1t &lt;&lt; \"x\\n\";\n}\n</code></pre>\n\n\n\n<p>We see there's actually a huge difference between the naive approach and using a variable:</p>\n\n<pre><code>V1: 1.0x\nflushed cache\nV2: 0.221311x\nflushed cache\nV3: 0.222199x\n</code></pre>\n\n<p>I double checked the assembly to make sure stuff wasn't being optimized away since we weren't using the result.</p>\n\n<p>We're also using the RTDSC instruction to ensure consistent timing in terms of CPU cycles.</p>\n\n<p>The difference between V2 and V3 isn't significant: they trade places on any given run. But it's definitely a 70-80% speed improvement not accessing the array each time.</p>\n\n<p>Note that if you don't flush the L1/L2 cache between runs and run V1 after V2 and V3 they'll all have similar timings. Thus, it's really important to flush the cache.</p>\n\n<p>Some more testing reveals that g++ and c++ will not optimize this away (and just store the value in a register) but Intel C++ will. Go figure...</p>\n"}], "owner": {"reputation": 199, "user_id": 5632628, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/63f16c280901c4eac7c2d574f24cdfad?s=128&d=identicon&r=PG&f=1", "display_name": "Tian Xiao", "link": "https://stackoverflow.com/users/5632628/tian-xiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449102029, "creation_date": 1449096912, "last_edit_date": 1449097170, "question_id": 34054683, "link": "https://stackoverflow.com/questions/34054683/how-is-the-vector-element-access-performance", "title": "How is the vector element access performance", "body": "<p>I have a function. It will access the same element in a vector lots of time. I am wondering the performance to access an element. For example</p>\n\n<pre><code>Void f()\n{\n   // v[i] appears many times, each time use v[i] to access it\n   // the other way is introduce a variable to record it like \n   auto&amp; e = v[i];\n}\n</code></pre>\n\n<p>Which one is better? Or they are just same.</p>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 791, "user_id": 5455223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/qnQgM.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5455223/dmitriy"}, "edited": false, "score": 2, "creation_date": 1449096904, "post_id": 34054615, "comment_id": 55863555, "body": "Add &quot; &lt;&lt; endl&quot; in your code  - use cout &lt;&lt; &quot;Size of char is: &quot; &lt;&lt; sizeof(char) &lt;&lt; endl;"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 4, "creation_date": 1449097295, "post_id": 34054615, "comment_id": 55863704, "body": "The usual question.  Are you running Avast?  This is a well known issue with VS. See <a href=\"http://stackoverflow.com/questions/33718236/visual-studio-2015-build-successful-but-debugging-never-stops-loading\" title=\"visual studio 2015 build successful but debugging never stops loading\">stackoverflow.com/questions/33718236/&hellip;</a>"}, {"owner": {"reputation": 791, "user_id": 5455223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/qnQgM.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5455223/dmitriy"}, "edited": false, "score": 0, "creation_date": 1449097383, "post_id": 34054615, "comment_id": 55863735, "body": "The main idea of this problem connected with buffer flushing. Try &quot;flush&quot; method or &lt;&lt; endl; Hope it&#39;s connected with this."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 791, "user_id": 5455223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/qnQgM.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5455223/dmitriy"}, "edited": false, "score": 1, "creation_date": 1449097447, "post_id": 34054615, "comment_id": 55863766, "body": "<code>cout</code> will not flush, write data to the console, until it&#39;s buffer is full, it is instructed to do so, or the program exits. You&#39;ve written too little data to fill the buffer, have not asked <code>cout</code> to flush, and <code>cin.get()</code> will block program exit until enter is pressed.  @Dmitriy &#39;s suggestion to add <code>endl</code> will force a flush."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 791, "user_id": 5455223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/qnQgM.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5455223/dmitriy"}, "edited": false, "score": 3, "creation_date": 1449101518, "post_id": 34054615, "comment_id": 55865208, "body": "@Dmitriy as <code>cin</code> is tied to <code>cout</code>, the flush is not needed (more <a href=\"http://stackoverflow.com/a/9275346/3723423\">here</a>).  An installation problem or a third party software problem is more probable here."}, {"owner": {"reputation": 791, "user_id": 5455223, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/qnQgM.jpg?s=128&g=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5455223/dmitriy"}, "edited": false, "score": 0, "creation_date": 1449102082, "post_id": 34054615, "comment_id": 55865361, "body": "@Chrisophe, thanks, didn&#39;t know about this."}, {"owner": {"reputation": 747, "user_id": 2590481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ufnhL.jpg?s=128&g=1", "display_name": "Raistlin", "link": "https://stackoverflow.com/users/2590481/raistlin"}, "edited": false, "score": 0, "creation_date": 1449128940, "post_id": 34054615, "comment_id": 55874359, "body": "Thanks to all of you. I indeed were running Avast. I deactivated it and magic was happening! The program started. I indeed were not aware of the VS/Avast issue."}, {"owner": {"reputation": 582, "user_id": 3637038, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004129686353/picture?type=large", "display_name": "Richard Tyregrim", "link": "https://stackoverflow.com/users/3637038/richard-tyregrim"}, "edited": false, "score": 0, "creation_date": 1449130756, "post_id": 34054615, "comment_id": 55875214, "body": "You mean to tell me that Avast sees the above code as something to block!? If so, then wow... That is some restrictive heuristics right there :) Or is it more a case of Avast not playing nice with VS debugger or something? I also was not aware of this issue before... Good to know."}, {"owner": {"reputation": 747, "user_id": 2590481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ufnhL.jpg?s=128&g=1", "display_name": "Raistlin", "link": "https://stackoverflow.com/users/2590481/raistlin"}, "reply_to_user": {"reputation": 582, "user_id": 3637038, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004129686353/picture?type=large", "display_name": "Richard Tyregrim", "link": "https://stackoverflow.com/users/3637038/richard-tyregrim"}, "edited": false, "score": 0, "creation_date": 1449165437, "post_id": 34054615, "comment_id": 55898960, "body": "@Richard: It seems that indeed Avast is not a good friend of Visual Studio. I found out that there are plenty of VS-Users that ran into that problem."}], "answers": [{"tags": [], "owner": {"reputation": 747, "user_id": 2590481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ufnhL.jpg?s=128&g=1", "display_name": "Raistlin", "link": "https://stackoverflow.com/users/2590481/raistlin"}, "is_accepted": false, "score": 0, "last_activity_date": 1449129057, "creation_date": 1449129057, "answer_id": 34060463, "question_id": 34054615, "link": "https://stackoverflow.com/questions/34054615/simple-visual-studio-console-application-does-not-start/34060463#34060463", "title": "Simple Visual Studio console application does not start", "body": "<p>Finally it works. As Peter M mentioned in his comment, the VS/Avast issue was the problem.</p>\n"}], "owner": {"reputation": 747, "user_id": 2590481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ufnhL.jpg?s=128&g=1", "display_name": "Raistlin", "link": "https://stackoverflow.com/users/2590481/raistlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449129057, "creation_date": 1449096626, "question_id": 34054615, "link": "https://stackoverflow.com/questions/34054615/simple-visual-studio-console-application-does-not-start", "title": "Simple Visual Studio console application does not start", "body": "<p>I installed Visual Studio 2013 on my Windows 10 machine. To test the installation I wrote a simple program in C++:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n\n    cout &lt;&lt; \"Size of char is: \" &lt;&lt; sizeof(char);\n\n    cin.get();\n\n    return 0;\n}\n</code></pre>\n\n<p>It's embarrassing to post such a simple code here but the problem is as follows. The build process runs without errors or warnings. But when I start the program via Debug-Button, Visual Studio freezes. I also tried starting the .exe in cmd. The result is a blinking cursor in an empty line with no further reaction from the console.\nCan somebody tell me what's wrong? The Project Type in Visual Studio is empty visual c++ project.</p>\n"}, {"tags": ["c++", "matlab", "gsl", "bessel-functions"], "comments": [{"owner": {"reputation": 7521, "user_id": 1904719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e6473982d52f76d0cf40b8020e8600?s=128&d=identicon&r=PG&f=1", "display_name": "marsei", "link": "https://stackoverflow.com/users/1904719/marsei"}, "edited": false, "score": 0, "creation_date": 1449096688, "post_id": 34054482, "comment_id": 55863476, "body": "why not computing the function yourself?"}, {"owner": {"reputation": 155, "user_id": 5632454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854dc100e94fe7dca61137fc82e4e0cb?s=128&d=identicon&r=PG&f=1", "display_name": "Franklin Dong", "link": "https://stackoverflow.com/users/5632454/franklin-dong"}, "reply_to_user": {"reputation": 7521, "user_id": 1904719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e6473982d52f76d0cf40b8020e8600?s=128&d=identicon&r=PG&f=1", "display_name": "marsei", "link": "https://stackoverflow.com/users/1904719/marsei"}, "edited": false, "score": 0, "creation_date": 1449097599, "post_id": 34054482, "comment_id": 55863839, "body": "using recursion relation of bessel function would not have helped me going any further. As a matter of fact, with increasing orders it breaks down much faster in comparison to using GSL library routines."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 7521, "user_id": 1904719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e6473982d52f76d0cf40b8020e8600?s=128&d=identicon&r=PG&f=1", "display_name": "marsei", "link": "https://stackoverflow.com/users/1904719/marsei"}, "edited": false, "score": 0, "creation_date": 1449107201, "post_id": 34054482, "comment_id": 55866960, "body": "@macduf surely you don&#39;t mean by hand."}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 5632454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854dc100e94fe7dca61137fc82e4e0cb?s=128&d=identicon&r=PG&f=1", "display_name": "Franklin Dong", "link": "https://stackoverflow.com/users/5632454/franklin-dong"}, "is_accepted": true, "score": 1, "last_activity_date": 1449263046, "last_edit_date": 1495542743, "creation_date": 1449263046, "answer_id": 34097409, "question_id": 34054482, "link": "https://stackoverflow.com/questions/34054482/high-order-bessel-function-computation-with-large-variables/34097409#34097409", "title": "high order bessel function computation with large variables", "body": "<p>Problem solved. Thank you for the community work and it really amazed me with your knowledge and contributions!!!</p>\n\n<p>Please see here,\n<a href=\"https://stackoverflow.com/questions/34082554/how-to-call-fortran-routines-from-c?noredirect=1#comment55941597_34082554\">how to call fortran routines from C++?</a></p>\n\n<p><a href=\"https://mathoverflow.net/questions/225121/computation-of-high-order-bessel-function-at-large-variable-value\">https://mathoverflow.net/questions/225121/computation-of-high-order-bessel-function-at-large-variable-value</a></p>\n\n<p>MATLAB, R, Python and JuliaLang/openspecfun all build upon the original fortran source code by Dr. Donald E. Amos (sandia national lab), cited paper:</p>\n\n<pre><code>D. E. Amos, \"A subroutine package for Bessel functions of a complex\nargument and nonnegative order\", Sandia National Laboratory Report,\nSAND85-1018, May, 1985.\nD. E. Amos, \"A portable package for Bessel functions of a complex\nargument and nonnegative order\", Trans. Math. Software, 1986.\n</code></pre>\n\n<p>Now known as Amos Algorithm 644 collected by ACM.</p>\n\n<pre><code>http://dl.acm.org/citation.cfm?id=212078\nhttp://dl.acm.org/citation.cfm?id=1268783\nhttp://dl.acm.org/citation.cfm?id=98299\n</code></pre>\n\n<p>However, the source codes hosted on netlib are not bug free and probably not up-to-date,</p>\n\n<pre><code>http://netlib.sandia.gov/master/index.html\nhttp://netlib.sandia.gov/amos/\n</code></pre>\n\n<p>While the version adopted by openspecfun works as solid,</p>\n\n<pre><code>https://github.com/JuliaLang/openspecfun\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5632454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854dc100e94fe7dca61137fc82e4e0cb?s=128&d=identicon&r=PG&f=1", "display_name": "Franklin Dong", "link": "https://stackoverflow.com/users/5632454/franklin-dong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "accepted_answer_id": 34097409, "answer_count": 1, "score": 1, "last_activity_date": 1449263046, "creation_date": 1449095916, "last_edit_date": 1449131466, "question_id": 34054482, "link": "https://stackoverflow.com/questions/34054482/high-order-bessel-function-computation-with-large-variables", "title": "high order bessel function computation with large variables", "body": "<p>My work involves computation of high order bessel function at large variable value. Within MATLAB, this has been done without problems. However, in order to scale up the problem, I have tuned to writing C++ code with MPI. Of course, the step to generate bessel function is done by invoking some libraries. To put the problem concrete, let me consider this very specific bug.</p>\n\n<p>In matlab, suppose I wish to compute $J_46341(86840.0)$, and </p>\n\n<blockquote>\n  <p>matlab gives me: besselj(46341,86840)=0.001309896212292</p>\n</blockquote>\n\n<p>However, a simple test example to call </p>\n\n<blockquote>\n  <p>gsl_sf_bessel_Jn_e returns \"ERROR: NaN\"</p>\n</blockquote>\n\n<p>and I have checked at order 46340, both matlab and gsl returns the same answer 0.00292895 within acceptable accuracies. One more step in GSL results in the NaN error while matlab still retains a good accurate numerical answer.</p>\n\n<p>I did try to use recurrence relations to generate higher order values, from a-not-so-small-order, say from order of 20000 and up, however, this only delays the NaN error without completely solving the problem. </p>\n\n<p>Switching my attention to other available software libraries out there, I tried NAG, but to my utter disappointment, </p>\n\n<blockquote>\n  <p>nag_bessel_j_alpha (s18ekc) has constraint of abs(nl)&lt;=101</p>\n</blockquote>\n\n<p>, in other words, it can only compute up to order of 101 and it is clearly not in my interest of study.</p>\n\n<p>So, my question is fairly simple:</p>\n\n<blockquote>\n  <p>Is there a more reliable library approach to obtain high order bessel\n  function value for large x?</p>\n</blockquote>\n\n<p>Asymptotically, bessel function approaches 0, I can surely set those values to zero if the tail is approaching the underflow limit. However, the NaN problem seems to occur somewhat between strongly oscillating curve and asymptotically decaying tail.</p>\n"}, {"tags": ["c++", "c++11", "binary-search-tree"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1449095813, "post_id": 34054420, "comment_id": 55863107, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. You might even solve your own problem in the meantime."}, {"owner": {"reputation": 3, "user_id": 3728453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91cc48eeb6663dd0ba473cb9ad9cc18?s=128&d=identicon&r=PG", "display_name": "JlOlSlH", "link": "https://stackoverflow.com/users/3728453/jlolslh"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1449098618, "post_id": 34054420, "comment_id": 55864249, "body": "I decided to re-create the entire tree as an array. Which, as to right now of writing this seems to have solved most of my issues. That MCVE definitely helped me to reach this though! Thanks!"}], "owner": {"reputation": 3, "user_id": 3728453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91cc48eeb6663dd0ba473cb9ad9cc18?s=128&d=identicon&r=PG", "display_name": "JlOlSlH", "link": "https://stackoverflow.com/users/3728453/jlolslh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449095647, "creation_date": 1449095647, "question_id": 34054420, "link": "https://stackoverflow.com/questions/34054420/setting-a-current-node-pointer-to-either-a-right-or-left-node-in-a-binary-tree", "title": "Setting a current node pointer to either a right or left node in a binary tree", "body": "<p>I have looked through quite extensively (and hopefully haven't missed it) but I cannot seem to find any help in my current predicament. So here is the problem:</p>\n\n<p>I am attempting to change my current node in a binary tree to either the right or left child depending on what the user wants to do, I have several other functions in the program I.E. (move up, move down-right, move down-left) and then you can cout the current item. The issue is that I can change the item to the right child but not the left one, it is as if the left child does not exist... Here is the code snippet of what I am attempting to do:</p>\n\n<pre><code>`else if (choice == 3)\n        {\n            if (Ptr-&gt;left != NULL)\n            {\n                system(\"CLS\");\n                current = Ptr-&gt;left;\n                std::cout &lt;&lt; \"Moved to the left item...\" &lt;&lt; std::endl;\n                system(\"PAUSE\");\n            }\n\n            else\n            {\n                system(\"CLS\");\n                std::cout &lt;&lt; \"Cannot move left any further...\" &lt;&lt; std::endl;\n                system(\"PAUSE\");\n            }\n        }`\n</code></pre>\n\n<p>The same technique is applied to the right-side as well. I am quite new to trees and perhaps an \"array\" style tree would be better than my current dynamic tree, I am using a recursive function that is dynamically re-sized as needed by the user. Hopefully I included all the relevant information. If I need to put anything else in I would happily do so to get some help! Many thanks for the help!</p>\n"}, {"tags": ["c++", "boost-asio", "coroutine"], "comments": [{"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1449164691, "post_id": 34054256, "comment_id": 55898526, "body": "Is it okay for the user-defined structure to be <code>io_service</code> aware and/or does the user-defined structure provide an event-based API?  Also, I think the Boost-1.59 build on Coliru may be a release-candidate.  In particular, the Boost.Coroutine looks out of date (<a href=\"http://coliru.stacked-crooked.com/a/49873fe35e04a615\" rel=\"nofollow noreferrer\">demo</a>)."}, {"owner": {"reputation": 32242, "user_id": 75889, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/37aa3ec65ec47c5a3f9e2a80534837f3?s=128&d=identicon&r=PG", "display_name": "StackedCrooked", "link": "https://stackoverflow.com/users/75889/stackedcrooked"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1449180465, "post_id": 34054256, "comment_id": 55907702, "body": "Yes, the structure could know about the <code>io_service</code>. And it can provide an event-based api (most likely also powered by the ios)."}, {"owner": {"reputation": 32242, "user_id": 75889, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/37aa3ec65ec47c5a3f9e2a80534837f3?s=128&d=identicon&r=PG", "display_name": "StackedCrooked", "link": "https://stackoverflow.com/users/75889/stackedcrooked"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1449181443, "post_id": 34054256, "comment_id": 55908240, "body": "@TannerSansbury I&#39;m aware of some weird linker issues with recent boost on coliru. I&#39;ll try to fix it soon."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1450122571, "post_id": 34054256, "comment_id": 56292597, "body": "I took a quick pass at this over the weekend: <a href=\"http://coliru.stacked-crooked.com/a/1dc4024e72e06024\" rel=\"nofollow noreferrer\">demo</a>. Once I have some time, I will try to follow up to this question with a detailed answer."}], "owner": {"reputation": 32242, "user_id": 75889, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/37aa3ec65ec47c5a3f9e2a80534837f3?s=128&d=identicon&r=PG", "display_name": "StackedCrooked", "link": "https://stackoverflow.com/users/75889/stackedcrooked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1449094953, "creation_date": 1449094953, "question_id": 34054256, "link": "https://stackoverflow.com/questions/34054256/using-asio-coroutine-with-user-defined-data-structure-instead-of-a-asio-socket", "title": "Using asio coroutine with user-defined data structure instead of a (asio) socket?", "body": "<p>Boost asio's coroutine examples show how a yield context can be passed as completion handler to a socket:</p>\n\n<pre><code>socket.async_read_some(buffer, yield);\n</code></pre>\n\n<p>Can a user-defined data structure be implemented to provide the same functionality as the socket?</p>\n\n<p>My aim is to implement a (single-threaded) packet processing where coroutines act like fibers:</p>\n\n<pre><code>// coroutine which demultiplexes into tcp and udp \nvoid packet_processor(boost::asio::yield_context yield)\n{\n    for (;;)\n    {\n        auto packet = input_queue.pop(yield); \n        if (packet.is_tcp())\n        {\n            tcp_queue.push(packet);\n        }\n        else if (packet.is_udp())\n        {\n            udp_queue.push(packet);\n        }\n    }\n}\n\n// coroutine which handles UDP datagrams\nvoid udp_processor(boost::asio::yield_context yield)\n{\n    for (;;)\n    {\n        auto udp_segment = udp_queue.pop(yield);\n        process(udp_segment);\n    }\n}\n\n\n// coroutine which handles tcp segments\nvoid tcp_processor(boost::asio::yield_context yield)\n{\n    for (;;)\n    {\n        auto tcp_segment = tcp_queue.pop(yield);\n        process(tcp_segment);\n    }\n}\n</code></pre>\n\n<p>Could above code be made to work?</p>\n"}, {"tags": ["c++", "arrays", "caching"], "answers": [{"tags": [], "owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "is_accepted": false, "score": 0, "last_activity_date": 1449094972, "creation_date": 1449094972, "answer_id": 34054258, "question_id": 34054137, "link": "https://stackoverflow.com/questions/34054137/associative-set-cache-underestimating-hit-rate/34054258#34054258", "title": "Associative Set Cache Underestimating Hit Rate", "body": "<p>Not sure if that's the only problem in this code, but you seem to be confusing between the ages and the way number. By assigning <code>maxAge = j</code>, you put an arbitrary way number in your age var (which will interfere with finding the LRU way). You then use it as a way index.</p>\n\n<p>I would suggest splitting this into 2 variables:</p>\n\n<pre><code>if(!hit){\n    for(int j = 0; j &lt; associativity; j++){\n        //loop to find the least recently used block\n        if(age[setNum][j] &gt; maxAge){\n            maxAgeWay = j;\n            maxAge = age[setNum][j];\n\n        }//end if\n\n    }//end for int j        \n    cache[setNum][maxAgeWay] = blockNum;\n    age[setNum][maxAgeWay] = 0;\n}\n</code></pre>\n\n<p>(with the proper initialization and bound checking of course)</p>\n"}], "owner": {"reputation": 11, "user_id": 5632492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baf493230ec6ecf70626ed13a8ff4c41?s=128&d=identicon&r=PG&f=1", "display_name": "maxpauk", "link": "https://stackoverflow.com/users/5632492/maxpauk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449094972, "creation_date": 1449094449, "last_edit_date": 1449094706, "question_id": 34054137, "link": "https://stackoverflow.com/questions/34054137/associative-set-cache-underestimating-hit-rate", "title": "Associative Set Cache Underestimating Hit Rate", "body": "<p>I'm attempting to implement a set associative cache that uses least recently used replacement techniques. So far, my code is underestimating the amount of cache hits, and I'm not sure why. Posted below is my function, setAssoc, which takes in an int value that denotes the associativity of the cache, and also a vector of pairs that are a series of data accesses.</p>\n\n<p>The function uses two 2D arrays, one to store the cache blocks, and one to store the \"age\" of each block in the cache. </p>\n\n<p>For this particular implementation, it's okay to not worry about tag bits or anything of that nature; simply using the address divided by the block size is enough to determine the block number, then using the block number modulo the number of sets to determine the set number is sufficient.</p>\n\n<p>Any insight as to why I may not be accurately predicting the right number of cache hits is appreciated!</p>\n\n<pre><code>int setAssoc(int associativity, vector&lt;pair&lt;unsigned long long, int&gt;&gt;&amp; memAccess){\n\n  int blockNum, setNum;\n  int hitRate = 0;\n  int numOfSets = 16384 / (associativity * 32);\n\n  int cache [numOfSets][associativity];//used to store blocks\n  int age [numOfSets][associativity];//used to store ages\n  int maxAge = 0;\n  int hit;//use this to signal a hit in the cache\n\n  //set up cache here\n  for(int i = 0; i &lt; numOfSets; i++){\n\n    for(int j = 0; j &lt; associativity; j++){\n\n      cache[i][j] = -1;//initialize all blocks to -1\n      age[i][j] = 0;//initialize all ages to 0\n\n\n    }//end for int j\n\n  }//end for int i\n\n\n\n\n  for(int i = 0; i &lt; memAccess.size(); i++){\n    blockNum = int ((memAccess[i].first) / 32);\n    setNum = blockNum % numOfSets;\n\n    hit = 0;\n\n    for(int j = 0; j &lt; associativity; j++){\n        age[setNum][j]++;//age each entry in the cache\n        if(cache[setNum][j] == blockNum){\n            hitRate++;//increment hitRate if block is in cache\n            age[setNum][j] = 0;//reset age of block since it was just accessed\n            hit = 1;\n        }//end if\n    }//end for int j\n\n    if(!hit){\n        for(int j = 0; j &lt; associativity; j++){\n            //loop to find the least recently used block\n            if(age[setNum][j] &gt; maxAge){\n                maxAge = j;\n            }//end if\n\n        }//end for int j        \n        cache[setNum][maxAge] = blockNum;\n        age[setNum][maxAge] = 0;\n    }\n\n\n\n  }//end for int i\n\n  return hitRate;\n}//end setAssoc function\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 3, "creation_date": 1449094306, "post_id": 34054050, "comment_id": 55862371, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/set_intersection\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/set_intersection</a>"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1449094680, "post_id": 34054050, "comment_id": 55862585, "body": "@user657267 The OP needs the indices of the matches. If you sort the vectors goodbye original positions."}, {"owner": {"reputation": 877, "user_id": 2548319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Thw8X.jpg?s=128&g=1", "display_name": "Paulo1205", "link": "https://stackoverflow.com/users/2548319/paulo1205"}, "edited": false, "score": 0, "creation_date": 1449094742, "post_id": 34054050, "comment_id": 55862606, "body": "Can you change the order of elements in those vectors?"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1449095100, "post_id": 34054050, "comment_id": 55862752, "body": "When you get this working consider replacing the inner, coordinate vector with a std::array&lt;int&gt;.  This wil eliminate one level of indirection and associated overhead."}, {"owner": {"reputation": 93, "user_id": 4768756, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cb60dbf1ec27a47682a99fff3da7c4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Schmelix", "link": "https://stackoverflow.com/users/4768756/schmelix"}, "edited": false, "score": 0, "creation_date": 1449095113, "post_id": 34054050, "comment_id": 55862763, "body": "I can sort VecB, but not VecA"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449095162, "post_id": 34054050, "comment_id": 55862790, "body": "<i>I need the position of the equal Elements in vector A</i>  Please explain why you need these positions.  Maybe knowing what you&#39;re really trying to accomplish on a high-level would produce better solutions."}, {"owner": {"reputation": 93, "user_id": 4768756, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cb60dbf1ec27a47682a99fff3da7c4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Schmelix", "link": "https://stackoverflow.com/users/4768756/schmelix"}, "edited": false, "score": 0, "creation_date": 1449095251, "post_id": 34054050, "comment_id": 55862838, "body": "I want to work with the non equal elements in my program. They are Pixels in a image, that I yet not have checked. Where the euqal elements are already checked."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449095387, "post_id": 34054050, "comment_id": 55862901, "body": "@Schmelix  So you&#39;re only using the position as a temporary means of solving a larger problem.  How many elements are there?  Maybe sorting temporary vectors and using <code>std::set_intersection</code>, and then working on the result of that would be the solution (as suggested already)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449095641, "post_id": 34054050, "comment_id": 55863022, "body": "@Schmelix <i>but the vector b can have up to 8000 elements and my program is really slow at the moment.</i> -- Make sure you are running an optimized build (not a &quot;debug&quot; or unoptimized build).  8,000 elements is small."}], "answers": [{"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1449094737, "creation_date": 1449094737, "answer_id": 34054209, "question_id": 34054050, "link": "https://stackoverflow.com/questions/34054050/how-can-i-efficiently-check-if-vector-a-contains-same-elements-than-vector-b/34054209#34054209", "title": "How can I efficiently check, if vector a contains same elements than vector b", "body": "<p>Some suggestions:</p>\n\n<ul>\n<li>don't use a <code>std::vector&lt;int&gt;</code> for a pair of values, use a <code>std::pair&lt;int,int&gt;</code> or a custom structure</li>\n<li>don't use <code>std::vector</code> if you want a fast way to check if a collection contains an element from the other, but a different data structure, eg a <code>std::unordered_set&lt;Coordinate&gt;</code></li>\n</ul>\n\n<p>With a <code>std::unordered_set&lt;Coordinate&gt;</code> everything would be much more efficient. Suppose:</p>\n\n<pre><code>struct Coordinate {\n  int x;\n  int y;\n}\n</code></pre>\n\n<p>Now provide a custom <code>std::hash&lt;Coordinate&gt;</code> specialization that creates a <code>size_t</code> from your <code>Coordinate</code> object and use <code>std::set_intersection</code> or a custom loop that compares the elements.</p>\n\n<p>If you have some range restriction about coordinates, so that both <code>x</code> and <code>y</code> fit 16 bits (eg. <code>[0,65536)</code>) then hashing is trivial (<code>x &lt;&lt; 16 | y</code>), and what's better is that it's unambiguous (two elements with same key will be the same element), which gives more room for optimizations.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1449094810, "creation_date": 1449094810, "answer_id": 34054223, "question_id": 34054050, "link": "https://stackoverflow.com/questions/34054050/how-can-i-efficiently-check-if-vector-a-contains-same-elements-than-vector-b/34054223#34054223", "title": "How can I efficiently check, if vector a contains same elements than vector b", "body": "<p>My suggestion:</p>\n\n<ol>\n<li>Sort both the vectors - that takes O(log(N)) operations.</li>\n<li>Iterate over both the sorted vectors together and compare them. If you find a match, increment both iterators. If they don't match, increment the iterator that is less. This should take O(N) operations.</li>\n<li>Stop when one of the iterators reaches the end.</li>\n</ol>\n"}], "owner": {"reputation": 93, "user_id": 4768756, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cb60dbf1ec27a47682a99fff3da7c4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Schmelix", "link": "https://stackoverflow.com/users/4768756/schmelix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449094810, "creation_date": 1449094119, "question_id": 34054050, "link": "https://stackoverflow.com/questions/34054050/how-can-i-efficiently-check-if-vector-a-contains-same-elements-than-vector-b", "title": "How can I efficiently check, if vector a contains same elements than vector b", "body": "<p>I search for an efficient way to look if vector A contains same elements than vector B. Both vectors have different sizes and each element is another vector with two elements (x and y coordinates). I need the position of the equal Elements in vector A.\nAt the moment I am doing it with for loops, but the vector b can have up to 8000 elements and my program is really slow at the moment.\nI read about the algorithm library, but I could not find something that would help me or I did not understand it.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; VecA; \nstd::vector&lt;std::vector&lt;int&gt;&gt; VecB; //size of VecB &gt;&gt; VecA\n\nfor( int i = 0; i &lt; VecA; i++)\n{\n   for( int z = 0; z &lt; VecB; z++)\n   {\n     if (VecA.at(i) == VecB.at(z))\n     {\n       Do Something with VecA.at(i)\n     }\n   }\n\n}\n</code></pre>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1449094077, "post_id": 34054005, "comment_id": 55862244, "body": "Instead of <code>void Component::draw()</code>, just use <code>void draw()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 3998487, "user_type": "registered", "accept_rate": 7, "profile_image": "https://lh6.googleusercontent.com/-QJhaf0dAZsc/AAAAAAAAAAI/AAAAAAAAAEQ/a1sE7o_9prg/photo.jpg?sz=128", "display_name": "Chris Phillips", "link": "https://stackoverflow.com/users/3998487/chris-phillips"}, "edited": false, "score": 0, "creation_date": 1449095394, "post_id": 34054051, "comment_id": 55862908, "body": "I tried removing the &quot;Component:: like you suggested. Now, however, when I call draw on an instance of InstructionMemory, nothing is drawn. If I replace the &quot;mem.draw()&quot; with the content of &quot;draw()&quot; in my main class it will draw. This was the initial problem I had, and why I tried adding the &quot;Component::&quot; part."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1449095856, "post_id": 34054051, "comment_id": 55863137, "body": "Probably you are doing something like Component mem = InstructionMemory() which incurs in object slicing, you must allocate it dynamically with new."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 5, "last_activity_date": 1449094121, "creation_date": 1449094121, "answer_id": 34054051, "question_id": 34054005, "link": "https://stackoverflow.com/questions/34054005/how-to-properly-implement-an-abstract-class/34054051#34054051", "title": "How to properly implement an Abstract Class?", "body": "<pre><code>    void Component::draw() {\n</code></pre>\n\n<p>This is a scoped definition, you are trying to define the method <code>Component::draw</code>. It is legal to define it outside <code>Component</code> class but it's not legal to define it inside another class (<code>InstructionMemory</code>).</p>\n\n<p>You must remove the specifier <code>Component::</code> and just let it be</p>\n\n<pre><code>class InstructionMemory {\n  ...\n  void draw() override {\n\n  }\n};\n</code></pre>\n\n<p>or, if you want to define it outside the class:</p>\n\n<pre><code>class InstructionMemory {\n  void draw() override;\n}\n\nInstructionMemory::draw() {\n\n}\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 3998487, "user_type": "registered", "accept_rate": 7, "profile_image": "https://lh6.googleusercontent.com/-QJhaf0dAZsc/AAAAAAAAAAI/AAAAAAAAAEQ/a1sE7o_9prg/photo.jpg?sz=128", "display_name": "Chris Phillips", "link": "https://stackoverflow.com/users/3998487/chris-phillips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449104209, "creation_date": 1449093935, "last_edit_date": 1449104209, "question_id": 34054005, "link": "https://stackoverflow.com/questions/34054005/how-to-properly-implement-an-abstract-class", "title": "How to properly implement an Abstract Class?", "body": "<p>I'm trying to create a simple abstract class so that multiple subclasses can implement a method.</p>\n\n<p>My abstract class: Component.h</p>\n\n<pre><code>#ifndef COMPONENT_H\n#define COMPONENT_H\n\nclass Component {\n\n    public: \n        virtual void draw() = 0;\n\n};\n#endif\n</code></pre>\n\n<p>Class that implements: Instruction Memory.cpp</p>\n\n<pre><code>#include &lt;Component.h&gt;\n#include &lt;GL/gl.h&gt;\nusing namespace std;\n\nclass InstructionMemory : public Component {\n\n    private:\n        float width = 145;\n        float height = 180;\n\n    public:\n        void Component::draw() {\n            glBegin(GL_QUADS);\n                glVertex2f(0, 0);\n                glVertex2f(0, height);\n                glVertex2f(width, height);\n                glVertex2f(width, 0);\n            glEnd();\n        }\n};\n</code></pre>\n\n<p>Right now, I'm getting an error: \"cannot define member function 'Component::draw' within 'InstructionMemory.'\"</p>\n\n<p>As you can see, I'm trying to make an OpenGL project where each component can draw itself.</p>\n\n<p>Edit: I thought if I included the abstract class, any classes that implement it would be ok. I'm getting that \"'InstructionMemory' was not declared in this scope.\" Do I need to make an InstructionMemory.h? Here is my full code:</p>\n\n<hr>\n\n<pre><code>#include &lt;GL/gl.h&gt;\n#include &lt;GL/glu.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;iostream&gt;\n\n#include &lt;Math.h&gt;\n#include &lt;my_headers/Component.h&gt;\nusing namespace std;\n\nconst int WIDTH = 1280;\nconst int HEIGHT = 720; \nComponent* components[50];\nint numComponents = 0;\n\nvoid display(void) {\n    glClear(GL_COLOR_BUFFER_BIT);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    glColor3f(1, 1, 1);\n\n    glTranslatef(300, 300, 0);\n    InstructionMemory mem;\n    mem.draw();    // Here is where I want the memory unit to draw itself\n\n    /* This will draw the memory unit. Copied and pasted from mem.draw()\n    float width = 145;\n    float height = 180;\n\n\n    glBegin(GL_QUADS);\n        glVertex2f(0, 0);\n        glVertex2f(0, height);\n        glVertex2f(width, height);\n        glVertex2f(width, 0);\n    glEnd();\n    */\n\n\n    glFlush();\n}\n\nvoid setup(void) {\n   glClearColor(0.162, 0.181, 0.205, 1.0);\n}\n\nvoid resize(int w, int h) {\n   glViewport(0, 0, w, h);\n   glMatrixMode(GL_PROJECTION);\n   glLoadIdentity();\n   glOrtho(0.0, WIDTH, 0.0, HEIGHT, 0.0, 1.0);\n   glMatrixMode(GL_MODELVIEW);\n   glLoadIdentity();\n}\n\nvoid keyInput(unsigned char key, int x, int y) {\n   switch(key)\n   {\n      case 27:\n         exit(0);\n         break;\n      default:\n         break;\n   }\n}\n\nint main(int argc, char **argv) {\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA);\n    glutInitWindowSize(WIDTH, HEIGHT);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(\"CPU Simulator.cpp\");\n    glutDisplayFunc(display);\n    glutReshapeFunc(resize);\n    glutKeyboardFunc(keyInput);\n    setup();\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>#ifndef COMPONENT_H\n#define COMPONENT_H\n\nclass Component {\n\n    public: \n        virtual void draw() = 0;\n\n};\n#endif\n</code></pre>\n\n<hr>\n\n<pre><code>#include &lt;my_headers/Component.h&gt;\n#include &lt;GL/gl.h&gt;\nusing namespace std;\n\n\nclass InstructionMemory : public Component {\n\n    private:\n        float width = 145;\n        float height = 180;\n\n    public:\n        InstructionMemory();\n        void draw() override {\n            glBegin(GL_QUADS);\n                glVertex2f(0, 0);\n                glVertex2f(0, height);\n                glVertex2f(width, height);\n                glVertex2f(width, 0);\n            glEnd();\n        }\n};\n</code></pre>\n"}, {"tags": ["c++", "sorting", "lambda", "import-from-excel", "safearray"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095144, "post_id": 34053986, "comment_id": 55862779, "body": "The lambda needs to return a boolean value (e.g. <code>return comparestring.....</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095219, "post_id": 34053986, "comment_id": 55862816, "body": "also you probably meant <code>ndx, ndx + 5</code> instead of <code>ndx[0], ndx[4]</code>. That should make it compile but it seems to me that your pointer cast hackery is still producing junk"}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095283, "post_id": 34053986, "comment_id": 55862852, "body": "Thanks. I tried using place the three statements from inside <code>comparestring</code> directly into the lambda, and even though it would then return a boolean, I got the exact same error."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095501, "post_id": 34053986, "comment_id": 55862960, "body": "Does your compiler come with a C++ wrapper for SAFEARRAY? That would save a lot of reinventing the wheel."}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095739, "post_id": 34053986, "comment_id": 55863064, "body": "Yes, but this is for educational purposes. Using a wrapper obscures a lot of what is going on. The project has worked out very well so far. As mentioned, I can sort arrays of all the native types including VBA&#39;s Variant. I am surprised that extending this to sorting an array of indexes into the the SAFEARRAY is difficult."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095851, "post_id": 34053986, "comment_id": 55863133, "body": "Maybe drawing a memory map would help you. <code>(*p) + i1, (*p) + i2</code> is obviously wrong, as <code>i1</code> and <code>i2</code> are taking values from 1 through 5, but your <code>comparestring</code> function is expecting to get pointers to different strings to compare (when in fact it will get pointers to adjacent bytes)"}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449095904, "post_id": 34053986, "comment_id": 55863161, "body": "By the way, <code>ndx, ndx + 5</code> does not compile either... but the errors are different. It now reports: <code>conditional expression of type &#39;void&#39; is illegal</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449096323, "post_id": 34053986, "comment_id": 55863332, "body": "Did you fix the missing <code>return</code> ?"}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449097363, "post_id": 34053986, "comment_id": 55863726, "body": "Yes, and it does compile now. But, the returned sorted order of the indexes is wrong."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449097631, "post_id": 34053986, "comment_id": 55863848, "body": "Yes, see my earlier comment about <code>i1</code>, <code>i2</code>"}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098085, "post_id": 34053986, "comment_id": 55864046, "body": "@M.M Can you suggest a link for me to read up on what you are talking about. it&#39;s literally been decades for me... or if you could post a code example?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098262, "post_id": 34053986, "comment_id": 55864105, "body": "Not really, I don&#39;t know of any documentation of safearray apart from what&#39;s on the MSDN website."}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098304, "post_id": 34053986, "comment_id": 55864121, "body": "Just re-read you comment, but it seems to me that the pointer arithmetic should work. Yes the number coming from <code>i1</code> and <code>i2</code> will be the values 1 to 5, but the pData is sequential long pointers to the strings..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098305, "post_id": 34053986, "comment_id": 55864123, "body": "Have you considered using the Windows API functions for accessing the array members, instead of adding integers?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098332, "post_id": 34053986, "comment_id": 55864134, "body": "Your first test will be <code>comparestring(1000, 1001)</code> or similar, those clearly cannot point to different strings"}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098402, "post_id": 34053986, "comment_id": 55864168, "body": "Sorry for the confusion. I am good with my understanding of the the documentation of SAFEARRAY. I know it very well. C++ is my weakness. I did not get the memory map suggestion."}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098598, "post_id": 34053986, "comment_id": 55864243, "body": "Since <code>*p</code> is a <code>long</code>, and if <code>p = 1000</code>, shouldn&#39;t <code>p + 1 = 1004</code> ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449098799, "post_id": 34053986, "comment_id": 55864313, "body": "Yes, but you&#39;re doing <code>*p</code>, not <code>p</code>. You&#39;re adding two integers."}, {"owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449100130, "post_id": 34053986, "comment_id": 55864798, "body": "@M.M I fixed it with your help... so thanks. I needed ndx to be populated starting with zero instead of one (doh!) and then this did the trick in the lambda:  <code>return comparestring(*(p + i1), *(p + i2));</code> Please write an answer and I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1449100708, "last_edit_date": 1449100708, "creation_date": 1449100377, "answer_id": 34055381, "question_id": 34053986, "link": "https://stackoverflow.com/questions/34053986/sort-array-of-indexes-into-primary-array/34055381#34055381", "title": "Sort Array of Indexes Into Primary Array", "body": "<p>This code:</p>\n\n<pre><code>long ndx[5];\nfor (int i = 0; i &lt; 5; i++) ndx[i] = i + 1;\nstd::sort(ndx[0], ndx[4], [&amp;p](long i1, long i2) { comparestring((*p) + i1, (*p) + i2); })\n</code></pre>\n\n<p>should probably be:</p>\n\n<pre><code>long ndx[5];\nfor (int i = 0; i &lt; 5; i++) ndx[i] = i;\nstd::sort(ndx, ndx + 5, [&amp;](long i1, long i2) { return comparestring(*(p + i1), *(p + i2)); }\n</code></pre>\n\n<p>The first two arguments to <code>std::sort</code> are an iterator range. It'd be better style (assuming your compiler is C++11-compatible) to use <code>std::begin(ndx)</code> and <code>std::end(ndx)</code>.</p>\n\n<p>Also, the second line can be written <code>std::iota( std::begin(ndx), std::end(ndx), 0 );</code></p>\n"}], "owner": {"reputation": 12614, "user_id": 3566998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S7lz6.png?s=128&g=1", "display_name": "Excel Hero", "link": "https://stackoverflow.com/users/3566998/excel-hero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 34055381, "answer_count": 1, "score": 1, "last_activity_date": 1449100708, "creation_date": 1449093879, "last_edit_date": 1495541711, "question_id": 34053986, "link": "https://stackoverflow.com/questions/34053986/sort-array-of-indexes-into-primary-array", "title": "Sort Array of Indexes Into Primary Array", "body": "<p>I'm coding a C++ dll to sort a SAFEARRAY passed from VBA.</p>\n\n<p>I'm not using any OLE libraries, but rather accessing the array descriptor and data directly.</p>\n\n<p>I have no problem sorting an array of any native VBA types. For example, the following fragment sorts an array of BSTRs:</p>\n\n<pre><code>long * p = (long*)pData; \n\nstd::sort(p, p + elems, comparestring);\n</code></pre>\n\n<p>...which uses this comparison function:</p>\n\n<pre><code>bool comparestring(const long&amp; lhs, const long&amp; rhs) {\n\n   wchar_t * lhs_ = (wchar_t*)lhs;\n   wchar_t * rhs_ = (wchar_t*)rhs;\n\n   return _wcsicmp(lhs_, rhs_) &lt; 0;\n}\n</code></pre>\n\n<p>I realize I'm cheating here since <code>wchar_t</code> is very different from <code>BSTR</code>, but it's not common to have a zero char within the payload of an Excel string and so I'm OK with that. The above works well.</p>\n\n<p><strong>THE PROBLEM</strong></p>\n\n<p>I want the dll to optionally be able to sort a companion array of indexes into the primary data array. In this mode only the index array would be sorted, leaving the source data untouched.</p>\n\n<p>My research suggests that a lamda functor may be the most promising path as I'd prefer not to allocate memory for additional arrays or vectors of data or pairs.</p>\n\n<p>In particular, <a href=\"https://stackoverflow.com/a/12399290/3566998\">this answer seems very promising</a>.</p>\n\n<p>However, I cannot work out how to adapt it to my situation where I'm processing the raw pointers to the BSTRs that begin at pData.</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>long * p = (long*)pData; \n\nlong ndx[5];\n\nfor (int i = 0; i &lt; 5; i++) ndx[i] = i + 1;\n\nstd::sort(ndx[0], ndx[4], [&amp;p](long i1, long i2) { comparestring((*p) + i1, (*p) + i2); })\n</code></pre>\n\n<p>I am using VC++ 2015 and the above results in the following error:</p>\n\n<p><code>Error  C2893   Failed to specialize function template 'iterator_traits&lt;_Iter&gt;::iterator_category std::_Iter_cat(const _Iter &amp;)'</code></p>\n\n<p>My C programming days are ancient history (predating the existence of C++) and so I'm struggling a little. Appreciate any assistance.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The code now looks like this.. and it compiles, but the order of <code>ndx</code> is incorrect after execution:</p>\n\n<pre><code>long * p = (long*)pData; \n\nlong ndx[5];\n\nfor (int i = 0; i &lt; 5; i++) ndx[i] = i + 1;\n\nstd::sort(ndx, ndx + 5, [&amp;p](long i1, long i2) { return comparestring(*p + i1, *p + i2); })\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "macos", "qt"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1449100103, "post_id": 34053980, "comment_id": 55864790, "body": "Sounds to me like you may be running into OS/X&#39;s infamous &quot;App Nap&quot; feature.  Try running Activity Monitor, right-clicking on the header of its Processes table to expose the &quot;App Nap&quot; column, and then watching your program&#39;s row in that table while reproducing the fault.  If you see the &quot;App Nap&quot; value turn to &quot;Yes&quot;, then it&#39;s probably App Nap that is causing your timing to be slow."}, {"owner": {"reputation": 1121, "user_id": 4005852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5vp4.jpg?s=128&g=1", "display_name": "Cong Ma", "link": "https://stackoverflow.com/users/4005852/cong-ma"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1449174311, "post_id": 34053980, "comment_id": 55904162, "body": "Thanks for your help. Disabled App Nap and the issue disappeared."}], "owner": {"reputation": 1121, "user_id": 4005852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5vp4.jpg?s=128&g=1", "display_name": "Cong Ma", "link": "https://stackoverflow.com/users/4005852/cong-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449093866, "creation_date": 1449093866, "question_id": 34053980, "link": "https://stackoverflow.com/questions/34053980/thread-cannot-wake-in-qt-application", "title": "Thread cannot wake in Qt application.", "body": "<p>I have an issue about <code>sleep_for</code> in my Qt application and it can be reproduced in this test program.</p>\n\n<p>The <code>sleep_for</code> always returns in 1 second if the test program has the focus. If the test program loses the focus, <code>sleep_for</code> still returns normally in the first minute, but then it sleeps for around 10 seconds every time. </p>\n\n<p>I tried to use <code>nanosleep</code> instead of sleep_for , or use std thread instead of QThread. Got the same issue.</p>\n\n<p>If I uncommented Qt code , the sleep problem is gone.</p>\n\n<p>I'm so confused now. Does OS give dead loop thread a penalty ? </p>\n\n<p>I'm on Mac OS X 10.10 with Qt 5.5.1 and clang-602.0.53. </p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;QApplication&gt;\n#include &lt;QThread&gt;\n\n\nint sleep_test(void)\n{\n    while (1)\n    {\n        auto start = std::chrono::system_clock::now();\n        std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n        //nanosleep((const struct timespec[]){{1, 0}}, nullptr);\n        auto end = std::chrono::system_clock::now();\n\n        std::cout &lt;&lt; (end-start).count() &lt;&lt; std::endl;\n    }\n    return 0;\n}\n\nclass QtSleepThread : public QThread\n{\n    public:\n        void run()\n        {\n            sleep_test();\n        }\n};\n\nint main(int argc, char * argv[])\n{\n\n#if 0\n    std::thread t(sleep_test);\n    t.join();\n\n#else\n    QApplication app(argc, argv);\n\n    //std::thread t(sleep_test);\n    QtSleepThread t;\n    t.start();\n\n    app.exec();\n#endif\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1449094930, "post_id": 34053976, "comment_id": 55862681, "body": "You have a typo in your <code>sum_matrix</code> here: <code>for(int j=0;i&lt;SIZEY;j++)</code>. It loops infinitely (note the <code>i</code> instead of <code>j</code>). It should be <code>for(int j=0;j&lt;SIZEY;j++)</code>. If you use more spaces in your code, it will be easier to see: <code>for ( int j = 0; i &lt; SIZEY; j++ )</code>. And spaces don&#39;t cost anything. :)"}, {"owner": {"reputation": 1, "user_id": 5632413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6e0326314ad9c5ca9d811787405556?s=128&d=identicon&r=PG", "display_name": "Danteska", "link": "https://stackoverflow.com/users/5632413/danteska"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1449095441, "post_id": 34053976, "comment_id": 55862931, "body": "Such a dumb mistake :( Thanks a lot!! Spent literally hours changing things in this, now it works. Thank you!"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1449095568, "post_id": 34053976, "comment_id": 55862991, "body": "Not dumb. I looked at it several times before I spotted it. It&#39;s very hard to see. It&#39;s one reason why coding standards recommend spacing."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449095743, "post_id": 34053976, "comment_id": 55863066, "body": "That&#39;s just a typo. But I will recommend using longer, more descriptive variable names. i and j are easy to mix up and hard to tell apart."}], "owner": {"reputation": 1, "user_id": 5632413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6e0326314ad9c5ca9d811787405556?s=128&d=identicon&r=PG", "display_name": "Danteska", "link": "https://stackoverflow.com/users/5632413/danteska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449093856, "creation_date": 1449093856, "question_id": 34053976, "link": "https://stackoverflow.com/questions/34053976/a-program-that-sums-two-2x2-matrices-done-with-functions-is-crashing-when-i-fill", "title": "A program that sums two 2x2 matrices done with functions is crashing when I fill in the values", "body": "<p>I'm very new to this. Was asked to do the following exercise:</p>\n\n<blockquote>\n  <p>Make a program that would declare two square matrices of 2x2 size and\n  would sum them up. The main program will \"load\" both matrices with\n  values given by the user (through cin) and will send them to a\n  subprogram that will perform the sum, returning the result. The main\n  program will then output the resulting matrix on screen.</p>\n</blockquote>\n\n<p>Basically an exercise that would be easily done if not because of the functions part. This is what I've got so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nconst int SIZEX = 2;\nconst int SIZEY = 2;\ntypedef float matrix[SIZEX][SIZEY];\n\nvoid sum_matrix (const matrix p, const matrix q, matrix sum);\n\nint main()\n{\n    int i,j;\n    matrix p, q, sum;\n\n    for(i=0;i&lt;SIZEX;i++)\n        for(j=0;j&lt;SIZEY;j++)\n        {\n            cout&lt;&lt;\"Fill in the matrices values\" &lt;&lt; i &lt;&lt; \" \" &lt;&lt; j &lt;&lt; endl;\n            cin&gt;&gt; p[i][j] &gt;&gt; q[i][j];\n        }\n\n    sum_matrix(p, q, sum);\n\n    for(i=0;i&lt;SIZEX;i++)\n    {\n        cout&lt;&lt;endl;\n        for(j=0;j&lt;SIZEY;j++)\n            cout&lt;&lt;sum[i][j]&lt;&lt;\" \";\n    }\n\n    return 0;\n\n}\n\nvoid sum_matrix (const matrix p, const matrix q, matrix sum)\n{\n    for(int i=0;i&lt;SIZEX;i++)\n        for(int j=0;i&lt;SIZEY;j++)\n            sum[i][j]=p[i][j]+q[i][j];\n}\n</code></pre>\n\n<p>My compiller throws no errors whatsoever, so I run it. I fill in the values, I press enter to proceed to the calculation and output of the result, and the program crashes. I'm sure this is full of errors, but I just wanted to at least run it to find any, yet it's the first time the cmd crashes for me when doing this.</p>\n\n<p>Any kind of help will be appreciated.</p>\n"}, {"tags": ["c++", "class", "constants"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449093694, "post_id": 34053877, "comment_id": 55862024, "body": "It&#39;s legal code. Whether it&#39;s a good idea or not depends on the bigger picture of the class"}, {"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 1, "creation_date": 1449093747, "post_id": 34053877, "comment_id": 55862054, "body": "You are not changing <code>this-&gt;info</code>, but <code>this-&gt;info[index]</code>. That&#39;s a huge difference."}, {"owner": {"reputation": 171, "user_id": 5540137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1018979971456480/picture?type=large", "display_name": "\u0622\u062f\u0645 \u0642\u0646\u0648\u0627\u062a", "link": "https://stackoverflow.com/users/5540137/%d8%a2%d8%af%d9%85-%d9%82%d9%86%d9%88%d8%a7%d8%aa"}, "edited": false, "score": 1, "creation_date": 1449093767, "post_id": 34053877, "comment_id": 55862065, "body": "the <code>const</code> on the <code>types</code> of <code>class</code> which mean you have <code>double*</code>  then the <code>const</code> refers to <code>pointer</code> not the <code>value</code> ..."}, {"owner": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "reply_to_user": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 0, "creation_date": 1449093855, "post_id": 34053877, "comment_id": 55862115, "body": "@Kay Are you saying because the function is const it is refering to the pointer?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1449093914, "post_id": 34053877, "comment_id": 55862146, "body": "<a href=\"http://stackoverflow.com/a/11287497/1505939\">See this answer</a>. Also, <a href=\"http://stackoverflow.com/questions/2352902/physical-constness-of-a-class/\">related reading</a>"}, {"owner": {"reputation": 171, "user_id": 5540137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1018979971456480/picture?type=large", "display_name": "\u0622\u062f\u0645 \u0642\u0646\u0648\u0627\u062a", "link": "https://stackoverflow.com/users/5540137/%d8%a2%d8%af%d9%85-%d9%82%d9%86%d9%88%d8%a7%d8%aa"}, "edited": false, "score": 1, "creation_date": 1449093973, "post_id": 34053877, "comment_id": 55862178, "body": "in your case yes it is, if you have another <code>value</code> like:<code>int key</code>, then <code>const</code> refers to value of <code>key</code>... and function <code>set</code> don&#39;t need <code>const</code>"}, {"owner": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "reply_to_user": {"reputation": 171, "user_id": 5540137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1018979971456480/picture?type=large", "display_name": "\u0622\u062f\u0645 \u0642\u0646\u0648\u0627\u062a", "link": "https://stackoverflow.com/users/5540137/%d8%a2%d8%af%d9%85-%d9%82%d9%86%d9%88%d8%a7%d8%aa"}, "edited": false, "score": 0, "creation_date": 1449094099, "post_id": 34053877, "comment_id": 55862257, "body": "@\u0622\u062f\u0645\u0642\u0646\u0648\u0627\u062a This is exactly the explanation i was looking for, clear and i understand it. because info is a pointer it&#39;s valid but if not it wouldn&#39;t be, thank you. Is there any benefit to declaring const anyway?"}, {"owner": {"reputation": 171, "user_id": 5540137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1018979971456480/picture?type=large", "display_name": "\u0622\u062f\u0645 \u0642\u0646\u0648\u0627\u062a", "link": "https://stackoverflow.com/users/5540137/%d8%a2%d8%af%d9%85-%d9%82%d9%86%d9%88%d8%a7%d8%aa"}, "edited": false, "score": 0, "creation_date": 1449094717, "post_id": 34053877, "comment_id": 55862596, "body": "The point of <code>set</code> to change <code>value of members</code> then you don&#39;t need it."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "edited": false, "score": 1, "creation_date": 1449093895, "post_id": 34053951, "comment_id": 55862137, "body": "Thank you, a useful answer"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "edited": false, "score": 0, "creation_date": 1449094653, "post_id": 34053951, "comment_id": 55862566, "body": "@RaymondTunstill Pleasure.  If so then please accept this answer, :)"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1449094215, "last_edit_date": 1449094215, "creation_date": 1449093774, "answer_id": 34053951, "question_id": 34053877, "link": "https://stackoverflow.com/questions/34053877/c-function-const/34053951#34053951", "title": "C++ Function Const", "body": "<p>It is <em>sort of</em> correct, a <code>const</code> member function doesn't alter internal state.  <code>set</code> obviously doesn't alter the pointer <code>info</code>, but does alter what it points to.  Now your have to decide (the compiler can't) if this is <code>const</code> behavior or not.  In most cases it wouldn't be <code>const</code> behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "edited": false, "score": 0, "creation_date": 1449093959, "post_id": 34053998, "comment_id": 55862166, "body": "Is a member variable, something like double info; inside the class?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "edited": false, "score": 0, "creation_date": 1449094641, "post_id": 34053998, "comment_id": 55862556, "body": "@RaymondTunstill yes."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 2, "last_activity_date": 1449093913, "creation_date": 1449093913, "answer_id": 34053998, "question_id": 34053877, "link": "https://stackoverflow.com/questions/34053877/c-function-const/34053998#34053998", "title": "C++ Function Const", "body": "<p>This function <em>doesn't</em> change any member variables. The only member variable is <code>info</code>, which it doesn't change. It does change <em>the thing <code>info</code> points to</em>, but that's not a member variable. So it's legal as far as the compiler's concerned.</p>\n\n<p>However, note that it's likely to confuse other programmers (including yourself in six months) - generally, <code>const</code> functions <em>shouldn't</em> modify the object's state.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "edited": false, "score": 0, "creation_date": 1449184866, "post_id": 34054623, "comment_id": 55909751, "body": "Thank you, I know it was a simple and stupid question and I appreciate the comprehensiveness of your answer"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1449108269, "last_edit_date": 1449108269, "creation_date": 1449096658, "answer_id": 34054623, "question_id": 34053877, "link": "https://stackoverflow.com/questions/34053877/c-function-const/34054623#34054623", "title": "C++ Function Const", "body": "<p>Just to add some color to already provided answers. Withing <code>const</code> qualified functions, all mebers effectively becoming const. For example, your info is becoming const and behaves as if it was defined like this:</p>\n\n<pre><code>double* const info;\n</code></pre>\n\n<p>Note, that this IS different from</p>\n\n<pre><code>const double* info;\n</code></pre>\n\n<p>First makes info itself unmodifiable (you can't say <code>info = &amp;d</code>, but you <strong>can</strong> say <code>*info = 42</code>. On the other hand, the later means info is modifieable, but not where it points to. You <strong>can</strong> write <code>info = &amp;d</code>, but not <code>*info = 42</code>.</p>\n\n<p>Obviously, there is a way to have both qualities, by saying <code>const double* const info</code> - that would prevent modifications of both pointer and the value. However, this is not what <code>const</code>-qualification does for function. Is it intuitive? I dare say, it is not. However, this is what it is, so we have to live with that.</p>\n\n<p>Obviously, one could argue that const-qualified functions <strong>could</strong> make all member pointers double-const, but what about pointer-like objects (say, <code>unique_ptr</code>)? There is no way compiler would be able to make those double const, so it is better to be consistant.</p>\n"}], "owner": {"reputation": 99, "user_id": 4248760, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1362067529/picture?type=large", "display_name": "Raymond Tunstill", "link": "https://stackoverflow.com/users/4248760/raymond-tunstill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 34054623, "answer_count": 3, "score": 0, "last_activity_date": 1449108269, "creation_date": 1449093533, "question_id": 34053877, "link": "https://stackoverflow.com/questions/34053877/c-function-const", "title": "C++ Function Const", "body": "<p>I have a class which I am using to try and help understand the concept of const. For example.</p>\n\n<pre><code>Class class1:\n{\nprotected:\n    double * info;\npublic: \n    void set(const int i, const int j, const double val) const\n    {\n          info[i + j] = val;\n    }\n}\n</code></pre>\n\n<p>I have read multiple articles that say you write const after a class function if that function isn't going to change any member variables. With this class however it works is it correct or incorrect?</p>\n\n<p>Also my understanding of const variables is that you make them const if they are never going to change, but is there any benefit to this?</p>\n\n<p>Thank you, apologies if this has been answered elsewhere i just can't seem to get my head around it.</p>\n"}, {"tags": ["c++", "c", "encryption", "openssl", "aes"], "comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1449134327, "post_id": 34053868, "comment_id": 55877255, "body": "Why wouldn\u2019t you expect encrypting the same plaintext with the same key and IV to produce the same value?  Did you want to repeat the plaintext as the second block?"}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1449134891, "post_id": 34053868, "comment_id": 55877624, "body": "Yes. I expect that data can repeat. And as I understood for my security wouldn&#39;t be broken the cipher must be different"}], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449141134, "post_id": 34063760, "comment_id": 55882038, "body": "Ok, I removed &quot;EVP_EncryptInit_ex&quot; and &quot;EVP_CIPHER_CTX_ctrl&quot; lines. But result is the same. So I need to encrypt my packetized data. As I understood, I can use EVP_aes_256_ctr to do what I want or use GCM but for each packet set the new IV?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449141678, "post_id": 34063760, "comment_id": 55882389, "body": "Call <code>EVP_EncryptUpdate()</code> multiple times after initializing the <code>ctx</code> once. Some example code: <a href=\"https://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption#Authenticated_Decryption_using_GCM_mode\" rel=\"nofollow noreferrer\">wiki.openssl.org/index.php/&hellip;</a>"}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449143060, "post_id": 34063760, "comment_id": 55883340, "body": "So I should use it without verifying the tag? EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_GET_TAG, 16, outbuf) called after encrypt_final"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1449179914, "post_id": 34063760, "comment_id": 55907420, "body": "You should verify the tag when decrypting.  Call <code>EVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_AEAD_SET_TAG, taglen, tag);</code> after <code>EVP_EncryptInit_ex()</code> but before <code>EVP_DecryptUpdate()</code>."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1449141742, "last_edit_date": 1449141742, "creation_date": 1449139196, "answer_id": 34063760, "question_id": 34053868, "link": "https://stackoverflow.com/questions/34053868/aes-gcm-ctr-same-output/34063760#34063760", "title": "AES GCM/CTR same output", "body": "<p>If you run the algorithm twice with the same inputs, you\u2019ll get the same outputs.  If you want to encrypt the same plaintext multiple times and not let an attacker see it\u2019s the same, use a different IV.  If you want to repeat a block within the plaintext and not let an attacker deduce the pattern, you don\u2019t want to restart.  Notice how, in the example that worked, you called <code>EVP_EncryptInit_ex()</code> <em>before</em> your calls to <code>EVP_EncryptUpdate()</code>, and in the example that didn\u2019t, you called <code>EVP_EncryptInit_ex()</code> again <em>between</em> them.</p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 34063760, "answer_count": 1, "score": 0, "last_activity_date": 1449141742, "creation_date": 1449093472, "question_id": 34053868, "link": "https://stackoverflow.com/questions/34053868/aes-gcm-ctr-same-output", "title": "AES GCM/CTR same output", "body": "<p>I'm trying to use AES-GCM. My code for encryption works, but when I try to encrypt the same plain text with the same IV and key, I've got same result. My code for GCM:</p>\n\n<pre><code>EVP_CIPHER_CTX *ctx;\nint outlen, tmplen;\nunsigned char outbuf[1024];\nctx = EVP_CIPHER_CTX_new();\nEVP_EncryptInit_ex(ctx, EVP_aes_256_gcm(), NULL, NULL, NULL);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, sizeof(gcm_iv), NULL);\nEVP_EncryptInit_ex(ctx, NULL, NULL, gcm_key, gcm_iv);\nEVP_EncryptUpdate(ctx, NULL, &amp;outlen, gcm_aad, sizeof(gcm_aad));\nEVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, sizeof(gcm_pt));\nprintf(\"Ciphertext:\\n\");\nBIO_dump_fp(stdout, outbuf, outlen);\nEVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_GET_TAG, 16, outbuf);\n\nprintf(\"\\n\\n\\n\");\n\nEVP_EncryptInit_ex(ctx, EVP_aes_256_gcm(), NULL, NULL, NULL);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, sizeof(gcm_iv), NULL);\nEVP_EncryptInit_ex(ctx, NULL, NULL, gcm_key, gcm_iv);\nEVP_EncryptUpdate(ctx, NULL, &amp;outlen, gcm_aad, sizeof(gcm_aad));\nEVP_EncryptUpdate(ctx, outbuf2, &amp;outlen2, gcm_pt, sizeof(gcm_pt));\nprintf(\"Ciphertext:\\n\");\nBIO_dump_fp(stdout, outbuf2, outlen2);\nEVP_EncryptFinal_ex(ctx, outbuf2, &amp;outlen2);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_GET_TAG, 16, outbuf2);\nEVP_CIPHER_CTX_free(ctx);\n</code></pre>\n\n<p>If in the second encryption I will remove init_ex, ctx_ctrl etc, my ciphertext will be an empty string.</p>\n\n<p>But if I will use EVP_aes_256_ctr, then next encryption will give me new ciphertext. Code for EVP_aes_256_ctr:</p>\n\n<pre><code>EVP_CIPHER_CTX *ctx;\nint outlen, tmplen;\nunsigned char outbuf[1024];\nctx = EVP_CIPHER_CTX_new();\nEVP_EncryptInit_ex(ctx, EVP_aes_256_ctr(), NULL, NULL, NULL);\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, sizeof(gcm_iv), NULL);\nEVP_EncryptInit_ex(ctx, NULL, NULL, gcm_key, gcm_iv);\nEVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, sizeof(gcm_pt));\nBIO_dump_fp(stdout, outbuf, outlen);\nEVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);\n\nprintf(\"\\n\\n\\n\");\n\nEVP_EncryptUpdate(ctx, outbuf, &amp;outlen, gcm_pt, sizeof(gcm_pt));\nprintf(\"Ciphertext:\\n\");\nBIO_dump_fp(stdout, outbuf, outlen);\nEVP_EncryptFinal_ex(ctx, outbuf, &amp;outlen);\nEVP_CIPHER_CTX_free(ctx);\n</code></pre>\n\n<p>As I understood both modes work in Counter mode, so the counter will make different cyphers for same IV,Key,Plaintext. So why in GCM mode cyphertext is the same?</p>\n"}, {"tags": ["c#", "c++"], "answers": [{"comments": [{"owner": {"reputation": 2176, "user_id": 639691, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/gwKaK.png?s=128&g=1", "display_name": "Neoheurist", "link": "https://stackoverflow.com/users/639691/neoheurist"}, "edited": false, "score": 0, "creation_date": 1449151174, "post_id": 34054147, "comment_id": 55888711, "body": "This approach works well - thank you. Of note, I needed to trim trailing &#39;\\0&#39; values in the returned string. e.g.  <code>Encoding.ASCII.GetString(buffer).Trim(&#39;\\0&#39;)</code>"}], "tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": true, "score": 2, "last_activity_date": 1449095558, "last_edit_date": 1449095558, "creation_date": 1449094486, "answer_id": 34054147, "question_id": 34053797, "link": "https://stackoverflow.com/questions/34053797/invoking-c-function-from-c-passing-a-void-pointer-that-is-type-stripped/34054147#34054147", "title": "Invoking C++ function from C# passing a void pointer that is type stripped", "body": "<p>First, <code>eString</code> is a special case, since it's the only variable-length type. The other types are of a fixed size and should be easier to retrieve.</p>\n\n<p>So let's start with <code>eLong</code>. This maps to a C++ <code>long</code>, which in turn should <em>probably</em> map to a C# <code>int</code> - but this is architecture dependent so your mileage my vary.</p>\n\n<ul>\n<li>In C#, an <code>int</code> is always 32-bit, and a <code>long</code> is always 64-bit.</li>\n<li>In C++, there's <a href=\"http://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow\">no fixed size</a>. For all you know, an <code>int</code> is defined as at least 16-bit, and a <code>long</code> as at least 32-bit. In Visual C++, they're <a href=\"https://msdn.microsoft.com/en-us/library/cc953fe1.aspx\" rel=\"nofollow\">both 32-bit</a> though.</li>\n</ul>\n\n<p>Make sure you know what you're doing and you get the sizes right.</p>\n\n<p>Now, you need a pointer to unmovable memory the unmanaged function can safely write to. As it happens, <em>value type</em> stack variables won't be moved by the GC, so you can simply write the following:</p>\n\n<pre><code>internal static unsafe int GetUnits(void** handle)\n{\n    int value;\n    GetAttrib(handle, eAttrib.eUnits, &amp;value, eAttribType.eLong, sizeof(int));\n    return value;\n}\n</code></pre>\n\n<p>Another method would involve <a href=\"https://msdn.microsoft.com/en-us/library/cx9s2sy4.aspx\" rel=\"nofollow\"><code>stackalloc</code></a>:</p>\n\n<pre><code>internal static unsafe int GetUnits(void** handle)\n{\n    var buffer = stackalloc int[1];\n    GetAttrib(handle, eAttrib.eUnits, buffer, eAttribType.eLong, sizeof(int));\n    return *buffer;\n}\n</code></pre>\n\n<p>You could use this with a <code>stackalloc byte[whatever]</code> if there's no C# built-in type that could fit.</p>\n\n<p>That's obviously untested as I don't have the lib, but it should do it.</p>\n\n<p>As for strings, you'd need a managed array, so you can feed them into <a href=\"https://msdn.microsoft.com/en-us/library/744y86tc.aspx\" rel=\"nofollow\"><code>Encoding.GetString</code></a>. Yeah, you need to know the encoding too. I'll assume ASCII here.</p>\n\n<pre><code>internal static unsafe string GetInvoiceNumber(void** handle)\n{\n    var buffer = new byte[512];\n    fixed (byte* bufAddr = &amp;buffer[0])\n    {\n        GetAttrib(handle, eAttrib.eInvoiceNumber, bufAddr, eAttribType.eString, buffer.Length);\n        return Encoding.ASCII.GetString(buffer);\n    }\n}\n</code></pre>\n\n<p>As a managed array lives on the managed heap, you need to <em>pin</em> it so it won't be moved by the GC during operation. That's what the <a href=\"https://msdn.microsoft.com/en-us/library/f58wzh21.aspx\" rel=\"nofollow\"><code>fixed</code> statement</a> does.</p>\n"}, {"tags": [], "owner": {"reputation": 2176, "user_id": 639691, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/gwKaK.png?s=128&g=1", "display_name": "Neoheurist", "link": "https://stackoverflow.com/users/639691/neoheurist"}, "is_accepted": false, "score": 0, "last_activity_date": 1449151651, "creation_date": 1449151651, "answer_id": 34068117, "question_id": 34053797, "link": "https://stackoverflow.com/questions/34053797/invoking-c-function-from-c-passing-a-void-pointer-that-is-type-stripped/34068117#34068117", "title": "Invoking C++ function from C# passing a void pointer that is type stripped", "body": "<p>For completeness: to set a string attribute via the C++ API the following method does the trick</p>\n\n<pre><code>internal static unsafe string SetInvoiceNumber(void** handle, string value)\n{\n    var buffer = new byte[512];\n    fixed (byte* bufAddr = &amp;buffer[0])\n    {\n        Encoding.ASCII.GetBytes(value, 0, Math.Min(value.length, buffer.Length - 1), buffer, 0);\n        SetAttrib(handle, eAttrib.eInvoiceNumber, bufAddr, eAttribType.eString);\n    }\n}\n</code></pre>\n\n<p>Where the corresponding set function has the following C++ prototype:</p>\n\n<pre><code>tResultCode SetAttrib\n(\n    tHandle     handle,\n    tAttrib     attrib,\n    void *      value,\n    tAttribType valueType\n);\n</code></pre>\n"}], "owner": {"reputation": 2176, "user_id": 639691, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/gwKaK.png?s=128&g=1", "display_name": "Neoheurist", "link": "https://stackoverflow.com/users/639691/neoheurist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "accepted_answer_id": 34054147, "answer_count": 2, "score": 1, "last_activity_date": 1449151836, "creation_date": 1449093232, "last_edit_date": 1449151836, "question_id": 34053797, "link": "https://stackoverflow.com/questions/34053797/invoking-c-function-from-c-passing-a-void-pointer-that-is-type-stripped", "title": "Invoking C++ function from C# passing a void pointer that is type stripped", "body": "<p>I am trying to use a third-party DLL written in ANSI C (compiled as C++). One of the functions has the following C++ prototype:</p>\n\n<pre><code>tResultCode GetAttrib\n(\n    tHandle     handle,\n    tAttrib     attrib,\n    void *      value,\n    tAttribType valueType,\n    int         valueMaxSize\n);\n</code></pre>\n\n<p>Where the arguments of <code>GetAttrib</code> are as follows:</p>\n\n<ul>\n<li><code>handle</code> is a void pointer to an opaque structure within the DLL</li>\n<li><code>attrib</code> indicates which attribute to retrieve from the structure</li>\n<li><code>value</code> a pointer to a variable of the type indicated by <code>valueType</code></li>\n<li><code>valueType</code> indicates the C++ type of the buffer allocated to hold the\nattribute value</li>\n<li><code>valueMaxSize</code> is the number of bytes allocated to variable pointed to by <code>value</code></li>\n</ul>\n\n<p>The <code>eAttribType</code> enumeration is defined as follows:</p>\n\n<pre><code>typedef enum eAttribType\n{\n    eHandle,\n    eBool,\n    eEnum,\n    eInt,\n    eLong,\n    eFloat,\n    eDouble,\n    eDate,\n    eTime,\n    eTimestamp,\n    eString,     // char *\n    eChar,       // char\n    eVoid,\n    eHandle,\n    eFunctionPointer\n} tAttribType;\n</code></pre>\n\n<p>The <code>eAttrib</code> enumeration is defined as follows:</p>\n\n<pre><code>typedef enum eAttrib\n{\n    eInvoiceNumber, // eString\n    eInvoiceDate,   // eTimestamp\n    eUnits,         // eLong\n    ePrice,         // eFloat\n    eDiscount,      // eDouble\n    ePreferredFlag, // eBool\n    ...\n} tAttrib;\n</code></pre>\n\n<p>I declare the unmanaged function pointer in C# as follows:</p>\n\n<pre><code>    [UnmanagedFunctionPointer(CallingConvention.StdCall)]\n    internal delegate eResultCode getAttrib(void** handle, eAttrib attrib, void* value, eAttribType attribType, int valueMaxSize);\n    internal unsafe getAttrib GetAttrib;\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li><code>handle</code> is a <code>void **</code> for the pointer to the C++ library structure</li>\n<li><code>attrib</code> mimics the C++ enumeration that indicates the attribute to retrieve</li>\n<li><code>value</code> is a <code>void *</code> to the C++ variable</li>\n<li><code>attribType</code> mimics the C++ enumeration that indicated the C++ type of <code>value</code></li>\n<li><code>valueMaxSize</code> is an integer meant to represent the size of the variable pointed to by <code>value</code></li>\n</ul>\n\n<p>My problem is that I don't know how call GetAttrib() from C# with different data types for the <code>void *</code> (the <code>value</code> variable). Sometimes this variable will be a C++ <code>char *</code>, and other times it will be a C++ <code>int</code>, and still other times it will be a C++ <code>enum</code>, etc</p>\n\n<p>If someone can show me how to properly allocate/populate a <code>char *</code> (<code>eString</code>) and a <code>long</code> (<code>eLong</code>) from C# I think that the rest will fall into place (hopefilly).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1449095293, "post_id": 34053705, "comment_id": 55862856, "body": "a wild <a href=\"http://wyw.dcweb.cn/leakage.htm\" rel=\"nofollow noreferrer\">Cross-Platform Memory Leak Detector</a> appears!"}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1449094244, "creation_date": 1449094244, "answer_id": 34054084, "question_id": 34053705, "link": "https://stackoverflow.com/questions/34053705/how-to-check-time-elapsed-and-allocated-memory-in-c/34054084#34054084", "title": "How to check time elapsed and allocated memory in C++?", "body": "<p>There is no standard C++ interface (or C interface) for knowing either of time or memory usage of an application. There may be interfaces for a specific OS to find out the memory usage - for example, in Linux, you can read <code>/proc/$PID/status</code> and look for <code>VmSize</code> to find out the size of the current process in total. Other OS's have various other techniques.</p>\n\n<p>There are typically a <code>clock</code> function in the standard C runtime, which will give fairly precise timing - but the time measured depends on the system - sometimes it's CPU time (Linux and other Unix varieties, for example) and sometimes it's elapsed time (Windows for example).</p>\n\n<p>There are a variety of C++11 time keeping functions that will be able to give you wall time. The <a href=\"http://www.cplusplus.com/reference/chrono/\" rel=\"nofollow\"><code>std::chrono</code></a> functionality will help with this. For short duratins, <a href=\"http://www.cplusplus.com/reference/chrono/high_resolution_clock/\" rel=\"nofollow\"><code>high_resolution_clock</code></a> can be quite useful.</p>\n\n<p>This <code>steady_clock</code> reference gives an <a href=\"http://www.cplusplus.com/reference/chrono/steady_clock\" rel=\"nofollow\">example</a> of how the <code>chrono</code> functionality can be used.</p>\n\n<p>Of course, if you just want to see the total memory for a Unix/Linux process, you can use <code>/usr/bin/time -v some-prog</code> - that will show all manner of statistics, including memory usage, CPU time, percentage CPU time, etc.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3046287"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 34054084, "answer_count": 1, "score": 0, "last_activity_date": 1449094244, "creation_date": 1449092963, "question_id": 34053705, "link": "https://stackoverflow.com/questions/34053705/how-to-check-time-elapsed-and-allocated-memory-in-c", "title": "How to check time elapsed and allocated memory in C++?", "body": "<p>Let's say we have a program C++ that performs on a single thread.</p>\n\n<h2>Allocated Memory ?</h2>\n\n<p>How to check the amount of memory allocated by this program like for example using a function that returns the number of bytes allocated to this (single-threaded) program at a given instance of execution.</p>\n\n<pre><code>.\n.\n.\nstd::cout &lt;&lt; memoryallocated() &lt;&lt; endl;\n.\n.\n</code></pre>\n\n<h2>Time Elapsed ?</h2>\n\n<p>And what is the most precise way to calculate the time (in milisecs for example) elapsed executing a set of instructions ? </p>\n"}, {"tags": ["c++", "c++11", "constexpr"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 5, "creation_date": 1449093336, "post_id": 34053606, "comment_id": 55861825, "body": "I think the answer is that because <code>ostream::operator&lt;&lt;(ostream&amp;, const complex&lt;T&gt; &amp;)</code> passes by reference, this is considered <i>odr-use</i> of the argument, therefore you need a definition (for the reference to refer to)."}, {"owner": {"reputation": 503, "user_id": 5395216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/aaba31376f1950fe3318a6a5a04dca2b?s=128&d=identicon&r=PG&f=1", "display_name": "Titas Chanda", "link": "https://stackoverflow.com/users/5395216/titas-chanda"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1449094026, "post_id": 34053606, "comment_id": 55862206, "body": "Yes. Without taking any reference, first code works. <code>float</code> or <code>double</code> are passed by value, so the second code works. Thank you."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1449117940, "post_id": 34053606, "comment_id": 55869912, "body": "Related: <a href=\"http://stackoverflow.com/q/32812663/3093378\">stackoverflow.com/q/32812663/3093378</a>"}, {"owner": {"reputation": 503, "user_id": 5395216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/aaba31376f1950fe3318a6a5a04dca2b?s=128&d=identicon&r=PG&f=1", "display_name": "Titas Chanda", "link": "https://stackoverflow.com/users/5395216/titas-chanda"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1449165069, "post_id": 34053606, "comment_id": 55898741, "body": "@vsoftco Thank you for the note. That thread contains some useful explanations. I didn&#39;t find it earlier."}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 17, "last_activity_date": 1507090817, "last_edit_date": 1507090817, "creation_date": 1449093408, "answer_id": 34053854, "question_id": 34053606, "link": "https://stackoverflow.com/questions/34053606/understanding-static-constexpr-member-variables/34053854#34053854", "title": "Understanding static constexpr member variables", "body": "<p>According to the standard <em>9.4.2/p3 Static data members [class.static.data]</em> (<strong>Emphasis Mine</strong>):</p>\n\n<blockquote>\n  <p>If a non-volatile const static data member is of integral or enumeration type, its declaration in the class definition can specify a brace-or-equal-initializer in which every initializer-clause that is an assignment-expression is a constant expression (5.20). <strong>A static data member of literal type can be declared in the class definition with the <code>constexpr</code> specifier; if so, its declaration shall specify a brace-or-equal-initializer in which every initializer-clause that is an assignment-expression is a constant expression. [ Note: In both\n  these cases, the member may appear in constant expressions. \u2014 end note ] The member shall still be defined in a namespace scope if it is odr-used (3.2) in the program and the namespace scope definition shall not\n  contain an initializer.</strong></p>\n</blockquote>\n\n<p>As M.M earlier explained in the comments <code>ostream::operator&lt;&lt;(ostream&amp;, const complex&lt;T&gt;&amp;)</code> passes by reference so value is considered odr-used in the program. Thus, as the wording above dictates you have to provide a definition.</p>\n\n<p>Now as you\u2019ve already found out fundamental types are passed by value, that it is why no definition required.</p>\n"}], "owner": {"reputation": 503, "user_id": 5395216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/aaba31376f1950fe3318a6a5a04dca2b?s=128&d=identicon&r=PG&f=1", "display_name": "Titas Chanda", "link": "https://stackoverflow.com/users/5395216/titas-chanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20081, "favorite_count": 1, "accepted_answer_id": 34053854, "answer_count": 1, "score": 23, "last_activity_date": 1507090817, "creation_date": 1449092630, "last_edit_date": 1449092880, "question_id": 34053606, "link": "https://stackoverflow.com/questions/34053606/understanding-static-constexpr-member-variables", "title": "Understanding static constexpr member variables", "body": "<p>I have some confusions regarding <code>static constexpr</code> member variables in C++11.</p>\n\n<h2>In first.hpp</h2>\n\n<pre><code>template&lt;typename T&gt;\nstruct cond_I\n{ static constexpr T value = 0; }; \n\n\n// specialization \ntemplate&lt;typename T&gt;\nstruct cond_I&lt; std::complex&lt;T&gt; &gt;\n{ static constexpr std::complex&lt;T&gt; value = {0,1}; }; \n</code></pre>\n\n<h2>In main() function</h2>\n\n<pre><code>cout &lt;&lt; cond_I&lt;double&gt;::value &lt;&lt; endl;            // this works fine\ncout &lt;&lt; cond_I&lt; complex&lt;double&gt; &gt;::value &lt;&lt; endl; // linker error\n</code></pre>\n\n<p>However if I add the following line to <code>first.hpp</code> everything works fine.</p>\n\n<pre><code>template&lt;typename T1&gt; \nconstexpr std::complex&lt;T1&gt; cond_I&lt; std::complex&lt;T1&gt; &gt;::value;\n</code></pre>\n\n<p>What I understand (I may be wrong) is, that <code>cond_I&lt; std::complex&lt;double&gt; &gt;::value</code> needs a definition, but in the previous case it only has the declaration. But then what about <code>cond_I&lt;double&gt;::value</code>? Why it does not require a definition? </p>\n\n<p>Again, in another header file, <code>second.hpp</code>, I have:</p>\n\n<h2>In second.hpp</h2>\n\n<pre><code>// empty struct\ntemplate&lt;typename T&gt;\nstruct eps\n{ };\n\n\n// special cases\ntemplate&lt;&gt;\nstruct eps&lt;double&gt;\n{\n  static constexpr double value = 1.0e-12;\n};\n\ntemplate&lt;&gt;\nstruct eps&lt;float&gt;\n{\n  static constexpr float value = 1.0e-6;\n};\n</code></pre>\n\n<p>In this case, following codes works perfectly without any definition of <code>eps&lt;&gt;::value</code>.</p>\n\n<h2>In main() function</h2>\n\n<pre><code>cout &lt;&lt; eps&lt;double&gt;::value &lt;&lt; endl;    //  works fine\ncout &lt;&lt; eps&lt;float&gt;::value &lt;&lt; endl;     //  works fine\n</code></pre>\n\n<p>Can someone please explain me the different behaviors of <code>static constexpr</code> member variables, in these scenarios?</p>\n\n<p>These behaviors are also the same for <code>gcc-5.2</code> and <code>clang-3.6</code>.</p>\n"}, {"tags": ["c++", "algorithm", "nested-loops", "bubble-sort"], "comments": [{"owner": {"reputation": 1280, "user_id": 1545982, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6126f899f04c410b80d91063a8f125ab?s=128&d=identicon&r=PG&f=1", "display_name": "Emz", "link": "https://stackoverflow.com/users/1545982/emz"}, "edited": false, "score": 0, "creation_date": 1449092622, "post_id": 34053560, "comment_id": 55861451, "body": "&quot;organize my bubblerSort method&quot;? Care to clarify?"}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1449093258, "post_id": 34053560, "comment_id": 55861786, "body": "It&#39;s about how you store/access elements from the array. <code>col + row * numOfCols</code>. And what&#39;s with the java tag?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1449093919, "post_id": 34053560, "comment_id": 55862148, "body": "Why would you do that? If you need a 2D array - just make it a 2D array."}, {"owner": {"reputation": 527, "user_id": 5632395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41fee10d4b56e3e6df7e0461a2a87d10?s=128&d=identicon&r=PG&f=1", "display_name": "Pulse", "link": "https://stackoverflow.com/users/5632395/pulse"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1449094210, "post_id": 34053560, "comment_id": 55862321, "body": "@StillLearning I was trying to see if there was a way outside of making a 2D array. I understand how to do it for a 2D array."}, {"owner": {"reputation": 527, "user_id": 5632395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41fee10d4b56e3e6df7e0461a2a87d10?s=128&d=identicon&r=PG&f=1", "display_name": "Pulse", "link": "https://stackoverflow.com/users/5632395/pulse"}, "reply_to_user": {"reputation": 1280, "user_id": 1545982, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6126f899f04c410b80d91063a8f125ab?s=128&d=identicon&r=PG&f=1", "display_name": "Emz", "link": "https://stackoverflow.com/users/1545982/emz"}, "edited": false, "score": 0, "creation_date": 1449094255, "post_id": 34053560, "comment_id": 55862352, "body": "@Emz When I said that I meant to not have all the elements being printed out on a single line. Rather, on two lines."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1449094377, "post_id": 34053560, "comment_id": 55862414, "body": "Well, then just handle the index as Vince mentioned in the comment above."}, {"owner": {"reputation": 527, "user_id": 5632395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41fee10d4b56e3e6df7e0461a2a87d10?s=128&d=identicon&r=PG&f=1", "display_name": "Pulse", "link": "https://stackoverflow.com/users/5632395/pulse"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1449094554, "post_id": 34053560, "comment_id": 55862506, "body": "@VinceEmigh How would I go about implementing that into my current program? Such as how I would I use it within a loop? And sorry for the java tag, I took it off. First time asking a question on the site."}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 5632395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41fee10d4b56e3e6df7e0461a2a87d10?s=128&d=identicon&r=PG&f=1", "display_name": "Pulse", "link": "https://stackoverflow.com/users/5632395/pulse"}, "edited": false, "score": 0, "creation_date": 1449098644, "post_id": 34054699, "comment_id": 55864252, "body": "I switched it to fit the syntax of C++, but it worked perfectly, thank you."}], "tags": [], "owner": {"reputation": 26, "user_id": 5632431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abad5fbcc1f91fff2c65d69b78460a3a?s=128&d=identicon&r=PG&f=1", "display_name": "A. Naquib", "link": "https://stackoverflow.com/users/5632431/a-naquib"}, "is_accepted": true, "score": 1, "last_activity_date": 1449097019, "creation_date": 1449097019, "answer_id": 34054699, "question_id": 34053560, "link": "https://stackoverflow.com/questions/34053560/1d-array-how-to-make-rows-and-columns-c/34054699#34054699", "title": "1D Array, how to make rows and Columns C++", "body": "<p>I think this is what your trying to do. Printing a one-dim array into a two-dim array.</p>\n\n<pre><code>int [] data = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n    int rows = 2;\n    int columns = 5;\n    for (int row = 0; row &lt; rows; row++) {\n        for (int column = 0; column &lt; columns; column++) {\n            System.out.printf(\"%d \"+data[row * columns + column]);\n        }\n        System.out.println();\n    }\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1 2 3 4 5 \n6 7 8 9 10 \n</code></pre>\n"}], "owner": {"reputation": 527, "user_id": 5632395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41fee10d4b56e3e6df7e0461a2a87d10?s=128&d=identicon&r=PG&f=1", "display_name": "Pulse", "link": "https://stackoverflow.com/users/5632395/pulse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1723, "favorite_count": 0, "accepted_answer_id": 34054699, "answer_count": 1, "score": -1, "last_activity_date": 1449097019, "creation_date": 1449092458, "last_edit_date": 1449093946, "question_id": 34053560, "link": "https://stackoverflow.com/questions/34053560/1d-array-how-to-make-rows-and-columns-c", "title": "1D Array, how to make rows and Columns C++", "body": "<p>I was wondering how I would write a one dimensional array with 10 elements into 2 rows and 5 columns? I am doing this to try to organize my bubbleSort method.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nconst int NUM_ELEMENTS = 10;\nvoid bubbleSort(int data[]){\n    srand(time(0));\n int temp = 0;\n for(int i = 0; i&lt;NUM_ELEMENTS;i++){\n     data[i] = rand()%10;\n     }\n for(int b = 0; b&lt;NUM_ELEMENTS-1; b++){\n\n    for(int x= 0; x&lt;NUM_ELEMENTS-1;x++)\n    {\n\n     if(data[x]&gt;data[x+1]){\n      temp = data[x];\n      data[x] = data[x+1];\n      data[x+1] = temp;\n\n     }\n\n    }\n }\nfor(int i = 0; i&lt;NUM_ELEMENTS; i++)    \nprintf(\"%4d\",data[i]);   \n}\nint main()\n{\nint data[NUM_ELEMENTS];\nbubbleSort(data); \n}\n</code></pre>\n"}, {"tags": ["c++", "object", "this", "nullptr"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1449092443, "post_id": 34053539, "comment_id": 55861347, "body": "Pointers do not point to classes. Pointers point to objects. It seems like you don&#39;t actually understand what you&#39;re trying to do..."}, {"owner": {"reputation": 241, "user_id": 5128965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JR1F8.jpg?s=128&g=1", "display_name": "OpenGLmaster1992", "link": "https://stackoverflow.com/users/5128965/openglmaster1992"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449092796, "post_id": 34053539, "comment_id": 55861537, "body": "@immibis Okay, but is it even possible to do what I want to do?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449092943, "post_id": 34053539, "comment_id": 55861614, "body": "@HugoCornel I don&#39;t know what you want to do. You said something about making a pointer point to a class, which is impossible and nonsensical. You also said something about making a pointer to an object - which object?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449093011, "post_id": 34053539, "comment_id": 55861645, "body": "Maybe you meant <code>game = new Game(this);</code>  although hard to say. (and this would be a bad design)"}, {"owner": {"reputation": 241, "user_id": 5128965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JR1F8.jpg?s=128&g=1", "display_name": "OpenGLmaster1992", "link": "https://stackoverflow.com/users/5128965/openglmaster1992"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449093020, "post_id": 34053539, "comment_id": 55861650, "body": "@immibis I need for example window to point to the window object of the class named Window. How to do that?"}, {"owner": {"reputation": 1226, "user_id": 3137313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9hnmm.jpg?s=128&g=1", "display_name": "KorreyD", "link": "https://stackoverflow.com/users/3137313/korreyd"}, "edited": false, "score": 0, "creation_date": 1449093125, "post_id": 34053539, "comment_id": 55861706, "body": "You are creating a new game,window,map,input variable in your constructor there.  If you are trying to set the member variables of your SN class then you dont want to declare new ones. So as opposed to Game *game(this) you probably want something more like this-&gt;game = new Game(this)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449093290, "post_id": 34053539, "comment_id": 55861804, "body": "@HugoCornel Do you want to <i>create</i> an instance of <code>Window</code> and make <code>window</code> point to it?"}, {"owner": {"reputation": 241, "user_id": 5128965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JR1F8.jpg?s=128&g=1", "display_name": "OpenGLmaster1992", "link": "https://stackoverflow.com/users/5128965/openglmaster1992"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449093559, "post_id": 34053539, "comment_id": 55861952, "body": "@immibis Yes, actually. So SN class can use window members and Window class can use SN members."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 5128965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JR1F8.jpg?s=128&g=1", "display_name": "OpenGLmaster1992", "link": "https://stackoverflow.com/users/5128965/openglmaster1992"}, "edited": false, "score": 0, "creation_date": 1449093922, "post_id": 34053960, "comment_id": 55862151, "body": "I am sorry but does this make an object of for example the class Game, but also calling its constructor with the this argument?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 241, "user_id": 5128965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JR1F8.jpg?s=128&g=1", "display_name": "OpenGLmaster1992", "link": "https://stackoverflow.com/users/5128965/openglmaster1992"}, "edited": false, "score": 1, "creation_date": 1449093945, "post_id": 34053960, "comment_id": 55862159, "body": "@HugoCornel: Yes, it does."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 2, "last_activity_date": 1449093989, "last_edit_date": 1449093989, "creation_date": 1449093809, "answer_id": 34053960, "question_id": 34053539, "link": "https://stackoverflow.com/questions/34053539/c-how-to-reassign-a-pointer-to-an-object-with-this-as-argument/34053960#34053960", "title": "C++ How to reassign a pointer to an object with this as argument?", "body": "<p>Did you mean this?</p>\n\n<pre><code>SN::SN(){\n    game = new Game(this);\n    window = new Window(this);\n    map = new Map(this);\n    input = new Input(this);\n}\n</code></pre>\n\n<p>Note: objects created with <code>new</code> will never be destroyed automatically; if you want them to be destroyed you have to use <code>delete</code>.</p>\n\n<pre><code>SN::~SN(){\n    delete game;\n    delete window;\n    delete map;\n    delete input;\n}\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 5128965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JR1F8.jpg?s=128&g=1", "display_name": "OpenGLmaster1992", "link": "https://stackoverflow.com/users/5128965/openglmaster1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 34053960, "answer_count": 1, "score": -1, "last_activity_date": 1449093989, "creation_date": 1449092373, "question_id": 34053539, "link": "https://stackoverflow.com/questions/34053539/c-how-to-reassign-a-pointer-to-an-object-with-this-as-argument", "title": "C++ How to reassign a pointer to an object with this as argument?", "body": "<p>I need to make a pointer to an object of a class. However, it is declared as nullptr first. I need to make it point to that class.</p>\n\n<p>Here, I declare them as nullptr:</p>\n\n<pre><code>#pragma once\n#include \"Window.h\"\n#include \"Game.h\"\n#include \"Map.h\"\n#include \"Input.h\"\n\nclass SN {\npublic:\n    SN();\n    Window * window = nullptr;\n    Game * game = nullptr;\n    Map * map = nullptr;\n    Input * input = nullptr;\n};\n</code></pre>\n\n<p>Here I try to assign them to their object:</p>\n\n<pre><code>#include \"SN.h\"\n\nSN::SN(){\n    Game * game(this); //I WAS TRYING TO DO THIS BUT IT ALSO DID NOT WORK\n    Window window(this);\n    Map map(this);\n    Input input(this);\n}\n</code></pre>\n\n<p>I pass the object of SN into their constructor, so they can use SN.h too.\nPlease help me, thanks in advance.</p>\n"}, {"tags": ["c++", "arrays", "loops", "if-statement", "recursion"], "comments": [{"owner": {"reputation": 6102, "user_id": 360674, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/btune.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/360674/christian"}, "edited": false, "score": 3, "creation_date": 1449092177, "post_id": 34053374, "comment_id": 55861224, "body": "You have an assignment in a condition (<code>if (( location = size - 1 )...</code>). Is this intended?"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1449092980, "post_id": 34053374, "comment_id": 55861634, "body": "also, you probably want <code>return stepping(track,size,location++)</code> or else there would be no explicit return value"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1449093520, "post_id": 34053374, "comment_id": 55861928, "body": "Note: assignment is in a second if statement as well in <code>stepping()</code>.  <code>if ( location = size - 1 ){</code>"}, {"owner": {"reputation": 3, "user_id": 5632359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e19bfb6d8dfa845df4755f26e4e18bc?s=128&d=identicon&r=PG&f=1", "display_name": "GrizzlyCoding", "link": "https://stackoverflow.com/users/5632359/grizzlycoding"}, "reply_to_user": {"reputation": 6102, "user_id": 360674, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/btune.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/360674/christian"}, "edited": false, "score": 0, "creation_date": 1449093955, "post_id": 34053374, "comment_id": 55862164, "body": "@Christian This is suppose to stop the function when it has reached the end of the array instead of using if ( location &lt; size ) but I could try it that way."}, {"owner": {"reputation": 3, "user_id": 5632359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e19bfb6d8dfa845df4755f26e4e18bc?s=128&d=identicon&r=PG&f=1", "display_name": "GrizzlyCoding", "link": "https://stackoverflow.com/users/5632359/grizzlycoding"}, "reply_to_user": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1449094151, "post_id": 34053374, "comment_id": 55862282, "body": "@RNar Alright I&#39;ll add that and see it works."}, {"owner": {"reputation": 3, "user_id": 5632359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e19bfb6d8dfa845df4755f26e4e18bc?s=128&d=identicon&r=PG&f=1", "display_name": "GrizzlyCoding", "link": "https://stackoverflow.com/users/5632359/grizzlycoding"}, "edited": false, "score": 0, "creation_date": 1449094404, "post_id": 34053374, "comment_id": 55862424, "body": "Ah I might have mistyped that was suppose to be location == size - 1. Thanks for pointing that out."}], "answers": [{"tags": [], "owner": {"reputation": 2504, "user_id": 339545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7616fdf7fb6dfb24fa47ffec285c82?s=128&d=identicon&r=PG", "display_name": "LINEMAN78", "link": "https://stackoverflow.com/users/339545/lineman78"}, "is_accepted": false, "score": 0, "last_activity_date": 1449095332, "creation_date": 1449095332, "answer_id": 34054347, "question_id": 34053374, "link": "https://stackoverflow.com/questions/34053374/addition-in-recursion-function/34054347#34054347", "title": "Addition in Recursion Function", "body": "<pre><code>/* + 2 through the array */\nint jumping( int track[], int size, int location ){\nstatic int score = 0;\n\nif ( track[ location ] == 1 ){\n    score++;\n}\nelse if ( track[ location ] == -1 ){\n    score--;\n}\n\n/*** Need to assign recursion to score; also else condition has no return; suggest replacing with the following ***\nif (( location == size - 1 ) || ( track[ location + 1 ] == 0 )){\n    return score;\n}\nelse{\n    jumping( track, size, location + 2 );\n}*/\n/*** Also, you need to use size - 2 to prevent overrun ***/\nif (( location &lt; size - 2 ) &amp;&amp; ( track[ location + 1 ] != 0 ))\n    score += jumping( track, size, location + 2 );\nreturn score;\n}\n\n/* Run through the array by 1 */\nint stepping( int track[], int size, int location ){\nstatic int score = 0;\n\nif ( track[ location ] == 1 ){\n    score++;\n}\nelse if ( track[ location ] == -1 ){\n    score--;\n}\n\n/*** Need to assign recursion to score; also else condition has no return; suggest replacing with the following ***\nif ( location == size - 1 ){\n    return score;\n}\nelse{\n    stepping( track, size, location++ );\n}*/\nif (location &lt; size - 1)\n    score += stepping( track, size, location++ );\nreturn score;\n}\n\n/* Is to calculate the maxium possible score for any given track, with any arrangement using recursion. */\nint maxScore( int track[], int size, , int location ){\nint score = 0; //Keep track of score\nint step = stepping( track, size, location );//score by stepping\nint jump = jumping( track, size, location );//score by jumping\n\n/* If step is higher or jump and replace according to the highest */\nif ( step &gt; jump ){\n    score = step;\n    //*** See Later *** return score;\n}\nelse if ( jump &gt; step ){\n    score = jump;\n    //*** See Later *** return score;\n}\nelse /*** Don't need the if, as it is the only remaining condition *** if ( jump == step ) */{\n    //*** Score is not set here, is this intentional ***\n    //*** See Later *** return score;\n}\nreturn score;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 780, "user_id": 1464870, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/680cd344c37910e3631c2449583b818f?s=128&d=identicon&r=PG", "display_name": "Monster Hunter", "link": "https://stackoverflow.com/users/1464870/monster-hunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1449096348, "creation_date": 1449096348, "answer_id": 34054564, "question_id": 34053374, "link": "https://stackoverflow.com/questions/34053374/addition-in-recursion-function/34054564#34054564", "title": "Addition in Recursion Function", "body": "<p>I found 3 problems:</p>\n\n<ol>\n<li>in jumping, your exit condition should be <code>location &gt;= size -2</code> instead of <code>location == size-1</code> since your jumping step is 2</li>\n<li>in Both jumping and stepping, you should put a return in your recursive call like <code>return jumping(track, size, location + 2);</code></li>\n<li>in the stepping recursive call, it should be <code>stepping( track, size, ++location );</code> instead of <code>stepping( track, size, location++ );</code></li>\n</ol>\n\n<p>Ideone: <a href=\"http://ideone.com/M0C68r\" rel=\"nofollow\">http://ideone.com/M0C68r</a></p>\n"}], "owner": {"reputation": 3, "user_id": 5632359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e19bfb6d8dfa845df4755f26e4e18bc?s=128&d=identicon&r=PG&f=1", "display_name": "GrizzlyCoding", "link": "https://stackoverflow.com/users/5632359/grizzlycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 34054564, "answer_count": 2, "score": 0, "last_activity_date": 1449096348, "creation_date": 1449091779, "last_edit_date": 1449094499, "question_id": 34053374, "link": "https://stackoverflow.com/questions/34053374/addition-in-recursion-function", "title": "Addition in Recursion Function", "body": "<p>My code is to +1 to score when the number in the array is 1 and -1 when the number in the array is -1. But when I run the program it only returns 0. The recursion itself doesn't have an infinite loop, and I don't know what I'm doing wrong here.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n/* When the tile is -1, score--. When the tile is 1, score++. You cannot go outside the array nor can you go backwards */\n\n/* + 2 through the array */\nint jumping( int track[], int size, int location ){\nstatic int score = 0;\n\nif ( track[ location ] == 1 ){\n    score++;\n}\nelse if ( track[ location ] == -1 ){\n    score--;\n}\n\nif (( location == size - 1 ) || ( track[ location + 1 ] == 0 )){\n    return score;\n}\nelse{\n    jumping( track, size, location + 2 );\n}\n}\n\n/* Run through the array by 1 */\nint stepping( int track[], int size, int location ){\nstatic int score = 0;\n\nif ( track[ location ] == 1 ){\n    score++;\n}\nelse if ( track[ location ] == -1 ){\n    score--;\n}\n\nif ( location == size - 1 ){\n    return score;\n}\nelse{\n    stepping( track, size, location++ );\n}\n}\n\n/* Is to calculate the maxium possible score for any given track, with any arrangement using recursion. */\nint maxScore( int track[], int size, int location ){\nint score = 0; //Keep track of score\nint step = stepping( track, size, location );//score by stepping\nint jump = jumping( track, size, location );//score by jumping\n\n/* If step is higher or jump and replace according to the highest */\nif ( step &gt; jump ){\n    score = step;\n    return score;\n}\nelse if ( jump &gt; step ){\n    score = jump;\n    return score;\n}\nelse if ( jump == step ){\n    return score;\n}\n}\n\nint main(){\n\nint simple[2] = { 0, 0 };\nint easy[8] = { 0, -1, 1, 1, -1, 1, -1, 0 };\nint medium[25] = { 0, 1, 1, -1, -1, 1, 1, 1, -1, 1, -1, 0 };\nint mediumhard[3] = { 0, 1, 0 };\nint impossible[20] = { 0, -1, 1, -1, 1, 1, -1, 1, -1, 1, 1, -1, -1, -1,     1, 1, 1, -1, -1, 0 };\nint insane[40] = { 0, -1, 1, -1, 1, 1, -1, 1, -1, 1, 1, -1, -1, -1, 1, 1, 1, -1, -1, -1,\n                  1, -1, 1, -1, 1, 1, -1, 1, -1, 1, 1, -1, -1, -1, 1, 1, 1, -1, -1, 0 };\n\ncout &lt;&lt; \"1. SIMPLE............................................... \" &lt;&lt; maxScore( simple, 2, 0 ) &lt;&lt; endl;\ncout &lt;&lt; \"2. EASY................................................. \" &lt;&lt; maxScore( easy, 8, 0 ) &lt;&lt; endl;\ncout &lt;&lt; \"3. MEDIUM............................................... \" &lt;&lt; maxScore( medium, 25, 0 ) &lt;&lt; endl;\ncout &lt;&lt; \"4. MEDIUM HARD.......................................... \" &lt;&lt; maxScore( mediumhard, 3, 0 ) &lt;&lt; endl;\ncout &lt;&lt; \"5. IMPOSSIBLE........................................... \" &lt;&lt; maxScore( impossible, 20, 0 ) &lt;&lt; endl;\ncout &lt;&lt; \"6. INSANE............................................... \" &lt;&lt; maxScore( insane, 40, 0 ) &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "stl", "unique-ptr", "dllexport"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449091633, "post_id": 34053247, "comment_id": 55860922, "body": "UDP = ... Uridine Triphosphate? User Datagram Protocol? What?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449091786, "post_id": 34053247, "comment_id": 55861007, "body": "Anyway you need to be really careful about allocating memory in one DLL and deallocating in main program or other DLL (i.e. other module)."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449092042, "post_id": 34053247, "comment_id": 55861145, "body": "@Cheersandhth.-Alf why would that be a problem?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1449094306, "post_id": 34053247, "comment_id": 55862370, "body": "@JohannesSchaub-litb: A Windows DLL can use any runtime library internally. It&#39;s more like a program than a library. When the runtime library is not the same, and the exported object does not encapsulate and ensure use of original allocator for deallocation, the behavior is very undefined. I use that term loosely because the C++ standard does not support DLLs: it&#39;s outside the regime of the standard."}, {"owner": {"reputation": 1566, "user_id": 1171811, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3e56463bfd58fb73493699e55116d573?s=128&d=identicon&r=PG", "display_name": "alex555", "link": "https://stackoverflow.com/users/1171811/alex555"}, "edited": false, "score": 0, "creation_date": 1449128294, "post_id": 34053247, "comment_id": 55874077, "body": "UDP = user-defined type. I updated the title"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449147623, "post_id": 34053247, "comment_id": 55886319, "body": "@cheer why would the dll and the program link against different runtime libs though? Should you mot ensure they dont?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449168689, "post_id": 34053247, "comment_id": 55900926, "body": "@alex555: thanks, but what does the &quot;P&quot; stand for?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1449168950, "post_id": 34053247, "comment_id": 55901083, "body": "@JohannesSchaub-litb: Ideally the programmer would ensure a common runtime lib, by linking with a runtime lib that itself is in a DLL. Linking the runtime statically ensures different runtime libs (that is, at least separate instances of the same lib, with separate states for the their allocators). The ideal is part of the &quot;be really careful&quot;. An alternative is to design things to guarantee that the same allocator is used for deallocation as for allocation. On way is to use the same OS-provided instead of C++ allocator everywhere, another way is to pass around a ref to the allocator."}], "owner": {"reputation": 1566, "user_id": 1171811, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3e56463bfd58fb73493699e55116d573?s=128&d=identicon&r=PG", "display_name": "alex555", "link": "https://stackoverflow.com/users/1171811/alex555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449128549, "creation_date": 1449091314, "last_edit_date": 1449128549, "question_id": 34053247, "link": "https://stackoverflow.com/questions/34053247/is-declspecdllexport-of-vectorstdunique-ptruser-defined-type-possibl", "title": "Is __declspec(dllexport) of ::vector&lt;std::unique_ptr&lt;user-defined type&gt;&gt; possible?", "body": "<p>I am trying to export a class with a private member <code>std::vector&lt;std::unique_ptr&gt;</code>. The dll client should use <code>Number</code> objects, so I instantiated it. But now I run into a compiler error:</p>\n\n<pre><code>error C2280: 'std::unique_ptr&lt;Number,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' : attempting to reference a deleted function\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty=Number\n1&gt;          ]\n</code></pre>\n\n<p>Here is my test code</p>\n\n<pre><code>class __declspec(dllexport) Number\n{\npublic:\n    int i;\n};\n\ntemplate class __declspec(dllexport) std::vector&lt;std::unique_ptr&lt;Number&gt;&gt;; // to avoid warning C4251\n\nclass __declspec(dllexport) A\n{\npublic:\n    A(){}\n    ~A(){}\n    A(A&amp;&amp;) {}\n    A&amp; operator=(A&amp;&amp;) { return *this; }\n\n    Number&amp; getNumber(int i) { return *v[i]; }\nprivate:\n    A(const A&amp;);\n    A&amp; operator=(const A&amp;);\n\n    std::vector&lt;std::unique_ptr&lt;Number&gt;&gt; v;\n};\n</code></pre>\n"}, {"tags": ["c++", "arrays", "function-pointers"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1449091071, "post_id": 34053089, "comment_id": 55860598, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">Save yourself some pain and read this link on <code>std::bind</code>.</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449091221, "post_id": 34053089, "comment_id": 55860685, "body": "<a href=\"https://isocpp.org/wiki/faq/pointers-to-members\" rel=\"nofollow noreferrer\">Also read this piece on method pointers.</a> I doubt SO can do a much better explanation of what you&#39;ve run into."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449091459, "post_id": 34053089, "comment_id": 55860813, "body": "A simple function pointer is not sufficient to represent an member function. Instead of <code>typedef void(*F)()</code> you can technically do <code>typedef void(MemberClass:*F)()</code>, but the whole thing sounds fishy. Member function pointers are very seldom the solution."}], "answers": [{"tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": true, "score": 1, "last_activity_date": 1449091969, "last_edit_date": 1449091969, "creation_date": 1449091427, "answer_id": 34053269, "question_id": 34053089, "link": "https://stackoverflow.com/questions/34053089/array-of-function-pointer-pointing-to-functions-of-a-different-class/34053269#34053269", "title": "array of function pointer pointing to functions of a different class", "body": "<p><code>F</code> is declared as pointer to function with no parameters returning <code>void</code>. But your functions return <code>int</code>, and are member functions of <code>MemberClass</code> rather than plain ordinary functions. So the type you need is</p>\n\n<pre><code>typedef int (MemberClass::*F)();\n</code></pre>\n\n<p>Calling it is also more interesting:</p>\n\n<pre><code>int result = (mclass-&gt;*f[index])();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1449159100, "post_id": 34054071, "comment_id": 55894742, "body": "thanks, so the poiinter to memberclass is needed in myclass anyways for different purposes. Another high preference is when a call to d.process(0) is made, it should have the least and minimum performance hit, ideally no worse than a regular function call. Is this the case with your code?The initialization part can be slow, thats not a problem."}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1449159899, "post_id": 34054071, "comment_id": 55895366, "body": "also theoretically, why cant a simple f[0] = &amp;MemberClass::GetValue1 work?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1449161432, "post_id": 34054071, "comment_id": 55896485, "body": "Minimal runtime hit. Most of the grunt work is taken care of by the compiler when the template is specialized, and after that it should resolve down to  a pointer dereference and the usual function call overhead."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1449161928, "post_id": 34054071, "comment_id": 55896838, "body": "<code>f[0] = &amp;MemberClass::GetValue1</code> can work if <code>f</code> is of the right type. The important bit is <code>f[0]</code> needs to know  that it is a pointer to a Class&#39;s member function and needs a hidden <code>this</code> parameter. I&#39;m over simplifying a little here, but <code>int GetValue1()</code> is actually closer to <code>int GetValue1(MemberClass * this)</code> and won&#39;t fit into <code>void(*F)();</code> <a href=\"https://isocpp.org/wiki/faq/pointers-to-members#fnptr-vs-memfnptr-types\" rel=\"nofollow noreferrer\">For more details, read this</a>. For usage, see Alan Stokes&#39;s answer."}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1449162090, "post_id": 34054071, "comment_id": 55896959, "body": "ofcourse, the hidden this in function call. May I know the benefit of std::bind over function pointer? I am very performance sensitive"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1449162554, "post_id": 34054071, "comment_id": 55897229, "body": "Bind is used to keep a function with one or more of it&#39;s parameters. The only bookkeeping you have to do is ensure no one <code>delete</code>s any of the bound parameters. Here is an example of bind being used to make a random number generator easy to use: <a href=\"http://stackoverflow.com/questions/31059976/my-program-loops-forever-and-does-only-a-half-of-what-i-told-it-to-do/31061880#31061880\" title=\"my program loops forever and does only a half of what i told it to do\">stackoverflow.com/questions/31059976/&hellip;</a>"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1449094187, "creation_date": 1449094187, "answer_id": 34054071, "question_id": 34053089, "link": "https://stackoverflow.com/questions/34053089/array-of-function-pointer-pointing-to-functions-of-a-different-class/34054071#34054071", "title": "array of function pointer pointing to functions of a different class", "body": "<p>Suggestion: rather than a method pointer, use C++11's <code>functional</code> library.</p>\n\n<p>I'm butchering OP's sample code slightly to simplify the example.</p>\n\n<p>MemberClass stays mostly the same. I removed the member variables because the methods are now hard-coded to return 1 and 2 to make them easy to tell apart.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass MemberClass\n{\npublic:\n    int GetValue1()\n    {\n        return 1;\n    }\n\n    int GetValue2()\n    {\n        return 2;\n    }\n};\n</code></pre>\n\n<p><code>myClass</code> gets a rip-up because this is where the action is.</p>\n\n<pre><code>class MyClass\n{\nprivate:\n</code></pre>\n\n<p>I'm using an array of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow\"><code>std::function</code></a> instead of a typedef and an array of the typedef. Note the template argument <code>int()</code>. This is an array of functions that takes nothing and returns an <code>int</code>. <a href=\"https://en.wikipedia.org/wiki/Magic_(programming)\" rel=\"nofollow\">Magic</a> in <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow\"><code>std::bind</code></a> will provide the hidden <code>this</code> parameter required by methods. If the function has parameters that are not known at the time of binding, use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/placeholders\" rel=\"nofollow\"><code>std::placeholders</code></a> to save room to them in the method's parameter list.</p>\n\n<p>Since the methods are bound to their object, there is no longer any need to store <code>MemberClass* mclass;</code></p>\n\n<pre><code>    std::function&lt;int()&gt; f[2]; \n\npublic:\n</code></pre>\n\n<p>Calling the function is simple: index the array and stick the brackets on.</p>\n\n<pre><code>    int Process(int index)\n    {\n        return f[index]();\n    }\n</code></pre>\n\n<p>The constructor is either a bit trickier, or less tricky, depending on your school of thought. I'm using an initializer list because it is cleaner (to me, at anyrate) and often has performance advantages. For one thing, you can swap out the array for a std::vector or most other containers without having to change a line of code other than the variable definition. </p>\n\n<pre><code>f[0] = std::bind(&amp;MemberClass::GetValue1, mem); \nf[1] =... \n</code></pre>\n\n<p>inside the body of the constructor is still an option. </p>\n\n<pre><code>    MyClass(MemberClass * mem):\n        f{std::bind(&amp;MemberClass::GetValue1, mem), \n          std::bind(&amp;MemberClass::GetValue2, mem)}\n    {\n    }\n\n};\n</code></pre>\n\n<p>And a silly little bit of test code to make sure this all works. Why? Because every time you don't test code in it's simplest form you're taking an unnecessary risk. If it doesn't work small, it won't work big.</p>\n\n<pre><code>int main()\n{\n    MemberClass c;\n    MyClass d(&amp;c);\n    std::cout &lt;&lt; d.Process(0) &lt;&lt; std::endl;\n    std::cout &lt;&lt; d.Process(1) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>All together for one cut and paste-able block:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass MemberClass\n{\n\npublic:\n\n    int GetValue1()\n    {\n\n        return 1;\n    }\n\n    int GetValue2()\n    {\n\n        return 2;\n    }\n\n};\n\nclass MyClass\n{\n\nprivate:\n    std::function&lt;int()&gt; f[2];\npublic:\n    int Process(int index)\n    {\n        return f[index]();\n    }\n\n    MyClass(MemberClass * mem):\n        f{std::bind(&amp;MemberClass::GetValue1, mem), \n          std::bind(&amp;MemberClass::GetValue2, mem)}\n    {\n    }\n\n};\n\nint main()\n{\n    MemberClass c;\n    MyClass d(&amp;c);\n    std::cout &lt;&lt; d.Process(0) &lt;&lt; std::endl;\n    std::cout &lt;&lt; d.Process(1) &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 34053269, "answer_count": 2, "score": 0, "last_activity_date": 1449094187, "creation_date": 1449090756, "question_id": 34053089, "link": "https://stackoverflow.com/questions/34053089/array-of-function-pointer-pointing-to-functions-of-a-different-class", "title": "array of function pointer pointing to functions of a different class", "body": "<p>I have a class MyClass. In it, I want to create an array of function pointer and initialize the array with the functions of another class (MemberClass).\nMyClass has a pointer to MemberClass as member.\nbut I get this compile time error\nerror C2440: 'initializing' : cannot convert from 'void (__thiscall MyMemberClass::* )(void)' to 'F'</p>\n\n<pre><code>//This class has the function that I want to create a function pointer to\nclass MemberClass\n{\n\nprivate:\n\nint myValue1;\nint myValue2;\n\npublic: \n\nint GetValue1() //I want to point to this function from a function pointer in another class\n{\n\n    return myvalue1;\n}\n\nint GetValue2() //I want to point to this function from a function pointer in another class\n{\n\n    return myvalue2;\n}\n\n\n}\n\n\n\n\n//This has array of function pointer that I want to point to member function of another class\n\nClass MyClass\n{\n\ntypedef void(*F)();\n\n\nprivate:\nMemberClass* mclass;\nF[] f;\nProcess();\n}\n\n.cpp\n\nMyClass::MyClass()\n{\nf[2] = {&amp;MemberClass::GetValue1, &amp;MemberClass::GetValue2} //This line throws error\n\n//error C2440: 'initializing' : cannot convert from 'void (__thiscall MyMemberClass::* )(void)' to 'F'\n\n}\n\nvoid     MyClass::Processing()\n{\n\n//This is how I am hoping to use the function pointer array\nF[Index]();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "file", "char", "istream"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1449090370, "post_id": 34052953, "comment_id": 55860223, "body": "Why are you not using <code>std::string</code> and <code>std::vector</code>? And given that you&#39;re not using them, why are using <code>malloc</code> instead of <code>new</code>?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1449090394, "post_id": 34052953, "comment_id": 55860234, "body": "what goes wrong. Also you are using c++ , if this is really c++ there are much much better ways (std::vector string for example)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1449090423, "post_id": 34052953, "comment_id": 55860250, "body": "<code>sizeof(int)</code> should be <code>sizeof(char*)</code>. Why are using <code>int</code> here?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1449090473, "post_id": 34052953, "comment_id": 55860277, "body": "<code>sizeof(char)</code> is 1 by definition."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1449090821, "post_id": 34052953, "comment_id": 55860476, "body": "This might help: <a href=\"http://stackoverflow.com/q/3718998/3425536\">Fixing Segmentation faults in C++</a>"}, {"owner": {"reputation": 19, "user_id": 1709849, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57d78ed57f33f4690dab32eac5d224e1?s=128&d=identicon&r=PG", "display_name": "imonaboat", "link": "https://stackoverflow.com/users/1709849/imonaboat"}, "edited": false, "score": 0, "creation_date": 1449128732, "post_id": 34052953, "comment_id": 55874264, "body": "I need the data in a char**. Thank you for your help. I would need to rewrite a large part of my code if <code>std::string</code> and <code>std::vector</code> are the only solutions, I wrote the file read in last, thinking it would be easy. But there appear to be incompatibilities everytime."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 1709849, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57d78ed57f33f4690dab32eac5d224e1?s=128&d=identicon&r=PG", "display_name": "imonaboat", "link": "https://stackoverflow.com/users/1709849/imonaboat"}, "edited": false, "score": 0, "creation_date": 1449128616, "post_id": 34053113, "comment_id": 55874215, "body": "I need the data in a char**. Thank you for your code. I will try to see if vector&lt;string&gt; const lines and char** are the same. Otherwise I need to rewrite a large part of my code, I did the file reading in last, thinking it would be easy."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 19, "user_id": 1709849, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57d78ed57f33f4690dab32eac5d224e1?s=128&d=identicon&r=PG", "display_name": "imonaboat", "link": "https://stackoverflow.com/users/1709849/imonaboat"}, "edited": false, "score": 0, "creation_date": 1449132960, "post_id": 34053113, "comment_id": 55876472, "body": "@imonaboat: You would be well adviced to fix the other code. That means, not using <code>char**</code>. However, for completeness I&#39;m adding info about how to get a <code>char**</code>."}, {"owner": {"reputation": 19, "user_id": 1709849, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57d78ed57f33f4690dab32eac5d224e1?s=128&d=identicon&r=PG", "display_name": "imonaboat", "link": "https://stackoverflow.com/users/1709849/imonaboat"}, "edited": false, "score": 0, "creation_date": 1449140227, "post_id": 34053113, "comment_id": 55881416, "body": "Wow Alf, you have done a lot to help. What can I say? Thank you so much. It does seem like c++ adds a lot to C, and you are using the latest c++ (so says my compiler)."}, {"owner": {"reputation": 19, "user_id": 1709849, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57d78ed57f33f4690dab32eac5d224e1?s=128&d=identicon&r=PG", "display_name": "imonaboat", "link": "https://stackoverflow.com/users/1709849/imonaboat"}, "edited": false, "score": 0, "creation_date": 1449146703, "post_id": 34053113, "comment_id": 55885673, "body": "Your longer answer is really helpful. It shows how to move from C to C++ properly. Which was part of the question. Now I solved my problem by looking at your sizeof() comment and my own question update. scanf does work for files, I add the code to my question."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1449169153, "last_edit_date": 1449169153, "creation_date": 1449090843, "answer_id": 34053113, "question_id": 34052953, "link": "https://stackoverflow.com/questions/34052953/load-a-file-of-1s-and-0s-into-a-char-line-by-line/34053113#34053113", "title": "load a file of 1&#39;s and 0&#39;s into a char** line by line", "body": "<p>In C++ you can load the lines of a file into an array of byte strings like this:</p>\n\n<pre><code>auto lines_from( istream&amp; is )\n    -&gt; vector&lt;string&gt;\n{\n    string line;\n    vector&lt;string&gt; result;\n    while( getline( is, line ) )\n    {\n        result.push_back( line );\n    }\n    return result;\n}\n\nauto main() -&gt; int\n{\n    vector&lt;string&gt; const lines = lines_from( cin );\n    // Use it.\n}\n</code></pre>\n\n<p>Here <code>string</code> is <code>std::string</code> from the <code>&lt;string&gt;</code> header, <code>getline</code> is <code>std::getline</code> from the same header, and <code>vector</code> is <code>std::vector</code> from the <code>&lt;vector&gt;</code> header. I chose to use a descriptive name for the function, <code>lines_from</code>. However, it's commonly named <code>readall</code>.</p>\n\n<hr>\n\n<p>Where you absolutely need a <code>char**</code>, presumably with an assumption of some given buffer size for each string, then you can use a vector of pointers, pointing to buffers that e.g. are managed by a class like this:</p>\n\n<pre><code>class C_strings\n{\nprivate:\n    vector&lt;string&gt;  buffers_;\n    vector&lt;char*&gt;   pointers_;\n    int             bufsize_;\n\n    C_strings( C_strings const&amp; ) = delete;\n    auto operator=( C_strings const&amp; ) -&gt; C_strings&amp; = delete;\n\npublic:\n    auto pointer() -&gt; char** { return pointers_.data(); }\n    auto bufsize() const -&gt; int { return bufsize_; }\n\n    C_strings( vector&lt;string&gt; const&amp; strings, int const bufsize )\n        : buffers_( strings )\n        , bufsize_( bufsize )\n    {\n        pointers_.reserve( buffers_.size() + 1 );\n        for( string&amp; s : buffers_ )\n        {\n            s.reserve( bufsize );\n            if( s.empty() or s.back() != '\\0' ) { s += '\\0'; }\n            pointers_.push_back( &amp;s[0] );\n        }\n        pointers_.push_back( nullptr );\n    }\n\n    C_strings( C_strings&amp;&amp; other )\n        : buffers_( move( other.buffers_ ) )\n        , pointers_( move( other.pointers_ ) )\n    {}\n};\n</code></pre>\n\n<p>Then let's say you want to call a double-star function like this:</p>\n\n<pre><code>void doublestarfunc( char** const lines )\n{\n    using std::cout;\n    for( char** pps = lines; *pps != nullptr; ++pps )\n    {\n        if( strlen( *pps ) &lt; 40 ) { strcat( *pps, \" &lt; Oh la la!\" ); }\n        cout &lt;&lt; *pps &lt;&lt; '\\n';\n    }\n    cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>It can be done very simply:</p>\n\n<pre><code>using namespace std;        // cin, cout\nint const columns           = 80;\nint const cstring_bufsize   = columns + 1;\n\nauto c_strings = C_strings( lines_from( cin ), cstring_bufsize );\ndoublestarfunc( c_strings.pointer() );\n</code></pre>\n\n<p>But is it a good idea? No, except when you have to relate to an existing C style API. For C++ code, better restructure it to use C++ <code>std::string</code> throughout.</p>\n"}], "owner": {"reputation": 19, "user_id": 1709849, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/57d78ed57f33f4690dab32eac5d224e1?s=128&d=identicon&r=PG", "display_name": "imonaboat", "link": "https://stackoverflow.com/users/1709849/imonaboat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449247320, "creation_date": 1449090273, "last_edit_date": 1449247320, "question_id": 34052953, "link": "https://stackoverflow.com/questions/34052953/load-a-file-of-1s-and-0s-into-a-char-line-by-line", "title": "load a file of 1&#39;s and 0&#39;s into a char** line by line", "body": "<p>I have a file, at the end of each line there is possibly a newline:</p>\n\n<pre><code>111\\n\n100\\n\n101\n</code></pre>\n"}, {"tags": ["c++", "templates", "stl", "c++14"], "comments": [{"owner": {"reputation": 4160, "user_id": 1843316, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6737b1f109e56682b0d78a07ca51eeb5?s=128&d=identicon&r=PG", "display_name": "Sam Cristall", "link": "https://stackoverflow.com/users/1843316/sam-cristall"}, "edited": false, "score": 1, "creation_date": 1449090468, "post_id": 34052948, "comment_id": 55860276, "body": "This will be a heckuvalot easier to do whenever Concepts get into the standard."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1449090530, "post_id": 34052948, "comment_id": 55860316, "body": "For your &quot;pair vs value&quot; problem, you could overload <code>&lt;&lt;</code> for <code>std::pair</code>, then use the inner <code>value_type</code> typedef that all containers have."}, {"owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 3, "creation_date": 1449090548, "post_id": 34052948, "comment_id": 55860324, "body": "Do you mean something like <a href=\"https://louisdx.github.io/cxx-prettyprint/\" rel=\"nofollow noreferrer\">cxx-prettyprint</a>? (If you don&#39;t want a ready solution but want to code it by yourself, you can get inspired by its implementation. Ask a more specific question if you don&#39;t understand some part of it.)"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1449090564, "post_id": 34052948, "comment_id": 55860334, "body": "You could try forward declaring the different container types, and then make specific <code>&lt;&lt;</code> overloads for each container you care about with any possible specialization. This is a bit tedious for some of them though, e.g., for vector there are these rarely used parameters for allocators and such. If you can manage to forward declare them correctly then there&#39;s not much work after that I guess."}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1449090895, "post_id": 34052948, "comment_id": 55860502, "body": "@ChrisBeck You mean forward declaring like a vector for every possible template argument? That is a wee bit tedious :D"}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1449090908, "post_id": 34052948, "comment_id": 55860506, "body": "@Quentin That seems like a possible solution, thanks, I&#39;ll look into it!"}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "reply_to_user": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 0, "creation_date": 1449091008, "post_id": 34052948, "comment_id": 55860560, "body": "@leemes Thank you, I&#39;ll look into that!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1449091057, "post_id": 34052948, "comment_id": 55860590, "body": "@mrDudePerson you can forward-declare templates, and since the standard containers&#39; signatures are defined by the Standard, it&#39;s just a matter of opening <code>namespace std</code> and copy-pasting them from <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">a documentation</a> ;)"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1449091251, "post_id": 34052948, "comment_id": 55860703, "body": "mrDudePerson: you could do something like this, for a generic type: <code>template &lt;typename T&gt; struct A;  template&lt;typename T&gt; std::ostream &amp; operator&lt;&lt;(std::ostream &amp; ss, const A&lt;T&gt; &amp; a) { ss &lt;&lt; &quot;printing an a: &quot; &lt;&lt; a.contents; return ss; }</code> Once templates are involved, it doesn&#39;t matter that A hasn&#39;t been fully declared when your <code>&lt;&lt;</code> implementation is read, the errors can only occur when <code>&lt;&lt;</code> is fully instantiated and T is known. So as long as you include the full definition before trying to actually use the <code>&lt;&lt;</code> overload it is legit. Quentin makes a good point about how to actually go about it"}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1449091431, "post_id": 34052948, "comment_id": 55860801, "body": "@ChrisBeck That makes sense, gonna look into it right now!"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1449093409, "post_id": 34052948, "comment_id": 55861867, "body": "@Quentin That&#39;s UB and in fact will fail on at least one implementation I know of (libc++)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449094265, "post_id": 34052948, "comment_id": 55862354, "body": "@T.C. could you expand on why it is the case ? And is there another way to retrieve only the declarations of standard types ?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1449094585, "post_id": 34052948, "comment_id": 55862524, "body": "@Quentin <a href=\"http://eel.is/c++draft/namespace.std#1\" rel=\"nofollow noreferrer\">The standard bans adding declarations to <code>namespace std</code></a>, and it fails on libc++ because everything in libc++ is actually in an inline namespace inside <code>std</code>. The only way to get the declarations is by including the appropriate header. (Besides, if you are iterating over a container to print its contents, you <i>need</i> its definition anyway.)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449095045, "post_id": 34052948, "comment_id": 55862727, "body": "@T.C. I thought that only applied to user types, not to standard types. But that failure case makes sense."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1449100850, "post_id": 34052948, "comment_id": 55865003, "body": "An unavoidable issue is that this operator can&#39;t be found by ADL (since you can&#39;t add it to <code>std</code>), and its name will be hidden by any other <code>operator&lt;&lt;</code>.  I think the best practice will be to declare your operators in their own namespace (say Foo) and require the user to have <code>using namespace Foo;</code> in scope whenever you want to enable these overloads."}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449103142, "post_id": 34052948, "comment_id": 55865678, "body": "@M.M That seems like a good idea. One question, though, does <code>nmsp::operator&lt;&lt;</code> enable all operators, and is there a way to separate them."}, {"owner": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1449261908, "post_id": 34052948, "comment_id": 55946329, "body": "Minor observation: Don&#39;t confuse <b>override</b> with <b>overload</b>.  You seem to be using the two words interchangeably in your question."}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "reply_to_user": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1449262992, "post_id": 34052948, "comment_id": 55946846, "body": "@legalize Right, thanks! :) I always forget which is which. I&#39;ll correct those right away."}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "edited": false, "score": 0, "creation_date": 1449091645, "post_id": 34053171, "comment_id": 55860927, "body": "Yes, that combined with forward declaring the different template types might work."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "edited": false, "score": 0, "creation_date": 1449092018, "post_id": 34053171, "comment_id": 55861137, "body": "It&#39;s very a crude starting point to your OP.  Don&#39;t expect any up votes, just wanted to get the ball rolling. And couldn&#39;t post all this as comment. :)"}, {"owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "edited": false, "score": 0, "creation_date": 1449092208, "post_id": 34053171, "comment_id": 55861236, "body": "No worries every bit helps :)"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 5, "last_activity_date": 1449091153, "last_edit_date": 1449091153, "creation_date": 1449091042, "answer_id": 34053171, "question_id": 34052948, "link": "https://stackoverflow.com/questions/34052948/printing-any-stl-container/34053171#34053171", "title": "Printing Any STL Container", "body": "<p>A <em>very</em> simple attempt at this problem is something like:</p>\n\n<pre><code>template&lt;typename T&gt;  \nvoid print_container(std::ostream&amp; os, const T&amp; container, const std::string&amp; delimiter)  \n{  \n    std::copy(std::begin(container),   \n              std::end(container),   \n              std::ostream_iterator&lt;typename T::value_type&gt;(os, delimiter.c_str())); \n}  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13416, "user_id": 203091, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4c6ae6c26fff7002b9515578cc57c3c7?s=128&d=identicon&r=PG", "display_name": "grokus", "link": "https://stackoverflow.com/users/203091/grokus"}, "edited": false, "score": 0, "creation_date": 1567100328, "post_id": 34053305, "comment_id": 101872525, "body": "@101010 There is a flaw with this solution which is you cannot print a string. Does anyone know how to fix it? <a href=\"http://coliru.stacked-crooked.com/a/99e5f1b0b5501e61\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/99e5f1b0b5501e61</a>"}, {"owner": {"reputation": 186, "user_id": 6750148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad917130ba36184ba5e72560d4270ff5?s=128&d=identicon&r=PG", "display_name": "ded32", "link": "https://stackoverflow.com/users/6750148/ded32"}, "reply_to_user": {"reputation": 13416, "user_id": 203091, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4c6ae6c26fff7002b9515578cc57c3c7?s=128&d=identicon&r=PG", "display_name": "grokus", "link": "https://stackoverflow.com/users/203091/grokus"}, "edited": false, "score": 0, "creation_date": 1586067624, "post_id": 34053305, "comment_id": 107985421, "body": "@grokus, this seems to work well: <a href=\"http://coliru.stacked-crooked.com/a/d77eabef9fd5669b\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/d77eabef9fd5669b</a>"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 6, "last_activity_date": 1449135000, "last_edit_date": 1449135000, "creation_date": 1449091545, "answer_id": 34053305, "question_id": 34052948, "link": "https://stackoverflow.com/questions/34052948/printing-any-stl-container/34053305#34053305", "title": "Printing Any STL Container", "body": "<p>You could overload <code>operator&lt;&lt;</code> as a template that takes a template template argument (i.e., any container).</p>\n\n<p>Then you could provide two overloads of a template function (e.g., <code>print</code>) that the one overload would specialize on <code>std::pair</code>.</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::ostream&amp; print(std::ostream &amp;out, T const &amp;val) { \n  return (out &lt;&lt; val &lt;&lt; \" \");\n}\n\ntemplate&lt;typename T1, typename T2&gt;\nstd::ostream&amp; print(std::ostream &amp;out, std::pair&lt;T1, T2&gt; const &amp;val) { \n  return (out &lt;&lt; \"{\" &lt;&lt; val.first &lt;&lt; \" \" &lt;&lt; val.second &lt;&lt; \"} \");\n}\n\ntemplate&lt;template&lt;typename, typename...&gt; class TT, typename... Args&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, TT&lt;Args...&gt; const &amp;cont) {\n  for(auto&amp;&amp; elem : cont) print(out, elem);\n  return out;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/cfd849654caded29\" rel=\"nofollow\"><strong>LIVE DEMO</strong></a></p>\n"}], "owner": {"reputation": 277, "user_id": 4863960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BwLE7.png?s=128&g=1", "display_name": "mrDudePerson", "link": "https://stackoverflow.com/users/4863960/mrdudeperson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3516, "favorite_count": 2, "accepted_answer_id": 34053305, "answer_count": 2, "score": 15, "last_activity_date": 1449263138, "creation_date": 1449090245, "last_edit_date": 1449263138, "question_id": 34052948, "link": "https://stackoverflow.com/questions/34052948/printing-any-stl-container", "title": "Printing Any STL Container", "body": "<p><strong>How would you go about writing a library that, when included, it overloads the <code>&lt;&lt;</code> operator for <em>any*</em> existing STL container?</strong></p>\n\n<ul>\n<li><em>Except adaptors like stack and queue, since you cannot iterate through them.</em></li>\n</ul>\n\n<p>The one self-imposed requirement is that it <em>mustn't</em> include any of the containers' header files. That would bloat the final executable unnecessarily. It makes more sense to include this header after the containers' that I would like to work with. This restriction implies the use of <code>templates</code> or <code>macros</code>.</p>\n\n<p><strong>I'm looking for advice and pointers</strong>, so, <em>please</em>, don't just post fully working code that can do this! Implementing this myself is part of the learning process. Small snippets of code that demonstrate how certain things work are welcome.</p>\n\n<p><strong>What I did up to this point:</strong></p>\n\n<p>I have overloaded the <code>&lt;&lt;</code> operator for every container with a different <em>template signature</em>. The problem that I have run into with this approach is, that there are containers that have the same number of template parameters, but some contain <code>std::pair</code>-s, others <code>single values</code>. More precisely, this is the case of <code>std::map</code> &amp; <code>std::multimap</code> vs <code>std::unordered_set</code> &amp; <code>std::unordered_multiset</code>.</p>\n\n<p>This collision forces me to either implement a non-template version of one of the pairs, or to come up with a way to differentiate between <code>std::pair</code>-s and <code>single values</code>. I don't really know how to go about doing the second one, though. The reason because I'm not \"<em>how to do that</em>\" directly is that I'm starting to believe that this could be avoided entirely with a better overall design. </p>\n\n<p><em>Thank you in advance!</em>\n<br/></p>\n\n<hr>\n\n<p><br/>\n<strong>What worked for me:</strong></p>\n\n<ol>\n<li>Overload <code>operator&lt;&lt;</code> for <code>std::pair</code></li>\n<li>Overload <code>operator&lt;&lt;</code> for every STL container with different template arguments\n\n<blockquote>\n  <p>Note:</p>\n  \n  <ol>\n  <li><code>template &lt;typename T1&gt;</code> and <code>template &lt;typename T1, typename T2&gt;</code> <em>are</em> different</li>\n  <li><code>template &lt;typename T1, typename T2&gt;</code> and <code>template &lt;typename T1, size_t T2&gt;</code> <em>are</em>\n  different</li>\n  <li><code>template &lt;typename T1, typename T2&gt;</code> and <code>template &lt;typename C1, typename C2&gt;</code>\n  are <em>NOT</em> different</li>\n  </ol>\n</blockquote></li>\n<li>Put them in a namespace to make sure that your operators won't collide with any other operators that you might need in the future.</li>\n</ol>\n\n<p><br/>\nUse \"templates in templates\", so for example a function would look like:</p>\n\n<pre><code>template &lt;typename Type, template &lt;typename TYPE&gt; class TClass&gt;\nvoid func(TClass&lt;Type&gt;&amp; tc) {\n    if (tc.somethingTrue())\n        tc.doStuff();\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 427, "user_id": 1283466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIHiq.jpg?s=128&g=1", "display_name": "Open Kastle", "link": "https://stackoverflow.com/users/1283466/open-kastle"}, "edited": false, "score": 1, "creation_date": 1449090087, "post_id": 34052872, "comment_id": 55860050, "body": "Is <code>print</code> a member function?  If so add the scope specifier <code>battleshipgrid::</code> like the rest of the functions."}, {"owner": {"reputation": 1124, "user_id": 1638488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ed25e31d9cee871c0bc734448a33f7cc?s=128&d=identicon&r=PG", "display_name": "DoomMuffins", "link": "https://stackoverflow.com/users/1638488/doommuffins"}, "edited": false, "score": 0, "creation_date": 1449090090, "post_id": 34052872, "comment_id": 55860054, "body": "<code>void print()</code> -&gt; <code>void battleshipgrid::print()</code> ?"}, {"owner": {"reputation": 26, "user_id": 5529304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ab899d9dd69d2923d6a6313611459c?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Clark", "link": "https://stackoverflow.com/users/5529304/austin-clark"}, "reply_to_user": {"reputation": 1124, "user_id": 1638488, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ed25e31d9cee871c0bc734448a33f7cc?s=128&d=identicon&r=PG", "display_name": "DoomMuffins", "link": "https://stackoverflow.com/users/1638488/doommuffins"}, "edited": false, "score": 0, "creation_date": 1449090286, "post_id": 34052872, "comment_id": 55860168, "body": "Wow thanks guys I am so embarrassed. @DoomMuffins"}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1449090427, "last_edit_date": 1449090427, "creation_date": 1449090109, "answer_id": 34052901, "question_id": 34052872, "link": "https://stackoverflow.com/questions/34052872/error-c2065-but-it-is-for-sure-declared/34052901#34052901", "title": "error C2065: But it is for sure declared", "body": "<p><code>waters</code> is clearly a member of <code>class battleshipgrid</code>.</p>\n\n<p>In this function, <strong><em>which is not part of battleshipgrid</em></strong>, you try to access member variable <code>waters</code></p>\n\n<pre><code>void print ()  // Not part of class battleshipgrid!\n{\n    for (int i=0; i &lt;10;i++)\n    {\n        std::cout&lt;&lt;\"\\n\";\n        for (int j=0;j&lt;10;j++)\n        {\n            cout&lt;&lt;waters[i][j]&lt;&lt;\" \"; // Trying to access data in class battleshipgrid!\n                                     // but without referring to the class or an instance!\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Separately, here's how you simplify a lot of your code:</p>\n\n<pre><code>bool battleshipgrid::hit(position pos)   { return o.hit(pos);  }\nbool battleshipgrid::miss(position pos)  { return !o.hit(pos); }\nbool battleshipgrid::empty(position pos) { return ('o'==waters[pos.getcol()][pos.rowindex()]); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": false, "score": 0, "last_activity_date": 1449090127, "creation_date": 1449090127, "answer_id": 34052908, "question_id": 34052872, "link": "https://stackoverflow.com/questions/34052872/error-c2065-but-it-is-for-sure-declared/34052908#34052908", "title": "error C2065: But it is for sure declared", "body": "<p>It appears that <code>waters</code> is a member variable of the <code>battleshipgrid</code> class. <code>print()</code>, on the other hand, is not associated with that class.</p>\n\n<p>Did you perhaps mean to implement </p>\n\n<pre><code>void battleshipgrid::print ()\n</code></pre>\n"}], "owner": {"reputation": 26, "user_id": 5529304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ab899d9dd69d2923d6a6313611459c?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Clark", "link": "https://stackoverflow.com/users/5529304/austin-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449090427, "creation_date": 1449089968, "question_id": 34052872, "link": "https://stackoverflow.com/questions/34052872/error-c2065-but-it-is-for-sure-declared", "title": "error C2065: But it is for sure declared", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;ostream&gt;\n#include \"battleshipgrid.h\"\nusing namespace std;\n\nbattleshipgrid::battleshipgrid ()\n{\n    for (int i=0;i &lt; 10;i++)\n    {\n        for (int j =0; j&lt;10;j++)\n        {\n            waters[i][j]='o';\n        }\n\n    }\n}\n\n\nvoid battleshipgrid::shotat (position pos, bool hit, char initial)\n{\n    if (hit)\n    {\n        waters[pos.getcol()][pos.rowindex()]=initial;\n    }\n    if (!hit)\n    {\n        waters[pos.getcol()][pos.rowindex()]='x';\n    }\n}\n\nbool battleshipgrid::hit(position pos)\n{\n    if (o.hit(pos))\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n\nbool battleshipgrid::miss(position pos)\n{\n    if (!o.hit(pos))\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n\nbool battleshipgrid::empty(position pos)\n{\n    if (waters[pos.getcol()][pos.rowindex()]=='o')\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n\n}\n\nchar battleshipgrid::boatinitial(position pos)\n{\n    return waters[pos.getcol()][pos.rowindex()];\n}\n\nvoid print ()\n{\n    for (int i=0; i &lt;10;i++)\n    {\n        std::cout&lt;&lt;\"\\n\";\n        for (int j=0;j&lt;10;j++)\n        {\n            cout&lt;&lt;waters[i][j]&lt;&lt;\" \";\n        }\n    }\n</code></pre>\n\n<p>So as you can see I get the error for an undeclared identifier here is the exact error</p>\n\n<p>error C2065: 'waters' : undeclared identifier</p>\n\n<p>It says that waters is an undeclared identifier. As you may be able to tell, waters has been used in multiple areas and we didn't receive errors for them. If we comment out the void print method it resolves all issues but we need the print method. If you see something I don't please let me know. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 5, "creation_date": 1449090016, "post_id": 34052843, "comment_id": 55859994, "body": "I&#39;m confused what you&#39;re trying to do. Your first code fragment is an infinite loop."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1449090037, "post_id": 34052843, "comment_id": 55860012, "body": "Wait, why do you not want to use the standard containers?  There is no reason to reinvent the wheel to get rid of some features."}, {"owner": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1449090239, "post_id": 34052843, "comment_id": 55860145, "body": "@erip I&#39;m trying to implement things like empty() with set, using a pair. I know it&#39;s an infinite loop, I just wanted to give an example."}, {"owner": {"reputation": 877, "user_id": 2548319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Thw8X.jpg?s=128&g=1", "display_name": "Paulo1205", "link": "https://stackoverflow.com/users/2548319/paulo1205"}, "edited": false, "score": 0, "creation_date": 1449090441, "post_id": 34052843, "comment_id": 55860261, "body": "For a set, you&#39;ll have to provide a comparison function (such as <code>bool operator&lt;(const pair2 &amp;, const pair2 &amp;)</code>), so the set knows how to order your pairs."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1449090732, "post_id": 34053046, "comment_id": 55860423, "body": "The new thing <code>using</code> enables is not template aliases, but alias templates. You can very well do <code>typedef std::pair&lt;float, int&gt; my_pair</code>, what you can&#39;t do is <code>template &lt;class T&gt; typedef std::pair&lt;float, T&gt; my_pair</code>."}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1449091699, "post_id": 34053046, "comment_id": 55860956, "body": "<code>make_my_pair</code> should also continue to delegate <code>std::make_pair</code>, it defaults to forwarding mechanics instead of constructor/destructor calls."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1449092063, "post_id": 34053046, "comment_id": 55861159, "body": "I was just thinking that before I noticed the comment... edited."}], "tags": [], "owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "is_accepted": true, "score": 2, "last_activity_date": 1449092043, "last_edit_date": 1449092043, "creation_date": 1449090598, "answer_id": 34053046, "question_id": 34052843, "link": "https://stackoverflow.com/questions/34052843/rewriting-setpairx-y-as-a-struct/34053046#34053046", "title": "Rewriting ( set&lt;pair&lt;x,y&gt;&gt; ) as a struct", "body": "<p>If I understand correctly, you want to have a pair that is \"untemplated\". You can type alias, which you can use to rename types to some custom type.</p>\n\n<p>Instead of typing <code>std::pair&lt;float, int&gt;</code> each time, you could call it <code>my_pair</code>.</p>\n\n<p>This is how you can do it in C++11:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;set&gt;\n\nusing my_pair = std::pair&lt;float, int&gt;;\n\nmy_pair make_my_pair(float a, int b) {\n  return std::make_pair(a, b);\n}\n\nint main() {\n  my_pair a(1.5, 2);\n  my_pair b = make_my_pair(2.2, 3);\n  std::cout &lt;&lt; a.first &lt;&lt; \" \" &lt;&lt; a.second &lt;&lt; std::endl;\n  std::cout &lt;&lt; b.first &lt;&lt; \" \" &lt;&lt; b.second &lt;&lt; std::endl;\n\n  std::set&lt;my_pair&gt; foo;\n  foo.insert(make_my_pair(3.4, 4));\n\n  return 0;\n}\n</code></pre>\n\n<p>Be sure to compile with <code>-std=c++11</code>.</p>\n\n<hr>\n\n<p>If you can't/don't want to use C++11 constructs, you can do this as well:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;set&gt;\n\ntypedef std::pair&lt;float, int&gt; my_pair;\n\nmy_pair make_my_pair(float a, int b) {\n  return std::make_pair(a, b);\n}\n\nint main() {\n  my_pair a(1.5, 2);\n  my_pair b = make_my_pair(2.2, 3);\n  std::cout &lt;&lt; a.first &lt;&lt; \" \" &lt;&lt; a.second &lt;&lt; std::endl;\n  std::cout &lt;&lt; b.first &lt;&lt; \" \" &lt;&lt; b.second &lt;&lt; std::endl;\n\n  std::set&lt;my_pair&gt; foo;\n  foo.insert(make_my_pair(3.4, 4));\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34053046, "answer_count": 1, "score": 1, "last_activity_date": 1449092043, "creation_date": 1449089857, "question_id": 34052843, "link": "https://stackoverflow.com/questions/34052843/rewriting-setpairx-y-as-a-struct", "title": "Rewriting ( set&lt;pair&lt;x,y&gt;&gt; ) as a struct", "body": "<p>I have to write this:</p>\n\n<pre><code>set&lt;pair&lt;float,int&gt;&gt;foo;\nfoo.insert(make_pair(a, b));\n\nwhile (!foo.empty())\n{\n    float dist = foo.begin()-&gt;first;\n    int u = foo.begin()-&gt;second;\n}\n</code></pre>\n\n<p>But I want to use my own implementation without adding all the functionality of set/pair.</p>\n\n<p>This is basically what I want pair to do:</p>\n\n<pre><code>struct pair2\n{\n    float first;\n    int second;\n\n    pair2(float arg_first, int arg_second)\n    {\n        first = arg_first;\n        second = arg_second;\n    }\n\n    pair2 make_pair2(float first2, int second2)\n    {\n        return (pair2(first2,second2));\n    }\n};\n</code></pre>\n\n<p>I'm not sure if that's completely correct, but I also have to implement set to work with it:</p>\n\n<pre><code>set&lt;pair&gt;foo;   //not set&lt;pair&lt;float,int&gt;&gt;foo; since not templated\nfoo.insert(make_pair2(a,b));\n</code></pre>\n\n<p>What's the best way to do this? Should I implement set using a vector? All I need set to have is:  empty(), begin(), erase() and insert() which vectors already have.</p>\n"}, {"tags": ["python", "c++", "boost"], "comments": [{"owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "edited": false, "score": 0, "creation_date": 1449090488, "post_id": 34052773, "comment_id": 55860286, "body": "Did that code even compile? <code>A::foo()</code> is private. So, are <code>B::x</code> and <code>B::y</code>. <code>&amp;B.x</code> does not make sense. Neither does <code>&amp;B.y</code>. Can you please post code that you are actually using?"}, {"owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "edited": false, "score": 0, "creation_date": 1449090811, "post_id": 34052773, "comment_id": 55860469, "body": "Please, provide implementation of <code>A::foo()</code> method"}, {"owner": {"reputation": 910, "user_id": 3332581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fa1d0b48d4ec4d535c0e7a48882c2eb3?s=128&d=identicon&r=PG", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/3332581/ashkan"}, "reply_to_user": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "edited": false, "score": 0, "creation_date": 1449090861, "post_id": 34052773, "comment_id": 55860494, "body": "@crayzeewulf Corrected the code a bit. My code is in two files and a lot of lines. Should I still post it here?"}, {"owner": {"reputation": 5282, "user_id": 1062948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432acdf7ac90614c1100bb7275eb5ce5?s=128&d=identicon&r=PG", "display_name": "crayzeewulf", "link": "https://stackoverflow.com/users/1062948/crayzeewulf"}, "edited": false, "score": 0, "creation_date": 1449090912, "post_id": 34052773, "comment_id": 55860508, "body": "Please try: <code>A = interestingLib.A()</code> (notice <code>()</code>). You need to create an object of class A before using it. Also, avoid using variable names that are the same as names of classes."}], "answers": [{"tags": [], "owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "is_accepted": false, "score": 2, "last_activity_date": 1449090907, "creation_date": 1449090907, "answer_id": 34053132, "question_id": 34052773, "link": "https://stackoverflow.com/questions/34052773/boost-python-returning-a-class-from-a-method-of-another-class/34053132#34053132", "title": "Boost python, returning a class from a method of another class", "body": "<p>In python you should use</p>\n\n<pre><code>A = interestingLib.A()\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>A = interestingLib.A\n</code></pre>\n\n<p>This code <code>A = interestingLib.A</code> assign to <code>A</code> object of type <code>Boost.Python.class</code>. And with <code>A = interestingLib.A()</code> you create object of type <code>A</code> with default constructor.</p>\n"}], "owner": {"reputation": 910, "user_id": 3332581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fa1d0b48d4ec4d535c0e7a48882c2eb3?s=128&d=identicon&r=PG", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/3332581/ashkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449090907, "creation_date": 1449089675, "last_edit_date": 1449090651, "question_id": 34052773, "link": "https://stackoverflow.com/questions/34052773/boost-python-returning-a-class-from-a-method-of-another-class", "title": "Boost python, returning a class from a method of another class", "body": "<p>My problem is that I have two classes like this</p>\n\n<pre><code>class B{\npublic:\n    double x,y;\n}\n\nclass A{\npublic:\n    B foo();\n}\n\n\nBOOST_PYTHON_MODULE(interestingLib){\n    class_&lt;A&gt;(\"A\")\n        .def(\"foo\", &amp;A::foo)\n    ;\n    class_&lt;B&gt;(\"B\")\n        .def_readonly(\"x\",&amp;B::x)\n        .def_readonly(\"y\",&amp;B::y)\n    ;\n}\n</code></pre>\n\n<p>in my python script I call my function <code>foo</code> and get the return, after that I want to see the member variable <code>x</code> like this</p>\n\n<pre><code>A = interestingLib.A\nB = A.foo()\nB.x\n</code></pre>\n\n<p>but I get the error <code>AttributeError: 'NoneType' object has no attribute 'x'</code></p>\n\n<p>could anyone tell me what the problem is?</p>\n"}, {"tags": ["c++", "vector", "queue"], "comments": [{"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1449089725, "post_id": 34052746, "comment_id": 55859825, "body": "this is C++ code, not C. please update tags"}, {"owner": {"reputation": 662, "user_id": 4326767, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/GSH4R.jpg?s=128&g=1", "display_name": "Mohamad-Jaafar NEHME", "link": "https://stackoverflow.com/users/4326767/mohamad-jaafar-nehme"}, "reply_to_user": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1449089826, "post_id": 34052746, "comment_id": 55859883, "body": "I almost don&#39;t differ between all syntax of C and C++, so I used printf and malloc to indicate that this is C code. What is still now C++?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1449089891, "post_id": 34052746, "comment_id": 55859911, "body": "@Mohamad-jaafar: std::vector and std::queue"}], "answers": [{"comments": [{"owner": {"reputation": 662, "user_id": 4326767, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/GSH4R.jpg?s=128&g=1", "display_name": "Mohamad-Jaafar NEHME", "link": "https://stackoverflow.com/users/4326767/mohamad-jaafar-nehme"}, "edited": false, "score": 0, "creation_date": 1449090211, "post_id": 34052819, "comment_id": 55860129, "body": "Thank you, I got it now."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 1, "last_activity_date": 1449089793, "creation_date": 1449089793, "answer_id": 34052819, "question_id": 34052746, "link": "https://stackoverflow.com/questions/34052746/default-size-of-stdqueue-when-creating-it-by-malloc/34052819#34052819", "title": "Default size of std::queue when creating it by malloc", "body": "<p><code>malloc</code> allocates a memory block, but <em>does not actually construct an object there</em>, so it will contain garbage. This is one of the reasons you should use <code>new</code> in C++ instead.</p>\n\n<p>If you replace the <code>malloc</code> call with <code>new std::queue&lt;int&gt;</code> then you will see the expected result.</p>\n\n<p>If, for some weird reason, you need to construct an object in the memory block, you can use \"placement <code>new</code>\":</p>\n\n<pre><code>new(received_vector) std::vector&lt;int&gt;;\n</code></pre>\n\n<p>and also remember to call the destructor yourself before calling <code>free</code> (since <code>free</code> doesn't call destructors either).</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1449089827, "creation_date": 1449089827, "answer_id": 34052833, "question_id": 34052746, "link": "https://stackoverflow.com/questions/34052746/default-size-of-stdqueue-when-creating-it-by-malloc/34052833#34052833", "title": "Default size of std::queue when creating it by malloc", "body": "<p>That's not the way to create objects in C++. In fact, it is Undefined Behaviour.</p>\n\n<p>Do it with the <code>new</code> operator, like this:</p>\n\n<pre><code>std::vector&lt;int&gt; * received_vector = new std::vector&lt;int&gt;;\nstd::queue&lt;int&gt; * received_queue = new std::queue&lt;int&gt;;\n</code></pre>\n\n<p>Then the newly created objects will be properly constructed (initialized), because <code>new</code> causes their constructors to be executed.</p>\n"}], "owner": {"reputation": 662, "user_id": 4326767, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/GSH4R.jpg?s=128&g=1", "display_name": "Mohamad-Jaafar NEHME", "link": "https://stackoverflow.com/users/4326767/mohamad-jaafar-nehme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 1, "accepted_answer_id": 34052819, "answer_count": 2, "score": 0, "last_activity_date": 1449089890, "creation_date": 1449089564, "last_edit_date": 1449089890, "question_id": 34052746, "link": "https://stackoverflow.com/questions/34052746/default-size-of-stdqueue-when-creating-it-by-malloc", "title": "Default size of std::queue when creating it by malloc", "body": "<p>When creating a pointer to <code>std::queue</code> and allocating memory for it using <code>malloc</code>, I found that the default size of queue was not zero as in the following code:</p>\n\n<pre><code>#include &lt;queue&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char * argv[]) {\n\n    std::queue &lt;int&gt; * received_queue = NULL;\n\n    received_queue = (std::queue &lt;int &gt; *) malloc (sizeof (std::queue &lt;int&gt;));\n\n    printf (\"%d\\n\", received_queue -&gt; size ());\n}\n</code></pre>\n\n<p>The result returned is: 4294967168 where I expected to get zero.</p>\n\n<p>I replaced queue with vector, so the code becomes:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char * argv[]) {\n\n    std::vector &lt;int&gt; * received_vector = NULL;\n    received_vector = (std::vector &lt;int &gt; *) malloc (sizeof (std::vector &lt;int&gt;));\n\n    printf (\"%d\\n\", received_vector -&gt; size ());\n}\n</code></pre>\n\n<p>The result returned now is 0.</p>\n\n<p>My question: Is there something I have missed in allocating <code>std::queue</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 10, "creation_date": 1449089607, "post_id": 34052736, "comment_id": 55859778, "body": "You&#39;re printing it backwards."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1449089651, "post_id": 34052736, "comment_id": 55859793, "body": "How big is arr1? 20, 21 or 22? And why are you leaving [0] out?"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1449089658, "post_id": 34052736, "comment_id": 55859795, "body": "<code>for (int i = 0; i  &lt; 20; ++i) { cout &lt;&lt; arr1[i]; }</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1449089659, "post_id": 34052736, "comment_id": 55859796, "body": "<code>int i = 21;</code> is not the same as <code>int i = 20;</code>.  How big is your array.  You really should have an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1449102364, "post_id": 34052736, "comment_id": 55865442, "body": "Time to learn how to use a debugger?"}], "answers": [{"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1449092592, "post_id": 34053468, "comment_id": 55861434, "body": "He doesn&#39;t check the exit condition from the first loop either."}, {"owner": {"reputation": 149, "user_id": 5181941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q4rXS.jpg?s=128&g=1", "display_name": "Riccardo Maffei", "link": "https://stackoverflow.com/users/5181941/riccardo-maffei"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1449102258, "post_id": 34053468, "comment_id": 55865413, "body": "@Bob__ Thank you! I&#39;ve added a note about it."}], "tags": [], "owner": {"reputation": 149, "user_id": 5181941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q4rXS.jpg?s=128&g=1", "display_name": "Riccardo Maffei", "link": "https://stackoverflow.com/users/5181941/riccardo-maffei"}, "is_accepted": false, "score": 2, "last_activity_date": 1449102031, "last_edit_date": 1449102031, "creation_date": 1449092110, "answer_id": 34053468, "question_id": 34052736, "link": "https://stackoverflow.com/questions/34052736/array-will-not-fill-backwards-in-c/34053468#34053468", "title": "Array will not fill backwards in C++", "body": "<p>What's the size of your array?\n<strong>Assume that the size is 21 (indexes from 0 to 20).</strong></p>\n\n<p>First of all please note that your first loop will never populate the array at index 0 (something like this <code>arr1[0] = temp</code> will never be executed inside your first loop).<br>\nIf you want to avoid this behavior you should write your first for loop like this:</p>\n\n<p><code>for (int i = 20; i &gt;= 0; i--){</code>...<code>}</code>.</p>\n\n<p>The second for loop has some issues:</p>\n\n<ol>\n<li>You are traversing the array backwards while you want to do the opposite.</li>\n<li>The loop starts from an index out of bound (21).</li>\n<li>The loop may print some undefined values (You should remember the index of the last added value).</li>\n</ol>\n\n<p>I suggest you to use other data structures like a Stack but if you want to use an array you can edit your code as follows:</p>\n\n<pre><code>int i;\nfor (i = 20; i &gt;= 0; i--){...}\nfor (i; i &lt;= 20; ++i) { cout &lt;&lt; arr1[i]; }\n</code></pre>\n\n<p>If you don't want to declare <code>int i;</code> outside of the loop you can do something like that:</p>\n\n<pre><code>int lastAdded;\nfor (int i = 20; i &gt;= 0; i--){\n    ...\n    lastAdded = i;\n}\nfor (int i = lastAdded; i &lt;= 20; i++) { cout &lt;&lt; arr1[i]; }\n</code></pre>\n\n<p>Edit: Note that neither your code nor mine stops asking for a new value after the insertion of a -1.<br>\nIf you want to achieve this behavior you should use a while loop instead of the first for loop and check for the exit condition.</p>\n"}], "owner": {"reputation": 1, "user_id": 5632246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2774eb6e8cc35d83b160e4d74ccd3931?s=128&d=identicon&r=PG&f=1", "display_name": "Collin Stacey", "link": "https://stackoverflow.com/users/5632246/collin-stacey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1449102031, "creation_date": 1449089537, "question_id": 34052736, "link": "https://stackoverflow.com/questions/34052736/array-will-not-fill-backwards-in-c", "title": "Array will not fill backwards in C++", "body": "<p>I am attempting to fill an array backwards from 20 to 0 but whenever I print it out it still prints out forwards. For instance I want to put in 1,2,3,4,5 and have it come out as 5,4,3,2,1.</p>\n\n<p>I have attempted to do a for loop that counts backwards from 20 to 0 but when i print it it is still coming out incorrect. Any help?</p>\n\n<pre><code>int temp;\nfor (int i = 20; i &gt; 0; i--)\n{\n    cout &lt;&lt; \"Please enter the next number. Use a -1 to indicate you are done: \";\n    cin &gt;&gt; temp;\n    while(temp &gt; 9 || temp &lt; -2)\n    {\n        cout &lt;&lt; \"You may only put numbers in 0 - 9 or -1 to exit. Please enter another number: \";\n        cin &gt;&gt; temp;\n    }\n    arr1[i] = temp;\n    cout &lt;&lt; arr1[i];\n}\nfor (int i = 21; i &gt; 0; i--)\n{\n    cout &lt;&lt; arr1[i];\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 4676, "user_id": 2052730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atz9A.jpg?s=128&g=1", "display_name": "Sasha Pachev", "link": "https://stackoverflow.com/users/2052730/sasha-pachev"}, "edited": false, "score": 0, "creation_date": 1449089071, "post_id": 34052576, "comment_id": 55859486, "body": "Compiles fine with GCC 4.8.2 with `--std=c++11`` flag."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 4676, "user_id": 2052730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atz9A.jpg?s=128&g=1", "display_name": "Sasha Pachev", "link": "https://stackoverflow.com/users/2052730/sasha-pachev"}, "edited": false, "score": 0, "creation_date": 1449089188, "post_id": 34052576, "comment_id": 55859548, "body": "@SashaPachev Likewise, compiles fine with GCC 5.2.0 with either <code>--std=c++11</code> and <code>--std=c++14</code> flags."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1449093030, "post_id": 34052576, "comment_id": 55861657, "body": "Looks like a bug.  Replacing the array with a \t<code>std::vector&lt;Bar&gt; cells{10};</code> works well."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1449094244, "post_id": 34052576, "comment_id": 55862340, "body": "Strangely though, replaceing std::array with boost::array produces exactly the same error (also related to the copy constructor of the array)."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 2, "last_activity_date": 1449097505, "creation_date": 1449097505, "answer_id": 34054800, "question_id": 34052576, "link": "https://stackoverflow.com/questions/34052576/stdarray-of-a-private-nested-struct-cant-be-initialized-error-c2248/34054800#34054800", "title": "std::array of a private nested struct can&#39;t be initialized (error C2248)", "body": "<p>This appears to be a bug of MSVC2015. </p>\n\n<p>The problem is related to the copy construction of the array that you make in <code>foo()</code>.  It seems not directly related to the implementation of <code>std::array</code>, because <code>boost::array</code> produces exactly the same error.  </p>\n\n<p>A workaround is to split the construction from the copy, for example:  </p>\n\n<pre><code>void foo()\n{\n    decltype(cells) stashedCells;   // this works \n    stashedCells = cells;           // this works \n}\n</code></pre>\n\n<p>Or:  </p>\n\n<pre><code>void foo()\n{\n    std::array&lt;Bar, 10&gt; stashedCells; \n    stashedCells = cells;\n}\n</code></pre>\n\n<p>Other potential workarounds such as using a public <code>typedef</code> or type alias for the array and/or <code>Bar</code> always fail.  The error only disapears when making <code>Bar</code> public.  </p>\n"}], "owner": {"reputation": 830, "user_id": 1492838, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2459503e41d148c1bff514bbcff227f1?s=128&d=identicon&r=PG", "display_name": "alcedine", "link": "https://stackoverflow.com/users/1492838/alcedine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 34054800, "answer_count": 1, "score": 2, "last_activity_date": 1449098931, "creation_date": 1449088809, "last_edit_date": 1449098931, "question_id": 34052576, "link": "https://stackoverflow.com/questions/34052576/stdarray-of-a-private-nested-struct-cant-be-initialized-error-c2248", "title": "std::array of a private nested struct can&#39;t be initialized (error C2248)", "body": "<p>The following code compiles correctly in ideone (C++14, <a href=\"http://ideone.com/reV0IC\" rel=\"nofollow\">link</a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt;\n\nclass Foo {\npublic:\n    void foo() { auto stashedCells = cells; }\nprivate:\n    struct Bar { std::vector&lt;int&gt; choices; };\n    std::array&lt;Bar, 10&gt; cells;\n};\n\nint main() {\n    Foo foo;\n    foo.foo();\n}\n</code></pre>\n\n<p>However, in Visual Studio 2015, it produces the following errors:</p>\n\n<pre><code>1&gt;  main.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\array(220): error C2248: 'Foo::Bar': cannot access private struct declared in class 'Foo'\n1&gt;  c:\\users\\alcedine\\documents\\visual studio 2015\\projects\\mvce\\mvce\\main.cpp(9): note: see declaration of 'Foo::Bar'\n1&gt;  c:\\users\\alcedine\\documents\\visual studio 2015\\projects\\mvce\\mvce\\main.cpp(5): note: see declaration of 'Foo'\n1&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\array(220): note: This diagnostic occurred in the compiler generated function 'std::array&lt;Foo::Bar,10&gt;::array(const std::array&lt;Foo::Bar,10&gt; &amp;)'\n</code></pre>\n\n<p>The unit compiles successfully if <code>Foo::Bar</code> is empty or contains just an <code>int</code>, so it doesn't seem to be due to the access specifier, compiler messages to that effect notwithstanding.</p>\n\n<p>Is this due to some difference between C++11 and C++14? Is Visual Studio behaving correctly here?</p>\n"}, {"tags": ["c++", "c++11", "list-initialization"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1449088782, "post_id": 34052539, "comment_id": 55859337, "body": "add a constructor that takes <code>std::initializer_list&lt;int&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "is_accepted": false, "score": -2, "last_activity_date": 1449088999, "creation_date": 1449088999, "answer_id": 34052611, "question_id": 34052539, "link": "https://stackoverflow.com/questions/34052539/how-to-let-list-can-convert-to-my-class-object-implicitly/34052611#34052611", "title": "How to let list can convert to my class object implicitly?", "body": "<p>You have to have constructor which takes three ints. Consider:</p>\n\n<pre><code>struct Point {\n    Point (int p1_, int p2_, int p3_) : p1 {p1_}, p2 {p2_}, p3 {p3_} {}\n\n    int p1;\n    int p2;\n    int p3;\n};\n\nvoid foo (Point pt) {\n    std::cout &lt;&lt; pt.p1 &lt;&lt; std::endl;\n    std::cout &lt;&lt; pt.p2 &lt;&lt; std::endl;\n    std::cout &lt;&lt; pt.p3 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and usage:</p>\n\n<pre><code>foo ({1, 2, 3});\nstd::cout &lt;&lt; std::endl;\nfoo ({4, 5, 6});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "edited": false, "score": 0, "creation_date": 1449092556, "post_id": 34052619, "comment_id": 55861416, "body": "<code>initializer_list</code> is designed to be cheaply passed by value."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 3, "last_activity_date": 1449089057, "creation_date": 1449089057, "answer_id": 34052619, "question_id": 34052539, "link": "https://stackoverflow.com/questions/34052539/how-to-let-list-can-convert-to-my-class-object-implicitly/34052619#34052619", "title": "How to let list can convert to my class object implicitly?", "body": "<pre><code>#include &lt;initializer_list&gt;\n#include &lt;cassert&gt;\n\nstruct bar\n{\n    void foo(const std::initializer_list&lt;int&gt;&amp; bits)\n    {\n        assert(bits.size() == 3);\n        auto i = bits.begin();\n        x = *i++;\n        y = *i++;\n        z = *i++;\n    }\n\n    int x, y, z;\n};\n\nint main()\n{\n    bar b;\n    b.foo({0, 1, 2});\n}\n</code></pre>\n"}], "owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34052619, "answer_count": 2, "score": 3, "last_activity_date": 1449089080, "creation_date": 1449088673, "question_id": 34052539, "link": "https://stackoverflow.com/questions/34052539/how-to-let-list-can-convert-to-my-class-object-implicitly", "title": "How to let list can convert to my class object implicitly?", "body": "<p>For example, I have a class <code>Point</code> and has a function</p>\n\n<pre><code>void foo(Point pt);\n</code></pre>\n\n<p>call it as</p>\n\n<pre><code>foo({1, 2, 3});\n</code></pre>\n"}, {"tags": ["c++", "opencv", "segmentation-fault"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449088986, "post_id": 34052490, "comment_id": 55859439, "body": "What is the value of <code>knnFlan</code> at that point?"}, {"owner": {"reputation": 2757, "user_id": 818663, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5593d77e46f458308087a5aa890ec24e?s=128&d=identicon&r=PG", "display_name": "Maystro", "link": "https://stackoverflow.com/users/818663/maystro"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449089522, "post_id": 34052490, "comment_id": 55859742, "body": "It&#39;s a pointer.. how am I supposed to know its value? Also, it should contain an instance of cv::flann::Index (even if it was freed) so don&#39;t know if it really matters.."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1449089565, "post_id": 34052490, "comment_id": 55859757, "body": "Please post <a href=\"https://stackoverflow.com/help/mcve\">a Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1449089935, "post_id": 34052490, "comment_id": 55859943, "body": "You&#39;re not initialising <i>any</i> members in your constructors (you&#39;re assigning to a couple, but not all, in the non-default one), and the default constructor is particularly bad. You should also follow the rule of three (or five or zero). Also, &quot;it should contain an instance of cv::flann::Index (even if it was freed)&quot; isn&#39;t true; if it was freed, the program is undefined."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449089937, "post_id": 34052490, "comment_id": 55859944, "body": "@Maystro Pointers don&#39;t contain instances, ever - that&#39;s just not how pointers work. They can <i>point to</i> instances. By &quot;what value does it contain&quot; I mean does it contain NULL, or does it point to some instance of <code>cv::flann::Index</code>, or something else?"}], "answers": [{"comments": [{"owner": {"reputation": 2757, "user_id": 818663, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5593d77e46f458308087a5aa890ec24e?s=128&d=identicon&r=PG", "display_name": "Maystro", "link": "https://stackoverflow.com/users/818663/maystro"}, "edited": false, "score": 0, "creation_date": 1449092723, "post_id": 34052990, "comment_id": 55861495, "body": "Thanks... you&#39;re right.. The problem were in how I pass the trainData to the constructor.. I added clean code in the question."}], "tags": [], "owner": {"reputation": 4033, "user_id": 2915032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VMG1A.jpg?s=128&g=1", "display_name": "avtomaton", "link": "https://stackoverflow.com/users/2915032/avtomaton"}, "is_accepted": true, "score": 0, "last_activity_date": 1449092034, "last_edit_date": 1449092034, "creation_date": 1449090398, "answer_id": 34052990, "question_id": 34052490, "link": "https://stackoverflow.com/questions/34052490/segmentation-fault-on-accessing-private-instance-variable-c/34052990#34052990", "title": "segmentation fault on accessing private instance variable c++", "body": "<p>There are some more problems in code (for example, I don't see any place with <code>CvKNearest *classifier</code> initialization), but I suppose that your problem is caused by the following:</p>\n\n<p>you pass <code>trainData</code> to <code>annotateTheTilesInImages</code> by <em>value</em>, not by <em>reference</em> or <em>constant reference</em>. It means that <code>trainData</code> inside this function is <strong>another</strong> object (with the same data, of course - <strong>OpenCV</strong> supports implicit sharing), but for <code>flann::Index</code> it can be an issue.</p>\n\n<p><strong>EDIT:</strong> I'm sorry, I mean you pass matrix by value to <code>ClassifierManager</code> constructor, not only to <code>annotateTheTilesInImages</code>. I. e. <code>cv::Mat</code> object that you passed to <code>flann::Index</code> constructor does not exist outside of <code>ClassifierManager</code> constructor (though data is still handled by other <code>cv::Mat</code> object).</p>\n"}], "owner": {"reputation": 2757, "user_id": 818663, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5593d77e46f458308087a5aa890ec24e?s=128&d=identicon&r=PG", "display_name": "Maystro", "link": "https://stackoverflow.com/users/818663/maystro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 34052990, "answer_count": 1, "score": -1, "last_activity_date": 1449092668, "creation_date": 1449088480, "last_edit_date": 1449092668, "question_id": 34052490, "link": "https://stackoverflow.com/questions/34052490/segmentation-fault-on-accessing-private-instance-variable-c", "title": "segmentation fault on accessing private instance variable c++", "body": "<p>I'm encountering a weird problem while working on <code>OpenCV</code>/<code>C++</code> project. I'm just trying to use <code>KNN</code> in the <code>ClassifierManager</code> class. For that reason, I'm using <code>cv::flann::Index * knnFlan</code> and it's initialized in the constructor as you can see below:</p>\n\n<p>.h</p>\n\n<pre><code>class ClassifierManager\n{\nprivate:\n    Mat dataToTrain;\n    Mat classesData;\n    int kNearestNeighborToConsider;\n    CvKNearest *classifier;\n    cv::flann::Index *knnFlan;\n\npublic:\n    ClassifierManager();\n    ClassifierManager(Mat trainData, Mat dataClasses, int numberOfNearestNeighborToConsider);\n    vector &lt; vector &lt;int&gt; &gt; annotateTheTilesInImages(Mat trainData, vector &lt; vector &lt; vector &lt;double&gt; &gt; &gt; featuresPerImageForTiles, int numberOfNearestNeighborToConsider);\n};\n</code></pre>\n\n<p>.m</p>\n\n<pre><code>ClassifierManager::ClassifierManager()\n{}\n\nClassifierManager::ClassifierManager(Mat trainData, Mat dataClasses, int numberOfNearestNeighborToConsider)\n{\n//    dataToTrain = trainData;\n//    classesData = dataClasses;\n    kNearestNeighborToConsider = numberOfNearestNeighborToConsider;\n    try\n    {\n        dataClasses.convertTo(dataClasses,CV_32FC1);\n        trainData.convertTo(trainData,CV_32FC1);\n        knnFlan = new flann::Index( trainData, flann::KDTreeIndexParams(1), cvflann::FLANN_DIST_EUCLIDEAN);\n    } catch (std::exception&amp; ex)\n    {\n        cout &lt;&lt; ex.what() &lt;&lt; endl;\n    }\n}\n\nvector &lt; vector &lt;int&gt; &gt; ClassifierManager::annotateTheTilesInImages( vector &lt; vector &lt; vector &lt;double&gt; &gt; &gt; featuresPerImageForTiles, int numberOfNearestNeighborToConsider)\n{\n    vector &lt; vector &lt;int&gt; &gt; resultForImagePerTile;\n    for (int imageIndex = 0; imageIndex &lt; featuresPerImageForTiles.size(); imageIndex++ )\n    {\n        vector &lt; vector &lt;double&gt; &gt;featuresPerTile = featuresPerImageForTiles[imageIndex];\n        vector &lt;int&gt;  resultPerTile;\n        for (int tileIndex = 0; tileIndex &lt; featuresPerTile.size(); tileIndex ++)\n        {\n            vector &lt;double&gt; featureForTile = featuresPerTile[tileIndex];\n\n            // estimate the response and get the neighbors' labels\n            cv::Mat results, dists;\n            Mat featureOfTileInMat(featureForTile);\n            featureOfTileInMat.convertTo(featureOfTileInMat, CV_32FC1);\n            featureOfTileInMat = featureOfTileInMat.t();\n            //int result = classifier-&gt;find_nearest(featureOfTileInMat,numberOfNearestNeighborToConsider, &amp;results, 0, &amp;neighborResponses, &amp;dists);\n            //float percentageOfInstrumentForThisWindow = (float(countNonZero(neighborResponses)) / numberOfNearestNeighborToConsider) * 100;\n\n            knnFlan-&gt;knnSearch(featureOfTileInMat, results, dists, numberOfNearestNeighborToConsider, flann::SearchParams());\n\n              //..... Things to add\n\n\n        }\n    }\n\n    return resultForImagePerTile;\n}\n</code></pre>\n\n<p>main.m</p>\n\n<pre><code>/*Step 9: Knn Classifier train data */\nMat trainData = VectorUtility &lt;double&gt;::toMat(featuresPerTile);\nMat dataClasses = VectorUtility &lt;int&gt;::toMat(annotationPerTile);\nClassifierManager classifier(trainData, dataClasses, kNearestNeighbor);\n\n/*Step 10: Annotation Step*/\nvector &lt; vector &lt;int&gt; &gt; resultsForEachImagePerTile = classifier.annotateTheTilesInImages(trainData, featuresPerImageForTiles, kNearestNeighbor);\n</code></pre>\n\n<p>The problem is when I try to call <code>annotateTheTilesInImages</code> from the <code>main</code> the project crashes on the <code>knnFlan-&gt;knnSearch(featureOfTileInMat, results, dists, numberOfNearestNeighborToConsider, flann::SearchParams());</code> by throwing a <code>segmentation fault</code> which can't be catched by a try catch instruction. It seems to me there is a problem on how to manage the instance variables in the class but not sure what is it! Any help is appreciated.</p>\n\n<p><strong>@updated above</strong> just removing unnecessary code</p>\n\n<p><strong>@Edited: The correct code:</strong></p>\n\n<p>.h</p>\n\n<pre><code>class ClassifierManager\n{\nprivate:\n    Mat dataToTrain;\n    Mat classesData;\n    int kNearestNeighborToConsider;\n    CvKNearest *classifier;\n    cv::flann::Index *knnFlan;\n\npublic:\n    ClassifierManager();\n    ClassifierManager(Mat &amp;trainData, Mat &amp;dataClasses, int numberOfNearestNeighborToConsider);\n    vector &lt; vector &lt;int&gt; &gt; annotateTheTilesInImages(Mat trainData, vector &lt; vector &lt; vector &lt;double&gt; &gt; &gt; featuresPerImageForTiles, int numberOfNearestNeighborToConsider);\n};\n</code></pre>\n\n<p>.m</p>\n\n<pre><code>ClassifierManager::ClassifierManager()\n{}\n\nClassifierManager::ClassifierManager(Mat &amp;trainData, Mat &amp;dataClasses, int numberOfNearestNeighborToConsider)\n{\n    dataToTrain = trainData;\n    classesData = dataClasses;\n    kNearestNeighborToConsider = numberOfNearestNeighborToConsider;\n    try\n    {\n        dataToTrain .convertTo(dataToTrain ,CV_32FC1);\n        knnFlan = new flann::Index( dataToTrain , flann::KDTreeIndexParams(1), cvflann::FLANN_DIST_EUCLIDEAN);\n    } catch (std::exception&amp; ex)\n    {\n        cout &lt;&lt; ex.what() &lt;&lt; endl;\n    }\n}\n\n....\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4792325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ASv1R.jpg?s=128&g=1", "display_name": "Angela Kay", "link": "https://stackoverflow.com/users/4792325/angela-kay"}, "edited": false, "score": 0, "creation_date": 1449088212, "post_id": 34052325, "comment_id": 55859055, "body": "It was that easy. Also for future reference, I also changed the NULL initializer to 0 as I had an error in the main class of &quot;identifier null is undefined&quot;. Thanks!"}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "reply_to_user": {"reputation": 35, "user_id": 4792325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ASv1R.jpg?s=128&g=1", "display_name": "Angela Kay", "link": "https://stackoverflow.com/users/4792325/angela-kay"}, "edited": false, "score": 1, "creation_date": 1449088272, "post_id": 34052325, "comment_id": 55859086, "body": "it should be <code>NULL</code>, not <code>null</code>. If you are using C++11 I strongly suggest you use <code>nullptr</code> instead!"}], "tags": [], "owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "is_accepted": true, "score": 3, "last_activity_date": 1449087906, "creation_date": 1449087906, "answer_id": 34052325, "question_id": 34052298, "link": "https://stackoverflow.com/questions/34052298/returning-element-of-pointer-array-member-variable/34052325#34052325", "title": "Returning element of pointer array member variable", "body": "<p>Definition of the <code>getBeing</code> function should be:</p>\n\n<pre><code>Being *City::getBeing(int x, int y) { ... }\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4792325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ASv1R.jpg?s=128&g=1", "display_name": "Angela Kay", "link": "https://stackoverflow.com/users/4792325/angela-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34052325, "answer_count": 1, "score": 0, "last_activity_date": 1449087906, "creation_date": 1449087775, "question_id": 34052298, "link": "https://stackoverflow.com/questions/34052298/returning-element-of-pointer-array-member-variable", "title": "Returning element of pointer array member variable", "body": "<p>I'm new to pointers and having a hard time. I'm doin a predator-prey simulator and have a City class that has an array of Being objects, which are eventually to be cast as either Humans or Zombies. City class has an array: </p>\n\n<pre><code>class City\n{\nprotected:\n    Being *grid[GRID_HEIGHT][GRID_WIDTH];//holds beings\n</code></pre>\n\n<p>I initialize the elements to null to start with just to keep it simple.</p>\n\n<pre><code>City::City()\n{\n    for (int i = 0; i &lt; GRID_HEIGHT; ++i) {\n        for (int j = 0; j &lt; GRID_WIDTH; ++j) {\n            this-&gt;grid[i][j] = NULL;\n        }\n    }\n}\n</code></pre>\n\n<p>I also have a method that should return a single Being from the array. <strong>THIS is where I am getting errors</strong>: \"identifier 'grid' is undefined\" or if I use the \"this\" keyword it says that's only allowed in a nonstatic member function. </p>\n\n<pre><code>Being City::*getBeing(int x, int y)\n{\n    return grid[x][y];\n}\n</code></pre>\n\n<p>so I can access it from the main method and just print a placeholder grid:</p>\n\n<pre><code>City myCity;\n\nint main(){\n        if (myCity.getBeing(i,j) == null)\n        {\n            cout &lt;&lt; \"O\";\n        }\n}\n</code></pre>\n\n<p>How can I fix this? Is there a rule of thumb for understanding pointers better?</p>\n"}, {"tags": ["c++", "windows", "file", "directory"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1449087961, "post_id": 34052238, "comment_id": 55858944, "body": "Tried putting \\* at the end of the path?"}], "answers": [{"comments": [{"owner": {"reputation": 1039, "user_id": 4067575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/662bb566549f23c6f58ae5942efbbc27?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4067575/ben"}, "edited": false, "score": 0, "creation_date": 1449185066, "post_id": 34052360, "comment_id": 55909835, "body": "This code definitely obtains all of the files accurately, but how would I be able to obtain them in char* form as opposed to wstring?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1449185250, "post_id": 34052360, "comment_id": 55909915, "body": "If you want your program to work properly, don&#39;t.  (What if one of the file names contains a character that isn&#39;t in the current code page?)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1039, "user_id": 4067575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/662bb566549f23c6f58ae5942efbbc27?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4067575/ben"}, "edited": false, "score": 0, "creation_date": 1449188527, "post_id": 34052360, "comment_id": 55910970, "body": "@Ben: Harry is right, you really should not Ansi-fy your code. Windows is a Unicode OS, and NTFS uses Unicode filenames. You should be using Unicode for everything. That being said, if you really need the filenames in <code>char</code> format instead of <code>WCHAR</code>, either use <code>WideCharToMultiByte()</code> to convert the filenames from <code>WCHAR</code> to <code>char</code>, or else use <code>FindFirstFileA()</code>/<code>FindNextFileA()</code> instead of <code>FindFirstFileW()</code>/<code>FindNextFileW()</code>..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1039, "user_id": 4067575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/662bb566549f23c6f58ae5942efbbc27?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4067575/ben"}, "edited": false, "score": 0, "creation_date": 1449188552, "post_id": 34052360, "comment_id": 55910979, "body": "@Ben: ... In which case, your <code>path</code> would also need to be in <code>char</code> format. You can use <code>GetModuleFileNameA()</code> for that. <code>PathCchRemoveFileSpec()</code> and <code>PathCchAppend()</code> do not support <code>char</code> data, only <code>WCHAR</code> data, but <code>PathRemoveFileSpecA()</code> and <code>PathAppendA()</code> support <code>char</code>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1449088484, "last_edit_date": 1449088484, "creation_date": 1449088056, "answer_id": 34052360, "question_id": 34052238, "link": "https://stackoverflow.com/questions/34052238/how-can-i-obtain-all-of-the-file-names-in-a-directory/34052360#34052360", "title": "How can I obtain all of the file names in a directory?", "body": "<blockquote>\n  <p>I have been told that the following code should work</p>\n</blockquote>\n\n<p>You were told wrong, because the code you have presented is severely broken.</p>\n\n<blockquote>\n  <p>the FindFirstFile operation only finds one file (the name of the folder that it should be searching through).</p>\n</blockquote>\n\n<p>You are passing just the folder path by itself to <code>FindFirstFile()</code>, so only one entry will be reported, describing the folder itself.  What you need to do is append a <code>*</code> or <code>*.*</code> wildcard to the end of the path, then <code>FindFirstFile()</code>/<code>FindNextFile()</code> will enumerate the files and subfolders inside the folder.</p>\n\n<p>Aside from that, there are several other problems with the code.</p>\n\n<p>Even if the enumeration were working, you are not differentiating between files and subfolders.</p>\n\n<p>You are passing a bad value to the second parameter of <code>PathCchRemoveFileSpec()</code>.  You are passing in a <em>byte</em> count, but it expects a <em>character</em> count instead.</p>\n\n<p>You are not checking <code>FindFirstFile()</code> for failure before entering your loop, and you are not calling <code>FindClose()</code> after the loop is finished.</p>\n\n<p>And lastly, your code won't even compile as-is.  Your <code>vector</code> is storing <code>char*</code> values, but in order to pass a <code>WCHAR[]</code> to <code>FindFirstFile()</code>, <code>UNICODE</code> has to be defined, which means <code>FindFirstFile()</code> will map to <code>FindFirstFileW()</code> and <code>WIN32_FIND_DATA</code> will map to <code>WIN32_FIND_DATAW</code>, and thus the <code>cFileName</code> field will be a <code>WCHAR[]</code>.  The compiler will not allow a <code>WCHAR[]</code> (or <code>WCHAR*)</code> to be assigned to a <code>char*</code>.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>std::vector&lt;std::wstring&gt; fileArray;\n\n//Get location of program executable\nWCHAR path[MAX_PATH+1] = {0};\nGetModuleFileNameW(NULL, path, MAX_PATH);\n\n//Remove the executable file name from 'path' so that it refers to the folder instead\nPathCchRemoveFileSpec(path, MAX_PATH);\n\n// append a wildcard to the path\nPathCchAppend(path, MAX_PATH, L\"*.*\");\n\nWIN32_FIND_DATAW ffd;\nHANDLE hFind = FindFirstFileW(path, &amp;ffd);\nif (hFile != INVALID_HANDLE_VALUE)\n{\n    do\n    {\n        if ((ffd.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY) == 0)\n            fileArray.push_back(ffd.cFileName);\n    }\n    while (FindNextFileW(hFind, &amp;ffd));\n    FindClose(hFind);\n}\n</code></pre>\n"}], "owner": {"reputation": 1039, "user_id": 4067575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/662bb566549f23c6f58ae5942efbbc27?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4067575/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 34052360, "answer_count": 1, "score": 2, "last_activity_date": 1449088484, "creation_date": 1449087516, "last_edit_date": 1449087904, "question_id": 34052238, "link": "https://stackoverflow.com/questions/34052238/how-can-i-obtain-all-of-the-file-names-in-a-directory", "title": "How can I obtain all of the file names in a directory?", "body": "<p>I am writing a program in C++. I am trying to obtain all of the files in the folder where the program executable is located and store them in a vector. I have been told that the following code should work, but the FindFirstFile operation only finds one file (the name of the folder that it should be searching through). How can I change the code so that it looks through the folder properly?</p>\n\n<pre><code>std::vector&lt;char*&gt; fileArray;\n\n//Get location of program executable\nHMODULE hModule = GetModuleHandleW(NULL);\nWCHAR path[MAX_PATH];\nGetModuleFileNameW(hModule, path, MAX_PATH);\n\n//Remove the executable file name from 'path' so that it refers to the folder instead\nPathCchRemoveFileSpec(path, sizeof(path));\n\n//This code should find the first file in the executable folder, but it fails\n//Instead, it obtains the name of the folder that it is searching\nWIN32_FIND_DATA ffd;\nHANDLE hFind = INVALID_HANDLE_VALUE;\nhFind = FindFirstFile(path, &amp;ffd);\n\ndo\n{\n    //The name of the folder is pushed onto the array because of the previous code's mistake\n    //e.g. If the folder is \"C:\\\\MyFolder\", it stores \"MyFolder\"\n    fileArray.push_back(ffd.cFileName); //Disclaimer: This line of code won't add the file name properly (I'll get to fixing it later), but that's not relevant to the question\n} while (FindNextFile(hFind, &amp;ffd) != 0); //This line fails to find anymore files\n</code></pre>\n"}, {"tags": ["c++", "pointers", "linked-list", "stack"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1449087393, "post_id": 34052152, "comment_id": 55858647, "body": "That would happen if <code>topPtr</code> is <code>nullptr</code> or uninitialized. So 1: you need to make sure you initialize <code>topPtr = nullptr;</code> in the constructor and 2: you need to check stack depth on <code>Pop</code> (can&#39;t pop from an empty stack!)."}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1449087394, "post_id": 34052152, "comment_id": 55858648, "body": "<code>topPtr</code> is not initialized!"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449087823, "post_id": 34052152, "comment_id": 55858873, "body": "What do you expect <code>topPtr</code> to point to?"}], "answers": [{"tags": [], "owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "is_accepted": false, "score": 1, "last_activity_date": 1449234297, "creation_date": 1449234297, "answer_id": 34089084, "question_id": 34052152, "link": "https://stackoverflow.com/questions/34052152/c-pop-function-linked-list/34089084#34089084", "title": "C++ Pop Function Linked List", "body": "<p>First off, you don't initialize your pointers.</p>\n\n<pre><code>template&lt;class ItemType&gt;\nstruct NodeType\n{ \n    //...\n    NodeType() : next(nullptr) {} ///Initialize next so we can check for null\n};\n\ntemplate&lt;class ItemType&gt;\nclass Stack\n{ \npublic:\n    Stack() : topPtr(nullptr), stacklength(0) { } ///initialize\n    //...\n</code></pre>\n\n<p>Then, in your <code>Pop</code>, you need to check for an empty stack (you can't pop if there are no elements).</p>\n\n<pre><code>template&lt;class ItemType&gt;\nvoid Stack&lt;ItemType&gt;::Pop(ItemType &amp;x)\n{\n    if (!topPtr)\n    {\n        //Here, we need to decide how to handle this.\n        //One way would be to throw an exception,\n        //another way would be to change the method signature\n        //and return a bool.\n    }\n    ///...\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4355635, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ccffb77f7691e99bdfbfbc56b728456c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4355635/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567006350, "creation_date": 1449087245, "last_edit_date": 1566905207, "question_id": 34052152, "link": "https://stackoverflow.com/questions/34052152/c-pop-function-linked-list", "title": "C++ Pop Function Linked List", "body": "<p>I am writing a program that implements stacks as linked lists. The program complies but when I run it, it crashes. I ran the debugger and says unhandled exception when it gets inside the Pop() function and to the line \"topPtr = topPtr->next\". I was wondering if anyone noticed something in there that is causing this error. I attached the portion of main and the pop function that I believe i sbeing affected. thanks</p>\n\n<pre><code>template&lt;class ItemType&gt;\nstruct NodeType\n{ \n   ItemType info;\n   NodeType* next;\n};\n\ntemplate&lt;class ItemType&gt;\nclass Stack\n{ \nprivate:\n   int stacklength;\n   NodeType&lt;ItemType&gt;* topPtr; // It points to a singly-linked list\npublic: \n    void Pop(ItemType &amp;x);\n\ntemplate&lt;class ItemType&gt;\nvoid Stack&lt;ItemType&gt;::Pop(ItemType &amp;x)\n{\n    NodeType&lt;ItemType&gt;* tempPtr;\n    tempPtr = topPtr;\n    topPtr = topPtr-&gt;next;\n    delete tempPtr;\n    stacklength--;\n}\n\nint main()\n{\nStack &lt;int&gt; IntStack;\nint x;\nIntStack.Pop(x);\n}\n</code></pre>\n"}, {"tags": ["c++", "encryption", "codeblocks"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1449086461, "post_id": 34051918, "comment_id": 55858144, "body": "What is with all of the back slashes?"}, {"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "edited": false, "score": 1, "creation_date": 1449086669, "post_id": 34051918, "comment_id": 55858264, "body": "no idea but i fixed it sorry!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1449086739, "post_id": 34051918, "comment_id": 55858307, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449086986, "post_id": 34051918, "comment_id": 55858423, "body": "@nathanoliver thank you i will look through that! for now i know the problem is this equation"}, {"owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "edited": false, "score": 0, "creation_date": 1449087039, "post_id": 34051918, "comment_id": 55858447, "body": "decryptvalue[i] =(sum[i] - keyvalue2[i]) % 26;  it doesn&#39;t work for keys starting from s to z when i write H as the message"}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": true, "score": 0, "last_activity_date": 1449088076, "creation_date": 1449088076, "answer_id": 34052363, "question_id": 34051918, "link": "https://stackoverflow.com/questions/34051918/encryption-decryption-program-c/34052363#34052363", "title": "encryption/decryption program C++", "body": "<p>'Z' = 25\n'L' = 11</p>\n\n<p>Therefore (25 + 11) % 26 = 10</p>\n\n<p>When you go to decrypt it, (10 - 25) % 26 = -15</p>\n\n<p>You then take the absolute value for this, setting it to 15. Instead, the correct thing to do when the decrypted value is &lt; 0 is add 26. Which would turn -15 into 11. 11 = 'L'.</p>\n"}], "owner": {"reputation": 59, "user_id": 3950215, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e709ab106a709449fee78d5d79cf0625?s=128&d=identicon&r=PG&f=1", "display_name": "markos", "link": "https://stackoverflow.com/users/3950215/markos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4283, "favorite_count": 0, "accepted_answer_id": 34052363, "answer_count": 1, "score": 0, "last_activity_date": 1449088076, "creation_date": 1449086426, "last_edit_date": 1449086566, "question_id": 34051918, "link": "https://stackoverflow.com/questions/34051918/encryption-decryption-program-c", "title": "encryption/decryption program C++", "body": "<p>My homework is making an encrypting/decrypting program where the user enters the message and a key that has the same number of letters. \nThe program encrypts the message and shows it then decrypts the cipher and shows the message again.\ni have a problem decrypting the cipher, when i write HELLO and the key is JHBZA it shows HELPO instead of HELLO. what's the problem in the code?</p>\n\n<pre><code>       #include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    char message[100], key[100], encryption[100], decryption[100];\n    int msgvalue [100], msgvalue2 [100], keyvalue [100], keyvalue2 [100], sum[100], decryptvalue[100], decryptvalue2[100];\n    int i=0;\n\ncout &lt;&lt; \"Enter the message: \";\ncin.getline(message, 100);\nwhile(message[i] != '\\0')\n{\n\n    msgvalue[i] = message[i];\n    msgvalue2[i] = msgvalue[i] - 65;\n    i++;\n}\n\ni=0;\n\ncout &lt;&lt; \"Enter the key: \";\ncin.getline(key, 100);\nwhile(key[i] != '\\0')\n{\n    keyvalue[i] = key[i];\n    keyvalue2[i] = keyvalue[i] -65;\n    i++;\n}\n\n\n\ncout &lt;&lt; \"The message is: \" &lt;&lt; setw(15) &lt;&lt; message &lt;&lt; endl;\nfor(int i = 0; msgvalue[i] &gt; 1; i++)\n{\nsum [i] = msgvalue2[i] + keyvalue2[i];\nsum[i] = sum[i] % 26;\n}\n\n\n\ncout &lt;&lt; \"The cipher is: \" &lt;&lt; setw(12);\n\nfor(int i = 0; msgvalue[i] &gt;= 65 &amp;&amp; msgvalue[i] &lt;= 90; i++)\n{\n encryption[i] = sum[i] + 65;\n\n cout &lt;&lt; encryption[i];\n}\n\n\ncout &lt;&lt; endl &lt;&lt; \"The message again is: \" &lt;&lt; setw(12);\n\nfor(int i = 0; msgvalue[i] &gt;= 65 &amp;&amp; msgvalue[i] &lt;= 90; i++)\n{\ndecryptvalue[i] =(sum[i] - keyvalue2[i]) % 26;\n\nif (decryptvalue[i] &lt; 0)\n{\n    decryptvalue[i] = -decryptvalue[i] ;\n}\n\n\ndecryptvalue2[i]  = decryptvalue[i] + 65;\n\ndecryption[i] = decryptvalue2[i];\n\ncout &lt;&lt; decryption[i];\n\n}\n\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3fCK7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3fCK7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "arrays", "loops", "iteration", "trigonometry"], "comments": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1449086684, "post_id": 34051876, "comment_id": 55858273, "body": "Really can&#39;t tell what you&#39;re asking.  45 degrees is an <i>odd</i> angle yet seems very straight forward.   For other angles (like 25 degree) we will need to know more about your homework assignment. Edit:  Sorry I mean, &quot;problem statement&quot; :P"}], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 0, "creation_date": 1449087855, "post_id": 34052233, "comment_id": 55858886, "body": "So something like 2 one slots capable fulfill 2 angle values..  well it would make sense if the matrix were small.. but for bigger matrices this would be possible.."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 0, "creation_date": 1449088101, "post_id": 34052233, "comment_id": 55859002, "body": "In your posted question, there is a limit of 5 &quot;angles&quot; per quadrant.  Because of your &quot;pixel&quot; size or slot density, no other lines can be drawn.  So a vector of 5 angles containing lists (or sub-vectors) for each coordinate."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 2, "last_activity_date": 1449087497, "creation_date": 1449087497, "answer_id": 34052233, "question_id": 34051876, "link": "https://stackoverflow.com/questions/34051876/loop-through-a-2d-array-using-angle/34052233#34052233", "title": "Loop through a 2d array using angle", "body": "<p>A brute-force method is to calculate the equation of the line and then use a Bresenham related algorithm to choose the slots, boxes or points that should be selected.</p>\n\n<p>Think about your matrix as a screen of pixels.</p>\n\n<p>Some angles (in degrees) for you to think about:  30, 60, and 22.5.</p>\n\n<p>Maybe a better solution would be to constrain the angles to few in a set.  You could store the x,y positions for the few angles (such as 30 degrees).  This is based on the idea that many angles will select the same slots in the matrix.</p>\n"}], "owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 34052233, "answer_count": 1, "score": -2, "last_activity_date": 1449087497, "creation_date": 1449086264, "last_edit_date": 1449087484, "question_id": 34051876, "link": "https://stackoverflow.com/questions/34051876/loop-through-a-2d-array-using-angle", "title": "Loop through a 2d array using angle", "body": "<p>I am looking for method which is capable of outputting all the values in 2d array at a specified angle.. such that if I have an 2d array like this</p>\n\n<pre><code> _ _ _ _ _ \n|_|_|_|_|_|\n|_|_|_|_|_|\n|_|_|_|_|_|\n|_|_|_|_|_|\n|_|_|_|_|_|\n</code></pre>\n\n<p>And I provided it with an angle 0 it would output values at position.(row,col) (0,3),(1,3),(2,3).</p>\n\n<pre><code> _ _ _ _ _ \n|_|_|x|_|_|\n|_|_|x|_|_|\n|_|_|x|_|_|\n|_|_|_|_|_|\n|_|_|_|_|_|\n</code></pre>\n\n<p>The problem is though, how to compute the values for 25 degrees or other angles.. I seem to be able to do it for 0,90,180,270..  but those in between i can't see it.. I must be a simple trig identity, but yeah... It sucks to be bad at math... </p>\n"}, {"tags": ["c++", "xcode", "macos"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449088091, "post_id": 34051749, "comment_id": 55859001, "body": "have a look at any class that calls a virtual method in its destructor, or indeed calls any method in its destructor - because those methods may themselves call virtual methods. In the destructor of a base class, the derived class no longer exists, so virtual function calls will execute the base-class&#39;s version."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1449113379, "post_id": 34051749, "comment_id": 55868616, "body": "Usually there&#39;s a crash log report generated as that error is an exception <code>SIGABRT</code>. In event there isn&#39;t then maybe search your code for &quot;virtual&quot; and set your breakpoints on each; it should just be a matter of process by elimination."}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1454724222, "post_id": 34051749, "comment_id": 58187524, "body": "Set a breakpoint on <code>__cxa_pure_virtual</code>"}, {"owner": {"reputation": 74573, "user_id": 1175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/48c5dc5d3596150c1d9d906a687cf458?s=128&d=identicon&r=PG", "display_name": "Kristopher Johnson", "link": "https://stackoverflow.com/users/1175/kristopher-johnson"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1455044643, "post_id": 34051749, "comment_id": 58310353, "body": "@TavianBarnes I think you have the right answer. If you make it an actual answer, you can collect the bounty."}], "answers": [{"tags": [], "owner": {"reputation": 7193, "user_id": 1938798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196507edbb408bad2f2a08e33222bac7?s=128&d=identicon&r=PG", "display_name": "Craig Scott", "link": "https://stackoverflow.com/users/1938798/craig-scott"}, "is_accepted": false, "score": 1, "last_activity_date": 1454588043, "creation_date": 1454588043, "answer_id": 35200749, "question_id": 34051749, "link": "https://stackoverflow.com/questions/34051749/how-to-track-down-libcabi-dylib-pure-virtual-function-called-in-xcode/35200749#35200749", "title": "How to track down &quot;libc++abi.dylib: Pure virtual function called!&quot; in Xcode", "body": "<p>First up, it is mostly likely in a destructor where the call to a pure virtual function is being made rather than a constructor (not guaranteed, but likely).</p>\n\n<p>If an exception is being generated by your compiler when a pure virtual function is called, then you may be able to catch it by setting up your own terminate handler with <code>set_terminate()</code> (e.g. explained <a href=\"http://en.cppreference.com/w/cpp/error/set_terminate\" rel=\"nofollow\">here</a>). You could then set a breakpoint in your terminate handler to see exactly how your code is getting to that point.</p>\n\n<p>If an exception is not generated by your compiler when a pure virtual function is called (the more likely situation), then you could try adding your own dummy classes to help narrow down where the offending call is occurring. Simply have these dummy classes print something in their destructors and ensure they get deleted at times that help narrow down when things occur. For example, place one at the very start of your main() function and if you see its message printed then the offending call is happening when static objects are being deleted because that dummy object would be the last object deleted before main() returns. You could do similar things by adding such dummy classes as the first data member of other classes you can modify, but you need some idea of the objects being deleted leading up to the offending pure virtual function call.</p>\n\n<p>Finally, in case it is useful, you can actually provide an implementation for pure virtual functions and these can in fact be called (yes, this is legal C++). If you know the exact pure virtual function being called, then you could provide an implementation for it and put a breakpoint in there to catch the stack trace. This relies on you knowing exactly the pure virtual function being called though and your question suggests this might not be known.</p>\n"}, {"tags": [], "owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "is_accepted": true, "score": 13, "last_activity_date": 1455045379, "last_edit_date": 1495535561, "creation_date": 1455045379, "answer_id": 35300384, "question_id": 34051749, "link": "https://stackoverflow.com/questions/34051749/how-to-track-down-libcabi-dylib-pure-virtual-function-called-in-xcode/35300384#35300384", "title": "How to track down &quot;libc++abi.dylib: Pure virtual function called!&quot; in Xcode", "body": "<p>C++ standard libraries define a few \"ABI\" functions that implement low-level language/library features.  <code>libc++</code> has a nice document that describes them <a href=\"http://libcxxabi.llvm.org/spec.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>One of them is <code>__cxa_pure_virtual</code>, which is called when a program somehow invokes a pure-virtual function.  So if you set a breakpoint there, you should be able to find out where that's happening.</p>\n\n<p>Usually, pure virtual function calls happen when you call a virtual function from within a constructor or destructor, while the <code>vtable</code> is in an intermediate state.  See <a href=\"https://stackoverflow.com/a/99575/502399\">this answer</a> for more details.</p>\n"}], "owner": {"reputation": 74573, "user_id": 1175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/48c5dc5d3596150c1d9d906a687cf458?s=128&d=identicon&r=PG", "display_name": "Kristopher Johnson", "link": "https://stackoverflow.com/users/1175/kristopher-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5120, "favorite_count": 0, "accepted_answer_id": 35300384, "answer_count": 2, "score": 6, "last_activity_date": 1455045379, "creation_date": 1449085892, "last_edit_date": 1454678729, "question_id": 34051749, "link": "https://stackoverflow.com/questions/34051749/how-to-track-down-libcabi-dylib-pure-virtual-function-called-in-xcode", "title": "How to track down &quot;libc++abi.dylib: Pure virtual function called!&quot; in Xcode", "body": "<p>I have a multithreaded OS X application that uses a mixture of C++, Objective-C, and Swift.</p>\n\n<p>When my application shuts down, I see this in the Xcode debugger window:</p>\n\n<pre><code>libc++abi.dylib: Pure virtual function called!\n</code></pre>\n\n<p>I know that this error is typically caused by a call to a virtual function in a C++ class constructor or destructor. </p>\n\n<p>Is there an easy way to find where it is?  By \"Easy\", I mean \"not analyzing call trees for every line of every constructor and destructor of every class that has a virtual function\".</p>\n\n<p>I don't see a stack trace.  The debugger does not halt the program when this message is printed.  A message logged from my app delegate's <code>applicationDidTerminate</code> method precedes this message.</p>\n\n<p>I tried setting a breakpoint on \"All exceptions\" but unfortunately that breakpoint is hit often by code that uses lots of exceptions.  Is there some other symbol where I can put a breakpoint?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449085611, "post_id": 34051435, "comment_id": 55857673, "body": "<a href=\"http://www.boost.org/doc/libs/1_57_0/libs/type_traits/doc/html/boost_typetraits/reference/function_traits.html\" rel=\"nofollow noreferrer\">boost function traits</a> or <a href=\"https://functionalcpp.wordpress.com/2013/08/05/function-traits/\" rel=\"nofollow noreferrer\">other function traits</a> may help."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1449086343, "post_id": 34051435, "comment_id": 55858077, "body": "This has been answered several times before on stackoverflow. Basically the compiler cannot know in advance that <code>void(*)(int&amp;, float&amp;)</code> is convertible to <code>std::function&lt;void(int&amp;, float&amp;)&gt;</code>, because it can&#39;t see the constructors of the <code>function</code> specialization until it after deduces <code>Ts...</code>, but there is no way to deduce that in advance (for all the compiler knows, every specialization of <code>std::function</code> could be convertible from that function pointer)."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1449086265, "creation_date": 1449086265, "answer_id": 34051877, "question_id": 34051435, "link": "https://stackoverflow.com/questions/34051435/deduce-function-parameters-from-a-generic-function-lambda/34051877#34051877", "title": "Deduce function parameters from a generic function/lambda", "body": "<p>simply provide a converting overload:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nvoid test(int&amp; i, float&amp; f) {}\n\n\ntemplate &lt;class... Ts&gt;\nvoid update(std::function&lt;void(Ts&amp;...)&gt; f)\n{\n    //use Ts here\n}\n\n// this overload matches the function pointer and forwards the function\n// pointer in a std::function as required\ntemplate&lt;class... Ts&gt;\nvoid update(void (*fp)(Ts&amp;...))\n{\n    update(std::function&lt;void(Ts&amp;...)&gt;(fp));\n}\n\nint main()\n{\n    //error: no matching function for call to 'update'\n    update(test);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1449086274, "creation_date": 1449086274, "answer_id": 34051880, "question_id": 34051435, "link": "https://stackoverflow.com/questions/34051435/deduce-function-parameters-from-a-generic-function-lambda/34051880#34051880", "title": "Deduce function parameters from a generic function/lambda", "body": "<p>Of course you can :)</p>\n\n<p>Consider this:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nint test(int&amp; , float&amp; ) { return 0;}\ndouble test2(char* ) { return 0; }\n\ntemplate &lt;class F&gt;\nvoid update(F&amp;&amp; )\n{\n  typedef typename F::result_type R;\n}\n\ntemplate &lt;class R, class... ARGS&gt;\n  auto make_function(R (*f)(ARGS...)) {\n    return std::function&lt;R (ARGS...)&gt;(f);\n}\n\nint main()\n{\n\n  update(make_function(&amp;test));\n  update(make_function(&amp;test2));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 2, "last_activity_date": 1449086291, "creation_date": 1449086291, "answer_id": 34051884, "question_id": 34051435, "link": "https://stackoverflow.com/questions/34051435/deduce-function-parameters-from-a-generic-function-lambda/34051884#34051884", "title": "Deduce function parameters from a generic function/lambda", "body": "<p>When the arguments are function pointers this is easy enough to do: just add this overload:</p>\n\n<pre><code>template &lt;class R, class... Ts&gt;\nvoid update(R (*f)(Ts...)) {\n    update(std::function&lt;R(Ts...)&gt;(f));\n}\n</code></pre>\n\n<p>If you get something arbitrary, it is impossible to do:</p>\n\n<pre><code>struct foo {\n    template &lt;typename T0, Typename T1&gt;\n    void operator()(T0, T1);\n};\n</code></pre>\n\n<p>Which arguments are to be deduced?</p>\n"}], "owner": {"reputation": 13772, "user_id": 944430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d2b181af01c96927ac05eb864d6b7b6?s=128&d=identicon&r=PG", "display_name": "Maik Klein", "link": "https://stackoverflow.com/users/944430/maik-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "closed_date": 1449086460, "answer_count": 3, "score": 2, "last_activity_date": 1449086291, "creation_date": 1449084925, "question_id": 34051435, "link": "https://stackoverflow.com/questions/34051435/deduce-function-parameters-from-a-generic-function-lambda", "closed_reason": "Duplicate", "title": "Deduce function parameters from a generic function/lambda", "body": "<p>This is what I currently have</p>\n\n<pre><code>void test(int&amp; i, float&amp; f) {}\n\ntemplate &lt;class... Ts, class F&gt;\nvoid update(F&amp;&amp; f)\n{\n  //Use Ts here\n}\n\nint main()\n{\n  update&lt;int, float&gt;(test);\n}\n</code></pre>\n\n<p>But I need to explicitly call update with <code>&lt;int, float&gt;</code> because I want to use it for metaprogramming.</p>\n\n<p>It would be nice if this could be deduced automatically from the function</p>\n\n<pre><code>void test(int&amp; i, float&amp; f) {}\n\ntemplate &lt;class... Ts&gt;\nvoid update(std::function&lt;void(Ts&amp;...)&gt; f)\n{\n   //use Ts here\n}\nint main()\n{\n  //error: no matching function for call to 'update'\n  update(test);\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "char", "unsigned"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449084814, "post_id": 34051376, "comment_id": 55857227, "body": "You should make the constructors explicit, to avoid semantic complications."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1449085605, "post_id": 34051376, "comment_id": 55857669, "body": "I think the answer to the question is: get a working C++ compiler! The second overload is clearly better. If the compiler chooses the <code>unsigned</code> overload when converting from a character literal it is wrong. Can you provide a <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a> showing the problem?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449088994, "post_id": 34051376, "comment_id": 55859443, "body": "Re. the &quot;edit&quot;, of course <code>&#39;A&#39;</code> does not match <code>(char , unsigned int)</code> . You originally claimed the second parameter had a default value."}, {"owner": {"reputation": 11, "user_id": 5631918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebf7d2e295d27b9886e33f4dccbf365?s=128&d=identicon&r=PG&f=1", "display_name": "JDNoodle", "link": "https://stackoverflow.com/users/5631918/jdnoodle"}, "edited": false, "score": 0, "creation_date": 1449089223, "post_id": 34051376, "comment_id": 55859565, "body": "my bad didnt copy the default value."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1449089277, "post_id": 34051376, "comment_id": 55859605, "body": "You still don&#39;t have the default value in the header. Is that intentional"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449089374, "post_id": 34051376, "comment_id": 55859662, "body": "Also <code>Myclass::Myclass(const char, unsigned = 1);</code> is illegal code.  If this is a declaration it must be inside the class definition and not have <code>Myclass::</code> on the front.  If outside the class definition, it must have a function body."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449089619, "post_id": 34051376, "comment_id": 55859781, "body": "g++ 4.8.1 selects the <code>char</code> constructor for the code you have posted. Howver, if <code>Myclass a = &#39;A&#39;;</code> were in a different source file from the code<code>Myclass::Myclass(char, unsigned int = 10) { ... }</code>, it would select the <code>unsigned</code> constructor."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1449085234, "creation_date": 1449085234, "answer_id": 34051543, "question_id": 34051376, "link": "https://stackoverflow.com/questions/34051376/how-to-differentiate-between-char-literal-and-unsigned-int-as-a-parameter-for-a/34051543#34051543", "title": "How to differentiate between char literal and unsigned int as a parameter for a constructor", "body": "<p>Make the <code>unsigned</code> constructor <code>explicit</code>, something like:</p>\n\n<pre><code>Myclass {\n    explicit Myclass (unsigned);\n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1449085904, "post_id": 34051682, "comment_id": 55857822, "body": "Is MSVC++6.0 still the most popular environment around...?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1449086046, "post_id": 34051682, "comment_id": 55857898, "body": "@DietmarK&#252;hl: If memory serves, even it got this right. You&#39;d have to go back to something like MSVC++ 4.x (or maybe even 2.x) to get this one wrong."}, {"owner": {"reputation": 11, "user_id": 5631918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebf7d2e295d27b9886e33f4dccbf365?s=128&d=identicon&r=PG&f=1", "display_name": "JDNoodle", "link": "https://stackoverflow.com/users/5631918/jdnoodle"}, "edited": false, "score": 0, "creation_date": 1449086131, "post_id": 34051682, "comment_id": 55857952, "body": "I am using mingw on windows, so a port of gcc version 4.8.1."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 11, "user_id": 5631918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebf7d2e295d27b9886e33f4dccbf365?s=128&d=identicon&r=PG&f=1", "display_name": "JDNoodle", "link": "https://stackoverflow.com/users/5631918/jdnoodle"}, "edited": false, "score": 0, "creation_date": 1449086518, "post_id": 34051682, "comment_id": 55858176, "body": "@JDNoodle: what version (use <code>gcc -v</code> to find out)? If it says something smaller than 4.9.* I&#39;d recommend updating. The oldest gcc I have access to right now (3.4.6 from 2006, i.e., not quite as old as Jerry demands) chooses the correct overload."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1449085720, "creation_date": 1449085720, "answer_id": 34051682, "question_id": 34051376, "link": "https://stackoverflow.com/questions/34051376/how-to-differentiate-between-char-literal-and-unsigned-int-as-a-parameter-for-a/34051682#34051682", "title": "How to differentiate between char literal and unsigned int as a parameter for a constructor", "body": "<p>I'm not able to duplicate the problem you claim. I did a quick check with the following test code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo {\n    foo(const char, unsigned = 1) { std::cout &lt;&lt; \"Foo(char, unsigned)\"; }\n    foo(unsigned) {\n        std::cout &lt;&lt; \"Foo(unsigned)\";\n    }\n};\n\nint main() {\n    foo f = 'A';\n}\n</code></pre>\n\n<p>...and with the compilers I have handy (VC++ 2013, VC++ 2015, g++ 4.8, g++5.2), <code>foo(char, unsigned)</code> is always the one that's chosen (which is as I'd expect).</p>\n\n<p>What compiler are you using that selects the other overload for this input? I'd expect this from truly ancient compilers (that followed the C rule, where a character literal has type <code>int</code> rather than type <code>char</code>) but those have been obsolete for decades.</p>\n"}], "owner": {"reputation": 11, "user_id": 5631918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebf7d2e295d27b9886e33f4dccbf365?s=128&d=identicon&r=PG&f=1", "display_name": "JDNoodle", "link": "https://stackoverflow.com/users/5631918/jdnoodle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 34051682, "answer_count": 2, "score": 0, "last_activity_date": 1449089664, "creation_date": 1449084702, "last_edit_date": 1449089664, "question_id": 34051376, "link": "https://stackoverflow.com/questions/34051376/how-to-differentiate-between-char-literal-and-unsigned-int-as-a-parameter-for-a", "title": "How to differentiate between char literal and unsigned int as a parameter for a constructor", "body": "<p>My Code has 2 different constructors, one with just an unsigned as a parameter and another one with a char and an unsigned, where the unsigned has a default value.</p>\n\n<pre><code>Myclass::Myclass(unsigned);\nMyclass::Myclass(const char, unsigned = 1);\n</code></pre>\n\n<p>The problem ist that when I try the following: </p>\n\n<pre><code>Myclass a = 'A';\n</code></pre>\n\n<p>the constructor with only the unsigned as parameter is called(in this example with 65)</p>\n\n<p>How can i have the second constructor be called in this case?\nI also dont want values from 0-255 to only be interpreted as Ascii values.</p>\n\n<p>EDIT:</p>\n\n<p>Example code that displays error:</p>\n\n<p>Header:</p>\n\n<pre><code>#ifndef Myclass_H_\n#define Myclass_H_\n\nclass Myclass {\npublic:\n    Myclass(unsigned int = 10);\n    Myclass(const char*);\n    Myclass(char , unsigned int= 10);\n    Myclass(const Myclass&amp;);\n    virtual ~Myclass();\n};\n\n#endif /* Myclass_H_ */\n</code></pre>\n\n<p>Class body:</p>\n\n<pre><code>#include \"Myclass.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nMyclass::Myclass(unsigned int)\n{\n    cout &lt;&lt; \"unsigned\" &lt;&lt; endl;\n}\nMyclass::Myclass(const char*)\n{\n    cout &lt;&lt; \"pointer\" &lt;&lt; endl;\n}\nMyclass::Myclass(char , unsigned int)\n{\n    cout &lt;&lt; \"char\" &lt;&lt; endl;\n}\nMyclass::Myclass(const Myclass&amp;)\n{\n    cout &lt;&lt; \"copy\" &lt;&lt; endl;\n}\nMyclass::~Myclass(){}\n\nint main()\n{\n    Myclass a = 'A';\n    return 0;\n}\n</code></pre>\n\n<p>displays \"unsigned\" in console.</p>\n"}, {"tags": ["c++", "qt", "qnetworkaccessmanager"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1449085740, "post_id": 34051266, "comment_id": 55857730, "body": "Did you build Qt yourself?"}, {"owner": {"reputation": 303, "user_id": 4030395, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nazarii Plebanskii", "link": "https://stackoverflow.com/users/4030395/nazarii-plebanskii"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1449086813, "post_id": 34051266, "comment_id": 55858339, "body": "@jpo38, I downloaded installation file and it installed Qt."}, {"owner": {"reputation": 1170, "user_id": 601626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/df9fc90ce9f3aee1fe9d03b31c8b2f72?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/601626/rob"}, "edited": false, "score": 1, "creation_date": 1449089190, "post_id": 34051266, "comment_id": 55859551, "body": "So it looks like something might be wrong w.r.t. linking in your build scripts somewhere, or in your environment (library paths) at runtime.  If it happens again, then you may want to set the <a href=\"http://www.bnikolic.co.uk/blog/linux-ld-debug.html\" rel=\"nofollow noreferrer\">LD_DEBUG</a> environment variable on Linux or the <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/dyld.1.html\" rel=\"nofollow noreferrer\">DYLD</a> environment variables on Mac OS X to get you a bit more information on which paths shared libraries symbols are being searched for and how the symbols are resolved. (Which operating system are you on?)"}, {"owner": {"reputation": 1170, "user_id": 601626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/df9fc90ce9f3aee1fe9d03b31c8b2f72?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/601626/rob"}, "edited": false, "score": 0, "creation_date": 1449090401, "post_id": 34051266, "comment_id": 55860241, "body": "Ah, OK. I&#39;m less familiar with Windows, but the <a href=\"https://technet.microsoft.com/en-us/sysinternals/bb795533.aspx\" rel=\"nofollow noreferrer\">SysInternals</a> utilities are pretty good, and looking at Process Monitor may help get more information. I haven&#39;t used <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">DependencyWalker</a> in ages, but it looks like that&#39;s recommended on SO for getting this sort of information as well."}, {"owner": {"reputation": 303, "user_id": 4030395, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nazarii Plebanskii", "link": "https://stackoverflow.com/users/4030395/nazarii-plebanskii"}, "reply_to_user": {"reputation": 1170, "user_id": 601626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/df9fc90ce9f3aee1fe9d03b31c8b2f72?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/601626/rob"}, "edited": false, "score": 0, "creation_date": 1449091116, "post_id": 34051266, "comment_id": 55860623, "body": "@Rob, ok, thanks very much for information."}], "owner": {"reputation": 303, "user_id": 4030395, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nazarii Plebanskii", "link": "https://stackoverflow.com/users/4030395/nazarii-plebanskii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449087878, "creation_date": 1449084300, "last_edit_date": 1449087878, "question_id": 34051266, "link": "https://stackoverflow.com/questions/34051266/segmentation-fault-in-qt-when-allocating-memory", "title": "Segmentation fault in qt, when allocating memory", "body": "<p>After running, my app crashes. In debug mode on line <code>mManager = new QNetworkAccessManager(this);</code> appears window, informing about segmentation fault:<br /><br />\n<a href=\"https://i.stack.imgur.com/tCZhC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tCZhC.png\" alt=\"Segmentation fault window\"></a></p>\n\n<p>Also, in Application Output I've got many strings of:</p>\n\n<blockquote>\n  <p>can't find linker symbol for virtual table for 'QNetworkAccessManager'\n  value   found 'QCoreApplication::qt_static_metacall(QObject*,\n  QMetaObject::Call, int, void**)' instead</p>\n</blockquote>\n\n<p>Giving my code below.</p>\n\n<p><strong>myclass.h</strong></p>\n\n<pre><code>class MyClass: public QObject\n{\n    Q_OBJECT\npublic:\n    explicit MyClass(QObject *parent = 0);\n\npublic slots:\n    void parseJSON(QNetworkReply *response);\n\nprivate:\n    QNetworkAccessManager *mManager;\n};\n</code></pre>\n\n<p><strong>myclass.cpp</strong></p>\n\n<pre><code>MyClass::MyClass(QObject *parent) :\n    QObject(parent)\n   ,mManager{nullptr}\n{\n    mManager = new QNetworkAccessManager(this);\n    connect(mManager, SIGNAL(finished(QNetworkReply*)),\n            this, SLOT(parseJSON(QNetworkReply*)));\n    std::cout &lt;&lt; \"Getting object from server...\" &lt;&lt; std::endl;\n    mManager-&gt;get(QNetworkRequest(QUrl(\"http://some.url.com/cpp.json\")));\n}\n\nvoid MyClass::parseJSON(QNetworkReply* response)\n{\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    MyClass proc;\n\n    return a.exec();\n}\n</code></pre>\n\n<p><strong>UPDATE(1):</strong> this problems occurred after ~10th build, before it didn't occur.<br />\n<strong>UPDATE(2):</strong> after cleaning and rebuilding the project everything worked properly. I don't understand, what was the problem.</p>\n"}, {"tags": ["c++", "c", "sorting", "struct"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1449084320, "post_id": 34051144, "comment_id": 55856957, "body": "As an FYI: C != C++ and you should generally only tag the language you are writing/compiling (the answers may vary greatly)."}, {"owner": {"reputation": 689, "user_id": 662593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e745cd82e8f6f2832568ee8a67e61661?s=128&d=identicon&r=PG", "display_name": "StahlRat", "link": "https://stackoverflow.com/users/662593/stahlrat"}, "edited": false, "score": 0, "creation_date": 1449084408, "post_id": 34051144, "comment_id": 55857014, "body": "any particular reason why you don&#39;t use std::sort ?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449084374, "post_id": 34051207, "comment_id": 55856991, "body": "I don&#39;t believe i&#39;m allowed to make another function for this. It has to be in the void sortData(struct Data yearData[], int sz) function.."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "reply_to_user": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449084467, "post_id": 34051207, "comment_id": 55857045, "body": "Fair enough.  Just embed the logic in your main function.  Make a <code>cmp</code> variable that defaults to <code>0</code> then use the <code>if</code> statements from the <code>yearDataCmp</code> function.  Instead of returning a value, simply do <code>cmp = -1</code> or <code>cmp = 1</code> accordingly."}], "tags": [], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "is_accepted": false, "score": 0, "last_activity_date": 1449084113, "creation_date": 1449084113, "answer_id": 34051207, "question_id": 34051144, "link": "https://stackoverflow.com/questions/34051144/selection-sort-for-struct/34051207#34051207", "title": "Selection Sort for struct", "body": "<p>Make a comparison function, then use its result.  The comparison function should return 0 if the structs are equal, -1 if the left should go first, +1 if the right should go first.</p>\n\n<p>It will look something like:</p>\n\n<pre><code>int yearDataCmp(struct Data left, struct Data right) {\n    if ( left.month &lt; right.month ) { return -1; }\n    if ( left.month &gt; right.month ) { return  1; }\n    if ( left.day   &lt; right.day   ) { return -1; }\n    if ( left.day   &gt; right.day   ) { return  1; }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449084955, "post_id": 34051277, "comment_id": 55857301, "body": "ahhhh that looks like what I want it to do. The reason i don&#39;t swap the entire struct is because there is more members than just the months and days in it."}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085067, "post_id": 34051277, "comment_id": 55857389, "body": "this is what the struct looks like in its complete form:"}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085094, "post_id": 34051277, "comment_id": 55857407, "body": "struct Data{        int day;        int month;        int year;        float high;        float low;        float precipitation;        char condition;     };"}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "reply_to_user": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085190, "post_id": 34051277, "comment_id": 55857457, "body": "I understand but you want to sort the elements according to their month/day. if you only move the dates around, you are actually corrupting the data. I am sure this is not what you want."}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085391, "post_id": 34051277, "comment_id": 55857555, "body": "ahhhh, so if you just use yearData[ ] for the swap comparisons that will perform the correct sort for months and days not just months? i don&#39;t know why I&#39;m struggling to understand this as much as I am when it seems so simple"}, {"owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085461, "post_id": 34051277, "comment_id": 55857586, "body": "ahhhhh because if i don&#39;t swap all the months and days will change but the data that they are related to will be messed up which makes it corrupt data?"}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "reply_to_user": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "edited": false, "score": 0, "creation_date": 1449085512, "post_id": 34051277, "comment_id": 55857626, "body": "exactly, you got it now!"}], "tags": [], "owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "is_accepted": false, "score": 1, "last_activity_date": 1449084763, "last_edit_date": 1449084763, "creation_date": 1449084345, "answer_id": 34051277, "question_id": 34051144, "link": "https://stackoverflow.com/questions/34051144/selection-sort-for-struct/34051277#34051277", "title": "Selection Sort for struct", "body": "<p>Try this:</p>\n\n<pre><code>...\nif((yearData[j].month &lt; yearData[m].month) || \n   ((yearData[j].month == yearData[m].month) &amp;&amp; \n    (yearData[j].day &lt; yearData[m].day))) {\n    m = j;\n}\n...\n</code></pre>\n\n<p>However, I am not sure I understand your swap. You should swap the entire struct, not the its members one by one. Consider this:</p>\n\n<pre><code>if (m != i) {\n  struct Data tmp = yearData[i];\n  yearData[i] = yearData[m];\n  yearData[m] = tmp;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5565034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d27b365f6809f8d14830a1b1e231ec0b?s=128&d=identicon&r=PG&f=1", "display_name": "bp131313", "link": "https://stackoverflow.com/users/5565034/bp131313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1175, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522020298, "creation_date": 1449083903, "last_edit_date": 1522020298, "question_id": 34051144, "link": "https://stackoverflow.com/questions/34051144/selection-sort-for-struct", "title": "Selection Sort for struct", "body": "<p>i'm having an issue with the logic surrounding using selection sort for a struct array. for example say this is my struct :</p>\n\n<pre><code>struct data {\n    int month\n    int day\n    ..\n    .. }\n</code></pre>\n\n<p>now what I want to do is sort the months and days. I believe I know how to do this for the months, yet am having a hard time understanding how to implement this for days. here is my code for the months so far:</p>\n\n<pre><code>void sortData(struct Data yearData[], int sz)\n    int i, j, m;\n    int temp;\n\n    for (i = 0; i &lt; sz; i++) {\n        m = i;\n        for (j = i + 1; j &lt; sz; j++)\n            if (yearData[j].month &lt; yearData[m].month) {\n                m = j;\n             }\n\n        if (m != i) {\n            temp = yearData[i].month;\n            yearData[i].month = yearData[m].month;\n            yearData[m].month = temp;\n        }\n    }\n}\n</code></pre>\n\n<p>I think i want to check to see if the months are the same then look at days and sort them as well. I just don't know if it would be correct to add another iteration to this sort. Thanks!</p>\n"}, {"tags": ["c++", "windows", "debugging"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1449083716, "post_id": 34051057, "comment_id": 55856578, "body": "There is no log event for a failed memory allocation. You don&#39;t even know if <code>malloc()</code> is even performing an OS-level allocation to begin with, it could be using a private internal memory pool instead and failing if the pool does not have adequate memory."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449083743, "post_id": 34051057, "comment_id": 55856593, "body": "<code>malloc</code> does not normally go to Windows, which assigns an amount of memory on the program&#39;s heap when the program is executed. 18MB is not a very large amount of memory. Please post the the <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> which illustrates the fault. Memory allocation faults are almost always caused by a coding error."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 2, "creation_date": 1449084170, "post_id": 34051057, "comment_id": 55856856, "body": "Are you testing the return for NULL whenever you call malloc?"}, {"owner": {"reputation": 27, "user_id": 5547128, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-okE8mWF6YuU/AAAAAAAAAAI/AAAAAAAAAAA/APg7fdnNa5g/photo.jpg?sz=128", "display_name": "Camiel Coppelmans", "link": "https://stackoverflow.com/users/5547128/camiel-coppelmans"}, "edited": false, "score": 0, "creation_date": 1449084312, "post_id": 34051057, "comment_id": 55856946, "body": "It actually allocates and deallocates a lot of memory chunks with sizes that ranges from 1MB to 18MB. That is way my suspicion is more related to memory fragmentation, than actually running out of free memory."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1449084365, "post_id": 34051057, "comment_id": 55856980, "body": "&#39;probably returning NULL pointer&#39; - are you saying you do not check the result of <code>malloc()</code>? Also, is it C or C++?"}, {"owner": {"reputation": 889, "user_id": 5127698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5f9fa2e9d5310e3cae38a4ef3552b4?s=128&d=identicon&r=PG&f=1", "display_name": "JonatanE", "link": "https://stackoverflow.com/users/5127698/jonatane"}, "edited": false, "score": 2, "creation_date": 1449084525, "post_id": 34051057, "comment_id": 55857074, "body": "&#39;It is <b>probably</b> returning a NULL pointer, but the machine still have plenty of free memory.&#39;  Why don&#39;t you just check the return value of malloc in your code and perform the logging yourself? That way you can be sure that it was a failing malloc that caused the crash and proceed to investigate why."}, {"owner": {"reputation": 27, "user_id": 5547128, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-okE8mWF6YuU/AAAAAAAAAAI/AAAAAAAAAAA/APg7fdnNa5g/photo.jpg?sz=128", "display_name": "Camiel Coppelmans", "link": "https://stackoverflow.com/users/5547128/camiel-coppelmans"}, "edited": false, "score": 0, "creation_date": 1449085011, "post_id": 34051057, "comment_id": 55857347, "body": "The code is not checking the return value of the malloc call, I will surely add this to the code. The problem that it only happens in one particular server deployed in one of our customers, so it is difficult to try new versions of the application. It is an old code (about 10 years old) of a very widely deployed system. We never saw this crash before, but in this one server."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1449099834, "post_id": 34051057, "comment_id": 55864691, "body": "If you&#39;ve got a memory dump, you should be able to at a minimum distinguish between a null pointer deference and other sorts of memory access errors.  I think you should also be able to tell whether the problem is occurring in your code - under the circumstances it is just about as likely to be in third-party code that is being loaded into your process for one reason or another."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1449155176, "post_id": 34051057, "comment_id": 55891628, "body": "You say &quot;This is not a question about code errors&quot;, but I believe it is.  To directly answer your question, no Windows does not log failed memory allocation because it is not the OS doing the allocation but the C standard library.  However, the reason I believe you&#39;re asking this question is really because the program in question is not allocating/ freeing memory properly.  First make sure that the return value of <code>malloc</code>/<code>calloc</code>/<code>realloc</code> are checked each and every time.  Then use a memory checking tool to find out where it&#39;s misbehaving."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1449155204, "post_id": 34051057, "comment_id": 55891642, "body": "See <a href=\"http://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows\">this link</a> for some memory checking tools for Windows."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1449174849, "post_id": 34051057, "comment_id": 55904467, "body": "I&#39;ve rewritten the question to be better suited for SO, and voted to reopen.  (It might still be considered too broad in which case it probably won&#39;t attract enough reopen votes.)  You can revert my edit if you wish but the literal answer to the question as originally posted is just &quot;no&quot; so there&#39;s probably not much point. :-)"}, {"owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "edited": false, "score": 1, "creation_date": 1449181678, "post_id": 34051057, "comment_id": 55908351, "body": "To answer the question, &quot;How can I narrow this down&quot;, the simplest thing is a stack dump. If the app is unmanaged you can open the dump file with Windbg and enter <code>kv</code> (or one of its many variants). The second thing is to disassemble the code before the faulting instruction: you can use <code>ub</code> or <code>u eip-40</code>. If the app is managed you can use the sos debug extension. I googled just now and got a number of hits on SO."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449184406, "post_id": 34051057, "comment_id": 55909567, "body": "This is one of the most difficult situations in the industry.  Ideally you want to be able to go on-site, and bring a laptop with you with an array of debug tools (e.g. debug version of your code that traces all allocations), or even step through your code in the debugger on the system in question."}], "answers": [{"tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 1, "last_activity_date": 1449184194, "last_edit_date": 1449184194, "creation_date": 1449084853, "answer_id": 34051418, "question_id": 34051057, "link": "https://stackoverflow.com/questions/34051057/how-do-i-troubleshoot-an-illegal-memory-access-crash-that-only-occurs-on-a-clien/34051418#34051418", "title": "How do I troubleshoot an illegal memory access crash that only occurs on a client&#39;s system?", "body": "<p>No. The Windows Even Log is something you'd have to setup and use in your code, usually for a windows service.</p>\n\n<p>Please show a code snippet demonstrating how you are allocating memory.</p>\n\n<p>It should be practice to error check a call to malloc by checking if the value returned is NULL.</p>\n\n<p>If you are not sure which call to malloc is failing, you're best bet is to invest in a good profiler. I've had a good amount of success using Intel Parallel Studio, but it isn't cheap. Also keep in mind that every profiler I've ever tried fails to work over COM boundries.</p>\n\n<p>\"Illegal memory access\" is not necessarily a failure to allocate memory. It could be all manner of things. You need to break down your software into testable units and pinpoint the problem before worrying about how to resolve it.</p>\n\n<p>Edit (after question revision):\nYou are really limiting yourself with the constraint \"We cannot alter the code\"</p>\n\n<p>You should begin by doing a search in every file for malloc or new and assure the result is checked.</p>\n\n<p>You also have the option of turning optimization off, exporting symbols, creating a build, installing debugging tools, and remotely debugging while stepping through the code to narrow down where the trouble is. However, that is probably only an option if you have a list of steps to reproduce. Usually these kinds of memory problems are random in nature due to a bug in the code. It could just show up in one build and not another, but the bug is still there.</p>\n\n<p>You can also profile remotely, but profiling an entire application or service yields near unusable results. Software should be broken down into unit testable parts and in turn into integration testable parts. If it was not, this is the price you pay (even if it wasn't your fault).</p>\n"}, {"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1449174249, "post_id": 34058286, "comment_id": 55904125, "body": "The OP is the vendor, see the comments."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1449174933, "post_id": 34058286, "comment_id": 55904517, "body": "(I&#39;ve now rewritten the question to include that information and to focus on the more answerable aspect.  If it gets reopened you may want to adjust your answer accordingly, though I think it already addresses the question as rewritten fairly well.)"}], "tags": [], "owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "is_accepted": false, "score": 1, "last_activity_date": 1449119310, "creation_date": 1449119310, "answer_id": 34058286, "question_id": 34051057, "link": "https://stackoverflow.com/questions/34051057/how-do-i-troubleshoot-an-illegal-memory-access-crash-that-only-occurs-on-a-clien/34058286#34058286", "title": "How do I troubleshoot an illegal memory access crash that only occurs on a client&#39;s system?", "body": "<p>This is a classic debug situation. You have an immediate failure (illegal memory access) and you need to work back to a root cause. If you were debugging in assembly you'd most likely see a register with an invalid memory ptr that was being used to access memory. After identifying the register you'd work your way backward to see where that register got its value from. </p>\n\n<p>If it got its value from a memory allocation call then your theory might be right.</p>\n\n<p>If it got its value from another register or memory location for which you don't know what its value should be, then you have an \"intermediate cause\". The second register or memory location was the cause of the first register having an invalid memory ptr.</p>\n\n<p>You keep working your way back through intermediate causes until you find the root cause - something that is broken that someone could fix. You may have to go up the call stack a long way to find the next intermediate cause or go a long way back in a particular function. If you're unlucky the root cause may be a memory overwrite or a race condition or something else that gets in the way of what otherwise is mostly a deductive process.</p>\n\n<p>If you can do source debugging (probably not if you have a third party app), you can avoid dealing with assembly language. </p>\n\n<p>BTW, if you do have a third party app, chances are good there won't be anything you can do to fix the problem on your own, even if you do find a root cause. You'll likely need an update from the software vendor. </p>\n\n<p>If the software is open source you do have more options. You can download the source, fix errors, and rebuild. Or you can push a fix back into the OSS project.</p>\n"}], "owner": {"reputation": 27, "user_id": 5547128, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-okE8mWF6YuU/AAAAAAAAAAI/AAAAAAAAAAA/APg7fdnNa5g/photo.jpg?sz=128", "display_name": "Camiel Coppelmans", "link": "https://stackoverflow.com/users/5547128/camiel-coppelmans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1449321390, "creation_date": 1449083599, "last_edit_date": 1449174703, "question_id": 34051057, "link": "https://stackoverflow.com/questions/34051057/how-do-i-troubleshoot-an-illegal-memory-access-crash-that-only-occurs-on-a-clien", "title": "How do I troubleshoot an illegal memory access crash that only occurs on a client&#39;s system?", "body": "<p>I am attempting to troubleshoot a problem with our application that only occurs on a particular server belonging to one of our customers.</p>\n\n<p>The application sometimes crashes, and the core files are showing an illegal memory access.  I suspect the reason for that is some kind of failure with the malloc function.  It is probably returning a NULL pointer, but when this occurs the machine still has plenty of free memory.  My theory is that the memory was too fragmented, and when it tried to allocate some more memory (18MB), it may have failed.</p>\n\n<p>What steps can I take to troubleshoot this problem?  For example, does Windows log any information when a memory allocation fails? Or does it just ignore it?</p>\n\n<p>The server in question is running Windows Server 2008 R2 and the Windows Event Log service is running.</p>\n\n<p>At this point I can't include any code, because I don't know what part of the application is causing the problem.  How can I narrow this down?</p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 0, "creation_date": 1449255836, "post_id": 34051021, "comment_id": 55943433, "body": "AFAIK no. Can&#39;t you explain the value in the variable&#39;s documentation directly? And what each value decides should be documented in the constructor IMHO..."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 1, "creation_date": 1449321187, "post_id": 34051021, "comment_id": 55961717, "body": "I haven&#39;t seen a way to do it either, I&#39;m using @snippet and put the relevant tags around the initializers. Output is like code / preformatted test, so probably not 100% like would like it but no double / missing parts."}, {"owner": {"reputation": 1077, "user_id": 221226, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/655bc8b8b7cc222f27122484a5cce34f?s=128&d=identicon&r=PG", "display_name": "binaryguy", "link": "https://stackoverflow.com/users/221226/binaryguy"}, "edited": false, "score": 0, "creation_date": 1449814807, "post_id": 34051021, "comment_id": 56178851, "body": "There is no CTOR since these instances are global. They are used as parameters and hence, changes are likely. And whoever changes them wants as little as possible effort regarding documentation."}, {"owner": {"reputation": 1077, "user_id": 221226, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/655bc8b8b7cc222f27122484a5cce34f?s=128&d=identicon&r=PG", "display_name": "binaryguy", "link": "https://stackoverflow.com/users/221226/binaryguy"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1449815831, "post_id": 34051021, "comment_id": 56179278, "body": "@albert This could be an option, although I didn&#39;t get it working ad hoc. I keep trying thanks so far!"}, {"owner": {"reputation": 1077, "user_id": 221226, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/655bc8b8b7cc222f27122484a5cce34f?s=128&d=identicon&r=PG", "display_name": "binaryguy", "link": "https://stackoverflow.com/users/221226/binaryguy"}, "edited": false, "score": 0, "creation_date": 1449821700, "post_id": 34051021, "comment_id": 56181898, "body": "I solved it using \\dontinclude command <a href=\"https://www.stack.nl/~dimitri/doxygen/manual/commands.html#cmddontinclude\" rel=\"nofollow noreferrer\">stack.nl/~dimitri/doxygen/manual/commands.html#cmddontinclud&zwnj;&#8203;e</a>"}], "owner": {"reputation": 1077, "user_id": 221226, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/655bc8b8b7cc222f27122484a5cce34f?s=128&d=identicon&r=PG", "display_name": "binaryguy", "link": "https://stackoverflow.com/users/221226/binaryguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491400010, "creation_date": 1449083477, "question_id": 34051021, "link": "https://stackoverflow.com/questions/34051021/c-doxygen-is-it-possible-to-document-a-struct-initialization-to-expose-the-ac", "title": "C++/Doxygen: Is it possible to document a struct initialization to expose the actual values?", "body": "<p>Let's say I have a global instance of a struct s/w in my code. I need the user to be capable of knowing the values used for the struct initialization. is there a way to do this?  </p>\n\n<pre><code>/*!\n    \\brief I want the values of this instance of the struct to be exposed via doxygen not the struct itself.\n    */\n    const myStruct xyz = {\n    1, ///&lt; This value decides..\n    2, ///&lt; bla\n    3  ///&lt; even more bla\n    }\n</code></pre>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1449083110, "post_id": 34050880, "comment_id": 55856240, "body": "You should step through your code with the debugger and find out where it throws the exception.  That will help you figure out what is wrong."}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 5, "creation_date": 1449083133, "post_id": 34050880, "comment_id": 55856255, "body": "click &quot;Retry&quot; then see the call stack on the debugger"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1449083949, "post_id": 34050880, "comment_id": 55856720, "body": "@erip: actually, <code>std::string</code>s <i>are</i> null terminated! See 21.4.5 [string.access] paragraphs 1 and 2 which essentially state that <code>s.[s.size()] == cT()</code> for <code>s</code> being of type <code>std::basic_string&lt;cT&gt;</code>."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1449084130, "post_id": 34050880, "comment_id": 55856831, "body": "Note that <code>find()</code> return <code>std::string::npos</code> when it fails to find a suitable location. There is no guarantee that <code>npos</code> has the value <code>-1</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1449084768, "post_id": 34050880, "comment_id": 55857199, "body": "@DietmarK&#252;hl Actually npos is declared as <code>static const size_type npos = -1;</code> in 21.4(5) [basic.string]"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449084981, "post_id": 34050880, "comment_id": 55857328, "body": "@NathanOliver: thanks! I should actually check my assertions, too...!"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1449085206, "post_id": 34050880, "comment_id": 55857464, "body": "<a href=\"https://ideone.com/UPZJXX\" rel=\"nofollow noreferrer\">Apparently OP&#39;s code is OK</a>. Just compile with <code>-std=c++11</code> and you&#39;re good."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1449092611, "post_id": 34050880, "comment_id": 55861446, "body": "@DietmarK&#252;hl that was added in C++11, whereas OP&#39;s screenshot indicates use of a compiler from 2010"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449092771, "post_id": 34050880, "comment_id": 55861516, "body": "@M.M: when I commented, the screenshot wasn&#39;t there."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1449084469, "creation_date": 1449084469, "answer_id": 34051306, "question_id": 34050880, "link": "https://stackoverflow.com/questions/34050880/program-gets-expression-string-subscript-out-of-range/34051306#34051306", "title": "Program gets &quot;Expression: string subscript out of range&quot;", "body": "<p>Unless I really wanted to make my own life difficult, I'd do this quite a bit differently. First, I'd use a <code>std::stringstream</code> to break the input string into words to process. Then, I'd use <code>std::rotate</code> to move the first character of the string to the end. Finally, I'd wrap that all in <code>std::transform</code> to manage applying the function to each word in succession.</p>\n\n<pre><code>std::string line;\nstd::getline(std::cin, line);\n\nstd::stringstream buffer(line);\nstd::stringstream result;\n\nstd::transform(std::istream_iterator&lt;std::string&gt;(buffer),\n    std::istream_iterator&lt;std::string&gt;(),\n    std::ostream_iterator&lt;std::string&gt;(result, \" \"),\n    [](std::string s) { \n        std::rotate(s.begin(), s.begin() + 1, s.end()); \n        s += \"ay\"; \n        return s; \n    });\n</code></pre>\n\n<p>Of course, this doesn't know the special rules for things like words that start with vowels or letter pairs like <code>sh</code> or <code>ch</code>, but it looks like that's outside the scope of the task at hand.</p>\n\n<p>For more on <code>std::rotate</code>, I recommend watching some of Sean Parent's videos.</p>\n"}], "owner": {"reputation": 11, "user_id": 5631862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d486021afff72aac6a6a13d10b0247dc?s=128&d=identicon&r=PG&f=1", "display_name": "Andy C", "link": "https://stackoverflow.com/users/5631862/andy-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449084508, "creation_date": 1449083000, "last_edit_date": 1449084508, "question_id": 34050880, "link": "https://stackoverflow.com/questions/34050880/program-gets-expression-string-subscript-out-of-range", "title": "Program gets &quot;Expression: string subscript out of range&quot;", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nstring Latin(string words)\n{\n\nstring strWord, strSentence = \"\";\nint length = 0, index = 0;\nwhile (words[index] != '\\0')\n{\n    if(words.find(' ', index) != -1)\n    {\n        length = words.find(' ', index);\n        length -= index;\n        strWord = words.substr(index,length);\n        strWord.insert(length, \"ay\");\n        strWord.insert(length, 1, words[index]);\n        strWord.erase(0,1);\n        index += length +1;\n    }\n    else\n    {\n        strWord = words.substr(index);\n        length = strWord.length();\n        strWord.insert(length, \"ay\");\n        strWord.insert(length,1,words[index]);\n        strWord.erase(0,1);\n        index = words.length();\n    }\n\n    strSentence += (strWord + \" \");\n}\n\nreturn strSentence;\n}\n\nint main()\n{\n    string str;\n    getline(cin,str);\n    str = Latin(str);\n    cout&lt;&lt;str&lt;&lt;endl;\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I get this error that says <a href=\"https://i.stack.imgur.com/hOe9e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hOe9e.png\" alt=\"http://imgur.com/OI0TgBG\"></a></p>\n\n<p>I have no clue what to do. As I am new to this, this is a program that is suppose to ask for user input of a length of words and translate them into pig Latin. Any help would be greatly appreciated. </p>\n"}, {"tags": ["c++", "linux", "pthreads", "pthread-join"], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 1005423, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0b7GH.jpg?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/1005423/nico"}, "edited": false, "score": 0, "creation_date": 1449130158, "post_id": 34052244, "comment_id": 55874933, "body": "Thank you !!!! I read about the cancellation type, but didn&#39;t get the asynchronous type makes the stuff. Thanks!"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1449087533, "creation_date": 1449087533, "answer_id": 34052244, "question_id": 34050804, "link": "https://stackoverflow.com/questions/34050804/how-to-cancel-a-pthread-without-cancellation-point/34052244#34052244", "title": "How to cancel a pthread without cancellation point", "body": "<p>Whether a thread can be cancelled depends on its cancellation <em>state</em> and <em>type</em>. The default state is <code>enabled</code>. So that's fine. But the default type is <code>deferred</code>. That means when you send the thread a cancellation request, it's deferred until it reaches a cancellation point. Since your thread doesn't do anything in the empty loop, it doesn't reach a cancellation point at all. Hence, it doesn't respond to <code>pthread_cancel()</code>.</p>\n\n<p>You can set the cancellation type of the thread to <code>PTHREAD_CANCEL_ASYNCHRONOUS</code> which will typically make the thread exit. Call </p>\n\n<pre><code>pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, 0);\n</code></pre>\n\n<p>before the loop.</p>\n\n<p>Or you can call one of the functions that's a cancellation point. For example, do <code>fflush(stdout);</code> inside the loop.</p>\n\n<p>POSIX list a number of functions as cancellation point. See <a href=\"http://man7.org/linux/man-pages/man7/pthreads.7.html\" rel=\"nofollow\">cancellation points</a> for such a list.</p>\n\n<p>I can't make any comment on the \"3rd party\" library that doesn't respond to exiting threads with the limited information you have given. </p>\n"}], "owner": {"reputation": 182, "user_id": 1005423, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0b7GH.jpg?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/1005423/nico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 1, "accepted_answer_id": 34052244, "answer_count": 1, "score": 0, "last_activity_date": 1449088070, "creation_date": 1449082718, "last_edit_date": 1449088070, "question_id": 34050804, "link": "https://stackoverflow.com/questions/34050804/how-to-cancel-a-pthread-without-cancellation-point", "title": "How to cancel a pthread without cancellation point", "body": "<p>I use a 3rd-party-library (dcerpc) for my application being a rpc server.\nLet's say the 3rd party function are in the namespace third.</p>\n\n<p>I call third::listen in a thread, in order to listen for incoming requests.</p>\n\n<p>\"Third\" provides all the mechanisms to interrupt this listen and properly exit the thread, but either it doesn't work, or I don't do it the correct way.\nI first try everything with the library tools (demo sample, mail-list, browse the source code to understand...) but with no success.</p>\n\n<p>So I try an alternative: violently kill the listening thread.\nBut third::listen has no cancellation point, I guess.</p>\n\n<p>So this code (I simulate third::listen with listen function above):</p>\n\n<pre><code>void* listen(void*)\n{\n    cout &lt;&lt; \"listening for calls....\" &lt;&lt; endl;\n\n    while (true) {}\n    printf (\"Server stoppped listening\\n\");\n    return 0;\n}\n\n\nint main()\n{\n\n    pthread_t thread = 0;\n\n    int res = pthread_create(&amp;thread, 0, listen, 0);\n    cout &lt;&lt; \"pthread_create res: \" &lt;&lt; res &lt;&lt; endl;\n\n    sleep(1);\n\n    bool isThreadRunning = (pthread_tryjoin_np(thread, 0) != 0);\n    cout &lt;&lt; \"Thread is running: \" &lt;&lt; isThreadRunning &lt;&lt; endl;\n\n    res = pthread_cancel(thread);\n    cout &lt;&lt; \"pthread_cancel res: \" &lt;&lt; res &lt;&lt; endl;\n\n    sleep(1);\n\n    isThreadRunning = (pthread_tryjoin_np(thread, 0) != 0);\n    cout &lt;&lt; \"Thread is running: \" &lt;&lt; isThreadRunning &lt;&lt; endl;\n\n    res = pthread_join(thread, 0);\n    cout &lt;&lt; \"pthread_join res: \" &lt;&lt; res &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>will output:</p>\n\n<pre><code>pthread_create res: 0\nlistening for calls....\n\nThread is running: 1\npthread_cancel res: 0\nThread is running: 1\n</code></pre>\n\n<p>and pthread_join(thread, 0) blocks (logic because no cancellation point).</p>\n\n<p>My question: how to kill this thread !!</p>\n\n<p>I tried with signals, but it stops my whole process, not only the thread.</p>\n\n<p>My last try will be to isolate the listening in a dedicated fork process, but in my project context, it's really a pain to fork (that's another story).</p>\n\n<p>Thanks a lot for any help.</p>\n\n<p>Nicolas.</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2013"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449085074, "post_id": 34050788, "comment_id": 55857395, "body": "It should be <code>Mat img = ...</code> instead of <code>Mat image = ... </code> Is just a typo?"}, {"owner": {"reputation": 3, "user_id": 5525400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5a20d104750451cda37260705c184c?s=128&d=identicon&r=PG&f=1", "display_name": "JGF1994", "link": "https://stackoverflow.com/users/5525400/jgf1994"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449085873, "post_id": 34050788, "comment_id": 55857807, "body": "it does&#39;t matter is like a variabile name"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449085945, "post_id": 34050788, "comment_id": 55857847, "body": "In one case it will compile, in the other it won&#39;t. I think it matters after all... :D"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449086654, "post_id": 34050788, "comment_id": 55858257, "body": "However, aside from that the code is perfectly fine. You probably have some configuration issue. Without further configuration settings or specific error messages, it&#39;s very hard to tell."}, {"owner": {"reputation": 3, "user_id": 5525400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5a20d104750451cda37260705c184c?s=128&d=identicon&r=PG&f=1", "display_name": "JGF1994", "link": "https://stackoverflow.com/users/5525400/jgf1994"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449086717, "post_id": 34050788, "comment_id": 55858298, "body": "yes i&#39;ve made an childhood mistake but i&#39;re recorrected and same error"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449086875, "post_id": 34050788, "comment_id": 55858369, "body": "Please post the library directory, and the addition dependencies"}, {"owner": {"reputation": 3, "user_id": 5525400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5a20d104750451cda37260705c184c?s=128&d=identicon&r=PG&f=1", "display_name": "JGF1994", "link": "https://stackoverflow.com/users/5525400/jgf1994"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449087156, "post_id": 34050788, "comment_id": 55858515, "body": "i don&#39;t get it what you say. I ve linked all libraries of OpenCV well because i&#39;ve tested another program and it worked"}], "owner": {"reputation": 3, "user_id": 5525400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5a20d104750451cda37260705c184c?s=128&d=identicon&r=PG&f=1", "display_name": "JGF1994", "link": "https://stackoverflow.com/users/5525400/jgf1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449085315, "creation_date": 1449082669, "last_edit_date": 1449085315, "question_id": 34050788, "link": "https://stackoverflow.com/questions/34050788/acces-violation-during-debugging-an-opencv-project", "title": "Acces violation during debugging an OpenCV project", "body": "<p>I'm trying to run an Visual Studio 2013 program with OpenCV library but it doesn't work because I have an Access violation executing location. I've read other posts but it still doesn't work.</p>\n\n<p>Here is full code of program:</p>\n\n<pre><code>#include \"opencv2\\highgui\\highgui.hpp\"\nusing namespace cv;\nint main(int argc, char **argv)\n{ \n     Mat image = imread(argv[1], -1);\n     if (img.empty())\n         return -1;\n     namedWindow(\"Example\", WINDOW_AUTOSIZE);\n     imshow(\"Example\", img);\n     waitKey(0);\n     destroyWindow(\"Example\");\n}\n</code></pre>\n\n<p>Error message:</p>\n\n<p><img src=\"https://i.stack.imgur.com/p4cO4.jpg\" alt=\"\"></p>\n"}, {"tags": ["c++", "marmalade"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 4423818, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001654237309/picture?type=large", "display_name": "Pavel Zhdanov", "link": "https://stackoverflow.com/users/4423818/pavel-zhdanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1449135445, "creation_date": 1449135445, "answer_id": 34062409, "question_id": 34050759, "link": "https://stackoverflow.com/questions/34050759/could-i-use-marmalade-to-create-service/34062409#34062409", "title": "Could I use marmalade to create Service", "body": "<p>I understand so, services is an additional functionality which implemented differently on each platform, and Marmalade's abstraction layer does not provide cross-platform access to this functionality, but you can use Extensions Development Kit (EDK) for implement this. <a href=\"http://docs.madewithmarmalade.com/display/MD/Extensions+Development+Kit+EDK\" rel=\"nofollow\">http://docs.madewithmarmalade.com/display/MD/Extensions+Development+Kit+EDK</a></p>\n"}], "owner": {"reputation": 325, "user_id": 4697952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/068aac36745cfeca9ef54dbeb62204f5?s=128&d=identicon&r=PG&f=1", "display_name": "Planet_Earth", "link": "https://stackoverflow.com/users/4697952/planet-earth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 34062409, "answer_count": 1, "score": 0, "last_activity_date": 1449135445, "creation_date": 1449082570, "question_id": 34050759, "link": "https://stackoverflow.com/questions/34050759/could-i-use-marmalade-to-create-service", "title": "Could I use marmalade to create Service", "body": "<p>As the title says, could I use marmalade to create a <a href=\"http://developer.android.com/guide/components/services.html\" rel=\"nofollow\">service</a>? Also could I create a service(or alternative) for multiple platforms(IOS and Windows Phone)? Just to note the language I'm planning to use is C++.</p>\n"}, {"tags": ["c++", "stringstream"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 4, "creation_date": 1449082677, "post_id": 34050729, "comment_id": 55855997, "body": "Sounds like an XY problem."}, {"owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1449083102, "post_id": 34050729, "comment_id": 55856233, "body": "Agreed.  Would deleting the second half of my question clear that up to focus on X?"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1449083147, "post_id": 34050729, "comment_id": 55856259, "body": "Maybe if you describe what you&#39;re trying to do generally we can help you come up with an appropriate solution."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449083406, "post_id": 34050729, "comment_id": 55856400, "body": "This has an easy enough solution that it may be the correct approach."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1449083885, "post_id": 34050943, "comment_id": 55856681, "body": "Just a suggestion: Use <code>auto</code>."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1449083957, "post_id": 34050943, "comment_id": 55856725, "body": "@Deduplicator <code>auto</code> is only available since C++11. There is no guarantee that OP is using it and it really doesn&#39;t add much."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1449084031, "post_id": 34050943, "comment_id": 55856767, "body": "Well, it would have kept you from using a wrong type on first try, at least. That&#39;s enough to use it."}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 2, "creation_date": 1449181093, "post_id": 34050943, "comment_id": 55908051, "body": "Note: As of C++11, <code>seekg()</code> clears the EOF bit before doing its thing, but pre-C++11, it inhibits the seek. So older platforms beware. There&#39;s also a potential efficiency problem in the &quot;re-read&quot; approach if the next item is a 10k character block of MIME data."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1449201026, "post_id": 34050943, "comment_id": 55914237, "body": "@metal Duly noted. The workaround would be to manually unset the bit before doing the seek, which I have edited into my answer. The OP is implying that his string will always contain data after the identifier, but of course you are right that percautions should be taken. I still prefer my answer and Remy&#39;s over Johnathan&#39;s because it applies to all istreams rather than just stringstreams. Generality at the cost of efficiency."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 4, "last_activity_date": 1449201021, "last_edit_date": 1449201021, "creation_date": 1449083240, "answer_id": 34050943, "question_id": 34050729, "link": "https://stackoverflow.com/questions/34050729/how-to-read-from-the-same-location-in-a-stringstream-twice/34050943#34050943", "title": "How to read from the same location in a stringstream twice?", "body": "<p>You can get the get pointer in the stream before you get the identifier and restore the position if the identifier is wrong:</p>\n\n<pre><code>std::string identifier;\nstd::stringstream::pos_type pos = sstr.tellg();\nsstr &gt;&gt; identifier;\nif( identifier == \"SomeKeyword\") {\n    // process the the rest of the string stream using method 1\n} else {\n   sstr.clear();\n   sstr.seekg(pos, sstr.beg);\n   // process the stream using method 2\n}\n</code></pre>\n\n<p>The <a href=\"http://www.cplusplus.com/reference/istream/istream/tellg/\" rel=\"nofollow\">page on <code>tellg</code> at cplusplus.com</a> has a very nice example. The purpose of calling <a href=\"http://www.cplusplus.com/reference/ios/ios/clear/\" rel=\"nofollow\"><code>clear()</code></a> is to ensure that <code>seekg</code> works even if the previous read reached end-of-file. This is only necessary for versions of C++ before C++ 11. If you are using C++11 or newer, <code>seekg</code> clears the EOF bit automatically and you should not include the line with <code>clear()</code> in your solution. Thanks to @metal for pointing this out.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1449083460, "post_id": 34050996, "comment_id": 55856433, "body": "This is almost a verbatim copy of my answer except the nifty link to <code>seekg</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1449083508, "post_id": 34050996, "comment_id": 55856456, "body": "Your answer had not been posted yet when I was still writing and testing my answer. I saw yours after posting mine.  In my case, I thing using <code>pos_type</code> instead of <code>int</code> is more accurate, and using <code>beg</code> is redundant."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449083549, "post_id": 34050996, "comment_id": 55856481, "body": "Fair enough. I fixed my type, although I think beg improves readability. Your links are better too."}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 3, "creation_date": 1449181110, "post_id": 34050996, "comment_id": 55908065, "body": "Note: As of C++11, <code>seekg()</code> clears the EOF bit before doing its thing, but pre-C++11, it inhibits the seek. So older platforms beware. There&#39;s also a potential efficiency problem in the &quot;re-read&quot; approach if the next item is a 10k character block of MIME data."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 5, "last_activity_date": 1449083402, "creation_date": 1449083402, "answer_id": 34050996, "question_id": 34050729, "link": "https://stackoverflow.com/questions/34050729/how-to-read-from-the-same-location-in-a-stringstream-twice/34050996#34050996", "title": "How to read from the same location in a stringstream twice?", "body": "<p>Use the stream's <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/tellg\"><code>tellg()</code></a> and <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/seekg\"><code>seekg()</code></a> methods, eg:</p>\n\n<pre><code>std::string identifier;\nstd::stringstream::pos_type pos = sstr.tellg();\nsstr &gt;&gt; identifier;\nif (identifier == \"SomeKeyword\")\n{\n    //process the rest of the string stream using method 1\n}\nelse\n{\n    // back up to before we tried to read \"identifier\n    sstr.seekg(pos);\n    // process the stream using method 2\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "edited": false, "score": 2, "creation_date": 1449171639, "post_id": 34073001, "comment_id": 55902689, "body": "looks at user&#39;s score ... o.0"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "edited": false, "score": 1, "creation_date": 1449172222, "post_id": 34073001, "comment_id": 55903015, "body": "@pauld I answered this one question about how to display hearts in a game and voila!"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 2, "creation_date": 1449173883, "post_id": 34073001, "comment_id": 55903906, "body": "This solution identifies a potential flaw in other answers with regard to EOF. (Note: <code>seekg()</code> clears the EOF bit before doing its thing, as of C++11, but pre-C++11, it inhibits the seek. There&#39;s also a potential efficiency problem in the &quot;re-read&quot; approach if the next item is a 10k character block of MIME data.) Nonetheless, I cannot endorse the conversion here of the <i>whole stream</i> to a <code>std::string</code> and then comparing part of it -- what if it&#39;s 100k of MIME data? That&#39;s an expensive conversion just for a compare. Also, this solution takes too much mental parsing for my liking."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1449176105, "post_id": 34073001, "comment_id": 55905156, "body": "@metal I&#39;d like to say that the compiler will protect us from this, but that&#39;s not guaranteed. I&#39;d also like to say that whenever <a href=\"http://stackoverflow.com/q/29007753/2642059\"><code>string_view</code></a> becomes a reality that this will be included. I was thinking at pulling directly from the buffer to avoid the incursion of the <code>string</code> creation, but it&#39;s hard to guarantee that the buffer has been filled :( Any better suggestions from you?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1449188167, "post_id": 34073001, "comment_id": 55910872, "body": "Instead of using <code>str().compare()</code> for peeking, you might try using <code>rdbuf()-&gt;sgetn()</code> instead to read <code>identifier.length()</code> number of characters into a local buffer without advancing the stream position, and then compare that buffer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1449417031, "post_id": 34073001, "comment_id": 55987514, "body": "You are not allocating any memory for <code>prefix</code>.  You are passing an uninitialized pointer to <code>sgetn()</code> for it to write to. <code>prefix</code> needs to be at least <code>identifier.length()</code> characters in size. Per <a href=\"http://en.cppreference.com/w/cpp/io/basic_streambuf/sgetn\" rel=\"nofollow noreferrer\">documentation</a>: &quot;<i>Reads count characters from the input sequence and <b>stores them into a character array</b> pointed to by s</i>&quot;."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1449427068, "post_id": 34073001, "comment_id": 55990951, "body": "@RemyLebeau Ugh, thanks wrong link. What I was actually trying to do was use a <code>char[]</code> for the first argument. Strangely everything goes haywire when I do this. I can do a <code>strcpy</code> into a <code>char[]</code> no problem, why should this be any different? <a href=\"http://ideone.com/ROrfxs\" rel=\"nofollow noreferrer\">ideone.com/ROrfxs</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1449494417, "post_id": 34073001, "comment_id": 56016829, "body": "@RemyLebeau Finally got to an IDE and found the problem. It looks like <code>sgetn</code> doesn&#39;t add a trailing <code>&#39;\\0&#39;</code> character. Which is... strange. Anyway, this fixes it: <a href=\"http://ideone.com/QKGQlY\" rel=\"nofollow noreferrer\">ideone.com/QKGQlY</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1449497408, "post_id": 34073001, "comment_id": 56018764, "body": "@RemyLebeau Asked for clarification on why the string is not null terminated here: <a href=\"http://stackoverflow.com/questions/34135565/sgetn-doesnt-null-terminate-string\" title=\"sgetn doesnt null terminate string\">stackoverflow.com/questions/34135565/&hellip;</a>"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 2, "last_activity_date": 1449165458, "creation_date": 1449165458, "answer_id": 34073001, "question_id": 34050729, "link": "https://stackoverflow.com/questions/34050729/how-to-read-from-the-same-location-in-a-stringstream-twice/34073001#34073001", "title": "How to read from the same location in a stringstream twice?", "body": "<p>You can directly inspect a <code>stringstream</code>'s contents. That may be a clearer approach than extracting and rolling back, as you aren't guaranteed your <code>stringstream</code>s condition after extraction. For example, if your string only contained one word, extracting it would have set the <code>ios_base::iostate::eofbit</code> flag.</p>\n\n<p>You could accomplish inspecting the <code>stringstream</code>'s contents like this:</p>\n\n<pre><code>if(sstr.str().compare(0, identifier.length(), identifier) == 0) {\n    sstr.ignore(identifier.length());\n    // process the the rest of the string stream using method 1\n} else {\n    // process the stream using method 2\n}\n</code></pre>\n\n<p>One risk this takes on is, if you were depending upon the <code>stringstream</code>'s extraction operator to eliminate leading white-space you'll need to purge before doing the <code>compare</code>. This can be done by before your <code>if</code>-block with the command <code>sstr &gt;&gt; skipws;</code>.</p>\n\n<p>While I do consider this method safer, it should be noted that if you are dependent upon leading white-space being in <code>sstr</code> for \"method 2\" then you should use one of the other answers (but you should also reconsider your use of <code>stringstream</code> since all the extraction operators first eat white-space.)</p>\n"}], "owner": {"reputation": 2389, "user_id": 1991678, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a9f5d4caa1c8059acdb6582c8429bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "default", "link": "https://stackoverflow.com/users/1991678/default"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2920, "favorite_count": 0, "accepted_answer_id": 34050943, "answer_count": 3, "score": 3, "last_activity_date": 1449201021, "creation_date": 1449082452, "last_edit_date": 1449083326, "question_id": 34050729, "link": "https://stackoverflow.com/questions/34050729/how-to-read-from-the-same-location-in-a-stringstream-twice", "title": "How to read from the same location in a stringstream twice?", "body": "<p>I have an instance of <code>stringstream</code> that I am reading from.  At a certain point of getting data out of the stream, I need to read an identifier that may or may not be there. The logic is something like this:</p>\n\n<pre><code>std::string identifier;\nsstr &gt;&gt; identifier;\nif( identifier == \"SomeKeyword\" )\n    //process the the rest of the string stream using method 1\nelse\n   // back up to before we tried to read \"identifier\" and process the stream using method 2\n</code></pre>\n\n<p>How can I achieve the above logic?</p>\n"}, {"tags": ["c++", "linux", "sockets"], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1449082982, "post_id": 34050796, "comment_id": 55856179, "body": "Also, learn to love to check the actual error returned from function by analyzing ERRNO."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1449083363, "post_id": 34050796, "comment_id": 55856378, "body": "This might be a good occasion to suggest a <code>do { ... } while (...);</code> loop to avoid code duplication."}, {"owner": {"reputation": 696, "user_id": 2129644, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8feb0a34801725042b245cd1158fda48?s=128&d=identicon&r=PG", "display_name": "Olof", "link": "https://stackoverflow.com/users/2129644/olof"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449083498, "post_id": 34050796, "comment_id": 55856450, "body": "Well, that was actually kind of awkward  @SergeyA I can&#39;t belive that they haven&#39;t thought us this at university. Thanks, good to know."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 696, "user_id": 2129644, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8feb0a34801725042b245cd1158fda48?s=128&d=identicon&r=PG", "display_name": "Olof", "link": "https://stackoverflow.com/users/2129644/olof"}, "edited": false, "score": 0, "creation_date": 1449083598, "post_id": 34050796, "comment_id": 55856507, "body": "@Olof, judging from personal experience, they will not teach you anything good computer-science wise in the university. Everytime they do, it is a very lucky exception. You see, really good programmers are seldom computer science teachers for multiple reasons."}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1449083659, "post_id": 34050796, "comment_id": 55856550, "body": "Other than the error message, the first socket function is not needed. Set received &gt; 0 before while and it will work fine. No need for do...while"}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": true, "score": 2, "last_activity_date": 1449082687, "creation_date": 1449082687, "answer_id": 34050796, "question_id": 34050685, "link": "https://stackoverflow.com/questions/34050685/linux-sockets-only-reciving-first-chunk-of-data/34050796#34050796", "title": "linux sockets only reciving first chunk of data", "body": "<p>Why don't you use the same arguments for recv?</p>\n\n<p>works: recv(<strong>clientSocket</strong>, buffer, this->packageLength,0)</p>\n\n<p>doesn't work recv(<strong>sock</strong>, buffer, this->packageLength,0)</p>\n\n<p>Change sock to <strong>clientSocket</strong>.</p>\n"}], "owner": {"reputation": 696, "user_id": 2129644, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8feb0a34801725042b245cd1158fda48?s=128&d=identicon&r=PG", "display_name": "Olof", "link": "https://stackoverflow.com/users/2129644/olof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 34050796, "answer_count": 1, "score": 0, "last_activity_date": 1449082687, "creation_date": 1449082305, "last_edit_date": 1449082576, "question_id": 34050685, "link": "https://stackoverflow.com/questions/34050685/linux-sockets-only-reciving-first-chunk-of-data", "title": "linux sockets only reciving first chunk of data", "body": "<p>I have two programs, on is server and only listening and the client is talking. I send 1mbytes of data in chunks of 64bytes each. I will get the first chunk of 64byte but then my server exits because it failed to get other data. My client is sending all of the data.</p>\n\n<pre><code>void ServerLinux::Receive(){\n\n    int sock = 0;\n    struct sockaddr_in server;\n    char buffer[this-&gt;packageLength];\n\n    if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) &lt; 0) {\n        this-&gt;Die(\"Failed to create socket\");\n    }\n\n    memset(&amp;server, 0, sizeof(server));\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = htonl(INADDR_ANY);\n    server.sin_port = htons(this-&gt;port);\n\n    if(bind(sock, (struct sockaddr *) &amp;server, sizeof(server)) &lt; 0){\n        this-&gt;Die(\"Failed to bind the server socket\");\n    }\n    if(listen(sock, 1) &lt; 0){\n        this-&gt;Die(\"Failed to listen on server socket\");\n    }\n\n    int clientSocket = 0;\n    struct sockaddr_in client;\n    socklen_t size = sizeof(client);\n    if((clientSocket = accept(sock, (struct sockaddr *) &amp;client, &amp;size)) &lt; 0){\n        this-&gt;Die(\"Failed to accept client\");\n    }\n\n    int received = -1;\n\n    //This is fine data is recived\n    if((received = recv(clientSocket, buffer, this-&gt;packageLength,0)) &lt; 0){\n        this-&gt;Die(\"Failed to receive initial bytes from client\");\n    }\n    std::cout &lt;&lt; \"Received!\" &lt;&lt; std::endl;\n\n    //Data is not received in this while loop\n    while(received &gt; 0){\n        if((received = recv(sock, buffer, this-&gt;packageLength,0)) &lt; 0){\n            this-&gt;Die(\"Failed to receive additional bytes frin client\");\n        }\n        std::cout &lt;&lt; \"Received!\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "boost", "point-cloud-library"], "comments": [{"owner": {"reputation": 61, "user_id": 5631476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qkcVS.png?s=128&g=1", "display_name": "Mauro", "link": "https://stackoverflow.com/users/5631476/mauro"}, "edited": false, "score": 0, "creation_date": 1449222712, "post_id": 34050665, "comment_id": 55922978, "body": "I&#39;ve tried to <b>initialize the variable <code>viewer</code> in the main function</b> and the mouse acquisition worked: <code>boost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; viewer (new pcl::visualization::PCLVisualizer (&quot;3D Viewer&quot;));</code>, in my opinion the assertion failed because the pointer passed to the callback <code>mouseEventOccured()</code> was not correctly initialized. But the <b>keyboard acquisition</b> still <b>doesn&#39;t work</b>."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5631476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qkcVS.png?s=128&g=1", "display_name": "Mauro", "link": "https://stackoverflow.com/users/5631476/mauro"}, "edited": false, "score": 0, "creation_date": 1449587232, "post_id": 34131526, "comment_id": 56065140, "body": "I tried your code in my computer but the keyboard acquisition still not work. I have clicked on the pointcloud&#39;s render window to make it in focus, and I tried to push &#39;r&#39; and &#39;h&#39;: the keys are never catched by the function <code>keyboardEventOccurred</code> and they are acquired by the IDE I used to run the program. I have also tried to change the keys to press, but nothing changed. I am running the program on a <b>OS X El Capitan</b>, maybe this is an OS X problem. Thanks anyway for the help."}, {"owner": {"reputation": 379, "user_id": 1816078, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e33d618688462c9ef1373dcefc0edbc6?s=128&d=identicon&r=PG", "display_name": "Victor Lamoine", "link": "https://stackoverflow.com/users/1816078/victor-lamoine"}, "reply_to_user": {"reputation": 61, "user_id": 5631476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qkcVS.png?s=128&g=1", "display_name": "Mauro", "link": "https://stackoverflow.com/users/5631476/mauro"}, "edited": false, "score": 0, "creation_date": 1449612574, "post_id": 34131526, "comment_id": 56081370, "body": "I reported this issue on the official bug tracker: <a href=\"https://github.com/PointCloudLibrary/pcl/issues/1465\" rel=\"nofollow noreferrer\">github.com/PointCloudLibrary/pcl/issues/1465</a>"}], "tags": [], "owner": {"reputation": 379, "user_id": 1816078, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e33d618688462c9ef1373dcefc0edbc6?s=128&d=identicon&r=PG", "display_name": "Victor Lamoine", "link": "https://stackoverflow.com/users/1816078/victor-lamoine"}, "is_accepted": false, "score": 3, "last_activity_date": 1449484604, "creation_date": 1449484604, "answer_id": 34131526, "question_id": 34050665, "link": "https://stackoverflow.com/questions/34050665/pcl-visualizer-example-cannot-acquire-keyboard-and-mouse-events/34131526#34131526", "title": "PCL Visualizer example: Cannot acquire keyboard and mouse events", "body": "<p>You do not show any code so it's hard to tell what's wrong in your program.</p>\n\n<p>Here is a working example, tested on Ubuntu 14.04 with PCL latest trunk (VTK trunk):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;pcl/visualization/pcl_visualizer.h&gt;\n\nvoid keyboardEventOccurred(const pcl::visualization::KeyboardEvent &amp;event, void* viewer_void)\n{\n  boost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; viewer = *static_cast&lt;boost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; *&gt;(viewer_void);\n  if (event.getKeySym() == \"r\" &amp;&amp; event.keyDown())\n    std::cout &lt;&lt; \"'r' was pressed\" &lt;&lt; std::endl;\n  if (event.getKeySym() == \"h\" &amp;&amp; event.keyDown())\n    std::cout &lt;&lt; \"'h' was pressed\" &lt;&lt; std::endl;\n}\n\nvoid mouseEventOccurred(const pcl::visualization::MouseEvent &amp;event, void* viewer_void)\n{\n  boost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; viewer = *static_cast&lt;boost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; *&gt;(viewer_void);\n\n  if (event.getButton() == pcl::visualization::MouseEvent::LeftButton &amp;&amp;\n      event.getType() == pcl::visualization::MouseEvent::MouseButtonRelease)\n    std::cout &lt;&lt; \"Left mouse button released at position (\" &lt;&lt; event.getX() &lt;&lt; \", \" &lt;&lt; event.getY() &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n  pcl::visualization::PCLVisualizer::Ptr viewer(new pcl::visualization::PCLVisualizer);\n  viewer-&gt;addCoordinateSystem();\n  viewer-&gt;registerKeyboardCallback(keyboardEventOccurred, (void*)&amp;viewer);\n  viewer-&gt;registerMouseCallback(mouseEventOccurred, (void*)&amp;viewer);\n  viewer-&gt;spin();\n}\n</code></pre>\n\n<p>Note that some key-strokes are already used by the PCL visualizer for some actions (press <code>h</code> for more details), but it does not prevent you from using them as well.</p>\n"}], "owner": {"reputation": 61, "user_id": 5631476, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qkcVS.png?s=128&g=1", "display_name": "Mauro", "link": "https://stackoverflow.com/users/5631476/mauro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3971, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1449484604, "creation_date": 1449082223, "question_id": 34050665, "link": "https://stackoverflow.com/questions/34050665/pcl-visualizer-example-cannot-acquire-keyboard-and-mouse-events", "title": "PCL Visualizer example: Cannot acquire keyboard and mouse events", "body": "<p>I'm following this tutorial in the official PCL documentation for the class PCLVisualizer:</p>\n\n<p><a href=\"http://pointclouds.org/documentation/tutorials/pcl_visualizer.php\" rel=\"nofollow\">http://pointclouds.org/documentation/tutorials/pcl_visualizer.php</a></p>\n\n<p>and I'm having troubles with the keyboard acquisition: when I select the render window, where the pointcloud is displayed, and try to press \"r\" or \"q\", nothing happens and when I try to press the mouse left button, the following text is displayed:</p>\n\n<p><code>Left mouse button released at position (413, 475)</code></p>\n\n<p>and the following error is raised (at runtime):</p>\n\n<pre><code>Assertion failed: (px != 0), function operator-&gt;, file /usr/local/include/boost/smart_ptr/shared_ptr.hpp, line 687.\nAbort trap: 6\n</code></pre>\n\n<p>I saw that this kind of error happens when you don't initialize the <code>boost::shared_ptr</code> in the declaration of the variable. But in the code listed in the documentation the variable is well defined, so I suppose that the problem concerns the <code>shared_ptr.hpp</code> library, or it isn't?</p>\n\n<p>I've searched over the Internet for a solution, but I haven't found nothing that could solve the issue.</p>\n\n<p>Is there someone that is capable of acquiring keystrokes in the pointcloud's render window by running it on OS X?</p>\n\n<p>If the question is not clear, please let me know.\nThanks a lot for any help or information!</p>\n"}, {"tags": ["c#", "c++", "marshalling"], "comments": [{"owner": {"reputation": 1132, "user_id": 1361096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3abbd3a4d9ed06ec8b82e16683696ad0?s=128&d=identicon&r=PG", "display_name": "Manuel Amstutz", "link": "https://stackoverflow.com/users/1361096/manuel-amstutz"}, "edited": false, "score": 1, "creation_date": 1449082462, "post_id": 34050619, "comment_id": 55855867, "body": "Why can&#39;t you use unsafe code? You already call C++"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449082769, "post_id": 34050619, "comment_id": 55856058, "body": "<i>Is this even possible?</i> --  Why would you think it&#39;s not possible?  Can&#39;t C# call Windows API functions using <code>pinvoke</code> that do exactly as you describe, i.e. C# passes a pointer to a buffer, and the API fills the buffer?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1449082942, "post_id": 34050619, "comment_id": 55856155, "body": "Yes, that&#39;s possible.  Doesn&#39;t require unsafe code either.  What kind of help you need to get there is <i>completely</i> unguessable."}, {"owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "edited": false, "score": 0, "creation_date": 1449083095, "post_id": 34050619, "comment_id": 55856224, "body": "Manuel Amstutz This code will be getting ported to Unity3D at some point, and Unity can have issues building Unsafe C# to some platforms.  PaulMcKenzie I know it is functionally possible but I would prefer doing it without having to do excessive amounts of data copying several times a second."}, {"owner": {"reputation": 2664, "user_id": 1424754, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BgiTe.png?s=128&g=1", "display_name": "nicholas", "link": "https://stackoverflow.com/users/1424754/nicholas"}, "edited": false, "score": 0, "creation_date": 1449083111, "post_id": 34050619, "comment_id": 55856242, "body": "If you could post some sample code showing how you are currently accomplishing this via <code>Marshal.Copy</code> that would provide way to see if this can be done."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449083653, "post_id": 34050619, "comment_id": 55856547, "body": "@BrandonFarrell In your code, who is responsible for calling <code>delete[ ]</code>?"}, {"owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "edited": false, "score": 0, "creation_date": 1449083745, "post_id": 34050619, "comment_id": 55856597, "body": "@ nicholas It is pretty boiler plate from MSDN examples all I am doing is getting a pointer, and passing that to c++ and having c++ update what it is pointing to. then do a marshal.copy on that."}, {"owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449083848, "post_id": 34050619, "comment_id": 55856666, "body": "@PaulMcKenzie not directly applicable to my question but C# calls a release. One of the things I am trying to avoid."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449083913, "post_id": 34050619, "comment_id": 55856702, "body": "@BrandonFarrell No. C# is not C++.  When you call <code>new[ ]</code> in C++, you have to call <code>delete[ ]</code> at some point.  It is not the same thing as a C# <code>new</code>.  Also, I don&#39;t understand about data copying -- you create the buffer in C#, pass a pointer to this buffer to C++, have C++ fill it in.  Done.  Where is the excessive copying?"}, {"owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449084075, "post_id": 34050619, "comment_id": 55856795, "body": "@PaulMcKenzie yes, C# calls the extern function in c++ that releases that data. With Marshal.Copy, takes the naitive floats, and migrates it into manged C# float[]"}, {"owner": {"reputation": 2664, "user_id": 1424754, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BgiTe.png?s=128&g=1", "display_name": "nicholas", "link": "https://stackoverflow.com/users/1424754/nicholas"}, "edited": false, "score": 0, "creation_date": 1449084658, "post_id": 34050619, "comment_id": 55857138, "body": "@BrandonFarrell, can you change the call signature on the C++ side?"}, {"owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "reply_to_user": {"reputation": 2664, "user_id": 1424754, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BgiTe.png?s=128&g=1", "display_name": "nicholas", "link": "https://stackoverflow.com/users/1424754/nicholas"}, "edited": false, "score": 0, "creation_date": 1449084753, "post_id": 34050619, "comment_id": 55857189, "body": "@nicholas if i am understanding your question correctly, yes. I am writing both the C++ and C# implementations."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "edited": false, "score": 0, "creation_date": 1449085796, "post_id": 34051611, "comment_id": 55857769, "body": "I assume in your first code block you wanted to pass the address into PopulateArray() not ptr."}], "tags": [], "owner": {"reputation": 5000, "user_id": 3856907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ub3wd.jpg?s=128&g=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/3856907/erik"}, "is_accepted": true, "score": 5, "last_activity_date": 1449085995, "last_edit_date": 1449085995, "creation_date": 1449085442, "answer_id": 34051611, "question_id": 34050619, "link": "https://stackoverflow.com/questions/34050619/updating-a-c-array-inside-c-without-marshal-copy-or-unsafe/34051611#34051611", "title": "Updating a C# array inside C++ without Marshal.Copy or Unsafe", "body": "<p>The only safe way to have C++ code update a managed C# array is to pin the array. Otherwise, it's possible for the garbage collector to try to move the array while the native code is running. You can do this with a GCHandle object.</p>\n\n<pre><code>int count = 5; \nfloat[] resultVertices = new float[count];\n\nGCHandle handle = GCHandle.Alloc(resultVertices, GCHandleType.Pinned);\nIntPtr address = handle.AddrOfPinnedObject();\n\nPopulateArray(address, count);\n\nhandle.Free();\n</code></pre>\n\n<hr>\n\n<p>It can also be done with unsafe code, which is somewhat more intuitive to read and remember:</p>\n\n<pre><code>int count = 5; \nfloat[] resultVertices = new float[count];\nunsafe \n{\n    fixed(float* ptr = resultVertices)\n    {\n        PopulateArray(ptr, count);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Another alternative is to have C# allocate an unmanaged chunk of memory and pass that to the C++ method. This is better than what you're doing because you are not placing the responsibility of allocation/deallocation in the C++ library code and instead keeping that all in your C#. I know you want to avoid the coy but sometimes doing the copy is more performant than pinning objects, but it depends on how large they are. I recommend you do performance testing to determine which is best for your situation.</p>\n\n<pre><code>int count = 5; \nfloat[] resultVertices = new float[count];\nIntPtr unmanagedMemory = Marshal.AllocHGlobal(count * Marshal.SizeOf(typeof(float)));\nPopulateArray(unmanagedMemory, count);\nMarshal.Copy(unmanagedMemory, resultVertices, 0, count);\n</code></pre>\n\n<p>In all these scenarios you should set your C++ code to operate like this:</p>\n\n<pre><code>extern \"C\" __declspec(dllexport) bool PopulateArray(float* resultVerts, int vertLength)\n{\n    resultVerts[0] = 0.123f;\n    // fill out the rest of them any way you like.\n    return true;\n}\n</code></pre>\n\n<p>If the array size is variable, then I recommend having a separate C++ method that calculates the size and returns it rather than having the C++ method allocate the memory.</p>\n"}, {"tags": [], "owner": {"reputation": 2664, "user_id": 1424754, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BgiTe.png?s=128&g=1", "display_name": "nicholas", "link": "https://stackoverflow.com/users/1424754/nicholas"}, "is_accepted": false, "score": 1, "last_activity_date": 1449087083, "creation_date": 1449087083, "answer_id": 34052116, "question_id": 34050619, "link": "https://stackoverflow.com/questions/34050619/updating-a-c-array-inside-c-without-marshal-copy-or-unsafe/34052116#34052116", "title": "Updating a C# array inside C++ without Marshal.Copy or Unsafe", "body": "<p>If you are willing to allow C# to allocate the array (probably a safer alternative) then you could do this behavior with standard PInvoke attributes.</p>\n\n<p>Change your C++ declaration to:</p>\n\n<pre><code>extern \"C\" __declspec(dllexport) bool PopulateArray(float resultVerts[], int resultVertLength)\n</code></pre>\n\n<p>and your C# declaration to:</p>\n\n<pre><code>[DllImport(\"Win32Library.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern bool PopulateArray([MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] float[] resultVerts, int resultVertLength);\n</code></pre>\n\n<p>Your usage from the C# side would then change to:</p>\n\n<pre><code>var resultVertices = new float[5];\nPopulateArray(resultVertices, resultVertices.Length);\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 1896334, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/62c920bdc75c5bd31e92123a15530a05?s=128&d=identicon&r=PG", "display_name": "Brandon Farrell", "link": "https://stackoverflow.com/users/1896334/brandon-farrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3043, "favorite_count": 1, "accepted_answer_id": 34051611, "answer_count": 2, "score": 0, "last_activity_date": 1449087083, "creation_date": 1449082072, "last_edit_date": 1449083977, "question_id": 34050619, "link": "https://stackoverflow.com/questions/34050619/updating-a-c-array-inside-c-without-marshal-copy-or-unsafe", "title": "Updating a C# array inside C++ without Marshal.Copy or Unsafe", "body": "<p>I am wanting to update an array that was created inside C#, and then pass a pointer to that array over to C++ and let C++ populate the indexes, to be used back in C#. Right now I am Using a Marshal.Copy() to accomplish this task, but I would like to avoid the potentially unnecessary copy, and call back to c++ to release the array. Is this even possible?</p>\n\n<p>These array are floats and ints, for geometric mesh data.</p>\n\n<p>My current usage (working and not what I want to use)\nC#</p>\n\n<pre><code>    IntPtr intptr=new IntPtr();\n    int count = 0;\n    PopulateArray(ref intptr, ref count);\n    float[] resultVertices = new float[count];\n    Marshal.Copy(intptr, resultVertices, 0, count);\n</code></pre>\n\n<p>C++</p>\n\n<pre><code>extern \"C\" __declspec(dllexport) bool PopulateArray(float** resultVerts, int* resultVertLength){\n\n    *resultVerts = new float[5]{0.123f, 3.141529f, 127.001f, 42.42f, 0};\n    int myX = 5;\n    *resultVertLength = myX;\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "memory", "libgphoto2"], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 1973454, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9721a5917f0a43e216655b602f24d3a1?s=128&d=identicon&r=PG", "display_name": "mynameisjohnj", "link": "https://stackoverflow.com/users/1973454/mynameisjohnj"}, "is_accepted": false, "score": 1, "last_activity_date": 1449088552, "last_edit_date": 1449088552, "creation_date": 1449087369, "answer_id": 34052190, "question_id": 34050599, "link": "https://stackoverflow.com/questions/34050599/how-does-gp-camera-file-get-work/34052190#34052190", "title": "How does gp_camera_file_get work?", "body": "<p>Never mind, I think I've found it. </p>\n\n<p>So <code>gp_camera_file_get</code> ends up calling <code>gp_filesystem_get_file</code>, which calls <code>gp_filesystem_get_file_impl</code>. That function looks at the <code>CameraFileType</code>, and if it's <code>GP_FILE_TYPE_NORMAL</code> (which it is, in my case), it calls <code>gp_file_copy</code> with an instance of CameraFileSystemFile as the source. </p>\n\n<p><code>gp_file_copy</code> ends up calling <code>malloc</code> if <code>GP_FILE_ACCESSTYPE_MEMORY</code> is the destination file's accesstype, and writes to disk if the accesstype is <code>GP_FILE_ACCESSTYPE_FD</code>. </p>\n\n<p>Then, the call to <code>gp_file_free</code> calls <code>gp_file_clean</code>, which calls <code>free</code> if the accesstype is <code>GP_FILE_ACCESSTYPE_MEMORY</code>. </p>\n"}], "owner": {"reputation": 341, "user_id": 1973454, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9721a5917f0a43e216655b602f24d3a1?s=128&d=identicon&r=PG", "display_name": "mynameisjohnj", "link": "https://stackoverflow.com/users/1973454/mynameisjohnj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1449088552, "creation_date": 1449082007, "question_id": 34050599, "link": "https://stackoverflow.com/questions/34050599/how-does-gp-camera-file-get-work", "title": "How does gp_camera_file_get work?", "body": "<p>I'm new to libgphoto2 and had some questions about where the actual image memory is located. It seems that photos are accessed via an object called a <code>CameraFile</code>. There's an example included in the source called sample-capture.c that has a function called <code>capture_to_memory</code>. </p>\n\n<p>In that function, a CameraFile object is created and initialized using <code>gp_file_new</code>. The implementation of <code>gp_file_new</code> creates a <code>CameraFile</code> object whose accesstype member is set to <code>GP_FILE_ACCESSTYPE_MEMORY</code>. </p>\n\n<p>That <code>CameraFile</code> object is then passed to <code>gp_camera_file_get</code>, and I'm not really clear what happens in this function. </p>\n\n<p>After the call to <code>gp_camera_file_get</code>, the file is sent to <code>gp_file_get_data_and_size</code>. Looking at the implementation of that function, and given that the files accesstype is <code>GP_FILE_ACCESSTYPE_MEMORY</code>, the <code>gp_file_get_data_and_size</code> function will not allocate any memory and instead merely assign the pointer to the CameraFile's data member (same with size). </p>\n\n<p>So where is the memory this pointer points to? Is it on the actual camera? Or is it somewhere in my ram? I'm just trying to avoid as many memory operations as possible. I've found a nice blog post</p>\n\n<p><a href=\"http://sepharads.blogspot.com/2011/11/camera-tethered-capturing-using.html?m=1\" rel=\"nofollow\">http://sepharads.blogspot.com/2011/11/camera-tethered-capturing-using.html?m=1</a></p>\n\n<p>where the <code>CameraFile</code> object is created via <code>gp_file_new_from_fd</code>. This sets the files accesstype to <code>GP_FILE_ACCESSTYPE_FD</code>. When <code>gp_file_get_data_and_size</code> is called on a file with this accesstype, new memory is allocated and the file's data is copied into it. However, this is read from disk, or at least I assume it is since FD means Unix File Descriptor, and it needs an actual filename string. Does that mean that <code>gp_camera_file_get</code> reads the data into a file on disk if the CameraFile's accestype is <code>GP_FILE_ACCESSTYPE_FD</code>?</p>\n\n<p>There is a function called <code>gp_file_free</code>. If it's an FD file it closes the file handle, but it doesn't call <code>free(file-&gt;data)</code> anywhere, so I'm pretty confused...</p>\n\n<p>What does <code>gp_camera_file_get</code> do? The implementation is there, but it kind of threw me. Does it actually bring the file from my camera's memory to my computer's memory and allocate <code>CameraFile-&gt;data</code> in ram? Or does it just give me a handle to something stored on my camera?</p>\n\n<p>Sorry if this is the wrong place to ask, I did see some sort of mailing list for libgphoto2 but I couldn't tell how active it was. </p>\n"}, {"tags": ["c++", "node.js", "v8", "libv8"], "comments": [{"owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1449082085, "post_id": 34050468, "comment_id": 55855669, "body": "Why did you use <code>do ... while</code> instead of <code>while</code>?"}, {"owner": {"reputation": 33, "user_id": 5631268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfEaQ.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5631268/rob"}, "reply_to_user": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1449083509, "post_id": 34050468, "comment_id": 55856457, "body": "No reason, why use <code>while</code> over <code>do while</code>?"}, {"owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1449152433, "post_id": 34050468, "comment_id": 55889614, "body": "I had not totally understood. You probably initialize the <code>mEntry</code> in the <code>&#47;&#47; check ...</code> sections."}, {"owner": {"reputation": 33, "user_id": 5631268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfEaQ.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5631268/rob"}, "reply_to_user": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1449259138, "post_id": 34050468, "comment_id": 55945164, "body": "The Module32First in the <code>&#47;&#47; check</code> looks like <code>if (!Module32First(hModuleSnapshot, &amp;mEntry))...throw error</code>"}, {"owner": {"reputation": 97, "user_id": 1866458, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/51b8de6e749e2ed511f4a3a5ffd0ebb9?s=128&d=identicon&r=PG", "display_name": "luleksde", "link": "https://stackoverflow.com/users/1866458/luleksde"}, "edited": false, "score": 0, "creation_date": 1465842233, "post_id": 34050468, "comment_id": 63059361, "body": "Node is running in x64 and the process you are trying to open is prob x86."}, {"owner": {"reputation": 33, "user_id": 5631268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfEaQ.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5631268/rob"}, "edited": false, "score": 0, "creation_date": 1465846162, "post_id": 34050468, "comment_id": 63061359, "body": "Yeah, figured this out a while ago. Probably should&#39;ve left an answer to update everyone, bit of a late reply to an inactive thread haha"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 1866458, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/51b8de6e749e2ed511f4a3a5ffd0ebb9?s=128&d=identicon&r=PG", "display_name": "luleksde", "link": "https://stackoverflow.com/users/1866458/luleksde"}, "is_accepted": true, "score": 0, "last_activity_date": 1465842447, "creation_date": 1465842447, "answer_id": 37796750, "question_id": 34050468, "link": "https://stackoverflow.com/questions/34050468/node-addon-unable-to-snapshot-createtoolhelp32snapshot-modules/37796750#37796750", "title": "Node addon unable to snapshot (CreateToolhelp32Snapshot) modules", "body": "<p>Using <code>TH32CS_SNAPMODULE</code> within a x64 process(Node.exe) on x86 process will give you only the 64 bit modules, use <code>TH32CS_SNAPMODULE32</code> to get the 32 bit modules - <code>TH32CS_SNAPMODULE | TH32CS_SNAPMODULE32</code> for all modules.</p>\n"}], "owner": {"reputation": 33, "user_id": 5631268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CfEaQ.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/5631268/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 37796750, "answer_count": 1, "score": 1, "last_activity_date": 1465842447, "creation_date": 1449081506, "question_id": 34050468, "link": "https://stackoverflow.com/questions/34050468/node-addon-unable-to-snapshot-createtoolhelp32snapshot-modules", "title": "Node addon unable to snapshot (CreateToolhelp32Snapshot) modules", "body": "<p>I'm trying to learn C++ but can't quite understand why when I attempt to snapshot modules via a Node add-on different results are returned to when I run the program through VS on the desktop.</p>\n\n<p>Using <a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/ms686701(v=vs.85).aspx\" rel=\"nofollow\">this</a> source from MSDN I can list all modules within a process:</p>\n\n<pre><code>void fm(LPSTR name) {\n    HANDLE hModuleSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, 5844);\n    MODULEENTRY32 mEntry;\n\n    // check invalid handle value...\n    // check module32first...\n\n    mEntry.dwSize = sizeof(mEntry);\n\n    do {\n        if (!strcmp(mEntry.szModule, name)) {\n            CloseHandle(hModuleSnapshot);\n            cout &lt;&lt; mEntry.szModule &lt;&lt; endl;\n        }\n    } while (Module32Next(hModuleSnapshot, &amp;mEntry));\n}\n</code></pre>\n\n<p>This works as intended and will find/print the module information (error checking omitted) - however, when I try and port this functionality over to a Node add-on it does not list the same modules as the code above (the code is nearly identical, I don't know why attempting to implement the function inside a custom Node add-on affects the result):</p>\n\n<pre><code>void fm() { \n    HANDLE hModuleSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, 5844);\n    MODULEENTRY32 mEntry;\n\n    // check invalid handle value...\n    // check module32first...\n\n    mEntry.dwSize = sizeof(mEntry);\n\n    do {\n        cout &lt;&lt; mEntry.szModule &lt;&lt; endl;\n    } while (Module32Next(hModuleSnapshot, &amp;mEntry));\n\n    CloseHandle(hModuleSnapshot);\n}\n</code></pre>\n\n<p>After using node-gyp to compile the add-on I can call it successfully (after requiring, it simply runs a function that calls <code>fm</code>).</p>\n\n<p>If I try to snapshot the process with the PID <code>5844</code> (VS Code) it prints out:</p>\n\n<p><code>Code.exe\nntdll.dll\nwow64.dll\nwow64win.dll\nwow64cpu.dll</code></p>\n\n<p>If I try the process with the PID <code>6540</code> (Chrome) it prints out:</p>\n\n<p><code>chrome.exe\nntdll.dll\nwow64.dll\nwow64win.dll\nwow64cpu.dll</code></p>\n\n<p>This is obviously not correct, it prints out the same modules even though the PID (hard coded) is differing.</p>\n\n<p>If I use the first block of code and run it with VS, I get:</p>\n\n<p><code>chrome.exe\nntdll.dll\nKERNEL32.DLL\nKERNELBASE.dll\napphelp.dll\nADVAPI32.dll\nmsvcrt.dll\nsechost.dll\nRPCRT4.dll\nSspiCli.dll\nCRYPTBASE.dll...</code>\nThere's a lot more modules, but you can see this is what the second block of code should print.</p>\n\n<p>I do not know why running the code through a custom Node add-on would affect the outcome unless I'm missing or not understanding something about Node add-ons.</p>\n\n<p>I can open and collect information about all processes correctly using <code>CreateToolhelp32Snapshot</code> with the Node add-on, but I can not seem to collect information on the modules within a process.</p>\n"}, {"tags": ["c++", "c++11", "dll"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1449081739, "post_id": 34050429, "comment_id": 55855478, "body": "You should be more concerned whether you get a crash when trying to use one of your <code>Test</code> ojbects created in one DLL, and passed to another DLL.  All your DLL&#39;s have to be compiled with the same compiler, same options, make sure the heap used is the same (for the <code>unordered_map</code>), etc."}, {"owner": {"reputation": 1872, "user_id": 1695767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/310aae518147c19ad378b8c8619a1680?s=128&d=identicon&r=PG", "display_name": "Sandu Liviu Catalin", "link": "https://stackoverflow.com/users/1695767/sandu-liviu-catalin"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449082331, "post_id": 34050429, "comment_id": 55855786, "body": "The use of <code>std::unordered_map</code> was just an example. It seems I formed the question a bit wrong. My question was if <code>std::type_index</code> would point to the same index. The <code>hash_code</code> value would be the same."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449082583, "post_id": 34050429, "comment_id": 55855936, "body": "My point is that you can&#39;t even consider anything unless the DLL&#39;s are built exactly the same.  Also, it doesn&#39;t have to be an <code>unordered_map</code> -- if your <code>Test</code> class eventually does <i>any</i> memory management, explicit or implicit, usage of <code>Test</code> between DLL&#39;s is problematic if the same heap is not used."}, {"owner": {"reputation": 1872, "user_id": 1695767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/310aae518147c19ad378b8c8619a1680?s=128&d=identicon&r=PG", "display_name": "Sandu Liviu Catalin", "link": "https://stackoverflow.com/users/1695767/sandu-liviu-catalin"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449082890, "post_id": 34050429, "comment_id": 55856125, "body": "I see. I&#39;m guessing this answers my question."}], "answers": [{"comments": [{"owner": {"reputation": 5281, "user_id": 1495627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/05f7c73495dfcdc1b6b32b30fdb994f0?s=128&d=identicon&r=PG", "display_name": "Jean-Micha&#235;l Celerier", "link": "https://stackoverflow.com/users/1495627/jean-micha%c3%abl-celerier"}, "edited": false, "score": 2, "creation_date": 1482610197, "post_id": 34050520, "comment_id": 69836759, "body": "This answer is absolutely wrong. ODR does <i>not</i> apply to class templates, which Dummy is. See <a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/definition</a> <code>There can be more than one definition in a program, as long as each definition appears in a different translation unit, of each of the following: class type, enumeration type, inline function with external linkage inline variable with external linkage (since C++17), class template, non-static function template, static data member of a class template, member function of a class template, partial template specialization, [...]</code>"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 0, "last_activity_date": 1449081697, "creation_date": 1449081697, "answer_id": 34050520, "question_id": 34050429, "link": "https://stackoverflow.com/questions/34050429/is-stdtype-index-safe-across-dlls/34050520#34050520", "title": "Is std::type_index safe across DLLs", "body": "<p>If I understood the question correctly, you are violating ODR - One Definition Rule. Seems like your 'Dummy' type is independently defined in two different units of translations, and that's a no-no-no :). Now, this brings you into undefined land, and here anything is possible - you can get same values, different values or no values at all.</p>\n"}, {"tags": [], "owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "is_accepted": false, "score": 4, "last_activity_date": 1449090766, "creation_date": 1449090766, "answer_id": 34053091, "question_id": 34050429, "link": "https://stackoverflow.com/questions/34050429/is-stdtype-index-safe-across-dlls/34053091#34053091", "title": "Is std::type_index safe across DLLs", "body": "<p>This hugely depends on your definition of 'safe' and your deployment environment. </p>\n\n<p>The crux of the argument of @SergeyA's answer is that the compiler generates <code>std::type_info</code> objects in each compilation unit - which are then coalesced by the linker when each DLL is linked. </p>\n\n<p>Whilst a <code>std::type_info</code> will have an interface defined by the standard, the implementation (and particularly, storage layout) is an implementation detail that may change between compilers, compiler versions, and compiler options.</p>\n\n<p>Furthermore from <a href=\"http://en.cppreference.com/w/cpp/types/type_index\" rel=\"nofollow\">CppReference</a></p>\n\n<blockquote>\n  <p>The type_index class is a wrapper class around a std::type_info object, that can be used as index in associative and unordered associative containers. The relationship with type_info object is maintained through a pointer'</p>\n</blockquote>\n\n<p>So now, we're relying on a several definitions of <em>pointers</em> into each DLL as well. </p>\n\n<p>Thinking of some of the things you might do with a <code>std::type_index</code> - there's a high likelihood the results will be context dependent - largely dependant on where they are called from.</p>\n\n<p>Now onto the question: Is this safe? Likely not.  As a general rule, you should avoid exposing almost all of the std library (and particularly STL containers) across DLL interface boundaries.  </p>\n\n<p>If you do insist on doing so, it's only ever got a change of work in these very limited circumstances:</p>\n\n<ul>\n<li>All components are built with precisely the same compiler </li>\n<li>All components are built with precisely the same compiler options (debug vs release has always been a massive issue on Windows)</li>\n<li>All components are deployed together as one unit</li>\n<li>None of the components exposes an API to anybody else</li>\n</ul>\n\n<p>This is actually true of a great deal of commercial software, and you'll find it is done more often than you think, but I wouldn't recommend it. </p>\n"}], "owner": {"reputation": 1872, "user_id": 1695767, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/310aae518147c19ad378b8c8619a1680?s=128&d=identicon&r=PG", "display_name": "Sandu Liviu Catalin", "link": "https://stackoverflow.com/users/1695767/sandu-liviu-catalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1098, "favorite_count": 0, "accepted_answer_id": 34050520, "answer_count": 2, "score": 5, "last_activity_date": 1449090766, "creation_date": 1449081336, "question_id": 34050429, "link": "https://stackoverflow.com/questions/34050429/is-stdtype-index-safe-across-dlls", "title": "Is std::type_index safe across DLLs", "body": "<p>Let's say that I have a main DLL where there's a class like this:</p>\n\n<pre><code>class Test\n{\npublic:\n\n    typedef std::unordered_map&lt; std::type_index, int &gt; Map;\n\n    template &lt; typename T &gt; void SetValue(int val)\n    {\n        SetValue(std::type_index(typeid(T)), val);\n    }\n\n    template &lt; typename T &gt; int GetValue()\n    {\n        return GetValue(std::type_index(typeid(T)));\n    }\n\nprotected:\n\n    // Defined in .cpp file\n    void SetValue(const std::type_index &amp; idx, int val)\n    {\n        m_Map[idx] = val;\n    }\n\n    // Defined in .cpp file\n    int GetValue(const std::type_index &amp; idx)\n    {\n        Map::const_iterator itr = m_Map.find(idx);\n\n        if (itr != m_Map.cend())\n        {\n            return itr-&gt;second;\n        }\n\n        return 0;\n    }\n\nprivate:\n\n    Map m_Map;\n};\n</code></pre>\n\n<p>And I share an instance of that class through several DLLs. And in one of the DLLs I set some values like this:</p>\n\n<pre><code>template &lt; typename T &gt; struct Dummy\n{\n\n};\n\nvoid InitFunc(Test * t)\n{\n    t-&gt;SetValue&lt; Dummy&lt;int&gt; &gt;(32);\n    t-&gt;SetValue&lt; Dummy&lt;char&gt; &gt;(10);\n    t-&gt;SetValue&lt; Dummy&lt;float&gt; &gt;(27);\n}\n</code></pre>\n\n<p>And in another DLL I attempt to get those values using the same <code>Dummy</code> type. Would I get those same values or 0?</p>\n"}, {"tags": ["c++", "qt", "sigar"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1449081497, "post_id": 34050423, "comment_id": 55855354, "body": "I don&#39;t see any flags for linking the library..."}, {"owner": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1449082047, "post_id": 34050423, "comment_id": 55855645, "body": "@KarolyHorvath What would that look like/what am I missing?"}], "answers": [{"comments": [{"owner": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "edited": false, "score": 0, "creation_date": 1449081988, "post_id": 34050510, "comment_id": 55855619, "body": "I have the following directories: bindings, examples, include, src and test. Am I missing something? <a href=\"https://github.com/hyperic/sigar\" rel=\"nofollow noreferrer\">github.com/hyperic/sigar</a>"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "edited": false, "score": 0, "creation_date": 1449082072, "post_id": 34050510, "comment_id": 55855658, "body": "Which directory contains *.lib binary files? Or maybe you have to build the library first?"}, {"owner": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "edited": false, "score": 0, "creation_date": 1449082159, "post_id": 34050510, "comment_id": 55855703, "body": "There isn&#39;t. I though QT would do this for me?"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "edited": false, "score": 0, "creation_date": 1449082646, "post_id": 34050510, "comment_id": 55855976, "body": "Qt comes with own prebuilt libraries but how does it know about the rest of stuff (like SIGAR?) you try to link you project with?"}, {"owner": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "edited": false, "score": 0, "creation_date": 1449082700, "post_id": 34050510, "comment_id": 55856014, "body": "I thought that the libs and includepath where the pointers for that?"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "edited": false, "score": 0, "creation_date": 1449082870, "post_id": 34050510, "comment_id": 55856111, "body": "It can be whatever. Linking with external libraries makes us to interfere with external project files as well and taking care of binary libs ready to link. Maybe you need to read some readme.txt or doc from that library."}], "tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": true, "score": 1, "last_activity_date": 1449081661, "creation_date": 1449081661, "answer_id": 34050510, "question_id": 34050423, "link": "https://stackoverflow.com/questions/34050423/undefined-reference-to-functions/34050510#34050510", "title": "Undefined reference to functions", "body": "<p>Assuming there is lib directory:</p>\n\n<pre><code>LIBS += -lboost_system -L\"/home/john/Cpp libraries/sigar-master/lib\" \\\n                       -lspecific_lib\n</code></pre>\n"}], "owner": {"reputation": 1057, "user_id": 1127807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bd1bb5a617fd29726d20647bb4137b44?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1127807/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 34050510, "answer_count": 1, "score": 0, "last_activity_date": 1449081661, "creation_date": 1449081320, "question_id": 34050423, "link": "https://stackoverflow.com/questions/34050423/undefined-reference-to-functions", "title": "Undefined reference to functions", "body": "<p>I am trying out C++ and QT but I am walking against a wall trying to solve this problem as most of this is not familiar.</p>\n\n<p>I am trying to use the SIGAR library but I am getting the following message from QT:</p>\n\n<pre><code>/home/john/QT-projects/WidgetFirst/mainwindow.cpp:37: error: undefined reference to `sigar_open'\n</code></pre>\n\n<p>With a couple of other functions being undefined.</p>\n\n<p>My best  guess is that I didn't link something properly. The typhinting in the QT creator editor does work.</p>\n\n<p>My .pro file looks like this:</p>\n\n<pre><code>QT       += core gui webkitwidgets\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = WidgetFirst\nTEMPLATE = app\n\nINCLUDEPATH += \"/home/john/Cpp libraries/sigar-master/include\"\n\nLIBS += -lboost_system -L\"/home/john/Cpp libraries/sigar-master/src\"\n\nSOURCES += main.cpp\\\n        mainwindow.cpp\n\nHEADERS  += mainwindow.h\n\nFORMS    += mainwindow.ui\n\nCONFIG += c++11\n</code></pre>\n\n<p>Could somebody tell me what I did wrong or what is missing?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "arrays", "default"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1449081321, "post_id": 34050341, "comment_id": 55855256, "body": "I&#39;d suggest to clarify assignment requirements with your teacher, not SO."}], "answers": [{"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 1, "last_activity_date": 1449081267, "creation_date": 1449081267, "answer_id": 34050407, "question_id": 34050341, "link": "https://stackoverflow.com/questions/34050341/dynamic-array-default-constructed-elements-c/34050407#34050407", "title": "Dynamic array &quot;default constructed elements&quot; c++", "body": "<p>Presumably, the class constructor is for the <code>ExArray</code> class.  But this is a container class which holds other objects (similar to <code>std::vector</code> for instance).  In order to have a <code>ExArray</code> of size 10, for instance, that contains instances of class <code>X</code>, a reasonable requirement is to make <code>X</code> have a default constructor.  This way, each of the 10 items in the container will be default constructed.  Otherwise, it gets hard to define <code>ExArray</code> since one would have to supply constructor arguments to the class it contains.</p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1449081879, "post_id": 34050484, "comment_id": 55855565, "body": "Note that <code>elements[i].T();</code> is not valid C++.  The real code would do something like <code>new (&amp;elements[i]) T();</code>"}], "tags": [], "owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "is_accepted": false, "score": 0, "last_activity_date": 1449089460, "last_edit_date": 1449089460, "creation_date": 1449081575, "answer_id": 34050484, "question_id": 34050341, "link": "https://stackoverflow.com/questions/34050341/dynamic-array-default-constructed-elements-c/34050484#34050484", "title": "Dynamic array &quot;default constructed elements&quot; c++", "body": "<p>In a static array like <code>std::array&lt;T,n&gt; arr</code> or C-style <code>T arr[n]</code>, C++ automatically calls the default constructor (<code>T::T()</code>) on each element of the array when the array is constructed. When the array is deleted it calls the destructor of each element.</p>\n\n<p>A dynamic array like <code>std::vector</code> (where elements can be appended/removed) needs to handle this manually when elements are added. For example:</p>\n\n<pre><code>T* elements = static_cast&lt;T*&gt;( std::malloc(n * sizeof(T)) );\nfor(std::ptrdiff_t i = 0; i &lt; n; ++i)\n    new (&amp;elements[i]) T();\n</code></pre>\n\n<p>Allocates raw memory for <code>n</code> elements, and casts the pointer into a pointer to uninitialized <code>T</code> elements. Then it manually calls the default constructor of each element.</p>\n\n<p>Using placement new to initialize the object/call the constructor. The destructor can be called like <code>elements[i].~T()</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 5531300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad8d273cd7f8521f71405cddfe6cc08?s=128&d=identicon&r=PG&f=1", "display_name": "James King", "link": "https://stackoverflow.com/users/5531300/james-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1449089460, "creation_date": 1449081044, "question_id": 34050341, "link": "https://stackoverflow.com/questions/34050341/dynamic-array-default-constructed-elements-c", "title": "Dynamic array &quot;default constructed elements&quot; c++", "body": "<p>I need to make a dyanmic array. I have got this constructor function prototype. <code>ExArray(int);</code> with <code>indivdual elements must be default constructed</code>. What does it mean when it wants the elements to be default constructed? Does it want the element to be initialised in the default constructor and not in this constructor?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1449081310, "post_id": 34050320, "comment_id": 55855250, "body": "Avoid it, have an adapter wrapping that vector by reference and providing the (const and non-const) operators <code>T&amp; operator () (std::size_t x, std::size_t y)</code>"}, {"owner": {"reputation": 39, "user_id": 5480015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65b8d9817cdcb8912b07d9b16522cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/5480015/elena"}, "edited": false, "score": 0, "creation_date": 1449081364, "post_id": 34050320, "comment_id": 55855281, "body": "I don&#39;t really know how to do it. I&#39;m new on c++. Thanks."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449081481, "post_id": 34050320, "comment_id": 55855346, "body": "@Elena  Please post the declarations of <code>twov</code> and <code>v</code>, instead of us trying to parse that error message."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449081785, "post_id": 34050320, "comment_id": 55855500, "body": "We have no idea how to help you. How do you want to transform a unidimential vector into two-dimensional vector <b>logically</b>? Answer this question first, the coding will come later."}, {"owner": {"reputation": 39, "user_id": 5480015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65b8d9817cdcb8912b07d9b16522cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/5480015/elena"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449082055, "post_id": 34050320, "comment_id": 55855648, "body": "@SergeyA the twov vector has a 5x5 size and the v vector has a size of 25, so the idea is parse it. But I don&#39;t know how to do it."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1449082085, "creation_date": 1449082085, "answer_id": 34050621, "question_id": 34050320, "link": "https://stackoverflow.com/questions/34050320/how-to-copy-a-vector-in-a-two-dimensional-vector/34050621#34050621", "title": "How to copy a vector in a two dimensional vector", "body": "<p>First thing you have decide is how should the elements of <code>v</code> be distributed to <code>twov</code>.</p>\n\n<p>Say <code>v</code> has <code>N</code> elements. Is <code>N</code> expected to be equal to <code>N1 x N2</code>, where <code>N1</code> is the number of rows and <code>N2</code> the number of columns?</p>\n\n<p>If the answer is yes, you can create <code>twov</code> with <code>N1</code> 1-D <code>vectors</code> in it to start with.</p>\n\n<pre><code>size_t N = v.size();\nsize_t N1 = &lt;Some value&gt;;\nsize_t N2 = N/N1;\nassert(N1*N2 == N);\n\n// Create twov with the appropriate elements.\nvector&lt;vector&lt;int&gt; &gt; twov(N1, vector&lt;int&gt;(N2));\n\n// Now copy the elements from v to twov\nfor (size_t i = 0; i &lt; N1; ++i )\n{\n   for (size_t j = 0; j &lt; N2; ++j )\n   {\n      twov[i][j] = v[i*N2+j];\n   }\n}\n</code></pre>\n\n<p>If the structure of <code>twov</code> is not as clean as above, you'll have to come up with a different logic for copying the elements of <code>v</code> to <code>twov</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 5480015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65b8d9817cdcb8912b07d9b16522cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/5480015/elena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 34050621, "answer_count": 1, "score": 0, "last_activity_date": 1449082085, "creation_date": 1449080979, "last_edit_date": 1449081693, "question_id": 34050320, "link": "https://stackoverflow.com/questions/34050320/how-to-copy-a-vector-in-a-two-dimensional-vector", "title": "How to copy a vector in a two dimensional vector", "body": "<p>I'm trying to copy the content of an unidimensional vector in a two dimensional vector.</p>\n\n<p>I've tried to use push_back()</p>\n\n<pre><code>vector&lt;int&gt; v;\nvector&lt;vector&lt;int&gt; &gt; twov;\n\nfor (int i = 0; i &lt; v.size(); i++)\n    twov.push_back(v[i])\n</code></pre>\n\n<p>But, of course, I receive a the following error:</p>\n\n<pre><code>error: reference to type 'const value_type' (aka 'const std::__1::vector&lt;int, std::__1::allocator&lt;int&gt; &gt;') could not bind to an lvalue of type 'value_type'\n  (aka 'int')\n</code></pre>\n\n<p>Could you help me?</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["javascript", "c++", "emscripten"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449081519, "post_id": 34050275, "comment_id": 55855366, "body": "I have no experience with Emscripten, but I am pretty much sure the answer is <b>no</b> with capital N. You are not even supposed to pass an ownership of the pointer between C code compiled independently - you never know which version of runtime was used, and if the free() and malloc() will speak the same language."}], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "is_accepted": false, "score": 8, "last_activity_date": 1449113113, "creation_date": 1449113113, "answer_id": 34057348, "question_id": 34050275, "link": "https://stackoverflow.com/questions/34050275/emscripten-malloc-and-free-across-js-and-c/34057348#34057348", "title": "Emscripten malloc and free across JS and C++", "body": "<p>Yes.  In Emscripten, the C++ version of malloc is converted to Module._malloc() in JavaScript; likewise Module._free() is the same as C++'s free().</p>\n"}, {"comments": [{"owner": {"reputation": 678, "user_id": 2705084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75d4297097d5a616dd055e202e2a037?s=128&d=identicon&r=PG&f=1", "display_name": "camerondm9", "link": "https://stackoverflow.com/users/2705084/camerondm9"}, "edited": false, "score": 0, "creation_date": 1483126481, "post_id": 34073298, "comment_id": 70005698, "body": "This is incorrect. As noted in the warning message, an actual implementation of <code>free</code> will be available if called from C. Emscripten doesn&#39;t include it if it isn&#39;t used. However, this doesn&#39;t really answer the asker&#39;s question."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2107435"}, "is_accepted": false, "score": -1, "last_activity_date": 1449168153, "last_edit_date": 1449168153, "creation_date": 1449166503, "answer_id": 34073298, "question_id": 34050275, "link": "https://stackoverflow.com/questions/34050275/emscripten-malloc-and-free-across-js-and-c/34073298#34073298", "title": "Emscripten malloc and free across JS and C++", "body": "<p>take a look at this code , \nthis is a piece of source code\nin library.js about emscripten</p>\n\n<pre><code>  free: function() {\n#if ASSERTIONS == 2\n    Runtime.warnOnce('using stub free (reference it from C to have the real one included)');\n#endif\n},\n</code></pre>\n\n<p>as you saw free is not implemented\nbut you can free with exampe below</p>\n\n<pre><code>    char *s1 = (char*) malloc ( 256 );\n\n    EM_ASM_INT ( {\n        return _free ( $0  );\n    }, s1 ) ;   \n</code></pre>\n\n<p>at the moment works in this way\nthis is a full example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;emscripten.h&gt;\n\nint main ( void )\n{\n    // ************************************** free do not free\n    char *s1 = (char*) malloc ( 256 );\n    strcpy ( s1,\"Hello\\0\" ) ;\n    puts (s1); \n    free(s1);\n    puts(s1); \n\n    // ************************************** free do not free  \n    char *s2  = (char* )EM_ASM_INT ( {\n        var p = Module._malloc(256);\n        setValue ( p + 0 , 65 , 'i8' ) ; // A\n        setValue ( p + 1 , 66 , 'i8' ) ; // B\n        setValue ( p + 2 , 67 , 'i8' ) ; // C\n        setValue ( p + 3 , 0  , 'i8' ) ;\n        return p ; \n    } , NULL ); \n    puts(s2); \n    free(s2);   // do not free\n    puts(s2); \n\n    // ************************************** _free do free\n/*\n    EM_ASM_INT ( {\n        return _free ( $0  );\n    }, s1 ) ;   \n    EM_ASM_INT ( {\n        return _free ( $0  );\n    }, s1 ) ;   \n*/\n    puts(s1); \n    puts(s2);   \n\n\n    char * s3 = (char*) EM_ASM_INT ( {\n    var  str = 'ciao' ;\n    var  ret  = allocate(intArrayFromString(str), 'i8', ALLOC_NORMAL);\n    return  ret ;\n    }, NULL  ) ;\n\n    puts( s3 ) ;\n    free(s3); // do not free\n    puts( s3 ) ;\n\n    // ************************************** _free do free\n/*\n    EM_ASM_INT ( {\n        return _free ( $0  );\n    }, s3 ) ; \n*/\n    puts( s3 ) ;\n\n return 0 ;\n}\n</code></pre>\n"}], "owner": {"reputation": 30828, "user_id": 239916, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/950ab2797f3012eeed28559fcdde8e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Eding", "link": "https://stackoverflow.com/users/239916/thomas-eding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3269, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1557315227, "creation_date": 1449080838, "question_id": 34050275, "link": "https://stackoverflow.com/questions/34050275/emscripten-malloc-and-free-across-js-and-c", "title": "Emscripten malloc and free across JS and C++", "body": "<p>Suppose I allocate some memory M in Javascript via Emscripten <code>_malloc</code> (Javascript). Am I allowed to pass ownership of M into a marshaled C++ function that calls <code>free</code> (C++) on it?</p>\n"}, {"tags": ["c++", "variables", "types"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1449079763, "post_id": 34049902, "comment_id": 55854373, "body": "What every ... about floats etc. (<a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">link</a>)"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1449079819, "post_id": 34049902, "comment_id": 55854412, "body": "We are floating point of borg. Accuracy is irrelevant, you will be approximated."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1449079846, "post_id": 34049902, "comment_id": 55854424, "body": "<a href=\"http://www.exploringbinary.com/floating-point-questions-are-endless-on-stackoverflow-com/\" rel=\"nofollow noreferrer\">exploringbinary.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1449079815, "creation_date": 1449079815, "answer_id": 34049966, "question_id": 34049902, "link": "https://stackoverflow.com/questions/34049902/c-type-of-variables-value/34049966#34049966", "title": "C++ Type of variables - value", "body": "<blockquote>\n  <p>I suspected the numbers to limit of the type and rest will be the zero</p>\n</blockquote>\n\n<p>That is what happens internally.  Excess bits beyond what the type can store are lost.</p>\n\n<p>But that's in the binary representation.  When you convert it to decimal, you can get trailing non-zero digits.</p>\n\n<p>Example:</p>\n\n<p><code>0b0.00100</code> is <code>0.125</code> in decimal</p>\n"}, {"tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": false, "score": 3, "last_activity_date": 1449080240, "last_edit_date": 1449080240, "creation_date": 1449079916, "answer_id": 34049994, "question_id": 34049902, "link": "https://stackoverflow.com/questions/34049902/c-type-of-variables-value/34049994#34049994", "title": "C++ Type of variables - value", "body": "<blockquote>\n  <p>I suspected the numbers to limit of the type and rest will be the zero</p>\n</blockquote>\n\n<p>Yes, this is exactly what happens, but it happens in binary. This program will show it by using the hexadecimal printing format <code>%a</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int c, char *v[]) {\n  float fl = 8.28888888888888888888883E-5;\n\n  printf(\"%a\\n%a\\n\", 8.28888888888888888888883E-5, fl);\n}\n</code></pre>\n\n<p>It shows:</p>\n\n<pre>\n0x1.5ba94449649e2p-14\n0x1.5ba944p-14\n</pre>\n\n<p>In these results, <code>0x1.5ba94449649e2p-14</code> is the hexadecimal representation of the <code>double</code> closest to 8.28888888888888888888883*10<sup>-5</sup>, and <code>0x1.5ba944p-14\n</code> is the representation of the conversion to <code>float</code> of that number. As you can see, the conversion simply truncated the last digits (in this case. The conversion is done according to the rounding mode, and when the rounding goes up instead of down, it changes one or more of the last digits).</p>\n\n<p>When you observe what happens in <strong>decimal</strong>, the fact that <code>float</code> and <code>double</code> are <strong>binary</strong> floating-point formats on your computer means that there are extra digits in the representation of the value.</p>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 5625102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc184e0e79be57f4a76f0cc757ada884?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowwolf", "link": "https://stackoverflow.com/users/5625102/shadowwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1449080274, "creation_date": 1449080274, "answer_id": 34050114, "question_id": 34049902, "link": "https://stackoverflow.com/questions/34049902/c-type-of-variables-value/34050114#34050114", "title": "C++ Type of variables - value", "body": "<p>What you're seeing is a result of the fact that you cannot exactly represent a floating-point number in memory. Because of this, floats will be stored as the nearest value that can be stored in memory. A float usually has 24 bits used to represent the mantissa, which translates to about 6 decimal places (this is implementation defined though, so you shouldn't rely on this). When printing more than 6 decimal digits, you'll notice your value isn't stored in memory as the value you intended, and you'll see random digits.</p>\n\n<p>So to recap, the problem you encountered is caused by the fact that base-10 decimal numbers cannot be represented in memory, instead the closest number to it is stored and this number will then be used.</p>\n"}, {"comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1449081862, "post_id": 34050307, "comment_id": 55855548, "body": "Your first link says that the range for <code>float</code> goes from 1.8E-38 to 3.4E+38. Shouldn&#39;t 8.28888888888888888888883E-5 be within the limits?"}, {"owner": {"reputation": 535, "user_id": 5464294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IiFqJ.jpg?s=128&g=1", "display_name": "Adham Gamal", "link": "https://stackoverflow.com/users/5464294/adham-gamal"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1449519806, "post_id": 34050307, "comment_id": 56033028, "body": "i just want to make you know that limit isn&#39;t just two number limit your number but it is also the number of digits after decimal point .. so if you just try it as double you can see it show the whole number. so add to your knowledge every data type has many limits you have to know it to be a good programmer."}, {"owner": {"reputation": 535, "user_id": 5464294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IiFqJ.jpg?s=128&g=1", "display_name": "Adham Gamal", "link": "https://stackoverflow.com/users/5464294/adham-gamal"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1449520383, "post_id": 34050307, "comment_id": 56033372, "body": "<code>#include &lt;iostream&gt;  #include &lt;iomanip&gt;  using namespace std;  void main()  {  \tfloat fl=8.28888888888888888888883E-5; \tcout&lt;&lt;&quot;The value = &quot;&lt;&lt;setprecision(17)&lt;&lt;fl&lt;&lt;endl; \tdouble f2=8.28888888888888888888883E-5; \tcout&lt;&lt;&quot;The value = &quot;&lt;&lt;setprecision(17)&lt;&lt;f2&lt;&lt;endl; \tsystem(&quot;pause&quot;); }</code>"}], "tags": [], "owner": {"reputation": 535, "user_id": 5464294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IiFqJ.jpg?s=128&g=1", "display_name": "Adham Gamal", "link": "https://stackoverflow.com/users/5464294/adham-gamal"}, "is_accepted": false, "score": 0, "last_activity_date": 1449080933, "creation_date": 1449080933, "answer_id": 34050307, "question_id": 34049902, "link": "https://stackoverflow.com/questions/34049902/c-type-of-variables-value/34050307#34050307", "title": "C++ Type of variables - value", "body": "<p>each data type has range after this range all number is from memory or rubbish so you have to know this ranges and deal with it when you write code.\nyou can know this ranges from <a href=\"http://www.cplusplus.com/forum/beginner/44774/\" rel=\"nofollow\">here</a> or <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 153, "user_id": 5355545, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ddbfbffc5fb99643ebcc99d754499586?s=128&d=identicon&r=PG", "display_name": "diego9403", "link": "https://stackoverflow.com/users/5355545/diego9403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1449080933, "creation_date": 1449079603, "question_id": 34049902, "link": "https://stackoverflow.com/questions/34049902/c-type-of-variables-value", "title": "C++ Type of variables - value", "body": "<p>I am the beginner, but I think same important thinks I should learn as soon as it possible.\nSo I have a code:</p>\n\n<pre><code>float fl=8.28888888888888888888883E-5;\ncout&lt;&lt;\"The value = \"&lt;&lt;fl&lt;&lt;endl;\n</code></pre>\n\n<p>But my .exe file after run show:</p>\n\n<pre><code>8.2888887845911086e-005\n</code></pre>\n\n<p>I suspected the numbers to limit of the type and rest will be the zero, but I saw digits, which are random. Maybe it gives digits from memory after varible?\nCould you explain me how it does works?</p>\n"}, {"tags": ["c++", "templates", "operator-overloading", "generic-programming", "ostream"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1449079437, "post_id": 34049804, "comment_id": 55854179, "body": "it should be a <code>friend</code> function if it&#39;s inside a class"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449079476, "post_id": 34049804, "comment_id": 55854205, "body": "Make <code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Set&lt;T&gt; &amp; obj)</code> a freestanding function (It is useless inside the class declaration, unless you declare it as friend - which is not needed here)"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1449079617, "post_id": 34049804, "comment_id": 55854282, "body": "if you decide the <code>operator&lt;&lt;</code> should stay inside class <code>Set</code>, then it should be declared as <code>friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Set&lt;T&gt; &amp; obj) { &#47;**&#47; }</code>"}, {"owner": {"reputation": 11, "user_id": 4905047, "user_type": "registered", "profile_image": "https://graph.facebook.com/801707369906762/picture?type=large", "display_name": "Magdalena Lauberger", "link": "https://stackoverflow.com/users/4905047/magdalena-lauberger"}, "edited": false, "score": 1, "creation_date": 1449079858, "post_id": 34049804, "comment_id": 55854432, "body": "Thanks a lot. Both versions work. The friend-version and the freestanding version of the operator.  A bif thank you! Honestly!"}], "owner": {"reputation": 11, "user_id": 4905047, "user_type": "registered", "profile_image": "https://graph.facebook.com/801707369906762/picture?type=large", "display_name": "Magdalena Lauberger", "link": "https://stackoverflow.com/users/4905047/magdalena-lauberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1449079449, "answer_count": 0, "score": 0, "last_activity_date": 1449079324, "creation_date": 1449079324, "question_id": 34049804, "link": "https://stackoverflow.com/questions/34049804/operator-of-template-class-in-c-program-does-not-work", "closed_reason": "Duplicate", "title": "&lt;&lt;operator of template class in c++ program does not work", "body": "<p>I really need some help.\nMy &lt;&lt; operator in my class does not work, but i don't know why.\nI get errors like: \"function text skipped\" and \"too many parameters\".\nThe Print()-function works.\nBut the operator &lt;&lt; is the problem.</p>\n\n<pre><code>int main(){\n\n    Set&lt;int&gt; s;\n    s.Add(1);\n    s.Add(9);\n    cout &lt;&lt; s;\n\n}\n\n\n\ntemplate &lt;typename T&gt;\nclass Set {\npublic:\n\n    //Hinzuf\u00fcgen eines Elements\n    bool Add(T const &amp;x) { return mSet.insert(x).second; }\n\n    //Entfernen eines Elements\n    bool Remove(T const &amp;x) { return mSet.erase(x) &gt; 0; }\n\n    //Pr\u00fcfen, ob Wert enthalten ist\n    bool Contains(T const &amp;x) { return mSet.count(x) &gt; 0; }\n\n\n    //Ausgabe auf einen Stream\n    void Print(std::ostream &amp;out) const{\n        std::for_each(mSet.begin(), mSet.end(), [&amp;out](const T elem) { out &lt;&lt; elem &lt;&lt; \"\\n\"; });\n    }\n\n    //ruft einfach Print auf\n    std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Set&lt;T&gt; &amp; obj)\n    {\n        obj.Print(out);\n        return out;\n    }\n\nprivate:\n    std::set&lt;T&gt; mSet;\n\n};\n</code></pre>\n\n<p>Is anyone able to fix the problem?\nI'm really despairing...</p>\n"}, {"tags": ["c++", "boost", "zlib"], "comments": [{"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1449087525, "post_id": 34049802, "comment_id": 55858719, "body": "That means that you are getting a partial zlib stream. You haven&#39;t said what happens you try to decompress it."}, {"owner": {"reputation": 1619, "user_id": 2219196, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MrlNM.jpg?s=128&g=1", "display_name": "aj3423", "link": "https://stackoverflow.com/users/2219196/aj3423"}, "reply_to_user": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1449146771, "post_id": 34049802, "comment_id": 55885724, "body": "@MarkAdler. The code crashes, I tried to debug the code but failed to understand the code of boost zlib. I&#39;ve updated the post with more info."}], "owner": {"reputation": 1619, "user_id": 2219196, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/MrlNM.jpg?s=128&g=1", "display_name": "aj3423", "link": "https://stackoverflow.com/users/2219196/aj3423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 854, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449146499, "creation_date": 1449079323, "last_edit_date": 1449146499, "question_id": 34049802, "link": "https://stackoverflow.com/questions/34049802/decompress-zlib-with-boost-library", "title": "decompress zlib with boost library", "body": "<p>I'm working with XMPP protocol which is zlib compressed, I want to know how to decompress(and compress) its zlib data with boost library. The zlib data is ended with \"00 00 FF FF\", I googled it and found some keyword about sync/flush. There is a line in boost's zlib.hpp:</p>\n\n<pre><code>BOOST_IOSTREAMS_DECL extern const int sync_flush;\n</code></pre>\n\n<p>But I can't find any document about using it.</p>\n\n<p>The sample packets captured from a third-part program:\n<a href=\"https://i.stack.imgur.com/3HqmG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3HqmG.png\" alt=\"XMPP packet with zlib encryption\"></a></p>\n\n<p>I guess packet <em>38</em> and <em>39</em>, totally 275 bytes contain all the zlib data, because packet 41 is server response, is it correct?</p>\n\n<p>Here's my code to decompress the above packet, but it crashes.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#include &lt;boost/iostreams/filtering_streambuf.hpp&gt;\n#include &lt;boost/iostreams/copy.hpp&gt;\n#include &lt;boost/iostreams/device/back_inserter.hpp&gt;\n#include &lt;boost/iostreams/filter/zlib.hpp&gt;\n\nstd::string zlib_decompress(const std::string&amp; data) {\n    using namespace boost;\n    using namespace boost::iostreams;\n\n    boost::iostreams::filtering_streambuf&lt;boost::iostreams::input&gt;in;\n    in.push(boost::iostreams::zlib_decompressor());\n    in.push(boost::make_iterator_range(data));\n    std::string decompressed;\n    boost::iostreams::copy(in, boost::iostreams::back_inserter(decompressed));\n    return decompressed;\n}\n\nint main() {\n    // the 275 bytes data \n    string s(\"\\x78\\x9c\\x2c\\x8b\\x41\\x0a\\xc0\\x20\\x0c\\xc0\\xbe\\x22\\x7d\\x80\\x6e\\x57\\x99\\xfb\\x8b\\x4a\\x99\\x0e\\xb5\\xa3\\x2d\\xc3\\xe7\\xef\\xe0\\x4e\\x81\\x90\\x1c\\xa2\\x8c\\xb1\\xfb\\x05\\xa3\\x14\\x00\\xa3\\x60\\xa7\\x64\\x33\\x75\\x30\\xb3\\xb7\\x21\\x01\\xee\\x98\\x12\\xb2\\xcf\\xad\\xe2\\xd0\\xdf\\xfe\\x4f\\x80\\xa2\\xfa\\x78\\xe7\\x50\\x0b\\xf2\\xb4\\x2b\\xb5\\xc4\\x97\\x5b\\x81\\x80\\x79\\x91\\xa5\\xd2\\x08\\xb0\\xdb\\x0d\\xce\\x0f\\x00\\x00\\xff\\xff\\x3c\\x8f\\xc9\\x0a\\xc2\\x30\\x18\\x84\\x5f\\x45\\xbc\\x8b\\x5d\\x14\\xa4\\x54\\x21\\xa5\\x41\\x03\\xfe\\xa9\\x95\\x88\\xe8\\x2d\\x8d\\x95\\x9a\\x2e\\x84\\x2e\\x36\\xcd\\xd3\\x9b\\x5e\\x3c\\x7c\\x0c\\x0c\\xcc\\x0c\\x13\\xf2\\xa1\\x2f\\x16\\x75\\x2e\\x0a\\xde\\x7c\\x3a\\x5b\\x70\\x39\\x23\\x42\\xff\\x5b\\x43\\xdb\\x04\\x9f\\xbc\\x7f\\x07\\x8a\\xb7\\x36\\x1d\\x58\\x3b\\x68\\x66\\x51\\x6a\\xd5\\xf1\\xae\\x5a\\x1e\\x84\\xaf\\xfa\\xcc\\x73\\x0b\\xe2\\x47\\x9d\\x38\\xa9\\x37\\x48\\xa4\\x29\\xc3\\x1a\\x64\\x39\\x81\\x21\\xda\\x32\\x52\\xf9\\x74\\x5e\\x06\\x0c\\x8d\\x1f\\x4e\\x82\\x22\\x93\\xd7\\xee\\x37\\xbb\\x63\\x29\\x8e\\x7a\\xcc\\xab\\xdd\\x04\\x31\\x76\\x81\\xe1\\x29\\x61\\xc4\\x80\\xc4\\x16\\xe4\\xd1\\xe6\\xea\\x83\\x01\\x87\\xca\\x74\\x83\\x62\\x32\\x02\\xbb\\x69\\x60\\x64\\x0b\\x12\\x26\\x60\\x33\\xc2\\x7d\\x9d\\x84\\x6d\\x4d\\x3d\\x1a\\x97\\xfb\\x70\\x3d\\x3f\\x39\\xfc\\x00\\x00\\x00\\xff\\xff\", 275);\n    cout &lt;&lt; zlib_decompress(s) &lt;&lt; endl; // it crashes\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "reference", "primitive-types"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1449078923, "post_id": 34049593, "comment_id": 55853862, "body": "You could look at the assembly code. The compiler would probably remove everything."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449078942, "post_id": 34049593, "comment_id": 55853872, "body": "Why do you need an extra reference to the variable in the first place? You could just write <code>int_fun(test[0])</code>."}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449079093, "post_id": 34049593, "comment_id": 55853962, "body": "@tobi303 You are right, it is for clarity only - sometimes function takes a lot of arguments, and each argument is of form var.GetAnotherVar().GetSomethingElse().value(), so it is easier to break it up a little - maybe it is just a personal preference."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449079115, "post_id": 34049593, "comment_id": 55853978, "body": "If it was an object but not an int, it would definitely make a difference, as the constructore might have side effects"}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449080869, "post_id": 34049593, "comment_id": 55854996, "body": "@Jarod42 Thanks, definitely - I will update the question"}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1449080947, "post_id": 34049593, "comment_id": 55855050, "body": "@juanchopanza Yes, but that would be for specific compiler - I was looking if there is some general wisdom that can be  applied universally."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449079193, "post_id": 34049737, "comment_id": 55854029, "body": "This answer the question in the title when its taken literally, but OP was asking for possible difference in performance."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449079258, "post_id": 34049737, "comment_id": 55854062, "body": "@tobi303: The difference in performance is obvious if you note that you are saving calls to external, possibly expensive, functions, such as <code>map::operator[]</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449079381, "post_id": 34049737, "comment_id": 55854149, "body": "you are making up your own examples, in the OPs code there is neither a map, nor do his two versions differ in the number of calls to &quot;external&quot; functions."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": -1, "last_activity_date": 1449079203, "last_edit_date": 1449079203, "creation_date": 1449079093, "answer_id": 34049737, "question_id": 34049593, "link": "https://stackoverflow.com/questions/34049593/does-local-reference-to-int-provide-any-benefit/34049737#34049737", "title": "Does local reference to int provide any benefit?", "body": "<p>Using references to local values is sometimes useful, even if they are basic types, if they are inside more complex types, so that you can use the reference as a read/write shortcut to the real variable. The trick here is the <em>write</em> part. If there is no need to modify the variable, then copying the value is just as good.</p>\n\n<p>Take for example a more convoluted code:</p>\n\n<pre><code>void fun()\n{\n     vector&lt;int&gt; test;\n     //fill test with a lot of values\n     for (int i=0; i &lt; test.size(); ++i)\n     {\n         int &amp;x = test[i]; //&lt;-- handy reference!\n         if (x &gt; i)\n             ++x;\n         else if (x &lt; i)\n             --x;                \n     }\n}\n</code></pre>\n\n<p>If you want to write the same logic without the reference, you'd have to use the <code>vector::operator[](int)</code> at least twice!</p>\n\n<p>Change the <code>vector</code> into a <code>map</code> and things are even more interesting:</p>\n\n<pre><code>void fun()\n{\n    map&lt;string, int&gt; keys;\n    //fill keys\n    int &amp;x = keys[\"foo\"];\n    ++x;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1449079136, "creation_date": 1449079136, "answer_id": 34049752, "question_id": 34049593, "link": "https://stackoverflow.com/questions/34049593/does-local-reference-to-int-provide-any-benefit/34049752#34049752", "title": "Does local reference to int provide any benefit?", "body": "<p>Code for clarity.  For non-trivial code, sometimes using a reference to a container member makes for clearer code.  Also, I may do this when passing in a smart pointer to a function.  Inside the function, I will dereference it once by assigning it to a reference and use that reference throughout the function.\nWhat this does is make it clearer and avoid copying the object.  For built in types, I would just use an assignment and avoid the reference.</p>\n\n<p>If you really need every once of performance, then you can look at assembly language code produced.  And after that, profile it.</p>\n"}, {"comments": [{"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 0, "creation_date": 1449081114, "post_id": 34049829, "comment_id": 55855135, "body": "Thanks. I updated the question with const to avoid this ambiguity."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1449079399, "creation_date": 1449079399, "answer_id": 34049829, "question_id": 34049593, "link": "https://stackoverflow.com/questions/34049593/does-local-reference-to-int-provide-any-benefit/34049829#34049829", "title": "Does local reference to int provide any benefit?", "body": "<p>Under the circumstances you give, I see little real advantage. I suspect most compilers would produce identical code for the two under most circumstances (at least with optimization enabled). I think the reference makes the intent a little more clear though: that the real intent is to pass the original object to the function, and you're just creating and passing an alias to that object for whatever reason.</p>\n\n<p>Under slightly different circumstances, there could be a real difference in behavior though. The obvious one would be if the function received a reference:</p>\n\n<pre><code>void int_fun(int &amp;val);\n\nvoid another_fun() {\n    vector&lt;int&gt; test(1, 1);\n    int &amp;int_val = test[0];\n    int_fun(int_val);\n}\n</code></pre>\n\n<p>In this case, <code>int_fun</code> might modify the value to which it received the reference, so if you created a reference, then passed that by reference, the references would be collapsed, so the function could modify the value in the array (but if you created a copy, then passed it by reference, the copy would be modified instead of the original).</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1449082041, "last_edit_date": 1449082041, "creation_date": 1449079471, "answer_id": 34049853, "question_id": 34049593, "link": "https://stackoverflow.com/questions/34049593/does-local-reference-to-int-provide-any-benefit/34049853#34049853", "title": "Does local reference to int provide any benefit?", "body": "<p>The code sample that you are showing is a micro-optimization (or a micro-de-optimization, whatever the case may be) because the cost of making a single copy of a primitive is extremely cheap on modern hardware; same goes for making a reference to a primitive. The cost fades in comparison with the cost of invoking a function that does anything of interest.</p>\n\n<p>However, a very simple change to your example demonstrates a situation when making a reference to a primitive becomes beneficial, because you can assign them back.</p>\n\n<p>Here is your example modified to use <code>std::map&lt;std::string,int&gt;</code> in place of <code>std::vector&lt;int&gt;</code>:</p>\n\n<pre><code>std::map&lt;std::string,int&gt; cache;\n\nint compute_new(int old) {\n    return old+1;\n}\n\nvoid fun_with_ref(const std::string&amp; key) {\n    int&amp; int_ref = cache[key];\n    int_ref = compute_new(int_ref);\n}\n\nvoid fun_with_val(const std::string&amp; key) {\n    int int_val = cache[key];\n    cache[key] = compute_new(int_val);\n}\n</code></pre>\n\n<p>Note how <code>fun_with_ref</code> performs a single lookup by <code>key</code>, while <code>fun_with_val</code> requires two lookups. The access time of <code>std::map&lt;std::string,ing&gt;</code> grows as O(log<sub>2</sub>N), so the savings may become significant when the map grows to a large size.</p>\n\n<p>A <a href=\"http://ideone.com/0A2V5X\" rel=\"nofollow\">quick micro-benchmark</a> shows that the code that uses references with a map of 1,000,000 entries is nearly twice as fast as the code using values.</p>\n\n<pre><code>vector&lt;string&gt; keys;\nfor (int i = 0 ; i != 1000000 ; i++) {\n    auto key = to_string(i);\n    cache[key] = i;\n    keys.push_back(key);\n}\nauto ms1 = duration_cast&lt; milliseconds &gt;(\n    system_clock::now().time_since_epoch()\n).count();\nfor (const string&amp; key : keys) {\n    fun_with_ref(key);\n}\nauto ms2 = duration_cast&lt; milliseconds &gt;(\n    system_clock::now().time_since_epoch()\n).count();\nfor (const string&amp; key : keys) {\n    fun_with_val(key);\n}\nauto ms3 = duration_cast&lt; milliseconds &gt;(\n    system_clock::now().time_since_epoch()\n).count();\ncout &lt;&lt; \"Ref: \" &lt;&lt; (ms2-ms1) &lt;&lt; endl;\ncout &lt;&lt; \"Val: \" &lt;&lt; (ms3-ms2) &lt;&lt; endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Ref: 557\nVal: 1064\n</code></pre>\n"}], "owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 34049829, "answer_count": 4, "score": 1, "last_activity_date": 1449082041, "creation_date": 1449078623, "last_edit_date": 1449080987, "question_id": 34049593, "link": "https://stackoverflow.com/questions/34049593/does-local-reference-to-int-provide-any-benefit", "title": "Does local reference to int provide any benefit?", "body": "<p>Consider following two code samples:</p>\n\n<pre><code>void int_fun(int val) {}\n\nvoid another_fun() {\n    vector&lt;int&gt; test(1, 1);\n    const int&amp; int_ref = test[0];\n    int_fun(int_ref);\n}\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>void int_fun(int val) {}\n\nvoid another_fun() {\n    vector&lt;int&gt; test(1, 1);\n    const int int_val = test[0];\n    int_fun(int_val);\n}\n</code></pre>\n\n<p>Is it true that compiler can implement int_ref as no op, while in second case it will have to create a copy of test[0]? Or copy can be optimized out in second case too, and these two samples are equivalent in performance?</p>\n\n<p>Example and question is motivated by the fact that sometimes for code clarity it is beneficial to create local object that would be right away passed to some function like in example. </p>\n\n<p>Does using reference for primitive types (such as int, bool, etc) provide any benefit in such case, or reference and value are equivalent (or perhaps value is even better)?</p>\n"}, {"tags": ["c++", "c", "file", "floating-accuracy"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1449078667, "post_id": 34049530, "comment_id": 55853723, "body": "because <code>%Lf</code> literally means a number with up to six point precision. use standard <code>%f</code> instead"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1449078756, "post_id": 34049530, "comment_id": 55853768, "body": "This is using C function <code>frpintf()</code> so added <code>C</code> to get the appropriate audience."}, {"owner": {"reputation": 387, "user_id": 3481478, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5480528a062081d64c103c6966ef27f0?s=128&d=identicon&r=PG&f=1", "display_name": "user3481478", "link": "https://stackoverflow.com/users/3481478/user3481478"}, "edited": false, "score": 0, "creation_date": 1449078772, "post_id": 34049530, "comment_id": 55853784, "body": "Well, that is for writing into the file. When i am printing into the terminal its giving the same value."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1449078816, "post_id": 34049530, "comment_id": 55853808, "body": "Try <code>%Lg</code> or <code>%.20Lg</code> instead of <code>%Lf</code> in <code>fprintf</code> - does this help?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1449078880, "post_id": 34049530, "comment_id": 55853841, "body": "If you read a scientific notation number but write a fixed point one, this is the expected behavior."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1449078944, "post_id": 34049530, "comment_id": 55853873, "body": "Also, maybe you should clarify what you expected to get. I mean, literally write which output you want to get (<a href=\"https://stackoverflow.com/posts/34049530/edit\">edit</a> your question)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449079039, "post_id": 34049530, "comment_id": 55853925, "body": "Is the result displayed the result of &#39;cout&#39; or the file &#39;output&#39; ?"}, {"owner": {"reputation": 387, "user_id": 3481478, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5480528a062081d64c103c6966ef27f0?s=128&d=identicon&r=PG&f=1", "display_name": "user3481478", "link": "https://stackoverflow.com/users/3481478/user3481478"}, "edited": false, "score": 0, "creation_date": 1449079604, "post_id": 34049530, "comment_id": 55854278, "body": "I think &#39;%Lg&#39; works! Thanks :) What does it specify though?"}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 5, "last_activity_date": 1449079530, "last_edit_date": 1449079530, "creation_date": 1449079058, "answer_id": 34049722, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision/34049722#34049722", "title": "Long double not giving the required precision", "body": "<p>Try printing the values as <code>fixed</code></p>\n\n<p><a href=\"http://www.cplusplus.com/reference/iomanip/setprecision/\" rel=\"nofollow\">http://www.cplusplus.com/reference/iomanip/setprecision/</a><br>\n<a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/printf/</a></p>\n\n<pre><code> std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(10) &lt;&lt; value &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Definition:</p>\n\n<pre><code> fixed:       the value is represented with exactly as many digits in\n              the decimal part as specified by the precision field\n              (precision) and with no exponent part.\n\n scientific:  as many decimal digits as the precision field\n              (precision). Finally, this notation always includes an\n              exponential part consisting on the letter e followed by\n              an optional sign and three exponential digits.\n</code></pre>\n\n<p>For printing in C:</p>\n\n<pre><code>  fprintf(fp2, \"%.10f\\n\", value);\n</code></pre>\n\n<p>The definition of the format specifier is:</p>\n\n<pre><code>  %[flags][width][.precision][length]specifier\n\n  Precision: For a, A, e, E, f and F specifiers: this is the number\n             of digits to be printed after the decimal point.\n</code></pre>\n\n<p>So to achieve the same format in C++ as you get with C(%f) you need to use <code>std::fixed</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 707, "user_id": 1191041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6edf84b51543211a48ea137390a4faab?s=128&d=identicon&r=PG", "display_name": "maddin45", "link": "https://stackoverflow.com/users/1191041/maddin45"}, "is_accepted": false, "score": 2, "last_activity_date": 1449079428, "creation_date": 1449079428, "answer_id": 34049840, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision/34049840#34049840", "title": "Long double not giving the required precision", "body": "<p>If you want <code>fprintf</code> to print ten digits after the dot you have to write <code>%.10f</code> in the formatting string. The precision of <code>cout</code> does not influence <code>fprintf</code>.</p>\n\n<p>And you have to pass the IO manipulator <code>fixed</code> to <code>cout</code> before the numbers for it to take effect. Otherwise the first number you print will not be in fixed precition.</p>\n\n<pre><code>cout &lt;&lt; fixed &lt;&lt; numberlist[j] &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1449079819, "last_edit_date": 1495539880, "creation_date": 1449079819, "answer_id": 34049967, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision/34049967#34049967", "title": "Long double not giving the required precision", "body": "<p>To see the number in <code>C</code> in exponential notation (scientific) with 5 places after the decimal point use <code>\"%e\"</code>.</p>\n\n<pre><code>fprintf(fp2,\"%.5Le\\n\",numberlist[j]);\nfprintf(fp2,\"%.*Le\\n\", 5, numberlist[j]);\nfprintf(fp2,\"%.Le\\n\",numberlist[j]);  // If not precision give, defaults to 6.\n</code></pre>\n\n<p>To see a FP value in <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision</a> use</p>\n\n<pre><code>#include &lt;float.h&gt;\n\nfprintf(fp2,\"%.*Le\\n\", LDBL_DECIMAL_DIG - 1, numberlist[j]);\n// or simply in hexadecimal notation\nfprintf(fp2,\"%.*La\\n\", numberlist[j]);\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3481478, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5480528a062081d64c103c6966ef27f0?s=128&d=identicon&r=PG&f=1", "display_name": "user3481478", "link": "https://stackoverflow.com/users/3481478/user3481478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 34049967, "answer_count": 3, "score": 2, "last_activity_date": 1449085068, "creation_date": 1449078435, "last_edit_date": 1592644375, "question_id": 34049530, "link": "https://stackoverflow.com/questions/34049530/long-double-not-giving-the-required-precision", "title": "Long double not giving the required precision", "body": "<p>I am reading from a file which has values to a precision of 7 digits in the terms of exponential values</p>\n<blockquote>\n<p>4.81591e-007</p>\n<p>5.17968e-007</p>\n<p>5.03954e-008</p>\n<p>-8.30735e-007</p>\n</blockquote>\n<p>Though the values I am getting is with only a 5 point precision</p>\n<blockquote>\n<p>0.000000</p>\n<p>0.000001</p>\n<p>0.000000</p>\n<p>-0.000001</p>\n<p>-0.000002</p>\n</blockquote>\n<p>The code is as follows and is</p>\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;utility&gt; \n#include&lt;algorithm&gt;\n#include&lt;map&gt;\n#include&lt;cmath&gt;\n#include&lt;sstream&gt;\n#include&lt;string&gt;\n#include&lt;queue&gt;\n#include&lt;cstdlib&gt;\n#include&lt;cstdio&gt;\n#include&lt;fstream&gt;\nusing namespace std;    \nint main()\n{\n    FILE *fp2;\n    fp2=fopen(&quot;output&quot;,&quot;w&quot;);\n    int i=0;\n    ifstream myFile;\n    myFile.open(&quot;sruthi_DATA_.txt&quot;);\n    vector&lt;long double&gt;numberlist;\n    long double number;\n    while(myFile &gt;&gt; number){    //\n            numberlist.push_back(number);\n            i++;\n    }\n    int j;\n    for(j=0;j&lt;i;j++)\n    {\n        cout.precision(10);\n        cout&lt;&lt;numberlist[j]&lt;&lt;fixed&lt;&lt;endl;\n        fprintf(fp2,&quot;%Lf\\n&quot;,numberlist[j]);\n    }\n    fclose(fp);\n    fclose(fp2);\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "stl", "generic-programming", "c++-standard-library"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449078587, "post_id": 34049447, "comment_id": 55853681, "body": "You should bookmark this site: <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">en.cppreference.com/w</a> for future use."}], "answers": [{"tags": [], "owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "is_accepted": true, "score": 9, "last_activity_date": 1449078608, "last_edit_date": 1449078608, "creation_date": 1449078442, "answer_id": 34049533, "question_id": 34049447, "link": "https://stackoverflow.com/questions/34049447/difference-between-copy-backward-and-reverse-copy/34049533#34049533", "title": "Difference between copy_backward and reverse_copy?", "body": "<p><code>reverse_copy</code> actually puts the elements in reverse order.</p>\n\n<pre><code>1 2 3 4 5 - &gt; 5 4 3 2 1 \n</code></pre>\n\n<p><code>copy_backward</code> simply copies the elements backwards, but preserves their relative order.</p>\n\n<pre><code>1 2 3 4 5 \n</code></pre>\n\n<p>5 is copied first, but put in the last spot. So your output is still:</p>\n\n<pre><code>1 2 3 4 5\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/copy_backward\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/algorithm/copy_backward</a></p>\n\n<blockquote>\n  <p>Copies the elements from the range, defined by [first, last), to another range ending at d_last. The elements are copied in reverse order (the last element is copied first), <strong>but their relative order is preserved</strong>.</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/reverse_copy\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/algorithm/reverse_copy</a></p>\n\n<blockquote>\n  <p>Copies the elements from the range [first, last) to another range beginning at d_first in such a way that the elements in the new range <strong>are in reverse order.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1449078606, "last_edit_date": 1449078606, "creation_date": 1449078481, "answer_id": 34049547, "question_id": 34049447, "link": "https://stackoverflow.com/questions/34049447/difference-between-copy-backward-and-reverse-copy/34049547#34049547", "title": "Difference between copy_backward and reverse_copy?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/copy_backward\" rel=\"nofollow\"><code>std::copy_backwards</code></a> does:</p>\n\n<blockquote>\n  <p>Copies the elements from the range, defined by [first, last), to another range ending at d_last. The elements are copied in reverse order (the last element is copied first), but their relative order is preserved.</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/reverse_copy\" rel=\"nofollow\"><code>std::reverse_copy</code></a></p>\n\n<blockquote>\n  <p>Copies the elements from the range [first, last) to another range beginning at d_first in such a way that the elements in the new range are in reverse order.</p>\n</blockquote>\n\n<p>So the difference is that <code>std::copy_backwards</code> start copying at the end and works backwards, keeping original positioning, whereas <code>std::reverse_copy</code> starts copying at the beginning going forward, but puts them in the reverse order.</p>\n"}], "owner": {"reputation": 2169, "user_id": 1311827, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0a1d005e0309fe9522853ebd7e5d60da?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1311827/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 1, "accepted_answer_id": 34049533, "answer_count": 2, "score": 7, "last_activity_date": 1449078608, "creation_date": 1449078163, "question_id": 34049447, "link": "https://stackoverflow.com/questions/34049447/difference-between-copy-backward-and-reverse-copy", "title": "Difference between copy_backward and reverse_copy?", "body": "<p>I am reading C++ primer and saw these two functions that seem to have the same functionality. Could anyone help and tell me what is the difference between the two? Thanks.</p>\n"}, {"tags": ["c++", "qt", "cmake", "makefile"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1449078959, "post_id": 34049155, "comment_id": 55853883, "body": "Probably, you have exceeded line break in <code>CPACK_VERSION_MAJOR</code> variable. Try your code with hardcoded <code>V_MAJOR=3</code> definition."}, {"owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1449079103, "post_id": 34049155, "comment_id": 55853971, "body": "Yeah, I just thought of that too now.  I see the problem and posting it below."}], "answers": [{"tags": [], "owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "is_accepted": false, "score": 2, "last_activity_date": 1449079252, "creation_date": 1449079252, "answer_id": 34049780, "question_id": 34049155, "link": "https://stackoverflow.com/questions/34049155/cmake-target-compile-definitions-and-target-link-libraries-clash-maybe-with-qt/34049780#34049780", "title": "cmake target_compile_definitions and target_link_libraries clash, maybe with Qt lines?", "body": "<p>Found issue: I was reading in version number from a file. </p>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>file(READ Version.txt VersionString)\nstring(REPLACE \".\" \";\" VersionList ${VersionString})\nlist(LENGTH VersionList listLen)\nlist(GET VersionList 0 CPACK_PACKAGE_VERSION_MAJOR)\nlist(GET VersionList 1 CPACK_PACKAGE_VERSION_MINOR)\nlist(GET VersionList 2 CPACK_PACKAGE_VERSION_PATCH)\n</code></pre>\n\n<p>etc.\nThe newline at the end of the string was not immediately obvious, but carried through along the 'patch' version variable. That inserted the newline into the make file and messed everything up. </p>\n\n<hr>\n\n<p>Edit: adding <code>string(STRIP ${VersionString} VersionString)</code> fixed it.</p>\n"}], "owner": {"reputation": 713, "user_id": 665498, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/geOHR.jpg?s=128&g=1", "display_name": "shavera", "link": "https://stackoverflow.com/users/665498/shavera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449079252, "creation_date": 1449077249, "last_edit_date": 1592644375, "question_id": 34049155, "link": "https://stackoverflow.com/questions/34049155/cmake-target-compile-definitions-and-target-link-libraries-clash-maybe-with-qt", "title": "cmake target_compile_definitions and target_link_libraries clash, maybe with Qt lines?", "body": "<p>Linux Mint 17.2 / clang 3.4 / CMake 3.2.2</p>\n<p>I tried to simplify the problem I'm having to some dummy program, but that hasn't worked. (ie the problem doesn't reproduce there), but here's the gist:</p>\n<p>I have a CMakeLists.txt file that has lines to the effect of:</p>\n<pre><code>add_executable(${PROJECT_NAME} main.cpp)\ntarget_link_libraries(${PROJECT_NAME) projectLib1 Qt5::Core Qt5::Widgets)\ntarget_compile_definitions(${PROJECT_NAME) PUBLIC V_MAJOR=${CPACK_VERSION_MAJOR})\n</code></pre>\n<p>and so on.</p>\n<p>When I run cmake, it generates a flags.make file:</p>\n<blockquote>\n<p>CXX_DEFINES = -DV_MAJOR=3</p>\n<p>-DQT_CORE_LIB -DQT_GUI_LIB -DQT_WIDGETS_LIB</p>\n</blockquote>\n<p>where there's a line break between the compile definitions and the definitions generated by linking to Qt.</p>\n<p>I've tried, in a smaller program, to reproduce this (linking to Qt, adding compile definitions), but it doesn't generate the same line break error.</p>\n<p>Furthermore, when I go in and manually edit the flags.make, it will compile; but I know that's really not how to use the system.</p>\n<p>Any thoughts?</p>\n<hr />\n<p>Edit: Just for clarity, when I attempt to compile, I get an error:</p>\n<blockquote>\n<p>.../flags.make:8: *** missing separator.  Stop.</p>\n</blockquote>\n<p>where 8 is the line number of the line break in that flags.make file.</p>\n"}, {"tags": ["c++", "c++11", "tuples"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1449078963, "post_id": 34049061, "comment_id": 55853887, "body": "Is there a reason you can&#39;t use C++14&#39;s <a href=\"http://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\"><code>index_sequence</code></a> instead of your own <code>IndexSeq</code>?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1449079176, "post_id": 34049061, "comment_id": 55854015, "body": "@JonathanWakely: probably because it is tagged C++11 (and repeated in title)."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449082030, "post_id": 34049061, "comment_id": 55855637, "body": "@Jarod42, but you can still use <code>integer_sequence</code> in C++11, e.g. <a href=\"https://gitlab.com/redistd/integer_seq/blob/master/integer_seq.h\" rel=\"nofollow noreferrer\">integer_seq.h</a>. That would be &quot;forward-compatible&quot; rather than re-inventing the wheel, with different spelling."}, {"owner": {"reputation": 13, "user_id": 5570258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b17a4991ccebdc96a22f6251126bbc?s=128&d=identicon&r=PG&f=1", "display_name": "user5570258", "link": "https://stackoverflow.com/users/5570258/user5570258"}, "edited": false, "score": 0, "creation_date": 1449218148, "post_id": 34049061, "comment_id": 55920496, "body": "thanks for all of your help  and I have already see what you talk about and didn&#39;t known them before ."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449079294, "post_id": 34049492, "comment_id": 55854091, "body": "An other concern is what is the expected behavior for function like <code>void foo(std::unique_ptr&lt;T&gt;)</code>."}, {"owner": {"reputation": 13, "user_id": 5570258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b17a4991ccebdc96a22f6251126bbc?s=128&d=identicon&r=PG&f=1", "display_name": "user5570258", "link": "https://stackoverflow.com/users/5570258/user5570258"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449218295, "post_id": 34049492, "comment_id": 55920567, "body": "@Jarod42   Thank you for reminding, and I was just make a practice and not have a deep consideration about it ."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": false, "score": 1, "last_activity_date": 1449078290, "creation_date": 1449078290, "answer_id": 34049492, "question_id": 34049061, "link": "https://stackoverflow.com/questions/34049061/how-unpack-tuple-for-wrapper-function-parameter-in-c11/34049492#34049492", "title": "how unpack tuple for wrapper function parameter in c++11?", "body": "<p>The below code:</p>\n\n<pre><code>template &lt;int... INDEX&gt;\nreturn_type delay_action(makeSeq&lt;INDEX...&gt;)\n{\n    return f(std::get&lt;INDEX&gt;(para)...);\n}\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>template &lt;int... INDEX&gt;\nreturn_type delay_action(IndexSeq&lt;INDEX...&gt;)\n//                       ~~~~~~~^\n{\n    return f(std::get&lt;INDEX&gt;(para)...);\n}\n</code></pre>\n\n<p>The idea behind the sequence generator that you use is that the most-derived <code>makeSeq&lt;2&gt;</code> class eventually inherits from <code>IndexSeq&lt;0, 1&gt;</code>, and what you want to be deduced is the series of numbers from <code>IndexSeq</code>, not the length of a sequence from <code>makeSeq</code> itself.</p>\n\n<p>You should also note that <code>Args</code> in <code>FuncWrapper</code> can be of a (possibly cv-qualified) lvalue reference type, so to safely store the arguments in a tuple, the tuple declaration should be as follows:</p>\n\n<pre><code>std::tuple&lt;typename std::decay&lt;Args&gt;::type...&gt; para;\n//                  ~~~~~~~~~^\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5570258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69b17a4991ccebdc96a22f6251126bbc?s=128&d=identicon&r=PG&f=1", "display_name": "user5570258", "link": "https://stackoverflow.com/users/5570258/user5570258"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449078290, "creation_date": 1449076973, "question_id": 34049061, "link": "https://stackoverflow.com/questions/34049061/how-unpack-tuple-for-wrapper-function-parameter-in-c11", "title": "how unpack tuple for wrapper function parameter in c++11?", "body": "<pre><code>//function wapper\ntemplate&lt;class F,typename...Args&gt;\nclass FuncWrapper\n{\nprivate:\n    //F return type\n    using return_type = typename std::result_of&lt;F(Args...)&gt;::type;\n\n    template&lt;int ...S&gt; struct IndexSeq {};\n    template&lt;int N, int ...S&gt; struct makeSeq : makeSeq&lt;N - 1, N - 1, S...&gt; {};\n    template&lt;int ...S&gt; struct makeSeq&lt;0, S...&gt; : IndexSeq&lt;S...&gt; {};\n\n\npublic:\n    FuncWrapper(F &amp;&amp;func,Args&amp;&amp;...args):\n        f(std::move(std::function&lt;return_type(Args...)&gt;(std::forward&lt;F&gt;(func)))),\n        para(std::make_tuple&lt;Args...&gt;(std::forward&lt;Args&gt;(args)...))\n    {}\n    ~FuncWrapper() = default;\n\n    template &lt;int... INDEX&gt;\n    return_type delay_action(makeSeq&lt;INDEX...&gt;)\n    {\n        return f(std::get&lt;INDEX&gt;(para)...);\n    }\n\n    //\n    return_type operator()()\n    {\n        return  delay_action(makeSeq&lt;sizeof...(Args)&gt;{});\n    }\n\nprivate:\n    //function\n    std::function&lt;return_type(Args...)&gt; f;\n    //parameter in the tuple\n    std::tuple&lt;Args...&gt; para;\n};\n\ntemplate&lt;class F,typename ...Args&gt;\nFuncWrapper&lt;F,Args...&gt; make_function_wapper(F &amp;&amp;f, Args&amp;&amp;...args)\n{\n    return FuncWrapper&lt;F, Args...&gt;(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>here is the question : I want to create an template class for wrapper function , and use tuple for the parameter store , but it seems that it will not work well and I cannot find why. \n    so I need some help and who can explain for it . thx for your help !</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 2, "creation_date": 1449076633, "post_id": 34048877, "comment_id": 55852473, "body": "<a href=\"http://stackoverflow.com/questions/263945/what-happens-if-you-call-erase-on-a-map-element-while-iterating-from-begin-to?rq=1\" title=\"what happens if you call erase on a map element while iterating from begin to\">stackoverflow.com/questions/263945/&hellip;</a>"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1449076638, "post_id": 34048877, "comment_id": 55852478, "body": "Perhaps you should post a <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a>."}], "answers": [{"comments": [{"owner": {"reputation": 600, "user_id": 1576961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ca89a4e878a542a8f6987a0d8f436afd?s=128&d=identicon&r=PG", "display_name": "Pasan W.", "link": "https://stackoverflow.com/users/1576961/pasan-w"}, "edited": false, "score": 0, "creation_date": 1449076795, "post_id": 34048957, "comment_id": 55852586, "body": "So what happens when the main function &quot;reaches&quot; (d,S) when it was already deleted ?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 600, "user_id": 1576961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ca89a4e878a542a8f6987a0d8f436afd?s=128&d=identicon&r=PG", "display_name": "Pasan W.", "link": "https://stackoverflow.com/users/1576961/pasan-w"}, "edited": false, "score": 1, "creation_date": 1449076908, "post_id": 34048957, "comment_id": 55852661, "body": "After you erase an element (e.g. (d, S)) that element is not part of the container anymore. You will never reach it again by iterating through the container. CARE: if you have an iterator to (d, S) obtained before the erase,  that iterator is invalidated, so you can&#39;t use it anymore."}, {"owner": {"reputation": 600, "user_id": 1576961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ca89a4e878a542a8f6987a0d8f436afd?s=128&d=identicon&r=PG", "display_name": "Pasan W.", "link": "https://stackoverflow.com/users/1576961/pasan-w"}, "edited": false, "score": 0, "creation_date": 1449077398, "post_id": 34048957, "comment_id": 55852984, "body": "But it says invalidation doesn&#39;t happen in C++ 03.. And I do get a seg fault with &quot;Double Free or Corruption&quot;"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 600, "user_id": 1576961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ca89a4e878a542a8f6987a0d8f436afd?s=128&d=identicon&r=PG", "display_name": "Pasan W.", "link": "https://stackoverflow.com/users/1576961/pasan-w"}, "edited": false, "score": 1, "creation_date": 1449077656, "post_id": 34048957, "comment_id": 55853143, "body": "@PasanW  Ofc it happens. Read again. Quoting from the answer: &#171;Erasing elements in a map does not invalidate any iterators. (<b>apart from iterators on the element that was deleted</b>)&#187;"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 600, "user_id": 1576961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ca89a4e878a542a8f6987a0d8f436afd?s=128&d=identicon&r=PG", "display_name": "Pasan W.", "link": "https://stackoverflow.com/users/1576961/pasan-w"}, "edited": false, "score": 1, "creation_date": 1449077727, "post_id": 34048957, "comment_id": 55853188, "body": "@PasanW If you get a runtime error then you either still use the iterator to the erased element, or you have another bug in your code. Post another question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> exhibiting the error."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 5, "last_activity_date": 1449076656, "creation_date": 1449076656, "answer_id": 34048957, "question_id": 34048877, "link": "https://stackoverflow.com/questions/34048877/erase-other-elements-of-stdmap-while-iterating/34048957#34048957", "title": "Erase other elements of std::map while iterating", "body": "<p>You need to read the iterator invalidation rules:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/map/erase\" rel=\"noreferrer\">std::map::erase</a></p>\n\n<blockquote>\n  <p>References and iterators to the erased elements are invalidated. Other\n  references and iterators are not affected.</p>\n</blockquote>\n\n<p>So as long as you don't use the iterator where you erased, you are good.</p>\n"}], "owner": {"reputation": 600, "user_id": 1576961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ca89a4e878a542a8f6987a0d8f436afd?s=128&d=identicon&r=PG", "display_name": "Pasan W.", "link": "https://stackoverflow.com/users/1576961/pasan-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1693, "favorite_count": 0, "accepted_answer_id": 34048957, "answer_count": 1, "score": -1, "last_activity_date": 1449076656, "creation_date": 1449076414, "question_id": 34048877, "link": "https://stackoverflow.com/questions/34048877/erase-other-elements-of-stdmap-while-iterating", "title": "Erase other elements of std::map while iterating", "body": "<p>I have a map with following key value pairs.\n{(a,P),(b,Q),(c,R),(d,S),...(g,Z)}</p>\n\n<p>I'm iterating this map and at each element I take a branch which access this same map and erase an element of the map if a condition is met.\nSimply put, it is possible that while the main iterator is at (b.Q) , the branching function can erase (d,S).</p>\n\n<p>Is this valid.? Or will this seg fault.? </p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 0, "creation_date": 1449077185, "post_id": 34048876, "comment_id": 55852855, "body": "take a look sample application <a href=\"https://github.com/Itseez/opencv/blob/master/apps/annotation/opencv_annotation.cpp\" rel=\"nofollow noreferrer\">opencv_annotation.cpp</a>."}], "answers": [{"comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1449080953, "post_id": 34050256, "comment_id": 55855053, "body": "Have you actually tried this, or it&#39;s just a guess? In the first case, please provide a working corrected code, in the second case, this answer should probably be just a comment."}], "tags": [], "owner": {"reputation": 572, "user_id": 2995747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yMwTw.jpg?s=128&g=1", "display_name": "danishansari", "link": "https://stackoverflow.com/users/2995747/danishansari"}, "is_accepted": true, "score": 2, "last_activity_date": 1449080867, "last_edit_date": 1449080867, "creation_date": 1449080757, "answer_id": 34050256, "question_id": 34048876, "link": "https://stackoverflow.com/questions/34048876/cropping-program-draws-two-rectangles-every-loop-opencv/34050256#34050256", "title": "Cropping Program draws two Rectangles every loop openCV", "body": "<p>Just declare and initialize int <code>waitKeyVar = 0;</code> outside of while loop and put \nput <code>waitKeyVar = waitKey(10);</code> at the bottom after <code>imshow(tempstr, img);</code>. </p>\n\n<p>Last rectangle might be coming because you are showing image and putting <code>waitKey</code> at different position.</p>\n"}], "owner": {"reputation": 658, "user_id": 5244410, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/c2e125721f74672d38c5dcd66aaf5bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wprins", "link": "https://stackoverflow.com/users/5244410/wprins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 34050256, "answer_count": 1, "score": 0, "last_activity_date": 1449080867, "creation_date": 1449076409, "question_id": 34048876, "link": "https://stackoverflow.com/questions/34048876/cropping-program-draws-two-rectangles-every-loop-opencv", "title": "Cropping Program draws two Rectangles every loop openCV", "body": "<p>I could probably use some pointers on my programming style (VERY recently self taught in OpenCV/C++) but the problem on hand has to do with the drawing in my cropping program.</p>\n\n<p>I click on a spot in the image, it draws a rectangle, then I can resize the rectangle and hit \"z\" to crop and save the image in a destination folder. But whenever I click anywhere in the program, it draws a new rectangle but keeps the most recent previous rectangle. So I constantly have 2 rectangles drawn at all times. I think this is maybe to do with how setMousecallback works but I am not sure. Blow is my code</p>\n\n<pre><code>#include \"opencv2/opencv.hpp\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nMat img;\nstring * strPtr;\nint width, height;\n\nvoid matResize(Mat&amp; img){\n    if(width &gt; 600 &amp;&amp; height &gt; 600){\n        int scale = width/600;\n        width = width/scale;\n        height = height/scale;\n        resize(img, img, Size(width, height));\n    }\n}\n\nvoid onMouse(int evt, int x, int y, int flags, void* param) {\n    if(evt == CV_EVENT_LBUTTONDOWN) {\n        img = imread(*strPtr);\n        transpose(img,img);\n        flip(img, img, 1);\n        width = img.cols;\n        height = img.rows;\n        matResize(img);\n\n        Point* ptPtr = (Point*)param;\n        ptPtr-&gt;x = x;\n        ptPtr-&gt;y = y;\n    }\n}\n\nint main(int argc, char* argv[])\n{\n\n    ifstream file(\"/home/willem/Desktop/Training/ThumbsUp/img4resize/files.txt\");\n    //Read each file location into a vector array\n    string str;\n    vector&lt;string&gt; fileLocations;\n    while (getline(file, str)){\n        fileLocations.push_back(str);\n    }\n\n    //Loop to process each Image\n    for(int i = 0; i &lt; fileLocations.size(); ++i){\n        //Square Properties\n        Point2i pt(0,0);\n        int X, Y;\n        int hlen = 0;\n        Rect rect;\n\n        //Image name and rotation\n        int found = fileLocations[i].find_last_of(\"/\");\n        int len = fileLocations[i].length();\n        string tempstr = fileLocations[i].substr(found+1,len-1);\n        namedWindow(tempstr);\n        img = imread(fileLocations[i]);\n        transpose(img,img);\n        flip(img, img, 1);\n        strPtr = &amp;fileLocations[i];\n\n        //resize to scale\n        width = img.cols;\n        height = img.rows;\n        matResize(img);\n\n        //Mouse Properties\n        setMouseCallback(tempstr, onMouse, (void*)&amp;pt);\n\n        //Image update loop\n        while(1){\n\n            //Update MouseClick Position\n            X = pt.x;\n            Y = pt.y;\n\n            //Set square properties\n            if(X == 0){\n                if(height &gt; width)\n                    hlen = (int)(height*(1.0/3));\n                else\n                    hlen = (int)(width*(1.0/3));\n\n                rect = Rect(X-hlen,Y-hlen,2*hlen,2*hlen);\n            }\n\n            int waitKeyVar = waitKey(10);\n            if(waitKeyVar % 255 == 129 || waitKeyVar == 133){\n                //\"q\"\n                //Skip image\n                destroyWindow(tempstr);\n                break;\n            }\n            cout &lt;&lt; waitKeyVar % 255 &lt;&lt; endl;\n            if(waitKeyVar == 119 || waitKeyVar % 255 == 135){\n                //\"w\"\n                //Resize rect -5%\n                hlen = hlen*0.95;\n            }\n            if(waitKeyVar == 101 || waitKeyVar % 255 == 117){\n                //\"e\"\n                //resize rect +5%\n                hlen = hlen*1.05;\n            }\n\n            if(waitKeyVar == 122 || waitKeyVar % 255 == 138){\n                //\"z\"\n                //crop and save image\n                Mat cropped = img(Rect(X-hlen,Y-hlen, 2*hlen, 2*hlen));\n                string destination = \"/home/willem/Desktop/AdMobilize/Training/ThumbsUp/New Positives/\";             //Configure output here\n                string final = destination + tempstr;\n                imwrite(final, cropped);\n                destroyWindow(tempstr);\n                break;\n            }\n\n            //draw Rectangle\n            rectangle(img, Rect(X-hlen,Y-hlen, 2*hlen, 2*hlen), Scalar(255,255,255), 2,8,0);\n\n            //display Image\n            imshow(tempstr, img);\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449075947, "post_id": 34048692, "comment_id": 55852006, "body": "What is <code>ActionLink</code> and <code>ILink</code>?"}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449076071, "post_id": 34048692, "comment_id": 55852097, "body": "Sorry. Was real code. Now fixed!"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1449076157, "post_id": 34048692, "comment_id": 55852168, "body": "What&#39;s your question, exactly? The two lines you showed attempt to do completely different things. The second allocates a new object, while the first only creates a shared pointer to the current object."}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1449076940, "post_id": 34048692, "comment_id": 55852685, "body": "@interjay but that another object again points on <code>this</code> and my point is make another shared pointer that shows on <code>this</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1449077403, "post_id": 34048692, "comment_id": 55852987, "body": "<code>std::make_shared</code> allocates a new managed object, different from <code>*this</code>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1449077406, "post_id": 34048692, "comment_id": 55852989, "body": "What is <code>std::make_shared&lt;A&gt;(shared_from_this())</code> supposed to do? Have you tried compiling this code? That might answer your question."}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1449077653, "post_id": 34048692, "comment_id": 55853141, "body": "@JonathanWakely it compiles just on Xcode."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1449077812, "post_id": 34048692, "comment_id": 55853231, "body": "@Narek, No it doesn&#39;t! <code>shared_from_this()</code> returns <code>shared_ptr&lt;A&gt;</code> and <code>A</code> has no constructor that takes <code>shared_ptr&lt;A&gt;</code>. Whatever you think compiles with Xcode is <b>not</b> the code you&#39;ve shown above."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 3, "creation_date": 1449078197, "post_id": 34048692, "comment_id": 55853455, "body": "<i>\u201cSo why this constructor does not help?\u201d</i> \u2013 Because you&#39;re now going the other way round. A <code>B *</code> is implicitly convertible to an <code>A *</code> but an <code>A *</code> does not convert implicitly to a <code>B *</code>. So the constructor does not participate in overload resolution."}], "answers": [{"comments": [{"owner": {"reputation": 982, "user_id": 3907990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RSNNW.jpg?s=128&g=1", "display_name": "MarkusAtCvlabDotDe", "link": "https://stackoverflow.com/users/3907990/markusatcvlabdotde"}, "reply_to_user": {"reputation": 2205, "user_id": 4851927, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/12dac37ac54f43197df820b2fc26fe6a?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Acharya", "link": "https://stackoverflow.com/users/4851927/ankit-acharya"}, "edited": false, "score": 0, "creation_date": 1449077752, "post_id": 34049144, "comment_id": 55853200, "body": "@AnkitAcharya. He is not talking about the class A and B, but about the the two different generic classes std::shared_ptr&lt;A&gt; and std::shared_ptr&lt;B&gt;, which are indeed totally different classes."}], "tags": [], "owner": {"reputation": 6122, "user_id": 1714762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e27901840ca85707727f5ed339ad31f?s=128&d=identicon&r=PG", "display_name": "Jean-Bernard Jansen", "link": "https://stackoverflow.com/users/1714762/jean-bernard-jansen"}, "is_accepted": false, "score": 5, "last_activity_date": 1449077216, "creation_date": 1449077216, "answer_id": 34049144, "question_id": 34048692, "link": "https://stackoverflow.com/questions/34048692/stdstatic-pointer-cast-vs-static-caststdshared-ptra/34049144#34049144", "title": "std::static_pointer_cast vs static_cast&lt;std::shared_ptr&lt;A&gt;&gt;", "body": "<p>Long story short: <code>std::shared_ptr&lt;A&gt;</code> is <strong>not</strong> a parent of <code>std::shared_ptr&lt;B&gt;</code>. That is the whole point of <code>static_pointer_cast</code> existence.</p>\n"}, {"comments": [{"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1449077807, "post_id": 34049293, "comment_id": 55853229, "body": "Have you looked at my <code>EDIT</code> of my question?"}, {"owner": {"reputation": 982, "user_id": 3907990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RSNNW.jpg?s=128&g=1", "display_name": "MarkusAtCvlabDotDe", "link": "https://stackoverflow.com/users/3907990/markusatcvlabdotde"}, "edited": false, "score": 0, "creation_date": 1449077903, "post_id": 34049293, "comment_id": 55853274, "body": "The only way to static_cast between objects of classes having no relationship with each other, is the use of conversion operators."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1449077924, "post_id": 34049293, "comment_id": 55853288, "body": "@Narek, yes, see the updated answer, and read the docs of the constructor you&#39;re asking about! And read the answer to your other question!"}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1449078027, "post_id": 34049293, "comment_id": 55853353, "body": "So the only reason is upcasting, if I got you right."}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "reply_to_user": {"reputation": 982, "user_id": 3907990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RSNNW.jpg?s=128&g=1", "display_name": "MarkusAtCvlabDotDe", "link": "https://stackoverflow.com/users/3907990/markusatcvlabdotde"}, "edited": false, "score": 0, "creation_date": 1449078051, "post_id": 34049293, "comment_id": 55853364, "body": "@MarkusAtCvlabDotDe conversion operators and CTORs too."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 11, "last_activity_date": 1449078189, "last_edit_date": 1449078189, "creation_date": 1449077703, "answer_id": 34049293, "question_id": 34048692, "link": "https://stackoverflow.com/questions/34048692/stdstatic-pointer-cast-vs-static-caststdshared-ptra/34049293#34049293", "title": "std::static_pointer_cast vs static_cast&lt;std::shared_ptr&lt;A&gt;&gt;", "body": "<p>You can't cast <code>shared_ptr&lt;A&gt;</code> to <code>shared_ptr&lt;B&gt;</code> because there is no inheritance relationship between the types. For the same reason you can't cast <code>vector&lt;A&gt;</code> to <code>vector&lt;B&gt;</code>.</p>\n\n<p>Instantiating a class template with related types does not make the template instantiations also related.</p>\n\n<p>The <code>shared_ptr&lt;T&gt;(const shared_ptr&lt;Y&gt;&amp;)</code> constructor doesn't help because it is only usable if <code>Y*</code> is implicitly convertible to <code>T*</code>, i.e. it is there to support the same pointer conversions as would happen implicitly, like <code>B*</code> to <code>A*</code>, <em>not</em> <code>A*</code> to <code>B*</code>.</p>\n\n<p>What you <em>can</em> do is this:</p>\n\n<pre><code>shared_ptr&lt;A&gt; thisA = shared_from_this();\nshared_ptr&lt;B&gt; thisB(thisA, static_cast&lt;B*&gt;(thisA.get()));\n</code></pre>\n\n<p>This creates a <code>shared_ptr&lt;B&gt;</code> that <em>shares ownership</em> with <code>thisA</code>, and holds the pointer <code>static_cast&lt;B*&gt;(thisA.get())</code></p>\n\n<p>That is exactly what <code>static_pointer_cast&lt;B&gt;(thisA)</code> does, but the aliasing constructor used above was added to <code>shared_ptr</code> later, so didn't exist when <code>static_pointer_cast</code> was invented, and it is also much less clear what it is doing. <code>static_pointer_cast</code> is much more expressive. If you want to perform a static cast on the pointer types, use <code>static_pointer_cast</code>.</p>\n"}], "owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8002, "favorite_count": 2, "accepted_answer_id": 34049293, "answer_count": 2, "score": 5, "last_activity_date": 1449078189, "creation_date": 1449075857, "last_edit_date": 1495542831, "question_id": 34048692, "link": "https://stackoverflow.com/questions/34048692/stdstatic-pointer-cast-vs-static-caststdshared-ptra", "title": "std::static_pointer_cast vs static_cast&lt;std::shared_ptr&lt;A&gt;&gt;", "body": "<p>I have a class hierarchy and in it <code>B</code> is derived from <code>A</code> like this:</p>\n\n<pre><code>class A : public std::enable_shared_from_this&lt;A&gt;\n{\n\n};\n\nclass B : public A\n{\n   void f()\n   {\n        // the code below compiles\n        std::shared_ptr&lt;B&gt; copyOfThis = std::static_pointer_cast&lt;B&gt;(shared_from_this()); \n        // the code below does not\n        std::shared_ptr&lt;B&gt; copyOfThis = static_cast&lt;std::shared_ptr&lt;B&gt;&gt;(std::make_shared&lt;A&gt;(shared_from_this()));\n}\n};\n</code></pre>\n\n<p>So actually I want to understand why I cannot use <code>static_cast</code>to cast a <code>shared_ptr</code> of parent class to child class when it is actually contains <code>this</code> of child.</p>\n\n<p>EDIT: Look at this question: <a href=\"https://stackoverflow.com/questions/33632549/polymorphic-smart-pointer-usage\">Polymorphic smart pointer usage</a> Here I have asked why shared pointer of child can be casted on shared pointer of parent. And the answer is there is a template constructor. See details in the question. So why this constructor does not help for casting even if there is no relationship between <code>shared_ptr&lt;A&gt;</code> and <code>shared_ptr&lt;B&gt;</code>.</p>\n"}, {"tags": ["python", "c++", "regex", "boost"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1449530819, "post_id": 34048609, "comment_id": 56038525, "body": "Note that <code>[!-+]</code> matches <code>!</code>, <code>&quot;</code>, <code>#</code>, <code>$</code>, <code>%</code>, <code>&amp;</code>, <code>&#39;</code>, <code>(</code>, <code>)</code>, <code>*</code>, and <code>+</code> (<code>rulere</code> regex). All the regexps here will work the same in Python. If you have more complex patterns, please share. <code>re.match</code> is not the same as <code>regex_match</code> as <code>re.match</code> is looking for the match at the beginning of the string, and <code>regex_match</code> requires a full string match. <code>regex_search</code> behaves as <code>regex_search</code>. You can add a <code>$</code> anchor to the patterns that are used with <code>regex_match</code> and pass them to <code>re.match</code>. There are no <code>boost::format_perl</code> and <code>boost::match_default</code> flags. Smatch is <code>finditer</code>."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449532454, "post_id": 34048609, "comment_id": 56039072, "body": "It&#39;s actually from this <code>.cpp</code> code: <a href=\"https://gist.github.com/alvations/99354d0fbe294c14cf7f\" rel=\"nofollow noreferrer\">gist.github.com/alvations/99354d0fbe294c14cf7f</a> that is used to read a series of <code>.rpp</code> files: <a href=\"https://www.dropbox.com/s/ppgglwvwz16hlt1/erg.zip?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/ppgglwvwz16hlt1/erg.zip?dl=0</a> from this software <a href=\"http://moin.delph-in.net/ReppTop\" rel=\"nofollow noreferrer\">moin.delph-in.net/ReppTop</a>. We&#39;re trying to port this python."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 1, "creation_date": 1449543084, "post_id": 34048609, "comment_id": 56042090, "body": "My suggestion is that don&#39;t try to make this work in Python <code>re</code>. Use <code>regex</code> package instead. In the gist, I see the input being interpreted as regex. The user-inputted regex may use advanced features in Boost, which might not be available in Python re. Also, if you are dealing with Unicode, you should use Python 3.3+. As for the rest of the question, it&#39;s too broad."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449557153, "post_id": 34048609, "comment_id": 56046482, "body": "<i><code>regex_search</code> behaves as <code>regex_search</code></i> should have been <i><code>regex_search</code> behaves as <code>re.search</code></i>. I agree with nhahtdh that the question is broad and since you have not shared all regexps you have it is also unclear (no idea how complex they all are and if they can be ported to Python as is). A rule of thumb is not to blindly use one language code in another."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1449571741, "post_id": 34048609, "comment_id": 56054521, "body": "@stribizhev, the zip file from the dropbox link contains all the regexes that is supposed to be read. They are in LISP format, so the C++ regex in the questions are used to read the LISP regexes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1449602659, "post_id": 34048609, "comment_id": 56075423, "body": "What is your anticipated encoding? u32regex (icu.hpp) convert both the <i>regex</i> input as well as the <i>subject</i> string to Utf-32. Kind of homogenous."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1449652903, "post_id": 34048609, "comment_id": 56096753, "body": "The anticipated encoding ranges from utf8 to utf32."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1449716654, "post_id": 34048609, "comment_id": 56132195, "body": "For boost Unicode (ICU) regex. the only reason to use make_u32regex is to use the ICU property libraries. In that case, all roads lead to utf-32, no matter what the input regex and subject encoding&#39;s are utf8/16/32. With macro languages, the default Unicode internal encoding is usually utf-8, and they provide their own versions of Unicode properties. So, none of these should be an issue. The only thing that <i>could</i> be an issue would be to convert any special boost constructs to a standardized form. This may mean collating elements or others."}], "answers": [{"comments": [{"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1450153641, "post_id": 34278494, "comment_id": 56303991, "body": "Thanks for the comprehensive answer!!! I&#39;m still digesting the information after reading =)"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1450135702, "last_edit_date": 1495540433, "creation_date": 1450135702, "answer_id": 34278494, "question_id": 34048609, "link": "https://stackoverflow.com/questions/34048609/converting-c-boost-regexes-to-python-re-regexes/34278494#34278494", "title": "Converting C++ Boost Regexes to Python re regexes", "body": "<blockquote>\n  <p><strong>How to convert C++ boost regexest to Python</strong></p>\n</blockquote>\n\n<p>In case of a simple regex, like <code>\\w+\\s+\\d+</code>, or <code>&gt;.*$</code> you won't have to change the pattern. In case of more complex patterns with constructs mentioned below, you will most probably have to re-write a regex. As with any conversion from one flavor/language to another, the general answer is <strong>DON'T</strong>. However, Python and Boost do have some similarities, especially when it comes to simple patterns (if Boost is using PCRE-like pattern) containing a dot (<code>a.*b</code>), regular (<code>[\\w-]*</code>) and negated (<code>[^&gt;]*</code>) character classes, regular quantifiers like <code>+</code>/<code>*</code>/<code>?</code>, and suchlike.</p>\n\n<blockquote>\n  <p><strong>what is the difference between boost regexes and python <code>re</code> regexes?</strong></p>\n</blockquote>\n\n<p><strong><a href=\"https://docs.python.org/2/library/re.html#module-re\" rel=\"nofollow noreferrer\">Python <code>re</code> module</a></strong> is not that rich as <strong><a href=\"http://www.boost.org/doc/libs/1_55_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html\" rel=\"nofollow noreferrer\">Boost regexps</a></strong> (suffice is to mention such constructs as <a href=\"http://www.boost.org/doc/libs/1_55_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html\" rel=\"nofollow noreferrer\"><code>\\h</code>, <code>\\G</code>, <code>\\K</code>, <code>\\R</code>, <code>\\X</code>, <code>\\Q...\\E</code>, branch reset, recursion, possessive quantifiers, POSIX character classes and character properties</a>, <a href=\"http://www.boost.org/doc/libs/1_55_0/libs/regex/doc/html/boost_regex/format/boost_format_syntax.html\" rel=\"nofollow noreferrer\">extended replacement pattern</a>), and other features that Boost has. The <code>(?imsx-imsx:pattern)</code> is limited to the whole expression in Python, not to a part of it thus you should be aware that <code>(?i)</code> in your <code>&amp;amp;|&amp;#((?i)x26);|&amp;#38;</code> will be treated as if it were at the beginning of the pattern (however, it does not have any impact on this expression).</p>\n\n<p>Also, same as in Boost, you do not have to escape <code>[</code> inside a character class, and <code>{</code> outside the character class.</p>\n\n<p>The backreferences  like <code>\\1</code> are the same as in Python.</p>\n\n<p>Since you are not using capturing groups in alternation in your patterns (e.g. <code>re.sub(r'\\d(\\w)|(go\\w*)', '\\2', 'goon')</code>), there should be no problem (in such cases, Python does not fill in the non-participating group with any value, and returns an empty result).</p>\n\n<p>Note the difference in named group definition: <code>(?&lt;NAME&gt;expression)</code>/<code>(?'NAME'expression)</code> in Boost, and <code>(?P&lt;NAME&gt;expression)</code> in Python.</p>\n\n<p>I see your regexps mainly fall under \"simple\" category. The most complex pattern is a <a href=\"http://www.rexegg.com/regex-quantifiers.html#tempered_greed\" rel=\"nofollow noreferrer\"><em>tempered greedy token</em></a> (e.g. <code>\u230a-((?:(?!-\u230b).)*)-\u230b</code>). To optimize them, you could use an <em><a href=\"http://www.softec.lu/site/RegularExpressions/UnrollingTheLoop\" rel=\"nofollow noreferrer\">unroll the loop</a></em> technique, but it may not be necessary depending on the size of texts you handle with the expressions.</p>\n\n<p>The most troublesome part as I see it is that you are using Unicode literals heavily. In Python 2.x, all strings are byte arrays, and you will always have to make sure you pass a unicode object to the Unicode regexps (see <a href=\"https://docs.python.org/2/howto/unicode.html#python-2-x-s-unicode-support\" rel=\"nofollow noreferrer\"><em>Python 2.x\u2019s Unicode Support</em></a>). In Python 3, all strings are UTF8 by default, and you can even use UTF8 literal characters in source code without any additional actions (see <a href=\"https://docs.python.org/3/howto/unicode.html#python-s-unicode-support\" rel=\"nofollow noreferrer\"><em>Python\u2019s Unicode Support</em></a>). So, Python 3.3+ (with support for raw string literals) is a good candidate.</p>\n\n<p>Now, as for the remaining questions:</p>\n\n<blockquote>\n  <p>in boost, there's <code>boost::u32regex_match</code>, is that the same as  <code>re.match</code>?</p>\n</blockquote>\n\n<p>The <strong><a href=\"https://docs.python.org/2/library/re.html#re.match\" rel=\"nofollow noreferrer\"><code>re.match</code></a></strong> is not the same as regex_match as <code>re.match</code> is looking for the match <strong><em>at the beginning of the string</em></strong>, and <a href=\"http://www.boost.org/doc/libs/1_42_0/libs/regex/doc/html/boost_regex/ref/regex_match.html\" rel=\"nofollow noreferrer\"><code>regex_match</code></a> requires <strong><em>a full string match</em></strong>. However, in Python 3, you can use <strong><a href=\"https://docs.python.org/3/library/re.html#re.fullmatch\" rel=\"nofollow noreferrer\"><code>re.fullmatch(pattern, string, flags=0)</code></a></strong> that is equivalent to Boost <code>regex_match</code>.</p>\n\n<blockquote>\n  <p>in boost, there's <code>boost::u32regex_search</code>, how is it different to <code>re.search</code></p>\n</blockquote>\n\n<p>Whenver you need to find a match anywhere inside a string, you need to use <code>re.search</code> (see <a href=\"https://docs.python.org/3/howto/regex.html#match-versus-search\" rel=\"nofollow noreferrer\"><em><code>match()</code> versus <code>search()</code></em></a>). Thus, this method provides analoguous functionality as <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/regex/doc/html/boost_regex/ref/regex_search.html\" rel=\"nofollow noreferrer\"><code>regex_search</code></a> does in Boost.</p>\n\n<blockquote>\n  <p>there's also <code>boost::format_perl</code> and <code>boost::match_default</code> and <code>boost::smatch</code>, what are their equivalence in python <code>re</code>?</p>\n</blockquote>\n\n<p>Python does not support Perl-like expressions to the extent Boost can, Python <code>re</code> module is just a \"trimmed\" Perl regex engine that does not have many nice features I mentioned earlier. Thus, no flags like <code>default</code> or <code>perl</code> can be found there. As for the <code>smatch</code>, you can use <strong><a href=\"https://docs.python.org/3/library/re.html#re.finditer\" rel=\"nofollow noreferrer\"><code>re.finditer</code></a></strong> to get all the <a href=\"https://docs.python.org/3/library/re.html#match-objects\" rel=\"nofollow noreferrer\">match objects</a>. A <a href=\"https://docs.python.org/3/library/re.html#re.findall\" rel=\"nofollow noreferrer\"><code>re.findall</code></a> returns all matches (or submatches only if capturing groups are specified) as a list of strings/lists of tuples. See the <a href=\"https://stackoverflow.com/questions/3765024/different-behavior-between-re-finditer-and-re-findall\"><code>re.findall</code>/<code>re.finditer</code> difference</a>.</p>\n\n<p>And in the conclusion, a must-read article <a href=\"http://www.regular-expressions.info/python.html\" rel=\"nofollow noreferrer\"><em>Python\u2019s re Module</em></a>.</p>\n"}], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 2, "closed_date": 1450484697, "accepted_answer_id": 34278494, "answer_count": 1, "score": 5, "last_activity_date": 1450135702, "creation_date": 1449075630, "question_id": 34048609, "link": "https://stackoverflow.com/questions/34048609/converting-c-boost-regexes-to-python-re-regexes", "closed_reason": "Needs more focus", "title": "Converting C++ Boost Regexes to Python re regexes", "body": "<p>The aim is to convert these regexes in <code>C++</code> <code>boost</code> to <code>Python</code> <code>re</code> regexes:</p>\n\n<pre><code>  typedef boost::u32regex tRegex;\n\n  tRegex emptyre = boost::make_u32regex(\"^$\");\n  tRegex commentre = boost::make_u32regex(\"^;.*$\");\n  tRegex versionre = boost::make_u32regex(\"^@\\\\$Date: (.*) \\\\$$\");\n  tRegex includere = boost::make_u32regex(\"^&lt;(\\\\S+)$\");\n  tRegex rungroupre = boost::make_u32regex(\"^&gt;(\\\\d+)$\");\n  tRegex readreppre = boost::make_u32regex(\"^&gt;(\\\\S+)$\");\n  tRegex tokre = boost::make_u32regex(\"^:(.*)$\");\n  tRegex groupstartre = boost::make_u32regex(\"^#(\\\\d+)$\");\n  tRegex groupendre = boost::make_u32regex(\"^#$\");\n  tRegex rulere = boost::make_u32regex(\"^([!-+^])([^\\\\t]+)\\\\t+([^\\\\t]*)$\");\n</code></pre>\n\n<p>I could rewrite these regexes one by one but there're quite a lot more that the example above, so my question is with regards to </p>\n\n<ul>\n<li><strong>how to convert C++ boost regexest to Python</strong> and </li>\n<li><strong>what is the difference between boost regexes and python re regexes?</strong></li>\n</ul>\n\n<p><strong>Is the C++ <code>boost::u32regex</code> the same as <code>re</code> regexes in python?</strong> If not, what is the difference? (Links to the docs would be much appreciated =) ) For instance:</p>\n\n<ul>\n<li>in boost, there's <code>boost::u32regex_match</code>, is that the same as \n<code>re.match</code>?</li>\n<li>in boost, there's <code>boost::u32regex_search</code>, how is it different to <code>re.search</code></li>\n<li>there's also <code>boost::format_perl</code> and <code>boost::match_default</code> and <code>boost::smatch</code>, what are their equivalence in <code>python</code> <code>re</code>?</li>\n</ul>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1449075562, "post_id": 34048524, "comment_id": 55851753, "body": "Could this be because of the \\0 ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449075612, "post_id": 34048524, "comment_id": 55851786, "body": "You want <code>strncpy</code> (lookup the documentation for both)"}, {"owner": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "edited": false, "score": 0, "creation_date": 1449075620, "post_id": 34048524, "comment_id": 55851792, "body": "foo has only space for 10 characters and the source is more than 10 characters, so you are getting buffer too small error"}, {"owner": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "edited": false, "score": 0, "creation_date": 1449075652, "post_id": 34048524, "comment_id": 55851817, "body": "Because you have used _s function which means &quot;secure&quot; copy, it checked for size"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1449078059, "post_id": 34048524, "comment_id": 55853366, "body": "@DieterL&#252;cking - no, <code>strncpy</code> is not appropriate. In this case it will quietly copy the first 10 characters from <code>bar</code> into <code>foo</code> with no nul terminator. That&#39;s a disaster waiting to happen. There are very few situations where <code>strncpy</code> is actually useful. Read its documentation <b>carefully</b>."}], "answers": [{"tags": [], "owner": {"reputation": 915, "user_id": 1547651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZK5dC.jpg?s=128&g=1", "display_name": "Sreekar", "link": "https://stackoverflow.com/users/1547651/sreekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1449075776, "creation_date": 1449075776, "answer_id": 34048660, "question_id": 34048524, "link": "https://stackoverflow.com/questions/34048524/string-copy-with-strcpy-s/34048660#34048660", "title": "String copy with strcpy_s", "body": "<pre><code>errno_t strcpy_s(\n   char *strDestination,\n   size_t numberOfElements,\n   const char *strSource \n);\n</code></pre>\n\n<blockquote>\n  <p>The strcpy_s function copies the contents in the address of strSource, including the terminating null character, to the location that's specified by strDestination. The destination string must be large enough to hold the source string and its terminating null character. The behavior of strcpy_s is undefined if the source and destination strings overlap.</p>\n</blockquote>\n\n<p>From MSDN documentation, if the destination is not large enough, you will get error.</p>\n"}, {"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 0, "last_activity_date": 1449075943, "creation_date": 1449075943, "answer_id": 34048719, "question_id": 34048524, "link": "https://stackoverflow.com/questions/34048524/string-copy-with-strcpy-s/34048719#34048719", "title": "String copy with strcpy_s", "body": "<p>This is the expected behaviour</p>\n\n<p>in docs you have:</p>\n\n<blockquote>\n  <p>numberOfElements\n  Size of the destination string buffer in char units for narrow and multi-byte functions, and wchar_t units for wide functions.</p>\n</blockquote>\n\n<p>so second parametr is the size of your destination buffer. And function tries to copy all characters from the source.</p>\n\n<p>If you want to copy as many as possible elements using *_s function then consider using:</p>\n\n<pre><code>strncpy_s(foo, sizeof(foo)/sizeof(foo[0]), bar, _TRUNCATE);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6122, "user_id": 1714762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e27901840ca85707727f5ed339ad31f?s=128&d=identicon&r=PG", "display_name": "Jean-Bernard Jansen", "link": "https://stackoverflow.com/users/1714762/jean-bernard-jansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1449076202, "creation_date": 1449076202, "answer_id": 34048800, "question_id": 34048524, "link": "https://stackoverflow.com/questions/34048524/string-copy-with-strcpy-s/34048800#34048800", "title": "String copy with strcpy_s", "body": "<p>You are writing as much characters as the buffer could contain. As stated <a href=\"http://en.cppreference.com/w/c/string/byte/strcpy\" rel=\"nofollow\">in the documentation</a>:</p>\n\n<blockquote>\n  <p>2) Same as (1), except that it may clobber the rest of the destination\n  array with unspecified values and that the following errors are\n  detected at runtime and call the currently installed constraint\n  handler function:</p>\n  \n  <p>[...]</p>\n  \n  <p><strong>destsz is less or equal strnlen_s(src, destsz)</strong>; in other words, truncation would occur</p>\n  \n  <p>[...]</p>\n</blockquote>\n\n<p>You fall in the \"equal\" case, thus the error. If you known what you do, you can ignore it or enable truncation.</p>\n"}], "owner": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 34048719, "answer_count": 3, "score": 1, "last_activity_date": 1449076202, "creation_date": 1449075401, "last_edit_date": 1449075722, "question_id": 34048524, "link": "https://stackoverflow.com/questions/34048524/string-copy-with-strcpy-s", "title": "String copy with strcpy_s", "body": "<p>Trying to copy string using <code>strcpy_s</code></p>\n\n<pre><code>char foo[10];  // a buffer able to hold 9 chars (plus the null)\nchar bar[] = \"A string longer than 9 chars\";\nstrcpy_s( foo, 10, bar );\n</code></pre>\n\n<p>Got Assertion:</p>\n\n<pre><code>Expression: (L\"Buffer is too small\" &amp;&amp; 0)\n</code></pre>\n\n<p>Can't understand why. <code>foo</code> has space for 10 characters and second parameter is 10. So, what is wrong?</p>\n"}, {"tags": ["c++", "winapi", "handle"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1449078789, "post_id": 34048206, "comment_id": 55853797, "body": "Not okay.  If you care about that child process, wanting to know when it exits and whether or not it failed, then you keep the handle around and call CloseHandle() after you detected it exiting.  If you don&#39;t care then simply call CloseHandle() immediately.  Don&#39;t forget about the thread handle, it needs to be closed as well."}], "answers": [{"comments": [{"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1449076421, "post_id": 34048506, "comment_id": 55852331, "body": "&quot;Please also note that you need to CloseHandle the thread handle&quot; - what do you mean? The thread that spawns the process continues to do other things afterwards and is expected to continue long after the child process closes. So I can&#39;t close it just yet?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1449081418, "post_id": 34048506, "comment_id": 55855309, "body": "@shortage_radeon: he&#39;s talking about the thread handle <i>of the main thread of the new process</i>, which is provided alongside the new process handle."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1449082409, "post_id": 34048506, "comment_id": 55855837, "body": "Worth noting: When the &#39;parent&#39; process terminates, the handle is closed automatically, so there isn&#39;t technically a handle leak. The process object merely lingers around for longer than necessary."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 1, "creation_date": 1449089736, "post_id": 34048506, "comment_id": 55859830, "body": "@shortage_radeon Closing a thread or process handle does not kill the thread or process, it just closes the handle you have to it."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1449100312, "post_id": 34048506, "comment_id": 55864850, "body": "@IInspectable: I disagree; if a process allocates memory and forgets about it, that&#39;s a memory leak; if a process allocates handles and forgets about them, that&#39;s a handle leak.  Either will be cleaned up when the process exits, but if it is long-lived and leaks too many allocations <i>or</i> handles it will eventually fail."}], "tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": true, "score": 6, "last_activity_date": 1449075736, "last_edit_date": 1449075736, "creation_date": 1449075356, "answer_id": 34048506, "question_id": 34048206, "link": "https://stackoverflow.com/questions/34048206/can-i-close-a-processs-own-handle-if-its-been-spawned-from-another-process-on/34048506#34048506", "title": "Can I close a process&#39;s own handle if it&#39;s been spawned from another process on Windows?", "body": "<p>If you do not close the handle, you have a handle leak.</p>\n\n<p>You should keep the handle as long as you need it to pass it to another WinAPI function, for example if you need information about the process like a) did it terminate, b) what is the return value, c) how much processor time does it consume. You can close the handle when you do not need it anymore. Closing the handle will not close the child process, that will still continue running!</p>\n\n<p>You can find this and more information about the impacts on MSDN for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684873(v=vs.85).aspx\" rel=\"noreferrer\">PROCESS_INFORMATION structure</a> in the section Remarks. Please also note that you need to <code>CloseHandle</code> the thread handle.</p>\n"}, {"tags": [], "owner": {"reputation": 584, "user_id": 2639398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2af0cf25bed0d359dce19de12cfcd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Curve25519", "link": "https://stackoverflow.com/users/2639398/curve25519"}, "is_accepted": false, "score": 0, "last_activity_date": 1449075534, "creation_date": 1449075534, "answer_id": 34048575, "question_id": 34048206, "link": "https://stackoverflow.com/questions/34048206/can-i-close-a-processs-own-handle-if-its-been-spawned-from-another-process-on/34048575#34048575", "title": "Can I close a process&#39;s own handle if it&#39;s been spawned from another process on Windows?", "body": "<p>You can close the handle to the process. Unless you call <code>TerminateProcess</code>, or it is closed by other method the process will continue to exists.</p>\n\n<p>If you don't need to handle, call the <code>CloseHandle</code>, and it's preferred that you'll do that as soon as possible.\nStill owning a handle to the process will cause a resource leak. Though the process and its resources will be deleted when the process terminates, some of it's info will still continue to exists unless you close that handle .</p>\n"}, {"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1449099981, "post_id": 34050940, "comment_id": 55864744, "body": "To clarify point 2, the handle will be automatically closed when the <i>parent</i> process terminates, not when the <i>child</i> process terminates."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 1, "last_activity_date": 1449126999, "last_edit_date": 1449126999, "creation_date": 1449083230, "answer_id": 34050940, "question_id": 34048206, "link": "https://stackoverflow.com/questions/34048206/can-i-close-a-processs-own-handle-if-its-been-spawned-from-another-process-on/34050940#34050940", "title": "Can I close a process&#39;s own handle if it&#39;s been spawned from another process on Windows?", "body": "<p>A couple of quotes from the question and comments:</p>\n\n<blockquote>\n  <p>I never call <code>CloseHandle()</code> from the parent process, because I don't know when the user would exit the child process.</p>\n</blockquote>\n\n<p>And:</p>\n\n<blockquote>\n  <p>The thread that spawns the process continues to do other things afterwards and is expected to continue long after the child process closes. So I can't close it just yet?</p>\n</blockquote>\n\n<p>This I think is your fundamental misunderstanding. A handle is simply you means of interacting with the process or thread objects. Closing the handle does not terminate the object. It simply tidies up the resources around the handle. The object, process or thread, continues to live after your handle to it has been closed. </p>\n\n<p>If you need to terminate the process, call <code>TerminateProcess</code> passing your process handle. At that point, you are generally safe to close the handle. </p>\n\n<p>Here are the rules that you need to follow:</p>\n\n<ol>\n<li>You need to keep the process and thread handles open for as long as you need to use them. So, if you need to wait on either process or thread, you need a handle to the object. Once you no longer need to refer the object you can close the handles. </li>\n<li>If you don't close a handle, it will be closed when the process which created the handle terminates. For the example under consideration, that means when the parent process terminates. The system cleans up any resources owned by a process on termination. Sometimes that is a reasonable approach. Typically that makes sense if you need to refer to the object right up until the point where your process terminates. </li>\n<li>If you creates process repeatedly, and don't close handles then this can be a resource leak. Obviously you don't want to leak resources. </li>\n</ol>\n"}], "owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 34048506, "answer_count": 3, "score": 0, "last_activity_date": 1449126999, "creation_date": 1449074592, "last_edit_date": 1449080835, "question_id": 34048206, "link": "https://stackoverflow.com/questions/34048206/can-i-close-a-processs-own-handle-if-its-been-spawned-from-another-process-on", "title": "Can I close a process&#39;s own handle if it&#39;s been spawned from another process on Windows?", "body": "<p>I have a process that calls the function <code>CreateProcess()</code>, however I never call <code>CloseHandle()</code> from the parent process, because I don't know when the user would exit the child process. Does this result in some kind of leak or is it ok, since when the child process closes, it frees up all its resources?</p>\n"}, {"tags": ["c++", "qt", "android-ndk", "openssl", "crypto++"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 1, "creation_date": 1449074743, "post_id": 34048195, "comment_id": 55851128, "body": "That&#39;s alot of code.  Can you post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449075519, "post_id": 34048195, "comment_id": 55851722, "body": "Done. I have extract if from a lot of more code, but now I erased redundant parts."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1449102562, "post_id": 34048195, "comment_id": 55865500, "body": "Its not clear to me if this is an OpenSSL, Crypto++ or QT issue. The best I can tell, this is a QT problem because of the re-occurring <i><code>java.lang.NoSuchFieldException: View_paddingEnd</code></i> exception. You should probably reduce this further by removing the QT gear, and using a command line driver. You can use <code>adb</code> to push the reduced program to <code>&#47;data&#47;local&#47;tmp</code>. Then see if it crashes."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1449135901, "post_id": 34048195, "comment_id": 55878292, "body": "Where is your code calling a <code>cryptopp</code> function, I can&#39;t see it."}, {"owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "edited": false, "score": 0, "creation_date": 1449135929, "post_id": 34048195, "comment_id": 55878315, "body": "I am using QT Creator for windows. What removing &#39;QT gears means&#39;. I have tested it on real device via ADB and it crashed. It is not using cryptopp - that is the strange, even not including the headers, but it crashes when the lib is linked in .pro file, but I have used it in another project like including it and it crashes again. Openssl does not crash! I will edit to show you."}, {"owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "edited": false, "score": 0, "creation_date": 1449137013, "post_id": 34048195, "comment_id": 55879093, "body": "I have edit it see after edition 2."}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "edited": false, "score": 0, "creation_date": 1449143836, "post_id": 34062776, "comment_id": 55883833, "body": "Everything you saied looks logical. Yes there is file <code>libgnustl_shared.so</code> in android-build\\libs\\armeabi-v7a folder. I&#39;ve tried <code>CryptoPP::StringSink* sink = new CryptoPP::StringSink(v);</code> and log is <code>E&#47;ActivityManager(  457):     1.7% 16029&#47;le.testAndroid4: 0% user + 1.7% kernel F&#47;libc    (16029): Fatal signal 11 (SIGSEGV) at 0x54ff002e (code=1), thread 16081 (le.testAndroid4) I&#47;DEBUG   (  147): pid: 16029, tid: 16081, name: le.testAndroid4  &gt;&gt;&gt; org.qtproject.example.testAndroid4 &lt;&lt;&lt;  &quot;org.qtproject.example.testAndroid4&quot; died.</code>. I&#39;m upvoting your answer for now and will compile to check it."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "edited": false, "score": 0, "creation_date": 1449147301, "post_id": 34062776, "comment_id": 55886078, "body": "I had a similar problem in the past and could not make my third party library compile with a different STL implementation. Hopefully you&#39;ll manage to do this here."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1465863135, "post_id": 34062776, "comment_id": 63067633, "body": "<i>&quot;If your crypto library uses a different one...&quot;</i> - yes, the Crypto++ library use <code>libstlport_shared.so</code> by default; see <a href=\"http://github.com/weidai11/cryptopp/blob/master/setenv-android.sh\" rel=\"nofollow noreferrer\">setenv-android.sh</a>. The user can change it simply by <code>setenv-android.sh gnu</code>. STLport was selected by default because of GNU&#39;s toxic licensing terms; see <a href=\"https://groups.google.com/d/msg/cryptopp-users/-d8op4wOJK4/zQfMzO6IEQAJ\" rel=\"nofollow noreferrer\">Two Qt issues with Crypto++ on Android</a> on the Crypto++ mailing list."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1465883639, "post_id": 34062776, "comment_id": 63072645, "body": "@jww: Thanks for the clarification on that."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 2, "last_activity_date": 1449141147, "last_edit_date": 1449141147, "creation_date": 1449136497, "answer_id": 34062776, "question_id": 34048195, "link": "https://stackoverflow.com/questions/34048195/cryptopp-fatal-signal-11/34062776#34062776", "title": "Cryptopp fatal signal 11", "body": "<p>You are manually loading <code>libstlport_shared.so</code>, I suppose it's because it is needed by <code>libcryptopp.so</code>.</p>\n\n<p>By default Qt, uses a STL library (<code>libgnustl_shared.so</code> in my case, you can check this in your android-build\\libs\\armeabi-v7a folder after compilation) upon compilation and deployment. If your crypto library uses a different one (apparently <code>libstlport_shared.so</code>), loading it manually from the .pro file as you did (<code>ANDROID_EXTRA_LIBS +=</code> , <code>LIB +=</code>) will make the <code>libcryptopp.so</code> loadable, but you'll most likely get a seg fault whenever you'll pass a STL object (<code>std::string</code> for instance) from your code to a crypto function. </p>\n\n<p>Two environments (your code and crypto one) are not using the same STL implementation, so they cannot safely send any STL object to each other without a serious potential segmentation fault (as one will consider objects as created from its own implementation when it was actually created with the other one: objects will most likely have different attributes....it's like forcing a cast between two completely different types).</p>\n\n<p>You can verify this like that:</p>\n\n<pre><code>void MainWindow::on_pushButton_clicked()\n{\n    byte ivec[16];\n    byte salt[32];\n\n    qDebug() &lt;&lt; \"Calling OS_GenerateRandomBlock\";\n    CryptoPP::OS_GenerateRandomBlock(false, salt, sizeof(salt));\n    qDebug() &lt;&lt; \"Calling OS_GenerateRandomBlock\";\n    CryptoPP::OS_GenerateRandomBlock(false, ivec, sizeof(ivec));\n\n    std::string v;\n\n    qDebug() &lt;&lt; \"Passing std::string to CryptoPP::StringSink\";    \n    CryptoPP::StringSink* sink = new CryptoPP::StringSink(v);\n\n    qDebug() &lt;&lt; \"Creating HexEncoder\";    \n    CryptoPP::HexEncoder hex( sink );\n\n    hex.Put(salt, sizeof(salt));\n    hex.MessageEnd();\n\n    QMessageBox::about(this,tr(\"Test1\"),tr(v.c_str()));\n    QMessageBox::about(this,tr(\"Test1\"),tr(\"XXX\"));\n}\n</code></pre>\n\n<p>Please confirm, but I'm pretty sure you'll see \"Passing std::string to CryptoPP::StringSink\" but not \"Creating HexEncoder\".</p>\n\n<p>You should recompile <code>libcryptopp.so</code> to have it use the same STL implmentation as your main program (and cross your finger that the lib will work with that STL implementation).</p>\n"}], "owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449141147, "creation_date": 1449074556, "last_edit_date": 1449136962, "question_id": 34048195, "link": "https://stackoverflow.com/questions/34048195/cryptopp-fatal-signal-11", "title": "Cryptopp fatal signal 11", "body": "<p>Here is log1 aplication output:</p>\n\n<pre><code>   :    ... 25 more\nW/System.err( 1500): java.lang.ClassNotFoundException: android.graphics.drawable.VectorDrawable\nW/System.err( 1500):    at java.lang.Class.classForName(Native Method)\nW/System.err( 1500):    at java.lang.Class.forName(Class.java:217)\nW/System.err( 1500):    at java.lang.Class.forName(Class.java:172)\nW/System.err( 1500):    at org.qtproject.qt5.android.ExtractStyle.getClass(ExtractStyle.java:388)\nW/System.err( 1500):    at org.qtproject.qt5.android.ExtractStyle.&lt;init&gt;(ExtractStyle.java:94)\nW/System.err( 1500):    at org.qtproject.qt5.android.QtActivityDelegate.loadApplication(QtActivityDelegate.java:430)\nW/System.err( 1500):    at java.lang.reflect.Method.invokeNative(Native Method)\nW/System.err( 1500):    at java.lang.reflect.Method.invoke(Method.java:511)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:245)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.startApp(QtActivity.java:655)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:895)\nW/System.err( 1500):    at android.app.Activity.performCreate(Activity.java:5275)\nW/System.err( 1500):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1082)\nW/System.err( 1500):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)\nW/System.err( 1500):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2110)\nW/System.err( 1500):    at android.app.ActivityThread.access$600(ActivityThread.java:138)\nW/System.err( 1500):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)\nW/System.err( 1500):    at android.os.Handler.dispatchMessage(Handler.java:99)\nW/System.err( 1500):    at android.os.Looper.loop(Looper.java:137)\nW/System.err( 1500):    at android.app.ActivityThread.main(ActivityThread.java:4950)\nW/System.err( 1500):    at java.lang.reflect.Method.invokeNative(Native Method)\nW/System.err( 1500):    at java.lang.reflect.Method.invoke(Method.java:511)\nW/System.err( 1500):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:798)\nW/System.err( 1500):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:565)\nW/System.err( 1500):    at dalvik.system.NativeStart.main(Native Method)\nW/System.err( 1500): Caused by: java.lang.NoClassDefFoundError: android/graphics/drawable/VectorDrawable\nW/System.err( 1500):    ... 25 more\nW/System.err( 1500): Caused by: java.lang.ClassNotFoundException: android.graphics.drawable.VectorDrawable\nW/System.err( 1500):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)\nW/System.err( 1500):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)\nW/System.err( 1500):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)\nW/System.err( 1500):    ... 25 more\nW/System.err( 1500): java.lang.NoSuchFieldException: View_paddingStart\nW/System.err( 1500):    at java.lang.Class.getDeclaredField(Class.java:631)\nW/System.err( 1500):    at org.qtproject.qt5.android.ExtractStyle.getField(ExtractStyle.java:427)\nW/System.err( 1500):    at org.qtproject.qt5.android.ExtractStyle.&lt;init&gt;(ExtractStyle.java:173)\nW/System.err( 1500):    at org.qtproject.qt5.android.QtActivityDelegate.loadApplication(QtActivityDelegate.java:430)\nW/System.err( 1500):    at java.lang.reflect.Method.invokeNative(Native Method)\nW/System.err( 1500):    at java.lang.reflect.Method.invoke(Method.java:511)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:245)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.startApp(QtActivity.java:655)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:895)\nW/System.err( 1500):    at android.app.Activity.performCreate(Activity.java:5275)\nW/System.err( 1500):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1082)\nW/System.err( 1500):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)\nW/System.err( 1500):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2110)\nW/System.err( 1500):    at android.app.ActivityThread.access$600(ActivityThread.java:138)\nW/System.err( 1500):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)\nW/System.err( 1500):    at android.os.Handler.dispatchMessage(Handler.java:99)\nW/System.err( 1500):    at android.os.Looper.loop(Looper.java:137)\nW/System.err( 1500):    at android.app.ActivityThread.main(ActivityThread.java:4950)\nW/System.err( 1500):    at java.lang.reflect.Method.invokeNative(Native Method)\nW/System.err( 1500):    at java.lang.reflect.Method.invoke(Method.java:511)\nW/System.err( 1500):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:798)\nW/System.err( 1500):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:565)\nW/System.err( 1500):    at dalvik.system.NativeStart.main(Native Method)\nW/System.err( 1500): java.lang.NoSuchFieldException: View_paddingEnd\nW/System.err( 1500):    at java.lang.Class.getDeclaredField(Class.java:631)\nW/System.err( 1500):    at org.qtproject.qt5.android.ExtractStyle.getField(ExtractStyle.java:427)\nW/System.err( 1500):    at org.qtproject.qt5.android.ExtractStyle.&lt;init&gt;(ExtractStyle.java:174)\nW/System.err( 1500):    at org.qtproject.qt5.android.QtActivityDelegate.loadApplication(QtActivityDelegate.java:430)\nW/System.err( 1500):    at java.lang.reflect.Method.invokeNative(Native Method)\nW/System.err( 1500):    at java.lang.reflect.Method.invoke(Method.java:511)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:245)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.startApp(QtActivity.java:655)\nW/System.err( 1500):    at org.qtproject.qt5.android.bindings.QtActivity.onCreate(QtActivity.java:895)\nW/System.err( 1500):    at android.app.Activity.performCreate(Activity.java:5275)\nW/System.err( 1500):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1082)\nW/System.err( 1500):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)\nW/System.err( 1500):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2110)\nW/System.err( 1500):    at android.app.ActivityThread.access$600(ActivityThread.java:138)\nW/System.err( 1500):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)\nW/System.err( 1500):    at android.os.Handler.dispatchMessage(Handler.java:99)\nW/System.err( 1500):    at android.os.Looper.loop(Looper.java:137)\nW/System.err( 1500):    at android.app.ActivityThread.main(ActivityThread.java:4950)\nW/System.err( 1500):    at java.lang.reflect.Method.invokeNative(Native Method)\nW/System.err( 1500):    at java.lang.reflect.Method.invoke(Method.java:511)\nW/System.err( 1500):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:798)\nW/System.err( 1500):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:565)\nW/System.err( 1500):    at dalvik.system.NativeStart.main(Native Method)\nD/dalvikvm( 1500): GC_CONCURRENT freed 494K, 14% free 5744K/6663K, paused 81ms+191ms, total 320ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 18ms\nW/ResourceType( 1500): Skipping entry 0x10804c7 in package table 0 because it is not complex!\nD/dalvikvm( 1500): GC_CONCURRENT freed 462K, 14% free 5843K/6727K, paused 34ms+3ms, total 75ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 18ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 541K, 15% free 5829K/6791K, paused 18ms, total 18ms\nD/dalvikvm( 1500): GC_CONCURRENT freed 409K, 13% free 5932K/6791K, paused 55ms+3ms, total 95ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 40ms\nD/dalvikvm( 1500): GC_CONCURRENT freed 501K, 14% free 5990K/6919K, paused 67ms+2ms, total 100ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 36ms\nD/dalvikvm( 1500): GC_CONCURRENT freed 544K, 15% free 5999K/6983K, paused 2ms+3ms, total 63ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 44ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 477K, 14% free 6032K/6983K, paused 17ms, total 18ms\nD/dalvikvm( 1500): GC_CONCURRENT freed 479K, 14% free 6065K/6983K, paused 63ms+2ms, total 106ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 43ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 489K, 14% free 6072K/7047K, paused 19ms, total 20ms\nD/dalvikvm( 1500): GC_CONCURRENT freed 438K, 13% free 6137K/7047K, paused 31ms+3ms, total 72ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 43ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 299K, 14% free 6143K/7111K, paused 19ms, total 19ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 30K, 14% free 6156K/7111K, paused 19ms, total 19ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 38K, 14% free 6149K/7111K, paused 19ms, total 19ms\nD/dalvikvm( 1500): GC_FOR_ALLOC freed 499K, 14% free 6158K/7111K, paused 20ms, total 21ms\nD/dalvikvm( 1500): GC_CONCURRENT freed 531K, 14% free 6138K/7111K, paused 17ms+3ms, total 80ms\nD/dalvikvm( 1500): WAIT_FOR_CONCURRENT_GC blocked 63ms\nI/Adreno200-EGL( 1500): &lt;qeglDrvAPI_eglInitialize:299&gt;: EGL 1.4 QUALCOMM build: AU_LINUX_ANDROID_JB_REL_2.0.3_RB3.04.01.01.42.006_msm7627a_JB_REL_2.0.3_Merge_release_AU (Merge)\nI/Adreno200-EGL( 1500): Build Date: 04/01/13 Mon\nI/Adreno200-EGL( 1500): Local Branch:\nI/Adreno200-EGL( 1500): Remote Branch: m/jb_rel_2.0.3\nI/Adreno200-EGL( 1500): Local Patches: NONE\nI/Adreno200-EGL( 1500): Reconstruct Branch: NOTHING\nI/Choreographer( 1500): Skipped 31 frames!  The application may be doing too much work on its main thread.\nD/libtestAndroid4.so( 1500): (null):0 ((null)): -----------------------------P-8------------------------------------\nD/libtestAndroid4.so( 1500): (null):0 ((null)): -----------------------------P-9------------------------------------\nW/IInputConnectionWrapper( 1500): getCursorCapsMode on inactive InputConnection\nD/libtestAndroid4.so( 1500): (null):0 ((null)): -----------------------------P-2------------------------------------\nF/libc    ( 1500): Fatal signal 11 (SIGSEGV) at 0x007a7a76 (code=1), thread 1567 (le.testAndroid4)\nI/DEBUG   (  147): pid: 1500, tid: 1567, name: le.testAndroid4  &gt;&gt;&gt; org.qtproject.example.testAndroid4 &lt;&lt;&lt;\n\n\n\"org.qtproject.example.testAndroid4\" died.\n</code></pre>\n\n<p>log1 compile output:</p>\n\n<pre><code>Android package built successfully in 29.282 ms.\n  -- It can now be run from the selected device/emulator.\n  -- File: C:/Users/niki/Documents/build-testAndroid4-Android_for_armeabi_v7a_GCC_4_9_Qt_5_5_1-Release/android-build//bin/QtApp-debug.apk\n3064 KB/s (15889430 bytes in 5.064s)\n11:15:26: The process \"C:/Qt/5.5/android_armv7/bin/androiddeployqt.exe\" exited normally.\n11:15:26: Pulling files necessary for debugging.\n11:15:26: Package deploy: Running command \"C:/Users/niki/AppData/Local/Android/android-sdk/platform-tools/adb.exe -s LGOTMS328ac0aa pull /system/bin/sh: readlink: not found C:/Users/niki/Documents/build-testAndroid4-Android_for_armeabi_v7a_GCC_4_9_Qt_5_5_1-Release/app_process\".\n11:15:26: Packaging error: Command \"C:/Users/niki/AppData/Local/Android/android-sdk/platform-tools/adb.exe -s LGOTMS328ac0aa pull /system/bin/sh: readlink: not found C:/Users/niki/Documents/build-testAndroid4-Android_for_armeabi_v7a_GCC_4_9_Qt_5_5_1-Release/app_process\" failed.Exit code: 1\n11:15:26: Package deploy: Running command \"C:/Users/niki/AppData/Local/Android/android-sdk/platform-tools/adb.exe -s LGOTMS328ac0aa pull /system/lib/libc.so C:/Users/niki/Documents/build-testAndroid4-Android_for_armeabi_v7a_GCC_4_9_Qt_5_5_1-Release/libc.so\".\n11:15:26: Elapsed time: 00:53.\n</code></pre>\n\n<p>log2 application output:</p>\n\n<pre><code> ...\n    I/Adreno200-EGL( 3188): Build Date: 04/01/13 Mon\n    I/Adreno200-EGL( 3188): Local Branch:\n    I/Adreno200-EGL( 3188): Remote Branch: m/jb_rel_2.0.3\n    I/Adreno200-EGL( 3188): Local Patches: NONE\n    I/Adreno200-EGL( 3188): Reconstruct Branch: NOTHING\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-8------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-9------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-2------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-3------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-4------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-5------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-10------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-1------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-11------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-12------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-2------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-3------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-4------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-5------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-13------------------------------------\n    D/libtestAndroid4.so( 3188): (null):0 ((null)): -----------------------------P-14------------------------------------\n    F/libc    ( 3188): Fatal signal 11 (SIGSEGV) at 0xdeadcab1 (code=1), thread 3269 (le.testAndroid4)\n    I/DEBUG   (  147): pid: 3188, tid: 3269, name: le.testAndroid4  &gt;&gt;&gt; org.qtproject.example.testAndroid4 &lt;&lt;&lt;\n    I/ActivityManager(  457): Process org.qtproject.example.testAndroid4 (pid 3188) has died.\n\n\n    \"org.qtproject.example.testAndroid4\" died.\n</code></pre>\n\n<p>Now the source code:</p>\n\n<p><strong>logindialog.h</strong></p>\n\n<pre><code>#ifndef LOGINDIALOG_H\n#define LOGINDIALOG_H\n\n#include &lt;QDialog&gt;\n#include &lt;QDebug&gt;\nnamespace Ui {\nclass loginDialog;\n}\n\nclass loginDialog : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit loginDialog(QWidget *parent = 0);\n    ~loginDialog();\n    bool isDecrypted();\n    std::string getPassword();\n\nprivate slots:\n    void on_passwordButton_clicked();\n\nprivate:\n    Ui::loginDialog *ui;\n    bool decrypted;\n    std::string password;\n};\n\n#endif // LOGINDIALOG_H\n</code></pre>\n\n<p><strong>mainwindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\n#include &lt;fstream&gt; \n//#include &lt;sha.h&gt;\n//#include &lt;pwdbased.h&gt;\n//#include &lt;osrng.h&gt;\n//#include &lt;sstream&gt;\n//#include &lt;iomanip&gt;\n//#include &lt;cryptlib.h&gt;\n//using CryptoPP::Exception;\n\n//#include &lt;hex.h&gt;\n//using CryptoPP::HexEncoder;\n//using CryptoPP::HexDecoder;\n\n//#include &lt;filters.h&gt;\n//using CryptoPP::StringSink;\n#include \"logindialog.h\"\n#include &lt;QMessageBox&gt;\n#include &lt;QDebug&gt;\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\nprivate slots:    \n    void on_pushButton_2_clicked();\n    void on_pushButton_clicked();\nprivate:\n    Ui::MainWindow *ui;\n    bool getEnterPassword(std::string &amp;);\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>logindialog.cpp</strong></p>\n\n<pre><code>#include \"logindialog.h\"\n#include \"ui_logindialog.h\"\n\nloginDialog::loginDialog(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::loginDialog)\n{\n    ui-&gt;setupUi(this);\n}\n\nloginDialog::~loginDialog()\n{\n    delete ui;\n}\n\nvoid loginDialog::on_passwordButton_clicked()\n{\n     qDebug() &lt;&lt; \"-----------------------------P-2------------------------------------\";\n    this-&gt;password = ui-&gt;lineEdit-&gt;text().toStdString();\n      qDebug() &lt;&lt; \"-----------------------------P-3------------------------------------\";\n    this-&gt;decrypted = true; //TODO decrypt the file and if there is exception set as false\n       qDebug() &lt;&lt; \"-----------------------------P-4------------------------------------\";\n    this-&gt;accept();\n        qDebug() &lt;&lt; \"-----------------------------P-5------------------------------------\";\n}\n\nbool loginDialog::isDecrypted()\n{\n    return this-&gt;decrypted;\n}\n\nstd::string loginDialog::getPassword()\n{\n    return this-&gt;password;\n}\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_pushButton_clicked()\n{\n    byte ivec[16];\n    byte salt[32];\n\n    CryptoPP::OS_GenerateRandomBlock(false, salt, sizeof(salt));\n    CryptoPP::OS_GenerateRandomBlock(false, ivec, sizeof(ivec));\n\n    std::string v;\n\n    CryptoPP::HexEncoder hex(new CryptoPP::StringSink(v));\n    hex.Put(salt, sizeof(salt));\n    hex.MessageEnd();\n\n    QMessageBox::about(this,tr(\"Test1\"),tr(v.c_str()));\n    QMessageBox::about(this,tr(\"Test1\"),tr(\"XXX\"));\n}\n\nvoid MainWindow::on_pushButton_2_clicked()\n{   \n    std::string password;\n    if(getEnterPassword(password)==false)\n    {\n        QMessageBox::about(this,tr(\"Failed\"),tr(\"Password does not match!\"));\n    }\n    else\n    {\n        QMessageBox::about(this,tr(\"Failed\"),tr(\"Password match!\"));\n    }\n}\n\nbool MainWindow::getEnterPassword(std::string &amp;password)\n{\nloginDialog passwordWindow;\nqDebug() &lt;&lt; \"-----------------------------P-8------------------------------------\";\npasswordWindow.setModal(true);\nqDebug() &lt;&lt; \"-----------------------------P-9------------------------------------\";\npasswordWindow.exec();\nqDebug() &lt;&lt; \"-----------------------------P-10------------------------------------\";\n\nqDebug() &lt;&lt; \"-----------------------------P-1------------------------------------\";\nloginDialog passwordWindowRe;\nqDebug() &lt;&lt; \"-----------------------------P-11------------------------------------\";\npasswordWindowRe.setModal(true);\nqDebug() &lt;&lt; \"-----------------------------P-12------------------------------------\";\npasswordWindowRe.exec();\nqDebug() &lt;&lt; \"-----------------------------P-13------------------------------------\";\n\n//qDebug() &lt;&lt; passwordWindow.getPassword().c_str();\n//qDebug() &lt;&lt; passwordWindowRe.getPassword().c_str();\n\nqDebug() &lt;&lt; \"-----------------------------P-14------------------------------------\";\nif(passwordWindow.getPassword() == passwordWindowRe.getPassword())\n{\n    qDebug() &lt;&lt; \"-----------------------------P-15------------------------------------\";\n    password = passwordWindow.getPassword();\n    qDebug() &lt;&lt; \"-----------------------------P-16------------------------------------\";\n    return true;\n    qDebug() &lt;&lt; \"-----------------------------P-17------------------------------------\";\n}\nelse\n{\n   qDebug() &lt;&lt; \"-----------------------------P-18------------------------------------\";\n   return false;\n}\n}\n</code></pre>\n\n<p>And the most important:\n<strong>testAndroid4.pro</strong></p>\n\n<pre><code>#-------------------------------------------------\n#\n# Project created by QtCreator 2015-12-02T17:56:00\n#\n#-------------------------------------------------\n\nQT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = testAndroid4\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n        mainwindow.cpp \\\n    logindialog.cpp\n\nHEADERS  += mainwindow.h \\\n    logindialog.h\n\nFORMS    += mainwindow.ui \\\n    logindialog.ui\n\nCONFIG += mobility\nMOBILITY = \n\n\nINCLUDEPATH += C:\\Temp\\openssl\\OpenSSL-for-Android-Prebuilt\\openssl-1.0.2\\include\\\n\nLIBS += -LC:\\Temp\\openssl\\OpenSSL-for-Android-Prebuilt\\openssl-1.0.2\\armeabi-v7a\\lib -lssl\nLIBS += -LC:\\Temp\\openssl\\OpenSSL-for-Android-Prebuilt\\openssl-1.0.2\\armeabi-v7a\\lib -lcrypto\n\n\nANDROID_EXTRA_LIBS += C:\\Users\\niki\\Downloads\\android-ndk-r10e\\sources\\cxx-stl\\stlport\\libs\\armeabi-v7a\\libstlport_shared.so\nANDROID_EXTRA_LIBS += C:\\Temp\\cryptopp\\cryptopp-5.6.2-android-14\\cryptopp-android-14\\lib1\\libcryptopp.so\n\nINCLUDEPATH += C:\\Temp\\cryptopp\\cryptopp-5.6.2-android-14\\cryptopp-android-14\\include\\cryptopp\\\n\nLIBS += -LC:\\Users\\niki\\Downloads\\android-ndk-r10e\\sources\\cxx-stl\\stlport\\libs\\armeabi-v7a -lstlport_shared\nLIBS += -LC:\\Temp\\cryptopp\\cryptopp-5.6.2-android-14\\cryptopp-android-14\\lib1 -lcryptopp\n\n\n\nDISTFILES += \\\n    ../../../../Temp/cryptopp/cryptopp-5.6.2-android-14/cryptopp-android-14/lib1/libcryptopp.so\n</code></pre>\n\n<p>When I start the program and press pushButton2 it appears logindialog. When I enter something into it and press logindialog's button the program is dieing. If I comment in .pro file the cryptopp lines the program works properly. If I leave empty the lineEdit and push passwordButton of logindialog, it again ask me about password and I give blank, but again die - see the second log appears(notice the P1,P2,P3... in both logs). I took openssl from <a href=\"https://github.com/emileb/OpenSSL-for-Android-Prebuilt\" rel=\"nofollow\">this</a> link and criptopp from <a href=\"https://github.com/noloader/cryptopp-5.6.2-android-14\" rel=\"nofollow\">this</a>. I think the problem is somewhere with cryptopp. How can I increase stack and heap size for qt android? I don't think this is the issue and have read something about \"stack trace debuging\" but don't know how to do it. Never mind, what could be the issue in this case?</p>\n\n<p>After edition:</p>\n\n<p>I have tested it on my android 4.1.2 device LG optimus L1 e410. No matter if I test it on AVD with android 23/14/18/16 -> it is failing. If cryptopp is commented all goes OK. log2 compile output is same as first one with difference in time only.</p>\n\n<p>After edition 2:</p>\n\n<p>Application log for cryptopp usage for pushButton:</p>\n\n<pre><code>I/Adreno200-EGL( 6066): Reconstruct Branch: NOTHING\nW/IInputConnectionWrapper( 6066): showStatusIcon on inactive InputConnection\nF/libc    ( 6066): Fatal signal 11 (SIGSEGV) at 0x54ff002e (code=1), thread 6156 (le.testAndroid4)\nI/DEBUG   (  147): pid: 6066, tid: 6156, name: le.testAndroid4  &gt;&gt;&gt; org.qtproject.example.testAndroid4 &lt;&lt;&lt;\nI/ActivityManager(  457): Process org.qtproject.example.testAndroid4 (pid 6066) has died.\n\n\n\"org.qtproject.example.testAndroid4\" died.\n</code></pre>\n\n<p>See pushButton in mainwindow.cpp and commented thigs in mainwindow.h(they are not commented really).</p>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-qi"], "answers": [{"comments": [{"owner": {"reputation": 794, "user_id": 3990451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c1cad8260d104d56e3228c0e4b4f88fd?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/3990451/mmm"}, "edited": false, "score": 0, "creation_date": 1449142482, "post_id": 34054330, "comment_id": 55882967, "body": "what about if Rule1&#39;s attribute is identical to Rule2&#39;s attribute (Rule2, not +Rule2) ? still the same ?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 794, "user_id": 3990451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c1cad8260d104d56e3228c0e4b4f88fd?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/3990451/mmm"}, "edited": false, "score": 0, "creation_date": 1449168337, "post_id": 34054330, "comment_id": 55900687, "body": "Yes (why would it make a difference?)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1449095267, "creation_date": 1449095267, "answer_id": 34054330, "question_id": 34048159, "link": "https://stackoverflow.com/questions/34048159/spirit-sa-attribute-numbers/34054330#34054330", "title": "spirit SA attribute numbers", "body": "<p>Yes.</p>\n\n<p>Also, <code>qi::_0</code> is the combined attribute (i.e. a Fusion tuple of <code>(qi::_1, qi::_2, qi::_3)</code>)</p>\n"}], "owner": {"reputation": 794, "user_id": 3990451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c1cad8260d104d56e3228c0e4b4f88fd?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/3990451/mmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 34054330, "answer_count": 1, "score": 2, "last_activity_date": 1571855336, "creation_date": 1449074481, "last_edit_date": 1450099923, "question_id": 34048159, "link": "https://stackoverflow.com/questions/34048159/spirit-sa-attribute-numbers", "title": "spirit SA attribute numbers", "body": "<p>Using phoenix, with a rule like this:</p>\n\n<pre><code>start_ = ( Rule1[SA1] &gt;&gt; +Rule2[SA2] &gt;&gt; Rule3 )\n[ SA ];\n</code></pre>\n\n<p>Is it correct that, inside SA, </p>\n\n<ul>\n<li>_1 is Rule1's attribute</li>\n<li>_2 is (+Rule2)'s attribute</li>\n<li>_3 is Rule3's attribute?</li>\n</ul>\n\n<p>?</p>\n"}, {"tags": ["c++", "qt", "qlabel"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1449074140, "post_id": 34048012, "comment_id": 55850642, "body": "Why not just use the <code>ui-&gt;nameOfLabel</code> instead?"}, {"owner": {"reputation": 683, "user_id": 2359593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/xJJPi.jpg?s=128&g=1", "display_name": "Megasa3", "link": "https://stackoverflow.com/users/2359593/megasa3"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1449074241, "post_id": 34048012, "comment_id": 55850720, "body": "@owacoder Because its a really big project with a lot of widgets and things and, in this case, this  widget will be created only if something happens so I don&#39;t want to create it if it&#39;s not necessary."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1449074604, "post_id": 34048012, "comment_id": 55851018, "body": "I think any widget placed in Qt Designer forms must be in memory throughout the lifespan of the application. If you have a temporary widget, you would probably have to place that in a layout yourself."}], "answers": [{"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 1, "last_activity_date": 1449075182, "last_edit_date": 1449075182, "creation_date": 1449074618, "answer_id": 34048219, "question_id": 34048012, "link": "https://stackoverflow.com/questions/34048012/qt-how-can-i-use-my-widgets-created-with-code-in-the-ui-file/34048219#34048219", "title": "Qt: How can I use my widgets created with code in the *.ui file", "body": "<p>Widgets created at runtime from your source code and being added to a widget as child CANNOT be seen in Qt Designer when you edit the .ui file of the widget they will be added to.</p>\n\n<p>However, there could be an alternative (reading what you are trying to achieve: having some child widgets being present or not based on the context):</p>\n\n<p>Create the widget from the .ui within Qt Designer and hide it (<code>QWidget::hide()</code>) or even remove it (<code>QLayout::removeWidget()</code>) programmatically if not needed at runtime.</p>\n\n<p>If the real reason why you want to see it is because you want to \"<em>move it to a space in the screen and in that case, it would be much easier for me to be able to do it through the visual way</em>\". Then I recommend that you simply create an empty <code>QWidget</code> (or <code>QLayout</code>) in Qt Designer (graphically: easy to place where you want to) and later (programmatically) add your <code>QLabel</code> to it (rather than adding it to the main top-level widget): then, it goes in the place you determined from Qt Designer tool.</p>\n\n<p>You should not need any complex code to programmatically display your QLabel in a specific place, just choose the right parent to have it be displayed in the right place!</p>\n"}], "owner": {"reputation": 683, "user_id": 2359593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/xJJPi.jpg?s=128&g=1", "display_name": "Megasa3", "link": "https://stackoverflow.com/users/2359593/megasa3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 34048219, "answer_count": 1, "score": 0, "last_activity_date": 1449075182, "creation_date": 1449074086, "last_edit_date": 1449074157, "question_id": 34048012, "link": "https://stackoverflow.com/questions/34048012/qt-how-can-i-use-my-widgets-created-with-code-in-the-ui-file", "title": "Qt: How can I use my widgets created with code in the *.ui file", "body": "<p>I have a project in Qt made with the QWizard and QWizardPage classes. There are two ways to create a widget i.e: a Label:</p>\n\n<ol>\n<li>One is going to the *.ui file and search the element and put it where you want (visual way). Then you can access it on your code with <code>ui-&gt;nameOfLabel</code>.</li>\n<li>The other one is going to your code and creating it like <code>QLabel codedLabel;</code></li>\n</ol>\n\n<p>Actually I'm using the second way (it's easier for me to create, show and use) but my question is: <strong>Is there any way that I can see my label codedLabel on the *.ui file?</strong> </p>\n\n<p>I would like to move it to a space in the screen and in that case, it would be much easier for me to be able to do it through the visual way (but having the label created in the code instead of the ui).</p>\n\n<p>Thank you so much.</p>\n"}, {"tags": ["c++", "opengl", "rendering", "shader"], "comments": [{"owner": {"reputation": 427, "user_id": 1283466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIHiq.jpg?s=128&g=1", "display_name": "Open Kastle", "link": "https://stackoverflow.com/users/1283466/open-kastle"}, "edited": false, "score": 1, "creation_date": 1449074292, "post_id": 34047937, "comment_id": 55850767, "body": "What libraries are you using?  It looks like you have two separate rendering passes in your <code>Render</code> function.  It seems like you are assuming that multiple calls to <code>mesh-&gt;Render()</code> would result in some sort of aggregation of the individual shader effects but I can&#39;t imagine that that would be the case."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1449074759, "post_id": 34047937, "comment_id": 55851137, "body": "Do you have blending enabled?"}, {"owner": {"reputation": 3, "user_id": 5631242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e76fa64121db22a245d58534cf5ea8?s=128&d=identicon&r=PG", "display_name": "MisterVento3", "link": "https://stackoverflow.com/users/5631242/mistervento3"}, "reply_to_user": {"reputation": 427, "user_id": 1283466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIHiq.jpg?s=128&g=1", "display_name": "Open Kastle", "link": "https://stackoverflow.com/users/1283466/open-kastle"}, "edited": false, "score": 0, "creation_date": 1449075069, "post_id": 34047937, "comment_id": 55851374, "body": "@OpenKastle I am using OpenGL library, glew and glfw. BDL Yes, glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);"}, {"owner": {"reputation": 427, "user_id": 1283466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIHiq.jpg?s=128&g=1", "display_name": "Open Kastle", "link": "https://stackoverflow.com/users/1283466/open-kastle"}, "edited": false, "score": 0, "creation_date": 1449075202, "post_id": 34047937, "comment_id": 55851483, "body": "@MisterVento3 I use the same libraries and I&#39;m not familiar with the <code>Bind()</code>, <code>UpdateShader()</code>, and <code>Render()</code> calls so I&#39;m assuming you wrote these yourself.  It would help if we could see all of the relevant code."}, {"owner": {"reputation": 164, "user_id": 5425181, "user_type": "registered", "profile_image": "https://graph.facebook.com/1142118662469693/picture?type=large", "display_name": "Pedro Sassen Veiga", "link": "https://stackoverflow.com/users/5425181/pedro-sassen-veiga"}, "edited": false, "score": 0, "creation_date": 1449076038, "post_id": 34047937, "comment_id": 55852073, "body": "@MisterVento3 Do you have <code>DEPTH_TEST</code> enabled? If so disable before and enable after the render calls again"}, {"owner": {"reputation": 3, "user_id": 5631242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e76fa64121db22a245d58534cf5ea8?s=128&d=identicon&r=PG", "display_name": "MisterVento3", "link": "https://stackoverflow.com/users/5631242/mistervento3"}, "reply_to_user": {"reputation": 427, "user_id": 1283466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIHiq.jpg?s=128&g=1", "display_name": "Open Kastle", "link": "https://stackoverflow.com/users/1283466/open-kastle"}, "edited": false, "score": 0, "creation_date": 1449076099, "post_id": 34047937, "comment_id": 55852124, "body": "@OpenKastle Here is code: <a href=\"http://speedy.sh/mxMYn/code.rar\" rel=\"nofollow noreferrer\">speedy.sh/mxMYn/code.rar</a>"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1449077830, "post_id": 34047937, "comment_id": 55853242, "body": "This is really just overdraw on the same buffer. Put all your lighting calculations in a single shader / program, or use multi-pass rendering for your lighting like modern renderers do."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5631242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e76fa64121db22a245d58534cf5ea8?s=128&d=identicon&r=PG", "display_name": "MisterVento3", "link": "https://stackoverflow.com/users/5631242/mistervento3"}, "edited": false, "score": 0, "creation_date": 1449086838, "post_id": 34050054, "comment_id": 55858349, "body": "Thanks, i fix that, but i have new problem, how fix that directional light: <a href=\"http://imgur.com/uLEtoVF\" rel=\"nofollow noreferrer\">imgur.com/uLEtoVF</a>, my code: <a href=\"http://pastebin.com/6xyzERqC\" rel=\"nofollow noreferrer\">pastebin.com/6xyzERqC</a>"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 3, "user_id": 5631242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e76fa64121db22a245d58534cf5ea8?s=128&d=identicon&r=PG", "display_name": "MisterVento3", "link": "https://stackoverflow.com/users/5631242/mistervento3"}, "edited": false, "score": 0, "creation_date": 1449090110, "post_id": 34050054, "comment_id": 55860069, "body": "@MisterVento3: Looks not like a shader but like a geometry problem. What appears in your image is usually the cause of using shared vertices, i.e. using the same vertex for all 3 faces of the cube it borders with. A vertex is the whole tuple <code>[position, normal, \u2026]</code> and if you change only one bit of if, you&#39;re dealing with an entirely different vertex. And the normal differs for each face of a cube, so you have different vertices."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1449080085, "creation_date": 1449080085, "answer_id": 34050054, "question_id": 34047937, "link": "https://stackoverflow.com/questions/34047937/two-shaders-on-one-object/34050054#34050054", "title": "Two shaders on one object", "body": "<p>Your problem is this:</p>\n\n<blockquote>\n<pre><code>shader1-&gt;Bind();\nshader1-&gt;UpdateShader(rc, transform, meshObject.material);\nmeshObject.material-&gt;GetTexture()-&gt;Bind(0);\nmeshObject.mesh-&gt;Render();\n\nshader2-&gt;Bind();\nshader2-&gt;UpdateShader(rc, transform, meshObject.material);\nmeshObject.material-&gt;GetTexture()-&gt;Bind(0);\nmeshObject.mesh-&gt;Render();\n</code></pre>\n</blockquote>\n\n<p>OpenGL doesn't know what \"object\" are. It just draws points, lines and triangles, one at a time. To sort out depth overlap the depth buffer method is used. When you use exactly the same drawing call (<code>meshObject.mesh-&gt;Render</code>) with all the same vertex setup and depth testing enabled then one of the two draw calls will win over the other.</p>\n\n<p>Also, more importantly, drawing calls don't \"stack\". You simply can not combine shaders simply by drawing the same thing multiple times; it may sort of work for additive processes. But that's barking up the wrong tree: Instead of saving additional work, you're duplicating the amount of work to be done.</p>\n\n<p>What you should do instead is merging the two shaders into single one and draw the geometry only once, with the merged shader.</p>\n"}], "owner": {"reputation": 3, "user_id": 5631242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e76fa64121db22a245d58534cf5ea8?s=128&d=identicon&r=PG", "display_name": "MisterVento3", "link": "https://stackoverflow.com/users/5631242/mistervento3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 34050054, "answer_count": 1, "score": -1, "last_activity_date": 1449080534, "creation_date": 1449073899, "question_id": 34047937, "link": "https://stackoverflow.com/questions/34047937/two-shaders-on-one-object", "title": "Two shaders on one object", "body": "<p>I have problem with multiply shaders on my one object.\nThat's my render code:</p>\n\n<pre><code>#include \"MeshRenderer.h\"\n\nForwardAmbient* shader1;\nForwardDirectional* shader2;\n\nMeshRenderer::MeshRenderer(Obj&amp; obj) :\n    meshObject(obj)\n{\n    shader1 = new ForwardAmbient(vec3(1, 1, 1));\n    shader2 = new ForwardDirectional(vec3(1, 0, 0), vec3(1, 1, 1));\n}\n\nMeshRenderer::~MeshRenderer()\n{\n\n}\n\nvoid MeshRenderer::Render(RenderingCore* rc)\n{\n    //for (Shader* shader : meshObject.shaders)\n    //{\n\n    //}\n\n    shader1-&gt;Bind();\n    shader1-&gt;UpdateShader(rc, transform, meshObject.material);\n    meshObject.material-&gt;GetTexture()-&gt;Bind(0);\n    meshObject.mesh-&gt;Render();\n\n    shader2-&gt;Bind();\n    shader2-&gt;UpdateShader(rc, transform, meshObject.material);\n    meshObject.material-&gt;GetTexture()-&gt;Bind(0);\n    meshObject.mesh-&gt;Render();\n\n    /*\n    meshObject.shader-&gt;Bind();\n    meshObject.shader-&gt;UpdateShader(rc, transform, meshObject.material);\n    meshObject.material-&gt;GetTexture()-&gt;Bind(0);\n    meshObject.mesh-&gt;Render();\n    */\n}\n</code></pre>\n\n<p>ambient light.vs:</p>\n\n<pre><code>#version 120\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec3 normal;\n\nvarying vec2 texCoord0;\n\nuniform mat4 transform;\nuniform mat4 projection;\n\nvoid main()\n{\n    gl_Position = (projection * transform) * vec4(position, 1);\n    texCoord0 = texCoord;\n}\n</code></pre>\n\n<p>ambient light.fs:</p>\n\n<pre><code>#version 120\n\nvarying vec2 texCoord0;\n\nuniform vec3 ambientLight;\nuniform float alpha;\nuniform sampler2D sampler;\n\nvoid main()\n{\n    gl_FragColor = texture2D(sampler, texCoord0.xy) * vec4(ambientLight,  alpha);\n}\n</code></pre>\n\n<p>directional light.vs</p>\n\n<pre><code>#version 120\n\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec3 normal;\n\nvarying vec2 texCoord0;\nvarying vec3 normal0;\nvarying vec3 worldPos0;\n\nuniform mat4 transform;\nuniform mat4 projection;\n\nvoid main()\n{\n    gl_Position = (projection * transform) * vec4(position, 1);\n    texCoord0 = texCoord;\n    normal0 = (transform * vec4(normal, 0)).xyz;\n    worldPos0 = (transform * vec4(position, 1)).xyz;\n}\n</code></pre>\n\n<p>directional light.fs</p>\n\n<pre><code>#version 120\n\nvarying vec2 texCoord0;\nvarying vec3 normal0;\nvarying vec3 worldPos0;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform vec3 direction;\nuniform float specularIntensity;\nuniform float specularPower;\nuniform vec3 eyePosition;\n\nuniform sampler2D sampler;\n\nvec4 calcLight(vec3 color, float alpha, vec3 direction, vec3 normal)\n{\n    float diffuseFactor = dot(normal, -direction);\n\n    vec4 diffuseColor = vec4(0,0,0,0);\n    vec4 specularColor = vec4(0,0,0,0);\n\n    if(diffuseFactor &gt; 0)\n    {\n        diffuseColor = vec4(color, 1.0) * diffuseFactor;\n\n        vec3 directionToEye = normalize(eyePosition - worldPos0);\n        vec3 reflectDirection = normalize(reflect(direction, normal));\n\n        float specularFactor = dot(directionToEye, reflectDirection);\n        specularFactor = pow(specularFactor, specularPower);\n\n        if(specularFactor &gt; 0)\n        {\n            specularColor = vec4(color, 1.0) * specularIntensity * specularFactor;\n        }\n    }\n\n    return diffuseColor + specularColor;\n}\n\nvec4 calcDirectionalLight(vec3 color, float alpha, vec3 direction, vec3 normal)\n{\n    return calcLight(color, alpha, -direction, normal);\n}\n\nvoid main()\n{\n    gl_FragColor = texture2D(sampler, texCoord0.xy) *     calcDirectionalLight(color, 1, direction, normalize(normal0));\n}\n</code></pre>\n\n<p>Here is the result:\n<a href=\"http://imgur.com/Bawny2P\" rel=\"nofollow\">http://imgur.com/Bawny2P</a>\nOnly ambient light is render, directional light no</p>\n"}, {"tags": ["c++", "templates", "template-specialization", "partial-specialization", "template-templates"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1449074056, "post_id": 34047868, "comment_id": 55850594, "body": "<a href=\"http://ideone.com/cDVpGu\" rel=\"nofollow noreferrer\">Yes</a>?"}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1449074240, "post_id": 34047868, "comment_id": 55850718, "body": "@KerrekSB I&#39;ve edited my question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1449074521, "post_id": 34047868, "comment_id": 55850965, "body": "Look at you compiler messages (or try another compiler): error: type/value mismatch at argument 1 in template parameter list. Change it to <code>struct Device : Manufacturer&lt;Device&lt;F&gt;,F&gt;</code>"}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "edited": false, "score": 0, "creation_date": 1449074887, "post_id": 34047868, "comment_id": 55851249, "body": "@DieterL&#252;cking Thanks. I thought KerrekSB was making a fuss about my language."}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "edited": false, "score": 0, "creation_date": 1449074999, "post_id": 34047868, "comment_id": 55851324, "body": "BTW, why on earth would <code>Manufacturer&lt;Device&lt;F&gt;,F&gt;</code> match the specialization? I thought surely <code>Device&lt;F&gt;</code> is a type and not a template."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 1, "creation_date": 1449075305, "post_id": 34047868, "comment_id": 55851556, "body": "The base template takes a type and specializations cannot change that.  What the specialization is saying is &quot;when this type looks like this, use this class/template instead&quot;.  If the base template takes a type, you must always give it a type, hence the <code>Device&lt;F&gt;</code> and not the <code>Device</code>"}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1449075474, "post_id": 34047868, "comment_id": 55851700, "body": "@GuyGreer ah ... So its just a sort of pattern matching <i>a la</i> Haskell."}, {"owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1512338668, "post_id": 34047868, "comment_id": 82205469, "body": "@SirGuy post your comment as an answer and I will mark it as such."}], "owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1449077557, "creation_date": 1449073707, "last_edit_date": 1449074214, "question_id": 34047868, "link": "https://stackoverflow.com/questions/34047868/partial-specialization-for-on-template-template-parameters", "title": "Partial specialization for/on template template parameters", "body": "<p>I'd appreciate help partially specializing a template (<code>Manufacturer</code>) for template template parameters? Here's my current (unsuccessful) attempt. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nenum FORMAT{ A , B };\n\ntemplate&lt;typename D , FORMAT F&gt;\nstruct Manufacturer\n{\n    Manufacturer(){ std::cout &lt;&lt; \"Generic\" &lt;&lt; std::endl; }\n};\n\ntemplate&lt;\n        template&lt;FORMAT&gt; class D , FORMAT F\n        &gt;\nstruct Manufacturer&lt;D&lt;F&gt;,F&gt; : Manufacturer&lt;void,F&gt;\n{\n    Manufacturer(){ std::cout &lt;&lt; \"Specialization\" &lt;&lt; std::endl; }\n};\n\ntemplate&lt;FORMAT F&gt;\nstruct Device : Manufacturer&lt;Device,F&gt;\n{\n};\n\nint main()\n{\n    Device&lt;A&gt; device;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "object", "stack", "heap"], "answers": [{"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 1, "last_activity_date": 1449076634, "last_edit_date": 1449076634, "creation_date": 1449074050, "answer_id": 34047994, "question_id": 34047781, "link": "https://stackoverflow.com/questions/34047781/object-created-in-function-is-it-saved-on-stack-or-on-heap/34047994#34047994", "title": "object created in function, is it saved on stack or on heap?", "body": "<pre><code>void addBlee() {\n    blee b;              // this is created on the stack\n    blee* bp = &amp;b;\n    list.push_front(bp); // this is a pointer to that object\n}  // after this brace b no longer exists, hence you have a dangling pointer\n</code></pre>\n\n<p>Do this instead:</p>\n\n<pre><code>list.push_front(new blee);  // this is created on the heap and\n                            // therefore it's lifetime is until you call\n                            // delete on it`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 877, "user_id": 2548319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Thw8X.jpg?s=128&g=1", "display_name": "Paulo1205", "link": "https://stackoverflow.com/users/2548319/paulo1205"}, "edited": false, "score": 0, "creation_date": 1449078826, "post_id": 34048704, "comment_id": 55853813, "body": "Only one minor correction: where you say &quot;global variable&quot;, perhaps it would have been batter said static allocation -- of which global variables are one of the possible cases."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 5, "last_activity_date": 1449078991, "last_edit_date": 1449078991, "creation_date": 1449075884, "answer_id": 34048704, "question_id": 34047781, "link": "https://stackoverflow.com/questions/34047781/object-created-in-function-is-it-saved-on-stack-or-on-heap/34048704#34048704", "title": "object created in function, is it saved on stack or on heap?", "body": "<p>Keep in mind following thing: the object is NEVER created in the heap (more correctly called 'dynamic storage' in C++) unless explicitly allocated on the heap using <code>new operator</code> or <code>malloc</code> variant.</p>\n\n<p>Everything else is either stack/register (which in C++ should be called 'automatic storage') or a a statically allocated variable. An example of statically allocated variables are global variables in your program, variables local to the function which are declared static or static data members of classess.</p>\n\n<p>You also need to very clear disntguish between a pointer and the object itself. In the following single line:</p>\n\n<pre><code>void foo() {\n    int* i = new int(42);\n}\n</code></pre>\n\n<p><code>int</code> is allocated dynamically (on the heap), while pointer to that allocated int has an automatic storage (stack or register). As a result, once <code>foo()</code> exits, the pointer is obliterated, but the dynamically allocated object remains without any means to access it. This is called classic <em>memory leak</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 130, "user_id": 5381906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MhAq.jpg?s=128&g=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/5381906/rusty"}, "edited": false, "score": 0, "creation_date": 1449078373, "post_id": 34049502, "comment_id": 55853554, "body": "give a read to this   <a href=\"http://stackoverflow.com/questions/6337294/creating-an-object-with-or-without-new\" title=\"creating an object with or without new\">stackoverflow.com/questions/6337294/&hellip;</a>"}], "tags": [], "owner": {"reputation": 130, "user_id": 5381906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4MhAq.jpg?s=128&g=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/5381906/rusty"}, "is_accepted": false, "score": 2, "last_activity_date": 1466897143, "last_edit_date": 1466897143, "creation_date": 1449078321, "answer_id": 34049502, "question_id": 34047781, "link": "https://stackoverflow.com/questions/34047781/object-created-in-function-is-it-saved-on-stack-or-on-heap/34049502#34049502", "title": "object created in function, is it saved on stack or on heap?", "body": "<p>Heap is the segment where dynamic memory allocation usually takes place so when ever you explicitly allocate memory to anything in a program you have given it memory from the heap segment.</p>\n\n<pre><code>Obj yo = new Obj; //something like this.\n</code></pre>\n\n<p>Stack is the another segment where automatic variables are stored, along with information that is saved each time a function is called.</p>\n\n<p>Like when we declare:</p>\n\n<pre><code>*int* variable;\n</code></pre>\n\n<p>It will be on the stack and its validity is only till a particular function exits, whereas variables, objects etc on the heap remain there till main() finishes.</p>\n"}], "owner": {"reputation": 311, "user_id": 4948410, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a13479576a795699cc86913fbac4511d?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Fensterheim", "link": "https://stackoverflow.com/users/4948410/daniel-fensterheim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2085, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1466897143, "creation_date": 1449073471, "last_edit_date": 1449073755, "question_id": 34047781, "link": "https://stackoverflow.com/questions/34047781/object-created-in-function-is-it-saved-on-stack-or-on-heap", "title": "object created in function, is it saved on stack or on heap?", "body": "<p>I am using c++ specifically:\nwhen I create an object in a function, will this object be saved on the stack or on the heap?</p>\n\n<p>reason I am asking is since I need to save a pointer to an object, and the only place the object can be created is within functions, so if I have a pointer to that object and the method finishes, the pointer might be pointing to garbage after.\n--> if I add a pointer to the object to a list (which is a member of the class) and then the method finishes I might have the element in the list pointing to garbage.</p>\n\n<p>so again - when the object is created in a method, is it saved on the stack (where it will be irrelevant after the function ends) or is it saved on the heap (therefore I can point to it without causing any issues..)?</p>\n\n<p>example:</p>\n\n<pre><code>class blah{ \nprivate:\n    list&lt;*blee&gt; b;\npublic:\n    void addBlee() {\n        blee b;\n        blee* bp = &amp;b;\n        list.push_front(bp);\n    }\n}\n</code></pre>\n\n<p>you can ignore syntax issues -- the above is just to understand the concept and dilemma... </p>\n\n<p>Thanks all!</p>\n"}, {"tags": ["c++", "c++11", "std", "stdset"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5631043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YYSdx.jpg?s=128&g=1", "display_name": "JordiS", "link": "https://stackoverflow.com/users/5631043/jordis"}, "edited": false, "score": 0, "creation_date": 1449087501, "post_id": 34048023, "comment_id": 55858704, "body": "thanks! My idea was to use <code>std::set</code> to clean the list of points and obtain as the same point two points closer than the tolerance (that&#39;s why the tolerance is so big, 0.1), but I see that it is not possible to do it with <code>std::set</code>."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 6, "last_activity_date": 1449074452, "last_edit_date": 1449074452, "creation_date": 1449074116, "answer_id": 34048023, "question_id": 34047772, "link": "https://stackoverflow.com/questions/34047772/stdset-custom-comparator-for-2d-points/34048023#34048023", "title": "std::set custom comparator for 2D points", "body": "<p>Your comparison function is wrong. Take out the +-tolerance. That's not useful when trying to determine an absolute order among floating point values. It doesn't enforce transitivity of equivalence, for example. That is, if <code>A == B</code> (i.e. <code>f(A, B)</code> and <code>f(B, A)</code> are both false) and <code>B == C</code>, then it is not necessarily the case that <code>A == C</code> when you have that tolerance adjustment in there.</p>\n\n<p>Just do this:</p>\n\n<pre><code>if (pointA._x &lt; pointB._x) return true;\nif (pointA._x &gt; pointB._x) return false;\nif (pointA._y &lt; pointB._y) return true;\nreturn false;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1449075121, "post_id": 34048322, "comment_id": 55851416, "body": "If <code>A</code> is {0,1} and <code>B</code> is {1,0}, this will return true for both <code>A &lt; B</code> and <code>B &lt; A</code>, breaking antisymmetry."}], "tags": [], "owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "is_accepted": false, "score": 3, "last_activity_date": 1449075303, "last_edit_date": 1449075303, "creation_date": 1449074911, "answer_id": 34048322, "question_id": 34047772, "link": "https://stackoverflow.com/questions/34047772/stdset-custom-comparator-for-2d-points/34048322#34048322", "title": "std::set custom comparator for 2D points", "body": "<p>Firstly, unless you have a reason not to, it's preferable to just define <code>operator&lt;</code> for your class, this means less typing when using <code>std::set</code> etc, and means you can using infix <code>&lt;</code>. Secondly, as Benjamin points out, there should be no need for <code>tolerance</code>. Thirdly, you can simplify the logic of the comparison.</p>\n\n<p>You should have something like:</p>\n\n<pre><code>bool operator&lt;(const MyPoint2D&amp; lhs, const MyPoint2D&amp; rhs)\n{\n    return lhs._x &lt; rhs._x || (lhs._x == rhs._x &amp;&amp; lhs._y &lt; rhs._y);\n}\n</code></pre>\n\n<p>Then you can just use <code>std::set&lt;MyPoint2D&gt;</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5631043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YYSdx.jpg?s=128&g=1", "display_name": "JordiS", "link": "https://stackoverflow.com/users/5631043/jordis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "accepted_answer_id": 34048023, "answer_count": 2, "score": 2, "last_activity_date": 1449075303, "creation_date": 1449073445, "last_edit_date": 1449073957, "question_id": 34047772, "link": "https://stackoverflow.com/questions/34047772/stdset-custom-comparator-for-2d-points", "title": "std::set custom comparator for 2D points", "body": "<p>I need a list of non-duplicated 2D points, so I use a <code>std::set</code> with a custom comparison function. The function I use has problems after inserting points because sometimes the <code>std::find</code> does not find the already inserted points.</p>\n\n<pre><code>const double tolerance = 0.1;\nstruct MyPoint2D\n{\n  MyPoint2D(double x, double y) : _x(x), _y(y) {}\n  double _x, _y;\n};\nauto compMyPoint2D = [&amp;](const MyPoint2D&amp; pointA, const MyPoint2D&amp; pointB) -&gt; bool\n{\n  if (pointA._x &lt; pointB._x - tolerance) return true;\n  if (pointA._x &gt; pointB._x + tolerance) return false;\n  if (pointA._y &lt; pointB._y - tolerance) return true;\n  return false;\n};\nstd::set&lt;MyPoint2D, decltype(compMyPoint2D)&gt; orderedMyPoints(compMyPoint2D);\nMyPoint2D pointA(0.66,1.14);\nMyPoint2D pointB(0.75, 0.0);\nMyPoint2D pointC(0.57,1.19);\norderedMyPoints.insert(pointA);\norderedMyPoints.insert(pointB);\norderedMyPoints.insert(pointC);\nif (orderedMyPoints.find(pointC)==orderedMyPoints.end())\n{\n  std::cout &lt;&lt; \"Not found\" &lt;&lt; std::endl;\n  orderedMyPoints.insert(pointC);\n  if (orderedMyPoints.find(pointC)==orderedMyPoints.end())\n    std::cout &lt;&lt; \"Still not found\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Would I need to preorder the 2d points before inserting into the <code>std::set</code> or there is a better comparison function for 2d points?</p>\n\n<p>I need to use <code>std::find</code> after inserting all points to obtain the final point indexes.</p>\n\n<p>I'm using native C++ on Microsoft Visual Studio 2010.</p>\n"}, {"tags": ["c++", "templates", "pointers", "function-pointers", "variadic-templates"], "comments": [{"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1449073666, "post_id": 34047732, "comment_id": 55850323, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19808054/convert-c-function-pointer-to-c-function-pointer\">Convert C++ function pointer to c function pointer</a>"}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1449073695, "post_id": 34047732, "comment_id": 55850342, "body": "Or <a href=\"http://stackoverflow.com/questions/19808054/convert-c-function-pointer-to-c-function-pointer\" title=\"convert c function pointer to c function pointer\">stackoverflow.com/questions/19808054/&hellip;</a>, if you prefer"}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1449073732, "post_id": 34047732, "comment_id": 55850373, "body": "And maybe <a href=\"http://stackoverflow.com/questions/4210710/cast-pointer-to-member-function-to-normal-pointer\" title=\"cast pointer to member function to normal pointer\">stackoverflow.com/questions/4210710/&hellip;</a>"}, {"owner": {"reputation": 12594, "user_id": 2491746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4432131c9d27a81503f25956bc8b9c?s=128&d=identicon&r=PG", "display_name": "Simple", "link": "https://stackoverflow.com/users/2491746/simple"}, "edited": false, "score": 0, "creation_date": 1449073862, "post_id": 34047732, "comment_id": 55850465, "body": "You should know that <code>lua_CFunction</code> has type <code>extern &quot;C&quot; int (*) (lua_State *L)</code>. That you can pass <code>int (*)(lua_State *L)</code> instead is a bug in nearly every compiler and isn&#39;t standard conformant."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1449074443, "post_id": 34047732, "comment_id": 55850905, "body": "What about creating a lambda and passing that in? What does <code>wrapFunc</code> do with the function it receives?"}, {"owner": {"reputation": 616, "user_id": 807433, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7b52b20945d7e56f578fa8482c2e9728?s=128&d=identicon&r=PG", "display_name": "stands2reason", "link": "https://stackoverflow.com/users/807433/stands2reason"}, "edited": false, "score": 0, "creation_date": 1449075823, "post_id": 34047732, "comment_id": 55851925, "body": "It uses a variadic template to convert Lua parameters to the appropriate C type, and then does a variadic call. This is why I can&#39;t use a lambda or bind: I don&#39;t have the this pointer, it is unpacked from the Lua arguments. I would have a convert partial specialization that expects a table and extracts the userdata this pointer."}, {"owner": {"reputation": 616, "user_id": 807433, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7b52b20945d7e56f578fa8482c2e9728?s=128&d=identicon&r=PG", "display_name": "stands2reason", "link": "https://stackoverflow.com/users/807433/stands2reason"}, "edited": false, "score": 0, "creation_date": 1449157509, "post_id": 34047732, "comment_id": 55893436, "body": "I explained why the linked question is in fact not a dupe. That question was like the opposite of my question: the asker wanted to convert a C++ member function a C function pointer, but didn&#39;t seem to understand that this would involve explicitly passing as instance pointer as an argument, which is exactly what I did."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1535294705, "post_id": 34050499, "comment_id": 91004833, "body": "Actually, it doesn&#39;t. It just converts a member-function-pointer into a callable."}], "tags": [], "owner": {"reputation": 616, "user_id": 807433, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7b52b20945d7e56f578fa8482c2e9728?s=128&d=identicon&r=PG", "display_name": "stands2reason", "link": "https://stackoverflow.com/users/807433/stands2reason"}, "is_accepted": false, "score": 0, "last_activity_date": 1449081633, "creation_date": 1449081633, "answer_id": 34050499, "question_id": 34047732, "link": "https://stackoverflow.com/questions/34047732/convert-member-function-pointer-to-ordinary-function-pointer/34050499#34050499", "title": "Convert member function pointer to ordinary function pointer", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/functional/mem_fn\" rel=\"nofollow\">std::mem_fn</a> does this. </p>\n\n<p>In order to make the template match: I had to explicitly declare the args tuple as a Class pointer followed by the parameter pack:</p>\n\n<pre><code>template&lt;typename C, typename...Args&gt;\nstruct wrapMethod&lt;void,C,Args...&gt;{\n    static int wrap(const string&amp; name, void (C::*func)(Args...), lua_State* L)\n    {\n        tuple&lt;C*, Args...&gt; args = cargs&lt;C*,Args...&gt;::getCArgs(L, name);\n\n        //Return type (first template parameter) cannot be inferred.\n        variadic_call&lt;void&gt;(mem_fn(func), args);\n\n        return 0;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 616, "user_id": 807433, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7b52b20945d7e56f578fa8482c2e9728?s=128&d=identicon&r=PG", "display_name": "stands2reason", "link": "https://stackoverflow.com/users/807433/stands2reason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 691, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449155756, "creation_date": 1449073359, "last_edit_date": 1495541711, "question_id": 34047732, "link": "https://stackoverflow.com/questions/34047732/convert-member-function-pointer-to-ordinary-function-pointer", "title": "Convert member function pointer to ordinary function pointer", "body": "<p>I am using the variadic call pattern <a href=\"https://stackoverflow.com/questions/10766112/c11-i-can-go-from-multiple-args-to-tuple-but-can-i-go-from-tuple-to-multiple\">shown here</a>. It works fine for ordinary C functions. But I want to use it with a member function and a tuple that explicitly has an instance pointer as the first argument.</p>\n\n<p>I tried something like this:</p>\n\n<pre><code>template&lt;typename Ret, typename C, typename...Args&gt;\nint methodWrapper(const string&amp; name, Ret (C::*func)(Args...), lua_State* L)\n{\n    return wrap&lt;Ret,C*,Args...&gt;::wrapFunc(name, func, L);\n}\n</code></pre>\n\n<p>But it fails to convert the pointer type:</p>\n\n<pre><code>cannot initialize a parameter of type 'void (*)(Object *, float, float)' with an lvalue of type 'void (Object::*)(float, float)'\n</code></pre>\n\n<p>In this case, the wrap function is templated, so the type of the pointer has to match exactly.</p>\n\n<pre><code>template&lt;typename Ret, typename...Args&gt;\nstruct wrap{\n    static int wrapFunc(const string&amp; name, Ret (*func)(Args...), lua_State* L)\n    {\n        ...\n    }\n};\n</code></pre>\n\n<p>How to I explicitly convert a member function pointer into an ordinary function pointer that takes the this pointer as its first argument?</p>\n\n<p>EDIT: for those that have linked me to <a href=\"https://stackoverflow.com/questions/19808054/convert-c-function-pointer-to-c-function-pointer\">this question</a>, it is not the same. I do not have to pass a plain C function pointer to an existing API with a specific interface. And I am not trying to bind a member function to a specific object. This question also does not deal with variadic call or tuples.</p>\n"}, {"tags": ["c++", "objective-c", "c", "macos", "active-directory"], "comments": [{"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 1, "creation_date": 1449073454, "post_id": 34047532, "comment_id": 55850141, "body": "@rmaddy, thanks for editing the tags, but I&#39;m looking for a solution in any of the languages C, C++ or objective-c, which is the reason for the tags. If you still think these tags are not relevant, please let me know why."}, {"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1449073551, "post_id": 34047532, "comment_id": 55850243, "body": "Tags should represent what your question is about. Your question isn&#39;t about any specific language which is why I removed the language tags. You should update your question stating what languages you are willing to work with."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 1, "creation_date": 1449075234, "post_id": 34047532, "comment_id": 55851504, "body": "@rmaddy, thanks for your input. However, after searching Meta, I believe the tags are relevant, as discussed <a href=\"http://meta.stackoverflow.com/questions/281443/how-general-must-a-problem-be-to-warrant-use-of-a-language-library-tag\">here</a> and <a href=\"http://meta.stackoverflow.com/questions/281094/tags-is-less-more\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2595, "user_id": 2452682, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GEzX4.jpg?s=128&g=1", "display_name": "IdoT", "link": "https://stackoverflow.com/users/2452682/idot"}, "is_accepted": false, "score": 0, "last_activity_date": 1526469212, "creation_date": 1526469212, "answer_id": 50369401, "question_id": 34047532, "link": "https://stackoverflow.com/questions/34047532/check-if-a-user-is-a-local-or-domain-account/50369401#50369401", "title": "Check if a user is a local or domain account", "body": "<p>Using <em>OpenDirectory</em> API I've managed to achieve a similar task, here is the modified solution that would fit your query:</p>\n\n<pre><code>bool isDomainUser(std::string currentUser)\n{\n    NSString *queryVal = [NSString stringWithUTF8String:currentUser.c_str()];\n\n    ODSession *session = [ODSession defaultSession];\n\n    ODNode *node = [ODNode nodeWithSession:session \n                                type:kODNodeTypeAuthentication error:NULL];\n\n    ODQuery *query = [ODQuery queryWithNode:node forRecordTypes:kODRecordTypeUsers\n                                 attribute:kODAttributeTypeRecordName\n                                 matchType:kODMatchEqualTo \n                                 queryValues:queryVal\n                        returnAttributes:kODAttributeTypeStandardOnly\n                        maximumResults:0 error:NULL];\n\n    NSArray *records = [query resultsAllowingPartial:NO error:NULL];\n\n    for (ODRecord *record in records)\n    {\n        ODAttributeType type = @\"dsAttrTypeStandard:OriginalAuthenticationAuthority\";\n        NSArray *lines = [record valuesForAttribute:type error:nil];\n\n        if (lines)\n        {\n            for(NSString *line in lines)\n            {\n                if ([line hasPrefix:@\"NetLogon\"])\n                {\n                    return true;\n                }\n            }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1526469212, "creation_date": 1449072821, "last_edit_date": 1495542617, "question_id": 34047532, "link": "https://stackoverflow.com/questions/34047532/check-if-a-user-is-a-local-or-domain-account", "title": "Check if a user is a local or domain account", "body": "<p>Given the name of a user in OS X, it is possible to query its Active Directory SID using the BSD <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/mbr_sid_to_string.3.html\" rel=\"nofollow noreferrer\">membership functions</a>.</p>\n\n<p>However, when a local user name is provided on a machine that is not a member of a directory, an SID is also returned.</p>\n\n<p>A solution for checking if the local logged-in user is a domain account is provided <a href=\"https://stackoverflow.com/questions/14904749/mac-osx-determing-whether-user-account-is-an-active-directory-user-vs-local-us/15284509#15284509\">here</a>, but this assumes that the user in question is that of the current session, which may not be the case. In addition, if the user is a mobile account (roaming), then a home directory is found and it returns incorrectly.</p>\n\n<p>So, how would one check if a given username is a local or domain user where the username can be any name, including names used for local processes?</p>\n"}, {"tags": ["c++", "templates", "template-meta-programming", "sfinae"], "comments": [{"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1449073130, "post_id": 34047385, "comment_id": 55849899, "body": "I know you can check if a method exists without knowing a return type be using <code>decltype</code> on a call to the function using <code>declval</code>. Then you can pass the complete signature to something like the above, but extend it to sfinae if the return type isn&#39;t arithmetic."}], "answers": [{"tags": [], "owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "is_accepted": false, "score": 1, "last_activity_date": 1449074663, "creation_date": 1449074663, "answer_id": 34048238, "question_id": 34047385, "link": "https://stackoverflow.com/questions/34047385/modify-sfinae-idiom-to-check-return-type-of-a-function-using-stdis-arithmetic/34048238#34048238", "title": "Modify SFINAE idiom to check return type of a function using std::is_arithmetic", "body": "<p>I think this is what you are looking for:</p>\n\n<pre><code>struct Unknown {};\n\ntemplate &lt;typename T_&gt;\nstruct Wrap\n{\n    typedef T_ type;\n};\n\ntemplate &lt;class C_, typename... A_&gt;\nstruct HasMethodArithmeticReturn\n{\n    template &lt;class U_&gt;\n    static Wrap&lt;decltype(std::declval&lt;U_&gt;().NAME(std::declval&lt;A_&gt;()...))&gt; test(void*);\n    template &lt;class U_&gt;\n    static Unknown test(...);\n\n    typedef char yes[1];\n    typedef char no[2];\n\n    template &lt;typename&gt;\n    struct helper\n    {\n        typedef no type;\n    };\n    template &lt;typename R_&gt;\n    struct helper&lt;Wrap&lt;R_&gt;&gt;\n    {\n        template &lt;class U_, R_(U_::*)(A_...)&gt;\n        struct assist\n        {\n            typedef yes type;\n        };\n        template &lt;class U_&gt;\n        static typename std::enable_if&lt;std::is_arithmetic&lt;R_&gt;::value, typename assist&lt;U_, &amp;U_::NAME&gt;::type&gt;::type&amp; test(void*);\n        template &lt;class U_&gt;\n        static no&amp; test(...);\n        typedef decltype(test&lt;C_&gt;(0)) type;\n    };\n    static const bool value = sizeof(yes) == sizeof(typename helper&lt;decltype(test&lt;C_&gt;(0))&gt;::type);\n};\n</code></pre>\n\n<p>You can see it used <a href=\"http://coliru.stacked-crooked.com/a/ce1468b721cdb57b\" rel=\"nofollow\">live</a>. If the class has a method with <code>A_...</code> parameters and an arithmetic return type, <code>value</code> is true. Otherwise, it is false.</p>\n"}, {"tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": false, "score": 1, "last_activity_date": 1449076054, "creation_date": 1449076054, "answer_id": 34048754, "question_id": 34047385, "link": "https://stackoverflow.com/questions/34047385/modify-sfinae-idiom-to-check-return-type-of-a-function-using-stdis-arithmetic/34048754#34048754", "title": "Modify SFINAE idiom to check return type of a function using std::is_arithmetic", "body": "<p>In addition to @James Root's answer, which allows specification of the arguments but doesn't allow the user to test multiple classes at the same time as in the OP, you may also do the following:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename... Other&gt;\nstruct has_method {\n    static constexpr bool value = has_method&lt;Other...&gt;::value;\n};\n\ntemplate &lt;typename U, typename... Other&gt;\nstruct has_method&lt;U, Other...&gt; {\n    static constexpr bool value =\n        has_method&lt;U&gt;::value &amp;&amp; has_method&lt;Other...&gt;::value;\n};\n\ntemplate &lt;typename U&gt;\nstruct has_method&lt;U&gt; {\n    template &lt;typename T&gt;\n    static auto typeget(int) -&gt; decltype(T::some_method(size_t{}));\n    template &lt;typename T&gt;\n    static void typeget(...);\n\n\n    static constexpr bool value = \n        std::is_arithmetic&lt;decltype(has_method::typeget&lt;U&gt;(0))&gt;::value;\n};\n</code></pre>\n\n<p>The implementation syntax is simpler, but you pay for it in other ways: you have to make a new template for every set of argument types you wish to supply to the function, and this detects whether the function may be called with the parameters, not whether the function has the exact desired parameters.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3cf39896b1271112\" rel=\"nofollow\"><strong>Live on Coliru</strong></a>, though I've replaced <code>size_t</code> with <code>uint8_t</code> to demonstrate that if the desired type can be implicitly converted to the argument type in the member function of the queried type, then the expression evaluates as true.</p>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 1, "last_activity_date": 1449502193, "last_edit_date": 1449502193, "creation_date": 1449078569, "answer_id": 34049574, "question_id": 34047385, "link": "https://stackoverflow.com/questions/34047385/modify-sfinae-idiom-to-check-return-type-of-a-function-using-stdis-arithmetic/34049574#34049574", "title": "Modify SFINAE idiom to check return type of a function using std::is_arithmetic", "body": "<p><strong>EDIT</strong>: I've updated the answer to allow for the given method to take arbitrary arguments, not simply have a <code>void</code> signature</p>\n\n<p>I think this will do the trick:</p>\n\n<pre><code>namespace details {\n  template&lt;typename...&gt;\n  struct voider\n  {\n      using type=void;\n  };\n\n  template&lt;typename T&gt;\n  struct GetReturnType;\n\n  // non member function\n  template&lt;typename Ret, typename... Args&gt;\n  struct GetReturnType&lt;Ret(*)(Args...)&gt;\n  {\n      using type = Ret;\n  };\n\n  // mmeber function\n  template&lt;typename Ret, typename C, typename... Args&gt;\n  struct GetReturnType&lt;Ret(C::*)(Args...)&gt;\n  {\n      using type = Ret;\n  };\n}\n\ntemplate&lt;typename...Ts&gt;\nusing void_t = typename details::voider&lt;Ts...&gt;::type;\n\ntemplate&lt;typename T, typename=void&gt;\nstruct has_arithmetic_method : std::false_type{};\n\ntemplate&lt;typename T&gt;\nstruct has_arithmetic_method&lt;T, void_t&lt;decltype(&amp;T::some_method)&gt;&gt; :  std::is_arithmetic&lt;typename details::GetReturnType&lt;decltype(&amp;T::some_method)&gt;::type&gt;::type{};\n</code></pre>\n\n<p>I'm using the voider concept to make sure that accessing <code>some_method</code> on <code>T</code> is well-formed, and then deriving from <code>std::is_arithmetic</code> if it is. I had to add a helper to pull off the return type of an arbitrary function.</p>\n\n<hr>\n\n<p>Some structs to test against. Notice how the ones that should pass take in different arguments for <code>some_method</code>:</p>\n\n<pre><code>struct FailSomeMethod // lacks a some_method altogether\n{\n    void some_other_method()\n    {\n        std::cout &lt;&lt; \"FailSomeMethod::some_other_method\" &lt;&lt; std::endl;\n    }\n};\n\nstruct PassSomeMethod // has a some_method, but it's not arithmetic\n{\n    void some_method()\n    {\n        std::cout &lt;&lt; \"PassSomeMethod::some_method\" &lt;&lt; std::endl;\n    }\n};\n\nstruct PassArithmeticMethod \n{\n    int some_method(int _a)\n    {\n        std::cout &lt;&lt; \"PassArithmeticMethod::some_method\" &lt;&lt; std::endl;\n        return 1;\n    }\n};\n\nstruct PassArithmeticMethod2\n{\n    double some_method()\n    {\n        return 1.0;\n    }\n};\n\nstruct PassArithmeticMethod3\n{\n    float some_method(int a, double b, float c, char d, bool e)\n    {\n        return 1.;\n    }\n};\n</code></pre>\n\n<hr>\n\n<p>The actual test:</p>\n\n<pre><code>int main()\n{\n    //test the has_arithmetic_method concept\n    std::cout &lt;&lt; \"Struct PassArithmeticMethod: \" &lt;&lt; std::boolalpha &lt;&lt; has_arithmetic_method&lt;PassArithmeticMethod&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Struct PassSomeMethod: \" &lt;&lt; std::boolalpha &lt;&lt; has_arithmetic_method&lt;PassSomeMethod&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Struct FailSomeMethod: \" &lt;&lt; std::boolalpha &lt;&lt; has_arithmetic_method&lt;FailSomeMethod&gt;::value &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Struct PassArithmeticMethod2: \" &lt;&lt; std::boolalpha &lt;&lt; has_arithmetic_method&lt;PassArithmeticMethod2&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Struct PassArithmeticMethod3: \" &lt;&lt; std::boolalpha &lt;&lt; has_arithmetic_method&lt;PassArithmeticMethod3&gt;::value &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>Struct PassArithmeticMethod: true <br/>\n  Struct PassSomeMethod: false<br/>\n  Struct FailSomeMethod: false<br/>\n  Struct PassArithmeticMethod2: true<br/>\n  Struct PassArithmeticMethod3: true<br/></p>\n</blockquote>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/442f7cfd83be5887\" rel=\"nofollow\">Live Demo</a></p>\n\n<p>Honestly, despite the (misleading) length of my answer, I feel that this is the simplest. The voider concept and the <code>GetReturnType</code> helper are general purpose structs that can be easily re-used. I don't use any <code>constexpr</code> in my code; I leave all the work for getting <code>true</code> and <code>false</code> to inheritance tricks.</p>\n"}], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 34049574, "answer_count": 3, "score": 3, "last_activity_date": 1449502193, "creation_date": 1449072422, "question_id": 34047385, "link": "https://stackoverflow.com/questions/34047385/modify-sfinae-idiom-to-check-return-type-of-a-function-using-stdis-arithmetic", "title": "Modify SFINAE idiom to check return type of a function using std::is_arithmetic", "body": "<p>I am using SFINAE idiom to check if a type has a method (<code>some_method()</code>) with a given signature defined:</p>\n\n<pre><code>template &lt;typename... Other&gt;\nstruct has_method {\n    static constexpr bool value = has_method&lt;Other...&gt;::value;\n};\n\ntemplate &lt;typename U, typename... Other&gt;\nstruct has_method&lt;U, Other...&gt; {\n    static constexpr bool value =\n        has_method&lt;U&gt;::value &amp;&amp; has_method&lt;Other...&gt;::value;\n};\n\ntemplate &lt;typename U&gt;\nstruct has_method&lt;U&gt; {\n    template &lt;typename T, T&gt;\n    struct helper;\n    template &lt;typename T&gt;\n    static std::uint8_t check(helper&lt;int (*)(size_t), &amp;T::some_method&gt;*);\n    template &lt;typename T&gt;\n    static std::uint16_t check(...);\n\n    static constexpr bool value = sizeof(check&lt;U&gt;(0)) == sizeof(std::uint8_t);\n};\n</code></pre>\n\n<p>I would like to modify it to check if the return type of the function is arithmetic type, using <code>std::is_arithmetic</code>. Would that be possible?\nI have tried modifying it using <code>static_assert()</code> together with <code>std::is_arithmetic&lt; decltype(((T*)nullptr)-&gt;foo())&gt;::value</code> but didn't succeed. </p>\n"}, {"tags": ["c++", "shared-ptr", "weak-ptr"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1449072339, "post_id": 34047275, "comment_id": 55849333, "body": "&#39;std::weak_ptr&#39; holds a reference to a shared reference count the same way &#39;std::shared_ptr&#39; does. Only difference is that &#39;std::weak_ptr&#39; does not increment/decrement this count."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 3, "creation_date": 1449072667, "post_id": 34047275, "comment_id": 55849579, "body": "<i>I would have expected a segfault...</i> Why? that&#39;s specifically the point of weak_ptr"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1449072752, "post_id": 34047275, "comment_id": 55849629, "body": "@UmNyobe Good point! I guess I was trying to communicate that I didn&#39;t understand how it worked."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1449072675, "post_id": 34047353, "comment_id": 55849585, "body": "I&#39;m having a misunderstanding here. So you&#39;re saying that the <b>control block</b> actually stores 2 counts? The number of <code>weak_ptr</code>s and the number of <code>shared_ptr</code>s? And it isn&#39;t destroyed till BOTH are 0?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 2, "creation_date": 1449072846, "post_id": 34047353, "comment_id": 55849691, "body": "@JonathanMee: Yes, conceptually that&#39;s what&#39;s happening. By the way, you can open your standard library header files and look at the implementation yourself!"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1449072850, "post_id": 34047353, "comment_id": 55849695, "body": "@AndyG No idea. I just completely didn&#39;t understand how <code>weak_ptr</code>s worked. Thanks for the explanation! I&#39;ll accept shortly."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1449072855, "post_id": 34047353, "comment_id": 55849698, "body": "@JonathanMee: And a corollary is that, when you use <code>make_shared</code> to allocate both in a single block of memory, that memory floats around until all your <code>weak_ptrs</code> also go out of scope."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1449074444, "post_id": 34047353, "comment_id": 55850907, "body": "I&#39;m not sure if this is the only possible implementation, and the Standard generally describes only the interface."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 13, "last_activity_date": 1449072466, "last_edit_date": 1449072466, "creation_date": 1449072331, "answer_id": 34047353, "question_id": 34047275, "link": "https://stackoverflow.com/questions/34047275/what-happens-to-a-weak-ptr-when-its-shared-ptr-is-destroyed/34047353#34047353", "title": "What Happens to a weak_ptr when Its shared_ptr is Destroyed?", "body": "<p>A <code>std::shared_ptr</code> is created using two pieces of memory:</p>\n\n<ul>\n<li><p>A resource block: This holds the pointer to the actual underlying data, e.g. 'int*'</p></li>\n<li><p>A control block: This holds information specific to a shared_ptr, for example reference counts.</p></li>\n</ul>\n\n<p>(Sometimes these are allocated in a single chunk of memory for efficiency, see <code>std::make_shared</code>)</p>\n\n<p>The <strong>control block</strong> <em>also</em> stores reference counts for <code>weak_ptr</code>. It will not be deallocated until the last <code>weak_ptr</code> goes out of scope (the weak pointer reference count drops to zero).</p>\n\n<p>So a <code>weak_ptr</code> will know that it's expired because it has access to this control block, and it can check to see what the reference count is for a <code>shared_ptr</code></p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 3, "accepted_answer_id": 34047353, "answer_count": 1, "score": 11, "last_activity_date": 1449072466, "creation_date": 1449072076, "last_edit_date": 1449072335, "question_id": 34047275, "link": "https://stackoverflow.com/questions/34047275/what-happens-to-a-weak-ptr-when-its-shared-ptr-is-destroyed", "title": "What Happens to a weak_ptr when Its shared_ptr is Destroyed?", "body": "<p>It seems that a <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr\" rel=\"noreferrer\"><code>weak_ptr</code></a> somehow just knows when the <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"noreferrer\"><code>shared_ptr</code></a> it references has been destroyed. How is that? Is there a constant link maintained or something?</p>\n\n<p>Take the <a href=\"http://ideone.com/Jveo4K\" rel=\"noreferrer\">following code for example</a>:</p>\n\n<pre><code>weak_ptr&lt;int&gt; test() {\n    shared_ptr&lt;int&gt; foo{new int};\n\n    return foo;\n}\n\nint main() {\n    auto foo = test();\n\n    cout &lt;&lt; foo.expired() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I would have expected a segfault when the <code>weak_ptr&lt;int&gt;</code> goes to check on the state of the <code>shared_ptr&lt;int&gt;</code> but there isn't one. The <code>weak_ptr&lt;int&gt;</code> correctly identifies the memory as deallocated. How does it know?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1449072145, "creation_date": 1449072145, "answer_id": 34047291, "question_id": 34047264, "link": "https://stackoverflow.com/questions/34047264/assignment-of-member-in-read-only-object/34047291#34047291", "title": "assignment of member &#39; in read-only object", "body": "<p>A member function marked <code>const</code> cannot change the state of the class.  In <code>GetMyHorseVnum()</code> you have</p>\n\n<pre><code>m_dwMountTime = get_dword_time();\n</code></pre>\n\n<p>Which changes the state of the class.  You either need to get rid of the <code>const</code> modifer on the function or make <code>m_dwMountTime</code> <code>mutable</code></p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 5573683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e322915baddd645b3ca4c9205f25ba?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Orlov", "link": "https://stackoverflow.com/users/5573683/yuriy-orlov"}, "is_accepted": false, "score": 1, "last_activity_date": 1449072182, "creation_date": 1449072182, "answer_id": 34047302, "question_id": 34047264, "link": "https://stackoverflow.com/questions/34047264/assignment-of-member-in-read-only-object/34047302#34047302", "title": "assignment of member &#39; in read-only object", "body": "<p>You declared your <code>GetMyHorseVnum()</code> method as <code>const</code>, so it cannot change (assigning) class members.</p>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 0, "last_activity_date": 1449072553, "last_edit_date": 1449072553, "creation_date": 1449072374, "answer_id": 34047368, "question_id": 34047264, "link": "https://stackoverflow.com/questions/34047264/assignment-of-member-in-read-only-object/34047368#34047368", "title": "assignment of member &#39; in read-only object", "body": "<p>You can't change a member variable in a const member function, which promise won't change the state of the class.</p>\n\n<p>You might want to make <code>m_dwMountTime</code> <a href=\"http://en.cppreference.com/w/cpp/language/cv\" rel=\"nofollow\">mutable</a> to make it modifiable:</p>\n\n<pre><code>mutable DWORD m_dwMountTime;\n</code></pre>\n\n<blockquote>\n  <p>mutable - applies to non-static class members of non-reference\n  non-const type and specifies that the member does not affect the\n  externally visible state of the class (as often used for mutexes, memo\n  caches, lazy evaluation, and access instrumentation). mutable members\n  of const classes are modifiable. (Note: the C++ language grammar\n  treats mutable as a storage-class-specifier, but it does not affect\n  storage class.)</p>\n</blockquote>\n"}], "owner": {"reputation": 93, "user_id": 5546877, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ebdafc19e302aae64ff19d2e5cf31d25?s=128&d=identicon&r=PG&f=1", "display_name": "user5546877", "link": "https://stackoverflow.com/users/5546877/user5546877"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6361, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1449072553, "creation_date": 1449072049, "question_id": 34047264, "link": "https://stackoverflow.com/questions/34047264/assignment-of-member-in-read-only-object", "title": "assignment of member &#39; in read-only object", "body": "<pre><code>protected:\nDWORD               m_dwMountTime;\n\npublic:\n    DWORD GetLastHorseTime() const {\n        return m_dwHorseTime;\n    }\n\n\n    DWORD CHARACTER::GetMyHorseVnum() const {\n        int delta = 0;\n        m_dwMountTime = get_dword_time();\n\n        return c_aHorseStat[GetHorseLevel()].iNPCRace + delta;\n    }\n</code></pre>\n\n<p>ok, there is my code.</p>\n\n<p>After when i try to compile i get an error :</p>\n\n<pre><code>    char_horse.cpp: In member function 'virtual DWORD CHARACTER::GetMyHorseVnum() const':\n    char_horse.cpp:210:16: error: assignment of member 'CHARACTER::m_dwHorseTime' in read-only object\n\n  m_dwHorseTime = get_dword_time();\n</code></pre>\n\n<p>Where is the problem? :)</p>\n"}, {"tags": ["c++", "list", "pointers", "copy-constructor"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1449071979, "post_id": 34047135, "comment_id": 55849078, "body": "Without looking at the code: &quot;I&#39;m trying to go over a list of Movie instances, and add one of them to a list of Movie*&quot; .. well, you cant, because <code>Movie</code> and <code>Movie*</code> are two different types and I am almost sure that the problem with your code is related to this confusion of objects with their memory adress"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449071993, "post_id": 34047135, "comment_id": 55849088, "body": "The way you are adding items to the list looks to be the problem as you.  You need to provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1449072198, "post_id": 34047135, "comment_id": 55849224, "body": "^ the key word being &quot;Minimal&quot;.  Also, please properly format your code."}, {"owner": {"reputation": 1216, "user_id": 1654209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81728da8f882d5126ae7f32d777c647b?s=128&d=identicon&r=PG", "display_name": "user18428", "link": "https://stackoverflow.com/users/1654209/user18428"}, "edited": false, "score": 0, "creation_date": 1449072378, "post_id": 34047135, "comment_id": 55849372, "body": "addMovieToWorker(Movie&amp; toAdd) expects a reference. You are passing it a ref to a local variable Movie movieToAdd which memory is no longer valid at the end of the addWorkerToMovie method scope"}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "reply_to_user": {"reputation": 1216, "user_id": 1654209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81728da8f882d5126ae7f32d777c647b?s=128&d=identicon&r=PG", "display_name": "user18428", "link": "https://stackoverflow.com/users/1654209/user18428"}, "edited": false, "score": 0, "creation_date": 1449072520, "post_id": 34047135, "comment_id": 55849459, "body": "I editted it to be more simple code.. please take a look now. @Oualid how do i need to pass it then ?? because it doesn&#39;t compile if i do it elsewhere"}, {"owner": {"reputation": 1216, "user_id": 1654209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81728da8f882d5126ae7f32d777c647b?s=128&d=identicon&r=PG", "display_name": "user18428", "link": "https://stackoverflow.com/users/1654209/user18428"}, "edited": false, "score": 0, "creation_date": 1449072649, "post_id": 34047135, "comment_id": 55849563, "body": "Change void Worker::addMovieToWorker(Movie&amp; toAdd) to void Worker::addMovieToWorker(Movie* toAdd) and store pointers. ie. (*it)-&gt;addMovieToWorker(*it2);"}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 0, "creation_date": 1449073067, "post_id": 34047135, "comment_id": 55849846, "body": "I can send an iterator to a function ? are you sure? because its type it iterator not Movie*.. isn&#39;t it?"}, {"owner": {"reputation": 1216, "user_id": 1654209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81728da8f882d5126ae7f32d777c647b?s=128&d=identicon&r=PG", "display_name": "user18428", "link": "https://stackoverflow.com/users/1654209/user18428"}, "edited": false, "score": 1, "creation_date": 1449073592, "post_id": 34047135, "comment_id": 55850267, "body": "My bad i overlooked <i>it2 type which is Movie and not Movie</i>. If you modify addMovieToWorker as i suggested you can call it like this (*it)-&gt;addMovieToWorker(new Movie(*it2)); Be sure to delete movie instances in the Worker destructor"}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "reply_to_user": {"reputation": 1216, "user_id": 1654209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81728da8f882d5126ae7f32d777c647b?s=128&d=identicon&r=PG", "display_name": "user18428", "link": "https://stackoverflow.com/users/1654209/user18428"}, "edited": false, "score": 0, "creation_date": 1449073999, "post_id": 34047135, "comment_id": 55850568, "body": "it works right now. Thank you @oualid!!"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 0, "creation_date": 1449072873, "post_id": 34047405, "comment_id": 55849711, "body": "ok, so I need to get a pointer instead of Movie&amp; toAdd ? because i heard its complicated to get pointer as an argument.. I still do not understand which lines I need to change and how.."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 0, "creation_date": 1449073646, "post_id": 34047405, "comment_id": 55850304, "body": "No, you need to store pointers to objects that will survive until you need them.  I&#39;ve updated my answer to have a bit more info."}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 0, "creation_date": 1449074300, "post_id": 34047405, "comment_id": 55850774, "body": "question is, I want Movie* of Worker to point to the list of Movies in MovieIndustry.. using @oualid&#39;s solution, which works- addMovieToWorker (new Movie(*it2)) , will I make a new copy of Movie ? because I don&#39;t want that to happen anyways."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 1, "creation_date": 1449074913, "post_id": 34047405, "comment_id": 55851265, "body": "Yes, that makes a copy.  You can do <code>addMovieToWorker(&amp;*it2)</code> to add a pointer to the object in the <code>Worker</code>&#39;s list.  Be warned that some containers may move their contents around when you do certain things to them, in which case pointers to their contents will become invalid.  I believe <code>std::list</code> is stable, but other containers such as <code>std::vector</code> are not."}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 0, "creation_date": 1449075447, "post_id": 34047405, "comment_id": 55851679, "body": "and if I did made a new Movie(*it2) which is titanic, and then I would have changed titanic, would it change it both Worker Class and the main class (MovieIndustry) or it would change only if the main class?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 1, "creation_date": 1449078218, "post_id": 34047405, "comment_id": 55853466, "body": "When you alter an object, you only alter that object.  Any copies created are independent of their original, and will not be altered if the original is changed."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 4, "last_activity_date": 1449073729, "last_edit_date": 1449073729, "creation_date": 1449072477, "answer_id": 34047405, "question_id": 34047135, "link": "https://stackoverflow.com/questions/34047135/insert-into-a-list-of-pointers-c/34047405#34047405", "title": "insert into a list of pointers c++", "body": "<p>You're adding pointers to automatic storage to your list.  As soon as <code>addWorkerToMovie</code> returns, <code>movieToAdd</code> is destroyed, but you still have a pointer to the memory that it used to be in.  The behavior when you later use that pointer is undefined, but in your case your program has re-used that memory for something else, and it just so happens to have stored <code>943829758935781957</code> where your movie's length used to be.</p>\n\n<p>To make this work, you need to store pointers to objects that will still exist when you need to use them later.  It looks like your <code>Worker</code> class has a list of <code>Movie</code>s, so you may be able to store a pointer to one of those, instead of making a copy.  If not, you may need to dynamically allocate your objects using <code>new</code>, in which case you'll need to make sure to <code>delete</code> them when you're done with them.</p>\n"}], "owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1320, "favorite_count": 0, "accepted_answer_id": 34047405, "answer_count": 1, "score": 0, "last_activity_date": 1449073729, "creation_date": 1449071710, "last_edit_date": 1449072653, "question_id": 34047135, "link": "https://stackoverflow.com/questions/34047135/insert-into-a-list-of-pointers-c", "title": "insert into a list of pointers c++", "body": "<p>I'm trying to go over a list of Movie instances, and add one of them to a list of Movie* which is inside Worker class. problem is, when i try to print out this movie from the WorkerClass, mean to go over the Movie* list of Worker class, it prints garbage.</p>\n\n<pre><code>void MovieIndustry::addWorkerToMovie(string code, int id) {\n\nWorker* toBeAdded;\nMovie movieToAdd;\n\n    for (std::list&lt;Worker*&gt;::iterator it=workers.begin(); it != \n    workers.end(); ++it)//look for Worker\n    {\n            toBeAdded = *it;\n\n            for (std::list&lt;Movie&gt;::iterator it2=movies.begin(); it2 != \n            movies.end(); ++it2) //look for movie\n\n            {\n                if( it2-&gt;getCode() == code)\n                {\n                    movieToAdd = (*it2);\n                    it2-&gt;addWorker(*toBeAdded); //Works\n                    (*it)-&gt;addMovieToWorker(movieToAdd);\n                }\n            }//end for\n\n\n\n        } //end for\n}\n</code></pre>\n\n<p>Trying to print a movie from the list in Worker.cpp, it gives me:</p>\n\n<pre><code>void Worker::printWorkersMovies() const {\n\nstd::list&lt;Movie*&gt;::const_iterator movitt;\n\nif(getNumOfMovies() &gt;&gt; 0)\n\n{\n    for (movitt=moviesOfWorker.begin(); movitt != moviesOfWorker.end(); \n    ++movitt)\n    {\n\n        std::cout &lt;&lt; \"length is\" &lt;&lt; ( (*movitt)-&gt; getLength() ) &lt;&lt;std::endl;\n    // IT PRINTS OUT length is: 943829758935781957\n    // even though I inserted length = 2 \n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Copy constructor of Movie, even though i wrok with pointer:</p>\n\n<pre><code>Movie::Movie(const Movie&amp; toCopy) {\n\ncode = toCopy.getCode();\nname = toCopy.getName();\nlength = toCopy.getLength();\nyear = toCopy.getYear();\nrate = toCopy.getRate();\npreview = toCopy.getPreview();\n}\n</code></pre>\n\n<p>My method of adding a movie to Worker instance:</p>\n\n<pre><code>void Worker::addMovieToWorker(Movie&amp; toAdd){\n\nmoviesOfWorker.push_back(&amp;toAdd);\n\n}\n</code></pre>\n"}]