[{"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496273557, "post_id": 44296210, "comment_id": 75598594, "body": "Did you really mean to put a loop within a loop?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1496273654, "post_id": 44296210, "comment_id": 75598616, "body": "you have to paste the exact error message"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1496273656, "post_id": 44296210, "comment_id": 75598618, "body": "Post compilable code."}, {"owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496273886, "post_id": 44296210, "comment_id": 75598678, "body": "Yes I did mean to put a loop within a loop as I need it to run through the file searching for several different keywords counting how many times they are used one after another. I have updated the original code with everything I have."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1496274281, "post_id": 44296210, "comment_id": 75598776, "body": "Declaring array as dimension 4 means the valid indices are 0 through 3.  So when you later write <code>eng2Str[4]</code> as function argument, you are accessing out of bounds. (Same with <code>resArr[4]</code>)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496274336, "post_id": 44296210, "comment_id": 75598794, "body": "It seems like you want to pass the whole array to the function, but you wrote the function to pass just one string and one int"}, {"owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496274513, "post_id": 44296210, "comment_id": 75598829, "body": "Okay so if I want to pass the entire array how would I go about that? I tried just putting eng2Str[] but that didnt work along with eng2Str"}], "answers": [{"tags": [], "owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "is_accepted": false, "score": 1, "last_activity_date": 1496275260, "creation_date": 1496275260, "answer_id": 44296439, "question_id": 44296210, "link": "https://stackoverflow.com/questions/44296210/c-array-pointer-to-object-error/44296439#44296439", "title": "C++ Array pointer-to-object error", "body": "<p>I would suggest to use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> instead of pure C array.\nIn your code, there are more issues. \nYou are passing the fourth element of both arrays to the engine2 function.\nFrom your definition of <code>void engine2(string &amp;eng2Str, int &amp;resArr)</code> you expect reference to a string (not array / vector) and an address / reference of int - you need to pass an pointer to the first element of resArr.</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;future&gt;\n\nusing namespace std;\n\nvector&lt;string&gt; eng2Str = { \"money\", \"politics\", \"RT\", \"#\" };\nint resArr[4] = {};\n\nvoid engine2(const vector&lt;string&gt;&amp; eng2Str, int* resArr)\n{\n    ifstream fin;\n    fin.open(\"sampleTweets.csv\");\n    int fcount = 0;\n    string line;\n\n    for (int i = 0; i &lt; 4; i++) \n    {\n        while (getline(fin, line)) \n        {\n            if (line.find(eng2Str[i]) != string::npos)\n            {\n                ++fcount;\n            }\n        }\n        resArr[i] = fcount;\n    }\n\n    fin.close();\n\n    return;\n}\n\nint main()\n{\n\n    engine2(eng2Str, resArr);\n\n    system(\"Pause\");\n    system(\"cls\");\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496275799, "post_id": 44296451, "comment_id": 75599121, "body": "Thank you for your reply. The change in the loop has me a bit confused. Am I correct in saying that it will still run through the entire file 4 times searching for each of the 4 strings within the eng2str array and increasing the corresponding resArr value for each time is it found?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496275849, "post_id": 44296451, "comment_id": 75599135, "body": "No. It goes through the file 1 time, and on each line it searches for 4 strings."}, {"owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496275882, "post_id": 44296451, "comment_id": 75599145, "body": "O god that is far more efficient... you sir are amazing thank you!"}, {"owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496276831, "post_id": 44296451, "comment_id": 75599334, "body": "I am trying to do something similar in a different function where I am searching a file for specific words but need to return each line that it is found in. I am thinking I am going to need a multi-dimensional array with the first being the keyword that was searched and the second being the result but I can&#39;t get my head around how this would work. Any help would be amazing!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496294045, "post_id": 44296451, "comment_id": 75603447, "body": "@KaiJones Use <code>std:map&lt;std::string, int&gt;</code>"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1496275861, "last_edit_date": 1496275861, "creation_date": 1496275334, "answer_id": 44296451, "question_id": 44296210, "link": "https://stackoverflow.com/questions/44296210/c-array-pointer-to-object-error/44296451#44296451", "title": "C++ Array pointer-to-object error", "body": "<p>The problem is that you've declared your function to take a reference to a single <code>string</code> and <code>int</code>, not arrays. It should be:</p>\n\n<pre><code>void engine2(string *eng2Str, int *resArr)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>void engine2(string eng2Str[], int resArr[])\n</code></pre>\n\n<p>Then when you call it, you can give the array names as arguments:</p>\n\n<pre><code>engine2(eng2Str, resArr);\n</code></pre>\n\n<p>Another problem is the <code>while</code> loop in the function. This will read the entire file during the first iteration of the <code>for()</code> loop. Other iterations will not have anything to read, since it will be at the end of the file already. You could seek back to the beginning of the file, but a better way would be to rearrange the two loops so you just need to read the file once.</p>\n\n<pre><code>while (getline(fin, line)) {\n    for (int i = 0; i &lt; 4; i++) {\n        if (line.find(eng2Str[i]) != string::npos) {\n            resArr[i]++;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 44296451, "answer_count": 2, "score": 1, "last_activity_date": 1496275861, "creation_date": 1496273415, "last_edit_date": 1496273905, "question_id": 44296210, "link": "https://stackoverflow.com/questions/44296210/c-array-pointer-to-object-error", "title": "C++ Array pointer-to-object error", "body": "<p>I am having what seems to be a common issue however reading through the replies to the similar questions I can't find the solution to my issue at all as I have already done what they are suggesting such as making the variable an array. I have the following code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;future&gt;\nusing namespace std;\n\nstring eng2Str[4] = { \"money\", \"politics\", \"RT\", \"#\"};\nint resArr[4];\n\nint main()\n{\n\n    engine2(eng2Str[4], resArr[4]);\n\n    system(\"Pause\");\n    system(\"cls\");\n\n    return 0;\n}\n\nvoid engine2(string &amp;eng2Str, int &amp;resArr)\n{\n    ifstream fin;\n    fin.open(\"sampleTweets.csv\");\n    int fcount = 0;\n    string line;\n\n    for (int i = 0; i &lt; 4; i++) {\n        while (getline(fin, line)) {\n            if (line.find(eng2Str[i]) != string::npos) {\n                ++fcount;\n            }\n        }\n        resArr[i] = fcount;\n    }\n\n    fin.close();\n\n    return;\n}\n</code></pre>\n\n<p>Before you mark as duplicate I have made sure of the following:</p>\n\n<ul>\n<li>The array and variable I am trying to assign are both int</li>\n<li>Its an array</li>\n</ul>\n\n<p>The error is: </p>\n\n<blockquote>\n  <p>expression must have pointer-to-object type</p>\n</blockquote>\n\n<p>The error is occurring at the \"resArr[i] = fcount;\" line and am not sure why as resArr is an int array and I am trying to assign it a value from another int variable. I am quite new to C++ so any help would be great as I am really stuck!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1496272561, "post_id": 44296002, "comment_id": 75598319, "body": "You can&#39;t provide argument lists with the ternary operator. It only selects values."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 6, "creation_date": 1496272660, "post_id": 44296002, "comment_id": 75598338, "body": "@EJP: Let&#39;s use the answer section to answer questions. Thanks."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496277016, "post_id": 44296002, "comment_id": 75599376, "body": "The language grammar for the conditional operator does not allow a comma-operator expression for the last part (in order to avoid ambiguity)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496308408, "post_id": 44296002, "comment_id": 75611789, "body": "&quot; ternary has precedence over comma; &quot; - no it doesn&#39;t!  C++ cannot be described by a simple precedence of operators ... and this is the specific case where that  breaks down."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496330396, "post_id": 44296002, "comment_id": 75628437, "body": "@MartinBonner When comparing ternary to commas used in non-specialized ways, yes it does have precedence over comma. What a comma means in different situations is a different discussion."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496330558, "post_id": 44296002, "comment_id": 75628562, "body": "@void.pointer : In <code>a ? b, c : d;</code>  comma has higher precedence than ternary.  In <code>a ? b : d , c;</code> comma has lower precedence than ternary.  &quot;Precedence&quot; doesn&#39;t adequately describe this case - you have to look at the grammar."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1496332853, "post_id": 44296002, "comment_id": 75630194, "body": "@MartinBonner Fair point, I was reading the code as &quot;<code>a</code> is evaluated first, and only if <code>true</code>, we parse the expression <code>b, c</code>&quot;. Looking at it that way, the ternary expression occurs first in terms of evaluation, then the comma operator is processed."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 30, "last_activity_date": 1496332044, "last_edit_date": 1496332044, "creation_date": 1496272385, "answer_id": 44296079, "question_id": 44296002, "link": "https://stackoverflow.com/questions/44296002/confusion-with-commas-in-ternary-expression/44296079#44296079", "title": "Confusion with commas in ternary expression", "body": "<p>While the second part of the ternary operator is self contained, the third part is not.   The grammar is as follows:</p>\n\n<blockquote>\n  <p><em>conditional-expression</em>:</p>\n  \n  <blockquote>\n    <p><em>logical-or-expression</em></p>\n    \n    <p><em>logical-or-expression ? expression : assignment-expression</em></p>\n  </blockquote>\n</blockquote>\n\n<p>So your function call is effectively this:</p>\n\n<pre><code>SetSize((true ? (12.f, 50.f): 50.f), 12.f)\n</code></pre>\n\n<p>So the ternary expression <code>true ? (12.f, 50.f): 50.f</code> gets evaluated as the first parameter to the function. Then <code>12.f</code> is passed as the second value.  The comma in this case is <em>not</em> the comma operator but the function parameter separator.</p>\n\n<p>From section 5.18 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"noreferrer\">C++ standard</a>:</p>\n\n<blockquote>\n  <p><em>2</em> In contexts where comma is given a special meaning, [\n  <em>Example:</em> in lists of arguments to functions (5.2.2) and lists of initializers (8.5) \u2014 <em>end example</em> ] the comma operator as described\n  in Clause 5 can appear only in parentheses. [\n  <em>Example:</em></p>\n\n<pre><code>f(a, (t=3, t+2), c);\n</code></pre>\n  \n  <p>has three arguments, the second of which has the value 5 . \u2014 <em>end\n  example</em> ]</p>\n</blockquote>\n\n<p>If you want the last two subexpressions to be grouped together, you need to add parenthesis:</p>\n\n<pre><code>SetSize(true ? 12.f, 50.f : (50.f, 12.f));\nSetSize(false ? 12.f, 50.f : (50.f, 12.f));\n</code></pre>\n\n<p>Now you have a comma operator and the single argument version of <code>SetSize</code> gets called.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 17, "last_activity_date": 1496273150, "last_edit_date": 1496273150, "creation_date": 1496272497, "answer_id": 44296100, "question_id": 44296002, "link": "https://stackoverflow.com/questions/44296002/confusion-with-commas-in-ternary-expression/44296100#44296100", "title": "Confusion with commas in ternary expression", "body": "<p>This is because <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"noreferrer\">C++ does not treat the second comma as a comma operator</a>:</p>\n\n<blockquote>\n  <p>The comma in various comma-separated lists, such as function argument lists <code>f(a, b, c)</code> and initializer lists <code>int a[] = {1,2,3}</code>, is not the comma operator.</p>\n</blockquote>\n\n<p>As far as the first comma is concerned, C++ has no other option but to treat it as a comma operator. Otherwise, the parse would be invalid.</p>\n\n<p>One simple way of viewing it is to think that as soon as C++ parser finds <code>?</code> in context where comma separators are allowed, it looks for the matching <code>:</code> to complete the first part of the expression, and then matches as little as is necessary to complete the second expression. The second comma would not be treated as an operator even if you remove the two-argument overload.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 9, "last_activity_date": 1496272539, "creation_date": 1496272539, "answer_id": 44296108, "question_id": 44296002, "link": "https://stackoverflow.com/questions/44296002/confusion-with-commas-in-ternary-expression/44296108#44296108", "title": "Confusion with commas in ternary expression", "body": "<p>The compiler is warning you that you're throwing away precisely 50% of your floating-point literals.</p>\n\n<p>Let's decompose it.</p>\n\n<pre><code>// void SetSize(float w, float h, float d=0)\nSetSize(true ? 12.f, 50.f : 50.f, 12.f);\n//      ^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^\n</code></pre>\n\n<p>Here we present an expression using the <em>conditional operator</em> as the first argument, and the literal <code>12.f</code> as the second argument; the third argument is left at its default (<code>0</code>).</p>\n\n<p>Yes, really.</p>\n\n<p>It's parsed like this (because there's no other valid way to parse it):</p>\n\n<pre><code>SetSize( (true ? 12.f, 50.f : 50.f), 12.f);\n//        ^^^^^^^^^^^^^^^^^^^^^^^^   ^^^^\n</code></pre>\n\n<p>The value of the second argument is straightforward, so let's examine the first:</p>\n\n<pre><code>true ? 12.f, 50.f : 50.f\n</code></pre>\n\n<p>This means:</p>\n\n<ul>\n<li>If true, the result is <code>12.f, 50.f</code></li>\n<li>Otherwise, the result is <code>50.f</code></li>\n</ul>\n\n<p>Well, true is always true, so we can immediately discount the second option.</p>\n\n<p>And the expression <code>12.f, 50.f</code> utilises the <em>comma operator</em>, which evaluates both operands then chucks away the first and results in the second, i.e. <code>50.f</code>.</p>\n\n<p>Therefore, the whole thing is actually:</p>\n\n<pre><code>SetSize(50.f, 12.f);\n</code></pre>\n\n<p>If this is not some arcane and pointless programming \"puzzle\", it's a remarkably stupid piece of code, with an uneducated programmer hoping to \"unpack\" the expression into something more equivalent to:</p>\n\n<pre><code>SetSize(\n   (true ? 12.f : 50.f),\n   (true ? 50.f : 12.f)\n);\n</code></pre>\n\n<p>&hellip; which is <em>still</em> terrible and useless code, because true is still always true.</p>\n\n<p>(Obviously, the values are different in the case that <code>false</code> is written instead, but the same logic applies.)</p>\n\n<hr>\n\n<blockquote>\n  <p>The true case should be h=12, w=50 I'd think...</p>\n</blockquote>\n\n<p>It is. That's what the output you posted says. It's clearer when you don't arbitrarily re-arrange the arguments, i.e. they're w=50 h=12.</p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 3, "accepted_answer_id": 44296079, "answer_count": 3, "score": 34, "last_activity_date": 1502927956, "creation_date": 1496271949, "last_edit_date": 1497467688, "question_id": 44296002, "link": "https://stackoverflow.com/questions/44296002/confusion-with-commas-in-ternary-expression", "title": "Confusion with commas in ternary expression", "body": "<p>I found the following interesting code today:</p>\n\n<pre><code>SomeFunction(some_bool_variable ? 12.f, 50.f : 50.f, 12.f)\n</code></pre>\n\n<p>I created a small sample to reproduce the behavior:</p>\n\n<pre><code>class Vector3f\n{\npublic:\n    Vector3f(float val)\n    {\n        std::cout &lt;&lt; \"vector constructor: \" &lt;&lt; val &lt;&lt; '\\n';\n    }\n};\n\nvoid SetSize(Vector3f v)\n{\n    std::cout &lt;&lt; \"SetSize single param\\n\";\n}\n\nvoid SetSize(float w, float h, float d=0)\n{\n    std::cout &lt;&lt; \"SetSize multi param: \" &lt;&lt; w &lt;&lt; \", \" &lt;&lt; h &lt;&lt; \", \" &lt;&lt; d &lt;&lt; '\\n';\n}\n\nint main()\n{\n    SetSize(true ? 12.f, 50.f : 50.f, 12.f);\n    SetSize(false ? 12.f, 50.f : 50.f, 12.f);\n}\n</code></pre>\n\n<p>(<a href=\"http://coliru.stacked-crooked.com/a/6c2286c8ea8f996f\" rel=\"noreferrer\">Live Sample</a>)</p>\n\n<p>The result I get from running the above code is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>clang++ -std=c++14 -O2 -Wall -pedantic -lboost_system -lboost_filesystem -pthread main.cpp &amp;&amp; ./a.out\nmain.cpp:29:20: warning: expression result unused [-Wunused-value]\n    SetSize(true ? 12.f, 50.f : 50.f, 12.f);\n                   ^~~~\nmain.cpp:30:21: warning: expression result unused [-Wunused-value]\n    SetSize(false ? 12.f, 50.f : 50.f, 12.f);\n                    ^~~~\n2 warnings generated.\nSetSize multi param: 50, 12, 0\nSetSize multi param: 50, 12, 0\n</code></pre>\n\n<p>What I was expecting in <em>both</em> cases was that a single parameter would be passed to <code>SetSize(float)</code>. However, two parameters are passed which I find extremely confusing (especially since ternary has precedence over comma; so I assumed the comma was not delimiting function arguments in this case). For example, if using <code>true</code>, the ternary should result in <code>12.f, 50.f</code>. In this expression, the value to the left of the comma gets dropped/ignored, so I'd expect the end result to be:</p>\n\n<pre><code>SetSize(50.f);\n</code></pre>\n\n<p>The second part of the confusion is that whether we use <code>true</code> or <code>false</code> in the ternary, the same 2 values are passed to the function. The <code>true</code> case should be <code>h=12, w=50</code> I'd think...</p>\n\n<p>I see the compiler is trying to warn me about something, but I can't quite understand what's going on. Can someone decompose this logic and explain the result in a step by step fashion?</p>\n"}, {"tags": ["c++", "network-programming", "ip", "netmask"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1496269880, "post_id": 44295654, "comment_id": 75597572, "body": "If you know your code is in <b>C++</b> then why do you also add <b>C</b>?"}, {"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1496270518, "post_id": 44295654, "comment_id": 75597797, "body": "Edited to include C and C++"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1496271272, "post_id": 44295654, "comment_id": 75598001, "body": "Rolled back because answers for C and C++ will be significantly different. Want both, ask two questions."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1496271784, "post_id": 44295654, "comment_id": 75598126, "body": "Consider the net mask: 1.200.17.64 for example. The above for loop would not work."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1496273714, "post_id": 44295654, "comment_id": 75598635, "body": "@RichardCritten that&#39;s not a netmask."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1496275029, "post_id": 44295654, "comment_id": 75598947, "body": "@AnttiHaapala It is - do some research, any pattern of 32 bits can be a net mask.  They are unusual and used to manly turn up in networking exams."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1496275801, "post_id": 44295654, "comment_id": 75599122, "body": "they&#39;re not sub net masks, but some random numbers used in networking exams. a subnet mask yields a prefix, and therefore need to be a consecutive run of 1s followed by all 0s."}], "answers": [{"comments": [{"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496334725, "post_id": 44296274, "comment_id": 75631158, "body": "Using your code the IP 172.0.0.0 gets printed all the time. ipaddress is 0xac160040 and subnermask is 0xfffffc00. The correct result for the example I used in the post is <a href=\"https://pastebin.com/x4MYei7H\" rel=\"nofollow noreferrer\">pastebin.com/x4MYei7H</a>"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 3, "last_activity_date": 1496274928, "last_edit_date": 1496274928, "creation_date": 1496273862, "answer_id": 44296274, "question_id": 44295654, "link": "https://stackoverflow.com/questions/44295654/print-all-ips-based-on-ip-and-mask-c/44296274#44296274", "title": "Print all IPs based on IP and mask C++", "body": "<p>You're <em>anding</em> the IP address with the subnet mask <em>added</em> (essentially ored) with the changing host part. The precedence is wrong here. You're supposed to <em>and</em> the IP address with netmask to get the <em>network</em> part, then <em>or</em> the host part there:</p>\n\n<pre><code>auto ip = (ipaddress &amp; subnetmask) | i;\n</code></pre>\n\n<p>Also, the result of <code>inet_pton</code> is not an <code>int</code> but <code>struct in_addr</code> so YMMV anyway. Most probably, you should be using <code>inet_addr</code> instead as it returns an <code>uint32_t</code>:</p>\n\n<pre><code>ip_address = inet_addr(\"127.0.0.1\");\n</code></pre>\n\n<p>But then again your code expects that the <code>127</code> is the most-significant byte, which it is not on LSB systems. Thus, you need to swap these addresses once with <code>ntohl</code> and then with <code>htonl</code>.</p>\n\n<p>Thus we get something like:</p>\n\n<pre><code>uint32_t ipaddress;\nuint32_t subnetmask;\n\nipaddress = ntohl(inet_addr(b-&gt;IpAddressList.IpAddress.String));\nsubnetmask = ntohl(inet_addr(b-&gt;IpAddressList.IpMask.String));\n\nfor (uint32_t i = 1; i&lt;(~subnetmask); i++) {\n    uint32_t ip = (ipaddress &amp; subnetmask) |\u00a0i;\n    struct in_addr x = { htonl(ip) };\n    printf(\"%s\\n\", inet_ntoa(x));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496334854, "post_id": 44296307, "comment_id": 75631234, "body": "Hi, it complains with &quot;error C2678: binary &#39;&amp;&#39;: no operator found which takes a left-hand operand of type &#39;ULONG&#39; (or there is no acceptable conversion)&quot; at the lines that calculate <code>first_ip</code> and <code>last_ip</code>. Tried to change <code>subnetmask</code> for <code>subnetmask.s_addr</code> but the loop does not provide the expected IPs"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496337919, "post_id": 44296307, "comment_id": 75632834, "body": "I forgot to apply <code>s_addr</code>  on <code>subnetmask</code>, and <code>ntohl()</code> and <code>htonl()</code> to the generated IPs.  I have fixed it."}, {"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496342067, "post_id": 44296307, "comment_id": 75635042, "body": "I updated the code in the question because your code seems not to work now either. I set ip and netmask so you can test if it works fine. Thank you!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496342555, "post_id": 44296307, "comment_id": 75635298, "body": "I tested the updated code before I posted it.  In fact, I had tested it using <code>inet_ntoa()</code> in the loop, just like you did.  It works fine for me as I showed it, and prints the correct IPs.  However, you are calling <code>htonl()</code> twice in your loop, so you are effectively canceling it out and printing the IPs using the wrong byte order.  Change <code>struct in_addr x = { htonl(theip) };</code> to <code>struct in_addr x = { theip };</code> since <code>theip</code> is already in the byte order that <code>inet_ntoa()</code> is expecting."}, {"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496343375, "post_id": 44296307, "comment_id": 75635738, "body": "I tried but I&#39;m getting 172.0.0.0 172.0.0.0 172.0.0.0 172.0.0.0"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 1, "creation_date": 1496345148, "post_id": 44296307, "comment_id": 75636708, "body": "That is not what I get when I run the code I showed.  I get <code>172.22.0.1 172.22.0.2 172.22.0.3 172.22.0.4 ...</code>, as expected.  On Windows, <code>in_addr</code> is a <code>union</code>, so initializing <code>struct in_addr x</code> using <code>= { theip }</code> syntax won&#39;t initialize the correct field. Use <code>struct in_addr x; x.s_addr = theip;</code> instead."}, {"owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "edited": false, "score": 0, "creation_date": 1496345602, "post_id": 44296307, "comment_id": 75636961, "body": "Now it works! It was the Windows detail you were speaking about. Thank you!!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1496345015, "last_edit_date": 1496345015, "creation_date": 1496274161, "answer_id": 44296307, "question_id": 44295654, "link": "https://stackoverflow.com/questions/44295654/print-all-ips-based-on-ip-and-mask-c/44296307#44296307", "title": "Print all IPs based on IP and mask C++", "body": "<p>You can bitwise <code>AND</code> the input IP address with the input mask to determine the first IP in the range, and bitwise <code>OR</code> the input IP address with the inverse of the mask to determine the last IP in the range.  Then you can loop through the values in between.</p>\n\n<p>Also, <code>inet_pton(AF_INET)</code> expects a pointer to a <code>struct in_addr</code>, not an <code>unsigned int</code>.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>struct in_addr ipaddress, subnetmask;\n\ninet_pton(AF_INET, b-&gt;IpAddressList.IpAddress.String, &amp;ipaddress);\ninet_pton(AF_INET, b-&gt;IpAddressList.IpMask.String, &amp;subnetmask);\n\nunsigned long first_ip = ntohl(ipaddress.s_addr &amp; subnetmask.s_addr);\nunsigned long last_ip = ntohl(ipaddress.s_addr | ~(subnetmask.s_addr));\n\nfor (unsigned long ip = first_ip; ip &lt;= last_ip; ++ip) {\n    unsigned long theip = htonl(ip);\n    // use theip as needed...\n}\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>172.22.0.65 &amp; 255.255.252.0 = 172.22.0.0\n172.22.0.65 | 0.0.3.255 = 172.22.3.255\n</code></pre>\n"}], "owner": {"reputation": 1729, "user_id": 1618465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e9867486a678f1a5ddc2929c25c2a53?s=128&d=identicon&r=PG", "display_name": "user1618465", "link": "https://stackoverflow.com/users/1618465/user1618465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2531, "favorite_count": 0, "accepted_answer_id": 44296307, "answer_count": 2, "score": 0, "last_activity_date": 1496345015, "creation_date": 1496269787, "last_edit_date": 1496343317, "question_id": 44295654, "link": "https://stackoverflow.com/questions/44295654/print-all-ips-based-on-ip-and-mask-c", "title": "Print all IPs based on IP and mask C++", "body": "<p>I would like to print all the possible IPs for a given mask. I have this code to get it but it seems I'm missing something since I can't get the list of IPs. I've based my code in <a href=\"https://stackoverflow.com/questions/19728127/function-that-return-a-list-of-ip-addresses-for-a-given-ip-adress-and-subnetmask\">this other post</a>.</p>\n\n<pre><code>unsigned int ipaddress, subnetmask;     \n\ninet_pton(AF_INET, b-&gt;IpAddressList.IpAddress.String, &amp;ipaddress);\ninet_pton(AF_INET, b-&gt;IpAddressList.IpMask.String, &amp;subnetmask);\n\nfor (unsigned int i = 1; i&lt;(~subnetmask); i++) {\n    auto ip = ipaddress &amp; (subnetmask + i);\n}\n</code></pre>\n\n<p>Example: ipaddress= 172.22.0.65 netmask= 255.255.252.0</p>\n\n<p>I expect:</p>\n\n<pre>\n172.22.0.1\n172.22.0.2\n172.22.0.3\n172.22.0.4\n...\n</pre>\n\n<p><strong>Update</strong>: I tried this code, but it does not work, either:</p>\n\n<pre><code>char* ip = \"172.22.0.65\";\nchar* netmask = \"255.255.252.0\";\n\nstruct in_addr ipaddress, subnetmask;\n\ninet_pton(AF_INET, ip, &amp;ipaddress);\ninet_pton(AF_INET, netmask, &amp;subnetmask);\n\nunsigned long first_ip = ntohl(ipaddress.s_addr &amp; subnetmask.s_addr);\nunsigned long last_ip = ntohl(ipaddress.s_addr | ~(subnetmask.s_addr));\n\nfor (unsigned long ip = first_ip; ip &lt;= last_ip; ++ip) {\n    unsigned long theip = htonl(ip);\n    struct in_addr x = { theip };\n    printf(\"%s\\n\", inet_ntoa(x));\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1496270054, "post_id": 44295575, "comment_id": 75597634, "body": "There is no shame in using an old compiler to support a legacy codebase. It&#39;s damn hard to get funding to upgrade the tool chain for a working product."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1496270185, "creation_date": 1496270185, "answer_id": 44295729, "question_id": 44295575, "link": "https://stackoverflow.com/questions/44295575/names-the-constructor-not-the-type-in-g-4-4-7/44295729#44295729", "title": "&quot;names the constructor, not the type&quot; in G++ 4.4.7", "body": "<p>There was a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=11764\" rel=\"noreferrer\">related bug in g++</a>. It was fixed in version 4.5.0, so 4.4.7 still has it.</p>\n\n<p>Here is the bug description:</p>\n\n<blockquote>\n  <p>cc1plus does not implement the class name injection correctly.\n  In particular the snipped below should be rejected on the basis that\n  A::A does not name a type (it designates a constructor)</p>\n\n<pre><code>struct A { };\n\nint main()\n{\n    A::A a;       // should be an ERROR\n}\n</code></pre>\n</blockquote>\n\n<p>Although the symptoms of this bug are not identical to what you describe, in both cases the compiler treats <code>A::A</code> as a type name, when it actually names a constructor. I am pretty certain that the two behaviors have the same root cause, which is poor implementation of scope resolution prior to version 4.5.0.</p>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "is_accepted": false, "score": 1, "last_activity_date": 1496339128, "creation_date": 1496339128, "answer_id": 44314006, "question_id": 44295575, "link": "https://stackoverflow.com/questions/44295575/names-the-constructor-not-the-type-in-g-4-4-7/44314006#44314006", "title": "&quot;names the constructor, not the type&quot; in G++ 4.4.7", "body": "<p>Expanding on dasblinkenlight's <a href=\"https://stackoverflow.com/a/44295729/5689220\">correct answer</a>--the C++03 standard explicitly outlaws his and my code in <code>[class.qual]</code>:</p>\n\n<blockquote>\n  <p>If the <em>nested-name-specifier</em> nominates a class C, and the name\n  specified after the <em>nested-name-specifier</em>, when looked up in C, is the\n  injected-class-name of C (clause 9), the name is instead considered to\n  name the constructor of class C. Such a constructor name shall be used\n  only in the <em>declarator-id</em> of a constructor definition that appears\n  outside of the class definition. [<em>Example:</em></p>\n\n<pre><code>struct A { A(); };\nstruct B: public A { B(); };\n\nA::A() { }\nB::B() { }\n\nB::A ba; // object of type A\nA::A a;  // error, A::A is not a type name\n</code></pre>\n  \n  <p><em>\u2014end example</em>]</p>\n</blockquote>\n"}], "owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2768, "favorite_count": 1, "accepted_answer_id": 44295729, "answer_count": 2, "score": 6, "last_activity_date": 1496339128, "creation_date": 1496269322, "question_id": 44295575, "link": "https://stackoverflow.com/questions/44295575/names-the-constructor-not-the-type-in-g-4-4-7", "title": "&quot;names the constructor, not the type&quot; in G++ 4.4.7", "body": "<p>I have the following simple C++ code:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nclass A\n{\npublic:\n    A(int y) : x(y) {}\n    A&amp; operator=(const A&amp; rhs);\n    int x;\n};\n\nA::A&amp; A::operator=(const A&amp; rhs) { this-&gt;x = rhs.x; return *this; }\n\nint main(int, char**)\n{\n    A a1(5);\n    A a2(4);\n\n    printf(\"a2.x == %d\\n\", a2.x);\n\n    a2 = a1;\n\n    printf(\"a2.x == %d\\n\", a2.x);\n\n    return 0;\n}\n</code></pre>\n\n<p>Line 11, where the definition of <code>A</code>'s <code>operator=()</code> function is at, is malformed...or, at least, I believe so. As expected, G++ 4.7.4, as well as every newer version of GCC that I've tried, throws the following error:</p>\n\n<pre><code>main.cpp:11:1: error: \u2018A::A\u2019 names the constructor, not the type\n</code></pre>\n\n<p>Oddly, though, G++ 4.4.7 compiles this program successfully, with no warnings, and even prints 4 and 5 as would be expected if line 11 were written correctly (i.e. with just <code>A&amp;</code> instead of <code>A::A&amp;</code>).</p>\n\n<p>Can someone help me decipher what exactly is going on there with G++ 4.4.7? Is this just a bug in that release (albeit an extremely old one, and shame on us for still using it)? I'd think the standard would explicitly state how the <code>operator=()</code> function must be declared and defined.</p>\n"}, {"tags": ["c++", "qt", "signals-slots", "slot"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 3, "last_activity_date": 1496267666, "creation_date": 1496267666, "answer_id": 44295258, "question_id": 44295170, "link": "https://stackoverflow.com/questions/44295170/qt-radio-button-only-call-slot-when-button-is-actually-checked/44295258#44295258", "title": "Qt Radio Button only call SLOT() when button is actually checked", "body": "<p>You are asking to connect to the <em>toggled</em> signal - you are called whenever the object is toggled. What's surprising? </p>\n\n<p>You could connect to the \"clicked\" signal which provides a \"checked\" argument you can test.</p>\n\n<p>Btw; if using a modern Qt version, you should ditch the SIGNAL and SLOTS macros and instead use the new connect() syntax that's checked at compile time.</p>\n"}, {"tags": [], "owner": {"reputation": 1907, "user_id": 1278112, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e3d3976fda1b5e2cb21d4a357425063a?s=128&d=identicon&r=PG", "display_name": "Shihe Zhang", "link": "https://stackoverflow.com/users/1278112/shihe-zhang"}, "is_accepted": false, "score": 2, "last_activity_date": 1496278014, "creation_date": 1496278014, "answer_id": 44296778, "question_id": 44295170, "link": "https://stackoverflow.com/questions/44295170/qt-radio-button-only-call-slot-when-button-is-actually-checked/44296778#44296778", "title": "Qt Radio Button only call SLOT() when button is actually checked", "body": "<p>Since your signal have a bool parameter.</p>\n\n<pre><code>toggled(bool)\n</code></pre>\n\n<p>you could add that parameter to your SLOT method.Then check if the parameter is checked.</p>\n"}], "owner": {"reputation": 41, "user_id": 8016689, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/77f4e005a212896397a1583cdd67f235?s=128&d=identicon&r=PG&f=1", "display_name": "sej", "link": "https://stackoverflow.com/users/8016689/sej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1768, "favorite_count": 0, "accepted_answer_id": 44295258, "answer_count": 2, "score": -2, "last_activity_date": 1496278014, "creation_date": 1496267136, "question_id": 44295170, "link": "https://stackoverflow.com/questions/44295170/qt-radio-button-only-call-slot-when-button-is-actually-checked", "title": "Qt Radio Button only call SLOT() when button is actually checked", "body": "<p>I've got a group of radio buttons. These are all connected to the same <code>SLOT(updateImage())</code>.</p>\n\n<p>Here's how they are set up:</p>\n\n<pre><code>connect(m_radio1, SIGNAL(toggled(bool)), this, SLOT(updateImage());\nconnect(m_radio2, SIGNAL(toggled(bool)), this, SLOT(updateImage());\nconnect(m_radio3, SIGNAL(toggled(bool)), this, SLOT(updateImage());\n</code></pre>\n\n<p>When changing the radio button from one to the next, this <code>SLOT()</code> is called twice, once for de-selecting the previously selected radio button, and once for selecting the clicked radio button.</p>\n\n<p>I was wondering, is there a way to modify my <code>SLOT()</code> to only occur in one of these cases, when the clicked item becomes checked?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "c++", "sockets", "azure", "tcp"], "comments": [{"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 2, "creation_date": 1496267922, "post_id": 44295008, "comment_id": 75596904, "body": "The server looks like it should work fine.  Just replace <code>&quot;localhost&quot;</code> with the address of your Azure host in your client code.  You may need to configure the firewall on your server to allow the remote connection, but how to do that seems more like a <a href=\"https://superuser.com/\">SuperUser</a> question."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496269370, "post_id": 44295008, "comment_id": 75597400, "body": "So what <i>specifically</i> are you asking?"}, {"owner": {"reputation": 41, "user_id": 3034822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1137810154/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3034822/kevin"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496269714, "post_id": 44295008, "comment_id": 75597521, "body": "@JesperJuhl I need to move the client process to an Azure VM. In doing so, I believe I need to modify the client process code so that it can still find the C++ server. I&#39;m asking for guidance in modifying the client connection. Per Miles&#39; suggestion, I&#39;ve changed &quot;localhost&quot; to the IP address of my VM instance and enabled inbound/outbound traffic over my port, but the connection is still failing."}], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1496305718, "creation_date": 1496305718, "answer_id": 44302333, "question_id": 44295008, "link": "https://stackoverflow.com/questions/44295008/python-c-remote-tcp-socket/44302333#44302333", "title": "Python/C++ Remote TCP Socket", "body": "<p>According to your description, based on my understanding, I think you want to deploy your C++ server process on your local machine and deploy the Python client on Azure VM, and make them communicate with each other. So it's a classic C/S communication model, you can make your client connect to server side if your local machine has a WAN ip. If not, you need to create an <a href=\"https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpngateways\" rel=\"nofollow noreferrer\">Azure VPN Gateway</a> to <a href=\"https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal\" rel=\"nofollow noreferrer\">create a Site-to-Site connection</a> for communication with the two processes via their own VPN VIP.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 41, "user_id": 3034822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1137810154/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3034822/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 616, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496305718, "creation_date": 1496266302, "last_edit_date": 1496267146, "question_id": 44295008, "link": "https://stackoverflow.com/questions/44295008/python-c-remote-tcp-socket", "title": "Python/C++ Remote TCP Socket", "body": "<p>I am trying to connect to processes to each other over TCP sockets. I have done this successfully when both processes are running locally by doing on the client side (a python process):</p>\n\n<pre><code>s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.connect((\"localhost\", 11111))\n</code></pre>\n\n<p>The server side was written by someone else and is implemented in C++.</p>\n\n<pre><code>#define WIDTH 640\n#define HEIGHT 480\n#define DEPTH 3\n#define BUFS (WIDTH*HEIGHT*DEPTH)\nint sockfd, newsockfd, portno;\nstruct sockaddr_in serv_addr, cli_addr;\nsocklen_t clilen;\n\nvoid netx_setup()\n{     \n     sockfd = socket(AF_INET, SOCK_STREAM, 0);\n     if (sockfd &lt; 0) \n        error(\"ERROR opening socket\");\n     bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n     portno = 11111;\n     serv_addr.sin_family = AF_INET;\n     serv_addr.sin_addr.s_addr = INADDR_ANY;\n     serv_addr.sin_port = htons(portno);\n     if (bind(sockfd, (struct sockaddr *) &amp;serv_addr,\n              sizeof(serv_addr)) &lt; 0) \n              error(\"ERROR on binding\");\n     listen(sockfd,5);\n     clilen = sizeof(cli_addr);\n\n     std::cout&lt;&lt;\"Waiting for connection\\n\";\n     newsockfd = accept(sockfd, \n                 (struct sockaddr *) &amp;cli_addr, \n                 &amp;clilen);\n         if (newsockfd &lt; 0) \n              {\n                std::cout&lt;&lt;\"No connection!\\n\";\n                newsockfd=0;\n              }\n}\n</code></pre>\n\n<p>However, I now need to have the server process running on my local machine while the client is running on a Microsoft Azure VM instance. I have all of the necessary code in place to handle everything once the connection is made, but I'm not sure how to go about setting up the socket for this. Any help would be greatly appreciated!</p>\n"}, {"tags": ["c++", "sockets", "server", "winsock", "listen"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1496267165, "post_id": 44294952, "comment_id": 75596616, "body": "If the error message is from the <code>listen()</code> then it looks like your <code>socket()</code> call in <code>socketbind()</code> does a return regardless so the <code>bind()</code> is never called.  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms739168(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  WSAEINVAL means The socket has not been bound with bind."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1496273077, "last_edit_date": 1496273077, "creation_date": 1496269719, "answer_id": 44295640, "question_id": 44294952, "link": "https://stackoverflow.com/questions/44294952/winsock-error-10022-in-listen/44295640#44295640", "title": "winsock error 10022 in listen", "body": "<p>Error code 10022 is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740668.aspx#WSAEINVAL\" rel=\"nofollow noreferrer\"><code>WSAEINVAL</code></a>:</p>\n\n<blockquote>\n  <p>Invalid argument.<br>\n  Some invalid argument was supplied (for example, specifying an invalid level to the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740476.aspx\" rel=\"nofollow noreferrer\"><code>setsockopt</code></a> function). <strong>In some instances, it also refers to the current state of the socket</strong>\u2014for instance, calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737526.aspx\" rel=\"nofollow noreferrer\"><code>accept</code></a> on a socket that is not listening.</p>\n</blockquote>\n\n<p>Per the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms739168.aspx\" rel=\"nofollow noreferrer\"><code>listen()</code> documentation</a>:</p>\n\n<blockquote>\n  <p>Return value</p>\n  \n  <p>If no error occurs, <code>listen</code> returns zero. Otherwise, a value of <code>SOCKET_ERROR</code> is returned, and a specific error code can be retrieved by calling <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms741580.aspx\" rel=\"nofollow noreferrer\"><code>WSAGetLastError</code></a>.</p>\n  \n  <p>...</p>\n  \n  <p><strong>WSAEINVAL</strong><br>\n  <strong>The socket has not been bound with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737550.aspx\" rel=\"nofollow noreferrer\"><code>bind</code></a></strong></p>\n</blockquote>\n\n<p>In your <code>socketBind()</code> method, if <code>socket()</code> is successful, you are calling <code>return</code> before you call <code>bind()</code>, so the socket is never bound.  You need to remove the <code>return</code> statement in the 1st <code>else</code> block.  Also, if <code>bind()</code> is successful, the 2nd <code>else</code> block is calling <code>return</code> before calling <code>freeaddrinfo()</code>, so you need to fix that as well.</p>\n\n<p>Try this:</p>\n\n<pre><code>int socketBind () {\n    socketServidor = socket(socketResultado-&gt;ai_family, socketResultado-&gt;ai_socktype, socketResultado-&gt;ai_protocol);\n    if (socketServidor == INVALID_SOCKET) {\n        printf (\"Error al crear socket: %d\\n\", WSAGetLastError ());\n        freeaddrinfo (socketResultado);\n        WSACleanup();\n        return 1;\n    }\n\n    printf (\"Socket creado correctamente.\\n\");\n\n    iResultado = bind(socketServidor, socketResultado-&gt;ai_addr, (int)socketResultado-&gt;ai_addrlen);\n    if (iResultado == SOCKET_ERROR) {\n        printf (\"Error al direccionar socket: %d\\n\", WSAGetLastError());\n        freeaddrinfo (socketResultado);\n        closesocket(socketServidor);\n        WSACleanup();\n        return 1;\n    }\n\n    printf (\"Socket direccionado correctamente. \\n\");\n\n    freeaddrinfo (socketResultado);\n    return 0;   \n}\n</code></pre>\n\n<p>That being said, your class is not doing a very good job of cleanup in general.  I would suggest something more C++-like (using RAII, throwing exceptions on errors, etc):</p>\n\n<pre><code>#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;system_error&gt;  \n#include &lt;memory&gt;\n\nclass socketError : public std::system_error\n{\npublic:\n    explicit socketError(int err, const std::string &amp;msg)\n        : std::system_error(err, std::system_category(), msg + \": \" + std::to_string(err))\n    {\n    }\n};\n\nvoid throwSocketError(int err, const std::string &amp;msg)\n{\n    std::cout &lt;&lt; msg &lt;&lt; \": \" &lt;&lt; err &lt;&lt; std::endl;\n    throw socketError(err, msg);\n}\n\nclass wsaInit\n{\npublic:\n    wsaInit() {\n        int iResultado = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n        printf (\"Inicializando Winsock2 \\n\");\n        if (iResultado != 0)\n            throwSocketError(iResultado, \"Error al iniciar Winsock2\");\n        printf (\"Winsock2 Inicializado\\n\");\n    }\n\n    ~wsaInit() {\n        WSACleanup();\n    }\n\n    wsaInit(const wsaInit &amp;) = delete;\n    wsaInit&amp; operator=(const wsaInit &amp;) = delete;\n};\n\nclass socketWrapper\n{\nprivate:\n    SOCKET sckt;\n\npublic:\n    socketWrapper() : sckt(INVALID_SOCKET) {}\n    explicit socketWrapper(SOCKET initialSocket) : sckt(initialSocket) {}\n    ~socketWrapper() { reset(); }\n\n    socketWrapper(const socketWrapper &amp;) = delete; \n    socketWrapper&amp; operator=(const socketWrapper &amp;) = delete; \n\n    void reset(SOCKET newSocket = INVALID_SOCKET) { if (sckt != INVALID_SOCKET) closesocket(sckt); sckt = newSocket; }\n\n    operator SOCKET() const { return sckt; }\n    bool operator !() const { return (sckt == INVALID_SOCKET); }\n};\n\nclass socketConexion { \nprivate: \n    wsaInit wsa; \n    socketWrapper socketServidor;\n    socketWrapper socketCliente; \n    std::unique_ptr&lt;struct addrinfo&gt; socketResultado;\n    ...\n\npublic:\n    socketConexion(const socketConexion &amp;) = delete; \n    socketConexion&amp; operator=(const socketConexion &amp;) = delete; \n\n    void obtenerDirServidor() {\n        socketResultado.reset();\n\n        printf (\"Introduzca puerto: \");\n\n        std::string puertoUsuario;\n        std::cin &gt;&gt; puertoUsuario;\n\n        printf (\"Obteniendo datos de servidor.\\n\");\n\n        struct addrinfo datosServidor;\n        ZeroMemory(&amp;datosServidor, sizeof(datosServidor));\n        datosServidor.ai_family = AF_INET;\n        datosServidor.ai_socktype = SOCK_STREAM;\n        datosServidor.ai_protocol = IPPROTO_TCP;\n        datosServidor.ai_flags = AI_PASSIVE;\n\n        struct addrinfo *pResultado;\n\n        int iResultado = getaddrinfo(NULL, puertoUsuario.c_str(), &amp;datosServidor, &amp;pResultado);\n        if (iResultado != 0)\n            throwSocketError(iResultado, \"Error al obtener direcci\u00f3n de servidor\");\n\n        socketResultado.reset(pResultado);\n\n        std::cout &lt;&lt; \"Direcci\u00f3n de servidor obtenida.\" &lt;&lt; std::endl;\n    }\n\n    void socketBind () {\n        socketServidor.reset();\n\n        if (!socketResultado)\n            obtenerDirServidor();\n\n        socketServidor.reset(socketResultado-&gt;ai_family, socketResultado-&gt;ai_socktype, socketResultado-&gt;ai_protocol));\n        if (!socketServidor) {\n            int iError = WSAGetLastError();\n            socketResultado.reset();\n            throwSocketError(iError, \"Error al crear socket\");\n        }\n\n        printf(\"Socket creado correctamente.\\n\");\n\n        int iResultado = ::bind(socketServidor, socketResultado-&gt;ai_addr, (int)socketResultado-&gt;ai_addrlen);\n        if (iResultado == SOCKET_ERROR) {\n            iResultado = WSAGetLastError();\n            socketResultado.reset();\n            throwSocketError(iResultado, \"Error al direccionar socket\");\n        }\n\n        socketResultado.reset();\n\n        printf (\"Socket direccionado correctamente. \\n\");\n    }\n\n    void socketListen() {\n        if (!socketServidor)\n            socketBind();\n\n        int iResultado = listen(socketServidor, SOMAXCONN);\n        if (iResultado == SOCKET_ERROR)\n            throwSocketError(WSAGetLastError(), \"Error al poner socket a la escucha socket\");\n\n        printf (\"Esperando conexi\u00f3n.....\\n\");\n    }\n\n    ...\n};\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8094404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbbba8dfa57def7b0cd006698b3d91e?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Campos", "link": "https://stackoverflow.com/users/8094404/alejandro-campos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "accepted_answer_id": 44295640, "answer_count": 1, "score": -3, "last_activity_date": 1496273077, "creation_date": 1496266063, "last_edit_date": 1496266346, "question_id": 44294952, "link": "https://stackoverflow.com/questions/44294952/winsock-error-10022-in-listen", "title": "winsock error 10022 in listen", "body": "<p>Here is my first question in this great website.</p>\n\n<p>I am writing a simple server, obtaining the port number form the user:</p>\n\n<pre><code>#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n\nclass socketConexion { \nprivate: \n    WSADATA wsaData; \n    int iResultado; \n    SOCKET socketServidor = INVALID_SOCKET;  socket servidor \n    SOCKET socketCliente = INVALID_SOCKET; \n    struct sockaddr *clienteSockaddr;\n    struct addrinfo *socketResultado = NULL;\n    struct addrinfo datosServidor;\n    std::string puertoUsuario;\n    char clienteIPV4[LONG_IPV4];\npublic:\n    int iniciarWinsock () { \n        iResultado = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n        printf (\"Inicializando Winsock2 \\n\");\n        if (iResultado != 0) { \n            printf (\"Error al iniciar Winsock2: %d\\n\", iResultado);\n            return 1;\n        else {\n            printf (\"Winsock2 Inicializado\\n\");\n            return 0;\n        }\n    }\n    int obtenerDirServidor () {\n        printf (\"Introduzca puerto: \");\n        std::cin &gt;&gt; puertoUsuario;\n        printf (\"Obteniendo datos de servidor.\\n\");\n        ZeroMemory(&amp;datosServidor, sizeof(datosServidor));\n        datosServidor.ai_family = AF_INET;\n        datosServidor.ai_socktype = SOCK_STREAM;\n        datosServidor.ai_protocol = IPPROTO_TCP;\n        datosServidor.ai_flags = AI_PASSIVE;\n        iResultado = getaddrinfo(NULL, (const char*)puertoUsuario.c_str(), &amp;datosServidor, &amp;socketResultado);\n        if (iResultado != 0) {\n            printf (\"Error al obtener direcci\u00f3n de servidor: %d\\n\", iResultado);\n            WSACleanup();\n            return 1;\n        }\n        else {\n            printf (\"Direcci\u00f3n de servidor obtenida.\\n\");\n            return 0;\n        }\n    }\n    int socketBind () {\n        socketServidor = socket(socketResultado-&gt;ai_family, socketResultado-&gt;ai_socktype, socketResultado-&gt;ai_protocol);\n        if (socketServidor == INVALID_SOCKET) {\n            printf (\"Error al crear socket: %d\\n\", WSAGetLastError ());\n            freeaddrinfo (socketResultado);\n            WSACleanup();\n            return 1;\n        }\n        else {\n            printf (\"Socket creado correctamente.\\n\");\n            return 0;\n        }\n        iResultado = bind(socketServidor, socketResultado-&gt;ai_addr, (int)socketResultado-&gt;ai_addrlen);\n        if (iResultado == SOCKET_ERROR) {\n            printf (\"Error al direccionar socket: %d\\n\", WSAGetLastError());\n            freeaddrinfo (socketResultado);\n            closesocket(socketServidor);\n            WSACleanup();\n            return 1;\n        }\n        else {\n            printf (\"Socket direccionado correctamente. \\n\");\n            return 0;   \n        }\n        freeaddrinfo (socketResultado);\n    }\n    int socketListen (){\n        iResultado = listen(socketServidor, SOMAXCONN);\n        if (iResultado == SOCKET_ERROR) {\n            printf (\"Error al poner socket a la escucha socket: %d\\n\", WSAGetLastError());\n            closesocket(socketServidor);\n            WSACleanup();\n            return 1;\n        }\n        else {\n            printf (\"Esperando conexi\u00f3n..... %d\\n\");\n            return 0;\n        }\n         .....\n</code></pre>\n\n<p>I get the error 10022 when calling listen function, and I can't see the invalid argument I am passing to the function.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qcustomplot"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 3, "last_activity_date": 1496273179, "creation_date": 1496273179, "answer_id": 44296175, "question_id": 44294906, "link": "https://stackoverflow.com/questions/44294906/display-x-and-y-coordinates-on-graph-in-qcustomplot/44296175#44296175", "title": "Display x and y coordinates on graph in QCustomplot", "body": "<p>You can create a <code>QCPItemText</code> and place the text and move it to the position you got with <code>pixelToCoord</code>.</p>\n\n<p><strong>*.h</strong></p>\n\n<pre><code>private:\n    QCPItemText *textItem;\n\nprivate slots:\n    void onMouseMove(QMouseEvent* event);\n</code></pre>\n\n<p><strong>*.cpp</strong></p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    textItem = new QCPItemText(ui-&gt;customPlot);\n    connect(ui-&gt;customPlot, &amp;QCustomPlot::mouseMove, this, &amp;MainWindow::onMouseMove);\n}\n\n\nvoid MainWindow::onMouseMove(QMouseEvent *event)\n{\n    QCustomPlot* customPlot = qobject_cast&lt;QCustomPlot*&gt;(sender());\n    double x = customPlot-&gt;xAxis-&gt;pixelToCoord(event-&gt;pos().x());\n    double y = customPlot-&gt;yAxis-&gt;pixelToCoord(event-&gt;pos().y());\n    textItem-&gt;setText(QString(\"(%1, %2)\").arg(x).arg(2));\n    textItem-&gt;position-&gt;setCoords(QPointF(x, y));\n    textItem-&gt;setFont(QFont(font().family(), 10));\n    customPlot-&gt;replot();\n}\n</code></pre>\n\n<p>The following image shows the result but for some reason my capture does not take the image of my pointer.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4lTaV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4lTaV.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1517, "user_id": 3191909, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b93ce4e73b7dc3c7f14567ac4255ac1?s=128&d=identicon&r=PG&f=1", "display_name": "XXDebugger", "link": "https://stackoverflow.com/users/3191909/xxdebugger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2001, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537678649, "creation_date": 1496265849, "last_edit_date": 1537678649, "question_id": 44294906, "link": "https://stackoverflow.com/questions/44294906/display-x-and-y-coordinates-on-graph-in-qcustomplot", "title": "Display x and y coordinates on graph in QCustomplot", "body": "<p>I want to display the x and y coordinates on mouse move on the graph.\nI calculated the x and y coordinates but not really sure how to display on the graph near to the point (preferably like <code>(x,y)</code> this </p>\n\n<pre><code>connect(ui-&gt;customPlot, SIGNAL(mouseRelease(QMouseEvent*)), this, SLOT(mouseRelease(QMouseEvent*)));\nconnect(ui-&gt;customPlot, SIGNAL(mousePress(QMouseEvent*)), this, SLOT(mousePress(QMouseEvent*)));\n\n\nfloat MainWindow::findX(QCustomPlot* customPlot, QCPCursor* cursor1, QMouseEvent* event)\n{\n\n    double x = customPlot-&gt;xAxis-&gt;pixelToCoord(event-&gt;pos().x());\n    double y = customPlot-&gt;yAxis-&gt;pixelToCoord(event-&gt;pos().y());\n\n    // I think I need to write a function here which will display the text on the graph.\n}\n\nvoid MainWindow::mouseRelease(QMouseEvent* event)\n{\n    if (event-&gt;button() == Qt::LeftButton) {\n        static QCPCursor cursor1;\n        QCustomPlot* plot = (QCustomPlot*)sender();\n        float x = findX(plot, &amp;cursor1, event);\n    }\n}\n\nvoid MainWindow::mousePressed(QMouseEvent* event)\n{\n    if (event-&gt;button() == Qt::RightButton) {\n        QCustomPlot* plot = (QCustomPlot*)sender();\n        plot-&gt;setContextMenuPolicy(Qt::CustomContextMenu);\n        connect(plot, SIGNAL(customContextMenuRequested(const QPoint&amp;)), this, SLOT(ShowContextMenu(const QPoint&amp;)));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "list", "templates"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 6, "creation_date": 1496265490, "post_id": 44294808, "comment_id": 75595950, "body": "The return type is <code>T</code>, not <code>list&lt;T&gt;</code>."}, {"owner": {"reputation": 3, "user_id": 8055639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd14ad79b1e94e1beb231a40944c537c?s=128&d=identicon&r=PG&f=1", "display_name": "StudentLerning", "link": "https://stackoverflow.com/users/8055639/studentlerning"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1496266306, "post_id": 44294808, "comment_id": 75596278, "body": "Okay, thanks! I still dont know what to do, but I guess I have to figure that out by myself, because I can see that my question is getting a lot of negative response, so I guess Im just stupid. :("}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1496266583, "post_id": 44294808, "comment_id": 75596378, "body": "If you want to return a list of T, then do <i>that</i> rather than returning a T. Also, ints are not doubles."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1496266883, "post_id": 44294808, "comment_id": 75596507, "body": "@LogicStuff sure, was just stating the obvious. The T vs list of T bit is what really matters."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1496266975, "post_id": 44294808, "comment_id": 75596543, "body": "@StudentLerning Is there something hard to understand about the error messages? Your intentions were good, but that does not mean you can&#39;t make a typo and not try to read them."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1496267038, "post_id": 44294808, "comment_id": 75596566, "body": "Completely unrelated to your question, but still; why <code>list</code>? In almost <i>any</i> situation a <code>vector</code> would be preferential (perform better in practice).."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1496266816, "creation_date": 1496266816, "answer_id": 44295109, "question_id": 44294808, "link": "https://stackoverflow.com/questions/44294808/c-return-a-list-of-values/44295109#44295109", "title": "C++ return a list of values?", "body": "<p>In your code, you declare to return type <code>T</code>, but the variable you return has type <code>list&lt;T&gt;</code>. I'd suggest to develop your code with concrete types (and without templates) first; you can exchange the concrete type with placeholders afterwards, but concrete types give a better idea what actually happens. \nTry the following code and translate it then to a template:</p>\n\n<pre><code>list&lt;int&gt; swapList(list&lt;int&gt; &amp;theList)\n{\n    list&lt;int&gt; li;\n    auto start = theList.rbegin(), stop = theList.rend();\n    for (auto it = start; it != stop; ++it)\n    {\n        li.push_back(*it);\n    }\n\n    return li;\n}\n\nint main()\n{\n    list&lt;int&gt; source { 1,2,3,4 };\n    list&lt;int&gt; swapped = swapList(source);\n    for (auto i : swapped) {\n        cout &lt;&lt; i &lt;&lt; \" \";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8055639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd14ad79b1e94e1beb231a40944c537c?s=128&d=identicon&r=PG&f=1", "display_name": "StudentLerning", "link": "https://stackoverflow.com/users/8055639/studentlerning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1604, "favorite_count": 0, "closed_date": 1496267811, "accepted_answer_id": 44295109, "answer_count": 1, "score": -5, "last_activity_date": 1496266816, "creation_date": 1496265354, "question_id": 44294808, "link": "https://stackoverflow.com/questions/44294808/c-return-a-list-of-values", "closed_reason": "Not suitable for this site", "title": "C++ return a list of values?", "body": "<p>I have a list with 20 numbers in it (theList). I want to read it backards and have this function to do that:</p>\n\n<pre><code>template&lt;typename T&gt;\nT funktioner&lt;T&gt;::swap(list&lt;T&gt; &amp;theList)\n{\nlist&lt;T&gt; li;\nauto start = theList.rbegin(), stop = theList.rend();\nfor (auto it = start; it != stop; ++it)\n{\n    li.push_back(*it);\n}\n\nreturn li;\n}\n</code></pre>\n\n<p>I call the function from my UserInterface in this function:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid UserInterface&lt;T&gt;::swap()\n{\ncout &lt;&lt; func.swap(List) &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>But this doesn't work correctly and I get the following error message:</p>\n\n<pre><code>error C2440: 'return': cannot convert from 'std::list&lt;T,std::allocator&lt;_Ty&gt;&gt;'to 'int'\nerror C2440: 'return': cannot convert from 'std::list&lt;T,std::allocator&lt;_Ty&gt;&gt;'to 'double'\n</code></pre>\n\n<p>Why? I don't know what I'm doing wrong this time. I thought that I had to create a temporary list and push_back the values in to that and return that list, but I guess I was wrong and I'm really not good at this. Can someone help me? Maybe I'm totally out of bed here? :O</p>\n"}, {"tags": ["c++", "c++11", "templates", "language-lawyer"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1496268406, "post_id": 44294743, "comment_id": 75597063, "body": "Because having a dependent type anywhere in a type expression makes the whole type dependent, despite it being in fact a constant."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1496268456, "post_id": 44294743, "comment_id": 75597074, "body": "@n.m. That&#39;s not true."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 6, "creation_date": 1496268530, "post_id": 44294743, "comment_id": 75597097, "body": "One version is ill-formed if <code>T</code> is incomplete. The other isn&#39;t."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1496268846, "post_id": 44294743, "comment_id": 75597192, "body": "Fails in gcc as well &quot;error: prototype for \u2018decltype (sizeof (T)) Cls&lt; &lt;template-parameter-1-1&gt; &gt;::f()\u2019 does not match any in class \u2018Cls&lt; &lt;template-parameter-1-1&gt; &gt;\u2019&quot;"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1496269251, "post_id": 44294743, "comment_id": 75597351, "body": "Vaguely related: g++ thinks <code>sizeof</code> a non-type template parameter is dependent <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80368\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=80368</a> .  I imagine something similar may be going on here."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496269337, "post_id": 44294743, "comment_id": 75597384, "body": "@T.C. indeed the standard says sizeof() is never type-dependent."}, {"owner": {"reputation": 5058, "user_id": 1653187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3942782a314cdc7d6a7364cd32bfd3b3?s=128&d=identicon&r=PG", "display_name": "nickie", "link": "https://stackoverflow.com/users/1653187/nickie"}, "edited": false, "score": 0, "creation_date": 1496693646, "post_id": 44294743, "comment_id": 75754815, "body": "I tend to think that all of these are compiler bugs.  Both compilers, g++ and clang++, fail to correctly decide type equality for these pairs of type expressions."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1496713415, "post_id": 44294743, "comment_id": 75760910, "body": "@aschepler there are two sorts of dependent, <i>type-dependent</i> and <i>value-dependent</i>.  If <code>T</code> is type-dependent then <code>sizeof(T)</code> is value-dependent but not type-dependent."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496713559, "post_id": 44294743, "comment_id": 75760943, "body": "This also gives the error in g++, without sizeof: <code>struct S{ int f(); }; template&lt;int N&gt; decltype(N) S::f() { }</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496714380, "post_id": 44294743, "comment_id": 75761087, "body": "It&#39;s not clear to me which part of the standard covers matching of the function definition to prototype, for the case of member functions of class templates that have not yet been instantiated"}, {"owner": {"reputation": 689, "user_id": 4678048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d4cab92f164433dabd22844a55590f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jouster500", "link": "https://stackoverflow.com/users/4678048/jouster500"}, "edited": false, "score": 0, "creation_date": 1496760340, "post_id": 44294743, "comment_id": 75785990, "body": "I want to make sure i am reading this right... So you initiate a template with the proper class but don&#39;t tell anything about what it is... You proceed to make a struct that has function which i assume will return the byte size of an object. You then proceed to declare T to be of a typename, but then you try to pass it to the sizeOf command which doesn&#39;t return any of the declare types accepted values because it doesn&#39;t know what T is to begin with. My interpretation is that you try to pass the type to be unknown to the function yet you ambiguously declare it to have an integer type with f()!"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 689, "user_id": 4678048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d4cab92f164433dabd22844a55590f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jouster500", "link": "https://stackoverflow.com/users/4678048/jouster500"}, "edited": false, "score": 0, "creation_date": 1496776342, "post_id": 44294743, "comment_id": 75795855, "body": "@Jouster500 <code>decltype(sizeof(T))</code> would be <code>size_t</code> for anything."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496776370, "post_id": 44294743, "comment_id": 75795874, "body": "@M.M that example failing makes sense though since <code>f</code> isn&#39;t declared as a template, but I still see it with <code>struct S { template &lt;int N&gt; int f(); };</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496786949, "post_id": 44294743, "comment_id": 75800887, "body": "@RyanHaining maybe language-lawyer tag would be a good idea"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496788804, "post_id": 44294743, "comment_id": 75801407, "body": "@M.M added, I wasn&#39;t initially sure if I was missing something more obvious"}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1496841978, "post_id": 44413900, "comment_id": 75826903, "body": "Huh. I&#39;m surprised it&#39;s &quot;involves a template parameter&quot; rather than &quot;is type-dependent&quot;, but there you have it."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1496845673, "post_id": 44413900, "comment_id": 75829845, "body": "I don&#39;t totally follow, so perhaps you can clarify for me how this answers the question. Since <code>sizeof</code> is never a type-dependent expression, I thought it should always be returning a <code>std::size_t</code>, and the fact that a <code>decltype</code> is used on the outer expression shouldn&#39;t matter?"}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1496846022, "post_id": 44413900, "comment_id": 75830164, "body": "@AndyG Does <code>sizeof(T)</code> involves a template parameter? Yes. The quote from the standard presented in the answer: &quot;If an expression e involves a template parameter, decltype(e) denotes a unique dependent type.&quot; It is for you as a human who know C++ obvious that <code>sizeof</code> always returns <code>size_t</code> and the problem solved. But when you are writing a formal grammar and semantic rules there is more than this kind of simple rules."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1496847842, "post_id": 44413900, "comment_id": 75831635, "body": "@Yuki: Thanks, that clears it up. I think more intuition can be found in the C++14 standard N4296 [dcl.spec.auto]/13 (and partly 12) which states &quot;Redeclarations or specializations of a function or function template with a declared return type that uses a placeholder type shall also use that placeholder, not a deduced type.&quot; The intuition is that <code>decltype(sizeof(T))</code> is a placeholder type until the template is instantiated ([dcl.spec.auto]/12), and the compiler can already see that you&#39;ve mixed an explicit type and a placeholder. Thinking of it that way helps, although it&#39;s a little imprecise"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 2, "creation_date": 1496852055, "post_id": 44413900, "comment_id": 75834489, "body": "@Yuki <i>&quot;It is for you as a human who know C++ obvious that sizeof always returns size_t and the problem solved.&quot;</i> I&#39;m not so sure about this statement - <code>decltype(sizeof(T))</code> for <code>T=void</code> should silencely force sfinea&#39;ing out... <a href=\"https://wandbox.org/permlink/WtuMBtWCckhn32ux\" rel=\"nofollow noreferrer\">example</a>"}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 2, "creation_date": 1496854131, "post_id": 44413900, "comment_id": 75835724, "body": "Note that the paragraph you quoted from [temp.type] was changed by the resolution of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#2064\" rel=\"nofollow noreferrer\">DR 2064</a>, which was adopted into the working draft in March 2016 (N4582). The expression now has to be type-dependent."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1496854487, "post_id": 44413900, "comment_id": 75835901, "body": "@W.F. You are correct if you are you using it in some SFINAE constructs, but I think this in not the case for the current case. Thank you anyway for mentioning this."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1496855349, "post_id": 44413900, "comment_id": 75836354, "body": "hmm @n.m&#39;s comment above reads &quot;<i>the standard says sizeof() is never type-dependent.</i>&quot; so should this all be legal in c++17 if that&#39;s true?"}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "edited": false, "score": 0, "creation_date": 1496860517, "post_id": 44413900, "comment_id": 75839098, "body": "The standard (C++-17 is still developing) is growing, getting more complicated and sometimes confusing. I would not expect the behavior to change and the latest clang verifies my guess. For the current standard 14 as well as for the previous 11 it is settled."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1497007261, "post_id": 44413900, "comment_id": 75909125, "body": "Since the explanation given in the answer is no longer supported by the current form of that paragraph (and compilers apply DRs to previous standard versions as well), I think a better explanation for why this won&#39;t work is in <a href=\"http://eel.is/c++draft/temp.over.link\" rel=\"nofollow noreferrer\">&#91;temp.over.link&#93;</a>, from &#167;4 onwards. The wording could be improved, but I think these are the rules that compilers use to match those declarations with one another. Note that the ODR requirements are pretty strict - <i>the same sequence of tokens</i>. cc @RyanHaining"}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1497009015, "post_id": 44413900, "comment_id": 75910292, "body": "@bogdan Explanation in the answer is totally based on the current official version of the standard, and it considers the currently developing (not-official) version of the standard. The section you linked talks about template function overloading and does not give direct answer to the problem, however it helps to understand the idea why it might not work and how the standard (and compilers eventually) handles template."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1497018273, "post_id": 44413900, "comment_id": 75916908, "body": "@bogdan is a member function of a class template bound to the same rules as a free function template?"}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1497028496, "post_id": 44413900, "comment_id": 75923387, "body": "@RyanHaining Yes, they do, there is no distinction between member function template overloading and free function template overloading, it is just function template overloading. This section is about template parameters and what is considered to equivalent and what is not."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1497029623, "post_id": 44413900, "comment_id": 75924037, "body": "@Yuki I&#39;m not asking about member function template vs free function template, I&#39;m asking about member function <i>of a class template</i>"}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1497031518, "post_id": 44413900, "comment_id": 75925065, "body": "@RyanHaining Not in general, of course, but for the purpose of linking different declarations together, given <a href=\"http://eel.is/c++draft/temp.class#3\" rel=\"nofollow noreferrer\">&#91;temp.class&#93;/3</a> (<i>the member de\ufb01nition is de\ufb01ned as a template de\ufb01nition in which the template-parameters are those of the class template</i>) and [temp.mem.func] below, I&#39;d say it&#39;s pretty close. As I said, I think the wording could be improved there; nothing unusual for the [temp] clause, really :-)."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1497032887, "post_id": 44413900, "comment_id": 75925783, "body": "@RyanHaining Function template overloading cannot exist on functions that do not have template parameters (i.e. that are not function templates, but just functions). The class has template parameters, but not the functions. The section [temp.over.link] is relevant to the original topic only when there is a question of two <code>expression</code>s in two <code>decltype</code>s, and it answers if those <code>expression</code>s are equivalent. Otherwise, I think, the answer for the original problem is in <a href=\"http://eel.is/c++draft/temp.type\" rel=\"nofollow noreferrer\">temp.type</a>[2]: <code>decltype(&lt;type-dependent&gt;)</code> is a unique type."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "edited": false, "score": 0, "creation_date": 1497044876, "post_id": 44413900, "comment_id": 75930989, "body": "I did a little bit more thinking, see the latest answer."}], "tags": [], "owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "is_accepted": true, "score": 10, "last_activity_date": 1497045005, "last_edit_date": 1497045005, "creation_date": 1496841695, "answer_id": 44413900, "question_id": 44294743, "link": "https://stackoverflow.com/questions/44294743/dependent-type-or-argument-in-decltype-in-function-definition-fails-to-compile-w/44413900#44413900", "title": "Dependent type or argument in decltype in function definition fails to compile when declared without decltype", "body": "<p>Because when there is a template parameter involved, <code>decltype</code> returns an unqiue dependent type according to the standard, see below. If there is no template parameter then it resolves to an obvious <code>size_t</code>. So in this case you have to choose either both declaration and definition have an independent expression (e.g. <code>size_t/decltype(sizeof(int))</code>), as a return type, or both have dependent expression (e.g. <code>decltype(sizeof(T))</code>), which resolved to an unique dependent type and considered to be equivalent, if their expressions are equivalent (see below).</p>\n\n<p>In this post I am using the C++ standard draft <a href=\"https://github.com/cplusplus/draft/blob/master/papers/n3337.pdf\" rel=\"nofollow noreferrer\">N3337</a>.</p>\n\n<blockquote>\n  <p><strong>\u00a7 7.1.6.2 [dcl.type.simpl]</strong></p>\n  \n  <p>\u00b6 4</p>\n  \n  <p>The type denoted by decltype(e) is defined as follows:\n  \u2014 if e is an unparenthesized id-expression or an unparenthesized class member access (5.2.5), decltype(e)\n  is the type of the entity named by e. If there is no such entity, or if e names a set of overloaded func-\n  tions, the program is ill-formed;</p>\n  \n  <p>\u2014 otherwise, if e is an xvalue, decltype(e) is T&amp;&amp;, where T is the type of e;</p>\n  \n  <p>\u2014 otherwise, if e is an lvalue, decltype(e) is T&amp;, where T is the type of e;</p>\n  \n  <p>\u2014 otherwise, <strong>decltype(e) is the type of e</strong>.</p>\n</blockquote>\n\n<p>This explains what is <code>decltype(sizeof(int))</code>. But for <code>decltype(sizeof(T))</code> there is another section explaining what it is.</p>\n\n<blockquote>\n  <p><strong>\u00a7 14.4 [temp.type]</strong></p>\n  \n  <p>\u00b6 2</p>\n  \n  <p>If an expression e involves a template parameter, decltype(e) denotes a <strong>unique dependent type</strong>. Two such\n  decltype-specifiers refer to the same type only if their expressions are equivalent (14.5.6.1). [ Note: however,\n  it may be aliased, e.g., by a typedef-name. \u2014 end note ]</p>\n</blockquote>\n\n<p>In Clang LLVM sources version 3.9 in file <code>lib/AST/Type.cpp</code></p>\n\n<pre><code>DecltypeType::DecltypeType(Expr *E, QualType underlyingType, QualType can)\n  // C++11 [temp.type]p2: \"If an expression e involves a template parameter,\n  // decltype(e) denotes a unique dependent type.\" Hence a decltype type is\n  // type-dependent even if its expression is only instantiation-dependent.\n  : Type(Decltype, can, E-&gt;isInstantiationDependent(),\n         E-&gt;isInstantiationDependent(),\n         E-&gt;getType()-&gt;isVariablyModifiedType(),\n         E-&gt;containsUnexpandedParameterPack()),\n</code></pre>\n\n<p>The important phrase starts as \"Hence a decltype...\". It again clarifies the situation.</p>\n\n<p>Again in Clang sources version 3.9 in file <code>lib/AST/ASTContext.cpp</code></p>\n\n<pre><code>QualType ASTContext::getDecltypeType(Expr *e, QualType UnderlyingType) const {\n  DecltypeType *dt;\n\n  // C++11 [temp.type]p2:\n  //   If an expression e involves a template parameter, decltype(e) denotes a\n  //   unique dependent type. Two such decltype-specifiers refer to the same\n  //   type only if their expressions are equivalent (14.5.6.1).\n  if (e-&gt;isInstantiationDependent()) {\n    llvm::FoldingSetNodeID ID;\n    DependentDecltypeType::Profile(ID, *this, e);\n\n    void *InsertPos = nullptr;\n    DependentDecltypeType *Canon\n      = DependentDecltypeTypes.FindNodeOrInsertPos(ID, InsertPos);\n    if (!Canon) {\n      // Build a new, canonical typeof(expr) type.\n      Canon = new (*this, TypeAlignment) DependentDecltypeType(*this, e);\n      DependentDecltypeTypes.InsertNode(Canon, InsertPos);\n    }\n    dt = new (*this, TypeAlignment)\n        DecltypeType(e, UnderlyingType, QualType((DecltypeType *)Canon, 0));\n  } else {\n    dt = new (*this, TypeAlignment)\n        DecltypeType(e, UnderlyingType, getCanonicalType(UnderlyingType));\n  }\n  Types.push_back(dt);\n  return QualType(dt, 0);\n}\n</code></pre>\n\n<p>So you see Clang gathers and picks those unique dependent types of <code>decltype</code> in/from a special set.</p>\n\n<p>Why compiler is so stupid that it does not see that the expression of <code>decltype</code> is <code>sizeof(T)</code> that is always <code>size_t</code>? Yes, this is obvious to a human reader. But when you design and implement a formal grammar and semantic rules, especially for such complicated languages as C++, you have to group problems up and define the rules for them, rather than just come up with a rule for each particular problem, in the latter way you just wont be able to move with your language/compiler design. The same here there is no just rule: if <code>decltype</code> has a function call expression that does not need any template parameters resolution - resolve <code>decltype</code> to the return type of the function. There is more than that, there are so many cases you need to cover, that you come up with a more generic rule, like the quoted above from the standard (<code>14.4[2]</code>).</p>\n\n<p>In addition, a similar non-obvious case with <code>auto</code>, <code>decltype(auto)</code> found by AndyG in C++-14 (N4296, \u00a7 7.1.6.4 [dcl.spec.auto] 12/13):</p>\n\n<blockquote>\n  <p><strong>\u00a7 7.1.6.4 [dcl.spec.auto]</strong></p>\n  \n  <p>\u00b6 13</p>\n  \n  <p>Redeclarations or specializations of a function or function template with a declared return type that uses a\n  placeholder type shall also use that placeholder, not a deduced type. [ Example:</p>\n\n<pre><code>auto f();\nauto f() { return 42; } // return type is int\nauto f();               // OK\nint f();                // error, cannot be overloaded with auto f()\ndecltype(auto) f();     // error, auto and decltype(auto) don\u2019t match\n</code></pre>\n</blockquote>\n\n<h1>Changes in C++17, Document Number >= N4582</h1>\n\n<p>Change in the standard draft N4582 from March 2016 (thanks to bogdan) generalizes the statement:</p>\n\n<blockquote>\n  <p><strong>\u00a7 17.4 (old \u00a7 14.4) [temp.type]</strong></p>\n  \n  <p>\u00b6 2</p>\n  \n  <p>If an expression e is <strong>type-dependent (17.6.2.2)</strong>, decltype(e) denotes a unique dependent type. Two such\n  decltype-specifiers refer to the same type only if their expressions are equivalent (17.5.6.1). [ Note: however,\n  such a type may be aliased, e.g., by a typedef-name. \u2014 end note ]</p>\n</blockquote>\n\n<p>This change leads to another section describing the type dependent expression that looks quite strange to our particular case.</p>\n\n<blockquote>\n  <p><strong>\u00a7 17.6.2.2 [temp.dep.expr] (old \u00a7 14.6.2.2)</strong></p>\n  \n  <p>\u00b6 4</p>\n  \n  <p>Expressions of the following forms are never type-dependent (because the type of the expression cannot be\n  dependent):</p>\n\n<pre><code>...\nsizeof ( type-id )\n...\n</code></pre>\n</blockquote>\n\n<p>There are further sections on value-dependent expressions where <code>sizeof</code> can be value-dependent if the <code>type-id</code> dependent. There is no relation between value-dependent expression and <code>decltype</code>. After some thinking, I did not find any reason why <code>decltype(sizeof(T))</code> must not or cannot resolve into <code>size_t</code>. And I would assume that was quite sneaky change (\"involves a template parameter\" to \"type-dependent\") in the standard that compiler developers did not pay much attention to (maybe overwhelmed by many other changes, maybe did not think that it might actually change something, just a simple formulation improvement). The change does make sense, because <code>sizeof(T)</code> is not type-dependent, it is value-dependent. <code>decltype(e)</code>'s operand is a unevaluated operand, i.e. does not care about value, only about type. That is why <code>decltype</code> returns a unique type only when <code>e</code> is type-dependent. <code>sizeof(e)</code> might be only value-dependent.</p>\n\n<p>I tried the code with clang 5, gcc 8 <code>-std=c++1z</code> - the same result: error. I went further and tried this code:</p>\n\n<pre><code>template &lt;typename&gt;\nstruct Cls {\n  static std::size_t f();\n};\n\ntemplate &lt;typename T&gt;\ndecltype(sizeof(sizeof(T))) Cls&lt;T&gt;::f() {\n  return 0;\n}\n</code></pre>\n\n<p>The same error was given, even that <code>sizeof(sizeof(T))</code> is neither type- or value-dependent (see <a href=\"https://stackoverflow.com/questions/27713222/can-sizeof-nested-twice-ever-be-a-dependent-expression\">this post</a>). This gives me a reason to assume that the compilers are working in an old way of C++-11/14 standard (i.e. \"involves a template parameter\") like in the source snippet above from clang 3.9 source (I can verify that the latest developing clang 5.0 has the same lines, have not found anything related to this new change in the standard), but not type-dependent.</p>\n"}], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 7, "accepted_answer_id": 44413900, "answer_count": 1, "score": 30, "last_activity_date": 1497045005, "creation_date": 1496265094, "last_edit_date": 1496789422, "question_id": 44294743, "link": "https://stackoverflow.com/questions/44294743/dependent-type-or-argument-in-decltype-in-function-definition-fails-to-compile-w", "title": "Dependent type or argument in decltype in function definition fails to compile when declared without decltype", "body": "<p>I've been playing with deduced return types in definitions that resolve to the same type as the declaration. This works:</p>\n\n<pre><code>template &lt;typename&gt;\nstruct Cls {\n  static std::size_t f();\n};\n\ntemplate &lt;typename T&gt;\ndecltype(sizeof(int)) Cls&lt;T&gt;::f()  { return 0; }\n</code></pre>\n\n<p>But if I change the definition to something that should be equivalent by replacing <code>sizeof(int)</code> with <code>sizeof(T)</code> <a href=\"https://wandbox.org/permlink/ojdeesqU3Z9Bs1NU\" rel=\"noreferrer\">it fails</a></p>\n\n<pre><code>template &lt;typename T&gt;\ndecltype(sizeof(T)) Cls&lt;T&gt;::f() { return 0; }\n</code></pre>\n\n<p>gcc's error (clang is almost identical):</p>\n\n<pre><code>error: prototype for \u2018decltype (sizeof (T)) Cls&lt;T&gt;::f()\u2019 does not match any in class \u2018Cls&lt;T&gt;\u2019\n decltype(sizeof(T)) Cls&lt;T&gt;::f() { return 0; }\n                     ^~~~~~\nso.cpp:4:24: error: candidate is: static std::size_t Cls&lt;T&gt;::f()\n     static std::size_t f();\n                        ^\n</code></pre>\n\n<p>The same problem arises with function parameter types:</p>\n\n<pre><code>template &lt;typename&gt;\nstruct Cls {\n  static void f(std::size_t);\n};\n\ntemplate &lt;typename T&gt;\nvoid Cls&lt;T&gt;::f(decltype(sizeof(T))) { } // sizeof(int) works instead\n</code></pre>\n\n<p>Stranger yet, if the declaration and definition match and <em>both</em> use <code>decltype(sizeof(T))</code> it compiles successfully, and I can <code>static_assert</code> that the return type is <code>size_t</code>. The following compiles successfully:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct Cls {\n  static decltype(sizeof(T)) f();\n};\n\ntemplate &lt;typename T&gt;\ndecltype(sizeof(T)) Cls&lt;T&gt;::f() { return 0; }\n\nstatic_assert(std::is_same&lt;std::size_t, decltype(Cls&lt;int&gt;::f())&gt;{}, \"\");\n</code></pre>\n\n<hr>\n\n<p>Update with another example. This isn't a dependent type but still fails.</p>\n\n<pre><code>template &lt;int I&gt;\nstruct Cls {\n  static int f();\n};\n\ntemplate &lt;int I&gt;\ndecltype(I) Cls&lt;I&gt;::f() { return I; }\n</code></pre>\n\n<p>If I use <code>decltype(I)</code> in both the definition and declaration it works, if I use <code>int</code> in both the definition and declaration it works, but having the two differ fails.</p>\n\n<hr>\n\n<p>Update 2:\nA similar example. If <code>Cls</code> is changed to not be a class template, it compiles successfully.</p>\n\n<pre><code>template &lt;typename&gt;\nstruct Cls {\n  static int f();\n  using Integer = decltype(Cls::f());\n};\n\ntemplate &lt;typename T&gt;\ntypename Cls&lt;T&gt;::Integer Cls&lt;T&gt;::f() { return I; }\n</code></pre>\n\n<hr>\n\n<p>Update 3:\nAnother failing example from M.M. A templated member function of a non-templated class.</p>\n\n<pre><code>struct S {\n  template &lt;int N&gt;\n  int f();\n};\n\ntemplate &lt;int N&gt;\ndecltype(N) S::f() {}\n</code></pre>\n\n<hr>\n\n<p>Why is it illegal for the declaration and definition to disagree with a dependent type only? Why is it affected even when the type itself isn't dependent as with the <code>template &lt;int I&gt;</code> above?</p>\n"}, {"tags": ["c++", "algorithm", "performance", "eigen", "memory-efficient"], "comments": [{"owner": {"reputation": 978, "user_id": 1753545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p8AyY.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/1753545/max"}, "edited": false, "score": 1, "creation_date": 1496265072, "post_id": 44294689, "comment_id": 75595790, "body": "Use fixed-size vectors instead of dynamic-size vectors."}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496265468, "post_id": 44294689, "comment_id": 75595945, "body": "if you may want to share the code for <code>homogeneous()</code> and <code>hnormalized()</code>, to really pinpoint the root cause."}, {"owner": {"reputation": 60, "user_id": 2392520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b29fd917b422b56168b4e6cc5c0c432c?s=128&d=identicon&r=PG", "display_name": "Parker Lusk", "link": "https://stackoverflow.com/users/2392520/parker-lusk"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496265707, "post_id": 44294689, "comment_id": 75596036, "body": "@codekaizer <code>homogeneous()</code> and <code>hnormalized()</code> are both <code>Eigen</code> <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1Homogeneous.html\" rel=\"nofollow noreferrer\">library methods</a>"}, {"owner": {"reputation": 60, "user_id": 2392520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b29fd917b422b56168b4e6cc5c0c432c?s=128&d=identicon&r=PG", "display_name": "Parker Lusk", "link": "https://stackoverflow.com/users/2392520/parker-lusk"}, "reply_to_user": {"reputation": 978, "user_id": 1753545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p8AyY.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/1753545/max"}, "edited": false, "score": 0, "creation_date": 1496266140, "post_id": 44294689, "comment_id": 75596204, "body": "@max Using <code>Eigen::Vector2d</code> doesn&#39;t help significantly."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1496273766, "post_id": 44294689, "comment_id": 75598649, "body": "Is there a reason to use a vector of shared pointers to represent a scan? (shared pointers of an object only 32 bytes large, sounds fishy). If <code>scan_t</code> was a simple <code>std::vector&lt;std::pair&lt;Eigen::Vector2d, Eigen::Vector2d&gt; &gt; &gt;</code> (or equivalent), your inner loop could be written with a single Eigen expression (using <code>Map</code> and <code>colwise</code>). If <code>Measurement</code> contains additional members, it should be possible using two expressions."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1496276821, "post_id": 44294689, "comment_id": 75599331, "body": "You might want to move that <code>if</code> statement into the loop declaration, i.e. <code>for (auto scan = dataset_.begin(); scan != std::prev(dataset_.end()); ++scan)</code>.  It might be that branch prediction fails for some reason which can make any loop go extremely slow.  Also, did you compile with <code>-O3 -DNDEBUG</code>?  Eigen has a lot of assertions and range checks which make your code slower than it is."}, {"owner": {"reputation": 978, "user_id": 1753545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p8AyY.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/1753545/max"}, "edited": false, "score": 0, "creation_date": 1496301412, "post_id": 44294689, "comment_id": 75607054, "body": "as others hinted to, this is likely due to cache misses since each of your measurements might end up at random places in memory. So besides using <code>Vector2d</code> try using a <code>std::vector&lt;Measurement&gt;</code> directly. If this helps but you still need to keep <code>shared_ptr</code>, consider using an allocator."}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 673137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f217be419e3bd103d75f4bc8dd4ee9?s=128&d=identicon&r=PG", "display_name": "Mr. White", "link": "https://stackoverflow.com/users/673137/mr-white"}, "is_accepted": false, "score": 1, "last_activity_date": 1497792360, "creation_date": 1497792360, "answer_id": 44615476, "question_id": 44294689, "link": "https://stackoverflow.com/questions/44294689/memory-efficiency-eigenvectorxd-in-a-loop/44615476#44615476", "title": "Memory Efficiency - Eigen::VectorXd in a loop", "body": "<p>You might want to rework your data-structures.\nCurrently you have an array-of-struct (AOS), with a number of indirections.\nA structure-of-arrays (SOA) is generally more efficient in memory access.</p>\n\n<p>What about ?:</p>\n\n<pre><code>struct Scant_t\n{\n     Eigen::MatrixXd position;\n     Eigen::MatrixXd velocity;\n}\n</code></pre>\n\n<p>the <code>.rowwise()</code> and <code>.colwise()</code> operators might be powerfull enough to do the homogeneous transform, which would save you writing the inner loop.</p>\n"}], "owner": {"reputation": 60, "user_id": 2392520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b29fd917b422b56168b4e6cc5c0c432c?s=128&d=identicon&r=PG", "display_name": "Parker Lusk", "link": "https://stackoverflow.com/users/2392520/parker-lusk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1497792360, "creation_date": 1496264812, "question_id": 44294689, "link": "https://stackoverflow.com/questions/44294689/memory-efficiency-eigenvectorxd-in-a-loop", "title": "Memory Efficiency - Eigen::VectorXd in a loop", "body": "<p>I have a <code>Measurement</code> object that has two <code>Eigen::VectorXd</code> members -- one for <code>position</code> and the other <code>velocity</code>.</p>\n\n<p>Measurements are arranged in a dataset by scans -- i.e., at each timestep, a new scan of measurements is added to the dataset. These types are defined as:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef std::shared_ptr&lt;Measurement&gt;        MeasurementPtr;\ntypedef std::vector&lt;MeasurementPtr&gt;         scan_t;\ntypedef std::vector&lt;scan_t&gt;                 dataset_t;\n</code></pre>\n\n<p>At the beginning of each iteration of my algorithm, I need to apply a new transformation to each measurement. Currently, I have:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for (auto scan = dataset_.begin(); scan != dataset_.end(); ++scan)\n    for (auto meas = scan-&gt;begin(); meas != scan-&gt;end(); ++meas) {\n\n        // Transform this measurement to bring it into the same\n        // coordinate frame as the current scan\n        if (scan != std::prev(dataset_.end())) {\n            core::utils::perspective_transform(T_, (*meas)-&gt;pos);\n            core::utils::perspective_transform(T_, (*meas)-&gt;vel);\n        }\n\n    }\n</code></pre>\n\n<p>Where <code>perspective_transform</code> is defined as</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void perspective_transform(const Eigen::Projective2d&amp; T, Eigen::VectorXd&amp; pos) {\n\n    pos = (T*pos.homogeneous()).hnormalized();\n}\n</code></pre>\n\n<p>Adding this code increases computation time by 40x when I run the algorithm with scans in the dataset with 50 measurements in each scan -- making it rather slow. I believe this is because I have 550 small objects, each with 2 <code>Eigen</code> memory writes. I removed the writing of the result to memory and my benchmark shows only a slight decrease -- suggesting that this is a memory-efficiency problem and not a computation bottleneck.</p>\n\n<p><strong>How can I speed up this computation?</strong> Is there a way to first loop through and create an <code>Eigen::Matrix</code> from <code>Eigen::Map</code> that I could then do the computation once and have it automatically update the two members of the all the <code>Measurement</code> objects?</p>\n"}, {"tags": ["c++", "c", "ada"], "comments": [{"owner": {"reputation": 561, "user_id": 4376373, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100006052897811/picture?type=large", "display_name": "Patrick Kelly", "link": "https://stackoverflow.com/users/4376373/patrick-kelly"}, "edited": false, "score": 1, "creation_date": 1496264871, "post_id": 44294657, "comment_id": 75595708, "body": "pragma Export, or the related aspects if you&#39;re working with Ada 2012, are what you&#39;re looking for, at least by my understanding of your goal. You can write a script to generate those exports for you; that&#39;s what I&#39;d do."}, {"owner": {"reputation": 49, "user_id": 8094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ddaae5648b1416c5d0e04d5014763ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/8094246/tony"}, "edited": false, "score": 0, "creation_date": 1496264981, "post_id": 44294657, "comment_id": 75595748, "body": "Sorry for confusion, I mean either C or C++ will do. Preferably C++."}, {"owner": {"reputation": 49, "user_id": 8094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ddaae5648b1416c5d0e04d5014763ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/8094246/tony"}, "reply_to_user": {"reputation": 561, "user_id": 4376373, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100006052897811/picture?type=large", "display_name": "Patrick Kelly", "link": "https://stackoverflow.com/users/4376373/patrick-kelly"}, "edited": false, "score": 0, "creation_date": 1496265511, "post_id": 44294657, "comment_id": 75595954, "body": "@PatrickKelly : Can you please elaborate on how you use the script? I have never used a script before to expose ADA functions to C. Or may be share a simple script. Thanks"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1496266220, "post_id": 44294657, "comment_id": 75596245, "body": "C and C++ are different languages with typically different ABIs and interfaces. The ABIs are also platform-specific. As asked, your question is far too broad. I t does not show any research on your side (apart from some <code>pragma</code> which is not standard. As a sidenote: if Ada was picked for safety reasons, now using C or C++ definitively will break the safe chain. &quot;Nice and neat (and pinted in pink)&quot; are certainly not major preferences in a safety critical environment."}, {"owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1496267813, "post_id": 44294657, "comment_id": 75596854, "body": "@Olaf Since when is <code>pragma export</code> not standard Ada? It can be found in the current standard right here: <a href=\"http://www.ada-auth.org/standards/aarm12_w_tc1/html/AA-J-15-5.html\" rel=\"nofollow noreferrer\">ada-auth.org/standards/aarm12_w_tc1/html/AA-J-15-5.html</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "edited": false, "score": 0, "creation_date": 1496268024, "post_id": 44294657, "comment_id": 75596935, "body": "@SiggiSv: Sorry, I though OP means the C-preprocessor <code>#pragma</code>. That&#39;s the problem with too broad and cross-tagged questions. Anyway, there is something similar required on the C and C++ side, too."}, {"owner": {"reputation": 561, "user_id": 4376373, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100006052897811/picture?type=large", "display_name": "Patrick Kelly", "link": "https://stackoverflow.com/users/4376373/patrick-kelly"}, "edited": false, "score": 0, "creation_date": 1496269814, "post_id": 44294657, "comment_id": 75597553, "body": "@Tony I just mean one you write up. Exactly what language used would be whatever you&#39;re comfortable with. This is too dependent on how you want to expose the functions and procedures, so I can&#39;t give you a generic script. But basically you just need to insert a line after each, with pragma export(stuff...). Exactly like you would manually, but in the script you can do things like yank the name of the procedure, reformat it C++ style, and place the new name in the export."}, {"owner": {"reputation": 49, "user_id": 8094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ddaae5648b1416c5d0e04d5014763ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/8094246/tony"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1496273332, "post_id": 44294657, "comment_id": 75598539, "body": "@olaf The C++ part of the system is also verifiable and certifiable as per applicable safety standards. Its just that some parts of the system have a class of safety requirements that can only be met by Ada. I do understand the ABI interface and have some working set of API calls from C. It&#39;s just not scalable to add 1000 pragma export statements and translate parameters."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1496273667, "post_id": 44294657, "comment_id": 75598623, "body": "@Tony: There is always Python \u2026 just write a small Python prgramm to parse the Ada code and add the pragmas as required (I refrain from using regexpr only; Some guru might provide you a some 100 chars sed construct, but that&#39;s not my thing)."}, {"owner": {"reputation": 22472, "user_id": 40851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwWVj.jpg?s=128&g=1", "display_name": "Simon Wright", "link": "https://stackoverflow.com/users/40851/simon-wright"}, "edited": false, "score": 2, "creation_date": 1496301649, "post_id": 44294657, "comment_id": 75607189, "body": "You might get more traction over on <a href=\"https://groups.google.com/forum/#!forum/comp.lang.ada\" rel=\"nofollow noreferrer\">comp.lang.ada</a>. Here, the question is in danger of being closed: <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>. That said, since the existing Ada is safety-related you probably won\u2019t find awkward things like tagged types, access-to-subprogram, generics in the interface. If noone comes up with a tool, I\u2019d look at making an ASIS-based one: my <a href=\"https://sourceforge.net/projects/asis2xml/\" rel=\"nofollow noreferrer\">ASIS2XML</a> (the release is out of date, get the Code), or there\u2019s one for GNAT (<code>gnat2xml</code>, supported by <code>gnat2xsd</code>) buildable from their ASIS archive."}, {"owner": {"reputation": 49, "user_id": 8094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ddaae5648b1416c5d0e04d5014763ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/8094246/tony"}, "edited": false, "score": 0, "creation_date": 1496324244, "post_id": 44294657, "comment_id": 75623446, "body": "Thanks Simon, I will post the question there too and check out sources you have mentioned."}, {"owner": {"reputation": 3643, "user_id": 608963, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbb0a6e7d0e30d4904a3a22a7398c969?s=128&d=identicon&r=PG&f=1", "display_name": "Shark8", "link": "https://stackoverflow.com/users/608963/shark8"}, "edited": false, "score": 0, "creation_date": 1500505841, "post_id": 44294657, "comment_id": 77372026, "body": "@Tony -- Did you try adding &quot;with Convention =&gt; C_Plus_Plus, Export&quot; to the package heading? (I&#39;m assuming you&#39;re using Ada 2012.) -- I&#39;d like to know if that worked for you."}], "answers": [{"comments": [{"owner": {"reputation": 2330, "user_id": 7237062, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/z4Nky.jpg?s=128&g=1", "display_name": "LoneWanderer", "link": "https://stackoverflow.com/users/7237062/lonewanderer"}, "edited": false, "score": 1, "creation_date": 1497381207, "post_id": 44424742, "comment_id": 76051141, "body": "This is similar to this: <a href=\"https://stackoverflow.com/questions/42938883/interface-ada-dynamic-library-with-java-using-jna-and-adas-interface-c-packages/42938971#42938971\" title=\"interface ada dynamic library with java using jna and adas interface c packages\">stackoverflow.com/questions/42938883/&hellip;</a>. As @Shark8 stated, you can either add the <code>pragma export</code> on the methods you want to expose, or add a routing layer written with <code>pragma export</code> that makes the effective call to Ada procedures/functions. The additionnal layer can be useful is you have some types transformations to do : for isntance, if you have types with discriminents in inputs of your ada services. Since Ada structures can&#39;t always be mapped easily with C/C++"}], "tags": [], "owner": {"reputation": 3643, "user_id": 608963, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbb0a6e7d0e30d4904a3a22a7398c969?s=128&d=identicon&r=PG&f=1", "display_name": "Shark8", "link": "https://stackoverflow.com/users/608963/shark8"}, "is_accepted": false, "score": 1, "last_activity_date": 1496881359, "creation_date": 1496881359, "answer_id": 44424742, "question_id": 44294657, "link": "https://stackoverflow.com/questions/44294657/expose-ada-api-to-c-c-the-scalable-way/44424742#44424742", "title": "Expose ADA API to C/C++ ( the Scalable way )", "body": "<p>You could try adding the <code>Export</code> and <code>Convention =&gt; X</code> aspects to the package if you're using an Ada 2012 compiler; example:</p>\n\n<pre><code>Package K with Export, Convention =&gt; C_Plus_Plus is\n\n    Function A( Input_1, Input_2 : Integer ) return Integer;\n\nEnd K;\n</code></pre>\n\n<p>This actually compiles, though since I don't have any C++ or C mixed-source projects to try this on I can't tell you if the results are strictly-speaking usable from the C++ side.</p>\n\n<p><strong><em>If that doesn't work</em></strong>, perhaps a better method would be to create a package especially for exporting the functions (and types) that will be used on the C++ side.</p>\n\n<pre><code>With\nSystem,\nInterfaces.C.Strings,\nInterfaces.C.Pointers;\n\nPackage K with Convention =&gt; C_Plus_Plus is\n\n    -------------\n    --  TYPES  --\n    -------------\n\n    Type CPP_Window_Handle is Private;\n    Subtype CPP_String is Interfaces.C.Strings.chars_ptr;\n\n    --------------\n    -- MODULES  --\n    --------------\n\n    Package UI_Module is\n        Procedure Set_Title( Window : CPP_Window_Handle; Text : CPP_String )\n        with Export;\n    End UI_Module;\n\nPrivate\n    Package STUB_TYPES is\n        Type Window is tagged null record;\n    End STUB_TYPES;\n    Use STUB_TYPES;\n\n    Type CPP_Window_Handle is not null access Window'Class\n    with Convention =&gt; C_Plus_Plus, Size =&gt; Interfaces.C.int'Size;\n\nEnd K;\n</code></pre>\n\n<p>Implemented as:</p>\n\n<pre><code>Package Body K is\n\n    Package STUB_FUNCTIONS is\n        Procedure Set_Window(Object : in out STUB_TYPES.Window'Class; Text : String) is null;\n        --'\n    End STUB_FUNCTIONS;\n\n    Package Ada_Dependencies renames STUB_FUNCTIONS;\n\n    Package Body UI_Module is\n        Procedure Set_Title( Window : CPP_Window_Handle; Text : CPP_String ) is\n            function Value (Item : CPP_String) return Interfaces.C.char_array\n              renames Interfaces.C.Strings.Value;\n            function Convert(Item     : Interfaces.C.char_array;\n                             Trim_Nul : Boolean := True) return String\n              renames Interfaces.C.To_Ada;\n        Begin\n            Ada_Dependencies.Set_Window(\n              Object =&gt; Window.all,\n              Text   =&gt; Convert( Value( Text ) )\n          );\n        End Set_Title;\n\n    End UI_Module;\n\nEnd K;\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 8094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ddaae5648b1416c5d0e04d5014763ec?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/8094246/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496881359, "creation_date": 1496264679, "last_edit_date": 1496265368, "question_id": 44294657, "link": "https://stackoverflow.com/questions/44294657/expose-ada-api-to-c-c-the-scalable-way", "title": "Expose ADA API to C/C++ ( the Scalable way )", "body": "<p>Recently, I came across a safety critical system that uses only Ada. The system provides about 3 packages with about 200-300 functions in each package as source. </p>\n\n<p>I need to access almost all of these function in another software system (very nice and neat) that is completely written in C/C++.</p>\n\n<p><strong>Goal:</strong> I need to expose these Ada functions to C/C++.</p>\n\n<p>I understand I can use <code>pragma Export()</code> construct to export the functions and interfaces.C package to  convert parameters between C and Ada.</p>\n\n<p>But, I was wondering if there's an easier or more scalable way to do this?</p>\n\n<ol>\n<li>Maybe expose the complete package somehow?</li>\n<li>Or develop an RPC Architecture?</li>\n<li>Or use a tool that creates the C/C++ declarations and Type Conversions?</li>\n</ol>\n\n<p>It would really help if somebody with similar experience could point me in the right direction. </p>\n\n<p>Remember I am <em>not</em> looking for an <a href=\"https://stackoverflow.com/questions/10817349/modern-ada-to-c-c-translator\">Ada to C translator</a></p>\n"}, {"tags": ["c++", "arrays", "memory-management", "unique-ptr"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1496264552, "post_id": 44294601, "comment_id": 75595577, "body": "Don&#39;t use <code>std::unique_ptr</code> for this, use <code>std::vector</code>."}, {"owner": {"reputation": 41, "user_id": 7910372, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a8d5de8b9341fa4c219f64e51694a158?s=128&d=identicon&r=PG&f=1", "display_name": "primeQuestion", "link": "https://stackoverflow.com/users/7910372/primequestion"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1496264634, "post_id": 44294601, "comment_id": 75595609, "body": "@SergeyA what do you mean? I am assigning a 3-dimensional array. How can I use a vector for that?"}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1496264719, "post_id": 44294601, "comment_id": 75595653, "body": "Are you sure you want to have different dimensions of each row/column? Otherwise, you could just allocate <code>depth*rows*cols</code> in one shot."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1496264803, "post_id": 44294601, "comment_id": 75595688, "body": "There are no 3-dimensional arrays in C or C++. What you have is an array of arrays of arrays. The same can be done with vectors of vectors of vectors."}, {"owner": {"reputation": 41, "user_id": 7910372, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a8d5de8b9341fa4c219f64e51694a158?s=128&d=identicon&r=PG&f=1", "display_name": "primeQuestion", "link": "https://stackoverflow.com/users/7910372/primequestion"}, "reply_to_user": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1496265083, "post_id": 44294601, "comment_id": 75595795, "body": "@erenon yes the dimensions are different"}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1496265569, "post_id": 44294601, "comment_id": 75595982, "body": "@primeQuestion: in your example, they are not."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496266482, "post_id": 44294601, "comment_id": 75596343, "body": "I would suggest using a single allocation, your code will be a lot simpler all things considered."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 5, "last_activity_date": 1496265841, "creation_date": 1496265841, "answer_id": 44294904, "question_id": 44294601, "link": "https://stackoverflow.com/questions/44294601/using-a-unique-ptr-to-manage-a-three-dimensional-array/44294904#44294904", "title": "Using a unique_ptr to manage a three dimensional array", "body": "<p>Ostensibly, you could write it like this:</p>\n\n<pre><code>std::unique_ptr&lt;std::unique_ptr&lt;std::unique_ptr&lt;char[]&gt;[]&gt;[]&gt;board = \n    std::make_unique&lt;std::unique_ptr&lt;std::unique_ptr&lt;char[]&gt;[]&gt;[]&gt;(depth);\nfor (int d = 0; d &lt; depth; d++)\n{\n    board[d] = std::make_unique&lt;std::unique_ptr&lt;char[]&gt;[]&gt;(rows);\n    for (int i = 0; i &lt; rows; i++) {\n        board[d][i] = std::make_unique&lt;char[]&gt;(cols);\n        for (int j = 0; j &lt; cols; j++) {\n            board[d][i][j] = 'k';\n        }\n    }\n}\n</code></pre>\n\n<p>And this will more-or-less work the way you expect.</p>\n\n<p>But <strong>Holy Spaghetti Code, Batman!</strong> That is some seriously sloppy code!</p>\n\n<p>You could simplify it like this using <code>std::vector</code> which is a far more natural construct for representing arrays-of-arrays-of-arrays:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;std::vector&lt;char&gt;&gt;&gt; board;\nboard.resize(depth);\nfor (int d = 0; d &lt; depth; d++)\n{\n    board[d].resize(rows);\n    for (int i = 0; i &lt; rows; i++) {\n        board[d][i].resize(cols);\n        for (int j = 0; j &lt; cols; j++) {\n            board[d][i][j] = 'k';\n        }\n    }\n}\n</code></pre>\n\n<p>But given that you're writing what is essentially a 3D Rectangular Matrix, it still doesn't make much sense to write it like this. Instead, let's do this:</p>\n\n<pre><code>size_t get_index(size_t i, size_t j, size_t k, size_t rows, size_t cols, size_t depth) {\n    if(i &gt; rows || j &gt; cols || k &gt; depth) throw std::runtime_error(\"Out of bounds!\");\n    return k * rows * cols + j * rows + i;\n}\n\nsize_t get_size(size_t rows, size_t cols, size_t depth) {\n    return rows * cols * depth;\n}\n\nint main() {\n    size_t rows = 15, cols = 10; depth = 5;\n    std::vector&lt;char&gt; board(get_size(rows, cols, depth));\n    for(size_t d = 0; d &lt; depth; d++) {\n        for(size_t r = 0; r &lt; rows; r++) {\n            for(size_t c = 0; c &lt; cols; c++) {\n                board[get_index(r, c, d, rows, cols, depth)] = 'k';\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>You might consider wrapping all of this up into a <code>Matrix</code> class which handles all this translation on its own. Then you'd be able to write code that looks like this:</p>\n\n<pre><code>int main() {\n    size_t rows = 15, cols = 10; depth = 5;\n\n    Matrix&lt;char&gt; board(rows, cols, depth);\n    for(size_t d = 0; d &lt; board.get_depth(); d++) {\n        for(size_t r = 0; r &lt; board.get_rows(); r++) {\n            for(size_t c = 0; c &lt; board.get_cols(); c++) {\n                board(r, c, d) = 'k';\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Which is far cleaner, far easier to maintain, and if you make your <code>Matrix</code> class generic, reusable for other things.</p>\n"}], "owner": {"reputation": 41, "user_id": 7910372, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a8d5de8b9341fa4c219f64e51694a158?s=128&d=identicon&r=PG&f=1", "display_name": "primeQuestion", "link": "https://stackoverflow.com/users/7910372/primequestion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 44294904, "answer_count": 1, "score": 0, "last_activity_date": 1496265841, "creation_date": 1496264479, "last_edit_date": 1496264585, "question_id": 44294601, "link": "https://stackoverflow.com/questions/44294601/using-a-unique-ptr-to-manage-a-three-dimensional-array", "title": "Using a unique_ptr to manage a three dimensional array", "body": "<p>I have assigned a three dimensional using the following way:</p>\n\n<pre><code>board = new char**[depth];\n    for (int d = 0; d &lt; depth; d++)\n    {\n        board[d] = new char*[rows];\n        for (int i = 0; i &lt; rows; i++) {\n            board[d][i] = new char[cols];\n            for (int j = 0; j &lt; cols; j++) {\n                board[d][i][j] = 'k';\n            }\n        }\n    }\n</code></pre>\n\n<p>Now I want to use a unique_ptr to manage it, but I don't know how to initiate such a structure using the interface that unique_ptr exposes. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 4, "creation_date": 1496264432, "post_id": 44294565, "comment_id": 75595523, "body": "You\u2019re trying to use an uninitialized variable. If you want zero, initialize it with <code>double wage = 0</code>."}, {"owner": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1496264487, "post_id": 44294565, "comment_id": 75595546, "body": "@Ryan I know I am using an uninitialized variable, but I don&#39;t understand why this happened?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1496264531, "post_id": 44294565, "comment_id": 75595569, "body": "Because uninitialised variables do not necessarily contain zero - probably they won&#39;t."}, {"owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "edited": false, "score": 0, "creation_date": 1496264648, "post_id": 44294565, "comment_id": 75595615, "body": "You should consider learning about <code>execution stack</code> and how  it grows, shrinks over a period of the program&#39;s execution"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1496265152, "post_id": 44294565, "comment_id": 75595829, "body": "<code>-Wall -Wextra -Werror</code> repeat after me <code>-Wall -Wextra -Werror</code>  good, now again: <code>-Wall -Wextra -Werror</code> well done! one more time: <code>-Wall -Wextra -Werror</code> great! now never forget it!"}, {"owner": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1496265217, "post_id": 44294565, "comment_id": 75595854, "body": "@bolov clapping"}], "answers": [{"comments": [{"owner": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "edited": false, "score": 0, "creation_date": 1496264572, "post_id": 44294603, "comment_id": 75595587, "body": "So it is given with a random value here?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "edited": false, "score": 0, "creation_date": 1496264639, "post_id": 44294603, "comment_id": 75595611, "body": "@Kulbear &quot;Random&quot; has a meaning in this context I&#39;m hesitant to endorse the use of. But yes, the value is not guaranteed to have any particular default value unless you explicitly set it to a value in code, or explicitly default-initialize it like <code>double wage{};</code>."}, {"owner": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "edited": false, "score": 0, "creation_date": 1496264694, "post_id": 44294603, "comment_id": 75595645, "body": "OK, it makes sense. So I declare this double and then there is an address assigned to this variable, but without giving an initialized value, it is containing the previous byte value from the memory stack right?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "edited": false, "score": 0, "creation_date": 1496264749, "post_id": 44294603, "comment_id": 75595665, "body": "@Kulbear Yup! Some compilers, in DEBUG mode, will add instructions to clear the value of the variable before any instructions otherwise make use of it, but you should never rely on that behavior!"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1496264578, "last_edit_date": 1496264578, "creation_date": 1496264494, "answer_id": 44294603, "question_id": 44294565, "link": "https://stackoverflow.com/questions/44294565/declare-a-double-give-it-a-value-0-but-print-result-changes-unexpectedly/44294603#44294603", "title": "Declare a double give it a value 0 but print result changes unexpectedly", "body": "<blockquote>\n<pre><code>int main ()\n{\n    double wage;\n    std::cout &lt;&lt; wage &lt;&lt; std::endl;//Undefined Behavior!\n    return 0;\n}\n</code></pre>\n</blockquote>\n\n<p>You haven't initialized <code>wage</code> with a value, which means that its value will be whatever happened to occupy those bytes before your program entered this stack frame. If you attempt to <em>use</em> the value (in any way other than writing to it) the program will read that garbage value and interpret it as a <code>double</code>. In some situations, that memory will be initialized to 0. In other situations, it could be initialized to literally anything. If you want to guarantee that you get a value of <code>0</code>, you need to explicitly set it as such:</p>\n\n<pre><code>int main ()\n{\n    double wage = 0;\n    std::cout &lt;&lt; wage &lt;&lt; std::endl;//Perfectly Defined Behavior!\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "edited": false, "score": 0, "creation_date": 1496265015, "post_id": 44294651, "comment_id": 75595763, "body": "It&#39;s so bad to write a lot JavaScript recently. Just jk."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1496264962, "last_edit_date": 1496264962, "creation_date": 1496264653, "answer_id": 44294651, "question_id": 44294565, "link": "https://stackoverflow.com/questions/44294565/declare-a-double-give-it-a-value-0-but-print-result-changes-unexpectedly/44294651#44294651", "title": "Declare a double give it a value 0 but print result changes unexpectedly", "body": "<p>The behaviour on outputting (i.e. reading) the value of an uninitialised double type variable is undefined. It's pointless trying to account for the output - you can always check the generated assembly which might yield some clues as to what the compiler has done.</p>\n\n<p>The compound assignment in the second snippet is valid and the two numbers are concatenated in the final output.</p>\n\n<p>Some languages (e.g. various incarnations of BASIC) do zero initialise variables, but C++ is not one of them.</p>\n"}], "owner": {"reputation": 771, "user_id": 6670143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/adSzx.jpg?s=128&g=1", "display_name": "Kulbear", "link": "https://stackoverflow.com/users/6670143/kulbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "closed_date": 1496264578, "accepted_answer_id": 44294603, "answer_count": 2, "score": 0, "last_activity_date": 1496264962, "creation_date": 1496264302, "last_edit_date": 1496264442, "question_id": 44294565, "link": "https://stackoverflow.com/questions/44294565/declare-a-double-give-it-a-value-0-but-print-result-changes-unexpectedly", "closed_reason": "Duplicate", "title": "Declare a double give it a value 0 but print result changes unexpectedly", "body": "<p>I barely start my c++ learning. I have met a strange case that I cannot understand.\nIt's about declaring and printing a <code>double</code> variable.</p>\n\n<p>My first piece of code looks like below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main ()\n{\n    double wage;\n    std::cout &lt;&lt; wage &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>After I compile this file with <code>g++</code> and run it, there is a <code>0</code> printed in my terminal, which is fine. Then I keep adding lines of code and now it looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main ()\n{\n    double wage;\n    std::cout &lt;&lt; wage &lt;&lt; std::endl;\n    double salary = wage = 9999.99;\n    std::cout &lt;&lt; wage &lt;&lt; std::endl;\n    std::cout &lt;&lt; salary &lt;&lt; std::endl;\n    std::cout &lt;&lt; wage\n              &lt;&lt; salary &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>However, when I try to compile and run this program again, a very strange decimal appears. </p>\n\n<pre><code>$ cpp-directory ./a.out\n2.122e-314\n9999.99\n9999.99\n9999.999999.99\n</code></pre>\n\n<p>As you can see from the result, there is a <code>2.122e-314</code>. From my perspective, it should print 0 on the first line rather than this number... I am not familiar with c++ stuff but is it something like a memory leak or so...</p>\n\n<p>Can someone give me a tip or an explanation on this?\nThanks.</p>\n\n<p>Note:</p>\n\n<pre><code>$ ~ g++ --version\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n"}, {"tags": ["c++", "g++", "extern"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1496264389, "post_id": 44294486, "comment_id": 75595501, "body": "Both are not mangled."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7747610"}, "edited": false, "score": 0, "creation_date": 1496267783, "post_id": 44294636, "comment_id": 75596841, "body": "excactly, this is what id like to to, i use 3th party c code, that has functions __weak declaired, where im supposed to implement the function, and hope it will be linked correctly."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1496264932, "last_edit_date": 1496264932, "creation_date": 1496264616, "answer_id": 44294636, "question_id": 44294486, "link": "https://stackoverflow.com/questions/44294486/extern-c-usage-placement-of-tag/44294636#44294636", "title": "extern &quot;C&quot; usage (placement of tag)", "body": "<p>There is no difference.  Remember that <code>#include</code> is handled by the preprocessor; the compiler sees exact same code in both cases when it compiles the preprocessed main.cpp.</p>\n\n<p>P.S. Of course from code style/maintainability perspective you don't want to wrap <code>#include</code> in <code>extern \"C\"</code>. That is mostly reserved for special cases e.g. when you need to include a 3rd party pure C header without modifying it.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496265968, "post_id": 44294650, "comment_id": 75596142, "body": "Isn&#39;t the whole reason for this because you want to use the same object and header with both C and C++ compilers? Why else would you need C linkage?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1496267410, "post_id": 44294650, "comment_id": 75596713, "body": "Did you mean &quot;expected to be seen by a C compiler&quot; in your last sentence?  AFAIK it&#39;s the C compiler you need to hide those <code>extern &quot;C&quot;</code> directives from, not the C++ compiler."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1496693108, "post_id": 44294650, "comment_id": 75754571, "body": "@MilesBudnek, you are absolutely correct, thanks for noticing. Fixed."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1496693093, "last_edit_date": 1496693093, "creation_date": 1496264646, "answer_id": 44294650, "question_id": 44294486, "link": "https://stackoverflow.com/questions/44294486/extern-c-usage-placement-of-tag/44294650#44294650", "title": "extern &quot;C&quot; usage (placement of tag)", "body": "<p>Yes, there is a difference. First example is an example of a terrible code, while second is a proper way of doing this.</p>\n\n<p>To understand why I am saying so, consider how many translation units are potentially including this header. Because if you know for a fact there will only be one, you do not even need to worry about mangling.</p>\n\n<p>However, if the <code>c_header</code> is also expected to be seen by C compiler, those <code>extern \"C\"</code> directives need to be hidden behind <code>#ifdef ___cplusplus</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7747610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1496693093, "creation_date": 1496264061, "question_id": 44294486, "link": "https://stackoverflow.com/questions/44294486/extern-c-usage-placement-of-tag", "title": "extern &quot;C&quot; usage (placement of tag)", "body": "<p>is there a difference between the following:</p>\n\n<pre><code>// c_header.h\nvoid foo(void);\n// main.cpp\nextern \"C\" {\n#include \"c_header.h\"\n}\nvoid main(void)\n{\n    foo();\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// c_header.h\nextern \"C\" {\nvoid foo(void);\n}\n// main.cpp\n#include \"c_header.h\"\nvoid main(void)\n{\n    foo();\n}\n</code></pre>\n\n<p>are both function calls to foo not c++ mangled?</p>\n"}, {"tags": ["c++", "class", "templates", "struct"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496263682, "post_id": 44294390, "comment_id": 75595188, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1496264638, "creation_date": 1496264638, "answer_id": 44294645, "question_id": 44294390, "link": "https://stackoverflow.com/questions/44294390/trying-to-get-a-template-to-work-for-an-element-of-a-struct-in-c/44294645#44294645", "title": "Trying to get a template to work for an element of a struct in c++", "body": "<blockquote>\n  <p>I'm templating the struct, but unsure if should do the same for the class.</p>\n</blockquote>\n\n<p>The answer is, \"most likely yes\".</p>\n\n<p>Your hope of being able to use</p>\n\n<pre><code>typedef Contacto* ContactPtr;\n</code></pre>\n\n<p>to avoid making <code>Lista</code> a class template is based on incomplete understanding of how templates work. The above is not valid C++ code, as your compiler has pointed out.</p>\n\n<p><code>Contact</code> is a class template, not a class. Hence you cannot create a <code>typedef</code> for <code>Contact*</code>. You can use:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing ContactPtr = Contacto&lt;T&gt;*;\n</code></pre>\n\n<p>But then, you will have to use <code>ContactPtr&lt;T&gt;</code> where <code>T</code> is a valid type.</p>\n\n<p>In order to be able to use <code>Contact</code> or <code>ContactPtr</code> in <code>Lista</code>, you will need a template parameter. The template parameter could be hard coded to a known type or you can make <code>Lista</code> a class template. In the latter case, you can use the template parameter of <code>Lista</code> for using <code>Contacto</code> or <code>ContactPtr</code>.</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Lista\n{\n   ...\n   Contacto&lt;T&gt;* Cabeza;\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Lista\n{\n   ...\n   ContactPtr&lt;T&gt; Cabeza;\n};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8094214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29548d5230fa9c409943ce7aea622396?s=128&d=identicon&r=PG&f=1", "display_name": "acarana", "link": "https://stackoverflow.com/users/8094214/acarana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496264638, "creation_date": 1496263634, "question_id": 44294390, "link": "https://stackoverflow.com/questions/44294390/trying-to-get-a-template-to-work-for-an-element-of-a-struct-in-c", "title": "Trying to get a template to work for an element of a struct in c++", "body": "<p>This is my first time using templates. I use the template only for an element of the struct.</p>\n\n<pre><code>    using namespace std;\n    namespace lulz{\n\n    template&lt;typename T&gt;\n    struct Contacto {\n    string Cname;\n    string Apellidos;\n    string NumTel;\n    string email;\n    T sexo;\n    Contacto *Proximo;\n    };\n    typedef Contacto* ContactPtr;\n\n\n    class Lista {\n    public:\n    Lista();\n    ~Lista();\n    bool ContactoVacio(ContactPtr Contact1);  \n    void InsertContact(ContactPtr&amp; Contact1, Contacto Temp); \n    void BuscarContact(ContactPtr Contact1, string Name, string Lastname);\n    void Display(ContactPtr Contact1);\n    void Deletes(ContactPtr Contact1);\n\n    ContactPtr Cabeza;\n    };\n</code></pre>\n\n<p>I'm templating the struct, but unsure if should do the same for the class. I don't call the element as a parameter in any of the functions so I'd guess not. I access the struct by the typedef.</p>\n\n<pre><code>    using namespace std;\n    using namespace lulz;\n\n    int main(){\n\n    Lista cabezalista;\n    Contacto Temp;\n    ContactPtr Cabeza;\n    string name, lastname;\n    int Choice;\n    ifstream entrada;\n    Opening(entrada);\n\n    Contacto&lt;string&gt; sexo;\n\n    while(!entrada.eof())\n    {\n    entrada &gt;&gt; Temp;\n    cabezalista.InsertContact(Cabeza,Temp);\n    }\n</code></pre>\n\n<p>In file included from main.cpp:1:<br>\nProyecto.h:27: error: expected initializer before '*' token<br>\nProyecto.h:35: error: 'ContactPtr' has not been declared<br>\nProyecto.h:37: error: 'ContactPtr' has not been declared<br>\nProyecto.h:37: error: 'Contacto' is not a type<br>\nProyecto.h:40: error: 'ContactPtr' has not been declared<br>\nProyecto.h:42: error: 'ContactPtr' has not been declared<br>\nProyecto.h:44: error: 'ContactPtr' has not been declared<br>\nProyecto.h:47: error: 'ContactPtr' does not name a type<br>\nProyecto.h:52: error: 'Contacto' is not a type<br>\nProyecto.h:54: error: missing template arguments before 'Temp'    </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 2, "creation_date": 1496263644, "post_id": 44294210, "comment_id": 75595171, "body": "The accepted answer to the question you reference (which quotes the standard) explicitly says two cases where this doesn&#39;t work.  Your example is the second case: A temporary bound to a reference parameter in a function call.  So the answer is no."}], "answers": [{"comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1496263841, "post_id": 44294404, "comment_id": 75595238, "body": "In the linked answer, one of the comments refers to <a href=\"https://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/\" rel=\"nofollow noreferrer\">this GOTW</a> which says it&#39;s safe to bind a const-ref to a temporary return value. In my case, the fact that the return value is a temporary <i>from a parameter</i> makes this not apply?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1496263978, "post_id": 44294404, "comment_id": 75595303, "body": "@SteveLorimer: Assuming you&#39;re talking about Q1 in that link, <code>f</code> returns a <code>string</code>, not a reference. Your <code>get_or</code> returns a reference, and the referent of that reference does not get its lifetime extended by binding it to more references."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1496263690, "creation_date": 1496263690, "answer_id": 44294404, "question_id": 44294210, "link": "https://stackoverflow.com/questions/44294210/does-this-const-reference-have-its-life-preserved/44294404#44294404", "title": "Does this const reference have its life preserved?", "body": "<p>You passed the string through too many references.</p>\n\n<p>Binding the temporary string to the <code>def</code> parameter of <code>get_or</code> extends the lifetime of the string to the end of the full expression containing the function call, but binding <code>def</code> to the return value of <code>get_or</code> and binding the return value of <code>get_or</code> to <code>foo</code> do not extend the lifetime further. The string is dead by the time you try to print it.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1496268678, "last_edit_date": 1496268678, "creation_date": 1496264153, "answer_id": 44294520, "question_id": 44294210, "link": "https://stackoverflow.com/questions/44294210/does-this-const-reference-have-its-life-preserved/44294520#44294520", "title": "Does this const reference have its life preserved?", "body": "<p><code>const&amp;</code> won't extend lifetimes in that situation. Consider the <a href=\"http://ideone.com/BkysHs\" rel=\"nofollow noreferrer\">example here</a> that constructs a temporary and then attempts to print it: it's using the same constructs as your code, but I've altered it to make object construction and destruction more explicit to the user.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct reporting {\n    reporting() { std::cout &lt;&lt; \"Constructed\" &lt;&lt; std::endl;}\n    ~reporting() { std::cout &lt;&lt; \"Destructed\" &lt;&lt; std::endl;}\n    reporting(reporting const&amp;) { std::cout &lt;&lt; \"Copy-Constructed\" &lt;&lt; std::endl;}\n    reporting(reporting &amp;&amp;) { std::cout &lt;&lt; \"Move-Constructed\" &lt;&lt; std::endl;}\n    reporting &amp; operator=(reporting const&amp;) { std::cout &lt;&lt; \"Copy-Assigned\" &lt;&lt; std::endl; return *this;}\n    reporting &amp; operator=(reporting &amp;&amp;) { std::cout &lt;&lt; \"Move-Assigned\" &lt;&lt; std::endl; return *this;}\n\n    void print() const {std::cout &lt;&lt; \"Printing.\" &lt;&lt; std::endl;}\n};\n\nconst reporting&amp; get_or(const reporting&amp; def)\n{\n    return def;\n}\n\nint main()\n{\n    const reporting&amp; foo = get_or(reporting{});\n\n    foo.print();\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Constructed\nDestructed\nprinting.\n</code></pre>\n\n<p>Note how the object is destroyed before <code>printing.</code> is displayed.</p>\n\n<p>You might be wondering why the code still completes with no visible errors: it's the result of Undefined Behavior. The object in question doesn't exist, but because it doesn't depend on state to invoke its method, the program happens to not crash. Other, more complicated examples should carry no guarantee that this will work without crashing or causing other, unexpected behavior.</p>\n\n<p>Incidentally, things are a little different if the temporary is <a href=\"http://ideone.com/2k1qPZ\" rel=\"nofollow noreferrer\">bound directly to the <code>const&amp;</code></a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct reporting {\n    reporting() { std::cout &lt;&lt; \"Constructed\" &lt;&lt; std::endl;}\n    ~reporting() { std::cout &lt;&lt; \"Destructed\" &lt;&lt; std::endl;}\n    reporting(reporting const&amp;) { std::cout &lt;&lt; \"Copy-Constructed\" &lt;&lt; std::endl;}\n    reporting(reporting &amp;&amp;) { std::cout &lt;&lt; \"Move-Constructed\" &lt;&lt; std::endl;}\n    reporting &amp; operator=(reporting const&amp;) { std::cout &lt;&lt; \"Copy-Assigned\" &lt;&lt; std::endl; return *this;}\n    reporting &amp; operator=(reporting &amp;&amp;) { std::cout &lt;&lt; \"Move-Assigned\" &lt;&lt; std::endl; return *this;}\n\n    void print() const {std::cout &lt;&lt; \"printing.\" &lt;&lt; std::endl;}\n};\n\nconst reporting&amp; get_or(const reporting&amp; def)\n{\n    return def;\n}\n\nint main()\n{\n    const reporting&amp; foo = reporting{};\n\n    foo.print();\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Constructed\nprinting.\nDestructed\n</code></pre>\n\n<p>See how the object isn't destroyed until after it is used. In this situation, the object survives until the end of scope.</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1496265859, "creation_date": 1496265859, "answer_id": 44294909, "question_id": 44294210, "link": "https://stackoverflow.com/questions/44294210/does-this-const-reference-have-its-life-preserved/44294909#44294909", "title": "Does this const reference have its life preserved?", "body": "<p>The \"temporary\" in question is the <code>std::string</code>-object created when calling <code>get_or</code> with a parameter of type <code>const char*</code>. The lifetime of this temporary object is limited with the end of function <code>get_or</code>, and the fact that you return a reference to this temporary and assign it afterwards does not prolong the lifetime. See the following code which uses a simple \"custom\" string class, which <code>cout</code>s construction and destruction:</p>\n\n<pre><code>class MyString {\npublic:\n    MyString (const char* str) {\n        m_str = strdup(str);\n        cout &lt;&lt; \"constructor MyString - '\" &lt;&lt; m_str &lt;&lt; \"'\" &lt;&lt; endl;\n    }\n    ~MyString() {\n        cout &lt;&lt; \"destructor MyString - '\" &lt;&lt; m_str &lt;&lt; \"'\" &lt;&lt; endl;\n        free(m_str);\n    }\n    char *m_str;\n};\n\nstruct Foo\n{\n    const MyString&amp; get_or(const MyString&amp; def)\n    {\n        cout &lt;&lt; \"Foo::get_or with '\" &lt;&lt; def.m_str &lt;&lt; \"'\" &lt;&lt; endl;\n        return def;\n    }\n};\n\nint main()\n{\n    Foo f;\n    const MyString&amp; foo = f.get_or(\"hello world\");\n    cout &lt;&lt; \"usage of foo?\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>constructor MyString - 'hello world'\nFoo::get_or with 'hello world'\ndestructor MyString - 'hello world'\nusage of foo?\n</code></pre>\n\n<p>Note that the destructor is called before you will have the chance to use <code>foo</code>.</p>\n\n<p>The situation is different if you assign a reference to a temporary <em>directly</em>. Again, the lifetime is until the end of the function <code>main</code>, but it will be used in <code>main</code> and not in any function calling <code>main</code>:</p>\n\n<pre><code>const MyString&amp; foo2 = MyString(\"hello world2\");\ncout &lt;&lt; \"usage of foo...\" &lt;&lt; endl;\n</code></pre>\n\n<p>Then the output will be:</p>\n\n<pre><code>constructor MyString - 'hello world2'\nusage of foo...\ndestructor MyString - 'hello world2'\n</code></pre>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 2, "accepted_answer_id": 44294520, "answer_count": 3, "score": 8, "last_activity_date": 1496268678, "creation_date": 1496262886, "question_id": 44294210, "link": "https://stackoverflow.com/questions/44294210/does-this-const-reference-have-its-life-preserved", "title": "Does this const reference have its life preserved?", "body": "<p>I have found <a href=\"https://stackoverflow.com/a/2784304/955273\">this answer</a> to the question <a href=\"https://stackoverflow.com/questions/2784262/does-a-const-reference-prolong-the-life-of-a-temporary\">\"Does a const reference prolong the life of a temporary?\"</a>, which states:</p>\n\n<blockquote>\n  <p>Only <em>local</em> <code>const</code> references prolong the lifespan.</p>\n</blockquote>\n\n<p>I'm afraid my standardese is not up to scratch to know whether <code>foo</code>, below, is a local const reference or not.</p>\n\n<p>Does my <code>const std::string&amp; foo</code> below prolong the lifetime of the temporary <code>std::string</code> function argument created in the call to <code>get_or</code>, or do I have a dangling reference?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/optional.hpp&gt;\n\nstruct Foo\n{\n    const std::string&amp; get_or(const std::string&amp; def)\n    {\n        return str ? str.get() : def;\n    }\n\n    boost::optional&lt;std::string&gt; str;\n};\n\nint main()\n{\n    Foo f;\n    const std::string&amp; foo = f.get_or(\"hello world\");\n\n    std::cout &lt;&lt; foo &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7953556"}, "edited": false, "score": 0, "creation_date": 1497029081, "post_id": 44294209, "comment_id": 75923750, "body": "Can anyone help me with small example this is the 8th days still no response please help ?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7953556"}, "edited": false, "score": 1, "creation_date": 1496279033, "post_id": 44296658, "comment_id": 75599840, "body": "Can you please show a small example.i feel it like even creating a thread will cause a problem since we don&#39;t have a control on the event received because more than 100 or 1000 can be received at a time."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1496276998, "creation_date": 1496276998, "answer_id": 44296658, "question_id": 44294209, "link": "https://stackoverflow.com/questions/44294209/updating-data-base-record-only-after-waiting-for-20-sec-so-the-maximum-record-ca/44296658#44296658", "title": "Updating data base record only after waiting for 20 sec so the maximum record can be received", "body": "<p>You need multiple threads calling <code>RecordChangedEvent</code>.  If you only use one thread, that thread will block for 20 seconds before returning, getting the next event, then calling <code>RecordChangedEvent</code> again (where it will wait for 20 seconds again).  So you need at least one more thread to handle events while the first thread is sleeping.</p>\n\n<p>Once you have multiple threads, you can still run into problems.  Your <code>lock</code> variable is not thread safe.  There is the remote possibility that two threads can enter the <code>if</code> with the lock at the same time.  Also, there is no guarantee that a change to <code>lock</code> in one thread will be immediately visible in another.  You should use a standard lock object instead.</p>\n\n<p>Another source of problems is that your use of <code>changed.list</code> here is unsynchronized, since you're reading from it (either to copy it to pass to <code>AddRecord</code> or within <code>AddRecord</code> if you pass it in by reference) while elsewhere in your program another thread can be trying to add a new item to the list.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7953556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1496276998, "creation_date": 1496262884, "last_edit_date": 1496264616, "question_id": 44294209, "link": "https://stackoverflow.com/questions/44294209/updating-data-base-record-only-after-waiting-for-20-sec-so-the-maximum-record-ca", "title": "Updating data base record only after waiting for 20 sec so the maximum record can be received", "body": "<p>Updating data base record only after waiting for 20 sec so the maximum record can be received.</p>\n\n<p>When a  student record is added from a tool(A tool which adds new student details to the data base) will send an Event ie RecordChangedEvent and this tool can add many records at same time.</p>\n\n<p><strong>Note :when  RecordChangedEvent is received i have to make a call to changed.list to get the newly added student record</strong></p>\n\n<p>Let say first time I added 200 records from  tools and tools send  200 <strong>RecordChangedEvent</strong> but here I don't want to receive 200 events rather I will delay by 20 sec  and ignore which comes during this delay. </p>\n\n<p>After coming back from delay I must  call on <strong>changed.list</strong> which will add all the newly  added records which came when it was in 20 sec delay and add them all in a single go.</p>\n\n<p>My problem is that I am getting 200 RecordChangedEvent and it is delayed by 200*20 sec (which is bad). I want to ignore all the events when it is on delay and when it come back after delay just get the update list from  <strong>changed.list</strong></p>\n\n<p>Below is my approach (inefficient)</p>\n\n<pre><code>RecordChangedEvent(void)\n{\n    static bool lock = false;\n    bool updateNewRecord = false;\n\n    // delaying for 20 sec when first event received so that max record can be received\n    if(!lock)  \n    {\n        lock = true;\n        std::this_thread::sleep_for(std::chrono::seconds(20));\n        updateNewRecord = true;  \n    }\n    if(updateNewRecord)\n    {\n        // adding after 20 sec delay changed.list will have all the updated received records within 20 seconds                \n        AddedRecord(changed.list);       \n        lock = false;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "llvm"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1496565965, "post_id": 44294195, "comment_id": 75706568, "body": "Because sources are .c / .cc /.cpp files. Headers are not considered sources which the user has to add."}, {"owner": {"reputation": 1542, "user_id": 443136, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/96f1ca62e16935890751ea3b4d7d84c8?s=128&d=identicon&r=PG", "display_name": "Valerio Santinelli", "link": "https://stackoverflow.com/users/443136/valerio-santinelli"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1496578603, "post_id": 44294195, "comment_id": 75709850, "body": "Fair enough. I thought I might be using the compile_commands.json to extract headers information"}], "owner": {"reputation": 1542, "user_id": 443136, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/96f1ca62e16935890751ea3b4d7d84c8?s=128&d=identicon&r=PG", "display_name": "Valerio Santinelli", "link": "https://stackoverflow.com/users/443136/valerio-santinelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496262808, "creation_date": 1496262808, "question_id": 44294195, "link": "https://stackoverflow.com/questions/44294195/cmake-isnt-adding-all-the-files-of-a-project-to-the-compile-commands-json-datab", "title": "cmake isn&#39;t adding all the files of a project to the compile_commands.json database", "body": "<p>I'm running cmake version 3.8.1</p>\n\n<p>I've added <code>set( CMAKE_EXPORT_COMPILE_COMMANDS ON )</code> to my main CMakeLists.txt so that it created the <code>compile_commands.json</code> database.</p>\n\n<p>For some unknown reason headers that are in a list like this:</p>\n\n<pre><code>set(INCLUDE_DIRECTORIES \n    \"/Users/Shared/Epic Games/UE_4.15/Engine/Source\"\n...\n)\ninclude_directories(${INCLUDE_DIRECTORIES})\n</code></pre>\n\n<p>are missing in that JSON file. Is there any good reason for such behavior?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1496262837, "post_id": 44294121, "comment_id": 75594814, "body": "Related <a href=\"https://stackoverflow.com/q/14935722/1708801\">Does initialization entail lvalue-to-rvalue conversion? Is <code>int x = x;</code> UB?</a> and <a href=\"https://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14?</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1496262913, "post_id": 44294121, "comment_id": 75594850, "body": "The <code>int i = i;</code> is supposed to suppress warnings about using uninitialized variables, but it uses an uninitialized variable to initialize the variable, which isn&#39;t actually an improvement.  The <code>int &amp;p = p;</code> looks most odd; I&#39;m surprised that compiles at all."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496263101, "post_id": 44294121, "comment_id": 75594941, "body": "Also see <a href=\"https://stackoverflow.com/q/42365507/1708801\">Does this self-assignment do something sensible?</a> I comment there <a href=\"https://stackoverflow.com/questions/42365507/does-this-self-assignment-do-something-sensible/42365867#comment71916609_42365507\">clang considers this idomatic way to silence unused variable warning</a>"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1496263130, "post_id": 44294121, "comment_id": 75594953, "body": "I see two questions here.  (1) Why is <code>i</code> a defined variable when it appears in an initializer in the statement that defines <code>i</code>?  and (2) Why does C++ allow an uninitialized variable to be used in an initializer (or, in any other place for that matter.)?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1496266001, "post_id": 44294121, "comment_id": 75596152, "body": "@JonathanLeffler Why shouldn&#39;t it compile? <code>p</code> is in scope for the initializer, just as <code>i</code> was for <code>int i = i;</code>.  It causes undefined behaviour (binding a reference to an lvalue that does not denote an object)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496266617, "post_id": 44294121, "comment_id": 75596390, "body": "@M.M: As I said, it looks odd to me \u2014 that means I don&#39;t know why it is compiling, but I&#39;m not sure how to articulate it.  Mainly, <code>p</code> is a reference to an <code>int</code>, which is not an <code>int</code>, so I would expect it to fail to compile, but I stand to be proved wrong by compilers or standards.  I&#39;ll remain surprised that anyone would bother to think of trying it \u2014 I&#39;ll remain surprised that it is allowed at all by the standard \u2014 I won&#39;t be surprised to find that I&#39;m simply not aware of a nuance of some sort that lets it through,"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1496266688, "post_id": 44294121, "comment_id": 75596415, "body": "@JonathanLeffler well there&#39;s no rule specifically disallowing it; the same rules that allow <code>int &amp;p = q;</code> and <code>int &amp;r = p;</code> allow <code>int &amp;p = p</code>,  where <code>q</code> is an expression of type <code>int</code> and category <i>lvalue</i>.  A variable is in scope as soon as its declarator is complete (i.e. before any initializer), and <code>int &amp;p</code> means that <code>p</code> has type <code>int</code> and category <i>lvalue</i>."}], "answers": [{"comments": [{"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1496264443, "post_id": 44294518, "comment_id": 75595528, "body": "OK, but <code>int i=x;</code> is <i>not</i> syntactically correct if <code>x</code> has not previously been declared, so why is the statement <code>int i=i;</code> treated as correct?  I.e., what was the reason for making the declaration of <code>i</code> visible <i>inside</i> the statement that declares <code>i</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1496264678, "post_id": 44294518, "comment_id": 75595637, "body": "@jameslarge: <code>i</code> is complete (but uninitialized) at the end of <code>int i</code>; the <code>= i;</code> is referencing a defined (but uninitialized) variable."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1496265486, "post_id": 44294518, "comment_id": 75595948, "body": "It&#39;s logically equivalent to:  int i; i=i;"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1496268658, "post_id": 44294518, "comment_id": 75597139, "body": "@jameslarge One possible reason would be to allow initializing a variable with a return value of a static function from its own class: <code>LongClassName x = x.static_func();</code> instead of <code>LongClassName x = LongClassName::static_func()</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1496264767, "last_edit_date": 1496264767, "creation_date": 1496264148, "answer_id": 44294518, "question_id": 44294121, "link": "https://stackoverflow.com/questions/44294121/self-assignment-of-variable-in-its-definition/44294518#44294518", "title": "Self-assignment of variable in its definition", "body": "<p>Just because the compiler accepts it (syntactically valid code) does <em>not</em> mean that it has well defined behaviour.</p>\n\n<p>The compiler is <em>not required</em> to diagnose all cases of Undefined Behaviour or other classes of problems.\nThe standard gives it pretty free hands to accept and translate broken code, on the assumption that if the results were to be undefined or nonsensical the programmer would not have written that code.</p>\n\n<p>So; the absense of warnings or errors from your compiler does not <em>in any way</em> prove that your program has well defined behaviour.\nIt is <em>your</em> responsibility to follow the rules of the language.\nThe compiler usually tries to help you by pointing out obvious flaws, but in the end it's on <em>you</em> to make sure your program makes sense.</p>\n\n<p>And something like <code>int i = i;</code> does not make sense but is <em>syntactically</em> correct, so the compiler may or may not warn you, but in any case is within its rights to just generate garbage (and not tell you about it) because you broke the rules and invoked Undefined Behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1496267697, "last_edit_date": 1496267697, "creation_date": 1496267327, "answer_id": 44295205, "question_id": 44294121, "link": "https://stackoverflow.com/questions/44294121/self-assignment-of-variable-in-its-definition/44295205#44295205", "title": "Self-assignment of variable in its definition", "body": "<p>I guess the gist of your question is about why the second identifier is recognized as identifying the same object as the first, in <code>int i = i;</code> or <code>int &amp;p = p;</code></p>\n\n<p>This is defined in [basic.scope.pdecl]/1 of the C++14 standard:</p>\n\n<blockquote>\n  <p>The point of declaration for a name is immediately after its complete declarator and before its initializer (if any), except as noted below. [Example:</p>\n\n<pre><code>unsigned char x = 12;\n{ unsigned char x = x; }\n</code></pre>\n  \n  <p>Here the second <code>x</code> is initialized with its own (indeterminate) value. \u2014end example ]</p>\n</blockquote>\n\n<p>The semantics of these statements are covered by other threads:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/14935722/1708801\">Is <code>int x = x;</code> UB?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/40692129/why-can-a-const-class-be-initialized-to-itself/40692203#40692203\">Why can a Class&amp; be initialized to itself?</a></li>\n</ul>\n\n<p>Note - the quoted example differs in semantics from <code>int i = i;</code> because it is not UB to evaluate an uninitialized <code>unsigned char</code>, but is UB to evaluate an uninitialized <code>int</code>.</p>\n\n<p>As noted on the linked thread, g++ and clang can give warnings when they detect this.</p>\n\n<hr>\n\n<p>Regarding rationale for the scope rule: I don't know for sure, but the scope rule existed in C so perhaps it just made its way into C++ and now it would be confusing to change it.</p>\n\n<p>If we did say that the declared variable is not in scope for its initializer, then <code>int i = i;</code> might make the second <code>i</code> find an <code>i</code> from an outer scope, which would also be confusing.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1496270197, "creation_date": 1496270197, "answer_id": 44295732, "question_id": 44294121, "link": "https://stackoverflow.com/questions/44294121/self-assignment-of-variable-in-its-definition/44295732#44295732", "title": "Self-assignment of variable in its definition", "body": "<p>This is a side effect of the rule that a name is in scope immediately after it is declared. There's no need to complicate this simple rule just to prevent writing code that's obvious nonsense.</p>\n"}], "owner": {"reputation": 1765, "user_id": 4378613, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/WYVTy.png?s=128&g=1", "display_name": "piripiri", "link": "https://stackoverflow.com/users/4378613/piripiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "answer_count": 3, "score": 10, "last_activity_date": 1496270197, "creation_date": 1496262547, "question_id": 44294121, "link": "https://stackoverflow.com/questions/44294121/self-assignment-of-variable-in-its-definition", "title": "Self-assignment of variable in its definition", "body": "<p>The following C++ program compiles just fine (g++ 5.4 at least gives a warning when invoked with <code>-Wall</code>):</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n  int i = i; // !\n  return 0;\n}\n</code></pre>\n\n<p>Even something like</p>\n\n<pre><code>int&amp; p = p;\n</code></pre>\n\n<p>is swallowed by the compiler.</p>\n\n<p>Now my question is: Why is such an initialization legal? Is there any actual use-case or is it just a consequence of the general design of the language?</p>\n"}, {"tags": ["c++", "uwp"], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 668344, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e53ada29b78f8e16882bda441cc10404?s=128&d=identicon&r=PG", "display_name": "An Hoa", "link": "https://stackoverflow.com/users/668344/an-hoa"}, "edited": false, "score": 0, "creation_date": 1496351953, "post_id": 44294178, "comment_id": 75640258, "body": "Thanks for the suggestion. I am looking more for a Microsoft-provided solution instead of bundling an additional library. (I think that Microsoft did use ffmpeg or part of it in Windows.)"}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": false, "score": 2, "last_activity_date": 1496354568, "last_edit_date": 1496354568, "creation_date": 1496262749, "answer_id": 44294178, "question_id": 44294063, "link": "https://stackoverflow.com/questions/44294063/generate-live-mp4-in-uwp/44294178#44294178", "title": "Generate Live Mp4 in UWP", "body": "<p>As long as you can gerate the bitmaps on the fly, as you mentioned, then you can use FFmpeg to create the MP4.</p>\n\n<p>Download ffmpeg source code and check the source of <code>doc/examples/muxing.c</code>\nThis example is pretty much doing this. Just replace the <code>fill_yuv_image()</code> by the actual thing you are rendering.</p>\n\n<p>Don't forget to convert your pictures to YUV format. In this example, the encoder will need a YUV bitmap and you will probably render an RGB image. Google for <code>swscale</code> or even check the other examples from FFmpeg in order to solve this problem.</p>\n\n<p>--</p>\n\n<p>If you really want something Microsoft specific, then you must use the \"Microsoft Media Foundation\". There's a lot of samples here on how to encode and decode:\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa371827(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa371827(v=vs.85).aspx</a></p>\n\n<p>And you can use all these codecs:\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff819077(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ff819077(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 1073, "user_id": 668344, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e53ada29b78f8e16882bda441cc10404?s=128&d=identicon&r=PG", "display_name": "An Hoa", "link": "https://stackoverflow.com/users/668344/an-hoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1496354568, "creation_date": 1496262320, "question_id": 44294063, "link": "https://stackoverflow.com/questions/44294063/generate-live-mp4-in-uwp", "title": "Generate Live Mp4 in UWP", "body": "<p>I want to develop a slide-show kind of app that could be casted to smart TV, similar to showing a PowerPoint slide show.  Standard Miracast solution via the <em>Connect</em> app does not work nicely since the phone resolution does not match the high resolution of the TV; not to count the fact that there is no way to hide the navigation bar with <em>TryEnterFullscreenAsync</em>. The images could be quickly rendered from vector sources. So my question is whether there is a way to generate MP4 on the fly.</p>\n"}, {"tags": ["c++", "exception", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1496262353, "post_id": 44294057, "comment_id": 75594575, "body": "<code>#include &quot;A4p2.cpp&quot; #include &quot;A4p3.cpp&quot;</code>Just don&#39;t do that!"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1496262576, "post_id": 44294057, "comment_id": 75594692, "body": "Can you include your complete code including your definition of <code>class E</code>?"}, {"owner": {"reputation": 59, "user_id": 7466784, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a69001b9532f40a212ff2de2f04f576?s=128&d=identicon&r=PG&f=1", "display_name": "kprog", "link": "https://stackoverflow.com/users/7466784/kprog"}, "edited": false, "score": 0, "creation_date": 1496262750, "post_id": 44294057, "comment_id": 75594769, "body": "Yes this is an assignment but the assignment is not over floating point exceptions, I just ran across it an decided to ask. Be a little more leniant"}, {"owner": {"reputation": 1480, "user_id": 1195940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i0nHx.jpg?s=128&g=1", "display_name": "Scott Presnell", "link": "https://stackoverflow.com/users/1195940/scott-presnell"}, "edited": false, "score": 0, "creation_date": 1496262806, "post_id": 44294057, "comment_id": 75594803, "body": "General answer: most likely, var2 is zero (e.g. divide by zero will trigger a FPE) - why that is, we&#39;d need more info like definition of E, and what A4p[23].cpp hold."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 2, "last_activity_date": 1496262994, "last_edit_date": 1496262994, "creation_date": 1496262595, "answer_id": 44294137, "question_id": 44294057, "link": "https://stackoverflow.com/questions/44294057/why-do-i-get-a-floating-point-exception/44294137#44294137", "title": "Why do I get a &quot;floating point exception&quot;", "body": "<p>Linux unfortunately maps <em>integer</em> division/modulo by zero on <code>SIGFPE</code>, which is then naively printed out as \"floating point exception\". I don't think I ever saw it coming from floating point operations (probably because most FP exceptions have to be turned on explicitly, while integer division by zero always faults on x86).</p>\n\n<p>Most probably you have <code>var2</code> equal to zero in</p>\n\n<pre><code>temp = newVar % var2;\n</code></pre>\n\n<p>That in turn is probably caused by the fact that, in that loop, you are checking <code>var</code> but using/modifying <code>var2</code>.</p>\n\n<pre><code>while (var != 0) {\n        temp = newVar % var2;\n        newVar = var2;\n        var2 = temp;\n}\n</code></pre>\n\n<p>You probably want <code>while (var2 != 0)</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 7466784, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a69001b9532f40a212ff2de2f04f576?s=128&d=identicon&r=PG&f=1", "display_name": "kprog", "link": "https://stackoverflow.com/users/7466784/kprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1496262994, "creation_date": 1496262291, "question_id": 44294057, "link": "https://stackoverflow.com/questions/44294057/why-do-i-get-a-floating-point-exception", "title": "Why do I get a &quot;floating point exception&quot;", "body": "<p>Not asking for a solution or anything, just a general question. When the getgcd() function gets called, I get a floating point exception. Why is this? I have researched this and cannot find a straight answer. Thanks, also below is the code I am working with.  </p>\n\n<pre><code> #include &lt;iostream&gt;\nusing namespace std;\n\nclass D: public E {\nprivate:\n        int var2;\n\npublic:\n\n        D(int var, int var2) : E(var) {\n                var2 = var2;\n        }\n\n        void getgcd() {\n                int temp;\n                int newVar = E::var;\n                while (var != 0) {\n                        temp = newVar % var2;\n                        newVar = var2;\n                        var2 = temp;\n                }\n                cout &lt;&lt; \"The GCD of \" &lt;&lt; newVar &lt;&lt; \" and \" &lt;&lt; var2 &lt;&lt; \" is \" &lt;&lt; var2 &lt;&lt; endl;\n        }\n};\n\n#include &lt;iostream&gt;\n#include \"A4p2.cpp\"\n#include \"A4p3.cpp\"\nusing namespace std;\n\nint main(int argc, char *argv[]) {\n        int x, y;\n        x = atoi(argv[1]);\n        y = atoi(argv[2]);\n\n        if (x &lt; 1 || x &gt; 50) {\n                cout &lt;&lt; \"Input must be between 1-50\" &lt;&lt; endl;\n                exit(0);\n        }\n\n        E test(x);\n        D test1(x, y);\n        test.play();\n        test1.getgcd();\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "qregexp"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1496261106, "post_id": 44293722, "comment_id": 75594010, "body": "See <a href=\"https://regex101.com/r/6y0dn5/1\" rel=\"nofollow noreferrer\">regex101.com/r/6y0dn5/1</a>"}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1496261769, "post_id": 44293722, "comment_id": 75594296, "body": "@WiktorStribizew that would also catch integers which shouldn&#39;t be: 3 is not a double (although not stated in my question)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1496261966, "post_id": 44293722, "comment_id": 75594381, "body": "Trying to solve a problem using regular expression just means that you now have two problems"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1496262059, "post_id": 44293722, "comment_id": 75594428, "body": "It is even easier then, remove the optional group - <a href=\"https://regex101.com/r/bcU1fT/1\" rel=\"nofollow noreferrer\">regex101.com/r/bcU1fT/1</a>"}], "owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1496261019, "answer_count": 0, "score": 0, "last_activity_date": 1496260895, "creation_date": 1496260895, "question_id": 44293722, "link": "https://stackoverflow.com/questions/44293722/regular-expression-that-recognises-3-1-and-3-as-well-as-1-as-double", "closed_reason": "Duplicate", "title": "Regular expression that recognises 3.1 and 3. as well as .1 as double", "body": "<p>What is the right regular expression to identify a floating point number such that only the decimal point and one number is required.</p>\n\n<pre><code>re = QRegExp(\"[-+]?[0-9]*\\\\.[0-9]+\");\nif (re.exactMatch(s))\n    std::cout&lt;&lt; \"Double\"&lt;&lt;std::endl;\n</code></pre>\n\n<p>This code identifies <code>3.1</code> and <code>.1</code> as double but not <code>3.</code>. The trouble is, that if I make the second number block optional (replacing <code>+</code> with a <code>*</code>) then <code>.</code> would also be a double. How can I fix that?</p>\n\n<p>I use Qts regular expression library, but I guess <code>std::regex</code> would work the same.</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "loops", "equality"], "comments": [{"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1496261193, "post_id": 44293610, "comment_id": 75594044, "body": "If you want all elements to be equal you just need to compare 1 with 2, and if they&#39;re equal test 2 with 3, then 3 with 4 and so on. No need to get fancy here!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1496262005, "post_id": 44293610, "comment_id": 75594398, "body": "your bouns checking is too late. You first access the elements and only then you check if you are in bounds. You should either do <code>if (j+1 != 5 &amp;&amp; k+1 != 6 &amp;&amp; ...)</code> or simply adjust the loop bounds directly"}, {"owner": {"reputation": 95, "user_id": 6520135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b8f43191a5bbc7375318a6a41c977f?s=128&d=identicon&r=PG&f=1", "display_name": "M.Khd", "link": "https://stackoverflow.com/users/6520135/m-khd"}, "edited": false, "score": 0, "creation_date": 1496262369, "post_id": 44293610, "comment_id": 75594579, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17033939/memcmp-but-need-to-compare-block-with-fixed-value\">memcmp but need to compare block with fixed value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1496261347, "post_id": 44293663, "comment_id": 75594117, "body": "@NathanOliver: that&#39;s correct about the memory layout. Using a flat array eliminates the double loop, which allows the compiler to better optimize the equality check."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1496261380, "post_id": 44293663, "comment_id": 75594134, "body": "Instead of a <code>goto</code> you can just put this in a function and return."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1496261536, "post_id": 44293663, "comment_id": 75594196, "body": "Sure, @Kevin. But I don&#39;t think having an extra named function lying around or a lambda is worth the accompanying decrease in readability or the supposed increase in safety. Were the loop body significantly more complicated, I&#39;d likely agree. I&#39;ll edit my answer to point this out."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1496261714, "post_id": 44293663, "comment_id": 75594273, "body": "I think it&#39;s more readable to have a <code>all_equal(array)</code> call than 2 for loops in a possibly large function. Plus if you need to do the check elsewhere or on a different array you already have the function."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1496262283, "post_id": 44293663, "comment_id": 75594539, "body": "@Kevin: Agreed."}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": true, "score": 3, "last_activity_date": 1496262209, "last_edit_date": 1496262209, "creation_date": 1496260673, "answer_id": 44293663, "question_id": 44293610, "link": "https://stackoverflow.com/questions/44293610/fastest-method-to-check-if-all-elements-of-2d-array-are-equal/44293663#44293663", "title": "Fastest method to check if all elements of 2d array are equal", "body": "<p>Your current code will fail because <code>break</code> will only take you out of one loop. You must exit both, which requires a second check, like so:</p>\n\n<pre><code>auto the_value = houses[0][0];\nbool equal     = true;\n\nfor(int j=0;j&lt;5;j++){\n  for(int k=0;k&lt;6;k++){\n    if(houses[j][k]!=the_value){\n      equal = false;\n      goto done;\n    }\n  }\n  if(!equal)\n    break\n}\n</code></pre>\n\n<p>(Storing the first element in a variable and then looping over all of the elements to check to see if they are equal to that variable obviates the mess you invoke by checking adjacent elements.)</p>\n\n<p>Breaking out of both loops simultaneously requires the Dark Arts (<code>goto</code>), but may be more readable/maintainable if you are disciplined and may be slightly faster, depending on your compiler:</p>\n\n<pre><code>auto the_value = houses[0][0];\nbool equal     = true;\n\nfor(int j=0;j&lt;5;j++)\nfor(int k=0;k&lt;6;k++)\n  if(houses[j][k]!=the_value){\n    equal = false;\n    goto done; //Danger, Will Robinson!\n  }\n\ndone:\n//More stuff\n</code></pre>\n\n<p>You may find a flat array to be faster:</p>\n\n<pre><code>auto the_value = houses[0][0];\nbool equal     = true;\nfor(int i=0;i&lt;5*6;i++)\n  if(houses[i]!=the_value){\n    equal = false;\n    break;\n  }\n</code></pre>\n\n<p>The 2D array is stored as a 1D contiguous array in memory. Using flat array addressing accesses the same memory locations, but explicitly avoids forcing the internal arithmetic. For highly performant code you may wish to consider using flat arrays by default.</p>\n\n<p>Since you might use a function such as this a number of times or have it embedded in otherwise complex code, perhaps you'd like to abstract it:</p>\n\n<pre><code>template&lt;class T&gt;\nbool AllEqual(const T&amp; arr, size_t N){\n  T the_value = arr[0];\n  for(int i=0;i&lt;N;i++)\n    if(arr[i]!=the_value)\n      return false;\n  return true;\n}\n\nAllEqual(houses, 5*6);\n</code></pre>\n\n<p>Since you're coding in C++, you probably don't want to be using raw arrays anyway. Let's rewrite your code using the STL, assuming flat arrays:</p>\n\n<pre><code>template&lt;class T&gt;\nbool AllEqual(const std::vector&lt;T&gt;&amp; arr){\n  return std::all_of(arr.begin(), arr.end(), [&amp;](const T&amp; x){ return x==arr[0]; });\n}\n\nstd::vector&lt;int&gt; houses = {}; //Replace with appropriate initialization\nif(AllEqual(houses))\n  //Do stuff\n</code></pre>\n\n<p>(Also: as another answerer mentioned, the way you are adding data to your array seems to imply that it should be 2x6/6x2 array instead of 5x6/6x5.)</p>\n"}, {"comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1496540005, "post_id": 44293754, "comment_id": 75702363, "body": "Isn&#39;t <code>std::equal</code> for comparing equality of two arrays instead of all elements of a single array?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1496540380, "post_id": 44293754, "comment_id": 75702414, "body": "Also: the way you define the 2D array ensures that it is contiguous in memory (as a flat array). If you do dynamic allocation of rows/columns, especially in a fragmented environment, the speed difference will be much more apparent. Storing 2D vs 1D indices for access locations in the array can also have large effects on performance. But, for OP&#39;s presented use-case I&#39;d agree that the speeds should be about equal, as you&#39;ve found."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1496737612, "post_id": 44293754, "comment_id": 75769832, "body": "Yeah @Richard I agree, good comment. As for <code>std::equal</code>, see the ref: Compares the elements in the range [first1,last1) with those in the range beginning at first2, and returns true if all of the elements in both ranges match.."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 2, "last_activity_date": 1496263921, "last_edit_date": 1496263921, "creation_date": 1496261042, "answer_id": 44293754, "question_id": 44293610, "link": "https://stackoverflow.com/questions/44293610/fastest-method-to-check-if-all-elements-of-2d-array-are-equal/44293754#44293754", "title": "Fastest method to check if all elements of 2d array are equal", "body": "<p>First, do you understand what your array looks like? You have 6 times of two ones, but you used <code>houses[5][6]</code>. That's it 5 rows and 6 columns. You should have gotten an error for that:</p>\n\n<pre><code>main.cpp:5:55: error: excess elements in array initializer\n    int houses[5][6] = {{1,1},{1,1},{1,1},{1,1},{1,1},{1,1}};\n                                                      ^~~~~\n</code></pre>\n\n<p>What you really wanted was 6 rows and 2 columns.</p>\n\n<hr>\n\n<p>As for the way of checking whether all elements of a 2D array are equal, I would follow a simple approach; store the first element of your array to a variable, e.g. named <code>v</code>, and check that value versus all the other elements. If it is not equal to just one element, then it is enough to take a decision and say that not all elements are equal, like in the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nbool allEqual(int arr[][2], int rows)\n{\n    int v = arr[0][0];\n    for(int i = 0; i &lt; rows; ++i)\n        for(int j = 0; j &lt; 2; ++j)\n            if(v != arr[i][j])\n                return false;\n    return true;\n}\n\nint main(void)\n{\n    int houses[6][2] = {{1,1},{1,1},{1,1},{1,1},{1,1},{1,1}};\n    allEqual(houses, 6) ? std::cout &lt;&lt; \"All \" : std::cout &lt;&lt; \"Not all \";\n    std::cout &lt;&lt; \"elements are equal\\n\";\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>If I emulate a 2D array with an 1D, will it be faster?</p>\n</blockquote>\n\n<p>I doubt it. They idea is that the memory locations will be contiguous, but this is what happens pretty most in the 2D case, given that the rows are more than the columns.</p>\n\n<p>Here is my experiment:</p>\n\n<pre><code>Georgioss-MacBook-Pro:~ gsamaras$ g++ -Wall -std=c++0x -O3 -o 2d 2d.cpp\nGeorgioss-MacBook-Pro:~ gsamaras$ ./2d\n2D array took 1.48e-10 seconds.\nGeorgioss-MacBook-Pro:~ gsamaras$ g++ -Wall -std=c++0x -O3 -o 1d 1d.cpp\nGeorgioss-MacBook-Pro:~ gsamaras$ ./1d\nEmulating 2D array with 1D array took 1.5e-10 seconds.\n</code></pre>\n\n<p>and my code, based on my <a href=\"https://gsamaras.wordpress.com/code/1651-2/\" rel=\"nofollow noreferrer\">Time measurements (C++)</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define ROWS 10000\n#define COLS 20\n#define REPEAT 1000\n\n#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;ratio&gt;\n#include &lt;chrono&gt;\n\nbool allEqual(int* arr, const int size)\n{\n    int v = arr[0];\n    for(int i = 0; i &lt; size; ++i)\n        if(v != arr[i])\n            return false;\n    return true;\n}\n\nvoid fill(int* arr, const int size)\n{\n    for(int i = 0; i &lt; size; ++i)\n        arr[i] = 1;\n}\n\nint main(void)\n{\n    const int size = ROWS * COLS;\n    int houses[size];\n    fill(houses, size);\n\n    bool equal;\n\n    using namespace std::chrono;\n    high_resolution_clock::time_point t1 = high_resolution_clock::now();\n    for(int i = 0; i &lt; REPEAT; ++i)\n        equal = allEqual(houses, size);\n    high_resolution_clock::time_point t2 = high_resolution_clock::now();\n    duration&lt;double&gt; time_span = duration_cast&lt;duration&lt;double&gt;&gt;(t2 - t1);\n    std::cout &lt;&lt; \"Emulating 2D array with 1D array took \" &lt;&lt; time_span.count()/(double)REPEAT &lt;&lt; \" seconds.\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>where the 2d.cpp is the straightforward way.</p>\n\n<p>Using the equal method provided in this <a href=\"https://stackoverflow.com/a/44293895/2411320\">answer</a> for a 2D array, the timings reported are similar.</p>\n\n<p>Moreover, there is <a href=\"http://www.cplusplus.com/reference/algorithm/equal/\" rel=\"nofollow noreferrer\">std::equal</a>, which is comparable in terms of performance to my code above, reporting a time of:</p>\n\n<pre><code>std::equal with 2D array took 1.63e-10 seconds.\n</code></pre>\n\n<p>It's complexity is: \"Up to linear in the distance between first1 and last1: Compares elements until a mismatch is found.\"</p>\n\n<hr>\n\n<p><strong>Summary</strong>:</p>\n\n<p><code>std::equal</code> does OK, and requires the less effort from the programmer, thus use it.</p>\n"}, {"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1496263207, "post_id": 44293895, "comment_id": 75594989, "body": "Hey, nice answer, I used your code to compare its speed to mine&#39;s, hope you don&#39;t mind. =)"}, {"owner": {"reputation": 1549, "user_id": 3429660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000700961294/picture?type=large", "display_name": "user3429660", "link": "https://stackoverflow.com/users/3429660/user3429660"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1496270822, "post_id": 44293895, "comment_id": 75597900, "body": "Can you please also try comparing the speed of the updated code? I&#39;m pretty curious..."}], "tags": [], "owner": {"reputation": 1549, "user_id": 3429660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000700961294/picture?type=large", "display_name": "user3429660", "link": "https://stackoverflow.com/users/3429660/user3429660"}, "is_accepted": false, "score": 1, "last_activity_date": 1496270782, "last_edit_date": 1496270782, "creation_date": 1496261620, "answer_id": 44293895, "question_id": 44293610, "link": "https://stackoverflow.com/questions/44293610/fastest-method-to-check-if-all-elements-of-2d-array-are-equal/44293895#44293895", "title": "Fastest method to check if all elements of 2d array are equal", "body": "<p>The fastest way:</p>\n\n<pre><code>int houses[6][2] = {{1,1},{1,1},{1,1},{1,1},{1,1},{1,2}};\n\nint equals()\n{\n    int *p = (int *)houses;\n    int *end = p + 6*2;\n    int v = *p++;\n    for(; p &lt; end; p++)\n        if (*p != v)\n            return 0;\n    return 1;\n}\n</code></pre>\n\n<p>I wrote it for fun, don't use that in production.\nInstead, iterate through them all:</p>\n\n<pre><code>int equals() {\n   int v = houses[0][0];\n   for(int j=0;j&lt;5;j++)\n      for(int k=0;k&lt;6;k++)\n         if (houses[i][j] != v)\n            return false;\n   return true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "is_accepted": false, "score": 2, "last_activity_date": 1496540019, "last_edit_date": 1496540019, "creation_date": 1496263283, "answer_id": 44294291, "question_id": 44293610, "link": "https://stackoverflow.com/questions/44293610/fastest-method-to-check-if-all-elements-of-2d-array-are-equal/44294291#44294291", "title": "Fastest method to check if all elements of 2d array are equal", "body": "<p>Multiple things:</p>\n\n<p>First, as others have pointed out, the line:</p>\n\n<pre><code>int houses[5][6] = {{1,1},{1,1},{1,1},{1,1},{1,1},{1,1}};\n</code></pre>\n\n<p>Is wrong, the left hand side declares an array with 5 rows and 6 columns, but the right hand side constitutes an array of 6 rows and 2 columns.</p>\n\n<p>On the general case comparing all elements of a 2d array (or even a 1d array) is in O(n) since for every element you must check all other elements. You can optimize it a little bit but it will still be an O(n) algorithm. On the most general case:</p>\n\n<pre><code>A[n][m] is an array of n rows and m columns\n\nfor(int i=0; i&lt;n*m; i++)\n{\n   if(A[0][0] != A[i/n][i%n])\n     return false;\n}\nreturn true;\n</code></pre>\n\n<p>This may seem a little bit confusing so let me explain:</p>\n\n<p>a 2d array has n*m elements, so an easy way to see all of them in a single loop is doing [i/n] (if i &lt; n, then it's the first row, if n &lt; i &lt; 2n then it's the second row...) and doing [i%n] gives you the remainder. This way we can iterate the entire array in a single loop.</p>\n\n<p>Since we want all elements to be the same, if the first element is equal to all others then they are ll the same, if at least on is different then they are not all the same.</p>\n"}, {"tags": [], "owner": {"reputation": 2669, "user_id": 6714430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/adedu.jpg?s=128&g=1", "display_name": "rashedcs", "link": "https://stackoverflow.com/users/6714430/rashedcs"}, "is_accepted": false, "score": 0, "last_activity_date": 1497940573, "last_edit_date": 1497940573, "creation_date": 1496326288, "answer_id": 44309894, "question_id": 44293610, "link": "https://stackoverflow.com/questions/44293610/fastest-method-to-check-if-all-elements-of-2d-array-are-equal/44309894#44309894", "title": "Fastest method to check if all elements of 2d array are equal", "body": "<blockquote>\n  <p>We can simply way to check if all the elements inside that array are equal\n  or not. just assign the first row &amp; column element in a variable. Then compare each element. If not equal then return false.</p>\n</blockquote>\n\n<p><strong>Code Snippet :</strong> </p>\n\n<hr>\n\n<pre><code>bool Equal(int **arr, int row, int col)\n{\n   int v = arr[0][0];\n   for(int i=0; i&lt;row; i++)\n   {\n      for(int k=0; k&lt;col; k++)\n      {\n         if(arr[i][k]!=v)  return false;\n      }\n   }\n   return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 7864052, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4418ca8444ed6435b5af3055f37e7ae6?s=128&d=identicon&r=PG&f=1", "display_name": "user7864052", "link": "https://stackoverflow.com/users/7864052/user7864052"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7211, "favorite_count": 0, "accepted_answer_id": 44293663, "answer_count": 5, "score": 2, "last_activity_date": 1497940573, "creation_date": 1496260489, "last_edit_date": 1496327263, "question_id": 44293610, "link": "https://stackoverflow.com/questions/44293610/fastest-method-to-check-if-all-elements-of-2d-array-are-equal", "title": "Fastest method to check if all elements of 2d array are equal", "body": "<p>I have a 2d array <code>houses[5][2] = {{1,1},{1,1},{1,1},{1,1},{1,1}}</code>\nWhat is the fastest way to check if all the elements inside that array are equal?\nHere is what I have tried so far: \n```</p>\n\n<pre><code>for(int j=0;j&lt;5;j++){\n for(int k=0;k&lt;6;k++){\n   if(houses[j][k] == houses[j+1][k+1] &amp;&amp; j+1 != 5 &amp;&amp; k + 1 != 6)\n     equal = true;\n    else{\n     equal = false;\n     break;\n     }\n}\n}\n</code></pre>\n\n<p>This won't compare all the elements tho, I know how to compare all of them, but it seems to be a very long loop .. is there a faster way to do that? </p>\n"}, {"tags": ["java", "c++", "return"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496260196, "post_id": 44293515, "comment_id": 75593552, "body": "What it really sounds like you need is a library, and you call that library from the other programming language(most likely using a C interface)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1496260457, "post_id": 44293515, "comment_id": 75593696, "body": "The value returned from <code>main</code> is given to the operating system.  You&#39;ll need to explore your operating system to see what functionality it has."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1496260713, "creation_date": 1496260713, "answer_id": 44293676, "question_id": 44293515, "link": "https://stackoverflow.com/questions/44293515/can-an-executable-return-something-to-another-executable/44293676#44293676", "title": "Can an executable return something to another executable?", "body": "<p>Yes. If one program launches another it can collect the exit code of the child when it terminates.</p>\n\n<p>You can also have <em>much</em> more communication between two processes if you need - like setting up pipes between standard input and standard output so parent and child can send arbitrary messages by just reading/writing <code>cin</code>/<code>cout</code> or you can use sockets, UNIX domain sockets, TCP sockets, whatever, or shared memory between processes. \nLook up IPC (Inter Process Communication).</p>\n\n<p>And by the way; the language(s) each application is written in does not matter. All that matters is that they are using the same IPC mechanism.</p>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 0, "last_activity_date": 1496260745, "creation_date": 1496260745, "answer_id": 44293689, "question_id": 44293515, "link": "https://stackoverflow.com/questions/44293515/can-an-executable-return-something-to-another-executable/44293689#44293689", "title": "Can an executable return something to another executable?", "body": "<p>The value returned from <code>main</code> becomes the process's exit code.  If you launch a subprocess then you'll usually be able to access that value in some way (see <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html\" rel=\"nofollow noreferrer\">the <code>Process</code> docs</a> for Java), but it's not generally used for communicating results.  By convention the exit code is used to report success or failure: 0 means success and non-zero exit codes are used to signal various error conditions.  </p>\n\n<p>There are various methods for communicating from one process to another.  The simplest is generally to just write data to the subprocess's standard input stream and receive data from its standard output and standard error streams.  See <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">the <code>ProcessBuilder</code> docs</a> for how you could do that in Java.  Processes can also communicate using other methods, like sockets or shared memory, but those are a larger topic.</p>\n"}], "owner": {"reputation": 11, "user_id": 7437013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83e1702c818481bb594e205f0086c32?s=128&d=identicon&r=PG&f=1", "display_name": "SystemUser", "link": "https://stackoverflow.com/users/7437013/systemuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496260745, "creation_date": 1496260061, "question_id": 44293515, "link": "https://stackoverflow.com/questions/44293515/can-an-executable-return-something-to-another-executable", "title": "Can an executable return something to another executable?", "body": "<p>In C++ one normally uses <code>int main(int argc, char* argv [])</code> afaik.<br>\nWhat I do not know about is, can the returned <code>int</code> be given to another .exe or .jar? For example if I got something which is easier to do in C++ for me than in Java and I want the result to be assigned to an <code>int</code> or whatever else in java?<br>\nAnd if not \"multi-language\", can this at least be done from one C++ exe to another?</p>\n"}, {"tags": ["c++", "class", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496259698, "post_id": 44293425, "comment_id": 75593241, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496259821, "post_id": 44293425, "comment_id": 75593310, "body": "<i>&quot;it doesn&#39;t work. My question is what do I have to do in order for it to work?&quot;</i> Isn&#39;t a clear problem description. What exactly doesn&#39;t work? Post all error message in your question verbatim please. Ideally a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1496259830, "post_id": 44293425, "comment_id": 75593314, "body": "&quot;it doesn&#39;t work&quot; - In what sense? What error messages do you get? What compiler are you using? What version of the compiler?"}, {"owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1496259905, "post_id": 44293425, "comment_id": 75593370, "body": "What is your error?"}, {"owner": {"reputation": 43, "user_id": 8094016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afd30e249dd2fb80e383fe6689dba2d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnylame", "link": "https://stackoverflow.com/users/8094016/johnnylame"}, "edited": false, "score": 0, "creation_date": 1496259978, "post_id": 44293425, "comment_id": 75593424, "body": "Using visual studio 2013 express, im getting following error message. no instance of constructor &quot;Vector::Vector&quot; matches the argument list             argument types are: (int, int, int)"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1496260029, "post_id": 44293425, "comment_id": 75593454, "body": "please add all relevant information into the question by clicking the <a href=\"https://stackoverflow.com/posts/44293425/edit\">edit</a> button."}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1496260042, "post_id": 44293425, "comment_id": 75593462, "body": "well, you obviously try to initialize it with three ints. Use Vector({1, 2, 3})"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1496260092, "post_id": 44293425, "comment_id": 75593491, "body": "Try <code>Vector p{{ 15, 16, 25} };</code>"}, {"owner": {"reputation": 43, "user_id": 8094016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afd30e249dd2fb80e383fe6689dba2d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnylame", "link": "https://stackoverflow.com/users/8094016/johnnylame"}, "edited": false, "score": 0, "creation_date": 1496260295, "post_id": 44293425, "comment_id": 75593598, "body": "Thanks Neil, it does work. Is there also a way, so i don&#39;t have to write another pair of curly brackets? Maybe overloading the operator{}?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496260324, "post_id": 44293425, "comment_id": 75593621, "body": "@Johnnylame There is no <code>operator{}</code> and c++ does not allow you to define new operators."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8094016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afd30e249dd2fb80e383fe6689dba2d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnylame", "link": "https://stackoverflow.com/users/8094016/johnnylame"}, "edited": false, "score": 0, "creation_date": 1496260557, "post_id": 44293528, "comment_id": 75593744, "body": "Thanks, that answered my question. Sorry for not really explaining my issue."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 4, "last_activity_date": 1496260135, "creation_date": 1496260135, "answer_id": 44293528, "question_id": 44293425, "link": "https://stackoverflow.com/questions/44293425/using-vector-as-class-member/44293528#44293528", "title": "using vector as class member", "body": "<p>The easiest way to get what you want is to use an additional set of braces to indicate that the arguments provided, together, form the first argument of the constructor. Try :</p>\n\n<pre><code>int main() {\n\n    Vector p{ {15, 16, 25} };\n    p.print();\n}\n</code></pre>\n\n<p>Another way, if you are trying to make it work with <code>main</code> as it current is, is to implement an <a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">initializer list</a> constructors.</p>\n\n<pre><code>#include &lt;initializer_list&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing std::vector;\nusing std::cout;\n\nclass Vector {\n    vector&lt;int&gt;numbers;\n\npublic:\n    Vector(vector&lt;int&gt; const&amp; v) : numbers(v) {}\n\n    // Implement initializer list constructor\n    Vector(std::initializer_list&lt;int&gt; args) : numbers(args.begin(), args.end()) {}\n\n    void print() {\n        for (const auto&amp; elem : numbers) {\n            cout &lt;&lt; elem &lt;&lt; \" \";\n        }\n    }\n};\n\n\nint main() {\n\n    Vector p{ 15, 16, 25 };\n    p.print();\n}\n</code></pre>\n\n<p>Note that you can pass the initializer list directory to <code>std::vector</code>'s constructor (<code>Vector(std::initializer_list&lt;int&gt; args) : numbers(args) {}</code> would work), but this would incur an additional copy of the list.</p>\n"}, {"comments": [{"owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1496260487, "post_id": 44293547, "comment_id": 75593713, "body": "If you really wanted to avoid that, you could change it so that v is an r-value. That would allow for the specific implementation OP requested."}, {"owner": {"reputation": 43, "user_id": 8094016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afd30e249dd2fb80e383fe6689dba2d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnylame", "link": "https://stackoverflow.com/users/8094016/johnnylame"}, "edited": false, "score": 0, "creation_date": 1496260641, "post_id": 44293547, "comment_id": 75593787, "body": "Many thanks. Much appreciated"}], "tags": [], "owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1496260240, "creation_date": 1496260240, "answer_id": 44293547, "question_id": 44293425, "link": "https://stackoverflow.com/questions/44293425/using-vector-as-class-member/44293547#44293547", "title": "using vector as class member", "body": "<p>You need to add a constructor which takes a std::initializer_list like this: </p>\n\n<pre><code>Vector(std::initializer_list&lt;int&gt; v) : numbers(v){}\n</code></pre>\n\n<p>add that, along side your other constructor, and that should work.</p>\n"}], "owner": {"reputation": 43, "user_id": 8094016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afd30e249dd2fb80e383fe6689dba2d?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnylame", "link": "https://stackoverflow.com/users/8094016/johnnylame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1497311804, "accepted_answer_id": 44293528, "answer_count": 2, "score": 3, "last_activity_date": 1496260240, "creation_date": 1496259668, "question_id": 44293425, "link": "https://stackoverflow.com/questions/44293425/using-vector-as-class-member", "closed_reason": "Duplicate", "title": "using vector as class member", "body": "<p>i'm new to C++ and programming in general, plus english isn't my first language so I might have trouble phrasing my question correctly for you to understand. </p>\n\n<p>I wrote the following, working, program :</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\nusing namespace std;\n\nclass Vector{\n    vector&lt;int&gt;numbers;\n\npublic:\n    Vector(vector&lt;int&gt; const&amp; v) : numbers(v) {}\n\n    void print(){\n        for (const auto&amp; elem : numbers){\n            cout &lt;&lt; elem &lt;&lt; \" \";\n        }\n    }\n};\n\n\nint main(){\n\n    Vector p{ vector &lt; int &gt; {15, 16, 25} };\n    p.print();\n}\n</code></pre>\n\n<p>Now if I try to create an object writing:</p>\n\n<pre><code>Vector p{ 15, 16, 25 };\n</code></pre>\n\n<p>it doesn't work. My question is what do I have to do in order for it to work? Help would be much appreciated! Thanks in advance.</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017", "cmake-gui"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4544940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34d0e4f3430d4f45ec928ce32850d469?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4544940/andy"}, "edited": false, "score": 1, "creation_date": 1496261526, "post_id": 44293720, "comment_id": 75594191, "body": "I renamed the filename and added a proper location and it found it, thanks."}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": true, "score": 1, "last_activity_date": 1496260889, "creation_date": 1496260889, "answer_id": 44293720, "question_id": 44293347, "link": "https://stackoverflow.com/questions/44293347/why-cant-cmake-find-the-library-using-include-directories/44293720#44293720", "title": "Why can&#39;t Cmake find the library using include_directories?", "body": "<p>It should be:</p>\n\n<pre><code>find_library(MHTD microhttpd \"path/to/the/lib\")\n</code></pre>\n\n<p>The second parameter is the library filename. The third is the path where the library is located.</p>\n"}], "owner": {"reputation": 95, "user_id": 4544940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34d0e4f3430d4f45ec928ce32850d469?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4544940/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 0, "accepted_answer_id": 44293720, "answer_count": 1, "score": 1, "last_activity_date": 1496260889, "creation_date": 1496259382, "last_edit_date": 1496259802, "question_id": 44293347, "link": "https://stackoverflow.com/questions/44293347/why-cant-cmake-find-the-library-using-include-directories", "title": "Why can&#39;t Cmake find the library using include_directories?", "body": "<p>I am trying to configure a project for Visual Studio 2017 in CMake and gives me the error: <code>microhttpd NOT found</code> This was the only problem while configuring it, I tried it turning the flag off and worked. I included these two lines:</p>\n\n<pre><code>include_directories(${CMAKE_SOURCE_DIR}/lib)\ninclude_directories(${CMAKE_SOURCE_DIR}/include)\n</code></pre>\n\n<p>I had the microhttpd.h in includes and the libmicrohttpd.lib in the lib folder. How can I properly tweak the following code to find it(in CmakeLists.txt the part of Finding this library):</p>\n\n<pre><code>include_directories(${CMAKE_SOURCE_DIR}/lib)\ninclude_directories(${CMAKE_SOURCE_DIR}/includes)\n\noption(MICROHTTPD_REQUIRED \"Enable or disable the requirement of microhttp (http deamon)\" ON)\nfind_library(MHTD NAMES microhttpd)\nif(\"${MHTD}\" STREQUAL \"MHTD-NOTFOUND\")\n    if(MICROHTTPD_REQUIRED)\n        message(FATAL_ERROR \"microhttpd NOT found: use `-DMICROHTTPD_REQUIRED=OFF` to build without http deamon support\")\n    else()\n        message(STATUS \"microhttpd NOT found: disable http server\")\n        add_definitions(\"-DCONF_NO_HTTPD\")\n    endif()\nelse()\n    set(LIBS ${LIBS} ${MHTD})\nendif()\n</code></pre>\n\n<p>Do I need to use other function than include_directories?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 999, "user_id": 3274625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1062648629/picture?type=large", "display_name": "Jason Lang", "link": "https://stackoverflow.com/users/3274625/jason-lang"}, "edited": false, "score": 0, "creation_date": 1496259383, "post_id": 44293288, "comment_id": 75593059, "body": "&quot;int WertA&quot; is a single int. you can&#39;t get WertA[i] from it, because it&#39;s not an array."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1496259421, "post_id": 44293288, "comment_id": 75593082, "body": "And why do your void functions return? Do you not get warnings? If not, then turn them on."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496259521, "post_id": 44293288, "comment_id": 75593133, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1496260494, "post_id": 44293288, "comment_id": 75593717, "body": "The comma does not do what you think it does. Look more closely at whatever examples you&#39;re learning from."}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 3274625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1062648629/picture?type=large", "display_name": "Jason Lang", "link": "https://stackoverflow.com/users/3274625/jason-lang"}, "edited": false, "score": 1, "creation_date": 1496259522, "post_id": 44293365, "comment_id": 75593134, "body": "... As long as space for 4 ints was created outside the function :)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1496259526, "last_edit_date": 1496259526, "creation_date": 1496259453, "answer_id": 44293365, "question_id": 44293288, "link": "https://stackoverflow.com/questions/44293288/invalid-types-intint-for-array-subscript-compilation-terminated-due-to-wfat/44293365#44293365", "title": "invalid types &#39;int[int]&#39; for array subscript compilation terminated due to -Wfatal-errors", "body": "<p>Here, for example:</p>\n\n<pre><code>void Eingabe(int WertA)\n{\n    for (i=0; i&lt;=4; i++)\n        cin &gt;&gt; WertA[i];   \n        ...\n</code></pre>\n\n<p>what do you expect to happen? </p>\n\n<p><code>WertA</code> is of type <code>int</code>, it's a number, and you are trying to index it like it was an array.</p>\n\n<p>You could index it if the prototype was something like this:</p>\n\n<pre><code>void Eingabe(int* WertA)\n</code></pre>\n\n<p>which would indicate that <code>WertA</code> is an array of <code>int</code>s. Of course, outside of the function the array could look like this:</p>\n\n<pre><code>int WertA[4];\n</code></pre>\n\n<hr>\n\n<p>Moreover, you do later in that function:</p>\n\n<pre><code>return WertA;\n</code></pre>\n\n<p>while its return type is <code>void</code>, which should result in a compilation error.</p>\n"}], "owner": {"reputation": 7, "user_id": 8094038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa3c9ada50efe3091dc07edc228a92b?s=128&d=identicon&r=PG&f=1", "display_name": "zakuma", "link": "https://stackoverflow.com/users/8094038/zakuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 44293365, "answer_count": 1, "score": -2, "last_activity_date": 1496259526, "creation_date": 1496259144, "question_id": 44293288, "link": "https://stackoverflow.com/questions/44293288/invalid-types-intint-for-array-subscript-compilation-terminated-due-to-wfat", "title": "invalid types &#39;int[int]&#39; for array subscript compilation terminated due to -Wfatal-errors", "body": "<p>I have done a little script were I testing arrays+functions+switch case in c++.</p>\n\n<p>It isnt finished yet, but I ave a problem with my \"enter or type in\" function.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint Groesse[6];\nint Gewicht[6];\nstring Name[6];\nint i;\nint Auswahl;\n\nvoid Eingabe(int WertA)\n{\n    cout &lt;&lt; \"Bitte die die Liste fuellen: \" &lt;&lt; endl;\n    for (i=0; i&lt;=4; i++)\n    {\n        cin &gt;&gt; WertA[i];   \n    }\n    return WertA;\n}\n\nvoid Ausgabe (int WertB)\n{\n    cout &lt;&lt; \"Folgende Werte wurden eingegeben: \"&lt;&lt; endl;\n    for (i=0; i&lt;=4;i++)\n    {\n        cout &lt;&lt; WertB[i];\n    }\n    return 0;\n}\n\nint main()\n{\n    cout &lt;&lt; \"Bitte die Groessen eingeben: \"&lt;&lt; endl;\n    Eingabe(Groesse);\n    cout &lt;&lt; \"Bitte das zugehoerige Gewicht eingeben: \" &lt;&lt; endl;\n    for (i= 0; i&lt;=4; i++)\n    {\n        cout &lt;&lt; \"Gewicht\" &lt;&lt;i+1 &lt;&lt; \": \";\n        cin &gt;&gt; Gewicht[i];\n    }\n    cout &lt;&lt; \"Bitte den Zugehoerigen Namen angeben\" &lt;&lt; endl;\n    for (i=0; i&lt;=4; i++)\n    {\n        cout&lt;&lt; \"Name\" &lt;&lt;i+1&lt;&lt;\": \";\n        cin &gt;&gt; Name[i];\n    }\n\n    cout &lt;&lt; \"Wonach wollen Sie suchen? Druecken Sie: \" &lt;&lt; endl;\n    cout &lt;&lt; \"(1)Groesse oder (2) Name oder (3) Gewicht \" &lt;&lt; endl;\n    cin &gt;&gt; Auswahl;\n\nswitch (Auswahl)\n    {\n    case ('1'):\n       cout &lt;&lt; \"Geben Sie die Gesuchte nummer an von 0-4\" &lt;&lt; endl;\n       cin &gt;&gt; i;\n       cout &lt;&lt; Groesse[i], Gewicht[i], Name[i];\n       break;\n\n\n    case ('2'):\n       cout &lt;&lt; \"Geben Sie die Gesuchte nummer an von 0-4\" &lt;&lt; endl;\n       cin &gt;&gt; i;\n       cout &lt;&lt; Groesse[i], Gewicht[i], Name[i];\n       break;\n\n\n    default:\n        cout &lt;&lt;\"Falsche Eingabe bitte Widerhollen\" &lt;&lt; endl;\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The problem is in Line 19/21:\ninvalid types 'int[int]' for array subscript compilation terminated due to -Wfatal-errors.</p>\n\n<p>and in the second function\nmain.cpp|29|error: invalid types 'int[int]' for array subscript|</p>\n\n<p>What should I do? I'm confused :(</p>\n"}, {"tags": ["c++", "c", "sockets", "buffer", "flush"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1496259580, "post_id": 44293206, "comment_id": 75593164, "body": "You can&#39;t, really. For all you know those 6 bytes may have been lost on the Internet and need to be re-transmitted. This may make the packet arrive after subsequent packets. TCP will ensure the ordering, but there will be additional data in the stream to be picked up with <code>recv</code>. You will have to define a message protocol or switch from a stream-based network protocol to a message-based network protocol like UDP."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1496259868, "post_id": 44293206, "comment_id": 75593347, "body": "@user4581301 Umm, you&#39;ll have to explain yourself. How packets are received has nothing to do with being able to receive less data than the whole buffer. And I don&#39;t get what you mean with &quot;additional data in the stream to be picked up with recv.&quot; There is no need for any message protocol or UDP, <code>recv</code> should return what&#39;s available at that point anyway and not wait for full buffer. Arriving prices is not the same as arriving packets."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1496260186, "post_id": 44293206, "comment_id": 75593548, "body": "As for the question, why do you think it waits for 1024 bytes? If it does you&#39;ll only get one number printed since null will make the print end it there and not print any other numbers. Have you checked the return value of <code>recv</code>?"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 3, "creation_date": 1496260362, "post_id": 44293206, "comment_id": 75593639, "body": "You MUST correctly and competely handle the result returned by system calls, especially recv().  It can return zero, above zero or below zero, all three of which mean different, important things."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1496260380, "post_id": 44293206, "comment_id": 75593646, "body": "@SamiKuhmonen b/c prices are being printed in groups of 1024 characters, as shown in the last snippet."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1496260493, "post_id": 44293206, "comment_id": 75593716, "body": "Then you have something very much wrong since %s would stop printing after five characters and your output wouldn&#39;t be like that. Check the return value of <code>recv</code>. 1024 is not divisible by six so the printout would be garbled also."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1496260883, "post_id": 44293206, "comment_id": 75593904, "body": "You need to use a packet dump like wireshark to see whether the problem is sender or receiver.  Sender side, you need to <b>disable Nagle&#39;s algorithm</b> (set <code>TCP_NODELAY</code> option).  Receiver side, <code>O_NONBLOCK</code> as Akash suggests in his answer."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1496261052, "post_id": 44293206, "comment_id": 75593981, "body": "Note that the buffer size is not a characteristic of the socket, but rather a characteristic of your client and server (separately).  That size is not directly visible to <code>send()</code> and <code>recv()</code>, so it&#39;s really irrelevant.  In any case, both <code>send()</code> and <code>recv()</code> can and sometimes do transfer fewer bytes than you ask them to do."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1496261263, "post_id": 44293206, "comment_id": 75594072, "body": "Overall, I&#39;m not prepared to believe that the code fragments you have presented accurately represent the code that produced the output you presented.  You will get better answers, faster, if you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (with emphasis on &quot;minimal&quot;, &quot;complete&quot;, &quot;verifiable&quot;, and &quot;example&quot;)."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1496262031, "post_id": 44293206, "comment_id": 75594415, "body": "@JohnBollinger I&#39;ve added the complete server- and client-side code."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1496262306, "post_id": 44293206, "comment_id": 75594554, "body": "<i>Perhaps</i> you are looking for the <code>TCP_NODELAY</code> socket option..."}], "answers": [{"comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1496295277, "post_id": 44293665, "comment_id": 75603821, "body": "This is wrong. <code>recv</code> returns any data available. The non-blocking behaviour is only related to <i>when there is no data available</i>. If there is one byte available then recv will return that and that&#39;s it. It won&#39;t wait for the whole buffer to be full. This is clearly documented."}], "tags": [], "owner": {"reputation": 144, "user_id": 4090593, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vAVi8n61-sY/AAAAAAAAAAI/AAAAAAAAACU/I42SYjcHZaQ/photo.jpg?sz=128", "display_name": "Akash Rawal", "link": "https://stackoverflow.com/users/4090593/akash-rawal"}, "is_accepted": false, "score": 3, "last_activity_date": 1496260676, "creation_date": 1496260676, "answer_id": 44293665, "question_id": 44293206, "link": "https://stackoverflow.com/questions/44293206/how-to-send-a-6-character-c-string-over-a-socket-connection-with-a-1024-byte-buf/44293665#44293665", "title": "How to send a 6-character c-string over a socket connection with a 1024 byte buffer, and force flush", "body": "<p>It is <code>recv()</code> that is buffering 1024 bytes.</p>\n\n<p>You have 2 options:</p>\n\n<ol>\n<li><p>Read character-by-character (buffer size = 1). Inefficient but simple.</p></li>\n<li><p>Set <code>O_NONBLOCK</code> using <code>fcntl()</code> on client side and use <code>select()</code> to wait till there is data to read and then call <code>recv()</code>. Complex, you could get any number of data or even partial data, but it is going to be efficient.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 3, "last_activity_date": 1496266930, "creation_date": 1496266930, "answer_id": 44295127, "question_id": 44293206, "link": "https://stackoverflow.com/questions/44293206/how-to-send-a-6-character-c-string-over-a-socket-connection-with-a-1024-byte-buf/44295127#44295127", "title": "How to send a 6-character c-string over a socket connection with a 1024 byte buffer, and force flush", "body": "<p>My apologies for lack of clarity in my comment. </p>\n\n<p>It is impossible to reliably separate data based solely on the packet in which it arrived. Disabling Nagle's Algorithm with TCP_NODELAY may greatly improve the likelihood of getting the desired behaviour but nothing can guarantee it.</p>\n\n<p>For example: </p>\n\n<pre><code>Message A is written and sent immediately\nMessage B is written and sent immediately\nMessage A is delayed on the network (too many possible reasons to list)\nMessage B arrives at receiver\nMessage A arrives at receiver  \nReceiver makes Messages A and B available\n</code></pre>\n\n<p><code>recv</code> will read everything from the buffer, Message A and Message B, up to the maximum number of bytes requested. Without some method of telling Message A from Message B, you cannot proceed.</p>\n\n<p>OK, but you know the length of Message A and Message B, 6 bytes, so you simply <code>recv</code> 6 bytes. Right?</p>\n\n<p>Almost. For a number of reasons, the sender may not be able to send the whole message in one packet and a <code>recv</code> for 6 bytes only returns, say, 2. </p>\n\n<p>The only way to be sure, other than <a href=\"https://www.youtube.com/watch?v=aCbfMkh940Q\" rel=\"nofollow noreferrer\">nuking the site from orbit</a>, is to loop on recv until all 6 bytes have been read.</p>\n\n<pre><code>bool receiveAll(int sock, \n                char * bufp, \n                size_t len)\n{\n    int result;\n    size_t offset = 0;\n\n    while (len &gt; 0)\n    { // loop until we have all of our data\n        result = recv(sock, &amp;bufp[offset], len, 0);\n        if (result &lt; 0)\n        { // Socket is in a bad state \n            // handle error\n            return false;\n        }\n        else if (result == 0)\n        { // socket closed\n            return false;\n        }\n        len -= result;\n        offset += result;\n    }\n    return true;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>while(receiveAll(clientSocket, buffer 6)) {\n    printf(\"%s \",buffer);\n}\n</code></pre>\n\n<p>This will keep looping until the socket is closed or an error forces the loop to exit. No waiting is required, <code>recv</code> waits for you.</p>\n\n<p>What it doesn't have is a good mechanism for a polite shutdown of the client while the server is still running.</p>\n\n<p>This allows the sender to remain stupid. Otherwise the sender needs to do something similar making sure that it only ever sends full messages, and no messages ever straddle multiple packets. This is significantly more effort to get right than the loop in the <code>receiveAll</code> function. <a href=\"https://stackoverflow.com/a/44293665/4581301\">See Akash Rawal's answer</a> for hints on how to do this.</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2117, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1496266930, "creation_date": 1496258875, "last_edit_date": 1496262009, "question_id": 44293206, "link": "https://stackoverflow.com/questions/44293206/how-to-send-a-6-character-c-string-over-a-socket-connection-with-a-1024-byte-buf", "title": "How to send a 6-character c-string over a socket connection with a 1024 byte buffer, and force flush", "body": "<p>EDIT1: Per request of John Bollinger, I've included the full client and server code below.</p>\n\n<hr>\n\n<p>I am sending 4-digit penny prices over a socket connection; e.g., 43.75, 29.43, 94.75, etc. Buffer size is set to 1024 bytes. At the moment, I am converting <code>float</code> prices to c-strings for transmission--not optimal, but I'm working on it. By my calculations, price size is 6 bytes: 4 digits, a decimal point, and the c-string terminating character <code>'\\0'</code>.</p>\n\n<p>The problem is that, on the client side, prices are not printed until the 1024-byte buffer is full. I would like each price tick sent and handled as it comes in, and force  a buffer flush, and have each tick to be handled separately. In other words, I'd like each price to be sent in a separate packet, and not buffer the 1024 bytes.</p>\n\n<p>How can I force each price tick to be handled separately? Thanks for your help. Sincerely, Keith :^)</p>\n\n<p>The socket connection code is taken from the following url:\n<a href=\"http://www.programminglogic.com/example-of-client-server-program-in-c-using-sockets-and-tcp/\" rel=\"nofollow noreferrer\">http://www.programminglogic.com/example-of-client-server-program-in-c-using-sockets-and-tcp/</a></p>\n\n<p>Server-side:</p>\n\n<pre><code>char buffer[1024]; // buffer set to 1024\nchar res[1024] // res contains the a float rounded and converted to a string.\n\n// res is copied into buffer, and then sent with size 6:\n// 22.49\\0 = 6 characters.\n\nstrcpy(buffer, res);\nsend(newSocket,buffer,6,0);\n</code></pre>\n\n<p>Client-side:</p>\n\n<pre><code>while(1) {\n    recv(clientSocket, buffer, 1024, 0);\n    printf(\"%s \",buffer);\n}\n</code></pre>\n\n<p>I would expect the prices to print as they arrive, like so:</p>\n\n<pre><code>pickledEgg$ 49.61\npickledEgg$ 50.20\npickledEgg$ 49.97\npickledEgg$ etc..\n</code></pre>\n\n<p>but 1024 bytes worth of prices are being buffered:</p>\n\n<pre><code>pickledEgg$ 49.61 50.20 49.97 49.86 49.52 50.24 49.79 49.52 49.84 50.29 49.83 49.97 50.34 49.81 49.84 49.50 50.08 50.06 49.54 50.04 50.09 50.08 49.54 50.43 49.97 50.33 50.29 50.08 50.43 50.02 49.86 50.06 50.24 50.33 50.43 50.25 49.58 50.25 49.79 50.43 50.04 49.63 49.88 49.86 49.93 50.22 50.38 50.02 49.79 50.41 49.56 49.88 49.52 49.59 50.34 49.97 49.93 49.63 50.06 50.38 50.15 50.43 49.95 50.40 49.77 50.40 49.68 50.36 50.13 49.95 50.29 50.18 50.09 49.66 50.06 50.04 50.38 49.95 49.56 50.18 49.86 50.13 50.09 49.88 49.74 49.91 49.88 49.70 49.56 50.43 49.58 49.74 49.88 49.54 49.63 50.15 49.97 49.79 49.52 49.59 49.77 50.31 49.81 49.88 50.47 50.36 50.40 49.86 49.81 49.97 49.54 50.18 50.11 50.13 50.08 50.36 50.06 50.45 50.06 50.13 50.38 49.65 49.88 50.29 49.70 50.00 50.45 49.68 50.29 50.47 50.29 50.09 50.27 49.59 50.45 50.24 50.47 49.88 50.11 49.77 49.86 50.16 49.97 50.47 50.31 49.56 49.84 50.38 50.02 50.40 49.52 49.90 50.09 49.90 50.20 49.81 50.38 50.15 49.99 49.70 50.11 49.77 49.79 49.88 49.88 49.75 50.13 50.36 49.63 49.74 50.1\n</code></pre>\n\n<p>EDIT1: Server-side code:</p>\n\n<pre><code>/****************** SERVER CODE ****************/\n\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nvoid reverse(char *str, int len)\n{\n    int i=0, j=len-1, temp;\n    while (i&lt;j)\n    {\n        temp = str[i];\n        str[i] = str[j];\n        str[j] = temp;\n        i++; j--;\n    }\n}\n\nint intToStr(int x, char str[], int d)\n{\n    int i = 0;\n    while (x)\n    {\n        str[i++] = (x%10) + '0';\n        x = x/10;\n    }\n\n    // If number of digits required is more, then\n    // add 0s at the beginning\n    while (i &lt; d)\n        str[i++] = '0';\n\n    reverse(str, i);\n    str[i] = '\\0';\n    return i;\n}\n\nvoid ftoa(float n, char *res, int afterpoint)\n{\n    // Extract integer part\n    int ipart = (int)n;\n\n    // Extract floating part\n    float fpart = n - (float)ipart;\n\n    // convert integer part to string\n    int i = intToStr(ipart, res, 0);\n\n    // check for display option after point\n    if (afterpoint != 0)\n    {\n        res[i] = '.';  // add dot\n\n        // Get the value of fraction part upto given no.\n        // of points after dot. The third parameter is needed\n        // to handle cases like 233.007\n//        fpart = fpart * pow(10, afterpoint);\n        fpart = fpart * 100;\n\n        intToStr((int)fpart, res + i + 1, afterpoint);\n    }\n}\nfloat randPrice() {\n    int b;\n    float d;\n    b = 4950 + rand() % 100 + 1;\n    d = (float)b/100;\n    return d;\n}\nvoid wait() {\n  int i, j, k;\n    for (i=0; i&lt;10000; ++i) {\n      for (j=0; j&lt;10000; ++j) {\n        k = i + j + i * j;\n      }\n    }  \n}\n\nint main(){\n  int welcomeSocket, newSocket;\n  char buffer[1024];\n  struct sockaddr_in serverAddr;\n  struct sockaddr_storage serverStorage;\n  socklen_t addr_size;\n\n  char res[1024];\n  float n;\n\n  srand(time(NULL));\n\n  /*---- Create the socket. The three arguments are: ----*/\n  /* 1) Internet domain 2) Stream socket 3) Default protocol (TCP in this case) */\n  welcomeSocket = socket(PF_INET, SOCK_STREAM, 0);\n\n  /*---- Configure settings of the server address struct ----*/\n  /* Address family = Internet */\n  serverAddr.sin_family = AF_INET;\n  /* Set port number, using htons function to use proper byte order */\n  serverAddr.sin_port = htons(7891);\n  /* Set IP address to localhost */\n  serverAddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n  /* Set all bits of the padding field to 0 */\n  memset(serverAddr.sin_zero, '\\0', sizeof serverAddr.sin_zero);  \n\n  /*---- Bind the address struct to the socket ----*/\n  bind(welcomeSocket, (struct sockaddr *) &amp;serverAddr, sizeof(serverAddr));\n\n  /*---- Listen on the socket, with 5 max connection requests queued ----*/\n  if(listen(welcomeSocket,5)==0)\n    printf(\"Listening\\n\");\n  else\n    printf(\"Error\\n\");\n\n  /*---- Accept call creates a new socket for the incoming connection ----*/\n  addr_size = sizeof serverStorage;\n  newSocket = accept(welcomeSocket, (struct sockaddr *) &amp;serverStorage, &amp;addr_size);\n\n  /*---- Send prices to the socket of the incoming connection ----*/\n\n while(1) {\n    n = randPrice(); // Get a random, float price\n    ftoa(n, res, 2); // Convert price to string\n    strcpy(buffer, res); // copy to buffer\n    send(newSocket,buffer,6,0); // send buffer\n    wait();\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Client-side code:</p>\n\n<pre><code>/****************** CLIENT CODE ****************/\n\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\nvoid wait() {\n  int i, j, k;\n    for (i=0; i&lt;10000; ++i) {\n      for (j=0; j&lt;10000; ++j) {\n        k = i + j + i * j;\n      }\n    }  \n}\n\nint main(){\n  int clientSocket;\n  char buffer[1024];\n  struct sockaddr_in serverAddr;\n  socklen_t addr_size;\n\n  /*---- Create the socket. The three arguments are: ----*/\n  /* 1) Internet domain 2) Stream socket 3) Default protocol (TCP in this case) */\n  clientSocket = socket(PF_INET, SOCK_STREAM, 0);\n\n  /*---- Configure settings of the server address struct ----*/\n  /* Address family = Internet */\n  serverAddr.sin_family = AF_INET;\n  /* Set port number, using htons function to use proper byte order */\n  serverAddr.sin_port = htons(7891);\n  /* Set IP address to localhost */\n  serverAddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n  /* Set all bits of the padding field to 0 */\n  memset(serverAddr.sin_zero, '\\0', sizeof serverAddr.sin_zero);  \n\n  /*---- Connect the socket to the server using the address struct ----*/\n  addr_size = sizeof serverAddr;\n  connect(clientSocket, (struct sockaddr *) &amp;serverAddr, addr_size);\n\n  /*---- Read the message from the server into the buffer ----*/\n\n  int r = 0;\n\n  while(1) {\n    r = recv(clientSocket, buffer, 1024, 0);\n    printf(\"recv value: %i\\n\", r);\n    printf(\"%s \",buffer);\n    wait();\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "git", "github", "boost"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1496259163, "post_id": 44293165, "comment_id": 75592938, "body": "Hmm, are you actually trying to build boost using CMake as a git submodule of your own project?"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1496259343, "post_id": 44293165, "comment_id": 75593037, "body": "No, I use CMake to download and build boost as an external project, and link it to my project. But boost itself, is build with several submodules, which are downloaded and build at compile time. However, for some reason, now the cloning of the submodule libs/context in boost doesn&#39;t work anymore."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1496765536, "post_id": 44293165, "comment_id": 75789675, "body": "Can someone properly compile it on Windows ?"}], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "is_accepted": true, "score": 0, "last_activity_date": 1497037511, "creation_date": 1497037511, "answer_id": 44465638, "question_id": 44293165, "link": "https://stackoverflow.com/questions/44293165/building-boost-fail-checking-out-submodule-libs-context/44465638#44465638", "title": "Building boost fail checking out submodule libs/context", "body": "<p>I contacted boost developers, and they confirmed something was wrong in the repo. They now have fixed it.</p>\n"}], "owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 44465638, "answer_count": 1, "score": 0, "last_activity_date": 1497037511, "creation_date": 1496258690, "last_edit_date": 1496417961, "question_id": 44293165, "link": "https://stackoverflow.com/questions/44293165/building-boost-fail-checking-out-submodule-libs-context", "title": "Building boost fail checking out submodule libs/context", "body": "<p>I'm trying to build boost using the git repo (<a href=\"https://github.com/boostorg/boost\" rel=\"nofollow noreferrer\">https://github.com/boostorg/boost</a>) with the commit (5ec478a570bdc71c5d4854e7165a8b3f4fa82ad9) on Windows.</p>\n\n<p>I created a CMakeFile, and until few days ago, everything was working well. I didn't modify anything since then, but now it fails when checking out submodule libs/context:</p>\n\n<pre><code>Cloning into 'libs/context'...\n1&gt;CUSTOMBUILD : error : no such remote ref 2ddbe4c26813134cdf8f0d169f70cd85f44b637b\n1&gt;  Fetched in submodule path 'libs/context', but it did not contain 2ddbe4c26813134cdf8f0d169f70cd85f44b637b. Direct fetching of that commit failed.\n1&gt;  CMake Error at Boost-prefix/tmp/Boost-gitclone.cmake:83 (message):\n1&gt;    Failed to update submodules in:\n1&gt;    'C:/Users/Me/Project-build/Libraries-build/Boost/boost'\n</code></pre>\n\n<p>I checked the commit in libs/context, and it seems to be there:</p>\n\n<p><a href=\"https://github.com/boostorg/context/commit/2ddbe\" rel=\"nofollow noreferrer\">https://github.com/boostorg/context/commit/2ddbe</a></p>\n\n<p>I'm not very familiar with the submodule structure of git, so I'm not sure what is going on. I fixed the boost git tag to always use the same version (which was working for me), so I don't understand why it's not working anymore.</p>\n\n<p>Thank you.</p>\n\n<p>Edit: Does anyone has the same issue (is it coming from the repo?), or is it something coming from my configuration?</p>\n"}, {"tags": ["c++", "c++11", "vector", "hashtable"], "comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1496257818, "post_id": 44292853, "comment_id": 75592201, "body": "Do you have a newline at the end of the last line of the file? If not and you add it, does it then work?"}, {"owner": {"reputation": 11, "user_id": 8093940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42d0d192b07baee9eaa4436c6e6fae9?s=128&d=identicon&r=PG&f=1", "display_name": "Dez", "link": "https://stackoverflow.com/users/8093940/dez"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1496257936, "post_id": 44292853, "comment_id": 75592275, "body": "No it doesn&#39;t work with or without the newline"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496258203, "post_id": 44292853, "comment_id": 75592435, "body": "Can you boil this down some?  There is a lot of unneeded code here."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1496258834, "post_id": 44292853, "comment_id": 75592765, "body": "Agreeing with @NathanOliver I recommend reading <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1496277710, "post_id": 44292853, "comment_id": 75599577, "body": "Are you passing the correct number of entries to <code>Table</code> constructor? Perhaps you are passing one fewer than there are lines in the file."}, {"owner": {"reputation": 11, "user_id": 8093940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42d0d192b07baee9eaa4436c6e6fae9?s=128&d=identicon&r=PG&f=1", "display_name": "Dez", "link": "https://stackoverflow.com/users/8093940/dez"}, "edited": false, "score": 0, "creation_date": 1496291856, "post_id": 44292853, "comment_id": 75602844, "body": "@ Igor, regardless of how many I pass the problem is the same."}], "owner": {"reputation": 11, "user_id": 8093940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42d0d192b07baee9eaa4436c6e6fae9?s=128&d=identicon&r=PG&f=1", "display_name": "Dez", "link": "https://stackoverflow.com/users/8093940/dez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1496258747, "creation_date": 1496257549, "last_edit_date": 1496258747, "question_id": 44292853, "link": "https://stackoverflow.com/questions/44292853/hash-table-doesnt-read-last-line-off-of-test-file", "title": "Hash table doesn&#39;t read last line off of test file", "body": "<p>I was assigned to create a chained hash table using a vector of vectors. It is designed to hold objects of type Entry. I have written all of the functions and the constructor but when I try to use the constructor that reads an input and then output it back to me in order of keys, whichever string was on the last line of the .txt file its reading from is gone. I think its a problem with my constructor because when I try to use get to get that specific value from the table before printing it its gone. I was hoping for some insight to where I might be going wrong from someone with a little more experience. Thanks. Heres my code:</p>\n\n<p>Entry Header File: </p>\n\n<pre><code>#ifndef entry_h\n#define entry_h\n\n// entry.h - defines class Entry            \n\n\n#include &lt;string&gt;\n#include &lt;iosfwd&gt;\n\nclass Entry {\n\npublic:\n    // constructor                                          \n    Entry(unsigned int key = 0, std::string data = \"\");\n\n    // access and mutator functions                         \n    unsigned int get_key() const;\n    std::string get_data() const;\n    static unsigned int access_count();\n    void set_key(unsigned int k);\n    void set_data(std::string d);\n\n    // operator conversion function simplifies comparisons  \n    operator unsigned int () const;\n\n    // input and output friends                             \n    friend std::istream&amp; operator&gt;&gt;\n    (std::istream&amp; inp, Entry &amp;e);\n    friend std::ostream&amp; operator&lt;&lt;\n    (std::ostream&amp; out, Entry &amp;e);\n\nprivate:\n    unsigned int key;\n    std::string data;\n    static unsigned int accesses;\n};\n\n#endif /* entry_h */\n</code></pre>\n\n<p>Table header file: </p>\n\n<pre><code>//\n//  table.h\n//  \n//\n#ifndef table_h\n#define table_h\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include \"entry.h\"\n\nusing namespace std;\n\nclass Table {\n\n public:\n  Table(unsigned int max_entries = 100);\n  //Builds empty table to hold 100 entries\n  Table(unsigned int entries, std::istream&amp; input);\n  //Builds table to hold entries, reads and puts them 1 at a time\n  ~Table();\n  //Destructor\n  void put(unsigned int key, std::string data);\n  //Creates new entry for the table\n  //Updates if key is used\n  void put(Entry e);\n  //Creates a copy of e in the table\n  string get(unsigned int key) const;\n  //Returns string associated with key\n  //Returns empty string if key isnt used\n  bool remove(unsigned int key);\n  //Removes entry in given key\n  //Returns true of removed, false of no entry\n  int find(Entry e);\n  //index in second array that e exists, 0 if not found\n  friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp; out, const Table&amp; t);\n  //Prints each entry in the table in order of their key\n\n\n private:\n  int size;\n  int num_entries;\n  unsigned int hashkey(unsigned int key) const;\n\n  vector&lt;vector&lt;Entry&gt; &gt; A;\n};\n\n#endif /* table_h */\n</code></pre>\n\n<p>Table Implementation File: </p>\n\n<pre><code>//table.cpp\n\n#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\n#include \"table.h\"\n\nusing namespace std;\n\n\nTable::Table(unsigned int max_entries){\n  max_entries = 100;\n  size = max_entries * 2;\n  A.resize(size);\n}\n\nTable::Table(unsigned int entries, std::istream&amp; input){\n  size = entries*2;\n  A.resize(size);\n  num_entries = entries;\n  Entry temp;\n  for (size_t i = 0; i &lt; entries; i++) {\n    input &gt;&gt; temp;\n    put(temp);\n  }\n}\n\nTable::~Table() {\n  A.clear();\n}\n\nvoid Table::put(unsigned int key, std::string data){\n  Entry e;\n  e.set_key(key);\n  e.set_data(data);\n  put(e);\n  num_entries++;\n}\n\nvoid Table::put(Entry e) {\n  if (A[hashkey(e.get_key())].empty()) {\n    A[hashkey(e.get_key())].push_back(e);\n    }\n  else {\n    for(size_t i = 0; i &lt; A[hashkey(e.get_key())].size(); i++) {\n    if (A[hashkey(e.get_key())][i].get_key() == e.get_key()) {\n      remove(A[hashkey(e.get_key())][i].get_key());\n      break;\n    }\n      }\n   A[hashkey(e.get_key())].push_back(e);\n  } \n}\n\nstring Table::get(unsigned int key) const {\n  if( A[hashkey(key)].size() == 0) {\n    return \"\";\n  }\n  else {\n    for (size_t i = 0; i &lt; A[hashkey(key)].size(); i++) {\n      if (A[hashkey(key)][i].get_key() == key) {\n    return A[hashkey(key)][i].get_data();\n      }\n      else {\n    return \"\";\n      }\n    }\n  }\n}\n\nbool Table::remove(unsigned int key) {\n  for (size_t i = 0; i &lt; A[hashkey(key)].size(); i++) {\n    if (A[hashkey(key)][i].get_key() == key) {\n    swap(A[hashkey(key)][i],A[hashkey(key)][A[hashkey(key)].size() - 1]);\n    A[hashkey(key)].pop_back();\n    num_entries--; \n        return true;\n      }\n      else {\n    return false;\n      }\n  }\n}\n\nint Table::find(Entry e) {\n  for (size_t i = 0; i &lt; A[hashkey(e.get_key())].size(); i++) {\n      if (A[hashkey(e.get_key())][i] == e) {\n    return i;\n      }\n      else {\n    return 0;\n      }\n  }\n}\n\nostream&amp; operator &lt;&lt; (ostream&amp; out, const Table&amp; t) {\n  vector&lt;Entry&gt; order;\n  for(size_t i = 0; i &lt; t.A.size(); i++) {\n    for (size_t j = 0; j &lt; t.A[i].size(); j++) {\n      order.push_back(t.A[i][j]);\n    }\n  }\n  sort(order.begin(), order.end());\n  for(Entry k: order) {\n    out &lt;&lt; k &lt;&lt; endl;\n  }\n  return out;\n}\n\nunsigned int Table::hashkey(unsigned int key) const{\n  const double c = 1.61803;\n  // return key % size;\n  return (int)(size*((key * c) - (int)(key * c)));\n}\n</code></pre>\n"}, {"tags": ["c++", "file", "design-patterns", "stream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496257533, "post_id": 44292785, "comment_id": 75592026, "body": "What&#39;s the use case you want to tackle? Sounds like a XY problem for me."}, {"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496258231, "post_id": 44292785, "comment_id": 75592446, "body": "Right... I understand your comment. Thanks. I tried to respond to it directly in the post (see Response to @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 comment)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1496258659, "post_id": 44292785, "comment_id": 75592672, "body": "Your link says that <code>ofstream</code> IS moveable, only <code>ostream</code> is not."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496258585, "post_id": 44293109, "comment_id": 75592637, "body": "This is what I would suggest, however there is another way peculiar to iostreams."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1496258602, "post_id": 44293109, "comment_id": 75592650, "body": "@BenVoigt: By all means reveal the secret!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496258628, "post_id": 44293109, "comment_id": 75592663, "body": "@BenVoigt: Is it something to do with stealing buffers (via <code>rdbuf</code>) in a hypothetical <code>file</code> move constructor? And is it impervious to <a href=\"https://stackoverflow.com/a/20774666/560648\">the problems Howard became concerned about back when streams <i>were</i> going to be moveable</a>?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496258731, "post_id": 44293109, "comment_id": 75592710, "body": "Yeah, <code>rdbuf()</code> is exactly it.  You then have a slight problem with lifetime management of the buffer objects.  Anyway, the linked answer by Howard Hinnant says that ofstream is moveable... off to check that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496258755, "post_id": 44293109, "comment_id": 75592727, "body": "@BenVoigt: Yeah I think the problems with that are why <code>std::ostream</code> <i>isn&#39;t</i> moveable."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496258893, "post_id": 44293109, "comment_id": 75592792, "body": "Another option is to store <code>filebuf</code> objects in the map (they&#39;re moveable) and let the streams be transient (temporarily associated to the <code>filebuf</code>, then detached and the stream gets destroyed while the <code>filebuf</code> remains)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496258980, "post_id": 44293109, "comment_id": 75592838, "body": "@BenVoigt: That&#39;s not terrible"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1496258731, "last_edit_date": 1496258731, "creation_date": 1496258450, "answer_id": 44293109, "question_id": 44292785, "link": "https://stackoverflow.com/questions/44292785/how-to-design-a-file-container-in-c/44293109#44293109", "title": "How to design a file container in C++?", "body": "<h3>If you only need <code>std::ofstream</code></h3>\n\n<p>No problem! These <em>are</em> moveable.</p>\n\n<hr>\n\n<h3>If you need <em>any</em> <code>std::ostream</code></h3>\n\n<p>Since <code>std::ostreams</code> cannot be copied or moved, your only option is to go back in time and store pointers instead. Use dynamic allocation to get fine control over the lifetime of your stubborn stream objects.</p>\n\n<p>Abstracting away your custom container, a basic example looks like this:</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;std::ostream&gt;&gt; container;\ncontainer.push_back(std::make_unique&lt;std::ostringstream&gt;());\ncontainer.push_back(std::make_unique&lt;std::ofstream&gt;(\"/tmp/lol\"));\n</code></pre>\n\n<p>&hellip;and so forth.</p>\n\n<p>Nice, huh? <code>#c++</code></p>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 44293109, "answer_count": 1, "score": -1, "last_activity_date": 1496258731, "creation_date": 1496257326, "last_edit_date": 1496258147, "question_id": 44292785, "link": "https://stackoverflow.com/questions/44292785/how-to-design-a-file-container-in-c", "title": "How to design a file container in C++?", "body": "<p>My plan is to build a <code>fileContainer</code> that consists mainly of a <code>std::map</code> that associate specific <code>file</code>s to an <code>ID</code>. Each <code>file</code> has for attributes a <code>ofstream</code>, a path (<code>string</code>) and a few other information. </p>\n\n<p>The problem is that an <code>ofstream</code> cannot be copied (<a href=\"https://stackoverflow.com/questions/6010864/why-copying-stringstream-is-not-allowed\">Why copying stringstream is not allowed?</a>) and cannot even be moved (<a href=\"https://stackoverflow.com/questions/20774587/why-cant-stdostream-be-moved\">Why can't std::ostream be moved?</a>). One can therefore not create <code>file</code> objects to then <code>insert</code> them into the map of the <code>fileContainer</code>.</p>\n\n<p>What I am trying to do is something like</p>\n\n<pre><code>file f(arguments...); // create a `file`\nFC.insert(f);         // Note the FC is a global singleton of class `fileContainer`\n...\n{\n   file&amp; f = FC.getFile(fileID); // find a specific file in the file container\n   f.open();\n   f.write(s1);\n   f.write(s2);\n   f.write(s3);\n   f.close();\n}\n</code></pre>\n\n<p>I fail to see how such functionality could be achieved without having to copy or move a <code>stream</code>. Can you help me out to build this type of functionality?</p>\n\n<p><strong>Response to @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 comment</strong></p>\n\n<p>My code can produce about 20 different types of files. The types of files (which I above call <code>ID</code>) that are actually being produce depends upon the user input.</p>\n\n<p>My goal is to have a <code>fileContainer</code> in which, I insert <code>file</code> objects. Those file objects are created while I read the input. Each <code>file</code> object match to a file <code>ID</code>. For any given <code>file</code> object a single file is being produced but for others, several files are being produced (information that can be gathered only during the process).</p>\n\n<p>During the process, I would just look at whether a given <code>ID</code> is present in the <code>fileContainer</code> and if it is, then I write to it the associated file.</p>\n\n<p>I already have a working version of the code, the issue is that it does not compile on every machine (looks like some compilers are fine with moving streams while others aren't)</p>\n"}, {"tags": ["c++", "visual-studio", "compiler-warnings"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1496257401, "post_id": 44292758, "comment_id": 75591962, "body": "<code>auto pos = it - first.begin();</code>?"}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496259277, "post_id": 44292758, "comment_id": 75593006, "body": "@NathanOliver In this example the type would then be an int and that would move the warning to the next line where an unsigned is needed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496259449, "post_id": 44292758, "comment_id": 75593099, "body": "It does?  It doesn&#39;t on my machine."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496259609, "post_id": 44292758, "comment_id": 75593179, "body": "@NathanOliver Interesting. Are you sure you turned /Wall on?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496259825, "post_id": 44292758, "comment_id": 75593312, "body": "There we go.  I forgot to bump up the warning level.  I was on /W3."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496260352, "post_id": 44292758, "comment_id": 75593638, "body": "I think the best you can do is abstract the cast away with a custom <code>distance</code> function that returns a unsigned type."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496274715, "post_id": 44292758, "comment_id": 75598867, "body": "This sort of warning is annoying, as it&#39;s literally impossible for the result of subtraction to be out of range for size_t . I&#39;d prefer to disable the warning than to mangle code which is correct and idiomatic."}], "answers": [{"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 1, "last_activity_date": 1496261719, "creation_date": 1496261719, "answer_id": 44293916, "question_id": 44292758, "link": "https://stackoverflow.com/questions/44292758/avoiding-c4365-when-mixing-index-and-pointer-arithmetic-without-casting/44293916#44293916", "title": "Avoiding C4365 when mixing index and pointer arithmetic without casting", "body": "<p>Code below will generate no warning, as you'll add a <code>int</code> to an iterator, which is valid.</p>\n\n<pre><code>int main(int, char *[])\n{\n    //contrived example, never mind the non C4365 issues in this code\n    //I am aware that this makes not a lot of sense runtime wise\n    //This question is about a compiler warning\n    int target;\n    std::vector&lt;char&gt; first;\n    std::vector&lt;long&gt; second;\n\n    auto it = std::find(first.begin(), first.end(), target);\n    auto it2 = second.begin() + ( it - first.begin() );\n    long result = *it2;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 44293916, "answer_count": 1, "score": 1, "last_activity_date": 1496261719, "creation_date": 1496257223, "last_edit_date": 1496260760, "question_id": 44292758, "link": "https://stackoverflow.com/questions/44292758/avoiding-c4365-when-mixing-index-and-pointer-arithmetic-without-casting", "title": "Avoiding C4365 when mixing index and pointer arithmetic without casting", "body": "<p>I have a code base where templates look up a value in one vector and then use the calculated index to get a value at a certain position.</p>\n\n<p>Here is a bit of source made for visual studio to give a rough idea:</p>\n\n<pre><code>#pragma once\n#pragma warning(disable: 4514)\n#pragma warning(disable: 4710) \n#pragma warning(disable: 4189)\n#include &lt;vector&gt;\n\nint main(int, char *[])\n{\n    //contrived example, never mind the non C4365 issues in this code\n    //I am aware that this makes not a lot of sense runtime wise\n    //This question is about a compiler warning\n    int target;\n    std::vector&lt;char&gt; first;\n    std::vector&lt;long&gt; second;\n\n    auto it = std::find(first.begin(), first.end(), target);\n    //Warning C4365 '...': conversion from '...' to '...', signed/unsigned mismatch\n    std::size_t pos = it - first.begin(); //from int to std::size_t\n    long result = second.at(pos);\n\n    return 0;\n}\n</code></pre>\n\n<p>I am specifically interested in warning C4365.\n<a href=\"https://msdn.microsoft.com/en-us/library/ms173683.aspx\" rel=\"nofollow noreferrer\">MSDN</a> has an entry and there is another <a href=\"https://stackoverflow.com/questions/22559499/why-do-random-access-iterators-arithmetic-operators-accept-return-int-and-not\">stackoverflow</a> question related to this one.</p>\n\n<p>I understand that this <code>std::size_t pos = static_cast&lt;size_t&gt;(it - first.begin());</code> removes the warning.</p>\n\n<p>My question is if the above lookup and get value can be written so that a cast is not needed to avoid the warning.</p>\n\n<p>EDIT: I did not mention that this warning is on warning level 4 and off by default.</p>\n"}, {"tags": ["c++", "gcc", "console-application", "codeblocks"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496256984, "post_id": 44292632, "comment_id": 75591715, "body": "<i>&quot;When executed it ...&quot;</i> Hcw are you doing so? Is <a href=\"http://forums.codeblocks.org/index.php?topic=20692.0\" rel=\"nofollow noreferrer\">this</a> helpful?"}, {"owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496257063, "post_id": 44292632, "comment_id": 75591762, "body": "Doesn&#39;t matter, at least it doesn&#39;t mind. I execute by clicking the .exe file which popups the console but shows nothing. When I start it by opening the command line and than starting the .exe file it also shows me nothing"}], "owner": {"reputation": 703, "user_id": 7114793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a2b17f579d15da5cedb9b57581fe9651?s=128&d=identicon&r=PG&f=1", "display_name": "TVA van Hesteren", "link": "https://stackoverflow.com/users/7114793/tva-van-hesteren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496257363, "creation_date": 1496256797, "last_edit_date": 1496257363, "question_id": 44292632, "link": "https://stackoverflow.com/questions/44292632/c-console-application-outputs-nothing-and-wont-quit-codeblocks-mingw-gcc", "title": "C++ console application outputs nothing and won&#39;t quit? Codeblocks MinGW GCC", "body": "<p>I have a C++ application which is build statically against libcurl. The application compiles perfectly, however when I execute the application it returns nothing on the console. Neither it shows anything when I redirect the output to e.g. <code>&gt; output.txt</code>.</p>\n\n<p>The code is just:</p>\n\n<pre><code>int main(void) {\n   cout &lt;&lt; \"Show me\" &lt;&lt; endl; //Or not... :(\n   return 0;\n}\n</code></pre>\n\n<p>When executed it just starts the console and keeps black, nothing is happening.</p>\n"}, {"tags": ["c++", "qt", "qapplication"], "answers": [{"comments": [{"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1496257449, "post_id": 44292711, "comment_id": 75591983, "body": "Thanks for the answer but I still don&#39;t understand when should I use it and if I can use it in the example shown in the question."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1496257563, "last_edit_date": 1496257563, "creation_date": 1496257077, "answer_id": 44292711, "question_id": 44292561, "link": "https://stackoverflow.com/questions/44292561/when-should-i-use-qapp-setproperty-on-qt/44292711#44292711", "title": "When should I use qApp-&gt;setProperty on Qt", "body": "<p>This function is not displayed in the main view of the <a href=\"http://doc.qt.io/qt-5/qapplication.html\" rel=\"nofollow noreferrer\">QApplication documentation</a>. </p>\n\n<p>On this page there is a section called: <a href=\"http://doc.qt.io/qt-5/qapplication-members.html\" rel=\"nofollow noreferrer\">List of all members, including inherited members</a>, in them you will find all the properties that you have either exclusive or your parent classes.</p>\n\n<p>Looking for this function is established in <code>QObject</code>:</p>\n\n<blockquote>\n  <p>bool QObject::setProperty(const char *name, const QVariant &amp;value)</p>\n  \n  <p>Sets the value of the object's name property to value.</p>\n  \n  <p>If the property is defined in the class using Q_PROPERTY then true is\n  returned on success and false otherwise. If the property is not\n  defined using Q_PROPERTY, and therefore not listed in the meta-object,\n  it is added as a dynamic property and false is returned.</p>\n  \n  <p>Information about all available properties is provided through the\n  metaObject() and dynamicPropertyNames().</p>\n  \n  <p>Dynamic properties can be queried again using property() and can be\n  removed by setting the property value to an invalid QVariant. Changing\n  the value of a dynamic property causes a QDynamicPropertyChangeEvent\n  to be sent to the object.</p>\n  \n  <p>Note: Dynamic properties starting with \"<em>q</em>\" are reserved for internal\n  purposes.</p>\n  \n  <p>See also property(), metaObject(), dynamicPropertyNames(), and\n  QMetaProperty::write().</p>\n</blockquote>\n\n<p><code>setProperty</code> is used to expose a property through its name, and if you could use it in your case since <code>qApp</code> is a pointer that can be accessed by your entire program.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1496755363, "last_edit_date": 1496755363, "creation_date": 1496432912, "answer_id": 44336413, "question_id": 44292561, "link": "https://stackoverflow.com/questions/44292561/when-should-i-use-qapp-setproperty-on-qt/44336413#44336413", "title": "When should I use qApp-&gt;setProperty on Qt", "body": "<p>Properties are provided by <code>QObject</code>, which <code>QApplication</code> is-a.</p>\n\n<p>The properties you're using are so-called dynamic properties and are very useful when you have an object that you can't otherwise modify, but need to add some additional data to it.</p>\n\n<p>Note that it's really bad style to pass string literals to <code>property</code> or <code>setProperty</code>: you can easily let typos sneak in. Because of that, properties should only be used with unique constant names:</p>\n\n<pre><code>// common code\n// proplist.h\n\nPROPLIST_PROP(databasePath)\nPROPLIST_PROP(foo)\n\n// interface\n// properties.h\n\n#define PROPLIST_PROP(name) static const char name[];\nstruct Prop {\n  #include \"proplist.h\"\n};\n#undef PROPLIST_PROP\n\n// implementation\n// properties.cpp\n\n#define PROPLIST_PROP(name) const char Prop::name[] = #name;\n#include \"proplist.h\"\n\n// use\nobj.setProperty(Prop::databasePath, ...);\nauto path = obj.property(Prop::databasePath).toString();\n</code></pre>\n\n<p>You can encapsulate the type <em>and</em> the name of a property:</p>\n\n<pre><code>// common code\n// proplist.h\n\nPROPLIST_PROP(QString, databasePath)\nPROPLIST_PROP(int, foo)\n\n// interface\n#define DECLARE_PROPERTY(type_, name_) using name_ = Property&lt;type_, struct name_&gt;;\n#define DEFINE_PROPERTY(type_, name_) const char name_::name[] = #name_;\n\ntemplate &lt;typename T, typename Tag&gt; Property {\n  static const char name[];\n  static T get(QObject * obj) {\n    return obj-&gt;property(name).value&lt;T&gt;();\n  }\n  static void set(QObject * obj, const T&amp; val) {\n    obj-&gt;setProperty(name, QVariant::fromValue(val));\n  }\n};\n\n#define PROPLIST_PROP DECLARE_PROPERTY\nnamespace Prop {\n  #include \"proplist.h\"\n}\n#undef PROPLIST_PROP\n\n// implementation\n#define PROPLIST_PROP DEFINE_PROPERTY\nnamespace Prop {\n  #include \"proplist.h\"\n}    \n\n// use\nProp::DatabasePath::set(obj, ...);\nauto path = Prop::DatabasePath::get(obj);\n</code></pre>\n\n<p>The major issue I see is that most likely you're abusing the property system and instead might benefit from a global settings object:</p>\n\n<pre><code>// interface\nstruct SettingsData {\n  SettingsData() { Q_ASSERT(!m_instance); m_instance = this; }\n  ~SettingsData() { m_instance = nullptr; }\n  static SettingsData * instance() { return m_instance; }\n\n  QString databasePath = \"some default value\";\n  int gizmoSize = 44;\nprivate:\n  static SettingsData * m_instance;\n};\n\nSettingsData &amp; Settings() { return *SettingsData::instance(); }\n\n// implementation\nSettingsData * SettingsData::m_instance;\n\n// use\nint main(int argc, char ** argv) {\n  QApplication app(argc, argv);\n  SettingsData settings;\n  ...\n}\n\nvoid test() {\n  Settings().databasePath = ...;\n  auto path = Settings().databasePath;\n}\n</code></pre>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 0, "accepted_answer_id": 44292711, "answer_count": 2, "score": 0, "last_activity_date": 1496755363, "creation_date": 1496256539, "question_id": 44292561, "link": "https://stackoverflow.com/questions/44292561/when-should-i-use-qapp-setproperty-on-qt", "title": "When should I use qApp-&gt;setProperty on Qt", "body": "<p>I'm not finding, on the <strong>Qt</strong> documentation, a section explaining about the <code>qApp-&gt;setProperty()</code> option (it is probably there, but I can't find it). Can someone explain to me basically how it works and when should I use it?</p>\n\n<p>I'm asking it because I need to define the path of my database file as a \"global constant\", to be used in many classes, so I was thinking in set it using the <code>setProperty</code> function.</p>\n\n<p>For example:</p>\n\n<pre><code>qApp-&gt;setProperty(\"DATABASE_PATH\", \"C:/../Database.db\");\n</code></pre>\n\n<p>Then, access it using:</p>\n\n<pre><code>qApp-&gt;property(\"DATABASE_PATH\").toString();\n</code></pre>\n\n<p>Can I do that or there is a better/correct way to do so?</p>\n"}, {"tags": ["c++", "ctags", "exuberant-ctags"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496256543, "post_id": 44292521, "comment_id": 75591485, "body": "And your question is? I don&#39;t spot a question mark."}, {"owner": {"reputation": 2181, "user_id": 1488207, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/da9a52bbd6751c56a730f345fcef3723?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Rehman Siddiqui", "link": "https://stackoverflow.com/users/1488207/taha-rehman-siddiqui"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496267314, "post_id": 44292521, "comment_id": 75596676, "body": "updated the question"}], "answers": [{"tags": [], "owner": {"reputation": 852, "user_id": 6386727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d18c3dc2b0939eb1c624ea2e6f8c03c7?s=128&d=identicon&r=PG", "display_name": "Masatake YAMATO", "link": "https://stackoverflow.com/users/6386727/masatake-yamato"}, "is_accepted": true, "score": 2, "last_activity_date": 1496590798, "creation_date": 1496590798, "answer_id": 44355795, "question_id": 44292521, "link": "https://stackoverflow.com/questions/44292521/how-to-modify-default-separator-for-ctags-generated-tag-file/44355795#44355795", "title": "How to Modify default separator for CTAGS generated tag file", "body": "<p>You may like xformat feature of Universal-ctags. With the feature you can define your own format of output.</p>\n\n<pre><code>[jet@localhost]~/var/ctags% cat input.c\n\n#define ZERO 0\nint main(void)\n{\n    return ZERO;\n}\n[jet@localhost]~/var/ctags% ./ctags -x --_xformat='(N, K, L) = (\"%{name}\", \"%{kind}\", %{line})' input.c\n\n(N, K, L) = (\"ZERO\", \"macro\", 1)\n(N, K, L) = (\"main\", \"function\", 2)\n</code></pre>\n\n<p><a href=\"http://docs.ctags.io/en/latest/news.html#customizing-xref-output\" rel=\"nofollow noreferrer\">http://docs.ctags.io/en/latest/news.html#customizing-xref-output</a> may give you more hints.</p>\n"}], "owner": {"reputation": 2181, "user_id": 1488207, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/da9a52bbd6751c56a730f345fcef3723?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Rehman Siddiqui", "link": "https://stackoverflow.com/users/1488207/taha-rehman-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 44355795, "answer_count": 1, "score": 0, "last_activity_date": 1496590798, "creation_date": 1496256383, "last_edit_date": 1496267301, "question_id": 44292521, "link": "https://stackoverflow.com/questions/44292521/how-to-modify-default-separator-for-ctags-generated-tag-file", "title": "How to Modify default separator for CTAGS generated tag file", "body": "<p>The default separator is tab character which is \\t. However, if there are comments in a line of code being analyzed it messes up the format of the generated tag file. How to Modify default separator for CTAGS generated tag file?</p>\n"}, {"tags": ["c++", "linux", "sockets", "bind"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1496256627, "post_id": 44292428, "comment_id": 75591534, "body": "<code>si.sin_addr.s_addr</code> is (probably) a 32-bit intreger, so whether your memcpy works will depend on the endianness of the machine. You should be using something like htons()."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1496256766, "post_id": 44292428, "comment_id": 75591597, "body": "On failure (e.g. of <code>bind</code>) you should use <code>perror</code> (or some other <code>errno</code> related thing ....)"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1496256833, "post_id": 44292428, "comment_id": 75591631, "body": "@BasileStarynkevitch - I understand what you mean, but in the above code, <code>bind()</code> does not return -1 (i.e. does not fail), so no use in checking <code>errno</code> for the current state of the code."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1496257021, "post_id": 44292428, "comment_id": 75591736, "body": "@NeilButterworth - Not sure I follow why...<code>addr[]</code> is an <code>unsigned char</code> array, so its content isn&#39;t endian-dependent: it actually is in network byte order (i.e. big-endian order), so it should be formatted correctly for the <code>bind</code>, no?"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1496257099, "post_id": 44292428, "comment_id": 75591783, "body": "@NeilButterworth - One other point: as I mentioned, I tried <code>htonl( INADDR_ANY )</code>, which aligns with your suggestion, but no change in behavior."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496257981, "post_id": 44292428, "comment_id": 75592313, "body": "When I run your program using <code>htonl(INADDR_ANY)</code>, <code>lsof</code> shows <code>sock    0,7      0t0 248811876 can&#39;t identify protocol</code>"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1496258050, "post_id": 44292428, "comment_id": 75592344, "body": "@NeilButterworth - fyi, that memcpy is legit; I checked the memory contents. Moreover, subsequent to the memcpy, if I <code>htonl()</code> it, the <code>bind()</code> then fails. So it&#39;s not the address endianness that&#39;s the problem."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496258428, "post_id": 44292428, "comment_id": 75592554, "body": "@Barmar - I was unfamiliar with <code>lsof</code> but tried it now. When I try <code>lsof | grep &quot;a.out&quot;</code> with the code as-is (i.e. without <code>htonl(INADDR_ANY)</code>), then I see this entry: <code>a.out 25998 user 3u sock 0,6 0t0 32683949 protocol: TCP</code> . Does this mean the code works? If so, why does an entry show up in <code>lsof</code> but not <code>netstat</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496258507, "post_id": 44292428, "comment_id": 75592600, "body": "Probably because you never called <code>listen()</code>."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496258918, "post_id": 44292428, "comment_id": 75592806, "body": "@Barmar - Sounds like you understand what&#39;s at play here. Would you be willing to elaborate in an answer? At the linked site I am learning from, the example text does not call <code>listen()</code> but implies that their similar/equivalent code should result in the expected output from <code>netstat</code>. I ran similar code using the <code>AF_LOCAL</code> domain, and in that case I did see expected output from <code>netstat</code> - is that because <code>listen()</code> is required for TCP sockets but not UDP sockets?"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496259130, "post_id": 44292428, "comment_id": 75592913, "body": "@Barmar - You hit the nail on the head! I added a call to <code>listen()</code> and I see my expected output from <code>netstat</code>. If you have anything more you can elaborate about what was behind this, I&#39;d be grateful (and you&#39;d get a point :) ). The text I was learning from was obviously deficient here."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496259332, "post_id": 44292428, "comment_id": 75593028, "body": "Normally <code>netstat</code> only shows connected sockets. Adding <code>-a</code> makes it also show listening sockets. But until you do one of those things, the socket isn&#39;t in any meaningful state."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496259272, "post_id": 44293290, "comment_id": 75593001, "body": "I think the issue is that the socket isn&#39;t yet in <i>any</i> TCP state. It&#39;s waiting for you to do something that sets the state."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1496259275, "post_id": 44293290, "comment_id": 75593004, "body": "Confirming that I observe the desired behavior by implementing your code addition. Thank you."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1496259153, "creation_date": 1496259153, "answer_id": 44293290, "question_id": 44292428, "link": "https://stackoverflow.com/questions/44292428/does-this-socket-bind-fail-if-so-why/44293290#44293290", "title": "Does this socket bind fail? If so why?", "body": "<p>You need to call either <code>listen()</code> or <code>connect()</code> on the socket to get it into a state that shows up in <code>netstat</code>. After the block that calls <code>bind()</code>, add:</p>\n\n<pre><code>  if (-1 == listen(sd_inet, 5)) {\n      std::cout &lt;&lt; \"listen() failed.\" &lt;&lt;std::endl;\n      close(sd_inet);\n      return 1;\n  }\n</code></pre>\n\n<p>and then you'll see it:</p>\n\n<pre><code>tcp        0      0 *:9000                  *:*                     LISTEN      9912/testbind   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1496259560, "post_id": 44293321, "comment_id": 75593152, "body": "@StoneThrow: I&#39;m only ever a stone&#39;s throw away. :)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1496259298, "creation_date": 1496259298, "answer_id": 44293321, "question_id": 44292428, "link": "https://stackoverflow.com/questions/44292428/does-this-socket-bind-fail-if-so-why/44293321#44293321", "title": "Does this socket bind fail? If so why?", "body": "<p>To add a <em>why</em> to Barmar's answer, although <code>netstat --help</code> doesn't explain this, <a href=\"https://linux.die.net/man/8/netstat\" rel=\"nofollow noreferrer\">the manpage</a> does:</p>\n\n<blockquote>\n  <p><strong><code>-a, --all</code></strong><br>\n  Show both listening and non-listening (for TCP this means established connections) sockets</p>\n</blockquote>\n\n<p>That is, \"all\" is a bit of a misnomer.</p>\n\n<p>Your socket is neither listening (because you did not call <code>listen()</code> yet) nor \"non-listening\" according to the above definition (because you did not <code>connect()</code> anywhere either).</p>\n\n<p>Therefore, it is not listed.</p>\n\n<p>You would see it in <code>lsof</code> output in its embryonic state; quoting Barmar, it'll be something like:</p>\n\n<blockquote>\n<pre><code>sock 0,7 0t0 248811876 can't identify protocol\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 44293290, "answer_count": 2, "score": 1, "last_activity_date": 1496261145, "creation_date": 1496256076, "last_edit_date": 1496261145, "question_id": 44292428, "link": "https://stackoverflow.com/questions/44292428/does-this-socket-bind-fail-if-so-why", "title": "Does this socket bind fail? If so why?", "body": "<p>(Why doesn't this code work?)</p>\n\n<p>I'm learning Linux socket programming. The following code is based on an example at <a href=\"http://alas.matf.bg.ac.rs/manuals/lspe/snode=27.html\" rel=\"nofollow noreferrer\">this site</a> that I'm learning from:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;\n#include &lt;unistd.h&gt;\n\nint main( int argc, char* argv[] )\n{\n  // Create a socket with domain AF_INET and type SOCK_STREAM.\n  int sd_inet;\n  if ( -1 == ( sd_inet = socket( AF_INET, SOCK_STREAM, 0 ) ) )\n  {\n    std::cout &lt;&lt; \"socket() failed.\" &lt;&lt; std::endl;\n    return 1;\n  }\n\n  // Create an AF_INET address.\n  struct sockaddr_in si;\n  memset( &amp;si, 0, sizeof( si ) );\n  si.sin_family = AF_INET;\n  si.sin_port = htons( 9000 );\n  const unsigned char addr[] = { 127, 0, 0, 23 }; // Local loopback.\n  std::memcpy( &amp;si.sin_addr.s_addr, addr, sizeof( addr ) );\n  int si_len = sizeof( si );\n\n  // Bind the address to the socket.\n  if ( -1 == bind( sd_inet, (struct sockaddr*)&amp;si, si_len ) )\n  {\n    std::cout &lt;&lt; \"bind() failed.\" &lt;&lt; std::endl;\n    close( sd_inet );\n    return 1;\n  }\n\n  system( \"netstat -pa --tcp 2&gt;/dev/null \" );\n  close( sd_inet );\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>Desired behavior</strong>: The output of this program should display an entry for the bound socket created by this program.</p>\n\n<p><strong>Problem/Question</strong>: The output of <code>netstat</code> does not show the expected bound socket. Can someone please help identify what is wrong?</p>\n\n<p><strong>What else I have tried</strong>: I was unclear whether the <code>\"127.0.0.23\"</code> address should generically work, or if that was supposed to be a valid IP address that I have \"assigned\" to a network card on my box, so I experimented with assigning \"127.0.0.1\" and <code>htonl( INADDR_ANY )</code> to <code>si.sin_addr.s_addr</code>, as well as trying a <code>sin_port</code> value of <code>0</code>, but none of those experiments yielded different results.</p>\n\n<p>Compiled with gcc 4.8.3.</p>\n"}, {"tags": ["c++", "gtk"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1496254939, "post_id": 44292100, "comment_id": 75590595, "body": "Without knowing anything about <i>gtk</i>, I would say that where you do <code>GTK_CONTAINER(window)</code>, <code>window</code> is probably not a container"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496255066, "post_id": 44292100, "comment_id": 75590663, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496255651, "post_id": 44292100, "comment_id": 75590996, "body": "@Justin no, windows are containers."}], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "edited": false, "score": 0, "creation_date": 1496256098, "post_id": 44292378, "comment_id": 75591242, "body": "Thanks, I thought that <code>window</code> variable is the same one in <code>Window</code> and <code>Editor</code> classes."}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 1, "last_activity_date": 1496255834, "creation_date": 1496255834, "answer_id": 44292378, "question_id": 44292100, "link": "https://stackoverflow.com/questions/44292100/gtk-gtk-is-container-failed/44292378#44292378", "title": "GTK+ &#39;GTK_IS_CONTAINER&#39; failed", "body": "<p>The copies of the instance variables in both <code>class Window</code> and <code>class Editor</code> that are inherited from <code>class App</code> are <strong>unique</strong>. You can't share data like that; <code>Window::window</code> and <code>Editor::window</code> are different variables, and <code>Editor::window</code> never gets initialized.</p>\n\n<p>This is a fundamental part of how inheritance works in C++. If you are not familiar with that, you should read a C++ book or tutorial on the subject.</p>\n\n<p>If you are familiar with that and just forgot, then what you should be doing if you are going down this route is just have <code>class App</code> have all your program logic in it, and have <code>main()</code> work exclusively with an instance of <code>class App</code>. You should also consider gtkmm, which is a C++ wrapper on top of GTK+ that allows you to work with GTK+ as if it was C++.</p>\n"}], "owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 44292378, "answer_count": 1, "score": -1, "last_activity_date": 1496255834, "creation_date": 1496254848, "question_id": 44292100, "link": "https://stackoverflow.com/questions/44292100/gtk-gtk-is-container-failed", "title": "GTK+ &#39;GTK_IS_CONTAINER&#39; failed", "body": "<p>I am learning GTK+ and as an exercise I am trying to make a simple GUI text editor. Here is simplified and shorter version of my code that illustrates the problem I am having:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nclass App\n{\nprotected:\n    GtkWidget *window;\n    GtkTextBuffer *buffer;\n    GtkWidget *view;\n};\n\nclass Window: public App\n{\npublic:\n    Window()\n    {\n        window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n        gtk_window_set_default_size(GTK_WINDOW(window), 200, 200);\n        g_signal_connect(window, \"delete-event\", G_CALLBACK(gtk_main_quit), 0);\n    }\n    void show()\n    {\n        gtk_widget_show_all(window);\n    }\n};\n\nclass Editor: public App\n{\npublic:\n    Editor()\n    {\n        view = gtk_text_view_new();\n        buffer = gtk_text_view_get_buffer(GTK_TEXT_VIEW(view));\n        gtk_text_buffer_set_text(buffer, \"TEXT\", -1);\n        add();\n    }\nprivate:\n    void add()\n    {\n        gtk_container_add(GTK_CONTAINER(window), view);\n    }\n};\n\nint main(int argc, char *argv[])\n{\n    gtk_init(&amp;argc, &amp;argv);\n    Window *w = new Window();\n    Editor *e = new Editor();\n    w-&gt;show();\n    delete w;\n    delete e;\n    gtk_main();\n}\n</code></pre>\n\n<p>The program compiles and runs but it should show on the screen editable widget with text \"TEXT\" written into it, which it doesn't.\nRunning this program in terminal shows this message: <code>(test.o:23861): Gtk-CRITICAL **: gtk_container_add: assertion 'GTK_IS_CONTAINER (container)' failed</code>.\nMy question is what causes this and how I can fix it.</p>\n"}, {"tags": ["c++", "templates", "member-function-pointers", "syntactic-sugar"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1496255550, "post_id": 44292012, "comment_id": 75590932, "body": "here is how it can be done in c++11 : <a href=\"https://stackoverflow.com/a/28892710/4117728\">stackoverflow.com/a/28892710/4117728</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1496255703, "post_id": 44292012, "comment_id": 75591034, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14783876/c-is-it-possible-to-extract-class-and-argument-types-from-a-member-function\">C++ - is it possible to extract class and argument types from a member function type in a template?</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1496257060, "post_id": 44292012, "comment_id": 75591758, "body": "@tobi303: Not a duplicate, because he doesn&#39;t <i>have</i> a member function type, he has a member function pointer... which can&#39;t even be made a template parameter in C++14 and below, unless its type is named."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 531, "user_id": 5410757, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sE4bZ.png?s=128&g=1", "display_name": "PaulProgrammerNoob", "link": "https://stackoverflow.com/users/5410757/paulprogrammernoob"}, "edited": false, "score": 1, "creation_date": 1496262146, "post_id": 44292050, "comment_id": 75594467, "body": "gcc already supports <code>-std=C++17</code> (with that feature), clang supports <code>-std=c++1z</code>"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 8, "last_activity_date": 1496254701, "creation_date": 1496254701, "answer_id": 44292050, "question_id": 44292012, "link": "https://stackoverflow.com/questions/44292012/method-function-pointer-template-without-naming-class-type/44292050#44292050", "title": "Method function pointer template without naming class type", "body": "<p>It would be possible in C++17 with <code>auto</code></p>\n\n<pre><code>template&lt;auto Method, typename T&gt;\nvoid circuitousInvoke(T* callee) {\n    (callee-&gt;*Method)();\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>A a;\ncircuitousInvoke&lt;&amp;A::test&gt;(&amp;a);\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 5410757, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/sE4bZ.png?s=128&g=1", "display_name": "PaulProgrammerNoob", "link": "https://stackoverflow.com/users/5410757/paulprogrammernoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 2, "accepted_answer_id": 44292050, "answer_count": 1, "score": 6, "last_activity_date": 1496297307, "creation_date": 1496254558, "last_edit_date": 1496297307, "question_id": 44292012, "link": "https://stackoverflow.com/questions/44292012/method-function-pointer-template-without-naming-class-type", "title": "Method function pointer template without naming class type", "body": "<p>Consider this <code>template</code> function, invoking a method of an object of <code>class T</code>.</p>\n\n<pre><code>template&lt;class T, void (T::*Method)()&gt;\nvoid circuitousInvoke(T* callee) {\n    (callee-&gt;*Method)();\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>struct A {\n    void test() {};\n}\n\ncircuitousInvoke&lt;A, &amp;A::test&gt;(new A);\n</code></pre>\n\n<p>As the type T is already known to circuitousInvoke from parameter <code>callee</code>, is there a way to avoid typing this type?</p>\n\n<pre><code>circuitousInvoke&lt;&amp;A::test&gt;(new A);\n</code></pre>\n\n<h2>EDIT</h2>\n\n<p>This question refers to template functions only. Inheritance and other class based solutions are not suitable in this case. (In my project using a wrapper object would be more worse than typing an additional name.)</p>\n"}, {"tags": ["c++", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1496254342, "post_id": 44291940, "comment_id": 75590268, "body": "The <code>if</code> branch doesn&#39;t return a value."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1496254356, "post_id": 44291940, "comment_id": 75590279, "body": "When <code>x % y == 0</code>, your function doesn&#39;t return; this is undefined behavior"}, {"owner": {"reputation": 9, "user_id": 6285917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d9e34a9b44d33b1114e4334991d927?s=128&d=identicon&r=PG&f=1", "display_name": "Rafiq Reefat", "link": "https://stackoverflow.com/users/6285917/rafiq-reefat"}, "edited": false, "score": 0, "creation_date": 1496254678, "post_id": 44291940, "comment_id": 75590441, "body": "thanks for helping .. :)"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1496254991, "creation_date": 1496254991, "answer_id": 44292145, "question_id": 44291940, "link": "https://stackoverflow.com/questions/44291940/why-output-differs-if-i-erase-else-from-the-function/44292145#44292145", "title": "Why output differs if i erase &quot;else&quot; from the function?", "body": "<p>Your function has <strong>undefined behavior</strong>.  When the <code>%</code> operator returns a non-zero value, your function is not returning anything at all, so the output is garbage.  You need to return the result of the recursive call:</p>\n\n<pre><code>int euclidGcd(int x, int y)\n{\n    if ((x % y) != 0)\n        return euclidGcd(y, x % y); // &lt;-- here\n    else\n        return y;\n}\n</code></pre>\n\n<p>However, based on <a href=\"https://en.wikipedia.org/wiki/Euclidean_algorithm#Implementations\" rel=\"nofollow noreferrer\">Wikipedia's description</a> of the algorithm, the function should look like this instead:</p>\n\n<pre><code>int euclidGcd(int x, int y)\n{\n    if (y != 0)\n       return euclidGcd(y, x % y);\n    else\n       return x; \n}\n</code></pre>\n\n<p>Or, using the other described implementations that don't use recursion at all:</p>\n\n<p>Division-based:</p>\n\n<pre><code>int euclidGcd(int x, int y)\n{\n    while (y != 0)\n    {\n        int t = y; \n        y = x % y; \n        x = t; \n    }\n    return x;\n}\n</code></pre>\n\n<p>Subtraction-based:</p>\n\n<pre><code>int euclidGcd(int x, int y)\n{\n    while (x != y)\n    { \n        if (x &gt; y)\n            x -= y; \n        else\n            y -= x; \n    }\n    return x;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6285917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d9e34a9b44d33b1114e4334991d927?s=128&d=identicon&r=PG&f=1", "display_name": "Rafiq Reefat", "link": "https://stackoverflow.com/users/6285917/rafiq-reefat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1496406265, "accepted_answer_id": 44292145, "answer_count": 1, "score": -3, "last_activity_date": 1496254991, "creation_date": 1496254299, "question_id": 44291940, "link": "https://stackoverflow.com/questions/44291940/why-output-differs-if-i-erase-else-from-the-function", "closed_reason": "Not suitable for this site", "title": "Why output differs if i erase &quot;else&quot; from the function?", "body": "<p>I am trying to write a GCD function to calculate gcd of two integers using euclids algorithm. In the function if i erase \"else\" it outputs 3 which is incorrect . But if i use \"else\" it outputs 1 which is the correct output. i assume if i don't use \"else\" the function is still correct. Why am i getting  two different outputs.</p>\n\n<p>Here is my code, </p>\n\n<pre><code> #include &lt;iostream&gt;\n\nusing namespace std;\n\n\nint euclidGcd(int x , int y){\n\n    if(x%y!=0)\n        euclidGcd(y , x%y );\n    else\n        return y;\n\n}\n\nint main(){\n\n    cout&lt;&lt;euclidGcd(2,3)&lt;&lt;\"\\n\";\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "logging"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496253766, "post_id": 44291733, "comment_id": 75589988, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}], "answers": [{"tags": [], "owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "is_accepted": false, "score": 0, "last_activity_date": 1496254509, "creation_date": 1496254509, "answer_id": 44291997, "question_id": 44291733, "link": "https://stackoverflow.com/questions/44291733/c-logger-multiple-process-support-logger/44291997#44291997", "title": "C ++ logger Multiple process support logger", "body": "<p>One strategy that I've used also works on a distributed computing system accross multiple machines.  </p>\n\n<p>If you create a library which will package log messages and then send them via TCP to a destination, then you can have as many processes as you like writing to the same logger.  You'd need a server at that destination to receive the log messages and write them to one file.</p>\n\n<p>Generally, inter-process communication occurs via either shared memory or networking.  Using networking we can go not-only inter-process, but also inter machine.  If we just use the destination of localhost or 127.0.0.1, then the packet never actually reaches the network card.  Most drivers are smart enough to just pass the packet to any processes listening, leading to good performance too.</p>\n"}], "owner": {"reputation": 1, "user_id": 7751062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3025b2f46a70be4f4ebdd25e9366491a?s=128&d=identicon&r=PG&f=1", "display_name": "ramchin", "link": "https://stackoverflow.com/users/7751062/ramchin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496254509, "creation_date": 1496253613, "question_id": 44291733, "link": "https://stackoverflow.com/questions/44291733/c-logger-multiple-process-support-logger", "title": "C ++ logger Multiple process support logger", "body": "<p>Muliple process access to writing on same file simultaneously..if the file size is excess on the limit(example 10mb),the processing file is renamed(sample.txt to sample1.txt)rolling appender) and create a new one on the same name.</p>\n\n<p>My issue is ,multiple process writing  at same time,File size exceed time file closed, if one of the process is still writing on same file. doesnt File rolling .can any one help </p>\n"}, {"tags": ["c++", "ifstream", "seekg"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496253398, "post_id": 44291635, "comment_id": 75589800, "body": "Compare the files in a hex editor. Maybe there&#39;s a BOM or some weird unseen crap at the start of the file, that the OS reads and skips for you (unless you open the file in binary mode)."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496253649, "post_id": 44291635, "comment_id": 75589922, "body": "added the hex views at the bottom. Both first 2 characters are the same, so I don&#39;t see how it would impact seekg."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496253805, "post_id": 44291635, "comment_id": 75590008, "body": "What OS and compiler are you using? Please include the exact versions."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496253843, "post_id": 44291635, "comment_id": 75590031, "body": "Windows, mingw, gcc 5.3.0"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1496253855, "post_id": 44291635, "comment_id": 75590038, "body": "Maybe you actually need to open file as binary to read byte-by-byte? <code>std::ifstream f(&quot;file.txt&quot;, std::ios::binary);</code>"}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1496254074, "post_id": 44291635, "comment_id": 75590145, "body": "passing <code>ifstream::in | ifstream::binary</code>/<code>ios::in | ios::binary</code> as second argument to the ifstream constructor indeed fixes this. I am still curious what causes  the default mode to behave this way."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 5, "creation_date": 1496254175, "post_id": 44291635, "comment_id": 75590190, "body": "@Dmitry When a file is open in text mode, the return value of <code>tellg()</code> is unspecified (it is only meant to be used as an argument to <code>seekg()</code>)."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1496254310, "post_id": 44291635, "comment_id": 75590257, "body": "@Holt Quote the appropriate section in the standard and turn it into an answer!"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 2, "creation_date": 1496254793, "post_id": 44291635, "comment_id": 75590505, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22984956/tellg-function-give-wrong-size-of-file\">tellg() function give wrong size of file?</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1496254884, "post_id": 44291635, "comment_id": 75590557, "body": "@gsamaras Yes, though I think the answer here is better!"}], "answers": [{"comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1496256093, "post_id": 44292047, "comment_id": 75591240, "body": "I tested your answer by going to pubseekoff directly, and it indeed gives the same faulty values but only if the constructor of ifstream is not given <code>ios_base::in | ios_base::binary</code>. Still curious what&#39;s happening behind the scenes to produce these 1,6,7 results rather than 0, 1, 2."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1496296220, "post_id": 44292047, "comment_id": 75604173, "body": "@Dmitry This is highly OS (and compiler) dependent - In particular on Windows, you have some translation in text mode, e.g. for <code>&#39;\\n&#39;</code>. I tried your code with your text file, and I did not even get the same results as you (I got 7 8 and 2 3). This is probably because I added an extra <code>&#39;\\n&#39;</code>  at the end of each file, which would confirm the impact of the translation of <code>&#39;\\n&#39;</code>  on Windows."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 5, "last_activity_date": 1496254699, "creation_date": 1496254699, "answer_id": 44292047, "question_id": 44291635, "link": "https://stackoverflow.com/questions/44291635/ifstreamseekg-giving-wrong-results/44292047#44292047", "title": "ifstream::seekg giving wrong results", "body": "<p>There is nothing as a \"wrong\" result for a value returned by <code>tellg()</code>: when the file is opened in <strong>text mode</strong>, the return value is <strong>unspecified</strong> (i.e. it has no meaning except that it can be used as input for <code>seekg()</code>).</p>\n\n<p>Basically, a call to <code>tellg()</code> on a <code>basic_fstream</code> falls back to the <a href=\"http://en.cppreference.com/w/cpp/io/c/ftell\" rel=\"noreferrer\"><code>std::ftell</code></a><sup>1</sup> function, which says (C standard, &sect;7.21.9.4 [File positioning functions], emphasis is mine):</p>\n\n<blockquote>\n  <p><code>long int ftell(FILE *stream);</code></p>\n  \n  <p>The <code>ftell</code> function obtains the current value of the file position indicator for the stream pointed to by <code>stream</code>. [...] For a text stream, its file position indicator <strong>contains unspecified information</strong>, usable by the <code>fseek</code> function for returning the file position indicator for the\n  stream to its position at the time of the <code>ftell</code> call; the difference between two such return values is <strong>not necessarily a meaningful measure of the number of characters written or read.</strong></p>\n</blockquote>\n\n<p><sub><sup>1</sup> <code>tellg()</code> falls back to <code>rdbuf()-&gt;pubseekoff(0, std::ios_base::cur, std::ios_base::in)</code>, which falls back to <code>basic_filebuf::seekoff(0, std::ios_base::cur, std::ios_base::in)</code> which then falls back to <code>std::ftell()</code>.</sub></p>\n"}], "owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496256821, "creation_date": 1496253269, "last_edit_date": 1496256821, "question_id": 44291635, "link": "https://stackoverflow.com/questions/44291635/ifstreamseekg-giving-wrong-results", "title": "ifstream::seekg giving wrong results", "body": "<p>I am playing with ifstream to familiarize myself with it. I am trying to use seekg to tell the position of the file, but it is giving me wrong results.</p>\n\n<p>The idea is to:</p>\n\n<ol>\n<li>open the file</li>\n<li>print position of the file</li>\n<li>read a character from the file</li>\n<li>print position of the file</li>\n<li>read a character from the file</li>\n<li>print position of the file</li>\n<li>close the file.</li>\n</ol>\n\n<p>The original file looks like this(windows format):</p>\n\n<p><strong>file.txt</strong></p>\n\n<pre><code>aA\nbB\ncC\ndD\neE\nfF\n</code></pre>\n\n<p>running my code, I get the results:</p>\n\n<pre><code>position: 0\ngot: a\nposition: 6\ngot: A\nposition: 7\n</code></pre>\n\n<p>However, for this file:</p>\n\n<p><strong>file.txt</strong></p>\n\n<pre><code>aAbBcCdDeEfF\n</code></pre>\n\n<p>I get these results</p>\n\n<pre><code>position: 0\ngot: a\nposition: 1\ngot: A\nposition: 2\n</code></pre>\n\n<p>Here is the code I used:</p>\n\n<p><strong>test.cpp</strong>(mingw/gcc5.3)</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstatic char s[10];\n\nint main(int argc, char **argv)\n{\n    ifstream f(\"file.txt\");    \n    cout &lt;&lt; \"position: \" &lt;&lt; f.tellg() &lt;&lt; \"\\n\";\n    f.read(s, 1);\n    cout &lt;&lt; \"got: \" &lt;&lt; s &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"position: \" &lt;&lt; f.tellg() &lt;&lt; \"\\n\";\n    f.read(s, 1);\n    cout &lt;&lt; \"got: \" &lt;&lt; s &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"position: \" &lt;&lt; f.tellg() &lt;&lt; \"\\n\";    \n    f.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>Here are the two hex editor views of the two text files respectively:</p>\n\n<p><strong>original</strong>: <a href=\"https://i.stack.imgur.com/lFpt5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lFpt5.png\" alt=\"enter image description here\"></a>\n<strong>modified</strong>: <a href=\"https://i.stack.imgur.com/s4gFg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s4gFg.png\" alt=\"enter image description here\"></a></p>\n\n<p>I expected both to yield the results 0, 1, 2 respectively, however this was not the case for the original experiment.</p>\n\n<p>Can somebody explain what is happening here?</p>\n\n<p><strong>Questions</strong>:</p>\n\n<ol>\n<li>What should I do to get the correct file position?</li>\n</ol>\n\n<blockquote>\n  <p>Answer: use <code>ifstream(\"file.txt\", ios_base::in | ios_base::binary)</code> constructor over <code>ifstream(\"file.txt\")</code> constructor.</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>What is causing f.tellg to give these strange values 0,6,7 instead of the expected 1,2,3 by default?</li>\n</ol>\n\n<p><strong>possible explanation</strong>(testing an answer by Holt below)</p>\n\n<p>f.tellg in this code resorts to <code>f.rdbuf()-&gt;pubseekoff(0, ios_base::cur, ios_base::in)</code> which is responsible for producing the values 0, 6, 7(but only if <code>ios_base::binary</code> is not specified at construction/open).</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstatic char s[10];\n\nint main(int argc, char **argv)\n{\n    ifstream f(\"file.txt\");    \n    cout &lt;&lt; \"position: \" &lt;&lt; f.rdbuf()-&gt;pubseekoff(0, ios_base::cur, ios_base::in) &lt;&lt; \"\\n\";\n    f.read(s, 1);\n    cout &lt;&lt; \"got: \" &lt;&lt; s &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"position: \" &lt;&lt; f.rdbuf()-&gt;pubseekoff(0, ios_base::cur, ios_base::in) &lt;&lt; \"\\n\";\n    f.read(s, 1);\n    cout &lt;&lt; \"got: \" &lt;&lt; s &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"position: \" &lt;&lt; f.rdbuf()-&gt;pubseekoff(0, ios_base::cur, ios_base::in) &lt;&lt; \"\\n\";\n    f.close();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong> passing <code>ios::in | ios::binary</code> as the second argument to the ifstream constructor makes both files behave as expected, but I would like to also know what's causing the default behavior to give these strange tellg values.</p>\n\n<p><strong>Note</strong> difference from <a href=\"https://stackoverflow.com/questions/22984956/tellg-function-give-wrong-size-of-file\">tellg() function give wrong size of file?</a>. That question has ios::binary set by default, and uses seek; this question here has both ios::binary and without, and does not use seek. Overall, the two questions have different contexts, and knowing the answer to that question does not answer this one.</p>\n"}, {"tags": ["android", "c++", "opencv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496256284, "post_id": 44291434, "comment_id": 75591343, "body": "&quot;how to do scaling&quot; -- Unless that refers to climbing or removing of scales from objects, then <i>multiplication</i> tends to do the trick. You could add an offset of <code>scale-1</code> to the new width and height to make it fit a little better. Just take a piece of square paper and draw it -- this shouldn&#39;t take much work to figure out."}, {"owner": {"reputation": 1302, "user_id": 4966197, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7100ffdde12d4b143e5fb67cb760ec1b?s=128&d=identicon&r=PG&f=1", "display_name": "Miljan Vulovic", "link": "https://stackoverflow.com/users/4966197/miljan-vulovic"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496256488, "post_id": 44291434, "comment_id": 75591464, "body": "@DanMa\u0161ek I get the rotated rect that is the product of my calculations. I then rotate image to get it perfectly aligned with my device. After that I do crop with that rotated rect(creating bounding rect from it). How to extend/multiply/enlarge that bounding rect?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496257279, "post_id": 44291434, "comment_id": 75591887, "body": "For example, if you double the width and height of an image, then the same scaling factors applies to coordinates. So the x and y coordinates of bounding box would double, it&#39;s width and height would double."}, {"owner": {"reputation": 1302, "user_id": 4966197, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7100ffdde12d4b143e5fb67cb760ec1b?s=128&d=identicon&r=PG&f=1", "display_name": "Miljan Vulovic", "link": "https://stackoverflow.com/users/4966197/miljan-vulovic"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496257706, "post_id": 44291434, "comment_id": 75592139, "body": "@DanMa\u0161ek Is there any way to enlarge bounding box from center, so, lets say, double the width and height, but leave center where it is?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496258264, "post_id": 44291434, "comment_id": 75592464, "body": "Imagine you have a bounding box at (0,0) with dimensions (2,4). The center is therefore at (1,2). | Now we double the size of the bounding box, so its new dimensions are (4,8). This puts the new center at (2,4). The offset of the new center from old center is (1, 2). Therefore for the centers to match, we have to offset the position of the bounding box to (-1, -2). | I really suggest you try to work these out with a piece of square or graph paper, to help you visualize it."}, {"owner": {"reputation": 1302, "user_id": 4966197, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7100ffdde12d4b143e5fb67cb760ec1b?s=128&d=identicon&r=PG&f=1", "display_name": "Miljan Vulovic", "link": "https://stackoverflow.com/users/4966197/miljan-vulovic"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496258318, "post_id": 44291434, "comment_id": 75592495, "body": "@DanMa\u0161ek yea, you right, thank you!"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6882796"}, "is_accepted": true, "score": 2, "last_activity_date": 1496265813, "creation_date": 1496265813, "answer_id": 44294891, "question_id": 44291434, "link": "https://stackoverflow.com/questions/44291434/c-opencv-rescale-bounding-rect/44294891#44294891", "title": "C++ Opencv Rescale Bounding Rect", "body": "<p>Ok, so, I would start with this:</p>\n\n<pre><code>    Mat &amp;img = (Mat ) matAddrRgba;\n    Mat image;\n    double thrA = 5;\n    resize(img, image, Size((int) (img.size().width / thrA), (int) (img.size().height / thrA)));\n\n    Rect bounding_rect;\n\n    Mat thr(image.rows, image.cols, CV_8UC1);\n    cvtColor(image, thr, CV_BGR2GRAY); //Convert to gray\n    threshold(thr, thr, 150, 255, THRESH_BINARY + THRESH_OTSU); //Threshold the gray\n\n    vector&lt;vector&lt;Point&gt; &gt; contours; // Vector for storing contour\n    vector&lt;Vec4i&gt; hierarchy;\n    RotatedRect rect;\n    findContours(thr, contours, hierarchy, CV_RETR_CCOMP,\n                 CV_CHAIN_APPROX_SIMPLE); // Find the contours in the image\n    sort(contours.begin(), contours.end(),\n         compareContourAreas);            //Store the index of largest contour\n    bounding_rect = boundingRect(contours[0]);\n\n    bounding_rect.width = (int) (bounding_rect.width * thrA);\n    bounding_rect.height = (int) (bounding_rect.height * thrA);\n    bounding_rect.x = (int) (bounding_rect.x * thrA);\n    bounding_rect.y = (int) (bounding_rect.y * thrA);\n\n    rectangle(img, bounding_rect, Scalar(0, 172, 236, 255), 3);\n</code></pre>\n\n<p>As you can see, you should have a scale, that scale should be multiplied with width, height, x and y of the bounding rect. You can figure out the rest from this.</p>\n"}], "owner": {"reputation": 1302, "user_id": 4966197, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7100ffdde12d4b143e5fb67cb760ec1b?s=128&d=identicon&r=PG&f=1", "display_name": "Miljan Vulovic", "link": "https://stackoverflow.com/users/4966197/miljan-vulovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "accepted_answer_id": 44294891, "answer_count": 1, "score": 0, "last_activity_date": 1496265813, "creation_date": 1496252606, "question_id": 44291434, "link": "https://stackoverflow.com/questions/44291434/c-opencv-rescale-bounding-rect", "title": "C++ Opencv Rescale Bounding Rect", "body": "<p>So, I have a problem:</p>\n\n<p>Im doing opencv in android and, since images that im taking with my phone are of very high resolution, I want to resize image to smaller ones, get contours and process the image, and then, create bounding rect on the original image. For that, I would need to scale that bounding box so it perfectly fits my original image. The code I have is working very well with the processing and drawing bounding box on the original image, but, how to do scaling? Here is the code snippet:</p>\n\n<pre><code> Mat &amp;image = *(Mat *) matAddrRgba;\n//over here I should resize image and do the processing with the resized one, and in the end, scale everything back so I can draw the bounding box to the original\n    Rect bounding_rect;\n\n    Mat thr(image.rows, image.cols, CV_8UC1);\n    cvtColor(image, thr, CV_BGR2GRAY); //Convert to gray\n    threshold(thr, thr, 150, 255, THRESH_BINARY + THRESH_OTSU); //Threshold the gray\n\n    vector&lt;vector&lt;Point&gt; &gt; contours; // Vector for storing contour\n    vector&lt;Vec4i&gt; hierarchy;\n    RotatedRect rect;\n    findContours(thr, contours, hierarchy, CV_RETR_CCOMP,\n                 CV_CHAIN_APPROX_SIMPLE); // Find the contours in the image\n    sort(contours.begin(), contours.end(),\n         compareContourAreas);            //Store the index of largest contour\n    bounding_rect = boundingRect(contours[0]);\n    rect = minAreaRect(contours[0]);\n    // matrices we'll use\n    Mat rot_mat, rotated;\n    // get angle and size from the bounding box\n    float angle = rect.angle;\n    Size rect_size = rect.size;\n\n    if (rect.angle &lt; -45.) {\n        angle += 90.0;\n        swap(rect_size.width, rect_size.height);\n    }\n\n    rot_mat = getRotationMatrix2D(rect.center, angle, 1);\n\n    warpAffine(image, rotated, rot_mat, image.size(), INTER_CUBIC);\n\n    image = rotated;\n\n    cvtColor(image, thr, CV_BGR2GRAY); //Convert to gray\n    threshold(thr, thr, 150, 255, THRESH_BINARY + THRESH_OTSU); //Threshold the gray\n\n    findContours(thr, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);\n    sort(contours.begin(), contours.end(), compareContourAreas);\n    bounding_rect = boundingRect(contours[0]);\n\n    image = Mat(image, bounding_rect);\n</code></pre>\n"}, {"tags": ["c++", "cocos2d-x"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1496252055, "post_id": 44291275, "comment_id": 75589079, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}], "answers": [{"tags": [], "owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1496308446, "last_edit_date": 1496308446, "creation_date": 1496303897, "answer_id": 44301777, "question_id": 44291275, "link": "https://stackoverflow.com/questions/44291275/cocos2d-x-3-0-schedule-error2276/44301777#44301777", "title": "Cocos2d-x 3.0 Schedule Error2276", "body": "<p>Pass method name with class name <code>ClassName::methodName</code> in <code>schedule_selector</code> micro.</p>\n\n<p>Let's suppose Xyz is name of any class that is child of <code>Layer</code>.</p>\n\n<pre><code>class Xyz : public Layer {\n\n   public:\n\n   virtual bool init();\n   void TimerMethod(float dt) {\n\n   }\n}\n</code></pre>\n\n<p>scheduling in Layer's <code>init()</code> method in this way :</p>\n\n<pre><code>bool Xyz::init(){\n\n     if(!Layer::init())\n          return false;\n\n    this-&gt;schedule(schedule_selector(Xyz::TimerMethod), 0.01);\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8093474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d15ff967544ac510de829d26271c38e?s=128&d=identicon&r=PG&f=1", "display_name": "Thats Me", "link": "https://stackoverflow.com/users/8093474/thats-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1496308446, "creation_date": 1496251979, "last_edit_date": 1496306644, "question_id": 44291275, "link": "https://stackoverflow.com/questions/44291275/cocos2d-x-3-0-schedule-error2276", "title": "Cocos2d-x 3.0 Schedule Error2276", "body": "<p>I get this error:</p>\n\n<blockquote>\n  <p>'&amp;': illegal operation on bound member function expression</p>\n</blockquote>\n\n<p>in this line: </p>\n\n<pre><code>this-&gt;schedule(schedule_selector(TimerMethod), 0.01);\n</code></pre>\n\n<p>and i dont know why because there is no \"&amp;\" character in the code.</p>\n"}, {"tags": ["python", "c++", "boost"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496254828, "post_id": 44291233, "comment_id": 75590522, "body": "That won&#39;t even compile due to <code>MyClass::foo()</code> being private. Other than that, it works -- calling <code>my_fun()[0].foo()</code> returns 42."}, {"owner": {"reputation": 551, "user_id": 1443778, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/70034353f6f1ac24c015a4397a48c5e3?s=128&d=identicon&r=PG", "display_name": "user1443778", "link": "https://stackoverflow.com/users/1443778/user1443778"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1496306651, "post_id": 44291233, "comment_id": 75610480, "body": "@DanMasek Yes you are right, thank you for taking the time. The error was noncopyable keyword, that I didn&#39;t think to put into this simplified example."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1496308992, "post_id": 44291233, "comment_id": 75612226, "body": "You would need to add a reference wrapper or a pointer to your list."}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 1443778, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/70034353f6f1ac24c015a4397a48c5e3?s=128&d=identicon&r=PG", "display_name": "user1443778", "link": "https://stackoverflow.com/users/1443778/user1443778"}, "is_accepted": true, "score": 0, "last_activity_date": 1496306522, "creation_date": 1496306522, "answer_id": 44302608, "question_id": 44291233, "link": "https://stackoverflow.com/questions/44291233/with-boostpython-return-a-list-of-exposed-class-objects-that-are-noncopyable/44302608#44302608", "title": "With boost::python return a list of exposed class objects, that are noncopyable", "body": "<p>Caused by</p>\n\n<p>boost::noncopyable</p>\n\n<p>keyword.</p>\n"}], "owner": {"reputation": 551, "user_id": 1443778, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/70034353f6f1ac24c015a4397a48c5e3?s=128&d=identicon&r=PG", "display_name": "user1443778", "link": "https://stackoverflow.com/users/1443778/user1443778"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 44302608, "answer_count": 1, "score": -2, "last_activity_date": 1496306522, "creation_date": 1496251808, "last_edit_date": 1496306478, "question_id": 44291233, "link": "https://stackoverflow.com/questions/44291233/with-boostpython-return-a-list-of-exposed-class-objects-that-are-noncopyable", "title": "With boost::python return a list of exposed class objects, that are noncopyable", "body": "<p>I have a BOOST_PYTHON_MODULE in which I have a function that I want to return a list of objects that I have exposed.</p>\n\n<pre><code>namespace bp = boost::python;\n\nclass MyClass {\npublic:\n   int foo() {return 42;}\n};\n\nbp::list my_fun() {\n   bp::list l;\n   l.append(MyClass());\n   l.append(MyClass());\n   return l;\n}\n\n\nBOOST_PYTHON_MODULE(my_module) {\n  bp::class_&lt;MyClass,boost::noncopyable&gt;(\"MyClass\")\n     .def(\"foo\",&amp;MyClass::foo);\n\n  bp::def(\"my_fun\",my_fun);\n}\n</code></pre>\n\n<p>I get expection \"No to_python (by-value) converter found for C++ type\", </p>\n"}, {"tags": ["c++", "gmp"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496250777, "post_id": 44290876, "comment_id": 75588375, "body": "Which version of GCC are you using? Versions before 5 didn&#39;t have C++11 enabled by default, and lacked many C++11 features anyway. And suffixes like that is a C++11 feature."}], "answers": [{"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 3, "last_activity_date": 1496251486, "last_edit_date": 1496251486, "creation_date": 1496250780, "answer_id": 44290951, "question_id": 44290876, "link": "https://stackoverflow.com/questions/44290876/error-compiling-code-in-c-using-gmp/44290951#44290951", "title": "Error compiling code in c++ using gmp", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">User-defined suffixes</a> are a C++11 feature. Add <code>-std=c++11</code> to your compiler invocation.</p>\n\n<p>You're not getting an error from the headers trying to define these operators because the operators are <a href=\"https://gmplib.org/repo/gmp-6.1/file/tip/gmpxx.h#l2005\" rel=\"nofollow noreferrer\">conditionally compiled</a> only if you're compiling with C++11 support.</p>\n"}], "owner": {"reputation": 25, "user_id": 7699401, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1NuXFVkO7r0/AAAAAAAAAAI/AAAAAAAABdE/YvUzKXR0U9w/photo.jpg?sz=128", "display_name": "Juan David", "link": "https://stackoverflow.com/users/7699401/juan-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 44290951, "answer_count": 1, "score": 0, "last_activity_date": 1496251486, "creation_date": 1496250532, "question_id": 44290876, "link": "https://stackoverflow.com/questions/44290876/error-compiling-code-in-c-using-gmp", "title": "Error compiling code in c++ using gmp", "body": "<p>I copied a code that compiles and runs well from one computer to another, I installed the GMP library correctly. I'm tying to compile the code via <code>g++ -o code -I/path/to/library code.cpp -lgmpxx -lgmp</code>, I get the error <code>invalid suffix '_mpf' on floating constant</code>. Obviously I'm using <code>_mpf</code>, I don't understand why my code compiles and runs fine on one computer and not the other. </p>\n"}, {"tags": ["c++", "matlab", "mex"], "comments": [{"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1496742451, "post_id": 44290796, "comment_id": 75773070, "body": "<i>&quot;I am not sure if invoking MATLAB at every iteration is very efficient&quot;</i> It may be, you are invoking it by doing <code>mexPrintf()</code> anyway. I suggest you try and time it."}, {"owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 1, "creation_date": 1496756623, "post_id": 44290796, "comment_id": 75783164, "body": "@AnderBiguri. Fair point. I inserted <code>mexCallMATLAB(0, NULL, 0, NULL, &quot;clc&quot;);</code> before <code>mexPrintf()</code> with no effect. Not sure why."}, {"owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "reply_to_user": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1496820680, "post_id": 44290796, "comment_id": 75811425, "body": "I realized why it wasn&#39;t working. I was missing using <code>ioFlush()</code>. See answer below."}], "answers": [{"comments": [{"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 1, "creation_date": 1496824837, "post_id": 44406241, "comment_id": 75814115, "body": "Great job, nice answer."}], "tags": [], "owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "is_accepted": true, "score": 1, "last_activity_date": 1496820598, "creation_date": 1496820598, "answer_id": 44406241, "question_id": 44290796, "link": "https://stackoverflow.com/questions/44290796/clear-matlab-command-window-from-mex-function/44406241#44406241", "title": "Clear MATLAB command window from mex function", "body": "<p>My assumption about <code>mexCallMATLAB</code> being inefficient was wrong, thanks to @Ander Biguri for the heads up. I used the following test code to compare times with and without <code>mexCallMATLAB</code>. </p>\n\n<hr>\n\n<h1>TL;DR - TIMING RESULTS</h1>\n\n<ul>\n<li>With <code>mexCallMATLAB(0, NULL, 0, NULL, \"clc\");</code>: <code>mean time per iteration = 0.1016885 sec</code></li>\n<li>Without <code>mexCallMATLAB(0, NULL, 0, NULL, \"clc\");</code>: <code>mean time per iteration = 0.0978730 sec</code></li>\n</ul>\n\n<hr>\n\n<h1>DETAILS</h1>\n\n<h2>Test Bench Summary</h2>\n\n<ul>\n<li>Create a vector with 1 million random integers and take the mean. </li>\n<li>Repeat for 500 iterations. </li>\n<li>Compute time required for each iteration and save in vector. </li>\n<li>Average iteration times to get mean time per iteration.</li>\n</ul>\n\n<h2>Code</h2>\n\n<pre><code>#include \"mex.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;stdio.h&gt;      /* printf, scanf, puts, NULL */\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n#include &lt;ctime&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\nextern bool ioFlush(void);\n\n/* The gateway function */\nvoid mexFunction(int nlhs, mxArray *plhs[],\n    int nrhs, const mxArray *prhs[])\n{\n    int numiters = 500;\n    /* initialize random seed: */\n    srand(time(NULL));\n\n    std::vector&lt;double&gt; all_times(numiters);\n\n    for (int iter = 1; iter &lt;= numiters; ++iter)\n    {\n        /* tic */\n        clock_t begin = clock();\n\n        std::vector&lt;int&gt; rand_vec;\n\n        for(std::size_t i = 0; i &lt; 1000000; ++i)\n            rand_vec.push_back( rand() % 100 + 1 );\n\n        double vec_mean = 0.0;\n        for(std::size_t i = 0; i &lt; rand_vec.size(); ++i)\n            vec_mean += rand_vec[i];\n\n        vec_mean /= rand_vec.size();\n\n        /* clear screen */\n        mexCallMATLAB(0, NULL, 0, NULL, \"clc\");\n\n        /* toc */\n        double time_elapsed = double(clock() - begin) / CLOCKS_PER_SEC;\n\n        /* Print data in matlab */\n        std::ostringstream buffer;\n        buffer &lt;&lt; \"iter \" &lt;&lt; iter &lt;&lt; \" of \" &lt;&lt; numiters &lt;&lt; \n                \". random vector mean = \" &lt;&lt; vec_mean &lt;&lt; \n                \". in \" &lt;&lt; time_elapsed &lt;&lt; \"s\" &lt;&lt; endl;\n\n        mexPrintf(\"%s\", buffer.str().c_str());\n        ioFlush();\n\n        all_times[iter] = time_elapsed;\n    }\n\n    double avg_time = 0.0;\n    for(std::size_t i = 0; i &lt; all_times.size(); ++i)\n        avg_time += all_times[i];\n\n    avg_time /= all_times.size();\n    mexPrintf(\"\\navg time per iter = %3.7f\\n\", avg_time);\n\n    return;\n}\n</code></pre>\n\n<p>Note the use of <code>ioFlush()</code> which is an undocumented function needed to update command window at every iteration. See more details about it <a href=\"https://stackoverflow.com/questions/26271154/how-can-i-make-a-mex-function-printf-while-its-running/26271557\">here</a>. </p>\n\n<h2>To Compile</h2>\n\n<ul>\n<li>On Windows using Visual Studio: Add <code>#pragma comment(lib, \"libmwservices.lib\")</code> in source file.</li>\n<li>On Ubuntu using gcc: Compile using <code>mex yourFile.cpp -lmwservices</code></li>\n</ul>\n"}], "owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 44406241, "answer_count": 1, "score": 2, "last_activity_date": 1496820636, "creation_date": 1496250317, "last_edit_date": 1496820636, "question_id": 44290796, "link": "https://stackoverflow.com/questions/44290796/clear-matlab-command-window-from-mex-function", "title": "Clear MATLAB command window from mex function", "body": "<p>I have a <code>for</code> loop in a <code>mexFunction</code>, which displays some information at every iteration. Consider this simple code, which will print 100 lines in the MATLAB command window and update at every iteration:</p>\n\n<pre><code>#include \"mex.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;stdio.h&gt;      \n#include &lt;stdlib.h&gt;     \n#include &lt;time.h&gt;       \n\nusing namespace std;\n\n/* The gateway function */\nvoid mexFunction(int nlhs, mxArray *plhs[],\n    int nrhs, const mxArray *prhs[])\n{\n    int numiters = 100;\n    /* initialize random seed: */\n    srand(time(NULL));\n\n    for (int iter = 1; iter &lt;= numiters; ++iter)\n    {\n        int rand_num = rand() % 100 + 1;\n\n        /* Print info in matlab */\n        std::ostringstream buffer;\n        buffer &lt;&lt; \"iter = \" &lt;&lt; iter &lt;&lt; \" of \" &lt;&lt; numiters &lt;&lt; \n            \". random number = \" &lt;&lt; rand_num &lt;&lt; endl;\n\n        /* need something similar to clc here */\n        mexPrintf(\"%s\", buffer.str().c_str());\n    }\n    return;\n}\n</code></pre>\n\n<p>At every iteration I wish to clear MATLAB's command window before calling <code>mexPrintf()</code>. </p>\n\n<p>I am aware that I can use <a href=\"https://www.mathworks.com/help/matlab/apiref/mexcallmatlab.html\" rel=\"nofollow noreferrer\"><code>mexCallMATLAB</code></a>, to invoke MATLAB's <code>clc</code>, but I am not sure if invoking MATLAB at every iteration is very efficient, hence I need a solution native to C++. </p>\n"}, {"tags": ["c++", "gtk", "gtkmm"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 2, "creation_date": 1496252510, "post_id": 44290651, "comment_id": 75589316, "body": "You will need to use CSS for this. See the <a href=\"https://developer.gnome.org/gtk3/stable/GtkProgressBar.html#GtkProgressBar.style-properties\" rel=\"nofollow noreferrer\">GtkProgressBar</a> <a href=\"https://developer.gnome.org/gtk3/stable/GtkProgressBar.html#GtkProgressBar.description\" rel=\"nofollow noreferrer\">documentation</a> for details. Note that if you need to run on GTK+ 3.18 or earlier, you&#39;ll also need to provide alternates with slightly different selectors; these aren&#39;t as well documented. I don&#39;t know what the magic incantations are off the top of my head, sorry."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1496252774, "post_id": 44290651, "comment_id": 75589470, "body": "Also note that every theme uses a different height by default, so IDK what the best &quot;general&quot; option is (for instance, to make it as tall as a button)."}, {"owner": {"reputation": 31, "user_id": 4040163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0b8ca922b19336c01c5cc671f1670e?s=128&d=identicon&r=PG&f=1", "display_name": "Humpt", "link": "https://stackoverflow.com/users/4040163/humpt"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1496255404, "post_id": 44290651, "comment_id": 75590844, "body": "Hi, thank you very much. I&#39;ve modified my style.css by adding   GtkProgressBar {       -GtkProgressBar-min-horizontal-bar-height: 30px; }  And it made my day :)"}], "answers": [{"tags": [], "owner": {"reputation": 707, "user_id": 2313512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9syKB.png?s=128&g=1", "display_name": "Alan Kinnaman", "link": "https://stackoverflow.com/users/2313512/alan-kinnaman"}, "is_accepted": false, "score": 2, "last_activity_date": 1521478293, "last_edit_date": 1521478293, "creation_date": 1521477328, "answer_id": 49367990, "question_id": 44290651, "link": "https://stackoverflow.com/questions/44290651/gtk-progress-bar-height/49367990#49367990", "title": "Gtk Progress bar height", "body": "<p>For GTK 3.20 and newer, when defining the CSS, it seems that, instead of using the <code>progressbar</code> class, you must use the <code>progress</code> and <code>trough</code> classes.  This is what worked for me:</p>\n\n<pre><code>progress, trough {\n  min-height: 30px;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4040163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0b8ca922b19336c01c5cc671f1670e?s=128&d=identicon&r=PG&f=1", "display_name": "Humpt", "link": "https://stackoverflow.com/users/4040163/humpt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1907, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1521478293, "creation_date": 1496249827, "last_edit_date": 1496250730, "question_id": 44290651, "link": "https://stackoverflow.com/questions/44290651/gtk-progress-bar-height", "title": "Gtk Progress bar height", "body": "<p>I'm developing a Gtk application in c++. (Gtk 3.0). My problem is that I can't change ProgressBar height!\n(<a href=\"https://developer.gnome.org/gtk3/stable/GtkProgressBar.html\" rel=\"nofollow noreferrer\">https://developer.gnome.org/gtk3/stable/GtkProgressBar.html</a>)</p>\n\n<p>The picture below will show what I need. In general I would like to have a possibility to set up height of progress bar in my code.<a href=\"https://i.stack.imgur.com/O8Xmz.png\" rel=\"nofollow noreferrer\">progress bar height</a></p>\n\n<p>I'm using following command to compile my example: </p>\n\n<pre><code>gcc progress.cpp `pkg-config --cflags gtk+-3.0` `pkg-config --libs gtk+-3.0\n</code></pre>\n\n<p>This the sample of my code:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nstatic gboolean\nfill (gpointer   user_data)\n{\n  GtkWidget *progress_bar = user_data;\n\n  /*Get the current progress*/\n  gdouble fraction;\n  fraction = gtk_progress_bar_get_fraction (GTK_PROGRESS_BAR (progress_bar));\n\n  /*Increase the bar by 10% each time this function is called*/\n  fraction += 0.1;\n\n  /*Fill in the bar with the new fraction*/\n  gtk_progress_bar_set_fraction (GTK_PROGRESS_BAR (progress_bar), fraction);\n\n  /*Ensures that the fraction stays below 1.0*/\n  if (fraction &lt; 1.0) \n    return TRUE;\n\n  return FALSE;\n}\n\n\nstatic void\nactivate (GtkApplication *app,\n          gpointer        user_data)\n{\n  GtkWidget *window;\n  GtkWidget *progress_bar;\n\n  gdouble fraction = 0.0;\n\n  /*Create a window with a title, and a default size*/\n  window = gtk_application_window_new (app);\n  gtk_window_set_title (GTK_WINDOW (window), \"ProgressBar Example\");\n  gtk_window_set_default_size (GTK_WINDOW (window), 220, 20);\n\n  /*Create a progressbar and add it to the window*/\n  progress_bar = gtk_progress_bar_new ();\n  gtk_container_add (GTK_CONTAINER (window), progress_bar);\n\n  /*Fill in the given fraction of the bar. Has to be between 0.0-1.0 inclusive*/\n  gtk_progress_bar_set_fraction (GTK_PROGRESS_BAR (progress_bar), fraction);\n\n  /*Use the created fill function every 500 milliseconds*/\n  g_timeout_add (500, fill, GTK_PROGRESS_BAR (progress_bar));\n\n  gtk_widget_show_all (window);\n}\n\n\nint\nmain (int argc, char **argv)\n{\n  GtkApplication *app;\n  int status;\n\n  app = gtk_application_new (\"org.gtk.example\", G_APPLICATION_FLAGS_NONE);\n  g_signal_connect (app, \"activate\", G_CALLBACK (activate), NULL);\n  status = g_application_run (G_APPLICATION (app), argc, argv);\n  g_object_unref (app);\n\n  return status;\n}\n</code></pre>\n"}, {"tags": ["c++", "build", "cmake", "opencv3.0", "opencv3.1"], "answers": [{"tags": [], "owner": {"reputation": 674, "user_id": 6011938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10156526958860532/picture?type=large", "display_name": "Jisu Hong", "link": "https://stackoverflow.com/users/6011938/jisu-hong"}, "is_accepted": true, "score": 1, "last_activity_date": 1498645991, "creation_date": 1498645991, "answer_id": 44800060, "question_id": 44290522, "link": "https://stackoverflow.com/questions/44290522/which-libraries-should-i-link-to-build-opencv-3-2/44800060#44800060", "title": "which libraries should I link to build opencv 3.2", "body": "<p>You probably forgot to select the \"modules\" folder inside the extra contrib folder. Exact error happened to me when I only selected the extra contrib folder.</p>\n"}], "owner": {"reputation": 326, "user_id": 4532644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e73a60c15edb6141cd387cb00544cea2?s=128&d=identicon&r=PG&f=1", "display_name": "hagor", "link": "https://stackoverflow.com/users/4532644/hagor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "accepted_answer_id": 44800060, "answer_count": 1, "score": 2, "last_activity_date": 1498645991, "creation_date": 1496249424, "question_id": 44290522, "link": "https://stackoverflow.com/questions/44290522/which-libraries-should-i-link-to-build-opencv-3-2", "title": "which libraries should I link to build opencv 3.2", "body": "<p>Building opencv with contributions using this guide: \n<a href=\"http://docs.opencv.org/trunk/d3/d52/tutorial_windows_install.html\" rel=\"nofollow noreferrer\">http://docs.opencv.org/trunk/d3/d52/tutorial_windows_install.html</a> </p>\n\n<p>instead of cmake gui, i use:</p>\n\n<p>cmake -DOPENCV_EXTRA_MODULES_PATH=E:\\work\\opencv2\\opencv_contrib/modules E:\\work\\opencv2\\opencv </p>\n\n<p>Error build log: </p>\n\n<pre><code>Build output check failed:\n    Regex: 'unknown .*option'\n    Output line: 'cl : Command line warning D9002: ignoring unknown option '-fsigned-char' [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7e110.vcxproj]\n'\nCompilation failed:\n    source file: 'E:/work/opencv2/build2/CMakeFiles/CMakeTmp/src.cxx'\n    check option: '  -fsigned-char'\n===== BUILD LOG =====\nChange Dir: E:/work/opencv2/build2/CMakeFiles/CMakeTmp\n\nRun Build Command:\"C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe\" \"cmTC_7e110.vcxproj\" \"/p:Configuration=Debug\" \"/p:VisualStudioVersion=14.0\"\nMicrosoft (R) Build Engine version 14.0.25420.1\n\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n\n\nBuild started 31.05.2017 18:02:59.\n\nProject \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7e110.vcxproj\" on node 1 (default targets).\n\nPrepareForBuild:\n\n  Creating directory \"cmTC_7e110.dir\\Debug\\\".\n\n  Creating directory \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\\".\n\n  Creating directory \"cmTC_7e110.dir\\Debug\\cmTC_7e110.tlog\\\".\n\nInitializeBuildStatus:\n\n  Creating \"cmTC_7e110.dir\\Debug\\cmTC_7e110.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n\nClCompile:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /EHa /RTC1 /MDd /GS /Zc:wchar_t /Zc:forScope /Zc:inline /GR /Fo\"cmTC_7e110.dir\\Debug\\\\\" /Fd\"cmTC_7e110.dir\\Debug\\vc140.pdb\" /Gd /TP /analyze- /errorReport:queue   -fsigned-char E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\src.cxx\n\n  Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n\n  Copyright (C) Microsoft Corporation.  All rights reserved.\n\n\n\n  cl /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /EHa /RTC1 /MDd /GS /Zc:wchar_t /Zc:forScope /Zc:inline /GR /Fo\"cmTC_7e110.dir\\Debug\\\\\" /Fd\"cmTC_7e110.dir\\Debug\\vc140.pdb\" /Gd /TP /analyze- /errorReport:queue   -fsigned-char E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\src.cxx\n\n\n\ncl : Command line warning D9002: ignoring unknown option '-fsigned-char' [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7e110.vcxproj]\n\n  src.cxx\n\nLink:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\link.exe /ERRORREPORT:QUEUE /OUT:\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_7e110.exe\" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /DEBUG /PDB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_7e110.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_7e110.lib\" /MACHINE:X86 /SAFESEH   /machine:X86 cmTC_7e110.dir\\Debug\\src.obj\n\n  cmTC_7e110.vcxproj -&gt; E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_7e110.exe\n\nFinalizeBuildStatus:\n\n  Deleting file \"cmTC_7e110.dir\\Debug\\cmTC_7e110.tlog\\unsuccessfulbuild\".\n\n  Touching \"cmTC_7e110.dir\\Debug\\cmTC_7e110.tlog\\cmTC_7e110.lastbuildstate\".\n\nDone Building Project \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7e110.vcxproj\" (default targets).\n\n\n\nBuild succeeded.\n\n\n\n\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7e110.vcxproj\" (default target) (1) -&gt;\n\n(ClCompile target) -&gt; \n\n  cl : Command line warning D9002: ignoring unknown option '-fsigned-char' [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7e110.vcxproj]\n\n\n\n    1 Warning(s)\n\n    0 Error(s)\n\n\n\nTime Elapsed 00:00:00.46\n\n\n===== END =====\n\nBuild output check failed:\n    Regex: 'unknown .*option'\n    Output line: 'cl : Command line warning D9002: ignoring unknown option '-fsigned-char' [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7535b.vcxproj]\n'\nCompilation failed:\n    source file: 'E:/work/opencv2/build2/CMakeFiles/CMakeTmp/src.c'\n    check option: '  -fsigned-char'\n===== BUILD LOG =====\nChange Dir: E:/work/opencv2/build2/CMakeFiles/CMakeTmp\n\nRun Build Command:\"C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe\" \"cmTC_7535b.vcxproj\" \"/p:Configuration=Debug\" \"/p:VisualStudioVersion=14.0\"\nMicrosoft (R) Build Engine version 14.0.25420.1\n\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n\n\nBuild started 31.05.2017 18:02:59.\n\nProject \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7535b.vcxproj\" on node 1 (default targets).\n\nPrepareForBuild:\n\n  Creating directory \"cmTC_7535b.dir\\Debug\\\".\n\n  Creating directory \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\\".\n\n  Creating directory \"cmTC_7535b.dir\\Debug\\cmTC_7535b.tlog\\\".\n\nInitializeBuildStatus:\n\n  Creating \"cmTC_7535b.dir\\Debug\\cmTC_7535b.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n\nClCompile:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_7535b.dir\\Debug\\\\\" /Fd\"cmTC_7535b.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   -fsigned-char E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\src.c\n\n  Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n\n  Copyright (C) Microsoft Corporation.  All rights reserved.\n\n\n\n  cl /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_7535b.dir\\Debug\\\\\" /Fd\"cmTC_7535b.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   -fsigned-char E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\src.c\n\n\n\ncl : Command line warning D9002: ignoring unknown option '-fsigned-char' [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7535b.vcxproj]\n\n  src.c\n\nLink:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\link.exe /ERRORREPORT:QUEUE /OUT:\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_7535b.exe\" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /DEBUG /PDB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_7535b.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_7535b.lib\" /MACHINE:X86 /SAFESEH   /machine:X86 cmTC_7535b.dir\\Debug\\src.obj\n\n  cmTC_7535b.vcxproj -&gt; E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_7535b.exe\n\nFinalizeBuildStatus:\n\n  Deleting file \"cmTC_7535b.dir\\Debug\\cmTC_7535b.tlog\\unsuccessfulbuild\".\n\n  Touching \"cmTC_7535b.dir\\Debug\\cmTC_7535b.tlog\\cmTC_7535b.lastbuildstate\".\n\nDone Building Project \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7535b.vcxproj\" (default targets).\n\n\n\nBuild succeeded.\n\n\n\n\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7535b.vcxproj\" (default target) (1) -&gt;\n\n(ClCompile target) -&gt; \n\n  cl : Command line warning D9002: ignoring unknown option '-fsigned-char' [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_7535b.vcxproj]\n\n\n\n    1 Warning(s)\n\n    0 Error(s)\n\n\n\nTime Elapsed 00:00:00.44\n\n\n===== END =====\n\nDetermining if the function fseeko exists failed with the following output:\nChange Dir: E:/work/opencv2/build2/CMakeFiles/CMakeTmp\n\nRun Build Command:\"C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe\" \"cmTC_1ca4b.vcxproj\" \"/p:Configuration=Debug\" \"/p:VisualStudioVersion=14.0\"\nMicrosoft (R) Build Engine version 14.0.25420.1\n\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n\n\nBuild started 31.05.2017 18:03:11.\n\nProject \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj\" on node 1 (default targets).\n\nPrepareForBuild:\n\n  Creating directory \"cmTC_1ca4b.dir\\Debug\\\".\n\n  Creating directory \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\\".\n\n  Creating directory \"cmTC_1ca4b.dir\\Debug\\cmTC_1ca4b.tlog\\\".\n\nInitializeBuildStatus:\n\n  Creating \"cmTC_1ca4b.dir\\Debug\\cmTC_1ca4b.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n\nClCompile:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D CHECK_FUNCTION_EXISTS=fseeko /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_1ca4b.dir\\Debug\\\\\" /Fd\"cmTC_1ca4b.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj \"C:\\Program Files\\CMake\\share\\cmake-3.8\\Modules\\CheckFunctionExists.c\"\n\n  Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n\n  Copyright (C) Microsoft Corporation.  All rights reserved.\n\n\n\n  cl /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D CHECK_FUNCTION_EXISTS=fseeko /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_1ca4b.dir\\Debug\\\\\" /Fd\"cmTC_1ca4b.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj \"C:\\Program Files\\CMake\\share\\cmake-3.8\\Modules\\CheckFunctionExists.c\"\n\n\n\n  CheckFunctionExists.c\n\nLink:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\link.exe /ERRORREPORT:QUEUE /OUT:\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_1ca4b.exe\" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /DEBUG /PDB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_1ca4b.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_1ca4b.lib\" /MACHINE:X86 /SAFESEH   /machine:X86 cmTC_1ca4b.dir\\Debug\\CheckFunctionExists.obj\n\nCheckFunctionExists.obj : error LNK2019: unresolved external symbol _fseeko referenced in function _main [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj]\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_1ca4b.exe : fatal error LNK1120: 1 unresolved externals [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj]\n\nDone Building Project \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj\" (default targets) -- FAILED.\n\n\n\nBuild FAILED.\n\n\n\n\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj\" (default target) (1) -&gt;\n\n(Link target) -&gt; \n\n  CheckFunctionExists.obj : error LNK2019: unresolved external symbol _fseeko referenced in function _main [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj]\n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_1ca4b.exe : fatal error LNK1120: 1 unresolved externals [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1ca4b.vcxproj]\n\n\n\n    0 Warning(s)\n\n    2 Error(s)\n\n\n\nTime Elapsed 00:00:00.38\n\n\n\nDetermining size of off64_t failed with the following output:\nChange Dir: E:/work/opencv2/build2/CMakeFiles/CMakeTmp\n\nRun Build Command:\"C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe\" \"cmTC_69866.vcxproj\" \"/p:Configuration=Debug\" \"/p:VisualStudioVersion=14.0\"\nMicrosoft (R) Build Engine version 14.0.25420.1\n\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n\n\nBuild started 31.05.2017 18:03:11.\n\nProject \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj\" on node 1 (default targets).\n\nPrepareForBuild:\n\n  Creating directory \"cmTC_69866.dir\\Debug\\\".\n\n  Creating directory \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\\".\n\n  Creating directory \"cmTC_69866.dir\\Debug\\cmTC_69866.tlog\\\".\n\nInitializeBuildStatus:\n\n  Creating \"cmTC_69866.dir\\Debug\\cmTC_69866.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n\nClCompile:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_69866.dir\\Debug\\\\\" /Fd\"cmTC_69866.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c\n\n  Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n\n  Copyright (C) Microsoft Corporation.  All rights reserved.\n\n\n\n  cl /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_69866.dir\\Debug\\\\\" /Fd\"cmTC_69866.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c\n\n\n\n  OFF64_T.c\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(19): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(20): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(21): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(22): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(23): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\nDone Building Project \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj\" (default targets) -- FAILED.\n\n\n\nBuild FAILED.\n\n\n\n\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj\" (default target) (1) -&gt;\n\n(ClCompile target) -&gt; \n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(19): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(20): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(21): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(22): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CheckTypeSize\\OFF64_T.c(23): error C2065: 'off64_t': undeclared identifier [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_69866.vcxproj]\n\n\n\n    0 Warning(s)\n\n    5 Error(s)\n\n\n\nTime Elapsed 00:00:00.29\n\n\nE:/work/opencv2/build2/CMakeFiles/CheckTypeSize/OFF64_T.c:\n#include &lt;sys/types.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stddef.h&gt;\n\n\n#undef KEY\n#if defined(__i386)\n# define KEY '_','_','i','3','8','6'\n#elif defined(__x86_64)\n# define KEY '_','_','x','8','6','_','6','4'\n#elif defined(__ppc__)\n# define KEY '_','_','p','p','c','_','_'\n#elif defined(__ppc64__)\n# define KEY '_','_','p','p','c','6','4','_','_'\n#endif\n\n#define SIZE (sizeof(off64_t))\nchar info_size[] =  {'I', 'N', 'F', 'O', ':', 's','i','z','e','[',\n  ('0' + ((SIZE / 10000)%10)),\n  ('0' + ((SIZE / 1000)%10)),\n  ('0' + ((SIZE / 100)%10)),\n  ('0' + ((SIZE / 10)%10)),\n  ('0' +  (SIZE    % 10)),\n  ']',\n#ifdef KEY\n  ' ','k','e','y','[', KEY, ']',\n#endif\n  '\\0'};\n\n#ifdef __CLASSIC_C__\nint main(argc, argv) int argc; char *argv[];\n#else\nint main(int argc, char *argv[])\n#endif\n{\n  int require = 0;\n  require += info_size[argc];\n  (void)argv;\n  return require;\n}\n\n\nDetermining if the function jbg_newlen exists failed with the following output:\nChange Dir: E:/work/opencv2/build2/CMakeFiles/CMakeTmp\n\nRun Build Command:\"C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe\" \"cmTC_c6cb2.vcxproj\" \"/p:Configuration=Debug\" \"/p:VisualStudioVersion=14.0\"\nMicrosoft (R) Build Engine version 14.0.25420.1\n\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n\n\nBuild started 31.05.2017 18:03:13.\n\nProject \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj\" on node 1 (default targets).\n\nPrepareForBuild:\n\n  Creating directory \"cmTC_c6cb2.dir\\Debug\\\".\n\n  Creating directory \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\\".\n\n  Creating directory \"cmTC_c6cb2.dir\\Debug\\cmTC_c6cb2.tlog\\\".\n\nInitializeBuildStatus:\n\n  Creating \"cmTC_c6cb2.dir\\Debug\\cmTC_c6cb2.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n\nClCompile:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D CHECK_FUNCTION_EXISTS=jbg_newlen /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_c6cb2.dir\\Debug\\\\\" /Fd\"cmTC_c6cb2.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj \"C:\\Program Files\\CMake\\share\\cmake-3.8\\Modules\\CheckFunctionExists.c\"\n\n  Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n\n  Copyright (C) Microsoft Corporation.  All rights reserved.\n\n\n\n  cl /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D CHECK_FUNCTION_EXISTS=jbg_newlen /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_c6cb2.dir\\Debug\\\\\" /Fd\"cmTC_c6cb2.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj \"C:\\Program Files\\CMake\\share\\cmake-3.8\\Modules\\CheckFunctionExists.c\"\n\n\n\n  CheckFunctionExists.c\n\nLink:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\link.exe /ERRORREPORT:QUEUE /OUT:\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_c6cb2.exe\" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /DEBUG /PDB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_c6cb2.pdb\" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"E:/work/opencv2/build2/CMakeFiles/CMakeTmp/Debug/cmTC_c6cb2.lib\" /MACHINE:X86 /SAFESEH   /machine:X86 cmTC_c6cb2.dir\\Debug\\CheckFunctionExists.obj\n\nCheckFunctionExists.obj : error LNK2019: unresolved external symbol _jbg_newlen referenced in function _main [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj]\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_c6cb2.exe : fatal error LNK1120: 1 unresolved externals [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj]\n\nDone Building Project \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj\" (default targets) -- FAILED.\n\n\n\nBuild FAILED.\n\n\n\n\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj\" (default target) (1) -&gt;\n\n(Link target) -&gt; \n\n  CheckFunctionExists.obj : error LNK2019: unresolved external symbol _jbg_newlen referenced in function _main [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj]\n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\cmTC_c6cb2.exe : fatal error LNK1120: 1 unresolved externals [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_c6cb2.vcxproj]\n\n\n\n    0 Warning(s)\n\n    2 Error(s)\n\n\n\nTime Elapsed 00:00:00.37\n\n\n\nDetermining if the include file pthread.h exists failed with the following output:\nChange Dir: E:/work/opencv2/build2/CMakeFiles/CMakeTmp\n\nRun Build Command:\"C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe\" \"cmTC_1a06d.vcxproj\" \"/p:Configuration=Debug\" \"/p:VisualStudioVersion=14.0\"\nMicrosoft (R) Build Engine version 14.0.25420.1\n\nCopyright (C) Microsoft Corporation. All rights reserved.\n\n\n\nBuild started 31.05.2017 18:03:18.\n\nProject \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1a06d.vcxproj\" on node 1 (default targets).\n\nPrepareForBuild:\n\n  Creating directory \"cmTC_1a06d.dir\\Debug\\\".\n\n  Creating directory \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\Debug\\\".\n\n  Creating directory \"cmTC_1a06d.dir\\Debug\\cmTC_1a06d.tlog\\\".\n\nInitializeBuildStatus:\n\n  Creating \"cmTC_1a06d.dir\\Debug\\cmTC_1a06d.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n\nClCompile:\n\n  C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_1a06d.dir\\Debug\\\\\" /Fd\"cmTC_1a06d.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\CheckIncludeFile.c\n\n  Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n\n  Copyright (C) Microsoft Corporation.  All rights reserved.\n\n\n\n  cl /c /Zi /W3 /WX- /MP8 /Od /Ob0 /Oi /Oy- /D WIN32 /D _WINDOWS /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /D \"CMAKE_INTDIR=\\\"Debug\\\"\" /D _MBCS /Gm- /RTC1 /MDd /GS /Gy /arch:SSE2 /fp:fast /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\"cmTC_1a06d.dir\\Debug\\\\\" /Fd\"cmTC_1a06d.dir\\Debug\\vc140.pdb\" /Gd /TC /analyze- /errorReport:queue   /bigobj E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\CheckIncludeFile.c\n\n\n\n  CheckIncludeFile.c\n\nE:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\CheckIncludeFile.c(1): fatal error C1083: Cannot open include file: 'pthread.h': No such file or directory [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1a06d.vcxproj]\n\nDone Building Project \"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1a06d.vcxproj\" (default targets) -- FAILED.\n\n\n\nBuild FAILED.\n\n\n\n\"E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1a06d.vcxproj\" (default target) (1) -&gt;\n\n(ClCompile target) -&gt; \n\n  E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\CheckIncludeFile.c(1): fatal error C1083: Cannot open include file: 'pthread.h': No such file or directory [E:\\work\\opencv2\\build2\\CMakeFiles\\CMakeTmp\\cmTC_1a06d.vcxproj]\n\n\n\n    0 Warning(s)\n\n    1 Error(s)\n\n\n\nTime Elapsed 00:00:00.29\n</code></pre>\n\n<p>which libraries do I miss? \nDo I need to add some path variables? </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "qt", "windows-applications", "qvector"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1496248066, "post_id": 44290007, "comment_id": 75586704, "body": "Don&#39;t create <code>vector.count()</code> <code>QTreeWidgetItem</code>s then. Closing as typo."}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1496248510, "post_id": 44290007, "comment_id": 75586976, "body": "@LogicStuff  I have changed the main post. Thanks. If not use <code>vector.count()</code> then how to iterate on vector?"}, {"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1496249064, "post_id": 44290007, "comment_id": 75587297, "body": "@Cobra91151 Answering your comment question: you could use QVectorIterator (<a href=\"http://doc.qt.io/qt-5/qvectoriterator.html#QVectorIterator\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qvectoriterator.html#QVectorIterator</a>). As for the original question, could you specify what <code>parent</code> is, and what do you mean by <code>it returns but not all (only 5)</code>?"}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1496249533, "post_id": 44290007, "comment_id": 75587593, "body": "@lpares12  The main post has been updated. I meant only 5 items from 12."}, {"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1496249596, "post_id": 44290007, "comment_id": 75587635, "body": "@Cobra91151 and do you want to display the vector values in columns or rows?"}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1496249707, "post_id": 44290007, "comment_id": 75587710, "body": "@lpares12  I want to display all values in rows. It should be a list."}], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 0, "creation_date": 1496250733, "post_id": 44290717, "comment_id": 75588347, "body": "But the vector data be in 0 column? This is just a small test example. However, what I want is to get all apps data from the registry, and write the data to <code>QTreeWidgetItem</code> (<code>QTreeWidget</code>), so I decided to use <code>QVector</code>, because I can&#39;t maintain the right data in right column. Can you help me with it?"}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 0, "creation_date": 1496251382, "post_id": 44290717, "comment_id": 75588721, "body": "I have updated main post. I want to display data like in the image in my main post using vector in all 5 columns. Thanks."}, {"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "reply_to_user": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 0, "creation_date": 1496251793, "post_id": 44290717, "comment_id": 75588927, "body": "@Cobra91151 I can&#39;t see the image. Modifying the vector won&#39;t change the tree display. Instead, you could save all the <code>newItem</code> into a <code>vector</code> and modify them directly, or you could do <code>std::map&lt;std::string, QTreeWidgetItem&gt;</code> and each time you modify the string, apply <code>QTreeWidgetItem::setText(string)</code>."}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 0, "creation_date": 1496252034, "post_id": 44290717, "comment_id": 75589069, "body": "Link for the image - <a href=\"https://i.stack.imgur.com/rFDRk.png\" rel=\"nofollow noreferrer\">image</a>. I want to display the apps data like in the image with vectors or without but in appropriate column.  5 Columns 1 - Name ( + icon) 2 - Version 3 - Publisher 4 - Install Location 5 - Uninstall Location  Thanks in advance."}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 0, "creation_date": 1496252861, "post_id": 44290717, "comment_id": 75589526, "body": "Also my question: <a href=\"https://stackoverflow.com/questions/44250058/parsing-icon-for-applications-issue\" title=\"parsing icon for applications issue\">stackoverflow.com/questions/44250058/&hellip;</a>"}, {"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "reply_to_user": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 1, "creation_date": 1496252997, "post_id": 44290717, "comment_id": 75589590, "body": "You should close this question and make another one with the update, since your original question changed a lot in comparison to what you are asking now."}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "edited": false, "score": 0, "creation_date": 1496254651, "post_id": 44290717, "comment_id": 75590423, "body": "I have changed the main post to clarify the issue."}], "tags": [], "owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "is_accepted": false, "score": -1, "last_activity_date": 1496250046, "creation_date": 1496250046, "answer_id": 44290717, "question_id": 44290007, "link": "https://stackoverflow.com/questions/44290007/get-installed-apps-data-issue/44290717#44290717", "title": "Get installed apps data issue", "body": "<p>Assuming you are using Qt5:</p>\n\n<p>Once you have a <code>QTreeWidget</code> and the vector created, you should iterate over its elements, and create a new <code>QTreeWidgetItem</code> for each one, so you'd have something like:</p>\n\n<pre><code>QTreeWidget *treeWidget = new QTreeWidget(this);\ntreeWidget-&gt;setCoulmnCount(1);\n\nfor(int i = 0; i &lt; vector.count(); i++) {\n    QTreeWidgetItem *newItem = new QTreeWidgetItem(treeWidget);\n    newItem-&gt;setText(0, vector.value(i)); // 0 to display it at column 0\n}\n</code></pre>\n\n<p>As you can see, first you need to create the <code>QTreeWidget</code> and then add each child as a <code>QTreeWidgetItem</code> to it.</p>\n\n<p>By the way, you should consider changing the name of the variable <code>vector</code> to something more specific.</p>\n"}], "owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1496254533, "creation_date": 1496247803, "last_edit_date": 1496254533, "question_id": 44290007, "link": "https://stackoverflow.com/questions/44290007/get-installed-apps-data-issue", "title": "Get installed apps data issue", "body": "<pre><code>struct AppsData {\n    QList&lt;QIcon&gt; icons;\n    QStringList name;\n    QStringList version;\n    QStringList publisher;\n    QStringList installLocation;\n    QStringList uninstallLocation;\n};\n\nvoid Test::setAppData(QList&lt;QIcon&gt; icons, QStringList names, QStringList versions, QStringList publishers, QStringList installLocations, QStringList uninstallLocations)\n{\n    AppsData appsData;\n    appsData.icons = icons;\n    appsData.name = names;\n    appsData.version = versions;\n    appsData.publisher = publishers;\n    appsData.installLocation = installLocations;\n    appsData.uninstallLocation = uninstallLocations;\n\n    QVector&lt;AppsData&gt; dataVector;\n    dataVector.push_back(appsData);\n}\n</code></pre>\n\n<p>I want to display all apps data in appropriate columns.</p>\n\n<p><strong>Image:</strong>\n<a href=\"https://i.stack.imgur.com/rFDRk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rFDRk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also I have tried to accomplish it without vectors: </p>\n\n<pre><code>for (int i = 0; i &lt; uninstallLocations.count(); i++) {\n        allApplicationsItem = new QTreeWidgetItem(allApplications);\n        allApplicationsItem-&gt;setText(0, names.at(i));\n        allApplicationsItem-&gt;setText(1, versions.at(i));\n        allApplicationsItem-&gt;setText(2, publishers.at(i));\n        allApplicationsItem-&gt;setText(3, installLocations.at(i));\n        allApplicationsItem-&gt;setText(4, uninstallLocations.at(i));\n    }\n</code></pre>\n\n<p>but it doesn't work, the application crashes.</p>\n"}, {"tags": ["c++", "boost-hana"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 2, "creation_date": 1496248756, "post_id": 44289966, "comment_id": 75587103, "body": "<code>hana::type_c&lt;Ts&gt;...</code>? Just a guess."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1496249052, "post_id": 44289966, "comment_id": 75587289, "body": "@BartekBanachewicz That seems to have done the trick. If you make it an answer I will accept it. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "edited": false, "score": 0, "creation_date": 1496329730, "post_id": 44290449, "comment_id": 75627899, "body": "Also, if what you have is a sequence (not a pack), you can use <code>hana::unpack(sequence, hana::make_set)</code>."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 4, "last_activity_date": 1496249161, "creation_date": 1496249161, "answer_id": 44290449, "question_id": 44289966, "link": "https://stackoverflow.com/questions/44289966/creating-a-hanaset-from-template-parameter-pack/44290449#44290449", "title": "Creating a hana::set from template parameter pack", "body": "<p>You have to expand the types with the <code>hana::type_c</code> helper:</p>\n\n<pre><code>static constexpr auto asSet = hana::make_set(hana::type_c&lt;Ts&gt;...);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f31b8b62e5833c77\" rel=\"nofollow noreferrer\">\"Live\" on Coliru</a></p>\n"}], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 44290449, "answer_count": 1, "score": 2, "last_activity_date": 1496249161, "creation_date": 1496247637, "question_id": 44289966, "link": "https://stackoverflow.com/questions/44289966/creating-a-hanaset-from-template-parameter-pack", "title": "Creating a hana::set from template parameter pack", "body": "<p>I'm struggling to figure out how to make a hana::set from a template parameter pack. I have a method that I have used for tuples (tuple_t) but it seems to create a set I have to use make_set. Here is where I'm getting stuck:</p>\n\n<pre><code>template&lt;typename ...Ts&gt;\nclass Foo\n{\npublic:\n    static constexpr auto asTuple = hana::tuple_t&lt;Ts...&gt;;\n    static constexpr auto asSet = hana::make_set(/*what goes here?*/);\n};\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "arrays", "enums", "x-macros"], "owner": {"reputation": 75, "user_id": 5259985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845788a80b1012e54715383a5b60bb48?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5259985/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496247481, "creation_date": 1496247481, "question_id": 44289907, "link": "https://stackoverflow.com/questions/44289907/hierarchical-non-rectangular-list-of-names-and-enums-in-c98", "title": "hierarchical non-rectangular list of names and enums in c++98", "body": "<p>I'm trying to assemble a hierarchical list of enums (indices) and their corresponding names so that I can access specific ones by name or loop through all of them, depending on the section of my code I'm in. The list will be constant once compiled, but it needs to be easily changed in code. I am using X macros to streamline this but I'm a bit stuck on how to get the flexibility I'm aiming for. Perhaps I'm going about it all wrong.</p>\n\n<p>This part works:</p>\n\n<pre><code>namespace another\n{\n    // Define individual groups\n    //-------------------------\n        // &lt;&lt;Self&gt;&gt; group\n        #define XLIST \\\n        X(Lat               ) \\\n        X(Lon               ) \\\n        X(Altitude          ) \\\n        X(Weight            )\n        #define X(a) a,\n            enum class enum_Self { XLIST NUMEL };\n        #undef X\n        #define X(a) #a,\n            const char * const name_Self[] = { XLIST };\n        #undef X\n        #undef XLIST\n\n        // &lt;&lt;Target&gt;&gt; group\n        #define XLIST \\\n        X(Lat               ) \\\n        X(Lon               ) \\\n        X(Altitude          )\n        #define X(a) a,\n            enum class enum_Target { XLIST NUMEL };\n        #undef X\n        #define X(a) #a,\n            const char * const name_Target[] = { XLIST };\n        #undef X\n        #undef XLIST\n\n    // List of the \"another\" groups\n    //-----------------------------\n    #define XLIST \\\n    X(Self      ) \\\n    X(Target    )\n    // Group name enumeration\n    #define X(a) a,\n        enum class groupEnum { XLIST NUMEL };\n    #undef X\n    // Group name strings\n    #define X(a) #a,\n        const char * const groupName[] = { XLIST };\n    #undef X\n    // An array which contains the number of flags in each group\n    #define X(a) (const int) another::enum_ ##a::NUMEL,\n        const int groupSize[] = { XLIST };\n    #undef X\n    #undef XLIST\n} // end another namespace\n</code></pre>\n\n<p>Then in <code>main</code>, I can loop through the groups using something like this:</p>\n\n<pre><code>for (int ii=0; ii&lt;(int)another::groupEnum::NUMEL; ii++)\n    printf(\"Group %d is %s\\n\",ii,(int)another::groupName[ii]);\n</code></pre>\n\n<p>And if I pick a specific group by name, I can do something like this:</p>\n\n<pre><code>printf(\"another::enum_Self contains:\\n\");\nfor (int ii=0; ii&lt;(int)another::enum_Self::NUMEL; ii++)\n    printf(\"\\t%s\\n\",another::name_Self[ii]);\n</code></pre>\n\n<p>And I can access a specific item like this: <code>another::enum_Self::Altitude</code></p>\n\n<p>The problem is that I can't loop through each of the groups and then each of the items within that group. I was trying to create an array of structs, each of which contained an <code>enum</code> and <code>const char * const</code> array of names, but I couldn't figure out how to define a generic struct up front and then initialize it with the particular values. And I couldn't do a 2-D array from the top level because not every group will have the same number of items in it. I thought about vectors too, but those are intended to be dynamic and the whole point here is that this stuff shouldn't change at all once compiled. I suspect I'm simply thinking about the problem the wrong way...</p>\n"}, {"tags": ["c++", "visual-studio", "type-conversion", "tostring"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1496247570, "post_id": 44289852, "comment_id": 75586409, "body": "This seems like a convoluted way of doing things.  Instead of converting the values to strings so that they match the <code>%s</code> formatting directive, why not leave them as <code>double</code>s and use a <code>%f</code> directive?"}, {"owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 1, "creation_date": 1496247635, "post_id": 44289852, "comment_id": 75586456, "body": "the temporary std::string is gone, if you assign to a const reference the temporary lifetime is guarantee to survive, however, TRACE is a variadic function. Create the string before the TRACE will solve the problem"}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "reply_to_user": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 0, "creation_date": 1496247752, "post_id": 44289852, "comment_id": 75586533, "body": "@AlessandroTeruzzi doesn&#39;t that string only get destructed after the call to the function to which it&#39;s the argument?"}, {"owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1496247860, "post_id": 44289852, "comment_id": 75586597, "body": "@stijn it is not the std::string the input of the function, but the underlying pointer"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 1, "creation_date": 1496247995, "post_id": 44289852, "comment_id": 75586665, "body": "@AlessandroTeruzzi: The temporary strings will be destroyed at the end of the full expression, that is when <code>TRACE()</code> returns, so the underlying pointer will still be valid when used."}], "answers": [{"comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1496247944, "post_id": 44289958, "comment_id": 75586638, "body": "%hs instead of %S could be mentioned."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1496248157, "post_id": 44289958, "comment_id": 75586758, "body": "@HansPassant: Oh, yes, I didn&#39;t know that. <code>%hs</code> is better than <code>%S</code> because it will always be a <code>const char *</code> no matter the UNICODE options, matching <code>std::string</code>."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 4, "last_activity_date": 1496248072, "last_edit_date": 1496248072, "creation_date": 1496247622, "answer_id": 44289958, "question_id": 44289852, "link": "https://stackoverflow.com/questions/44289852/converting-double-to-string-in-c-gives-strange-characters-chinese-characters/44289958#44289958", "title": "Converting double to string in C++ gives strange characters (Chinese characters?)", "body": "<p>The problem is that your <code>TRACE</code> macro expects wide strings but you are passing narrow ones: look at the <code>w</code> in function <code>wvsprintf()</code>.</p>\n\n<p>Use <code>std::to_wstring()</code> and it should work.</p>\n\n<p>Alternatively you can use <code>%hs</code> to tell that your arguments are narrow strings. Or you can change the macro and make it call <code>vsprintf()</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 8026642, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8f69d112cda13e984b39c03d426c8e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mario_Bros", "link": "https://stackoverflow.com/users/8026642/mario-bros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1496248072, "creation_date": 1496247331, "last_edit_date": 1496247437, "question_id": 44289852, "link": "https://stackoverflow.com/questions/44289852/converting-double-to-string-in-c-gives-strange-characters-chinese-characters", "title": "Converting double to string in C++ gives strange characters (Chinese characters?)", "body": "<p>I am trying to convert two double values into strings in C++ so that I can use TRACE to view them in my output window. I am using Visual Studio 2017. Here is my main code:</p>\n\n<pre><code>double distance = 3.0;\ndouble secondsPassed = 10.0;\nTRACE(L\"Hello!\\n\");\nTRACE(L\"distance = %s seconds passed: %s \\n\",\n    std::to_string(distance).c_str(), std::to_string(secondsPassed).c_str());\n</code></pre>\n\n<p>This is the definition of my TRACE function:</p>\n\n<pre><code>void TRACE(TCHAR *format, ...)\n{\n    TCHAR buffer[1000];\n\n    va_list argptr;\n    va_start(argptr, format);\n    wvsprintf(buffer, format, argptr);\n    va_end(argptr);\n\n    OutputDebugString(buffer);\n}\n</code></pre>\n\n<p>This is what shows up in my output window:</p>\n\n<pre><code>Hello!\ndistance = \u2e33\u3030\u3030\u3030 time: \u3031\u302e\u3030\u30300\ucc00\ucccc\ucccc  \n</code></pre>\n\n<p>I'm not sure why the two double values are not being converted into the strings \"3.0\" and \"10.0\". Instead I get these weird characters! I apologize if they are not Chinese characters as I mentioned in the title - I only know English</p>\n\n<p>Any suggestions or comments would be very much appreciated! Thanks.</p>\n"}, {"tags": ["c++", "terminate", "terminate-handler"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1496247443, "post_id": 44289671, "comment_id": 75586335, "body": "My common sense tells me it will be called on the thread which called <code>std::terminate</code>? I do believe the Standard doesn&#39;t address this explicitly."}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1496247495, "post_id": 44289671, "comment_id": 75586362, "body": "I believe it is unspecified behavior (or might be undefined?)"}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1496247518, "post_id": 44289671, "comment_id": 75586379, "body": "I&#39;d say on the thread that actually set up the handler, though idk"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1496247725, "post_id": 44289671, "comment_id": 75586508, "body": "I can&#39;t imagine there being some mechanism to interrupt whatever some other thread might be doing to get it to run <code>std::terminate</code>. I would think the thread calling <code>std::terminate</code> gets to run it."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1496248039, "post_id": 44289671, "comment_id": 75586689, "body": "Making code run on a specific other thread is highly untrivial.  So it just doesn&#39;t, it runs on whatever thread suffered the heart-attack.  Easy to try for yourself, makes you feel better about it."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1496248219, "post_id": 44289671, "comment_id": 75586798, "body": "Thanks, you have conviced me."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "edited": false, "score": 1, "creation_date": 1496248373, "post_id": 44289671, "comment_id": 75586881, "body": "I just checked in the online compiler, the threads that terminates is the one that calls std::terminate."}], "answers": [{"tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": false, "score": 3, "last_activity_date": 1497644686, "last_edit_date": 1497644686, "creation_date": 1496253308, "answer_id": 44291642, "question_id": 44289671, "link": "https://stackoverflow.com/questions/44289671/in-which-thread-is-the-terminate-handler-called/44291642#44291642", "title": "In which thread is the terminate handler called?", "body": "<p>This answer sum up answers given in comments and an answer now deleted:</p>\n\n<ul>\n<li><p>It is not specified in the standard (<em>DeiDei</em>, I have checked too in N4618)</p></li>\n<li><p>Nevertheless, for technical reasons it is unlikely that the handler is called in an other thread that the one who caused the call to <code>std::terminate</code> (<em>Galik</em>,<em>Hans Passant</em>)</p></li>\n<li><p>it has been verified on online compiler (<em>Rinat Veliakhmedov</em>), the terminate handler is called in the thread that causes terminate to be called.</p></li>\n</ul>\n\n<p>You can test it yourself with this code from a deleted answer:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;exception&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\nstd::mutex mutex;\nconst auto&amp; id = std::this_thread::get_id;\nconst auto print = [](std::string t){\n    std::lock_guard&lt;std::mutex&gt; lock(mutex);\n    std::cout &lt;&lt; id() &lt;&lt; \" \" &lt;&lt; t &lt;&lt; std::endl;\n};\n\nvoid my_terminate_handler(){\n    print(\"terminate\");\n    std::abort();\n}\n\nvoid throwNoThrow() noexcept { throw std::exception(); }\nvoid terminator()            { std::terminate();       }\n\nint main() {\n    std::set_terminate(my_terminate_handler);\n    print(\"main\");    \n#ifdef  CASE1\n    auto x1 = std::thread(throwNoThrow);\n#elif CASE2\n    auto x1 = std::thread(terminator);\n#elif CASE3    \n    auto x1 = std::thread(throwNoThrow);\n#endif\n    x1.join();\n}\n</code></pre>\n\n<p><strong>Conclusion</strong> It is unspecified but it seems that the handler is always be called in the thread that causes <code>std::terminate</code> to be called. (tested on <em>gcc-5.4, gcc-7.1, clang-3.8 with pthreads</em>)</p>\n"}], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 2, "answer_count": 1, "score": 11, "last_activity_date": 1497644686, "creation_date": 1496246848, "question_id": 44289671, "link": "https://stackoverflow.com/questions/44289671/in-which-thread-is-the-terminate-handler-called", "title": "In which thread is the terminate handler called?", "body": "<p>In which thread is called the terminate handler:</p>\n\n<ol>\n<li><p>when an exception is thrown inside a <code>noexcept</code> function?</p></li>\n<li><p>when the user call <code>std::terminate</code>()?</p></li>\n<li><p>at start up or destruction of <code>thread</code>?</p></li>\n</ol>\n\n<p>Is it defined in the standard, will I have access to <code>thread_local</code> objects?</p>\n"}, {"tags": ["c++", "boost", "boost-statechart"], "comments": [{"owner": {"reputation": 2120, "user_id": 3110695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSZkk.jpg?s=128&g=1", "display_name": "FortyTwo", "link": "https://stackoverflow.com/users/3110695/fortytwo"}, "edited": false, "score": 1, "creation_date": 1496247377, "post_id": 44289654, "comment_id": 75586286, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 8093093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a2c9fef5fbaba5fd2e942227d8aecf?s=128&d=identicon&r=PG&f=1", "display_name": "singhh23", "link": "https://stackoverflow.com/users/8093093/singhh23"}, "is_accepted": true, "score": 2, "last_activity_date": 1496408035, "last_edit_date": 1496408035, "creation_date": 1496250192, "answer_id": 44290757, "question_id": 44289654, "link": "https://stackoverflow.com/questions/44289654/boost-statechart-return-to-previous-state/44290757#44290757", "title": "Boost Statechart: Return to Previous State", "body": "<p>I've found an ~okay~ way of doing this by creating an enum mapping for states, storing the previous state in the outermost context (top-level fsm), and then using a custom reaction for the T event:</p>\n\n<pre><code>#include &lt;boost/mpl/list.hpp&gt;\n\n#include &lt;boost/statechart/state_machine.hpp&gt;\n#include &lt;boost/statechart/simple_state.hpp&gt;\n#include &lt;boost/statechart/event.hpp&gt;\n#include &lt;boost/statechart/transition.hpp&gt;\n#include &lt;boost/statechart/custom_reaction.hpp&gt;\n\n// states\nstruct A;\nstruct B;\nstruct C;\nstruct D;\n\n// state enum mapping\nenum class state_mapping {\n    A = 0,\n    B,\n    C,\n    D\n};\n\n// events\nstruct S : boost::statechart::event&lt;S&gt; {};\nstruct T : boost::statechart::event&lt;T&gt; {};\nstruct U : boost::statechart::event&lt;U&gt; {};\n\n// fsm\nstruct FSM : boost::statechart::state_machine&lt;FSM, B&gt; {\n    state_mapping previous_state = state_mapping::B;\n};\n\n// fully defined states/transitions\nstruct A : boost::statechart::simple_state&lt;A, FSM&gt; {\n    typedef boost::statechart::transition&lt;S, C&gt; reactions;\n\n    A() { std::cout &lt;&lt; \"entered A\" &lt;&lt; std::endl; }\n    virtual ~A() { outermost_context().previous_state = state_mapping::A; }\n};\n\nstruct B : boost::statechart::simple_state&lt;B, FSM&gt; {\n    typedef boost::statechart::transition&lt;S, C&gt; reactions;\n\n    B() { std::cout &lt;&lt; \"entered B\" &lt;&lt; std::endl; }\n    virtual ~B() { outermost_context().previous_state = state_mapping::B; }\n};\n\nstruct C : boost::statechart::simple_state&lt;C, FSM&gt; {\n    typedef boost::mpl::list&lt;\n                boost::statechart::custom_reaction&lt;T&gt;,\n                boost::statechart::transition&lt;U, D&gt; &gt; reactions;\n\n    C() { std::cout &lt;&lt; \"entered C\" &lt;&lt; std::endl; }\n\n    boost::statechart::result react(const T&amp;) {\n\n        switch(outermost_context().previous_state) {\n\n        case state_mapping::A:\n            return transit&lt;A&gt;();\n        case state_mapping::B:\n            return  transit&lt;B&gt;();\n        default:\n            return discard_event();\n\n        }\n\n    }\n};\n\nstruct D : boost::statechart::simple_state&lt;D, FSM&gt; {\n    D() { std::cout &lt;&lt; \"entered D\" &lt;&lt; std::endl; }\n};\n\nint main() {\n    FSM fsm;\n\n    fsm.initiate();\n\n    fsm.process_event(S());\n    fsm.process_event(T());\n    fsm.process_event(S());\n    fsm.process_event(U());\n\n    return 0;\n}\n</code></pre>\n\n<p>If anyone has a better suggestion I'm all ears, otherwise I'll accept this in a day or two.</p>\n"}], "owner": {"reputation": 97, "user_id": 8093093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a2c9fef5fbaba5fd2e942227d8aecf?s=128&d=identicon&r=PG&f=1", "display_name": "singhh23", "link": "https://stackoverflow.com/users/8093093/singhh23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 44290757, "answer_count": 1, "score": 1, "last_activity_date": 1496408035, "creation_date": 1496246794, "last_edit_date": 1496248560, "question_id": 44289654, "link": "https://stackoverflow.com/questions/44289654/boost-statechart-return-to-previous-state", "title": "Boost Statechart: Return to Previous State", "body": "<p>I've got a state machine wherein if I enter a particular state, sometimes I need to have a regular transition to another state and other times I need to return to a previous state.</p>\n\n<p>For example, having states A B C, say that transition S moves state A to C and from B to C. I need that a transition T moves C to A when S occurred in state A and C to B when it occurred in state B. </p>\n\n<p>In the code below, transition S occurs in state B, and thus I would like for transition T to return to state B (whereas currently, it returns to state A).</p>\n\n<pre><code>#include &lt;boost/mpl/list.hpp&gt;\n\n#include &lt;boost/statechart/state_machine.hpp&gt;\n#include &lt;boost/statechart/simple_state.hpp&gt;\n#include &lt;boost/statechart/event.hpp&gt;\n#include &lt;boost/statechart/transition.hpp&gt;\n\n// states\nstruct A;\nstruct B;\nstruct C;\nstruct D;\n\n// events\nstruct S : boost::statechart::event&lt;S&gt; {};\nstruct T : boost::statechart::event&lt;T&gt; {};\nstruct U : boost::statechart::event&lt;U&gt; {};\n\n// fsm\nstruct FSM : boost::statechart::state_machine&lt;FSM, B&gt; {};\n\n// fully defined states/transitions\nstruct A : boost::statechart::simple_state&lt;A, FSM&gt; {\n    typedef boost::statechart::transition&lt;S, C&gt; reactions;\n\n    A() { std::cout &lt;&lt; \"entered A\" &lt;&lt; std::endl; }\n};\n\nstruct B : boost::statechart::simple_state&lt;B, FSM&gt; {\n    typedef boost::statechart::transition&lt;S, C&gt; reactions;\n\n    B() { std::cout &lt;&lt; \"entered B\" &lt;&lt; std::endl; }\n};\n\nstruct C : boost::statechart::simple_state&lt;C, FSM&gt; {\n    typedef boost::mpl::list&lt;\n                boost::statechart::transition&lt;T, A&gt;,\n                boost::statechart::transition&lt;T, B&gt;,\n                boost::statechart::transition&lt;U, D&gt; &gt; reactions;\n\n    C() { std::cout &lt;&lt; \"entered C\" &lt;&lt; std::endl; }\n};\n\nstruct D : boost::statechart::simple_state&lt;D, FSM&gt; {\n    D() { std::cout &lt;&lt; \"entered D\" &lt;&lt; std::endl; } \n};\n\nint main() {\n    FSM fsm;\n\n    fsm.initiate();\n\n    fsm.process_event(S());\n    fsm.process_event(T());\n    fsm.process_event(S());\n    fsm.process_event(U());\n\n    return 0;\n}\n</code></pre>\n\n<p>The above code returns:</p>\n\n<pre><code>entered B\nentered C\nentered A\nentered C\nentered D\n</code></pre>\n\n<p>and I would like to instead see:</p>\n\n<pre><code>entered B\nentered C\nentered B\nentered C\nentered D\n</code></pre>\n\n<p>Is there any clean way to do this using Boost::Statechart?</p>\n"}, {"tags": ["c++", "windows", "console"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1496250267, "post_id": 44289535, "comment_id": 75588035, "body": "Just configure the console the way you want it.  Click the system menu (or press Alt+Space) &gt; Properties &gt; Options tab &gt; untick &quot;QuickEdit Mode&quot;.  Or use the Get/SetConsoleMode() winapi function to turn off ENABLE_QUICK_EDIT_MODE, but do consider leaving that choice to the user of your program."}, {"owner": {"reputation": 1, "user_id": 8093042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13ba6baf9f5f6cf7d5ff4f905206c1b?s=128&d=identicon&r=PG&f=1", "display_name": "faridah6931", "link": "https://stackoverflow.com/users/8093042/faridah6931"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1496251130, "post_id": 44289535, "comment_id": 75588565, "body": "Disabling ~ENABLE_QUICK_EDIT_MODE was not working adding  ENABLE_EXTENDED_FLAGS worked though, thanks"}, {"owner": {"reputation": 55, "user_id": 13468902, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhwDWHsxJMFNXppmHTd4TK-3PaJSpArSxKVbnMYzmI=k-s128", "display_name": "Craig Hawkins", "link": "https://stackoverflow.com/users/13468902/craig-hawkins"}, "edited": false, "score": 0, "creation_date": 1600696888, "post_id": 44289535, "comment_id": 113160882, "body": "<a href=\"https://stackoverflow.com/questions/46567248/how-to-disable-user-selection-in-windows-console\" title=\"how to disable user selection in windows console\">stackoverflow.com/questions/46567248/&hellip;</a> This worked for me."}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1496247830, "creation_date": 1496247830, "answer_id": 44290023, "question_id": 44289535, "link": "https://stackoverflow.com/questions/44289535/windows-console-api-mouse-event-just-goes-to-select-mode/44290023#44290023", "title": "Windows Console API Mouse Event Just Goes To Select Mode", "body": "<p>Mouse selection mode was one of the <a href=\"https://blogs.windows.com/buildingapps/2014/10/07/console-improvements-in-the-windows-10-technical-preview/#AYROJctbLQg4BlSI.97\" rel=\"nofollow noreferrer\">console improvement features introduced in Windows 10</a>. It can be turned on/off from console parameters. Note that if you want to disable it for your application you can configure console parameters for shortcut.</p>\n"}], "owner": {"reputation": 1, "user_id": 8093042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13ba6baf9f5f6cf7d5ff4f905206c1b?s=128&d=identicon&r=PG&f=1", "display_name": "faridah6931", "link": "https://stackoverflow.com/users/8093042/faridah6931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496254478, "creation_date": 1496246477, "last_edit_date": 1496254478, "question_id": 44289535, "link": "https://stackoverflow.com/questions/44289535/windows-console-api-mouse-event-just-goes-to-select-mode", "title": "Windows Console API Mouse Event Just Goes To Select Mode", "body": "<p>I am using Windows 10, while key events work okay. The problem is with mouse events clicking in the console sort of just automatically assumes I am trying to select and thus goes into select mode. I am not sure if there is something in the API to turn this off.</p>\n\n<p>Update: Anyone who wants to solve this here is  a link to the solution <a href=\"http://www.cplusplus.com/forum/windows/16988/\" rel=\"nofollow noreferrer\">SOLUTION</a></p>\n"}, {"tags": ["c++", "oop", "inheritance", "polymorphism", "information-hiding"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1496246398, "post_id": 44289457, "comment_id": 75585713, "body": "Well, you either have the function visible to the outside world (which includes the derived classes) or you hide it to everybody."}, {"owner": {"reputation": 1467, "user_id": 1364178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd7a325d0e5f65ea55fcc81a90df01a?s=128&d=identicon&r=PG", "display_name": "David Vereb", "link": "https://stackoverflow.com/users/1364178/david-vereb"}, "edited": false, "score": 0, "creation_date": 1496246410, "post_id": 44289457, "comment_id": 75585718, "body": "Could apply_transforms be public static on the triangle class?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1496246743, "post_id": 44289457, "comment_id": 75585927, "body": "I&#39;d suggest that you simply stop being bothered by this. Are you bothered that my string class, which has nothing to do with geometry, can also have access to this function?"}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 4, "last_activity_date": 1496246746, "creation_date": 1496246746, "answer_id": 44289634, "question_id": 44289457, "link": "https://stackoverflow.com/questions/44289457/c-hide-method-from-children/44289634#44289634", "title": "C++: hide method from children", "body": "<p>Make <code>apply_transforms</code> a non-member function that is not included into header files required by classes implementing <code>transform</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1496249382, "post_id": 44290108, "comment_id": 75587494, "body": "But note that the &quot;natural&quot; syntax using <code>*</code> is always left-to-right associative in C++, which can be inefficient: <a href=\"https://en.wikipedia.org/wiki/Matrix_chain_multiplication\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Matrix_chain_multiplication</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1496249925, "post_id": 44290108, "comment_id": 75587837, "body": "@BenVoigt, good point. Fortunately, you can compute a combined transform and use it as many times as you wish."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1496249894, "last_edit_date": 1496249894, "creation_date": 1496248055, "answer_id": 44290108, "question_id": 44289457, "link": "https://stackoverflow.com/questions/44289457/c-hide-method-from-children/44290108#44290108", "title": "C++: hide method from children", "body": "<p>I suggest changing how you view transforms a little bit.</p>\n\n<ol>\n<li><p>Make <code>transform</code> a class such that it does not need other classes to be derived from it. All the data needed to transform a point can be kept in this class.</p></li>\n<li><p>Add functions that construct scaling transform, translation transform, and rotational transform.</p></li>\n<li><p>Add functions to multiply transforms, and multiply a transform and a point. These can be building blocks for transforming other shapes.</p></li>\n<li><p>Add functions for transforming other shapes as needed.</p></li>\n</ol>\n\n<hr>\n\n<p>In a skeletal form,</p>\n\n<pre><code>class transform { ... };\nclass position { ... };\n\n// tag structs\nstruct rotation_about_x {};\nstruct rotation_about_y {};\nstruct rotation_about_z {};\n\n// Functions to construct transforms\ntransform construct_scale_transform(double scale_factor) { ... };\ntransform construct_translation_transform(position pos) { ... };\ntransform construct_rotation_transform(double angle, rotation_about_x tag) { ... };\ntransform construct_rotation_transform(double angle, rotation_about_y tag) { ... };\ntransform construct_rotation_transform(double angle, rotation_about_z tag) { ... };\n\n// Function to transform a point.\nposition operator*(transform const&amp; t, position const&amp; p) { ... }\n\n// Function to multiply transforms.\ntransform operator*(transform const&amp; t1, transform const&amp; t2) { ... }\n\n\n// Functions to apply transforms to other objects.\ntriangle operator*(transform const&amp; tr, triangle const&amp; t) { ... }\n...\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>transform t1 = construct_rotation_transform(10, rotation_about_x{});\ntransform t2 = construct_translation_transform({20, 10, 0});\n\nposition p1{100, 200, 30};\nposition p2 = t1*t2*p1;\n\ntriangle tr1{ ... }\ntriangle tr2 = t1*t2*tr1;\n</code></pre>\n\n<p>If you are going to use the same combined transform multiple times, compute the combined transform first and use it for all transforms.</p>\n\n<pre><code>transform t1 = construct_rotation_transform(10, rotation_about_x{});\ntransform t2 = construct_rotation_transform(5, rotation_about_y{});\ntransform t3 = construct_translation_transform({20, 10, 0});\ntranform tc = t1 * t2 * t3;\n\nposition p1{100, 200, 30};\nposition p2 = tc*p1;\n\ntriangle tr1{ ... }\ntriangle tr2 = tc*tr1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5241, "user_id": 2515628, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/AQ2kB.jpg?s=128&g=1", "display_name": "Igor \u0160evo", "link": "https://stackoverflow.com/users/2515628/igor-%c5%a0evo"}, "is_accepted": false, "score": 1, "last_activity_date": 1496250569, "creation_date": 1496250569, "answer_id": 44290882, "question_id": 44289457, "link": "https://stackoverflow.com/questions/44289457/c-hide-method-from-children/44290882#44290882", "title": "C++: hide method from children", "body": "<p>The fact is that since your <code>apply_transforms(...)</code> method is public, it is as such available to all potential callers. Considering this, you cannot, nor should you, prevent the child classes from being able to see these methods.</p>\n\n<p>If you know that your method will be called from specific classes, you can make your method private and declare those calling classes as friends.</p>\n\n<p>Otherwise, encapsulate the method in a different class to prevent child classes of <code>transform</code> from containing it.</p>\n"}], "owner": {"reputation": 3971, "user_id": 2921343, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5a6a90bd1c391e3f7aa638134a14481?s=128&d=identicon&r=PG&f=1", "display_name": "Eutherpy", "link": "https://stackoverflow.com/users/2921343/eutherpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 44289634, "answer_count": 3, "score": 2, "last_activity_date": 1496250569, "creation_date": 1496246187, "question_id": 44289457, "link": "https://stackoverflow.com/questions/44289457/c-hide-method-from-children", "title": "C++: hide method from children", "body": "<p>I have a class called <code>transform</code>, and its child classes, <code>translation</code>, <code>rotation</code> and <code>scaling</code>, which are supposed to apply transformations on a triangle.</p>\n\n<p>Each of the child classes overrides the <code>apply_transform()</code> method:</p>\n\n<pre><code>class transform\n{\nprotected:\n    virtual triangle apply_transform(const triangle&amp;) const = 0;\npublic:\n    static triangle apply_transforms(const triangle&amp;, const std::initializer_list&lt;const transform*&gt;&amp;);\n};\n\nclass scaling : public transform\n{\n...\npublic:\n    triangle apply_transform(const triangle&amp;) const override;\n};\n\n//same for rotation and translation\n</code></pre>\n\n<p>I also have a function called <code>apply_transforms</code>, which should be accessible to the outside world, and I use it to apply multiple transformations. I pass it a list of <code>transform*</code> to enable polymorphism. </p>\n\n<p>The only issue I have is that now, the child classes are also aware of this method. This is bothering me since a child class shouldn't be able to apply all of the other transformations. </p>\n\n<p>Is there an elegant solution to this? </p>\n"}, {"tags": ["c++", "string", "fortran", "fortran-iso-c-binding"], "comments": [{"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1496248321, "post_id": 44289371, "comment_id": 75586850, "body": "Why is your attempt unsuccessful?  You will certainly have a problem if <code>argv[1]</code> isn&#39;t at least length 50. That is, please show any errors or messages."}, {"owner": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1496254058, "post_id": 44289371, "comment_id": 75590139, "body": "For a reason I don&#39;t know why (read: the reason why I am here), I got the following compilation error with codes above <a href=\"https://pastebin.com/Q4e48RkV\" rel=\"nofollow noreferrer\">pastebin.com/Q4e48RkV</a>"}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "edited": false, "score": 0, "creation_date": 1496254150, "post_id": 44289371, "comment_id": 75590179, "body": "I&#39;m not familiar with C++, but in the C version I posted in my answer, printing is left to the Fortran program. Do you need <code>std::cout</code>?"}, {"owner": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "edited": false, "score": 0, "creation_date": 1496254682, "post_id": 44289371, "comment_id": 75590445, "body": "oops, I&#39;ll correct that"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "edited": false, "score": 0, "creation_date": 1496247512, "post_id": 44289582, "comment_id": 75586376, "body": "gfortran -c mymodule.f90  mymodule.f90:7.34:                write(<i>,</i>) &quot;Hello &quot;, people                                   1 Error: The upper bound in the last dimension must appear in the reference to the assumed size array &#39;people&#39; at (1) mymodule.f90:7.41:                write(<i>,</i>) &quot;Hello &quot;, people                                          1 Error: Data transfer element at (1) cannot be a full reference to an assumed-size array"}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "reply_to_user": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "edited": false, "score": 0, "creation_date": 1496248267, "post_id": 44289582, "comment_id": 75586819, "body": "@fanhako, although this answer doesn&#39;t address it, you should be aware that <code>people</code> is an assumed size array of length-1 characters, not a scalar assumed length character.  With an assumed size array you cannot (as the compiler complains) reference it as a whole array.  You need to change much more than just the one declaration."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1496248554, "post_id": 44289582, "comment_id": 75587007, "body": "Can you explain why declaration of an explicit shape array should be changed to one of an assumed size array?"}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1496254074, "post_id": 44289582, "comment_id": 75590148, "body": "@francescalus Wellll...turns out, you <i>don&#39;t</i> need to do that. But as you mention, you do need the size of the character array. See my edit."}, {"owner": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1496254400, "post_id": 44289582, "comment_id": 75590299, "body": "@francescalus Oh, the comment above is the compiler output when I tried Matt&#39;s suggested modification. I am really confused about the difference of array of char in these two languages. And I am just limiting myself to C char*, how about C++ standard string ? I am here to learn, so would you tell me more about &quot;change much more than just the one declaration&quot; ?"}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "edited": false, "score": 0, "creation_date": 1496254664, "post_id": 44289582, "comment_id": 75590429, "body": "@fanhako Did you try the solution in the edited answer? You need to change a few things about the Fortran code (also, read the notes in the code)."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 2, "creation_date": 1496256060, "post_id": 44289582, "comment_id": 75591225, "body": "You aren&#39;t passing the size of character array (or the length of the character scalar): <code>character(kind=c_char), intent(in) :: people</code> is a scalar length-1 character without a <code>dimension</code> statement.  <code>people(1:sz)</code> is an invalid substring reference for <code>sz</code> greater than 1 in this case (or invalid array reference for the scalar)."}, {"owner": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "edited": false, "score": 0, "creation_date": 1496257031, "post_id": 44289582, "comment_id": 75591742, "body": "@MattP: Thanks, your explanation was clear! I edited the code in C++, now it&#39;s working. Next step for me is to return a value"}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1496257079, "post_id": 44289582, "comment_id": 75591775, "body": "@francescalus I think that you are correct: <code>character(len=1,kind=c_char), dimension(*), intent(in) :: people</code> is prob the most technically correct. However, <code>sz</code> is most certainly the size (number of items) of the char array."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1496296488, "post_id": 44289582, "comment_id": 75604292, "body": "The program is invalid."}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1496310773, "post_id": 44289582, "comment_id": 75613660, "body": "Ah, there you are @VladimirF! Could you be more specific?"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1496312340, "post_id": 44289582, "comment_id": 75614818, "body": "Just move the correct code from the comment to the real code. <code>character(kind=c_char), intent(in) :: people</code> is invalid, because you then do <code>people(1:sz)</code>. The <code>character(kind=c_char), intent(in), dimension(*) :: people</code> or even better <code>character(kind=c_char), intent(in), dimension(sz) :: people</code> is necessary."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1496312444, "post_id": 44289582, "comment_id": 75614882, "body": "Compile with <code>-fcheck=all</code> to see."}, {"owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1496313773, "post_id": 44289582, "comment_id": 75615786, "body": "@VladimirF Agreed! Done. Should have made that change earlier."}], "tags": [], "owner": {"reputation": 2095, "user_id": 7038689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea19ae9f57b95d7abfeaa796650bd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Matt P", "link": "https://stackoverflow.com/users/7038689/matt-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1496313681, "last_edit_date": 1496313681, "creation_date": 1496246593, "answer_id": 44289582, "question_id": 44289371, "link": "https://stackoverflow.com/questions/44289371/what-is-the-official-way-to-deal-with-string-in-c-fortran-interop/44289582#44289582", "title": "What is the official way to deal with string in C++/FORTRAN interop", "body": "<p>Try using the <code>c_char</code> type:</p>\n\n<p><code>character(kind=c_char), dimension(*), intent(in)</code></p>\n\n<hr>\n\n<p><strong>EDIT 1</strong>\nSo, after @francescalus posed the question, I looked into this further. Basically, the \"assumed size\" character array is not necessary<sup><strong>1</strong></sup>, although I do believe that the size of the char array is (please correct me if I'm wrong about that). I'm going to post a C-calling-Fortran version below, since I don't know the C++ syntax and don't feel like looking it up.</p>\n\n<hr>\n\n<p><strong>EDIT 2</strong>\nAs mentioned in footnote 1, it is only correct to declare <code>people</code> in the Fortran program as an assumed size array of chars, or (as suggested by @VladimirF) with the size given directly by <code>sz</code>. I clear this up in the code below. </p>\n\n<p>The Fortran program:</p>\n\n<pre><code>! SayHello.f90\nsubroutine SayHello(people,sz) bind(c,name=\"SayHello\")\n    use, intrinsic :: iso_c_binding\n    implicit none\n    ! Notes: \n    ! The size `sz` of the character array is passed in by value.\n    ! Declare `people` as an assumed-size array for correctness, or just use the size `sz` passed in from C.\n    character(kind=c_char), intent(in), dimension(sz) :: people\n    integer(kind=c_int), intent(in), value :: sz\n    write(*,*) \"Hello, \", people(1:sz)\nend subroutine\n</code></pre>\n\n<p>And the C program:</p>\n\n<pre><code>/*Hello.c */    \n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid SayHello(char *name, int len);\n\nint main(int argc, char** argv){\n    size_t sz = strlen(argv[1]);\n    char * name = malloc(sz+1);\n    strcpy(name, argv[1]);\n    SayHello(name, sz+1);\n    free(name);\n    return 0;\n}\n</code></pre>\n\n<p>Compilation (with ifort), call, and output:</p>\n\n<pre><code>ifort /c SayHello.f90 \nicl Hello.c /link SayHello.obj\nHello.exe MattP\n// output: Hello, MattP\n</code></pre>\n\n<p><sub><sup><strong>1</strong></sup>Update: Seems like the official usage \"for interoperability\" is to declare as an array of characters, using assumed size: <code>char(len=1,kind=c_char), dimension(*), intent(in)</code></sub></p>\n"}], "owner": {"reputation": 43, "user_id": 8092880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da7ac8463bde0bf9642ec5e820c92f5?s=128&d=identicon&r=PG&f=1", "display_name": "fanhako", "link": "https://stackoverflow.com/users/8092880/fanhako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 1, "accepted_answer_id": 44289582, "answer_count": 1, "score": 4, "last_activity_date": 1496313681, "creation_date": 1496245929, "last_edit_date": 1496254833, "question_id": 44289371, "link": "https://stackoverflow.com/questions/44289371/what-is-the-official-way-to-deal-with-string-in-c-fortran-interop", "title": "What is the official way to deal with string in C++/FORTRAN interop", "body": "<p>I'd like to learn the latest improvement in C++/FORTRAN interoperability when it comes to string in particular. The following is my unsuccessful attempt, please help me correct or advise a better solution.\nMy compiler is gcc 4.8.5</p>\n\n<p>In C++</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern \"C\"{\n    void SayHello(char*);\n}\nint main(int argc, char** argv){\n    char * name = argv[1];\n    SayHello(name);\n    return 0;\n}\n</code></pre>\n\n<p>In Fortran</p>\n\n<pre><code>module MyModule\n\n      contains\n          subroutine SayHello(people) bind(c,name=\"SayHello\")\n              use, intrinsic :: iso_c_binding\n              character, dimension(50), intent(in) :: people\n              write(*,*) \"Hello \", people\n          end subroutine\nend module MyModule\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "static-linking", "mupdf"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1496245763, "post_id": 44289234, "comment_id": 75585279, "body": "C and C++ are different languages.  They have a common subset large enough to write programs in, but programs not specifically written and maintained to comply with both standards are highly likely to be invalid in one language or the other.  If you have a C library then build it with a C compiler.  MSVC++ is not a conforming C compiler when running in C mode, and it <i>certainly</i> is not a conforming C compiler when running in C++ mode.  Its C mode might be good enough to build your particular C code, however, especially if it&#39;s old code."}, {"owner": {"reputation": 39, "user_id": 8002688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e13efe62eefb530962e9b3eb4f99a3?s=128&d=identicon&r=PG&f=1", "display_name": "hardCode", "link": "https://stackoverflow.com/users/8002688/hardcode"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1496246544, "post_id": 44289234, "comment_id": 75585812, "body": "@ John Bollinger  I thought extern C must to solve any compatibility between C nand C++. (( Thanks for explanation."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496246632, "post_id": 44289234, "comment_id": 75585865, "body": "You already posted this question. It was a duplicate. While I don&#39;t have the permissions to view the old question, which you deleted, in case it was closed for being a duplicate, then posting the same question after it&#39;s been removed/closed will result in a ban or other punishment."}, {"owner": {"reputation": 39, "user_id": 8002688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e13efe62eefb530962e9b3eb4f99a3?s=128&d=identicon&r=PG&f=1", "display_name": "hardCode", "link": "https://stackoverflow.com/users/8002688/hardcode"}, "edited": false, "score": 0, "creation_date": 1496246977, "post_id": 44289234, "comment_id": 75586070, "body": "Sorry but it&#39;s new question with new issues, which is not duplicated. Indeed,  my previous question was duplicated and was deleted."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1496246988, "post_id": 44289234, "comment_id": 75586072, "body": "@hardCode, no, not at all.  <code>extern &quot;C&quot;</code> expresses (in C++) that the function(s) so declared have <i>C linkage</i>.  That makes it possible to link them to and call them from C, but it has nothing to do with their implementation, which must still be conforming C++ (since the <code>extern &quot;C&quot;</code> syntax is a C++-only feature)."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496247890, "post_id": 44289234, "comment_id": 75586607, "body": "There are many solutions listed on that answer. It&#39;s an obvious duplicate. You&#39;re failing to link with a library that implements that method, thus the linker can&#39;t find the implementation of the method and linking fails."}], "answers": [{"tags": [], "owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "is_accepted": true, "score": 0, "last_activity_date": 1496252904, "creation_date": 1496252904, "answer_id": 44291520, "question_id": 44289234, "link": "https://stackoverflow.com/questions/44289234/compiling-c-library-in-c-linking-issue-mupdf/44291520#44291520", "title": "Compiling C library in C++. Linking issue. MuPDF", "body": "<p>Either your linker is failing to find the import library for mupdf or you have a name mangling/decoration type issue.</p>\n\n<p>Once you download and build mupdf, there should be an import library for you to link to.  Are you linking to it?  Look in your project linker settings under Linker >> Input >> Additional Dependencies.   Have you added such an import?</p>\n\n<p>If not, add it in.  It shouldn't be hard to find.  It is likely right next to the mupdf DLL that you downloaded (or built).</p>\n\n<p>Assuming you have added it, your next step is to verify that you are properly finding it.    Look at the build output.  Are you getting a warning about it?  No, change the Linker >> General >> Show Progress to \"Display all progress messages\" and build again.  Is there a warning about the library or function?</p>\n\n<p>Last possibility that I can think of is that the DLL is actually exporting its functions as C++ (i.e. with name decoration), not as extern \"C\".  In that case and your extern \"C\" brackets don't belong there.  Or perhaps vice versa (i.e. maybe you failed to use extern \"C\" in all places you #include it).  I can see that your example uses it but is that all the places?</p>\n\n<p>If you are building the mupdf.DLL be sure it is being built the same way and with the same calling convention as your client code.  </p>\n"}], "owner": {"reputation": 39, "user_id": 8002688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e13efe62eefb530962e9b3eb4f99a3?s=128&d=identicon&r=PG&f=1", "display_name": "hardCode", "link": "https://stackoverflow.com/users/8002688/hardcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "closed_date": 1496254187, "accepted_answer_id": 44291520, "answer_count": 1, "score": 0, "last_activity_date": 1496252904, "creation_date": 1496245514, "question_id": 44289234, "link": "https://stackoverflow.com/questions/44289234/compiling-c-library-in-c-linking-issue-mupdf", "closed_reason": "Duplicate", "title": "Compiling C library in C++. Linking issue. MuPDF", "body": "<p>I tried multiple PDF lybrary and MUPDF is my last chance to build my own small PDF application. But here I also have problems. Before that I had problem with LNK4098: defaultlib 'MSVCRT', but I solved that to set for all MUPDF library /MDd version. Most errors is solved after that, but still I can't to solve this:</p>\n\n<pre><code>error LNK2001: unresolved external symbol \"void __cdecl pdfapp_open(struct pdfapp_s *,char *,int)\" (?pdfapp_open@@YAXPEAUpdfapp_s@@PEADH@Z)\n//more 3 errors\n</code></pre>\n\n<p>As MuPDF written on C, I do this:</p>\n\n<pre><code>extern \"C\" {\n#include &lt;pdfapp.h&gt;\n#include &lt;mupdf\\fitz\\context.h&gt;\n}\n</code></pre>\n\n<p>But I get this errors:</p>\n\n<pre><code>error LNK2001: unresolved external symbol pdfapp_open\n//more 3 errors\n</code></pre>\n\n<p>There is only three functions what I use in my application. I checked libs and headers linking, I set my project Debug, x64, /MDd also but I get the same. \nHonestly, I can't find this three functons in no one libs. I'm not a expert in programming but I know that functions strings should be finding in libs, doesn't? What does mean this errors in my case?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 4, "creation_date": 1496245342, "post_id": 44289119, "comment_id": 75584978, "body": "<i>&quot;I think I&#39;ve heard that std::tuple&lt;&gt; could result in slightly slower compile times. Is this true?&quot;</i> - we only like to verify rumors that has some empirical numbers..."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1496245374, "post_id": 44289119, "comment_id": 75584999, "body": "Can you be a bit more specific? Everything using template slows down the compiler by a bit."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1496245637, "post_id": 44289119, "comment_id": 75585170, "body": "@WhiZTiM, this may have been some time ago.  No idea if it was ever verified.  That is why I&#39;m asking."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1496246386, "post_id": 44289119, "comment_id": 75585705, "body": "Do slightly slower compilation times actually matter in your case? Sounds like you&#39;re worrying about a premature optimisation. What do you mean by &quot;returns a class type&quot;? Are you talking about a function returning an object, or a metafunction &quot;returning&quot; a type? If you mean a metafunction that does <code>using type = std::tuple&lt;Types...&gt;;</code> then you won&#39;t even instantiate <code>std::tuple</code> and so it will be just as fast as your <code>list</code> suggestion."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1496246677, "post_id": 44289119, "comment_id": 75585887, "body": "@JonathanWakely, that is what I am asking about.  A metafunction &#39;returning&#39; a type.  I was thinking that it shouldn&#39;t make a difference, but I wasn&#39;t sure."}], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1496246416, "post_id": 44289280, "comment_id": 75585727, "body": "So, I should roll my own?  Isn&#39;t there some <code>std</code> equivalent?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 1, "creation_date": 1496246531, "post_id": 44289280, "comment_id": 75585801, "body": "@Adrian: your call. <code>std::tuple</code> isn&#39;t likely to ever be a bottleneck, but in my opinion it&#39;s misleading if part of the API. You could use <code>hana</code> or <code>kvasir</code> or roll your own."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1496249597, "post_id": 44289280, "comment_id": 75587636, "body": "If I&#39;m not mistaken, you could leave the type undefined in order to prevent accidental construction: <code>template &lt;typename...&gt; struct type_list;</code>. Using the type purely as a type (and never as the type of an object) does not require that it be defined, only declared."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1496259513, "post_id": 44289280, "comment_id": 75593126, "body": "@cdhowie I quite often pass around instances of my tag types (including lists of types) as values.  Infact I&#39;d <code>template&lt;class...Ts&gt;struct type_list_t{using type=type_list_t;constexpr type_list_t(){}}; template&lt;class...Ts&gt;constexpr type_list_t&lt;Ts...&gt; type_list{};</code> to make value-style metaprogramming easier to do."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 4, "last_activity_date": 1496245990, "last_edit_date": 1496245990, "creation_date": 1496245639, "answer_id": 44289280, "question_id": 44289119, "link": "https://stackoverflow.com/questions/44289119/if-creating-a-generic-template-api-that-supports-returning-a-variadic-list-of-ty/44289280#44289280", "title": "If creating a generic template API that supports returning a variadic list of types, should I use std::tuple or something else?", "body": "<blockquote>\n  <p>I think I've heard that std::tuple&lt;> could result in slightly slower compile times</p>\n</blockquote>\n\n<p>This is true. Louis Dionne <em>(author of Boost.Hana)</em> mentioned that <code>std::tuple</code> was consistently slower than his <code>hana::tuple</code> implementation. There is a benchmark involving <code>std::tuple</code> on <a href=\"http://metaben.ch/#\" rel=\"nofollow noreferrer\">metaben.ch</a>, under \"Heterogeneous/<code>make</code>\".</p>\n\n<hr>\n\n<p>If all you need is a list of types, I suggest simply using:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nstruct type_list { };\n</code></pre>\n\n<p>You cannot do better than that in terms of lightweightness and it  be trivially \"converted\" to a <code>std::tuple&lt;Ts...&gt;</code> or any other variadic template class. Additionally, its semantics and meaning are clearer compared to <code>std::tuple</code>, which is often used for run-time computation.</p>\n\n<pre><code>template &lt;typename TypeList, template &lt;typename...&gt; class Target&gt;\nstruct rename;\n\ntemplate &lt;typename... Ts, template &lt;typename...&gt; class Target&gt;\nstruct rename&lt;type_list&lt;Ts...&gt;, Target&gt;\n{\n    using type = Target&lt;Ts...&gt;;\n};\n</code></pre>\n\n<hr>\n\n<p>If you want an <strong>extremely fast</strong> type-only metaprogramming library, check out <a href=\"https://github.com/kvasir-io/mpl\" rel=\"nofollow noreferrer\">Kvasir.MPL</a>.</p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496247502, "creation_date": 1496245246, "last_edit_date": 1496247502, "question_id": 44289119, "link": "https://stackoverflow.com/questions/44289119/if-creating-a-generic-template-api-that-supports-returning-a-variadic-list-of-ty", "title": "If creating a generic template API that supports returning a variadic list of types, should I use std::tuple or something else?", "body": "<p>So, I have a template API that I want to publish.  This API returns a class type that contains a list of types.</p>\n\n<p>In general, should I use <code>std::tuple&lt;&gt;</code> to specify this or should I use something else that may be more lightweight?  </p>\n\n<p>I think I've heard that <code>std::tuple&lt;&gt;</code> could result in slightly slower compile times, relative to using, say:</p>\n\n<pre><code>template &lt;typename...&gt;\nstruct list {};\n</code></pre>\n\n<p>Is this true?</p>\n"}, {"tags": ["c++", "g++", "flags"], "comments": [{"owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "edited": false, "score": 2, "creation_date": 1496245360, "post_id": 44289110, "comment_id": 75584987, "body": "<a href=\"https://linux.die.net/man/1/timeout\" rel=\"nofollow noreferrer\">timeout</a> might be of interest..."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1496245423, "post_id": 44289110, "comment_id": 75585039, "body": "or <code>(ulimit -t 20 ; gcc ...)</code>"}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1496245815, "post_id": 44289110, "comment_id": 75585312, "body": "@JonathanWakely How does that work? Seems to be a command, but it didn&#39;t kill the <code>sleep</code> I tried, <code>(ulimit -t 1; sleep 20)</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1496246651, "post_id": 44289110, "comment_id": 75585875, "body": "<code>ulimit -t 1</code> is limiting the <i>CPU</i> time, and <code>sleep</code> does not eat any CPU time!"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1603711444, "last_edit_date": 1603711444, "creation_date": 1496246124, "answer_id": 44289435, "question_id": 44289110, "link": "https://stackoverflow.com/questions/44289110/how-to-instruct-g-to-stop-after-n-seconds/44289435#44289435", "title": "How to instruct g++ to stop after n seconds", "body": "<p>Your question is confusing.</p>\n<p>The <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compiler is mostly CPU bound. So if you want to limit the compilation time, use <code>ulimit -t 20;</code> then the next <code>g++</code> command would get killed (with <code>SIGXCPU</code>) after 20 seconds of CPU time (see also <a href=\"https://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a>, <a href=\"https://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow noreferrer\">execve(2)</a>, <a href=\"https://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\">waitpid(2)</a>...). But 20 seconds of compile time is a big lot.</p>\n<p>You might consider <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">invoking GCC</a> with <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">developer options</a> such as <code>-ftime-report</code>, and you could extend GCC with your <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Plugins.html\" rel=\"nofollow noreferrer\">GCC plugin</a> limiting more precisely the compilation time. Since GCC is <a href=\"https://www.gnu.org/philosophy/free-sw.en.html\" rel=\"nofollow noreferrer\">free software</a>, you could even patch it for your needs (read about its <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Pass-manager.html\" rel=\"nofollow noreferrer\">pass manager</a>). With such an approach, budget perhaps a week or a few months of work.</p>\n<p>But if you are asking about how to ask the <code>g++</code> compiler to magically limit the execution time (or run time) of the generated executable, it is not the business of the compiler.</p>\n<p>A possibility might be to add, inside the C++ code of your program, at <em>some</em> points, a test about current timeout. IIRC, the <a href=\"https://www.bugseng.com/parma-polyhedra-library\" rel=\"nofollow noreferrer\"><em>Parma Polyhedra Library</em></a> is doing so. You could BTW use a preprocessor such as <a href=\"https://logological.org/gpp\" rel=\"nofollow noreferrer\">GPP</a> to generate such C++ code. You might use <a href=\"https://man7.org/linux/man-pages/man2/setitimer.2.html\" rel=\"nofollow noreferrer\">setitimer(2)</a> with your signal handler (read <a href=\"https://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safety(7)</a>) setting some <code>volatile sigatomic_t timedout;</code> variable, which would be tested by e.g. some macro such as</p>\n<pre><code>#define TEST_TIMEOUT() do { if (timedout) handle_timeout(); } while(0)\n</code></pre>\n<p>then you would put <code>TEST_TIMEOUT()</code> at appropriate places in your C++ code. Jacques Pitrat's last book <a href=\"https://rads.stackoverflow.com/amzn/click/com/1848211015\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\"><em>artificial beings : the conscience of a conscious machine</em></a> is suggesting such an approach.</p>\n<p>Your C++ application (perhaps coded with <a href=\"https://qt.io/\" rel=\"nofollow noreferrer\">Qt</a> or <a href=\"https://www.webtoolkit.eu/wt\" rel=\"nofollow noreferrer\">Wt</a>) might also have some <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">event loop</a>. Then see also <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a>, <a href=\"https://man7.org/linux/man-pages/man2/timerfd_create.2.html\" rel=\"nofollow noreferrer\">timerfd_create(2)</a>, <a href=\"https://man7.org/linux/man-pages/man2/signalfd.2.html\" rel=\"nofollow noreferrer\">signalfd(2)</a> and the <a href=\"https://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">pipe(7)</a> to self trick documented in <a href=\"https://doc.qt.io/qt-5/unix-signals.html\" rel=\"nofollow noreferrer\"><em>Calling Qt Functions From Unix Signal Handlers</em></a></p>\n<p>Read <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a> which is the system call invoked by the <a href=\"https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html\" rel=\"nofollow noreferrer\"><code>ulimit</code> Bash builtin</a>.</p>\n<p>Regarding timing in general, read <a href=\"http://man7.org/linux/man-pages/man7/time.7.html\" rel=\"nofollow noreferrer\">time(7)</a>. In your particular C++ code, you might be interested in using <a href=\"http://man7.org/linux/man-pages/man2/timer_create.2.html\" rel=\"nofollow noreferrer\">timer_create(2)</a> or <a href=\"http://man7.org/linux/man-pages/man2/alarm.2.html\" rel=\"nofollow noreferrer\">alarm(2)</a> (and you could call  <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a> near the beginning).</p>\n<p>See also <a href=\"http://man7.org/linux/man-pages/man1/timeout.1.html\" rel=\"nofollow noreferrer\">timeout(1)</a>.</p>\n<p>Be also aware of the <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">Halting Problem</a>, the <a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem\" rel=\"nofollow noreferrer\">Traveling Salesman Problem</a> and <a href=\"https://en.wikipedia.org/wiki/Rice%27s_theorem\" rel=\"nofollow noreferrer\">Rice's theorem</a>.</p>\n"}], "owner": {"reputation": 113, "user_id": 6873828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfIez.jpg?s=128&g=1", "display_name": "laterSon", "link": "https://stackoverflow.com/users/6873828/laterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1603711444, "creation_date": 1496245197, "last_edit_date": 1496246402, "question_id": 44289110, "link": "https://stackoverflow.com/questions/44289110/how-to-instruct-g-to-stop-after-n-seconds", "title": "How to instruct g++ to stop after n seconds", "body": "<p>I was wondering, if there is any flag option in <code>g++</code> to limit runtime, like stack-size <code>-stack_size = any_limit</code> and the number of errors, <code>-fmax-errors=n</code>. Say I want to halt the execution after <code>20 seconds</code> then, other than adding a <code>while</code> loop can I use any flag which performs the same action.</p>\n"}, {"tags": ["c++", "function", "variables", "unordered-map", "auto"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496245142, "post_id": 44289057, "comment_id": 75584881, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1496245146, "post_id": 44289057, "comment_id": 75584885, "body": "Is <code>Ext</code> a type or a namesapce?  I ask because non-static member functions are not the same as global/namespace functions."}, {"owner": {"reputation": 1757, "user_id": 4544967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DOtWk.jpg?s=128&g=1", "display_name": "Hamza Anis", "link": "https://stackoverflow.com/users/4544967/hamza-anis"}, "edited": false, "score": 1, "creation_date": 1496245250, "post_id": 44289057, "comment_id": 75584937, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5582869/c-how-do-i-store-a-function-to-a-variable\">C++: How do I store a function to a variable?</a>"}, {"owner": {"reputation": 91, "user_id": 6023122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0h2usHdb1eg/AAAAAAAAAAI/AAAAAAAADDA/xAvYiOfzkvE/photo.jpg?sz=128", "display_name": "DBeck", "link": "https://stackoverflow.com/users/6023122/dbeck"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496245886, "post_id": 44289057, "comment_id": 75585362, "body": "@NathanOliver it is a namespace that has the class being called."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496245955, "post_id": 44289057, "comment_id": 75585407, "body": "So <code>SomeFunction</code> is not a class member function, right?"}, {"owner": {"reputation": 91, "user_id": 6023122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0h2usHdb1eg/AAAAAAAAAAI/AAAAAAAADDA/xAvYiOfzkvE/photo.jpg?sz=128", "display_name": "DBeck", "link": "https://stackoverflow.com/users/6023122/dbeck"}, "edited": false, "score": 0, "creation_date": 1496247612, "post_id": 44289057, "comment_id": 75586441, "body": "My bad, it is a class member function. Ext is the parent class. For example class Ext { public: SomeFunction() { //...} }"}, {"owner": {"reputation": 91, "user_id": 6023122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0h2usHdb1eg/AAAAAAAAAAI/AAAAAAAADDA/xAvYiOfzkvE/photo.jpg?sz=128", "display_name": "DBeck", "link": "https://stackoverflow.com/users/6023122/dbeck"}, "edited": false, "score": 0, "creation_date": 1496247770, "post_id": 44289057, "comment_id": 75586542, "body": "I did some debugging in VS and this is the type pfunc came back to: void(*)(std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::a&zwnj;&#8203;llocator&lt;char&gt; &gt;)"}], "answers": [{"tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": false, "score": 5, "last_activity_date": 1496246146, "last_edit_date": 1496246146, "creation_date": 1496245338, "answer_id": 44289162, "question_id": 44289057, "link": "https://stackoverflow.com/questions/44289057/need-to-assign-function-to-variable-in-c/44289162#44289162", "title": "Need to assign function to variable in C++", "body": "<p>Given a <code>class foo</code> and a member function <code>fun</code>, you can create a member function pointer in the following manner:</p>\n\n<pre><code>struct foo \n{\n    void fun(int, float);\n};\n\nvoid(foo::*fptr)(int, float) = &amp;foo::fun;\n</code></pre>\n\n<p>So the type of <code>fptr</code> would be <code>void(foo::*)(int, float)</code>. Usually with something like this you might want to introduce a <code>typedef</code> or type alias to make the declaration more readable:</p>\n\n<pre><code>using function = void(foo::*)(int, float);\n// or typedef void(foo::*function)(int, float);\nfunction fptr = &amp;foo::fun;\n</code></pre>\n\n<p><em>In addition</em>, the above applies for member function pointers. For free functions the syntax would be: </p>\n\n<pre><code>void fun(int, float);\nvoid(*fptr)(int, float) = &amp;fun;\n</code></pre>\n\n<p>And you can define your type alias accordingly. </p>\n"}, {"tags": [], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "is_accepted": false, "score": 0, "last_activity_date": 1496245432, "creation_date": 1496245432, "answer_id": 44289208, "question_id": 44289057, "link": "https://stackoverflow.com/questions/44289057/need-to-assign-function-to-variable-in-c/44289208#44289208", "title": "Need to assign function to variable in C++", "body": "<p>You need type erasure for function objects and <code>std::function</code> implements that for you. </p>\n\n<pre><code>#include&lt;functional&gt;\n#include&lt;unordered_map&gt;\n... define f1\n... define f2\nint main(){\n   std::unordered_map&lt;std::string, std::function&lt;ret_type(arg1_type, arg2_type)&gt;&gt; um = {{\"name1\", f1}, {\"name2\", f2}};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 6023122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0h2usHdb1eg/AAAAAAAAAAI/AAAAAAAADDA/xAvYiOfzkvE/photo.jpg?sz=128", "display_name": "DBeck", "link": "https://stackoverflow.com/users/6023122/dbeck"}, "edited": false, "score": 0, "creation_date": 1496254276, "post_id": 44291587, "comment_id": 75590238, "body": "This works too: typedef void(*StringFunc)(std::string);"}], "tags": [], "owner": {"reputation": 91, "user_id": 6023122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0h2usHdb1eg/AAAAAAAAAAI/AAAAAAAADDA/xAvYiOfzkvE/photo.jpg?sz=128", "display_name": "DBeck", "link": "https://stackoverflow.com/users/6023122/dbeck"}, "is_accepted": true, "score": 0, "last_activity_date": 1496253118, "creation_date": 1496253118, "answer_id": 44291587, "question_id": 44289057, "link": "https://stackoverflow.com/questions/44289057/need-to-assign-function-to-variable-in-c/44291587#44291587", "title": "Need to assign function to variable in C++", "body": "<p>I solved this by using the typedef and unordered_map below:</p>\n\n<pre><code>typedef void(*StringFunc)(std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;);\nstd::unordered_map&lt;std::string, StringFunc&gt; StringToAction = {\n    {\"Buy\", Car::BuyCar}, {\"Fix\", Car::FixCar}\n};\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6023122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0h2usHdb1eg/AAAAAAAAAAI/AAAAAAAADDA/xAvYiOfzkvE/photo.jpg?sz=128", "display_name": "DBeck", "link": "https://stackoverflow.com/users/6023122/dbeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4684, "favorite_count": 0, "accepted_answer_id": 44291587, "answer_count": 3, "score": 2, "last_activity_date": 1496253118, "creation_date": 1496245065, "question_id": 44289057, "link": "https://stackoverflow.com/questions/44289057/need-to-assign-function-to-variable-in-c", "title": "Need to assign function to variable in C++", "body": "<p>this shouldn't be too hard but I am stuck.</p>\n\n<p>I am trying to assign a function to a variable but I need to know the data type so I can assign it to a map.</p>\n\n<p>I was successful doing this:</p>\n\n<pre><code>auto pfunc = Ext::SomeFunction\n</code></pre>\n\n<p>This will then allow me to do:</p>\n\n<pre><code>pfunc(arg, arg2);\n</code></pre>\n\n<p>But I need to know what data type is being covered by \"auto\" so I can map my functions to a string.</p>\n\n<p>For example:</p>\n\n<pre><code>std::unordered_map&lt;std::string, \"datatype\"&gt; StringToFunc = {{\"Duplicate\", Ext::Duplicate}};\n</code></pre>\n\n<p>Most of these functions return void but there are other functions that returns double and int.</p>\n\n<p>If there is a better way of doing this please let me know but I would really like to know the data type behind the auto as used above.</p>\n\n<p>Thanks much for any help received.</p>\n"}, {"tags": ["python", "c++", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1496247166, "post_id": 44288911, "comment_id": 75586175, "body": "<code>x.mean</code> is &#39;built-in&#39;, so you&#39;ll have to dig into the compiled code to see how it is defined.  <code>np.mean</code> delegates to <code>x.mean</code>.  Though you could also look at <code>np.core._methods._mean</code> which is the fallback."}, {"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1496300414, "post_id": 44288911, "comment_id": 75606378, "body": "@hpaulj It looks like <code>x.mean</code> also delegates to <code>core._methods._mean</code> (even for standard data types such as double). I&#39;ll have to look at that function more closely. Thank you for the pointer!"}], "answers": [{"comments": [{"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1496263110, "post_id": 44289141, "comment_id": 75594945, "body": "<code>np.mean</code> crashes too. I assume under the hood they use the same implementation of <i>mean</i>."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1496245285, "creation_date": 1496245285, "answer_id": 44289141, "question_id": 44288911, "link": "https://stackoverflow.com/questions/44288911/custom-numpy-type-causes-crash-in-numpy-mean/44289141#44289141", "title": "Custom numpy type causes crash in numpy.mean", "body": "<p>maybe it is a silly observation, but did you try:</p>\n\n<pre><code>import numpy as np\n\n###code\n\nnp.mean(x)  # instead of x.mean?\n</code></pre>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.mean.html#numpy.mean\" rel=\"nofollow noreferrer\">According to the documentation:</a></p>\n"}, {"tags": [], "owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "is_accepted": true, "score": 1, "last_activity_date": 1496303769, "creation_date": 1496303769, "answer_id": 44301731, "question_id": 44288911, "link": "https://stackoverflow.com/questions/44288911/custom-numpy-type-causes-crash-in-numpy-mean/44301731#44301731", "title": "Custom numpy type causes crash in numpy.mean", "body": "<p>In retrospect, the error was pretty much obvious and not related to the numpy part of the implementation but to the initialization of the Python object. Credit goes to @hpaulj's comment, which put me on the right track.</p>\n\n<p>Both <code>x.mean</code> and <code>np.mean</code> call <code>np.core._methods.mean</code>, where the crash happens in the line</p>\n\n<pre><code>ret = ret.dtype.type(ret / rcount)\n</code></pre>\n\n<p>This is a redundant type conversion (at least in my case) which is equivalent to</p>\n\n<pre><code>Dual(dual_object)\n</code></pre>\n\n<p>In words, the <code>Dual</code> constructor is called with an instance of <code>Dual</code> as argument. However, the implementation of the constructor expects two doubles as arguments:</p>\n\n<pre><code>static char *kwlist[] = {\"x\", \"y\", NULL};\nif(!PyArg_ParseTupleAndKeywords(args, kwds, \"d|d\", kwlist, &amp;x, &amp;y))\n    return NULL;\n</code></pre>\n\n<p><code>PyArg_ParseTupleAndKeywords</code> crashes when attempting to forcefully cast <code>Dual</code> to <code>double</code>. This is another issue to look into, but the original problem is solved by implementing the relevant conversions in the constructor.</p>\n"}], "owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 44301731, "answer_count": 2, "score": 2, "last_activity_date": 1496303769, "creation_date": 1496244665, "question_id": 44288911, "link": "https://stackoverflow.com/questions/44288911/custom-numpy-type-causes-crash-in-numpy-mean", "title": "Custom numpy type causes crash in numpy.mean", "body": "<p>I defined my own numpy type with basic functionality in C++. Array creation works and it is possible to add and divide arrays of this type. It is possible to reduce the array with <code>np.sum</code> but the interpreter crashes when using <code>np.mean</code>.</p>\n\n<pre><code>import numpy as np\nfrom example import Dual\n\nx = np.array([Dual(1, 2), Dual(1, 3), Dual(1, 1)])\nprint(x.dtype)  # dtype(Dual)  -- correct type\n\n# Mean 1\nm = x.sum() / x.size\nprint(m.x, m.y)  # 1.0 2.0  -- correct result\n\n# Mean 2\nx.mean()  # -- CRASH\n</code></pre>\n\n<p>By inserting debug output in my C++ code I verified that sum and division are correctly computed in my code (3/3 and 6/3 are actually performed). So the function crashes after computing my result. (Windows tells me that <em>Python stopped working</em>, so presumably there happens a SegFault under the hood.)</p>\n\n<p>What is <code>mean</code> doing differently than <code>sum()/n</code>? How can I modify my type to make it work?</p>\n\n<p>I attempted to boil my C++ code down to create a minimal and complete example. Unfortunately, <em>minimal</em> is still rather long when defining a working numpy type. Here is the implementation:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#include &lt;numpy/npy_math.h&gt;\n#include &lt;numpy/ufuncobject.h&gt;\n\n#include \"structmember.h\"\n\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\n\nstruct Dual\n{\npublic:\n    double x;\n    double y;\n\n    Dual(double x, double y) : x(x), y(y) { }\n\n    inline static Dual add(const Dual&amp; a, const Dual&amp; b) {\n        return Dual(a.x + b.x, a.y + b.y); }\n\n    inline static Dual div(const Dual&amp; a, const Dual&amp; b) {\n        return Dual(a.x / b.x, a.y / b.y); }\n};\n\n\ntypedef struct {\n    PyObject_HEAD\n    Dual ob_val;\n} PyDual;\n\n\nPyArray_Descr* dual_descr;\n\n\nstatic PyObject *\nPyDual_new(PyTypeObject *type, PyObject *args, PyObject *kwds)\n{\n    PyDual *self;\n\n    self = (PyDual *)type-&gt;tp_alloc(type, 0);\n    if (self == NULL) {\n        return NULL;\n    }\n\n    double x = 0;\n    double y = 0;\n\n    static char *kwlist[] = {\"x\", \"y\", NULL};\n    if(!PyArg_ParseTupleAndKeywords(args, kwds, \"d|d\", kwlist, &amp;x, &amp;y))\n        return NULL;\n\n    self-&gt;ob_val = Dual(x, y);\n    return (PyObject *)self;\n}\n\n\nstatic PyTypeObject PyDual_Type = {\n    PyVarObject_HEAD_INIT(NULL, 0)\n    \"example.Dual\",               /* tp_name */\n    sizeof(PyDual),                /* tp_basicsize */\n    0,                             /* tp_itemsize */\n    0,                             /* tp_dealloc */\n    0,                             /* tp_print */\n    0,                             /* tp_getattr */\n    0,                             /* tp_setattr */\n    0,                             /* tp_reserved */\n    0,                             /* tp_repr */\n    0,                             /* tp_as_number */\n    0,                             /* tp_as_sequence */\n    0,                             /* tp_as_mapping */\n    0,                             /* tp_hash  */\n    0,                             /* tp_call */\n    0,                             /* tp_str */\n    0,                             /* tp_getattro */\n    0,                             /* tp_setattro */\n    0,                             /* tp_as_buffer */\n    Py_TPFLAGS_DEFAULT,            /* tp_flags */\n    \"Dual value/derivative\",       /* tp_doc */\n    0,                             /* tp_traverse */\n    0,                             /* tp_clear */\n    0,                             /* tp_richcompare */\n    0,                             /* tp_weaklistoffset */\n    0,                             /* tp_iter */\n    0,                             /* tp_iternext */\n    0,                             /* tp_methods */\n    0,                             /* tp_members */\n    0,                             /* tp_getset */\n    0,                             /* tp_base */\n    0,                             /* tp_dict */\n    0,                             /* tp_descr_get */\n    0,                             /* tp_descr_set */\n    0,                             /* tp_dictoffset */\n    0,                             /* tp_init */\n    0,                             /* tp_alloc */\n    PyDual_new,                    /* tp_new */\n};\n\n\nstatic int PyDual_Check(PyObject* obj)\n{\n    return PyObject_IsInstance(obj, (PyObject*)&amp;PyDual_Type);\n}\n\n\nstatic PyObject*\nPyDual_from_Dual(Dual d)\n{\n    PyDual *obj = (PyDual*)PyDual_Type.tp_alloc(&amp;PyDual_Type, 0);\n    if(obj)\n        obj-&gt;ob_val = d;\n    return (PyObject*)obj;\n}\n\n\nstatic PyMemberDef PyDual_members[] = {\n    {\"x\", T_DOUBLE, offsetof(PyDual, ob_val) + offsetof(Dual, x), READONLY, \"value\"},\n    {\"y\", T_DOUBLE, offsetof(PyDual, ob_val) + offsetof(Dual, y), READONLY, \"derivative\"},\n    {NULL}\n};\n\n\n//----------------------------------------------------------------------------\n\nstatic PyArray_ArrFuncs _PyDual_ArrFuncs;\n\n\nstatic void\nDUAL_copyswap(Dual *dst, Dual *src, int swap, void *NPY_UNUSED(arr))\n{\n  PyArray_Descr *descr;\n  descr = PyArray_DescrFromType(NPY_DOUBLE);\n  descr-&gt;f-&gt;copyswapn(dst, sizeof(double), src, sizeof(double), 2, swap, NULL);\n  Py_DECREF(descr);\n}\n\n\nstatic int DUAL_setitem(PyObject* item, void* data, void* ap)\n{\n  Dual d(0, 0);\n  if(PyDual_Check(item)) {\n    memcpy(data, &amp;(((PyDual *)item)-&gt;ob_val),sizeof(Dual));\n  } else if(PySequence_Check(item) &amp;&amp; PySequence_Length(item)==4) {\n    auto element = PySequence_GetItem(item, 0);\n    if(element == NULL) { return -1; } /* Not a sequence, or other failure */\n    d.x = PyFloat_AsDouble(element);\n    Py_DECREF(element);\n    element = PySequence_GetItem(item, 1);\n    if(element == NULL) { return -1; } /* Not a sequence, or other failure */\n    d.y = PyFloat_AsDouble(element);\n    Py_DECREF(element);\n  } else {\n    PyErr_SetString(PyExc_TypeError,\n                    \"Unknown input to DUAL_setitem\");\n    return -1;\n  }\n  return 0;\n}\n\n\nstatic PyObject *DUAL_getitem(void* data, void* arr)\n{\n  Dual d(0, 0);\n  memcpy(&amp;d, data, sizeof(Dual));\n  return PyDual_from_Dual(d);\n}\n\n\ntemplate&lt;typename T&gt;\nscalar_to_dual(T* ip, Dual* op, npy_intp n,\n               PyArrayObject *NPY_UNUSED(aip), PyArrayObject *NPY_UNUSED(aop))\n{\n    while(n--)\n    {\n        op-&gt;x = *ip++;\n        op-&gt;y = op-&gt;x;\n    }\n}\n\n\nstatic void register_cast_function(int sourceType, int destType, PyArray_VectorUnaryFunc *castfunc)\n{\n  PyArray_Descr *descr = PyArray_DescrFromType(sourceType);\n  PyArray_RegisterCastFunc(descr, destType, castfunc);\n  PyArray_RegisterCanCast(descr, destType, NPY_NOSCALAR);\n  Py_DECREF(descr);\n}\n\n\nstatic void sum_ufunc(char** args, npy_intp* dimensions, npy_intp* steps, void* data)\n{\n    char *ip1 = args[0], *ip2 = args[1], *op1 = args[2];\n    npy_intp is1 = steps[0], is2 = steps[1], os1 = steps[2];\n    npy_intp n = dimensions[0];\n    for(npy_intp i=0; i&lt;n; i++, ip1+=is1, ip2+=is2, op1+=os1)\n    {\n        const Dual in1 = *(Dual*)ip1;\n        const Dual in2 = *(Dual*)ip2;\n        *((Dual*)op1) = Dual::add(in1, in2);\n    }\n}\n\n\nstatic void div_ufunc(char** args, npy_intp* dimensions, npy_intp* steps, void* data)\n{\n    char *ip1 = args[0], *ip2 = args[1], *op1 = args[2];\n    npy_intp is1 = steps[0], is2 = steps[1], os1 = steps[2];\n    npy_intp n = dimensions[0];\n    for(npy_intp i=0; i&lt;n; i++, ip1+=is1, ip2+=is2, op1+=os1)\n    {\n        const Dual in1 = *(Dual*)ip1;\n        const Dual in2 = *(Dual*)ip2;\n        *((Dual*)op1) = Dual::div(in1, in2);\n\n        std::cout &lt;&lt; in1.x &lt;&lt; \"/\" &lt;&lt; in2.x &lt;&lt; std::endl;\n        std::cout &lt;&lt; in1.y &lt;&lt; \"/\" &lt;&lt; in2.y &lt;&lt; std::endl;\n    }\n}\n\n\n//----------------------------------------------------------------------------\n\n\nstatic struct PyModuleDef examplemodule = {\n   PyModuleDef_HEAD_INIT,\n   \"example\",   /* name of module */\n   NULL, /* module documentation, may be NULL */\n   -1,       /* size of per-interpreter state of the module,\n                or -1 if the module keeps state in global variables. */\n   NULL, NULL, NULL, NULL, NULL\n};\n\n\nPyMODINIT_FUNC PyInit_example(void)\n{\n    // initialize numpy\n    import_array(); if(PyErr_Occurred()) return NULL;\n    import_umath(); if(PyErr_Occurred()) return NULL;\n    auto numpy = PyImport_ImportModule(\"numpy\"); if(!numpy) return NULL;\n    auto numpy_dict = PyModule_GetDict(numpy); if(!numpy_dict) return NULL;\n\n    PyDual_Type.tp_members = PyDual_members;\n\n    PyDual_Type.tp_base = &amp;PyGenericArrType_Type;\n\n    if( PyType_Ready(&amp;PyDual_Type) &lt; 0)\n        return NULL;\n\n    PyArray_InitArrFuncs(&amp;_PyDual_ArrFuncs);\n    _PyDual_ArrFuncs.copyswap = (PyArray_CopySwapFunc*)DUAL_copyswap;\n    _PyDual_ArrFuncs.setitem = (PyArray_SetItemFunc*)DUAL_setitem;\n    _PyDual_ArrFuncs.getitem = (PyArray_GetItemFunc*)DUAL_getitem;\n\n    dual_descr = PyObject_New(PyArray_Descr, &amp;PyArrayDescr_Type);\n    dual_descr-&gt;typeobj = &amp;PyDual_Type;\n    dual_descr-&gt;kind = 'x';\n    dual_descr-&gt;type = 'x';\n    dual_descr-&gt;byteorder = '=';\n    dual_descr-&gt;flags = 0;\n    dual_descr-&gt;type_num = 0; // assigned at registration\n    dual_descr-&gt;elsize = 8*2;\n    dual_descr-&gt;alignment = 8;\n    dual_descr-&gt;subarray = NULL;\n    dual_descr-&gt;fields = NULL;\n    dual_descr-&gt;names = NULL;\n    dual_descr-&gt;f = &amp;_PyDual_ArrFuncs;\n    dual_descr-&gt;metadata = NULL;\n    dual_descr-&gt;c_metadata = NULL;\n\n    Py_INCREF(&amp;PyDual_Type);\n    auto dualNum = PyArray_RegisterDataType(dual_descr);\n    if(dualNum &lt; 0) return NULL;\n\n    int AD = dual_descr-&gt;type_num;\n\n    register_cast_function(NPY_BOOL, dualNum, (PyArray_VectorUnaryFunc*)scalar_to_dual&lt;npy_bool&gt;);\n    register_cast_function(NPY_LONG, dualNum, (PyArray_VectorUnaryFunc*)scalar_to_dual&lt;npy_long&gt;);\n    register_cast_function(NPY_DOUBLE, dualNum, (PyArray_VectorUnaryFunc*)scalar_to_dual&lt;npy_double&gt;);\n\n    int arg_types[] = {AD, AD, AD};\n\n    PyUFuncObject* ufunc = (PyUFuncObject*)PyObject_GetAttrString(numpy, \"add\");\n    PyUFunc_RegisterLoopForType(ufunc, AD, sum_ufunc, arg_types, NULL);\n\n    ufunc = (PyUFuncObject*)PyObject_GetAttrString(numpy, \"true_divide\");\n    PyUFunc_RegisterLoopForType(ufunc, AD, div_ufunc, arg_types, NULL);\n\n    auto module = PyModule_Create(&amp;examplemodule);\n    if( module == NULL )\n        return NULL;\n\n    Py_INCREF(&amp;PyDual_Type);\n    PyModule_AddObject(module, \"Dual\", (PyObject*)&amp;PyDual_Type);\n    return module;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "webkit", "gtk", "webkitgtk"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496248625, "post_id": 44288902, "comment_id": 75587046, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8774593/cmake-link-to-external-library\">CMake link to external library</a>"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1496253007, "post_id": 44288902, "comment_id": 75589597, "body": "Not a duplicate of that specific question."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496305635, "post_id": 44288902, "comment_id": 75609821, "body": "I agree that WebKitGTK+ has additional (and <i>preferrable</i>) way for link with. But it seems the question should be reworded, at least its title should contain name of the library. From the other side, <code>pkg_check_modules</code> approach is suitable for a lot of libraries, probably it should be noted in the answer to the duplicate question..."}], "answers": [{"comments": [{"owner": {"reputation": 416, "user_id": 3613197, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a943d0166e0527895ea9b5743be9eca0?s=128&d=identicon&r=PG", "display_name": "iDaN5x", "link": "https://stackoverflow.com/users/3613197/idan5x"}, "edited": false, "score": 0, "creation_date": 1496307029, "post_id": 44291614, "comment_id": 75610764, "body": "The reason I&#39;m not using <code>pkg_check_modules()</code> is that the library is locally compiled by me (and so located under <code>&#47;usr&#47;local&#47;...</code>. I need a very specific (old) build of WebkitGTK+. SOUP and GTK are also needed (as separate libs) as WebkitGTK+ by itself is useless."}, {"owner": {"reputation": 416, "user_id": 3613197, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a943d0166e0527895ea9b5743be9eca0?s=128&d=identicon&r=PG", "display_name": "iDaN5x", "link": "https://stackoverflow.com/users/3613197/idan5x"}, "edited": false, "score": 0, "creation_date": 1496307417, "post_id": 44291614, "comment_id": 75611062, "body": "Do note that the API is webkit2"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 416, "user_id": 3613197, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a943d0166e0527895ea9b5743be9eca0?s=128&d=identicon&r=PG", "display_name": "iDaN5x", "link": "https://stackoverflow.com/users/3613197/idan5x"}, "edited": false, "score": 0, "creation_date": 1496329367, "post_id": 44291614, "comment_id": 75627605, "body": "Is this .lib file statically linked? If you want to do that, you may need to provide the WebKit2GTK+ binaries yourself too... You could ask the devs if static linking is possible as well. What is the problem with the newest versions of WebKit2GTK+?"}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": false, "score": 2, "last_activity_date": 1496253214, "creation_date": 1496253214, "answer_id": 44291614, "question_id": 44288902, "link": "https://stackoverflow.com/questions/44288902/cant-add-locally-compiled-library-to-cmake-project/44291614#44291614", "title": "Can&#39;t add locally compiled library to CMake project", "body": "<p>You are trying to use WebKitGTK+, which is a separate library from both GTK+ and libsoup. You will need to duplicate your <code>pkg_check_modules()</code> code again for WebKitGTK+. You'll need to determine first if you are using WebKit1 or WebKit2 (they have subtly different APIs), and then find the appropriate pkg-config name for that version of WebKitGTK+; check the documentation and the contents of your <code>/usr/lib/pkgconfig</code> directory.</p>\n"}], "owner": {"reputation": 416, "user_id": 3613197, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a943d0166e0527895ea9b5743be9eca0?s=128&d=identicon&r=PG", "display_name": "iDaN5x", "link": "https://stackoverflow.com/users/3613197/idan5x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496253214, "creation_date": 1496244644, "question_id": 44288902, "link": "https://stackoverflow.com/questions/44288902/cant-add-locally-compiled-library-to-cmake-project", "title": "Can&#39;t add locally compiled library to CMake project", "body": "<p>As part of a project I'm working on, I need to make use of the WebKitGTK+ library.\nI downloaded the library (tarball) and compiled it as described <a href=\"https://trac.webkit.org/wiki/BuildingGtk\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><strong>After the compilation was done:</strong><br>\nThe lib's headers are in <code>/usr/local/include</code>.<br>\nThe lib's <code>.so</code> files are in <code>/usr/local/lib</code>.</p>\n\n<p><strong>In my C++ project I tried to add the following <code>CMakeLists.txt</code> file:</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\nproject(CVE_2016_4657)\n\nset(CMAKE_CXX_STANDARD 11)\nset(SOURCE_FILES main.cpp)\nadd_executable(CVE_2016_4657 ${SOURCE_FILES})\n\nfind_package(PkgConfig REQUIRED)\n\ninclude_directories(/usr/local/include/webkitgtk-4.0)\nlink_directories(/usr/local/lib/webkit2gtk-4.0)\n\npkg_check_modules(GTK3 REQUIRED gtk+-3.0)\ninclude_directories(${GTK3_INCLUDE_DIRS})\nlink_directories(${GTK3_LIBRARY_DIRS})\nadd_definitions(${GTK3_CFLAGS_OTHER})\n\npkg_check_modules(SOUP REQUIRED libsoup-2.4)\ninclude_directories(${SOUP_INCLUDE_DIRS})\nlink_directories(${SOUP_LIBRARY_DIRS})\nadd_definitions(${SOUP_CFLAGS_OTHER})\n\ntarget_link_libraries(\n        CVE_2016_4657\n        ${GTK3_LIBRARIES}\n        ${SOUP_LIBRARIES})\n</code></pre>\n\n<p><strong>However, when compiling the project I'm getting the following error:</strong></p>\n\n<pre><code>[ 50%] Linking CXX executable CVE_2016_4657\nCMakeFiles/CVE_2016_4657.dir/main.cpp.o: In function `main':\n/home/idanas/CLionProjects/Switcheroo/main.cpp:17: undefined reference to \n`webkit_web_view_get_type'\n/home/idanas/CLionProjects/Switcheroo/main.cpp:17: undefined reference to \n`webkit_web_view_new'\n/home/idanas/CLionProjects/Switcheroo/main.cpp:29: undefined reference to \n`webkit_web_view_load_uri'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/CVE_2016_4657.dir/build.make:94: recipe for target \n'CVE_2016_4657' failed\nmake[3]: *** [CVE_2016_4657] Error 1\nCMakeFiles/Makefile2:67: recipe for target \n'CMakeFiles/CVE_2016_4657.dir/all' failed\nmake[2]: *** [CMakeFiles/CVE_2016_4657.dir/all] Error 2\nCMakeFiles/Makefile2:79: recipe for target \n'CMakeFiles/CVE_2016_4657.dir/rule' failed\nmake[1]: *** [CMakeFiles/CVE_2016_4657.dir/rule] Error 2\nMakefile:118: recipe for target 'CVE_2016_4657' failed\nmake: *** [CVE_2016_4657] Error 2\n</code></pre>\n\n<p>I have little-to-none experience with CMake and could really use some help.</p>\n"}, {"tags": ["c++", "c++11", "atomic", "lock-free"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496244289, "post_id": 44288778, "comment_id": 75584290, "body": "Memberfunction of what? <code>std::atomic</code>?"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1496244550, "post_id": 44288778, "comment_id": 75584447, "body": "I believe it is in order to interface better with C11&#39;s <code>&lt;stdatomic.h&gt;</code>. But I could be wrong."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496244852, "post_id": 44288778, "comment_id": 75584644, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 , yes, of course. I&#39;ve edited the question."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1496245721, "post_id": 44288778, "comment_id": 75585246, "body": "@DeiDei, I don&#39;t see a way for them to interact with C without <code>reinterpret_cast</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1496255252, "creation_date": 1496255252, "answer_id": 44292208, "question_id": 44288778, "link": "https://stackoverflow.com/questions/44288778/purpose-of-non-member-functions-like-atomic-store/44292208#44292208", "title": "Purpose of non-member functions like atomic_store()", "body": "<p>The purpose of the free functions is to provide an identical interface for atomics in C and C++. Atomics were developed in parallel between the C and C++ committees, which is why they are so similar (&lt;g>). It's up to the implementor to make this work, but it's not hard if you start out with compatibility in mind. The result is that you can write the <strong>same</strong> code in C and in C++ if that's what you want, <strong>or</strong> you can take advantage of member functions in C++ to sometimes get simple and more powerful operations.</p>\n"}], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1496255252, "creation_date": 1496244249, "last_edit_date": 1496244825, "question_id": 44288778, "link": "https://stackoverflow.com/questions/44288778/purpose-of-non-member-functions-like-atomic-store", "title": "Purpose of non-member functions like atomic_store()", "body": "<p>I read the documentation of <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic_store\" rel=\"nofollow noreferrer\"><code>atomic_store</code></a> and I understand what it is doing. The question is rather why is this non-member function there? What does it provide what member function doesn't? I mean member functions of <code>std::atomic</code> like <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic/store\" rel=\"nofollow noreferrer\"><code>std::atomic::store()</code></a></p>\n\n<p>There is also a bunch of such functions <a href=\"http://en.cppreference.com/w/cpp/atomic\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["c++", "c++11", "vector", "stl", "set"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 1, "creation_date": 1496244216, "post_id": 44288724, "comment_id": 75584243, "body": "Iterators should do the trick."}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 3, "creation_date": 1496244332, "post_id": 44288724, "comment_id": 75584324, "body": "because set doesn&#39;t have access by index."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1496244955, "post_id": 44288724, "comment_id": 75584734, "body": "Your example is a toy one, but you should remember that a <code>std::set</code> does not store duplicates.  What if you rewrote your loop to just <code>insert(1)</code> each time -- how would you know that <code>10</code> is within bounds?  Even using an iterator, you would have been accessing an item out-of-bounds since the set would have contained only 1 item."}, {"owner": {"reputation": 133, "user_id": 7861687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-RmA49YX-1aE/AAAAAAAAAAI/AAAAAAAACTk/kbMzVra2ncE/photo.jpg?sz=128", "display_name": "Shah Shishir", "link": "https://stackoverflow.com/users/7861687/shah-shishir"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1496246790, "post_id": 44288724, "comment_id": 75585956, "body": "@PaulMcKenzie I thought about the numbers from 0 to 15 only. Yeah, I know that std::set does not store the same data. My example is not about trying to inserting the same datas each time. Here I used 10 just for example stufffs. That&#39;s it. :)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1496247711, "post_id": 44288724, "comment_id": 75586499, "body": "Well my point is that your program has a design flaw if you are relying on <code>[ ]</code> to access items in a <code>std::set</code>."}, {"owner": {"reputation": 133, "user_id": 7861687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-RmA49YX-1aE/AAAAAAAAAAI/AAAAAAAACTk/kbMzVra2ncE/photo.jpg?sz=128", "display_name": "Shah Shishir", "link": "https://stackoverflow.com/users/7861687/shah-shishir"}, "edited": false, "score": 0, "creation_date": 1496247929, "post_id": 44288724, "comment_id": 75586628, "body": "That makes sense ! :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518888323, "post_id": 44288724, "comment_id": 84692179, "body": "<i>&quot;It normally prints the element that is stored into the 10th index.&quot;</i> You mean, the 11th."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1519347114, "post_id": 44288724, "comment_id": 84886125, "body": "By the way, are you sure you really want the &quot;10th element&quot; of the set? I mean, is the order within the set important to you?"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519365219, "post_id": 44288724, "comment_id": 84890620, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20477545/element-at-index-in-a-stdset\">Element at index in a std::set?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518888352, "post_id": 44288834, "comment_id": 84692190, "body": "<code>s&#47;will not&#47;may not&#47;</code> And we should emphasise that this is the wrong way to use a set. The differences in intended usage between containers are the very reason that different containers exist. Why have vector under 6 different names?"}], "tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": false, "score": 9, "last_activity_date": 1519347075, "last_edit_date": 1519347075, "creation_date": 1496244428, "answer_id": 44288834, "question_id": 44288724, "link": "https://stackoverflow.com/questions/44288724/is-it-possible-to-get-a-single-element-of-a-set-in-c-stl/44288834#44288834", "title": "Is it possible to get a single element of a set in C++ STL?", "body": "<p>Yes, it's possible, but not using <code>operator[]</code>.</p>\n\n<p><code>std::set</code> doesn't provide <code>operator[]</code> as it isn't a random-access container. Instead, one must use iterators to access its elements. </p>\n\n<pre><code>auto first = myset.begin(); // get iterator to 1st element\nstd::advance(first, 9);     // advance by 9\nstd::cout &lt;&lt; *first;        // 10th element\n</code></pre>\n\n<p>Note that <code>std::set</code> is an ordered container and the elements will not appear in the order you inserted them. </p>\n"}, {"tags": [], "owner": {"reputation": 4501, "user_id": 1053930, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/EyjC7.jpg?s=128&g=1", "display_name": "Shashwat Kumar", "link": "https://stackoverflow.com/users/1053930/shashwat-kumar"}, "is_accepted": false, "score": 3, "last_activity_date": 1507326356, "last_edit_date": 1507326356, "creation_date": 1496244444, "answer_id": 44288840, "question_id": 44288724, "link": "https://stackoverflow.com/questions/44288724/is-it-possible-to-get-a-single-element-of-a-set-in-c-stl/44288840#44288840", "title": "Is it possible to get a single element of a set in C++ STL?", "body": "<p>You cannot access set elements by index. However you can use <code>std::advance</code> on iterator.</p>\n\n<pre><code>set&lt;int&gt;::iterator it = myset.begin();\nstd::advance(it, 5); // advanced by five\n</code></pre>\n\n<p><code>std::next</code> is also there in <code>C++11</code>,</p>\n\n<pre><code>auto it = std::next(myset.begin(), 5);\n</code></pre>\n\n<p>The Difference between this two Versions is explained here:\n<a href=\"https://stackoverflow.com/questions/15017065/whats-the-difference-between-stdadvance-and-stdnext\">What&#39;s the difference between std::advance and std::next?</a></p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1496245582, "last_edit_date": 1496245582, "creation_date": 1496244534, "answer_id": 44288866, "question_id": 44288724, "link": "https://stackoverflow.com/questions/44288724/is-it-possible-to-get-a-single-element-of-a-set-in-c-stl/44288866#44288866", "title": "Is it possible to get a single element of a set in C++ STL?", "body": "<p>the problem is that  sets don't have access by index. \nbut you still can do something like:</p>\n\n<pre><code>set&lt;int&gt;::iterator myIterator = myset.begin();\nadvance(myIterator , 9);\nint theTenth= *myIterator;\n</code></pre>\n\n<p>which is basically getting an interator and \"moving it\" forward 9 places...</p>\n"}, {"tags": [], "owner": {"reputation": 524, "user_id": 9249002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d30321c6cd41b504daf51b654cee09?s=128&d=identicon&r=PG&f=1", "display_name": "bebidek", "link": "https://stackoverflow.com/users/9249002/bebidek"}, "is_accepted": false, "score": 0, "last_activity_date": 1518888317, "last_edit_date": 1518888317, "creation_date": 1518887911, "answer_id": 48843872, "question_id": 44288724, "link": "https://stackoverflow.com/questions/44288724/is-it-possible-to-get-a-single-element-of-a-set-in-c-stl/48843872#48843872", "title": "Is it possible to get a single element of a set in C++ STL?", "body": "<p>You can't do it in clear C++, but if you use GCC (and you probably do, based on your compilation error), you can create policy based set, which behaves as normal STL set, but supports operation you asked about.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#include &lt;ext/pb_ds/assoc_container.hpp&gt;\nusing namespace __gnu_pbds;\ntypedef tree&lt;int,null_type,less&lt;int&gt;,rb_tree_tag,tree_order_statistics_node_update&gt; indexed_int_set;\n\nint main ()\n{\n    indexed_int_set myset;\n\n    for (int i=0; i&lt;15; i++)\n        myset.insert (i);\n\n    cout &lt;&lt; *myset.find_by_order(10) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>In the code above, we define structure called <code>indexed_int_set</code>, which has 2 additional methods: <code>find_by_order(int p)</code> and <code>order_of_key(int k)</code>.\nFirst one is what you want, it returns an iterator to p-th element.\nSecond one is similar to lower_bound, but returns an index instead of iterator.</p>\n"}], "owner": {"reputation": 133, "user_id": 7861687, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-RmA49YX-1aE/AAAAAAAAAAI/AAAAAAAACTk/kbMzVra2ncE/photo.jpg?sz=128", "display_name": "Shah Shishir", "link": "https://stackoverflow.com/users/7861687/shah-shishir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8111, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1519347075, "creation_date": 1496244133, "question_id": 44288724, "link": "https://stackoverflow.com/questions/44288724/is-it-possible-to-get-a-single-element-of-a-set-in-c-stl", "title": "Is it possible to get a single element of a set in C++ STL?", "body": "<p>I have the following C++ code with C++ STL vector,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main ()\n{   \n    vector &lt;int&gt; v;\n\n    for (int i=0; i&lt;15; i++)\n        v.push_back (i);\n\n    cout &lt;&lt; v[10] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>It normally prints the element that is stored into the 10th index. The output be 10.</p>\n\n<p>But I tried the same thing with C++ STL set also,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\nusing namespace std;\n\nint main ()\n{\n    set &lt;int&gt; myset;\n\n    for (int i=0; i&lt;15; i++)\n        myset.insert (i);\n\n    cout &lt;&lt; myset[10] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>It gives me Compilation error showing the following messages :(</p>\n\n<blockquote>\n  <p>prog.cpp: In function \u2018int main()\u2019:</p>\n  \n  <p>prog.cpp:12:18: error: no match for \u2018operator[]\u2019 (operand types are\n  \u2018std::set\u2019 and \u2018int\u2019)\n       cout &lt;&lt; myset[10] &lt;&lt; endl;</p>\n</blockquote>\n\n<p>So, my question is, is there any way to print any element of STL sets alike the STL vectors in C++? if yes, how?</p>\n\n<p>Meanwhile we can use iterators but it can work with the full set, as far I know. :)</p>\n"}, {"tags": ["c++", "c++11", "function-pointers"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1496243916, "post_id": 44288510, "comment_id": 75584002, "body": "This isn&#39;t a duplicate of the linked question, it is about overload resolution and address-of-member"}, {"owner": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1496243943, "post_id": 44288510, "comment_id": 75584021, "body": "@Rakete1111 I have seen it. But I don&#39;t understand why I should <code>bind</code>. I added <code>const Matrix&lt;double&gt;&amp;</code> to the template argument used in the instantiation of <code>coef</code>. It actually work with usual methods (like in the last example of <a href=\"http://www.cplusplus.com/reference/functional/function/function/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/functional/function/function</a>)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1496244058, "post_id": 44288510, "comment_id": 75584115, "body": "<code>const double&amp;(Matrix&lt;double::*member)(const int &amp;, const int&amp;) = &amp;Matrix&lt;double&gt;::operator(); std::function&lt;...&gt; coef = member;</code> will work. Similar is going on in <a href=\"https://stackoverflow.com/questions/16794695/connecting-overloaded-signals-and-slots-in-qt-5\" title=\"connecting overloaded signals and slots in qt 5\">stackoverflow.com/questions/16794695/&hellip;</a>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1496244327, "post_id": 44288510, "comment_id": 75584317, "body": "@PierreMarchand Because it is a member function, you have to add an instance to call it one or make the function take an instance of any class. You don&#39;t have to use <code>std::bind</code>, a lambda works fine and is better anyways."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1496245602, "post_id": 44288510, "comment_id": 75585152, "body": "@Rakete1111 he&#39;s binding to the right function type, the problem is the non-const overload"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1496245653, "post_id": 44288510, "comment_id": 75585181, "body": "@Caleth You sure? I thought that the first parameter has to be a pointer to the class, not a reference."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1496245768, "post_id": 44288510, "comment_id": 75585283, "body": "It&#39;s bullet 1 of pointer-to-member-function in <a href=\"http://en.cppreference.com/w/cpp/concept/Callable\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/concept/Callable</a>, not bullet 3. That is, a <code>std::function&lt;Ret(Class&amp;)&gt;</code> is more general than <code>std::function&lt;Ret(Class*)&gt;</code>, in that it can be called with either pointers or references"}, {"owner": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "edited": false, "score": 0, "creation_date": 1496263211, "post_id": 44288510, "comment_id": 75594991, "body": "As I said, in <a href=\"http://www.cplusplus.com/reference/functional/function/function/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/functional/function/function</a> there is an example where they use a reference for a member function. So, my question can be marked as not a duplicate ?"}, {"owner": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "edited": false, "score": 0, "creation_date": 1496908983, "post_id": 44288510, "comment_id": 75857773, "body": "My question is still marked as duplicate and I have already edited it, what can I do ?"}], "owner": {"reputation": 489, "user_id": 5913047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984dd8cf2a6685cf6b46386566ae73ad?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre Marchand", "link": "https://stackoverflow.com/users/5913047/pierre-marchand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1496243780, "answer_count": 0, "score": 0, "last_activity_date": 1496304292, "creation_date": 1496243569, "last_edit_date": 1496304292, "question_id": 44288510, "link": "https://stackoverflow.com/questions/44288510/c-functional-with-operator", "closed_reason": "Duplicate", "title": "c++ - Functional with operator()", "body": "<p>Let say I have the following code:</p>\n\n<pre><code>template&lt;typename T&gt; Matrix{\n  private:\n    int nr;\n    std::vector&lt;T&gt; data;\n  public:\n    T&amp; operator()(const int&amp; j, const int&amp; k){\n    return this-&gt;mat.at(j+k*nr);}\n\n    const T&amp; operator()(const int&amp; j, const int&amp; k) const {\n    return this-&gt;mat.at(j+k*nr);}\n};\n</code></pre>\n\n<p>At some point I need to create a function pointer associated to <code>const T&amp; operator()(const int&amp; j) const</code> to use it as an argument in another function. Using <code>functional</code>, I tried:</p>\n\n<pre><code>//#include&lt;functional&gt;\nfunction&lt;const double&amp;(const Matrix&lt;double&gt;&amp;, const int&amp;, const int&amp;)&gt; coef=&amp;Matrix&lt;double&gt;::operator();\n</code></pre>\n\n<p>and I have the following error:</p>\n\n<pre><code> no viable conversion from '&lt;overloaded function type&gt;' to 'function&lt;const double &amp;(const\n  Matrix&lt;double&gt; &amp;, const int &amp;, const int &amp;)&gt;\n</code></pre>\n\n<p>I cannot get it to work and it is pretty hard to find informations on <code>function</code>, since the name is quite used...</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As pointed out in the comment section, it is not a duplicate and I don't think I should you use <code>bind</code>. I am just trying to apply the last example in <a href=\"http://www.cplusplus.com/reference/functional/function/function/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/functional/function/function/</a> where they add a reference argument in the function pointer for a member function. The difference here is that my function member is an operator and I have not succeeded in doing the same as in the example. So, is there a syntax problem in what I am doing ? or may there is a subtlety with operators ?</p>\n"}, {"tags": ["c++", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1496243726, "post_id": 44288419, "comment_id": 75583844, "body": "It allows you to create position independent code by making the references relative to the instruction pointer and not a fixed memory address."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1496299071, "post_id": 44288419, "comment_id": 75605556, "body": "but this is simply amd64 RIP-relative addressing. most instructions in x64 use it. In such cases, the effective address is formed by adding the displacement to the 64-bit RIP of the next instruction. in your example <code>0x15468</code> and <code>0x15457</code> this is displacement. your disassembler show you instructions in such form. another disasm can show the same instruction in another form - show the calculated <i>effective</i> address instead of <i>displacement</i> - but this is only different forms of visualization."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1496299321, "post_id": 44288419, "comment_id": 75605708, "body": "this form let save 4 bytes - if we use absolute address in x64 long mode as effective address - we need 8 bytes(64-bits) for this. but with rip-addressing we use only 4 bytes(32-bits) signed offset to rip - so we can assess <code>[rip-0x80000000, rip+0x7fffffff]</code> memory range. and this for instruction saved for us 4 bytes"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1496299432, "post_id": 44288419, "comment_id": 75605773, "body": "because your literal string is located inside you binary and if your binary less than 2GB in memory - the literals will be in range <code>[rip-0x80000000, rip+0x7fffffff]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "edited": false, "score": 0, "creation_date": 1496243720, "post_id": 44288491, "comment_id": 75583842, "body": "I know that, but my question is why does the code use the <code>%rip</code> register? Why can&#39;t it use another register (<code>%rax</code>, <code>%rbx</code>, etc) or just use a constant address?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "edited": false, "score": 3, "creation_date": 1496243878, "post_id": 44288491, "comment_id": 75583966, "body": "@Dovahkiin: &quot;Position Independent Code&quot;.  If it used a constant address, then the dynamic loader, on loading a library at a non-preferred base address, would have to change (&quot;fixup&quot;) all the &quot;constant&quot; addresses, which also makes the code segment non-shared.  Also, relative addresses tend to be smaller than complete pointers."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "edited": false, "score": 2, "creation_date": 1496243898, "post_id": 44288491, "comment_id": 75583986, "body": "@Dovahkiin Because the compiler might not know exactly at which address the code segment is actually loaded. This could be part of the operating systems quests to foil attacks, or because the code is in a library which is dynamically loaded."}, {"owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "reply_to_user": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "edited": false, "score": 0, "creation_date": 1496244004, "post_id": 44288491, "comment_id": 75584079, "body": "@Dovahkiin because during compilation the string literals are placed somewhere in the code section and the compiler knows only how far away those strings are from the current instruction or the start of this section, not their absolute address."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 9, "last_activity_date": 1496243528, "creation_date": 1496243528, "answer_id": 44288491, "question_id": 44288419, "link": "https://stackoverflow.com/questions/44288419/why-does-my-disassembled-c-code-use-the-instruction-pointer-and-an-offset-to-g/44288491#44288491", "title": "Why does my disassembled C++ code use the instruction pointer and an offset to get string literals?", "body": "<p>Remember that string literals in C++ are <em>constant</em> and non-modifiable. One way to ensure that is to place them together with the code in the code-segment, which is loaded into memory pages marked as read-only.</p>\n"}], "owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 1, "accepted_answer_id": 44288491, "answer_count": 1, "score": 10, "last_activity_date": 1496243528, "creation_date": 1496243346, "question_id": 44288419, "link": "https://stackoverflow.com/questions/44288419/why-does-my-disassembled-c-code-use-the-instruction-pointer-and-an-offset-to-g", "title": "Why does my disassembled C++ code use the instruction pointer and an offset to get string literals?", "body": "<p>I have a C++ program of mine that I've disassembled, and it seems like the assembly is using the instruction pointer to get at string literals. For example:</p>\n\n<pre><code>leaq    0x15468(%rip), %rsi ## literal pool for: \"special\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>leaq    0x15457(%rip), %rsi ## literal pool for: \"ordinary\"\n</code></pre>\n\n<p>Why does the compiler use the instruction pointer to get at string literals? This seems like it would result in a substantial headache for any human programmer, although it's probably not as hard for the compiler.</p>\n\n<p>My question, though, is <em>why?</em> Is there some machine based or historical reason or did the compiler writers just decide to use <code>%rip</code> arbitrarily?</p>\n"}, {"tags": ["c++", "arrays", "windows"], "comments": [{"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1496243442, "post_id": 44288368, "comment_id": 75583646, "body": "LPCSTR is a <code>const char *</code>. The error message explains this already."}, {"owner": {"reputation": 3, "user_id": 8081706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94911641b1f84009edcd00650dea83b4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirotaku", "link": "https://stackoverflow.com/users/8081706/shirotaku"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1496243524, "post_id": 44288368, "comment_id": 75583702, "body": "I know. But is there a way to use this array anyway or &quot;convert&quot; this array? - Or how can I use this string (the contet of the array) in the WritePrivateProfielString funtion?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1496243588, "post_id": 44288368, "comment_id": 75583743, "body": "@Shirotaku the parameter should <i>likely</i> be simply <code>arr</code>, but you had better terminate that string first."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1496243608, "post_id": 44288368, "comment_id": 75583756, "body": "Wow - the error says that you tried to pass a single <code>char</code>, not a char array. <code>arr[i]</code> is a <i>single character</i>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496243614, "post_id": 44288368, "comment_id": 75583764, "body": "@Shirotaku What do you mean <i>convert</i>? You can just use <code>arr</code> as Parameter already."}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1496243623, "post_id": 44288368, "comment_id": 75583774, "body": "A char-array decays to a char*, which is directly convertible to a const char*"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1496269295, "post_id": 44288368, "comment_id": 75597373, "body": "The error message doesn&#39;t look right, since that parameter is an <code>LPCTSTR</code> (note the <code>T</code> in the middle) (though it appears that you&#39;re building in ANSI mode so it still boils down to <code>const char *</code>).  It makes me wonder if, in addition to the other problems, you&#39;re using some non-standard copies of the Windows headers."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1496269403, "post_id": 44288368, "comment_id": 75597415, "body": "@Adrian, since <code>LPCTSTR</code> is a preprocessor macro rather than a typedef, wouldn&#39;t the compiler have already converted it to <code>LPCSTR</code> (or <code>LPCWSTR</code> where appropriate) by the time it noticed the conversion error?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1496269757, "post_id": 44288368, "comment_id": 75597541, "body": "@Harry Johnston:  Perhaps that depends on your compiler.  VC++ shows <code>LPCTSTR</code> in the error.  The message the OP quoted clearly isn&#39;t from VC++, but they didn&#39;t specify whether it was gcc, or clang, or something else."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1496270076, "post_id": 44288368, "comment_id": 75597637, "body": "I&#39;m not sure it&#39;s a dupe.  The question <i>might</i> be about splitting the string, but it&#39;s not clear.  It&#39;s certainly not <i>solely</i> about splitting the string.  I would have gone with &quot;Unclear what you&#39;re asking,&quot; but I was holding off hoping the question would be clarified."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1496270254, "post_id": 44288368, "comment_id": 75597692, "body": "@Adrian, turns out my premise was wrong; <code>LPCTSTR</code> is a typedef, at least in the latest SDKs.  D&#39;oh!  (But I believe MinGW and other GCC-based compilers use their own headers, not the Microsoft ones.)  The choice of dupe was based on the OPs comment in response to Panagiotis&#39; answer.  It seems pretty clear that the OP intended <code>arr[i]</code> to contain a string."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8081706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94911641b1f84009edcd00650dea83b4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirotaku", "link": "https://stackoverflow.com/users/8081706/shirotaku"}, "edited": false, "score": 0, "creation_date": 1496243984, "post_id": 44288567, "comment_id": 75584059, "body": "But arr does contains the whole content of &quot;configs&quot; (text1, text2, text3, tex4, text4) which I wantet to seperate (or am I wrong), so that I one out of it the like text3."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "reply_to_user": {"reputation": 3, "user_id": 8081706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94911641b1f84009edcd00650dea83b4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirotaku", "link": "https://stackoverflow.com/users/8081706/shirotaku"}, "edited": false, "score": 0, "creation_date": 1496245211, "post_id": 44288567, "comment_id": 75584921, "body": "That&#39;s not what you asked in the question. Nor does the code show any splittin.  <code>arr</code> is a single string, not an array of strings. Check <a href=\"https://stackoverflow.com/questions/236129/split-a-string-in-c\">Split a string in C++</a>"}], "tags": [], "owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "is_accepted": false, "score": 1, "last_activity_date": 1496243716, "creation_date": 1496243716, "answer_id": 44288567, "question_id": 44288368, "link": "https://stackoverflow.com/questions/44288368/char-array-to-lpcstr/44288567#44288567", "title": "Char Array to LPCSTR", "body": "<p>You are passing <code>arr[i]</code> which is a char, not an array, as the third argument. You probably wanted to pass <code>arr</code>.</p>\n\n<p>The error says: </p>\n\n<blockquote>\n  <p>[Error] invalid conversion from <strong>'char'</strong> to 'LPCSTR {aka const char*}' [-fpermissive]</p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 8081706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94911641b1f84009edcd00650dea83b4?s=128&d=identicon&r=PG&f=1", "display_name": "Shirotaku", "link": "https://stackoverflow.com/users/8081706/shirotaku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 1, "closed_date": 1496269266, "answer_count": 1, "score": 0, "last_activity_date": 1496243832, "creation_date": 1496243224, "last_edit_date": 1496243832, "question_id": 44288368, "link": "https://stackoverflow.com/questions/44288368/char-array-to-lpcstr", "closed_reason": "Duplicate", "title": "Char Array to LPCSTR", "body": "<p>I am struggeling now for days, because I'm very new to c++.</p>\n\n<p>I want to write something into a .ini file with <code>WritePrivateProfileString</code></p>\n\n<pre><code>int i = 0;\nchar arr[total];\nstringstream ssin(configs);\nwhile (ssin.good() &amp;&amp; i &lt; total){\n    ssin &gt;&gt; arr[i];\n    ++i;\n};\n\n[...]\n\nWritePrivateProfileString(TEXT(\"Config\"),TEXT(\"active\"),arr[i],path);\n</code></pre>\n\n<p>(total is a int that equals 6 and configs is a string like \"text1 text2 text3\")</p>\n\n<p>And now I want to seperate every <code>text (text1, text2, text3)</code> in to a array so I can u easily use them.</p>\n\n<p>But because <code>WritePrivateProfileString</code> uses LPCSTR I cant insert this char array as input.</p>\n\n<p><code>[Error] invalid conversion from 'char' to 'LPCSTR {aka const char*}' [-fpermissive]</code></p>\n\n<p>Is there a way to use the char array in the <code>WritePrivateProfileString</code> function or how can I convert it so it can be used in this function?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "vector", "random"], "comments": [{"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496244246, "post_id": 44288352, "comment_id": 75584270, "body": "@Fran&#231;oisAndrieux, true I copy pasted the old thread w/o it. Now my question is edited. Thank you"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1496244510, "post_id": 44288352, "comment_id": 75584424, "body": "Do not delete and repost questions to circumvent closures."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1496249559, "post_id": 44288352, "comment_id": 75587610, "body": "What would be the marginal distribution of the particular number(s)?"}], "answers": [{"comments": [{"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496243878, "post_id": 44288494, "comment_id": 75583965, "body": "Thank you. Indeed I am really new to programming. I will start reading the &quot;if statement&quot; immediately."}, {"owner": {"reputation": 307, "user_id": 6151771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1180145605347312/picture?type=large", "display_name": "MrSanchez", "link": "https://stackoverflow.com/users/6151771/mrsanchez"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496244050, "post_id": 44288494, "comment_id": 75584106, "body": "Ok then that explains it, read the while loop if you haven&#39;t also, and I recommend that you look for some c++ book to read."}, {"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496244182, "post_id": 44288494, "comment_id": 75584213, "body": "It is called segmentation fault. Have a look here: <a href=\"https://stackoverflow.com/questions/2346806/what-is-a-segmentation-fault\" title=\"what is a segmentation fault\">stackoverflow.com/questions/2346806/&hellip;</a>"}], "tags": [], "owner": {"reputation": 307, "user_id": 6151771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1180145605347312/picture?type=large", "display_name": "MrSanchez", "link": "https://stackoverflow.com/users/6151771/mrsanchez"}, "is_accepted": false, "score": -2, "last_activity_date": 1496244298, "last_edit_date": 1496244298, "creation_date": 1496243529, "answer_id": 44288494, "question_id": 44288352, "link": "https://stackoverflow.com/questions/44288352/c-vector-with-random-unique-elements-with-constant-sum/44288494#44288494", "title": "c++ vector with random unique elements with constant sum", "body": "<p>declare a boolean that starts at false, after that do a while that whill iterate until that flag is true, inside that while you will iterate until the sum of both of them = 5, you will check if the sum = 5 with an If statement, if they are then you will change the value of the flag to true. Easy as that.</p>\n\n<p>I recommend you study a bit more, since you are probably new to programming (at least thats what the question makes me think, if you aren't then there is something clearly wrong).</p>\n\n<p>Also, there ya go:\n<a href=\"https://www.tutorialspoint.com/cplusplus/cpp_if_else_statement.htm\" rel=\"nofollow noreferrer\">If statements</a><br/>\n<a href=\"https://www.tutorialspoint.com/cplusplus/cpp_while_loop.htm\" rel=\"nofollow noreferrer\">While loop</a></p>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": true, "score": 0, "last_activity_date": 1496264009, "creation_date": 1496264009, "answer_id": 44294474, "question_id": 44288352, "link": "https://stackoverflow.com/questions/44288352/c-vector-with-random-unique-elements-with-constant-sum/44294474#44294474", "title": "c++ vector with random unique elements with constant sum", "body": "<p>Ok, there are three requirements:</p>\n\n<ul>\n<li>Sum should be fixed</li>\n<li>Non-repetitive numbers</li>\n<li>Numbers should be in the range</li>\n</ul>\n\n<p>For requirement #1 it is better sample from distribution which already have the property - <a href=\"https://en.wikipedia.org/wiki/Dirichlet_distribution\" rel=\"nofollow noreferrer\">Dirichlet distribution</a>. For simplest case where all parameters are equal to 1, it is also known as simplex sampling, producing numbers uniformly distributed on <code>N</code> dimensional simplex. HEre is link to the C++ <a href=\"https://github.com/Kri-Ol/SimplexSampling\" rel=\"nofollow noreferrer\">code</a>.</p>\n\n<p>To satisfy second&amp;third requirement, just use acceptance/rejection</p>\n\n<pre><code>std::linear_congruential_engine&lt;uint64_t, 2806196910506780709ULL, 1ULL, (1ULL&lt;&lt;63ULL)&gt; ugen;\n\nfloat MAX = 20.0f;\nSimplex s(0.0f, 20.0f);\n\nstd::vector&lt;float&gt; v(5, 0.0f);\nstd::vector&lt;int&gt;   r(5, 0);\n\nfor( ;; ) {\n    s.sample(v, ugen); // sampled Dirichlet\n    for(int k = 0; k != v.size(); ++k) {\n        r[k] = 1 + int(v[k]);\n    }\n    std::sort(r.begin(), r.end());\n    if (*r.rbegin() &gt; 12) // array is sorted, just check last largest element\n        continue;\n    if (std::unique(r.begin(), r.end()) == r.end()) // no duplicates, good to go\n        break;\n}\n\nreturn r;\n</code></pre>\n"}], "owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 44294474, "answer_count": 2, "score": -3, "last_activity_date": 1496264009, "creation_date": 1496243180, "last_edit_date": 1496243639, "question_id": 44288352, "link": "https://stackoverflow.com/questions/44288352/c-vector-with-random-unique-elements-with-constant-sum", "title": "c++ vector with random unique elements with constant sum", "body": "<p>I have an std::vector with fixed size N = 5. I want every element of the vector to be randomly selected between two positive numbers, in particular 1 and 12. (zeros are not allowed).Each element should be unique on the vector. </p>\n\n<p>How can I do this? The implementation so far allows elements to be zero and have duplicates in the vector. I want to improve in order not to allow zeros and duplicates </p>\n\n<p>Code so far:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;random&gt;\n\nint main() {\n    std::random_device rd;\n    std::mt19937 gen(rd());\n\n    constexpr int MAX = 20;\n    constexpr int LINES = 5;\n\n    int sum{};\n    int maxNum = 12;\n    int minNum = 1;\n\n    std::array&lt;int, LINES&gt; nums;\n\n    for (int i = 0; i &lt; LINES; ++i) {\n        maxNum = std::min(maxNum, MAX - sum);\n        minNum = std::min(maxNum, std::max(minNum, MAX - maxNum * (LINES - i)));\n        std::cout &lt;&lt; minNum &lt;&lt; \" \" &lt;&lt; maxNum &lt;&lt; std::endl;\n        std::uniform_int_distribution&lt;&gt; dist(minNum, maxNum);\n        int num = dist(gen);\n\n        nums[i] = num;\n        sum += num;\n    }\n\n    std::shuffle(std::begin(nums), std::end(nums), gen);\n    std::copy(std::begin(nums), std::end(nums), std::ostream_iterator&lt;int&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496242858, "post_id": 44288112, "comment_id": 75583229, "body": "<code>man</code> is your friend?"}, {"owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 2, "creation_date": 1496243374, "post_id": 44288112, "comment_id": 75583608, "body": "You can remove linking to the library and see what .o files have missing references."}, {"owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496261253, "post_id": 44288112, "comment_id": 75594071, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Naturally I&#39;m using man for <code>nm</code> and <code>objdump</code>, but I&#39;m not familiar with the commands nor the terminology so I&#39;m fumbling through. I&#39;m posting this question in case someone more familiar can help me.  Currently I don&#39;t see a way to get want I want easily from these commands but I might be missing something."}, {"owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "reply_to_user": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 0, "creation_date": 1496265760, "post_id": 44288112, "comment_id": 75596053, "body": "@riodoro1 Your suggestion to remove the library proved really helpful.  I did that (removing -lcrypto in my case) and the linker errors give me not only the what OpenSSL functions are used in what files but even the exact line numbers where they are used. Can you please post this as an answer? I&#39;ll accept it as the solution."}], "answers": [{"tags": [], "owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "is_accepted": false, "score": 1, "last_activity_date": 1496305377, "creation_date": 1496305377, "answer_id": 44302226, "question_id": 44288112, "link": "https://stackoverflow.com/questions/44288112/how-to-find-the-functions-used-by-a-particular-library-in-a-c-file/44302226#44302226", "title": "How to find the functions used by a particular library in a C++ file", "body": "<p>As per @firebrush suggestion I post my comment as an answer (maybe for posterity).</p>\n\n<p>In order to see where the library functions are used You can remove the library from linking and see what <code>.o</code> files have missing references.</p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 6678391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd88a928e571ab9ba810bb54213b9382?s=128&d=identicon&r=PG&f=1", "display_name": "AdrianRK", "link": "https://stackoverflow.com/users/6678391/adrianrk"}, "is_accepted": false, "score": 2, "last_activity_date": 1496308409, "last_edit_date": 1496308409, "creation_date": 1496306759, "answer_id": 44302679, "question_id": 44288112, "link": "https://stackoverflow.com/questions/44288112/how-to-find-the-functions-used-by-a-particular-library-in-a-c-file/44302679#44302679", "title": "How to find the functions used by a particular library in a C++ file", "body": "<p>I don't think there is a simple and quick solution for this, you will have to do some work for this. \nThere are three ways your software might link with openssl. </p>\n\n<ol>\n<li>Static linking. </li>\n<li>Dynamic link with the runtime linker </li>\n<li>Manual linking with dlopen. </li>\n</ol>\n\n<p>In all cases, the best solution would be to remove the header files and the openssl library from their location and recompile the code. \nIf you do not have access to the code you have to use nm or objdump to get the symbols from your executable and cross reference them with the ones in the openssl library. This will not work if you are using dlopen to link the library. \nAnother option would be to get the openssl library and recompile it with tracing enabled and execute your code with the new library. </p>\n\n<p>The nm tool is used to list all the symbols in an object, regardless if it is a library or an executable. You can make a bash script that cross-references the output of calling nm on the openssl library and on your executable. The way to call this is nm objname. The third column is the one with the symbols.</p>\n\n<p>objdump is a more precise tool that you can use to list all the symbols that are undefined in your. You can use it to list the header of your executable (<strong>objdump -h objname</strong>), this normally lists all the libraries your executable needs at runtime to run. If openssl is listed here then this means you are linking against it dynamically with the run time linker. You can use <strong>objdump -R</strong> with openssl to get the symbols in the openssl interface. You can cross-reference this with the symbols listed when calling <strong>objdump -r</strong> with your executable</p>\n"}, {"tags": [], "owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "is_accepted": false, "score": 2, "last_activity_date": 1497028437, "creation_date": 1497028437, "answer_id": 44463408, "question_id": 44288112, "link": "https://stackoverflow.com/questions/44288112/how-to-find-the-functions-used-by-a-particular-library-in-a-c-file/44463408#44463408", "title": "How to find the functions used by a particular library in a C++ file", "body": "<p>A coworker of mine was able to get this information using nm. Here's the procedure we followed:</p>\n\n<h2>Get the List of Symbols</h2>\n\n<p>As suggested by riodoro1 above, the list of objects from the library used by your code can be obtained by linking without the library (without <code>-lcrypto</code> in my case, for instance). Alternatively, this can be obtained as described below using <code>nm</code></p>\n\n<ol>\n<li><p>Run <code>nm</code> on all relevant objects:</p>\n\n<pre><code>find . -name '*.o' -exec nm {} \\; &gt; nm.txt\n</code></pre></li>\n<li><p>Find undefined symbols referenced by objects and strip symbols:</p>\n\n<pre><code>grep '^ *U' nm.txt &gt; nm2.txt\n</code></pre></li>\n<li><p>Remove C++ symbols (mangled names begin with _Z), uniquify those remaining:</p>\n\n<pre><code>grep -v ' _Z' nm2.txt | sort | uniq &gt; nm3.txt\n</code></pre></li>\n<li><p>Manually edit <code>nm3.txt</code>, remove symbols not part of openssl, write to <code>nm4.txt</code>. </p></li>\n</ol>\n\n<h2>Use the Preprocessor to Expand Macros</h2>\n\n<ol>\n<li><p>Build the cc files normally, capture output to log file. Isolate the lines that show the commands that compiled lotus source files. Search and replace in the output to produce commands to invoke the preprocessor. Change:</p>\n\n<ul>\n<li>-o .../file.o => -o .../file.i</li>\n<li>' -c ' => ' -E '</li>\n</ul></li>\n<li><p>Run the modified commands to produce preprocessor output.</p></li>\n<li><p>The preprocessor output contains the full text from all included\nheader files, followed by the preprocessed C code. Headers are\nlong and uninteresting so strip them from the output. We'll get\njust C code with expanded macros.</p>\n\n<pre><code>bash -c 'for f in `find . -name \"*.i\"`; do cat \"${f}\" | perl cat-preproc-without-headers.pl &gt; \"${f}\"cc; done'\n</code></pre></li>\n</ol>\n\n<p>Here's the contents of cat-preproc-without-headers.pl:</p>\n\n<pre><code>#!/usr/bin/perl\n\n# Write lines to stdout if cat != 0\n$cat = 0;\n\nwhile(&lt;&gt;) {\n    if(/^# [1-9]\\d* .*\\.cc/) {\n        $cat = 1;\n    } elsif(/^# [0-9]/) {\n        $cat = 0;\n    } elsif($cat) {\n        print;\n    }\n}\n</code></pre>\n\n<h2>Conclusion</h2>\n\n<p>With the list of symbols and the expanded macros, you now have all the symbols from the library and the places where they are used in the source code.</p>\n"}], "owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1497028437, "creation_date": 1496242612, "question_id": 44288112, "link": "https://stackoverflow.com/questions/44288112/how-to-find-the-functions-used-by-a-particular-library-in-a-c-file", "title": "How to find the functions used by a particular library in a C++ file", "body": "<p>I'm working with legacy C++ code compiled with g++. The files in question are compiled using a library. <strong>My goal is to determine every use of a function or macro from a particular library in each of these files.</strong> (In my case, OpenSSL is the library in question, and I'll reference it as such throughout the rest of the post.  However, I think my question generically applies to any C library I'd compile against.)</p>\n\n<p>I could conceive of this being easier if OpenSSL were a C++ library using a namespace - I could simply grep on the namespace to find the OpenSSL functions. Since, however, it is a C library, undecorated OpenSSL functions and macros are sprinkled across some the source files and I can't readily tell by scanning the source which functions are from OpenSSL and which are other local functions or functions from other libraries.</p>\n\n<p>Looking through Stack Overflow, I see questions like this for the Windows environment, but I don't see any answers for a Linux environment. Broadening my search, I see references to <code>nm</code> and <code>objdump</code>, but if it's possible to get the details I'm looking for from these tools from an object file, I can't figure out the correct parameters to use.</p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["c++", "ubuntu", "eigen", "eigen3", "suitesparse"], "comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1496245395, "post_id": 44288101, "comment_id": 75585019, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (including the commands you used to compile)."}, {"owner": {"reputation": 35, "user_id": 189897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23833fe0f9d661ee846e266d7d533d0?s=128&d=identicon&r=PG", "display_name": "DeathKnight", "link": "https://stackoverflow.com/users/189897/deathknight"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1496338439, "post_id": 44288101, "comment_id": 75633118, "body": "@chtz I made a minimal example and edited the question."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1496769903, "post_id": 44288101, "comment_id": 75792180, "body": "Thanks for the minimal example. This is indeed a problem within Eigen. I&#39;ll commit a fix in a moment."}], "answers": [{"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 1, "last_activity_date": 1496770419, "creation_date": 1496770419, "answer_id": 44396342, "question_id": 44288101, "link": "https://stackoverflow.com/questions/44288101/how-to-use-cholmodsupport-in-eigen3-under-ubuntu/44396342#44396342", "title": "How to use CholmodSupport in Eigen3 under Ubuntu", "body": "<p>There was a problem with CholmodSupport in the devel-branch of Eigen, which I just fixed here:\n<a href=\"https://bitbucket.org/eigen/eigen/commits/5ecddbf9fae7f5a4d4e587b8809d9287306885d3\" rel=\"nofollow noreferrer\">https://bitbucket.org/eigen/eigen/commits/5ecddbf9fae7f5a4d4e587b8809d9287306885d3</a></p>\n\n<p>The problem was that some helper functions (used to delegate to appropriate internal cholmod-functions) were not marked <code>inline</code> and thus had multiple definitions, when compiled in different compilation units.</p>\n\n<p>For Eigen 3.3 and Eigen 3.2 your minimal example should work fine.</p>\n"}], "owner": {"reputation": 35, "user_id": 189897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d23833fe0f9d661ee846e266d7d533d0?s=128&d=identicon&r=PG", "display_name": "DeathKnight", "link": "https://stackoverflow.com/users/189897/deathknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 44396342, "answer_count": 1, "score": 1, "last_activity_date": 1496770419, "creation_date": 1496242590, "last_edit_date": 1496515670, "question_id": 44288101, "link": "https://stackoverflow.com/questions/44288101/how-to-use-cholmodsupport-in-eigen3-under-ubuntu", "title": "How to use CholmodSupport in Eigen3 under Ubuntu", "body": "<p>I made such a tiny example:</p>\n\n<p>solver.h</p>\n\n<pre><code>#pragma once\n\n#include &lt;Eigen/Dense&gt;\n#include &lt;Eigen/Sparse&gt;\n#include &lt;Eigen/CholmodSupport&gt;\n\ntypedef Eigen::SparseMatrix&lt;double&gt; SpMat;\n\nclass UseCholmodSolver\n{\n    public:\n        UseCholmodSolver() {}\n        ~UseCholmodSolver() {}\n    private:\n        Eigen::CholmodSupernodalLLT&lt;SpMat&gt; cholmod;\n};\n</code></pre>\n\n<p>solver.cpp</p>\n\n<pre><code>#include \"solver.h\"\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"solver.h\"\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>Makefile</p>\n\n<pre><code>CXXFLAGS=-g -O2 -Wall -DNDEBUG -I./ext/eigen -I/usr/include/suitesparse\nCXX=g++\n\nall: t1\nclean:\n    rm -f *.o main\n\nmain.o: main.cpp solver.h\nsolver.o: solver.cpp solver.h\n\nt1: main.o\n    $(CXX) main.o -o main -lcholmod\nt2: main.o solver.o\n    $(CXX) main.o solver.o -o main -lcholmod\n</code></pre>\n\n<p>When I execute \"make t1\", everything is fine.\nHowever, when I type \"make t2\", there are redefinition errors:</p>\n\n<pre><code>g++ main.o solver.o -o main -lcholmod\nsolver.o: In function `int Eigen::internal::cm_start&lt;long&gt;(cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:177: multiple definition of `int Eigen::internal::cm_start&lt;long&gt;(cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:177: first defined here\nsolver.o: In function `int Eigen::internal::cm_finish&lt;long&gt;(cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:178: multiple definition of `int Eigen::internal::cm_finish&lt;long&gt;(cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:178: first defined here\nsolver.o: In function `int Eigen::internal::cm_free_factor&lt;long&gt;(cholmod_factor_struct*&amp;, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:180: multiple definition of `int Eigen::internal::cm_free_factor&lt;long&gt;(cholmod_factor_struct*&amp;, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:180: first defined here\nsolver.o: In function `int Eigen::internal::cm_free_dense&lt;long&gt;(cholmod_dense_struct*&amp;, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:181: multiple definition of `int Eigen::internal::cm_free_dense&lt;long&gt;(cholmod_dense_struct*&amp;, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:181: first defined here\nsolver.o: In function `int Eigen::internal::cm_free_sparse&lt;long&gt;(cholmod_sparse_struct*&amp;, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:182: multiple definition of `int Eigen::internal::cm_free_sparse&lt;long&gt;(cholmod_sparse_struct*&amp;, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:182: first defined here\nsolver.o: In function `cholmod_factor_struct* Eigen::internal::cm_analyze&lt;long&gt;(cholmod_sparse_struct&amp;, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:184: multiple definition of `cholmod_factor_struct* Eigen::internal::cm_analyze&lt;long&gt;(cholmod_sparse_struct&amp;, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:184: first defined here\nsolver.o: In function `cholmod_dense_struct* Eigen::internal::cm_solve&lt;long&gt;(int, cholmod_factor_struct&amp;, cholmod_dense_struct&amp;, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:187: multiple definition of `cholmod_dense_struct* Eigen::internal::cm_solve&lt;long&gt;(int, cholmod_factor_struct&amp;, cholmod_dense_struct&amp;, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:187: first defined here\nsolver.o: In function `cholmod_sparse_struct* Eigen::internal::cm_spsolve&lt;long&gt;(int, cholmod_factor_struct&amp;, cholmod_sparse_struct&amp;, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:190: multiple definition of `cholmod_sparse_struct* Eigen::internal::cm_spsolve&lt;long&gt;(int, cholmod_factor_struct&amp;, cholmod_sparse_struct&amp;, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:190: first defined here\nsolver.o: In function `int Eigen::internal::cm_factorize_p&lt;long&gt;(cholmod_sparse_struct*, double*, long*, unsigned long, cholmod_factor_struct*, cholmod_common_struct&amp;)':\n/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:195: multiple definition of `int Eigen::internal::cm_factorize_p&lt;long&gt;(cholmod_sparse_struct*, double*, long*, unsigned long, cholmod_factor_struct*, cholmod_common_struct&amp;)'\nmain.o:/home/xiang/Code/testEigen/./ext/eigen/Eigen/src/CholmodSupport/CholmodSupport.h:195: first defined here\ncollect2: error: ld returned 1 exit status\nMakefile:14: recipe for target 't2' failed\nmake: *** [t2] Error 1\n</code></pre>\n\n<p>It seems the reason is the \"long\" type specialized template functions in \"CholmodSupport.h\". Any idea to fix this problem?</p>\n"}, {"tags": ["c++", "c++11", "floating-point", "precision", "c++17"], "comments": [{"owner": {"reputation": 8519, "user_id": 7662085, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/X4wrF.jpg?s=128&g=1", "display_name": "stybl", "link": "https://stackoverflow.com/users/7662085/stybl"}, "edited": false, "score": 3, "creation_date": 1496241018, "post_id": 44287410, "comment_id": 75581806, "body": "If I may, whats the point of calling <code>abs</code> on an unsigned type?"}, {"owner": {"reputation": 639, "user_id": 2511448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b688fdadb8043b4156575ea40ebfa032?s=128&d=identicon&r=PG", "display_name": "Yiyuan Lee", "link": "https://stackoverflow.com/users/2511448/yiyuan-lee"}, "reply_to_user": {"reputation": 8519, "user_id": 7662085, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/X4wrF.jpg?s=128&g=1", "display_name": "stybl", "link": "https://stackoverflow.com/users/7662085/stybl"}, "edited": false, "score": 0, "creation_date": 1496241799, "post_id": 44287410, "comment_id": 75582390, "body": "I&#39;m writing a templated function that goes through some arithmetic before calling the mpz_import class of the GMP library; In between there is a call to std::abs that may be required for signed numbers."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496247863, "post_id": 44287410, "comment_id": 75586599, "body": "Related to <a href=\"https://stackoverflow.com/q/29750946/1708801\">Is std::abs(0u) ill-formed?</a>"}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 1, "creation_date": 1496321706, "post_id": 44287410, "comment_id": 75621468, "body": "Note that whilst IEEE 754 double precision does use 52 bits to store the mantissa, there are effectively 53 bits since the value is normalized and there is an &#39;implicit 1&#39; (see this SO post : <a href=\"https://stackoverflow.com/questions/4930269/floating-point-the-leading-1-is-implicit-in-the-significand-huh\" title=\"floating point the leading 1 is implicit in the significand huh\">stackoverflow.com/questions/4930269/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496253775, "post_id": 44287701, "comment_id": 75589995, "body": "Older versions of <a href=\"https://stackoverflow.com/questions/44287410/why-is-stdabs9484282305798401ull-9484282305798400#comment75586599_44287410\">libstdc++ used to accept this code</a> I suspect it will be a while before those older versions mostly go away."}, {"owner": {"reputation": 8519, "user_id": 7662085, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/X4wrF.jpg?s=128&g=1", "display_name": "stybl", "link": "https://stackoverflow.com/users/7662085/stybl"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496253847, "post_id": 44287701, "comment_id": 75590034, "body": "True, however OP stated that they are using c++17, and the error is present from c++11. But for completeness&#39; sake I will include this in my answer."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496253909, "post_id": 44287701, "comment_id": 75590060, "body": "<a href=\"https://wandbox.org/permlink/dLCav79n8E2li63Q\" rel=\"nofollow noreferrer\">gcc 6.3 using c++1z and -pedantic</a> no diagnostic."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496259923, "post_id": 44287701, "comment_id": 75593377, "body": "Slight problem w/ using <code>llabs</code> is that <code>The behavior is undefined if the result cannot be represented by the return type</code>"}], "tags": [], "owner": {"reputation": 8519, "user_id": 7662085, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/X4wrF.jpg?s=128&g=1", "display_name": "stybl", "link": "https://stackoverflow.com/users/7662085/stybl"}, "is_accepted": true, "score": 5, "last_activity_date": 1496241939, "last_edit_date": 1496241939, "creation_date": 1496241490, "answer_id": 44287701, "question_id": 44287410, "link": "https://stackoverflow.com/questions/44287410/why-is-stdabs9484282305798401ull-9484282305798400/44287701#44287701", "title": "Why is std::abs(9484282305798401ull) = 9484282305798400?", "body": "<p>First off, what you are doing doesn't really make sense out of context (getting the absolute value of an unsigned type). But I digress.</p>\n\n<p>The code you have posted doesn't compile. At least not in the compiler I used (whichever one repl.it uses). Instead it complains of an ambiguous overload. Even if it did compile, it would cast the <code>unsigned long long</code> to a different type which cannot support its actual value (in this case <code>double</code>).</p>\n\n<p>Changing <code>abs</code> to <code>llabs</code> like so:</p>\n\n<pre><code>std::cout &lt;&lt; (unsigned long long)std::llabs(9484282305798401ull);\n</code></pre>\n\n<p>..both makes it compile and produces an accurate result. See the documentation of the different <code>abs</code> functions for integer types <a href=\"http://en.cppreference.com/w/cpp/numeric/math/abs\" rel=\"noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496248210, "post_id": 44287879, "comment_id": 75586793, "body": "Ill-formed requires a diagnostic, see <a href=\"https://stackoverflow.com/a/31685448/1708801\">details in my answer here</a> it does not have to be an error though. UB and ill-formed NDR on the other hand do not require a diagnostic"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496248507, "post_id": 44287879, "comment_id": 75586973, "body": "This is one of the neat things about UB and constexpr, <a href=\"https://stackoverflow.com/q/21319413/1708801\">UB is ill-formed in a constexpr and therefore requires a diagnostic</a>."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1496254936, "post_id": 44287879, "comment_id": 75590587, "body": "@Shafik Yes, you&#39;re totally right. I misread the explanation of ill-formed :)"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 8, "last_activity_date": 1497029620, "last_edit_date": 1497029620, "creation_date": 1496241979, "answer_id": 44287879, "question_id": 44287410, "link": "https://stackoverflow.com/questions/44287410/why-is-stdabs9484282305798401ull-9484282305798400/44287879#44287879", "title": "Why is std::abs(9484282305798401ull) = 9484282305798400?", "body": "<p>Your program is ill-formed. From <a href=\"http://eel.is/c++draft/c.math.abs#3\" rel=\"nofollow noreferrer\">[c.math.abs]/29.9.2.3</a>:</p>\n\n<blockquote>\n  <p>If <code>abs()</code> is called with an argument of type <code>X</code> for which <code>is_\u00adunsigned_\u00adv&lt;X&gt;</code> is <code>true</code> and if <code>X</code> cannot be converted to <code>int</code> by integral promotion, the program is ill-formed.</p>\n</blockquote>\n\n<p>Compilers should have to warn you about this though.</p>\n\n<p>It also doesn't really make sense to call <code>std::abs</code> on an unsigned type anyways.</p>\n"}, {"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1496255038, "post_id": 44289610, "comment_id": 75590650, "body": "This would be even better if you use SFINAE, so that types that can&#39;t\u200b promote to unsigned long long also work"}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 3, "last_activity_date": 1496305980, "last_edit_date": 1496305980, "creation_date": 1496246679, "answer_id": 44289610, "question_id": 44287410, "link": "https://stackoverflow.com/questions/44287410/why-is-stdabs9484282305798401ull-9484282305798400/44289610#44289610", "title": "Why is std::abs(9484282305798401ull) = 9484282305798400?", "body": "<p>You can create your own overload of <code>abs</code> if you want to manage unsigned types in a way that is different for what the standard library function does:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;type_traits&gt;\n\nnamespace my {\n\ntemplate &lt;class S&gt;\nauto abs (S x) -&gt; typename std::enable_if&lt;std::is_signed&lt;S&gt;::value,\n                                          decltype(std::abs(x))&gt;::type\n{\n    return std::abs(x);\n}\n\ntemplate &lt;class U&gt;\nauto abs (U x) -&gt; typename std::enable_if&lt;std::is_unsigned&lt;U&gt;::value, U&gt;::type\n{\n    return x;\n}\n\n} // namespace my\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>std::cout &lt;&lt; my::abs(9484282305798401ull) &lt;&lt; '\\n'              // -&gt; 9484282305798401\n          &lt;&lt; my::abs(-3.14159) &lt;&lt; '\\n'                         // -&gt; 3.14159\n          &lt;&lt; my::abs(std::numeric_limits&lt;char&gt;::min()) &lt;&lt; '\\n' // -&gt; 128\n          &lt;&lt; my::abs(std::numeric_limits&lt;int&gt;::min()) &lt;&lt; '\\n'  // -&gt; -2147483648\n</code></pre>\n\n<p>Please, note that <code>std::abs</code> promotes <code>char</code>s (signed in my implementation), but due to 2's complement representation of <code>int</code>s, fails to retrieve the absolute value of INT_MIN.</p>\n"}], "owner": {"reputation": 639, "user_id": 2511448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/b688fdadb8043b4156575ea40ebfa032?s=128&d=identicon&r=PG", "display_name": "Yiyuan Lee", "link": "https://stackoverflow.com/users/2511448/yiyuan-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 1, "accepted_answer_id": 44287701, "answer_count": 3, "score": 7, "last_activity_date": 1497029620, "creation_date": 1496240713, "last_edit_date": 1496242380, "question_id": 44287410, "link": "https://stackoverflow.com/questions/44287410/why-is-stdabs9484282305798401ull-9484282305798400", "title": "Why is std::abs(9484282305798401ull) = 9484282305798400?", "body": "<p>I'm currently writing a templated helper method that can convert C numbers in general (including unsigned long long) to mpz_class numbers in the GMP library. In between, there is a call to <code>std::abs</code>.</p>\n\n<p>However, it turns out that for on C++17 (g++ 6.3.1),</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nint main()\n{\n    std::cout &lt;&lt; (unsigned long long)std::abs(9484282305798401ull);\n}\n</code></pre>\n\n<p>gives an incorrect output of <code>9484282305798400</code>.</p>\n\n<p>As I understood from <a href=\"http://www.cplusplus.com/reference/cmath/abs/\" rel=\"noreferrer\">cmath</a>, <code>std::abs</code> first casts the argument into a double.</p>\n\n<p>According to the C++ docs, double has 52 mantissa bits, which means that the maximum integer value that I must be strictly less than <code>2^52 = 4503599627370496</code> before any loss of precision.</p>\n\n<p>Am I correct to say that since <code>9484282305798401</code> exceeds this limit, <code>std::abs</code> ends up discarding precision to give an incorrect answer?</p>\n\n<p>To clarify, I'm absolutely aware that it makes completely no sense to ask for the absolute value of an unsigned integer; However, I would like the templated function work for general C numbers, instead of having to specifically create a specialization for each signed and unsigned type separately.</p>\n"}, {"tags": ["c++", "visual-studio", "dll", "static"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1496240144, "post_id": 44287113, "comment_id": 75581122, "body": "Did you actually define the member in an implementation file?  <code>const U32 J::SA_UNSPECIFIED;</code>"}, {"owner": {"reputation": 69, "user_id": 4588958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec33c12f02e2db2568ce3d51e4cfa716?s=128&d=identicon&r=PG&f=1", "display_name": "MJF", "link": "https://stackoverflow.com/users/4588958/mjf"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1496242723, "post_id": 44287113, "comment_id": 75583134, "body": "No. I assumed (uh-oh!) that as it was <code>static const int</code> I didn&#39;t need to. I did try to do that (define in an implementation file and take out of the <code>.h&#39;), but then the variables can no longer be used in a </code>case`."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1496268996, "post_id": 44287113, "comment_id": 75597237, "body": "You can leave the <code>= 1</code> in the header file so that the value can still be used, but you still need the definition (with no initializer) in the source file."}], "owner": {"reputation": 69, "user_id": 4588958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec33c12f02e2db2568ce3d51e4cfa716?s=128&d=identicon&r=PG&f=1", "display_name": "MJF", "link": "https://stackoverflow.com/users/4588958/mjf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1496240286, "answer_count": 0, "score": 0, "last_activity_date": 1496244418, "creation_date": 1496239887, "last_edit_date": 1496244418, "question_id": 44287113, "link": "https://stackoverflow.com/questions/44287113/multiple-static-const-int-class-variables-in-dll", "closed_reason": "Duplicate", "title": "Multiple static const int class variables in DLL", "body": "<p>I'm working on a legacy VS2015 app that creates several DLLs.  They all include a certain .h file that declares/defines static data.  After preprocessing that becomes:</p>\n\n<pre>class __declspec(dllexport) J\n{\npublic:\n   static const unsigned int SA_UNSPECIFIED  = 1;\n   ...\n};</pre>\n\n<p>In my app <code>.cpp</code> file I include the same .h file, and that preprocesses (<code>#ifdef</code>, etc.) to this:</p>\n\n<pre>class __declspec(dllimport) J\n{\npublic:\n   static const unsigned int SA_UNSPECIFIED  = 1;\n   ...\n};</pre>\n\n<p>My main symptom is that my app says that during link it cannot find <code>J::SA_UNSPECIFIED</code>.  The app \"References\" (using the \"Reference\" tree in VS) these other DLLs that export <code>J</code>.</p>\n\n<p>I think this is different from <a href=\"https://stackoverflow.com/questions/29223949/why-static-variable-needs-to-be-explicitly-defined\">\"Why static variable needs to be explicitly defined?\"</a> in that I'm using const integral, as opposed to the general case.  Is this not true in this case?</p>\n\n<ol>\n<li>Am I even allowed to do this?  That is, have <code>static const</code> data defined in several different dlls, and expect it to work?</li>\n<li>I tried taking out the assignments, and putting them into a separate .cpp file.  But some of the code uses the <code>static const</code> vars in <code>case</code> statements.  That works fine until I take out the assignment; then <code>case</code> says it needs a constant expression (of course).</li>\n<li>I can't <code>inline</code> these; VS says that's an error.</li>\n<li>Other developers in the group, using identical code and project files, can build without error.  I haven't yet compared VS versions.</li>\n</ol>\n\n<p><strong>Answer:</strong>\nIt turns out that in my app I use <code>SA_UNSPECIFIED</code> in a non-integral way, and so can no longer be initialized in the class definition.</p>\n"}, {"tags": ["c++", "class", "memory-alignment", "packing"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1496239810, "post_id": 44287060, "comment_id": 75580882, "body": "It&#39;s implementation defined."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1600358386, "post_id": 44287060, "comment_id": 113069613, "body": "This question itself is a great demo of proper <code>#pragma pack</code> usage and syntax. Just what I was looking for on how to use <code>#pragma pack</code>!"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1600358529, "post_id": 44287060, "comment_id": 113069676, "body": "Keep in mind, in C++, a <code>struct</code> is just a class where all members default to <code>public</code> if not otherwise specified, and a <code>class</code> is just a class/struct where all members default to <code>private</code> unless otherwise specified, so it seems to me that more narrowly packing just the desired members within a class or struct, rather than the entire class or struct as you have done, would affect a class or struct identically."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1600377318, "post_id": 44287060, "comment_id": 113077378, "body": "See also: <a href=\"https://stackoverflow.com/questions/3318410/pragma-pack-effect\">stackoverflow.com/questions/3318410/pragma-pack-effect</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "is_accepted": true, "score": 2, "last_activity_date": 1496240634, "creation_date": 1496240634, "answer_id": 44287384, "question_id": 44287060, "link": "https://stackoverflow.com/questions/44287060/c-class-packing-member-alignment/44287384#44287384", "title": "C++ Class packing / member alignment", "body": "<p>The documentation for <a href=\"http://en.cppreference.com/w/cpp/preprocessor/impl\" rel=\"nofollow noreferrer\"><code>#pragma</code></a> states:</p>\n\n<blockquote>\n  <p>Implementation defined behavior is controlled by <code>#pragma</code> directive. </p>\n</blockquote>\n\n<p>So the effect, if any, of <code>#pragma pack(push, 1)</code> and <code>#pragma pack(pop)</code>\nis <strong>completely</strong> \"implementation defined.\"</p>\n"}], "owner": {"reputation": 275, "user_id": 3029308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6cc6c40377a9da947db60836b6d960a?s=128&d=identicon&r=PG&f=1", "display_name": "Thalhammer", "link": "https://stackoverflow.com/users/3029308/thalhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 1, "accepted_answer_id": 44287384, "answer_count": 1, "score": 1, "last_activity_date": 1496240634, "creation_date": 1496239738, "question_id": 44287060, "link": "https://stackoverflow.com/questions/44287060/c-class-packing-member-alignment", "title": "C++ Class packing / member alignment", "body": "<p>I know structure packing is a common thing in C++ programming (at least on low memory systems). But what about classes.\nI know it works because I tried it</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#pragma pack(push, 1)\nclass Test_Packed {\n    uint8_t t;\n    uint32_t test;\n};\n#pragma pack(pop)\n\nclass Test_Unpacked {\n    uint8_t t;\n    uint32_t test;\n};\n\nint main() {\n    std::cout&lt;&lt;sizeof(Test_Packed) &lt;&lt; \" / \" &lt;&lt; sizeof(Test_Unpacked)&lt;&lt;std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Which correctly outputs \"5 / 8\".</p>\n\n<p>Can I assume this to be the case on all conforming Compilers, or is this implementation defined?</p>\n\n<p>I know that adding virtual members (and thus needing a vtable) will add additional data in the front. What can be other reasons for this to fail?</p>\n\n<p>Can this cause any problems except for poor performance on some platforms?</p>\n"}, {"tags": ["c++", "windows", "opengl", "glfw", "dwm"], "answers": [{"tags": [], "owner": {"reputation": 287, "user_id": 1876596, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a3f42c3bcca53c0d4428b682c5a9b27?s=128&d=identicon&r=PG", "display_name": "VoodooCode", "link": "https://stackoverflow.com/users/1876596/voodoocode"}, "is_accepted": true, "score": 0, "last_activity_date": 1498041307, "creation_date": 1498041307, "answer_id": 44673706, "question_id": 44287021, "link": "https://stackoverflow.com/questions/44287021/windows-10-desktop-window-manager-swap-timing/44673706#44673706", "title": "Windows 10 Desktop Window Manager swap timing?", "body": "<p>Although I was unable to find an answer to question 2 and 3, contacting the Nvidia support provided the answer to question 1.</p>\n\n<p>Nvidia statet that an application rendered in a full screen context cannot access the DWM. Only applications rendered in windowed mode are handled by it.</p>\n\n<p>Warning: They also said that this was by design. Considering the fact that Microsoft attempts to force users/programmers to use the DWM there is no guarantee on how long this design decision will remain unchanged. </p>\n\n<p>Original mail from Nvidia: </p>\n\n<blockquote>\n  <p>[...]</p>\n  \n  <p>After checking your request with our specialized department, please note that when a game or anything is in Full Screen you cannot access this Windows Feature [annot.: DWM]. This is by design. It needs to be windowed mode if you want to access this feature.</p>\n  \n  <p>[...]</p>\n</blockquote>\n"}], "owner": {"reputation": 287, "user_id": 1876596, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a3f42c3bcca53c0d4428b682c5a9b27?s=128&d=identicon&r=PG", "display_name": "VoodooCode", "link": "https://stackoverflow.com/users/1876596/voodoocode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 44673706, "answer_count": 1, "score": 1, "last_activity_date": 1498041307, "creation_date": 1496239641, "last_edit_date": 1496239908, "question_id": 44287021, "link": "https://stackoverflow.com/questions/44287021/windows-10-desktop-window-manager-swap-timing", "title": "Windows 10 Desktop Window Manager swap timing?", "body": "<p>I have a few questions regarding the Desktop Window Manager (aka DWM) in Windows 10:</p>\n\n<p>Background: For an OpenGL application I wrote in C++ I need precise timing regarding the swap of the front and back buffers in OpenGL and the realization of these commands on the OS level. (I know Windows 10, or Windows in general, is a bad choice for this, but there are other limiting factors). </p>\n\n<ul>\n<li><p>Question 1: My internet research showed that the DWM manages a third buffer (making visualization a triple buffered system) which I cannot control and therefore creates an unpredictable delay. The investigation also showed that this can be bypassed by opening an OpenGL context in fullscreen mode. Is this information correct?</p></li>\n<li><p>Question 2: Is this delay caused by the fact that the OS randomly instructs the DWM to copy the buffer?</p></li>\n<li><p>Question 3: How long is the actual delay, my investigation showed numbers between &lt; 1ms and up to 50ms, but there was no trustworthy source.</p></li>\n</ul>\n\n<p>In fact, besides for the single fact, the mere existence of the delay, there was no trustworthy source for any of the other assumptions which I was able to find on the internet. Therefore I kindly ask anyone having an answer to this questions to include if this possible, a reference to their statement.</p>\n\n<p>I don't know if this is important, but I'm using OpenGL via GLFW and GLEW. </p>\n"}, {"tags": ["c++", "performance", "gcc", "assembly", "optimization"], "comments": [{"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1496239788, "post_id": 44286987, "comment_id": 75580864, "body": "You may be interested in this: <a href=\"http://www.catb.org/esr/structure-packing/\" rel=\"nofollow noreferrer\">catb.org/esr/structure-packing</a>, but your question is too broad."}, {"owner": {"reputation": 2059, "user_id": 7949696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206392642867400/picture?type=large", "display_name": "James Poag", "link": "https://stackoverflow.com/users/7949696/james-poag"}, "edited": false, "score": 0, "creation_date": 1496239809, "post_id": 44286987, "comment_id": 75580880, "body": "Maybe the question should be &quot;When should we align our data and when does the compiler do it for us?&quot;"}, {"owner": {"reputation": 1156, "user_id": 3738040, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zKsuP.png?s=128&g=1", "display_name": "dlavila", "link": "https://stackoverflow.com/users/3738040/dlavila"}, "edited": false, "score": 0, "creation_date": 1496240029, "post_id": 44286987, "comment_id": 75581046, "body": "what about alignment to use SIMD instructions? or when you want to convert between types in other type of processors (MIPS will break if you try to store in a non aligned address)"}, {"owner": {"reputation": 13335, "user_id": 1107474, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1ed1a5311fa24392fb6c5f90f680c8dd?s=128&d=identicon&r=PG", "display_name": "mezamorphic", "link": "https://stackoverflow.com/users/1107474/mezamorphic"}, "reply_to_user": {"reputation": 2059, "user_id": 7949696, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206392642867400/picture?type=large", "display_name": "James Poag", "link": "https://stackoverflow.com/users/7949696/james-poag"}, "edited": false, "score": 0, "creation_date": 1496240707, "post_id": 44286987, "comment_id": 75581553, "body": "@JamesPoag I will change it to that"}, {"owner": {"reputation": 13335, "user_id": 1107474, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1ed1a5311fa24392fb6c5f90f680c8dd?s=128&d=identicon&r=PG", "display_name": "mezamorphic", "link": "https://stackoverflow.com/users/1107474/mezamorphic"}, "reply_to_user": {"reputation": 1156, "user_id": 3738040, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zKsuP.png?s=128&g=1", "display_name": "dlavila", "link": "https://stackoverflow.com/users/3738040/dlavila"}, "edited": false, "score": 0, "creation_date": 1496240746, "post_id": 44286987, "comment_id": 75581588, "body": "@dlavila I was aware of that, but I&#39;m more interested in non-intrinsic usage."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1496253080, "post_id": 44286987, "comment_id": 75589644, "body": "whenever you use a pointer/struct across compile domains...which is...never.  The compiler should be doing what it can to keep things sane by default, esp for platforms that fault on alignment errors.   What do you see when you create structs with various length items ideally smaller first, does your compiler align them by using padding without any compiler specific direction?"}], "owner": {"reputation": 13335, "user_id": 1107474, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1ed1a5311fa24392fb6c5f90f680c8dd?s=128&d=identicon&r=PG", "display_name": "mezamorphic", "link": "https://stackoverflow.com/users/1107474/mezamorphic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 1, "closed_date": 1496252219, "answer_count": 0, "score": 3, "last_activity_date": 1496240719, "creation_date": 1496239540, "last_edit_date": 1496240719, "question_id": 44286987, "link": "https://stackoverflow.com/questions/44286987/when-should-we-align-our-data-and-when-does-the-compiler-do-it-for-us", "closed_reason": "Needs more focus", "title": "When should we align our data and when does the compiler do it for us?", "body": "<p>Alignment of data (and instructions) is still fairly critical to high performance computing, according to the Intel optimization manuals.</p>\n\n<p>I am aware we must align data ourselves to avoid false sharing (two threads accessing two variables within same cache line) because the compiler cannot possibly know our threading model. </p>\n\n<p>However, does GCC perform any other alignments/what alignments does it not do/what alignments must we do ourselves for performance?</p>\n"}, {"tags": ["c++", "r", "visual-studio", "rcpp"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1496240617, "post_id": 44286970, "comment_id": 75581484, "body": "Please see <a href=\"https://cloud.r-project.org/web/packages/Rcpp/vignettes/Rcpp-FAQ.pdf\" rel=\"nofollow noreferrer\">question 2.9 of the Rcpp FAQ</a>."}, {"owner": {"reputation": 3431, "user_id": 4444546, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/684601746/picture?type=large", "display_name": "ClementWalter", "link": "https://stackoverflow.com/users/4444546/clementwalter"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1496242001, "post_id": 44286970, "comment_id": 75582563, "body": "Thanks for pointing out. Indeed I am scared of installing RTools because of possible interference with the current c++ compiler. But so there is no such risk indeed ?"}], "owner": {"reputation": 3431, "user_id": 4444546, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/684601746/picture?type=large", "display_name": "ClementWalter", "link": "https://stackoverflow.com/users/4444546/clementwalter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "closed_date": 1496241208, "answer_count": 0, "score": 0, "last_activity_date": 1496239495, "creation_date": 1496239495, "question_id": 44286970, "link": "https://stackoverflow.com/questions/44286970/rcpp-on-windows-with-visual-studio", "closed_reason": "Duplicate", "title": "Rcpp on windows with Visual Studio", "body": "<p>I have Visual Studio 2015 on my windows 10 and I would like to use Rcpp for developping my own package.\nNow I get an error \"status 127\" which means, according to this <a href=\"https://stackoverflow.com/questions/37131083/install-package-on-windows-error-compilation-failed-for-package-cldr\">SO post</a>, that the C++ compiler is not found.\nI don't want to install RTools because I think I have already a C++ compiler since Visual studio can make it (<a href=\"https://stackoverflow.com/questions/9475159/where-is-the-c-compiler-located-on-disk-for-visual-c-2008-express\">see also</a>).</p>\n\n<p>Now my problem is : how to locate this compiler and how to point R onto it ? This <a href=\"https://stackoverflow.com/questions/1616983/building-r-packages-using-alternate-gcc\">post</a> should help me but I cannot figure out how to properly follow it.</p>\n\n<p>There may also be some good references <a href=\"https://cran.r-project.org/doc/manuals/R-admin.html#The-Windows-toolset\" rel=\"nofollow noreferrer\">here about R PATH</a> and <a href=\"https://msdn.microsoft.com/en-us/library/60k1461a.aspx\" rel=\"nofollow noreferrer\">here for C++ and Visual Studio</a>. I recognize I don't understand a lot of things about these config pages.</p>\n\n<p>thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 2, "creation_date": 1496238858, "post_id": 44286597, "comment_id": 75580165, "body": "compiler message is pretty straightforward..."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1496239080, "post_id": 44286597, "comment_id": 75580321, "body": "A function of the signature <code>void(*)(const Foo&amp;)</code> is <b>not</b> the same as <code>void(*)(Foo&amp;)</code>. Remember that you can overload a function solely on <i>cv</i> qualifications. Your function pointer <code>fnptr</code> says its function pointer type that will only point to functions to that takes a non-const <code>Foo&amp;</code> and return <code>void</code>. For example, you can pass <code>rvalues</code> to <code>const Foo&amp;</code>, but you can&#39;t to for the <code>Foo&amp;</code>. These constraints must be checked too on the function pointer."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1496239088, "post_id": 44286597, "comment_id": 75580330, "body": "A function accepting const Foo&amp; DOES accept Foo&amp; as argument, but saying that &quot;a method that takes a const Foo&amp; has the same signature as a method that accepts Foo&amp;&quot; is wrong (hence the compiler yelling at you)"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1496239287, "post_id": 44286597, "comment_id": 75580475, "body": "This is akin to saying <code>void (*f)(char)</code> should be able to point to <code>void (int)</code>, which is not the case. That there are implicit conversions between types does not mean they are the same"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1496239754, "post_id": 44286597, "comment_id": 75580839, "body": "even your argumentation about taking the same arguments was valid, not every parameter that you can pass to a <code>void foo(const T&amp;)</code> can be passed to a <code>void foo(T&amp;)</code>"}, {"owner": {"reputation": 538, "user_id": 6690542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4ebea93b3dc2c3b9a4af781c0d751ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf R. Karag&#246;z", "link": "https://stackoverflow.com/users/6690542/yusuf-r-karag%c3%b6z"}, "edited": false, "score": 0, "creation_date": 1496246227, "post_id": 44286597, "comment_id": 75585590, "body": "What you also need to ask yourself is; <code>typedef void(*fnptr)(Foo *foo);</code> will work with <code>void myfoo(Foo *const foo)</code>, but not with <code>void myfoo(const Foo *foo)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 2, "creation_date": 1496239693, "post_id": 44286960, "comment_id": 75580793, "body": "Which justify why you can&#39;t convert from &quot;void myfoo(Foo&amp;)&quot; to &quot;void myfoo(const Foo&amp;)&quot; but the question is about the other way around."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1496239948, "post_id": 44286960, "comment_id": 75580982, "body": "afaik even if <code>void Foo(T)</code> and <code>void Bar(U)</code> can be passed the same types taking into account possible conversions, pointers to them cannot be &quot;converted&quot; unless <code>U==T</code>"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 0, "creation_date": 1496240056, "post_id": 44286960, "comment_id": 75581064, "body": "@deadalnix, its the same reason. Think about it. Why should a function pointer, who promises to only point to <code>void(*)(const Foo&amp;)</code> (&quot;I promise not to modify the argument&quot;) later bind to a function <code>void(*)(Foo&amp;)</code> that could modify the argument?"}, {"owner": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 1, "creation_date": 1496240515, "post_id": 44286960, "comment_id": 75581401, "body": "@WhiZTiM Still thinking about it the wrong way around. We promise to point to a <code>void(*)(Foo&amp;)</code> (&quot;I may modify - but do not have to&quot;) and later bind to a <code>void(*)(const Foo&amp;)</code> (&quot;I won&#39;t modify, which is a subset of I may modify&quot;)"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 0, "creation_date": 1496240565, "post_id": 44286960, "comment_id": 75581441, "body": "@deadalnix, Ok. Please clarify... possibly with a code example"}, {"owner": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 0, "creation_date": 1496240702, "post_id": 44286960, "comment_id": 75581549, "body": "@WhiZTiM The code example is as above. You keep justifying that one cannot convert <code>void(*)(Foo&amp;)</code> into a <code>void(*)(const Foo&amp;)</code> . This is NOT the question. The question is why one cannot convert <code>void(*)(const Foo&amp;)</code> into <code>void(*)(Foo&amp;)</code> ."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 0, "creation_date": 1496242051, "post_id": 44286960, "comment_id": 75582605, "body": "@deadalnix, <i>&quot;The question is why one cannot convert <code>void(*)(const Foo&amp;)</code> into <code>void(*)(Foo&amp;)</code>&quot;</i> - because a function of <code>void(*)(Foo&amp;)</code> can modify its argument! While <code>void(*)(const Foo&amp;)</code> doesn&#39;t... You break that invariant, and the world will literally  break"}, {"owner": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 1, "creation_date": 1496242388, "post_id": 44286960, "comment_id": 75582860, "body": "<code>void(*)(Foo&amp;)</code> CAN modify its argument. This is why you can&#39;t convert <code>void(*)(Foo&amp;)</code> to <code>void(*)(const Foo&amp;)</code> . We are interested in the reverse case here."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 0, "creation_date": 1496242539, "post_id": 44286960, "comment_id": 75582988, "body": "@deadalnix, <i>&quot;(&quot;I won&#39;t modify, which is a subset of I may modify&quot;)&quot;</i> - This is where you are missing it.<code>void(*)(Foo&amp;)</code> is <b>not</b> a subset of <code>void(*)(const Foo&amp;)</code>."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "edited": false, "score": 0, "creation_date": 1496242554, "post_id": 44286960, "comment_id": 75583002, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/145565/discussion-between-whiztim-and-deadalnix\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 2, "last_activity_date": 1496240404, "last_edit_date": 1496240404, "creation_date": 1496239470, "answer_id": 44286960, "question_id": 44286597, "link": "https://stackoverflow.com/questions/44286597/function-pointer-reference-parameter-conversion-to-const/44286960#44286960", "title": "Function pointer reference parameter conversion to const", "body": "<p>A function of the signature <code>void(*)(const Foo&amp;)</code> is <strong>not</strong> the same as <code>void(*)(Foo&amp;)</code>. </p>\n\n<p>For example, you can pass <code>rvalues</code> to <code>void myfoo(const Foo&amp;)</code>, but you can't to for the <code>void myfoo(Foo&amp;)</code>. As, you know, such constraint on what you can pass are checked at compile-time for functions at the call site.</p>\n\n<p>For the sake of sanity, those constraint are also checked on function pointers.</p>\n\n<p>Example:</p>\n\n<pre><code>class Foo{};\n\nusing FooPtr = void(*)(Foo&amp;);\nusing ConstFooPtr = void(*)(const Foo&amp;);\n\nvoid fooNonConst(Foo&amp;) { }\nvoid fooConst(const Foo&amp;) { }\n\n\nint main() {\n    FooPtr ptr1 = &amp;fooNonConst;\n    ConstFooPtr ptr2 = &amp;fooConst;\n\n    ptr1(Foo{});   //Not OK\n    ptr2(Foo{});   //Ok\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 538, "user_id": 6690542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4ebea93b3dc2c3b9a4af781c0d751ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf R. Karag&#246;z", "link": "https://stackoverflow.com/users/6690542/yusuf-r-karag%c3%b6z"}, "edited": false, "score": 0, "creation_date": 1496246048, "post_id": 44288400, "comment_id": 75585472, "body": "as a solution would be <code>std::function&lt;void(Foo &amp;foo)&gt;</code> instead of wrapper. std::function makes the conversion"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1496243297, "creation_date": 1496243297, "answer_id": 44288400, "question_id": 44286597, "link": "https://stackoverflow.com/questions/44286597/function-pointer-reference-parameter-conversion-to-const/44288400#44288400", "title": "Function pointer reference parameter conversion to const", "body": "<p>The reason is simply <em>because the standard mandates it</em>. Why do we drive on the right in US and on the left in UK? Ok kind of joking, but not that much. There are quite a lot of corner cases like that, where we find ourselves thinking but why didn't they allow this or that? And sometimes what was disallowed in a version of the standard become allowed in a next one. For example in C++98, only static const integral members could be initialized in a class declaration, all other members should be initialized in a constructor. C++11 allows initialization of members in a class declaration.</p>\n\n<p>But here what you ask for would probably make type safety controls harder for compilers, while they are already quite complex!</p>\n\n<p>So the way to go here for a conformant program in to use a wrapper around <code>myfoo</code>:</p>\n\n<pre><code>void myfoo_wrap(Foo &amp;foo) {\n    myfoo(foo);\n}\n</code></pre>\n\n<p>I must admit that this may look stupid, but the good news is that an optimizing compiler should be able to remove it from the executable. That means that is is lite in source and not noticiable in executable: I'm afraid that this rule will not be changed soon in standard...</p>\n"}], "owner": {"reputation": 2117, "user_id": 672906, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0bc624bb19867fc4ff397ffec40b1adf?s=128&d=identicon&r=PG", "display_name": "deadalnix", "link": "https://stackoverflow.com/users/672906/deadalnix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1496243297, "creation_date": 1496238561, "question_id": 44286597, "link": "https://stackoverflow.com/questions/44286597/function-pointer-reference-parameter-conversion-to-const", "title": "Function pointer reference parameter conversion to const", "body": "<p>The sample code:</p>\n\n<pre><code>class Foo;\ntypedef void (*fnptr)(Foo &amp;foo);\nfnptr gFn;\nvoid myfoo(const Foo &amp;foo) {}\n\nint main() {\n    gFn = &amp;myfoo;\n}\n</code></pre>\n\n<p>Fails with the following error using clang:</p>\n\n<pre><code>main.cpp:9:9: error: assigning to 'fnptr' (aka 'void (*)(Foo &amp;)') from incompatible type\n      'void (*)(const Foo &amp;)': type mismatch at 1st parameter ('Foo &amp;' vs 'const Foo &amp;')\n    gFn = &amp;myfoo;\n        ^ ~~~~~~\n1 error generated.\n</code></pre>\n\n<p>GCC also fails with a similar error. Passing a pointer instead of a reference also </p>\n\n<p>I don't really understand why this is an error. A function accepting a const Foo&amp; also accept a Foo&amp; as argument and, in both cases, a pointer is passed down. I would like to understand why this is an error.</p>\n"}, {"tags": ["c++", "ubuntu", "cmake", "liblas"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496239237, "post_id": 44286572, "comment_id": 75580443, "body": "You ask what&#39;s wrong in you <code>CMakeLists.txt</code> but don&#39;t provide it in the question post. I guess you forgot about <b>linking</b> with <code>liblas</code> library (specifying <i>include directories</i> is <b>not</b> a <i>linking</i>)."}, {"owner": {"reputation": 13, "user_id": 7180042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a3dafc4b1180eb9136be636c3377bd2d?s=128&d=identicon&r=PG&f=1", "display_name": "Sven0", "link": "https://stackoverflow.com/users/7180042/sven0"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496302603, "post_id": 44286572, "comment_id": 75607855, "body": "as mentioned in my post, at this stage there is no cmake project but i thought it may be easier than using the QT-pro method. I only added this line to my pro-file which does not seem to work: INCLUDEPATH += /usr/local/include/liblas/"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496304502, "post_id": 44286572, "comment_id": 75609137, "body": "Well, the same question as duplicate, but for QT Creator: <a href=\"https://stackoverflow.com/questions/15881913/how-to-link-opencv-in-qtcreator-and-use-qt-library\" title=\"how to link opencv in qtcreator and use qt library\">stackoverflow.com/questions/15881913/&hellip;</a>. BTW, if your problem is with QT creator, why you note CMake and even use its tag (<code>cmake</code>)? There is perfect tag <code>qt-creator</code> for QT Creator questions."}], "owner": {"reputation": 13, "user_id": 7180042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a3dafc4b1180eb9136be636c3377bd2d?s=128&d=identicon&r=PG&f=1", "display_name": "Sven0", "link": "https://stackoverflow.com/users/7180042/sven0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "closed_date": 1496249049, "answer_count": 0, "score": 0, "last_activity_date": 1496325033, "creation_date": 1496238483, "last_edit_date": 1496325033, "question_id": 44286572, "link": "https://stackoverflow.com/questions/44286572/undefined-reference-when-compiling-a-liblas-project-c-code-for-a-las-to-pcd-c", "closed_reason": "Duplicate", "title": "undefined reference when compiling a libLAS project: c++ code for a LAS to PCD converter", "body": "<p>I'm trying to write a simple file converter, to convert 3d point clouds from LAS to PCD file formats. I am using Ubuntu 16.04.\nI have successfully compiled and installed PCL 1.8 and liblas 1.8.1. I have tested this by compiling and running a simple pcd-tutorial and have executed lasinfo to output the information of a given las file.</p>\n\n<p>I now want to compile one of the liblas tutorials but it fails in the first line in which I use any of the liblas functions. I suspect it has something to do with the linking of the library but I have hardly any experience with this. This is the error message I get:</p>\n\n<p>/home/icedoggy/Documents/QtConsoleTestApp/TestApp/main.cpp:21: error: undefined reference to `liblas::Reader::Reader(std::istream&amp;)'\nand i get this for all otherlines containing liblas:: ...</p>\n\n<p>The path to the include dir seems to be correct and the code-completion works when i type: liblas:: <em>list of function appears</em>.</p>\n\n<p>Update/Edit:\nThe updated code now contains pcl and liblas headers and uses these libraries. A las-file is read in and saved as a pcd file. This may be helpful to others, therefore I post it here. The problem I had was, however, not realted to the source code but to the way the liblas library was included into the QT-project. I have now changed to a cmake project and the CMakeLists.txt is provided below as well.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;pcl/io/pcd_io.h&gt;\n#include &lt;pcl/point_types.h&gt;\n\n#include &lt;liblas/liblas.hpp&gt;\n#include &lt;fstream&gt;  // std::ifstream\n\nint  main (int argc, char** argv){\n\npcl::PointCloud&lt;pcl::PointXYZI&gt; cloud;\n\n  // reading data from LAS file:\n  // 1) create a file stream object to access the file\n\nstd::ifstream ifs;\nifs.open(\"~/DATASETS/20140320-1-1.las\", std::ios::in |     std::ios::binary);\n\n  liblas::ReaderFactory f;  \n  liblas::Reader reader = f.CreateWithStream(ifs);\n\n  liblas::Header const&amp; header = reader.GetHeader();\n\n  long int nPts = header.GetPointRecordsCount();\n  std::cout &lt;&lt; \"Compressed: \" &lt;&lt; (header.Compressed() == true) ? \"true\\n\":\"false\\n\";\n  std::cout &lt;&lt; \"\\nSignature: \" &lt;&lt; header.GetFileSignature() &lt;&lt; '\\n';\n  std::cout &lt;&lt; \"Points count: \" &lt;&lt; nPts &lt;&lt; '\\n';\n\n\n\n  // Fill in the PCD cloud data\n  cloud.width    = nPts;\n  cloud.height   = 1;\n  cloud.is_dense = true;\n  cloud.points.resize (cloud.width * cloud.height);\n\n  while (reader.ReadNextPoint()){\n        liblas::Point const&amp; p = reader.GetPoint();\n\n    cloud.points[i].x = p.GetX();\n    cloud.points[i].y = p.GetY();\n    cloud.points[i].z = p.GetZ();\n    cloud.points[i].intensity = p.GetIntensity();\n\n}\n\n// save data to pcd file in ascii format.\n  pcl::io::savePCDFileASCII (\"output_in_pcdformat.pcd\", cloud);\n  std::cerr &lt;&lt; \"Saved \" &lt;&lt; cloud.points.size () &lt;&lt; \" data points .\" &lt;&lt; std::endl;\n\n   return (0);\n}\n</code></pre>\n\n<p>Resources I have used for the code above are: <a href=\"https://www.liblas.org/tutorial/cpp.html\" rel=\"nofollow noreferrer\">https://www.liblas.org/tutorial/cpp.html</a>\nand <a href=\"http://pointclouds.org/documentation/tutorials/writing_pcd.php\" rel=\"nofollow noreferrer\">http://pointclouds.org/documentation/tutorials/writing_pcd.php</a> as well as <a href=\"https://cmake.org/cmake-tutorial/\" rel=\"nofollow noreferrer\">https://cmake.org/cmake-tutorial/</a> for cmake (see below).   </p>\n\n<p>Okay as mentioned by some comments I have adapted the post. I did a bit of reading on cmake as I don't like to get into QT-creator specifics as most of my other projects are also cmake projects. The problem that I had was that, I did not link the libLAS libraries in my qt-project (or the way I had tried to do that did not work). This is how I solved the problem with cmake. Lines with ** are the one related to my problem.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8 FATAL_ERROR)\nproject(pcd_write)\nfind_package(PCL 1.7 REQUIRED)\n**find_package(libLAS REQUIRED)**\ninclude_directories(${PCL_INCLUDE_DIRS})\nlink_directories(${PCL_LIBRARY_DIRS})\nadd_definitions(${PCL_DEFINITIONS})\nadd_executable (pcd_write pcd_write.cpp)\n**target_link_libraries (pcd_write ${PCL_LIBRARIES} ${libLAS_LIBRARIES})**\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "time-complexity", "complexity-theory"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1496238947, "post_id": 44286556, "comment_id": 75580245, "body": "It doesn&#39;t make sense to talk about &quot;time complexity&quot; without a machine model, a cost model, and a precise definition of <i>what</i> exactly it is that you are counting and <i>what</i> exactly you consider to be the &quot;input size&quot;. So, what is your machine model? Is it a Turing Machine? Lambda Calculus? A RAM? What are you counting? Assignments? Equality tests? Lambda-Reductions? What is your cost model? Is <code>&lt;</code> constant? Is it linear in the number of digits?"}, {"owner": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1496242824, "post_id": 44286556, "comment_id": 75583205, "body": "@J&#246;rgWMittag Time complexity is a fairly universally applicable concept that only tells you how things scale, thus is doesn&#39;t care about cost models, what you&#39;re measuring tends to be everything, input size can be defined in whichever way makes the most sense for the problem at hand (<code>d.length</code> in this case) and the machine model seems somewhat irrelevant if you assume everything executes sequentially (unless specified otherwise). &quot;The time complexity of algorithm X is O(Y)&quot; is something I&#39;ve seen countless times from countless sources without any of the details you mentioned."}, {"owner": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1496242922, "post_id": 44286556, "comment_id": 75583272, "body": "@J&#246;rgWMittag See also <a href=\"https://stackoverflow.com/questions/11032015/how-to-find-time-complexity-of-an-algorithm\">How to find time complexity of an algorithm</a> and <a href=\"https://stackoverflow.com/questions/487258/what-is-a-plain-english-explanation-of-big-o-notation\">What is a plain English explanation of \u201cBig O\u201d notation?</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1496247578, "post_id": 44286556, "comment_id": 75586415, "body": "@Dukeling: copying a list on a RAM is O(n), on a Turing Machine, it is O(n&#178;). The lower bound for the worst-case time complexity of a comparison-based sort on a RAM is O(n log n) comparisons and swaps, but on a different machine model (e.g. where memory is linear, not random access), it is O(n&#178;). So, yes, the machine model <i>does</i> matter. What also matters and is completely missing from the question is whether we are talking about worst-case, best-case, average-case, or amortized worst-case. Also, is the OP looking for the exact complexity function or is an approximation good enough? If yes, \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1496247603, "post_id": 44286556, "comment_id": 75586434, "body": "\u2026 how good should the approximation be? Is Bachmann-Landau-Notation good enough or should it be more precise?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1496248002, "post_id": 44286556, "comment_id": 75586667, "body": "If you look at the C++ specification, you can see how complexities are specified there, e.g. &quot;O(N logN) comparisons, where N = last - first.&quot; Note how it specifically names <i>what</i> it is counting (&quot;comparisons&quot;) and it also specifically says what &quot;N&quot; is. &quot;At most N log2(N) comparisons, where N = last - first, but only N log N comparisons if there is enough extra memory.&quot; Here you can see that the bound is specified <i>precisely</i>, without the use of approximations such as Bachmann-Landau-Notation. &quot;Approximately (last - first) * log(min(last - first, result_last - result_first)) comparisons&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "is_accepted": true, "score": 5, "last_activity_date": 1496238527, "creation_date": 1496238527, "answer_id": 44286587, "question_id": 44286556, "link": "https://stackoverflow.com/questions/44286556/complexity-of-my-algorithm/44286587#44286587", "title": "Complexity of my Algorithm", "body": "<p>This is just a one loop program with constant time execution in each iteration. Time complexity is linear - <code>O(n)</code> where <code>n</code> is the array length.</p>\n"}], "owner": {"reputation": 943, "user_id": 7412160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f58addaeb4d4c2530a91372f12388f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Warry S.", "link": "https://stackoverflow.com/users/7412160/warry-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1496242182, "accepted_answer_id": 44286587, "answer_count": 1, "score": 0, "last_activity_date": 1496240921, "creation_date": 1496238429, "last_edit_date": 1496240921, "question_id": 44286556, "link": "https://stackoverflow.com/questions/44286556/complexity-of-my-algorithm", "closed_reason": "Duplicate", "title": "Complexity of my Algorithm", "body": "<p>The Question: Which Complexity has my function? and How to find time complexity of my algorithm?</p>\n\n<p>The function checks if a given int array is sorted.</p>\n\n<p>my Code:</p>\n\n<pre><code>public static boolean isSorted(double d[]){\nboolean sortedAscending = true;\nboolean sortedDescending = true;\n\nboolean bool = false;\nfor (int i = 0; i &lt; d.length-1; i++) {\n    if(d[i] &gt; d[i+1] &amp;&amp; sortedAscending){\n        sortedAscending = false;\n        if(bool){\n            break;\n        }\n        bool = true;\n    }\n    else if(d[i] &lt; d[i+1]&amp;&amp; sortedDescending){\n        sortedDescending = false;\n        if(bool){\n            break;\n        }\n        bool = true;\n    }\n}\nreturn sortedAscending || sortedDescending;\n}\n</code></pre>\n"}, {"tags": ["c++", "gdb", "expression"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1496238308, "post_id": 44286394, "comment_id": 75579738, "body": "It&#39;s unclear to me what kind of answer you hope to get.  Gdb is able to analyze C and C++ expressions in the context of the program being debugged, with the help of the debug information contained in the binary, and possibly also with use of the source code when that is available.  But you already knew that, and details would be much to lengthy for this venue."}, {"owner": {"reputation": 2171, "user_id": 684838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c4631e05a2631b2a7ebec47ee1ac61a?s=128&d=identicon&r=PG", "display_name": "llk", "link": "https://stackoverflow.com/users/684838/llk"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1496238625, "post_id": 44286394, "comment_id": 75579992, "body": "@JohnBollinger I figured I would have to &quot;use the source&quot;, but what I am wondering is how they are evaluating the expressions. Are they compiling the code inline as I type it and running it? Do they have a framework to evaluate C++ on the fly in the debugging context? In essence, I want to reproduce this in a debugger I am writing to evaluate expressions at breakpoints which is why I am curious how GDB does it. Thanks!"}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1496239068, "post_id": 44286394, "comment_id": 75580314, "body": "Your question seems to be more C++ focused. I recommend you remove the C tag."}, {"owner": {"reputation": 691, "user_id": 6452523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7396ca4cc32e7c4e2660e3286a79d44?s=128&d=identicon&r=PG", "display_name": "Keyu Gan", "link": "https://stackoverflow.com/users/6452523/keyu-gan"}, "edited": false, "score": 0, "creation_date": 1496239691, "post_id": 44286394, "comment_id": 75580790, "body": "I&#39;ve investigated a bit into GDB&#39;s source. Hope it will help you."}], "answers": [{"comments": [{"owner": {"reputation": 2171, "user_id": 684838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c4631e05a2631b2a7ebec47ee1ac61a?s=128&d=identicon&r=PG", "display_name": "llk", "link": "https://stackoverflow.com/users/684838/llk"}, "edited": false, "score": 0, "creation_date": 1496239659, "post_id": 44286700, "comment_id": 75580751, "body": "So GDB does not compile anything, rather it runs sections of the existing code to evaluate the expressions? Is there a library GDB uses to do this or is it completely coded in a stand-alone manner?"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "reply_to_user": {"reputation": 2171, "user_id": 684838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c4631e05a2631b2a7ebec47ee1ac61a?s=128&d=identicon&r=PG", "display_name": "llk", "link": "https://stackoverflow.com/users/684838/llk"}, "edited": false, "score": 1, "creation_date": 1496241270, "post_id": 44286700, "comment_id": 75581991, "body": "Yes, in the example you posted. But it also can compile and inject code, see <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Compiling-and-Injecting-Code.html#Compiling-and-Injecting-Code\" rel=\"nofollow noreferrer\">sourceware.org/gdb/onlinedocs/gdb/&hellip;</a>, though I have not used this feature."}], "tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": false, "score": 9, "last_activity_date": 1496238823, "creation_date": 1496238823, "answer_id": 44286700, "question_id": 44286394, "link": "https://stackoverflow.com/questions/44286394/how-does-gdb-evaluate-c-expressions-at-runtime/44286700#44286700", "title": "How does GDB evaluate C++ expressions at runtime", "body": "<blockquote>\n  <p>which allows me to type things like print v.at(4);</p>\n</blockquote>\n\n<p>gdb can call functions compiled into the binary. This is exactly what happens here. gdb calls <code>std::vector</code> member function <code>at()</code> and prints the result for you, see <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Calling.html\" rel=\"noreferrer\">documentation</a>.</p>\n\n<p>Also note that this is possible because you are using <code>v.at(0)</code> in your code. If you remove this part of code, <code>v.at()</code> would not get instantiated and will not be available in the resulting binary so that gdb could not call it.</p>\n"}, {"comments": [{"owner": {"reputation": 251717, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1576862113, "post_id": 44287014, "comment_id": 105044026, "body": "Worth mentioning that GDB also has the <code>compile code</code> command, which can compile and inject code at runtime, see e.g.: <a href=\"https://stackoverflow.com/questions/5480868/how-to-call-assembly-in-gdb/31709579#31709579\" title=\"how to call assembly in gdb\">stackoverflow.com/questions/5480868/how-to-call-assembly-in-&zwnj;&#8203;gdb/&hellip;</a>"}], "tags": [], "owner": {"reputation": 691, "user_id": 6452523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7396ca4cc32e7c4e2660e3286a79d44?s=128&d=identicon&r=PG", "display_name": "Keyu Gan", "link": "https://stackoverflow.com/users/6452523/keyu-gan"}, "is_accepted": true, "score": 10, "last_activity_date": 1564645026, "last_edit_date": 1564645026, "creation_date": 1496239620, "answer_id": 44287014, "question_id": 44286394, "link": "https://stackoverflow.com/questions/44286394/how-does-gdb-evaluate-c-expressions-at-runtime/44287014#44287014", "title": "How does GDB evaluate C++ expressions at runtime", "body": "<p><strong>Short Answer:</strong> It does not compile code.</p>\n\n<p><strong>Long Answer:</strong></p>\n\n<ol>\n<li>You call <code>print</code> command and the procedure occurs in <code>printcmd.c</code></li>\n<li>It calls <code>evaluate_expression</code>, defined in <code>eval.c</code>, which evaluates an expression by reading target memory and calculating it inside gdb for standard operators, otherwise use <code>call_function_by_hand</code>.</li>\n<li><code>call_function_by_hand</code> is defined in <code>infcall.c</code>. When called, the procedure halts target execution (sometimes doesn't, so it is possible to crash a multithreaded program with this feature).</li>\n<li>Inject code into the program being debug.</li>\n<li>Retrieve the result by reading memory and unpause it if necessary.</li>\n</ol>\n\n<p>You may focus on the code of <code>call_function_by_hand</code> for better understanding.</p>\n\n<p>Note: <code>compile</code> is a different thing from <code>print</code>/<code>call</code>.</p>\n"}], "owner": {"reputation": 2171, "user_id": 684838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c4631e05a2631b2a7ebec47ee1ac61a?s=128&d=identicon&r=PG", "display_name": "llk", "link": "https://stackoverflow.com/users/684838/llk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2247, "favorite_count": 0, "accepted_answer_id": 44287014, "answer_count": 2, "score": 10, "last_activity_date": 1564645026, "creation_date": 1496238018, "last_edit_date": 1496239446, "question_id": 44286394, "link": "https://stackoverflow.com/questions/44286394/how-does-gdb-evaluate-c-expressions-at-runtime", "title": "How does GDB evaluate C++ expressions at runtime", "body": "<p>When debugging, I recently noticed that GDB has the ability to evaluate \"complex\" expressions while debugging a program, and I am wondering how it does this. For example, with the following code:</p>\n\n<pre><code>int main() {\n    std::vector&lt;int&gt; v = {1, 2, 3};\n    int k = 0;\n    std::cin &gt;&gt; k;\n    v.push_back(k);\n    return v.at(0);\n}\n</code></pre>\n\n<p>I am able to compile the program <code>g++ -g myprogram.cpp</code> and debug it in GDB which allows me to type things like <code>print v.at(4);</code> (which prints the correct value after <code>k</code> is dynamically entered) and <code>print v.at(2) == 3</code> which evaluates to true.</p>\n\n<p>I am wondering how GDB does this. <a href=\"https://stackoverflow.com/questions/13353437/why-does-gdb-evaluate-floating-point-arithmetic-differently-from-c\">This SO question</a> hints that it is something \"compiled in memory\" but does not elaborate further, so I am wondering does it use some sort of JIT to make this all work or something else? Are they compiling the code inline as I type it and running it? Do they have a framework to evaluate C++ on the fly in the debugging context? In essence, I want to reproduce this in a debugger I am writing to evaluate expressions at breakpoints which is why I am curious how GDB does it. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1496238326, "post_id": 44286345, "comment_id": 75579751, "body": "<code>lcount</code> is a global variable that is also passed around by reference through all the functions. At this point, it doesn&#39;t need to be global. Additionally, you are using the same name for the global variable and for the references to that variable. It would clear up that confusing bit too."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496238136, "post_id": 44286389, "comment_id": 75579627, "body": "The &quot;100&quot; would it still work if I used the variable lcount?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "edited": false, "score": 0, "creation_date": 1496238202, "post_id": 44286389, "comment_id": 75579663, "body": "Yes, you can invoke <code>countTotal</code> with any <code>int&amp;</code> inside the body of the lambda. <code>100</code> wouldn&#39;t actually work because it&#39;s an rvalue - I fixed my answer."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1496238234, "post_id": 44286389, "comment_id": 75579688, "body": "Or <code>auto r = async(launch::async, countTotal, std::ref(lcount));</code>"}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1496238295, "post_id": 44286389, "comment_id": 75579726, "body": "@Vittorio Would this also work if we wanted to keep lcount? auto r = async(launch::async, [&amp;lcount]{ countTotal(lcount); });"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1496238432, "post_id": 44286389, "comment_id": 75579833, "body": "@synchronizer: <code>lcount</code> is global, I don&#39;t think it needs to be captured."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1496238543, "post_id": 44286389, "comment_id": 75579927, "body": "Ah okay. It probably shouldn&#39;t be global though."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1496238390, "last_edit_date": 1496238390, "creation_date": 1496238006, "answer_id": 44286389, "question_id": 44286345, "link": "https://stackoverflow.com/questions/44286345/no-instance-of-overload-function-async-matches-the-argument-list/44286389#44286389", "title": "No Instance of Overload Function &quot;async&quot; Matches the argument list", "body": "<p>The line</p>\n\n<pre><code>auto r = async(launch::async, countTotal(lcount));\n</code></pre>\n\n<p>doesn't do what you think it does. It immediately invokes and evaluates <code>countTotal(lcount)</code>, which returns <code>void</code>. The code is therefore invalid.</p>\n\n<hr>\n\n<p>Look at the <a href=\"http://en.cppreference.com/w/cpp/thread/async\" rel=\"nofollow noreferrer\">documentation for <code>std::async</code></a>. It takes a <a href=\"http://en.cppreference.com/w/cpp/concept/Callable\" rel=\"nofollow noreferrer\"><code>Callable</code></a> object. The easiest way to produce a <code>Callable</code> for <code>countTotal</code> and to defer execution is using a lambda:</p>\n\n<pre><code>auto r = async(launch::async, []{ countTotal(lcount); });\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7431658, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10210943461199680/picture?type=large", "display_name": "Kai Jones", "link": "https://stackoverflow.com/users/7431658/kai-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2695, "favorite_count": 0, "accepted_answer_id": 44286389, "answer_count": 1, "score": 1, "last_activity_date": 1496238390, "creation_date": 1496237891, "question_id": 44286345, "link": "https://stackoverflow.com/questions/44286345/no-instance-of-overload-function-async-matches-the-argument-list", "title": "No Instance of Overload Function &quot;async&quot; Matches the argument list", "body": "<p>I am trying to use the async function to run multiple processes on a large csv file at once to avoid long wait times for the user however I am getting the error:</p>\n\n<pre><code>no instance of overloaded function \"async\" matches the argument list\n</code></pre>\n\n<p>I have googled around and not found anything that fixed it and am out of ideas and as I am quite new to coding C++ any help would be greatly appreciated! I have included all my code below.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;future&gt;\nusing namespace std;\n\nstring token;\nint lcount = 0;\nvoid countTotal(int &amp;lcount);\n\nvoid menu()\n{\n    int menu_choice;\n\n    //Creates the menu\n    cout &lt;&lt; \"Main Menu:\\n \\n\";\n    cout &lt;&lt; \"1. Total number of tweets \\n\";\n\n    //Waits for the user input\n    cout &lt;&lt; \"\\nPlease choose an option: \";\n    cin &gt;&gt; menu_choice;\n\n    //If stack to execute the needed functionality for the input\n    if (menu_choice == 1) {\n        countPrint(lcount);\n    } else { //Validation and invalid entry catcher\n        cout &lt;&lt; \"\\nPlease enter a valid option\\n\";\n        system(\"Pause\");\n        system(\"cls\");\n        menu();\n    }\n}\n\nvoid countTotal(int &amp;lcount)\n{\n    ifstream fin;\n    fin.open(\"sampleTweets.csv\");\n\n    string line;\n    while (getline(fin, line)) {\n        ++lcount;\n    }\n\n    fin.close();\n    return;\n}\n\nvoid countPrint(int &amp;lcount)\n{\n    cout &lt;&lt; \"\\nThe total amount of tweets in the file is: \" &lt;&lt; lcount;\n\n    return;\n}\n\n\nint main()\n{\n    auto r = async(launch::async, countTotal(lcount));\n    menu(); //Starts the menu creation\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "makefile", "g++", "ubuntu-14.04", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1496237865, "post_id": 44286265, "comment_id": 75579421, "body": "We probably need to see what command-line was generated for <code>@$(CC) -MMD -MP -MF $(@:.o=.d) -c -I$(ODIR) $(CFLAGS) $(CFLAGS_$*) -o $@ $&lt;</code> when compiling the boost_json.o target."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 6, "creation_date": 1496237899, "post_id": 44286265, "comment_id": 75579456, "body": "Like the error message say, you should file a bug report to gcc (if there is not already one for the same bug). Internal compiler error are always bug in the compiler."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1496239573, "post_id": 44286265, "comment_id": 75580692, "body": "Report it here <a href=\"https://gcc.gnu.org/bugzilla\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla</a> 5.x is old though, you may want to install a newer version."}, {"owner": {"reputation": 11941, "user_id": 885792, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8ae32cdc95f8f78e09c8c6d164e16fa9?s=128&d=identicon&r=PG&f=1", "display_name": "zabumba", "link": "https://stackoverflow.com/users/885792/zabumba"}, "edited": false, "score": 0, "creation_date": 1496241965, "post_id": 44286265, "comment_id": 75582539, "body": "ha! I figured I was working with latest. on my Ubuntu 14.04 I was working with <code>g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4</code>."}, {"owner": {"reputation": 11941, "user_id": 885792, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8ae32cdc95f8f78e09c8c6d164e16fa9?s=128&d=identicon&r=PG&f=1", "display_name": "zabumba", "link": "https://stackoverflow.com/users/885792/zabumba"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1496242637, "post_id": 44286265, "comment_id": 75583067, "body": "@n.m. do you know the right way to upgrade <code>g++</code> to its latest version. I think your suggestion may resolve my issue, please feel free to add it as answer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1496242733, "post_id": 44286265, "comment_id": 75583138, "body": "Try to find a GCC version 6 at least. Since GCC 7 has been recently released."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1496245651, "post_id": 44286265, "comment_id": 75585180, "body": "<a href=\"https://gist.github.com/application2000/73fd6f4bf1be6600a2cf9f56315a2d91\" rel=\"nofollow noreferrer\">gist.github.com/application2000/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11941, "user_id": 885792, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8ae32cdc95f8f78e09c8c6d164e16fa9?s=128&d=identicon&r=PG&f=1", "display_name": "zabumba", "link": "https://stackoverflow.com/users/885792/zabumba"}, "edited": false, "score": 0, "creation_date": 1496242129, "post_id": 44286991, "comment_id": 75582671, "body": "right, I guess that&#39;s one thing, although that doesn&#39;t resolve my issue. What might resolve is installing (as suggested in the comments) a more recent version of the <code>g++</code> on Ubuntu 16.04 if that&#39;s supported, because this issue may have been resolved already right?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 11941, "user_id": 885792, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8ae32cdc95f8f78e09c8c6d164e16fa9?s=128&d=identicon&r=PG&f=1", "display_name": "zabumba", "link": "https://stackoverflow.com/users/885792/zabumba"}, "edited": false, "score": 2, "creation_date": 1496242912, "post_id": 44286991, "comment_id": 75583265, "body": "The people who receive your bug report will be best placed to help you triage it and find a workaround."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1496239557, "creation_date": 1496239557, "answer_id": 44286991, "question_id": 44286265, "link": "https://stackoverflow.com/questions/44286265/g-internal-compiler-error-segmentation-fault-program-cc1plus-where-do-i/44286991#44286991", "title": "g++: internal compiler error: Segmentation fault (program cc1plus) - where do I start?", "body": "<p>Simply do as you were instructed:</p>\n\n<blockquote>\n  <p>Please <a href=\"https://gcc.gnu.org/bugzilla\" rel=\"nofollow noreferrer\">submit a full bug report</a>, with preprocessed source if appropriate.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 351, "user_id": 2511835, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/55ca32f461d2452c6ac402646035845f?s=128&d=identicon&r=PG", "display_name": "Walshie1987", "link": "https://stackoverflow.com/users/2511835/walshie1987"}, "edited": false, "score": 1, "creation_date": 1543999675, "post_id": 44288591, "comment_id": 94116324, "body": "I know it&#39;s old, but this fixed the issue for me too. Cheers"}, {"owner": {"reputation": 547, "user_id": 9680828, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yupeng Tang", "link": "https://stackoverflow.com/users/9680828/yupeng-tang"}, "edited": false, "score": 1, "creation_date": 1566029628, "post_id": 44288591, "comment_id": 101534108, "body": "This answer really saved my day"}], "tags": [], "owner": {"reputation": 11941, "user_id": 885792, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8ae32cdc95f8f78e09c8c6d164e16fa9?s=128&d=identicon&r=PG&f=1", "display_name": "zabumba", "link": "https://stackoverflow.com/users/885792/zabumba"}, "is_accepted": true, "score": 6, "last_activity_date": 1496243771, "creation_date": 1496243771, "answer_id": 44288591, "question_id": 44286265, "link": "https://stackoverflow.com/questions/44286265/g-internal-compiler-error-segmentation-fault-program-cc1plus-where-do-i/44288591#44288591", "title": "g++: internal compiler error: Segmentation fault (program cc1plus) - where do I start?", "body": "<h1>How I resolved my <code>g++</code> segmentation fault issue</h1>\n\n<p>Inspired by <a href=\"https://gist.github.com/application2000/73fd6f4bf1be6600a2cf9f56315a2d91\" rel=\"noreferrer\">this thread</a></p>\n\n<p>I executed the following on my <strong>Ubuntu 16.04</strong></p>\n\n<pre><code>   sudo apt-get install build-essential software-properties-common -y\n   sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y \n   sudo apt-get update\n   sudo apt-get install gcc-snapshot -y \n</code></pre>\n\n<p>After what <code>g++</code> was incremented from <code>5.4.0</code> to <code>5.4.1</code> which resolve the segmentation fault issue</p>\n\n<pre><code>$ g++ --version\ng++ (Ubuntu 5.4.1-2ubuntu1~16.04) 5.4.1 20160904\n</code></pre>\n"}], "owner": {"reputation": 11941, "user_id": 885792, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8ae32cdc95f8f78e09c8c6d164e16fa9?s=128&d=identicon&r=PG&f=1", "display_name": "zabumba", "link": "https://stackoverflow.com/users/885792/zabumba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13832, "favorite_count": 3, "accepted_answer_id": 44288591, "answer_count": 2, "score": 2, "last_activity_date": 1499269148, "creation_date": 1496237626, "last_edit_date": 1499269148, "question_id": 44286265, "link": "https://stackoverflow.com/questions/44286265/g-internal-compiler-error-segmentation-fault-program-cc1plus-where-do-i", "title": "g++: internal compiler error: Segmentation fault (program cc1plus) - where do I start?", "body": "<p>I am porting code that compiled on <strong>Ubuntu 14.04</strong> to <strong>16.04</strong>. I have cloned my git repo, installed dependencies and tried the usual <code>make</code> command, soon I hit a <code>g++: internal compiler error: Segmentation fault (program cc1plus)</code> ... yet I am not sure where to start to diagnose and resolve this issue.</p>\n\n<p>I will share as much as I can, see if someone can guide me through a resolution.</p>\n\n<h3>Ubuntu</h3>\n\n<pre><code>$ lsb_release -a \nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04.2 LTS\nRelease:    16.04\nCodename:   xenial\n</code></pre>\n\n<h3>g++</h3>\n\n<pre><code>$ g++ --version\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\n</code></pre>\n\n<h3>python</h3>\n\n<pre><code>$ python --version\nPython 2.7.12\n</code></pre>\n\n<h3>Some environment variables</h3>\n\n<pre><code>PYTHON       /usr/bin/python2.7\nARCH         x86_64\nOS           Linux\nVERSION      4.4.071generic\nPLATFORM     linux2\nHOSTNAME     deploy\nUSER         myUser\nWUSS_BUILD   NO\nCCVER        gcc\nPYLIBDIR     build.x86_64-linux2\nLIBDIR       build.x86_64-linux2\nBINDIR       build.x86_64-linux2\nODIR         build.x86_64-linux2-gcc\nSTATICLIBDIR build-static.x86_64-linux2\n</code></pre>\n\n<h3>Error</h3>\n\n<p>The <code>make</code> command leads to</p>\n\n<pre><code>+++ Compile mycore/boost_json.cc to build.x86_64-linux2-gcc\ng++: internal compiler error: Segmentation fault (program cc1plus)   &lt;===\nPlease submit a full bug report,\nwith preprocessed source if appropriate.\nSee &lt;file:///usr/share/doc/gcc-5/README.Bugs&gt; for instructions.\nmk/makelib2.inc:48: recipe for target 'build.x86_64-linux2-gcc/mycore/boost_json.o' failed\nmake[1]: *** [build.x86_64-linux2-gcc/mycore/boost_json.o] Error 4\nMakefile:152: recipe for target 'make.stage1c' failed\nmake: *** [make.stage1c] Error 2\n</code></pre>\n\n<p>The error message seems to be pointing at a <code>g++</code> compiler error (?)</p>\n\n<p><code>makelib2.inc:48</code></p>\n\n<pre><code>$(ODIR)/%.o : %.c\n        @mkdir -p $(dir $@)\n        @echo \"+++ Compile $&lt; to $(ODIR)\"\n        @$(CC) -MMD -MP -MF $(@:.o=.d) -c -I$(ODIR) $(CFLAGS) $(CFLAGS_$*) -o $@ $&lt;\n</code></pre>\n\n<p>I realize that this is going to be very difficult to craft a proper question that would lead to getting proper help. So please bear with me and feel free to suggest adding anything that may help. Unfortunately, I can't share the code.</p>\n\n<h1>Update</h1>\n\n<p>Going to try upgrade <code>g++</code> to a more recent version. Following <a href=\"https://askubuntu.com/questions/618474/how-to-install-the-latest-gcurrently-5-1-in-ubuntucurrently-14-04\">this thread</a></p>\n\n<p><a href=\"https://askubuntu.com/questions/863517/how-do-i-install-g-7-on-ubuntu\">HERE how to install <strong>g++ 7</strong> on Ubuntu</a></p>\n\n<p><a href=\"https://gist.github.com/application2000/73fd6f4bf1be6600a2cf9f56315a2d91\" rel=\"nofollow noreferrer\">HERE how to install <strong>gcc 6</strong> on Ubuntu</a></p>\n"}, {"tags": ["c++", "winapi", "gdi"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496237645, "post_id": 44286126, "comment_id": 75579232, "body": "Define &quot;print it&quot; - this could mean any of many things"}, {"owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496238042, "post_id": 44286126, "comment_id": 75579564, "body": "@BoundaryImposition The printing part is somewhat magic to me. I think this already happens somewhere else. Problem is in the Print Preview the place where my Wpf View should be, there is just a frame with an empty space inside. So I guess the title is a bit missleading, this method is not really about printing if I understand correctly, even if it&#39;s name is Print."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1496238099, "post_id": 44286126, "comment_id": 75579604, "body": "Um... even if its magic, you would have to somehow interact with it. <b>Define</b> how you would wish to use the screenshot"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496238144, "post_id": 44286126, "comment_id": 75579634, "body": "@user3292642: Well if the question has nothing to do with printing then you should remove mentions of that from the question."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1496238343, "post_id": 44286126, "comment_id": 75579764, "body": "Is the <code>HDC</code> your method receive, the printer HDC?"}, {"owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1496238453, "post_id": 44286126, "comment_id": 75579850, "body": "@SergeBallesta I think so. Documentation says: Context for graphical output"}, {"owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496238639, "post_id": 44286126, "comment_id": 75580007, "body": "@BoundaryImposition I know my question is not very clear, but that&#39;s because all this is not very clear to me. I&#39;m trying my best to explain and appreciate any comments, but yours are just not helpfull at all. If you feel like you can&#39;t help because theres too little information then why don&#39;t you go and answer some other questions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496238762, "post_id": 44286126, "comment_id": 75580096, "body": "@user3292642: You are mistaken; I <i>am</i> trying to help you. If you remove the irrelevant references to &quot;printing&quot; then your question will be clearer, and you will get more help faster. I don&#39;t spend my time trying to help you improve your question just for fun."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1496238776, "post_id": 44286126, "comment_id": 75580104, "body": "&quot;Documentation says: Context for graphical output&quot; Documentation of what? You should describe what&#39;s calling this function you provided, since it seems this mysterious API is what you think will do printing. Also <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20130306-00/?p=5043\" rel=\"nofollow noreferrer\">you forgot to undo the <code>SelectObject()</code> after the <code>BitBlt()</code></a>. And I can guess that you are right, you don&#39;t need <code>hdcMemory</code> as you have the destination DC passed in as a parameter, but again, we would need to know more about the surrounding code."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1496238802, "post_id": 44286126, "comment_id": 75580122, "body": "@user3292642: your last comment is just uselessly offensive. BoundaryImposition is right in one part, your question is unclear, that&#39;s the reason why I asked you details on what was the HDC parameter of this method."}], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "edited": false, "score": 0, "creation_date": 1496239257, "post_id": 44286807, "comment_id": 75580459, "body": "Thanks for your answer... By WinAPI calls you mean <code>GetDC</code>?"}, {"owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "edited": false, "score": 0, "creation_date": 1496239575, "post_id": 44286807, "comment_id": 75580695, "body": "Thanks that worked. The preview is not empty anymore ;) left, top, width and height seem to be not correct yet, but that should not be a problem. Thank you very much again!"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "edited": false, "score": 0, "creation_date": 1496240739, "post_id": 44286807, "comment_id": 75581582, "body": "@user3292642: You should at least test the return value of BitBlt..."}, {"owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "edited": false, "score": 0, "creation_date": 1496241277, "post_id": 44286807, "comment_id": 75581997, "body": "return value is 1."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "edited": false, "score": 0, "creation_date": 1496243966, "post_id": 44286807, "comment_id": 75584040, "body": "@user3292642 See my edit..."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1496243973, "last_edit_date": 1496243973, "creation_date": 1496239088, "answer_id": 44286807, "question_id": 44286126, "link": "https://stackoverflow.com/questions/44286126/c-take-a-screenshot/44286807#44286807", "title": "C++ Take a Screenshot", "body": "<p>I cannot test because I do not know what is the framework that calls that method, but as you receive the HDC you want to write to, you simply should not use a memory DC and directly BitBlt there. But you should also test the return value of WinAPI calls to return error conditions to the caller:</p>\n\n<pre><code>STDOVERRIDEMETHODIMP VImplPrintable::Print(HDC hdc, CRect* pCr)\n{  \n  HDC hdcSource = GetDC(NULL);\n  if (NULL == hdcSource) return E_FAIL;\n\n  HRESUL cr = S_OK;\n\n  if (!BitBlt(hdc, 0, 0, pCr-&gt;Width(), pCr-&gt;Height(), hdcSource, pCr-&gt;top, pCr-&gt;left, \n      SRCCOPY)) cr = E_FAIL;\n\n  DeleteDC(hdcSource);\n\n  return cr;\n}\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 3292642, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31687737151d528912c7f3b10661dff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3292642", "link": "https://stackoverflow.com/users/3292642/user3292642"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "closed_date": 1496253355, "accepted_answer_id": 44286807, "answer_count": 1, "score": -5, "last_activity_date": 1496243973, "creation_date": 1496237253, "last_edit_date": 1496239009, "question_id": 44286126, "link": "https://stackoverflow.com/questions/44286126/c-take-a-screenshot", "closed_reason": "Needs details or clarity", "title": "C++ Take a Screenshot", "body": "<p>I'm new to C++ and have to take a screenshot. I think I have set up everything besides the print method itself and that's where I'm struggling.</p>\n\n<p>I found a post on so which describes how to take a screenshot, but it somehow doesn't work for me. (<a href=\"https://stackoverflow.com/questions/9524393/how-to-capture-part-of-the-screen-and-save-it-to-a-bmp\">How to capture part of the screen and save it to a BMP?</a>)</p>\n\n<p>My Method looks like this:</p>\n\n<pre><code>STDOVERRIDEMETHODIMP VImplPrintable::Print(HDC hdc, CRect* pCr)\n{  \n  HDC hdcSource = GetDC(NULL);\n  HDC hdcMemory = CreateCompatibleDC(hdcSource);   \n\n  int capX = GetDeviceCaps(hdcSource, HORZRES);\n  int capY = GetDeviceCaps(hdcSource, VERTRES);\n\n  HBITMAP hBitmap = CreateCompatibleBitmap(hdcSource, pCr-&gt;Width(), pCr-&gt;Height());\n  HBITMAP hBitmapOld = (HBITMAP)SelectObject(hdcMemory, hBitmap);\n\n  BitBlt(hdcMemory, 0, 0, pCr-&gt;Width(), pCr-&gt;Height(), hdcSource, pCr-&gt;top, pCr-&gt;left, SRCCOPY);\n\n  DeleteDC(hdcSource);\n  DeleteDC(hdcMemory);\n\n  return S_OK;\n}\n</code></pre>\n\n<p>Problem is the screenshot seems to be an empty bitmap.\nI don't really know if I it makes sense to create a new <code>HDC</code> when I'm \nalready getting one as a parameter. Any help is appreciated.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1496411715, "post_id": 44286105, "comment_id": 75665287, "body": "Do you mean in the Design view of Qt Creator?"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 4585739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc288bf407e69d0ef4736b638fd2ee7?s=128&d=identicon&r=PG&f=1", "display_name": "jularaXD", "link": "https://stackoverflow.com/users/4585739/jularaxd"}, "is_accepted": false, "score": 0, "last_activity_date": 1496273599, "creation_date": 1496273599, "answer_id": 44296236, "question_id": 44286105, "link": "https://stackoverflow.com/questions/44286105/the-gui-menu-to-create-widgets-is-not-appearing-in-qt-creator/44296236#44296236", "title": "The Gui menu to create widgets is not appearing in Qt Creator", "body": "<p>Open Qt Creator, go to the tap: Window > Views >  And check \"Widget box\"</p>\n"}], "owner": {"reputation": 1, "user_id": 5431399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8926cf583eacdf4bee8922257d3ba8cd?s=128&d=identicon&r=PG&f=1", "display_name": "boris said", "link": "https://stackoverflow.com/users/5431399/boris-said"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570829150, "creation_date": 1496237189, "last_edit_date": 1570829150, "question_id": 44286105, "link": "https://stackoverflow.com/questions/44286105/the-gui-menu-to-create-widgets-is-not-appearing-in-qt-creator", "title": "The Gui menu to create widgets is not appearing in Qt Creator", "body": "<p>It always appeared, but then out of the blue on one new project it wasn't there. I have double checked it was a QWidgets project, and it was.</p>\n"}, {"tags": ["c++", "qt", "plot", "multimap", "qcustomplot"], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 0, "last_activity_date": 1496237392, "creation_date": 1496237392, "answer_id": 44286182, "question_id": 44285974, "link": "https://stackoverflow.com/questions/44285974/unable-to-insert-qcustomplotqcpgraph-in-multimap-c/44286182#44286182", "title": "Unable to insert QCustomPlot::QCPGraph in multiMap C++", "body": "<p>Your container is:</p>\n\n<pre><code>std::multimap&lt;int, std::pair&lt;std::vector&lt;double&gt;, QCPGraph&gt;&gt; myMap; \n</code></pre>\n\n<p>So its value_type is:</p>\n\n<pre><code>std::pair&lt;const int, std::pair&lt;std::vector&lt;double&gt;, QCPGraph&gt;&gt;\n</code></pre>\n\n<p>So when you have a:</p>\n\n<pre><code>QCPGraph *graph = ui-&gt;customPlot-&gt;graph(0); \n</code></pre>\n\n<p>You need to insert it like this:</p>\n\n<pre><code>myMap.insert(std::make_pair(1, std::make_pair(vec, *graph)));\n</code></pre>\n\n<p>Or in C++11:</p>\n\n<pre><code>myMap.emplace(1, std::make_pair(vec, *graph));\n</code></pre>\n\n<p>But I think the graph is meant to be owned by QCustomPlot, so you should actually store a pointer to it:</p>\n\n<pre><code>std::multimap&lt;int, std::pair&lt;std::vector&lt;double&gt;, QCPGraph*&gt;&gt; myMap; \nmyMap.emplace(1, std::make_pair(vec, graph));\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 5860941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900acdb97a2dfa4596048080c56f5cbd?s=128&d=identicon&r=PG&f=1", "display_name": "masterBroesel", "link": "https://stackoverflow.com/users/5860941/masterbroesel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 44286182, "answer_count": 1, "score": 0, "last_activity_date": 1496237392, "creation_date": 1496236808, "question_id": 44285974, "link": "https://stackoverflow.com/questions/44285974/unable-to-insert-qcustomplotqcpgraph-in-multimap-c", "title": "Unable to insert QCustomPlot::QCPGraph in multiMap C++", "body": "<p>I am working on a program where it is necessary to insert a <code>QCPGraph</code> from the QCustomPlot FrameWork into a <code>std::multimap</code>. Note: I am still pretty new to C++. However, I can't get this to work, which is really frustrating. </p>\n\n<p>Here's my code: </p>\n\n<pre><code>ui-&gt;customPlot-&gt;addGraph();        \n\n/*\n  fill graph with some data\n*/\n\nQCPGraph *graph = ui-&gt;customPlot-&gt;graph(0); \n\nstd::multimap&lt;int, std::pair&lt;std::vector&lt;double&gt;, QCPGraph&gt;, _comparator&gt; myMap; \n\n//just for demo\nstd::vector&lt;double&gt; vec; \nvec.at(0) = 2.2; \n\nmyMap.insert(std::make_pair(1, std::make_pair(vec, graph)));\n</code></pre>\n\n<p>The last line gives me the following compiler errors:</p>\n\n<pre><code>C:\\path\\mainwindow.cpp:178: Error: no matching function for call to 'std::multimap&lt;int, std::pair&lt;std::vector&lt;double&gt;, QCPGraph&gt;, MainWindow::__comparator&gt;::insert(std::pair&lt;int, std::pair&lt;std::vector&lt;double&gt;, QCPGraph*&gt; &gt;)'\n     myMap.insert(std::make_pair(1, std::make_pair(vec, graph)));\n                                                                 ^\n\nC:\\Qt\\Tools\\mingw530_32\\i686-w64-mingw32\\include\\c++\\bits\\stl_multimap.h:524: Error: no type named 'type' in 'struct std::enable_if&lt;false, void&gt;'\n       template&lt;typename _Pair, typename = typename\n                                ^\n</code></pre>\n\n<p>I know it probably has to do with the pointers and types, but I just can't figure it out. I tried giving <code>&amp;graph</code> and <code>(*graph)</code> to insert, which didnt work either. Please help.  </p>\n"}, {"tags": ["c++", "eclipse", "gcc", "g++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 2, "creation_date": 1496236461, "post_id": 44285774, "comment_id": 75578336, "body": "What exactly are you asking here? Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "edited": false, "score": 0, "creation_date": 1561619188, "post_id": 44285774, "comment_id": 100125440, "body": "This question was 2 years ago, so I doubt the original author needs assistance here, but for others.  As far as I can tell he wants to remove the C compiler from the compilation process.  You can change the file associations for C++ compiler to include .c and .h. Then remove the associations for those for the C compiler. I think that should work."}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "reply_to_user": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "edited": false, "score": 0, "creation_date": 1561723885, "post_id": 44285774, "comment_id": 100167344, "body": "hello, 2 years is a long time, but i still havent figured out how to do this. the original question was how to build c and c++ source with g++ since g++ will see extern &quot;C&quot; and build (mangle) it as c source."}], "answers": [{"tags": [], "owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "is_accepted": true, "score": 1, "last_activity_date": 1562118218, "creation_date": 1562118218, "answer_id": 56861842, "question_id": 44285774, "link": "https://stackoverflow.com/questions/44285774/embedded-c-c-atollic/56861842#56861842", "title": "Embedded C/C++ Atollic", "body": "<p>Window -> Preferences -> C/C++ ->Language Mappings -> Add</p>\n\n<p>Then add two associations:</p>\n\n<pre><code>Content type : C Header file\nLanguage : GNU C++\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Content type : C Source file\nLanguage : GNU C++\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 56861842, "answer_count": 1, "score": 2, "last_activity_date": 1562118218, "creation_date": 1496236264, "last_edit_date": 1496566203, "question_id": 44285774, "link": "https://stackoverflow.com/questions/44285774/embedded-c-c-atollic", "title": "Embedded C/C++ Atollic", "body": "<p>When working on embedded c++/c projects in atollic (eclipse is just the same), under your project settings, you have:</p>\n\n<pre><code>&gt; Assembler (arm-atollic-eabi-gcc -c)\n&gt; C Compiler (arm-atollic-eabi-gcc -c)\n&gt; C++ Compiler (arm-atollic-eabi-g++ -c)\n&gt; C++ Linker\n</code></pre>\n\n<p>This means, I can use C code without any modification within a c++ project, since all .c files are compiled with <code>gcc</code> and all <code>.cpp</code> files with g++. Also, if and when C code would have the <code>#if __cplusplus extern \"C\" {</code> within the header OR the <code>.cpp</code> code would include V code like <code>\"#if __cplusplus extern \"C\" { #include \"c_header.h\" ...</code> this would make absolutely no difference since the .c file is being compiled with <code>gcc</code> which doesnt define <code>__cplusplus</code>. </p>\n\n<blockquote>\n  <p>Is this correct??</p>\n</blockquote>\n\n<p>When I would like to purely build with g++ since all my C code is being included this way...</p>\n\n<pre><code>extern \"C\" {\n    #include \"c_header.h\"\n}\n</code></pre>\n\n<p>How can I delete the C compiler from atollic/eclipse?</p>\n\n<p>I tried removing the tools defined within the project file \".cproject\", then opening the project again, but they were added automatically.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1496236251, "post_id": 44285635, "comment_id": 75578186, "body": "You need to show more of the code including how the function is used.  Links to source are not appropriate for SO questions."}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1496236271, "post_id": 44285635, "comment_id": 75578209, "body": "<code>malloc</code> and <code>free</code> are the old C-style way of solving this problem. In c++ we have smart ptrs, as you mentioned <code>unique_ptr</code>. The smart ptrs offer free memory management for pointers (i.e. you don&#39;t have to clean up after yourself), and are the more preferred way to solve this problem in c++"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1496237174, "post_id": 44285635, "comment_id": 75578909, "body": "You should decide which language you are talking about. C and C++ are totally different languages. There is no such thing as <code>std::unique_ptr</code> in C."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1496237055, "post_id": 44285982, "comment_id": 75578800, "body": "Change <i>But since it now points to a local, the changes it makes are not seen outside the function.</i> to <i>But since <code>ret_ptr</code> is local, the changes made to it are not seen outside the function.</i>?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496237697, "post_id": 44285982, "comment_id": 75579276, "body": "@NathanOliver I made changes to basically include both statements."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496238062, "post_id": 44285982, "comment_id": 75579575, "body": "@dbush Thanks.  Great answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496239767, "post_id": 44285982, "comment_id": 75580851, "body": "IMO you should have deleted your answer and posted the corrected interpretation in a new one; many original votes on this answer are for completely different content. Regardless, the new one is right."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 8, "last_activity_date": 1496238254, "last_edit_date": 1496238254, "creation_date": 1496236820, "answer_id": 44285982, "question_id": 44285635, "link": "https://stackoverflow.com/questions/44285635/pointer-to-local-variable-is-stored-outside-the-scope-of-this-variable/44285982#44285982", "title": "Pointer to local variable is stored outside the scope of this variable", "body": "<p>The <code>ret_ptr</code> parameter to the function in question is expected to point to a variable in the calling function.  This pointer is then dereferenced for both reading and writing this external variable.</p>\n\n<p>The <code>if (ret_ptr == NULL)</code> block checks whether the caller actually passed in the address of some variable.  If not, this pointer is then made to point to the local variable <code>unused</code> so that the pointer can still be safely dereferenced later in the code.  But since <code>ret_ptr</code> now points to a local, changes made by dereferencing it are not seen outside the function.  This is fine, since the caller passed in <code>NULL</code> for <code>ret_ptr</code>.  Similarly, since <code>ret_ptr</code> is a parameter, any changes to it are not visible outside of the function.</p>\n\n<p>Nothing needs to be refactored here. The code works as intended with regard to <code>ret_ptr</code>. This is a false positive from PVS-Studio.</p>\n\n<p>EDIT:</p>\n\n<p>This is <strong>NOT</strong> a false positive.  The <code>unused</code> variable is defined at a lower scope than <code>ret_ptr</code>, namely the scope of the first <code>if</code> block in the function.  After the <code>if</code> block, <code>ret_ptr</code> is then dereferenced.  If it was pointing to <code>ununsed</code>, that variable is now out of scope and dereferencing <code>ret_ptr</code> invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>To fix this, <code>unused</code> must be declared and assigned to above the <code>if</code> block:</p>\n\n<pre><code>gearman_job_st *gearman_worker_grab_job(gearman_worker_st *worker_shell,\n                                        gearman_job_st *job,\n                                        gearman_return_t *ret_ptr)\n{\n    gearman_return_t unused;\n    if (ret_ptr == NULL)\n    {\n        ret_ptr= &amp;unused;\n    }\n\n    if (worker_shell and worker_shell-&gt;impl())\n    {\n        ...\n    }\n\n    assert(*ret_ptr != GEARMAN_MAX_RETURN);\n    return NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "accepted_answer_id": 44285982, "answer_count": 1, "score": 1, "last_activity_date": 1496238254, "creation_date": 1496235890, "last_edit_date": 1496237871, "question_id": 44285635, "link": "https://stackoverflow.com/questions/44285635/pointer-to-local-variable-is-stored-outside-the-scope-of-this-variable", "title": "Pointer to local variable is stored outside the scope of this variable", "body": "<p>For the following code snippet, which is a part of <a href=\"https://github.com/p-alik/gearmand/blob/master/libgearman/worker.cc#L668-L672\" rel=\"nofollow noreferrer\">libgearman</a></p>\n\n<pre><code>gearman_job_st *gearman_worker_grab_job(gearman_worker_st *worker_shell,\n                                        gearman_job_st *job,\n                                        gearman_return_t *ret_ptr)\n{\n    if (worker_shell and worker_shell-&gt;impl())\n    {\n\n        ...\n\n        gearman_return_t unused;\n        if (ret_ptr == NULL)\n        {\n            ret_ptr= &amp;unused;\n        }\n        ...\n    }\n\n    assert(*ret_ptr != GEARMAN_MAX_RETURN);\n    return NULL;\n}\n</code></pre>\n\n<p><a href=\"https://www.viva64.com/en/w/V507/\" rel=\"nofollow noreferrer\">PVS-Studio</a> reported:</p>\n\n<pre><code>Viva64-EM\nfull\n671\n/nfs/home/xxx/src/gearmand/libgearman/worker.cc\nerror\nV506\nPointer to local variable 'unused' is stored outside the scope of this variable. Such a pointer will become invalid.\nfalse\n2\n    {\n      ret_ptr= &amp;unused;\n    }\n------------\n</code></pre>\n\n<p>Regarding the question <a href=\"https://stackoverflow.com/a/18473875/2789312\">Pointer to local variable outside the scope of its declaration</a>, if I understand that correctly, <code>malloc</code> and <code>free</code> should be used for refactoring. My question is if there is an other appropriate refactoring alternative. For instance using of <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">std::unique_ptr</a>:</p>\n\n<p><code>ret_ptr = std::make_unique&lt;gearman_return_t&gt;();</code></p>\n"}, {"tags": ["c++", "ini"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1496234717, "post_id": 44285057, "comment_id": 75577010, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724353(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetPrivateProfileString</code></a> is for 16bit compatibility only and should be avoided, if you need all user shared config consider using either the registry or a configuration file."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1496234897, "post_id": 44285057, "comment_id": 75577150, "body": "As said in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724353(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a>: <code>Note  This function is provided only for compatibility with 16-bit Windows-based applications. Applications should store initialization information in the registry.</code>. Maybe you should store your information not in an ini file but in the registry. Or write your own ini file parser because this WinAPI function is deprecated."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1496237305, "post_id": 44285057, "comment_id": 75578995, "body": "The function succeeded (in the sense that it returned a valid string). Calling <code>GetLastError</code> after success will return garbage. Even if it had failed, you are calling <code>GetLastError</code> far too late. You do a bunch of other things in between calling <code>GetPrivateProfileStringA</code> and calling <code>GetLastError</code>, any of which could have reset <code>GetLastError</code>."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1496237504, "post_id": 44285057, "comment_id": 75579127, "body": "You make an effort to use a full path name.  But then you don&#39;t use it and only pass &quot;ldap&quot; to the function.  Instead of <code>path</code>.  The odds that the current working directory is set correctly is always low, zero when you ask a question like this one.  Use <code>path</code>."}, {"owner": {"reputation": 319, "user_id": 1197538, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d0e18d6961f0d0ad4cbd929631715ddb?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1197538/ravi"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1496897553, "post_id": 44285057, "comment_id": 75851699, "body": "@Andre Kampling, if it was only for a backward compatibility, then why did they enhance the api to support unicode characters. In WinBase.h you see this line   #ifdef UNICODE #define GetPrivateProfileString  GetPrivateProfileStringW #else #define GetPrivateProfileString  GetPrivateProfileStringA #endif // !UNICODE"}], "answers": [{"tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": false, "score": 0, "last_activity_date": 1496238131, "creation_date": 1496238131, "answer_id": 44286436, "question_id": 44285057, "link": "https://stackoverflow.com/questions/44285057/getprivateprofilestringa-is-returning-the-system-cannot-find-the-file-specified/44286436#44286436", "title": "GetPrivateProfileStringA is returning &quot;The system cannot find the file specified.&quot; eventhough the file exists", "body": "<p>The ERROR_FILE_NOT_FOUND error code you\u2019re getting is also set when GetPrivateProfileString is unable to find a section or value.</p>\n\n<p>Your code works fine on my Win10 with your ini file.</p>\n\n<p>Use a hex viewer/editor to verify your ldap.ini is actually ASCII, and that it doesn't contain <a href=\"http://unicode.org/faq/utf_bom.html\" rel=\"nofollow noreferrer\">BOM</a>.</p>\n"}], "owner": {"reputation": 319, "user_id": 1197538, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d0e18d6961f0d0ad4cbd929631715ddb?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1197538/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496238131, "creation_date": 1496234292, "question_id": 44285057, "link": "https://stackoverflow.com/questions/44285057/getprivateprofilestringa-is-returning-the-system-cannot-find-the-file-specified", "title": "GetPrivateProfileStringA is returning &quot;The system cannot find the file specified.&quot; eventhough the file exists", "body": "<p>in CPP Visual studio 2010. I need to read some configurations from ini file. the below code is not working. can someone help me fix it.</p>\n\n<pre><code>char * path  = \"C:\\\\NotBackedUp\\\\Workspaces\\\\LDAP-DLL\\\\LDAPTestApp\\\\bin\\\\Debug\\\\conf\\\\ldap.ini\";\n    std::wcout &lt;&lt; \"path: \" &lt;&lt; path &lt;&lt; std::endl;\n\n    if(!ATLPath::FileExists(path))\n    {\n        HRESULT hr = ATL::AtlHresultFromLastError();\n        ATLTRACE(\"%x\\n\",hr);//system could not find the file specified!\n        std::cout &lt;&lt; \"File not found \" &lt;&lt; std::endl;\n        return 0;\n    }\n    else \n    {\n        std::cout &lt;&lt; \"File found \" &lt;&lt; std::endl;\n    }\n\n    char valueRead[320];\n    int a = GetPrivateProfileStringA(\"ldap\", \"url\", \"error\", valueRead, 320, path);\n    std::cout &lt;&lt; \"Value Read \" &lt;&lt; valueRead &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Error String \" &lt;&lt; GetLastErrorAsString();\n</code></pre>\n\n<p>the above code is generating below log, you can see ATLPath::FileExists is returning true, but still getLastError is stating the System cannot find the file specified</p>\n\n<pre><code>path: C:\\NotBackedUp\\Workspaces\\LDAP-DLL\\LDAPTestApp\\bin\\Debug\\conf\\ldap.ini\nFile found\nValue Read error\nError String The system cannot find the file specified.\n</code></pre>\n\n<p>My ldap.ini file has following lines and is available in the above path</p>\n\n<pre><code>[ldap]\nurl=ldap://testserver\n</code></pre>\n\n<p>any help is highly appreciated</p>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1496234574, "creation_date": 1496234574, "answer_id": 44285160, "question_id": 44284930, "link": "https://stackoverflow.com/questions/44284930/how-to-list-all-member-variables-of-a-class-inherited-from-qobject-in-qt/44285160#44285160", "title": "How to list all member variables of a class inherited from QObject in Qt?", "body": "<p>No, it can't, because Qt's metadata system only provides the following information about a class:</p>\n\n<ul>\n<li>names, signatures and lookup-by-address of member functions declared as signals, slots, or invokable,</li>\n<li>class name and inheritance,</li>\n<li>named properties (declared with <code>Q_PROPERTY</code>),</li>\n<li>class information (declared with <code>Q_CLASSINFO</code>).</li>\n</ul>\n\n<p>Specifically, <code>moc</code> ignores any other members, and generates no metadata for them, as that would be wasteful.</p>\n\n<p>It is possible to patch up moc and metadata format to add other kinds of information - those aren't big changes. Feel free to look at moc sources and <code>QMetaData</code> to figure it out.</p>\n"}], "owner": {"reputation": 21, "user_id": 8091934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b27c224f68609cc7dbe520ae01787c8?s=128&d=identicon&r=PG", "display_name": "alexanderk409", "link": "https://stackoverflow.com/users/8091934/alexanderk409"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496234574, "creation_date": 1496233971, "question_id": 44284930, "link": "https://stackoverflow.com/questions/44284930/how-to-list-all-member-variables-of-a-class-inherited-from-qobject-in-qt", "title": "How to list all member variables of a class inherited from QObject in Qt?", "body": "<p>Let's suppose I have some class like</p>\n\n<pre><code>class MyClass : public QObject\n{\n    Q_OBJECT\n\npublic:\n    explicit MyClass (QObject *parent = 0);\n    ~MyClass ();\n    int var1;\n    QString var2;\n};\n</code></pre>\n\n<p>What I want to do is to print its member variables like var1 and var2 in a loop. Can QMetaObject help me here?</p>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496234499, "post_id": 44284826, "comment_id": 75576844, "body": "Do all you need to do is get a histogram?  If so you could read the file into a <code>std::map</code> and build the histogram with that in one go."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1496234931, "post_id": 44284826, "comment_id": 75577166, "body": "I wrote an anser, but deleted it, because I overlooked a small but important detail: your input array is already sorted. Actually now it isnt clear to me what is the problem. You should show your approach and why it doesnt work. Any code is better than no code. See also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 6584831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d9fc618803abab0b609bf0f8c2cad6?s=128&d=identicon&r=PG&f=1", "display_name": "drumz", "link": "https://stackoverflow.com/users/6584831/drumz"}, "is_accepted": false, "score": 0, "last_activity_date": 1496234530, "creation_date": 1496234530, "answer_id": 44285145, "question_id": 44284826, "link": "https://stackoverflow.com/questions/44284826/how-to-print-histogram-of-ordered-c-string-array/44285145#44285145", "title": "How to print histogram of ordered C++ string array?", "body": "<p>Could be easy with a map ... But if you can't do an int* sorted like that :</p>\n\n<pre><code>int count[nb_word];\n</code></pre>\n\n<p>Where</p>\n\n<pre><code>count[0]\n</code></pre>\n\n<p>represent the first word (in your exemple alpha) number of occurence</p>\n"}, {"tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 0, "last_activity_date": 1496234596, "creation_date": 1496234596, "answer_id": 44285170, "question_id": 44284826, "link": "https://stackoverflow.com/questions/44284826/how-to-print-histogram-of-ordered-c-string-array/44285170#44285170", "title": "How to print histogram of ordered C++ string array?", "body": "<p>Just keep previous element if it's the same as current one, print <code>x</code>, if not print the new element with 1st occurrence mark.</p>\n\n<p>I am not giving implementation nor completely exact algorithm on purpose, as it seems like an exercise.</p>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 5961085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27a82358993e5728a56306e3e5a65891?s=128&d=identicon&r=PG&f=1", "display_name": "mobcity zkore", "link": "https://stackoverflow.com/users/5961085/mobcity-zkore"}, "edited": false, "score": 0, "creation_date": 1496239427, "post_id": 44285853, "comment_id": 75580578, "body": "Thank you! This is awesome!"}], "tags": [], "owner": {"reputation": 1248, "user_id": 2511763, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EHEMJ.jpg?s=128&g=1", "display_name": "Muhammet Ali Asan", "link": "https://stackoverflow.com/users/2511763/muhammet-ali-asan"}, "is_accepted": true, "score": 1, "last_activity_date": 1496237024, "last_edit_date": 1496237024, "creation_date": 1496236446, "answer_id": 44285853, "question_id": 44284826, "link": "https://stackoverflow.com/questions/44284826/how-to-print-histogram-of-ordered-c-string-array/44285853#44285853", "title": "How to print histogram of ordered C++ string array?", "body": "<p>The code below requires sorting and no limitation on number of words.    </p>\n\n<pre><code>const int wordCount = 6;\nstring stringText[wordCount] = {\"alpha\", \"alpha\", \"bravo\", \"charlie\", \"charlie\",\"charlie\"};\nint counter = 0;\n\nwhile(counter&lt;wordCount)\n{\n  cout&lt;&lt;stringText[counter];\n  cout&lt;&lt;\" : x\";\n  for(int i=counter+1;i&lt;wordCount;++i)\n  {\n      if(stringText[i]==stringText[counter])\n      {\n          cout&lt;&lt;\"x\";\n          counter++;\n      }\n  }\n  cout&lt;&lt;endl;\n  counter++;\n}\n</code></pre>\n\n<p>And the output is : </p>\n\n<blockquote>\n  <p>alpha : xx</p>\n  \n  <p>bravo : x</p>\n  \n  <p>charlie : xxx</p>\n</blockquote>\n"}], "owner": {"reputation": 243, "user_id": 5961085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27a82358993e5728a56306e3e5a65891?s=128&d=identicon&r=PG&f=1", "display_name": "mobcity zkore", "link": "https://stackoverflow.com/users/5961085/mobcity-zkore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 44285853, "answer_count": 3, "score": 0, "last_activity_date": 1496237024, "creation_date": 1496233696, "question_id": 44284826, "link": "https://stackoverflow.com/questions/44284826/how-to-print-histogram-of-ordered-c-string-array", "title": "How to print histogram of ordered C++ string array?", "body": "<p>I read a given text file and then fill my array with each word in the text file (I do a check to make sure the file is under 100 words, storing the number of words up top). I order them alphabetically (using bubble sort) and then get an array of of a bunch of words in order, occurring different amounts of times so for example: </p>\n\n<pre><code>string stringText[10] = {alpha, alpha, bravo, charlie, charlie, charlie...}\n</code></pre>\n\n<p>I need to print a histogram where I have each word followed by an 'x' for each occurrence of the word (to create a histogram):</p>\n\n<p>alpha: xx</p>\n\n<p>bravo: x</p>\n\n<p>charlie: xxx</p>\n\n<p>and so on...</p>\n\n<p>My question I guess is, should I edit the array, getting rid of duplicate elements or just print the first occurrence of each unique element followed by how many times it occurs? If I delete duplicate elements, my approach would be to go back into the string I read and just count how many times that word occurs. I'm more inclined towards leaving the array and just printing the first unique occurrence followed by an 'x' for each occurrence but I am not sure how to implement that.</p>\n\n<p>I'm not allowed to map/use vectors etc. </p>\n"}, {"tags": ["c++", "c++11", "unexpected-token"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1496233565, "post_id": 44284737, "comment_id": 75576163, "body": "Show all of your <code>LineShape</code>."}, {"owner": {"reputation": 4967, "user_id": 868856, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wXvX2.png?s=128&g=1", "display_name": "Fredrick Gauss", "link": "https://stackoverflow.com/users/868856/fredrick-gauss"}, "edited": false, "score": 2, "creation_date": 1496233665, "post_id": 44284737, "comment_id": 75576248, "body": "You have syntax error."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "edited": false, "score": 0, "creation_date": 1496233731, "post_id": 44284737, "comment_id": 75576293, "body": "@Alaanor there is no <code>class</code> there"}, {"owner": {"reputation": 5572, "user_id": 3375670, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dftd9.jpg?s=128&g=1", "display_name": "Robert Kock", "link": "https://stackoverflow.com/users/3375670/robert-kock"}, "edited": false, "score": 0, "creation_date": 1496234444, "post_id": 44284737, "comment_id": 75576803, "body": "I don&#39;t understand the &quot;sf::&quot; at the beginning of the constructor"}, {"owner": {"reputation": 37, "user_id": 6215693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb2fbda4a8154e3c304227e595ec112?s=128&d=identicon&r=PG&f=1", "display_name": "Alaanor", "link": "https://stackoverflow.com/users/6215693/alaanor"}, "reply_to_user": {"reputation": 5572, "user_id": 3375670, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dftd9.jpg?s=128&g=1", "display_name": "Robert Kock", "link": "https://stackoverflow.com/users/3375670/robert-kock"}, "edited": false, "score": 0, "creation_date": 1496234623, "post_id": 44284737, "comment_id": 75576922, "body": "@RobertKock <code>LineShape</code> is wrapped in a namespace of <code>sf</code>, removing it does not affect anything."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1496235537, "post_id": 44284737, "comment_id": 75577581, "body": "Lots of functions in there not (apparently) related to the error. Remove them - as the first step towards creating an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> - and verify that didn&#39;t fix the problem. If the error goes away, put those functions back one at a time. If it doesn&#39;t, finish making your MCVE and post <i>that</i> so that people can actually reproduce your problem."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1496235743, "post_id": 44284737, "comment_id": 75577748, "body": "This kind of error is often caused by something <i>above</i> the location flagged by the compiler, and that means all <code>#include</code>d files are possibly culprits. Since you haven&#39;t <i>shown</i> all your code, or reduced your code to the minimum that reproduces the problem, no-one can tell you what the cause is, except that it&#39;s not immediately visible in your question."}, {"owner": {"reputation": 37, "user_id": 6215693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb2fbda4a8154e3c304227e595ec112?s=128&d=identicon&r=PG&f=1", "display_name": "Alaanor", "link": "https://stackoverflow.com/users/6215693/alaanor"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1496236822, "post_id": 44284737, "comment_id": 75578615, "body": "@Useless, You&#39;re right, indeed it was a <code>#include</code> problem. I had included <code>LineShape.h</code> in <code>payload.h</code>, and was never using it in <code>payload.h</code>, after removing it, everything ran fine. Can someone fill me in on why this could possibly cause problems like this?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1496237172, "post_id": 44284737, "comment_id": 75578906, "body": "Are you using include guards? They&#39;re a standard way of avoiding circular include problems."}, {"owner": {"reputation": 37, "user_id": 6215693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb2fbda4a8154e3c304227e595ec112?s=128&d=identicon&r=PG&f=1", "display_name": "Alaanor", "link": "https://stackoverflow.com/users/6215693/alaanor"}, "edited": false, "score": 0, "creation_date": 1496237527, "post_id": 44284737, "comment_id": 75579148, "body": "I do not use include guards, but I should probably start doing so."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6215693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb2fbda4a8154e3c304227e595ec112?s=128&d=identicon&r=PG&f=1", "display_name": "Alaanor", "link": "https://stackoverflow.com/users/6215693/alaanor"}, "edited": false, "score": 0, "creation_date": 1496234395, "post_id": 44285015, "comment_id": 75576775, "body": "Yes, that&#39;s just an error in the post formatting. I find the formatting when posting somewhat confusing."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1496235353, "post_id": 44285015, "comment_id": 75577464, "body": "Paste your code, select the code, hit the <code>{}</code> button above the text box."}], "tags": [], "owner": {"reputation": 189, "user_id": 7539501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/737efa79bb3f5d3e081a6b6a479dec52?s=128&d=identicon&r=PG&f=1", "display_name": "nils", "link": "https://stackoverflow.com/users/7539501/nils"}, "is_accepted": false, "score": 0, "last_activity_date": 1496234173, "creation_date": 1496234173, "answer_id": 44285015, "question_id": 44284737, "link": "https://stackoverflow.com/questions/44284737/function-definition-not-being-recognized-by-function-body/44285015#44285015", "title": "Function definition not being recognized by function body", "body": "<p>It seems like there is a '`' at the end of your Lineshape Class after the semicolon, but maybe that one just comes from bad copy pasting.</p>\n"}], "owner": {"reputation": 37, "user_id": 6215693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb2fbda4a8154e3c304227e595ec112?s=128&d=identicon&r=PG&f=1", "display_name": "Alaanor", "link": "https://stackoverflow.com/users/6215693/alaanor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496234173, "creation_date": 1496233419, "last_edit_date": 1496233868, "question_id": 44284737, "link": "https://stackoverflow.com/questions/44284737/function-definition-not-being-recognized-by-function-body", "title": "Function definition not being recognized by function body", "body": "<p>I've created a class called <code>Payload</code>, and have a <code>std::vector&lt;Payload&gt;</code> in a class called <code>LineShape</code>. I've also created a function inside <code>LineShape</code> to get a <code>Payload</code> from the <code>std::vector</code> at a given index. This is <code>Payload</code>:</p>\n\n<p><strong>payload.h</strong></p>\n\n<pre><code>class Payload {\npublic:\n\nPayload (payload_type pType) {\n    type = pType;\n}\n\npayload_type getPayloadType() {\n    return type;\n}\n\nprivate:\n    payload_type type;\n};\n</code></pre>\n\n<p>and the function that is causing problems:</p>\n\n<p><strong>LineShape.h</strong></p>\n\n<pre><code>    Payload getPayloadAt(int index) {\n        return transfer.at(index);\n    }\n</code></pre>\n\n<p>Visual Studio returns the following error:</p>\n\n<pre><code>C2334    unexpected token(s) preceding '{'; skipping apparent function body\n</code></pre>\n\n<p>Apparently, this means it isn't recognizing the body of the function, as a function, due to the definition of the function, but it seems okay?</p>\n\n<p>EDIT: \nHere's the rest of the <code>LineShape</code> class:</p>\n\n<pre><code>class LineShape {\npublic:\n    sf::LineShape(sf::Vector2f i_point1, sf::Vector2f i_point2, float i_thickness = 5) {\n        point1 = i_point1;\n        point2 = i_point2;\n        thickness = i_thickness;\n\n        vertArr.setPrimitiveType(sf::LinesStrip);\n        vertArr.resize(2);\n\n        vertArr[0].position = point1;\n        vertArr[1].position = point2;\n\n        updateShape();\n    }\n\n    void updateShape() {\n        float sX = point1.x - point2.x;\n        float sY = point1.y - point2.y;\n\n        float sX2 = pow(sX, 2);\n        float sY2 = pow(sY, 2);\n\n        float sD = abs(sqrt(sX2 + sY2));\n        float shapeAngle_rad = std::atan2(sY, sX);\n        float shapeAngle = shapeAngle_rad * 180 / PI;\n\n        float shapeLength = sf::length(sf::Vector2f(point2 - point1));\n\n        arrShape.setSize(sf::Vector2f(shapeLength, thickness));\n        arrShape.setPosition(point2);\n        arrShape.setRotation(shapeAngle);\n    }\n\n    sf::Vector2f getPointPosition(sf::pointNum targetPoint) {\n        switch (targetPoint) {\n            case sf::pointNum::point1: {\n                return point1;\n            }\n            case sf::pointNum::point2: {\n                return point2;\n            }\n        };\n    }\n\n    void setPointPosition(sf::pointNum targetPoint, sf::Vector2f position) {\n        switch (targetPoint) {\n            case sf::pointNum::point1: {\n                point1 = position;\n            }\n            case sf::pointNum::point2: {\n                point2 = position;\n            }\n        };\n        updateShape();\n    }\n\n    void setColor(sf::Color color) {\n        arrShape.setFillColor(color);\n    }\n\n    void setOutlineColor(sf::Color color) {\n        arrShape.setOutlineColor(color);\n    }\n\n    void setOutlineWidth(float width) {\n        arrShape.setOutlineThickness(width);\n    }\n\n    void draw(sf::RenderWindow &amp;window) {\n        window.draw(arrShape);\n    }\n\n    // PAYLOADS\n\n    void addPayload(Payload payload, bool through_filter = true) {\n        if (through_filter) {\n            if (payload.getPayloadType() == transferFilter) {\n                transfer.push_back(payload);\n            }\n            else {\n                G_LOG::INCORRECT_ITEM_PASSED_TO_FILTER();\n            };\n        }\n        else {\n            transfer.push_back(payload);\n        };\n    }\n\n    Payload getPayloadAt(int index) {\n        return transfer.at(index);\n    }\n\n    std::vector&lt;Payload&gt; getTransfer() {\n        return transfer;\n    }\n\n    void setPayloadFilter(payload_type filter) {\n        transferFilter = filter;\n    }\n\nprivate:\n    sf::VertexArray vertArr;\n\n    sf::RectangleShape arrShape;\n\n    std::vector&lt;Payload&gt; transfer;\n    payload_type transferFilter;\n\n    sf::Vector2f point1;\n    sf::Vector2f point2;\n    float thickness;\n};`\n</code></pre>\n"}, {"tags": ["c++", "signals-slots", "qthread", "qprocess", "qobject"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496234068, "post_id": 44284587, "comment_id": 75576537, "body": "You don&#39;t show the code that is actually trying to create child <code>QObject</code>s for the <code>QProcess</code> but... there&#39;s at least one obvious problem: <code>this-&gt;proc</code> doesn&#39;t have the <code>processHandler</code> as its parent and so will <i>not</i> be moved to the new worker thread.  So, you&#39;re moving the <code>processHandler</code> to a new thread but not its associated <code>QProcess</code>."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496234205, "post_id": 44284587, "comment_id": 75576628, "body": "Also note that using <code>shared_ptr</code> to manage a <code>QObject</code> that is part of a hierarchy is generally a very bad idea -- both the <code>shared_ptr</code> <i>and</i> the object&#39;s parent will assume ownership and you&#39;ll probably end up with double-free errors and/or heap corruption."}, {"owner": {"reputation": 357, "user_id": 4058363, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1a2caa1c682d29cd8e4199c5054c2691?s=128&d=identicon&r=PG&f=1", "display_name": "QuestionMark", "link": "https://stackoverflow.com/users/4058363/questionmark"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496235056, "post_id": 44284587, "comment_id": 75577246, "body": "@G.M. I do not understand why <code>this-&gt;proc</code> parent is not <code>processHandler</code>, while <code>this-&gt;proc</code> is a memebr of the class."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496235342, "post_id": 44284587, "comment_id": 75577456, "body": "The fact that <code>proc</code> is a member of <code>processHandler</code> doesn&#39;t mean it&#39;s a child (in the <code>Qt</code> sense) of <code>processHandler</code>.  You need to fix that up yourself, e.g.<code>proc = new QProcess(this)</code> or <code>proc-&gt;setParent(this)</code>."}, {"owner": {"reputation": 357, "user_id": 4058363, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1a2caa1c682d29cd8e4199c5054c2691?s=128&d=identicon&r=PG&f=1", "display_name": "QuestionMark", "link": "https://stackoverflow.com/users/4058363/questionmark"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496235710, "post_id": 44284587, "comment_id": 75577720, "body": "@G.M. Thank you a lot! I&#39;ve absolutly missed that point! Solved my problem."}], "owner": {"reputation": 357, "user_id": 4058363, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1a2caa1c682d29cd8e4199c5054c2691?s=128&d=identicon&r=PG&f=1", "display_name": "QuestionMark", "link": "https://stackoverflow.com/users/4058363/questionmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496235519, "creation_date": 1496232995, "last_edit_date": 1496235519, "question_id": 44284587, "link": "https://stackoverflow.com/questions/44284587/moving-worker-children-to-the-qthread-qobject-cannot-create-children-for-a-p", "title": "Moving worker children to the QThread -&gt; QObject: Cannot create children for a parent that is in a different thread", "body": "<p>I have a <code>QProcess</code> handler class (<code>processHandler</code>) that is called inside my <code>GUI</code> class as follows:</p>\n\n<pre><code>this-&gt;thread = std::make_shared&lt;QThread&gt;();\nthis-&gt;proc   = std::make_shared&lt;processHandler&gt;();\n\nthis-&gt;proc-&gt;moveToThread(thread.get());\n\nconnect(this-&gt;thread.get(), SIGNAL(started()), this-&gt;proc.get(), SLOT(runProcess()));\n</code></pre>\n\n<p>The <code>runProcess</code> SLOT is defined as follows in the <code>processhandler.cpp</code>:</p>\n\n<pre><code>#include \"processhandler.h\"\n\nprocessHandler::processHandler(QObject *parent) : QObject(parent)\n{\n    this-&gt;proc = std::make_shared&lt;QProcess&gt;();\n    connect(this-&gt;proc.get(), SIGNAL(readyReadStandardError()), this, SLOT(printError()));\n    connect(this-&gt;proc.get(), SIGNAL(finished(int, QProcess::ExitStatus)), this, SLOT(onProcessFinished(int, QProcess::ExitStatus)));\n}\n\nprocessHandler::~processHandler(){}\n\nvoid processHandler::runProcess()\n{\n    this-&gt;proc-&gt;setWorkingDirectory(\"path/to/application/dir\");\n    this-&gt;proc-&gt;start(\"command\");\n}\n\nvoid processHandler::printError()\n{\n    QFile file(\"sys.log\");\n    if (file.open(QIODevice::WriteOnly | QIODevice::Append))\n    {\n        QTextStream stream(&amp;file);\n        QByteArray byteArray = this-&gt;proc-&gt;readAllStandardError();\n        QStringList strLines = QString(byteArray).split(\"\\n\");\n        QString now = QTime::currentTime().toString();\n    stream &lt;&lt; \"\\n\" &lt;&lt; \"Error Occurerd [\" + now + \"]: \";\n        foreach (QString line, strLines)\n        {\n            stream &lt;&lt; line &lt;&lt; endl;\n        }\n    }\n    file.flush();\n    file.close();\n}\n\nvoid processHandler::onProcessFinished(int exitCode, QProcess::ExitStatus status)\n{\n    QFile file(\"sys.log\");\n    if (file.open(QIODevice::WriteOnly | QIODevice::Append))\n    {\n        QTextStream stream(&amp;file);\n        QString now = QTime::currentTime().toString();\n        stream &lt;&lt; \"\\n\" &lt;&lt; \"Process Exit [\" + now + \"]: \" &lt;&lt; QString::number(exitCode) &lt;&lt; \" with status \" &lt;&lt;  QString::number(status);\n    }\n    file.flush();\n    file.close();\n\n    emit processFinished();\n}\n</code></pre>\n\n<p>Once my <code>thread</code> starts inside the <code>GUI</code> class (<code>this-&gt;thread-&gt;start();</code>), I recieve the following message:</p>\n\n<pre><code>QObject: Cannot create children for a parent that is in a different thread.\n(Parent is QProcess(0x15c50cc), parent's thread is QThread(0x15526f0), current thread is QThread(0x15bb654)\n</code></pre>\n\n<p>I understand from the message, that the children of <code>processHandler</code> live in another (<code>main</code>?) thread. But I have not find any step-by-step explanation on stack overflow, how to creat those children before moving to the <code>thread</code>. All hints or links that I missed are really appreciated.</p>\n"}, {"tags": ["c++", "ssl", "openssl", "ssl-certificate"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1496260573, "post_id": 44284541, "comment_id": 75593752, "body": "<b><i><code>CN=myhostname</code></i></b> is probably wrong. Hostnames always go in the <i>SAN</i>. If its present in the <i>CN</i>, then it must be present in the <i>SAN</i> too (you have to list it twice in this case). For more rules and reasons, see <a href=\"http://stackoverflow.com/a/21340898/608639\">How do you sign Certificate Signing Request with your Certification Authority</a> and <a href=\"http://stackoverflow.com/q/10175812/608639\">How to create a self-signed certificate with openssl?</a> You will also need to place the self-signed certificate in the appropriate trust store."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1496260747, "post_id": 44284541, "comment_id": 75593840, "body": "Please provide the URL you are using to connect to the server, and post the output of <code>openssl s_client -connect &lt;hostname&gt;:&lt;port&gt; -tls1 -servername &lt;hostname&gt; | openssl x509 -text -noout</code>. Also see <a href=\"https://wiki.openssl.org/index.php/SSL/TLS_Client\" rel=\"nofollow noreferrer\">TLS Client</a> on the OpenSSL wiki. It shows you how to well configure a <code>SSL_CTX</code> in the context of a client. Most of it applies to a server, too. Also, this may cause you trouble: <code>if (SSL_accept(ssl) != 1)</code>, especially on non-blocking sockets. I seem to recall non-blocking sockets often return <code>-1</code> and its not an error."}], "answers": [{"comments": [{"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 0, "creation_date": 1496234620, "post_id": 44284926, "comment_id": 75576920, "body": "Still getting the same error. Maybe I should copy the certificaion to a specific location?"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 0, "creation_date": 1496243358, "post_id": 44284926, "comment_id": 75583594, "body": "You try the sample code? <code>SSL_CTX_use_certificate_file</code> etc. should result in an error if not given a valid file (its a normal file path, so &#39;/absolute&#39; or otherwise relative the current directory). So if you are not getting an error in the server code, would seem you did something different from the example. The sample code, and <code>openssl s_client</code> on the same system gives me &quot;Verify return code: 18 (self signed certificate)&quot; using the self signed command line you showed."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 0, "creation_date": 1496243672, "post_id": 44284926, "comment_id": 75583808, "body": "Did you maybe skip some of the OpenSSL setup steps outside the code you posted? <code>OpenSSL_add_ssl_algorithms</code> for example?"}, {"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 0, "creation_date": 1496247118, "post_id": 44284926, "comment_id": 75586148, "body": "I think the problem is that I am using nonblocking sockets with BIO-s, therefore I have to handle the handshake differently."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "edited": false, "score": 1, "creation_date": 1496248434, "post_id": 44284926, "comment_id": 75586933, "body": "Yes, if you have a non-blocking socket, you need to handle <code>SSL_ERROR_WANT_READ&#47;WRITE</code> since it is multiple round trips to establish a TLS connection. Similar applies client side. But in that case you should be seeing <code>SSL_accept</code> fail with such an error and then in the message you print (note that <code>SSL_accept</code> and <code>SSL_connect</code> are both just thin wrappers around <code>SSL_do_handshake</code>)."}], "tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 0, "last_activity_date": 1496243838, "last_edit_date": 1496243838, "creation_date": 1496233960, "answer_id": 44284926, "question_id": 44284541, "link": "https://stackoverflow.com/questions/44284541/no-peer-certificate-available-with-self-signed-certificate/44284926#44284926", "title": "No peer certificate available with self signed certificate", "body": "<p>Try <code>SSL_new</code>, only after fully setting up the context and make sure you have <code>OpenSSL_add_ssl_algorithms</code> at the start of your program. The 1.0.2 docs says it \"inherits\", but not sure if that effectively means it copies the settings at that time and further changes are not applied.</p>\n\n<p><a href=\"https://www.openssl.org/docs/man1.0.2/ssl/SSL_new.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.0.2/ssl/SSL_new.html</a></p>\n\n<blockquote>\n  <p>The new structure inherits the settings of the underlying context ctx: connection method (SSLv2/v3/TLSv1), options, verification settings, timeout settings.</p>\n</blockquote>\n\n<p>There is also an example on the <a href=\"https://wiki.openssl.org/index.php/Simple_TLS_Server\" rel=\"nofollow noreferrer\">OpenSSL wiki</a></p>\n\n<p>Which without error handling goes along the lines of:</p>\n\n<pre><code>// General initialisation\nSSL_load_error_strings();\nOpenSSL_add_ssl_algorithms();\n// Context for a server socket\nctx = SSL_CTX_new(SSLv23_server_method ()); //Note SSLv23_server_method in example is deprecated in favour of TLS_server_method for new versions. TLSv1_2_server_method will force TLS 1.2.\nSSL_CTX_set_ecdh_auto(ctx, 1);\nSSL_CTX_use_certificate_file(ctx, \"cert.pem\", SSL_FILETYPE_PEM);\nSSL_CTX_use_PrivateKey_file(ctx, \"key.pem\", SSL_FILETYPE_PEM);\n// Only after all certificates, and other config is set\nssl = SSL_new(ctx);\nSSL_set_fd(ssl, client_socket);\nSSL_accept(ssl);\n// Use SSL_write and SSL_read\nSSL_free(ssl);\nclose(client_socket);\n// OpenSSL cleanup\nEVP_cleanup();\n</code></pre>\n"}], "owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3908, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1496243838, "creation_date": 1496232860, "question_id": 44284541, "link": "https://stackoverflow.com/questions/44284541/no-peer-certificate-available-with-self-signed-certificate", "title": "No peer certificate available with self signed certificate", "body": "<p>I am writing a server which accepts SSL connections. I have generated a self signed certificate:</p>\n\n<pre><code>openssl req -new -x509 -days 365 -nodes -out self.pem -keyout self.pem -subj \"/CN=myhostname\"\n</code></pre>\n\n<p><code>SSL_accept</code> fails with this message:</p>\n\n<pre><code>140121764049248:error:1408A0C1:SSL routines:ssl3_get_client_hello:no shared cipher:s3_srvr.c:1417:\n</code></pre>\n\n<p>Here is a part of the server code:</p>\n\n<pre><code>  sslCtx = (SSL_CTX_new(SSLv23_server_method());\n  if (!sslCtx){\n      ERR_print_errors_fp(stderr);\n    throw runtime_error(\"SSL_CTX_new failed\");\n  }\n  ssl = SSL_new(sslCtx);\n  if (!ssl)\n    throw runtime_error(\"SSL_new failed\");\n\n  if (SSL_CTX_use_PrivateKey_file(sslCtx, keyFile.c_str(),\n                                  SSL_FILETYPE_PEM) != 1)\n    throw runtime_error(\"Unable to load private key file\" + keyFile);\n\n  if (SSL_CTX_use_certificate_file(sslCtx, certFile.c_str(),\n                                   SSL_FILETYPE_PEM) != 1)\n    throw runtime_error(\"Unable to load certificate file\" + certFile);\n\n\n  if (SSL_set_fd(ssl, socket) != 1)\n    throw runtime_error(\"SSL_set_fd failed\");\n\n  if (SSL_accept(ssl) != 1){\n     ERR_print_errors_fp(stderr);\n    throw runtime_error(\"SSL_accept failed\");\n  }\n</code></pre>\n\n<p>I tried to test the server:</p>\n\n<pre><code>openssl s_client -cipher RSA -connect myhostname:33221 -tls1 -CApath . -servername myhostname\n</code></pre>\n\n<p>and got</p>\n\n<pre><code>CONNECTED(00000003)\n139898773520408:error:14094410:SSL routines:ssl3_read_bytes:sslv3 alert handshake failure:s3_pkt.c:1487:SSL alert number 40\n139898773520408:error:1409E0E5:SSL routines:ssl3_write_bytes:ssl handshake failure:s3_pkt.c:656:\n---\nno peer certificate available\n---\nNo client certificate CA names sent\n---\nSSL handshake has read 7 bytes and written 0 bytes\n---\nNew, (NONE), Cipher is (NONE)\nSecure Renegotiation IS NOT supported\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nSSL-Session:\n    Protocol  : TLSv1\n    Cipher    : 0000\n    Session-ID: \n    Session-ID-ctx: \n    Master-Key: \n    Key-Arg   : None\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    Start Time: 1496232544\n    Timeout   : 7200 (sec)\n    Verify return code: 0 (ok)\n---\n</code></pre>\n\n<p>I am using OpenSSL 1.0.2g.</p>\n"}, {"tags": ["c++", "unix", "real-time", "ipc", "producer-consumer"], "comments": [{"owner": {"reputation": 8064, "user_id": 5910563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/snpEp.jpg?s=128&g=1", "display_name": "Horia Coman", "link": "https://stackoverflow.com/users/5910563/horia-coman"}, "edited": false, "score": 0, "creation_date": 1496233047, "post_id": 44284496, "comment_id": 75575799, "body": "I suppose you want the time between an item being produced and it being consumed to be as small as possible, no? So the consumer itself should be a realtime application as well. Otherwise you could just consume things from the consume at your leisure, with a process of regular priority, and let the kernel take care of not having the processes step on their toes."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8091805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31733256bca157d804cbb7fa2a3194d1?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer Golomb", "link": "https://stackoverflow.com/users/8091805/tomer-golomb"}, "edited": false, "score": 0, "creation_date": 1496245522, "post_id": 44285197, "comment_id": 75585102, "body": "thanks, I didn&#39;t know about Timer Stamp Counter, I will look on that. It still not enough since the consumer still needs to wait for the next context switch."}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "reply_to_user": {"reputation": 21, "user_id": 8091805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31733256bca157d804cbb7fa2a3194d1?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer Golomb", "link": "https://stackoverflow.com/users/8091805/tomer-golomb"}, "edited": false, "score": 0, "creation_date": 1496245926, "post_id": 44285197, "comment_id": 75585395, "body": "@TomerGolomb what do you mean? Consumer must poll for an event to avoid any context switches (#2)"}], "tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1496234697, "creation_date": 1496234697, "answer_id": 44285197, "question_id": 44284496, "link": "https://stackoverflow.com/questions/44284496/real-time-ipc-in-unix-userspace/44285197#44285197", "title": "Real time IPC in Unix userspace", "body": "<ol>\n<li>Use a shared memory between the producer and consumer.</li>\n<li>Poll for an event on consumer side to minimize the delay.</li>\n<li>Pin consumer thread to a CPU to prevent context switches (CPU affinity).</li>\n<li>Use Timer Stamp Counter (TSC) to avoid long \"get time\" syscalls.</li>\n</ol>\n\n<p>That will give you the most precise results.</p>\n\n<p>Sure, having other requirements in hand, you could sacrifice some of the items above to make your consumer application more CPU-efficient or less complicated... It is up to you.</p>\n"}], "owner": {"reputation": 21, "user_id": 8091805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31733256bca157d804cbb7fa2a3194d1?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer Golomb", "link": "https://stackoverflow.com/users/8091805/tomer-golomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1496234697, "creation_date": 1496232716, "question_id": 44284496, "link": "https://stackoverflow.com/questions/44284496/real-time-ipc-in-unix-userspace", "title": "Real time IPC in Unix userspace", "body": "<p>I wanted to ask for the best approach for the following problem:\nI have two distinct processes: producer, and consumer.\nThe producer produces items, where each item is an unsigned int. and the consumer consumes them, the different from regular consumer producer problem is that the consumer needs to know the exact time of the item production.\nThe consumer cannot trust the producer, so the producer shouldn't supply the time together with the item, what force the consumer to ask the system for the current time at the moment he consumes an item.\nAll this need to be performed with less as possibles effects on the producer since the producer is a real time application.</p>\n\n<p>I tried to read about IPC mechanism in Unix but I didn't find something that can meet those constraints.\nThe consumer and the producer are written in c++.</p>\n\n<p>Any idea would be welcome,\nThanks in advance </p>\n"}, {"tags": ["c++", "linux", "process", "pid", "epoll"], "comments": [{"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 1, "creation_date": 1496232484, "post_id": 44284276, "comment_id": 75575371, "body": "You can use <code>waitpid</code> (<code>man 2 wait</code>) to sleep until the process is finished."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1496233288, "post_id": 44284276, "comment_id": 75575972, "body": "But I want the rest of the program to be operational. Also I wont only wait for 1 pid, but multiple. Thats why I would like that in my polling mechanism."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1496233918, "post_id": 44284276, "comment_id": 75576438, "body": "You can have a pipe by process and push something into it at the end of the process. On the &quot;master&quot; process, you <code>select</code> on the pipe. Once a process finish, it write in the pipe. <code>select</code> stop waiting (since there is something to read in the pipe)."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1496235807, "post_id": 44284276, "comment_id": 75577795, "body": "If the PID isn&#39;t your child, your design is racy, because such a PID is a moving target (PIDs get recycled). If the PID is your  child, you don&#39;t need to poll, because the kernel will notify you automatically by sending you the SIGCHLD signal and the PID will remain in limbo (as a zombie) until you reap it with a <code>wait*</code> syscall."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 6584831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20d9fc618803abab0b609bf0f8c2cad6?s=128&d=identicon&r=PG&f=1", "display_name": "drumz", "link": "https://stackoverflow.com/users/6584831/drumz"}, "is_accepted": false, "score": 0, "last_activity_date": 1496235522, "creation_date": 1496235522, "answer_id": 44285504, "question_id": 44284276, "link": "https://stackoverflow.com/questions/44284276/linux-wait-for-a-pid-to-die/44285504#44285504", "title": "Linux: Wait for a PID to die", "body": "<p>I recommend you to use <code>waitpid</code> at the end of your execution. You can wait for multiple pid at the end of your program. Just store your pid in a <code>pid_t *</code> and wait for all of them (one by one). Your main process will wait for all his children so you will not have any zombie</p>\n"}, {"tags": [], "owner": {"reputation": 1469, "user_id": 3390390, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000831114260/picture?type=large", "display_name": "Edward Tomasz Napierala", "link": "https://stackoverflow.com/users/3390390/edward-tomasz-napierala"}, "is_accepted": false, "score": 1, "last_activity_date": 1496411988, "creation_date": 1496411988, "answer_id": 44330771, "question_id": 44284276, "link": "https://stackoverflow.com/questions/44284276/linux-wait-for-a-pid-to-die/44330771#44330771", "title": "Linux: Wait for a PID to die", "body": "<p>Register a handler for SIGCHLD (empty one, you just want the signal to interrupt your call to select() or whatever other function you're normally waiting on), and then check whether the waiting function returned EINTR.  If so - it was interrupted by a signal; check the status of your children by calling wait4() with WNOHANG. </p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1496411988, "creation_date": 1496232121, "last_edit_date": 1496237761, "question_id": 44284276, "link": "https://stackoverflow.com/questions/44284276/linux-wait-for-a-pid-to-die", "title": "Linux: Wait for a PID to die", "body": "<p>I have a program with a central event mechanism that uses either select, epoll or kevent (platform dependend, OSX, Linux and FreeBSD).</p>\n\n<p>Now I have a problem that I need to wait for a process to finish execution. All I got from this process is its PID. Is there a way to wait with the above mentioned mechanism for the PID to finish?</p>\n\n<p>My current idea is to create a pipe for the PID and poll the PID by using <code>kill</code> with signal 0 to check if its alive. If not, write a byte to the pipe to wake up the polling mechnism. But I dislike the idea of needing an extra thread for this issue.</p>\n\n<p>Thanks f\u00fcr every answer!</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "visual-studio-2017"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1496232679, "post_id": 44284065, "comment_id": 75575522, "body": "Maybe you just need to enable <code>Show all files</code> item in <code>Solution Explorer</code> toolbar?"}, {"owner": {"reputation": 928, "user_id": 6361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5YiAk.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/6361122/alexander"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1496233356, "post_id": 44284065, "comment_id": 75576011, "body": "Yes - you are right !"}, {"owner": {"reputation": 928, "user_id": 6361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5YiAk.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/6361122/alexander"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1496233382, "post_id": 44284065, "comment_id": 75576023, "body": "Add your answer , please ...."}], "answers": [{"comments": [{"owner": {"reputation": 928, "user_id": 6361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5YiAk.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/6361122/alexander"}, "edited": false, "score": 1, "creation_date": 1496233514, "post_id": 44284648, "comment_id": 75576120, "body": "This is not exactly what I want - @VTT give more exactly answer in comment."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 928, "user_id": 6361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5YiAk.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/6361122/alexander"}, "edited": false, "score": 1, "creation_date": 1496233642, "post_id": 44284648, "comment_id": 75576231, "body": "@Alexander: This answers the question you asked. If you are looking for something else, you need to ask that."}, {"owner": {"reputation": 825, "user_id": 1532334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/36b3d6ec96eda547f1e7adadb59a5675?s=128&d=identicon&r=PG", "display_name": "Nick Turner", "link": "https://stackoverflow.com/users/1532334/nick-turner"}, "edited": false, "score": 0, "creation_date": 1562339014, "post_id": 44284648, "comment_id": 100355559, "body": "It&#39;s not working, because you can&#39;t add any files to the folder from &quot;Add existing..&quot;"}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 1, "last_activity_date": 1496233163, "creation_date": 1496233163, "answer_id": 44284648, "question_id": 44284065, "link": "https://stackoverflow.com/questions/44284065/cant-create-folder-inside-shared-project-in-visual-studio-2017/44284648#44284648", "title": "Can&#39;t create folder inside Shared project in Visual Studio 2017", "body": "<p>Filters are logical groupings of files, that aren't reflected in the filesystem. Creating filters is the only option available when looking at the <em>solution</em> view. If you want to add a filesystem folder instead you have to toggle between <em>solution</em> and <em>folder</em> view of the <em>Solution Explorer</em>:<br>\n<a href=\"https://i.stack.imgur.com/b7x8L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b7x8L.png\" alt=\"Toggle solution and folder view\"></a></p>\n\n<p>Once in <em>folder</em> view, you can create a filesystem folder:<br>\n<a href=\"https://i.stack.imgur.com/HxpBg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HxpBg.png\" alt=\"Add folder menu entry\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1496234931, "creation_date": 1496234931, "answer_id": 44285285, "question_id": 44284065, "link": "https://stackoverflow.com/questions/44284065/cant-create-folder-inside-shared-project-in-visual-studio-2017/44285285#44285285", "title": "Can&#39;t create folder inside Shared project in Visual Studio 2017", "body": "<p>Maybe you just need to enable <code>Show all files</code> item in <code>Solution Explorer</code> toolbar?\n<a href=\"https://i.stack.imgur.com/rxrpo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rxrpo.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 928, "user_id": 6361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5YiAk.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/6361122/alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1496315392, "creation_date": 1496315392, "answer_id": 44305929, "question_id": 44284065, "link": "https://stackoverflow.com/questions/44284065/cant-create-folder-inside-shared-project-in-visual-studio-2017/44305929#44305929", "title": "Can&#39;t create folder inside Shared project in Visual Studio 2017", "body": "<p>In general \"enable Show all files item in Solution Explorer toolbar\" is good desigion, but if you reopen vs2017 you need everytime enable it. So best desigion - change your settings in <em>Tools- Options.. - VC++ Project Settings - Solution Explorer Mode</em> - to the <strong>Show all files</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/O1xDV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O1xDV.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 928, "user_id": 6361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5YiAk.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/6361122/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 44285285, "answer_count": 3, "score": 0, "last_activity_date": 1496315392, "creation_date": 1496231520, "last_edit_date": 1496234497, "question_id": 44284065, "link": "https://stackoverflow.com/questions/44284065/cant-create-folder-inside-shared-project-in-visual-studio-2017", "title": "Can&#39;t create folder inside Shared project in Visual Studio 2017", "body": "<p>Can't create folder inside Shared project in Visual Studio 2017. On place context menu I see only \"<strong>New Filter</strong>\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/TNJqy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TNJqy.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Is it in general possible  - create folder in this type project ?</p>\n\n<p>Update 1: - I mean create folder not in <strong>Folder view</strong>...</p>\n"}, {"tags": ["c++", "c", "linux", "ipc", "shared-memory"], "comments": [{"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 3, "creation_date": 1496231338, "post_id": 44283900, "comment_id": 75574421, "body": "You need to use <code>shmctl(shmid, IPC_RMID, NULL);</code> to remove the shared memory segment."}, {"owner": {"reputation": 243, "user_id": 7333045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b02e6dfe639726497e6096b5e5ee0cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Wonter", "link": "https://stackoverflow.com/users/7333045/wonter"}, "reply_to_user": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 1, "creation_date": 1496231602, "post_id": 44283900, "comment_id": 75574653, "body": "when the shmid_ds::shm_nattch == 0, the shared memory segment will be removed automatically????@Gaurav Pathak"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1496232923, "post_id": 44283900, "comment_id": 75575701, "body": "No, it just indicates whether your shared memory is attached with any process or not. If shmid_ds-&gt;shm_nattach == 0 then it means it can be attached to another process."}], "answers": [{"tags": [], "owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "is_accepted": true, "score": 2, "last_activity_date": 1496233175, "last_edit_date": 1496233175, "creation_date": 1496232900, "answer_id": 44284553, "question_id": 44283900, "link": "https://stackoverflow.com/questions/44283900/shared-memory-segment-cant-be-removed-after-call-shmdt/44284553#44284553", "title": "shared memory segment can&#39;t be removed after call shmdt()", "body": "<blockquote>\n  <p>shmdt() detaches the shared memory segment located at the address\n  specified by shmaddr from the address space of the calling process.\n  The to-be-detached segment must be currently attached with shmaddr\n  equal to the value returned by the attaching shmat() call.</p>\n</blockquote>\n\n<p>shmdt only <strong>detaches</strong> the calling process from attached memory. It will <strong>not</strong> <strong>remove</strong> the shared memory created by the process.<br>\nFor more information please read the man page of the respective system calls.</p>\n"}], "owner": {"reputation": 243, "user_id": 7333045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b02e6dfe639726497e6096b5e5ee0cc8?s=128&d=identicon&r=PG&f=1", "display_name": "Wonter", "link": "https://stackoverflow.com/users/7333045/wonter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 44284553, "answer_count": 1, "score": 0, "last_activity_date": 1496233175, "creation_date": 1496231135, "last_edit_date": 1496232148, "question_id": 44283900, "link": "https://stackoverflow.com/questions/44283900/shared-memory-segment-cant-be-removed-after-call-shmdt", "title": "shared memory segment can&#39;t be removed after call shmdt()", "body": "<p>i called shmdt() successfully, but shared memory segment can't be removed..</p>\n\n<p>this is my code:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    key_t key = ftok(\".\", 'T');\n    if (key == -1) {\n        fprintf(stderr, \"get key failed, error: %s\\n\", strerror(errno));\n        exit(1);\n    }\n\n    int shmid = shmget(key, sizeof(int) * 10, IPC_CREAT);\n    if (shmid == -1) {\n        fprintf(stderr, \"get shmid failed, error: %s\\n\", strerror(errno));\n        exit(1);\n    }\n\n    void* shmaddr = shmat(shmid, NULL, 0);\n    if (shmaddr == (void*)-1) {\n        fprintf(stderr, \"get shmaddr failed, error: %s\\n\", strerror(errno));\n        exit(1);\n    }\n\n    if (shmdt(shmaddr) == -1) {\n        fprintf(stderr, \"detach failed, error: %s\\n\", strerror(errno));\n        exit(1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>after that, i execute <code>ipcs -m</code></p>\n\n<pre><code># ipcs -m\n\n------ Shared Memory Segments --------\nkey        shmid      owner      perms      bytes      nattch     status      \n0x00000000 1179648    root       0          4          0                       \n0x00000000 1212417    root       0          4          0                       \n0x00000000 1245186    root       0          4          0                       \n0x00000000 1277955    root       0          4          0                       \n0x00000000 1310724    root       0          4          0                       \n0x00000000 1343493    root       0          4          0                       \n0x00000000 1376262    root       0          4          0                       \n0x00000000 1409031    root       0          4          0                       \n0x00000000 1441800    root       0          4          0                       \n0x00000000 1474569    root       0          4          0                       \n0x54010004 1671178    root       0          40         0                       \n0x00000000 1540107    root       0          4          0  \n</code></pre>\n"}, {"tags": ["c++", "windows", "dll", "bluetooth-lowenergy"], "comments": [{"owner": {"reputation": 51, "user_id": 5660308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6cb63a9c951ee77445a591e883424?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5660308/steve"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496236144, "post_id": 44283744, "comment_id": 75578091, "body": "I implemented the BLE device and all of the peripheral code for the GATT services on there, so I have a reasonable understanding of the BLE protocol at that level. I have also implemented BLE Central functionality on microcontrollers, but not in Windows. What is the reason you think I would not be able to develop this for Windows, are there not any well documented libraries to do so?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496242268, "post_id": 44283744, "comment_id": 75582776, "body": "<i>&quot;are there not any well documented libraries [...]?&quot;</i> There are. There is also documentation about what is on-topic for this site (see <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>). Availability of documentation doesn&#39;t seem to make a difference for you."}, {"owner": {"reputation": 51, "user_id": 5660308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6cb63a9c951ee77445a591e883424?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5660308/steve"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1496244382, "post_id": 44283744, "comment_id": 75584357, "body": "If you think my question was not well suited for where I posted it, then the most useful thing to do would be to suggest where I should have put this, so I can use the site more appropriately in future. However if your time is best spent making unhelpful comments that benefit no-one, then congratulations for having nothing better to do."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496244976, "post_id": 44283744, "comment_id": 75584750, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn, how this place works. The most useful thing to do with a question that&#39;s off-topic is to cast a close-vote. I did."}, {"owner": {"reputation": 2031, "user_id": 1099820, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d85cfde395796ff8d2093974f53173b8?s=128&d=identicon&r=PG", "display_name": "Brian Reinhold", "link": "https://stackoverflow.com/users/1099820/brian-reinhold"}, "edited": false, "score": 1, "creation_date": 1554897465, "post_id": 44283744, "comment_id": 97918036, "body": "I agree with Steve. This is a good question which I am also seeking an answer to. I am looking for C++ BTLE API on Windows (10) and have not found it. I was convinced it did not exist. From some of the responses here I get a renewed hope.I cannot deal with the Assembly nightmare of C#."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5660308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6cb63a9c951ee77445a591e883424?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5660308/steve"}, "edited": false, "score": 1, "creation_date": 1496236358, "post_id": 44284602, "comment_id": 75578254, "body": "I have had a look around, the only thing I found was references to sample projects for UWP projects that seem to have lots of different BLE functionality bundled together and quite tightly coupled with a GUI. I&#39;m not very familiar with UWP, and couldn&#39;t find much documentation to go with the samples, so was having a lot of difficulty stripping it down to what I needed, and how to correctly implement the functionality I needed into a DLL.  I&#39;ll have a look at the libraries you&#39;ve suggested. Thanks."}, {"owner": {"reputation": 51, "user_id": 5660308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6cb63a9c951ee77445a591e883424?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5660308/steve"}, "edited": false, "score": 0, "creation_date": 1496245816, "post_id": 44284602, "comment_id": 75585314, "body": "The first link you suggested is exactly the kind of thing I was looking for, when opening the solution in VS2017 there are a lot of errors, but there are some helpful instruction <a href=\"http://blogs.microsoft.co.il/pavely/2012/09/29/using-ccx-in-desktop-apps/\" rel=\"nofollow noreferrer\">here</a>  However I am unable to determine where the platform.winmd metadata file is stored in VS2017 installation. Any ideas?   Thanks again."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 51, "user_id": 5660308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6cb63a9c951ee77445a591e883424?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5660308/steve"}, "edited": false, "score": 0, "creation_date": 1496253042, "post_id": 44284602, "comment_id": 75589621, "body": "@Steve: You don&#39;t need to use C++/CX to consume WinRT types. A Standard C++ language projection exists: <a href=\"https://github.com/Microsoft/cppwinrt\" rel=\"nofollow noreferrer\">C++/WinRT</a>."}, {"owner": {"reputation": 2031, "user_id": 1099820, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d85cfde395796ff8d2093974f53173b8?s=128&d=identicon&r=PG", "display_name": "Brian Reinhold", "link": "https://stackoverflow.com/users/1099820/brian-reinhold"}, "edited": false, "score": 0, "creation_date": 1555082973, "post_id": 44284602, "comment_id": 97998726, "body": "Its 2019 and the Visual Studio C++/WinRT base project is not consistent with Microsoft&#39;s documentation on getting started with C++/WinRT. I am vry confused with the new structure (compared to that documented) and don&#39;t understand the role of the IDL file. Anyone have any ideas on how to get started with this?"}], "tags": [], "owner": {"reputation": 11621, "user_id": 556495, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a96b42c52adae7773b71378ca52a2fb?s=128&d=identicon&r=PG", "display_name": "Emil", "link": "https://stackoverflow.com/users/556495/emil"}, "is_accepted": false, "score": 4, "last_activity_date": 1496239300, "last_edit_date": 1496239300, "creation_date": 1496233038, "answer_id": 44284602, "question_id": 44283744, "link": "https://stackoverflow.com/questions/44283744/c-ble-central-development-for-windows/44284602#44284602", "title": "C++ BLE Central development for Windows", "body": "<p>You can use the WinRT BLE libraries for C++, which have the same API as if you would write in C#. You for example have <a href=\"https://github.com/urish/win-ble-cpp/tree/master/BLEScanner\" rel=\"nofollow noreferrer\">https://github.com/urish/win-ble-cpp/tree/master/BLEScanner</a>.</p>\n\n<p>If you want to use the raw C libraries they work as well, but do not have all features: <a href=\"https://social.msdn.microsoft.com/Forums/en-US/bad452cb-4fc2-4a86-9b60-070b43577cc9/is-there-a-simple-example-desktop-programming-c-for-bluetooth-low-energy-devices?forum=wdk\" rel=\"nofollow noreferrer\">https://social.msdn.microsoft.com/Forums/en-US/bad452cb-4fc2-4a86-9b60-070b43577cc9/is-there-a-simple-example-desktop-programming-c-for-bluetooth-low-energy-devices?forum=wdk</a></p>\n"}], "owner": {"reputation": 51, "user_id": 5660308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6cb63a9c951ee77445a591e883424?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5660308/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11091, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1496239300, "creation_date": 1496230662, "question_id": 44283744, "link": "https://stackoverflow.com/questions/44283744/c-ble-central-development-for-windows", "title": "C++ BLE Central development for Windows", "body": "<p>I need to develop a C++ DLL in and for Windows 10, that is capable of scanning for, connecting to and exchanging data with a Bluetooth Low Energy (BLE) device.</p>\n\n<p>Can someone please advise on an appropriate library, tutorial or relevant documentation that will enable me to develop a C++ DLL to implement BLE Central functionality.</p>\n"}]