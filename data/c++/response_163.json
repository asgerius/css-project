[{"tags": ["c++", "function", "header", "prototype"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519257175, "post_id": 48917380, "comment_id": 84841355, "body": "What is the actual and complete error message? (Contrary to what you might think, most people don&#39;t care to commit Microsoft&#39;s error codes to memory.)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519257219, "post_id": 48917380, "comment_id": 84841366, "body": "As a side note, <code>Ctrl+A</code>, <code>Ctrl+K</code>, <code>Ctrl+F</code> will fix the indentation for you."}, {"owner": {"reputation": 11, "user_id": 8738439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb853dba18875f4eadc0af01217bae1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/8738439/reed"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519278205, "post_id": 48917380, "comment_id": 84847104, "body": "I have 2 errors at the moment. The first is C2228 - left of &#39;.gameWinner&#39; must have class/struct/union. I have the same error 2 more times - &#39;.winCount&#39; and &#39;.winCount2&#39;. This is in Main_Idea.cpp. I also have the error C2660 ::displayResults&#39;: function does not take 1 argument. All are in the same line in the Main_Idea.cpp. Thanks for the Crtl+"}, {"owner": {"reputation": 11, "user_id": 8738439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb853dba18875f4eadc0af01217bae1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/8738439/reed"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519281544, "post_id": 48917380, "comment_id": 84848409, "body": "game.displayResults(game.displayResults, game.displayResults, game.displayResults); or \tgame.displayResults(game.displayResults.gameWinner, game.displayResults.winCount1, game.displayResults.winCount2);"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519282832, "post_id": 48917380, "comment_id": 84849012, "body": "<code>game.displayResults</code> is a function, not an object, and <code>displayResults</code> is not supposed to take any parameters but display the values of its own member variables. And there is no point in introducing any pointers here."}, {"owner": {"reputation": 11, "user_id": 8738439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb853dba18875f4eadc0af01217bae1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/8738439/reed"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519340205, "post_id": 48917380, "comment_id": 84884105, "body": "const int NUM_LETTERS = 10; \tchar letters[10] = { &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39; };"}, {"owner": {"reputation": 11, "user_id": 8738439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb853dba18875f4eadc0af01217bae1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/8738439/reed"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519358313, "post_id": 48917380, "comment_id": 84888738, "body": "const int NUM_LETTERS = 10;  In the Header File char letters[10] = { &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39; }; In the Main_Idea.cpp NL.Letters(NL.letters, NL.NUM_LETTERS);  I am trying to do the same with game.displayResults(.....);"}], "owner": {"reputation": 11, "user_id": 8738439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb853dba18875f4eadc0af01217bae1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/8738439/reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1519358856, "creation_date": 1519256666, "last_edit_date": 1519358856, "question_id": 48917380, "link": "https://stackoverflow.com/questions/48917380/working-with-header-files-and-the-prototypes-within-header-files-c2228-error", "title": "Working with Header Files and the prototypes within Header files - C2228 Error", "body": "<p>In a header file\nconst int NUM_LETTERS = 10;\n char letters[10] = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J' };</p>\n\n<p>In the Main_Idea.cpp NL.Letters(NL.letters, NL.NUM_LETTERS); </p>\n\n<p>I am trying to do the similar with game.displayResults(.....); </p>\n\n<p>I have 2 header files and one works and the other does not work. The 1st header file runs correctly, and I believe it because their is no data in the prototype function. When I run the 2nd Header file, it has data within the void displayResults(int gCount, int wCount1, int wCount2), and how to put in game.displayResults(.....); within the Main_Idea.cpp  Thanks!</p>\n\n<p>The first I will just include parts of the code: This is in the Header File. </p>\n\n<pre><code>    void EnterB();\n    double residential();\n    double business();\n</code></pre>\n\n<p>This is in the cpp</p>\n\n<pre><code>    Billing B;\n    Billing* PtrB = &amp;B;\n\n    B.EnterB();\n   PtrB-&gt;EnterB();\n</code></pre>\n\n<p>That works. The next one doesn't. </p>\n\n<p>This is the Header File</p>\n\n<pre><code>#ifndef RPS_H_h\n#define RPS_H_h\n\nenum objectType{Rock, Paper, Scissors};  //Put in class?\n\n\nclass RPS_H\n{\nprivate:\n//enum objectType{Rock, Paper, Scissors};\nint gameCount = 0;\nint winCount1 = 0;\nint winCount2 = 0;\nint gameWinner;\nchar response;\nchar selection1;\nchar selection2;\nobjectType play1;\nobjectType play2;\n\n  public:\nRPS_H();\nvoid Enter();\nvoid displayRules();\nobjectType retrievePlay(char selection);\nbool validSelection(char selection);\nvoid convertEnum(objectType object);\nobjectType winningObject(objectType play1, objectType play2);\nvoid gameResult(objectType play1, objectType play2, int&amp; winner);\nvoid displayResults(int gCount, int wCount1, int wCount2);  //, int wCount1, int wCount2\n\n~RPS_H();\n };\n\n #endif // !RPS_H_h\n</code></pre>\n\n<p>RPS_H.cpp</p>\n\n<pre><code> #include \"RPS_H.h\"\n  #include &lt;iostream&gt;\n\n  using namespace std;\n\n\n  RPS_H::RPS_H()\n {\n }\n\n  void RPS_H::Enter()\n   {\ndisplayRules();\ncout &lt;&lt; \"Enter either a Y or y to play the game: \";\ncin &gt;&gt; response;\ncout &lt;&lt; endl;\n\nwhile (response == 'Y' || 'y')\n\n{\n    cout &lt;&lt; \"Player 1 enter your choice: \";\n    cin &gt;&gt; selection1;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"Player 2 enter your choice: \";\n    cin &gt;&gt; selection2;\n    cout &lt;&lt; endl;\n\n    if (validSelection(selection1) &amp;&amp; validSelection(selection2))\n    {\n        play1 = retrievePlay(selection1);\n        play2 = retrievePlay(selection2);\n        gameCount++;\n        gameResult(play1, play2, gameWinner);\n        if (gameWinner == 1)\n            winCount1++;\n        else\n            if (gameWinner == 2)\n                winCount2++;\n    }\n    cout &lt;&lt; \"Enter Y/y to play the game again: \";\n    cin &gt;&gt; response;\n    cout &lt;&lt; endl;\n}\n\ndisplayResults(gameCount, winCount1, winCount2);\n   }\n\n    void RPS_H::displayRules()\n   {\ncout &lt;&lt; \"Welcome to ...\";\n    }\n\n    bool RPS_H::validSelection(char selection)  // change\n    {\nswitch (selection)\n{\ncase 'R': case 'r':\ncase 'P': case 'p':\ncase 'S': case 's': return true;\ndefault:\n    return false;\n}\n   }\n\n      objectType RPS_H::retrievePlay(char selection)\n    {\nobjectType object;\nswitch (selection)\n{\ncase 'R': case 'r': object = Rock;\ncase 'P': case 'p': object = Paper;\ncase 'S': case 's': object = Scissors;\n\n}\nreturn object;\n   }\n\n    void RPS_H::convertEnum(objectType object)\n    {\nswitch (object)\n{\ncase Rock:\n    break;\ncase Paper:\n    break;\ncase Scissors:\n    break;\n\n}\n  }\n\n     objectType RPS_H::winningObject(objectType play1, objectType play2)\n   {\nif ((play1 == Rock &amp;&amp; play2 == Scissors)\n    || (play2 == Rock &amp;&amp; play1 == Scissors))\n    return Rock;\nelse\n    if((play1 == Rock &amp;&amp; play2 == Paper)\n    || (play2 == Rock &amp;&amp; play1 == Paper))\n    return Paper;\nelse\n    return Scissors;\n    }\n\n\n      void RPS_H::gameResult(objectType play1, objectType play2, int&amp; winner)\n    {\nobjectType winnerObject;\n\nif (play1 == play2)\n{\n    winner = 0;\n    cout &lt;&lt; \"Both players selected \";\n    convertEnum(play1);\n    cout &lt;&lt; \". This game is a tie.\" &lt;&lt; endl;\n\n}\nelse\n{\n    winnerObject = winningObject(play1, play2);\n\n    cout &lt;&lt; \"Player 1 selected \";\n    convertEnum(play1);\n    cout &lt;&lt; \"Player 2 selected \";\n    convertEnum(play2);\n    cout &lt;&lt; \". \";\n\n    if (play1 == winnerObject)\n        winner = 1;\n    else\n        if (play2 == winnerObject)\n            winner = 2;\n    cout &lt;&lt; \"Player \" &lt;&lt; winner &lt;&lt; \" wins this game.\" &lt;&lt; endl;\n}\n    }\n\n      void RPS_H::displayResults(int gCount, int wCount1, int wCount2)  //,        int wCount1, int wCount2\n         {\ncout &lt;&lt; \"The total number of players: \" &lt;&lt; gCount &lt;&lt; endl;\ncout &lt;&lt; \"The number number of player 1: \" &lt;&lt; wCount1 &lt;&lt; endl;\ncout &lt;&lt; \"The number number of player 2: \" &lt;&lt; wCount2 &lt;&lt; endl;\n    }\n   RPS_H::~RPS_H()\n    {\n    }\n</code></pre>\n\n<p>Main_Idea.cpp</p>\n\n<pre><code>  #include &lt;iostream&gt;\n  #include &lt;iomanip&gt;\n\n  #include &lt;ctime&gt;\n  #include &lt;iostream&gt;\n  #include &lt;iomanip&gt;\n\n  #include &lt;cstdlib&gt;\n\n  #include \"RPS_H.h\"\n  #include \"Billing.h\"\n  using namespace std;\n\n  int main()\n   {\nRPS_H game;\nRPS_H* PtrG = &amp;game;\ncout &lt;&lt; \"Hello World\\n\";\ngame.displayResults(game.displayResults.gameWinner, game.displayResults.winCount1, game.displayResults.winCount2);\n//PtrG-&gt;gameResult(&amp;PtrG-&gt;gameResult-&gt;gameWinner,&amp;PtrG-&gt;gameResult-&gt;winCount1,&amp;PtrG-&gt;gameResult-&gt;winCount2);\nBilling B;\nBilling* PtrB = &amp;B;\n\nB.EnterB();\ncout &lt;&lt; \"\\nAlso\\n\";\nPtrB-&gt;EnterB();\ncout &lt;&lt; \"\\nAnother function maybe\\n\\n\";\nB.EnterS();\n//B.EnterS(B.EnterS.square);\n//B.square(y);\ncout &lt;&lt; \"And this way\\n\";\nPtrB-&gt;EnterS();\ncin.get();\ncin.get();\ncin.get();\nreturn 0;\n   }\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "opencv3.3"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519259982, "post_id": 48917333, "comment_id": 84842093, "body": "This is a bit unclear, but note that your code is undefined due to the lack of initialisation of <code>n</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519260202, "post_id": 48917333, "comment_id": 84842164, "body": "Side note: remove irrelevant code, don&#39;t comment it out. Post the code you&#39;re measuring along with your measurements."}, {"owner": {"reputation": 23, "user_id": 8766460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45a8881764a39005fe34e1e1cca65f3?s=128&d=identicon&r=PG&f=1", "display_name": "Fabricio Gomez", "link": "https://stackoverflow.com/users/8766460/fabricio-gomez"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519276106, "post_id": 48917333, "comment_id": 84846344, "body": "I changed it, and adding the measurements are not really the point here since there is a lot of code involved for that I just need to make that section of code faster just the image captuire"}], "owner": {"reputation": 23, "user_id": 8766460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45a8881764a39005fe34e1e1cca65f3?s=128&d=identicon&r=PG&f=1", "display_name": "Fabricio Gomez", "link": "https://stackoverflow.com/users/8766460/fabricio-gomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519276048, "creation_date": 1519256415, "last_edit_date": 1519276048, "question_id": 48917333, "link": "https://stackoverflow.com/questions/48917333/optimize-image-acquisition-opencv", "title": "optimize image acquisition opencv", "body": "<p>I am currently doing a software that needs to take photos of the changes in a fluid when heat is applied. I have to take the photos every 100 ms. I did a \"hello world\" code to check if it was possible where it just takes the photo without synchronization </p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"opencv2/imgproc.hpp\"\n#include \"opencv2/highgui.hpp\"\n#include&lt;time.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\nusing namespace cv;\n\n\n//** @function main */\nint main()\n{\n    //! [mat]\n    int n=5;\n    Mat * frame;\n    frame = new Mat[n];\n    //! [mat]\n    //! [cap]\n    VideoCapture cap(0);\n    //! [cap]\n    //! [window]\n    time_t prev = clock();\n    namedWindow(\"video capture\", WINDOW_NORMAL);\n    cap.set(CV_CAP_PROP_FRAME_HEIGHT, 4008);\n    cap.set(CV_CAP_PROP_FRAME_WIDTH, 3700);\n    cap.set(CV_CAP_PROP_EXPOSURE, -2.5);\n    //! [window]\n    //! [trackbar]\n\n    //while ((char)waitKey(1) != 'q') {\n    for (int i = 0; i&lt;5; i++) {\n        cout &lt;&lt; clock()-prev&lt;&lt;endl;\n        prev = clock();\n        //! [while]\n        cap &gt;&gt; frame[i];\n\n        //! [show]\n    }\n    for (int i = 0; i &lt; 5; i++) \n        imwrite(\"test\" + std::to_string(i) + \".jpg\", frame[i]);\n    while ((char)waitKey(1) != 'q') {}\n    return 0;\n}\n</code></pre>\n\n<p>I started saving the images as soon as took them and I got an elapsed time of 600 ms approximately. therefore I stored them in a dynamic array. this lowered times in half but still not what I need. I am using visual studio 2017 community this is the release code using opencv 3.3.1 the camera is a lumenera and images taken are 4008x3700 px. the commented code was used to visualize the images in a 1080p display but I disabled it since I don't need to see every frame in this stage </p>\n"}, {"tags": ["c++", "animation", "opengl", "blender", "wavefront"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1519256331, "post_id": 48917276, "comment_id": 84841117, "body": "Don&#39;t use .obj."}, {"owner": {"reputation": 131, "user_id": 8321073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c2b632a11b1e7650228b80cb8294f78?s=128&d=identicon&r=PG&f=1", "display_name": "Emre Kaya", "link": "https://stackoverflow.com/users/8321073/emre-kaya"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1519256438, "post_id": 48917276, "comment_id": 84841144, "body": "what can i use suggestion ? i am beginner"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1519256496, "post_id": 48917276, "comment_id": 84841160, "body": "FBX for example."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1519285994, "post_id": 48917276, "comment_id": 84850618, "body": "use any binary form 3D mesh representation. The ASCII exports are always slow. I would try binary STL."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 1, "creation_date": 1519286453, "post_id": 48917276, "comment_id": 84850884, "body": "The term you are looking for is <i>skinning</i>. With this approach, you store the model and the animation separately. Skinning is the process of applying a (skeletal) animation to a 3D model."}, {"owner": {"reputation": 131, "user_id": 8321073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c2b632a11b1e7650228b80cb8294f78?s=128&d=identicon&r=PG&f=1", "display_name": "Emre Kaya", "link": "https://stackoverflow.com/users/8321073/emre-kaya"}, "edited": false, "score": 0, "creation_date": 1519326802, "post_id": 48917276, "comment_id": 84877524, "body": "i heard new &quot;skeletal animation&quot; thank you i wanted to learn this now i need to fix how can use skeletal animation :D"}], "owner": {"reputation": 131, "user_id": 8321073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c2b632a11b1e7650228b80cb8294f78?s=128&d=identicon&r=PG&f=1", "display_name": "Emre Kaya", "link": "https://stackoverflow.com/users/8321073/emre-kaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519257303, "creation_date": 1519256032, "last_edit_date": 1519257303, "question_id": 48917276, "link": "https://stackoverflow.com/questions/48917276/objloader-so-slow-with-huge-animation-how-can-i-accelerate-it", "title": "objloader so slow with huge animation how can i accelerate it", "body": "<p>My steps are:</p>\n\n<ol>\n<li>I am making a model its rig animated 1000-1200 frame in blender and I will export these .obj files, therefore, I have to load 1000-1200 .obj files.</li>\n<li>I am using <code>objloader</code> in c++ and I am sending <code>gpu</code> with <code>opengl</code> VBO way</li>\n<li>I didn't use multithreading with <code>objloader</code></li>\n<li>All files install in 80 seconds (one file has 2000 face all triangle)</li>\n</ol>\n\n<p>How can I accelerate it?</p>\n\n<ol>\n<li>Do I have to use multithreading? Is it the only way? Then I can't use <code>std::string</code> and <code>std::vector</code> am right? </li>\n<li>Can I take only rig positions from blender and can I use them over only one .obj file in OpenGL with <code>gltranslate</code> and <code>glrotate</code> to move? against load all animation model? </li>\n<li>Any suggestion?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 1, "creation_date": 1519254102, "post_id": 48916971, "comment_id": 84840369, "body": "Did you check if the file properly opened or not?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519254379, "post_id": 48916971, "comment_id": 84840474, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 3, "creation_date": 1519254389, "post_id": 48916971, "comment_id": 84840478, "body": "This will properly open a file relative to the current working directory (CWD), which may not behave as you expect if it&#39;s run from a script or a GUI application. It won&#39;t be relative to the path where the code was <b>compiled</b>, but rather, where it&#39;s run from. This also may not be the current directory the program is in."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1519255103, "post_id": 48916971, "comment_id": 84840726, "body": "<a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/files</a>"}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 3, "last_activity_date": 1519256331, "creation_date": 1519256331, "answer_id": 48917319, "question_id": 48916971, "link": "https://stackoverflow.com/questions/48916971/how-to-read-a-txt-file-from-an-existing-directory/48917319#48917319", "title": "How to read a txt file from an existing directory", "body": "<pre><code>fstream file(\"proj1_test1.txt\");\n</code></pre>\n\n<p>opened the file.</p>\n\n<pre><code>file.open(\"proj1_test1.txt\");\n</code></pre>\n\n<p>opened the file again without first closing it. Opening a filestream that is already open places the file stream in an error state that must be <code>clear</code>ed before you can read from or write to it. </p>\n\n<p>To fix: remove <code>file.open(\"proj1_test1.txt\");</code></p>\n\n<p>A warning: This file is being opened with a relative path. As pointed out in the question's comments, a program does not necessarily run from the same location as the executable. Search term for further information: Working Directory. If after the above correction the file still does not open, make certain that the program is running from the same folder as the file you want opened. The <code>getcwd</code> function may help with this.</p>\n\n<p>A suggestion: After any operation on any stream (this includes opening, reading, \n and writing) test the stream state to make sure the operation succeeded. Example:</p>\n\n<pre><code>fstream file(\"proj1_test1.txt\");\nif (file)\n{\n    // do stuff with file\n}\nelse\n{\n    // failed to open. Warn user\n}\n</code></pre>\n\n<p>When reading you want something along the lines of</p>\n\n<pre><code>if (file &gt;&gt; page[i][j])\n{\n    // read successful. can use page[i][j]\n}\nelse\n{\n    // read failed. Warn user\n    // do not use page[i][j]\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9357541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29f671c2ef052241db23c9ff9201dd8?s=128&d=identicon&r=PG&f=1", "display_name": "Arsalan", "link": "https://stackoverflow.com/users/9357541/arsalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 48917319, "answer_count": 1, "score": -2, "last_activity_date": 1519256331, "creation_date": 1519253976, "last_edit_date": 1519254480, "question_id": 48916971, "link": "https://stackoverflow.com/questions/48916971/how-to-read-a-txt-file-from-an-existing-directory", "title": "How to read a txt file from an existing directory", "body": "<p>i am trying to read a txt file from my directory , this i got so far. its compiling but print nothing.     </p>\n\n<pre><code>char printFile() {\n  fstream file(\"proj1_test1.txt\");\n  char file01;\n  char page[5][6];\n  file.open(\"proj1_test1.txt\");\n\n  for(int i = 0; i &lt; numOfRows; i++){\n    for(int j = 0; j &lt; numOfColumns; j++){\n      file &gt;&gt; file01;\n      page[i][j] = file01;\n      //cout &lt;&lt; page[i][j] &lt;&lt; endl;\n    }\n  }\n  cout &lt;&lt; \"file loaded \" &lt;&lt; endl;\n  cout &lt;&lt; file &lt;&lt; endl; \n\n  file.close();\n\n\n  return 0;\n}\n</code></pre>\n\n<p>The file which i am trying to read and print contains this</p>\n\n<pre><code> F F R R R\n F F R R R\n F F R R R\n F F R R R\n F F R R R\n F F R R R\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "gdb"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1519253457, "post_id": 48916853, "comment_id": 84840142, "body": "Pass the set by reference, not by value. And do NOT do <code>#include &lt;bits&#47;stdc++.h&gt;</code>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1519253694, "post_id": 48916853, "comment_id": 84840224, "body": "Well, VS has a Step into Specific button. I don&#39;t know if Eclipse has an equivalent option."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519253803, "post_id": 48916853, "comment_id": 84840264, "body": "When you step into a function on accident, all the debugger&#39;s I&#39;ve used let you step out of the function. On gdb, the command is <code>finish</code>, but Eclipse may expose that functionality on some hotkey"}], "owner": {"reputation": 556, "user_id": 1292045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14d0390ac2d2314eb2e3837a0519a388?s=128&d=identicon&r=PG", "display_name": "monzie", "link": "https://stackoverflow.com/users/1292045/monzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1519253900, "answer_count": 0, "score": 0, "last_activity_date": 1519253366, "creation_date": 1519253366, "question_id": 48916853, "link": "https://stackoverflow.com/questions/48916853/how-to-skip-over-c-library-constructors-when-single-stepping-in-eclipse", "closed_reason": "Duplicate", "title": "How to skip over C++ library constructors when single stepping in eclipse", "body": "<p>The following code was compiled with g++ using the flags -O0 -g3  (no optimization and request additional debug information respectively) </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\nvoid foo(unordered_set&lt;int&gt; b)\n{\n    if (b.size()&gt;0)\n        cout&lt;&lt;*b.begin()&lt;&lt;endl;\n}\nint main(void)\n{\n    unordered_set&lt;int&gt; c={1};\n    foo(c);\n}\n</code></pre>\n\n<p>I am single stepping using Eclipse IDE for C/C++ , Oxygen.1a Release.<br>\nWhen I try to single step  into foo() the debugger begins displaying the many lines of the C++ Standard Library unordered_set copy constructor code.  If I step out of the copy constructor code this results in foo() also being stepped over.\nI could set a breakpoint in foo, or run to a line in foo, but this is inconvenient.  Is there a simpler way to avoid single stepping thru the copy constructor code and directly into foo()?</p>\n"}, {"tags": ["c++", "class", "templates", "error-handling"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1519253097, "post_id": 48916778, "comment_id": 84840010, "body": "Why it is a template if you do not use that type?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1519253104, "post_id": 48916778, "comment_id": 84840015, "body": "Why do you have <code>template &lt;class T&gt;</code> if you are not using <code>T</code> at all?"}, {"owner": {"reputation": 35, "user_id": 7676962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1386087438108732/picture?type=large", "display_name": "Tran Nguyen", "link": "https://stackoverflow.com/users/7676962/tran-nguyen"}, "edited": false, "score": 0, "creation_date": 1519253196, "post_id": 48916778, "comment_id": 84840048, "body": "i am trying to use the stack template that I created, not from the library"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1519253252, "post_id": 48916778, "comment_id": 84840069, "body": "Remove <code>template &lt;class T&gt;</code> and recompile."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519253289, "post_id": 48916778, "comment_id": 84840082, "body": "So you use it there without <code>T</code> so why do you need your function to be a template? And how is that related to your stack? If you want to try your Stack &lt;T&gt; in main (for testing) will you try to make <code>main</code> template as well?"}, {"owner": {"reputation": 35, "user_id": 7676962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1386087438108732/picture?type=large", "display_name": "Tran Nguyen", "link": "https://stackoverflow.com/users/7676962/tran-nguyen"}, "edited": false, "score": 0, "creation_date": 1519253378, "post_id": 48916778, "comment_id": 84840116, "body": "when I remove <code>template &lt;class T&gt;</code> I cannot use the <code>charStackPtr</code>. is there another to do fix the problem? <code>charStackPt</code> need a class type"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519253434, "post_id": 48916778, "comment_id": 84840136, "body": "Yes, implement <code>Stack</code> properly and not mask your error, programming by guessing does not work"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519255859, "post_id": 48916778, "comment_id": 84840982, "body": "After you removed <code>template &lt;class T&gt;</code> dont forget to declare your <code>InfixToPostfix</code> function before the <code>main()</code> if you decided to define it after the <code>main()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 5, "last_activity_date": 1519253504, "creation_date": 1519253504, "answer_id": 48916878, "question_id": 48916778, "link": "https://stackoverflow.com/questions/48916778/error-no-matching-overloaded-function-found/48916878#48916878", "title": "Error: No matching overloaded function found", "body": "<pre><code>template &lt;class T&gt;\nstring InfixToPostfix(string&amp; str)\n</code></pre>\n\n<p>This is saying that the function accepts any type <code>T</code> as its argument. If one of the parameters of the function was a variable of type <code>T</code>, then the compiler would be able to find and deduce a specific overload.</p>\n\n<blockquote>\n  <p>i am trying to use the stack template that I created, not from the library</p>\n</blockquote>\n\n<p>Your stack is declared as:</p>\n\n<pre><code>Stack&lt;char&gt; *charStackPtr\n</code></pre>\n\n<p>Since the stack is <em>always</em> going to be of type <code>char</code>, you don't need to template argument <code>T</code> for it. The solution would be to remove it. <em>Using  a template variable in a function where the variable has a known type doesn't require the function to be a template itself.</em></p>\n"}], "owner": {"reputation": 35, "user_id": 7676962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1386087438108732/picture?type=large", "display_name": "Tran Nguyen", "link": "https://stackoverflow.com/users/7676962/tran-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3667, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519253504, "creation_date": 1519252967, "question_id": 48916778, "link": "https://stackoverflow.com/questions/48916778/error-no-matching-overloaded-function-found", "title": "Error: No matching overloaded function found", "body": "<pre><code>int main()\n{\n    string str;\n    cout &lt;&lt; \"Enter Infix Expression \\n\";\n    cin &gt;&gt; str;\n    cout &lt;&lt; \"infix:\" &lt;&lt; str &lt;&lt; \"\\n\";\n    string postfix = InfixToPostfix(str); // **error cause here**\n    cout &lt;&lt; \"postfix:  \" &lt;&lt; postfix &lt;&lt; \"\\n\\n\";\n\n    system(\"pause\");\n    return 0;\n}\n\n// Function to evaluate Postfix expression and return output\ntemplate &lt;class T&gt;\nstring InfixToPostfix(string&amp; str)\n{\n    Stack&lt;char&gt; *charStackPtr;\n    charStackPtr = new Stack&lt;char&gt;();\n\n    string postfix = \"\"; // Initialize postfix as empty string.\n    for (int i = 0; i&lt; str.length(); i++) {\n        // If character is operator, pop two elements from stack, perform operation and push the result back. \n        if (IsOperator(str[i]))\n        {\n            while (!charStackPtr.empty() &amp;&amp; charStackPtr.top() != '(' &amp;&amp; HasHigherPrecedence(charStackPtr.top(), str[i]))\n            {\n                postfix += charStackPtr.top();\n                charStackPtr.pop();\n            }\n            charStackPtr.push(str[i]);\n        }\n        // Else if character is an operand\n        else if (IsOperand(str[i]))\n        {\n            postfix += str[i];\n        }\n\n        else if (str[i] == '(')\n        {\n            charStackPtr.push(str[i]);\n        }\n\n        else if (str[i] == ')')\n        {\n            while (!charStackPtr.empty() &amp;&amp; charStackPtr.top() != '(') {\n                postfix += charStackPtr.top();\n                charStackPtr.pop();\n            }\n            charStackPtr.pop();\n        }\n    }while (!charStackPtr.empty()) {\n        postfix += charStackPtr.top();\n        charStackPtr.pop();\n    }\n\n    delete charStackPtr;\n    return postfix;\n}\n</code></pre>\n\n<p>Can someone help me why i cannot run the program, I keep make 3 errors:</p>\n\n<blockquote>\n  <p>Error C2672   'InfixToPostfix': no matching overloaded function\n  found</p>\n  \n  <p>Error C2783   'std::string InfixToPostfix(std::string)': could not\n  deduce template argument for 'T'</p>\n  \n  <p>E0304   no instance of overloaded function \"InfixToPostfix\" matches the\n  argument list</p>\n</blockquote>\n"}, {"tags": ["c++", "member", "anonymous"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1519252287, "post_id": 48916460, "comment_id": 84839716, "body": "You need to inherit."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1519252338, "post_id": 48916460, "comment_id": 84839739, "body": "Unfortunately, your &quot;works fine&quot; code has undefined behavior in the way I&#39;m almost certain you plan to use it."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1519252354, "post_id": 48916460, "comment_id": 84839744, "body": "Aren&#39;t you violating strict aliasing rules with your intended use of that union?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 2, "creation_date": 1519252392, "post_id": 48916460, "comment_id": 84839757, "body": "@Walter: It&#39;s not so much the strict aliasing rule, as the &quot;read from a union member which is not active&quot; rule.   Related: <a href=\"https://stackoverflow.com/q/36051084/103167\">stackoverflow.com/q/36051084/103167</a>"}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 0, "creation_date": 1519252533, "post_id": 48916460, "comment_id": 84839804, "body": "I don&#39;t understand. Any explaination link please?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 3, "creation_date": 1519252862, "post_id": 48916460, "comment_id": 84839923, "body": "You have two questions here.  The one you asked, which I paraphrase as &quot;How can I reuse a collection of variant members?&quot;, has an easy answer: Use inheritance.  The one being raised in the comments, &quot;When I use a union to overlay a structure with multiple elements of the same type on top of an array, can I use the structure member names and array indexes interchangeably?&quot; has a more complicated answer: No, it might look to you like it works but it is not safe."}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 0, "creation_date": 1519253347, "post_id": 48916460, "comment_id": 84840108, "body": "Wow, you astonished me. I am pretty sure I&#39;ve read about that way of representing a vector (x,y components mixed with array with 2 indices) in stackoverflow answer. So there isn&#39;t way to union array and free-standing named components, even using C++ &quot;hacks&quot;? According to asked question - I didn&#39;t think about inheritance here. It is good idea. Write an answer and I will accept it."}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 1, "creation_date": 1519254859, "post_id": 48916460, "comment_id": 84840638, "body": "<a href=\"https://stackoverflow.com/questions/702658/c-union-array-and-vars\" title=\"c union array and vars\">stackoverflow.com/questions/702658/c-union-array-and-vars</a> This answers are misleading."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 1, "creation_date": 1519255984, "post_id": 48916460, "comment_id": 84841020, "body": "Have you considered overloading <code>operator[]</code> instead of using an array ? It seems to me that you want some members and an index based interface to it, or am I missing something?"}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1519256396, "post_id": 48916460, "comment_id": 84841138, "body": "@luk32, yes, however I don&#39;t want it to use ifs to check which component should be returned. C++17 <code>constexpr if</code> can do the work with no runtime overhead, but it would look ugly and would be a lot of work to change. Look at my answer, I found perfect solution."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1519257454, "post_id": 48916460, "comment_id": 84841442, "body": "Compiler is pretty smart about the <code>switch</code> see <a href=\"https://godbolt.org/g/gGstp2\" rel=\"nofollow noreferrer\">godbolt.org/g/gGstp2</a> it bypassed the struct altogheter and worked directly on registers. I am not sure if you can be as fast with additional indirection layer from the answer you chose."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1519255127, "post_id": 48917095, "comment_id": 84840737, "body": "The solution in your snippet has some significant memory overhead."}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 1, "creation_date": 1519255241, "post_id": 48917095, "comment_id": 84840778, "body": "Adding references makes the struct large - depending on architecture, it can add even 32 extra bytes. My classes should work with shaders used by graphics APIs, therefore I need it to be compile-time distinguishable. How do you imagine encapsulating RGBA and CMYK so they will be used in the similar way? Usage of templates guarantees copy safety and does not allow implicit casting. You will always know what type and scheme the color uses."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 1, "creation_date": 1519256223, "post_id": 48917095, "comment_id": 84841091, "body": "@razzorflame I just showed a way to ensure that the interface you want is compliant with the standard and not UB that works now but might be broken  at every release of your compiler.    As said, I DO NOT RECOMMEND THIS APPROACH.  If I were you, I&#39;d choose one access way (either individual components or array) and use it consistently, or better, use getters and setters: mainstream compilers will inline such code so that it&#39;s not a performance overhead."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1519254777, "last_edit_date": 1592644375, "creation_date": 1519254777, "answer_id": 48917095, "question_id": 48916460, "link": "https://stackoverflow.com/questions/48916460/c-make-member-object-unnamed/48917095#48917095", "title": "C++ make member object unnamed", "body": "<h2>Don't do it !</h2>\n<p>Tricking around for obtaining some nice syntactic effects is full of danger and might obliterate future evolution.</p>\n<p>First of all, in C++ only one union member can be active at any moment.  so switching the use of the array and of the struct is not guaranteed to work, even if on many compilers this may lead to the expected results.</p>\n<p>Then, there is no guarantee for structure members to be contiguous, so that if mixing use of array and struct would work, it might still not lead to a correct result, even if on many compilers this will work as expected.</p>\n<h2>Or do it with a safer approach...</h2>\n<p>If you still like to mix the use of specific color components r, g, b and of the array, you should consider a safer approach:</p>\n<pre><code>template &lt;typename _valueType&gt;\nstruct RGBAColorData {\n    using ValueType = _valueType;\n    ValueType components[4];\n    ValueType &amp;r=components[0], &amp;g=components[1], \n                   &amp;b=components[2], &amp;a=components[3]; // ATTENTION (see explanations)\n};\n</code></pre>\n<p>ATTENTION: I made it quick and dirty.  You should better implement the rule of three, with a proper constructor, a copy constructor and an assignment operator, to make sure that the references are not messed up.</p>\n<p>I do not like this solution so much, but it works safely (<a href=\"https://ideone.com/GBA516\" rel=\"nofollow noreferrer\">online demo</a>):  the trick is to make r, g, b, a references to specific array items.  You are then sure that you can mix the access way, and you are absolutely sure that the mapping between the two is correct.</p>\n<h2>But prefer clean encapsulation</h2>\n<p>The problem with your initial approach and my workaround is that they  oth break the encapsulation:  you have to know the inner structure of your color in order to use it.</p>\n<p>With this approach, you'll never able to evolve.  For example switching to  a CMYK color scheme, or adopting a bit fields encoding would be compromised.</p>\n<p>The proper way would be to have a set of getters and setters to completely hide the inner structure to the outside world.  Of course, syntactically it does not look so nice, but then you'd really be able to write truly generic color code, where the encoding scheme could be a compile-time strategy.</p>\n"}, {"tags": [], "owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "is_accepted": true, "score": 0, "last_activity_date": 1519256225, "creation_date": 1519256225, "answer_id": 48917300, "question_id": 48916460, "link": "https://stackoverflow.com/questions/48916460/c-make-member-object-unnamed/48917300#48917300", "title": "C++ make member object unnamed", "body": "<p>Finally, I decided to use inheritance (as Ben Voigt said).\nI fixed the other problem, with unions that made code unsafe, using the brilliant method proposed by this answer:<br>\n<a href=\"https://stackoverflow.com/a/494760/4386320\">https://stackoverflow.com/a/494760/4386320</a></p>\n"}], "owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48917300, "answer_count": 2, "score": 0, "last_activity_date": 1519256225, "creation_date": 1519251477, "question_id": 48916460, "link": "https://stackoverflow.com/questions/48916460/c-make-member-object-unnamed", "title": "C++ make member object unnamed", "body": "<p>I want to write convinient Color management class, that would allow me to use different orders of components and basically different setups. I want it to be distinguishable at compile-time.\nLets say I have this code:</p>\n\n<pre><code>template &lt;typename _valueType&gt;\nstruct RGBAColorData {\n    using ValueType = _valueType;\n    union {\n        struct { ValueType r, g, b, a; };\n        ValueType components[4];\n    };\n};\n</code></pre>\n\n<p>This (even if anonymous structs are non-standard) works fine, when I want to use it like this:</p>\n\n<pre><code>RGBAColorData color;\ncolor.r = whatever;\n</code></pre>\n\n<p>However, this is not the final form of my code. I want it to have \"owning\" class template, that would in compile-time select between <code>XYZColorData</code>. Lets say it looks like this:</p>\n\n<pre><code>template &lt;typename _valueType, template &lt;typename&gt; _dataScheme&gt;\nstruct Color\n{\n    using ValueType = _valueType;\n    using DataScheme = _dataScheme&lt;ValueType&gt;;\n\n    // what now?\n    // DataScheme data; // ???\n};\n</code></pre>\n\n<p>This makes a problem, because I want my code to be used like this:</p>\n\n<pre><code>using RGBAColorF = Color&lt;float, RGBAColorData&gt;;\nRGBAColorF brushColor;\nbrushColor.r = whatever;\n</code></pre>\n\n<p>This would make a really convinient way to use colors, however I can't think of any solution to this problem.\nFinally, maybe I have wrong approach to this and maybe this can be done with less effort, however I can't think about any other method that wouldn't involve massive amount of template class specializations.</p>\n"}, {"tags": ["c++", "winapi", "char"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 8, "creation_date": 1519251346, "post_id": 48916414, "comment_id": 84839273, "body": "<code>char buf{4096}</code> should probably be <code>char buf[4096]</code>. You&#39;ve created a single character buffer and are trying to populate it with the value 4096."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1519251412, "post_id": 48916414, "comment_id": 84839304, "body": "@tadman, Likely the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366920%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">winapi function</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1519251443, "post_id": 48916414, "comment_id": 84839325, "body": "@chris Good catch. The <code>SendResult</code> naming convention threw me off."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 5, "creation_date": 1519251467, "post_id": 48916414, "comment_id": 84839340, "body": "<code>char buf{4096}</code> declares one <code>char</code> with the value <code>4096</code>.  You want <code>char buf[4096]</code>"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1519254186, "post_id": 48916414, "comment_id": 84840405, "body": "@MilesBudnek not that 4096 will ever fit on &quot;boring&quot; platforms with 8 bit chars... <code>buf</code> will probably be 0 an almost any of those."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1519291043, "post_id": 48916414, "comment_id": 84853392, "body": "<a href=\"http://coliru.stacked-crooked.com/a/79a7f3d9e2b8e365\" rel=\"nofollow noreferrer\">This code will not compile</a>."}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1519251650, "post_id": 48916485, "comment_id": 84839422, "body": "To note, a conforming C++11 compiler will not compile this because of the narrowing in braces. (And a pre-C++11 compiler won&#39;t recognize the form of initialization.) I think it&#39;s a fair assumption that 4096 isn&#39;t a valid <code>char</code> value on Windows."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1519252272, "post_id": 48916485, "comment_id": 84839710, "body": "Just do <code>ZeroMemory(&amp;buf, sizeof buf);</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1519252879, "post_id": 48916485, "comment_id": 84839928, "body": "Since <code>buf</code> is a fixed array, passing its name around is the same as passing a pointer to its first element, so you don&#39;t need the <code>&amp;</code> at all: <code>ZeroMemory(buf, sizeof(buf));</code> On the other hand, in this example, it is not necessary to zero out <code>buf</code> at all before calling <code>recv()</code>, that is just wasted overhead."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 5, "last_activity_date": 1519251583, "creation_date": 1519251583, "answer_id": 48916485, "question_id": 48916414, "link": "https://stackoverflow.com/questions/48916414/c-help-about-zeromemory/48916485#48916485", "title": "C++ Help about ZeroMemory", "body": "<p>The problem is likely this definition:</p>\n\n<pre><code>char buf{4096};\n</code></pre>\n\n<p>Which is roughly equivalent to:</p>\n\n<pre><code>char buf = 4096;\n</code></pre>\n\n<p>Which is a single character, not a character array buffer. To fix this:</p>\n\n<pre><code>char buf[4096];\n</code></pre>\n\n<p>When passing that in you may need to do:</p>\n\n<pre><code>ZeroMemory(&amp;buf, 4096);\n</code></pre>\n\n<p>I'd strongly encourage you to avoid hammering out 4096 everywhere, so define a constant:</p>\n\n<pre><code>const SIZE_T buf_size = 4096;\nchar buf[buf_size];\n\n// ...\n\nZeroMemory(&amp;buf, buf_size);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519252738, "post_id": 48916682, "comment_id": 84839879, "body": "Granted, this is a better approach, but this does nothing to answer the question that was actually asked.  StackOverflow is a Q+A site, we are here to answer question, not rewrite code."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519252834, "post_id": 48916682, "comment_id": 84839914, "body": "The question was, &quot;So, how do I get around this?&quot;.  The answer, in my opinion, involves the use of std::array.  And no, we&#39;re not just here to answer the question.  If we were we wouldn&#39;t down-vote so many.  It&#39;s also a C++ question.  My answer was idiomatic over c-style arrays."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519253464, "post_id": 48916682, "comment_id": 84840147, "body": "The question being asked is in regards to fixing the error message, not changing the semantics of the code. That is what <a href=\"http://codereview.stackexchange.com\">Code Review</a> is for."}], "tags": [], "owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1519252478, "creation_date": 1519252478, "answer_id": 48916682, "question_id": 48916414, "link": "https://stackoverflow.com/questions/48916414/c-help-about-zeromemory/48916682#48916682", "title": "C++ Help about ZeroMemory", "body": "<p>How about:</p>\n\n<pre><code>#include &lt;array&gt;   \n\nstd::array&lt;char, 4096&gt; buf;\n...    \n\n        std::fill(buf.begin(), buf.end(), 0);\n        int bytesReceived = recv(sock, buf.data(), buff.size(), 0);\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1519769794, "post_id": 48916973, "comment_id": 85042888, "body": "According to Remy Lebeau we must answer the specific question, not offer a better alternative.  Yea... I know."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1519770046, "post_id": 48916973, "comment_id": 85043001, "body": "Yes.  Your answer is excellent but it&#39;s off-topic, apparently.  It&#39;s the same reason I was downvoted below.  I&#39;m just making a point :)."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1519770216, "post_id": 48916973, "comment_id": 85043076, "body": "@Robinson Well, I am going to upvote your answer, I hope you will feel really bad about it, you little person"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1519770270, "post_id": 48916973, "comment_id": 85043100, "body": "I don&#39;t feel bad about it."}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 0, "last_activity_date": 1519253991, "creation_date": 1519253991, "answer_id": 48916973, "question_id": 48916414, "link": "https://stackoverflow.com/questions/48916414/c-help-about-zeromemory/48916973#48916973", "title": "C++ Help about ZeroMemory", "body": "<p>Another question is why do you need <code>ZeroMemory</code> at all. And I think what happened here is that you picked up wrong string constructor overload. Let me explain:</p>\n\n<p>You have your <code>buf</code> buffer and you have your <code>bytesReceived</code> length of data, so really all you need is </p>\n\n<pre><code>std::string(buf, bytesReceived)\n</code></pre>\n\n<p>to construct valid string. But you have chosen </p>\n\n<pre><code>std::string(buf, 0, bytesReceived)\n</code></pre>\n\n<p>This overload looks like this:</p>\n\n<blockquote>\n  <p>basic_string( const basic_string&amp; other, \n                size_type pos, \n                size_type count,\n                ..</p>\n</blockquote>\n\n<p>The <code>buf</code> is implicitly converted into <code>std::string</code> at the 1st argument, but for this to work correctly your buffer needs to be null terminated, which it might or might not be. So you worked around this problem by zeroing the rest of the buffer. What do you think will happen if you get 4096 bytes of data that is not null terminated? Your workaround will not work in this case. So just use the appropriate string constructor mentioned above and you won't need to use <code>ZeroMemory</code>. </p>\n"}], "owner": {"reputation": 5, "user_id": 9256908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5687f5b99207767842b0a5b5c085cbba?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Sator", "link": "https://stackoverflow.com/users/9256908/jacob-sator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1519255626, "creation_date": 1519251270, "last_edit_date": 1519255626, "question_id": 48916414, "link": "https://stackoverflow.com/questions/48916414/c-help-about-zeromemory", "title": "C++ Help about ZeroMemory", "body": "<p>I defined my char as usual, although I named it <code>buf</code>. I keep getting an error:</p>\n\n<blockquote>\n  <p>argument of type 'char' is incompatible with parameter of type 'void*'</p>\n</blockquote>\n\n<p>If I set <code>buf</code> to <code>void*</code>, it won't be able to pass in 4096 as a parameter.</p>\n\n<p>So, how do I get around this? Has anyone run into a problem like this before?</p>\n\n<pre><code>    char buf{4096};\n    string userinput;\n    do\n    {\n        cout &lt;&lt; \"&gt; \" &lt;&lt; endl;\n        getline(cin, userinput);\n\n\n        if (userinput.size() &gt; 0) // make sure the user typed something in  \n        {\n            int SendResult = send(sock, userinput.c_str, userinput.size() + 1, 0);\n            if (SendResult != SOCKET_ERROR)\n            {\n                ZeroMemory(buf, 4096);\n                int bytesReceived = recv(sock, buf, 4096, 0);\n                if (bytesReceived &gt; 0)\n                {\n                    cout &lt;&lt; \"SERVER\" &lt;&lt; string(buf, 0, bytesReceived) &lt;&lt; \nendl;\n                }\n            }\n        }\n</code></pre>\n"}, {"tags": ["c++", "templates", "data-structures", "binary-search-tree", "red-black-tree"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519251580, "post_id": 48916406, "comment_id": 84839388, "body": "Implementation can be in a separate file that is included into the header file. <code>.inc</code> or <code>.inl</code> file extensions are frequently used in such cases. See <a href=\"https://stackoverflow.com/q/1208028/580083\">stackoverflow.com/q/1208028/580083</a> for more details."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8582665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6759f5eb460860000b3c8dc79508a403?s=128&d=identicon&r=PG&f=1", "display_name": "gamer1996", "link": "https://stackoverflow.com/users/8582665/gamer1996"}, "edited": false, "score": 0, "creation_date": 1519615155, "post_id": 48916519, "comment_id": 84967042, "body": "Thank you. This got me started. I had read the other forum but wanted more clarification and this brought it."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5, "user_id": 8582665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6759f5eb460860000b3c8dc79508a403?s=128&d=identicon&r=PG&f=1", "display_name": "gamer1996", "link": "https://stackoverflow.com/users/8582665/gamer1996"}, "edited": false, "score": 0, "creation_date": 1519615279, "post_id": 48916519, "comment_id": 84967068, "body": "@gamer1996, you&#39;re welcome. Glad I was able to help."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1519251760, "creation_date": 1519251760, "answer_id": 48916519, "question_id": 48916406, "link": "https://stackoverflow.com/questions/48916406/red-black-tree-template/48916519#48916519", "title": "Red Black tree template", "body": "<ol>\n<li><p>There are ways of implementing class templates in a .cpp file but the most common method is to implement them in a .hpp (or .h) file. See <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">Why can templates only be implemented in the header file?</a>.</p></li>\n<li><p>More importantly, you may not use:</p>\n\n<pre><code>redBlackTree::redBlackTree()\n{\n} \n</code></pre>\n\n<p>to implement class template member functions. That syntax can be used only classes. You need to use:</p>\n\n<pre><code>template &lt;typename myType&gt;\nredBlackTree&lt;myType&gt;::redBlackTree()\n{\n} \n</code></pre>\n\n<p>and make the change for all other functions.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 0, "last_activity_date": 1519251765, "creation_date": 1519251765, "answer_id": 48916521, "question_id": 48916406, "link": "https://stackoverflow.com/questions/48916406/red-black-tree-template/48916521#48916521", "title": "Red Black tree template", "body": "<p>All the functions that use <code>myType</code> in any way needs to be in the .hpp file. This is because all the translation units needs to be able to access the full definition of the function in order to instantiate the template.</p>\n\n<p>If you want to keep them in separate files you can make another .hpp file that you put the definitions in, then <code>#include</code> that in your first .hpp file.</p>\n\n<p>Some people like to use a different file-ending for this implementation file, <code>.tcc</code> for example.</p>\n"}], "owner": {"reputation": 5, "user_id": 8582665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6759f5eb460860000b3c8dc79508a403?s=128&d=identicon&r=PG&f=1", "display_name": "gamer1996", "link": "https://stackoverflow.com/users/8582665/gamer1996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "closed_date": 1519252869, "accepted_answer_id": 48916519, "answer_count": 2, "score": 0, "last_activity_date": 1519251765, "creation_date": 1519251229, "question_id": 48916406, "link": "https://stackoverflow.com/questions/48916406/red-black-tree-template", "closed_reason": "Duplicate", "title": "Red Black tree template", "body": "<p>I am having trouble implementing a red black tree which uses a template. I have read and understand the purpose but do not know exactly how to implement it into the header file and .cpp file. I was reading in some forums that they must in the same file as the template and others say that they can be separate but in a .hpp file.</p>\n\n<p>header file</p>\n\n<pre><code>enum nodeColor { RED, BLACK };\n\ntemplate &lt;class myType&gt;\nstruct nodeType\n{\n\n    myType  keyValue;\n    nodeColor color;\n    nodeType&lt;myType&gt; *left;\n    nodeType&lt;myType&gt; *right;\n    nodeType&lt;myType&gt; *parent;\n\n};\n\ntemplate&lt;class myType&gt; \nclass redBlackTree\n{\n\npublic:\n    redBlackTree() {}\n    ~redBlackTree() {}\n    void destroyTree();\n    unsigned int countNodes() const;\n    unsigned int height() const;\n    void printTree() const;\n    void insert(myType);\n    bool search(myType);\n\nprivate:\n    bool search(myType, nodeType&lt;myType&gt; *);\n    void destroyTree(nodeType&lt;myType&gt; *);\n    unsigned int countNodes(nodeType&lt;myType&gt; *) const;\n    unsigned int height(nodeType&lt;myType&gt; *) const;\n    void printTree(nodeType&lt;myType&gt; *) const;\n    void rightRotate(nodeType&lt;myType&gt; *);\n    void leftRotate(nodeType&lt;myType&gt; *);\n\n};\n</code></pre>\n\n<p>.cpp file</p>\n\n<pre><code>#include \"redBlackTree.h\"\nusing namespace std;\n\nredBlackTree::redBlackTree()\n{\n}   \nredBlackTree::~redBlackTree()\n{\n}\nvoid redBlackTree::destroyTree()\n{\n}\nunsigned int redBlackTree::countNodes() const\n{\n}\nunsigned int redBlackTree::height() const\n{\n}\nvoid redBlackTree::printTree() const\n{\n}\nvoid redBlackTree::insert(myType)\n{\n}\nbool redBlackTree&lt;myType&gt;::search(myType)\n{\n}\n\nbool redBlackTree::search(myType, nodeType&lt;myType&gt; *)\n{\n}\nvoid redBlackTree::destroyTree(nodeType&lt;myType&gt; *)\n{\n}\nunsigned int redBlackTree::countNodes(nodeType&lt;myType&gt; *) const\n{\n}\nunsigned int redBlackTree::height(nodeType&lt;myType&gt; *) const\n{\n}\nvoid redBlackTree::printTree(nodeType&lt;myType&gt; *) const\n{\n}\nvoid redBlackTree::rightRotate(nodeType&lt;myType&gt; *)\n{\n}\nvoid redBlackTree::leftRotate(nodeType&lt;myType&gt; *)\n{\n}\n</code></pre>\n\n<p>I also know that I did not include parameters. I am mostly asking for how to approach this so that I can get to coding away.</p>\n"}, {"tags": ["c++", "type-conversion", "language-lawyer"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1519250732, "post_id": 48916222, "comment_id": 84838993, "body": "There is only one conversion here: <code>B -&gt; int -&gt; A</code>..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1519250793, "post_id": 48916222, "comment_id": 84839024, "body": "Explicitly calling a constructor that takes a argument is not a user defined conversion.  <code>b</code> gets converted to an <code>int</code> and that <code>int</code> is used to call <code>a</code>&#39;s constructor."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1519250872, "post_id": 48916222, "comment_id": 84839058, "body": "@NathanOlivier But the standard says to consider only user defined conversion sequence from B to A. Not user defined conversion sequence from B to a parameter that would match a constructor of A"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519251065, "post_id": 48916222, "comment_id": 84839146, "body": "I don&#39;t have exact language verbiage to quote, but in a nutshell, when the compiler sees <code>A a{b};</code>, it first checks if <code>a</code> can be directly initialized from <code>b</code>, which won&#39;t work since <code>b</code> is not an instance of <code>A</code>, and <code>A</code> does not have a <code>B</code> member. So then the compiler checks if any constructors of <code>A</code> can be called with <code>b</code> as input, which does work, via <code>B::operator int()</code> and the <code>A(int)</code> constructor.  So, the statement <code>A a{b};</code> is functionally the same as <code>A a(b);</code>  See <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a> on cppreference.com"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1519251076, "post_id": 48916222, "comment_id": 84839149, "body": "I think technically it is not direct initialized, but list initialized."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1519251078, "post_id": 48916222, "comment_id": 84839151, "body": "@Oliv You&#39;re looking at the wrong section.  This initialization is covered under the previous bullet: <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#17.6.2\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/n4659/dcl.init#17.6.2</a>"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1519251434, "post_id": 48916222, "comment_id": 84839317, "body": "You mean the preposition should be regrouped as :*Otherwise,( if the initialization is direct-initialization,) (or if it is copy-initialization where the cv-unqualified version of the source type is the same class as, or a derived class of, the class of the destination,) constructors are considered* **and not ** (Otherwise, if the initialization is direct-initialization), (or if it is copy-initialization) (where the cv-unqualified version of the source type is the same class as, or a derived class of, the class of the destination, constructors are considered)... I have not read correctly"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519251598, "post_id": 48916222, "comment_id": 84839395, "body": "@Oliv 17.6.2 states <i>Otherwise, <b>if the initialization is direct-initialization</b>, or if it is copy-initialization where the cv-unqualified version of the source type is the same class as, or a derived class of, the class of the destination, constructors are considered.</i> Since the bold part applies then we read the rest where we have <i>The applicable constructors are enumerated ([over.match.ctor]), and the best one is chosen through overload resolution.</i> which explains why it finds <code>A(int)</code> and converts <code>b</code> to an <code>int</code>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519251819, "post_id": 48916222, "comment_id": 84839501, "body": "@NathanOliver Don&#39;t know why I had associated the expression <i>where the cv-unqualified version of the source type is the same class</i> to both  <i>the initialization is direct-initialization</i> and to <i>copy-initialization</i>. Which is visibly wrong. Thanks, you solved my problem."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1519251906, "post_id": 48916222, "comment_id": 84839535, "body": "@Oliv No problem.  Reading the standard can be... exhausting."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1519278514, "post_id": 48916222, "comment_id": 84847213, "body": "1) &quot;(i.e., for the remaining copy-initialization cases)&quot; is a pretty clear indication that you are in the wrong bullet. 2) Actually, @NathanOliver is also in the wrong bullet. This is covered by the very first bullet, [dcl.init]/17.1. The actual initialization here is controlled by [dcl.init.list]/3.6."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1519307613, "post_id": 48916222, "comment_id": 84864730, "body": "@T.C. Would you look at that.  I didn&#39;t scroll up far enough either."}], "answers": [{"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1519250931, "post_id": 48916292, "comment_id": 84839082, "body": "But the standard says to consider only user defined conversion sequence from B to A. Not user defined conversion sequence from B to a parameter that would match a constructor of A."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1519251660, "post_id": 48916292, "comment_id": 84839427, "body": "The answer is NathanOliver comment, I had miss-read the previous standard bullet which do apply."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 2, "last_activity_date": 1519251092, "last_edit_date": 1519251092, "creation_date": 1519250741, "answer_id": 48916292, "question_id": 48916222, "link": "https://stackoverflow.com/questions/48916222/why-conversion-can-involve-two-user-defined-conversion-function-constructor/48916292#48916292", "title": "Why conversion can involve two user defined conversion function/constructor?", "body": "<p>It's well-formed because it uses one conversion to convert from a B to an <code>int</code>. Then the constructor for A is called explicitly, using that <code>int</code> as a parameter.</p>\n\n<p>This would be a case where you have two user-defined conversions:</p>\n\n<pre><code>  void f( A a ) {}\n  B b;\n  f( b  );      \n</code></pre>\n"}], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519274712, "creation_date": 1519250425, "last_edit_date": 1519274712, "question_id": 48916222, "link": "https://stackoverflow.com/questions/48916222/why-conversion-can-involve-two-user-defined-conversion-function-constructor", "title": "Why conversion can involve two user defined conversion function/constructor?", "body": "<p>I am trying to understand which <em>rules in the standard</em> justify the compiler behavior below. So this question is only intended to get a <strong>language-lawyer answer.</strong></p>\n\n<p>Let's consider this two classes:</p>\n\n<pre><code>struct A{\n   A(int);\n};\nstruct B{\n   operator int();\n};\n</code></pre>\n\n<p>The following code compile:</p>\n\n<pre><code> B b;\n A a{b};\n</code></pre>\n\n<p>The variable <code>a</code> is direct initialized by a <code>b</code>. According to <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#17.6.3\" rel=\"nofollow noreferrer\">[dlc.init]/17.6.3</a>:</p>\n\n<blockquote>\n  <p>Otherwise (i.e., for the remaining copy-initialization cases), user-defined conversion sequences that can convert from the source type to the destination type or (when a conversion function is used) to a derived class thereof are enumerated as described in [over.match.copy],</p>\n</blockquote>\n\n<p>I understand that the process of direct initialization will list all <em>user-defined</em> conversion sequence that can perform a conversion from <code>B</code> (the source type) to <code>A</code>, the destination type. [over.match.copy] explain where can be found user defined conversion function.</p>\n\n<p>A <em>user defined conversion sequence</em> can only involve 1 user defined conversion function or constructor. But the only conversion path consist in calling both the conversion constructor <code>A::A(int)</code> and the conversion function <code>B::operator int()</code>. </p>\n\n<p>So there are no user defined conversion sequence that allows conversion from <code>B</code> to <code>A</code>.</p>\n\n<p>Why according to the standard the initialization <code>A a{b};</code> could be well formed?</p>\n"}, {"tags": ["c++", "c++20", "transactional-memory"], "comments": [{"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 3, "creation_date": 1519253576, "post_id": 48916044, "comment_id": 84840188, "body": "Proposed for C++20? Didn&#39;t they agree to keep it as a TS as long as they have sufficient user experience to propose it as a feature for the IS?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1519288128, "post_id": 48916044, "comment_id": 84851709, "body": "I don&#39;t know much about <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>, but <a href=\"https://stackoverflow.com/questions/tagged/transactional-memory\">transactional-memory</a> is pretty much exactly what it says on the tin: it is memory that is transactional, exactly like in a database. Memory can only be modified inside a transaction, and if two threads modify the same piece of memory at the same time, (at least one of) the transaction(s) is/are rolled back and retried."}, {"owner": {"reputation": 1121, "user_id": 7002215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e309bad5f11999bc0785b0b357ce22?s=128&d=identicon&r=PG&f=1", "display_name": "Isuru H", "link": "https://stackoverflow.com/users/7002215/isuru-h"}, "edited": false, "score": 0, "creation_date": 1519375623, "post_id": 48916044, "comment_id": 84894800, "body": "I tried to summaries TM a bit as a response to this question. <a href=\"https://stackoverflow.com/questions/41829838/what-is-transactional-memory-in-comparison-to-actor-model-and-locks\" title=\"what is transactional memory in comparison to actor model and locks\">stackoverflow.com/questions/41829838/&hellip;</a>. Have a look and let me know if you need further info."}], "owner": {"reputation": 2462, "user_id": 3343783, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/011bea65b35392a6d1649eee9f95b7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nisba", "link": "https://stackoverflow.com/users/3343783/nisba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1570307875, "creation_date": 1519249677, "last_edit_date": 1570307875, "question_id": 48916044, "link": "https://stackoverflow.com/questions/48916044/what-is-transactional-memory-and-what-would-it-change-in-c-programming-c20", "title": "What is transactional memory and what would it change in C++ programming (C++20)", "body": "<p>One of the proposed features for C++20 is transactional memory.</p>\n\n<p>What is it? Is it going to simplify multithreaded programming in C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1519249669, "post_id": 48916009, "comment_id": 84838521, "body": "It is done &quot;2 by 2&quot;."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1519249709, "post_id": 48916009, "comment_id": 84838548, "body": "All meaningful division is by <code>2</code> in example 1 so integer division applies."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1519249741, "post_id": 48916009, "comment_id": 84838563, "body": "&quot;I thought if any element was a double, the compiler would implicitly convert all elements to double. &quot; - you thought wrong <code>2&#47;3 + 0.1</code> performs integer arithmetic on the first subexpression."}, {"owner": {"reputation": 429, "user_id": 5224887, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU1Uza3EkUs/AAAAAAAAAAI/AAAAAAAAEto/cfKXMlcbDdM/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5224887/aditya"}, "edited": false, "score": 0, "creation_date": 1519249779, "post_id": 48916009, "comment_id": 84838583, "body": "The type casting is applied when it encounters the floating point number. So, in the first case, <code>1&#47;2</code> would still be an <code>int</code> and would evaluate to 0. The type casting will occur at <code>1.</code>."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1519249952, "post_id": 48916009, "comment_id": 84838666, "body": "A rule of thumb: if you need <code>double</code> results - use type <code>double</code>. C++ can&#39;t be learned by guessing. Please have a look at this <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">C++ books</a> list."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1519250041, "post_id": 48916009, "comment_id": 84838691, "body": "&quot;I thought ...&quot; - well, <i>don&#39;t</i>. Don&#39;t think you know something or guess; <i>know</i> you know - by looking it up and being 100% sure. Don&#39;t assume things, only know."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1519250816, "post_id": 48916009, "comment_id": 84839032, "body": "<i>I thought if any element was a double, the compiler would implicitly convert all elements to double.</i> -- I have to ask, are you coming from using another computer language?  If so, this is where you will get burned very badly if you&#39;re leveraging what you know about other computer languages when learning C++."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 429, "user_id": 5224887, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU1Uza3EkUs/AAAAAAAAAAI/AAAAAAAAEto/cfKXMlcbDdM/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5224887/aditya"}, "edited": false, "score": 1, "creation_date": 1519254436, "post_id": 48916009, "comment_id": 84840490, "body": "@Aditya \u2014 there are no type casts in this code. There are implicit conversations. A type cast is something you write in your code to tell the compiler to do a conversion."}, {"owner": {"reputation": 429, "user_id": 5224887, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU1Uza3EkUs/AAAAAAAAAAI/AAAAAAAAEto/cfKXMlcbDdM/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5224887/aditya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1519311126, "post_id": 48916009, "comment_id": 84867319, "body": "@PeteBecker Thought someone would mention that. I used the term because the question involved its usage. Wanted to convey the information so he could understand it. I realized I should&#39;ve addressed that as well later but I was past 5 minutes by that time. Didn&#39;t want to clutter the comments by adding another one. I see I should have added the extra comment now."}, {"owner": {"reputation": 21, "user_id": 6873373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82b0286200ed5784fafd0beb10366679?s=128&d=identicon&r=PG&f=1", "display_name": "Gaylord", "link": "https://stackoverflow.com/users/6873373/gaylord"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1519417500, "post_id": 48916009, "comment_id": 84918174, "body": "@Jesper, I&#39;m asking so I know. I&#39;m doing this analysis so I know. Every &quot;knowing&quot; begins with thought. I&#39;m learning by doing, and going to the community to get clarification on the details. I thought that&#39;s what stackoverflow was for."}, {"owner": {"reputation": 429, "user_id": 5224887, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU1Uza3EkUs/AAAAAAAAAAI/AAAAAAAAEto/cfKXMlcbDdM/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5224887/aditya"}, "edited": false, "score": 0, "creation_date": 1519683355, "post_id": 48916009, "comment_id": 85001431, "body": "@Gaylord I support your approach. Mentioning your thought does help in understanding where and why you are not understanding the problem, thus making the answer to be clear. However, I think Jesper just worded his statement a bit crudely - his emphasis should have been to ask you to work independently to approach the right answer. I do think you&#39;ve at least tried it - otherwise you wouldn&#39;t have had the initial thought to begin with. Cheers"}], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 9, "last_activity_date": 1519249763, "creation_date": 1519249763, "answer_id": 48916072, "question_id": 48916009, "link": "https://stackoverflow.com/questions/48916009/c-implicit-conversion-confusion-with-doubles-and-ints/48916072#48916072", "title": "c++ implicit conversion confusion with doubles and ints", "body": "<blockquote>\n  <p>I thought if any element was a double, the compiler would implicitly convert all elements to double. This doesn't happen in the 1st case though.</p>\n</blockquote>\n\n<p>No. Compiler parse an expression step by step, not as a whole. For</p>\n\n<pre><code>i = 1 / 2 * 2 / 1. * 2. / 4 * 4;\n</code></pre>\n\n<p>it is parsed as <code>i = ((1 / 2) * 2)...</code>. In the first parenthesis, there are only <code>int</code>, so <code>int</code> arithmetics is applied, which leads a 0. This 0 makes the whole expression 0.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1519251132, "last_edit_date": 1519251132, "creation_date": 1519250208, "answer_id": 48916174, "question_id": 48916009, "link": "https://stackoverflow.com/questions/48916009/c-implicit-conversion-confusion-with-doubles-and-ints/48916174#48916174", "title": "c++ implicit conversion confusion with doubles and ints", "body": "<p>As stated in <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">C++ operator precedence and associativity</a> * (multiply) and / (division) has the same precedence and left to right associativity. So they parsed from left to right and result type of every operation determined one by one according to <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">rules</a> - pay attention to <strong>Integral promotion</strong> section there (note that evaluation order is different thing and not directly related), not whole expression is promoted to <code>double</code> if you have one of that type there. So logically this code:</p>\n\n<pre><code>i = 1 / 2 * 2 / 1. * 2. / 4 * 4;\n</code></pre>\n\n<p>is equal to this:</p>\n\n<pre><code>auto a = 1 / 2; // a - int\nauto b = a * 2; // b - int\nauto c = b / 1.; // c - double\nauto d = c * 2.; // d - double\nauto e = d / 2;  // e - double\nauto f = e * 4;  // f - double\ni = f;\n</code></pre>\n\n<p>and type of every variable a-f is determined separately.</p>\n"}], "owner": {"reputation": 21, "user_id": 6873373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82b0286200ed5784fafd0beb10366679?s=128&d=identicon&r=PG&f=1", "display_name": "Gaylord", "link": "https://stackoverflow.com/users/6873373/gaylord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "closed_date": 1519417196, "answer_count": 2, "score": 1, "last_activity_date": 1519251132, "creation_date": 1519249522, "last_edit_date": 1519250133, "question_id": 48916009, "link": "https://stackoverflow.com/questions/48916009/c-implicit-conversion-confusion-with-doubles-and-ints", "closed_reason": "Duplicate", "title": "c++ implicit conversion confusion with doubles and ints", "body": "<p>I've been studying c++, and I ran into an implicit conversion issue that I don't understand. In this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main(){\n    int i;\n    i = 1 / 2 * 2 / 1. * 2. / 4 * 4;\n    cout &lt;&lt; i &lt;&lt; endl;\n\n    i = 3.5 + 2 + 1.6;\n    cout &lt;&lt; i &lt;&lt; endl;\n\n    i = 2 + 3.5 + 1.6;\n    cout &lt;&lt; i &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Ithe outputs are: 0, 7 and 7 respectively.</p>\n\n<p>In the last 2 examples, the compiler is implicitly converting the elements to doubles, so the sum = 7.1, which is then cast to an int to get 7.</p>\n\n<p>Because the 1st example also has doubles, I'd expect all of those elements to be converted to doubles as well, and the sum being 2.0, before being cast to 2, but the result is 0, so it seems the \"1/2\" is being treated as ints, giving a result of 0. I'm not sure that's what the compiler is doing, but that's what it seems like.</p>\n\n<p>I thought if any element was a double, the compiler would implicitly convert all elements to double. This doesn't happen in the 1st case though. Can someone please explain why the compiler converts these differently? Thanks.</p>\n"}, {"tags": ["c++", "c++11", "constexpr", "operator-precedence", "comma-operator"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1519249720, "post_id": 48915998, "comment_id": 84838555, "body": "IIUC you are looking for <a href=\"https://stackoverflow.com/a/20001376/1708801\">comma operator?</a> also since you asked about constexpr see <a href=\"https://stackoverflow.com/q/27324573/1708801\">Why was the restriction on the comma operator being in a constant expression removed in C++11?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 3, "last_activity_date": 1519264184, "last_edit_date": 1519264184, "creation_date": 1519250326, "answer_id": 48916203, "question_id": 48915998, "link": "https://stackoverflow.com/questions/48915998/evaluation-order-in-parenthesis-and-comma-expression-in-c-of-the-type-x0-y0/48916203#48916203", "title": "Evaluation order in parenthesis and comma expression in C++ of the type (x0 = y0, x1 = y1, x2 = x0, ...)", "body": "<blockquote>\n  <p>First, what is the name in the language (and link on cppreference) to this \"parenthesis\" expression where only the last term is returned;</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/operator_other\" rel=\"nofollow noreferrer\">\"comma operator\"</a>.</p>\n\n<p>I mean: the comma operator evaluate but discard the element on the left and return the element on the right (if the element on the left isn't an object with comma operator redefined).</p>\n\n<p>And there is no need of parenthesis; you can also write.</p>\n\n<pre><code>return a, b, c, d;\n</code></pre>\n\n<blockquote>\n  <p>Second, let's say the code becomes [...] Is the order of evaluation of theses \"parenthesis\" expressions fixed?</p>\n</blockquote>\n\n<p>Yes; from left to right.</p>\n\n<p>Look for \"sequence point\" for more info.</p>\n\n<p>And from </p>\n\n<pre><code>return a += 2, d += 5, b -= 3, c = a + b + d, d;\n</code></pre>\n\n<p>you get exactly the same result that you get from</p>\n\n<pre><code>a += 2; d += 5; b -= 3; c = a + b + d; return d;\n</code></pre>\n\n<p>taking also in count that <code>a</code>, <code>d</code>, <code>b</code> and <code>c</code> are <code>int</code>s and that <code>int</code> isn't a class that redefine the comma operator.</p>\n\n<p>But do not confuse the comma in \"comma operator\" with the comma that separate the arguments in a function calling. The first one is a \"sequence point\", the second one isn't.</p>\n\n<p>I mean: with</p>\n\n<pre><code>int i = 0;\n\nreturn  i++, i++, i++;\n</code></pre>\n\n<p>the returned value is defined (2); if <code>foo()</code> is a function that receive three integers, with</p>\n\n<pre><code>int i = 0;\n\nfoo(i++, i++, i++);\n</code></pre>\n\n<p>you know that <code>foo()</code> receive a zero, a one and a two but the order is unspecified (can be <code>0</code> for the first parameter and <code>2</code> for the third or the contrary).</p>\n\n<blockquote>\n  <p>Finally, purely in C++11 [...] can this parentheses expressions be used to write several computation in a single constexpr function?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>And (IMHO) it's a very useful feature.</p>\n"}], "owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 48916203, "answer_count": 1, "score": 1, "last_activity_date": 1519264184, "creation_date": 1519249479, "last_edit_date": 1519252496, "question_id": 48915998, "link": "https://stackoverflow.com/questions/48915998/evaluation-order-in-parenthesis-and-comma-expression-in-c-of-the-type-x0-y0", "title": "Evaluation order in parenthesis and comma expression in C++ of the type (x0 = y0, x1 = y1, x2 = x0, ...)", "body": "<p>In <code>C++</code>, it is possible to do the following:</p>\n\n<pre><code>int f(int&amp; a, int&amp; b, int&amp; c, int&amp; d) { \n    return (a, b, c, d); // here\n}\n</code></pre>\n\n<p>First, what is the name in the language (and link on cppreference) to this \"parenthesis\" expression where only the last term is returned;</p>\n\n<p>Second, let's say the code becomes:</p>\n\n<pre><code>int f(int&amp; a, int&amp; b, int&amp; c, int&amp; d) { \n    return (a += 2, d += 5, b -= 3, c = a + b + d, d); // here\n}\n</code></pre>\n\n<p>Is the order of evaluation of theses \"parenthesis\" expressions fixed? If so do I have the guarantee that <code>f</code> will change the values of <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> from the left to the right, and return the correct updated value of <code>d</code> as if it was:</p>\n\n<pre><code>int f(int&amp; a, int&amp; b, int&amp; c, int&amp; d) { \n    a += 2;\n    d += 5;\n    b -= 3;\n    c = a + b + d;\n    return d;\n}\n</code></pre>\n\n<p>Finally, purely in <code>C++11</code> (since the problem don't exist in <code>C++14</code> anymore because <code>constexpr</code> don't have such strong requirements), can this parentheses expressions be used to write several computation in a single <code>constexpr</code> function?</p>\n"}, {"tags": ["c++", "c++11", "memory"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 8, "creation_date": 1519249106, "post_id": 48915888, "comment_id": 84838265, "body": "&quot;I am trying to write a program on C++ but without using libstdc++&quot; - Why? This seems, on the surface, like a very silly/stupid thing to do. Please explain <i>why</i> you are doing this."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1519249786, "post_id": 48915888, "comment_id": 84838586, "body": "consider for the sake of discussion that you&#39;re relying on functionality that might itself have to allocate. That functionality could be using <code>new</code> and <code>delete</code>. That said this seems very silly."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519250054, "post_id": 48915888, "comment_id": 84838697, "body": "@JesperJuhl for example, because libstdc++ is not available on target platform?"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1519250561, "post_id": 48915888, "comment_id": 84838904, "body": "What is the point of this exercise? Tell me it&#39;s not a benighted instructor&#39;s assignment. Even if standard lib is not available on the platform, there&#39;s no reason not to use <code>new</code> and <code>delete</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519250608, "post_id": 48915888, "comment_id": 84838925, "body": "@SergeyA if that was the case I very much would expect OP to have stated that up front."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 2, "creation_date": 1519250725, "post_id": 48915888, "comment_id": 84838987, "body": "You can override globals <code>::operator new</code> and <code>::operator delete</code> if that helps. Please answer, &quot;What&#39;s the point?&quot;"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1519250950, "post_id": 48915888, "comment_id": 84839091, "body": "You&#39;re soaking in it. Chances border on 100% that <code>new</code> and <code>delete</code> are based on <code>malloc</code> and <code>free</code>."}, {"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519256826, "post_id": 48915888, "comment_id": 84841250, "body": "Firstly, I suspect this may be a bug. I wouldn&#39;t normally expect delete to be referenced if the custom allocator/deallocator is provided. Secondly, what I do is a small templated wrapper that I plug into a purely C program where size matters. I&#39;d like to get zero overhead, and linking with libstdc++ just for the <i>dead</i> operator delete looks quite useless. And yes, overriding global operator delete works. Thanks for suggestions."}, {"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519257475, "post_id": 48915888, "comment_id": 84841446, "body": "<a href=\"http://www.avabodh.com/cxxin/nostdlib.html\" rel=\"nofollow noreferrer\">avabodh.com/cxxin/nostdlib.html</a> I followed all suggestions of this article. I really assume that working w/o a standard library is perfectly fine and supported."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1519306397, "post_id": 48915888, "comment_id": 84863776, "body": "@stsp only in very limited cases, but most language features are not available because the runtime is not initialized without the stdlib present."}, {"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1519396570, "post_id": 48915888, "comment_id": 84906777, "body": "@Mgetz I expect all language features to be available (modulo RTTI and exceptions that I explicitly disabled), and most of the STL, too, as they are header-only. This worked very well (i.e. templates, polymorphism, STL - all worked) till I started to use memory management. So its really not something unusual. Its still quite feature-rich and should work properly."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1519398456, "post_id": 48915888, "comment_id": 84908059, "body": "@stsp a &#39;freestanding&#39; use of C++ only has access to a few headers: <code>&lt;cstddef&gt;</code> <code>&lt;cstdint&gt;</code> and I think three others that don&#39;t depend on any runtime. Anything depending on runtime: RTTI, exceptions, all require a runtime environment which would require libstdc++ or libc++. Alternatively you can supply your own implementations, which some OS kernel developers have done. <a href=\"https://wiki.osdev.org/C++\" rel=\"nofollow noreferrer\">wiki.osdev.org/C++</a> has more information on freestanding environment requirements."}, {"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1519399709, "post_id": 48915888, "comment_id": 84908884, "body": "@Mgetz your understanding contradicts with an article that I referred to above. Here it is again: avabodh.com/cxxin/nostdlib.html I think &quot;freestanding&quot; use is a bit more restricted than what I do. It assumes you have no standard libraries at all, neither libc nor libstdc++. My use is to have libc and all STL headers. So its really much richer than freestanding would allow."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519255080, "post_id": 48916459, "comment_id": 84840719, "body": "Thanks. I provided an empty inline version of operator delete and added -Wno-inline-new-delete - that helped. Still I wonder if it is unsolvable by some other means, like dead code elimination or the like..."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519306357, "post_id": 48916459, "comment_id": 84863739, "body": "@stsp you need to look into a &quot;standalone&quot; build, that will block you from using almost all the stdlib however. It&#39;s generally used to build operating system kernels."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519310105, "post_id": 48916459, "comment_id": 84866548, "body": "@stsp dead code elimination might help, but for this you need to use the link time optimization. I never used it myself, but here is one SO question I found with quick search: <a href=\"https://stackoverflow.com/questions/31688069/requirements-to-use-flto\" title=\"requirements to use flto\">stackoverflow.com/questions/31688069/requirements-to-use-flt&zwnj;&#8203;o</a>"}, {"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519397086, "post_id": 48916459, "comment_id": 84907107, "body": "Does anyone think this may be a bug worth reporting to the glibc or gcc team? My feeling is that the never used, overloaded call should not propagate to the final object. But I don&#39;t know who should be responsible for this, libstdc++ itself or the compiler&#39;s optimizer? Maybe libstdc++ should have used std::enable_if to conditionalize it, or is it a task of the dead code elimination? I am coming from an assumption that if you explicitly want to disable libstdc++, you have guidelines and compiler options to do exactly that. But in this particular case they don&#39;t work as expected."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519401335, "post_id": 48916459, "comment_id": 84909981, "body": "Doesn&#39;t seem like a bug in libstdc++ at all (where is the bug??) and as for compiler, lack of optimization is never a bug. You can switch to Clang and it&#39;s own libc++."}, {"owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "edited": false, "score": 0, "creation_date": 1519403835, "post_id": 48916459, "comment_id": 84911516, "body": "The bug can be suspected if working w/o libstdc++ is a valid and supported scenario, which I assume it is. Then it is obviously a bug as this scenario doesn&#39;t work. If this is not supported then its just a missing optimization. clang++ -std=c++11 -stdlib=libc++ produces the same problem."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519404588, "post_id": 48916459, "comment_id": 84911979, "body": "This is weird. When I examined libc++ implementation, I didn&#39;t find the delete call. However, I might have missed it, I never want for the full experiment. As for the bug, I am not sure if it is supported scenario."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1519309583, "last_edit_date": 1519309583, "creation_date": 1519251474, "answer_id": 48916459, "question_id": 48915888, "link": "https://stackoverflow.com/questions/48915888/allocate-shared-with-malloc/48916459#48916459", "title": "allocate_shared with malloc", "body": "<p>I believe, the call of <code>operator delete</code> there is a peculiarity of GCC STL implementation. </p>\n\n<p>Looking at the (rather convoluted) code of <code>shared_ptr_base.h</code>, I can see that <code>_Sp_counted_base</code> will call <code>delete</code> from it's <code>_M_destroy</code> function. This function is overridden in <code>_Sp_counted_ptr_inplace</code> (the one you end up using with <code>allocate_shared</code>), so this code is never executed. But it's presence there provides unresolved symbol.</p>\n\n<p>Overriding global <code>operator delete</code> get's rid of it.</p>\n"}], "owner": {"reputation": 133, "user_id": 5515547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601905159c489b63a8eeffb10ded3ffc?s=128&d=identicon&r=PG", "display_name": "stsp", "link": "https://stackoverflow.com/users/5515547/stsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519309583, "creation_date": 1519248964, "question_id": 48915888, "link": "https://stackoverflow.com/questions/48915888/allocate-shared-with-malloc", "title": "allocate_shared with malloc", "body": "<p>I am trying to write a program on\nC++ but without using libstdc++.\nMy program uses some header-only\ntemplates, and also it uses allocate_shared,\nto which I supply the custom allocator\nto avoid operators new and delete.</p>\n\n<p>My problem is that I can only get\nrid of operator new. Operator delete\nis still referenced in the resulting\nobject file.</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;memory&gt;\n\ntemplate &lt;class T&gt;\nstruct Mallocator {\n  typedef T value_type;\n  Mallocator() = default;\n  template &lt;class U&gt; constexpr Mallocator(const Mallocator&lt;U&gt;&amp;) noexcept {}\n  T* allocate(std::size_t n) {\n    return (T*)std::malloc(n*sizeof(T));\n  }\n  void deallocate(T* p, std::size_t) noexcept { std::free(p); }\n};\ntemplate &lt;class T, class U&gt;\nbool operator==(const Mallocator&lt;T&gt;&amp;, const Mallocator&lt;U&gt;&amp;) { return true; }\ntemplate &lt;class T, class U&gt;\nbool operator!=(const Mallocator&lt;T&gt;&amp;, const Mallocator&lt;U&gt;&amp;) { return false; }\n\nstruct A {\n    std::shared_ptr&lt;int&gt; a;\n    A(const std::shared_ptr&lt;int&gt; b) : a(b) {}\n};\n\nint main()\n{\n    A a(std::allocate_shared&lt;int&gt;(Mallocator&lt;int&gt;(), 5));\n    return 0;\n}\n</code></pre>\n\n<p>Lets compile:</p>\n\n<p><code>$ c++ -c malloca.cpp</code></p>\n\n<p>And see what's there:</p>\n\n<pre><code>$ nm -u malloca.o | c++filt | grep new\n$ nm -u malloca.o | c++filt | grep delete\nU operator delete(void*, unsigned long)\n</code></pre>\n\n<p>Operator delete is still there, despite\nthe custom allocator being provided. How\ncan I get rid of it?</p>\n"}, {"tags": ["c++", "macos", "gcc", "compilation", "g++"], "answers": [{"tags": [], "owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "is_accepted": true, "score": 2, "last_activity_date": 1519250742, "last_edit_date": 1519250742, "creation_date": 1519249082, "answer_id": 48915914, "question_id": 48915882, "link": "https://stackoverflow.com/questions/48915882/compilation-error-with-c-macos/48915914#48915914", "title": "Compilation error with C++ (macOS)", "body": "<p>You could try to use <code>g++</code>:</p>\n\n<pre><code>g++ filename.cpp -o filename.out\n</code></pre>\n\n<p>Or Apple's <code>clang++</code>:</p>\n\n<pre><code>clang++ filename.cpp -o filename.out\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1287, "user_id": 5767099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1144731518892203/picture?type=large", "display_name": "Claudio Cortese", "link": "https://stackoverflow.com/users/5767099/claudio-cortese"}, "is_accepted": false, "score": 3, "last_activity_date": 1519249098, "creation_date": 1519249098, "answer_id": 48915917, "question_id": 48915882, "link": "https://stackoverflow.com/questions/48915882/compilation-error-with-c-macos/48915917#48915917", "title": "Compilation error with C++ (macOS)", "body": "<p>You are compiling C source code with <code>gcc</code>.</p>\n\n<p>That's the problem, you should be using <code>g++</code> instead.</p>\n"}], "owner": {"reputation": 1178, "user_id": 3761166, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/yMEuq.png?s=128&g=1", "display_name": "Commoner", "link": "https://stackoverflow.com/users/3761166/commoner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 1, "accepted_answer_id": 48915914, "answer_count": 2, "score": 1, "last_activity_date": 1519292073, "creation_date": 1519248947, "last_edit_date": 1519292073, "question_id": 48915882, "link": "https://stackoverflow.com/questions/48915882/compilation-error-with-c-macos", "title": "Compilation error with C++ (macOS)", "body": "<p>I am getting an error when I am trying to compile this very simple C++ program in Mac (HighSierra: Version 10.13.3). The gcc version being used in this Mac is 5.3.0.</p>\n\n<p>This is the C++ program:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cmath&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint main() \n{\n  cout&lt;&lt;sin(1);\n} \n</code></pre>\n\n<p>Following an answer from an earlier question, I installed command line tools using <code>xcode-select --install</code></p>\n\n<p>After the aforementioned command line installation, when I try to compile this program using</p>\n\n<pre><code>gcc filename.cpp -o filename.out\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>/var/folders/mp/z7xpkw3538z71904cdqhztv00000gn/T//ccGJEHr7.s:24:11: warning: section \"__textcoal_nt\" is deprecated\n    .section __TEXT,__textcoal_nt,coalesced,pure_instructions\n             ^      ~~~~~~~~~~~~~\n/var/folders/mp/z7xpkw3538z71904cdqhztv00000gn/T//ccGJEHr7.s:24:11: note: change section name to \"__text\"\n    .section __TEXT,__textcoal_nt,coalesced,pure_instructions\n             ^      ~~~~~~~~~~~~~\nUndefined symbols for architecture x86_64:\n  \"std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(double)\", referenced from:\n      _main in ccpjcybF.o\n  \"std::ios_base::Init::Init()\", referenced from:\n      __static_initialization_and_destruction_0(int, int) in ccpjcybF.o\n  \"std::ios_base::Init::~Init()\", referenced from:\n      __static_initialization_and_destruction_0(int, int) in ccpjcybF.o\n  \"std::cout\", referenced from:\n      _main in ccpjcybF.o\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>How can I solve this problem?</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>Following the answers, now I used <code>g++</code>, i.e.</p>\n\n<pre><code>g++ filename.cpp -o filename.out\n</code></pre>\n\n<p>Now, I am getting the following error:</p>\n\n<pre><code>/var/folders/mp/z7xpkw3538z71904cdqhztv00000gn/T//ccJjEuJy.s:24:11: warning: section \"__textcoal_nt\" is deprecated\n    .section __TEXT,__textcoal_nt,coalesced,pure_instructions\n             ^      ~~~~~~~~~~~~~\n/var/folders/mp/z7xpkw3538z71904cdqhztv00000gn/T//ccJjEuJy.s:24:11: note: change section name to \"__text\"\n    .section __TEXT,__textcoal_nt,coalesced,pure_instructions\n             ^      ~~~~~~~~~~~~~\n</code></pre>\n"}, {"tags": ["c++", "recursion", "linked-list"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1519248230, "post_id": 48915702, "comment_id": 84837815, "body": "What is the question? There is a <code>std::list</code> container in the Standard C++ Library."}, {"owner": {"reputation": 3, "user_id": 8797504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861129767236523/picture?type=large", "display_name": "Luke Clover", "link": "https://stackoverflow.com/users/8797504/luke-clover"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1519248300, "post_id": 48915702, "comment_id": 84837846, "body": "I want to know specifically if I&#39;m actually creating a linked list, or just overwriting p. When I use a while loop to traverse through, it only displays one node"}, {"owner": {"reputation": 3, "user_id": 8797504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861129767236523/picture?type=large", "display_name": "Luke Clover", "link": "https://stackoverflow.com/users/8797504/luke-clover"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1519248337, "post_id": 48915702, "comment_id": 84837865, "body": "I think it&#39;s this line that&#39;s giving me trouble  insert((p-&gt;next)-&gt;first, (p-&gt;next)-&gt;last, (p-&gt;next)-&gt;age);"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1519248395, "post_id": 48915702, "comment_id": 84837900, "body": "SO is not about code review. If you have a working code please consider Code Review SE site. Avoid cross posting if you decide to go there. As-is it is unclear what the question is. Please try to <a href=\"https://stackoverflow.com/posts/48915702/edit\">clarify</a>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1519248710, "post_id": 48915702, "comment_id": 84838065, "body": "If we only had a penny for each linked list insert bug."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1519249363, "post_id": 48915702, "comment_id": 84838390, "body": "@LukeClover The code should be rewritten, it doesn&#39;t do anything sensible, it&#39;s not close to being correct. I guess you don&#39;t have a good grasp of pointers yet (or recursion). I&#39;ll make two suggestions, first is that you draw out on paper with boxes and arrows what happens when your code executes. If you do this correctly it won&#39;t take long to see your errors. The second suggestion is to question why you are using recursion. It&#39;s not normal to use recursion for this task, I don&#39;t see that it adds anything, but maybe you have been told to use it."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1519249478, "post_id": 48915702, "comment_id": 84838433, "body": "@LukeClover The answer to your question is that yes you are not adding to the list after the first item (as far as I can judge from the partial code here)."}, {"owner": {"reputation": 3, "user_id": 8797504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861129767236523/picture?type=large", "display_name": "Luke Clover", "link": "https://stackoverflow.com/users/8797504/luke-clover"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1519249783, "post_id": 48915702, "comment_id": 84838585, "body": "@john I did a very similar example earlier that created a list successfully, so I was trying to write is as similar to that  Here&#39;s the original function call from inside a while-loop if(infile.good())         {             p = new node(name, count);             if (head == NULL)                 head = p;             else                 head -&gt;append(p);         };"}, {"owner": {"reputation": 3, "user_id": 8797504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861129767236523/picture?type=large", "display_name": "Luke Clover", "link": "https://stackoverflow.com/users/8797504/luke-clover"}, "edited": false, "score": 0, "creation_date": 1519249878, "post_id": 48915702, "comment_id": 84838625, "body": "Here is the original function definition {     if(next!=NULL)         next-&gt;append(p);     else         next = p; }"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8797504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861129767236523/picture?type=large", "display_name": "Luke Clover", "link": "https://stackoverflow.com/users/8797504/luke-clover"}, "edited": false, "score": 0, "creation_date": 1519250748, "post_id": 48916123, "comment_id": 84839002, "body": "Thanks for that. My struggle was trying to find a relation between the last item in the list and the new node"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1523421147, "last_edit_date": 1523421147, "creation_date": 1519250018, "answer_id": 48916123, "question_id": 48915702, "link": "https://stackoverflow.com/questions/48915702/linked-list-insert-with-recursion-trouble/48916123#48916123", "title": "Linked list insert with recursion trouble", "body": "<p>Inserting a node in a linked list is simple when the list is empty.</p>\n\n<pre><code>head = p;\n</code></pre>\n\n<p>and you are done.</p>\n\n<p>Inserting a node at the end of linked list is a little bit involved when the list is not empty. Pictorially, let's say you have:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kqFm7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kqFm7.png\" alt=\"Current Linked List\"></a></p>\n\n<p>and you want to add a new node at the end. You will need to make the link between the last node of the existing linked list and the new node so that you will end up with:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y3GLP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y3GLP.png\" alt=\"New Linked List\"></a></p>\n\n<p>In order to be able to do that you have to walk the linked list to get to the last node. Then, you can use:</p>\n\n<pre><code>lastNode-&gt;next = p;\n</code></pre>\n\n<p>and you are done.</p>\n\n<p>Ignoring the calls to create the output, here's what your function would look like.</p>\n\n<pre><code>void list::insert(string first, string last, int age)\n{\n   node *p = new node;\n   p-&gt;first = first;\n   p-&gt;last = last;\n   p-&gt;age = age;\n\n   if (head == nullptr)\n   {\n      // The simple case\n      head = p;\n   }\n   else\n   {\n      // Gather the last node in the linked list.\n      node* lastNode = head;\n      while ( lastNode-&gt;next != nullptr )\n      {\n         lastNode = lastNode-&gt;next;\n      }\n\n      lastNode-&gt;next = p;\n   }\n}\n</code></pre>\n\n<hr>\n\n<p>Using recursion for inserting a node looks very different. Here's an untested suggestion:</p>\n\n<pre><code>void list::insert(node*&amp; ptr, node* p)\n{\n   if ( ptr == nullptr )\n   {\n      ptr = p;\n   }\n   else\n   {\n      insert(ptr-&gt;next, p);\n   }\n}\n\nvoid list::insert(string first, string last, int age)\n{\n   node *p = new node;\n   p-&gt;first = first;\n   p-&gt;last = last;\n   p-&gt;age = age;\n\n   insert(head, p);\n}\n</code></pre>\n\n<p><strong>I don't recommend using the recursive method.</strong> It not only takes away the readability of the algorithm but is also more expensive at run time. If you have a linked list with a large number of items in it, it might even lead to stack overflow.</p>\n"}], "owner": {"reputation": 3, "user_id": 8797504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861129767236523/picture?type=large", "display_name": "Luke Clover", "link": "https://stackoverflow.com/users/8797504/luke-clover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 48916123, "answer_count": 1, "score": 0, "last_activity_date": 1523421147, "creation_date": 1519248176, "question_id": 48915702, "link": "https://stackoverflow.com/questions/48915702/linked-list-insert-with-recursion-trouble", "title": "Linked list insert with recursion trouble", "body": "<p>So I'm trying to create a linked list in C++ out of a list container class. The list class contains the member head (a node), and insert function, and the node class contains the data I need to add (first name, last name, age). However, I don't think I'm actually creating a list, rather just writing over p during the input loop</p>\n\n<p>Here's the while-loop in the main program that reads data from a file</p>\n\n<pre><code>while(!infile.eof())\n    { infile &gt;&gt; first &gt;&gt; last &gt;&gt; age;\n\n// Process if okay\n\n      if(infile.good())\n        a.insert(first,last,age);\n    };\n</code></pre>\n\n<p>Here's the actual insert function definition</p>\n\n<pre><code>void list::insert(string first, string last, int age)\n\n{\n    node *p;\n    p = new node;\n    p-&gt;first = first;\n    p-&gt;last = last;\n    p-&gt;age = age;\n    if (head == NULL)\n    {\n        head = p;\n        head-&gt;put(cout);\n    } else\n    {\n        if (head-&gt;next != NULL)\n        {\n            head-&gt;put(cout);\n            insert((p-&gt;next)-&gt;first, (p-&gt;next)-&gt;last, (p-&gt;next)-&gt;age);\n        } else\n        {\n            p-&gt;next = p;\n            p-&gt;put(cout);\n        }\n    }\n}\n</code></pre>\n\n<p>I can't change the Node header or main program, so I need to use these parameters in the function calls. Any ideas? </p>\n"}, {"tags": ["c++", "fibonacci"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1519247785, "post_id": 48915540, "comment_id": 84837604, "body": "In your for loop, collect the steps taken."}], "answers": [{"tags": [], "owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "is_accepted": false, "score": 0, "last_activity_date": 1527914394, "last_edit_date": 1527914394, "creation_date": 1519273072, "answer_id": 48919588, "question_id": 48915540, "link": "https://stackoverflow.com/questions/48915540/how-can-i-indicate-print-the-distinct-combinations-to-this-fibonacci-number-base/48919588#48919588", "title": "How can I indicate/print the distinct combinations to this Fibonacci number-based program?", "body": "<p>Instead of having the variables <code>one</code> and <code>two</code> being integers, define them as sets of \"paths\". Then, do the same thing, except <code>result</code> is <code>one</code> with a 1 appended to all the \"paths\" in it plus <code>two</code> with a 2 appended to all the \"paths\" in it.</p>\n\n<p>The algorithm looks something like this (I would recommend trying to do this yourself before looking at my code):</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nstd::set&lt;std::string&gt; climbStairs(int n)\n{\n    if(n == 0)\n        return {\"\"};\n    if(n == 1)\n        return {\"1\"};\n    std::set&lt;std::string&gt; one({\"1\"}), two({\"\"}), result;\n    for(int i = 2; i &lt;= n; i++)\n    {\n        result.clear();\n        for(const std::string &amp;path : one)\n        {\n            result.insert(path + '1');\n        }\n        for(const std::string &amp;path : two)\n        {\n            result.insert(path + '2');\n        }\n        two = move(one);\n        one = move(result);\n    }\n    return one;\n}\n\nint main()\n{\n    std::set&lt;std::string&gt; s = climbStairs(5);\n    for(const std::string &amp;path : s)\n    {\n        std::cout &lt;&lt; path &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>This is the best way that I know of.</p>\n"}], "owner": {"reputation": 25, "user_id": 9341189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f566c137b3934904df56ff4513f7ac8?s=128&d=identicon&r=PG&f=1", "display_name": "justoneday", "link": "https://stackoverflow.com/users/9341189/justoneday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1527914394, "creation_date": 1519247438, "question_id": 48915540, "link": "https://stackoverflow.com/questions/48915540/how-can-i-indicate-print-the-distinct-combinations-to-this-fibonacci-number-base", "title": "How can I indicate/print the distinct combinations to this Fibonacci number-based program?", "body": "<p>I am constructing a function to determine how many distinct ways one can climb to the top of a staircase (can either climb 1 or 2 steps). Although I have gotten the main function to print out how many ways, I am confused on how to print the specific combinations i.e. There are three ways to climb to the top: (1, 1, 1), (1, 2), (2, 1).  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint climbStairs(int n);\n\nint main()\n{\n  int s = 4;\n  cout &lt;&lt; \"There are \" &lt;&lt; climbStairs(s) &lt;&lt; \" ways to climb to the top: \";           \n  return 0;\n}\n\nint climbStairs(int n)    \n{    \n  if(n == 0) return 0;\n  if(n == 1) return 1;\n    int one = 1;\n    int two = 0;\n    int result = 0;   \n    for(int i = 1;i &lt;= n;i++)\n    {\n       result = one + two;\n       two = one;\n       one = result;\n    }   \n    return result;\n}\n</code></pre>\n\n<p>Any explanation on how to go about printing the combinations will help, thank you so much!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5673, "user_id": 2376156, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2s2R4.jpg?s=128&g=1", "display_name": "edtheprogrammerguy", "link": "https://stackoverflow.com/users/2376156/edtheprogrammerguy"}, "edited": false, "score": 2, "creation_date": 1519247289, "post_id": 48915467, "comment_id": 84837367, "body": "You are not initializing largest and smallest to a default value"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 1, "creation_date": 1519247315, "post_id": 48915467, "comment_id": 84837379, "body": "Write <code>if (number == -99) break;</code> after <code>cin &gt;&gt; number;</code>"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "reply_to_user": {"reputation": 5673, "user_id": 2376156, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2s2R4.jpg?s=128&g=1", "display_name": "edtheprogrammerguy", "link": "https://stackoverflow.com/users/2376156/edtheprogrammerguy"}, "edited": false, "score": 0, "creation_date": 1519247876, "post_id": 48915467, "comment_id": 84837651, "body": "@edtheprogrammerguy - <code>number</code> is no initialized either."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519248157, "post_id": 48915467, "comment_id": 84837779, "body": "Initiaize your variables before reading them."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519254835, "post_id": 48915467, "comment_id": 84840630, "body": "This is a case where I&#39;d break the Don&#39;t Repeat Yourself guideline because I think it would result in cleaner code: <code>cin &gt;&gt; number; while (number != -99) { &#47;*logic goes here*&#47; cin &gt;&gt; number;  }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1519249462, "post_id": 48915601, "comment_id": 84838425, "body": "Check out what that does when the user enters the string &quot;forty-two&quot;."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1519249820, "post_id": 48915601, "comment_id": 84838597, "body": "@JiveDadson There are plenty of other questions about validating input, I&#39;m not going to complicate this with that stuff."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1519247676, "creation_date": 1519247676, "answer_id": 48915601, "question_id": 48915467, "link": "https://stackoverflow.com/questions/48915467/using-a-number-to-quit-a-program-in-c-while-not-evaluating-the-actual-number/48915601#48915601", "title": "Using a number to quit a program in c++ while not evaluating the actual number", "body": "<p>Check the number immediately after reading it, and break out of the loop then, instead of using it to update <code>smallest</code> and <code>largest</code>.</p>\n\n<p>You also need to initialize <code>smallest</code> and <code>largest</code> before you can compare them with new numbers. I've done that below by treating the first iteration of the loop specially (with the <code>first_time</code> variable).</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    //Initialize integers for use\n    long int number, largest, smallest;\n    bool first_time = true;\n\n    // Set condition for user input \n    while (true)\n    {\n        // Allow user to input numbers to test \n        cout &lt;&lt; \" Enter a number to find the smallest and largest integer. \" &lt;&lt; endl;\n        cout &lt;&lt; \" Enter -99 to quit \" &lt;&lt; endl;\n        cin &gt;&gt; number;\n\n        if (number == -99) {\n            break;\n        }\n\n        // Evaluate user input \n        if (first_time) {\n            smallest = largest = number;\n            first_time = false;\n        } else if (number &lt; smallest) \n        {\n            smallest = number;\n        } else if (number &gt; largest)\n        {\n            largest = number;\n        }\n\n    }\n\n    if (!first_time) {\n        cout &lt;&lt; \" The smallest number you entered was \" &lt;&lt; smallest &lt;&lt; endl;\n        cout &lt;&lt; \" The largest number you entered was \" &lt;&lt; largest &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1519249499, "post_id": 48915772, "comment_id": 84838444, "body": "Check out what that does when the user enters the string &quot;forty-two&quot;."}, {"owner": {"reputation": 367, "user_id": 6770083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDMD9.jpg?s=128&g=1", "display_name": "Muhammad Zeshan Arif", "link": "https://stackoverflow.com/users/6770083/muhammad-zeshan-arif"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1519249604, "post_id": 48915772, "comment_id": 84838496, "body": "@JiveDadson invalid inputs are not handled. Answer using same code posted in question and updated for required things."}], "tags": [], "owner": {"reputation": 367, "user_id": 6770083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDMD9.jpg?s=128&g=1", "display_name": "Muhammad Zeshan Arif", "link": "https://stackoverflow.com/users/6770083/muhammad-zeshan-arif"}, "is_accepted": false, "score": 0, "last_activity_date": 1519248473, "creation_date": 1519248473, "answer_id": 48915772, "question_id": 48915467, "link": "https://stackoverflow.com/questions/48915467/using-a-number-to-quit-a-program-in-c-while-not-evaluating-the-actual-number/48915772#48915772", "title": "Using a number to quit a program in c++ while not evaluating the actual number", "body": "<p>Try this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    bool isInitialised = false;\n    //Initialize integers for use\n    long int number, largest, smallest;\n\n    // Set condition for user input \n    while (true)\n    {\n        // Allow user to input numbers to test \n        cout &lt;&lt; \" Enter a number to find the smallest and largest integer. \" &lt;&lt; endl;\n        cout &lt;&lt; \" Enter -99 to quit \" &lt;&lt; endl;\n        cin &gt;&gt; number;\n        // if number is -99, break loop\n        if (number == -99) {\n            break;\n        }\n\n        // Evaluate user input \n        if (!isInitialised) {\n            isInitialised = true;\n            smallest = number;\n            largest = number;\n            // after first input no need to make comparisons.\n            continue;\n        } \n\n        if (number &lt; smallest) \n        {\n            smallest = number;\n        }\n        else if (number &gt; largest)\n        {\n            largest = number;\n        }\n\n    }\n\n    cout &lt;&lt; \" The smallest number you entered was \" &lt;&lt; smallest &lt;&lt; endl;\n    cout &lt;&lt; \" The largest number you entered was \" &lt;&lt; largest &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "is_accepted": false, "score": 0, "last_activity_date": 1519252838, "last_edit_date": 1519252838, "creation_date": 1519252521, "answer_id": 48916692, "question_id": 48915467, "link": "https://stackoverflow.com/questions/48915467/using-a-number-to-quit-a-program-in-c-while-not-evaluating-the-actual-number/48916692#48916692", "title": "Using a number to quit a program in c++ while not evaluating the actual number", "body": "<p>It's surprisingly tricky to get right.</p>\n\n<p>SPOILER ALERT and WARNING...</p>\n\n<p>If you read this before finishing the assignment, you will not suffer the pain and humiliation that the instructor wants you to. And he/she will know it's not your work. (I just thought of a way to make it look even slicker, but this is slick enough for now.)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std; // Forgive me, for I have sinned.\nusing int_t = long int;\n\nint_t get_number(int_t &amp;number, int_t &amp;largest, int_t &amp;smallest) {\n    cout &lt;&lt; \" &gt;\";\n    while (!(cin &gt;&gt; number)) {\n        cout &lt;&lt; \"Try again.\" &lt;&lt; endl;\n        cout &lt;&lt; \"&gt; \";\n        cin.clear(); cin.ignore(10000, '\\n');\n    }\n    smallest = min(smallest, number);\n    largest = max(largest, number);\n    return number;\n} \nint main()\n{\n    cout &lt;&lt; \" Enter numbers to find the smallest and largest integer. \" &lt;&lt; endl;\n    cout &lt;&lt; \" Enter -99 to quit \" &lt;&lt; endl;\n\n    int_t largest = numeric_limits&lt;int_t&gt;().min();\n    int_t smallest = numeric_limits&lt;int_t&gt;().max();\n    int_t number = get_number(number, largest, smallest);\n\n    while(-99 != number) {\n        number = get_number(number, largest, smallest);\n    }\n\n    cout &lt;&lt; \" The smallest number you entered was \" &lt;&lt; smallest &lt;&lt; endl;\n    cout &lt;&lt; \" The largest number you entered was \" &lt;&lt; largest &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 353, "user_id": 4847214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03941dd267a2f227b0ccaa5a6ba791be?s=128&d=identicon&r=PG&f=1", "display_name": "Suhaib Ahmad", "link": "https://stackoverflow.com/users/4847214/suhaib-ahmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1519266227, "creation_date": 1519266227, "answer_id": 48918636, "question_id": 48915467, "link": "https://stackoverflow.com/questions/48915467/using-a-number-to-quit-a-program-in-c-while-not-evaluating-the-actual-number/48918636#48918636", "title": "Using a number to quit a program in c++ while not evaluating the actual number", "body": "<p>you're facing the problem because when the user inputs -99, you're storing that in <code>smallest</code> as well. Try the code below which only overwrites the number if it is smaller <strong>AND</strong> if it is not -99</p>\n\n<pre><code>    // Evaluate user input \n    if (number &lt; smallest &amp;&amp; number != -99)\n    {\n        smallest = number;\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9296463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-osc_qw6Wc30/AAAAAAAAAAI/AAAAAAAAAEQ/4zuc9GzZyM4/photo.jpg?sz=128", "display_name": "leedah", "link": "https://stackoverflow.com/users/9296463/leedah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1519284682, "answer_count": 4, "score": -1, "last_activity_date": 1519266227, "creation_date": 1519247175, "last_edit_date": 1519247338, "question_id": 48915467, "link": "https://stackoverflow.com/questions/48915467/using-a-number-to-quit-a-program-in-c-while-not-evaluating-the-actual-number", "closed_reason": "Not suitable for this site", "title": "Using a number to quit a program in c++ while not evaluating the actual number", "body": "<p>I am attempting to create a loop that allows a user to input an integer until they quit the program using the number -99. The program is suppose to then print the largest and smallest number to the screen, but it keeps saying that my smallest number is -99. </p>\n\n<p>Here is the code I have so far: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    //Initialize integers for use\n    long int number, largest, smallest;\n\n    // Set condition for user input \n    while (number != -99)\n    {\n        // Allow user to input numbers to test \n        cout &lt;&lt; \" Enter a number to find the smallest and largest integer. \" &lt;&lt; endl;\n        cout &lt;&lt; \" Enter -99 to quit \" &lt;&lt; endl;\n        cin &gt;&gt; number;\n\n\n        // Evaluate user input \n        if (number &lt; smallest)\n        {\n            smallest = number;\n\n        }\n\n        if (number &gt; largest)\n        {\n            largest = number;\n        }\n    }\n\n    cout &lt;&lt; \" The smallest number you entered was \" &lt;&lt; smallest &lt;&lt; endl;\n    cout &lt;&lt; \" The largest number you entered was \" &lt;&lt; largest &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "c", "tensorflow-lite", "nnapi"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519252457, "post_id": 48915426, "comment_id": 84839787, "body": "ANeuralNetworksMemory_createFromFd doesn&#39;t care what format your file is."}, {"owner": {"reputation": 2903, "user_id": 2999490, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b7f26ca67a6c76bc65e02045892c6a0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2999490/alex"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519261474, "post_id": 48915426, "comment_id": 84842480, "body": "So, how this function fill the tensors parameters?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519264801, "post_id": 48915426, "comment_id": 84843274, "body": "It doesn&#39;t. It creates a memory object from a file descriptor."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 1377619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71fa72a90d102f3a4bf6f73de7ac5e1e?s=128&d=identicon&r=PG", "display_name": "CaveMike", "link": "https://stackoverflow.com/users/1377619/cavemike"}, "is_accepted": false, "score": 1, "last_activity_date": 1523058977, "creation_date": 1523058977, "answer_id": 49702441, "question_id": 48915426, "link": "https://stackoverflow.com/questions/48915426/how-works-aneuralnetworksmemory-createfromfd/49702441#49702441", "title": "How works ANeuralNetworksMemory_createFromFd?", "body": "<p>The loading of the model file and the parsing of it are done separately. This makes it easier to mix-and-match between different memory models and different file formats. It also makes it possible to use these building blocks for other functions, like loading inputs from a file.</p>\n\n<p>ANeuralNetworksMemory_createFromFd() is just used to load the model file into memory.</p>\n\n<p>FlatBufferModel::BuildFromFile() gets an allocation (memory block) that represents the model. This is where ANeuralNetworksMemory_createFromFd() gets called. Then it news up a FlatBufferModel object. This calls tflite::GetModel() which is in the schema subdirectory. The schema subdirectory deserializes the flat-buffer-model from the .tflite model loaded into memory.</p>\n\n<p>When NNAPIDelegate::Invoke() is called, the schema Model object is used to build the model in the Android-NN layer using calls like ANeuralNetworksModel_addOperand().</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 6847400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a7e4be1b041dbf7ba07763167c920c?s=128&d=identicon&r=PG&f=1", "display_name": "ShreeVidhya", "link": "https://stackoverflow.com/users/6847400/shreevidhya"}, "is_accepted": true, "score": 1, "last_activity_date": 1578480983, "creation_date": 1578480983, "answer_id": 59644316, "question_id": 48915426, "link": "https://stackoverflow.com/questions/48915426/how-works-aneuralnetworksmemory-createfromfd/59644316#59644316", "title": "How works ANeuralNetworksMemory_createFromFd?", "body": "<p>ANeuralNetworksMemory_createFromFd(file_size, PROT_READ, <strong>fd</strong>, 0, &amp;<strong>mem1</strong>) - This API maps the model file in to ANeuralNetworksMemory. </p>\n\n<p>The mapped address is stored in <strong>mem1</strong> (pass by reference!) </p>\n\n<p>Further, trained values that are stored in <strong>mem1</strong> (ANeuralNetworksMemory object) is read by pointing to the appropriate offset value and copied in to the tensors of NeuralNetwork model. </p>\n\n<pre><code> ANeuralNetworksModel_setOperandValueFromMemory(model_, tensor0, mem1, offset, size);\n ANeuralNetworksModel_setOperandValueFromMemory(model_, tensor1, mem1, offset+size, size);\n</code></pre>\n\n<ul>\n<li>tensor0 -  pointing at <strong>offset</strong></li>\n<li>tensor1 -  pointing at <strong>offset+size</strong></li>\n</ul>\n"}], "owner": {"reputation": 2903, "user_id": 2999490, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b7f26ca67a6c76bc65e02045892c6a0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2999490/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 59644316, "answer_count": 2, "score": 0, "last_activity_date": 1578480983, "creation_date": 1519246982, "last_edit_date": 1519307306, "question_id": 48915426, "link": "https://stackoverflow.com/questions/48915426/how-works-aneuralnetworksmemory-createfromfd", "title": "How works ANeuralNetworksMemory_createFromFd?", "body": "<p>In Android Neural Network API docs says: Creates a shared memory object from a file descriptor.</p>\n\n<p>But I can't find any place that specifies how is the format of this file, on TFL source code:</p>\n\n<p>allocation.cc:</p>\n\n<pre><code>MMAPAllocation::MMAPAllocation(const char* filename,\n                               ErrorReporter* error_reporter)\n    : Allocation(error_reporter), mmapped_buffer_(MAP_FAILED) {\n  mmap_fd_ = open(filename, O_RDONLY);\n  if (mmap_fd_ == -1) {\n    error_reporter_-&gt;Report(\"Could not open '%s'.\", filename);\n    return;\n  }\n  struct stat sb;\n  fstat(mmap_fd_, &amp;sb);\n  buffer_size_bytes_ = sb.st_size;\n  mmapped_buffer_ =\n      mmap(nullptr, buffer_size_bytes_, PROT_READ, MAP_SHARED, mmap_fd_, 0);\n  if (mmapped_buffer_ == MAP_FAILED) {\n    error_reporter_-&gt;Report(\"Mmap of '%s' failed.\", filename);\n    return;\n  }\n}\n</code></pre>\n\n<p>nnapi_delegate.cc</p>\n\n<pre><code>NNAPIAllocation::NNAPIAllocation(const char* filename,\n                                 ErrorReporter* error_reporter)\n    : MMAPAllocation(filename, error_reporter) {\n  if (mmapped_buffer_ != MAP_FAILED)\n    CHECK_NN(ANeuralNetworksMemory_createFromFd(buffer_size_bytes_, PROT_READ,\n                                                mmap_fd_, 0, &amp;handle_));\n}\n</code></pre>\n\n<p>It means, TFL opens the file, and give this file to NNAPI. What I need is what is the format of this file that store the tensors, is it a flatbuffers file like TFL format?</p>\n\n<p>Edit:\nThis is a sample from NNAPI doc:</p>\n\n<pre><code>ANeuralNetworksMemory* mem1 = NULL;\nint fd = open(\"training_data\", O_RDONLY);\nANeuralNetworksMemory_createFromFd(file_size, PROT_READ, fd, 0, &amp;mem1);\n</code></pre>\n\n<p>This file <code>training_data</code>, how must its content be structured to NNAPI understand?</p>\n"}, {"tags": ["c++", "tbb"], "answers": [{"tags": [], "owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "is_accepted": false, "score": 3, "last_activity_date": 1519519068, "last_edit_date": 1519519068, "creation_date": 1519260486, "answer_id": 48917893, "question_id": 48915345, "link": "https://stackoverflow.com/questions/48915345/using-tbb-for-an-simple-example/48917893#48917893", "title": "Using TBB for an simple example", "body": "<p>First, the <code>busyfunc()</code> seems not so busy because 9M elements are computed in just half a second, which makes this example rather memory bound (uncached memory operations take orders of magnitude more cycles than arithmetic operations). Memory bound computations scale not as good as compute-bound, e.g. plain memory copying usually scales up to no more than, say, 4 times even running on much bigger number of cores/processors.</p>\n\n<p>Also, memory bound programs are more sensitive to NUMA effects and since you allocated this array as contiguous memory using standard C++, it will be allocated by default entirely on the same memory node where the initialization occurs. This default can be altered by running with <code>numactl -i all --</code>.</p>\n\n<p>And the last, but the most important thing is that TBB initializes threads lazily and pretty slowly. I guess you do not intend writing an application which exits after 0.5 seconds spent on parallel computation. Thus, a fair benchmark should take into account all the warm-up effects, which are expected in the real application. At the very least, it has to wait until all the threads are up and running before starting measurements. <a href=\"https://stackoverflow.com/a/24823749/2527797\">This answer</a> suggests one way to do that.</p>\n\n<p>[update] Please also refer to Alexey's answer for another possible reason lurking in compiler optimization differences.</p>\n"}, {"tags": [], "owner": {"reputation": 11603, "user_id": 654891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156c04def2a7958f8254305ecffc9822?s=128&d=identicon&r=PG", "display_name": "Alexey Kukanov", "link": "https://stackoverflow.com/users/654891/alexey-kukanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1519337507, "creation_date": 1519337507, "answer_id": 48938078, "question_id": 48915345, "link": "https://stackoverflow.com/questions/48915345/using-tbb-for-an-simple-example/48938078#48938078", "title": "Using TBB for an simple example", "body": "<p>In addition to Anton's asnwer, I recommend to check if the compiler was able to optimize the code equivalently.</p>\n\n<p>For start, check performance of the TBB version executed by a single thread, without real parallelism. You can use <code>tbb::global_control</code> or <code>tbb::task_scheduler_init</code> to limit the number of threads to 1, e.g.</p>\n\n<pre><code>tbb::global_control ctl(tbb::global_control::max_allowed_parallelism, 1);\n</code></pre>\n\n<p>The overheads of thread creation, as well as cache locality or NUMA effects, should not play a role when all the code is executed by one thread. Therefore you should see approximately the same performance as for the no-TBB version. If you do, then you have a scalability issue, and Anton explained possible reasons. </p>\n\n<p>However if you see that performance drops a lot, then it is a serial optimization issue. One of known reasons is that some compilers cannot optimize the loop over a <code>blocked_range</code> as good as they optimize the original loop; and it was also observed that storing <code>r.end()</code> into a local variable may help:</p>\n\n<pre><code>    int rend = r.end();\n    for (int i = r.begin(); i &lt; rend; i++) {\n        data[i] = busyfunc(data[i])*123;\n    }\n</code></pre>\n"}], "owner": {"reputation": 158, "user_id": 8226050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/66da411fe004c8fc634a1a336c491bca?s=128&d=identicon&r=PG&f=1", "display_name": "X21", "link": "https://stackoverflow.com/users/8226050/x21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519519068, "creation_date": 1519246731, "question_id": 48915345, "link": "https://stackoverflow.com/questions/48915345/using-tbb-for-an-simple-example", "title": "Using TBB for an simple example", "body": "<p>I am new to <code>TBB</code> and try to do a simple exprement.</p>\n\n<p>My data for functions are:</p>\n\n<pre><code>int n = 9000000;\nint *data = new int[n];\n</code></pre>\n\n<p>I created a function, the first one without using <code>TBB</code>:</p>\n\n<pre><code>void _array(int* &amp;data, int n) {\n        for (int i = 0; i &lt; n; i++) {\n            data[i] = busyfunc(data[i])*123;\n        }\n}\n</code></pre>\n\n<p><code>It takes 0.456635 seconds.</code></p>\n\n<p>And also created a to function, the first one with using <code>TBB</code>:</p>\n\n<pre><code>void parallel_change_array(int* &amp;data,int list_count) {\n    //Instructional example - parallel version\n    parallel_for(blocked_range&lt;int&gt;(0, list_count),\n        [=](const blocked_range&lt;int&gt;&amp; r) {\n        for (int i = r.begin(); i &lt; r.end(); i++) {\n            data[i] = busyfunc(data[i])*123;\n        }\n    });\n}\n</code></pre>\n\n<p>It takes me <code>0.584889 seconds.</code></p>\n\n<p>As for busyfunc(int m):</p>\n\n<pre><code>int busyfunc(int m)\n{\n    m *= 32;\n    return m;\n}\n</code></pre>\n\n<p>Can you tell me, why the function without using <code>TBB</code> spends less time, than if it is with <code>TBB</code>? </p>\n\n<p>I think, the problem is that the functions are simple, and it's easy to calculate without using <code>TBB</code>.</p>\n"}, {"tags": ["c++", "winapi", "win32com", "com+"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1519246620, "post_id": 48915250, "comment_id": 84837023, "body": "Why do you assume that you are the only one holding references and that the refcount should go to zero when you release all yours?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519247073, "post_id": 48915250, "comment_id": 84837255, "body": "@JesperJuhl The OP is the one who created it, and the OP didn&#39;t pass it to any method which might want to add another reference."}, {"owner": {"reputation": 49, "user_id": 4765838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSqi0.jpg?s=128&g=1", "display_name": "yo_gdg", "link": "https://stackoverflow.com/users/4765838/yo-gdg"}, "edited": false, "score": 0, "creation_date": 1519256741, "post_id": 48915250, "comment_id": 84841219, "body": "Actually, I was playing with a COM+ smart pointer [link]<a href=\"https://msdn.microsoft.com/en-us/magazine/dn904668.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/magazine/dn904668.aspx</a>"}, {"owner": {"reputation": 49, "user_id": 4765838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSqi0.jpg?s=128&g=1", "display_name": "yo_gdg", "link": "https://stackoverflow.com/users/4765838/yo-gdg"}, "edited": false, "score": 0, "creation_date": 1519257348, "post_id": 48915250, "comment_id": 84841408, "body": "Actually, I was playing with a COM+ smart pointer ( <a href=\"https://msdn.microsoft.com/en-us/magazine/dn904668.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/magazine/dn904668.aspx</a> ) But I found out that after calling <code>QueryInterface</code> asking for an <code>IUnknown</code> its <code>Release</code> method (called during the smart pointer destructor) wasn&#39;t resulting in 0 as I was expecting, so I translated all the smart pointer stuff to raw pointer, just to find out the same problem, however, it wasn&#39;t a problem, just the way COM+ handles <code>IUnknown::Release</code> return value."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1519261265, "post_id": 48915250, "comment_id": 84842425, "body": "what you view - is com <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686558(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Aggregation</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1519296130, "post_id": 48915250, "comment_id": 84856795, "body": "I don&#39;t get the question. You create an object, add and release references to it, and when done, the reference count goes to zero. The question title appears to claim the opposite from what can be observed by looking at the debug output."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519250285, "post_id": 48915610, "comment_id": 84838789, "body": "@hvd: Yes, querying an object for <code>IUnknown</code> must return the same <code>IUnknown</code> pointer every time, and that is <i>usually</i> the <code>IUnknown</code> of the same object that is being queried, not an <code>IUnknown</code> of some internal helper that the object owns. Though that would be technically legal, it is not common. Most implementations just return the object&#39;s <code>this</code> pointer casted to <code>IUnknown*</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1519263110, "post_id": 48915610, "comment_id": 84842890, "body": "<code>DOMDocument</code> object is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686558(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><i>aggregable</i></a> object, and it delegate call <code>QueryInterface</code> to it inner object via <code>m_pUnkOuter</code> if be exactly. from another side the <code>DOMDocument</code> object is not created once, when inner object created. instead created (allocated) every time new, when we query for <code>IXMLDOMDocument</code> inner object. this is called teardown in com if i not mistake"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1519250175, "last_edit_date": 1519250175, "creation_date": 1519247727, "answer_id": 48915610, "question_id": 48915250, "link": "https://stackoverflow.com/questions/48915250/com-release-method-not-dropping-to-0/48915610#48915610", "title": "COM+ Release Method Not Dropping to 0", "body": "<p>When an object is queried for its <code>IUnknown</code> interface specifically, COM expects the same object to be returned every time, to ensure identity tests work (you can test if two interfaces point to the same object in memory by querying both interfaces for <code>IUnknown</code> and then compare the queried pointers).  This is pointed out in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682521.aspx\" rel=\"nofollow noreferrer\"><code>QueryInterface()</code> documentation</a>:</p>\n\n<blockquote>\n  <p><strong>For any one object, a specific query for the <code>IUnknown</code> interface on any of the object's interfaces must always return the same pointer value. This enables a client to determine whether two pointers point to the same component by calling <code>QueryInterface</code> with <code>IID_IUnknown</code> and comparing the results</strong>. It is specifically not the case that queries for interfaces other than <code>IUnknown</code> (even the same interface through the same pointer) must return the same pointer value.</p>\n</blockquote>\n\n<p>So, when requesting the DOMDocument object's <code>IUnknown</code> interface via <code>QueryInterface()</code>, one would expect the reference count to be incremented by 1, not by 2.  In which case, you <em>should</em> have gotten the following numbers in your output:</p>\n\n<pre><code>int main ()\n{\n    IXMLDOMDocument *pDoc(nullptr);\n    CoCreateInstance(CLSID_DOMDocument, nullptr, CLSCTX_ALL, IID_IXMLDOMDocument, reinterpret_cast&lt;LPVOID*&gt;(&amp;pDoc));\n    // DOMDoc refcnt=1\n\n    DWORD d = pDoc-&gt;AddRef();\n    // DOMDoc refcnt=2\n    std::cout &lt;&lt; \"pDoc: add ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    d = pDoc-&gt;Release();\n    // DOMDoc refcnt=1\n    std::cout &lt;&lt; \"pDoc: rel ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    IUnknown *pUnk(nullptr);\n    pDoc-&gt;QueryInterface(IID_IUnknown, reinterpret_cast&lt;LPVOID*&gt;(&amp;pUnk));\n    // DOMDoc refcnt=2\n\n    d = pUnk-&gt;AddRef();\n    // DOMDoc refcnt=3\n    std::cout &lt;&lt; \"pUnk: add ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    d = pUnk-&gt;Release();\n    // DOMDoc refcnt=2\n    std::cout &lt;&lt; \"pUnk: rel ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    /*Release objects*/\n    d = pUnk-&gt;Release();\n    // DOMDoc refcnt=1\n    std::cout &lt;&lt; \"pUnk: rel ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    d = pDoc-&gt;Release();\n    // DOMDoc refcnt=0\n    std::cout &lt;&lt; \"pDoc: rel ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>However, in reality, when you query the DOMDocument object for its <code>IUnknown</code> interface, there is clearly an extra internal reference being made to the object, and that extra reference is not released until all references to the queried <code>IUnknown</code> interface have been released.  That would account for the numbers you are seeing:</p>\n\n<pre><code>int main ()\n{\n    IXMLDOMDocument *pDoc(nullptr);\n    CoCreateInstance(CLSID_DOMDocument, nullptr, CLSCTX_ALL, IID_IXMLDOMDocument, reinterpret_cast&lt;LPVOID*&gt;(&amp;pDoc));\n    // DOMDoc refcnt=1\n\n    DWORD d = pDoc-&gt;AddRef();\n    // DOMDoc refcnt=2\n    std::cout &lt;&lt; \"pDoc: add ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    d = pDoc-&gt;Release();\n    // DOMDoc refcnt=1\n    std::cout &lt;&lt; \"pDoc: rel ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    IUnknown *pUnk(nullptr);\n    pDoc-&gt;QueryInterface(IID_IUnknown, reinterpret_cast&lt;LPVOID*&gt;(&amp;pUnk));\n    // DOMDoc refcnt=3, not 2!\n\n    d = pUnk-&gt;AddRef();\n    // DOMDoc refcnt=4\n    std::cout &lt;&lt; \"pUnk: add ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    d = pUnk-&gt;Release();\n    // DOMDoc refcnt=3\n    std::cout &lt;&lt; \"pUnk: rel ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    /*Release objects*/\n    d = pUnk-&gt;Release();\n    // DOMDoc refcnt=1, not 2!\n    std::cout &lt;&lt; \"pUnk: rel ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    d = pDoc-&gt;Release();\n    // DOMDoc refcnt=0\n    std::cout &lt;&lt; \"pDoc: rel ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The DOMDocument object is likely returning a pointer to an internal helper object when queried for <code>IUnknown</code>, and that helper object is returning the owning DOMDocument's reference count from <code>AddRef()</code> and <code>Release()</code> instead of returning its own reference count.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1519248007, "post_id": 48915613, "comment_id": 84837715, "body": "You are probably right about the helper, but I think using a helper for <code>IUnknown</code> might break the following COM rule: &quot;<i>For any one object, a specific query for the IUnknown interface on any of the object&#39;s interfaces must always return the same pointer value. This enables a client to determine whether two pointers point to the same component by calling QueryInterface with IID_IUnknown and comparing the results. It is specifically not the case that queries for interfaces other than IUnknown (even the same interface through the same pointer) must return the same pointer value.</i>&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519248278, "post_id": 48915613, "comment_id": 84837840, "body": "@RemyLebeau No, it doesn&#39;t. That is exactly what I commented on your answer I already thought the rule would have to be: <code>QueryInterface</code> for <code>IUnknown</code> doesn&#39;t have to return the same pointer value as the one you&#39;re calling <code>QueryInterface</code> on, it has to return the same pointer value as what it returned for a prior request for the <code>IUnknown</code> interface."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519248611, "post_id": 48915613, "comment_id": 84838018, "body": "&quot;<i><code>QueryInterface</code> for <code>IUnknown</code> doesn&#39;t have to return the same pointer value as the one you&#39;re calling <code>QueryInterface</code> on</i>&quot; - that is not what I said. It should be returning a pointer to the same <b>object</b> that <code>QueryInterface()</code> is called on, which is not necessary the same <b>pointer</b> that <code>QueryInterface()</code> is called on."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1519248823, "post_id": 48915613, "comment_id": 84838125, "body": "@RemyLebeau The <code>IUnknown</code> interface is requested once, so trivially all of those 1 requests for the <code>IUnknown</code> interface give the same pointer value / a pointer to the same object, which is the same thing here. I don&#39;t see why this has to be so difficult. If a function has to return the same value each time it&#39;s called, and it&#39;s called only once, then there&#39;s no other result it has to compare equal to."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 4, "last_activity_date": 1519247734, "creation_date": 1519247734, "answer_id": 48915613, "question_id": 48915250, "link": "https://stackoverflow.com/questions/48915250/com-release-method-not-dropping-to-0/48915613#48915613", "title": "COM+ Release Method Not Dropping to 0", "body": "<blockquote>\n  <p>Why <code>QueryInterface</code> returned me an <code>IUnknown</code> which internal count begins in 3?</p>\n</blockquote>\n\n<p><code>pDoc</code> and <code>pUnk</code> are essentially two ways of accessing a single object. Since it's a single object, this is reflected in the reference count and explains why it doesn't start at 1.</p>\n\n<p>But from that explanation, you might expect the reference count to start at 2 rather than 3. The fact it starts at 3 is likely caused by an internal helper object used by <code>DOMDocument</code> to handle the <code>IUnknown</code> interface, where that internal helper object maintains an additional reference.</p>\n\n<blockquote>\n  <p>Why last <code>Release</code> method of the <code>IUnknown</code> object isn't returning 0 as excepted?</p>\n</blockquote>\n\n<p>For the same reason: <code>pDoc</code> and <code>pUnk</code> are essentially the same object. Since you still have an unreleased reference (accessible through <code>pDoc</code>) at that point, the object is still live.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519250036, "post_id": 48916075, "comment_id": 84838689, "body": "True. On the other hand, the <code>AddRef()</code> and <code>Release()</code> documentations both specifically state: &quot;<i>The method returns the new reference count.</i>&quot;, which contradicts what Raymond says. Obviously, Raymond is never wrong, so the documentation must be :-)"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519258898, "post_id": 48916075, "comment_id": 84841820, "body": "@RemyLebeau the <i>intent</i> of the return value is documented, but the return value is ignored by all practical code. Any deviation from the documentation typically won&#39;t be discovered. Raymond and the documentation are <i>both</i> right, even though they disagree."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1519320711, "post_id": 48916075, "comment_id": 84874237, "body": "The documentation is wrong if we include Windows 95 because the 386 cannot atomically perform this operation. 98 added a workaround, see <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040506-00/?p=39463\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20040506-00/?p=39463</a>"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1519250105, "last_edit_date": 1519250105, "creation_date": 1519249775, "answer_id": 48916075, "question_id": 48915250, "link": "https://stackoverflow.com/questions/48915250/com-release-method-not-dropping-to-0/48916075#48916075", "title": "COM+ Release Method Not Dropping to 0", "body": "<p>According to the MDSN documention of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms691379.aspx\" rel=\"nofollow noreferrer\"><code>AddRef</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682317.aspx\" rel=\"nofollow noreferrer\"><code>Release</code></a>, the return value is intended to only be used for test purposes.  It may not be an accurate reflection of the actual number of references; and in particular testing it against <code>0</code> is not a guarantee that the object is finished.</p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20150312-00/?p=44483\" rel=\"nofollow noreferrer\">Under what conditions will the IUnknown::AddRef method return 0?</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 1, "last_activity_date": 1519262464, "creation_date": 1519262464, "answer_id": 48918138, "question_id": 48915250, "link": "https://stackoverflow.com/questions/48915250/com-release-method-not-dropping-to-0/48918138#48918138", "title": "COM+ Release Method Not Dropping to 0", "body": "<p>what you view - is Com <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686558(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><em>Aggregation</em></a> and here <code>pUnk</code> is <em>inner</em> object and <code>pDoc</code> is <em>aggregable</em> object. also interesting that when you query <code>IXMLDOMDocument</code> interface on <em>inner</em> object - he every time allocate <em>new</em> <em>aggregable</em> object, which implement this interface</p>\n\n<hr>\n\n<p>let at begin create utility function for print reference count on object and also compare 2 object pointers from com view (binary values of this pointers can be different, but <code>IUnknown</code> for both objects the same) </p>\n\n<pre><code>ULONG GetRefCount(IUnknown *pUnk, BOOLEAN bPrint = TRUE)\n{\n    pUnk-&gt;AddRef();\n    ULONG d = pUnk-&gt;Release();\n    if (bPrint) DbgPrint(\"%p&gt;%u\\n\", pUnk, d);\n    return d;\n}\n\nBOOLEAN IsSameObjects(IUnknown *p, IUnknown *q)\n{\n    BOOLEAN f = FALSE;\n\n    IUnknown *Unk1, *Unk2;\n    if (0 &lt;= p-&gt;QueryInterface(IID_PPV_ARGS(&amp;Unk1)))\n    {\n        if (0 &lt;= q-&gt;QueryInterface(IID_PPV_ARGS(&amp;Unk2)))\n        {\n            f = Unk1 == Unk2;\n            Unk2-&gt;Release();\n        }\n        Unk1-&gt;Release();\n    }\n\n    DbgPrint(\"%p[%u] %s %p[%u]\\n\", p, GetRefCount(p, FALSE), f ? \"==\" : \"!=\", q, GetRefCount(q, FALSE));\n    return f;\n}\n</code></pre>\n\n<p>now let do first test:</p>\n\n<pre><code>void test1 ()\n{\n    IXMLDOMDocument *pDoc, *pDoc2;\n    if (0 &lt;= CoCreateInstance(__uuidof(DOMDocument), 0, CLSCTX_ALL, IID_PPV_ARGS(&amp;pDoc)))\n    {\n        GetRefCount(pDoc);\n\n        IUnknown *pUnk;\n\n        if (0 &lt;= pDoc-&gt;QueryInterface(IID_PPV_ARGS(&amp;pUnk)))\n        {\n            IsSameObjects(pDoc, pUnk);\n\n            if (0 &lt;= pUnk-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc2)))\n            {\n                IsSameObjects(pDoc, pDoc2);\n                GetRefCount(pUnk);\n                pDoc2-&gt;Release();\n                GetRefCount(pUnk);\n            }\n\n            pUnk-&gt;Release();\n        }\n\n        GetRefCount(pDoc);\n\n        DbgPrint(\"Final Release=%u\\n\", pDoc-&gt;Release());\n    }\n}\n</code></pre>\n\n<p>and it output:</p>\n\n<pre><code>000001DD8DCE71A0&gt;1\n000001DD8DCE71A0[1] == 000001DD8DCE5950[3]\n000001DD8DCE71A0[1] == 000001DD8DCE7270[1]\n000001DD8DCE5950&gt;4\n000001DD8DCE5950&gt;3\n000001DD8DCE71A0&gt;1\nFinal Release=0\n</code></pre>\n\n<p>here visible that <code>pUnk</code> and <code>pDoc</code> (<code>pDoc2</code>) point to different memory locations, but this is the same com object</p>\n\n<hr>\n\n<p>based on this let do more symmetric test:</p>\n\n<pre><code>void test2 ()\n{\n    IUnknown *pUnk;\n    if (0 &lt;= CoCreateInstance(__uuidof(DOMDocument), 0, CLSCTX_ALL, IID_PPV_ARGS(&amp;pUnk)))\n    {\n        GetRefCount(pUnk);\n        IXMLDOMDocument *pDoc, *pDoc2;\n\n        if (0 &lt;= pUnk-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc)))\n        {\n            IsSameObjects(pUnk, pDoc);\n\n            if (0 &lt;= pUnk-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc2)))\n            {\n                IsSameObjects(pDoc2, pDoc);\n                GetRefCount(pUnk);\n\n                pDoc2-&gt;Release();\n            }\n\n            if (0 &lt;= pDoc-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc2)))\n            {\n                IsSameObjects(pDoc2, pDoc);\n                GetRefCount(pUnk);\n                pDoc2-&gt;Release();\n            }\n\n            pDoc-&gt;Release();\n        }\n\n        GetRefCount(pUnk);\n\n        DbgPrint(\"Final Release=%u\\n\", pUnk-&gt;Release());\n    }\n}\n</code></pre>\n\n<p>and output:</p>\n\n<pre><code>000001DD8DCE5950&gt;1\n000001DD8DCE5950[3] == 000001DD8DCE7270[1]\n000001DD8DCE71A0[1] == 000001DD8DCE7270[1]\n000001DD8DCE5950&gt;4\n000001DD8DCE7270[2] == 000001DD8DCE7270[2]\n000001DD8DCE5950&gt;3\n000001DD8DCE5950&gt;1\nFinal Release=0\n</code></pre>\n\n<p>here better visible that first created inner object. every time when we query <code>IXMLDOMDocument</code> on this object - new aggregable object created, and pointer to it returned.</p>\n\n<hr>\n\n<p>how this is implemented in code ? simply demo</p>\n\n<pre><code>struct __declspec(novtable) __declspec(uuid(\"78979DF1-A166-4797-AF2B-21BBE60D0B2E\")) IDemo : public IUnknown\n{\n    virtual void Demo() = 0;\n};\n\nclass CDemo : public IDemo\n{\n    IUnknown* _pUnkOuter;\n    LONG _dwRef;\n\n    ~CDemo()\n    {\n        DbgPrint(\"%s&lt;%p&gt;\\n\", __FUNCTION__, this);\n        _pUnkOuter-&gt;Release();\n    }\n\npublic:\n\n    CDemo(IUnknown* pUnkOuter) : _pUnkOuter(pUnkOuter)\n    {\n        DbgPrint(\"%s&lt;%p&gt;\\n\", __FUNCTION__, this);\n        _dwRef = 1;\n        pUnkOuter-&gt;AddRef();\n    }\n\n    virtual void Demo()\n    {\n        DbgPrint(\"%s&lt;%p&gt;\\n\", __FUNCTION__, this);\n    }\n\n    virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID riid, void**ppvObject)\n    {\n        if (riid == __uuidof(IDemo))\n        {\n            AddRef();\n            *ppvObject = static_cast&lt;IUnknown*&gt;(this);\n            return S_OK;\n        }\n\n        return _pUnkOuter-&gt;QueryInterface(riid, ppvObject);\n    }\n\n    virtual ULONG STDMETHODCALLTYPE AddRef()\n    {\n        return InterlockedIncrement(&amp;_dwRef);\n    }\n\n    virtual ULONG STDMETHODCALLTYPE Release()\n    {\n        ULONG dwRef = InterlockedDecrement(&amp;_dwRef);\n        if (!dwRef) delete this;\n        return dwRef;\n    }\n};\n\nclass CObject : public IUnknown\n{\n    LONG _dwRef;\n\n    ~CObject()\n    {\n        DbgPrint(\"%s&lt;%p&gt;\\n\", __FUNCTION__, this);\n    }\npublic:\n\n    CObject()\n    {\n        DbgPrint(\"%s&lt;%p&gt;\\n\", __FUNCTION__, this);\n        _dwRef = 1;\n    }\n\n    virtual HRESULT STDMETHODCALLTYPE QueryInterface(REFIID riid, void**ppvObject)\n    {\n        *ppvObject = 0;\n\n        if (riid == __uuidof(IUnknown))\n        {\n            AddRef();\n            *ppvObject = static_cast&lt;IUnknown*&gt;(this);\n            return S_OK;\n        }\n        else if (riid == __uuidof(IDemo))\n        {\n            if (CDemo* pDoc = new CDemo(this))\n            {\n                *ppvObject = static_cast&lt;IUnknown*&gt;(pDoc);\n                return S_OK;\n            }\n\n            return E_OUTOFMEMORY;\n        }\n\n        return E_NOINTERFACE;\n    }\n\n    virtual ULONG STDMETHODCALLTYPE AddRef()\n    {\n        return InterlockedIncrement(&amp;_dwRef);\n    }\n\n    virtual ULONG STDMETHODCALLTYPE Release()\n    {\n        ULONG dwRef = InterlockedDecrement(&amp;_dwRef);\n        if (!dwRef) delete this;\n        return dwRef;\n    }\n};\n\nvoid test3()\n{\n    if (CObject* pUnk = new CObject)\n    {\n        GetRefCount(pUnk);\n        IDemo *pDoc, *pDoc2;\n\n        if (0 &lt;= pUnk-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc)))\n        {\n            IsSameObjects(pUnk, pDoc);\n\n            if (0 &lt;= pUnk-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc2)))\n            {\n                IsSameObjects(pDoc2, pDoc);\n                GetRefCount(pUnk);\n\n                pDoc2-&gt;Release();\n            }\n\n            if (0 &lt;= pDoc-&gt;QueryInterface(IID_PPV_ARGS(&amp;pDoc2)))\n            {\n                IsSameObjects(pDoc2, pDoc);\n                GetRefCount(pUnk);\n                pDoc2-&gt;Release();\n            }\n\n            pDoc-&gt;Release();\n        }\n\n        GetRefCount(pUnk);\n\n        DbgPrint(\"Final Release=%u\\n\", pUnk-&gt;Release());\n    }\n}\n</code></pre>\n\n<p>and output:</p>\n\n<pre><code>CObject::CObject&lt;000001DD8C340970&gt;\n000001DD8C340970&gt;1\nCDemo::CDemo&lt;000001DD8C33B950&gt;\n000001DD8C340970[2] == 000001DD8C33B950[1]\nCDemo::CDemo&lt;000001DD8C338930&gt;\n000001DD8C338930[1] == 000001DD8C33B950[1]\n000001DD8C340970&gt;3\nCDemo::~CDemo&lt;000001DD8C338930&gt;\n000001DD8C33B950[2] == 000001DD8C33B950[2]\n000001DD8C340970&gt;2\nCDemo::~CDemo&lt;000001DD8C33B950&gt;\n000001DD8C340970&gt;1\nCObject::~CObject&lt;000001DD8C340970&gt;\nFinal Release=0\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4765838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSqi0.jpg?s=128&g=1", "display_name": "yo_gdg", "link": "https://stackoverflow.com/users/4765838/yo-gdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 48916075, "answer_count": 4, "score": 0, "last_activity_date": 1519262464, "creation_date": 1519246399, "question_id": 48915250, "link": "https://stackoverflow.com/questions/48915250/com-release-method-not-dropping-to-0", "title": "COM+ Release Method Not Dropping to 0", "body": "<p>I wish to share with you this problem I'm facing. Long story short, I have this little code (test purpose only):</p>\n\n<pre><code>    int main ()\n    {\n        IXMLDOMDocument *pDoc(nullptr);\n        CoCreateInstance(CLSID_DOMDocument, nullptr, CLSCTX_ALL, IID_IXMLDOMDocument, reinterpret_cast&lt;LPVOID*&gt;(&amp;pDoc));\n        DWORD d = pDoc-&gt;AddRef();\n        std::cout &lt;&lt; \"pDoc: add ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n        d = pDoc-&gt;Release();\n        std::cout &lt;&lt; \"pDoc: rel ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n        IUnknown *pUnk(nullptr);\n        pDoc-&gt;QueryInterface(IID_IUnknown, reinterpret_cast&lt;LPVOID*&gt;(&amp;pUnk));\n        d = pUnk-&gt;AddRef();\n        std::cout &lt;&lt; \"pUnk: add ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n        d = pUnk-&gt;Release();\n        std::cout &lt;&lt; \"pUnk: rel ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n        /*Release objects*/\n        d = pUnk-&gt;Release();\n        std::cout &lt;&lt; \"pUnk: rel ptr=\" &lt;&lt; pUnk &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n        d = pDoc-&gt;Release();\n        std::cout &lt;&lt; \"pDoc: rel ptr=\" &lt;&lt; pDoc &lt;&lt; \" d=\" &lt;&lt; d &lt;&lt; std::endl;\n\n        return 0;\n    }\n</code></pre>\n\n<p>I'm expecting that the last 2 <code>cout</code> print 0 as the returned count, in their place I'm seeing:</p>\n\n<pre><code>pDoc: add ptr=004A4628 d=2\npDoc: rel ptr=004A4628 d=1\npUnk: add ptr=004A3A10 d=4\npUnk: rel ptr=004A3A10 d=3\npUnk: rel ptr=004A3A10 d=2\npDoc: rel ptr=004A4628 d=0\n</code></pre>\n\n<p>Why <code>QueryInterface</code> returned me an <code>IUnknown</code> which internal count begins in 3?\nWhy last <code>Release</code> method of the <code>IUnknown</code> object isn't returning <code>0</code> as excepted?</p>\n\n<p>What I'm might be missing?</p>\n"}, {"tags": ["c++", "winapi", "visual-studio-2015", "cmake", "clion"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1519246803, "post_id": 48915216, "comment_id": 84837116, "body": "Lose the WIN32 entry in the cmake file. Also, why use CLion with VS? Why not just use VS?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519246812, "post_id": 48915216, "comment_id": 84837123, "body": "You have to define <code>WinMain</code> instead of <code>main</code> is convenient for <code>console</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519246868, "post_id": 48915216, "comment_id": 84837151, "body": "&quot;Here is the compile error I am getting&quot; - no. That&#39;s not a compiler error you are getting, &quot;error LNK2019: ...&quot; Is a <i>linker</i> error. Different thing - the compiler has no problem with your code here, but the linker does."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519246913, "post_id": 48915216, "comment_id": 84837180, "body": "@Raindrop - no, you do not need to define WinMai for a console application."}, {"owner": {"reputation": 477, "user_id": 1038128, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a77392ff44a1f398824e3bb18b6f33cc?s=128&d=identicon&r=PG", "display_name": "Guillaume Lavoie", "link": "https://stackoverflow.com/users/1038128/guillaume-lavoie"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519249494, "post_id": 48915216, "comment_id": 84838443, "body": "@JesperJuhl Good point. I edited it."}, {"owner": {"reputation": 477, "user_id": 1038128, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a77392ff44a1f398824e3bb18b6f33cc?s=128&d=identicon&r=PG", "display_name": "Guillaume Lavoie", "link": "https://stackoverflow.com/users/1038128/guillaume-lavoie"}, "edited": false, "score": 1, "creation_date": 1519249786, "post_id": 48915216, "comment_id": 84838587, "body": "@NeilButterworth I develop in Java, PHP and C++. Jetbrains provides a IDE feature consistency in IDE for these three languages. Plus, I am not a big fan of Visual Studio as an IDE."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1519249849, "post_id": 48915216, "comment_id": 84838612, "body": "OK, then why don&#39;t you use GCC  with CLion instead of MSVC++?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519251080, "post_id": 48915216, "comment_id": 84839153, "body": "@NeilButterworth: But the OP said <code>Win32</code> application not just a Console one?."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519251202, "post_id": 48915216, "comment_id": 84839213, "body": "@Raindrop The code he posted appears to be that of a console application."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519252445, "post_id": 48915216, "comment_id": 84839782, "body": "@NeilButterworth: Ok thank you."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1519308292, "post_id": 48915216, "comment_id": 84865234, "body": "The linker&#39;s /SUBSYSTEM option matters.  If you don&#39;t target the Console sub-system then the expected entrypoint name is WinMain instead of main."}], "answers": [{"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 3, "last_activity_date": 1519297350, "creation_date": 1519297350, "answer_id": 48925785, "question_id": 48915216, "link": "https://stackoverflow.com/questions/48915216/link-error-when-compiling-win32-application-with-clion-cmake-msvc-2015/48925785#48925785", "title": "Link error when compiling WIN32 application with CLion/CMake/MSVC 2015", "body": "<p>The error is to be expected. It just follows documented behavior for the line</p>\n\n<pre><code>add_executable(${PROJECT_NAME} WIN32 main.cpp)\n</code></pre>\n\n<p>From <a href=\"https://cmake.org/cmake/help/latest/command/add_executable.html\" rel=\"nofollow noreferrer\">add_executable</a>:</p>\n\n<blockquote>\n  <p>If <code>WIN32</code> is given the property <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/WIN32_EXECUTABLE.html#prop_tgt:WIN32_EXECUTABLE\" rel=\"nofollow noreferrer\">WIN32_EXECUTABLE</a> will be set on the target created. See documentation of that target property for details.</p>\n</blockquote>\n\n<p>The documentation for <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/WIN32_EXECUTABLE.html#prop_tgt:WIN32_EXECUTABLE\" rel=\"nofollow noreferrer\">WIN32_EXECUTABLE</a>:</p>\n\n<blockquote>\n  <p>[...] When this property is set to true the executable when linked on Windows will be created with a WinMain() entry point instead of just main(). [...]</p>\n</blockquote>\n\n<p>You have 2 options:</p>\n\n<ul>\n<li>Remove the <code>WIN32</code> from the <code>add_executable</code> command.</li>\n<li>Replace <code>int main(int, char**)</code> with the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633559.aspx\" rel=\"nofollow noreferrer\">WinMain</a> entry point: <code>int CALLBACK WinMain(HINSTANCE, HINSTANCE, LPSTR, int)</code>.</li>\n</ul>\n\n<p>The second option is likely what you are looking for, if you do not want a console window to pop up.</p>\n"}, {"comments": [{"owner": {"reputation": 477, "user_id": 1038128, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a77392ff44a1f398824e3bb18b6f33cc?s=128&d=identicon&r=PG", "display_name": "Guillaume Lavoie", "link": "https://stackoverflow.com/users/1038128/guillaume-lavoie"}, "edited": false, "score": 0, "creation_date": 1519357827, "post_id": 48928977, "comment_id": 84888608, "body": "Thanks for the insight. Add linking to Qt5::WinMain fixed my issue my QT application."}], "tags": [], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": false, "score": 1, "last_activity_date": 1519307059, "creation_date": 1519307059, "answer_id": 48928977, "question_id": 48915216, "link": "https://stackoverflow.com/questions/48915216/link-error-when-compiling-win32-application-with-clion-cmake-msvc-2015/48928977#48928977", "title": "Link error when compiling WIN32 application with CLion/CMake/MSVC 2015", "body": "<p><a href=\"https://stackoverflow.com/a/48925785/577603\">IInspectable's excellent answer</a> covered this pretty well, but I have one small addition.</p>\n\n<p>Since you wrote that you are using a Qt application: <a href=\"https://cmake.org/cmake/help/v3.8/manual/cmake-qt.7.html#qtmain-lib-on-windows\" rel=\"nofollow noreferrer\">Qt offers a mechanism</a> for handling this problem in a portable way.</p>\n\n<p>Qt ships with a static library <code>qtmain.lib</code> which defines a <code>WinMain()</code> function for you that simply forwards all command line arguments to the <code>main</code> function (which, in case of a Win32 executable, is just an ordinary function). For Qt5, you can simply add the following to your <code>CMakeLists.txt</code>:</p>\n\n<pre><code>if(WIN32)\n    target_link_libraries(${PROJECT_NAME} PUBLIC Qt5::WinMain)\nendif()\n</code></pre>\n\n<p>Note that this will only work if Qt5 was already found correctly by an earlier <code>find_package</code> call.</p>\n"}], "owner": {"reputation": 477, "user_id": 1038128, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a77392ff44a1f398824e3bb18b6f33cc?s=128&d=identicon&r=PG", "display_name": "Guillaume Lavoie", "link": "https://stackoverflow.com/users/1038128/guillaume-lavoie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2671, "favorite_count": 1, "accepted_answer_id": 48925785, "answer_count": 2, "score": 4, "last_activity_date": 1519307059, "creation_date": 1519246245, "last_edit_date": 1519250271, "question_id": 48915216, "link": "https://stackoverflow.com/questions/48915216/link-error-when-compiling-win32-application-with-clion-cmake-msvc-2015", "title": "Link error when compiling WIN32 application with CLion/CMake/MSVC 2015", "body": "<p>I am unable to compile a simple WIN32 application using CLion with Visual Studio 2015 as a toolchain. Here is the linker error I am getting:</p>\n\n<pre><code>[ 50%] Linking CXX executable test-test.exe\nMSVCRTD.lib(exe_winmain.obj) : error LNK2019: unresolved external symbol WinMain referenced in function \"int __cdecl invoke_main(void)\" (?invoke_main@@YAHXZ)\ntest-test.exe : fatal error LNK1120: 1 unresolved externals\nLINK Pass 1 failed. with 1120\n</code></pre>\n\n<p>Below is the most simplified version of the code that reproduce the issue. It is contain in these two files:</p>\n\n<ul>\n<li><p>CMakeList.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9.6)\nadd_executable(${PROJECT_NAME} WIN32 main.cpp)\n</code></pre></li>\n<li><p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char **argv) {\n    std::cout &lt;&lt; \"HELLO WORLD!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre></li>\n</ul>\n\n<p>More details on the tools I am using:</p>\n\n<ul>\n<li>CLION 2018.1 EAP (latest version)\n\n<ul>\n<li>I also tested with previous non EAP versions, with the same results</li>\n<li>CLion's toolchain architecture is set to x86_amd64</li>\n<li>CLion's CMake build type is set to Debug</li>\n</ul></li>\n<li>CMake 3.9.6</li>\n<li>Visual Studio 2015 (Community)</li>\n</ul>\n\n<p>Please advise</p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>As I mentioned, I simplified the code as much as possible to reproduce the error. Thus, using a std::out. The real application is in fact a QT application, not a console application. </p>\n\n<p>I am adding the WIN32 argument in the CMakeList.txt file for the application to start directly the GUI when executing the EXE (instead of loading a command line prompt and then load the GUI). </p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519245023, "post_id": 48914897, "comment_id": 84836199, "body": "what did you expect it to output?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1519245079, "post_id": 48914897, "comment_id": 84836225, "body": "Try stepping through your code in a debugger and it should become very obvious."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1519245084, "post_id": 48914897, "comment_id": 84836230, "body": "this would be a great time to learn how to debug your programs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6041670"}, "edited": false, "score": 0, "creation_date": 1519245099, "post_id": 48914897, "comment_id": 84836240, "body": "I expected: 1 2 3 4 5 6 7"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 6, "creation_date": 1519245135, "post_id": 48914897, "comment_id": 84836263, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1519245231, "post_id": 48914897, "comment_id": 84836315, "body": "<a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">Your rubber duck</a> wants to know what <code>count++</code> and <code>count = count + 1;</code> do."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 0, "creation_date": 1519248862, "post_id": 48914897, "comment_id": 84838144, "body": "My suggestion would be to go through some C++ tutorials. There are many websites that offer free tutorials, and you don&#39;t even need an IDE for many of them.  I like that you seem to be starting with C++, though. It can get frustrating sometimes, but it&#39;s a great language to start with if you stick with it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 1, "creation_date": 1519255019, "post_id": 48914897, "comment_id": 84840698, "body": "@adpro the problem with tutorials is until you have a decent grip on the language and its best practices you can&#39;t tell a good tutorial from one that will make you an even worse programmer."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519305423, "post_id": 48914897, "comment_id": 84863032, "body": "@user4581301, I kind of agree with that. I was self taught and definitely didn&#39;t learn a lot of best practices to begin with. But I eventually learned what was good and what wasn&#39;t. I also went back to school. Having a good resource that will teach you properly is obviously best, and cuts down the learning curve, so a school setting or reputable tutorials are best, obviously, but it can still be done on your own. It just might take longer. Learning a bad thing and why it&#39;s bad later will also teach you a good lesson, so there&#39;s that too."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 0, "creation_date": 1519305595, "post_id": 48914897, "comment_id": 84863168, "body": "And, there are lots of podcasts that can be listened to. Like cppcast. Or software engineering podcast. Or coding blocks.  These podcasts often give suggestions as to what sites are good to learn from. Like HackerRank or ProjectEuler. I feel it&#39;s easier to find good coding tutorials now than it was in the late 90&#39;s when I was learning."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 0, "creation_date": 1519317265, "post_id": 48914897, "comment_id": 84871938, "body": "@adpro I should have taken that statement further and included my counter recommendation. Find out who the experts in the field are. Use their tutorials/teachings where possible. They can&#39;t cover all of the bases, so when you go looking for a wider net of tutorials, try to find ones that cite the experts or are backed by the experts. When you find you can filter tutorials by whether they follow the same principles as the experts, congratulations! You&#39;ve graduated to recognizing good tutorials at a rudimentary level."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519317507, "post_id": 48914897, "comment_id": 84872139, "body": "@user4581301, that&#39;s great advice for more advanced topics, for sure. So he/she should put that in his/her back pocket. But the user doesn&#39;t know how a basic for loop works, so we&#39;re talking about the most basic tutorials at this point. I would have to ask how the user would find who the experts in the field are, and how to know they are experts. Sites designed to offer beginner tutorials would suffice at first, then your advice would kick in after the user got to know more about the language and people in the field."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519245291, "post_id": 48914969, "comment_id": 84836343, "body": "Some questions should not be answered. This sort of mistake should be a learning experience for a new programmer."}], "tags": [], "owner": {"reputation": 951, "user_id": 9161094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5b3673d6dd85cb6b7c4b870c601233?s=128&d=identicon&r=PG&f=1", "display_name": "Pam", "link": "https://stackoverflow.com/users/9161094/pam"}, "is_accepted": false, "score": 1, "last_activity_date": 1519245441, "last_edit_date": 1519245441, "creation_date": 1519245210, "answer_id": 48914969, "question_id": 48914897, "link": "https://stackoverflow.com/questions/48914897/why-does-this-output-display-only-the-odd-numbers-in-the-given-range-user-input/48914969#48914969", "title": "Why does this output display only the odd numbers in the given range (user input) in this for loop", "body": "<p>count is incremented twice in each loop. Once in the loop iterator (the \"for\" line) and once where you set count = count +1;</p>\n\n<p>First time round the for loop, count  = 0, then it\u2019s incremented (1), then printed. Then incremented in the \"for\" line (2), incremented by count = count +1 (3) then printed.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1519245305, "creation_date": 1519245305, "answer_id": 48914986, "question_id": 48914897, "link": "https://stackoverflow.com/questions/48914897/why-does-this-output-display-only-the-odd-numbers-in-the-given-range-user-input/48914986#48914986", "title": "Why does this output display only the odd numbers in the given range (user input) in this for loop", "body": "<p>You are modifying <code>count</code> in your loop (<code>count++</code>) as well as in the body of the loop <code>count = count + 1;</code> so of course it increases by 2 each iteration. </p>\n\n<p>What did you expect?</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519247819, "post_id": 48915116, "comment_id": 84837620, "body": "It doesn&#39;t matter much, but you should reverse <code>count++;</code> and <code>count = count + 1;</code> in your second snippet. The <code>count++</code> will take place after the <code>count = count + 1;</code>."}], "tags": [], "owner": {"reputation": 105, "user_id": 9392936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f79abfd5d86f0cf609fc582e8fadc77?s=128&d=identicon&r=PG&f=1", "display_name": "Justin W", "link": "https://stackoverflow.com/users/9392936/justin-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1519248474, "last_edit_date": 1519248474, "creation_date": 1519245897, "answer_id": 48915116, "question_id": 48914897, "link": "https://stackoverflow.com/questions/48914897/why-does-this-output-display-only-the-odd-numbers-in-the-given-range-user-input/48915116#48915116", "title": "Why does this output display only the odd numbers in the given range (user input) in this for loop", "body": "<p>When you increment count in the for loop your incrementing the variable \"count\" not just the for loop itself.\nIn c++, a for loop that increments by one can also be written as:</p>\n\n<pre><code>int count = 0;\nfor(;count &lt;= range;;){\n//code here\ncount++;\n}\n</code></pre>\n\n<p>So the code you have written actually increments the for loop like this:</p>\n\n<pre><code>int count = 0;\nfor(; count &lt;= range;;){\n//code here\ncount = count + 1;\ncount++;\n}\n</code></pre>\n\n<p>Which adds 1 twice to count, which is the same as adding 2.\nThus, your loop skips over every other number giving you odd outputs.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6041670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1519248474, "creation_date": 1519244908, "last_edit_date": 1519245035, "question_id": 48914897, "link": "https://stackoverflow.com/questions/48914897/why-does-this-output-display-only-the-odd-numbers-in-the-given-range-user-input", "title": "Why does this output display only the odd numbers in the given range (user input) in this for loop", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int count;\n    int range;\n    cout &lt;&lt; \"Enter the range of two numbers\" &lt;&lt; endl;\n    cin &gt;&gt; range;\n\n    for (count = 0; count &lt;= range; count++)\n        {\n            count = count + 1;\n            cout &lt;&lt; count &lt;&lt; endl;\n        }\n\n    system(\"pause\")\n    return 0;\n}\n</code></pre>\n\n<p>the output displays:</p>\n\n<pre><code>Enter the range of two numbers\n9\n1\n3\n5\n7\n9\nPress any key to continue...\n</code></pre>\n"}, {"tags": ["c++", "gtk", "gtkmm"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1519245037, "post_id": 48914863, "comment_id": 84836206, "body": "Casting <code>this</code> to a different type looks plenty suspicious. Perhaps that should be a virtual function instead? (If you&#39;re new, pick one from the <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">book list</a>.)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519245094, "post_id": 48914863, "comment_id": 84836238, "body": "Do you mean to do <code>MyClass::get_boolean_val()</code>?"}, {"owner": {"reputation": 79, "user_id": 8816299, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/5Wtat.jpg?s=128&g=1", "display_name": "robert strickland", "link": "https://stackoverflow.com/users/8816299/robert-strickland"}, "edited": false, "score": 0, "creation_date": 1519245492, "post_id": 48914863, "comment_id": 84836444, "body": "I meant to do <code>MyClass::get_boolean_val()</code>. I was told explicitly to have the actual variable protected but still need a way to look at it for conditional statements."}, {"owner": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519245926, "post_id": 48914863, "comment_id": 84836668, "body": "In addition to heeding @molbdnilo&#39;s advice, perhaps also see <a href=\"http://people.scs.carleton.ca/~dehne/projects/cpp-doc/tutorial/tut5-4.html\" rel=\"nofollow noreferrer\">people.scs.carleton.ca/~dehne/projects/cpp-doc/tutorial/&hellip;</a>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519252901, "post_id": 48914863, "comment_id": 84839934, "body": "Well in the first case you are binding <code>this</code> and in the second case you are binding <code>w</code>. <i>Are they the same?</i>"}, {"owner": {"reputation": 79, "user_id": 8816299, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/5Wtat.jpg?s=128&g=1", "display_name": "robert strickland", "link": "https://stackoverflow.com/users/8816299/robert-strickland"}, "edited": false, "score": 0, "creation_date": 1519305394, "post_id": 48914863, "comment_id": 84863013, "body": "I think they should be the same but when I output the memory addresses they are different. <code>w</code> calls the function and inside the function I&#39;m using <code>this</code> so I don&#39;t know why they are different"}], "owner": {"reputation": 79, "user_id": 8816299, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/5Wtat.jpg?s=128&g=1", "display_name": "robert strickland", "link": "https://stackoverflow.com/users/8816299/robert-strickland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519292724, "creation_date": 1519244804, "last_edit_date": 1519292724, "question_id": 48914863, "link": "https://stackoverflow.com/questions/48914863/this-call-in-function-points-to-different-address-than-the-variable", "title": "&#39;this&#39; call in function points to different address than the variable", "body": "<p>For my GUI I have a class to add more functionality to Gtk::Entries. In that class I have a protected boolean variable. I have functions built to adjust the boolean variable to be true or false when it needs to be, this works no problem. When I try to pass that boolean value is where the problem occurs</p>\n\n<p>For instance what did not work is:</p>\n\n<pre><code>((Gtk::Entry *)w)-&gt;signal_activate().connect(sigc::bind&lt;Gtk::Widget *&gt;(sigc::mem_fun(*this, &amp;Dialog::function), w2));\n</code></pre>\n\n<p>The Dialog::function looks like this:</p>\n\n<pre><code>void Dialog::function(Gtk::Widget *w2)\n{\n    if((MyClass *) this)-&gt;get_boolean_val())\n         w2-&gt;do_something();\n}\n</code></pre>\n\n<p>Whenver I did this the boolean value would <b>always</b> come back false, even after varifying that the class variable would change. I proved that by editing the above as such.</p>\n\n<pre><code>((Gtk::Entry *)w)-&gt;signal_activate().connect(sigc::bind&lt;Gtk::Widget *, Gtk::Entry *&gt;(sigc::mem_fun(*this, &amp;Dialog::function), w2, w));\n</code></pre>\n\n<p>and changing the function body to this:</p>\n\n<pre><code>void Dialog::function(Gtk::Widget *w2, Gtk::Entry *w)\n{\n    if((MyClass *) w)-&gt;get_boolean_val())\n         w2-&gt;do_something();\n}\n</code></pre>\n\n<p><b>This</b> works but I feel as if there is a better way to edit the 'w' object's boolean value and pull it. Similar to how the keyword 'this' works.</p>\n\n<p>I'm new to C++</p>\n"}, {"tags": ["c++", "static-cast"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1519244654, "post_id": 48914772, "comment_id": 84836005, "body": "<code>static_cast&lt;B&gt;(a)</code> could potentially either mean <code>B(a.operator int())</code> or <code>a.operator B()</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1519244745, "post_id": 48914772, "comment_id": 84836054, "body": "Although I don&#39;t get any error in g++ 7.2, it selects <code>a.operator B()</code> for the <code>static_cast</code>"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1519244807, "post_id": 48914772, "comment_id": 84836086, "body": "Making (at least) <code>operator int</code> <code>explicit</code> would fix it and probably be a good idea. g++ suggests this is fine in C++17 though."}, {"owner": {"reputation": 940, "user_id": 2808783, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/66lPY.png?s=128&g=1", "display_name": "Ivan Romanov", "link": "https://stackoverflow.com/users/2808783/ivan-romanov"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1519244926, "post_id": 48914772, "comment_id": 84836145, "body": "@M.M you&#39;re right no error with -std=c++1z but with -std=c++14 error is present"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1519245073, "post_id": 48914772, "comment_id": 84836224, "body": "I imagine GCC 7.2 accepting it with <code>-std=c++1z</code> has something to do with the background provided <a href=\"https://stackoverflow.com/a/48384896/817643\">here</a>. I.e., GCC&#39;s take on guaranteed copy elision."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 2, "creation_date": 1519245762, "post_id": 48914772, "comment_id": 84836575, "body": "This also happens in VS2017. It gets wierder <code>B b = static_cast&lt;B&gt;(a);</code> ambiguous while <code>B b = a;</code> is fine"}], "answers": [{"comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519462669, "post_id": 48948802, "comment_id": 84928399, "body": "<i>if the initializer is a prvalue expression <b>whose type is the same class as T...</i></b> Why does this bullet apply instead of the next one: <i>the constructors of T are examined and the best match is selected by overload resolution. The constructor is then called to initialize the object.</i>"}, {"owner": {"reputation": 601, "user_id": 1338667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c6c97eb8a07daf93f2415c6080bd47?s=128&d=identicon&r=PG", "display_name": "nVxx", "link": "https://stackoverflow.com/users/1338667/nvxx"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519479334, "post_id": 48948802, "comment_id": 84932648, "body": "@xskxzr, not sure that the rules are always listed in prioritized order, but even without that - opting for not calling a constructor instead of selecting the best match seems reasonable."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1519479795, "post_id": 48948802, "comment_id": 84932780, "body": "<a href=\"http://www.eel.is/c++draft/dcl.init#17.6\" rel=\"nofollow noreferrer\">These rules <b>are</b> listed in prioritized order</a>. <a href=\"https://stackoverflow.com/a/48696012/5376789\">Also your idea of such elision&#39;s being reasonable is essentially CWG 2327</a>."}], "tags": [], "owner": {"reputation": 601, "user_id": 1338667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c6c97eb8a07daf93f2415c6080bd47?s=128&d=identicon&r=PG", "display_name": "nVxx", "link": "https://stackoverflow.com/users/1338667/nvxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1519400402, "last_edit_date": 1519400402, "creation_date": 1519391951, "answer_id": 48948802, "question_id": 48914772, "link": "https://stackoverflow.com/questions/48914772/call-of-overloaded-static-cast-is-ambiguous/48948802#48948802", "title": "Call of overloaded static_cast is ambiguous", "body": "<p>This is because the rules of <code>direct initialization</code> (wrt <code>copy elision</code> in particular) are slightly altered in C++17, and <code>static_cast&lt;B&gt;(a);</code> simply results in:</p>\n\n<pre><code>a.operator B();\n</code></pre>\n\n<p>As mentioned on <a href=\"http://en.cppreference.com/w/cpp/language/direct_initialization\" rel=\"nofollow noreferrer\">cppreference/direct_initialization</a>:</p>\n\n<blockquote>\n  <p>if the initializer is a prvalue expression whose type is the same class as T (ignoring cv-qualification), the initializer expression itself, rather than a temporary materialized from it, is used to initialize the destination object: see copy elision (since C++17)</p>\n</blockquote>\n\n<p>And when reading further in <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">cppreference/copy_elision</a>, it says that since C++17, the compilers are required to omit the copy- and move- construction if </p>\n\n<blockquote>\n  <p>In a function call, if the operand of a return statement is a prvalue and the return type of the function is the same as the type of that prvalue.</p>\n</blockquote>\n\n<p>Thus, while <code>static_cast&lt;B&gt;(a);</code> pre C++17 can be interpreted both as <code>B(a.operator int())</code> and <code>a.operator B()</code>, C++17 has to pick the second option, since the return value of <code>a.operator B()</code> is <code>prvalue</code> of type <code>B</code> and it can omit copy-/move- construction.</p>\n"}, {"comments": [{"owner": {"reputation": 940, "user_id": 2808783, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/66lPY.png?s=128&g=1", "display_name": "Ivan Romanov", "link": "https://stackoverflow.com/users/2808783/ivan-romanov"}, "edited": false, "score": 0, "creation_date": 1519535190, "post_id": 48969915, "comment_id": 84946216, "body": "In short this means. Compiler for expression <code>static_cast&lt;B&gt;(a);</code> finds two substitutions: <code>B(a.operator int())</code> and <code>B(a.operator B())</code>. But <code>a.operator B()</code> is not a substitution. This is correct?"}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": true, "score": 2, "last_activity_date": 1519529067, "creation_date": 1519529067, "answer_id": 48969915, "question_id": 48914772, "link": "https://stackoverflow.com/questions/48914772/call-of-overloaded-static-cast-is-ambiguous/48969915#48969915", "title": "Call of overloaded static_cast is ambiguous", "body": "<h1>C++14</h1>\n\n<p>According to N3797 [expr.static.cast] paragraph 4:</p>\n\n<blockquote>\n  <p>An expression <code>e</code> can be explicitly converted to a type <code>T</code> using a <code>static_cast</code> of the form <code>static_cast&lt;T&gt;(e)</code> if the declaration <code>T t(e);</code> is well-formed, for some invented temporary variable <code>t</code> (8.5). The effect of such an explicit conversion is the same as performing the declaration and initialization and then using the temporary variable as the result of the conversion. </p>\n</blockquote>\n\n<p>The expression <code>static_cast&lt;B&gt;(a)</code> performs a direct-initialization of a temporary variable of type <code>B</code> from the initializer <code>a</code>. Then the following bullet from N3797 [dcl.init] paragraph 17 applies:</p>\n\n<blockquote>\n  <p>If the initialization is direct-initialization, or if it is copy-initialization where the cv-unqualified version of the source type is the same class as, or a derived class of, the class of the destination, constructors are considered. <strong>The applicable constructors are enumerated (13.3.1.3), and the best one is chosen through overload resolution (13.3).</strong> The constructor so selected is called to initialize the object, with the initializer expression or <em>expression-list</em> as its argument(s). If no constructor applies, or the overload resolution is ambiguous, the initialization is ill-formed.</p>\n</blockquote>\n\n<p>And \"applicable constructors\" are defined by N3797 [over.match.ctor]:</p>\n\n<blockquote>\n  <p>For direct-initialization, the candidate functions are all the constructors of the class of the object being initialized.</p>\n</blockquote>\n\n<p>So all the three constructors: <code>B::B(int)</code>, <code>B::B(const B&amp;)</code>, <code>B::B(B&amp;&amp;)</code> are candidates during overload resolution. Then three corresponding implicit conversion sequences: <code>A-&gt;int</code>, <code>A-&gt;const B&amp;</code>, <code>A-&gt;B&amp;&amp;</code> are compared. As a result, <code>A-&gt;int</code> is distinguishable from the other two since the conditions of the following bullet from N3797 [over.ics.rank] paragraph 3 are not met:</p>\n\n<blockquote>\n  <p>User-defined conversion sequence <code>U1</code> is a better conversion sequence than another user-defined conversion sequence <code>U2</code> if <strong>they contain the same user-defined conversion function or constructor</strong> or they initialize the same class in an aggregate initialization and in either case the second standard conversion\n  sequence of U1 is better than the second standard conversion sequence of <code>U2</code>.</p>\n</blockquote>\n\n<p>In addition, no special rules of determining the best viable function in N3797 [over.match.best] paragraph 1 apply, so the overload resolution is ambiguous, which causes the compiler error.</p>\n\n<h1>C++17</h1>\n\n<p>The deduction above also holds, so this is a compiler bug (for now). The wording for [expr.static.cast] paragraph 4 has changed due to <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#242\" rel=\"nofollow noreferrer\">CWG 242</a>, but it does not affect our conclusion.</p>\n\n<p>Note guaranteed copy elision does not apply here because it is not an initialization from a prvalue of the same type.</p>\n\n<h1>C++20 or later</h1>\n\n<p>There is already a <a href=\"https://groups.google.com/a/isocpp.org/forum/#!msg/std-discussion/rpOG44MGH7s/n55SAATcBgAJ\" rel=\"nofollow noreferrer\">discussion</a> about adding guaranteed copy elision to such direct-initialization cases, so maybe the behavior of selecting <code>a.operator B()</code> will be legal in the future.</p>\n"}], "owner": {"reputation": 940, "user_id": 2808783, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/66lPY.png?s=128&g=1", "display_name": "Ivan Romanov", "link": "https://stackoverflow.com/users/2808783/ivan-romanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 3, "accepted_answer_id": 48969915, "answer_count": 2, "score": 15, "last_activity_date": 1519529067, "creation_date": 1519244405, "last_edit_date": 1519245285, "question_id": 48914772, "link": "https://stackoverflow.com/questions/48914772/call-of-overloaded-static-cast-is-ambiguous", "title": "Call of overloaded static_cast is ambiguous", "body": "<p>I have some code like this</p>\n\n<pre><code>struct B\n{\n    B() {}\n    B(int v) {}\n};\n\nstruct A\n{\n    operator int() const { return 1; }\n    operator B() const { return B(); }\n};\n\nint main()\n{\n    A a;\n    static_cast&lt;B&gt;(a); // Error here\n    a.operator B(); // This is OK\n    return 0;\n}\n</code></pre>\n\n<p>It produces such compilation error:</p>\n\n<pre><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:16:21: error: call of overloaded \u2018B(A&amp;)\u2019 is ambiguous\n     static_cast&lt;B&gt;(a);\n                     ^\nmain.cpp:4:5: note: candidate: B::B(int)\n     B(int v) {}\n     ^\nmain.cpp:1:8: note: candidate: constexpr B::B(const B&amp;)\n struct B\n        ^\nmain.cpp:1:8: note: candidate: constexpr B::B(B&amp;&amp;)\n</code></pre>\n\n<p>I don't ask how to fix this. Just want to understand why compiler doesn't take it? From my POV <code>static_cast&lt;B&gt;(a)</code> is equal with <code>a.operator B()</code> but seems compilator reads it differently.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>This behavior happens pre c++17. With c++17 this code doesn't produce any compilation error.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2017", "cl.exe"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1519244681, "post_id": 48914653, "comment_id": 84836022, "body": "-1073741701 = 0xC000 007B, which is the windows INVALID_NAME error. Double check your program names and file paths are legal."}, {"owner": {"reputation": 951, "user_id": 9161094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5b3673d6dd85cb6b7c4b870c601233?s=128&d=identicon&r=PG&f=1", "display_name": "Pam", "link": "https://stackoverflow.com/users/9161094/pam"}, "edited": false, "score": 0, "creation_date": 1519244786, "post_id": 48914653, "comment_id": 84836072, "body": "And that you have the correct write privileges <a href=\"https://stackoverflow.com/questions/44024268/msbuild-error-msb6006-cmd-exe-exited-with-code-1\" title=\"msbuild error msb6006 cmd exe exited with code 1\">stackoverflow.com/questions/44024268/&hellip;</a>"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 1, "creation_date": 1519258816, "post_id": 48914653, "comment_id": 84841799, "body": "Try compiling with v140 and SDK 8.1in VS 2015 .It should work. Did you uninstall vs2012 before installing vs2017, looks like the  path to the latest cl.exe may be incorrect."}], "answers": [{"tags": [], "owner": {"reputation": 630, "user_id": 277055, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e33690e9ebe9ce2daf7e42781d6b0bb?s=128&d=identicon&r=PG", "display_name": "hugo411", "link": "https://stackoverflow.com/users/277055/hugo411"}, "is_accepted": false, "score": 0, "last_activity_date": 1519332596, "creation_date": 1519332596, "answer_id": 48936905, "question_id": 48914653, "link": "https://stackoverflow.com/questions/48914653/migrating-visual-studio-project-from-2012-to-2017-errors-cl-exe/48936905#48936905", "title": "migrating visual studio project from 2012 to 2017 errors CL.exe", "body": "<p>thanks for your support, i found the answer.\nI installed VS 2017 community without uninstalling VS 2012 first and it gave me toolset problem with CL.exe. The solution is to uninstall VS 2012 and then repair VS 2017.</p>\n"}], "owner": {"reputation": 630, "user_id": 277055, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e33690e9ebe9ce2daf7e42781d6b0bb?s=128&d=identicon&r=PG", "display_name": "hugo411", "link": "https://stackoverflow.com/users/277055/hugo411"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519332596, "creation_date": 1519244014, "question_id": 48914653, "link": "https://stackoverflow.com/questions/48914653/migrating-visual-studio-project-from-2012-to-2017-errors-cl-exe", "title": "migrating visual studio project from 2012 to 2017 errors CL.exe", "body": "<p>I run windows 7 with visual studio 2012. Everything compile fine.\nI open the same project on the new visual studio 2017 community, i got a popup saying to upgrade to windows sdk 10 and toolset v141. I did.</p>\n\n<p>Then when building i got this?</p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\Microsoft Visual\n  Studio\\2017\\Community\\Common7\\IDE\\VC\\VCTargets\\Microsoft.CppCommon.targets(361,5):\n  error MSB6006: \"CL.exe\" exited with code -1073741701.</p>\n</blockquote>\n\n<p>Any ideas? Thanks</p>\n"}, {"tags": ["c++", "pointers", "vector", "push-back"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1519243614, "post_id": 48914511, "comment_id": 84835420, "body": "<code>zz</code> is a <code>vector</code> of <code>unsigned int</code> and you are trying to push a <code>double</code>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 8, "creation_date": 1519243623, "post_id": 48914511, "comment_id": 84835424, "body": "Don&#39;t name your local variables the same as the function arguments."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1519243693, "post_id": 48914511, "comment_id": 84835461, "body": "Please show the <b>exact</b> error message. Paraphrasing loses information that can be important for us to help you."}, {"owner": {"reputation": 180, "user_id": 3914156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1aa9ddeefbde7ae57fc92555b31fa08?s=128&d=identicon&r=PG&f=1", "display_name": "mfkw1", "link": "https://stackoverflow.com/users/3914156/mfkw1"}, "edited": false, "score": 1, "creation_date": 1519243758, "post_id": 48914511, "comment_id": 84835511, "body": "Why are you passing coordinates as vectors?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1519245843, "post_id": 48914511, "comment_id": 84836615, "body": "I hope this is code is only an exercise and I hope that at some point you will understand that this method is effectively the same as <code>double datawrite(double val) { return val;}</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1519246051, "post_id": 48914511, "comment_id": 84836741, "body": "is it possible that you want to set the value <code>val</code> at some index <code>(x,y,z)</code> of a 3d data structure? ...because your code is doing something quite different"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1519253089, "post_id": 48914511, "comment_id": 84840008, "body": "You have more than one definition of <code>xx</code>, <code>yy</code> and <code>zz</code>"}, {"owner": {"reputation": 9, "user_id": 8351340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947268478874250/picture?type=large", "display_name": "Christian Potts", "link": "https://stackoverflow.com/users/8351340/christian-potts"}, "edited": false, "score": 0, "creation_date": 1519253966, "post_id": 48914511, "comment_id": 84840321, "body": "@ kubawal: I am attempting to create a neural network, where the x and y coordinates are the node locations, and the z values represent the weights it has and which other neuron the weight is connected to.. EX [0,0,0] are coordinates [0,0,1] = weight, [0,0,2] = xdestination [0,0,3] = ydestination."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8351340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947268478874250/picture?type=large", "display_name": "Christian Potts", "link": "https://stackoverflow.com/users/8351340/christian-potts"}, "edited": false, "score": 0, "creation_date": 1519256723, "post_id": 48915193, "comment_id": 84841214, "body": "Thank you for your quick response, however it seems i&#39;m still facing an error. When  i try to push through a function                                          &quot;double hello = datawrite(0,0,0,1)&quot;  I get an error that says the &quot;Vector subscript is out of range."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1519257607, "post_id": 48915193, "comment_id": 84841486, "body": "<code>reserve</code> does NOT &quot;make sure the matrix is big enough&quot;.  It allocates memory to get ready for a bigger size, but without actually changing the size. <code>std::vector&lt;double&gt; v; v.reserve(10); v[0] = 0;</code> is just as invalid as if you didn&#39;t have the <code>reserve</code>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1519260575, "post_id": 48915193, "comment_id": 84842261, "body": "@aschepler My mistake. I meant <a href=\"http://en.cppreference.com/w/cpp/container/vector/resize\" rel=\"nofollow noreferrer\"><code>resize</code></a>. I&#39;ve updated the answer. Thanks."}, {"owner": {"reputation": 9, "user_id": 8351340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947268478874250/picture?type=large", "display_name": "Christian Potts", "link": "https://stackoverflow.com/users/8351340/christian-potts"}, "edited": false, "score": 0, "creation_date": 1519264467, "post_id": 48915193, "comment_id": 84843202, "body": "Thank you very much for this solution! It is neat and compact and does everything I want! i would give you an up-vote but i cant yet, thanks friends!"}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 0, "last_activity_date": 1519260344, "last_edit_date": 1519260344, "creation_date": 1519246146, "answer_id": 48915193, "question_id": 48914511, "link": "https://stackoverflow.com/questions/48914511/3d-vector-no-instance-of-overload-function/48915193#48915193", "title": "3D Vector - &quot;No instance of overload function?&quot;", "body": "<p>So you want a 3d matrix of doubles? First you need to create it:</p>\n\n<pre><code>#include &lt;vector&gt;\nstd::vector&lt;vector&lt;vector&lt;double&gt;&gt;&gt; matrix;\n</code></pre>\n\n<p>This creates a 3d matrix, but with 0 size. Next, when you add data to the matrix, you need to make sure the matrix is big enough:</p>\n\n<pre><code>// Co-ords are integers\ndouble datawrite(int x, int y, int z, double val)\n{\n    // Make sure vectors are large enough\n    if (matrix.size() &lt; x+1) matrix.resize(x+1);\n    if (matrix[x].size() &lt; y+1) matrix[x].resize(y+1);\n    if (matrix[x][y].size() &lt; z+1) matrix[x][y].resize(z+1);\n\n    // Store the value\n    matrix[x][y][z] = val;\n    return val;\n}\n</code></pre>\n\n<p>However, this is a bit messy and leaves the matrix in an incomplete state. For example, if you call <code>datawrite(2, 3, 4, 9.9);</code> this may appear that all indexes &lt; 2,3,4 would be valid, but they are not. For example trying to read <code>matrix[0][0][0]</code> will give you an error.</p>\n\n<p>You could work around this with a <code>dataread</code> function that checks the sizes of the vectors before trying to read from them.</p>\n\n<p>If you know ahead of time how large the matrix is, you can create the entire matrix at once like this:</p>\n\n<pre><code>vector&lt;vector&lt;vector&lt;double&gt;&gt;&gt; matrix(10, vector&lt;vector&lt;double&gt;&gt;(10, vector&lt;double&gt;(10)));\n</code></pre>\n\n<p>This creates a complete 10x10x10 matrix. This ensures all indexes &lt; 10 will be valid. I prefer this method. Then your function becomes:</p>\n\n<pre><code>double datawrite(int x, int y, int z, double val)\n{\n    // Make sure indexes are valid\n    if (x &gt;= matrix.size() || y &gt;= matrix[x].size() || z &gt;= matrix[x][y].size()) {\n        // Up to you what to do here.\n        // Throw an error or resize the matrix to fit the new data\n    }\n\n    // Store the value\n    matrix[x][y][z] = val;\n    return val;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8351340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947268478874250/picture?type=large", "display_name": "Christian Potts", "link": "https://stackoverflow.com/users/8351340/christian-potts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 48915193, "answer_count": 1, "score": 0, "last_activity_date": 1519260344, "creation_date": 1519243468, "last_edit_date": 1519257256, "question_id": 48914511, "link": "https://stackoverflow.com/questions/48914511/3d-vector-no-instance-of-overload-function", "title": "3D Vector - &quot;No instance of overload function?&quot;", "body": "<p>Still relatively new to vectors in C++, the aim of this function is to take 4 arguments, 3 of which define the (x , y , z) position of the data being written, and the 4th being the value that is to be written.</p>\n\n<p>as Requested, a picture of the errors is listed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gGnO0.png\" rel=\"nofollow noreferrer\">Picture of code listed above</a></p>\n\n<p>The issue is under the \"push_back\" code. the \".\" after yy.push and xx.push is giving the error \"no instance of overloaded function\".</p>\n\n<p>If somebody could explain what this means and how to fix it I would greatly appreciate it! :)</p>\n\n<pre><code>double datawrite(vector&lt;unsigned int&gt; xx, vector&lt;unsigned int&gt; yy, \nvector&lt;unsigned int&gt; zz, double val) {\n//Writes data to the 3d Vector\n\n//finds coordinates for data\n    vector&lt; vector&lt; vector&lt;unsigned int &gt; &gt; &gt; xx;\n    vector&lt; vector&lt;unsigned int&gt; &gt; yy;\n    vector&lt;unsigned int&gt; zz;\n\n//Writes value at proper position\n    zz.push_back(val);\n    yy.push_back(zz);\n    xx.push_back(yy);\n\n    //outputs value from vector\n    return val;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "if-statement"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519243524, "post_id": 48914478, "comment_id": 84835369, "body": "<a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519243615, "post_id": 48914478, "comment_id": 84835421, "body": "You could use <a href=\"http://en.cppreference.com/w/cpp/string/byte/toupper\" rel=\"nofollow noreferrer\"><code>std::toupper</code></a> to convert your characters to upper case."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519243663, "post_id": 48914478, "comment_id": 84835447, "body": "Rather than comparing 1 length substrings, it seem more intuitive to compare characters. For example, <code>parts[1] == &#39;M&#39;</code> instead of <code>parts.substr(1, 1) == &quot;M&quot;</code>."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 2, "creation_date": 1519243794, "post_id": 48914478, "comment_id": 84835534, "body": "<code>parts != &quot;x&quot; || parts != &quot;X&quot;</code> this will always be <code>true</code>. I think you wanted <code>parts != &quot;x&quot; &amp;&amp; parts != &quot;X&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 9392919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a637e85a4ff99ca35b0b891db72fa11b?s=128&d=identicon&r=PG&f=1", "display_name": "John0121", "link": "https://stackoverflow.com/users/9392919/john0121"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519243922, "post_id": 48914478, "comment_id": 84835598, "body": "@Fran&#231;oisAndrieux I guess I&#39;m a little lost on where I would add the toupper? I&#39;ve tried it and it doesnt work, but I&#39;m positive thats because I&#39;m using it wrong"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1519244302, "post_id": 48914478, "comment_id": 84835789, "body": "Did you notice that <code>parts.substr(1, 1) == &quot;M&quot; &amp;&amp; parts.substr(2, 1) == &quot;P&quot;</code> is the same as <code>parts.substr(1, 2) == &quot;MP&quot;</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519246522, "post_id": 48914596, "comment_id": 84836975, "body": "Search the internet for &quot;c++ transform string tolower&quot; for an example of how to use library functions to convert to all lower case."}], "tags": [], "owner": {"reputation": 64, "user_id": 7676485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GIgQ7.jpg?s=128&g=1", "display_name": "KarenAni", "link": "https://stackoverflow.com/users/7676485/karenani"}, "is_accepted": false, "score": 1, "last_activity_date": 1519248645, "last_edit_date": 1519248645, "creation_date": 1519243801, "answer_id": 48914596, "question_id": 48914478, "link": "https://stackoverflow.com/questions/48914478/if-statements-with-more-than-one-argument-needing-to-be-true/48914596#48914596", "title": "If Statements with more than one argument needing to be true?", "body": "<pre><code>#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    string data = \"This Will Be All UpperCase When After The Next Line Code\";\n    transform(data.begin(), data.end(), data.begin(), ::toupper);\n    cout &lt;&lt; data &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519244970, "post_id": 48914715, "comment_id": 84836166, "body": "Why do you consider using binary <code>and</code> a cleaner solution? I think it is not only not cleaner but unnecessary less efficient. Plus you are trying to pass <code>std::string</code> where <code>const char *</code>  is expected"}, {"owner": {"reputation": 1854, "user_id": 5935255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1624990b668d709e51d40e54f0c76df3?s=128&d=identicon&r=PG&f=1", "display_name": "SoroushA", "link": "https://stackoverflow.com/users/5935255/sorousha"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519245308, "post_id": 48914715, "comment_id": 84836348, "body": "@Slava fixed using c_str()"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519245741, "post_id": 48914715, "comment_id": 84836571, "body": "I still do not get why you consider using bitwise and &quot;cleaner&quot;"}], "tags": [], "owner": {"reputation": 1854, "user_id": 5935255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1624990b668d709e51d40e54f0c76df3?s=128&d=identicon&r=PG&f=1", "display_name": "SoroushA", "link": "https://stackoverflow.com/users/5935255/sorousha"}, "is_accepted": false, "score": 0, "last_activity_date": 1519245290, "last_edit_date": 1519245290, "creation_date": 1519244211, "answer_id": 48914715, "question_id": 48914478, "link": "https://stackoverflow.com/questions/48914478/if-statements-with-more-than-one-argument-needing-to-be-true/48914715#48914715", "title": "If Statements with more than one argument needing to be true?", "body": "<p>You can compare the characters using a case-insensitive comparison function such as <code>strcasecmp</code>. See documentation <a href=\"https://www.ibm.com/support/knowledgecenter/en/ssw_ibm_i_72/rtref/strcasecmp.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>if (srtcasecmp(parts.substr(1, 1).c_str(), \"M\") == 0 &amp;&amp; srtcasecmp(parts.substr(2, 1).c_str(), \"P\") == 0) {//your code}\n</code></pre>\n\n<p>Or even cleaner:</p>\n\n<pre><code>if (srtcasecmp(parts.substr(1, 1).c_str(), \"M\") &amp; srtcasecmp(parts.substr(2, 1).c_str(), \"P\") == 0) {//your code}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1519244358, "creation_date": 1519244358, "answer_id": 48914761, "question_id": 48914478, "link": "https://stackoverflow.com/questions/48914478/if-statements-with-more-than-one-argument-needing-to-be-true/48914761#48914761", "title": "If Statements with more than one argument needing to be true?", "body": "<p>As pointed out in one the comments, </p>\n\n<pre><code>while (parts != \"x\" || parts != \"X\")\n</code></pre>\n\n<p>is not right. The conditional will always evaluate to <code>true</code>. It needs to be:</p>\n\n<pre><code>while (parts != \"x\" &amp;&amp; parts != \"X\")\n</code></pre>\n\n<p>You can simplify the logic in the loop using:</p>\n\n<pre><code>char secondLetter = std::tolower(parts[1]);\nchar thirdLetter = std::tolower(parts[2]);\n\nif ( secondLetter == 'm' &amp;&amp; thirdLetter == 'p' )\n{\n  // ...\n}\nelse if ( secondLetter == 'f' &amp;&amp; thirdLetter == 's' )\n{\n  // ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1519245221, "last_edit_date": 1519245221, "creation_date": 1519244590, "answer_id": 48914816, "question_id": 48914478, "link": "https://stackoverflow.com/questions/48914478/if-statements-with-more-than-one-argument-needing-to-be-true/48914816#48914816", "title": "If Statements with more than one argument needing to be true?", "body": "<p>You should change your input string to uppercase or lowercase using one of the methods you like from <a href=\"https://stackoverflow.com/questions/735204/convert-a-string-in-c-to-upper-case\">Convert a String In C++ To Upper Case</a> and then just check:</p>\n\n<pre><code>// convert parts to uppercase here\nwhile (parts != \"X\")\n{   \n    if (parts.substr(1, 2) == \"MP\" )\n    {\n        cout &lt;&lt; \"Mail - Prioity\" &lt;&lt; endl &lt;&lt; endl;\n    }\n    ...\n</code></pre>\n\n<p>Note: though you should comment your code, but to comment obvious things, for example this is start of <code>if</code> (like you cannot get it from code itself) is considered bad practice.</p>\n"}], "owner": {"reputation": 1, "user_id": 9392919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a637e85a4ff99ca35b0b891db72fa11b?s=128&d=identicon&r=PG&f=1", "display_name": "John0121", "link": "https://stackoverflow.com/users/9392919/john0121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1519248645, "creation_date": 1519243343, "question_id": 48914478, "link": "https://stackoverflow.com/questions/48914478/if-statements-with-more-than-one-argument-needing-to-be-true", "title": "If Statements with more than one argument needing to be true?", "body": "<p>I'm taking my first coding class and I've hit a road block. I'm writing a program that will need to pick out the second and third characters in a set of either 4 or 5 characters that gives a corresponding output based off the values it finds.</p>\n\n<p>Here's an example of some of what I have thus far. </p>\n\n<pre><code>include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main()\n{ //start of main function\nsystem(\"cls\");\nstring parts = \" \";\nchar input = ' ';\n\n\ncout &lt;&lt; \"******** Part Number Program ********\" &lt;&lt; endl &lt;&lt; endl;\ncout &lt;&lt; \"Enter the part number (x to end): \";\ngetline(cin, parts);\n\nwhile (parts != \"x\" || parts != \"X\")\n{   //start while\n\n\n\n    if (parts.substr(1, 1) == \"M\" &amp;&amp; parts.substr(2, 1) == \"P\")//start if\n    {\n        cout &lt;&lt; \"Mail - Prioity\" &lt;&lt; endl &lt;&lt; endl;\n    }//end if\n    else if (parts.substr(1, 1) == \"F\" &amp;&amp; parts.substr(2, 1) == \"S\")//start if\n    {\n        cout &lt;&lt; \"FedEx - Standard\" &lt;&lt; endl &lt;&lt; endl;\n    }//end if\n</code></pre>\n\n<p>This works except with the exception of lowercase letters. For example, if I were to enter 7MP7 I'd get the output Mail-Prioity. However, if I enter 7mp7 I'd get my error message. Any suggestion on how I can fix this? </p>\n"}, {"tags": ["c++", "computer-science"], "comments": [{"owner": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "edited": false, "score": 0, "creation_date": 1519243276, "post_id": 48914451, "comment_id": 84835215, "body": "Sorry for the ` multiple times. I am new at Stack Over Flow."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1519244164, "post_id": 48914451, "comment_id": 84835728, "body": "It does not have to.  Doing so is idiomatic in the language, but not doing it (for example, having the return type be <code>void</code> instead) will cause the compiler to emit an error if it is used like <code>a = b = c</code>."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "edited": false, "score": 0, "creation_date": 1519247447, "post_id": 48914944, "comment_id": 84837436, "body": "I undertood your point. So, is it basically unnecessay to return the object reference in this function?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "edited": false, "score": 0, "creation_date": 1519247669, "post_id": 48914944, "comment_id": 84837540, "body": "@MauriceFigueiredo It is only necessary if you want to use the return value. However, for a <code>operator=</code> most people will expect it as it is the standard way of doing it in c++."}, {"owner": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "edited": false, "score": 0, "creation_date": 1519248625, "post_id": 48914944, "comment_id": 84838026, "body": "Great! Now I got it completely."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": true, "score": 0, "last_activity_date": 1519245090, "creation_date": 1519245090, "answer_id": 48914944, "question_id": 48914451, "link": "https://stackoverflow.com/questions/48914451/why-is-returning-an-object-reference-using-this-necessary-in-this-case/48914944#48914944", "title": "Why is returning an object reference using *this necessary in this case?", "body": "<p>Let's say we make two <code>Rational</code> to demonstrate.</p>\n\n<pre><code>Rational r1(1,2), r2(2,3);\n\nr1 = r2;\n</code></pre>\n\n<p>When we do this, first <code>r1</code> will be made equal to <code>r2</code>. Then the operation will return <code>r1</code>. Just like any function call we can choose to ignore the return value if we want.</p>\n\n<p>On the other hand we could also choose to not ignore it.</p>\n\n<pre><code>Rational r1(1,2), r2(2,3), r3;\n\nr3 = (r1 = r2);\n</code></pre>\n\n<p>The parenthesis to emphasize the fact that first <code>r1 = r2</code>, that will return <code>r1</code>. Next <code>r3 = r1</code>.</p>\n\n<p>It is the same principle as if you where using functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint print(int x) {\n    std::cout &lt;&lt; x &lt;&lt; std::endl;\n    return x;\n}\n\nvoid increase(int x) {\n    std::cout &lt;&lt; x + 5 &lt;&lt; std::endl;\n}\n\nint main() {\n    print(5); // We can ignore the return value, and just print the number\n\n    int x = print(7); // We can print the number and store the value in a variable\n\n    increase(print(3));  // We can print the value and pass it on to the increase function\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1519248737, "accepted_answer_id": 48914944, "answer_count": 1, "score": 0, "last_activity_date": 1519245090, "creation_date": 1519243233, "last_edit_date": 1519243364, "question_id": 48914451, "link": "https://stackoverflow.com/questions/48914451/why-is-returning-an-object-reference-using-this-necessary-in-this-case", "closed_reason": "Duplicate", "title": "Why is returning an object reference using *this necessary in this case?", "body": "<p>The course I am taking says that returning this object reference (using *this) is mainly for chaining equal signs (For example: b = d = c = a) However, I cannot understand how this return works while I am overloading the '=' operator.\nIs it also necessary if I am not going to use any kind of chain? How does this return statement works? Thank you very much.</p>\n\n<pre><code>class Rational {\n\n    int _n = 0; // '_n' stands for numerator\n    int _d = 1; // '_d' stands for denominator\n\npublic:\n\n    Rational (int numerator = 0, int denominator = 1) : _n(numerator), _d(denominator) {};\n    Rational (const Rational &amp; rhs) : _n(rhs._n), _d(rhs._dd) {};\n\n    ~Rational ();\n\n    int numerator() const { retrun _n; };\n    int denominator() const { return _d; };\n\n    Rational &amp; operator = (const Rational &amp;);\n    Rational operator + (const Rational &amp;) const;\n    Rational operator - (const Rational &amp;) const;\n    Rational operator * (const Rational &amp;) const;\n    Rational operator / (const Rational &amp;) const;\n};\n\nRational &amp; Rational::operator = (const Rational &amp; rhs) {\n    if(this != &amp;rhs){\n        _n = rhs.numerator();\n        _d = rhs.denominator();\n    }\n    return *this;\n}\n\nRational Rational::operator + (const Rational &amp; rhs) const {\n    return Rational((_n * rhs._d) + (_d * rhs._n), (_d * rhs._d));\n}\n\nRational Rational::operator - (const Rational &amp; rhs) const {\n    return Rational((_n * rhs._d) + (_d * rhs._n), (_d * rhs._d));\n}\n\nRational Rational::operator * (const Rational &amp; rhs) const {\n    return Rational((_n * rhs._n), (_d * rhs._d));\n}\n\nRational Rational::operator / (const Rational &amp; rhs) const {\n    return Rational((_n * rhs._d), (_d * rhs._n));\n}\n\nRational::~Rational(){\n    print(\"dtor: %d/%d\\n\", this-&gt;_n, this-&gt;_d);\n    _n = 0; _d = 1;\n}\n\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; o, const Rational &amp; r){\n    return o &lt;&lt; r.numerator() &lt;&lt; \"/\" &lt;&lt; r.denominator();\n}\n\nint main(int argc, char** argv){\n\n    Rational a = 7;                 // 7/1              \n    cout &lt;&lt; \"a is: \" &lt;&lt; a &lt;&lt; endl;\n    Rational b(5, 3);               // 5/3\n    cout &lt;&lt; \"b is: \" &lt;&lt; b &lt;&lt; endl;\n    Rational c = b;                 // Copy constructor\n    cout &lt;&lt; \"c is: \" &lt;&lt; c &lt;&lt; endl;\n    Rational d;                     // Default constructor\n    cout &lt;&lt; \"d is: \" &lt;&lt; d &lt;&lt; endl;\n    d = c;                          // Assignment constructor\n    cout &lt;&lt; \"d is: \" &lt;&lt; d &lt;&lt; endl;\n    Rational &amp; e = d;               // Reference\n    d = e;                          // Assignment to self!\n    cout &lt;&lt; \"e is: \" &lt;&lt; e &lt;&lt; endl;\n\n    cout &lt;&lt; a &lt;&lt; \" + \" &lt;&lt; b &lt;&lt; \" = \" &lt;&lt; a + b &lt;&lt; endl;\n    cout &lt;&lt; a &lt;&lt; \" - \" &lt;&lt; b &lt;&lt; \" = \" &lt;&lt; a - b &lt;&lt; endl;\n    cout &lt;&lt; a &lt;&lt; \" * \" &lt;&lt; b &lt;&lt; \" = \" &lt;&lt; a * b &lt;&lt; endl;\n    cout &lt;&lt; a &lt;&lt; \" / \" &lt;&lt; b &lt;&lt; \" = \" &lt;&lt; a / b &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1519243338, "post_id": 48914422, "comment_id": 84835251, "body": "How does the other program expect to access the data? Through stdin or command line args?"}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1519243566, "post_id": 48914422, "comment_id": 84835397, "body": "This other program can read from standard input, as you do already in your sample code. Then connect both programs through a pipe."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1519243380, "creation_date": 1519243380, "answer_id": 48914488, "question_id": 48914422, "link": "https://stackoverflow.com/questions/48914422/how-do-i-send-values-to-the-standard-output-stream-and-access-those-values-in-an/48914488#48914488", "title": "How do I send values to the standard output stream and access those values in another program", "body": "<p>Form your post, I take it that you are working in Windows.</p>\n\n<p>You can pipe the output of one program to another program in the Windows CMD shell.</p>\n\n<pre><code>program1.exe | my.bat\n</code></pre>\n\n<p>Of course, you can use absolute paths to any of those.</p>\n"}], "owner": {"reputation": 3, "user_id": 6715698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72549843035b252fe3dd22051d3bf22c?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammerJunkie", "link": "https://stackoverflow.com/users/6715698/programmerjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519243380, "creation_date": 1519243102, "last_edit_date": 1519243136, "question_id": 48914422, "link": "https://stackoverflow.com/questions/48914422/how-do-i-send-values-to-the-standard-output-stream-and-access-those-values-in-an", "title": "How do I send values to the standard output stream and access those values in another program", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n\n{\n\n    string strObservationStation = \"\";\n\n    int intObs1 = 0;\n    int intObs2 = 0;\n    int intObs3 = 0;\n    int intObs4 = 0;\n    int intObs5 = 0;\n\n    double dblW1 = 0;\n    double dblW2 = 0;\n    double dblW3 = 0;\n    double dblW4= 0;\n    double dblW5 = 0;\n\n    cin &gt;&gt; strObservationStation;\n\n    cin &gt;&gt; intObs1;\n    cin &gt;&gt; intObs2;\n    cin &gt;&gt; intObs3;\n    cin &gt;&gt; intObs4;\n    cin &gt;&gt; intObs5;\n\n    cin &gt;&gt; dblW1;\n    cin &gt;&gt; dblW2;\n    cin &gt;&gt; dblW3;\n    cin &gt;&gt; dblW4;\n    cin &gt;&gt; dblW5;\n\n    cout&lt;&lt;intObs1&lt;&lt;endl;\n    cout&lt;&lt;intObs2&lt;&lt;endl;\n    cout&lt;&lt;intObs3&lt;&lt;endl;\n    cout&lt;&lt;intObs4&lt;&lt;endl;\n    cout&lt;&lt;intObs5&lt;&lt;endl;\n\n\n    cout&lt;&lt;dblW1&lt;&lt;endl;\n    cout&lt;&lt;dblW2&lt;&lt;endl;\n    cout&lt;&lt;dblW3&lt;&lt;endl;\n    cout&lt;&lt;dblW4&lt;&lt;endl;\n    cout&lt;&lt;dblW5&lt;&lt;endl;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>and then in my other program I want to access these values and do calculations ... Please help\nThis is a basic program\nI also need to link this program to another by using a .bat file</p>\n"}, {"tags": ["c++", "variadic-templates", "c++17", "fold-expression"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1519242605, "post_id": 48914265, "comment_id": 84834841, "body": "What is <code>t</code>? Do you just want <code>n</code> copies of <code>t</code>?"}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519243095, "post_id": 48914265, "comment_id": 84835107, "body": "@Justin Yes, exactly. Say n is 5 I want an argument list composed of <code>SmoothStart_helper(t,t,t,t,t)</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1519243198, "post_id": 48914265, "comment_id": 84835166, "body": "The problem I see is that <code>n</code> is a run time value but, for this sort of solutions, you need to know it compile time. If you can make <code>n</code> a template <code>std::size_t</code> value, all goes simpler."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519253099, "post_id": 48914265, "comment_id": 84840012, "body": "You might rename <code>SmoothStart</code> to <code>Power&lt;std::size_t N, typename T&gt;(const T&amp;t)</code>."}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519746312, "post_id": 48914265, "comment_id": 85029814, "body": "@Jarod42 SmoothStart is part of the easing function family (smoothstep is also one), the domain is different from Power and it would be misleading to call it Power."}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 3, "last_activity_date": 1519253649, "last_edit_date": 1519253649, "creation_date": 1519243612, "answer_id": 48914549, "question_id": 48914265, "link": "https://stackoverflow.com/questions/48914265/create-recursive-function-argument-list-from-one-value-and-a-size/48914549#48914549", "title": "Create recursive function argument list from one value and a size", "body": "<p>First off, <code>n</code> must be known at compile-time if you want to use a fold expression. If you move that to a template parameter, the easiest way to get a parameter pack of a size <code>N</code> is with <a href=\"http://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\"><code>std::make_index_sequence</code></a>:</p>\n\n<pre><code>// The helper has to be first so that the compiler can find SmoothStart_helper().\ntemplate&lt;typename T, std::size_t... Is&gt;\nT SmoothStart_helper(const T&amp; t, std::index_sequence&lt;Is...&gt;) {\n    // You were taking t by value here; I think you might want to still\n    // take it by reference\n\n    // Use the comma operator to simply discard the current index and instead\n    // yield t. The cast to void is to silence a compiler warning about\n    // Is being unused\n    return (((void) Is, t) * ...);\n}\n\ntemplate&lt;std::size_t N, typename T&gt;\nT SmoothStart(const T&amp; t) {\n    // std::size_t is unsigned, so no need to check for N &gt;= 0.\n    // We also don't need to special case when N == 1. The fold\n    // expression handles that case and just returns t\n    return SmoothStart_helper(t, std::make_index_sequence&lt;N&gt;{});\n}\n</code></pre>\n\n<p>You can then use it like so: <code>SmoothStart&lt;N&gt;(myThing);</code>.</p>\n\n<p><a href=\"https://godbolt.org/g/HQw9Lo\" rel=\"nofollow noreferrer\">Godbolt</a></p>\n"}], "owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 48914549, "answer_count": 1, "score": 2, "last_activity_date": 1519253649, "creation_date": 1519242526, "question_id": 48914265, "link": "https://stackoverflow.com/questions/48914265/create-recursive-function-argument-list-from-one-value-and-a-size", "title": "Create recursive function argument list from one value and a size", "body": "<p>My intent is to create a function argument list of size n so I can pass it to a helper that uses a fold expression to recursively multiply the values together.</p>\n\n<p>I'm a little stuck on how to make the argument list to pass to the helper.\nIs there a way to create a function argument list without a pack expression?\nPerhaps by creating an array or tuple?</p>\n\n<p>Here's what I've come up with so far.</p>\n\n<pre><code>template&lt;typename T, typename N&gt;\nT SmoothStart(const T&amp; t, const N&amp; n) {\n    static_assert(std::is_integral_v&lt;N&gt;, \"templatized SmoothStart requires type of N to be integral.\");\n    static_assert(n &gt;= 0, \"templatized SmoothStart requires value of N to be non-negative.\");\n\n    if constexpr (n == 0) {\n        return 1;\n    }\n    if constexpr (n == 1) {\n        return t;\n    }\n    return SmoothStart_helper((t, ...)); //&lt;-- obviously this doesn't work but it would be awesome to have!\n}\n\ntemplate&lt;typename T, typename... Args&gt;\nT SmoothStart_helper(Args&amp;&amp;... args) {\n    return (args * ...);\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "security", "dll"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1519246357, "post_id": 48914172, "comment_id": 84836908, "body": "Hook <code>LoadLibrary</code> so that <code>dangerous.dll</code> is never loaded. Hook <code>GetProcAddress</code> so that it never loads any functions from <code>dangerous.dll</code> by returning null."}, {"owner": {"reputation": 4574, "user_id": 384670, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/560403b5eee12ac22a7a83c478ba0483?s=128&d=identicon&r=PG", "display_name": "M Katz", "link": "https://stackoverflow.com/users/384670/m-katz"}, "reply_to_user": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1519336627, "post_id": 48914172, "comment_id": 84882739, "body": "@Brandon, no functions in dangerous.dll are being called. I just don&#39;t want dangerous.dll to have to be shipped with my application."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1519242377, "creation_date": 1519242377, "answer_id": 48914225, "question_id": 48914172, "link": "https://stackoverflow.com/questions/48914172/create-no-op-version-of-a-dll/48914225#48914225", "title": "create &quot;no-op&quot; version of a dll?", "body": "<p>If you have the source for d.dll, then just fix it to not load/use dangerous.dll.</p>\n\n<p>If you don't have the source, just build a dangerous.dll with stub implementations for all exported functions.</p>\n\n<p>Case closed. Move on and spend your time on more productive stuff.</p>\n"}], "owner": {"reputation": 4574, "user_id": 384670, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/560403b5eee12ac22a7a83c478ba0483?s=128&d=identicon&r=PG", "display_name": "M Katz", "link": "https://stackoverflow.com/users/384670/m-katz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519242377, "creation_date": 1519242148, "question_id": 48914172, "link": "https://stackoverflow.com/questions/48914172/create-no-op-version-of-a-dll", "title": "create &quot;no-op&quot; version of a dll?", "body": "<p>Suppose I have an application app.exe which does a load-time link to d.dll, which in turn does a load-time link to dangerous.dll. Suppose that dangerous.dll is considered to have various security vulnerabilities. Suppose also that none of the functionality in dangerous.dll is needed by app.exe, and app.exe does not make any calls to d.dll that require it to use any functions in dangerous.dll.</p>\n\n<p>I want to distribute the app without dangerous.dll, and ideally with minimal or no modifications to app.exe or d.dll. If I just remove dangerous.dll, I get a loading error when starting app.exe because it loads d.ll and d.dll tries to load dangerous.dll, which fails.</p>\n\n<p><strong>Option 1</strong></p>\n\n<p>I could make a \"no-op\" version of dangerous.dll, that provided all the same export function signatures as dangerous.dll, but had no-op code for all the exported functions themselves. That might not be too bad. I wonder if there already exists a tool that can take a .dll file and output another .dll file that has the same export functions, but ones that do nothing? This has the disadvantage that my no-op version of dangerous.dll would still be visible to the user, and it would look like my application still has the vulnerabilities in dangerous.dll.</p>\n\n<p><strong>Option 2</strong></p>\n\n<p>I wonder if there is some way, without building d.dll from source, I could hack d.dll so that it does not attempt a load-time load of dangerous.dll. It would be okay if this caused any calls from d.dll to a dangerous.dll function to fail/crash, since as I say app.exe should not cause d.ll to use any of the functions in dangerous.dll.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "warnings", "unique-ptr", "signedness"], "answers": [{"comments": [{"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1519245976, "post_id": 48914852, "comment_id": 84836698, "body": "Wow, that&#39;s a comprehensive answer, thank you very much. I tried it with your <code>custom_make_unique()</code>, but it still doesn&#39;t issue a warning (even when also copy and paste a <code>custom_forward</code> and <code>custom_remove_reference</code> into my own code). At least I now have an idea what to look for."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "reply_to_user": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1519246741, "post_id": 48914852, "comment_id": 84837085, "body": "Hm. It&#39;s possible that VisualStudio, in general, only manages to warn in cases where it can deduce that there <i>will</i> be a sign conversion problem. In my GCC example above, the compiler is only able to deduce that there <i>may</i> be a problem (depending on the values you later feed into <code>custom_make_unique</code>). So maybe you are running into a Visual Studio limitation as well."}, {"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1519246748, "post_id": 48914852, "comment_id": 84837089, "body": "Indeed, the <code>memory</code> header temporarily reduces the warning level to 3 with a <code>#pragma warning(push,3)</code>, which would explain the missing warning. Nevertheless, it does not explain why the <code>custom_make_unique()</code> also does not work."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "reply_to_user": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1519248502, "post_id": 48914852, "comment_id": 84837963, "body": "Thanks for checking. I updated my answer (luckily rextester.com provides a VC++ compiler)."}], "tags": [], "owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "is_accepted": true, "score": 1, "last_activity_date": 1519285801, "last_edit_date": 1519285801, "creation_date": 1519244731, "answer_id": 48914852, "question_id": 48914144, "link": "https://stackoverflow.com/questions/48914144/visual-studio-2015-no-signed-unsigned-mismatch-warning-in-stdmake-unique/48914852#48914852", "title": "Visual Studio 2015: No signed/unsigned mismatch warning in std::make_unique?", "body": "<p>You are seeing a combination of several effects.</p>\n\n<ol>\n<li>The call in your <code>main()</code> is perfectly legitimate because the <code>make_unique</code>\ntemplate instantiation matches the signed data type you feed it.</li>\n<li>The implementation of <code>make_unique</code> does not generate a warning because\nwarnings are typically disabled inside system headers.</li>\n<li>Visual Studio seems to be unable to detect the <em>potential</em> (but not\n<em>definite</em>) sign conversion issue inside <code>make_unique</code>.</li>\n</ol>\n\n<p>In more detail:</p>\n\n<h2>1. The template instantiation is actually legitimate.</h2>\n\n<p>A typical implementation of <code>std::make_unique</code> looks like this (compare\n<a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\">cppreference</a>):</p>\n\n<pre><code>template &lt;typename T, typename... Args&gt;\ninline std::unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;... args)\n{\n  return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n}\n</code></pre>\n\n<p>In your case, as you call <code>std::make_unique&lt;MyClass&gt;(-1)</code>, the template is\ninstantiated for a <em>signed</em> integer.  Hence, you do not get a warning in your\ncode because no unsigned/signed conversion happens.</p>\n\n<h2>2. System headers typically disable warnings.</h2>\n\n<p><strong>However</strong>, you <em>could</em> rightfully expect a warning from the <code>make_unique</code>\nimplementation.  After all, when <code>new T(...)</code> is called with your signed\nparameter, a signed/unsigned conversion still happens.  As a case in point, take\nthe following program:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass MyClass\n{\npublic:\n  MyClass(unsigned) { }\n};\n\ntemplate &lt;typename T, typename... Args&gt;\ninline std::unique_ptr&lt;T&gt; custom_make_unique(Args&amp;&amp;... args)\n{\n  return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n}\n\nint main()\n{\n  auto uniqueP = custom_make_unique&lt;MyClass&gt;(-1);\n  (void) uniqueP;\n  return 0;\n}\n</code></pre>\n\n<p>When I compile this using GCC with <code>-Wsign-conversion</code>, I get the warning</p>\n\n<blockquote>\n  <p>test.cpp: In instantiation of 'std::unique_ptr&lt;_Tp> custom_make_unique(Args&amp;&amp; ...) [with T = MyClass; Args = {int}]':<br>\n  test.cpp:17:48:   required from here<br>\n  test.cpp:12:63: warning: conversion to 'unsigned int' from 'int' may change the sign of the result [-Wsign-conversion]<br>\n    return std::unique_ptr(new T(std::forward(args)...));</p>\n</blockquote>\n\n<p>So the question is, why do you not get this warning for the <code>std::make_unique()</code>\nimplementation?  The answer is essentially that the compiler silences these\nwarnings for its system headers.  For example, the GCC version of the <code>&lt;memory&gt;</code>\nheader contains the pragma</p>\n\n<pre><code>#pragma GCC system_header\n</code></pre>\n\n<p>As soon as this pragma is present in a header file, the compiler no longer\nreports the warnings for everything inside that header.  From\nthe <a href=\"https://gcc.gnu.org/onlinedocs/cpp/System-Headers.html\" rel=\"nofollow noreferrer\">GCC documentation</a>:</p>\n\n<blockquote>\n  <p>The header files declaring interfaces to the operating system and runtime\n  libraries often cannot be written in strictly conforming C.  Therefore, GCC\n  gives code found in system headers special treatment. All warnings, other than\n  those generated by \u2018<code>#warning</code>\u2019 (see Diagnostics), are suppressed while GCC is\n  processing a system header.</p>\n</blockquote>\n\n<p>See also\n<a href=\"https://stackoverflow.com/questions/1478092/c-pragma-gcc-system-header-directive\">this SO post</a> for\nmore details.  Presumably a similar approach is taken by Visual Studio's\ncompiler (and as you wrote in your comment, the header temporarily reduces the\nwarning level).</p>\n\n<h2>3. Looks like you are encountering a VisualStudio limitation.</h2>\n\n<p>In the case of VisualStudio, there is also something else at work.  Note how the\nGCC warning above says that there <em>may</em> be a sign conversion problem (depending\non what values users will <em>later</em> feed into <code>custom_make_unique</code>).  It appears\nthat VisualStudio can only warn if there is a <em>definite</em> sign conversion issue.\nSee the following program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f(unsigned) { }\n\ntemplate &lt;typename T&gt;\nvoid g(T val) { f(val); } // GCC issues a warning, VS does NOT\n\nint main()\n{\n  f(-1); // GCC and VS issue a warning\n  g(-1); // no conversion warning here (g&lt;int&gt; instantiated)\n}\n</code></pre>\n\n<p><a href=\"http://rextester.com/FSFYW87911\" rel=\"nofollow noreferrer\">Try it online.</a></p>\n"}], "owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 48914852, "answer_count": 1, "score": 2, "last_activity_date": 1519285801, "creation_date": 1519242029, "last_edit_date": 1519242425, "question_id": 48914144, "link": "https://stackoverflow.com/questions/48914144/visual-studio-2015-no-signed-unsigned-mismatch-warning-in-stdmake-unique", "title": "Visual Studio 2015: No signed/unsigned mismatch warning in std::make_unique?", "body": "<p>I just found a bug in my code and I am pretty baffled that it could happen, since it is a simple signed/unsigned mismatch - which should not happen at all, because I am compiling with warning level 4, warnings as errors. So I tried to reproduce it, which is pretty simple:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass MyClass {\npublic:\n    MyClass( unsigned ) {}\n};\nint main()\n{\n    MyClass* rawP = new MyClass(-1);                // issues a warning, as expected\n    auto uniqueP = std::make_unique&lt;MyClass&gt;(-1);   // NO WARNING??!\n\n    // silence the compiler\n    rawP; \n    uniqueP;\n\n    return 0;\n}\n</code></pre>\n\n<p>Now I'm asking myself: What's the reason of this? Is it a bug in VS, or is it a general shortcoming of std::make_unique? Is there any way to fix it? (Visual Studio 2015 Community Update 3)</p>\n"}, {"tags": ["c++", "class", "namespaces"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1519240706, "post_id": 48913775, "comment_id": 84833821, "body": "You use the guard <code>DY_H</code> in two different files. Including one of those files will prevent the other from being included."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1519240850, "post_id": 48913775, "comment_id": 84833896, "body": "You can change <code>dy.hpp</code>&#39;s guard to <code>DY_HPP</code>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1519240857, "post_id": 48913775, "comment_id": 84833899, "body": "This is why I use <code>#pragma once</code>; I&#39;ve been bit by forgetting to change header guards more than once, and all the compilers I care about support it"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1519240904, "post_id": 48913775, "comment_id": 84833922, "body": "If you want to use a <code>#define</code> guard, then you should consider a naming like <code>&lt;PROJECT&gt;_&lt;PATH&gt;_&lt;FILE&gt;_H_</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1519240929, "post_id": 48913775, "comment_id": 84833941, "body": "@Justin: not all C++ compilers support <code>#pragma once</code>, though"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1519241044, "post_id": 48913775, "comment_id": 84834002, "body": "@Justin <a href=\"https://stackoverflow.com/questions/1143936/pragma-once-vs-include-guards/34884735#34884735\">Not everyone agrees with using <code>#pragma once</code></a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519241101, "post_id": 48913775, "comment_id": 84834031, "body": "@Fran&#231;oisAndrieux I never said that everyone agrees. I&#39;m merely remarking that the OP could consider using it. It&#39;s not fit for every purpose / company, but it&#39;s a decision that has to be made (whether to use <code>#pragma once</code> or header guards)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519241226, "post_id": 48913775, "comment_id": 84834093, "body": "@Justin I guess I misread your comment. I had the impression that it was advocating that <code>#pragma once</code> was the superior solution, but on a second read it seems reasonable."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519241272, "post_id": 48913775, "comment_id": 84834115, "body": "@Fran&#231;oisAndrieux Sorry about that; on a second read I could see that the comment might seem like I was advocating. <i>Natural language</i> is so ambiguous"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519241377, "post_id": 48913775, "comment_id": 84834161, "body": "@Justin I think better solution is to have proper IDE or editor that generates guards properly"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519241419, "post_id": 48913775, "comment_id": 84834184, "body": "@Slava It&#39;s a good solution, but I still forget because I copy-paste a header to create a new header that&#39;s similar, but forget to change the guard. If I worked at a company that required me to use header guards, though, that&#39;s absolutely what I&#39;d do, and just suck it up and deal with it."}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 1338667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c6c97eb8a07daf93f2415c6080bd47?s=128&d=identicon&r=PG", "display_name": "nVxx", "link": "https://stackoverflow.com/users/1338667/nvxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1519316165, "creation_date": 1519316165, "answer_id": 48932234, "question_id": 48913775, "link": "https://stackoverflow.com/questions/48913775/trying-to-put-two-classes-in-separate-files-in-the-same-namespace-but-only-the/48932234#48932234", "title": "Trying to put two classes in separate files in the same namespace, but only the first #included class works", "body": "<p>That is because both dayyear.hpp and dy.hpp have:</p>\n\n<pre><code>#ifndef DY_H\n#define DY_H\n.....\n#endif\n</code></pre>\n\n<p>dayyear.hpp should have:</p>\n\n<pre><code>#ifndef DAYYEAR_H\n#define DAYYEAR_H\n.....\n#endif\n</code></pre>\n\n<p>The preprocessor only regards the first appearance of the same <code>#infdef/#define/#endif</code> construct, all the subsequent ones are replaced with empty code.  That is why the order of <code>#include</code> statements matters.</p>\n"}], "owner": {"reputation": 23, "user_id": 9362203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534dad4ec3e845547d0b44c4d391ff77?s=128&d=identicon&r=PG&f=1", "display_name": "Frajaro", "link": "https://stackoverflow.com/users/9362203/frajaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 48932234, "answer_count": 1, "score": 1, "last_activity_date": 1519316165, "creation_date": 1519240658, "last_edit_date": 1519241229, "question_id": 48913775, "link": "https://stackoverflow.com/questions/48913775/trying-to-put-two-classes-in-separate-files-in-the-same-namespace-but-only-the", "title": "Trying to put two classes in separate files in the same namespace, but only the first #included class works", "body": "<p>In C++, I am trying to put two classes in separate files into the same namespace.</p>\n\n<p>I get two errors in <code>main</code> saying that the class <code>Head</code> is not in the namespace <code>Names</code>, and that <code>days</code> is not declared in this scope.</p>\n\n<p>It seems that when I switch the order of the <code>#include</code> statements, the class that doesn't work flip flops between the two. From what I've read, the namespace should open again when the second file is included, and put the second class into the namespace, but it isn't working.</p>\n\n<p>Why does the order of which one I include matter as to which works? What can I do to make both classes be a part of the same namespace, while keeping them in separate header files?</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"dy.hpp\"\n#include \"dayyear.hpp\"\n\nint main(){\n   int d=2;\n   int y=5;\n   Names::Dy yup(y,d);\n   Names::Head days(y,d);\n   days.print();\n   yup.print();\n   return 0;  \n}\n</code></pre>\n\n<p>dayyear.hpp</p>\n\n<pre><code>#ifndef DY_H\n#define DY_H\n\nnamespace Names{\n   class Head{\n      int year;\n      int day;\n   public:\n      Head();\n      Head(int y, int d);\n      void print();\n      void change(int y, int d);\n   };\n}\n#endif\n</code></pre>\n\n<p>dayyear.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"dayyear.hpp\"\n\nNames::Head::Head(){\n   day=0;\n   year=0;  \n}\n\nNames::Head::Head(int y, int d){\n   day=d;\n   year=y;  \n}\n\nvoid Names::Head::print(){\n   std::cout&lt;&lt;day&lt;&lt;\", \"&lt;&lt;year&lt;&lt;std::endl;\n}\n\nvoid Names::Head::change(int y, int d){\n   year=y;\n   day=d;  \n}\n</code></pre>\n\n<p>dy.hpp</p>\n\n<pre><code>#ifndef DY_H\n#define DY_H\n\nnamespace Names{\n   class Dy{\n      int year;\n      int day;\n   public:\n      Dy();\n      Dy(int y, int d);\n      void print();\n      void change(int y, int d);\n   };\n}\n#endif\n</code></pre>\n\n<p>dy.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"dy.hpp\"\n\nNames::Dy::Dy(){\n   day=0;\n   year=0;  \n}\n\nNames::Dy::Dy(int y, int d){\n   day=d;\n   year=y;  \n}\n\nvoid Names::Dy::print(){\n   std::cout&lt;&lt;day&lt;&lt;\", \"&lt;&lt;year&lt;&lt;std::endl;\n}\n\nvoid Names::Dy::change(int y, int d){\n   year=y;\n   day=d;  \n}\n</code></pre>\n"}, {"tags": ["javascript", "c++", "websocket"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519239347, "post_id": 48913283, "comment_id": 84833139, "body": "Recommend rewording this question. Currently it reads as a request for an offsite tutorial, and such requests are off topic for Stack Overflow."}], "answers": [{"tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 2, "last_activity_date": 1519240632, "creation_date": 1519240632, "answer_id": 48913764, "question_id": 48913283, "link": "https://stackoverflow.com/questions/48913283/is-it-possible-to-connect-to-node-js-websocket-server-with-c-client/48913764#48913764", "title": "Is it possible to connect to node. js websocket server with c++ client", "body": "<p>Yes, it is possible, WebSocket is a  standardized protocol by the IETF. You just need a WebSocket Library for c++.</p>\n\n<p>For example:\n<a href=\"https://stackoverflow.com/questions/34423092/websocket-library\">WebSocket Library</a></p>\n"}], "owner": {"reputation": 129, "user_id": 9392630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6cf2504cb25184a357c8d54d42523f?s=128&d=identicon&r=PG&f=1", "display_name": "SayMyName", "link": "https://stackoverflow.com/users/9392630/saymyname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1405, "favorite_count": 0, "closed_date": 1519251348, "answer_count": 1, "score": 1, "last_activity_date": 1519240632, "creation_date": 1519238771, "last_edit_date": 1519240341, "question_id": 48913283, "link": "https://stackoverflow.com/questions/48913283/is-it-possible-to-connect-to-node-js-websocket-server-with-c-client", "closed_reason": "Not suitable for this site", "title": "Is it possible to connect to node. js websocket server with c++ client", "body": "<p>I have created websocket server and client with help of following link. </p>\n\n<p><a href=\"https://github.com/websockets/ws\" rel=\"nofollow noreferrer\">https://github.com/websockets/ws</a> </p>\n\n<p>It works fine but I also would like to connect to my node.js server with c++ client. Is it possible ?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519238520, "post_id": 48913141, "comment_id": 84832724, "body": "@drescherjm Because the project follows that pattern, as explained here: <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file/495056#495056\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1519238532, "post_id": 48913141, "comment_id": 84832732, "body": "Include the cpp as you&#39;re doing but don&#39;t compile it. I would also suggest using another extension (since it doesn&#39;t really mater) .inc or .inl are good."}, {"owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1519238594, "post_id": 48913141, "comment_id": 84832762, "body": "@Aram Yeah, actually I call them .tcpp, but didn&#39;t want to confuse too much here. What do you mean, don&#39;t compile it?"}, {"owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519238697, "post_id": 48913141, "comment_id": 84832819, "body": "@drescherjm I was hoping for a different answer, but if that&#39;s how it is then I&#39;ll have to do with that."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519239028, "post_id": 48913141, "comment_id": 84832983, "body": "Now with the edits, I assume in this case <code>.tcpp</code> files are not being compiled in your project the same way a <code>.cpp</code> file would be. Did you implement <code>foo()</code> in a <code>.cpp</code> file and not your <code>.tcpp</code> file?"}, {"owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519239110, "post_id": 48913141, "comment_id": 84833026, "body": "@drescherjm No, all the definitions are in the .tcpp file. Now I see what you meant with not compiling it."}], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "is_accepted": false, "score": 0, "last_activity_date": 1519240367, "creation_date": 1519240367, "answer_id": 48913696, "question_id": 48913141, "link": "https://stackoverflow.com/questions/48913141/implement-template-member-of-non-template-class-in-cpp-file/48913696#48913696", "title": "Implement template member of non-template class in cpp file", "body": "<p>I found the solution, it is not as nice as I would like, but it will do in my case. We can insert the following line at the end of the tcpp file:</p>\n\n<pre><code>template void A::bar&lt;int&gt;( int );\n// And so on, for all types that should be supported.\n</code></pre>\n\n<p>It is called <a href=\"https://msdn.microsoft.com/en-us/library/7k8twfx7.aspx\" rel=\"nofollow noreferrer\">function template instantiation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "edited": false, "score": 0, "creation_date": 1519240604, "post_id": 48913716, "comment_id": 84833765, "body": "Perfect, that&#39;s even better (in my case) than the solution I just came up with! Thanks a lot!"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1519240788, "last_edit_date": 1519240788, "creation_date": 1519240448, "answer_id": 48913716, "question_id": 48913141, "link": "https://stackoverflow.com/questions/48913141/implement-template-member-of-non-template-class-in-cpp-file/48913716#48913716", "title": "Implement template member of non-template class in cpp file", "body": "<p>If you are going to split a a class that has template functions and non template functions into a header file and a tcpp file then you only put the template definitions in the tcpp file.  The non template definitions still needs to go into a regular cpp file.</p>\n\n<p>Putting the non template code in the tcpp file includes it back into the header file and then that means it gets defined in every translation unit it gets included into.</p>\n\n<p>In this case that means you should have</p>\n\n<pre><code>// A.h\nclass A\n{\n    void foo();\n    template &lt;class T&gt; void bar( T someVar );\n}\n\n#include \"A.tcpp\"\n\n// A.tcpp\ntemplate &lt;class T&gt; void A::bar( T someVar ) { some code; }\n\n// A.cpp\n#include \"A.h\"\n\nvoid A::foo() { some code; }\n</code></pre>\n"}], "owner": {"reputation": 2095, "user_id": 2150270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N20nN.png?s=128&g=1", "display_name": "Lukas Kalinski", "link": "https://stackoverflow.com/users/2150270/lukas-kalinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48913716, "answer_count": 2, "score": 0, "last_activity_date": 1519241258, "creation_date": 1519238210, "last_edit_date": 1519241258, "question_id": 48913141, "link": "https://stackoverflow.com/questions/48913141/implement-template-member-of-non-template-class-in-cpp-file", "title": "Implement template member of non-template class in cpp file", "body": "<p>I have a class:</p>\n\n<pre><code>// A.h\nclass A\n{\n    void foo();\n    template &lt;class T&gt; void bar( T someVar );\n}\n\n#include \"A.tcpp\"\n</code></pre>\n\n<p>When I build it, I get linker errors. However, if the whole class would be a template, then the above example would build perfectly fine. So my question is:</p>\n\n<p>How do I stick to the pattern of having ALL definitions in the cpp file, when having template member functions as opposed to having a template class?</p>\n"}, {"tags": ["c++", "for-loop", "c++17", "template-meta-programming", "if-constexpr"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1519238197, "post_id": 48913092, "comment_id": 84832535, "body": "I see no <code>if constexpr</code> in your code.."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519238254, "post_id": 48913092, "comment_id": 84832562, "body": "@JesperJuhl Ugh, thanks, I meant to give an example of how I&#39;d like to use a <code>for constexpr</code>"}, {"owner": {"reputation": 336, "user_id": 8946639, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_cNeTwyyu4o/AAAAAAAAAAI/AAAAAAAAAWs/Hwm-tsh_j-c/photo.jpg?sz=128", "display_name": "Sebi", "link": "https://stackoverflow.com/users/8946639/sebi"}, "edited": false, "score": 0, "creation_date": 1519239087, "post_id": 48913092, "comment_id": 84833014, "body": "<a href=\"https://stackoverflow.com/questions/45758545/unroll-loop-at-compile-time\" title=\"unroll loop at compile time\">stackoverflow.com/questions/45758545/&hellip;</a> <a href=\"https://stackoverflow.com/questions/6872919/compile-time-loops\">stackoverflow.com/questions/6872919/compile-time-loops</a>  Does the answers of those questions help you, or do you want to use explicitly the for statement for looping?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1519239534, "post_id": 48913092, "comment_id": 84833225, "body": "No, there is no <code>for constexpr</code>. I saw <a href=\"https://groups.google.com/a/isocpp.org/forum/#!topic/std-proposals/A9Swn2Ub2qg\" rel=\"nofollow noreferrer\">this discussion over it over on the std-proposals google group</a>, though"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 6, "last_activity_date": 1519239293, "creation_date": 1519239293, "answer_id": 48913408, "question_id": 48913092, "link": "https://stackoverflow.com/questions/48913092/constexpr-in-for-statement/48913408#48913408", "title": "constexpr in for-Statement", "body": "<p>If loop limits are known to the compiler, compiler will unroll the loop, if it will find it beneficial. Not all loop unrolls are beneficial! And it is unlikely you will make a better decision than compiler as to benefits of loop unrolling.</p>\n\n<p>There is no need for <code>constexpr for</code> (as you put it), since <code>constexpr if</code> is enabling feature - you may put code which would make program ill-formed inside <code>constexpr if</code> false branch - it is not pure optimization.</p>\n\n<p><code>Constexpr for</code>, on the other hand, would be pure optimization (at least as you describe it, not counting the fringe case of loop executed 0 times) and as such is better left to 'as-if' optimization rules.</p>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1519240021, "post_id": 48913442, "comment_id": 84833467, "body": "Well... I wasn&#39;t really looking for a way to improve my toy example, but good gracious, this is fascinating. If you can explain what <code>unused</code> is doing here it&#39;s worth a +1 from me."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1519240607, "post_id": 48913442, "comment_id": 84833771, "body": "@JonathanMee - In the meaning I&#39;ve added a C++17 simplification. Anyway... <code>unused</code> is simply a C-style array that is declared only to be initialized with zeros. But using the power of the comma operator, you can add the <code>std::cout</code> part <b>before</b> the comma so <code>std::cout</code> is executed but doesn&#39;t affect the values of the array. In other words, <code>unused</code> is just a trick to provide an environment where to unpack the <code>Is...</code> values."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 9, "last_activity_date": 1519240738, "last_edit_date": 1519240738, "creation_date": 1519239432, "answer_id": 48913442, "question_id": 48913092, "link": "https://stackoverflow.com/questions/48913092/constexpr-in-for-statement/48913442#48913442", "title": "constexpr in for-Statement", "body": "<blockquote>\n  <p>Is there a way to use this in a for-statement as well? To unroll a loop at compile time? Id like to be able to do something like this</p>\n</blockquote>\n\n<p>I don't think in a so simple way.</p>\n\n<p>But if you can afford an helper function, with <code>std::integer_sequence</code> and the initialization of an unused C-style array of integers, starting from C++14 you can do something as follows</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;int ... Is&gt;\nvoid foo_helper (std::integer_sequence&lt;int, Is...&gt; const &amp;)\n {\n   using unused = int[];\n\n   (void)unused { 0, (std::cout &lt;&lt; Is &lt;&lt; std::endl, 0)... };\n }\n\ntemplate &lt;int T&gt;\nvoid foo ()\n { foo_helper(std::make_integer_sequence&lt;int, T&gt;{}); }\n\nint main ()\n {\n   foo&lt;42&gt;();\n }\n</code></pre>\n\n<p>If you can use C++17, you can avoid the <code>unused</code> array and, using folding, <code>foo_helper()</code> can be simply written as follows</p>\n\n<pre><code>template &lt;int ... Is&gt;\nvoid foo_helper (std::integer_sequence&lt;int, Is...&gt; const &amp;)\n { ((std::cout &lt;&lt; Is &lt;&lt; std::endl), ...); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1519247302, "last_edit_date": 1519247302, "creation_date": 1519242691, "answer_id": 48914319, "question_id": 48913092, "link": "https://stackoverflow.com/questions/48913092/constexpr-in-for-statement/48914319#48914319", "title": "constexpr in for-Statement", "body": "<p>Not without helper code.</p>\n\n<pre><code>#define RETURNS(...) \\\n  noexcept(noexcept(__VA_ARGS__)) \\\n  -&gt; decltype(__VA_ARGS__) \\\n  { return __VA_ARGS__; }\n\ntemplate&lt;std::size_t I&gt;\nusing index_t = std::integral_constant&lt;std::size_t, I&gt;;\n\ntemplate&lt;std::size_t...Is&gt;\nconstexpr auto index_over( std::index_sequence&lt;Is...&gt; ) noexcept(true) {\n  return [](auto&amp;&amp; f)\n    RETURNS( decltype(f)(f)( index_t&lt;Is&gt;{}... ) );\n}\ntemplate&lt;std::size_t N&gt;\nconstexpr auto index_upto( index_t&lt;N&gt; ={} ) noexcept(true) {\n  return index_over( std::make_index_sequence&lt;N&gt;{} );\n}\n\ntemplate&lt;class F&gt;\nconstexpr auto foreacher( F&amp;&amp; f ) {\n  return [&amp;f](auto&amp;&amp;...args) noexcept( noexcept(f(args))&amp;&amp;... ) {\n    ((void)(f(args)),...);\n  };\n}\n</code></pre>\n\n<p>that is our plumbing.</p>\n\n<pre><code>template&lt;int T&gt;\nvoid foo() {\n  index_upto&lt;T&gt;()(\n    foreacher([](auto I){\n      std::cout &lt;&lt; I &lt;&lt; \"\\n\";\n    })\n  );\n}\n</code></pre>\n\n<p>a compile time loop with values on each step.</p>\n\n<p>Or we can hide the details:</p>\n\n<pre><code>template&lt;std::size_t start, std::size_t length, std::size_t step=1, class F&gt;\nconstexpr void for_each( F&amp;&amp; f, index_t&lt;start&gt; ={}, index_t&lt;length&gt; ={}, index_t&lt;step&gt; ={} ) {\n  index_upto&lt;length/step&gt;()(\n    foreacher([&amp;](auto I){\n      f( index_t&lt;(I*step)+start&gt;{} );\n    })\n  );\n}\n</code></pre>\n\n<p>then we'd get:</p>\n\n<pre><code>for_each&lt;0, T&gt;([](auto I) {\n  std::cout &lt;&lt; I &lt;&lt; \"\\n\";\n});\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for_each([](auto I) {\n  std::cout &lt;&lt; I &lt;&lt; \"\\n\";\n}, index_t&lt;0&gt;{}, index_t&lt;T&gt;{});\n</code></pre>\n\n<p>this can be further improved with user defined literals and template variables:</p>\n\n<pre><code>template&lt;std::size_t I&gt;\nconstexpr index_t&lt;I&gt; index{};\n\ntemplate&lt;char...cs&gt;\nconstexpr auto operator\"\"_idx() {\n  return index&lt; parse_value(cs...) &gt;;\n}\n</code></pre>\n\n<p>where <code>parse_value</code> is a <code>constexpr</code> function that takes a sequence of <code>char...</code> and produces an unsigned integer representation of it.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3457, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1519247302, "creation_date": 1519238046, "last_edit_date": 1519242444, "question_id": 48913092, "link": "https://stackoverflow.com/questions/48913092/constexpr-in-for-statement", "title": "constexpr in for-Statement", "body": "<p><a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> provides <a href=\"http://en.cppreference.com/w/cpp/language/if#Constexpr_If\" rel=\"noreferrer\"><code>if constexpr</code></a>, in which:</p>\n\n<blockquote>\n  <p>the value of condition must be a contextually converted constant expression of type <code>bool</code>. If the value is <code>true</code>, then statement-false is discarded (if present), otherwise, statement-true is discarded</p>\n</blockquote>\n\n<p>Is there a way to use this in a <code>for</code>-statement as well? To unroll a loop at compile time? Id like to be able to do something like this:</p>\n\n<pre><code>template &lt;int T&gt;\nvoid foo() {\n   for constexpr (auto i = 0; i &lt; T; ++i) cout &lt;&lt; i &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519238127, "post_id": 48913048, "comment_id": 84832503, "body": "I think a map of maps would make <code>convertTo</code> much simpler, don&#39;t you?"}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519238162, "post_id": 48913048, "comment_id": 84832517, "body": "It was the next step because this issue was stopping me, I thought that there were an error in the map code!"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519238314, "post_id": 48913048, "comment_id": 84832595, "body": "Note that <code>std::function</code> is not a lambda. Lambdas are special; when you write a lambda, the compiler creates a unique class/struct with an <code>operator()</code> whose body is the body of your lambda. <code>std::function</code> is more heavy-weight. You can assign any compatible lambda to it, as well as any type with an <code>operator()</code> that is compatible."}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519238434, "post_id": 48913048, "comment_id": 84832671, "body": "@Justin I&#39;m not a c++ expert so I ask you a suggestion: reading your comment, should I replace the std::function with double(*)(double)? ( = is a function pointer better than a std::function in this case?)"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 4, "creation_date": 1519238558, "post_id": 48913048, "comment_id": 84832747, "body": "Your conversion table maps should be static members of <code>Temperature</code>, otherwise you&#39;ll end up with a copy of them in every <code>Temperature</code> object you create."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519238602, "post_id": 48913048, "comment_id": 84832766, "body": "@RaffaeleRossi It depends. In almost all cases, you probably just want to use <code>std::function</code>. It&#39;s good. My comment was just trying to teach terminology: <code>std::function</code> is not a lambda, lambdas are not <code>std::function</code>s. It&#39;s a common misconception and I wanted to correct it. Although looking through the question again, you may already understand that, and I might just be misreading..."}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1519238791, "post_id": 48913048, "comment_id": 84832862, "body": "@Justin yes maybe I didnt explain well due to my english but I got it! std::function accepts callables and so it can have lambdas. Thank you by the way!"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1519247164, "post_id": 48913048, "comment_id": 84837299, "body": "You could convert in two steps, for example choosing <code>Kelvin</code> as the &quot;middle man&quot;. <code>[from any]</code> -&gt; <code>[to Kelvin]</code> -&gt; <code>[to other]</code> and you would only need 14 conversion functions."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1519250786, "post_id": 48913048, "comment_id": 84839019, "body": "@super Came to my mind as well. It reduces code complexity from <i>quadratic</i> to <i>linear</i>."}, {"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1519284054, "post_id": 48913048, "comment_id": 84849639, "body": "I&#39;d even supply a unity lambda to convert from Kelvin to Kelvin .... just so you don&#39;t have to special-case it."}], "answers": [{"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": true, "score": 10, "last_activity_date": 1519237990, "creation_date": 1519237990, "answer_id": 48913082, "question_id": 48913048, "link": "https://stackoverflow.com/questions/48913048/c-cannot-call-lambda-expression-from-map/48913082#48913082", "title": "C++ cannot call lambda expression from map", "body": "<p>In C++ <code>4/5</code>, <code>21/40</code>, <code>5/6</code> and the like are all zero because the division is performed in integer arithmetic.</p>\n\n<p>You need to write <code>4./5</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "edited": false, "score": 0, "creation_date": 1519298229, "post_id": 48914598, "comment_id": 84858160, "body": "Yeah while testing I changed to &quot;switch (kind)&quot; because I figured out that the formulas I had gave me the result in the reverse direction. Thank you! Also yes it makes sense to have them static so I wont wste memory"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1519243802, "creation_date": 1519243802, "answer_id": 48914598, "question_id": 48913048, "link": "https://stackoverflow.com/questions/48913048/c-cannot-call-lambda-expression-from-map/48914598#48914598", "title": "C++ cannot call lambda expression from map", "body": "<p>In addition to what @6502's answer said, your <code>convertTo()</code> logic is backwards. You want to convert the <code>value</code> <em>from</em> <code>kind</code> <em>to</em> <code>temperature</code>, so you should be using <code>switch(kind)</code> instead of <code>switch(temperature)</code>.</p>\n\n<p>The example you show wants to convert <code>Celsius</code> to <code>Fahrenheit</code>, so <code>convertTo()</code> should be calling <code>fromCelsius.at(Fahrenheit)(value)</code> instead of calling <code>fromFahrenheit.at(Celcius)(value)</code>.  The algorithm you have in the <code>Fahrenheit</code> entry of <code>fromCelsius</code> is the correct Celsius-to-Fahrenheit conversion.  The algorithm you have in the <code>Celcius</code> entry of <code>fromFahrenheit</code> is the Fahrenheit-to-Celsius conversion.</p>\n\n<p>This also helps because if <code>kind</code> doesn't define a conversion to the specified <code>temperature</code> type, a runtime error will be thrown by <code>std::map::at()</code>.</p>\n\n<p><code>convertTo()</code> should look more like this:</p>\n\n<pre><code>double Temperature::convertTo(const TempType&amp; temperature) const\n{\n  if (temperature == kind) {\n    return value;\n  }\n\n  switch (kind) {\n    case TempType::Celsius:\n      return fromCelsius.at(temperature)(value);\n    case TempType::Fahrenheit:\n      return fromFahrenheit.at(temperature)(value);\n    case TempType::Kelvin:\n      return fromKelvin.at(temperature)(value);\n    case TempType::Rankine:\n      return fromRankine.at(temperature)(value);\n    case TempType::Delisle:\n      return fromDelisle.at(temperature)(value);\n    case TempType::Newton:\n      return fromNewton.at(temperature)(value);\n    case TempType::Reaumur:\n      return fromReamur.at(temperature)(value);\n    case TempType::Romer:\n      return fromRomer.at(temperature)(value);\n  }    \n\n  return -1; // or throw an exception...\n}\n</code></pre>\n\n<p>Or, maybe something more like this:</p>\n\n<pre><code>double Temperature::convertTo(const TempType&amp; temperature) const\n{\n  if (temperature == kind) {\n    return value;\n  }\n\n  std::function&lt;double(double)&gt; convert;\n\n  switch (kind) {\n    case TempType::Celsius:\n      convert = fromCelsius.at(temperature);\n      break;\n    case TempType::Fahrenheit:\n      convert = fromFahrenheit.at(temperature);\n      break;\n    case TempType::Kelvin:\n      convert = fromKelvin.at(temperature);\n      break;\n    case TempType::Rankine:\n      convert = fromRankine.at(temperature);\n      break;\n    case TempType::Delisle:\n      convert = fromDelisle.at(temperature);\n      break;\n    case TempType::Newton:\n      convert = fromNewton.at(temperature);\n      break;\n    case TempType::Reaumur:\n      convert = fromReamur.at(temperature);\n      break;\n    case TempType::Romer:\n      convert = fromRomer.at(temperature);\n      break;\n    default:\n      return -1; // or throw an exception...\n  }\n\n  return convert(value);\n}\n</code></pre>\n\n<p>Or even this:</p>\n\n<pre><code>double Temperature::convertTo(const TempType&amp; temperature) const\n{\n  if (temperature == kind) {\n    return value;\n  }\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; *convert;\n\n  switch (kind) {\n    case TempType::Celsius:\n      convert = &amp;fromCelsius;\n      break;\n    case TempType::Fahrenheit:\n      convert = &amp;fromFahrenheit;\n      break;\n    case TempType::Kelvin:\n      convert = &amp;fromKelvin;\n      break;\n    case TempType::Rankine:\n      convert = &amp;fromRankine;\n      break;\n    case TempType::Delisle:\n      convert = &amp;fromDelisle;\n      break;\n    case TempType::Newton:\n      convert = &amp;fromNewton;\n      break;\n    case TempType::Reaumur:\n      convert = &amp;fromReamur;\n      break;\n    case TempType::Romer:\n      convert = &amp;fromRomer;\n      break;\n    default:\n      return -1; // or throw an exception...\n  }\n\n  return convert-&gt;at(temperature)(value);\n}\n</code></pre>\n\n<p>This last case could then be simplified using a <code>std::map</code> of <code>std::map</code>, like @StoryTeller suggested in comments.</p>\n\n<p>In any case, the <code>std::map</code> objects declared in the class should be <code>static</code> to avoid allocating new copies in every <code>Temperature</code> object you instantiate, like @1201ProgramAlarm suggested in comments:</p>\n\n<pre><code>class Temperature {\nprivate:\n\n  ...\n\n  //conversion tables\n  static std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromCelsius = ...;    \n  static std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromFahrenheit = ...;    \n  ... and so on ...\n};\n</code></pre>\n"}], "owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 48913082, "answer_count": 2, "score": 6, "last_activity_date": 1519243802, "creation_date": 1519237865, "last_edit_date": 1519242127, "question_id": 48913048, "link": "https://stackoverflow.com/questions/48913048/c-cannot-call-lambda-expression-from-map", "title": "C++ cannot call lambda expression from map", "body": "<p>I have created a class for temperature conversions and I've decided to create a conversion table with a structure like this:</p>\n\n<pre><code>temperature | conversion formula\n</code></pre>\n\n<p>For this reason, I've created a <code>std::map</code> that has the key as temperature index and then the formula. Here you can see the implementation:</p>\n\n<pre><code>enum class TempType {Celsius, Fahrenheit, Kelvin, Rankine, Delisle, Newton, Reaumur, Romer};\n\nclass Temperature {\nprivate:\n\n  double value;   //value of the temperature\n  TempType kind;  //Celsius, Fahrenheit...\n\n  //conversion tables\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromCelsius = {\n      { TempType::Fahrenheit, [](double x) { return x * (9/5) + 32; } },\n      { TempType::Kelvin, [](double x) { return x + 273.15; } },\n      { TempType::Rankine, [](double x) { return (x + 273.15) * (9/5); } },\n      { TempType::Delisle, [](double x) { return (100 - x) * (3/2); } },\n      { TempType::Reaumur, [](double x) { return x * (33/100); } },\n      { TempType::Newton, [](double x) { return x * (4/5); } },\n      { TempType::Romer, [](double x) { return x * (21/40) + 7.5; } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromFahrenheit = {\n      { TempType::Celsius, [](double x) { return (x - 32) * (5/9); } },\n      { TempType::Kelvin, [](double x) { return (x + 459.67) * (5/9); } },\n      { TempType::Rankine, [](double x) { return x + 459.67; } },\n      { TempType::Delisle, [](double x) { return (212 - x) * (5/6); } },\n      { TempType::Newton, [](double x) { return (x - 32) * (11/60); } },\n      { TempType::Reaumur, [](double x) { return (x - 32) * (4/9); } },\n      { TempType::Romer, [](double x) { return (x - 32) * (7/24) + 7.5; } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromKelvin = {\n      { TempType::Celsius, [](double x) { return x - 273.15; } },\n      { TempType::Fahrenheit, [](double x) { return x * (9/5) - 459.67; } },\n      { TempType::Rankine, [](double x) { return x * (9/5); } },\n      { TempType::Delisle, [](double x) { return (373.15 - x) * (3/2); } },\n      { TempType::Newton, [](double x) { return (x - 273.15) * (33/100); } },\n      { TempType::Reaumur, [](double x) { return (x - 273.15) * (4/5); } },\n      { TempType::Romer, [](double x) { return (x - 273.15) * (21/40) + 7.5; } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromRankine = {\n      { TempType::Celsius, [](double x) { return (x - 491.67) * (5/9); } },\n      { TempType::Fahrenheit, [](double x) { return x - 459.67; } },\n      { TempType::Kelvin, [](double x) { return x * (5/9); } },\n      { TempType::Delisle, [](double x) { return (671.67 - x) * (5/6); } },\n      { TempType::Newton, [](double x) { return (x - 491.67) * (11/60); } },\n      { TempType::Reaumur, [](double x) { return (x - 491.67) * (4/9); } },\n      { TempType::Romer, [](double x) { return (x - 491.67) * (7/24) + 7.5; } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromDelisle = {\n      { TempType::Celsius, [](double x) { return 100 - x * (5/9); } },\n      { TempType::Fahrenheit, [](double x) { return 212 - x * (6/5); } },\n      { TempType::Kelvin, [](double x) { return 373.15 - x * (2/3); } },\n      { TempType::Rankine, [](double x) { return 671.67 - x * (6/5); } },\n      { TempType::Newton, [](double x) { return 33 - x * (11/50); } },\n      { TempType::Reaumur, [](double x) { return 80 - x * (8/15); } },\n      { TempType::Romer, [](double x) { return 60 - x * (7/20); } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromNewton = {\n      { TempType::Celsius, [](double x) { return x * (100/33); } },\n      { TempType::Fahrenheit, [](double x) { return x * (60/11) + 32; } },\n      { TempType::Kelvin, [](double x) { return x * (100/33) + 273.15; } },\n      { TempType::Rankine, [](double x) { return x * (60/11) + 491.67; } },\n      { TempType::Delisle, [](double x) { return (33 - x) * (50/11); } },\n      { TempType::Reaumur, [](double x) { return x * (80/33); } },\n      { TempType::Romer, [](double x) { return x * (35/22) + 7.5; } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromReamur = {\n      { TempType::Celsius, [](double x) { return x * (5/4); } },\n      { TempType::Fahrenheit, [](double x) { return x * (9/4) + 32; } },\n      { TempType::Kelvin, [](double x) { return x * (5/4) + 273.15; } },\n      { TempType::Rankine, [](double x) { return x * (9/4) + 491.67; } },\n      { TempType::Delisle, [](double x) { return (80 - x) * (15/8); } },\n      { TempType::Newton, [](double x) { return x * (33/80); } },\n      { TempType::Romer, [](double x) { return x * (21/32) + 7.5; } }\n  };\n\n  std::map&lt;TempType, std::function&lt;double(double)&gt;&gt; fromRomer = {\n      { TempType::Celsius, [](double x) { return (x - 7.5) * (40/21); } },\n      { TempType::Fahrenheit, [](double x) { return (x - 7.5) * (24/7) + 32; } },\n      { TempType::Kelvin, [](double x) { return (x - 7.5) * (40/21) + 273.15; } },\n      { TempType::Rankine, [](double x) { return (x - 7.5) * (24/7) + 491.67; } },\n      { TempType::Delisle, [](double x) { return (60 - x) * (20/7); } },\n      { TempType::Newton, [](double x) { return (x - 7.5) * (22/35); } },\n      { TempType::Reaumur, [](double x) { return (x - 7.5) * (32/21); } }\n  };\n\npublic:\n}    \n#endif // TEMPERATURE_H\n</code></pre>\n\n<p>Now, if I want to convert from a temperature object to another, I use this code:</p>\n\n<pre><code>Temperature x(20, TempType::Celsius); //20 \u00b0C\ndouble s = x.convertTo(TempType::Fahrenheit); //convert 20 \u00b0c to 68 \u00b0F\n</code></pre>\n\n<p>The conversion code is this:</p>\n\n<pre><code>double Temperature::convertTo(const TempType&amp; temperature) const {\n\n  if (temperature == kind) {\n    return value;\n  }\n\n  double result = -1;\n\n  switch (temperature) {\n    case TempType::Celsius:\n      result = fromCelsius.at(kind)(value);\n      break;\n    case TempType::Fahrenheit:\n      result = fromFahrenheit.at(kind)(value);\n      break;\n    case TempType::Kelvin:\n      result = fromKelvin.at(kind)(value);\n      break;\n    case TempType::Rankine:\n      result = fromRankine.at(kind)(value);\n      break;\n    case TempType::Delisle:\n      result = fromDelisle.at(kind)(value);\n      break;\n    case TempType::Newton:\n      result = fromNewton.at(kind)(value);\n      break;\n    case TempType::Reaumur:\n      result = fromReamur.at(kind)(value);\n      break;\n    case TempType::Romer:\n      result = fromRomer.at(kind)(value);\n      break;\n    default:\n      break;\n    }\n\n  return result;\n\n}\n</code></pre>\n\n<p>I use the key of the map (a <code>TempType</code>) and then I pass to the lambda the parameter. The result returned is always 0. Any idea?</p>\n\n<p>I am using QTCreator and mingw.</p>\n"}, {"tags": ["c++", "language-lawyer", "most-vexing-parse"], "comments": [{"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 4, "creation_date": 1519238231, "post_id": 48913009, "comment_id": 84832550, "body": "Hmm, could it possibly be related to this? <a href=\"https://stackoverflow.com/questions/34288844/what-does-casting-to-void-really-do\" title=\"what does casting to void really do\">stackoverflow.com/questions/34288844/&hellip;</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1519238798, "post_id": 48913009, "comment_id": 84832866, "body": "<a href=\"https://godbolt.org/g/yJY5T2\" rel=\"nofollow noreferrer\">clang ast</a> -&gt; <a href=\"https://clang.llvm.org/doxygen/classclang_1_1CXXScalarValueInitExpr.html#details\" rel=\"nofollow noreferrer\">docs</a> -&gt; <a href=\"http://eel.is/c++draft/expr.post#expr.type.conv-2\" rel=\"nofollow noreferrer\">standard</a>"}, {"owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519238799, "post_id": 48913009, "comment_id": 84832867, "body": "@Raindrop7 Try -Wall -Wextra, my results are with those."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1519239274, "post_id": 48913009, "comment_id": 84833105, "body": "I knew I saw similar, possible dup of <a href=\"https://stackoverflow.com/q/20478193/1708801\">Returning a void?</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 0, "creation_date": 1519239573, "post_id": 48913009, "comment_id": 84833244, "body": "@AndrewSun It is not a cast"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1519241273, "post_id": 48913009, "comment_id": 84834116, "body": "i guess <code>void</code> is not a data type. It is used to declare different things in arguments <code>function a(void)</code> , returns <code>return void</code> and, of course, universal pointer <code>void *</code>. But it is a completely different thing than <code>int</code>. So, no wonder that compiler does different treatment for them. Though i would prefer it gives some warning in the first place as well."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1519251901, "post_id": 48913009, "comment_id": 84839531, "body": "Casting to <code>void</code> is used to remove warning about unused variable. They probably treat this expression the same way."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1519274444, "post_id": 48913009, "comment_id": 84845836, "body": "@Jarod42 it is an explicit type conversion it is neeed so that <a href=\"https://stackoverflow.com/q/20478193/1708801\">templated functions do the right thing</a> I don&#39;t know why people look at this like casting."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519308881, "post_id": 48913009, "comment_id": 84865635, "body": "<code>void()</code> might also be used to avoid evil comma operator: <code>(foo&lt;Is&gt;(), void(), 0)...</code>."}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1522196892, "creation_date": 1522196892, "answer_id": 49524311, "question_id": 48913009, "link": "https://stackoverflow.com/questions/48913009/difference-between-parsing-of-void-and-int/49524311#49524311", "title": "Difference between parsing of void() and int()", "body": "<p>It <em>is</em> parsed the same way.</p>\n\n<p>Warnings don't come from the parser. They arise during semantic analysis. The SA noticed that a value was created an destroyed by <code>int();</code> without being read or written.</p>\n\n<p>In the <code>void</code> case, there is no value, so no warning.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 5, "last_activity_date": 1522208029, "last_edit_date": 1522208029, "creation_date": 1522206814, "answer_id": 49525480, "question_id": 48913009, "link": "https://stackoverflow.com/questions/48913009/difference-between-parsing-of-void-and-int/49525480#49525480", "title": "Difference between parsing of void() and int()", "body": "<p>There is no difference in parsing. Both cases are covered by <em>simple-type-specifier</em> followed by optional parenthesized <em>expression-list</em>.</p>\n\n<p>The semantic meaning is specified in C++17 (N4659) [expr.type.conv]/2:</p>\n\n<blockquote>\n  <p>If the type is <em>cv</em> <code>void</code> and the initializer is <code>()</code> , the expression is a prvalue of the specified type that performs no initialization. Otherwise, the expression is a prvalue of the specified type whose result object is direct-initialized with the initializer.</p>\n</blockquote>\n\n<p>This specifically says that <code>void()</code> is a prvalue of type <code>void</code>.</p>\n\n<p>Now, I'm sure that it is not <em>intended</em> that a prvalue of type void be illegal, as it is a common occurrence, e.g. <code>(void)x;</code> or calling a void function! </p>\n\n<p>But I can't find where in the Standard it says that temporary materialization should be suppressed for <code>void</code> prvalues.  The [class.temporary]/2 seems to say that a discarded-value expression always materializes a temporary; and it is an error to materialize a prvalue of incomplete type.  Maybe it is a defect in the standard.</p>\n\n<hr>\n\n<p>The difference in warning about \"unused value\" is probably because an unused value of type <code>void</code> is a common occurrence and it would not be helpful to warn about. </p>\n"}], "owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 2, "accepted_answer_id": 49525480, "answer_count": 2, "score": 12, "last_activity_date": 1527317538, "creation_date": 1519237728, "last_edit_date": 1527317538, "question_id": 48913009, "link": "https://stackoverflow.com/questions/48913009/difference-between-parsing-of-void-and-int", "title": "Difference between parsing of void() and int()", "body": "<p>Having read about the most vexing parse, I experimented a bit and found this program. There are two very similar lines. One of them yields warnings in both g++7 and clang++-3.9, another does not.</p>\n\n<pre><code>int main() {\n  void(); // no warning\n  int(); // warning: statement has no effect\n}\n</code></pre>\n\n<p>In the second line a default-constructed object of type <code>int</code> is created and immediately destroyed, thus unused. But what happens in the first line? If it was parsed the same way, it should be an error because it is illegal to create an object of type <code>void</code>. On the other hand, it does not look like a function declaration as well.</p>\n"}, {"tags": ["c++", "c++11", "g++", "clang"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519238763, "post_id": 48912930, "comment_id": 84832853, "body": "I can&#39;t reproduce your exact error, but I was able to get <a href=\"https://godbolt.org/g/k9nQEg\" rel=\"nofollow noreferrer\">an error regarding the conversion from <code>long double</code> to <code>double</code></a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519251552, "post_id": 48912930, "comment_id": 84839377, "body": "Why not all your constructor are <code>constexpr</code> ?"}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 0, "creation_date": 1519261848, "post_id": 48912930, "comment_id": 84842585, "body": "Is operator double + Complex constexpr?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1531116658, "post_id": 48912930, "comment_id": 89457003, "body": "Narrowing conversion are ill-formed within a constant expression, although the code you provided does not produce the error you show your operator is ill-formed since <code>Complex{0.0, arg}</code> narrows from long double to double."}], "owner": {"reputation": 65, "user_id": 8271402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349000867ca834af46e910a2894f02d9?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Siwerz", "link": "https://stackoverflow.com/users/8271402/robert-siwerz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1519237867, "creation_date": 1519237444, "last_edit_date": 1519237867, "question_id": 48912930, "link": "https://stackoverflow.com/questions/48912930/user-defined-literal-operator-constexpr-constructor", "title": "User-defined literal operator (constexpr constructor)", "body": "<p>I'm implementing a class that defines a complex number with the possible arithmetics that goes with it. Now, I am trying to write a user-defined literal operator:</p>\n\n<pre><code>constexpr Complex operator \"\" _i(long double arg) {\n    return Complex{0.0, arg};\n}\n</code></pre>\n\n<p>This lets me write the following:</p>\n\n<pre><code>Complex c = 1.0 + 5.0_i;\n</code></pre>\n\n<p>For this, I have to implement a constexpr constructor that goes with it:</p>\n\n<pre><code>constexpr Complex(double real, double imaginary) : re(real), im(imaginary) {};\n</code></pre>\n\n<p>where <em>re</em> and <em>im</em> are the member variables. This works fine when compiling in <strong>g++</strong> but as soon as I'm using <strong>clang</strong> I get this error:</p>\n\n<pre><code>error: constexpr function never produces a constant expression[-Winvalid-constexpr]\n</code></pre>\n\n<p>Am I doing something wrong? Is g++ less restrictive than clang? </p>\n\n<p>The whole implementation below:</p>\n\n<pre><code>class Complex {\n private:\n   double re;\n   double im;\n public:\n   // Class constructors\n   Complex() : re(0.0), im(0.0) {};                      \n   Complex(const double real) : re(real) {};\n   constexpr Complex(const double real, const double imaginary) : re(real), im(imaginary) {};\n\n/* All the overloaded functions etc. below */\n\n};\n\nconstexpr Complex\noperator \"\" _i(long double arg) {\n  return Complex{0.0, arg};\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "exception", "terminal", "throw"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 4, "creation_date": 1519237110, "post_id": 48912829, "comment_id": 84831973, "body": "The message states <code>type: char const* </code>"}, {"owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1519237182, "post_id": 48912829, "comment_id": 84831999, "body": "See <a href=\"https://stackoverflow.com/questions/35528780/c-a-few-questions-about-throwing-exceptions?rq=1\" title=\"c a few questions about throwing exceptions\">stackoverflow.com/questions/35528780/&hellip;</a>"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1519237671, "post_id": 48912829, "comment_id": 84832258, "body": "Maybe you are confused as to what the <code>throw &quot;num is not 0!&quot;;</code> statement does. It&#39;s not the one that outputs the string literal on the standard output. The catch block does that. Also this compiles with Visual Studio while it does not with GCC. String literal is of type <code>const char*</code> not <code>char*</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1519237831, "post_id": 48912829, "comment_id": 84832342, "body": "Just saying; as a general rule of thumb, exceptions should always be caught by const reference <code>catch (const&amp; whatever)</code>."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1519241066, "post_id": 48912829, "comment_id": 84834014, "body": "Prefer instead to throw <code>std::runtime_error{&quot;num is not 0!&quot;}</code> and log it with <code>std::exception::what()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1519237677, "last_edit_date": 1519237677, "creation_date": 1519237273, "answer_id": 48912902, "question_id": 48912829, "link": "https://stackoverflow.com/questions/48912829/exception-in-c-not-showing-throw-to-cout/48912902#48912902", "title": "Exception in c++ not showing throw to cout", "body": "<p>This is because you throw a string literal and it cannot be bound to <code>char*</code>. Rather it can be bound to <code>char const*</code>.</p>\n\n<p>Pedantically, the type of <code>\"num is not 0!\"</code> is <code>char const[14]</code>, however, in <code>throw</code> expression <a href=\"http://en.cppreference.com/w/cpp/language/array#Array-to-pointer_decay\" rel=\"nofollow noreferrer\">the array decays to a pointer</a> to its first element.</p>\n"}], "owner": {"reputation": 103, "user_id": 9033629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2974716ac24f2e280dc8aa4608ca9c68?s=128&d=identicon&r=PG&f=1", "display_name": "Blink", "link": "https://stackoverflow.com/users/9033629/blink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 48912902, "answer_count": 1, "score": -5, "last_activity_date": 1519237677, "creation_date": 1519237002, "question_id": 48912829, "link": "https://stackoverflow.com/questions/48912829/exception-in-c-not-showing-throw-to-cout", "title": "Exception in c++ not showing throw to cout", "body": "<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\nint num = 1;\n\ntry\n{\n    if (num != 0)\n    {\n        throw \"num is not 0!\";\n    }\n}\ncatch (char *x)\n{\n    cout &lt;&lt; x &lt;&lt; endl;\n}\n}\n</code></pre>\n\n<p>I want this code to print \"num is not 0!\" to cout but when i run it i get <code>libc++abi.dylib: terminating with uncaught exception of type char const*\nAbort trap: 6</code> as output from the terminal. Am I misunderstanding how exceptions work or is there some other problem?</p>\n"}, {"tags": ["c++", "compilation", "g++", "compiler-warnings", "clang++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519236413, "post_id": 48912627, "comment_id": 84831631, "body": "&quot;flag -Werr with g++ or -Werror with clang++&quot; - No need to make them different <code>-Werror</code> works fine with both compilers."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519236446, "post_id": 48912627, "comment_id": 84831647, "body": "Both GCC and Clang have pragmas to temporarily disable warnings for a section of code. If no warning is generated, then there will be no error either. As for <i>which</i> warning to disable, it&#39;s in the error message."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1519236503, "post_id": 48912627, "comment_id": 84831681, "body": "Unsigned can&#39;t be less than zero so the compiler is right to warn you about that. It&#39;s an overkill to check if unsigned can be less than <code>0</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519236689, "post_id": 48912627, "comment_id": 84831771, "body": "Oh and once you temporarily disable the warning, you have to make sure that the compiler actually does what you hope it will do (optimize the loop away). But you should probably try to come up with a way to not execute the loop if <code>N</code> is <code>0</code> just to be safe anyway."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519237046, "post_id": 48912627, "comment_id": 84831947, "body": "Can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that produces the warning? I was <a href=\"https://godbolt.org/g/Y2EJaG\" rel=\"nofollow noreferrer\">unable to reproduce it</a>"}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519237277, "post_id": 48912627, "comment_id": 84832038, "body": "@JesperJuhl Thank you for the flag info, I&#39;ll edit."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519237384, "post_id": 48912627, "comment_id": 84832096, "body": "@Someprogrammerdude As I said, I&#39;m not satisfied with pragmas since they potentially throw warnings if not used with the right compiler."}, {"owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "edited": false, "score": 1, "creation_date": 1519237428, "post_id": 48912627, "comment_id": 84832120, "body": "What about:  for(unsigned int i = 0; (i+1) &lt; (M+1); i++) ?  Not a very optimized solution for sure!"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1519237473, "post_id": 48912627, "comment_id": 84832148, "body": "Would you be able to use <code>if constexpr (M &gt; 0) ...</code> (requires C++17)?"}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "reply_to_user": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "edited": false, "score": 0, "creation_date": 1519237581, "post_id": 48912627, "comment_id": 84832204, "body": "@avariant That&#39;s actually a smart one! For the optimization, the compiler would probably detect the +1 both sides of the comparison operator and prune (maybe) so it could in fact be quite optimized."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1519237606, "post_id": 48912627, "comment_id": 84832224, "body": "@DanielSchepler My code has to be C++11-compliant unfortunately."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519237799, "post_id": 48912627, "comment_id": 84832326, "body": "@BenjaminBarrois You could still use <a href=\"http://en.cppreference.com/w/cpp/types/integral_constant\" rel=\"nofollow noreferrer\"><code>std::integral_constant</code></a> with tag dispatch, though: <code>return foo_impl(std::integral_constant&lt;(type of M), M&gt;{});</code> and have two overloads of <code>foo_impl</code>, one for <code>std::integral_constant&lt;(type of M), 0&gt;</code>, and one for arbitrary <code>I</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1519239526, "post_id": 48912627, "comment_id": 84833221, "body": "Why do you need <code>unsigned</code>  int there? Make it signed and the error will go away."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519241611, "post_id": 48912627, "comment_id": 84834283, "body": "You already need to have a compiler-specific solution it seems, so why not put the pragmas inside a simple <code>#ifdef&#47;#endif</code> block?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519251426, "post_id": 48912627, "comment_id": 84839313, "body": "<i>&quot;For the optimization, the compiler would probably detect the +1 both sides&quot;</i>: I cannot remove it for <code>unsigned</code> as <code>max_value + 1</code> would be <code>0</code> and change the test. (It would be allowed for <code>signed</code> thanks to UB of that case)."}], "answers": [{"tags": [], "owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "is_accepted": false, "score": 0, "last_activity_date": 1519236261, "creation_date": 1519236261, "answer_id": 48912628, "question_id": 48912627, "link": "https://stackoverflow.com/questions/48912627/remove-comparison-is-always-false-warnings-using-code-tweaks/48912628#48912628", "title": "Remove &quot;comparison is always false&quot; warnings using code tweaks", "body": "<p>A solution I thought about while writing this post would be to replace <code>unsigned int</code> by <code>int</code> and use <code>static_cast&lt;unsigned int&gt;(i)</code> inside the for loop if needed. But it took me too long to write just to delete it.\nAnyway, any more elegant solution would be welcome!</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1519250924, "creation_date": 1519250924, "answer_id": 48916333, "question_id": 48912627, "link": "https://stackoverflow.com/questions/48912627/remove-comparison-is-always-false-warnings-using-code-tweaks/48916333#48916333", "title": "Remove &quot;comparison is always false&quot; warnings using code tweaks", "body": "<p>In c++17, you may use <code>if constexpr</code>:</p>\n\n<pre><code>if constexpr (M &gt; 0) {\n    for(unsigned int i = 0; i &lt; M; i++) { ... }\n}\n</code></pre>\n\n<p>Before you might use specialization</p>\n\n<pre><code>template &lt;std::size_t M&gt;\nvoid bar(/*...*/) {\n    for(unsigned int i = 0; i &lt; M; i++) { ... }\n}\n\ntemplate &lt;&gt;\nvoid bar&lt;0&gt;(/*...*/) {\n    /* Empty */\n}\n</code></pre>\n"}], "owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1519250924, "creation_date": 1519236261, "last_edit_date": 1519237590, "question_id": 48912627, "link": "https://stackoverflow.com/questions/48912627/remove-comparison-is-always-false-warnings-using-code-tweaks", "title": "Remove &quot;comparison is always false&quot; warnings using code tweaks", "body": "<p>I am working on a huge C++ project, and to have something very clean, all warnings are turned into errors on purpose (flag <code>-Werror</code> with g++ or clang++).</p>\n\n<p>I have a template class A:</p>\n\n<pre><code>template&lt;int N&gt; class A { ... };\n</code></pre>\n\n<p>Depending on the value of <code>N</code>, some general behaviors are varying. In one of <code>A</code>'s methods, I have a for loop:</p>\n\n<pre><code>for(int i = 0; i &lt; M; i++) { ... }\n</code></pre>\n\n<p>In this for loop declaration,<code>M</code> is calculated from <code>N</code> which is resolved at compile time (multiplications of compilation-solved constants).</p>\n\n<p>For some values of <code>N</code>, there are cases where the for loop is equivalent to:</p>\n\n<pre><code>for(unsigned int i = 0; i &lt; 0; i++) { ... }\n</code></pre>\n\n<p>but this was made on purpose, I just want the loop to be removed by the optimizer.</p>\n\n<p>With g++, there is no problem. However, with clang++, I get:</p>\n\n<pre><code>error: comparison of unsigned expression &lt; 0 is always false [-Werror,-Wtautological-compare]\n</code></pre>\n\n<p>which is obvious and right.</p>\n\n<p>My question is:</p>\n\n<p>Is there some kind of tweak that could discard this warning by making the for loop not being taken into account? I am talking about a tweak implying pure C++ code and no clang-reserved pragmas since my code must work with both g++ and clang++.</p>\n\n<p>I have thought about something like:</p>\n\n<pre><code>if(M &gt; 0) for(unsigned int i = 0; i &lt; M; i++) { ... }\n</code></pre>\n\n<p>but this just gives the same error. Any idea?</p>\n"}, {"tags": ["c++", "templates", "parameters", "non-type"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519236783, "post_id": 48912607, "comment_id": 84831817, "body": "TBH, I think adding a constructor (and ergo ditching the C-ism that is<code>typedef struct {</code>), is the path of least resistance."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1519236965, "post_id": 48912607, "comment_id": 84831911, "body": "Maybe you mean something like <code>template &lt;typename Param_t, Param_t def =Param_t{}&gt;</code>; otherwise, if you don&#39;t give a default value to the template non-type parameter, how can you write <code>cParameter&lt;int&gt; someVariable;</code>?"}, {"owner": {"reputation": 27, "user_id": 2144554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4M6KN.jpg?s=128&g=1", "display_name": "Jesko", "link": "https://stackoverflow.com/users/2144554/jesko"}, "edited": false, "score": 0, "creation_date": 1519237309, "post_id": 48912607, "comment_id": 84832057, "body": "I wanted to write so:&lt;br/&gt; typedef struct  {     cParameter&lt;int,0&gt; someVariable;     cParameter&lt;float, 1.0f&gt; someOtherVariable; } myStructure_t;"}, {"owner": {"reputation": 27, "user_id": 2144554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4M6KN.jpg?s=128&g=1", "display_name": "Jesko", "link": "https://stackoverflow.com/users/2144554/jesko"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519237532, "post_id": 48912607, "comment_id": 84832181, "body": "@StoryTeller this is more code changes ..."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519237842, "post_id": 48912607, "comment_id": 84832349, "body": "Hang on. You said VS2013? <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">It supports non-static data member initializers</a>. Just write <code>int someVariable = 0;</code> and so forth. That <i>would be</i> less tedious."}, {"owner": {"reputation": 27, "user_id": 2144554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4M6KN.jpg?s=128&g=1", "display_name": "Jesko", "link": "https://stackoverflow.com/users/2144554/jesko"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519238316, "post_id": 48912607, "comment_id": 84832599, "body": "@StoryTeller There is need to replace the parameters by some class. My question is about the initialization <b>then</b>. I was interested to get the first code sample to work ..."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2144554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4M6KN.jpg?s=128&g=1", "display_name": "Jesko", "link": "https://stackoverflow.com/users/2144554/jesko"}, "edited": false, "score": 0, "creation_date": 1519296997, "post_id": 48925512, "comment_id": 84857345, "body": "looks a little bit impractical. If we have hundrets of such classes and defaults ... Why does this not work in all cases: template &lt;typename T, T v&gt; class MyType {     public:     MyType() { value = v; }     private:         T value;  };"}, {"owner": {"reputation": 27, "user_id": 2144554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4M6KN.jpg?s=128&g=1", "display_name": "Jesko", "link": "https://stackoverflow.com/users/2144554/jesko"}, "edited": false, "score": 0, "creation_date": 1519297268, "post_id": 48925512, "comment_id": 84857521, "body": "Update: I just found the answer here <a href=\"https://stackoverflow.com/questions/2183087/why-cant-i-use-float-value-as-a-template-parameter?noredirect=1&amp;lq=1\" title=\"why cant i use float value as a template parameter\">stackoverflow.com/questions/2183087/&hellip;</a> (The construct is allowed, but NOT WITH DATATYPE float or double). Question is: why?"}], "tags": [], "owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "is_accepted": true, "score": 0, "last_activity_date": 1519296592, "creation_date": 1519296592, "answer_id": 48925512, "question_id": 48912607, "link": "https://stackoverflow.com/questions/48912607/can-i-use-a-type-parameter-in-a-template-for-a-non-type-parameter/48925512#48925512", "title": "Can I use a type parameter in a template for a non-type parameter?", "body": "<p>If you are OK to have a fixed default per type you can create a type to define it as a constant and specialise it as needed.</p>\n\n<pre><code>template &lt;typename T&gt; struct MyTypeDefault { static const T value; };\ntemplate &lt;typename T&gt; const T MyTypeDefault&lt;T&gt;::value = T();\ntemplate &lt;&gt; struct MyTypeDefault&lt;double&gt; { static const double value; };\nconst double MyTypeDefault&lt;double&gt;::value = 1.0;\n\ntemplate &lt;typename T&gt;\nclass MyType {\n    public:\n    MyType() { value = MyTypeDefault&lt;T&gt;::value; }\n    private:\n        T value;\n };\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2144554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4M6KN.jpg?s=128&g=1", "display_name": "Jesko", "link": "https://stackoverflow.com/users/2144554/jesko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 48925512, "answer_count": 1, "score": 0, "last_activity_date": 1519300222, "creation_date": 1519236215, "last_edit_date": 1519300222, "question_id": 48912607, "link": "https://stackoverflow.com/questions/48912607/can-i-use-a-type-parameter-in-a-template-for-a-non-type-parameter", "title": "Can I use a type parameter in a template for a non-type parameter?", "body": "<p>I want to have a qualified default initialization of a class, even if the constructor has no parameters.</p>\n\n<p>Therefore I am trying to set up a default value with the definition of a template by trying something like that below. Initialize a parameter at compile time (if not given anyways):</p>\n\n<pre><code>template &lt; class Param_t, Param_t def &gt;\nclass cParameter\n{\npublic:\n    cParameter( Param_t p = def)\n        : m_Value(p)\n    {}\n    Param_t m_Value;\n};\n</code></pre>\n\n<p>This does not work :-(\nAddendum: ... with doubles or floats. It works well with ints.</p>\n\n<p>The reason is that I want to replace structure elements in legacy code <strong>with as few changes as possible</strong>.</p>\n\n<pre><code>typedef struct \n{\n    int someVariable;\n    float someOtherVariable;\n} myStructure_t;\n</code></pre>\n\n<p>To this</p>\n\n<pre><code>typedef struct \n{\n    cParameter&lt;int&gt; someVariable;\n    cParameter&lt;float&gt; someOtherVariable;\n} myStructure_t;\n</code></pre>\n\n<p>When this struct is initialized in an ordinary class</p>\n\n<pre><code>class myClass\n{\npublic:\n    myClass()\n    : m_Struct()\n    {}\n    myStructure_t m_Struct;\n}\n</code></pre>\n\n<p>I get an error (MSVC2013) when the template does not have the default initialization:</p>\n\n<pre><code>template &lt; class Param_t &gt;\nclass cParameter\n{\npublic:\n    cParameter( Param_t p )\n        : m_Value(p)\n    {}\n    Param_t m_Value;\n};\n</code></pre>\n\n<blockquote>\n  <p>Error 42  error C2512: 'myClass::m_Struct' : no appropriate default\n  constructor available demo.cpp</p>\n</blockquote>\n\n<p>I have yet seen the following:</p>\n\n<pre><code>cParameter&lt; int, 1&gt; m_Works;\ncParameter&lt; double, 1.0&gt; m_DontWork;\n</code></pre>\n\n<p>==> The above is now clear to me. I just found the answer here stackoverflow.com/questions/2183087/\u2026 (The construct is allowed, but NOT WITH DATATYPE float or double).</p>\n\n<p>But how do I simply get the templates initialized with different values of ints and doubles ?</p>\n\n<pre><code>typedef struct \n{\n    cParameter&lt;int, 42&gt; someVariable;\n    cParameter&lt;float, 23.0f&gt; someOtherVariable;\n} myStructure_t;\n</code></pre>\n\n<p>What to do here? Any hints?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1, "user_id": 9392310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f6b1ab1e1a7faaaaeb79ad4671ccf?s=128&d=identicon&r=PG&f=1", "display_name": "NeoZeus", "link": "https://stackoverflow.com/users/9392310/neozeus"}, "edited": false, "score": 0, "creation_date": 1519235372, "post_id": 48912256, "comment_id": 84831025, "body": "I&#39;m sorry I dont really use this as the name for the namespace It was just the first thing that came to mind i changed it to foo instead"}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 4, "creation_date": 1519235547, "post_id": 48912256, "comment_id": 84831122, "body": "You call a non-const method <code>print</code> for a const object <code>A</code>."}, {"owner": {"reputation": 1, "user_id": 9392310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f6b1ab1e1a7faaaaeb79ad4671ccf?s=128&d=identicon&r=PG&f=1", "display_name": "NeoZeus", "link": "https://stackoverflow.com/users/9392310/neozeus"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1519235872, "post_id": 48912256, "comment_id": 84831322, "body": "Ah! so I should just ad void foo::Stack&lt;T&gt;::print(...) const;?"}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1519242058, "post_id": 48912256, "comment_id": 84834545, "body": "Yes, I&#39;m surprised the compiler didn&#39;t complain about it. With gcc, there&#39;s no such error as &quot;overload is ambiguous&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9392310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f6b1ab1e1a7faaaaeb79ad4671ccf?s=128&d=identicon&r=PG&f=1", "display_name": "NeoZeus", "link": "https://stackoverflow.com/users/9392310/neozeus"}, "edited": false, "score": 0, "creation_date": 1519236337, "post_id": 48912399, "comment_id": 84831585, "body": "That&#39;s because I&#39;m implementing it in my stack.hpp file where im not in the namespace, so dont I have to specify the namespace with the scope  operator so the complier know that I&#39;m refering to it?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 1, "user_id": 9392310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f6b1ab1e1a7faaaaeb79ad4671ccf?s=128&d=identicon&r=PG&f=1", "display_name": "NeoZeus", "link": "https://stackoverflow.com/users/9392310/neozeus"}, "edited": false, "score": 0, "creation_date": 1519236602, "post_id": 48912399, "comment_id": 84831735, "body": "@NeoZeus - not sure but I suppose so; have you tried?"}, {"owner": {"reputation": 1, "user_id": 9392310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f6b1ab1e1a7faaaaeb79ad4671ccf?s=128&d=identicon&r=PG&f=1", "display_name": "NeoZeus", "link": "https://stackoverflow.com/users/9392310/neozeus"}, "edited": false, "score": 0, "creation_date": 1519237481, "post_id": 48912399, "comment_id": 84832153, "body": "I\u2019m not sure what the difference is between your code and mine other than void print is no longer in the stack class"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1519235898, "last_edit_date": 1519235898, "creation_date": 1519235452, "answer_id": 48912399, "question_id": 48912256, "link": "https://stackoverflow.com/questions/48912256/c11-ambiguous-overload/48912399#48912399", "title": "c++11 ambiguous &lt;&lt; overload", "body": "<p>Have you tried with</p>\n\n<pre><code>namespace foo\n{\n   template&lt;typename T&gt;\n   void Stack&lt;T&gt;::print(std::ostream&amp; os, char ofc)\n   {\n        for(auto itr = stack.begin(); itr != stack.end(); ++itr)\n        {\n               os &lt;&lt; *itr &lt;&lt; ofc;\n        }\n   }\n   template&lt;typename T&gt;\n   std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Stack&lt;T&gt;&amp; A)\n   {\n            A.print(os);\n            return os;\n   }\n}\n</code></pre>\n\n<p>?</p>\n\n<p>I mean... you've defined <code>operator&lt;&lt;(std::ostream &amp;, const Stack&lt;T&gt; &amp;)</code> inside namespace <code>foo</code> but when you use it</p>\n\n<pre><code>template&lt;typename T&gt;\n void foo::Stack&lt;T&gt;::print(std::ostream&amp; os, char ofc)\n {\n        for(auto itr = stack.begin(); itr != stack.end(); ++itr)\n        {\n               os &lt;&lt; *itr &lt;&lt; ofc;\n        }\n }\n</code></pre>\n\n<p>you're in a method defined in a namespace <code>foo</code> but you're not in namespace <code>foo</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9392310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3f6b1ab1e1a7faaaaeb79ad4671ccf?s=128&d=identicon&r=PG&f=1", "display_name": "NeoZeus", "link": "https://stackoverflow.com/users/9392310/neozeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519235898, "creation_date": 1519234933, "last_edit_date": 1519235843, "question_id": 48912256, "link": "https://stackoverflow.com/questions/48912256/c11-ambiguous-overload", "title": "c++11 ambiguous &lt;&lt; overload", "body": "<p>I have a namespace containing a class that is supposed to mimic the functionalty of a stack, inside I have a print funciton and a out stream overload that calls the print function to print out the contents of a template of the vector in my stack.h file I define those funtions as</p>\n\n<pre><code>namespace foo\n{\n   template &lt;typename T&gt;\n   class Stack{\n      public:\n         //...\n         void print(std::ostream&amp; os,char ofs = ' ');\n         //...\n      private:\n         std::vector&lt;T&gt; stack;\n   };\n\n   template &lt;typename T&gt;\n   std::ostream&amp;  operator&lt;&lt;(std::ostream&amp; os, const Stack&lt;T&gt;&amp; A);\n}\n</code></pre>\n\n<p>and in my stack.hpp file</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo::Stack&lt;T&gt;::print(std::ostream&amp; os, char ofc)\n{\n   for(auto itr = stack.begin(); itr != stack.end(); ++itr)\n   {\n      os &lt;&lt; *itr &lt;&lt; ofc;\n   }\n}\n\ntemplate&lt;typename T&gt;\nstd::ostream&amp; foo::operator&lt;&lt;(std::ostream&amp; os, const Stack&lt;T&gt;&amp; A)\n{\n   A.print(os);\n   return os;\n}\n</code></pre>\n\n<p>then in my stack.cpp driver I make a stack object \"b\" and fill it with integers and call the .stack::print function and it prints out the elements with the ofc fill charater inbetween but when I call cout &lt;&lt; b; the compiler complains that the operator&lt;&lt; overload is abiguous saying,\" operand types are 'std::ostream { aka std::basic_ostream}' and ' this::Stack')\"\nI am confused because my print function works flawlessly and my overload just calls that function shouldn't work just the same?  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1519234856, "post_id": 48912210, "comment_id": 84830744, "body": "The largest value stored in an int would really depend on your compiler and the number of bytes an int is, if you have an unsigned int, that is 2 bytes(16 bits) then 65535 would be the largest value.  In this case an int appears to be signed and 4 bytes."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1519234902, "post_id": 48912210, "comment_id": 84830773, "body": "A 16 bit <code>int</code> cannot hold 65535 as the largest value. The largest would be 32767 since <code>int</code> is signed. You would want <code>unsigned int</code> for 65535 max value if your word is 16 bits. Or is your <code>int</code> 32 bit? It&#39;s unclear from your question. Also, when you say, <i>wrong answers</i>, exactly what answers are you seeing that you believe are wrong? This post is overall very unclear."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519234926, "post_id": 48912210, "comment_id": 84830787, "body": "You are making an incorrect assumption about the maximum size of <code>int</code>. It can vary between platforms/compilers. All the C++ standard gives you is a guaranteed <i>minimum</i> size."}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1519234978, "post_id": 48912210, "comment_id": 84830815, "body": "See <a href=\"http://en.cppreference.com/w/cpp/language/types#Integer_types\" rel=\"nofollow noreferrer\">cppreference.com - Integer types</a> for info on minimum integer sizes."}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 4, "creation_date": 1519235052, "post_id": 48912210, "comment_id": 84830855, "body": "Unless you cast to <code>double</code> <i>before</i> the multiplication, you&#39;re still performing signed integer multiplication, whose behavior is undefined in the case of overflow. You&#39;re just casting the final result to <code>double</code>, which is not helpful."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1519237004, "post_id": 48912210, "comment_id": 84831928, "body": "Look up the terminology called truncation."}], "answers": [{"comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1519235167, "post_id": 48912303, "comment_id": 84830924, "body": "Alternatively, since the desired end result is a <code>double</code>, I believe <code>val * (double) val</code> would suffice, modulo the imprecision of floating-point types."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519235174, "post_id": 48912303, "comment_id": 84830927, "body": "&quot;The only way&quot;?"}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519235216, "post_id": 48912303, "comment_id": 84830949, "body": "@bolov how else can you store a larger value without using a bigger data type?"}, {"owner": {"reputation": 3537, "user_id": 942589, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/GEIXp.jpg?s=128&g=1", "display_name": "Rajat Saxena", "link": "https://stackoverflow.com/users/942589/rajat-saxena"}, "edited": false, "score": 0, "creation_date": 1519235257, "post_id": 48912303, "comment_id": 84830968, "body": "I used <code>double</code> in order to contain the output of <code>65535*65535</code>. My  knowledge of C++ is severely limited."}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "reply_to_user": {"reputation": 3537, "user_id": 942589, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/GEIXp.jpg?s=128&g=1", "display_name": "Rajat Saxena", "link": "https://stackoverflow.com/users/942589/rajat-saxena"}, "edited": false, "score": 0, "creation_date": 1519235285, "post_id": 48912303, "comment_id": 84830978, "body": "@RajatSaxena In that case, I believe my comment on the question may be what you&#39;re looking for. You&#39;re simply casting to <code>double</code> too late."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 5, "last_activity_date": 1519235414, "last_edit_date": 1519235414, "creation_date": 1519235115, "answer_id": 48912303, "question_id": 48912210, "link": "https://stackoverflow.com/questions/48912210/why-double-is-not-storing-the-product-of-two-int/48912303#48912303", "title": "Why double is not storing the product of two int", "body": "<p>You have signed integer overflow here which is undefined behavior.  You say <code>std::numeric_limits&lt;int&gt;::max()</code> gives <code>2147483647</code> and since <code>65535</code>  is less then that you feel you should be okay.  The problem is you are not.  When you multiply to <code>int</code>'s together the result is stored in a <code>int</code> (even if that is not what you are assigning it to).  Since <code>65535 * 65535</code> is <code>4294836225</code> it overflows the result.</p>\n\n<p>The only way to get around this is to use a wider/bigger type that can hold the result.  For instance if you multiply two <code>long long</code>'s you can do <code>65535 * 65535</code> and be okay.  </p>\n\n<p>As long at least one of the variables' type in the multiplication is big enough to store the result then you are okay.  So in this case both</p>\n\n<pre><code>val * static_cast&lt;double&gt;(val)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>val * static_cast&lt;long long&gt;(val)\n</code></pre>\n\n<p>Will give you the correct result.  You could also just change <code>val</code> to be a double and that will also solve the problem.</p>\n"}], "owner": {"reputation": 3537, "user_id": 942589, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/GEIXp.jpg?s=128&g=1", "display_name": "Rajat Saxena", "link": "https://stackoverflow.com/users/942589/rajat-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1519235200, "answer_count": 1, "score": 0, "last_activity_date": 1519235414, "creation_date": 1519234728, "last_edit_date": 1519235112, "question_id": 48912210, "link": "https://stackoverflow.com/questions/48912210/why-double-is-not-storing-the-product-of-two-int", "closed_reason": "Duplicate", "title": "Why double is not storing the product of two int", "body": "<p>I am trying to learn the basic of how numbers are stored in computer memory. Hence I've picked up C++ recently. I wrote this following function, to calculate the square of any int value.</p>\n\n<pre><code> // since integer can go upto 65K value, hence the return\n // value is double to accomodate the square of highest int value.\n double square(int val) {\n     return val*val;\n }\n</code></pre>\n\n<p>Why is it giving me a wrong answer for <code>65535</code>, which as per my understanding is the largest number that can be stored in the variable of type <code>int</code>? I've also discovered that there are things like:</p>\n\n<p><code>std::numeric_limits&lt;int&gt;::max()</code> </p>\n\n<p>which gives me <code>2147483647</code>. This in turn confused me even more, but I am seeking an explanation for why my <code>square</code> function is failing.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>For <code>65535</code> my <code>g++</code> compiler is giving me: <code>-131071</code>.</p>\n"}, {"tags": ["c++", "macos", "boost"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 1, "creation_date": 1519238075, "post_id": 48912957, "comment_id": 84832472, "body": "Yes this appears to run fine. But you are using a different overload of erase than the one I am using in my example.  When I replace your map.erase with the for loop in my example, the first assert triggers."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 0, "creation_date": 1519241038, "post_id": 48912957, "comment_id": 84833999, "body": "Ah. Lightbulb. That&#39;s it. I forgot it&#39;s not a tree-based map. Updating the answer."}, {"owner": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 0, "creation_date": 1519241993, "post_id": 48912957, "comment_id": 84834507, "body": "I dont believe your explanation is correct.  In all the other map types (including std::map and std::multimap), the iterator-erase overloads return an iterator to the element after the erase.  There would be little reason to return that iterator in boost::container::flat_multimap if it is always invalidated.  Using the key-erase overload is not an option in our application."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 0, "creation_date": 1519242270, "post_id": 48912957, "comment_id": 84834652, "body": "Are you saying the documentation is a lie? It&#39;s pretty clear, and obviously makes sense, because otherwise there would be no difference between <code>std::map</code> and <code>flat_map</code>. Of course, you could need this overload, but in that case you either need to use a container with iterator stability <b>or</b> order the <code>erase</code> calls such that the iterator invalidation suits your needs."}, {"owner": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 0, "creation_date": 1519242609, "post_id": 48912957, "comment_id": 84834848, "body": "There&#39;s no reason why the erase cant return a valid iterator (after it has invalidated all the existing iterators) just because it is backed by a vector.  In fact, the docs say it does this:  <a href=\"http://www.boost.org/doc/libs/1_65_1/doc/html/boost/container/flat_map.html#idp47710672-bb\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_65_1/doc/html/boost/container/&hellip;</a>"}, {"owner": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 1, "creation_date": 1519242718, "post_id": 48912957, "comment_id": 84834912, "body": "Not only that but it appears to do so correctly for all other optimization modes on AppleClang and does so for GCC on all optimization modes."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "edited": false, "score": 1, "creation_date": 1519243438, "post_id": 48912957, "comment_id": 84835311, "body": "Hmmm. Yeah. You are making sense too. You&#39;re right. Then my lightbulb went off again. There must be a bug in the implementation of either <code>flat_map</code>, <code>libc++</code> or the compiler is generating invalid code. Mmm. I don&#39;t have a mac so I won&#39;t be able to reproduce things for now. (Rolled back the answer)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1519243467, "last_edit_date": 1519243467, "creation_date": 1519237563, "answer_id": 48912957, "question_id": 48912062, "link": "https://stackoverflow.com/questions/48912062/boostcontainerflat-multimap-crash-on-osx-appleclang-in-release-mode/48912957#48912957", "title": "boost::container::flat_multimap crash on OSX/AppleClang in Release mode", "body": "<p>I don't see anything actually /wrong/ with the code.</p>\n\n<p>There is quite a bit of code smell - does the \"equivalent\" program here show the same problem?</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b9e1c0319762029e\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/container/flat_map.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing multimap = boost::container::flat_multimap&lt;int *, int&gt;;\n\nint main() {\n    int ks[] = { 0, 1 }; // allocation pool outlives map and key_value_pairs\n\n    multimap map;\n    for (int &amp;k : ks)\n        map.emplace(&amp;k, k);\n\n    std::vector&lt;multimap::value_type&gt; const key_value_pairs(map.begin(), map.end());\n\n    map.erase(key_value_pairs[0].first);\n\n    assert(map.size() == 1);\n    assert(map.begin()-&gt;first == key_value_pairs[1].first);\n\n    assert(map.count(&amp;ks[0]) == 0);\n    assert(map.count(&amp;ks[1]) == 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 889257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e818788f00d984ab36e2b91b19822ac?s=128&d=identicon&r=PG", "display_name": "Ho Cheung", "link": "https://stackoverflow.com/users/889257/ho-cheung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1519243467, "creation_date": 1519234223, "last_edit_date": 1519234816, "question_id": 48912062, "link": "https://stackoverflow.com/questions/48912062/boostcontainerflat-multimap-crash-on-osx-appleclang-in-release-mode", "title": "boost::container::flat_multimap crash on OSX/AppleClang in Release mode", "body": "<p>I seem to have an issue with boost::container::flat_multimap (Boost 1.66.0) on MacOS/AppleClang in <strong>Release</strong> mode (-O3). I tested in Ubuntu 17.10/GCC7.2 and Oracle Linux/GCC7.2.1 and the issues do not appear there.</p>\n\n<p>Below is a minimum reproducible example.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n#include &lt;boost/container/flat_map.hpp&gt;\n\nusing multimap = boost::container::flat_multimap&lt;int *, int&gt;;\n\nint main(int argc, char **argv)\n{\n    multimap map;\n    std::vector&lt;std::pair&lt;int *, int&gt;&gt; key_value_pairs;\n\n    for (int k = 0; k &lt; 2; k++) {\n        int * new_int = new int;\n        *new_int = k;\n        map.emplace(new_int, k);\n        key_value_pairs.emplace_back(new_int, k);\n    }\n\n    for (auto it = map.begin(); it != map.end();) {\n        if (it-&gt;first == key_value_pairs[0].first) {\n            it = map.erase(it);\n        } else {\n            ++it;\n        }\n    }\n\n    // Should only be one map element left (key_value_pairs[1])\n    auto it = map.find(key_value_pairs[1].first);\n    if (it == map.end()) {\n        throw std::logic_error(\"Could not find key\");\n    }\n\n    std::cout  &lt;&lt; \"Success!\" &lt;&lt; std::endl;\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Clang version</p>\n\n<pre><code>hoc$ clang --version\nApple LLVM version 9.0.0 (clang-900.0.39.2)\nTarget: x86_64-apple-darwin17.4.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n\n<p>In this example, we generate 2 int pointers and insert them as the key into the boost::container::flat_multimap. Then we traverse the map and erase one of the entries by identifying the key. Subsequently we try to find the non-erased element by key, but sometimes it is not found (the std::logic_error at line 31 is triggered sometimes).</p>\n\n<p>Is there a bug in my code? Or the container?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1519233415, "post_id": 48911748, "comment_id": 84829876, "body": "Questions seeking debugging help (&quot;<b>why isn&#39;t this code working?</b>&quot;) must include the <i>desired behavior</i>, a <i>specific problem or error</i> and the <i>shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1519233631, "post_id": 48911748, "comment_id": 84830006, "body": "this code works perfectly fine, no need for debugging, and I have included that part of a function which I did not understand yet, and that is my question."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519233858, "post_id": 48911748, "comment_id": 84830153, "body": "What don&#39;t you understand about it?  Did you copy this code from somewhere and want to know how it works or is this your own code?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1519233862, "post_id": 48911748, "comment_id": 84830156, "body": "&quot;<i>this code works perfectly fine</i>&quot; and &quot;<i>Please help me figure this out</i>&quot;. Without a proper question, pick one. I sincerely don&#39;t know what you expect of us. What is your question? You want us to explain those three lines of code?"}, {"owner": {"reputation": 353, "user_id": 7098141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1105fd8cbe0fd75664da427334f064?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/7098141/mike"}, "edited": false, "score": 0, "creation_date": 1519233939, "post_id": 48911748, "comment_id": 84830219, "body": "See the Simple Method section <a href=\"https://en.m.wikipedia.org/wiki/Primality_test\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Primality_test</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519234024, "post_id": 48911748, "comment_id": 84830280, "body": "Try your program with the test case of 13, and 17."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519234208, "post_id": 48911748, "comment_id": 84830386, "body": "Regardless of the algorithm you use, checking any number larger than <code>sqrt(n)</code> is pointless."}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519234381, "post_id": 48911748, "comment_id": 84830483, "body": "ya, this problem is from hackerank, and their time matters idk but scanning till sqrt(candidate) is not working, maybe I did some mistakes in the code"}, {"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "edited": false, "score": 0, "creation_date": 1519234658, "post_id": 48911748, "comment_id": 84830622, "body": "@kanishktanwar: Your code is correct. This should pass all test cases since I tried same approach."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519234159, "post_id": 48911963, "comment_id": 84830360, "body": "One issue is the incrementing by 6.  The prime numbers 13 and 17 slip through."}, {"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519234551, "post_id": 48911963, "comment_id": 84830568, "body": "@ThomasMatthews: No they don&#39;t. Look at the code. If <code>13</code> and <code>17</code> are encountered, it will just check initial condition for divisibility by 2 and 3, won&#39;t go inside for loop and at last, return true. It would return true for <code>isPrime(13)</code> and <code>isPrime(17)</code> in my opinion."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519234775, "post_id": 48911963, "comment_id": 84830690, "body": "@ThomasMatthews 13 and 17 work: <a href=\"http://coliru.stacked-crooked.com/a/c4b9d02a1e29cc3d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/c4b9d02a1e29cc3d</a>.  If you never enter the loop you still return true."}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519234813, "post_id": 48911963, "comment_id": 84830717, "body": "well I still can&#39;t understand that i*i here,"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519235015, "post_id": 48911963, "comment_id": 84830836, "body": "@kanishktanwar If <code>i * i == n</code>, what is <code>i</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519235041, "post_id": 48911963, "comment_id": 84830847, "body": "My bad, I was thinking opposite return values."}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519235299, "post_id": 48911963, "comment_id": 84830985, "body": "damn, i am editing my above comment and I cant because its above 5 minutes, I am asking is whether i*i part is a necessity, can we just sqrt(37) to get the desired answer?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 1, "creation_date": 1519235499, "post_id": 48911963, "comment_id": 84831093, "body": "@kanishktanwar <code>sqrt</code> is expensive.  <code>i * i</code> is much cheaper."}, {"owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "edited": false, "score": 1, "creation_date": 1519235552, "post_id": 48911963, "comment_id": 84831126, "body": "you can but for competitive filed, you should try <code>i*i</code> approach as compared to <code>sqrt</code> one."}], "tags": [], "owner": {"reputation": 1638, "user_id": 7518561, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6361386e37f3f0da75f732f5c0d84458?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHunter", "link": "https://stackoverflow.com/users/7518561/codehunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1519233930, "creation_date": 1519233930, "answer_id": 48911963, "question_id": 48911748, "link": "https://stackoverflow.com/questions/48911748/finding-whether-a-number-is-prime-or-not-c/48911963#48911963", "title": "Finding whether a number is prime or not c++", "body": "<p>Well, this is one of the classic algorithms for checking a prime nature of number. So basically, you are checking for divisibility by 2 and 3 right before the loop starts.</p>\n\n<p>Then for checking with other numbers, you start from 5 and go till that <code>i*i = n</code>. That is because a number <code>n</code> which is divisible by any number <code>i</code> would always mean that number <code>i</code> is less than the square root of <code>n</code>. You can verify it through various examples. Say 37. Smallest number for which <code>i*i&gt;n</code> is <code>6</code> and hence, you need to check it only till number <code>6</code> and not go beyond for checking ahead because all the other multiples you have already checked. So, if you don't find any number beyond <code>6</code> here, you need not to go further for check.</p>\n\n<p>Second part is the other condition where you are incrementing by 2 for checking <code>if</code> condition. This is because you are starting the divisibility by <code>5</code> and incrementing it by <code>6</code> everytime. By doing this, you are ensuring that you only check possible prime numbers for the divisibility test and not any others.</p>\n\n<p>I hope the logic is clear now. Feel free to ask any doubts you have in comments.</p>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519235876, "post_id": 48912314, "comment_id": 84831325, "body": "nice explanation on point, little question in the loop for(int i=5; i<i>i&lt;=n; i=i+2) the testing part has i</i>i meaning the loop will continue until 25&lt;=5 right? so why this loop still goes. I don&#39;t understand this testing condition at all gosh."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519236069, "post_id": 48912314, "comment_id": 84831447, "body": "@kanishktanwar, The loop variable starts with 5. Hence, it will start with testing <code>25 &lt; n</code>, not <code>25 &lt; 5</code>. If <code>n</code> is 200, the first test will be <code>25 &lt; 200</code>. The second test will be <code>11*11 &lt; 200</code>. The third test will be <code>17*17 &lt; 200</code>, etc."}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519236334, "post_id": 48912314, "comment_id": 84831583, "body": "that means when it reaches test condition 17 it will end right?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 1, "creation_date": 1519236968, "post_id": 48912314, "comment_id": 84831912, "body": "@kanishktanwar, I had a brain lapse there. You are right. It will stop when <code>i</code> is <code>17</code>."}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1519237101, "post_id": 48912314, "comment_id": 84831970, "body": "thanks for the clarification, at this point I am onto some other dimension, the only thing coming to my mind is just quit this, and sleep thanks for sharing the information,and on point explanation"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1519235529, "last_edit_date": 1519235529, "creation_date": 1519235154, "answer_id": 48912314, "question_id": 48911748, "link": "https://stackoverflow.com/questions/48911748/finding-whether-a-number-is-prime-or-not-c/48912314#48912314", "title": "Finding whether a number is prime or not c++", "body": "<p>The loop</p>\n\n<pre><code>for (int i=5; i*i&lt;=n; i=i+6)\n  if (n%i == 0 || n%(i+2) == 0)\n    return false;\n</code></pre>\n\n<p>could have been written as:</p>\n\n<pre><code>for (int i=5; i*i&lt;=n; i=i+2)\n  if (n%i == 0 )\n    return false;\n</code></pre>\n\n<p>for easier understanding. You check whether the number is divisible by:</p>\n\n<pre><code>5 7 9 11 13, etc.\n</code></pre>\n\n<p>If you rearrange those odd numbers as:</p>\n\n<pre><code>5 7 9\n11 13 15\n17 19 21\n23 25 27\n</code></pre>\n\n<p>etc.,</p>\n\n<p>you'll notice that the all the numbers in the last column are multiples of 3. If any number is divisible by those, they are divisible by 3 also. Since the function already checks whether the number is divisible by 3 at the beginning, it's not necessary to check that. Hence, we need to check whether the number is divisible only by:</p>\n\n<pre><code>5 7 \n11 13\n17 19\n23 25\n</code></pre>\n\n<p>etc.</p>\n\n<p>The patter for those number is:</p>\n\n<pre><code>i i+2\n</code></pre>\n\n<p>with the increment between the rows being 6. You can translate that to:</p>\n\n<ol>\n<li>Start with <code>i = 5</code>  </li>\n<li>Check whether the number is divisible by <code>i</code> or <code>i+2</code>. If so, return <code>false</code>.  </li>\n<li>Increment <code>i</code> by <code>6</code> and repeat.   </li>\n</ol>\n\n<p>That's what the <code>for</code> loop does.</p>\n\n<p>Why is the conditional of the <code>for</code> statement <code>i*i &lt;= n</code>?</p>\n\n<p>That's because a number cannot be divisible by any number greater than its square root.  If you reach the point where <code>i*i</code> > <code>n</code>, you are assured that <code>n</code> is not divisible by <code>i</code>. Continuing with the loop for any <code>i</code> greater than that will not change the value of the conditional. The number is a prime number when we reach that point.</p>\n"}], "owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 2, "accepted_answer_id": 48912314, "answer_count": 2, "score": 1, "last_activity_date": 1519235529, "creation_date": 1519233179, "question_id": 48911748, "link": "https://stackoverflow.com/questions/48911748/finding-whether-a-number-is-prime-or-not-c", "title": "Finding whether a number is prime or not c++", "body": "<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nbool isPrime(int n)\n{\n    if (n &lt;= 1)  return false;\n    if (n &lt;= 3)  return true;\n\n    if (n%2 == 0 || n%3 == 0) return false;\n\n    for (int i=5; i*i&lt;=n; i=i+6)\n        if (n%i == 0 || n%(i+2) == 0)\n           return false;\n\n    return true;\n}\n\nint main() {\n    int T,n;\n    cin&gt;&gt;T;\n    while(T--){\n    cin&gt;&gt;n;\n    isPrime(n)?  cout &lt;&lt; \"Prime\\n\": cout &lt;&lt; \"Not prime\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Hey, so I am working on this code to find whether a number is a prime or not,\nand I did lots of research but I am unable to find the working of this step.</p>\n\n<p>in isprime() function</p>\n\n<pre><code>for (int i=5; i*i&lt;=n; i=i+6)\nif (n%i == 0 || n%(i+2) == 0)\nreturn false;\n</code></pre>\n\n<p>Please help me figure this out any help is appreciated</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 7, "creation_date": 1519233139, "post_id": 48911680, "comment_id": 84829697, "body": "Why not simply use <code>s.erase(std::remove(s.begin(), s.end(), &#39;,&#39;), s.end());</code>?"}, {"owner": {"reputation": 3731, "user_id": 259846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fe2c699ec4e6a25c54d0bb9fa427cea3?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/259846/matt"}, "edited": false, "score": 6, "creation_date": 1519233265, "post_id": 48911680, "comment_id": 84829788, "body": "Its because when you delete a comma, it shifts everything after it forward one position in the string, but you still increment &#39;i&#39; meaning it skips the character that replaces the comma when its deleted"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1519233361, "post_id": 48911680, "comment_id": 84829845, "body": "So is your goal to remove all commas from the string?  Or is it something else?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8169393"}, "edited": false, "score": 0, "creation_date": 1519233383, "post_id": 48911680, "comment_id": 84829859, "body": "Oh okay, I get that. I am not quite familiar with these actually. Thanks @above(s)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1519233563, "post_id": 48911680, "comment_id": 84829961, "body": "@Mathbg -- Also, don&#39;t do this: <code>#include &lt;bits&#47;stdc++.h&gt;</code>.  Include the proper header files, not this one, as this has all sorts of implications (not standard is just one of them)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8169393"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1519233963, "post_id": 48911680, "comment_id": 84830238, "body": "@PaulMcKenzie Sure, thanks a lot"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519234160, "post_id": 48911680, "comment_id": 84830362, "body": "@Mathbg: Why are you writing an answer in the comments section?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1519236164, "post_id": 48911680, "comment_id": 84831497, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1519236190, "post_id": 48911680, "comment_id": 84831508, "body": "Your image of text <a href=\"//meta.unix.stackexchange.com/q/4086\">isn&#39;t very helpful</a>.  It can&#39;t be read aloud or copied into an editor, and it doesn&#39;t index very well, meaning that other users with the same problem are less likely to find the answer here.  Please <a href=\"https://stackoverflow.com/posts/48911680/edit\">edit</a> your post to incorporate the relevant text directly (preferably using copy+paste to avoid transcription errors)."}], "answers": [{"tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": true, "score": 6, "last_activity_date": 1519233471, "creation_date": 1519233471, "answer_id": 48911835, "question_id": 48911680, "link": "https://stackoverflow.com/questions/48911680/why-isnt-every-comma-character-tackled-in-the-code/48911835#48911835", "title": "Why isn&#39;t every comma character tackled in the code?", "body": "<p>You must conditionally increment the index. Looking at <code>ff,,f</code></p>\n\n<ul>\n<li><code>s[0]</code> is <code>f</code></li>\n<li><code>s[1]</code> is <code>f</code></li>\n<li><code>s[2]</code> is <code>,</code> -> remove <code>,</code></li>\n<li>now <code>s</code> is <code>ff,f</code> and <code>s[3]</code> is <code>f</code>, <em>but <code>s[2]</code> is <code>,</code></em></li>\n</ul>\n\n<p>To fix this, you must increase the index only, when the current character is <em>not</em> <code>,</code>.</p>\n\n<pre><code>for (int i = 0; i &lt; s.length(); ) {\n    if (s.at(i) == ',') {\n        s.erase(s.begin() + i);\n        cout &lt;&lt; s &lt;&lt; endl;\n    } else {\n        // current character is not ','\n        ++i;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8169393"}, "edited": false, "score": 0, "creation_date": 1519234450, "post_id": 48911967, "comment_id": 84830514, "body": "I get you and cppreference seems good for quick references of functions"}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 5, "last_activity_date": 1519233939, "creation_date": 1519233939, "answer_id": 48911967, "question_id": 48911680, "link": "https://stackoverflow.com/questions/48911680/why-isnt-every-comma-character-tackled-in-the-code/48911967#48911967", "title": "Why isn&#39;t every comma character tackled in the code?", "body": "<p>If your goal is to erase all commas in a string, the easiest way to do that is to use <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"noreferrer\">std::remove</a> from the <code>&lt;algorithm&gt;</code> header.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n   std::string s = \"This,,,,string,,contains a,,,,lot,of,,commas,,,\";\n   s.erase(std::remove(s.begin(), s.end(), ','), s.end());\n   std::cout &lt;&lt; s;\n}\n</code></pre>\n\n<p><a href=\"https://www.ideone.com/29FiWZ\" rel=\"noreferrer\">Live Example</a></p>\n\n<p>The code above removes the need to write <code>for</code> loops and erase a character at a time.  Your current method of using a <code>for</code> loop and erasing a single comma character at a time is not as efficient as the code above.  </p>\n\n<p>The <code>remove</code> algorithm doesn't actually remove items, but moves them to the end of the container, and thus returns an iterator to the beginning of the items that were \"removed\".  The <code>erase</code> is called upon to do the final removal of the elements at the end of the container.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8169393"}, "edited": false, "score": 0, "creation_date": 1519242545, "post_id": 48913791, "comment_id": 84834810, "body": "Yes, I had done that when the one I mentioned in the post failed. Thanks anyway :)"}], "tags": [], "owner": {"reputation": 3731, "user_id": 259846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fe2c699ec4e6a25c54d0bb9fa427cea3?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/259846/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1519240719, "creation_date": 1519240719, "answer_id": 48913791, "question_id": 48911680, "link": "https://stackoverflow.com/questions/48911680/why-isnt-every-comma-character-tackled-in-the-code/48913791#48913791", "title": "Why isn&#39;t every comma character tackled in the code?", "body": "<p>Another option is to just iterate through the string backwards, that way you don't need the conditional iterate, as the remaining parts to check wont move.</p>\n\n<p>This can be a good pattern for any \"iterate through collection, checking each item and removing if necessary\" type thing.</p>\n\n<pre><code>for (int i = s.length()-1; i &gt;=0; i-- ) {\n    if (s.at(i) == ',') {\n        s.erase(s.begin() + i);\n        cout &lt;&lt; s &lt;&lt; endl;\n    } \n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8169393"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 48911835, "answer_count": 3, "score": 0, "last_activity_date": 1519292378, "creation_date": 1519233031, "last_edit_date": 1519292378, "question_id": 48911680, "link": "https://stackoverflow.com/questions/48911680/why-isnt-every-comma-character-tackled-in-the-code", "title": "Why isn&#39;t every comma character tackled in the code?", "body": "<p>Below is a piece of code I was trying to use to remove the (<code>,</code>) from a string. But I find that there's an issue when more than one concerned char is present side-by-side. </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main()\n{\nstring s; cin &gt;&gt;s;\nfor (int i=0; i&lt;=s.length()-1; i++)\n    if (s.at(i)==',')\n        {s.erase(s.begin()+i); cout&lt;&lt;s&lt;&lt;endl;}\ncout&lt;&lt;s;\nreturn 0;\n}\n</code></pre>\n\n<p>Note that I have yielded the resultant string after every operation so that it's easier to understand.</p>\n\n<p>Here's the output when more than one (<code>,</code>) are placed in a row:</p>\n\n<pre><code>ff,,f,,ffff,,,,ff,f,f.,fwer..ew,,,\nff,f,,ffff,,,,ff,f,f.,fwer..ew,,,\nff,f,ffff,,,,ff,f,f.,fwer..ew,,,\nff,f,ffff,,,ff,f,f.,fwer..ew,,,\nff,f,ffff,,ff,f,f.,fwer..ew,,,\nff,f,ffff,,fff,f.,fwer..ew,,,\nff,f,ffff,,ffff.,fwer..ew,,,\nff,f,ffff,,ffff.fwer..ew,,,\nff,f,ffff,,ffff.fwer..ew,,\nff,f,ffff,,ffff.fwer..ew,\nff,f,ffff,,ffff.fwer..ew,\n</code></pre>\n"}, {"tags": ["c++", "class", "constructor"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233079, "post_id": 48911648, "comment_id": 84829662, "body": "Why is <code>escola</code> a reference? You would, typically, initialize those in constructor initializer list, but if you can&#39;t change the arguments of the constructor - that would, at best, bind to local variable, which would lead to UB, when trying to use it."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1519233135, "post_id": 48911648, "comment_id": 84829694, "body": "Google &quot;member initializer list&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519234001, "post_id": 48911648, "comment_id": 84830264, "body": "@SergeyA I would welcome constructive criticism of my answer if you find it bad."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519238879, "post_id": 48911648, "comment_id": 84832907, "body": "@JesperJuhl I do not see how it answers OP questions. Granted, OPs question possibly can not be answered, but than one should just refrain from answering."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233132, "post_id": 48911676, "comment_id": 84829693, "body": "This would lead to UB, upon the use of <code>escola</code>, due to it being a dangling reference."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519233153, "post_id": 48911676, "comment_id": 84829709, "body": "Another example of UB-peddling."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233219, "post_id": 48911676, "comment_id": 84829752, "body": "After the edit this doesn&#39;t fix the compiler error the OP is getting."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233279, "post_id": 48911676, "comment_id": 84829797, "body": "@AlgirdasPreid\u017eius The edit you referred to fixed the first compiler error. My most recent edit should address the other error."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233367, "post_id": 48911676, "comment_id": 84829850, "body": "@Code-Apprentice However, the OP stated that they can&#39;t change the constructor arguments."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233480, "post_id": 48911676, "comment_id": 84829910, "body": "@AlgirdasPreid\u017eius Thanks for your feedback. How would you suggest doing this within the constraints given by the OP?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233903, "post_id": 48911676, "comment_id": 84830196, "body": "@Code-Apprentice So that <code>escola</code> wouldn&#39;t be a reference, in the first place. That wouldn&#39;t involve changing a constructor at all."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 1, "last_activity_date": 1519233241, "last_edit_date": 1519233241, "creation_date": 1519233022, "answer_id": 48911676, "question_id": 48911648, "link": "https://stackoverflow.com/questions/48911648/constructor-parameters-c-const-and/48911676#48911676", "title": "Constructor parameters C++ const and &amp;", "body": "<p>For <code>const</code> members, you need to use an initializer list:</p>\n\n<pre><code>Aluno(string nome, string escola, int numero)\n    : numero(numero) {\n    // ...\n}\n</code></pre>\n\n<p>You also need to initialize references in the same way, but this requires passing a reference as the parameter:</p>\n\n<pre><code>Aluno(string nome, string&amp; escola, int numero)\n    : escola(escola), numero(numero) {\n    // ...\n}\n</code></pre>\n\n<p>Even though it isn't required by the compiler, initializing <code>nome</code> in the same way is more efficient.</p>\n\n<pre><code>Aluno(string nome, string&amp; escola, int numero)\n    : nome(nome), escola(escola), numero(numero) {\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1519233105, "post_id": 48911686, "comment_id": 84829674, "body": "But what is it referring <i>to</i>?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233121, "post_id": 48911686, "comment_id": 84829685, "body": "This would lead to UB, upon the use of <code>escola</code>, due to it being a dangling reference."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519233129, "post_id": 48911686, "comment_id": 84829692, "body": "This will fix compilation error (possibly), but would be UB."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233258, "post_id": 48911686, "comment_id": 84829785, "body": "@scohe001 OP stated that they can&#39;t change the constructor arguments."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233440, "post_id": 48911686, "comment_id": 84829891, "body": "@AlgirdasPreid\u017eius I think the OP was referring to the class members"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": -1, "last_activity_date": 1519233398, "last_edit_date": 1519233398, "creation_date": 1519233045, "answer_id": 48911686, "question_id": 48911648, "link": "https://stackoverflow.com/questions/48911648/constructor-parameters-c-const-and/48911686#48911686", "title": "Constructor parameters C++ const and &amp;", "body": "<p><code>escola</code> is a reference, so it needs to be initialized in the field initialization list as it's being allocated. The same is true for your const <code>numero</code>:</p>\n\n<pre><code>Aluno(string nome, string escola, int numero) : \n    nome(nome), escola(escola), numero(numero) { }\n</code></pre>\n\n<p>However, this would result in UB since the parameter <code>escola</code> that your member <code>escola</code> is referencing will go out of scope. As such, the parameter must also be a reference:</p>\n\n<pre><code>Aluno(string nome, string &amp;escola, int numero) : \n    nome(nome), escola(escola), numero(numero) { }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1519233207, "creation_date": 1519233207, "answer_id": 48911750, "question_id": 48911648, "link": "https://stackoverflow.com/questions/48911648/constructor-parameters-c-const-and/48911750#48911750", "title": "Constructor parameters C++ const and &amp;", "body": "<p>To <em>initialize</em> members you need to use either in-class initialization or the constructor initialization list. <em>Not</em> the constructor body.</p>\n\n<p>In the constructor body you may re-assign values to members, but at that point they have already been default initialized (unless you explicitly initialized them in-class or by using the initialization list) and not all types can be default initialized (like references).</p>\n"}, {"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519233291, "post_id": 48911761, "comment_id": 84829805, "body": "This would involve changing the constructor arguments: OP stated that they are not allowed to do so."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519234016, "post_id": 48911761, "comment_id": 84830272, "body": "@AlgirdasPreid\u017eius I know, but the requirement doesn&#39;t make sense, it would cause undefined behavior, so something has to be changed."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519235750, "post_id": 48911761, "comment_id": 84831248, "body": "&quot;MUST be initialized in a constructor&#39;s member initialization list&quot; - not entirely correct. Using a <a href=\"http://en.cppreference.com/w/cpp/language/data_members#Member_initialization\" rel=\"nofollow noreferrer\">default member initializer</a> is also ok."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 4, "last_activity_date": 1519233679, "last_edit_date": 1519233679, "creation_date": 1519233234, "answer_id": 48911761, "question_id": 48911648, "link": "https://stackoverflow.com/questions/48911648/constructor-parameters-c-const-and/48911761#48911761", "title": "Constructor parameters C++ const and &amp;", "body": "<p>Class members that are <code>const</code> or references MUST be initialized in a constructor's <strong>member initialization list</strong>, eg:</p>\n\n<pre><code>class Aluno\n{\n    string nome;\n    string&amp; escola;\n    const int numero;\npublic:\n    Aluno(string nome, string &amp;escola, int numero)\n        : nome(nome), escola(escola), numero(numero)\n    {\n    }\n};\n\nint main()\n{\n    string b = \"bbb\";\n    Aluno * a = new Aluno(\"aaa\", b, 123);\n    delete a; \n    return 0;\n}\n</code></pre>\n\n<p>However, notice that I had to change your <code>escola</code> input parameter.  You are passing that parameter <strong>by value</strong>, but are trying to store a reference to it. The <code>escola</code> class member would be bound to a <code>string</code> object that is local to the constructor and goes out of scope when the constructor exits, leaving the reference dangling. You don't want that.</p>\n\n<p>So, either the <code>escola</code> input parameter must be changed to a reference as well, as shown above, or else the <code>escola</code> class member can't be declared as a reference anymore, eg: </p>\n\n<pre><code>class Aluno\n{\n    string nome;\n    string escola;\n    const int numero;\npublic:\n    Aluno(string nome, string escola, int numero)\n        : nome(nome), escola(escola), numero(numero)\n    {\n    }\n};\n\nint main()\n{\n    Aluno * a = new Aluno(\"aaa\", \"bbb\", 123);\n    delete a; \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7418500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0782c3e78161adb50fd57c7f51ca5285?s=128&d=identicon&r=PG&f=1", "display_name": "pedrofranco6", "link": "https://stackoverflow.com/users/7418500/pedrofranco6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2171, "favorite_count": 0, "accepted_answer_id": 48911676, "answer_count": 4, "score": -5, "last_activity_date": 1519233679, "creation_date": 1519232894, "question_id": 48911648, "link": "https://stackoverflow.com/questions/48911648/constructor-parameters-c-const-and", "title": "Constructor parameters C++ const and &amp;", "body": "<p>I can't get the parameters of the constructor right. It's keep poping the same error over and over. The arguments of the class can't be changed i can only change the constructor.</p>\n\n<p>Error C2789 'Aluno::numero': an object of const-qualified type must be initialized</p>\n\n<p>Error C2530 'Aluno::escola': references must be initialized</p>\n\n<pre><code>class Aluno {\n    string nome;\n    string&amp; escola;\n    const int numero;\npublic:\n    Aluno(string nome, string escola, int numero){\n        this-&gt;nome = nome;\n        this-&gt;escola = escola;\n        this-&gt;numero = numero;\n    }\n};\n\nint main()\n{\n    Aluno * a = new Aluno(\"aaa\", \"bbb\", 123);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "matrix", "boost", "symmetric"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1519233263, "post_id": 48911543, "comment_id": 84829787, "body": "Well, I think you&#39;ve got all cards in hand to answer your own question. Answer this: what does <code>index</code> must be for the following to be correct: <code>m_sym(i, j) = filler[index];</code>?"}, {"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1519280074, "post_id": 48911543, "comment_id": 84847797, "body": "@YSC : Thanks a lot for your comment! That is the problem...I can&#39;t think a way... Elememnt <code>00</code> in the matrix should be filled with element <code>0</code> from the array, <code>01</code> with <code>1</code>, <code>02</code> with <code>2</code>, <code>11</code> with <code>3</code> and so on...so I can&#39;t think of an evident way!"}], "answers": [{"comments": [{"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 0, "creation_date": 1519295789, "post_id": 48914403, "comment_id": 84856570, "body": "Wow!!! Thank you so much for you reply and help! I have to say that I am confused about the first part on the for loop. I didn&#39;t know you could add conditions on a `for loop! As far as the second part is concerned, I have to say that I wish I could learn to do it like that by myslef! It&#39;s a beauty!"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 0, "creation_date": 1519295934, "post_id": 48914403, "comment_id": 84856663, "body": "<code>for(a;b;c){&#47;*...*&#47;}</code> is really just <code>{ a; while(b) { &#47;*...*&#47; continue_label: c; } }</code> <a href=\"http://en.cppreference.com/w/cpp/language/for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/for</a>"}, {"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 0, "creation_date": 1519297117, "post_id": 48914403, "comment_id": 84857428, "body": "What I don&#39;t get is how to use the second part as a constructor i.e. <code>make_symmetric m_sym(size, filler)</code> or as a function to fill symmetric i.e. <code>symmetric_matrix&lt;double, upper&gt; m_sym (3, 3); m_sym-&gt;make_symmetric(filler)</code>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 0, "creation_date": 1519297770, "post_id": 48914403, "comment_id": 84857848, "body": "Just change the definition around a bit. I can show you later"}, {"owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "edited": false, "score": 0, "creation_date": 1519298408, "post_id": 48914403, "comment_id": 84858288, "body": "Thank you very very very much!"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1519242992, "creation_date": 1519242992, "answer_id": 48914403, "question_id": 48911543, "link": "https://stackoverflow.com/questions/48911543/fill-a-symmetric-matrix-using-an-array/48914403#48914403", "title": "Fill a symmetric matrix using an array", "body": "<p>I'd simplify this a bit by just keeping an iterator that traverses filler from start to end:</p>\n\n<pre><code>symmetric_matrix&lt;double, upper&gt; m_sym (3, 3);\n\ndouble filler[6] = {0, 1, 2, 3, 4, 5};        \n\nassert(m_sym.size1() == m_sym.size2());\n\ndouble const* in = std::begin(filler);\nfor (size_t i = 0; i &lt; m_sym.size1(); ++ i)\n    for (size_t j = 0; j &lt;= i &amp;&amp; in != std::end(filler); ++ j)\n        m_sym (i, j) = *in++;\n</code></pre>\n\n<p>Prints: <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/7999d4fda56fbd06\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<p>I'd personally suggest creating a helper function like:</p>\n\n<p><strong><kbd><a href=\"https://wandbox.org/permlink/7xvqTHkbzaAHHij8\" rel=\"nofollow noreferrer\">Live On Wandbox</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;    \n#include &lt;boost/numeric/ublas/matrix.hpp&gt;\n#include &lt;boost/numeric/ublas/matrix_sparse.hpp&gt;\n#include &lt;boost/numeric/ublas/symmetric.hpp&gt;\n#include &lt;boost/numeric/ublas/io.hpp&gt;\n\nnamespace bnu = boost::numeric::ublas;\n\ntemplate &lt;typename T = double&gt;\nbnu::symmetric_matrix&lt;T, bnu::upper&gt; make_symmetric(std::initializer_list&lt;T&gt; filler) {\n    size_t n = (sqrt(8*filler.size() + 1) - 1)/2;\n    assert((n*(n+1))/2 == filler.size());\n\n    bnu::symmetric_matrix&lt;T, bnu::upper&gt; result(n, n);\n\n    auto in = std::begin(filler);\n    for (size_t i = 0; i &lt; result.size1(); ++ i)\n        for (size_t j = 0; j &lt;= i &amp;&amp; in != std::end(filler); ++ j)\n            result (i, j) = *in++;\n\n    return result;\n}\n\nint main() {\n    std::cout &lt;&lt; make_symmetric({0,1,2}) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; make_symmetric({0,1,2,3,4,5}) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; make_symmetric({0,1,2,3,4,5,6,7,8,9}) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>[2,2]((0,1),(1,2))\n[3,3]((0,1,3),(1,2,4),(3,4,5))\n[4,4]((0,1,3,6),(1,2,4,7),(3,4,5,8),(6,7,8,9))\n</code></pre>\n\n<blockquote>\n  <p>Note: the size checks use the <a href=\"https://www.wolframalpha.com/input/?i=1+%2B+2+%2B+...+n\" rel=\"nofollow noreferrer\">series expansion for <code>1 + ... + n</code></a> and the inverse of that: <a href=\"https://www.wolframalpha.com/input/?i=solve+1+%2B+2+%2B+...+n+%3D+x+for+n\" rel=\"nofollow noreferrer\"><code>n = 1/2 (sqrt(8 x + 1) - 1)</code></a></p>\n</blockquote>\n"}], "owner": {"reputation": 572, "user_id": 1708303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e44bb6c9fc739c162da56e8752374ca8?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/1708303/thanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 48914403, "answer_count": 1, "score": 1, "last_activity_date": 1519242992, "creation_date": 1519232596, "question_id": 48911543, "link": "https://stackoverflow.com/questions/48911543/fill-a-symmetric-matrix-using-an-array", "title": "Fill a symmetric matrix using an array", "body": "<p>I am trying to create a symmetric matrix <code>n x n</code> matrix and fill it using a <code>n*(n+1)/2</code> dimension array using the <code>boost</code> library in <code>c++</code>.</p>\n\n<p>So far, I am able to create the matrix, and fill it with random values using the following code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;    \n#include &lt;/usr/include/boost/numeric/ublas/matrix.hpp&gt;\n#include &lt;/usr/include/boost/numeric/ublas/matrix_sparse.hpp&gt;\n#include &lt;/usr/include/boost/numeric/ublas/symmetric.hpp&gt;\n#include &lt;/usr/include/boost/numeric/ublas/io.hpp&gt;\n\nusing namespace std;\n\n\n\nint test_boost () {\n    using namespace boost::numeric::ublas;\n    symmetric_matrix&lt;double, upper&gt; m_sym (3, 3);\n\n    double filler[6] = {0, 1, 2, 3, 4, 5};        \n\n    for (unsigned i = 0; i &lt; m_sym.size1 (); ++ i)\n        for (unsigned j = i; j &lt; m_sym.size2 (); ++ j)\n            m_sym (i, j) = filler[i+j*m_sym.size1()];\n\n    std::cout &lt;&lt; m_sym &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>What I am trying to do is fill the upper (or lower) part of the symmetric matrix using the values from the array <code>filler</code>. So the output upper symmetric matrix should be</p>\n\n<pre><code>         |      0    |      1    |      2    |\n------------------------------------------------\n   0 |          0           1           3    \n   1 |          1           2           4\n   2 |          3           4           5\n</code></pre>\n\n<p>Any idea on how to do that?</p>\n"}, {"tags": ["c++", "labview"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1519232546, "post_id": 48911427, "comment_id": 84829316, "body": "<b><i>I tried to install &quot;Redistributing Visual C++ package for x86&quot;. It did not help</i></b> Maybe you installed the wrong version. I mean the redistributable from a different version of Visual Studio."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1519232549, "post_id": 48911427, "comment_id": 84829319, "body": "There are several of these redistributables: <a href=\"https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/help/2977003/&hellip;</a>. And for each version there is the 32 and the 64 bit version"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1519232606, "post_id": 48911427, "comment_id": 84829352, "body": "Did you install the package that corresponds to your version of VS? &quot;for x86&quot; are you running 32 bit code?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1519232692, "post_id": 48911427, "comment_id": 84829410, "body": "Please include the <b>exact</b> error message you received, and the specific version of VS used to compile your DLL."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1519232792, "post_id": 48911427, "comment_id": 84829482, "body": "<b><i>call another DLL from MicroChip</i></b> Was that compiled with the same version of Visual Studio that you use? Perhaps you have a more complicated problem (mixing Visual Studio versions causing more than 1 CRT to be used at the same time)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1519232896, "post_id": 48911427, "comment_id": 84829557, "body": "I&#39;ll be honest here -- if you&#39;re going to distribute your app to other computers, you need to know every component that is required for your app to run, and not have to run into errors like this.  An installation package is just one option that addresses issues like this."}, {"owner": {"reputation": 3618, "user_id": 147971, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12159b343fb05723ea418adf10367cc8?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/147971/rich"}, "edited": false, "score": 0, "creation_date": 1519236893, "post_id": 48911427, "comment_id": 84831877, "body": "You can use a program called dependencywalker to find your dll&#39;s dependencies if you really don&#39;t want to create an installer. see here <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependencywalker.com</a>"}, {"owner": {"reputation": 1, "user_id": 9392157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24684903fbf4d6dc6e1b34ac377d7d44?s=128&d=identicon&r=PG&f=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/9392157/artem"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519377365, "post_id": 48911427, "comment_id": 84895663, "body": "@drescherjm I tried to install the last version from microsoft.com and I found the same installer in VC\\Redist\\MSVC\\vc_redist.x86.exe. Install it. But results is the same."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519391092, "post_id": 48911427, "comment_id": 84903293, "body": "That is why I asked you what compiler version compiled the dll from Microchip. It may be important that you use the same version of Visual Studio than what they are using. That is unless the .dll has a <code>c</code> interface and isolates the memory allocation across the dll boundry. Also it should tell you what version of msvcrt.dll was missing. There should be a version number in the file name."}, {"owner": {"reputation": 1, "user_id": 9392157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24684903fbf4d6dc6e1b34ac377d7d44?s=128&d=identicon&r=PG&f=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/9392157/artem"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519406147, "post_id": 48911427, "comment_id": 84912822, "body": "@drescherjm Thank you for your answer! I have found a solution. Something happened with VS. When I pressed &quot;Release&quot; mode, VS compiled in &quot;Debug&quot;. I used another PC to compile this project and it works! Thank you for your response! So, <b>the solution is</b>: set /MD tag in Runtime Library, compile a project, use .dll from release folder."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519406333, "post_id": 48911427, "comment_id": 84912908, "body": "That explains a lot. The debug runtime will not be in the redistributable because it is against the Visual Studio licence to run a debug application on a machine that does not have VS installed."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9392157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24684903fbf4d6dc6e1b34ac377d7d44?s=128&d=identicon&r=PG&f=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/9392157/artem"}, "is_accepted": false, "score": 0, "last_activity_date": 1519409047, "creation_date": 1519409047, "answer_id": 48953809, "question_id": 48911427, "link": "https://stackoverflow.com/questions/48911427/why-i-cant-run-my-own-dll-on-another-pc-msvcrt-dll-is-missed/48953809#48953809", "title": "Why I can&#39;t run my own dll on another PC (msvcrt.dll is missed)", "body": "<p>Thanks all for replies! I have found a solution. Something happened with VS. When I pressed \"Release\" mode, VS compiled in \"Debug\". I used another PC to compile this project and it works! Thank you for your response! So, the solution is: set /MD tag in Runtime Library, compile a project, use .dll from release folder.</p>\n"}], "owner": {"reputation": 1, "user_id": 9392157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24684903fbf4d6dc6e1b34ac377d7d44?s=128&d=identicon&r=PG&f=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/9392157/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1519409047, "creation_date": 1519232280, "question_id": 48911427, "link": "https://stackoverflow.com/questions/48911427/why-i-cant-run-my-own-dll-on-another-pc-msvcrt-dll-is-missed", "title": "Why I can&#39;t run my own dll on another PC (msvcrt.dll is missed)", "body": "<p>I have written my own DLL that wrap UNICODE to char and call another DLL from MicroChip. When I call my DLL from LabVIEW on my PC it works well. But if I try to call this DLL from another PC, I see the error that <strong>msvcrt.dll</strong> is missed.</p>\n\n<p>To solve this problem I tried to install \"Redistributing Visual C++ package for x86\". It did not help. Also tried to compile library in \"<strong>Release</strong>\" mode with <strong>/MD</strong> tag in <strong>Runtime Library</strong> - same result.</p>\n\n<p>Could you suggest me how can I solve this problem?</p>\n"}, {"tags": ["c++", "cmake", "google-protocol-buffer"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1519231919, "post_id": 48911254, "comment_id": 84828871, "body": "do you link <code>libprotobuf</code> ? I dont see it"}, {"owner": {"reputation": 2192, "user_id": 3817790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uosws.jpg?s=128&g=1", "display_name": "Naseef Chowdhury", "link": "https://stackoverflow.com/users/3817790/naseef-chowdhury"}, "edited": false, "score": 0, "creation_date": 1519232177, "post_id": 48911254, "comment_id": 84829079, "body": "At first make sure that you are linking with <code>libprotobuf</code>."}, {"owner": {"reputation": 11, "user_id": 5502489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ca7f5ee0a8b37915f07f79fa243277?s=128&d=identicon&r=PG&f=1", "display_name": "Seraphid", "link": "https://stackoverflow.com/users/5502489/seraphid"}, "edited": false, "score": 0, "creation_date": 1519232406, "post_id": 48911254, "comment_id": 84829228, "body": "Doesn&#39;t the <code>-lprotobuf</code> flag in the Linker_Flags do that?"}, {"owner": {"reputation": 11, "user_id": 5502489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ca7f5ee0a8b37915f07f79fa243277?s=128&d=identicon&r=PG&f=1", "display_name": "Seraphid", "link": "https://stackoverflow.com/users/5502489/seraphid"}, "edited": false, "score": 0, "creation_date": 1519232810, "post_id": 48911254, "comment_id": 84829494, "body": "After making a bit of searching with what I learned from your comments, I found what I need in this answer <a href=\"https://stackoverflow.com/questions/10010398/how-to-link-google-protobuf-libraries-via-cmake-on-linux\" title=\"how to link google protobuf libraries via cmake on linux\">stackoverflow.com/questions/10010398/&hellip;</a> Thanks! Anyway, I&#39;m still not understanding how does it exactly work, so I will update the question(Sorry, I&#39;m not really proficient with cmake)"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1519233853, "post_id": 48911254, "comment_id": 84830150, "body": "<b>Never</b> place <code>-l</code> flags into <i>CMAKE_EXE_LINKER_FLAGS</i>, use <code>target_link_libraries</code> instead. In the command line for link, <i>linker flags</i> are located <i>before</i> your object files. This is why compiler <a href=\"https://stackoverflow.com/a/24675715/3440745\">cannot find them</a>. Flags created from <code>target_link_libraries</code> invocation are placed <i>after</i> your object files."}], "owner": {"reputation": 11, "user_id": 5502489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ca7f5ee0a8b37915f07f79fa243277?s=128&d=identicon&r=PG&f=1", "display_name": "Seraphid", "link": "https://stackoverflow.com/users/5502489/seraphid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 10274, "favorite_count": 0, "closed_date": 1519309283, "answer_count": 0, "score": 0, "last_activity_date": 1519233101, "creation_date": 1519231763, "last_edit_date": 1519233101, "question_id": 48911254, "link": "https://stackoverflow.com/questions/48911254/undefined-reference-to-google-protobuf", "closed_reason": "Duplicate", "title": "undefined reference to google protobuf", "body": "<p>Well, I'm having some problems trying to understand how to compile libraries that include the code generated by Google's protobuf. Here's my    CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\nset (CMAKE_CXX_STANDARD 11)\n\ninclude_directories(\n    ${CMAKE_CURRENT_SOURCE_DIR}/sandbox\n    /usr\n)\nset(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/libraries)\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/executables)\nSET(COMPILE_FLAGS \"-I/usr/local/include -pthread \")\nSET(LINK_FLAGS \"-L/usr/local/lib -lprotobuf -pthread -lpthread\")\nSET( CMAKE_CXX_FLAGS  \"${CMAKE_CXX_FLAGS} ${COMPILE_FLAGS}\" )\nSET( CMAKE_EXE_LINKER_FLAGS  \"${CMAKE_EXE_LINKER_FLAGS} ${LINK_FLAGS}\" )\n\nadd_library(\n    protoAddress\n    SHARED\n    ${CMAKE_CURRENT_SOURCE_DIR}/sandbox/addressbook.pb.cc\n)\n\n\nadd_executable(prueba sandbox/testProto.cpp)\ntarget_link_libraries(prueba protoAddress)\n</code></pre>\n\n<p>addressbook.pb.cc is the source code generated when you use protoc command with --cpp_out on Google's example:</p>\n\n<pre><code>syntax = \"proto2\";\n\npackage tutorial;\n\nmessage Person {\n  required string name = 1;\n  required int32 id = 2;\n  optional string email = 3;\n\n  enum PhoneType {\n    MOBILE = 0;\n    HOME = 1;\n    WORK = 2;\n  }\n\n  message PhoneNumber {\n    required string number = 1;\n    optional PhoneType type = 2 [default = HOME];\n  }\n\n  repeated PhoneNumber phones = 4;\n}\n\nmessage AddressBook {\n  repeated Person people = 1;\n}\n</code></pre>\n\n<p>The test I'm trying to make executable is the same of the example that uses google to explain how does it work with c++:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"addressbook.pb.h\"\nusing namespace std;\n\n// This function fills in a Person message based on user input.\nvoid PromptForAddress(tutorial::Person* person) {\n  cout &lt;&lt; \"Enter person ID number: \";\n  int id;\n  cin &gt;&gt; id;\n  person-&gt;set_id(id);\n  cin.ignore(256, '\\n');\n\n  cout &lt;&lt; \"Enter name: \";\n  getline(cin, *person-&gt;mutable_name());\n\n  cout &lt;&lt; \"Enter email address (blank for none): \";\n  string email;\n  getline(cin, email);\n  if (!email.empty()) {\n    person-&gt;set_email(email);\n  }\n\n  while (true) {\n    cout &lt;&lt; \"Enter a phone number (or leave blank to finish): \";\n    string number;\n    getline(cin, number);\n    if (number.empty()) {\n      break;\n    }\n\n    tutorial::Person::PhoneNumber* phone_number = person-&gt;add_phones();\n    phone_number-&gt;set_number(number);\n\n    cout &lt;&lt; \"Is this a mobile, home, or work phone? \";\n    string type;\n    getline(cin, type);\n    if (type == \"mobile\") {\n      phone_number-&gt;set_type(tutorial::Person::MOBILE);\n    } else if (type == \"home\") {\n      phone_number-&gt;set_type(tutorial::Person::HOME);\n    } else if (type == \"work\") {\n      phone_number-&gt;set_type(tutorial::Person::WORK);\n    } else {\n      cout &lt;&lt; \"Unknown phone type.  Using default.\" &lt;&lt; endl;\n    }\n  }\n}\n\n// Main function:  Reads the entire address book from a file,\n//   adds one person based on user input, then writes it back out to the same\n//   file.\nint main(int argc, char* argv[]) {\n  // Verify that the version of the library that we linked against is\n  // compatible with the version of the headers we compiled against.\n  GOOGLE_PROTOBUF_VERIFY_VERSION;\n\n  if (argc != 2) {\n    cerr &lt;&lt; \"Usage:  \" &lt;&lt; argv[0] &lt;&lt; \" ADDRESS_BOOK_FILE\" &lt;&lt; endl;\n    return -1;\n  }\n\n  tutorial::AddressBook address_book;\n\n  {\n    // Read the existing address book.\n    fstream input(argv[1], ios::in | ios::binary);\n    if (!input) {\n      cout &lt;&lt; argv[1] &lt;&lt; \": File not found.  Creating a new file.\" &lt;&lt; endl;\n    } else if (!address_book.ParseFromIstream(&amp;input)) {\n      cerr &lt;&lt; \"Failed to parse address book.\" &lt;&lt; endl;\n      return -1;\n    }\n  }\n\n  // Add an address.\n  PromptForAddress(address_book.add_people());\n\n  {\n    // Write the new address book back to disk.\n    fstream output(argv[1], ios::out | ios::trunc | ios::binary);\n    if (!address_book.SerializeToOstream(&amp;output)) {\n      cerr &lt;&lt; \"Failed to write address book.\" &lt;&lt; endl;\n      return -1;\n    }\n  }\n\n  // Optional:  Delete all global objects allocated by libprotobuf.\n  google::protobuf::ShutdownProtobufLibrary();\n\n  return 0;\n}\n</code></pre>\n\n<p>After trying to make this CMakeLists, I get a lot of errors, mostly from undefined reference:</p>\n\n<pre><code>    -- Configuring done\n-- Generating done\n-- Build files have been written to: /home/jverdeguer/Documents/workspace/protobuf/build\n[ 25%] Building CXX object CMakeFiles/protoAddress.dir/sandbox/addressbook.pb.cc.o\n[ 50%] Linking CXX shared library ../libraries/libprotoAddress.so\n[ 50%] Built target protoAddress\n[ 75%] Building CXX object CMakeFiles/prueba.dir/sandbox/testProto.cpp.o\n[100%] Linking CXX executable ../executables/prueba\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `main':\ntestProto.cpp:(.text+0x2f6): undefined reference to `google::protobuf::internal::VerifyVersion(int, int, char const*)'\ntestProto.cpp:(.text+0x3f0): undefined reference to `google::protobuf::Message::ParseFromIstream(std::istream*)'\ntestProto.cpp:(.text+0x4b1): undefined reference to `google::protobuf::Message::SerializeToOstream(std::ostream*) const'\ntestProto.cpp:(.text+0x502): undefined reference to `google::protobuf::ShutdownProtobufLibrary()'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::Arena::AllocHook(std::type_info const*, unsigned long) const':\ntestProto.cpp:(.text._ZNK6google8protobuf5Arena9AllocHookEPKSt9type_infom[_ZNK6google8protobuf5Arena9AllocHookEPKSt9type_infom]+0x3d): undefined reference to `google::protobuf::Arena::OnArenaAllocation(std::type_info const*, unsigned long)const'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::internal::ArenaStringPtr::CreateInstanceNoArena(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const*)':\ntestProto.cpp:(.text._ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x4b): undefined reference to `google::protobuf::internal::LogMessage::LogMessage(google::protobuf::LogLevel, char const*, int)'\ntestProto.cpp:(.text._ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x61): undefined reference to `google::protobuf::internal::LogMessage::operator&lt;&lt;(char const*)'\ntestProto.cpp:(.text._ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x79): undefined reference to `google::protobuf::internal::LogFinisher::operator=(google::protobuf::internal::LogMessage&amp;)'\ntestProto.cpp:(.text._ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x8d): undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\ntestProto.cpp:(.text._ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN6google8protobuf8internal14ArenaStringPtr21CreateInstanceNoArenaEPKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0xdc): undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::internal::GetEmptyStringAlreadyInited[abi:cxx11]()':\ntestProto.cpp:(.text._ZN6google8protobuf8internal27GetEmptyStringAlreadyInitedB5cxx11Ev[_ZN6google8protobuf8internal27GetEmptyStringAlreadyInitedB5cxx11Ev]+0x5): undefined reference to `google::protobuf::internal::fixed_address_empty_string[abi:cxx11]'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::RepeatedPtrField&lt;tutorial::Person_PhoneNumber&gt;::TypeHandler::Type* google::protobuf::internal::RepeatedPtrFieldBase::Add&lt;google::protobuf::RepeatedPtrField&lt;tutorial::Person_PhoneNumber&gt;::TypeHandler&gt;(google::protobuf::RepeatedPtrField&lt;tutorial::Person_PhoneNumber&gt;::TypeHandler::Type*)':\ntestProto.cpp:(.text._ZN6google8protobuf8internal20RepeatedPtrFieldBase3AddINS0_16RepeatedPtrFieldIN8tutorial18Person_PhoneNumberEE11TypeHandlerEEEPNT_4TypeESB_[_ZN6google8protobuf8internal20RepeatedPtrFieldBase3AddINS0_16RepeatedPtrFieldIN8tutorial18Person_PhoneNumberEE11TypeHandlerEEEPNT_4TypeESB_]+0x95): undefined reference to `google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::RepeatedPtrField&lt;tutorial::Person&gt;::TypeHandler::Type* google::protobuf::internal::RepeatedPtrFieldBase::Add&lt;google::protobuf::RepeatedPtrField&lt;tutorial::Person&gt;::TypeHandler&gt;(google::protobuf::RepeatedPtrField&lt;tutorial::Person&gt;::TypeHandler::Type*)':\ntestProto.cpp:(.text._ZN6google8protobuf8internal20RepeatedPtrFieldBase3AddINS0_16RepeatedPtrFieldIN8tutorial6PersonEE11TypeHandlerEEEPNT_4TypeESB_[_ZN6google8protobuf8internal20RepeatedPtrFieldBase3AddINS0_16RepeatedPtrFieldIN8tutorial6PersonEE11TypeHandlerEEEPNT_4TypeESB_]+0x95): undefined reference to `google::protobuf::internal::RepeatedPtrFieldBase::Reserve(int)'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::internal::GenericTypeHandler&lt;tutorial::Person_PhoneNumber&gt;::New(google::protobuf::Arena*)':\ntestProto.cpp:(.text._ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial18Person_PhoneNumberEE3NewEPNS0_5ArenaE[_ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial18Person_PhoneNumberEE3NewEPNS0_5ArenaE]+0xb6): undefined reference to `google::protobuf::internal::ArenaImpl::AllocateAligned(unsigned long)'\ntestProto.cpp:(.text._ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial18Person_PhoneNumberEE3NewEPNS0_5ArenaE[_ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial18Person_PhoneNumberEE3NewEPNS0_5ArenaE]+0xd3): undefined reference to `google::protobuf::internal::ArenaImpl::AllocateAlignedAndAddCleanup(unsigned long, void (*)(void*))'\nCMakeFiles/prueba.dir/sandbox/testProto.cpp.o: In function `google::protobuf::internal::GenericTypeHandler&lt;tutorial::Person&gt;::New(google::protobuf::Arena*)':\ntestProto.cpp:(.text._ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial6PersonEE3NewEPNS0_5ArenaE[_ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial6PersonEE3NewEPNS0_5ArenaE]+0xb6): undefined reference to `google::protobuf::internal::ArenaImpl::AllocateAligned(unsigned long)'\ntestProto.cpp:(.text._ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial6PersonEE3NewEPNS0_5ArenaE[_ZN6google8protobuf8internal18GenericTypeHandlerIN8tutorial6PersonEE3NewEPNS0_5ArenaE]+0xd3): undefined reference to `google::protobuf::internal::ArenaImpl::AllocateAlignedAndAddCleanup(unsigned long, void (*)(void*))'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::RegisterAllTypes(google::protobuf::Metadata const*, int)'\n../libraries/libprotoAddress.so: undefined reference to `vtable for google::protobuf::Closure'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::io::CodedOutputStream::WriteStringWithSizeToArray(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, unsigned char*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteEnum(int, int, google::protobuf::io::CodedOutputStream*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteStringMaybeAliased(int, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, google::protobuf::io::CodedOutputStream*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadVarintSizeAsIntFallback()'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::InitProtobufDefaults()'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteInt32(int, int, google::protobuf::io::CodedOutputStream*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::Message::CheckTypeAndMergeFrom(google::protobuf::MessageLite const&amp;)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::GoogleOnceInitImpl(long*, google::protobuf::Closure*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadTagFallback(unsigned int)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormatLite::ReadBytes(google::protobuf::io::CodedInputStream*, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::Message::GetTypeName[abi:cxx11]() const'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::Message::InitializationErrorString[abi:cxx11]() const'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormat::SerializeUnknownFields(google::protobuf::UnknownFieldSet const&amp;, google::protobuf::io::CodedOutputStream*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::Message::DiscardUnknownFields()'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::UnknownFieldSet::AddVarint(int, unsigned long)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::MessageLite::SerializeWithCachedSizesToArray(unsigned char*) const'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(int, google::protobuf::MessageLite const&amp;, google::protobuf::io::CodedOutputStream*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormatLite::VerifyUtf8String(char const*, int, google::protobuf::internal::WireFormatLite::Operation, char const*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::OnShutdownDestroyMessage(void const*)'\n../libraries/libprotoAddress.so: undefined reference to `vtable for google::protobuf::internal::FunctionClosure0'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::DescriptorPool::InternalAddGeneratedFile(void const*, int)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::ReflectionOps::Merge(google::protobuf::Message const&amp;, google::protobuf::Message*)'\n../libraries/libprotoAddress.so: undefined reference to `vtable for google::protobuf::MessageLite'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::FunctionClosure0::~FunctionClosure0()'\n../libraries/libprotoAddress.so: undefined reference to `typeinfo for google::protobuf::Message'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::UnknownFieldSet::default_instance()'\n../libraries/libprotoAddress.so: undefined reference to `vtable for google::protobuf::Message'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::UnknownFieldSet::MergeFrom(google::protobuf::UnknownFieldSet const&amp;)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::UnknownFieldSet::ClearFallback()'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::io::CodedInputStream::IncrementRecursionDepthAndPushLimit(int)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormat::SerializeUnknownFieldsToArray(google::protobuf::UnknownFieldSet const&amp;, unsigned char*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormat::ComputeUnknownFieldsSize(google::protobuf::UnknownFieldSet const&amp;)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::Message::SpaceUsedLong() const'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::io::CodedInputStream::ReadVarint32Fallback(unsigned int)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::RepeatedPtrFieldBase::InternalExtend(int)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::WireFormat::SkipField(google::protobuf::io::CodedInputStream*, unsigned int, google::protobuf::UnknownFieldSet*)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::MessageFactory::InternalRegisterGeneratedFile(char const*, void (*)(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;))'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::internal::AssignDescriptors(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, google::protobuf::internal::MigrationSchema const*, google::protobuf::Message const* const*, unsigned int const*, google::protobuf::MessageFactory*, google::protobuf::Metadata*, google::protobuf::EnumDescriptor const**, google::protobuf::ServiceDescriptor const**)'\n../libraries/libprotoAddress.so: undefined reference to `google::protobuf::io::CodedInputStream::DecrementRecursionDepthAndPopLimit(int)'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/prueba.dir/build.make:95: recipe for target '../executables/prueba' failed\nmake[2]: *** [../executables/prueba] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/prueba.dir/all' failed\nmake[1]: *** [CMakeFiles/prueba.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>It seems pretty clear that something is wrong when linking with the google library, but I can't see what is wrong or how to solve it</p>\n\n<p>FYI: I run this is Linux Mint 18 'Sonya' and installed the protoc package from the github with the default options.</p>\n\n<p>Can anyone help me solve this errors and explain what is happening? If you feel like you need more information feel free to ask. Thanks in advance.</p>\n\n<p>EDIT: \nI updated my cmakelists and now it works, but I dont understand why. I list next the new CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\nset (CMAKE_CXX_STANDARD 11)\n\ninclude(FindProtobuf)\nfind_package(Protobuf REQUIRED)\ninclude_directories(${PROTOBUF_INCLUDE_DIR})\ninclude_directories(\n    ${CMAKE_CURRENT_SOURCE_DIR}/sandbox\n    /usr\n)\nset(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/libraries)\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/executables)\nSET(COMPILE_FLAGS \"-I/usr/local/include -pthread \")\nSET(LINK_FLAGS \"-L/usr/local/lib -lprotobuf -pthread -lpthread\")\nSET( CMAKE_CXX_FLAGS  \"${CMAKE_CXX_FLAGS} ${COMPILE_FLAGS}\" )\nSET( CMAKE_EXE_LINKER_FLAGS  \"${CMAKE_EXE_LINKER_FLAGS} ${LINK_FLAGS}\" )\n\nadd_library(\n    protoAddress\n    SHARED\n    ${CMAKE_CURRENT_SOURCE_DIR}/sandbox/addressbook.pb.cc\n)\n\n\nadd_executable(prueba sandbox/testProto.cpp)\ntarget_link_libraries(prueba protoAddress ${PROTOBUF_LIBRARY})\n</code></pre>\n\n<p>I understand the fact of why I need the library, but not how Cmake does locate that and give me a link for linking both libraries.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1519231973, "post_id": 48911227, "comment_id": 84828915, "body": "A reference wrapper holds a pointer to an object. You can&#39;t form a pointer to the value <code>3.14</code>. So you can&#39;t put <code>3.14</code> directly into a reference wrapper, but you <i>can</i> put a reference to a variable there."}, {"owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1519232108, "post_id": 48911227, "comment_id": 84829028, "body": "@Cheersandhth.-Alf Probably OP wants to put the value 3.14 into the object that the wrapper holds reference to."}, {"owner": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "reply_to_user": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "edited": false, "score": 0, "creation_date": 1519232496, "post_id": 48911227, "comment_id": 84829283, "body": "@IvanSmirnov that&#39;s what i meant"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1519232506, "post_id": 48911227, "comment_id": 84829290, "body": "Can you show the code that &quot;works&quot; and the code that gives that error, rather than describing them?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1519232544, "post_id": 48911227, "comment_id": 84829315, "body": "Well, there is <code>get</code> member function for getting the reference."}], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "edited": false, "score": 0, "creation_date": 1519233699, "post_id": 48911732, "comment_id": 84830057, "body": "Thank you! I don&quot;t have boost so i&#39;ll have to start writing my first iterator. any crucial advice you feel like giving?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "edited": false, "score": 0, "creation_date": 1519234364, "post_id": 48911732, "comment_id": 84830474, "body": "I&#39;ve added a sketch of the main operation. The basic gist is anywhere the iterator would serve up a value, it calls <code>std::reference_wrapper::get</code> on the value returned by <code>inner</code>, and elsewhere it just calls the operation on <code>inner</code>"}, {"owner": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "edited": false, "score": 0, "creation_date": 1519234570, "post_id": 48911732, "comment_id": 84830578, "body": "I just found out boost is actually installed, I could get the sketch to work but wasn&#39;t able to do it with boost"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1519236073, "post_id": 48911732, "comment_id": 84831449, "body": "I recommend just using an ordinary <code>for</code> loop. It is (1) shorter code, and (2) more clear."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 1, "last_activity_date": 1519234219, "last_edit_date": 1519234219, "creation_date": 1519233151, "answer_id": 48911732, "question_id": 48911227, "link": "https://stackoverflow.com/questions/48911227/stdtransform-with-stdreference-wrapper/48911732#48911732", "title": "std::transform with std::reference_wrapper", "body": "<p>If you are trying to overwrite existing <code>float</code>s that are referenced in your <code>std::vector&lt;std::reference_wrapper&lt;float&gt;&gt;</code>, then you need something that will unwrap the <code>std::reference_wrapper&lt;float&gt;</code> into a <code>float &amp;</code>. <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/iterator/doc/indirect_iterator.html\" rel=\"nofollow noreferrer\"><code>boost::indirect_iterator</code></a> is such a thing, although it is easy to write your own iterator adapter if you can't add a boost dependancy.</p>\n\n<p>An example usage:</p>\n\n<pre><code>std::vector&lt;float&gt; src1 = /* values */, src2 = /* other values */;\nstd::vector&lt;std::reference_wrapper&lt;float&gt;&gt; dest = /* references to somewhere */;\n\nboost::indirect_iterator&lt;std::reference_wrapper&lt;float&gt;, float&gt; indirected(dest.begin());\nstd::transform(src1.begin(), src1.end(), src2.begin(), indirected, std::plus&lt;float&gt;());\n</code></pre>\n\n<p>A sketch implementation</p>\n\n<pre><code>struct indirect_iterator\n{\n    /* a bunch of typedefs go here */\n    indirect_iterator&amp; operator++() { ++inner; }\n    float &amp; operator*() { return inner-&gt;get(); }\n    float * operator-&gt;() { return &amp;inner-&gt;get(); }  \nprivate:\n    std::vector&lt;std::reference_wrapper&lt;float&gt;&gt;::iterator inner;\n} \n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 9323121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f248d19e53292791a6e2e3bdd26438f?s=128&d=identicon&r=PG&f=1", "display_name": "Gladaed", "link": "https://stackoverflow.com/users/9323121/gladaed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 48911732, "answer_count": 1, "score": 0, "last_activity_date": 1519234219, "creation_date": 1519231672, "last_edit_date": 1519233590, "question_id": 48911227, "link": "https://stackoverflow.com/questions/48911227/stdtransform-with-stdreference-wrapper", "title": "std::transform with std::reference_wrapper", "body": "<p>How do you use <code>std::transform</code> in conjunction with containers which hold objects of type <code>std::reference_wrapper</code>? when reading from <code>const std::vector&lt;std::reference_wrapper&lt;const float&gt;&gt;</code> and writing into an <code>std::vector&lt;float&gt;</code> everything works, but if I try to write into an <code>std::vector&lt;std::reference_wrapper&lt;float&gt;&gt;</code> it doesn't compile giving the error </p>\n\n<blockquote>\n  <p>/usr/include/c++/5/bits/stl_algo.h:4214: error: use of deleted function >'std::reference_wrapper&lt;_Tp>::reference_wrapper(_Tp&amp;&amp;) [with _Tp = float]'\n   <em>__result = __binary_op(</em>__first1, *__first2);</p>\n</blockquote>\n\n<p>I think it is trying to replace the reference instead of changing the value of the referred value. Is there a way to use transform to achieve this or should I prefer writing my own function?</p>\n\n<p>edit: added a example for reference:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\nstd::vector&lt;float&gt; v(3, 1.0f);\nstd::vector&lt;std::reference_wrapper&lt;float&gt;&gt; refVector;\n\nrefVector.reserve(v.size());\nfor(auto&amp; elem : v)\n{\nrefVector.push_back((std::reference_wrapper&lt;float&gt;)elem);\n}\n\nstd::vector&lt;float&gt; v2(3, 2.0f);\nstd::vector&lt;float&gt; v3(3, 3.0f);\nstd::vector&lt;float&gt; v4(3);\n\nfor(auto&amp; elem : v)\nstd::cout &lt;&lt; elem &lt;&lt; std::endl; // all 1s\n\nstd::transform(refVector.begin(), refVector.end(), v3.begin(), v4.begin(), std::plus&lt;float&gt;());\n\nfor(auto&amp; elem : v4)\nstd::cout &lt;&lt; elem &lt;&lt; std::endl; // all 4s\n\nstd::transform(v2.begin(), v2.end(), v3.begin(), refVector.begin(), std::minus&lt;float&gt;()); // doesn't compile\n\nfor(auto&amp; elem : v)\nstd::cout &lt;&lt; elem &lt;&lt; std::endl; // want all -1s\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "initialization"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1519231950, "post_id": 48911174, "comment_id": 84828894, "body": "I suspect that SpecialVector is just missing constructors, propably these that take pairs of iterators."}, {"owner": {"reputation": 353, "user_id": 463268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQQ2L.jpg?s=128&g=1", "display_name": "Stefan D.", "link": "https://stackoverflow.com/users/463268/stefan-d"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1519235321, "post_id": 48911174, "comment_id": 84831001, "body": "Ah you are right. There is no automatic constructor inheritance in C++03 / C++98 \ud83d\ude48. I can add an answer tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1519300908, "post_id": 48915042, "comment_id": 84859876, "body": "The comments should be adjusted though."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1519245604, "creation_date": 1519245604, "answer_id": 48915042, "question_id": 48911174, "link": "https://stackoverflow.com/questions/48911174/how-to-use-boostassign-with-custom-containers-that-extend-stl-containers/48915042#48915042", "title": "How to use boost::assign with custom containers that extend STL containers?", "body": "<p>Like you said, you need to allow the construction from base types:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/8b6c3d262527289a\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include \"boost/assign/list_of.hpp\"\nusing namespace boost::assign;\n#include &lt;vector&gt;\n\nstruct SpecialVector : std::vector&lt;int&gt;{\n    typedef std::vector&lt;int&gt; base;\n    void foo(){/* adds functionality */}\n\n    SpecialVector() : base() {}\n    template &lt;typename T&gt; explicit SpecialVector(T const&amp; t) : base(t) {}\n    template &lt;typename T, typename U&gt; SpecialVector(T const&amp; t, U const&amp; u) : base(t, u) {}\n    template &lt;typename T, typename U, typename V&gt; SpecialVector(T const&amp; t, U const&amp; u, V const&amp; v) : base(t, u, v) {}\n};\n\nint main(){\n    std::vector&lt;int&gt; v = list_of(1)(2)(3); // list_of() works well for STL containers\n\n    // The following works but requires adding items one-by-one with push_back\n    SpecialVector u; \n    u.push_back(1);\n    u.push_back(2);\n    u.push_back(3);\n\n    // The following fails when attempting to compile\n    SpecialVector u2 = list_of(1)(2)(3);\n}\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 463268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQQ2L.jpg?s=128&g=1", "display_name": "Stefan D.", "link": "https://stackoverflow.com/users/463268/stefan-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 48915042, "answer_count": 1, "score": 2, "last_activity_date": 1519245604, "creation_date": 1519231494, "last_edit_date": 1592644375, "question_id": 48911174, "link": "https://stackoverflow.com/questions/48911174/how-to-use-boostassign-with-custom-containers-that-extend-stl-containers", "title": "How to use boost::assign with custom containers that extend STL containers?", "body": "<p>What do I have to do to make custom classes (that inherit from STL containers like <code>std::vector</code> or <code>std::map</code>) work with the <code>boost::assign</code> <code>list_of()</code> or <code>map_list_of()</code> initializer functions?</p>\n<h1>Background</h1>\n<p>I want to easily initialize a containers with a list of values. C++11 introduced <em>initializer lists</em> however I am stuck with <strong>C++03</strong> so I <strong>cannot use C++11 initializer lists</strong>.</p>\n<p>As a workaround I found the boost:assign library that provides functions like list_of() and map_list_of(). This works quite well for the STL containers like std::vector and std::map. However if I create my own containers by e.g. by extending std::vector I get compilation errors.</p>\n<h1>Example</h1>\n<p>Here is a small example</p>\n<pre><code>#include &quot;boost/assign/list_of.hpp&quot;\nusing namespace boost::assign;\n#include &lt;vector&gt;\n\nstruct SpecialVector : public std::vector&lt;int&gt;{\n    foo(){/* adds functionality */}\n};\n\nint main(){\n    std::vector&lt;int&gt; v = list_of(1)(2)(3); // list_of() works well for STL containers\n\n    // The following works but requires adding items one-by-one with push_back\n    SpecialVector u; \n    u.push_back(1);\n    u.push_back(2);\n    u.push_back(3);\n\n    // The following fails when attempting to compile\n    SpecialVector u2 = list_of(1)(2)(3);\n}\n</code></pre>\n<p>Attempting to compile the example gives me the following error:</p>\n<pre><code>In file included from assign_inherited.cpp:1:0:\n../../../lib/boost/assign/list_of.hpp: In instantiation of 'Container boost::assign_detail::converter&lt;DerivedTAssign, Iterator&gt;::convert(const Container*, boost::assign_detail::default_type_tag) const [with Container = SpecialVector; DerivedTAssign = boost::assign_detail::generic_list&lt;int&gt;; Iterator = std::_Deque_iterator&lt;int, int&amp;, int*&gt;]':\n../../../lib/boost/assign/list_of.hpp:142:38:   required from 'Container boost::assign_detail::converter&lt;DerivedTAssign, Iterator&gt;::convert_to_container() const [with Container = SpecialVector; DerivedTAssign = boost::assign_detail::generic_list&lt;int&gt;; Iterator = std::_Deque_iterator&lt;int, int&amp;, int*&gt;]'\n../../../lib/boost/assign/list_of.hpp:436:81:   required from 'boost::assign_detail::generic_list&lt;T&gt;::operator Container() const [with Container = SpecialVector; T = int]'\nassign_inherited.cpp:19:39:   required from here\n../../../lib/boost/assign/list_of.hpp:163:20: error: no matching function for call to 'SpecialVector::SpecialVector(boost::assign_detail::converter&lt;boost::assign_detail::generic_list&lt;int&gt;, std::_Deque_iterator&lt;int, int&amp;, int*&gt; &gt;::iterator, boost::assign_detail::converter&lt;boost::assign_detail::generic_list&lt;int&gt;, std::_Deque_iterator&lt;int, int&amp;, int*&gt; &gt;::iterator)'\n             return Container( begin(), end() );\n                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nassign_inherited.cpp:5:8: note: candidate: SpecialVector::SpecialVector()\n struct SpecialVector : public std::vector&lt;int&gt;{\n        ^~~~~~~~~~~~~\nassign_inherited.cpp:5:8: note:   candidate expects 0 arguments, 2 provided\nassign_inherited.cpp:5:8: note: candidate: SpecialVector::SpecialVector(const SpecialVector&amp;)\nassign_inherited.cpp:5:8: note:   candidate expects 1 argument, 2 provided\n</code></pre>\n<p>I already checked the documentation of the boost::assign library. I found the section <em>Extending the library</em>, however if I understand it correctly, this section deals with adding <strong>custom classes as items in the list</strong>, not with generating an <strong>initializer for a custom class</strong>. Or did I understand this wrong?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "mfc"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 5, "creation_date": 1519230708, "post_id": 48910854, "comment_id": 84827997, "body": "you want auto &amp;"}, {"owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1519230793, "post_id": 48910854, "comment_id": 84828071, "body": "If this is the answer, please write down below so I can accept. Btw this is no-sense to me."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519231254, "post_id": 48910854, "comment_id": 84828390, "body": "Related: <a href=\"https://stackoverflow.com/questions/8542873/c11-auto-semantics\">stackoverflow.com/questions/8542873/c11-auto-semantics</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1519231264, "post_id": 48910854, "comment_id": 84828397, "body": "@IssamTP You may feel as you do, but it is intended behavior. If it wasn&#39;t so, how would specify that you want to return the copy of the variable, and not a reference to it, in the following case: <code>auto f () {static int a = 5; return a;}</code>?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1519231421, "post_id": 48910854, "comment_id": 84828506, "body": "@IssamTP if you want <code>auto</code> to deduce references too, you can use <code>decltype(auto)</code>. Plain auto will act just like a deduced template parameter."}], "owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "closed_date": 1519231465, "answer_count": 0, "score": 0, "last_activity_date": 1519231747, "creation_date": 1519230581, "question_id": 48910854, "link": "https://stackoverflow.com/questions/48910854/using-auto-in-c-visual-studio-2015", "closed_reason": "Duplicate", "title": "Using auto in C++ Visual Studio 2015", "body": "<p>In my Single Document Application I have this situation:</p>\n\n<pre><code> class CObj\n {\n public:\n      int m_nValue;\n // Rest of class implementation\n };\n typedef std::vector&lt;CObj&gt; CObjects;\n typedef std::unordered_map&lt;double, CObjects&gt; CObjects_2;\n typedef std::map&lt;CString, CObjects_2&gt; CObjects_3;\n\n class CMyDoc : public CDocument\n {\n protected:\n      CObjects_3   m_Data;\n public:\n      inline CObjects_3 &amp; Data()\n      {\n           return m_Data;\n      }\n }\n\n // Somewhere in the program:\n //...\n // Assuming that all keys exist:\n CObjects_3 &amp; non_auto_data = pValidDocPointer-&gt;Data();\n non_auto_data[_T(\"Key\")][3.0][0].m_nValue = 10;\n auto auto_data = m_pValidDocPointer-&gt;Data();\n auto_data[_T(\"Key\")][3.0][0].m_nValue = 20;\n //...\n</code></pre>\n\n<p>Now, if I understood well how keyword auto works, I expect that</p>\n\n<pre><code>pValidDocPointer-&gt;m_Data[_T(\"Key\")][3.0][0].m_nValue\n</code></pre>\n\n<p>will have a value of 20, but I see 10.\nIs that a Visual Studio bug or it is correct? If correct: what I misunderstood in auto keyword functioning?</p>\n"}, {"tags": ["c++", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1519230610, "post_id": 48910827, "comment_id": 84827922, "body": "What one considers &quot;elegant&quot; is entirely opinion-based."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1519230619, "post_id": 48910827, "comment_id": 84827926, "body": "<code>std::mutex</code> with try_lock"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1519230623, "post_id": 48910827, "comment_id": 84827931, "body": "feels like an atomic increment / decrement of a global would be helpful"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1519230629, "post_id": 48910827, "comment_id": 84827935, "body": "What do you mean by wanting to assert it, anyway?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1519230661, "post_id": 48910827, "comment_id": 84827962, "body": "@pm100 then not global but static function scope"}, {"owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "edited": false, "score": 2, "creation_date": 1519230662, "post_id": 48910827, "comment_id": 84827963, "body": "What do you mean by &quot;not called from more than one thread at the same time?&quot; Do you mean at the same literal time, or that only one thread should ever call the function regardless of when? If the former you should use some sort of lock/mutex. If the latter you can just inspect the id of the thread calling the function, or just put the function only in the scope of one thread (if possible)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519230796, "post_id": 48910827, "comment_id": 84828076, "body": "@Slava - yes you are correct"}, {"owner": {"reputation": 3799, "user_id": 1876627, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0jbhF.gif?s=128&g=1", "display_name": "Brans Ds", "link": "https://stackoverflow.com/users/1876627/brans-ds"}, "edited": false, "score": 0, "creation_date": 1519230846, "post_id": 48910827, "comment_id": 84828115, "body": "It is not thread safe because it uses static member. If someone will try to use it in, for example in parallel for it will not work properly. I just have trouble with such kind of function and want to add assert or check, I don&#39;t want to use locks, because now it is used only from one thread. But tomorrow someone can try to use it and will have troubles. On the other hand there are functions that are &quot;thread safe&quot;."}, {"owner": {"reputation": 3799, "user_id": 1876627, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0jbhF.gif?s=128&g=1", "display_name": "Brans Ds", "link": "https://stackoverflow.com/users/1876627/brans-ds"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519230978, "post_id": 48910827, "comment_id": 84828214, "body": "@AlgirdasPreid\u017eius in most cases elegant mean - short and clear"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519231556, "post_id": 48910827, "comment_id": 84828608, "body": "What do you want to do in case the assertion is violated?"}, {"owner": {"reputation": 3799, "user_id": 1876627, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0jbhF.gif?s=128&g=1", "display_name": "Brans Ds", "link": "https://stackoverflow.com/users/1876627/brans-ds"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519231646, "post_id": 48910827, "comment_id": 84828668, "body": "@SergeyA dbg break or just throw exception"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519232516, "post_id": 48910827, "comment_id": 84829303, "body": "If this is the case, just use mutex with try lock and throw an exception if it doesn&#39;t succeed"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519233372, "post_id": 48910827, "comment_id": 84829852, "body": "If you do not want to introduce overhead into sequential code, use some form of locking policy classes with empty default code and member variables. Or, you can conditinally compile and introduce <code>static</code> <code>mutex</code> or <code>atomic</code> counter based on <code>NDEBUG</code> existence."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1519234633, "post_id": 48910827, "comment_id": 84830606, "body": "This sounds like an attempt at coding around a design error."}], "answers": [{"comments": [{"owner": {"reputation": 3799, "user_id": 1876627, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0jbhF.gif?s=128&g=1", "display_name": "Brans Ds", "link": "https://stackoverflow.com/users/1876627/brans-ds"}, "edited": false, "score": 0, "creation_date": 1519231193, "post_id": 48911029, "comment_id": 84828348, "body": "The function is not intended to use from several threads but can be used accidentally, because the environment is highly parallel. I don&#39;t need locking. That should be a check or contact that it shouldn&#39;t be used from several threads."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 3799, "user_id": 1876627, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0jbhF.gif?s=128&g=1", "display_name": "Brans Ds", "link": "https://stackoverflow.com/users/1876627/brans-ds"}, "edited": false, "score": 0, "creation_date": 1519231269, "post_id": 48911029, "comment_id": 84828401, "body": "@BransDs to reliably check for multithread access reliably you have to use threading primitives, either mutex or atomic"}, {"owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "edited": false, "score": 0, "creation_date": 1519231306, "post_id": 48911029, "comment_id": 84828426, "body": "I see. I assumed you meant the former of what I interpreted your question could mean in the OP. I edited in the case for the latter interpretation, which it seems was your intention to ask. Hope that helps."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519232578, "post_id": 48911029, "comment_id": 84829337, "body": "OP doesn&#39;t wan&#39;t simultaneous access, OP wants to make sure it doesn&#39;t happen. Your mutex solution doesn&#39;t address this."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1519232696, "post_id": 48911029, "comment_id": 84829414, "body": "I like the idea of thread ids, however, note that you need to protect reads and writes of <code>owning_thread_id</code> by a mutex. Otherwise, there would be a data race."}, {"owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519233043, "post_id": 48911029, "comment_id": 84829645, "body": "@SergeyA I actually think I did address it in the last paragraph."}], "tags": [], "owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "is_accepted": false, "score": 0, "last_activity_date": 1519231520, "last_edit_date": 1519231520, "creation_date": 1519231050, "answer_id": 48911029, "question_id": 48910827, "link": "https://stackoverflow.com/questions/48910827/elegant-assert-that-function-is-not-called-from-several-threads/48911029#48911029", "title": "Elegant assert that function is not called from several threads", "body": "<p>Sounds like you need a mutex. Assuming you are using <code>std::thread</code> you can look at the coding example in the following link for specifically using <code>std::mutex</code>: <a href=\"http://www.cplusplus.com/reference/mutex/mutex/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/mutex/mutex/</a></p>\n\n<pre><code>// mutex example\n#include &lt;iostream&gt;       // std::cout\n#include &lt;thread&gt;         // std::thread\n#include &lt;mutex&gt;          // std::mutex\n\nstd::mutex mtx;           // mutex for critical section\n\nvoid print_block (int n, char c) {\n  // critical section (exclusive access to std::cout signaled by locking mtx):\n  mtx.lock();\n  for (int i=0; i&lt;n; ++i) { std::cout &lt;&lt; c; }\n  std::cout &lt;&lt; '\\n';\n  mtx.unlock();\n}\n\nint main ()\n{\n  std::thread th1 (print_block,50,'*');\n  std::thread th2 (print_block,50,'$');\n\n  th1.join();\n  th2.join();\n\n  return 0;\n}\n</code></pre>\n\n<p>In the above code <code>print_block</code> locks <code>mtx</code>, does what it needs to do, and then unlocks <code>mtx</code>. If <code>print_block</code> is called from two different threads, one thread will lock <code>mtx</code> first and the other thread will block on <code>mtx.lock()</code> and be force to wait until the other thread calls <code>mtx.unlock()</code>. This means only one thread can execute the code between <code>mtx.lock()</code> and <code>mtx.unlock()</code> (exclusive) at the same time.</p>\n\n<p>This assumes by \"at the same time\" you mean at the same literal time. If you only want one thread to be able to call a function I would recommend looking into <code>std::this_thread::get_id</code> which will get you the id of the current thread. An assert could be as simple as storing the owning thread in <code>owning_thread_id</code> and then calling <code>assert(owning_thread_id == std::this_thread::get_id())</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1519232679, "post_id": 48911533, "comment_id": 84829396, "body": "Probably even assert inside the constructor. I would also make the counter a static member of the struct to prevent tinkering."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519233598, "post_id": 48911533, "comment_id": 84829984, "body": "The only drawback is that this will introduce overhead into sequential code that uses the function. But it can be easily transformed into policy-based design and define do-nothing policy as default."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1519232574, "creation_date": 1519232574, "answer_id": 48911533, "question_id": 48910827, "link": "https://stackoverflow.com/questions/48910827/elegant-assert-that-function-is-not-called-from-several-threads/48911533#48911533", "title": "Elegant assert that function is not called from several threads", "body": "<p>You can use a thin RAII wrapper around <code>std::atomic&lt;&gt;</code>:</p>\n\n<pre><code>namespace {\n    std::atomic&lt;int&gt; access_counter;\n\n    struct access_checker {\n        access_checker() { check = ++access_counter; }\n        access_checker( const access_checker &amp; ) = delete;\n        ~access_checker() { --access_counter; }\n        int check;\n    };\n}\n\n\nvoid foobar()\n{\n     access_checker checker;\n     // assert than checker.check == 1 and react accordingly\n     ...\n}\n</code></pre>\n\n<p>it is simplified version for single use to show the idea and can be improved to use for multiple functions if necessary</p>\n"}], "owner": {"reputation": 3799, "user_id": 1876627, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/0jbhF.gif?s=128&g=1", "display_name": "Brans Ds", "link": "https://stackoverflow.com/users/1876627/brans-ds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48911533, "answer_count": 2, "score": 2, "last_activity_date": 1519232574, "creation_date": 1519230511, "question_id": 48910827, "link": "https://stackoverflow.com/questions/48910827/elegant-assert-that-function-is-not-called-from-several-threads", "title": "Elegant assert that function is not called from several threads", "body": "<p>I have a function that must not be called from more than one thread at the same time. Can you suggest some elegant assert for this? </p>\n"}, {"tags": ["c++", "visual-studio"], "answers": [{"comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1519231258, "post_id": 48910904, "comment_id": 84828393, "body": "Does this work as intended though? I remember something about extern &quot;C&quot; being part of the type system, so you end up with a C++ function and an undefined C one. So calling myFunc from a C program will end up in a linker error."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1519231394, "post_id": 48910904, "comment_id": 84828491, "body": "@DeiDei I hope you find answer on your question here <a href=\"https://stackoverflow.com/questions/1380829/is-extern-c-only-required-on-the-function-declaration\" title=\"is extern c only required on the function declaration\">stackoverflow.com/questions/1380829/&hellip;</a> Please be kind to upvote the answer there."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1519231776, "post_id": 48910904, "comment_id": 84828764, "body": "@DeiDei: <code>[C++14: [dcl.link]&#47;5]:</code> <i>&quot;A function can be declared without a linkage specification after an explicit linkage specification has been seen; the linkage explicitly specified in the earlier declaration is not affected by such a function declaration.&quot;</i> and I take this to include the later declaration that&#39;s part of the definition"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519231894, "post_id": 48910904, "comment_id": 84828846, "body": "In fact I don&#39;t have much need for C linkage but I believe this is the recommended approach anyway."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 836, "user_id": 109078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d718b0c7254e8ae5efc35e5003953771?s=128&d=identicon&r=PG", "display_name": "user109078", "link": "https://stackoverflow.com/users/109078/user109078"}, "edited": false, "score": 1, "creation_date": 1519232031, "post_id": 48910904, "comment_id": 84828970, "body": "@user109078 I would not agree that it is a bug. <code>auto</code> in functional parameters could be considered as syntax sugar of templates. It is a Microsoft compiler feature."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519232139, "post_id": 48910904, "comment_id": 84829058, "body": "Hmm true I guess 7.5/4 is picking up the generic lambda"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1519232161, "post_id": 48910904, "comment_id": 84829072, "body": "I had to replace the <code>auto</code> in the lambda by <code>const std::pair&lt;double, int&gt;</code>. (VS2013 doesn&#39;t like the <code>auto</code>, me too.) After this modification, this compiled fine in VS2013."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1519232343, "post_id": 48910904, "comment_id": 84829189, "body": "@Scheff VS2013 is another case.  VS2013 supports C++11, but <code>auto</code> in lambdas can be used since C++14."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1519232488, "post_id": 48910904, "comment_id": 84829276, "body": "@S.M. This was not meant as complaint - just a statement of mine. I know that my old VS2013 is a little bit behind... ;-) (And, actually, even C++11 is only partly supported in VS2013 what sometimes hurts.)"}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1519231012, "last_edit_date": 1519231012, "creation_date": 1519230687, "answer_id": 48910904, "question_id": 48910728, "link": "https://stackoverflow.com/questions/48910728/visual-studio-2017-improper-error-on-template-use-in-extern-c/48910904#48910904", "title": "Visual Studio 2017 Improper error on template use in extern &quot;C&quot;", "body": "<p>I would not mix declarations and definitions. Below is the compilable code.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;typename T, typename R, typename Op&gt;\ninline\nstd::vector&lt;T&gt;\ntransform_inline(const R &amp; collection, Op op)\n{\n   std::vector&lt;T&gt; result;\n\n   std::transform\n   (\n      std::begin(collection),\n      std::end(collection),\n      std::back_inserter(result),\n      op\n   );\n\n   return result;\n}\n\nextern \"C\"\n{\n    void myFunc();\n}\n\nvoid myFunc()\n{\n    std::vector&lt;std::pair&lt;double,int&gt;&gt; data;\n\n    transform_inline&lt;double&gt;\n    (\n        data,\n        [](auto &amp; o){ return o.first; }\n    );\n}\n</code></pre>\n\n<p>See: <a href=\"https://godbolt.org/g/PbQcFC\" rel=\"nofollow noreferrer\">https://godbolt.org/g/PbQcFC</a></p>\n"}], "owner": {"reputation": 836, "user_id": 109078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d718b0c7254e8ae5efc35e5003953771?s=128&d=identicon&r=PG", "display_name": "user109078", "link": "https://stackoverflow.com/users/109078/user109078"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 48910904, "answer_count": 1, "score": 1, "last_activity_date": 1519231012, "creation_date": 1519230190, "question_id": 48910728, "link": "https://stackoverflow.com/questions/48910728/visual-studio-2017-improper-error-on-template-use-in-extern-c", "title": "Visual Studio 2017 Improper error on template use in extern &quot;C&quot;", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;typename T, typename R, typename Op&gt;\ninline\nstd::vector&lt;T&gt;\ntransform_inline(const R &amp; collection, Op op)\n{\n   std::vector&lt;T&gt; result;\n\n   std::transform\n   (\n      std::begin(collection),\n      std::end(collection),\n      std::back_inserter(result),\n      op\n   );\n\n   return result;\n}\n\nextern \"C\"\n{\n    void myFunc()\n    {\n        std::vector&lt;std::pair&lt;double,int&gt;&gt; data;\n\n        transform_inline&lt;double&gt;\n        (\n            data,\n            [](auto &amp; o){ return o.first; }\n        );\n    }\n}\n</code></pre>\n\n<p>It compiles in gcc and clang, but visual studio says:</p>\n\n<pre><code>&lt;source&gt;(31): error C2894: templates cannot be declared to have 'C' linkage\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x64\nCopyright (C) Microsoft Corporation.  All rights reserved.\nCompiler returned: 2\n</code></pre>\n\n<p>See: <a href=\"https://godbolt.org/g/vGvL4t\" rel=\"nofollow noreferrer\">https://godbolt.org/g/vGvL4t</a></p>\n\n<p>That error is normally for when you <strong>define</strong> the template in the extern \"C\" block, which is obviously not the case here.</p>\n\n<p>Seems like a visual studio bug...Am I correct?</p>\n\n<p>Any known workarounds?</p>\n"}, {"tags": ["c++", "qt", "qt4", "signals-slots", "qt4.8"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1519233656, "post_id": 48910660, "comment_id": 84830025, "body": "You&#39;ve shown the header for <code>timer_class</code> twice.  Please edit your question to show the contents of <code>timer_class.h</code>."}, {"owner": {"reputation": 91, "user_id": 3104363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b71f318d2d3c7ba10170ccb8f77d81c9?s=128&d=identicon&r=PG&f=1", "display_name": "user3104363", "link": "https://stackoverflow.com/users/3104363/user3104363"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1519234478, "post_id": 48910660, "comment_id": 84830527, "body": "I am sorry for mistake. I edited my question. @G.M."}, {"owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 0, "creation_date": 1519305991, "post_id": 48910660, "comment_id": 84863478, "body": "Recommended reading: <a href=\"http://wiki.qt.io/ThreadsEventsQObjects\" rel=\"nofollow noreferrer\">wiki.qt.io/ThreadsEventsQObjects</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1519239262, "creation_date": 1519239262, "answer_id": 48913402, "question_id": 48910660, "link": "https://stackoverflow.com/questions/48910660/qt-4-8-how-to-send-signal-from-different-thread/48913402#48913402", "title": "Qt 4.8, How to send signal from different thread?", "body": "<p>The basic problem is that you're creating a new <code>QThread</code>, moving your <code>timer_class</code> instance onto that thread and then invoking <code>thread_worker::main_loop</code> when the thread starts.  Since <code>thread_worker::main_loop</code> is basically a busy-waiting loop...</p>\n\n<pre><code>void thread_worker::main_loop ()\n{\n  forever\n  {\n    //qDebug() &lt;&lt; \"In Main Loop\";\n  }\n}\n</code></pre>\n\n<p>...the <code>QThread</code> never gets a chance to process events thus preventing any signals being received via queued connections.</p>\n\n<p>The correct fix for all of this depends to a large extent on what work (if any) you want <code>thread_worker::main_loop</code> to do.</p>\n\n<p>To get things going in the mean time simply remove the <code>forever</code> loop or comment out the line...</p>\n\n<pre><code>connect(thread, SIGNAL(started()), worker, SLOT(main_loop()));\n</code></pre>\n\n<p>Having done that you should see the \"dummy signal received\" messages.</p>\n"}], "owner": {"reputation": 91, "user_id": 3104363, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b71f318d2d3c7ba10170ccb8f77d81c9?s=128&d=identicon&r=PG&f=1", "display_name": "user3104363", "link": "https://stackoverflow.com/users/3104363/user3104363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519239262, "creation_date": 1519229970, "last_edit_date": 1519234412, "question_id": 48910660, "link": "https://stackoverflow.com/questions/48910660/qt-4-8-how-to-send-signal-from-different-thread", "title": "Qt 4.8, How to send signal from different thread?", "body": "<p>I am trying to send signal across threads.</p>\n\n<p>For testing this situation, I wrote a test code. \nI am working on ubuntu 16.04 machine and qt version is 4.8.</p>\n\n<p>In my code, three class exists:</p>\n\n<p>1 - timer_class -> in this class, I emit signal in timeout slot.</p>\n\n<p>2 - test_worker -> I am using this class as thread's worker.</p>\n\n<p>3 - main_class -> I create timer_class instance, and also create thread in this class constructor.</p>\n\n<p>I am trying to connect timer_class signal to test_worker slot.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>First; timer_class :\n</code></pre>\n\n<p>Header File:</p>\n\n<pre><code>#ifndef TIMER_CLASS_H\n#define TIMER_CLASS_H\n\n#include &lt;QTimer&gt;\n#include &lt;QDebug&gt;\n#include &lt;QObject&gt;\n\nclass timer_class : public QObject\n{\n    Q_OBJECT\npublic:\n    timer_class(QObject *parent = 0);\n    ~timer_class();\n\n    void start_timer();\n\nsignals:\n    void dummy_signal();\n\nprivate slots:\n    void on_timeout_occur();\n\nprivate:\n    QTimer *timer;\n};\n\n#endif // TIMER_CLASS_H\n</code></pre>\n\n<p>Source File :</p>\n\n<pre><code>#include \"timer_class.h\"\n\ntimer_class::timer_class(QObject *parent)\n    :QObject(parent)\n{\n    timer = new QTimer();\n    connect(timer, SIGNAL(timeout()), this, SLOT(on_timeout_occur()));\n}\n\ntimer_class::~timer_class()\n{\n\n}\n\nvoid timer_class::start_timer()\n{\n    timer-&gt;start(1000);\n}\n\nvoid timer_class::on_timeout_occur()\n{\n    qDebug() &lt;&lt; \"timeout occur\";\n    emit dummy_signal();\n}\n</code></pre>\n\n<p>Second, thread_worker class :\nHeader File :</p>\n\n<pre><code>#ifndef THREAD_WORKER_H\n#define THREAD_WORKER_H\n\n#include &lt;QDebug&gt;\n#include &lt;QObject&gt;\n\nclass thread_worker : public QObject\n{\n    Q_OBJECT\npublic:\n    thread_worker(QObject *parent = 0);\n    ~thread_worker();\n\npublic slots:\n    void main_loop();\n    void on_dummy_signal();\n};\n\n#endif // THREAD_WORKER_H\n</code></pre>\n\n<p>Source File :</p>\n\n<pre><code>#include \"thread_worker.h\"\n\nthread_worker::thread_worker(QObject *parent)\n    :QObject(parent)\n{\n\n}\n\nthread_worker::~thread_worker()\n{\n\n}\n\nvoid thread_worker::main_loop()\n{\n    forever\n    {\n        //qDebug() &lt;&lt; \"In Main Loop\";\n    }\n}\n\nvoid thread_worker::on_dummy_signal()\n{\n    qDebug() &lt;&lt; \"dummy signal received\";\n}\n</code></pre>\n\n<p>And last, main_class :\nHeader file :</p>\n\n<pre><code>#ifndef MAIN_CLASS_H\n#define MAIN_CLASS_H\n\n#include &lt;QObject&gt;\n#include &lt;QDebug&gt;\n#include &lt;QThread&gt;\n#include \"timer_class.h\"\n#include \"thread_worker.h\"\n\nclass main_class : public QObject\n{\n    Q_OBJECT\npublic:\n    main_class(QObject *parent = 0);\n    ~main_class();\n\nprivate:\n    QThread *thread;\n    timer_class *tmr_class;\n    thread_worker *worker;\n};\n\n#endif // MAIN_CLASS_H\n</code></pre>\n\n<p>Source File:</p>\n\n<pre><code>#include \"main_class.h\"\n\nmain_class::main_class(QObject *parent)\n    :QObject(parent)\n{\n    tmr_class   = new timer_class();\n    worker      = new thread_worker();\n    thread      = new QThread();\n\n    worker-&gt;moveToThread(thread);\n    connect(tmr_class, SIGNAL(dummy_signal()), worker, SLOT(on_dummy_signal()));\n\n    connect(thread, SIGNAL(started()), worker, SLOT(main_loop()));\n    thread-&gt;start();\n    tmr_class-&gt;start_timer();\n}\n\nmain_class::~main_class()\n{\n\n}\n</code></pre>\n\n<p>In main.cpp, I just create main_class instance like this :</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include \"main_class.h\"\n\n    int main(int argc, char *argv[])\n    {\n        QCoreApplication a(argc, argv);\n\n        main_class *main_cl = new main_class();\n\n        qDebug() &lt;&lt; \"executing a.exec\";\n        return a.exec();\n    }\n</code></pre>\n\n<p>When I run the application, I saw \"timeout occur\" in console, but I don't saw \"dummy signal received\". I can not find problem.</p>\n\n<p>Could you help me about this problem ? \nThanks.</p>\n"}, {"tags": ["c++", "valgrind", "heap-memory", "stack-memory", "static-memory-allocation"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519291000, "post_id": 48910614, "comment_id": 84853358, "body": "Read <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a>. For process 1234, consider running <code>cat &#47;proc&#47;1234&#47;maps</code> in a terminal."}, {"owner": {"reputation": 185, "user_id": 6239104, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fab7818390f4903f04b11c752c5b167?s=128&d=identicon&r=PG&f=1", "display_name": "Bastienm", "link": "https://stackoverflow.com/users/6239104/bastienm"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519315309, "post_id": 48910614, "comment_id": 84870504, "body": "I gave it a try to this. But I got some problem : (1) my binary is to do path planning. So it takes something like 50-400ms to run. Cause of this I can&#39;t really use the PID to check what is used in real time. (2) It does not provide the amount of memory stack/heap used, only an adress. I don&#39;t know what to do about this adress"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1519319862, "post_id": 48910614, "comment_id": 84873676, "body": "From inside your program, you might read <code>&#47;proc&#47;self&#47;maps</code> like <a href=\"https://stackoverflow.com/a/12237783/841108\">here</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519320155, "post_id": 48910614, "comment_id": 84873868, "body": "And I am not sure that &quot;heap&quot; memory or &quot;static&quot; memory is as easy to define as you want it to be..."}, {"owner": {"reputation": 185, "user_id": 6239104, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fab7818390f4903f04b11c752c5b167?s=128&d=identicon&r=PG&f=1", "display_name": "Bastienm", "link": "https://stackoverflow.com/users/6239104/bastienm"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519380554, "post_id": 48910614, "comment_id": 84897262, "body": "I edited my question to explain what I mean by heap, static and stacks"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519387502, "post_id": 48910614, "comment_id": 84901223, "body": "Many local variables are optimized to sit in registers."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519387565, "post_id": 48910614, "comment_id": 84901255, "body": "Even with the edit, the actual measure of &quot;heap&quot; memory or of &quot;stack&quot; memory is not what you expect...."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519387656, "post_id": 48910614, "comment_id": 84901312, "body": "On Linux specifically, consider also <a href=\"http://man7.org/linux/man-pages/man3/mallinfo.3.html\" rel=\"nofollow noreferrer\">mallinfo(3)</a>. BTW, why is the result from <code>&#47;proc&#47;self&#47;maps</code> read inside your program unsatisfactory?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519390119, "post_id": 48910614, "comment_id": 84902754, "body": "What are are your constraints on stack, heap and static memory and why are they separate? It seems weird to have <i>separate</i> memory constraints (at least on an ordinary Linux system)."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 6239104, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fab7818390f4903f04b11c752c5b167?s=128&d=identicon&r=PG&f=1", "display_name": "Bastienm", "link": "https://stackoverflow.com/users/6239104/bastienm"}, "edited": false, "score": 0, "creation_date": 1519397416, "post_id": 48947559, "comment_id": 84907368, "body": "My bad sorry. I do not not really have constraints on each but my boss want me to measure each one to know what is consume for what and if we can embed our code. For the &quot;static memory&quot; I directly use the bash function <code>size</code> on the binary. I know that the static variable not initialised are not counted in what is shown. To profile the heap memory I use valgrind. Thanks to this I get the biggest peak of allocation and the the total amout of memory allocated and freed. But as I am a beginner you &quot;openned my eyes&quot; and thakns for your help !"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1521138481, "last_edit_date": 1521138481, "creation_date": 1519387719, "answer_id": 48947559, "question_id": 48910614, "link": "https://stackoverflow.com/questions/48910614/measure-static-heap-and-stack-memory-c-linux-centos-7/48947559#48947559", "title": "Measure static, heap and stack memory ? (c++, Linux - Centos 7)", "body": "<blockquote>\n  <p>I would like to measure stack, heap and static memory separately because I have some constraints for each one.</p>\n</blockquote>\n\n<p>I cannot imagine why you have <em>separate</em> constraints for each one. They all sit in <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow noreferrer\">virtual memory</a>! BTW you might use <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a> to set limits (perhaps from the invoking shell process, e.g. with bash <code>ulimit</code> builtin).</p>\n\n<p>Your definitions are naive, if you consider the actual <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a> of your process.</p>\n\n<p>BTW, <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a> enables you to query that space, e.g. using <code>/proc/self/maps</code> like <a href=\"https://stackoverflow.com/a/12237783/841108\">here</a> from inside your program (or <code>/proc/1234/maps</code> to query the process of pid 1234, perhaps from a terminal). You could also use <code>/proc/self/status</code> and <code>/proc/self/statm</code> (BTW try <code>cat /proc/self/maps</code> and <code>cat /proc/$$/maps</code> in a terminal). On Linux, you might also use <a href=\"http://man7.org/linux/man-pages/man3/mallinfo.3.html\" rel=\"nofollow noreferrer\">mallinfo(3)</a> and <a href=\"http://man7.org/linux/man-pages/man3/malloc_stats.3.html\" rel=\"nofollow noreferrer\">malloc_stats(3)</a> to get information about memory allocation statistics.</p>\n\n<p>Static data may be in the <a href=\"https://en.wikipedia.org/wiki/Data_segment\" rel=\"nofollow noreferrer\">data segment</a> (or <a href=\"https://en.wikipedia.org/wiki/.bss\" rel=\"nofollow noreferrer\">BSS</a> segment) of your program. But what about thread local space? And these data segments also contain data internal to various libraries, notably the C standard library <code>libc.so</code> (do that count?). Of course the stack segment is often bigger (since page aligned) than the actual <em>used</em> stack (from \"bottom\" to current <code>%esp</code> register). And a multi-<a href=\"https://en.wikipedia.org/wiki/Thread_(computing)\" rel=\"nofollow noreferrer\">threaded</a> process has <em>several</em> stacks (and stack segments), one per thread.</p>\n\n<p>Stack data is of course in the call stack, which contains a lot of other things (return addresses, gap, spilled registers) than just <a href=\"https://en.wikipedia.org/wiki/Automatic_variable\" rel=\"nofollow noreferrer\">automatic variables</a> (some of them sitting only in registers or being optimized by the compiler, without consuming any stack slot). Do they count? Also, startup code from <a href=\"https://en.wikipedia.org/wiki/Crt0\" rel=\"nofollow noreferrer\">crt0</a> (which calls your <code>main</code>) is likely to use a little bit of stack space (does it count?)...</p>\n\n<p>Heap allocated data (it could be allocated from various libraries, or even from the dynamic linker) contains not only what your program gets from <code>malloc</code> (and friends) but also the necessary overhead. Do that count? And what about <a href=\"https://en.wikipedia.org/wiki/Memory-mapped_file\" rel=\"nofollow noreferrer\">memory-mapped files</a>? How should they count?</p>\n\n<p>I would recommend querying the actual virtual address space (e.g. by reading <code>/proc/self/maps</code> or using <a href=\"http://man7.org/linux/man-pages/man1/pmap.1.html\" rel=\"nofollow noreferrer\">pmap(1)</a>...) but they you get something different than what you ask.</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519401630, "post_id": 48951022, "comment_id": 84910159, "body": "But these might be not want you want, because your notion of heap memory, static memory, stack is quite naive."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519402206, "post_id": 48951022, "comment_id": 84910473, "body": "I also think you should measure with <code>&#47;proc&#47;*&#47;maps</code>"}, {"owner": {"reputation": 185, "user_id": 6239104, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fab7818390f4903f04b11c752c5b167?s=128&d=identicon&r=PG&f=1", "display_name": "Bastienm", "link": "https://stackoverflow.com/users/6239104/bastienm"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1521124385, "post_id": 48951022, "comment_id": 85606124, "body": "btw, to measure the stack with /proc/self/maps I computed the difference between the two adress provided by the following line &quot;<b>7ffc5d8c0000</b>-<b>7ffc5d8e3000</b> rw-p 00000000 00:00 0                          [stack]&quot;. But I got something that I feel a bit too big. Is it the right way to do ?"}], "tags": [], "owner": {"reputation": 185, "user_id": 6239104, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fab7818390f4903f04b11c752c5b167?s=128&d=identicon&r=PG&f=1", "display_name": "Bastienm", "link": "https://stackoverflow.com/users/6239104/bastienm"}, "is_accepted": false, "score": 2, "last_activity_date": 1519399153, "creation_date": 1519399153, "answer_id": 48951022, "question_id": 48910614, "link": "https://stackoverflow.com/questions/48910614/measure-static-heap-and-stack-memory-c-linux-centos-7/48951022#48951022", "title": "Measure static, heap and stack memory ? (c++, Linux - Centos 7)", "body": "<p>Just BTW I found it before your answer :</p>\n\n<ul>\n<li><p>To measure the heap memory use valgrind -> massif</p></li>\n<li><p>To measure the static memory use the bash function <code>size</code> on the binary</p></li>\n<li><p>To measure the stack it is possible to use <a href=\"https://github.com/d99kris/stackusage\" rel=\"nofollow noreferrer\">stackusage</a></p></li>\n</ul>\n\n<p>It gave me all the stats I wanted</p>\n"}], "owner": {"reputation": 185, "user_id": 6239104, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fab7818390f4903f04b11c752c5b167?s=128&d=identicon&r=PG&f=1", "display_name": "Bastienm", "link": "https://stackoverflow.com/users/6239104/bastienm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521138481, "creation_date": 1519229857, "last_edit_date": 1519380841, "question_id": 48910614, "link": "https://stackoverflow.com/questions/48910614/measure-static-heap-and-stack-memory-c-linux-centos-7", "title": "Measure static, heap and stack memory ? (c++, Linux - Centos 7)", "body": "<p>I would like to measure stack, heap and static memory separately because I have some constraints for each one.</p>\n\n<p>To measure the heap memory I'm using valgrind->massif tool.\nMassif should also be possible to measure heap AND stack memory but it shows strange resultats :</p>\n\n<ul>\n<li><p>Last snapshot without --stacks=yes provides total(B)=0, useful-heap(B)=0, extra-heap(B)=0 (so all is fine)</p></li>\n<li><p>Last snapshot with --stacks=yes provides total(B)= 2,256, useful-heap(B)=1,040, extra-heap(B)=0, stacks(B)=1,208 (which shows memory leak even if it is the same command and same binary tested... dunno why ...)</p></li>\n</ul>\n\n<p>So finally I need a tool to measure stack and static memory used by a c++ binary, some help would be welcome :)</p>\n\n<p>Thanks for your help !</p>\n\n<p>----------- EDIT --------------</p>\n\n<p>Further to the Basile Starynkevitch comment, to explain what I mean with static, stack and heap memory I took it from the Dmalloc library documentation : </p>\n\n<ul>\n<li><p>Static data is the information whose storage space is compiled into the program.</p>\n\n<pre><code>/* global variables are allocated as static data */\nint numbers[10];\n\nmain()\n{\n        \u2026\n}\n</code></pre></li>\n<li><p>Stack data is data allocated at runtime to hold information used inside of functions. This data is managed by the system in the space called stack space.</p>\n\n<pre><code>void foo()\n{\n        /* if they are, the parameters of the function are stored in the stack */\n        /* this local variable is stored on the stack */\n        float total;\n        \u2026\n}\n\nmain()\n{\n    foo();\n}\n</code></pre></li>\n<li><p>Heap data is also allocated at runtime and provides a programmer with dynamic memory capabilities.</p>\n\n<pre><code>main()\n{\n    /* the address is stored on the stack */\n    char * string;\n    \u2026\n\n    /*\n     * Allocate a string of 10 bytes on the heap.  Store the\n     * address in string which is on the stack.\n     */\n    string = (char *)malloc(10);\n    \u2026\n\n    /* de-allocate the heap memory now that we're done with it */\n    (void)free(string);\n    \u2026\n}\n</code></pre></li>\n</ul>\n"}, {"tags": ["c++", "qt", "qcamera"], "comments": [{"owner": {"reputation": 6373, "user_id": 835226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FOAQj.png?s=128&g=1", "display_name": "zeFrenchy", "link": "https://stackoverflow.com/users/835226/zefrenchy"}, "edited": false, "score": 0, "creation_date": 1519231567, "post_id": 48910536, "comment_id": 84828615, "body": "Studying this would help <a href=\"https://doc.qt.io/qt-5.10/qtmultimedia-multimediawidgets-camera-example.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5.10/&hellip;</a>"}, {"owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "reply_to_user": {"reputation": 6373, "user_id": 835226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FOAQj.png?s=128&g=1", "display_name": "zeFrenchy", "link": "https://stackoverflow.com/users/835226/zefrenchy"}, "edited": false, "score": 0, "creation_date": 1519232203, "post_id": 48910536, "comment_id": 84829093, "body": "Oh thanks! I was reading it previously, but I have not found how to get the &quot;default&quot; resolution of the &quot;default&quot; camera. But I will take a loot more deeply."}], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "edited": false, "score": 1, "creation_date": 1519237416, "post_id": 48912295, "comment_id": 84832115, "body": "Thanks so much. I think I was missing the load() method. :)"}, {"owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "edited": false, "score": 0, "creation_date": 1519290418, "post_id": 48912295, "comment_id": 84853022, "body": "Hello! Sorry for answering still now. It did not work, but I think it is due to other things. I had having this error ( I copied the error from other post), but like this:  <a href=\"https://forum.qt.io/topic/78433/qt-multimeia-gstreamer-critical-error/2\" rel=\"nofollow noreferrer\">forum.qt.io/topic/78433/qt-multimeia-gstreamer-critical-erro&zwnj;&#8203;r/2</a>  But I do not know if it was a conflict with the opencv camera or some problem in my OS. Because I have all gstreamer plugins installed...Tomorrow I will continue with that project.  Thanks so much anyway. :)"}], "tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 2, "last_activity_date": 1519236465, "last_edit_date": 1519236465, "creation_date": 1519235090, "answer_id": 48912295, "question_id": 48910536, "link": "https://stackoverflow.com/questions/48910536/qcamera-get-resolution-and-raw-frame/48912295#48912295", "title": "QCamera get resolution and raw frame", "body": "<p>I think you 1) Should load the cam 2) get imageCapture (raw) from the loaded cam. There is no direct simple type of a resolution, because camera will have a <code>list</code> of supported resolutions, you can set your device to one of those.</p>\n\n<p>Try this to get the list of resolutions for a device:</p>\n\n<pre><code>QList&lt;QByteArray&gt; cameraDevices = QCamera::availableDevices();\nQByteArray cameraDevice = cameraDevices[0];\nQCamera *camera = new QCamera(cameraDevice);\ncamera-&gt;load();\nqDebug() &lt;&lt; \"Camera status: \" &lt;&lt; camera-&gt;status();\nQCameraImageCapture *imageCapture = new QCameraImageCapture(camera);\nQList&lt;QSize&gt; resolutions = imageCapture-&gt;supportedResolutions();\nQListIterator&lt;QSize&gt; it(resolutions);\nwhile (it.hasNext()) {\n    qDebug() &lt;&lt; \"Resoution: \" &lt;&lt; it.next();\n}\n</code></pre>\n"}], "owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519237290, "creation_date": 1519229650, "last_edit_date": 1519237290, "question_id": 48910536, "link": "https://stackoverflow.com/questions/48910536/qcamera-get-resolution-and-raw-frame", "title": "QCamera get resolution and raw frame", "body": "<p>I would like to get the resolution of the selected camera and also get the raw frame in the videocapture but I have not found clearly at all how to do it. Could you help me!? Thanks in advance.</p>\n\n<pre><code>    // Open camera for reading\n    cameraQt = new QCamera(cameras.at(cameraIdSelected));\n    if(!cameraQt-&gt;isAvailable())\n          ui-&gt;statusBar-&gt;showMessage(tr(\"Impossible to open camera....\"));\n\n    cameraQt-&gt;setViewfinder(ui-&gt;centralWidget);\n</code></pre>\n\n<p>like : <code>cameraQt-&gt;getResolution</code> ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1519229515, "post_id": 48910421, "comment_id": 84827112, "body": "And Now? tell us more .."}, {"owner": {"reputation": 11, "user_id": 7838809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4QXI.jpg?s=128&g=1", "display_name": "hackthatos", "link": "https://stackoverflow.com/users/7838809/hackthatos"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1519229628, "post_id": 48910421, "comment_id": 84827197, "body": "I can&#39;t create project because there is not kit"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 1, "creation_date": 1519229718, "post_id": 48910421, "comment_id": 84827269, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48272668/cant-import-configure-qt-project\">Can&#39;t import/configure Qt project</a>"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1519229772, "post_id": 48910421, "comment_id": 84827309, "body": "Follow Qt documentation to get a working <code>Kit</code>"}, {"owner": {"reputation": 11, "user_id": 7838809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4QXI.jpg?s=128&g=1", "display_name": "hackthatos", "link": "https://stackoverflow.com/users/7838809/hackthatos"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1519235309, "post_id": 48910421, "comment_id": 84830991, "body": "I Will reinstall the app"}], "owner": {"reputation": 11, "user_id": 7838809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4QXI.jpg?s=128&g=1", "display_name": "hackthatos", "link": "https://stackoverflow.com/users/7838809/hackthatos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533226213, "creation_date": 1519229273, "last_edit_date": 1533226213, "question_id": 48910421, "link": "https://stackoverflow.com/questions/48910421/any-kits-not-found-on-qt-creator-4-5-during-projects-creation", "title": "Any kits not found on Qt creator 4.5 during projects creation", "body": "<p>I installed Qt creator 4.5 on  Windows 10. When I want to create a project, the application does not find any kit. \nI installed Mingw compiler and debuger and Cmake.  </p>\n"}, {"tags": ["c#", "c++", "dll", "c++-cli", "nuget-package"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1519230977, "post_id": 48910352, "comment_id": 84828212, "body": "<a href=\"https://stackoverflow.com/a/28771413/17034\">stackoverflow.com/a/28771413/17034</a>"}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 9293869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d440b292fa2607be79793fc8e1f33b9b?s=128&d=identicon&r=PG&f=1", "display_name": "JackGrinningCat", "link": "https://stackoverflow.com/users/9293869/jackgrinningcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1519242187, "creation_date": 1519242187, "answer_id": 48914178, "question_id": 48910352, "link": "https://stackoverflow.com/questions/48910352/copy-c-dlls-to-build-output-of-any-c-project-that-reference-them-by-extension/48914178#48914178", "title": "Copy C++ dlls to build output of any C# project that reference them by extension", "body": "<p>I like Hans Passants comments. His answer reduces the amount of copied data and allow the seamless use of AnyCPU.</p>\n\n<ul>\n<li>My solution is something which is used by a WPF project. The project type supporting old project files, that are not quite supported by nuget as .NET Core or .NET Standard projects. But no c++cli in .NET Standard. We only have x64 assemblies and my consumers are only internal, so do not need to care about win32.\nThe new nuget syntax allows a great deal in fine control for those dlls, but actually I'm not done with my learning curve and nuget.</li>\n</ul>\n\n<p>So this is what i use for a strict wrapping dll. That people can debug into my dll, I put the debug dll, pdbs into the package, they only are consumed within our company. I do write the target file for the packages that those assemblies get referenced if the user changes the configuration to debug. </p>\n\n<p>native dll &lt;-- c++cli wrapper &lt;-- c# convenience load</p>\n\n<p>' nuspec</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;package xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;metadata xmlns=\"http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd\"&gt;\n    &lt;description&gt;&lt;/description&gt;\n    &lt;id&gt;yourId&lt;/id&gt;\n    &lt;version&gt;$version$&lt;/version&gt;\n    &lt;authors&gt;&lt;/authors&gt;    \n    &lt;!-- Only done because at the beginning I copied the native dll into the lib/net461 folder which gets automatically referenced --&gt;\n    &lt;references&gt;\n      &lt;reference file=\"yourCSharpProject.dll\" /&gt;\n      &lt;reference file=\"yourInteropProject.dll\" /&gt; &lt;!-- if needed --&gt;\n    &lt;/references&gt;\n  &lt;/metadata&gt;\n  &lt;files&gt;\n    &lt;!-- the target file will copy my native dlls into the target file  --&gt;\n    &lt;file src=\"target\\**\" target=\"build\"/&gt;\n\n    &lt;!-- copy all debug and release of ... Native.dlls, pdbs, xml --&gt;\n    &lt;!-- usage hint ** preserves the folder structure, debug and release  --&gt;\n    &lt;file src=\"bin\\x64\\**\\YourNative.*\" target=\"lib\\native\\\" /&gt;  \n\n\n    &lt;!-- copy all debug and release of ... Interop.lls, pdbs, xml --&gt;\n    &lt;file src=\"bin\\x64\\Release\\.*\" target=\"lib\\net461\\\" /&gt;  \n  &lt;/files&gt;\n&lt;/package&gt;\n</code></pre>\n\n<p>' target\\yourpackageName.target</p>\n\n<pre><code>&lt;Project xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n  &lt;Target Name=\"CopyBinaries\" BeforeTargets=\"BeforeBuild\"&gt;\n    &lt;CreateItem Include=\"$(MSBuildThisFileDirectory)../lib/native/$(Configuration)/*\" &gt;\n      &lt;Output TaskParameter=\"Include\" ItemName=\"SomeImportantName\" /&gt;\n    &lt;/CreateItem&gt;\n    &lt;Copy SourceFiles=\"@(SomeImportantName)\" \n          DestinationFolder=\"$(Outputpath)\" \n          SkipUnchangedFiles=\"true\" /&gt;\n  &lt;/Target&gt;\n&lt;/Project&gt;\n</code></pre>\n"}], "owner": {"reputation": 5330, "user_id": 1236401, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xxdAb.jpg?s=128&g=1", "display_name": "Mugen", "link": "https://stackoverflow.com/users/1236401/mugen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 48914178, "answer_count": 1, "score": 0, "last_activity_date": 1519242187, "creation_date": 1519229030, "question_id": 48910352, "link": "https://stackoverflow.com/questions/48910352/copy-c-dlls-to-build-output-of-any-c-project-that-reference-them-by-extension", "title": "Copy C++ dlls to build output of any C# project that reference them by extension", "body": "<p>I have a <code>C#</code> library that references some <code>C++\\CLI</code> project that contains a few <code>C++</code> libraries compiled as <code>dlls</code>.</p>\n\n<p>So all in all, on runtime of any app that uses my library, I need of course the <code>C#</code> and <code>CLI</code> <code>dlls</code>, but also all the <code>C++</code> ones, which are not copied by default even though they are referenced by the <code>CLI</code> project.</p>\n\n<p>Using Pre-build events to copy them manually works.</p>\n\n<p>But not only do I need to add them per application project, but I also want to publish my library as <code>NuGet</code> and cannot control the properties of the referenced projects then.</p>\n\n<p>Any workaround? Event one that is specific to <code>NuGet</code> packages.</p>\n"}, {"tags": ["c++", "arrays", "vector", "heap", "free"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1519228931, "post_id": 48910292, "comment_id": 84826723, "body": "You&#39;re clearly comfortable with vectors using vectors of vectors. Why do you then decide to start using dynamically allocated arrays?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1519229008, "post_id": 48910292, "comment_id": 84826787, "body": "Unrelated to your question, but is there a reason you use pointers instead of references when passing your arguments?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1519229458, "post_id": 48910292, "comment_id": 84827076, "body": "your &#39;new&#39;s are in a single loop. Your &#39;delete&#39;s are nested in two loops. Are you sure you deleting the exact same number of arrays you created ? Start by printing the new&#39;ed address and printing the delete&#39;d address (before deletion). I bet the addresses won&#39;t match."}, {"owner": {"reputation": 15, "user_id": 9118749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5084729b4788d460136eb5301c880?s=128&d=identicon&r=PG&f=1", "display_name": "user9118749", "link": "https://stackoverflow.com/users/9118749/user9118749"}, "edited": false, "score": 0, "creation_date": 1519229469, "post_id": 48910292, "comment_id": 84827085, "body": "No there is no real reason ..I was just way into C code lately .. Might change this later on but should not affect the point that there is something wrong with delete[] or?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9118749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5084729b4788d460136eb5301c880?s=128&d=identicon&r=PG&f=1", "display_name": "user9118749", "link": "https://stackoverflow.com/users/9118749/user9118749"}, "edited": false, "score": 0, "creation_date": 1519231083, "post_id": 48910736, "comment_id": 84828283, "body": "Yeah you are right. I just figured out the same. I was trying to delete single elements inside the array not the array itself. Thanks for your help :)"}, {"owner": {"reputation": 76, "user_id": 8025643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xC_u-DbFwYQ/AAAAAAAAAAI/AAAAAAAAEZg/cmxJfRqdEtU/photo.jpg?sz=128", "display_name": "yannick ott", "link": "https://stackoverflow.com/users/8025643/yannick-ott"}, "reply_to_user": {"reputation": 15, "user_id": 9118749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5084729b4788d460136eb5301c880?s=128&d=identicon&r=PG&f=1", "display_name": "user9118749", "link": "https://stackoverflow.com/users/9118749/user9118749"}, "edited": false, "score": 0, "creation_date": 1519231652, "post_id": 48910736, "comment_id": 84828672, "body": "i correct samples to use reference instead of pointer, because  delete[] rtrn[i][j] with rttn (pointer)  sould not compile"}, {"owner": {"reputation": 15, "user_id": 9118749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5084729b4788d460136eb5301c880?s=128&d=identicon&r=PG&f=1", "display_name": "user9118749", "link": "https://stackoverflow.com/users/9118749/user9118749"}, "edited": false, "score": 0, "creation_date": 1519235884, "post_id": 48910736, "comment_id": 84831330, "body": "Yeah I did the same. I corrected both function to use the vectors by reference."}], "tags": [], "owner": {"reputation": 76, "user_id": 8025643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xC_u-DbFwYQ/AAAAAAAAAAI/AAAAAAAAEZg/cmxJfRqdEtU/photo.jpg?sz=128", "display_name": "yannick ott", "link": "https://stackoverflow.com/users/8025643/yannick-ott"}, "is_accepted": true, "score": 1, "last_activity_date": 1519231573, "last_edit_date": 1519231573, "creation_date": 1519230204, "answer_id": 48910736, "question_id": 48910292, "link": "https://stackoverflow.com/questions/48910292/c-delete-array-inside-2d-vector/48910736#48910736", "title": "C++ Delete array inside 2D vector", "body": "<p>I think you have 3 dimensions array [nbpolygons][2][nbpoints]</p>\n\n<p>Your code :</p>\n\n<pre><code>delete[] rtrn[i][j][0]; // delete  rtrn[i][j] index 0\ndelete[] rtrn[i][j][1]; // delete  rtrn[i][j] (the same array) index 1\n// =&gt; crash\n\n\nrtrn[i].size() always egal 2 \n</code></pre>\n\n<p>Do :</p>\n\n<pre><code>void _cleanup(std::vector&lt;std::vector&lt;int*&gt; &gt;&amp; rtrn)\n{\n    for (unsigned i = 0; i &lt; rtrn.size(); i++)\n    {\n        for (unsigned j = 0; j &lt; rtrn[i].size(); j++)\n        {\n            delete[] rtrn[i][j];\n        }\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>or</p>\n\n<pre><code>void _cleanup(std::vector&lt;std::vector&lt;int*&gt; &gt;&amp; rtrn)\n{\n    for (unsigned i = 0; i &lt; rtrn.size(); i++)\n    {\n        delete[] rtrn[i][0];\n        delete[] rtrn[i][1];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9118749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5084729b4788d460136eb5301c880?s=128&d=identicon&r=PG&f=1", "display_name": "user9118749", "link": "https://stackoverflow.com/users/9118749/user9118749"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 48910736, "answer_count": 1, "score": -1, "last_activity_date": 1519231573, "creation_date": 1519228858, "question_id": 48910292, "link": "https://stackoverflow.com/questions/48910292/c-delete-array-inside-2d-vector", "title": "C++ Delete array inside 2D vector", "body": "<p>Unfortunately I have to use arrays in order to use another function I have copied. Changing this function to work with vectors would be way over my head. So I wrote a function declaring me bunch of arrays in heap to be stored inside a vector.\nI now have trouble freeing up that memory at the end.</p>\n\n<pre><code>void _get_X_Y_arrays(std::vector&lt;std::vector&lt;float&gt; &gt; *voronoi, std::vector&lt;std::vector&lt;int*&gt; &gt; *rtrn)\n{\n    int numberPolygons = voronoi-&gt;size();\n\n    for (int i = 0; i &lt; numberPolygons; i++)\n    {\n        int *x_heap = new int[((*voronoi)[i].size()) / 2];\n        int *y_heap = new int[((*voronoi)[i].size()) / 2];\n        std::vector&lt;int&gt; x(((*voronoi)[i].size()) / 2);\n        std::vector&lt;int&gt; y(((*voronoi)[i].size()) / 2);\n        unsigned j = 0;\n        int count = 0;\n        for (; j &lt; (*voronoi)[i].size(); j += 2, count++)\n        {\n            x[count] = (int)(*voronoi)[i][j];\n            y[count] = (int)(*voronoi)[i][j + 1];\n\n        }\n        std::copy(x.begin(), x.end(), &amp;x_heap[0]);\n        std::copy(y.begin(), y.end(), &amp;y_heap[0]);\n\n        (*rtrn)[i].push_back(x_heap);\n        (*rtrn)[i].push_back(y_heap);\n\n    }\n}\n</code></pre>\n\n<p>The function works well and everything acts like intended. I wrote another function to free up that memory at the end when it's no longer needed:</p>\n\n<pre><code>void _cleanup(std::vector&lt;std::vector&lt;int*&gt; &gt; *rtrn)\n{\n    for (unsigned i = 0; i &lt; rtrn-&gt;size(); i++)\n    {\n        for (unsigned j = 0; j &lt; (*rtrn)[i].size(); j++)\n        {\n            delete[] rtrn[i][j][0];\n            delete[] rtrn[i][j][1];\n        }\n    }\n}\n</code></pre>\n\n<p>Unfortunately this causes the program to crash. I don't really know where the error is. It feels like there might be an vector out of scope ..?\nJust by looking at it and playing with it I'm not able to solve this. What am I doing wrong?</p>\n"}, {"tags": ["c++", "parallel-processing", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": true, "score": 0, "last_activity_date": 1519229080, "creation_date": 1519229080, "answer_id": 48910371, "question_id": 48910268, "link": "https://stackoverflow.com/questions/48910268/mpi-gatherv-vector-subscript-out-of-range/48910371#48910371", "title": "MPI_Gatherv vector subscript out of range", "body": "<p><code>MPI_Gatherv</code> gathers everything to the master rank. <code>alldata</code> on all ranks not equal to the master rank is still empty (hence the two <code>0</code>s initially, as well as the \"Debug assertion Failed!\" error). Put the set of <code>cout</code>s in a <code>if (rank == 0)</code> block, or make sure to broadcast all of the data to the other ranks before you do your <code>cout</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9391897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a99fa3f510726f9687f7a70da1112aa?s=128&d=identicon&r=PG&f=1", "display_name": "thestudentIT", "link": "https://stackoverflow.com/users/9391897/thestudentit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 48910371, "answer_count": 1, "score": 0, "last_activity_date": 1519229080, "creation_date": 1519228786, "question_id": 48910268, "link": "https://stackoverflow.com/questions/48910268/mpi-gatherv-vector-subscript-out-of-range", "title": "MPI_Gatherv vector subscript out of range", "body": "<p>Hello everyone i'm pretty new to MPI and i found out searching on the site that there is a way to collect dynamically sized vector with the combination of gather for the size and then gatherv.\nHowever i have a problem with my code which is a test i'm running to see if i'm doing it correctly.</p>\n\n<pre><code>int main(int arg, char** argvs) {\nMPI_Init(&amp;arg, &amp;argvs);\nint size, rank;\nMPI_Comm_size(MPI_COMM_WORLD, &amp;size);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\nvector&lt;int&gt; vectordata;\nif (rank == 1)\n    vectordata.push_back(2);\nif (rank == 2) {\n    vectordata.push_back(1);\n    vectordata.push_back(5);\n}\n\nint *counts = new int[size];\nint nelements = (int)vectordata.size();\n// Each process tells the root how many elements it holds\nMPI_Gather(&amp;nelements, 1, MPI_INT, counts, 1, MPI_INT, 0, MPI_COMM_WORLD);\n\n// Displacements in the receive buffer for MPI_GATHERV\nint *disps = new int[size];\n// Displacement for the first chunk of data - 0\nfor (int i = 0; i &lt; size; i++)\n    disps[i] = (i &gt; 0) ? (disps[i - 1] + counts[i - 1]) : 0;\n\n// Place to hold the gathered data\n// Allocate at root only\nvector&lt;int&gt; alldata;\nif (rank == 0)\n    // disps[size-1]+counts[size-1] == total number of elements\n    alldata = vector&lt;int&gt;(disps[size - 1] + counts[size - 1]);\n// Collect everything into the root\nMPI_Gatherv(vectordata.data(), nelements, MPI_INT,\n    alldata.data(), counts, disps, MPI_INT, 0, MPI_COMM_WORLD);\n\ncout &lt;&lt; alldata.size() &lt;&lt; endl;\ncout &lt;&lt; alldata[0] &lt;&lt; endl;\ncout &lt;&lt; alldata[1] &lt;&lt; endl;\ncout &lt;&lt; alldata.back() &lt;&lt; endl;\n\nMPI_Finalize();\n}\n</code></pre>\n\n<p>the first cout should print 3, instead it prints:<br>\n0<br>\n0<br>\n3<br>\nthe last 3 cout print:<br>\n2<br>\n1<br>\n5  </p>\n\n<p>however after printing it crashes saying: Debug assertion Failed! vector subscript out of range.<br>\nI think it has something to do with the displacement but i'm not sure what and it would be wonderful if somebody could explain me the line where i calculate disps[i] since i got it from a previous answer and i don't fully understand it.\nThank you in advance.</p>\n"}, {"tags": ["c++", "math", "interpolation", "spline"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519231381, "post_id": 48910211, "comment_id": 84828483, "body": "Did you use a debugger?  A debugger will allow you to single step through your program, one statement at a time and <i>watch</i> values in variables.  Alternatively, you can output values to a log file."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1519231849, "post_id": 48910211, "comment_id": 84828810, "body": "I don&#39;t understand what you are trying here. Can you explain your approach? Start with the spline definition you are using (there are multiple)."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1519232914, "post_id": 48910211, "comment_id": 84829570, "body": "Explain what you observe and what, on the other hand, you expect to observe."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1519233744, "post_id": 48910211, "comment_id": 84830080, "body": "Look inside the book &quot;numerical receipes&quot;. There is the algorithm in C for cubic spline interpolation. It  uses the same tri diagonal matrix inversion algorithm but at least it is 100% full proof. In bonus, you will understand what you do. Old versions are online."}, {"owner": {"reputation": 125, "user_id": 5460515, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Lt107.jpg?s=128&g=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0413\u0435\u0440\u0430\u0441\u0438\u043c\u043e\u0432", "link": "https://stackoverflow.com/users/5460515/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%93%d0%b5%d1%80%d0%b0%d1%81%d0%b8%d0%bc%d0%be%d0%b2"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519239408, "post_id": 48910211, "comment_id": 84833170, "body": "@ThomasMatthews Ofcourse yes. And a lot."}], "owner": {"reputation": 125, "user_id": 5460515, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Lt107.jpg?s=128&g=1", "display_name": "\u0412\u0430\u043b\u0435\u0440\u0438\u0439 \u0413\u0435\u0440\u0430\u0441\u0438\u043c\u043e\u0432", "link": "https://stackoverflow.com/users/5460515/%d0%92%d0%b0%d0%bb%d0%b5%d1%80%d0%b8%d0%b9-%d0%93%d0%b5%d1%80%d0%b0%d1%81%d0%b8%d0%bc%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1519233777, "creation_date": 1519228628, "last_edit_date": 1519233777, "question_id": 48910211, "link": "https://stackoverflow.com/questions/48910211/computational-precision-in-mathematical-computations", "title": "Computational precision in mathematical computations", "body": "<p>I need to build cubic spline interpolation curve, given points in space.</p>\n\n<p>I have next code. That works fine, but there is no needed precision(most probably here is logical mistake).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nstruct INPUT {\n    int N;\n    std::vector&lt;double&gt; x;\n    int M;\n    std::vector&lt;std::vector&lt;double&gt; &gt; lattice;\n    int K;\n    std::vector&lt;double&gt; res_lattice;\n} input_data;\n\nclass CubicSpline{\n    double a = 0;\n    double b = 0;\n    double c = 0;\n    double d = 0;\n    double x = 0;\npublic:\n    CubicSpline() {}\n\n    double get(double input_x){\n        double f_x = input_x-x;\n        return a + b*f_x + c*f_x*f_x/2 + d*f_x*f_x*f_x/6;\n    }\n\n    void setA(double new_a) {\n        a = new_a;\n    }\n\n    void setX(double new_x) {\n        x = new_x;\n    }\n\n    void setB(double new_b) {\n        b = new_b;\n    }\n\n    void setC(double new_c) {\n        c = new_c;\n    }\n\n    void setD(double new_d) {\n        d = new_d;\n    }\n};\n\nclass CubicSplineCurve{\n    std::vector&lt;double&gt; x_values;\n    std::vector&lt;double&gt; y_values;\n    int N;\n    std::vector&lt;CubicSpline&gt; splines;\npublic:\n    CubicSplineCurve(std::vector&lt;double&gt; x_values, std::vector&lt;double&gt; y_values, int N) : x_values(x_values), y_values(y_values), N(N) {\n        splines = std::vector&lt;CubicSpline&gt;(N);\n        int i;\n        for (i = 1; i &lt; N; i++){\n            splines[i].setA(y_values[i]);\n            splines[i].setX(x_values[i]);\n        }\n\n//        std::vector&lt;double&gt; c_values(*get_c_values());\n//        std::vector&lt;double&gt; c_values(N);\n//        get_c_values(c_values);\n        std::vector&lt;double&gt; c_values = get_c_values();\n        for (i = 1; i &lt; N; i++){\n            splines[i].setC(c_values[i]);\n        }\n        std::vector&lt;double&gt; d_values(N);\n        d_values[1] = c_values[1]/h(1);\n        for (i = 2; i &lt; N; i++){\n            d_values[i] = (c_values[i] - c_values[i-1])/h(i);\n            splines[i].setD(d_values[i]);\n        }\n\n        for (i = 1; i &lt; N; i++){\n//            splines[i].setB(u(i) + c_values[i]*h(i)/2 - d_values[i]*pow(h(i), 2)/6);\n            splines[i].setB(h(i)*(2*c_values[i] + c_values[i-1])/6 + u(i));\n\n        }\n\n    }\n\n    double get(double x){\n        int i;\n        for (i = 1; i &lt; N; i++){\n            if (x &lt;= x_values[i]){\n                return splines[i].get(x);\n            }\n        }\n    }\n\n\nprivate:\n    std::vector&lt;double&gt; get_c_values(){\n        std::vector&lt;double&gt; c_values(N);\n        c_values[0] = 0;\n        c_values[N-1] = 0;\n        int k, i;\n\n        std::vector&lt;std::vector&lt;double&gt; &gt; c_matrix = std::vector&lt;std::vector&lt;double&gt; &gt;(N-2);\n\n        for (i = 0; i &lt; N-2; i++){\n            c_matrix[i] = std::vector&lt;double&gt;(N-2);\n        }\n        int n = N-3;\n        c_matrix[0][0] = 2;\n        c_matrix[0][1] = h(2)/(h(1) + h(2));\n        c_matrix[n][n] = 2;\n        c_matrix[n][n-1] = h(N-2)/(h(N-2) + h(N-1));\n\n        for (i = 1; i &lt; n; i++){\n            c_matrix[i][i-1] = h(i)/(h(i) + h(i+1));\n            c_matrix[i][i] = 2;\n            c_matrix[i][i+1] = h(i+1)/(h(i) + h(i+1));\n        }\n\n        std::vector&lt;double&gt; res_vector(N-2);\n\n        for (i = 0;i &lt; n; i++){\n            res_vector[i] = 6 * triple_u(i+2);\n        }\n\n//        std::vector&lt;double&gt; valuable_c_values_gauss = gauss_for_tridiagonal_matrix(c_matrix, res_vector, N-2);\n        std::vector&lt;double&gt; valuable_c_values = shuttle(c_matrix, res_vector, N-2);\n\n\n        for (i = 1; i &lt; N-1; i++){\n            c_values[i] = valuable_c_values[i-1];\n        }\n//        return new std::vector&lt;double&gt;(c_values);\n        return c_values;\n\n\n    }\n\n    // Here i try to round near 0 values, and get rid of computational error.\n    double h(int i){\n        return round((x_values[i] - x_values[i-1])*10000000000)/10000000000;\n    }\n\n    double u(int i){\n        return round((y_values[i]-y_values[i-1])*1000000000/h(i))/1000000000;\n    }\n\n    double triple_u(int i){\n        return round((u(i) - u(i-1))*1000000000/(x_values[i]-x_values[i-2]))/1000000000;\n    }\n\n    // Next 2 methods solving SLE, they gives the same results, for now i use shutle method.\n    std::vector&lt;double&gt; gauss_for_tridiagonal_matrix(std::vector&lt;std::vector&lt;double&gt; &gt; tridiagonalMatrix, std::vector&lt;double&gt; res_vector, int N){\n        int i;\n        int k;\n        for (i = 0; i &lt; N-1; i++){\n            double factor = tridiagonalMatrix[i+1][i]/tridiagonalMatrix[i][i];\n            tridiagonalMatrix[i+1][i] = 0;\n            for (k = i + 1; k &lt; N; k++){\n                tridiagonalMatrix[i+1][k] -= tridiagonalMatrix[i][k]*factor;\n            }\n            res_vector[i+1] -= res_vector[i]*factor;\n        }\n        for (i = N-1; i &gt; 0; i--){\n            double factor = tridiagonalMatrix[i][i];\n            tridiagonalMatrix[i][i] = 1;\n            res_vector[i] = res_vector[i]/factor;\n            factor = tridiagonalMatrix[i-1][i]/tridiagonalMatrix[i][i];\n            for (k = i; k &gt; 0; k--){\n                tridiagonalMatrix[i-1][k] -= tridiagonalMatrix[i][k]*factor;\n            }\n            res_vector[i-1] -= res_vector[i]*factor;\n\n        }\n        double factor = tridiagonalMatrix[0][0];\n        res_vector[0] = res_vector[0]/factor;\n        return res_vector;\n\n    }\n// I get it in internet, because have no clear understanding of this method yet.\n    std::vector&lt;double&gt; shuttle(std::vector&lt;std::vector&lt;double&gt; &gt; tridiagonalMatrix, std::vector&lt;double&gt; res_vector, int N){\n        double y;\n        std::vector&lt;double&gt; a(N);\n        std::vector&lt;double&gt; B(N);\n        int N1 = N - 1;\n        y = tridiagonalMatrix[0][0];\n        a[0] = -tridiagonalMatrix[0][1] / y;\n        B[0] = res_vector[0] / y  ;\n        for (int i = 1; i &lt; N1; i++) {\n            y = tridiagonalMatrix[i][i] + tridiagonalMatrix[i][i - 1] * a[i - 1];\n            a[i] = -tridiagonalMatrix[i][i + 1] / y;\n            B[i] = (res_vector[i] - tridiagonalMatrix[i][i - 1] * B[i - 1]) / y;\n        }\n\n\n        res_vector[N1] = (res_vector[N1] - tridiagonalMatrix[N1][N1 - 1] * B[N1 - 1]) / (tridiagonalMatrix[N1][N1] + tridiagonalMatrix[N1][N1 - 1] * a[N1 - 1]);\n        for (int i = N1 - 1; i &gt;= 0; i--) {\n            res_vector[i] = a[i] * res_vector[i + 1] + B[i];\n        }\n\n        return res_vector;\n    }\n};\n\nvoid proceed_input(INPUT input){\n    int i,k;\n    std::vector&lt;CubicSplineCurve&gt; curves;\n    for (i = 0; i &lt; input.M; i++){\n        curves.push_back(CubicSplineCurve(input.x, input.lattice[i], input.N));\n    }\n    double result;\n    cout.precision(8);\n//    for (i = 0; i &lt; input.N; i++){\n//        double first = input.lattice[0][i];\n//        double second = curves[0].get(input.x[i]);\n//        cout &lt;&lt; first &lt;&lt; \" \" &lt;&lt; second &lt;&lt; \" \" &lt;&lt; abs(first - second) &lt;&lt; endl;\n//    }\n\n    for (i = 0; i &lt; input.M; i++){\n        for (k = 0; k &lt; input.K; k++){\n            result = curves[i].get(input.res_lattice[k]);\n            cout &lt;&lt; result &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n}\n\nint main() {\n    cin &gt;&gt; input_data.N;\n//    input_data.x = std::vector&lt;double&gt;(input_data.N);\n    input_data.x = std::vector&lt;double&gt;(input_data.N);\n    int i;\n    for (i = 0; i &lt; input_data.N; i++){\n        cin &gt;&gt; input_data.x[i];\n    }\n    cin &gt;&gt; input_data.M;\n    input_data.lattice = std::vector&lt;std::vector&lt;double&gt; &gt;(input_data.M);\n    int k;\n    for (k = 0; k &lt; input_data.M; k++){\n        input_data.lattice[k] = std::vector&lt;double&gt;(input_data.N);\n        for (i = 0; i &lt; input_data.N; i++){\n            cin &gt;&gt; input_data.lattice[k][i];\n        }\n    }\n    cin &gt;&gt; input_data.K;\n    input_data.res_lattice = std::vector&lt;double&gt;(input_data.K);\n    for (i = 0; i &lt; input_data.K; i++){\n        cin &gt;&gt; input_data.res_lattice[i];\n    }\n    proceed_input(input_data);\n    return 0;\n}\n</code></pre>\n\n<p>For example, when i try to interpolate sin function. I get next artifact.<a href=\"https://i.stack.imgur.com/Q4WA4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q4WA4.png\" alt=\"plotting artifact\"></a></p>\n\n<p>Here  we can see that even if functions is continuos, their 1-st and 2-nd derivative is not equals in point. But I can't understand why so.</p>\n\n<p>Where can be error?</p>\n"}, {"tags": ["c++", "pointers", "shallow-copy"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1519228971, "post_id": 48910201, "comment_id": 84826754, "body": "This code is terribly convoluted. I&#39;d throw it away and rethink everything from scratch."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1519236668, "post_id": 48910201, "comment_id": 84831764, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1519236788, "post_id": 48910201, "comment_id": 84831820, "body": "Also, why in the 21st century are you writing a bubble sort, when there&#39;s a perfectly good <code>std::sort()</code> available to you?  (Obviously that won&#39;t fix the problem of moving pointed-to objects, but it would make your code much, <i>much</i> clearer to read.)"}], "answers": [{"comments": [{"owner": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "edited": false, "score": 0, "creation_date": 1519230179, "post_id": 48910305, "comment_id": 84827604, "body": "What edit do you suggest?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "edited": false, "score": 0, "creation_date": 1519230504, "post_id": 48910305, "comment_id": 84827834, "body": "@thethiny Let <code>vector</code> store pointers, instead of objects themselves."}, {"owner": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "edited": false, "score": 0, "creation_date": 1519230565, "post_id": 48910305, "comment_id": 84827880, "body": "Is my problem somehow related to shallow-copy?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "edited": false, "score": 0, "creation_date": 1519230588, "post_id": 48910305, "comment_id": 84827902, "body": "@thethiny You seem to be attempting to combine the behaviour of an array with a linked list. What do you need the next pointer for?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "edited": false, "score": 0, "creation_date": 1519230762, "post_id": 48910305, "comment_id": 84828048, "body": "@thethiny Not that related, the key point is the difference between the address of the object and the object itself. They won&#39;t be automatically updated to keep consistency."}, {"owner": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519230826, "post_id": 48910305, "comment_id": 84828098, "body": "@user4581301 So that I maintain the original order after sorting."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "edited": false, "score": 1, "creation_date": 1519235691, "post_id": 48910305, "comment_id": 84831215, "body": "@thethiny You can go all-in on on pointers as liliscent suggests, you can make a copy of the array before sorting it, you can store the original array index instead of the next pointer. Each has advantages and disadvantages. All in on pointers has poor spatial locality leading to a greatly increased likelihood of cache misses (slows runtime performance), plus it picks up additional memory management concerns. Copy takes time to copy and doubles the memory cost. Recreating the original order from Stored indices can be expensive (but often not as expensive as a cache miss)"}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 1, "last_activity_date": 1519228914, "creation_date": 1519228914, "answer_id": 48910305, "question_id": 48910201, "link": "https://stackoverflow.com/questions/48910201/sorting-an-array-makes-pointers-link-wrongly/48910305#48910305", "title": "Sorting an array makes pointers link wrongly", "body": "<pre><code>                person x = people[j];\n                people[j] = people[i];\n                people[i] = x;\n</code></pre>\n\n<p>This is because you swap the values in your sorting code above, while the address <code>person *next</code> recorded in the <code>struct</code> has not been changed. </p>\n\n<p>Thus the old address is still inside the <code>struct person</code>, while the content in that address has already been modified during swapping, which leads the inconsistency.</p>\n"}], "owner": {"reputation": 852, "user_id": 1961688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H5P1d.jpg?s=128&g=1", "display_name": "thethiny", "link": "https://stackoverflow.com/users/1961688/thethiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1519242575, "accepted_answer_id": 48910305, "answer_count": 1, "score": 0, "last_activity_date": 1519228914, "creation_date": 1519228598, "question_id": 48910201, "link": "https://stackoverflow.com/questions/48910201/sorting-an-array-makes-pointers-link-wrongly", "closed_reason": "Not suitable for this site", "title": "Sorting an array makes pointers link wrongly", "body": "<p>So I'm doing a sort algorithm of objects that have some integers and a pointer. Whenever I do the sort, the pointer starts acting odd and links to the wrong index.</p>\n\n<p>Here's my code</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdio.h&gt;\nusing namespace std;\n\nclass person\n{\npublic:\n    int knots, time, ID;\n    int untie, status = 1;\n    person *next = NULL;\n};\n///DEBUG\nvoid print(person *a, int p)\n{\n\n        for (int i = 0; i &lt; p; i++)\n        {\n            cout&lt;&lt;a[i].ID&lt;&lt;\": \"&lt;&lt;a[i].knots&lt;&lt;\" \"&lt;&lt;a[i].time&lt;&lt;\" \"&lt;&lt;a[i].untie&lt;&lt;\" \"&lt;&lt;a[i].status&lt;&lt;\" Next: \"&lt;&lt;a[i].next-&gt;ID&lt;&lt;endl;\n        }\n        cout&lt;&lt;endl;\n}\n\nint main()\n{\n    int p;\n    scanf(\"%d\\n\", &amp;p);\n    while (p != -1)\n    {\n        person *people = new person[p];\n\n        for (int i = 0; i &lt; p; i++)\n        {\n            people[i].ID = i+1;\n            scanf(\"%d \", &amp;people[i].knots);\n            if (i)\n            {\n                people[i-1].next = &amp;people[i];\n            }\n        }\n        people[p-1].next = &amp;people[0];\n            scanf(\"/n\");\n        for (int i = 0; i &lt; p; i++)\n        {\n            scanf(\"%d \", &amp;people[i].time);\n            if (i)\n            {\n                people[i-1].untie = people[i-1].time * people[i].knots;\n            }\n        }\n        people[p-1].untie = people[p-1].time * people[0].knots;\n        print(people, p);\n\n        ///SORTING\n        for (int i = 0; i &lt; p-1; i++)\n        {\n            for (int j = i; j &lt; p; j++)\n            {\n                if (people[j].untie &lt; people[i].untie)\n                {\n\n                    person x = people[j];\n                    people[j] = people[i];\n                    people[i] = x;\n\n                }\n            }\n        }\n\n        print(people, p);\n\n        for (int i = 0; i &lt; p; i++)\n        {\n            if (people[i].status)\n            {\n                if (people[i].next-&gt;untie == people[i].untie)\n                {\n                    people[i].next-&gt;status = 2;\n                }\n                else\n                    people[i].next-&gt;status = 0;\n\n                if (people[i].status == 2)\n                    people[i].status = 0;\n            }\n        }\n\n        print(people, p);\n    }\n}\n</code></pre>\n\n<p>The sorting is working fine, but the problem is when I'm linking \"next\" it's linking to the wrong object. The reason I'm using a linking is to maintain the order even after the sort.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1519228592, "post_id": 48910166, "comment_id": 84826450, "body": "<code>Answer</code> is an <code>int</code> (it can only contain numbers) and you want to compare it to a string, what do you expect?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1519228601, "post_id": 48910166, "comment_id": 84826463, "body": "<code>Answer = &quot;Hello&quot;</code> makes no sense at all. Even if you were to do a comparison instead of an assignment"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519228655, "post_id": 48910166, "comment_id": 84826512, "body": "Probably: <code>int Answer;</code> -&gt; <code>string Answer;</code> and <code>Answer = &quot;Hello&quot;</code> -&gt; <code>Answer == &quot;Hello&quot;</code>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1519228725, "post_id": 48910166, "comment_id": 84826577, "body": "I would recommend you start with <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good C++ book</a>"}, {"owner": {"reputation": 130, "user_id": 8781554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t9Cm8.png?s=128&g=1", "display_name": "Xam", "link": "https://stackoverflow.com/users/8781554/xam"}, "edited": false, "score": 3, "creation_date": 1519228743, "post_id": 48910166, "comment_id": 84826587, "body": "Trying to do these kind of programs after only two days learning C++ isn&#39;t a good idea. For example, you&#39;re using an assignment instead of a comparison. Also you can&#39;t compare a string with an integer in the way you did. And finally, isn&#39;t a good idea to use an ancient, non-standard library as <code>&lt;conio.h&gt;</code>. Better spend some time reading a good C++ book."}], "answers": [{"tags": [], "owner": {"reputation": 1118, "user_id": 4333844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abf5fe6c1d0fb708efb1ffdc0b4ee962?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Y.", "link": "https://stackoverflow.com/users/4333844/jorge-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1519228649, "creation_date": 1519228649, "answer_id": 48910220, "question_id": 48910166, "link": "https://stackoverflow.com/questions/48910166/a-value-of-type-const-char-cannot-be-assigned-to-an-entity-of-type-int/48910220#48910220", "title": "A value of type &quot;const char*&quot; cannot be assigned to an entity of type &quot;int&quot;", "body": "<p>First, in c++ when you want to compare two objects/structs/literals, you use double equal <code>==</code>, not single equal <code>=</code>. Single equal is to assing a value, and unlike other programming languages where the meaning of <code>=</code> changes if you are in an \"if\" condition, in C++ you are assigning a value and returning that value to be evaluated by the condition.</p>\n\n<p>Second, when you want to put text into a variable, you don't use and int variable like you are doing with \"Answer\", you use for example a std::string.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519230370, "post_id": 48910285, "comment_id": 84827745, "body": "Very &quot;up-goer five&quot; - I like!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1519228833, "creation_date": 1519228833, "answer_id": 48910285, "question_id": 48910166, "link": "https://stackoverflow.com/questions/48910166/a-value-of-type-const-char-cannot-be-assigned-to-an-entity-of-type-int/48910285#48910285", "title": "A value of type &quot;const char*&quot; cannot be assigned to an entity of type &quot;int&quot;", "body": "<pre><code>int Answer;\n</code></pre>\n\n<p>this states that <code>Answer</code> is a variable of type signed fixed bit count integer (typically 32 bits).</p>\n\n<pre><code>cin &gt;&gt; Answer;\n</code></pre>\n\n<p>this reads an integer from input and stores it in Answer.</p>\n\n<p><code>\"Hello\"</code> is a constant array of characters.</p>\n\n<pre><code>Answer = \"Hello\"\n</code></pre>\n\n<p>here <code>=</code> is assignment, not comparison.  <code>==</code> is comparison in C++.</p>\n\n<p>Variables have types in C++.  You cannot store an array of characters in an <code>int</code>.  When that fails, it tries storing a pointer to the array of characters; that also fails.  It gives you an error.</p>\n\n<p>Try making <code>Answer</code> a <code>std::string</code> instead of an <code>int</code>, and using <code>==</code> instead of <code>=</code> to compare it to <code>\"Hello\"</code>.</p>\n\n<p>Your code will at least compile.</p>\n\n<p><a href=\"https://ideone.com/7dEZhu\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 9391854, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-I_XyVqRRP_4/AAAAAAAAAAI/AAAAAAAADVk/XoFHzL90Q9A/photo.jpg?sz=128", "display_name": "Harut Soghomonyan", "link": "https://stackoverflow.com/users/9391854/harut-soghomonyan"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2207, "favorite_count": 0, "closed_date": 1519241815, "accepted_answer_id": 48910285, "answer_count": 2, "score": -5, "last_activity_date": 1550846936, "creation_date": 1519228458, "last_edit_date": 1550846936, "question_id": 48910166, "link": "https://stackoverflow.com/questions/48910166/a-value-of-type-const-char-cannot-be-assigned-to-an-entity-of-type-int", "closed_reason": "Needs details or clarity", "title": "A value of type &quot;const char*&quot; cannot be assigned to an entity of type &quot;int&quot;", "body": "<p>I want to make a program that would talk with someone but I have started learning C++ only 2 days ago so now I don't understand what to do to get rid of this error.\nI want program to \"cout\" Hello if someone typed \"Hello\" but it doesn't work :(\nIt says:</p>\n\n<blockquote>\n  <p><strong>A value of type \"const char*\" cannot be assigned to an entity of type \"int\"</strong>.</p>\n</blockquote>\n\n<p>I tried to change \"int\" to <em>char, long long, unsigned char, unsigned long long, unsigned int</em> but it didn't work :D</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\n\nint main() {\n    int Answer;\n        cout &lt;&lt; \"Hello! I'm a new born AI.\";\n        cin &gt;&gt; Answer;\n        if (Answer = \"Hello\") //ERROR IS HERE {\n            cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n\n        }\n\n        }\n\n        _getch();\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "constants", "literals"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1519228266, "post_id": 48909995, "comment_id": 84826195, "body": "How about good old:  const uint64_t one = 1ULL;"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 5, "creation_date": 1519228270, "post_id": 48909995, "comment_id": 84826197, "body": "Surely this is solved by not using auto? Show me the benefit that <code>auto</code> gave you, over simply declaring  <code>std::uint64_t v = 1;</code> ?  Anyway, you can decorate your 1 with U and L, to make it unsigned and long."}, {"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1519228843, "post_id": 48909995, "comment_id": 84826659, "body": "@GemTaylor Updated question."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1519229356, "post_id": 48909995, "comment_id": 84827005, "body": "Why not a function style cast then? <code>constexpr auto v = std::uint64_t{1} &lt;&lt; 32</code>? Goes hand in hand with Herb Sutter&#39;s almost always auto advice."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1519229672, "post_id": 48909995, "comment_id": 84827235, "body": "@Lingxi: &quot;<i>Note that unsigned long long doesn\u2019t necessarily map to uint64_t.</i>&quot; And <code>uint64_t</code> doesn&#39;t have to be defined by your compiler either, yet your code assumes that it is. I see no difference between that assumption and the assumption that <code>ULL</code> is 64-bits. Are there real systems that provide <code>uint64_t</code> which <i>don&#39;t</i> define <code>ULL</code> to be 64-bits?"}], "answers": [{"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1519228606, "post_id": 48910129, "comment_id": 84826470, "body": "Nowhere is it a fact that <code>ULL</code> maps unconditionally to <code>std::uint64_t</code>."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1519228700, "post_id": 48910129, "comment_id": 84826555, "body": "@rubenvb Meant to add that"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1519228706, "post_id": 48910129, "comment_id": 84826564, "body": "While <code>LL</code>/<code>ULL</code> will work in most cases for 64-bit literals, <code>L</code>/<code>UL</code> will likely break across different systems since Windows still uses 32-bit <code>long</code>s."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": -2, "last_activity_date": 1519228687, "last_edit_date": 1519228687, "creation_date": 1519228348, "answer_id": 48910129, "question_id": 48909995, "link": "https://stackoverflow.com/questions/48909995/best-proper-way-to-define-uint64-t-constants/48910129#48910129", "title": "Best/proper way to define uint64_t constants", "body": "<p>There are specifiers for exactly this, using <code>L</code> makes your integer literal a <code>long</code>, <code>LL</code> a <code>long long</code> and <code>ULL</code> an <code>unsigned long long</code>, or, <code>uint64_t</code> (most of the time).</p>\n\n<p>Or just drop <code>auto</code> all together and just let the compiler make the implicit cast. </p>\n"}, {"comments": [{"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "edited": false, "score": 0, "creation_date": 1519233895, "post_id": 48910449, "comment_id": 84830191, "body": "I&#39;m somewhat restrained from using functional style cast, because some say it&#39;s from C, and modern C++ should avoid using it (like Google&#39;s C++ Coding Style). In practice, I find functional style and C-style casts quite convenient and elegant in certain contexts. I guess I&#39;m going to have my own opinion on this instead of blindly following others."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 3, "last_activity_date": 1519229772, "last_edit_date": 1519229772, "creation_date": 1519229364, "answer_id": 48910449, "question_id": 48909995, "link": "https://stackoverflow.com/questions/48909995/best-proper-way-to-define-uint64-t-constants/48910449#48910449", "title": "Best/proper way to define uint64_t constants", "body": "<blockquote>\n  <p>Therefore, it's not exactly <code>uint64_t</code>. I'm wondering what is the best/proper way to define <code>uint64_t</code> constants.</p>\n</blockquote>\n\n<p>If you want to be absolutely sure, you can write <code>uint64_t(1)</code> (possibly <code>std::</code>-qualified) instead as a shorter alternative to your <code>static_cast</code>.</p>\n\n<p>For practical purposes, <code>UINT64_C</code> is fine though. Implementations aren't required to define <code>uint64_t</code> if they don't provide any type which meets its requirements. It makes sense because of that to define <code>UINT64_C</code> in terms of <code>uint_least64_t</code>.</p>\n\n<p>But on implementations where <code>uint64_t</code> does exist -- and you're implicitly already assuming you're using such an implementation -- <code>uint64_t</code> and <code>uint_least64_t</code> must have the exact same range, are it would pretty much require malice on the implementor's part to not make them the exact same type.</p>\n\n<p>P.S. Since this is tagged language-lawyer: there is no guarantee that <code>uint64_t(1) &lt;&lt; 32</code> still has type <code>uint64_t</code>. Hypothetically, an implementation may provide a larger-than-64-bit <code>int</code> type, in which case <code>uint64_t</code> would be promoted to <code>int</code>.</p>\n"}], "owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 48910449, "answer_count": 2, "score": 3, "last_activity_date": 1519235137, "creation_date": 1519227994, "last_edit_date": 1519235137, "question_id": 48909995, "link": "https://stackoverflow.com/questions/48909995/best-proper-way-to-define-uint64-t-constants", "title": "Best/proper way to define uint64_t constants", "body": "<p><code>constexpr auto v = static_cast&lt;std::uint64_t&gt;(1) &lt;&lt; 32;</code> is not ideal, because of the tedious syntax and the cast which is semantically indirect. From <a href=\"https://stackoverflow.com/a/22363263/1348273\">this</a> thread, I learned <code>constexpr auto v = UINT64_C(1) &lt;&lt; 32;</code> However, the precise semantics of the <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\">macro</a> is</p>\n\n<blockquote>\n  <p>expands to an integer constant expression having the value specified\n  by its argument and the type <code>uint_least64_t</code>.</p>\n</blockquote>\n\n<p>Therefore, it's not exactly <code>uint64_t</code>. I'm wondering what is the best/proper way to define <code>uint64_t</code> constants.</p>\n\n<p>Note that <code>unsigned long long</code> doesn\u2019t necessarily map to <code>uint64_t</code>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I'm reluctant to use functional/C-style cast, because some (e.g., Google C++ Coding Style) say it's from C, and modern C++ should avoid using them. Looks like I should have my own opinion on this, instead of blindly following others.</p>\n"}, {"tags": ["c++", "fltk"], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5462619, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/EKl0e.jpg?s=128&g=1", "display_name": "Tigran84", "link": "https://stackoverflow.com/users/5462619/tigran84"}, "is_accepted": false, "score": 0, "last_activity_date": 1519301112, "creation_date": 1519301112, "answer_id": 48926975, "question_id": 48909977, "link": "https://stackoverflow.com/questions/48909977/childs-in-scrollbar-is-hiding-in-time-of-scroll/48926975#48926975", "title": "childs in scrollbar is hiding in time of scroll", "body": "<p>To solve this problem I added line of code inside for circle, every time when I create a child I need to add it to Fl_Group widget</p>\n\n<pre><code>for(int i=0; i &lt; 1500 ; i++) {\nSimpleBox *b1 = new SimpleBox(Point(group-&gt;x(),(i*60)+group-&gt;y()+5),\n            Size(group-&gt;w()-5, 60),\"SimpleBox\");\n    b1-&gt;add_image(image_names[i]);\n    group-&gt;add(b1); &lt;-------------\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 5462619, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/EKl0e.jpg?s=128&g=1", "display_name": "Tigran84", "link": "https://stackoverflow.com/users/5462619/tigran84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519301112, "creation_date": 1519227952, "last_edit_date": 1519228749, "question_id": 48909977, "link": "https://stackoverflow.com/questions/48909977/childs-in-scrollbar-is-hiding-in-time-of-scroll", "title": "childs in scrollbar is hiding in time of scroll", "body": "<p>I have one Fl_Group item, inside it I have  a Scrollbar, inside scrollbar one Fl_Group and in group many childs  (Fl_Box items ). In time of scroll child items is hiding when first box item outside of top\n<a href=\"https://i.stack.imgur.com/p91ss.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p91ss.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Box::Box(MyOverlayWindow *win, Point p1, Point p2,\n        Size s1, Size s2, const char *L)\n           :Fl_Group(p1.x(),p1.y(),100,100,L),\n         m_x0(p1.x()),m_y0(p1.y()),m_x1(p2.x()),m_y1(p2.y()),\n         start_size(s1), end_size(s2)\n\n{\n    set_start_size(start_size);\n    oly = win;\n    Fl_Scroll *scroll = new Fl_Scroll(x()+5,y()+5,w()-15,h()-15);\n    scroll-&gt;box(FL_ROUNDED_BOX);\n    scroll-&gt;color(FL_WHITE);\n    group = new  Fl_Group(x()+5,y()+5,scroll-&gt;w()-15,40000);\n    group-&gt;box(FL_ROUNDED_BOX);\n    group-&gt;color(FL_WHITE);\n    std::vector&lt;std::string&gt; image_names;\n    put_lines_to_vector(image_names);\n    for(int i=0; i &lt; 1500 ; i++) {\n    SimpleBox *b1 = new SimpleBox(Point(group-&gt;x(),(i*60)+group-&gt;y()+5),\n                Size(group-&gt;w()-5, 60),\"SimpleBox\");\n        b1-&gt;add_image(image_names[i]);\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/z8qvk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z8qvk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 6, "creation_date": 1519227983, "post_id": 48909973, "comment_id": 84825963, "body": "Right. <code>std::vector</code> isn&#39;t totally broken."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519228092, "post_id": 48909973, "comment_id": 84826051, "body": "&quot;no matter how many vectors of vectors of ...&quot; don&#39;t do that.  It&#39;s not great with one of them - but the moment you have 2 nested you can be pretty sure that your design has taken a wrong turn."}, {"owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "edited": false, "score": 0, "creation_date": 1519228271, "post_id": 48909973, "comment_id": 84826198, "body": "fair enough, what alternatives should be considered?"}, {"owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "edited": false, "score": 0, "creation_date": 1519228291, "post_id": 48909973, "comment_id": 84826212, "body": "&quot;Copy assignment operator. Replaces the contents with a copy of the contents of other.&quot; More information on <a href=\"http://en.cppreference.com/w/cpp/container/vector/operator%3D\" rel=\"nofollow noreferrer\"><code>vector</code></a>."}, {"owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "edited": false, "score": 0, "creation_date": 1519228359, "post_id": 48909973, "comment_id": 84826264, "body": "curious why all the downvotes?  Is the question not clear enough?  Are basic questions simply frowned upon?  I searched overflow and didn&#39;t see this questions posed elsewhere."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 3, "creation_date": 1519228366, "post_id": 48909973, "comment_id": 84826272, "body": "Strange downvote sniping, without a valid reason going on here - shame."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1519228647, "post_id": 48909973, "comment_id": 84826505, "body": "The c++ community on SO seems to have a tendency to downvote questions that seems obvious to them. I think it&#39;s seen as evidence of insufficient research. Unfortunately, while I would assume this information is wildly available, it can be difficult for beginners to come up with the right search terms for problems like these."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519229084, "post_id": 48909973, "comment_id": 84826839, "body": "@Fran&#231;oisAndrieux I agree the community could be harsh sometimes, but &quot;research&quot; also takes into account the books/tutorials the OP has gone through which, if any good, teach him the basic terminology."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1519229286, "post_id": 48909973, "comment_id": 84826963, "body": "@DeiDei I agree with you. But unfortunately, it&#39;s shocking how many developers can&#39;t properly describe what value semantics mean. It&#39;s a concept the current state of education seems to miss constantly, and it seems to me like the keyword here."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519231564, "post_id": 48909973, "comment_id": 84828613, "body": "You may want to pass the vector by reference to avoid copying."}], "answers": [{"tags": [], "owner": {"reputation": 2296, "user_id": 4232755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1787803934/picture?type=large", "display_name": "Benjamin James Drury", "link": "https://stackoverflow.com/users/4232755/benjamin-james-drury"}, "is_accepted": false, "score": 0, "last_activity_date": 1519228045, "creation_date": 1519228045, "answer_id": 48910014, "question_id": 48909973, "link": "https://stackoverflow.com/questions/48909973/assignment-of-c-vector-of-vector-of-double-safe/48910014#48910014", "title": "assignment of C++ vector of vector of double = safe?", "body": "<p>Whilst not necessarily best practise, vectors of vectors of vectors are perfectly valid.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 4, "last_activity_date": 1519228134, "creation_date": 1519228134, "answer_id": 48910050, "question_id": 48909973, "link": "https://stackoverflow.com/questions/48909973/assignment-of-c-vector-of-vector-of-double-safe/48910050#48910050", "title": "assignment of C++ vector of vector of double = safe?", "body": "<p>All of the memory issues that might arise from dynamic allocation are taken care for you by <code>std::vector</code>, <code>operator=</code> does exactly what you think it does. If it's good practice is another question..</p>\n"}, {"tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": false, "score": 1, "last_activity_date": 1519236847, "creation_date": 1519236847, "answer_id": 48912789, "question_id": 48909973, "link": "https://stackoverflow.com/questions/48909973/assignment-of-c-vector-of-vector-of-double-safe/48912789#48912789", "title": "assignment of C++ vector of vector of double = safe?", "body": "<p>What a surprise! Nobody sited <a href=\"https://en.wikipedia.org/wiki/Exception_safety\" rel=\"nofollow noreferrer\">exception safety</a>.</p>\n\n<p>Every piece of code in the standard libray followes the <em>basic exception safety</em>. Some operation ensures <em>strong exception safety</em> others are noexcept (nothrow guarantee).</p>\n\n<p>For vector copy, the standard does not say much. But I know that libstdc++ and libc++ ensure strong exception safety. So either the operation succeed and all post conditions are ensured, or an exception is thrown and the state of the vector is not changed.</p>\n\n<hr>\n\n<p>When programming, and any sensible c++ coder does it, always ensures that each piece of code ensures the <em>basic exception safety</em>. Moreover it is a good idea specify in comments which exception safety ensures each function.</p>\n\n<p>Your question is realy pertinent. Exception safety is what makes container implementation non trivial.</p>\n"}], "owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1519236847, "creation_date": 1519227934, "last_edit_date": 1519231505, "question_id": 48909973, "link": "https://stackoverflow.com/questions/48909973/assignment-of-c-vector-of-vector-of-double-safe", "title": "assignment of C++ vector of vector of double = safe?", "body": "<p>Is the assignment below always performed with neither memory leaks nor uninitialized or even unallocated memory?  </p>\n\n<p>No cell in the resulting <code>a</code> will have the same address as a cell in the resulting <code>b</code>?   </p>\n\n<p>Would this be the case no matter how many vectors of vectors... of vectors we have?</p>\n\n<pre><code>vector&lt;vector&lt;double&gt;&gt; a, b;\n\n// Give a and b random contents: empty, rectangular, ragged, etc.\n\na = b;\n</code></pre>\n"}, {"tags": ["c++", "class", "constructor", "subclass"], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 3914156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1aa9ddeefbde7ae57fc92555b31fa08?s=128&d=identicon&r=PG&f=1", "display_name": "mfkw1", "link": "https://stackoverflow.com/users/3914156/mfkw1"}, "is_accepted": false, "score": 0, "last_activity_date": 1519229403, "creation_date": 1519229403, "answer_id": 48910456, "question_id": 48909933, "link": "https://stackoverflow.com/questions/48909933/two-constructors-with-without-parameter-no-input-run-without-parameter/48910456#48910456", "title": "Two constructors (with &amp; without parameter), no input -&gt; run without parameter. Skipping constructors in the classes above", "body": "<p>Problem with eating first letter happens because you are eating one character in constructor of <code>Animal</code>. Calling <code>cin.ignore()</code> ignores one character. This is ok if you are using <code>cin.getline()</code> after <code>cin &gt;&gt;</code>, because <code>operator&gt;&gt;</code> leaves <code>\\n</code> in buffer and <code>cin.getline()</code> would read empty string. However, in your case it does not take place. You should use <code>cin &gt;&gt;</code> method everywhere.</p>\n\n<p>Also, getting input from user in constructor of model isn't a good approach in most cases.</p>\n"}], "owner": {"reputation": 57, "user_id": 9277422, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ec636c276d97c951ec984f74d78064e2?s=128&d=identicon&r=PG&f=1", "display_name": "Me myself and I", "link": "https://stackoverflow.com/users/9277422/me-myself-and-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519229403, "creation_date": 1519227829, "question_id": 48909933, "link": "https://stackoverflow.com/questions/48909933/two-constructors-with-without-parameter-no-input-run-without-parameter", "title": "Two constructors (with &amp; without parameter), no input -&gt; run without parameter. Skipping constructors in the classes above", "body": "<p>Right now I got a class with multiple subclasses. All classes consist of a constructor asking for data input in each class (it's private, so each class ask for it's own data). Right now, I'm working on a subclass that will ask for a name. If the user presses ENTER (no input), it'll run the constructor of the class without parameter. If there's any input, it'll put that input into the class' constructor that has parameters.</p>\n\n<p>My problem is that whenever I put no input, it asks all the question it is supposed to (from the classes above the subclass), and works well. However, it skips the first letter of the name. E.g I write \"Jordan\" as name, and it gets saved as \"ordan\". </p>\n\n<p>Second, if I put no input, it'll use the constructor without parameters. It asks for the name (it's being asked by the \"main\" consutrctor, the main class. I write in the name, and it skips all the other questions from the subconstructors - which it is not supposed to do. </p>\n\n<p>I have tried to just make an object inside case 'F': like Fish f1; and that works, but that is not what I am supposed to do here (homework). What can it be? I thought it could be the cin.ignore(); fucking up, but I need it there.</p>\n\n<p><strong>I find it hard to explain, but if you do the following with the code below (write in console).</strong></p>\n\n<ol>\n<li>You'll be asked to write \"F\" to add a fish, write F.</li>\n<li>Write a random name (not empty).</li>\n<li>All other questions will be answered, which it is not supposed to be. The constructor should ask the questions - here's the first\nproblem.</li>\n</ol>\n\n<p><strong>And again, start on new:</strong></p>\n\n<ol>\n<li>Write \"F\" to add a fish.</li>\n<li>Write nothing, just press enter when asked for name.</li>\n<li>Write a random name.</li>\n<li>Write y or n on the freshwater question, same goes to next question.</li>\n<li>You'll see the Name has lost it first letter.</li>\n</ol>\n\n<p>Here's the code (shortened):</p>\n\n<pre><code>#ifdef _MSC_VER\n#define _CRT_SECURE_NO_WARNINGS\n#endif\n\n#include &lt;iostream&gt;\nusing namespace std;\n\nconst int STRLEN = 20;\n\n// FUNCTIONS\nbool Question(); // User input y or n, sets the correct bool value\nvoid Answer(bool n);    // Changes true to yes, false to no\n\nclass Animal {\nprivate:\n    char name[STRLEN];\n\npublic:\n    Animal() { cout &lt;&lt; \"\\nAnimal name: \"; cin.ignore();  cin.getline(name, STRLEN); }\n    Animal(char nam[]) { strcpy(name, nam); } // Const with parameter, sent from Fish-class\n\n    void writeName() { cout &lt;&lt; \"Name: \" &lt;&lt; name &lt;&lt; '\\n'; } \n};\n\nclass AnimalWater : public Animal {\nprivate:\n    bool freshwater;\n\npublic:\n    AnimalWater() { cout &lt;&lt; \"Freshwater? (y/n): \"; freshwater = Question(); }\n    AnimalWater(char name[]) : Animal(name) { } // Sendes name (used by Fish) up to Animal-class\n    void writeWater() { cout &lt;&lt; \"Freshwater? \"; Answer(freshwater); cout &lt;&lt; '\\n'; }\n};\n\nclass Fisk : public AnimalWater {\nprivate:\n    bool haveGills;\n\npublic:\n    Fisk() { cout &lt;&lt; \"Does the fish have gills? (y/n): \"; haveGills = Question(); }\n    Fisk(char name[]) : AnimalWater(name) { } // Send the Fish name up to Animal-class\n    void writeGills() { Answer(haveGills); }\n};\n\nint main() {\n    char choice;\n\n    cout &lt;&lt; \"\\nWrite F to add a fish: \";\n    cin &gt;&gt; choice; choice = toupper(choice); \n\n    while (choice != 'Q') {             // If not Q(uit), run\n        switch (choice) {\n        case 'F': {\n            char fishname[STRLEN];\n            cout &lt;&lt; \"Name of the fish: \"; cin.ignore();\n            cin.getline(fishname, STRLEN);\n\n            if (strlen(fishname) &gt; 0) {  // if user input &gt; 0\n                Fisk f1(fishname); // sned fishname as parameter to the Fish constructor\n                f1.writeName(); f1.writeWater(); f1.writeGills();\n            }\n            else {  // else use the constructor without parameter\n                Fisk f1; f1.writeName(); f1.writeWater(); f1.writeGills(); \n            }\n            break;\n        }\n        }\n\n        cout &lt;&lt; \"\\n\\nWhat to do? \";\n        cin &gt;&gt; choice; choice = toupper(choice);\n    }\n    return 0;\n}\n\nbool Question() { \n    char answer; cin &gt;&gt; answer; answer = toupper(answer); \n    if (answer == 'Y') return true; \n    else return false;\n}\n\nvoid Answer(bool n) {\n    if (n) cout &lt;&lt; \"yes\";\n    else cout &lt;&lt; \"no\";\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 3, "creation_date": 1519227909, "post_id": 48909833, "comment_id": 84825897, "body": "Interestingly enough, compiling your code with <code>-std=c++11</code> yields the result you mentioned, but everything looks good with <code>c++14</code> or <code>c++17</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 6, "creation_date": 1519228008, "post_id": 48909833, "comment_id": 84825978, "body": "Seems like a compiler bug to me. Considering what JBL found out, and that the code works fine in clang++ in c++11 mode. And that I don&#39;t think there&#39;s anything wrong with the program"}, {"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 0, "creation_date": 1519228121, "post_id": 48909833, "comment_id": 84826071, "body": "Yup, works on <a href=\"http://coliru.stacked-crooked.com/a/1b2cb1b3fbd5acdc\" rel=\"nofollow noreferrer\">coliru with clang and c++11</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1519228191, "post_id": 48909833, "comment_id": 84826137, "body": "I can reproduce this with VS2015. Adding <code>P() {}</code> allows the exception to be caught but <code>P() = default;</code> doesn&#39;t help. <code>std::is_nothrow_default_constructible&lt;P&gt;::value;</code> seems to be <code>true</code> which is a problem. It seems that the default member intializers aren&#39;t taken into account when deciding the default constructor&#39;s <code>noexcept</code>ness."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519228411, "post_id": 48909833, "comment_id": 84826308, "body": "@Fran&#231;oisAndrieux That&#39;s strange. <code>std::is_nothrow_default_constructible&lt;P&gt;::value;</code> is <a href=\"http://coliru.stacked-crooked.com/a/cd6d83110b0e9c09\" rel=\"nofollow noreferrer\">false in g++</a> even when it does fail to catch."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1519230340, "post_id": 48909833, "comment_id": 84827717, "body": "I can reproduce with <code>g++ -std=c++11</code>, but unable to reproduce with Visual C++ 2017 (for any value of <code>&#47;std:</code>). Please report the bug."}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "edited": false, "score": 0, "creation_date": 1523533265, "post_id": 49794876, "comment_id": 86605390, "body": "Since OP reported the bug I thought it was already linked to in the comments, but apparently not."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 1, "last_activity_date": 1523533247, "last_edit_date": 1523533247, "creation_date": 1523530982, "answer_id": 49794876, "question_id": 48909833, "link": "https://stackoverflow.com/questions/48909833/throwing-exception-from-member-constructor-brace-initializer-vs-initializer-lis/49794876#49794876", "title": "Throwing exception from member constructor (brace initializer vs initializer list)", "body": "<p>There should be no practical difference between:</p>\n\n<pre><code>struct P {\n    X x {20};\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>struct P {\n    P() : x{20} { }\n    X x;\n};\n</code></pre>\n\n<p>But there's a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85363\" rel=\"nofollow noreferrer\">GCC bug</a> for C++11 mode (but not C++14 or later) which causes the initialization of <code>p{}</code> to happen outside the try-block, or adds the equivalent of <code>noexcept</code> to the implicitly-defined default constructor for \n<code>P</code>.</p>\n"}], "owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 49794876, "answer_count": 1, "score": 9, "last_activity_date": 1523620334, "creation_date": 1519227563, "last_edit_date": 1523620334, "question_id": 48909833, "link": "https://stackoverflow.com/questions/48909833/throwing-exception-from-member-constructor-brace-initializer-vs-initializer-lis", "title": "Throwing exception from member constructor (brace initializer vs initializer list)", "body": "<p>I have lost faith (and probably 2 hours) in my understanding of what happens when exception is thrown (from constructor) during initialization of member object.</p>\n\n<p>Let me show you the example:</p>\n\n<pre><code>int init (int f) {\n    throw f;\n}\n\nstruct X {\n    X (int f) : n {init (f)} {}\n    int n;\n};\n\nstruct P {\n    X x {20};\n};\n</code></pre>\n\n<p>and the usage:</p>\n\n<pre><code>int main (int argc, char** argv) {\n    try {\n        P p {};\n    }\n    catch (int n) {\n        std::cout &lt;&lt; n &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>This code (C++11 mode) compiles fine (using GCC 7.2.1) and under the Linux (Centos 7.4.1708) I get:</p>\n\n<pre><code>terminate called after throwing an instance of 'int'\n[1]    1242 abort (core dumped)  ./main\n</code></pre>\n\n<p>Question is: <strong>Why?</strong>\n<strong>Why <code>catch()</code> section was not taken?</strong></p>\n\n<p>I have tracked the issue, meaning that when my <code>P</code> class looks a little bit different:</p>\n\n<pre><code>struct P {\n    P (int f) : x {f} {}\n    X x;\n};\n</code></pre>\n\n<p>and with initialization of <code>p</code> object in this form: <code>P p {20}</code> result is: 20, which was expected, <strong>no core dump</strong>.</p>\n\n<p>Could someone explain me what is the difference between initializing a member using <em>brace-or-equal-initializer</em> and <em>member-initializer-list</em> in the context of exceptions?</p>\n\n<p>Bug report: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85363\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85363</a></p>\n"}, {"tags": ["c++", "thread-safety"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1519227503, "post_id": 48909729, "comment_id": 84825626, "body": "Note that &quot;re-entrant&quot; and &quot;thread-safe&quot; are two different things."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519227561, "post_id": 48909729, "comment_id": 84825669, "body": "<code>vector roles;</code> shouldn&#39;t compile."}, {"owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "edited": false, "score": 0, "creation_date": 1519230049, "post_id": 48909729, "comment_id": 84827521, "body": "If you have #include &lt;vector&gt; , it should compile ."}], "answers": [{"comments": [{"owner": {"reputation": 28, "user_id": 9391707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af28c808fa93b43d662b09115de60066?s=128&d=identicon&r=PG&f=1", "display_name": "mthor", "link": "https://stackoverflow.com/users/9391707/mthor"}, "edited": false, "score": 0, "creation_date": 1519228441, "post_id": 48909791, "comment_id": 84826335, "body": "You are correct. But if I were to start multiple threads in <code>main()</code>, could I call <code>Factory::make_stooge()</code> to make instances of concrete <code>Stooge</code> objects  in each?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519228738, "post_id": 48909791, "comment_id": 84826583, "body": "The question was is this function thread safe.  The threadsafety of a function or object or library does not depend on the number of threads in the process."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519229749, "post_id": 48909791, "comment_id": 84827293, "body": "@UKMonkey, like I said in my comment, tread-safe is vague. The correct question is &#39;does this code has a thread race&#39;. The answer is no."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519229826, "post_id": 48909791, "comment_id": 84827345, "body": "@SergeyA that&#39;s not the correct question.  It&#39;s &quot;can I add more threads to this safely&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519229846, "post_id": 48909791, "comment_id": 84827366, "body": "@UKMonkey you a free to disagree with me. And yes, you can add more threads. Safely. Millions of them."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519230008, "post_id": 48909791, "comment_id": 84827488, "body": "@UKMonkey seen and answered."}, {"owner": {"reputation": 28, "user_id": 9391707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af28c808fa93b43d662b09115de60066?s=128&d=identicon&r=PG&f=1", "display_name": "mthor", "link": "https://stackoverflow.com/users/9391707/mthor"}, "edited": false, "score": 0, "creation_date": 1519233216, "post_id": 48909791, "comment_id": 84829749, "body": "My apologies, if the question/example was too vague; Would the current edit of the code snippet cause a thread race?"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1519229996, "last_edit_date": 1519229996, "creation_date": 1519227411, "answer_id": 48909791, "question_id": 48909729, "link": "https://stackoverflow.com/questions/48909729/is-this-factory-method-causing-a-race-condition/48909791#48909791", "title": "Is this factory method causing a race condition?", "body": "<p>Yes, provided code (notwithstanding several issues with it, typos and more serious ones) is thread-safe - in a sense that it does not have a thread race in it. The question 'is the function thread-safe' can rarely be answered for a specific function.</p>\n\n<p>The reason for the code to not have a thread race is straightforward - there is a single thread of execution in the whole program. With modified question, yes, you can add more threads which would call <code>Factory::make_stooge</code> simultaneously, there will be no thread race still <strong>with the current code</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519229405, "post_id": 48910228, "comment_id": 84827033, "body": "A function taken in isolation can rarely be attributed as thread-safe or not. Even in the simplest case with <code>std::map::find</code>, is <code>find</code> thread-safe? If a function which locks a mutex in the beginning and unlocks it in the end is thread -safe? No idea. As a matter of fact, <i>thread-safe</i> is a misnomer, and is too vague. The better question is &#39;does this code have a race&#39;. And this question can only be answered looking at the code in whole, in execution paths, and not by looking at the single function."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519229528, "post_id": 48910228, "comment_id": 84827124, "body": "@SergeyA Correct - which is why I say &quot;it might be&quot; and then explain the bits that suggest it wouldn&#39;t be; rather than what is clearly not the right answer; &quot;yes&quot;."}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": -1, "last_activity_date": 1519228974, "last_edit_date": 1519228974, "creation_date": 1519228671, "answer_id": 48910228, "question_id": 48909729, "link": "https://stackoverflow.com/questions/48909729/is-this-factory-method-causing-a-race-condition/48910228#48910228", "title": "Is this factory method causing a race condition?", "body": "<p>It might be; but I wouldn't bet on it.</p>\n\n<p>A single thread of execution in the program (programs aren't ever thread safe or not) does not make an object thread safe; since you might decide to add a thread later.</p>\n\n<p>Your s_prototypes is only read; in the function you're asking about, but it isn't const.  As such there might be something changing it under the hood.  On top of that something could also be changing the instances of those prototypes since they're not const either.</p>\n\n<p>Finally, clone isn't const; which suggests that it could be changing something in the object.  If that's the case, then it's much less likely to be thread safe; (and with no visibility on the function it can't be confirmed either way).</p>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "is_accepted": false, "score": 0, "last_activity_date": 1519230748, "creation_date": 1519230748, "answer_id": 48910919, "question_id": 48909729, "link": "https://stackoverflow.com/questions/48909729/is-this-factory-method-causing-a-race-condition/48910919#48910919", "title": "Is this factory method causing a race condition?", "body": "<p>Yes, you can add more threads to create Larry/Moe/Curly. But this line of code:\n    Stooge* Factory::s_prototypes[] = {\n    0, new Larry, new Moe, new Curly\n    };\ncreates instance of Larry, Moe and Curly even before you take input from user and never get into action. But the instances that were created by user input are stored in roles. Instead, I wouldn't have s_prototypes at all and  modify make_stooge :</p>\n\n<pre><code>Stooge *Stooge::make_stooge(int choice)\n{\n    if (choice == 1)\n      return new Larry;\n    else if (choice == 2)\n      return new Moe;\n    else\n      return new Curly;\n}\n</code></pre>\n"}], "owner": {"reputation": 28, "user_id": 9391707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af28c808fa93b43d662b09115de60066?s=128&d=identicon&r=PG&f=1", "display_name": "mthor", "link": "https://stackoverflow.com/users/9391707/mthor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 48909791, "answer_count": 3, "score": 0, "last_activity_date": 1519235693, "creation_date": 1519227227, "last_edit_date": 1519235693, "question_id": 48909729, "link": "https://stackoverflow.com/questions/48909729/is-this-factory-method-causing-a-race-condition", "title": "Is this factory method causing a race condition?", "body": "<p>Given this c++ snippet, will the use of <code>Factory::make_stooge()</code> in multiple threads cause a race condition?\n(original snippet from <a href=\"https://sourcemaking.com/design_patterns/prototype/cpp/1\" rel=\"nofollow noreferrer\">https://sourcemaking.com/design_patterns/prototype/cpp/1</a>)</p>\n\n<pre><code>/*Base class*/\nclass Stooge {\npublic:\n   virtual Stooge* clone() = 0;\n   virtual void slap_stick() = 0;\n};\n\n/*Factory class*/\nclass Factory {\npublic:\n   static Stooge* make_stooge( int choice );\nprivate:\n   static Stooge* s_prototypes[4];\n};\n\n/*Derived class*/\nclass Larry : public Stooge {\npublic:\n   Stooge*   clone() { return new Larry; }\n   void slap_stick() {\n      cout &lt;&lt; \"Larry: poke eyes\\n\"; }\n};\n\n/*Derived class*/\nclass Moe : public Stooge {\npublic:\n   Stooge*   clone() { return new Moe; }\n   void slap_stick() {\n      cout &lt;&lt; \"Moe: slap head\\n\"; }\n};\n\n/*Derived class*/\nclass Curly : public Stooge {\npublic:\n   Stooge*   clone() { return new Curly; }\n   void slap_stick() {\n      cout &lt;&lt; \"Curly: suffer abuse\\n\"; }\n};\n\n/*First thread function*/\nvoid *make100Larrys(void *arg) {\n  Stooge** Larrys = (Stooge*)arg;\n  for(int i = 0; i&lt;100; i++)\n  {\n     Larrys[i] = Factory::make_stooge(1);\n  }\n  pthread_exit();\n}\n\n/*Second thread function*/\nvoid *make100Moes(void *arg) {\n  Stooge** Moes = (Stooge*)arg;\n  for(int i = 0; i&lt;100; i++)\n  {\n     Moes[i] = Factory::make_stooge(2);\n  }\n  pthread_exit();\n}\n\n\n\nint main() {\n   vector&lt;Stooge*&gt; roles;\n   int choice;\n\n   while (true) {\n      cout &lt;&lt; \"Larry(1) Moe(2) Curly(3) Go(0): \";\n      cin &gt;&gt; choice;\n      if (choice == 0)\n         break;\n      roles.push_back(\n         Factory::make_stooge( choice ) );\n   }\n\n   for (int i=0; i &lt; roles.size(); ++i)\n      roles[i]-&gt;slap_stick();\n   for (int i=0; i &lt; roles.size(); ++i)\n      delete roles[i];\n\n   //Second Edit\n   pthread_t LarryThread;\n   Stooge* Larrys[100];\n\n   pthread_t MoeThread;\n   Stooge* Moes[100];\n\n   pthread_create(&amp;LarryThread, NULL, make100Larrys, Larrys);\n   pthread_create(&amp;MoeThread, NULL, make100Moes, Moes);\n\n   void** status;\n   pthread_join(LarryThread, status);\n   pthread_join(MoeThread, status);\n\n}\n\n\n/*Static variable initialization*/ \nStooge* Factory::s_prototypes[] = {\n   0, new Larry, new Moe, new Curly\n};\n\n/*Factory method*/\nStooge* Factory::make_stooge( int choice ) {\n   return s_prototypes[choice]-&gt;clone();\n}\n</code></pre>\n\n<p>My thought is that if <code>s_prototypes</code> is instantiated while only one thread exists, <code>Factory::make_stooge()</code> is technically re-entrant.</p>\n\n<p>EDIT: Perhaps a better phrasing of my question would be: Could I start some number of threads in <code>main()</code> that each  called <code>Factory::make_stooge()</code>?</p>\n"}, {"tags": ["python", "c++", "multiple-inheritance", "super", "boost-python"], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 2, "last_activity_date": 1519228425, "creation_date": 1519228425, "answer_id": 48910155, "question_id": 48909544, "link": "https://stackoverflow.com/questions/48909544/boost-python-how-to-get-super-methods-called/48910155#48910155", "title": "Boost.Python: how to get super() methods called?", "body": "<p>The C++ layer doesn't have direct access to the MRO information Python uses to automate superclass calls via <code>super</code>. If you polluted the C++ code with explicit knowledge of Python, you could directly create an object of <code>PySuper_Type</code> (must be called with two arguments; the magic that enables no-arg <code>super</code> would not be available) and use that, but mixing the Python code with the C++ code that heavily would get ugly.</p>\n\n<p>In practice, the best advice with Boost.Python is probably <a href=\"https://media.readthedocs.org/pdf/pybind11/master/pybind11.pdf#page=61\" rel=\"nofollow noreferrer\">the same as for <code>pybind11</code></a> (a C++11 specific header-only tool that serves a similar purpose without depending on the whole Boost ecosystem), and the recommended approach there is to explicitly call the C++ level parent class methods, rather than doing so implicitly via <code>super</code>. There is simply no reasonable way to merge the C++ and Python approaches to multiple inheritance that doesn't lead to hopelessly polluting the non-Python code with Python specific code. <code>pybind11</code>'s approach would be:</p>\n\n<pre><code>class Derived(MyClassA, MyClassB):\n    # Must define __init__ even though you only defer to parent classes,\n    # or only MyClassA will be created\n    def __init__(self):\n        MyClassA.__init__(self)\n        MyClassB.__init__(self)\n    def foo(self):\n        MyClassA.foo(self)\n        MyClassB.foo(self)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "is_accepted": true, "score": 0, "last_activity_date": 1519305439, "last_edit_date": 1519305439, "creation_date": 1519294615, "answer_id": 48924828, "question_id": 48909544, "link": "https://stackoverflow.com/questions/48909544/boost-python-how-to-get-super-methods-called/48924828#48924828", "title": "Boost.Python: how to get super() methods called?", "body": "<p>My current approach (adapted from <a href=\"https://stackoverflow.com/a/27134600/1668622\">this</a> answer) needs some sort of wrapper which handles the <code>super()</code>-calls manually. The resulting classes don't need any special handling any more:</p>\n\n<p><strong>C++ code:</strong></p>\n\n<pre><code>struct MyClassA{\n    void foo() { std::cout &lt;&lt; \"MyClassA::foo()\" &lt;&lt; std::endl; }\n};\n\nstruct MyClassB{\n    void foo() { std::cout &lt;&lt; \"MyClassB::foo()\" &lt;&lt; std::endl; }\n};\n\nBOOST_PYTHON_MODULE(my_module){\n    class_&lt;MyClassA&gt;(\"MyClassACpp\", init&lt;&gt;()).def(\"foo\", &amp;MyClassA::foo);\n    class_&lt;MyClassB&gt;(\"MyClassBCpp\", init&lt;&gt;()).def(\"foo\", &amp;MyClassB::foo);\n}\n</code></pre>\n\n<p><strong>wrapper:</strong></p>\n\n<pre><code>from my_module import MyClassACpp, MyClassBCpp\n\ndef call_super(cls, instance, method, *args):\n    mro = instance.__class__.mro()\n    for next_class in mro[mro.index(cls) + 1:]:\n        if not hasattr(next_class, method):\n            continue\n        if next_class.__module__ in {'Boost.Python', 'builtins'}:\n            continue\n        getattr(next_class, method)(instance, *args)\n        if next_class.__module__ != 'my_module':\n            break\n\nclass MyClassA(MyClassACpp):\n    def __init__(self):\n        call_super(MyClassA, self, '__init__')\n        print('MyClassA.__init__()')\n\n    def foo(self):\n        call_super(MyClassA, self, 'foo')\n\nclass MyClassB(MyClassBCpp):\n    def __init__(self):\n        call_super(MyClassB, self, '__init__')\n        print('MyClassB.__init__()')\n\n    def foo(self):\n        call_super(MyClassB, self, 'foo')\n</code></pre>\n\n<p><strong>usage:</strong></p>\n\n<pre><code>class Derived(MyClassA, MyClassB):\n    def foo(self):\n        super().foo()\n\nd = Derived()\nd.foo()\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>MyClassA.__init__()\nMyClassB.__init__()\nMyClassA::foo()\nMyClassB::foo()\n</code></pre>\n"}], "owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 48924828, "answer_count": 2, "score": 0, "last_activity_date": 1519305439, "creation_date": 1519226685, "last_edit_date": 1519294138, "question_id": 48909544, "link": "https://stackoverflow.com/questions/48909544/boost-python-how-to-get-super-methods-called", "title": "Boost.Python: how to get super() methods called?", "body": "<p>I have a module with two C++ classes exposed which both have a method <code>foo()</code>:</p>\n\n<pre><code>struct MyClassA{\n    void foo() { std::cout &lt;&lt; \"MyClassA::foo()\" &lt;&lt; std::endl; }\n};\n\nstruct MyClassB{\n    void foo() { std::cout &lt;&lt; \"MyClassB::foo()\" &lt;&lt; std::endl; }\n};\n\nBOOST_PYTHON_MODULE(my_module){\n    class_&lt;MyClassA&gt;(\"MyClassA\", init&lt;&gt;()).def(\"foo\", &amp;MyClassA::foo);\n    class_&lt;MyClassB&gt;(\"MyClassB\", init&lt;&gt;()).def(\"foo\", &amp;MyClassB::foo);\n}\n</code></pre>\n\n<p>In Python, I create a class that is derived from both classes:</p>\n\n<pre><code>from my_module import MyClassA, MyClassB\n\nclass Derived(MyClassA, MyClassB):\n    def foo(self):\n        super().foo()  # should be unnessessary - doesn't work anyway\n\na = MyClassA()\na.foo()  # works\nb = MyClassB()\nb.foo()  # works\nd = Derived()\nd.foo()  # only prints 'MyClassA::foo()'\n</code></pre>\n\n<p>Now I'd love to have <code>d.foo()</code> call <code>MyClassA.foo()</code> as well as <code>MyClassB.foo()</code>. But while <code>Derived.mro()</code> looks good:</p>\n\n<pre><code>[&lt;class '__main__.Derived'&gt;, &lt;class 'my_module.MyClassA'&gt;, &lt;class 'my_module.MyClassB'&gt;, &lt;class 'Boost.Python.instance'&gt;, &lt;class 'object'&gt;]\n</code></pre>\n\n<p>.. only <code>MyClassA.foo()</code> gets called.</p>\n\n<p>How do I make the C++ methods call their <code>super()</code> methods? And does that work for <code>__init__()</code> as well?</p>\n"}, {"tags": ["c++", "macos", "boost"], "comments": [{"owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "edited": false, "score": 0, "creation_date": 1519226136, "post_id": 48909296, "comment_id": 84824658, "body": "You need to include headers with -I/usr/local/include and link (if needed) with -L/usr/local/lib. Possibly with a -lboost_foo_bar."}, {"owner": {"reputation": 141, "user_id": 5120878, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-rJJASRamem0/AAAAAAAAAAI/AAAAAAAAACw/m15g5mMfo90/photo.jpg?sz=128", "display_name": "Harsh Khajuria", "link": "https://stackoverflow.com/users/5120878/harsh-khajuria"}, "reply_to_user": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "edited": false, "score": 0, "creation_date": 1519227221, "post_id": 48909296, "comment_id": 84825435, "body": "@kometen <code>g++ main.cpp -o main -I &#47;usr&#47;local&#47;include -L &#47;usr&#47;local&#47;lib -l boost-test</code> does not work. It gives an error <code>ld: library not found for -lboost-test</code>"}, {"owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "edited": false, "score": 0, "creation_date": 1519231527, "post_id": 48909296, "comment_id": 84828592, "body": "You don&#39;t need space between -I and /usr... and -L and /usr.... You may need to use -lboost_unit_test_framework.a. Do a &quot;ls -l /usr/local/lib/libboost_<i>test</i>&quot; to see the name of the library."}, {"owner": {"reputation": 141, "user_id": 5120878, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-rJJASRamem0/AAAAAAAAAAI/AAAAAAAAACw/m15g5mMfo90/photo.jpg?sz=128", "display_name": "Harsh Khajuria", "link": "https://stackoverflow.com/users/5120878/harsh-khajuria"}, "reply_to_user": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "edited": false, "score": 0, "creation_date": 1519241571, "post_id": 48909296, "comment_id": 84834261, "body": "I am using <code>g++  main.cpp -o main -I&#47;usr&#47;local&#47;include -L&#47;usr&#47;local&#47;lib&#47; -libboost_test_exec_monitor.a</code> now. Still shows me the same error.:("}, {"owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "edited": false, "score": 0, "creation_date": 1519246743, "post_id": 48909296, "comment_id": 84837088, "body": "Using the -l (lowercase l) you don&#39;t need to prepend lib in libboost_foo_bar.a. So the syntax is -lboost_foo_bar.a."}], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 3443757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c8a3989836e570be5321f09c5515556?s=128&d=identicon&r=PG&f=1", "display_name": "quasar", "link": "https://stackoverflow.com/users/3443757/quasar"}, "is_accepted": false, "score": 0, "last_activity_date": 1519226615, "creation_date": 1519226615, "answer_id": 48909518, "question_id": 48909296, "link": "https://stackoverflow.com/questions/48909296/how-to-use-boost-c-libraries-on-macos/48909518#48909518", "title": "How to use Boost C++ Libraries on MacOS", "body": "<p>Looking at <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/test/doc/html/boost_test/tests_organization/test_cases/test_organization_nullary.html#ref_BOOST_AUTO_TEST_CASE\" rel=\"nofollow noreferrer\">boost's documentation</a> you may want to try the following include statement. </p>\n\n<pre><code>#include &lt;boost/test/included/unit_test.hpp&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8134809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/659e1a3ad2e4a0ebb99f76349e1a8e2f?s=128&d=identicon&r=PG&f=1", "display_name": "hnqiu", "link": "https://stackoverflow.com/users/8134809/hnqiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1555047301, "creation_date": 1555047301, "answer_id": 55645077, "question_id": 48909296, "link": "https://stackoverflow.com/questions/48909296/how-to-use-boost-c-libraries-on-macos/55645077#55645077", "title": "How to use Boost C++ Libraries on MacOS", "body": "<p>Linker errors happen when the compiler fails to find required library binaries. You need to specify the path to the <strong>boost test</strong> library. The thing is where your boost libraries are - probably not <code>/usr/local/lib</code>, but <code>/usr/local/Cellar/boost/.../lib</code> on Mac. </p>\n\n<p>So use something like</p>\n\n<pre><code>g++ -L/usr/local/Cellar/boost/.../lib main.cpp -o main -lboost_unit_test_framework\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 5120878, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-rJJASRamem0/AAAAAAAAAAI/AAAAAAAAACw/m15g5mMfo90/photo.jpg?sz=128", "display_name": "Harsh Khajuria", "link": "https://stackoverflow.com/users/5120878/harsh-khajuria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3359, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555047301, "creation_date": 1519225959, "question_id": 48909296, "link": "https://stackoverflow.com/questions/48909296/how-to-use-boost-c-libraries-on-macos", "title": "How to use Boost C++ Libraries on MacOS", "body": "<p>I am trying to use Boost Libraries on MacOS.</p>\n\n<p>I installed boost using <code>brew install boost</code>. This installed boost in <code>usr/local/Cellar/boost</code>. </p>\n\n<p>I compiled 2 programs with the same command <code>g++ --std=c++11 main.cpp -o main</code> and then <code>./main</code></p>\n\n<p>However the first one compiled successfully while the second one doesn't. What should I do?</p>\n\n<p>Program1.</p>\n\n<pre><code>#include &lt;boost/lambda/lambda.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    using namespace boost::lambda;\n    typedef std::istream_iterator&lt;int&gt; in;\n\n    std::for_each(\n        in(std::cin), in(), std::cout &lt;&lt; (_1 * 3) &lt;&lt; \" \" );\n}\n</code></pre>\n\n<p>Program2.</p>\n\n<pre><code>#include &lt;boost/test/unit_test.hpp&gt;\n\nint add( int i, int j ) { return i+j; }\n\nBOOST_AUTO_TEST_CASE( my_test )\n{\n    BOOST_CHECK( add( 2,2 ) == 4 );       \n\n    BOOST_REQUIRE( add( 2,2 ) == 4 );     \n\n    if( add( 2,2 ) != 4 )\n      BOOST_ERROR( \"Ouch...\" );      \n\n    if( add( 2,2 ) != 4 )\n      BOOST_FAIL( \"Ouch...\" );           \n\n    if( add( 2,2 ) != 4 ) throw \"Ouch...\"; \n\n    BOOST_CHECK_MESSAGE( add( 2,2 ) == 4, \n                         \"add(..) result: \" &lt;&lt; add( 2,2 ) );\n\n    BOOST_CHECK_EQUAL( add( 2,2 ), 4 );  \n}\n</code></pre>\n\n<p>I get the following error when I compile program 2.</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"boost::test_tools::tt_detail::report_assertion(boost::test_tools::assertion_result const&amp;, boost::unit_test::lazy_ostream const&amp;, boost::unit_test::basic_cstr\ning&lt;char const&gt;, unsigned long, boost::test_tools::tt_detail::tool_level, boost::test_tools::tt_detail::check_type, unsigned long, ...)\", referenced from:\n      my_test::test_method() in del-9b4dcb.o\n\n      bool boost::test_tools::tt_detail::check_frwd&lt;boost::test_tools::tt_detail::equal_impl_frwd, int, int&gt;(boost::test_tools::tt_detail::equal_impl_frwd, boost\n::unit_test::lazy_ostream const&amp;, boost::unit_test::basic_cstring&lt;char const&gt;, unsigned long, boost::test_tools::tt_detail::tool_level, boost::test_tools::tt_det\nail::check_type, int const&amp;, char const*, int const&amp;, char const*) in del-9b4dcb.o\n  \"boost::unit_test::unit_test_log_t::set_checkpoint(boost::unit_test::basic_cstring&lt;char const&gt;, unsigned long, boost::unit_test::basic_cstring&lt;char const&gt;)\", r\neferenced from:\n      my_test_invoker() in del-9b4dcb.o\n      my_test::test_method() in del-9b4dcb.o\n  \"boost::unit_test::test_case::test_case(boost::unit_test::basic_cstring&lt;char const&gt;, boost::unit_test::basic_cstring&lt;char const&gt;, unsigned long, boost::functio\nn&lt;void ()&gt; const&amp;)\", referenced from:\n      boost::unit_test::make_test_case(boost::function&lt;void ()&gt; const&amp;, boost::unit_test::basic_cstring&lt;char const&gt;, boost::unit_test::basic_cstring&lt;char const&gt;,\n unsigned long) in del-9b4dcb.o\n  \"boost::unit_test::ut_detail::auto_test_unit_registrar::auto_test_unit_registrar(boost::unit_test::test_case*, boost::unit_test::decorator::collector&amp;, unsigne\nd long)\", referenced from:\n      ___cxx_global_var_init.1 in del-9b4dcb.o\n  \"boost::unit_test::ut_detail::normalize_test_case_name(boost::unit_test::basic_cstring&lt;char const&gt;)\", referenced from:\n      boost::unit_test::make_test_case(boost::function&lt;void ()&gt; const&amp;, boost::unit_test::basic_cstring&lt;char const&gt;, boost::unit_test::basic_cstring&lt;char const&gt;,\n unsigned long) in del-9b4dcb.o\n  \"vtable for boost::unit_test::unit_test_log_t\", referenced from:\n      boost::unit_test::unit_test_log_t::unit_test_log_t() in del-9b4dcb.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"_main\", referenced from:\n     implicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "boost"], "comments": [{"owner": {"reputation": 2259, "user_id": 374845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68e90bb3a4cb97dab8e40b37aaf1b371?s=128&d=identicon&r=PG", "display_name": "Sergey Shandar", "link": "https://stackoverflow.com/users/374845/sergey-shandar"}, "edited": false, "score": 0, "creation_date": 1523550056, "post_id": 48909212, "comment_id": 86617662, "body": "As mentioned in other answers, the easiest way would be to use VC++ Package Tool or NuGet. The question is incorrectly marked as a duplicate with a link about Visual Studio 2010. The Visual Studio 2010 does not have these possibilities so the answers there are irrelevant."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 2259, "user_id": 374845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68e90bb3a4cb97dab8e40b37aaf1b371?s=128&d=identicon&r=PG", "display_name": "Sergey Shandar", "link": "https://stackoverflow.com/users/374845/sergey-shandar"}, "edited": false, "score": 1, "creation_date": 1523551294, "post_id": 48909212, "comment_id": 86618324, "body": "@SergeyShandar: Agree, reopened/not a duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 9362390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-isetNv1ZnWY/AAAAAAAAAAI/AAAAAAAAHx4/s1Wm2eeqtnM/photo.jpg?sz=128", "display_name": "RCRalph", "link": "https://stackoverflow.com/users/9362390/rcralph"}, "edited": false, "score": 0, "creation_date": 1519226144, "post_id": 48909284, "comment_id": 84824663, "body": "Can you tell me what to do with NuGet?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 145, "user_id": 9362390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-isetNv1ZnWY/AAAAAAAAAAI/AAAAAAAAHx4/s1Wm2eeqtnM/photo.jpg?sz=128", "display_name": "RCRalph", "link": "https://stackoverflow.com/users/9362390/rcralph"}, "edited": false, "score": 1, "creation_date": 1519226577, "post_id": 48909284, "comment_id": 84825009, "body": "@Rafa\u0142Chrzanowski: StackOverflow doesn&#39;t render hyperlinks with underscores, but the word NuGet in my answer is a hyperlink to <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/02/13/find-your-favorite-library-for-c-in-nuget/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2015/02/13/&hellip;</a>. There&#39;s plenty more to google once you know what tool you need. E.g. <a href=\"https://docs.microsoft.com/en-us/nuget/tools/package-manager-console\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/nuget/tools/package-manager-console</a>"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 5, "last_activity_date": 1519225928, "creation_date": 1519225928, "answer_id": 48909284, "question_id": 48909212, "link": "https://stackoverflow.com/questions/48909212/how-to-install-and-use-boost-1-66-0-in-visual-studio-2017/48909284#48909284", "title": "How to install and use boost 1.66.0 in Visual Studio 2017", "body": "<p>The easiest way would be <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/02/13/find-your-favorite-library-for-c-in-nuget/\" rel=\"noreferrer\">NuGet</a>; the currently available Boost version for VS2017 is indeed 1.66.0</p>\n"}, {"tags": [], "owner": {"reputation": 956, "user_id": 327785, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/463ada4aef1b82f4373411a69b300d2c?s=128&d=identicon&r=PG", "display_name": "Giorgio Gambino", "link": "https://stackoverflow.com/users/327785/giorgio-gambino"}, "is_accepted": false, "score": 1, "last_activity_date": 1519226093, "creation_date": 1519226093, "answer_id": 48909348, "question_id": 48909212, "link": "https://stackoverflow.com/questions/48909212/how-to-install-and-use-boost-1-66-0-in-visual-studio-2017/48909348#48909348", "title": "How to install and use boost 1.66.0 in Visual Studio 2017", "body": "<p>Try the <a href=\"https://github.com/Microsoft/vcpkg\" rel=\"nofollow noreferrer\">VC++ Packaging Tool </a> project from Microsoft. I found it very useful and easy to use </p>\n"}], "owner": {"reputation": 145, "user_id": 9362390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-isetNv1ZnWY/AAAAAAAAAAI/AAAAAAAAHx4/s1Wm2eeqtnM/photo.jpg?sz=128", "display_name": "RCRalph", "link": "https://stackoverflow.com/users/9362390/rcralph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5165, "favorite_count": 1, "accepted_answer_id": 48909284, "answer_count": 2, "score": 4, "last_activity_date": 1523551246, "creation_date": 1519225699, "last_edit_date": 1519225807, "question_id": 48909212, "link": "https://stackoverflow.com/questions/48909212/how-to-install-and-use-boost-1-66-0-in-visual-studio-2017", "title": "How to install and use boost 1.66.0 in Visual Studio 2017", "body": "<p>I was looking for a tutorial about how to install boost in Visual Studio, but I can't find any. Can you explain the process?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1519226143, "post_id": 48909166, "comment_id": 84824661, "body": "FDuldul \u2022 This is a very insightful question (and Angew &amp; Ivan have good answers).  The one extra bit of fun is a smart pointer like <code>std::unique_ptr</code> is an object, which has an <code>operator-&gt;</code>, which the <code>-&gt;</code> will be applied to every returned object until the returned type is a pointer, and then perform the pointer member access.  That is how a lot of the &quot;magic&quot; of C++ happens around <code>-&gt;</code>.  You don&#39;t get that magic with <code>(*a).b</code>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1519413336, "post_id": 48909166, "comment_id": 84916165, "body": "@Angew \u2022 hmmm, how do you chained <code>operator*</code>?  I posted an example of chained <code>operator-&gt;</code> on question <a href=\"https://stackoverflow.com/questions/48953206\">stackoverflow.com/questions/48953206</a> , is there special syntax to get similar magic with overloaded <code>*</code>?  (Maybe I should post a new question.)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519413830, "post_id": 48909166, "comment_id": 84916402, "body": "@Eljay Sorry, I must have misread the comment. I didn&#39;t notice the mention of chaining."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1519414142, "post_id": 48909166, "comment_id": 84916559, "body": "@Angew \u2022 ah, okay, nevermind.  :-)  I thought I might be missing some interesting (but not often used) dark corner feature of C++."}], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 11, "last_activity_date": 1519225633, "creation_date": 1519225633, "answer_id": 48909190, "question_id": 48909166, "link": "https://stackoverflow.com/questions/48909166/the-logic-not-to-use-for-class-that-memory-dynamically-allocated/48909190#48909190", "title": "The logic not to use &quot;*&quot; for class that memory dynamically allocated", "body": "<p>The built-in operator <code>a-&gt;b</code> is defined as <code>(*a).b</code>, so the dereference is \"hidden\" inside the <code>-&gt;</code> operator.</p>\n"}, {"tags": [], "owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "is_accepted": false, "score": 6, "last_activity_date": 1519225650, "creation_date": 1519225650, "answer_id": 48909196, "question_id": 48909166, "link": "https://stackoverflow.com/questions/48909166/the-logic-not-to-use-for-class-that-memory-dynamically-allocated/48909196#48909196", "title": "The logic not to use &quot;*&quot; for class that memory dynamically allocated", "body": "<p><code>-&gt;</code> is just a syntactic sugar: <code>a-&gt;foo</code> is the same as <code>(*a).foo</code>. So when you use <code>-&gt;</code> you in fact dereference the pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1519227130, "creation_date": 1519227130, "answer_id": 48909692, "question_id": 48909166, "link": "https://stackoverflow.com/questions/48909166/the-logic-not-to-use-for-class-that-memory-dynamically-allocated/48909692#48909692", "title": "The logic not to use &quot;*&quot; for class that memory dynamically allocated", "body": "<blockquote>\n  <p>i do it with pTwo that not dynamically allocated and it work like i tought.\n  so, can someone explain the logic of not using \"*\" when trying to call function?</p>\n</blockquote>\n\n<p>You mixed different concepts, it is not related how you allocated memory, but on which type of variable you access member:</p>\n\n<pre><code>struct Foo { void bar(); };\n\nFoo f; // type of f is Foo\nf.bar(); // access on type Foo is through .\nFoo *pf = &amp;f; // type of pf is Foo*\npf-&gt;bar(); // derefence and access on type Foo* is through -&gt;\n(*pf).bar(); // the same as above and since type of *pf is Foo we can use .\n(&amp;f)-&gt;bar(); // type of &amp;f is Foo*, so we can use -&gt;\n(*(&amp;f)).bar(); // crazy stuff\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519227418, "post_id": 48909775, "comment_id": 84825566, "body": "inb4 &quot;you can&#39;t write your code like this because there is one edge case which you shouldn&#39;t be using anyway where it doesn&#39;t work&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519227446, "post_id": 48909775, "comment_id": 84825586, "body": "or inb4 &quot;the compiler sees it the first way therefore you must too (even though you are not a compiler)&quot;"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519227524, "post_id": 48909775, "comment_id": 84825642, "body": "unfortunately <code>type* var</code> is against syntax rules so it can create another misunderstanding."}, {"owner": {"reputation": 4499, "user_id": 3262003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c8c191ae7c07779ad884cac900c3247?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3262003/noobcoder"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519242767, "post_id": 48909775, "comment_id": 84834935, "body": "@Slava what syntax rules is it against? I prefer person* pOne because it fits more logically into how I think about pointers. Bottom line is that whichever one you choose just be consistent."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 4499, "user_id": 3262003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c8c191ae7c07779ad884cac900c3247?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3262003/noobcoder"}, "edited": false, "score": 0, "creation_date": 1519242988, "post_id": 48909775, "comment_id": 84835047, "body": "@noobcoder  &quot;what syntax rules is it against?&quot; - <code>int* p1, p2;</code> is misleading, as syntax rules bind * to variable, not type. I think best would be to create a type alias but that is usually too verbose."}, {"owner": {"reputation": 4499, "user_id": 3262003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c8c191ae7c07779ad884cac900c3247?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3262003/noobcoder"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1519243447, "post_id": 48909775, "comment_id": 84835320, "body": "@Slava correct, but I think that rule is what Lightness Races was talking about. Just because that edge case exists doesn&#39;t mean you have to stop coding a certain way. I just avoid that edge case by never declaring more then 1 var on a line, which I don&#39;t find as readable anyway."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 4499, "user_id": 3262003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c8c191ae7c07779ad884cac900c3247?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/3262003/noobcoder"}, "edited": false, "score": 0, "creation_date": 1519243775, "post_id": 48909775, "comment_id": 84835519, "body": "@noobcoder it certainly would not stop you from using it, and I do not try to. Problem is I do not know if it is good to recommend to use such practice for a novice programmer, as he/she would not know what additional restriction it implies and probably would not have enough self discipline to follow it properly. So as I said such rule unfortunately conflicts with syntax of the language and of course it is too late to change it."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1519227615, "last_edit_date": 1519227615, "creation_date": 1519227368, "answer_id": 48909775, "question_id": 48909166, "link": "https://stackoverflow.com/questions/48909166/the-logic-not-to-use-for-class-that-memory-dynamically-allocated/48909775#48909775", "title": "The logic not to use &quot;*&quot; for class that memory dynamically allocated", "body": "<p>It'll be clearer if you change the way you write your code.</p>\n\n<p>Instead of:</p>\n\n<pre><code>person *pOne = new person(\"mike\", 35);\n</code></pre>\n\n<p>Write:</p>\n\n<pre><code>person* pOne = new person(\"mike\", 35);\n</code></pre>\n\n<p>This means the same to the compiler, but makes it clearer to humans that this is a <code>person*</code> (a pointer-to-<code>person</code>) called <code>pOne</code>.</p>\n\n<p>Now it makes more sense that you still perform pointer operations on <code>pOne</code>, not on <code>*pOne</code>.</p>\n\n<p>The older, right-aligned asterisks approach comes from the C world, in which people wanted you to think of it more like \"there is a <code>person</code> at <code>*pOne</code>\". And, in your case, that is true: <strong><code>(*pOne).getName()</code> would also have worked.</strong> However, that looks pretty ugly to me, and <code>*pOne</code> isn't always an actual <code>person</code> &mdash; it depends on what (if anything) the pointer is set to.</p>\n\n<p><strong>The key point here is that <code>-&gt;</code> (as in <code>pOne-&gt;getName()</code>) does that dereferencing for you.</strong> Writing <code>(*pOne)-&gt;getName()</code> would be doing it twice.</p>\n\n<p>Your final example of <code>pTwo.getName()</code> is just a bog-standard object access.</p>\n"}], "owner": {"reputation": 157, "user_id": 5429297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d09c6593a6fb1d8e55a70e515d9d7ee?s=128&d=identicon&r=PG&f=1", "display_name": "FDuldul", "link": "https://stackoverflow.com/users/5429297/fduldul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 48909190, "answer_count": 4, "score": 4, "last_activity_date": 1519310867, "creation_date": 1519225556, "last_edit_date": 1519310867, "question_id": 48909166, "link": "https://stackoverflow.com/questions/48909166/the-logic-not-to-use-for-class-that-memory-dynamically-allocated", "title": "The logic not to use &quot;*&quot; for class that memory dynamically allocated", "body": "<p>so i'm learning c++ and i just learned about dynamically allocated memory for class. there's something that make me it feel weird.</p>\n\n<pre><code>int main()\n{\n    person* pOne = new person(\"mike\", 35);\n    cout &lt;&lt; pOne &lt;&lt; \" \" &lt;&lt; pOne-&gt;getName() &lt;&lt; endl;\n\n    person pTwo = { \"dave\", 30 };\n    cout &lt;&lt; pTwo.getName() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>i think that when we want to call getName() function in pOne, we should do it like <code>*pOne-&gt;getName()</code> because pOne hold the memory location, not the person object itself. but if i do that i'll got compiler error.</p>\n\n<p>i do it with <code>pTwo</code> that not dynamically allocated and it work like i tought.</p>\n\n<p>so, can someone explain the logic of not using \"*\" when trying to call function?</p>\n"}, {"tags": ["c++", "opencv", "runtime-error", "disparity-mapping"], "comments": [{"owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "edited": false, "score": 0, "creation_date": 1519398730, "post_id": 48909124, "comment_id": 84908231, "body": "What errors are you getting exactly?"}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "edited": false, "score": 0, "creation_date": 1519394268, "post_id": 48911277, "comment_id": 84905168, "body": "So what exactly was the problem and how did you solve it?"}, {"owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "reply_to_user": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "edited": false, "score": 0, "creation_date": 1519394519, "post_id": 48911277, "comment_id": 84905339, "body": "Hello @AndreasUnterweger I have only posted the part of one code I had, for computing the disparity map from 2 images(L-R), just in case, it could help to the person who posted the initial question."}, {"owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "edited": false, "score": 0, "creation_date": 1519398784, "post_id": 48911277, "comment_id": 84908270, "body": "Sorry, I thought you asked the original question. Could you maybe add some additional explanations to your code?"}, {"owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "reply_to_user": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "edited": false, "score": 0, "creation_date": 1519642379, "post_id": 48911277, "comment_id": 84977938, "body": "@AndreasUnterweger sorry for the delay. Busy weekend.  I am going to add some comments in the code based in OpenCV doc."}], "tags": [], "owner": {"reputation": 364, "user_id": 4697544, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D9kPm.png?s=128&g=1", "display_name": "Arritmic", "link": "https://stackoverflow.com/users/4697544/arritmic"}, "is_accepted": true, "score": 0, "last_activity_date": 1519642983, "last_edit_date": 1519642983, "creation_date": 1519231842, "answer_id": 48911277, "question_id": 48909124, "link": "https://stackoverflow.com/questions/48909124/opencv-standard-disparity-map-not-working/48911277#48911277", "title": "opencv standard disparity map not working", "body": "<p>Here my function working. I hope it helps you.</p>\n\n<pre><code>cv::Mat Arritmic::DepthMap(cv::Mat &amp;imageL, cv::Mat &amp;imageR)\n{\n\n    /// DISPARITY MAP AND DEPTH MAP\n    cv::Mat left_for_matcher, right_for_matcher;\n    cv::Mat left_disp,right_disp;\n    cv::Mat filtered_disp;\n    cv::Mat conf_map =  cv::Mat(imageL.rows, imageL.cols, CV_8U);\n    conf_map =  cv::Scalar(255);\n    cv::Rect ROI;\n    int max_disp = 16; // n*16\n    int wsize = 15;\n\n\n\n\n   // Perform matching and create the filter instance\n   /* I am using StereoBM for faster processing. If speed is not critical, \n   though, StereoSGBM would provide better quality.\n   The filter instance is created by providing the StereoMatcher instance\n   that we intend to use. Another matcher instance is returned by the\n   createRightMatcher function. These two matcher instances are then used\n   to compute disparity maps both for the left and right views, that are\n   required by the filter. */\n\n    cv::Ptr&lt;cv::ximgproc::DisparityWLSFilter&gt; wls_filter;\n\n    cv::Ptr&lt;cv::StereoBM &gt;left_matcher = cv::StereoBM::create(max_disp,wsize);\n    wls_filter = cv::ximgproc::createDisparityWLSFilter(left_matcher);\n    cv::Ptr&lt;cv::StereoMatcher&gt; right_matcher = cv::ximgproc::createRightMatcher(left_matcher);\n    cv::cvtColor(imageL,  left_for_matcher,  cv::COLOR_BGR2GRAY);\n    cv::cvtColor(imageR, right_for_matcher, cv::COLOR_BGR2GRAY);\n\n\n    left_matcher-&gt; compute(left_for_matcher, right_for_matcher,left_disp);\n    right_matcher-&gt;compute(right_for_matcher,left_for_matcher, right_disp);\n\n    // Perform filtering\n    /* Disparity maps computed by the respective matcher instances, as\n    well as the source left view are passed to the filter. Note that we\n    are using the original non-downscaled view to guide the filtering \n    process. \n    The disparity map is automatically upscaled in an edge-aware fashion\n    to match the original view resolution. The result is stored in\n    filtered_disp. */\n\n\n    double lambda = 6000.0;   // hardcode\n    double sigma = 2.0;       // hardcode\n\n    //! [filtering]\n    wls_filter-&gt;setLambda(lambda);\n    wls_filter-&gt;setSigmaColor(sigma);\n\n    wls_filter-&gt;filter(left_disp, imageL, filtered_disp, right_disp);\n\n    //! [filtering]\n    conf_map = wls_filter-&gt;getConfidenceMap();\n\n    // Get the ROI that was used in the last filter call:\n    ROI = wls_filter-&gt;getROI();\n\n      cv::Mat raw_disp_vis;\n    cv::ximgproc::getDisparityVis(left_disp,raw_disp_vis, 21.0);\n    cv::Mat filtered_disp_vis;\n    cv::ximgproc::getDisparityVis(filtered_disp,filtered_disp_vis, 15.0);\n\n\n    return raw_disp_vis;  // rerturning de depth map image.\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4784665, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/abd29dbcabbcc738747510ed242acc70?s=128&d=identicon&r=PG&f=1", "display_name": "Mee", "link": "https://stackoverflow.com/users/4784665/mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 48911277, "answer_count": 1, "score": 0, "last_activity_date": 1519642983, "creation_date": 1519225442, "question_id": 48909124, "link": "https://stackoverflow.com/questions/48909124/opencv-standard-disparity-map-not-working", "title": "opencv standard disparity map not working", "body": "<p>I can't seem to get any sort of depth image using the standard opencv function (stereoBM).</p>\n\n<p>I tried:</p>\n\n<pre><code>Mat disp, disp8;\n\nStereoBM *sbm = StereoBM::create(16, 2);\nsbm-&gt;setDisp12MaxDiff(1);\nsbm-&gt;setSpeckleRange(8);\nsbm-&gt;setSpeckleWindowSize(0);\nsbm-&gt;setUniquenessRatio(0);\nsbm-&gt;setTextureThreshold(507);\nsbm-&gt;setMinDisparity(-39);\nsbm-&gt;setPreFilterCap(61);\nsbm-&gt;setPreFilterSize(5);\nsbm-&gt;compute(imgLeft, imgRight, disp);\nnormalize(disp, disp8, 0, 255, CV_MINMAX, CV_8U);\n\ncv::imshow(\"disp\", disp8);\n</code></pre>\n\n<p>which compiles but chucks a load of errors. Not sure if I am using the abstract class right?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "pointers", "cin"], "comments": [{"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 1, "creation_date": 1519225457, "post_id": 48909098, "comment_id": 84824204, "body": "Change the parameter type to <code>const char* t</code>."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 1, "creation_date": 1519225458, "post_id": 48909098, "comment_id": 84824205, "body": "If you read the error, there&#39;s your answer. <code>const char *</code> is not the same as <code>char *</code>."}, {"owner": {"reputation": 2247, "user_id": 918323, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/456a4884425caa80533c1083d8b8585d?s=128&d=identicon&r=PG", "display_name": "Kaizokupuffball", "link": "https://stackoverflow.com/users/918323/kaizokupuffball"}, "edited": false, "score": 0, "creation_date": 1519225589, "post_id": 48909098, "comment_id": 84824302, "body": "Damn.. sorry. Didn&#39;t catch that.. Thanks again!"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 1, "creation_date": 1519226002, "post_id": 48909098, "comment_id": 84824575, "body": "Mh, the message also says which is the problematic parameter. Don&#39;t drop this info."}], "answers": [{"tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 2, "last_activity_date": 1519225533, "creation_date": 1519225533, "answer_id": 48909158, "question_id": 48909098, "link": "https://stackoverflow.com/questions/48909098/c-min-max-function-error-c2665/48909158#48909158", "title": "C++ min/max function error (C2665)", "body": "<p><code>const char*</code> is not the same as <code>char*</code> (String literals are immutable in C++). Change the function signature to:</p>\n\n<pre><code>int input(const char* t, int min, int max)\n</code></pre>\n\n<p>Better yet, consider using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a>.</p>\n"}], "owner": {"reputation": 2247, "user_id": 918323, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/456a4884425caa80533c1083d8b8585d?s=128&d=identicon&r=PG", "display_name": "Kaizokupuffball", "link": "https://stackoverflow.com/users/918323/kaizokupuffball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "closed_date": 1519228436, "accepted_answer_id": 48909158, "answer_count": 1, "score": 0, "last_activity_date": 1519225533, "creation_date": 1519225374, "question_id": 48909098, "link": "https://stackoverflow.com/questions/48909098/c-min-max-function-error-c2665", "closed_reason": "Not suitable for this site", "title": "C++ min/max function error (C2665)", "body": "<p>I'm trying to get this function which takes an int between a min and max range to work properly, but I keep getting the error:</p>\n\n<pre><code>No instance of overloaded function \"input\" matches the argument list\nargument types are: (const char [##], int, int)\n</code></pre>\n\n<p>The function that I try  to get working is the following</p>\n\n<pre><code>int input(char* t, int min, int max) {\n    int number;\n    do {\n        cout &lt;&lt; '\\t' &lt;&lt; t &lt;&lt; \" (\" &lt;&lt; min &lt;&lt; '-' &lt;&lt; max &lt;&lt; \"):  \";\n        cin &gt;&gt; number;\n        cin.ignore();\n    } while (number &lt; min || number &gt; max);\n    return number;\n}\n</code></pre>\n\n<p>To explain a little better.\nThe <code>t</code> argument is basically the question asked, example: \"How old are you\".\nThe there is <code>min</code> and <code>max</code> which are both integers.</p>\n\n<p>Example usage:</p>\n\n<pre><code>int years;\nyears = input(\"How old are you\", 0, 110);\n</code></pre>\n\n<p>And yea, the pointer is supposed to be in the function arguments. </p>\n\n<p>Build errors I get: C2665</p>\n\n<p>Thanks in advance if anyone has the time to help me out.\n(all libraries needed are included)</p>\n"}, {"tags": ["c++", "vector", "square-root"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1519225387, "post_id": 48909072, "comment_id": 84824151, "body": "asking someone to review code that uses <code>#define li long int</code> is not nice. Do you really thing this adds to clarity and readability?"}, {"owner": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "edited": false, "score": 0, "creation_date": 1519225398, "post_id": 48909072, "comment_id": 84824161, "body": "What input do you give for <code>t</code> and <code>n</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519225405, "post_id": 48909072, "comment_id": 84824168, "body": "I don&#39;t know of any standard mechanisms that can cause a timeout error, and nothing in the provided code indicates that it could either."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519225471, "post_id": 48909072, "comment_id": 84824216, "body": "<a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>"}, {"owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "edited": false, "score": 0, "creation_date": 1519225482, "post_id": 48909072, "comment_id": 84824226, "body": "I feel it&#39;s common sense to inter-prate ll as long long int but then I didn&#39;t know."}, {"owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "edited": false, "score": 0, "creation_date": 1519225535, "post_id": 48909072, "comment_id": 84824264, "body": "The inputs are 1 100 8 23 11"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1519225583, "post_id": 48909072, "comment_id": 84824298, "body": "online coding judges are the wrong tool to debug your program. I feel it is common sense that if I want a <code>long long int</code> i write <code>long long int</code> and not a cryptic 2 letter name"}, {"owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519225599, "post_id": 48909072, "comment_id": 84824310, "body": "Why doesn&#39;t it work then? @Fran&#231;oisAndrieux"}, {"owner": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "edited": false, "score": 0, "creation_date": 1519225949, "post_id": 48909072, "comment_id": 84824542, "body": "@NoName did you try to execute your code without this <code>#include</code>? What exactly in your code justifies its use? This is a question you should ask yourself before adding any <code>#include</code> to your code."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519226016, "post_id": 48909072, "comment_id": 84824580, "body": "@NoName I don&#39;t know. It seems you are leaving something out. Nothing here is likely to cause a timeout error. There is no such thing in standard c++, so it must originate from your code. Perhaps it&#39;s related to the environment you are running this in."}, {"owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "edited": false, "score": 0, "creation_date": 1519226046, "post_id": 48909072, "comment_id": 84824603, "body": "I don&#39;t see how it makes a difference but still I tried it. No difference.@Rafalon"}, {"owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519226100, "post_id": 48909072, "comment_id": 84824637, "body": "I tried on Ideone as well Error there too @Fran&#231;oisAndrieux    <a href=\"https://ideone.com/PQ6igm\" rel=\"nofollow noreferrer\">ideone.com/PQ6igm</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519226150, "post_id": 48909072, "comment_id": 84824670, "body": "@NoName My problem is that the question mentions a <b>timeout</b> error."}, {"owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519226671, "post_id": 48909072, "comment_id": 84825078, "body": "@Fran&#231;oisAndrieux I don&#39;t think I know the difference between timeout and runtime. Sorry. Just starting out. :|"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1519236638, "post_id": 48909072, "comment_id": 84831752, "body": "Please <a href=\"https://stackoverflow.com/posts/48909072/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1519239034, "post_id": 48909072, "comment_id": 84832987, "body": "&quot;Runtime error occurs&quot; - please edit your question and include the text of the error(s) you&#39;re seeing. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "edited": false, "score": 0, "creation_date": 1519226109, "post_id": 48909331, "comment_id": 84824643, "body": "Wouldn&#39;t this imply an <code>IndexOutOfRange</code> exception instead of a timeout?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "edited": false, "score": 1, "creation_date": 1519226224, "post_id": 48909331, "comment_id": 84824729, "body": "@Rafalon That&#39;s undefined behavior and the result could be anything. <code>IndexOutOfRange</code> is something a platform might do if it&#39;s able to detect the error, but it&#39;s not something you should expect or rely on. Perhaps you are thinking of <a href=\"http://en.cppreference.com/w/cpp/error/out_of_range\" rel=\"nofollow noreferrer\"><code>std::out_of_range</code></a> that can be thrown by the <code>at</code> functions."}, {"owner": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519286014, "post_id": 48909331, "comment_id": 84850630, "body": "@Fran&#231;oisAndrieux well I&#39;ve done too much C# and got used to well defined and explicit exceptions. Still I don&#39;t understand why the OP mentioned a <b>timeout</b>."}], "tags": [], "owner": {"reputation": 76, "user_id": 8025643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xC_u-DbFwYQ/AAAAAAAAAAI/AAAAAAAAEZg/cmxJfRqdEtU/photo.jpg?sz=128", "display_name": "yannick ott", "link": "https://stackoverflow.com/users/8025643/yannick-ott"}, "is_accepted": true, "score": 2, "last_activity_date": 1519226085, "last_edit_date": 1519226085, "creation_date": 1519226054, "answer_id": 48909331, "question_id": 48909072, "link": "https://stackoverflow.com/questions/48909072/why-does-my-code-give-runtime-error-timeout/48909331#48909331", "title": "Why does my code give runtime error timeout?", "body": "<pre><code>ll endd=diviors.size();\n// ...\nfor (ll j = 0; j &lt;= endd; j++) \n// ...            ^\n    divisors[j]\n</code></pre>\n\n<p>When j = ennd you access out of the vector</p>\n"}], "owner": {"reputation": 1, "user_id": 8721563, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ofiJZ.jpg?s=128&g=1", "display_name": "Akhil Vaid", "link": "https://stackoverflow.com/users/8721563/akhil-vaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 48909331, "answer_count": 1, "score": -2, "last_activity_date": 1519226437, "creation_date": 1519225257, "last_edit_date": 1519226437, "question_id": 48909072, "link": "https://stackoverflow.com/questions/48909072/why-does-my-code-give-runtime-error-timeout", "title": "Why does my code give runtime error timeout?", "body": "<p>I just want to add <strong>the sqrt of n to the divisors vector</strong> if its integer but everytime I try the code It goes Haywire.\nMy vector.push_back(sqrt(n)) Function is giving the problem I sense. </p>\n\n<p>Runtime error occurs . But when I remove those 3 Lines it works Fine. </p>\n\n<p>Been trying for a long time!</p>\n\n<p><strong>INPUT - 1 100 8 23 11</strong></p>\n\n<p><strong>I NEED HELP!</strong></p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n#define ll long long int\n#define li long int\n\nusing namespace std;\n\nbool isPerfectSquare(long long n) {\n  long long squareRootN = (long long)round((sqrt(n)));\n\n  if (squareRootN * squareRootN == n) {\n    return true;\n  } else {\n    return false;\n  }\n}\nint main() {\n  ios::sync_with_stdio(0);\n  ll t;\n  cin &gt;&gt; t;\n  while (t--) {\n    ll n, a, b, c;\n    cin &gt;&gt; n;\n    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n\n    vector&lt;ll&gt; divisors;\n    for (ll i = 1; i &lt; sqrt(n); i++) {\n      if (n % i == 0) {\n        divisors.push_back(i);\n        if ((n / i) != i)\n          divisors.push_back(n / i);\n      }\n    }\n    // HEREEEEEEE ISS THE PROBLEMMMM\n    ll y = sqrt(n);\n    if (isPerfectSquare(n))\n      divisors.push_back(y);\n\n    ll z = divisors.size();\n    for (ll i = 0; i &lt; z; i++)\n      cout &lt;&lt; divisors[i] &lt;&lt; ' ';\n\n    sort(divisors.begin(), divisors.end());\n    cout &lt;&lt; '\\n';\n\n    ll x = divisors.size();\n    for (ll i = 0; i &lt; x; i++)\n      cout &lt;&lt; divisors[i] &lt;&lt; ' ';\n\n    ll endd = divisors.size();\n\n    ll counter = 0;\n    for (ll i = 0; i &lt; endd; i++) {\n      for (ll j = 0; j &lt;= endd; j++) {\n        if (n % (divisors[i] * divisors[j]) == 0 &amp;&amp;\n            n / (divisors[i] * divisors[j]) &lt;= c &amp;&amp; divisors[i] &lt;= a &amp;&amp;\n            divisors[j] &lt;= b) {\n          cout &lt;&lt; '\\n'\n               &lt;&lt; divisors[i] &lt;&lt; ' ' &lt;&lt; divisors[j] &lt;&lt; ' '\n               &lt;&lt; n / (divisors[i] * divisors[j]);\n          counter++;\n        }\n      }\n    }\n\n    cout &lt;&lt; '\\n' &lt;&lt; counter &lt;&lt; '\\n';\n  }\n  return 0;\n}\n</code></pre>\n\n<p><strong>Thanks A Lot!</strong></p>\n"}, {"tags": ["c++", "arrays", "a-star"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1519225009, "post_id": 48908947, "comment_id": 84823880, "body": "<code>Sorry for the spaghetti code as well.</code>  Well, Don&#39;t post it then... fix it before you post - you&#39;ll probably find the error when you clean it up"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519225017, "post_id": 48908947, "comment_id": 84823885, "body": "<code>sizeof(n_list)</code> won&#39;t tell you the length of the vector <code>n_list</code>. Use <code>n_list.size()</code>. The <code>sizeof</code> of a <code>std::vector</code> is constant regardless of it&#39;s contents."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519225188, "post_id": 48908947, "comment_id": 84824015, "body": "Understanding how to effectively use a debugger is an essential skill for developing in c++. Take some time to familiarize yourself with a debugger for whatever platform you are developing on."}, {"owner": {"reputation": 1, "user_id": 9312631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea04a3efe426ede8fc1a2b087714bbe?s=128&d=identicon&r=PG&f=1", "display_name": "B. Shnrub", "link": "https://stackoverflow.com/users/9312631/b-shnrub"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519225237, "post_id": 48908947, "comment_id": 84824048, "body": "@Fran&#231;oisAndrieux I see! Thanks for your help :)"}, {"owner": {"reputation": 1, "user_id": 9312631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea04a3efe426ede8fc1a2b087714bbe?s=128&d=identicon&r=PG&f=1", "display_name": "B. Shnrub", "link": "https://stackoverflow.com/users/9312631/b-shnrub"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519225485, "post_id": 48908947, "comment_id": 84824228, "body": "@UKMonkey Apologies didn&#39;t mean to cause upset ^^"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519227992, "post_id": 48908947, "comment_id": 84825968, "body": "@B.Shnrub I&#39;m not upset ;)  I&#39;m just trying to highlight to you that you know your code is poor, and that you have a problem.  The problem is hidden in the poor code; and the easiest way to resolve it is to remove the hiding places of the bug!  If you write clear and understandable code - then you&#39;re less likely to write bugs!"}], "owner": {"reputation": 1, "user_id": 9312631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea04a3efe426ede8fc1a2b087714bbe?s=128&d=identicon&r=PG&f=1", "display_name": "B. Shnrub", "link": "https://stackoverflow.com/users/9312631/b-shnrub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519224867, "creation_date": 1519224867, "question_id": 48908947, "link": "https://stackoverflow.com/questions/48908947/issues-getting-a-pathfinding-to-work", "title": "Issues getting A* pathfinding to work", "body": "<p>I have a problem with my A* Pathfinding algorithm.</p>\n\n<p>I'm fairly new to C++ programming and am trying to navigate an actor through a map grid in the form of a 2d array.</p>\n\n<p>I've been trying this for a few days now, but to no avail. I've looked up countless tutorials and other C++ code and tried to mould it to my specifications and I am unable to get the result.</p>\n\n<p>I'm not sure where I am going wrong.</p>\n\n<p>Apologies for the vagueness of the question, there is no -specific- issue, the problem is that the code seems to pick random tiles from the openlist and never returns a correct value.</p>\n\n<p>Sorry for the spaghetti code as well.</p>\n\n<p>Thanks in advance</p>\n\n<p>main.cpp</p>\n\n<pre><code>int moveCostG(int x, int y, int dx, int dy) {\n    int g = (abs(dx - x) + abs(dy - y));\n    return g;\n}\n\nint moveCostH(int dx, int dy, int nx, int ny){\n    int h = (abs(nx - dx) + abs(ny - dy));\n    return h;\n}\n\nint moveCostF(int x, int y, int dx, int dy, int nx, int ny) {\n    return (moveCostG(x, y, dx, dy) + moveCostH(dx, dy, nx, ny));\n}\n\nbool searchList(std::vector&lt;coordList&gt; n_list, int search_term_x, int search_term_y) {\n    int size = sizeof(n_list)/sizeof(coordList);\n    for (i = 0; i &lt; size; i++) {\n        if ((n_list[i].x == search_term_x) &amp;&amp; (n_list[i].y == search_term_y)){\n            return true;\n        }\n    }\n    return false;\n}\n\nvoid pathfinding(int x, int y, int nx, int ny) {\n    //x, y = current location\n    //dx, dy = changed location\n    //nx, ny = location to go to\n    int size = 0;\n    int dx = x;\n    int dy = y;\n    bool found = false;\n\n    //boolMap is a 2d adjacency matrix that represents whether or not a tile\n    //is passable.\n    //0 = Passable, 1 = NOT passable\n  int boolMap[MAX_X][MAX_Y];\n  for (i = 0; i &lt; MAX_X; i++) {\n    for (j = 0; j &lt; MAX_Y; j++) {\n      if (!map[i][j].layer1.passable || !map[i][j].layer2.passable) {\n        boolMap[i][j] = 1;\n      }\n      else {\n        boolMap[i][j] = 0;\n      }\n    }\n  }\n\n    //Creating lists\n    std::vector&lt;coordList&gt; openList;\n    std::vector&lt;coordList&gt; closedList;\n\n    //Adding starting location to closed list\n    coordList current;\n    current.x = x;\n    current.y = y;\n    current.f = moveCostF(x, y, dx, dy, nx, ny);\n    closedList.push_back(current);\n\n    //Pushing a placeholder to list so search function works\n    openList.push_back(current);\n\n    //Adding next door neighbours\n    current.x = dx + 1;\n    current.y = dy;\n    current.f = moveCostF(x, y, dx + 1, dy, nx, ny);\n    if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n        if (searchList(closedList, current.x, current.y) == true) {\n            //found in closed -- ignore it\n        }\n        else if (searchList(openList, current.x, current.y) == false){\n            openList.push_back(current);\n            size++;\n        }\n    }\n\n    current.x = dx - 1;\n    current.y = dy;\n    current.f = moveCostF(x, y, dx - 1, dy, nx, ny);\n\n    if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n        if (searchList(closedList, current.x, current.y) == true) {\n            //found in closed -- ignore it\n        }\n        else if (searchList(openList, current.x, current.y) == false){\n            openList.push_back(current);\n            size++;\n        }\n    }\n\n    current.x = dx;\n    current.y = dy + 1;\n    current.f = moveCostF(x, y, dx, dy + 1, nx, ny);\n\n    if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n        if (searchList(closedList, current.x, current.y) == true) {\n            //found in closed -- ignore it\n        }\n        else if (searchList(openList, current.x, current.y) == false){\n            openList.push_back(current);\n            size++;\n        }\n    }\n\n    current.x = dx;\n    current.y = dy - 1;\n    current.f = moveCostF(x, y, dx, dy - 1, nx, ny);\n\n    if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n        if (searchList(closedList, current.x, current.y) == true) {\n            //found in closed -- ignore it\n        }\n        else if (searchList(openList, current.x, current.y) == false){\n            openList.push_back(current);\n            size++;\n        }\n    }\n\n    //Removing placeholder of openList\n    openList.erase(openList.begin());\n\n    //--- NOW ALL INITIAL SQUARES HAVE BEEN CALCULATED\n    bool first_time = true;\n    //While?\n    while (found == false) {\n        if (first_time == false) {\n\n            //Add new walkable tiles\n            current.x = dx + 1;\n            current.y = dy;\n            current.f = moveCostF(x, y, dx + 1, dy, nx, ny);\n            if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n                if (searchList(closedList, current.x, current.y) == true) {\n                    //found in closed -- ignore it\n                }\n                else if (searchList(openList, current.x, current.y) == false){\n                    openList.push_back(current);\n                    size++;\n                }\n            }\n\n            current.x = dx - 1;\n            current.y = dy;\n            current.f = moveCostF(x, y, dx - 1, dy, nx, ny);\n\n            if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n                if (searchList(closedList, current.x, current.y) == true) {\n                    //found in closed -- ignore it\n                }\n                else if (searchList(openList, current.x, current.y) == false){\n                    openList.push_back(current);\n                    size++;\n                }\n            }\n\n            current.x = dx;\n            current.y = dy + 1;\n            current.f = moveCostF(x, y, dx, dy + 1, nx, ny);\n\n            if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n                if (searchList(closedList, current.x, current.y) == true) {\n                    //found in closed -- ignore it\n                }\n                else if (searchList(openList, current.x, current.y) == false){\n                    openList.push_back(current);\n                    size++;\n                }\n            }\n\n            current.x = dx;\n            current.y = dy - 1;\n            current.f = moveCostF(x, y, dx, dy - 1, nx, ny);\n\n            if (boolMap[current.x][current.y] == 0){ //Check if tile is passable\n                if (searchList(closedList, current.x, current.y) == true) {\n                    //found in closed -- ignore it\n                }\n                else if (searchList(openList, current.x, current.y) == false){\n                    openList.push_back(current);\n                    size++;\n                }\n            }\n\n        }\n\n        first_time = false;\n\n        //Setting lowest to high number so first result is always lower\n        int lowest = 999999999;\n        int lowest_place;\n\n        //Finding lowest F value\n        for (i = 0; i &lt; size; i++) {\n            if (openList[i].f &lt; lowest){\n                lowest = openList[i].f;\n                lowest_place = i;\n            }\n        }\n\n        //Adding the lowest to the closed list\n        closedList.push_back(openList[lowest_place]);\n        //Removing lowest from open list\n        openList.erase(openList.begin() + lowest_place);\n        size--;\n\n        //Checking if next location is the location is the destination\n        dx = openList[lowest_place].x;\n        dy = openList[lowest_place].y;\n        if ((dx == nx) &amp;&amp; (dy == ny)) {\n            printf(\"FOUND IT!\");\n            found = true;\n            break;\n        }\n\n    }\n}\n</code></pre>\n\n<p>Class used:</p>\n\n<pre><code>class coordList{\npublic:\n    int x;\n    int y;\n    int f;\n    coordList();\n};\n</code></pre>\n"}, {"tags": ["c++", "expression", "operator-precedence", "associativity"], "comments": [{"owner": {"reputation": 57126, "user_id": 1214800, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Z6dxp.jpg?s=128&g=1", "display_name": "brandonscript", "link": "https://stackoverflow.com/users/1214800/brandonscript"}, "edited": false, "score": 1, "creation_date": 1519224564, "post_id": 48908803, "comment_id": 84823556, "body": "This follows the basic principles of mathematics order of operations. Brackets, exponents, division, multiplication, addition, subtraction. Did you actually try it out?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1519224642, "post_id": 48908803, "comment_id": 84823610, "body": "x * (y + z) requires y + z to be computed first. Definitely. THere&#39;s no way to compute the answer otherwise. I&#39;ll let someone versed in C++-standard-language answer."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1519224753, "post_id": 48908803, "comment_id": 84823700, "body": "@Jeffrey why not compute <code>x</code> first?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519224754, "post_id": 48908803, "comment_id": 84823701, "body": "You can influence the order of evaluation using parenthesis but only because they allows you to specify the order the operators are evaluated. It won&#39;t let you directly control the order those operators&#39; operands are evaluated."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1519224788, "post_id": 48908803, "comment_id": 84823728, "body": "I would attribute the quote to lax usage of terminology. Order of argument evaluation here is not changed by parenthesis, but the order of operator execution is."}, {"owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1519224793, "post_id": 48908803, "comment_id": 84823733, "body": "@Jeffrey &quot;y + z to be computed first&quot; is still about the grouping, not the order of evaluation, the compiler might be evaluate x first and y and z and y + z and the production."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 558, "user_id": 9334588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50ed88baf3c381b39061f116b808c050?s=128&d=identicon&r=PG&f=1", "display_name": "J K", "link": "https://stackoverflow.com/users/9334588/j-k"}, "edited": false, "score": 3, "creation_date": 1519225126, "post_id": 48908803, "comment_id": 84823973, "body": "@JK, Microsoft is hardly an authoritative source; secondly, that link says nothing about order of evaluation"}, {"owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "reply_to_user": {"reputation": 558, "user_id": 9334588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50ed88baf3c381b39061f116b808c050?s=128&d=identicon&r=PG&f=1", "display_name": "J K", "link": "https://stackoverflow.com/users/9334588/j-k"}, "edited": false, "score": 0, "creation_date": 1519225128, "post_id": 48908803, "comment_id": 84823976, "body": "@JK Precedence, Associativity and order of evaluation are different concept, the page you are given is about Precedence and Associativity."}, {"owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "edited": false, "score": 0, "creation_date": 1519225370, "post_id": 48908803, "comment_id": 84824140, "body": "I would say it is very likely that what you have quoted is erroneously conflating order of evaluation with operator precedence as others in this comment section are. This is further indicated by the precedence of the parentheses operator being explicitly referenced in the quote."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1519225423, "post_id": 48908803, "comment_id": 84824179, "body": "@Quentin (and SLN) yeah, I badly worded it. the evaluation of + has to be done before the evaluation of *. First was not the right word to use. I guess this is the source of the confusion to the OP. The difference between evaluating x it self, +, *, and what liberties the compiler has and doesn&#39;t in the possible orders"}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1519225610, "creation_date": 1519225610, "answer_id": 48909179, "question_id": 48908803, "link": "https://stackoverflow.com/questions/48908803/can-parentheses-override-an-expressions-order-of-evaluation/48909179#48909179", "title": "Can parentheses override an expression&#39;s order of evaluation?", "body": "<p>The quoted sentence is poorly worded.  The author didn't mean that the <strong>order of evaluation</strong> is changed, or even specified; I think the word \"order\" was meant in terms of how a human might read the expression (i.e. precedence).</p>\n\n<p>Of course, if the three variables are independent and reading them has no side-effects, the \"as if\" rule makes the unspecified order irrelevant, as it wouldn't change the value of the expression.</p>\n"}], "owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 0, "closed_date": 1519228064, "accepted_answer_id": 48909179, "answer_count": 1, "score": 4, "last_activity_date": 1519225610, "creation_date": 1519224423, "last_edit_date": 1519225439, "question_id": 48908803, "link": "https://stackoverflow.com/questions/48908803/can-parentheses-override-an-expressions-order-of-evaluation", "closed_reason": "Duplicate", "title": "Can parentheses override an expression&#39;s order of evaluation?", "body": "<p><strong>Grouping</strong> operators and operands and <strong>Order</strong> of Evaluation are two important concepts of expression in C++.</p>\n\n<h1>Grouping</h1>\n\n<p>For expression with multiple operators, how the operands grouped with the specific operators is decided by the <strong><em>precedence</em></strong> and <strong><em>associativity</em></strong> of the operators and may depend on the <strong><em>order of evaluation</em></strong>. </p>\n\n<h1>Order</h1>\n\n<p>In C++, only 4 operators have the specified order of evaluations (logical AND, logical OR, conditional and comma operator). For the other operators, the evaluation order is unspecified. </p>\n\n<h1>Parentheses</h1>\n\n<p>Parentheses can override the precedence and associativity, and therefore specify the grouping of a compound expression. </p>\n\n<p>However, the <a href=\"http://www.informit.com/articles/article.aspx?p=2472079&amp;seqNum=4\" rel=\"nofollow noreferrer\">book</a> by Peter Gottschling claims the parentheses can change the order of the evaluation. I personally doubt it; I think it's an error! In the example from the quotation below, the parentheses do not tell which expression of <code>x</code>, <code>y</code> and <code>z</code> is evaluated first, which one is later and which one is the last. It only groups the expression <code>y + z</code> as the left operand of the <code>*</code> operator. </p>\n\n<blockquote>\n  <p>An expression surrounded by parentheses is an expression as well,\n  e.g., <code>(x + y)</code>. As this grouping by parentheses precedes all operators,\n  <strong>we can change the order of evaluation</strong> to suit our needs: <code>x * (y + z)</code>\n  computes the addition first. <em><a href=\"http://www.informit.com/articles/article.aspx?p=2472079&amp;seqNum=4\" rel=\"nofollow noreferrer\">Discovering Modern C++, Chapter 1.4.1</a></em></p>\n</blockquote>\n\n<h1>Question</h1>\n\n<p>Can parentheses override expressions' order of evaluation?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1519225049, "post_id": 48908719, "comment_id": 84823913, "body": "Have you tried to reconfigure your project with empty build directory or with <code>CMakeCache.txt</code> file removed from it? Looks like you have changed the project&#39;s layout since <code>find_library</code> has been executed the first time."}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1519226831, "post_id": 48908719, "comment_id": 84825186, "body": "Please do not append [Solved] to your question title. If an answer solved your question, simply mark it solved by clicking the green arrow next to the answer. If you found the answer on your own, you can simply answer your own question. Please see the <a href=\"https://stackoverflow.com/help\">help center</a> for more information."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 9391516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e9f7c38655399313d43596ce6992ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mewen LE RESTE", "link": "https://stackoverflow.com/users/9391516/mewen-le-reste"}, "is_accepted": true, "score": 2, "last_activity_date": 1519226587, "creation_date": 1519226587, "answer_id": 48909510, "question_id": 48908719, "link": "https://stackoverflow.com/questions/48908719/cmake-compile-with-external-library/48909510#48909510", "title": "CMake compile with external library", "body": "<p>Ok so I find what causes the error, my external lib was a symbolic link and not the .so directly, I fix this and now it work</p>\n"}], "owner": {"reputation": 66, "user_id": 9391516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e9f7c38655399313d43596ce6992ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mewen LE RESTE", "link": "https://stackoverflow.com/users/9391516/mewen-le-reste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 48909510, "answer_count": 1, "score": 0, "last_activity_date": 1519243311, "creation_date": 1519224235, "last_edit_date": 1519243311, "question_id": 48908719, "link": "https://stackoverflow.com/questions/48908719/cmake-compile-with-external-library", "title": "CMake compile with external library", "body": "<p>I try to compile my code with an external library but every time I tried I've got an error. Here is my actual cmake linkage:</p>\n\n<pre><code>include(dependencies.cmake)\nadd_executable(${NAME} ${SOURCE_FILES})\ntarget_link_libraries(${NAME} PUBLIC ${DEPENDENCIES})\n</code></pre>\n\n<p>And here is my dependencies.cmake:</p>\n\n<pre><code>set(LIB_PATH ${CMAKE_CURRENT_SOURCE_DIR}/lib)\nfind_library(MY_DEPENDENCIES NAMES myLib HINTS ${LIB_PATH} NO_DEFAULT_PATH)\nset(DEPENDENCIES ${MY_DEPENDENCIES})\n</code></pre>\n\n<p>And here is my project tree:</p>\n\n<pre><code>Project\n|----include\n|----lib\n|    |----libmyLib.so\n|----release\n|----src\n|----CMakeLists.txt\n|----dependencies.cmake\n</code></pre>\n\n<p>And I've got this error</p>\n\n<pre><code>make[4]: *** No rule to make target '../lib/libmyLib.so'\n</code></pre>\n\n<p>I precise that:</p>\n\n<ul>\n<li>I work on Ubuntu with CMake 3.9.3</li>\n<li>I use a shadow build in release to build my project.</li>\n<li>I do not want to use directly the sources of my lib or to install it in /usr/lib.</li>\n</ul>\n\n<p>Anyone as a suggestion?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 7, "creation_date": 1519222875, "post_id": 48908165, "comment_id": 84822217, "body": "<code>info[MAXITEM]=x.info[MAXITEM];</code> is no good. Any hint given here would not be enough to fix your misconception. You better learn from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a>"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1519222876, "post_id": 48908165, "comment_id": 84822219, "body": "<code>info[MAXITEM]=x.info[MAXITEM];</code> just copies a single item beyond the bounds of the array."}, {"owner": {"reputation": 1, "user_id": 9391377, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-urFbbwBa558/AAAAAAAAAAI/AAAAAAAAAII/XOm2J7AIXDk/photo.jpg?sz=128", "display_name": "Jake", "link": "https://stackoverflow.com/users/9391377/jake"}, "edited": false, "score": 0, "creation_date": 1519223240, "post_id": 48908165, "comment_id": 84822501, "body": "can you please show me the fix with code,thanks."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519223330, "post_id": 48908165, "comment_id": 84822581, "body": "Do you even need these operators (copy constructor assignment operator and destructor)?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1519223383, "post_id": 48908165, "comment_id": 84822621, "body": "tbh I could but I dont want to be responsible for someone doing cargo cult programming. I really think the best way to help you is by not providing you a working solution but refer you to good sources for learning c++"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1519223466, "post_id": 48908165, "comment_id": 84822687, "body": "Completely agree with @user463035818  You should look up arrays in your book and understand fully what that line is doing"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519223546, "post_id": 48908165, "comment_id": 84822747, "body": "BTW, <code>info[MAXITEM];</code> in your constructor is also a bug. arrays don&#39;t work the way you think in c++."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1519224368, "post_id": 48908165, "comment_id": 84823396, "body": "I&#39;m voting to close this question as off-topic because OP needs to read  <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">A good C++ book</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519225616, "post_id": 48908165, "comment_id": 84824317, "body": "@Jake \u2022 your code is very nearly correct.  Just have to address a few problem areas (as already pointed out by others) and it should work."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1519236485, "post_id": 48908165, "comment_id": 84831672, "body": "Welcome to Stack Overflow! You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}], "answers": [{"comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1519223527, "post_id": 48908446, "comment_id": 84822730, "body": "Not a perfect solution. It is better to use <code>std::copy</code>. It would make the code much cleaner,"}, {"owner": {"reputation": 186, "user_id": 4597948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2960478033de3bd5b8416242a1f8dab4?s=128&d=identicon&r=PG&f=1", "display_name": "blazgrom", "link": "https://stackoverflow.com/users/4597948/blazgrom"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1519223877, "post_id": 48908446, "comment_id": 84823010, "body": "@S.M. You are right, i completely that std::copy can be used with normal array. The answer has been updated, thank you !"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519223981, "post_id": 48908446, "comment_id": 84823101, "body": "The best solution would be to just use <code>std::vector&lt;itemType&gt; info;</code> or <code>std::array&lt;itemType, MAXITEM&gt; info;</code>."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519224079, "post_id": 48908446, "comment_id": 84823191, "body": "@Fran&#231;oisAndrieux Agreed. I do not know why beginners start learning C++ from raw pointers and arrays."}], "tags": [], "owner": {"reputation": 186, "user_id": 4597948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2960478033de3bd5b8416242a1f8dab4?s=128&d=identicon&r=PG&f=1", "display_name": "blazgrom", "link": "https://stackoverflow.com/users/4597948/blazgrom"}, "is_accepted": false, "score": 2, "last_activity_date": 1519224054, "last_edit_date": 1519224054, "creation_date": 1519223455, "answer_id": 48908446, "question_id": 48908165, "link": "https://stackoverflow.com/questions/48908165/copy-constructor-and-operator-they-are-not-printing-a-copy-of-list-l/48908446#48908446", "title": "Copy constructor and &quot;=&quot; operator they are not printing a copy of List l", "body": "<p>The problem isn't your copy constructor or your copy assignment operator, the problem is that you are trying to copy the array  as a sigle element. In C++ this is not possible you have to copy every single element of the array one by one. So your line <code>info[MAXITEM]=x.info[MAXITEM]</code> becomes</p>\n\n<pre><code>for(int i=0;i &lt; MAXITEM;++i)\n{\n   info[i]=x.info[i]\n}\n</code></pre>\n\n<p>Or if you can use STL in your program you could use the standard algorithm copy.<br>\n<code>std::copy(std::begin(x.info), std::end(x.info), std::begin(info));</code></p>\n\n<p>Also in the example you have posted you are trying to access the first element after the array and that's undefined behaviour!</p>\n"}], "owner": {"reputation": 1, "user_id": 9391377, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-urFbbwBa558/AAAAAAAAAAI/AAAAAAAAAII/XOm2J7AIXDk/photo.jpg?sz=128", "display_name": "Jake", "link": "https://stackoverflow.com/users/9391377/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1532338228, "creation_date": 1519222745, "last_edit_date": 1532338228, "question_id": 48908165, "link": "https://stackoverflow.com/questions/48908165/copy-constructor-and-operator-they-are-not-printing-a-copy-of-list-l", "title": "Copy constructor and &quot;=&quot; operator they are not printing a copy of List l", "body": "<p>I'm not sure how you code the copy constructor and \"=\" operator I don't know if using <code>info[MAXITEM]=x.info[MAXITEM];</code> is wrong I'm still new to codding I just learned copy constructor and \"=\" operator so I'm not sure how to implement here.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n#define MAXITEM 100\ntypedef float itemType;\n\nclass List\n{\n    private:\n        int length=0;\n        itemType info[MAXITEM]; \n    public:\n        List()\n        {\n        info[MAXITEM];  \n        }\n        List(const List &amp;x)\n        {\n            cout&lt;&lt;\"copy exec\";//testing if copy constructor is being exec\n            info[MAXITEM]=x.info[MAXITEM];\n        }\n        List &amp; operator =(const List &amp;x)\n        {\n            cout&lt;&lt;\"= exec\";//testing if = operator is being exec\n            info[MAXITEM]=x.info[MAXITEM];\n            return *this;\n        }\n        ~List()\n        {\n\n        }\n        bool boolisthere(itemType item)const\n        {\n            for(int i=0;i&lt;length;i++)\n            {\n                if(info[i]==item)               \n                    return true;\n                else\n                    return false;                                   \n            }           \n        }\n        void Insert(itemType item)\n        {\n            info[length]=item;\n            length++;\n\n        }\n        void Delete(itemType item)\n        {\n            for(int i=0;i&lt;length;i++)\n            {\n                if(info[i]==item)\n                {\n                    info[i]=info[length-1];\n                    length--;   \n                }   \n            }\n\n        }\n        void Print()\n        {\n            for(int i=0;i&lt;length;i++)\n            {\n                cout &lt;&lt;info[i]&lt;&lt;\" \";\n            }\n            cout&lt;&lt;endl;\n\n        }\n        int Length()\n        {\n            return length;\n        }\n\n};\n\nint main()\n{\n    List l;\n\n    l.Insert(3.5);\n    l.Insert(2.1);\n    l.Insert(6.8);\n    l.Insert(4.3);\n    l.Insert(7.5);\n    l.Insert(0.2);\n\n    l.Length();\n\n    l.Print();\n\n    l.Delete(4.3);\n    l.Print();\n\n    List l2(l);//copyconstructor call\n    l2.Print();\n\n    List l3;\n    l3=l; //= operator call\n    l3.Print();\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "fftw"], "comments": [{"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1519223226, "post_id": 48908134, "comment_id": 84822488, "body": "you want to copy data from <code>cv::Mat</code> to <code>float[]</code>, right?"}, {"owner": {"reputation": 13, "user_id": 9391335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tobhJFurp3o/AAAAAAAAAAI/AAAAAAAACfE/shOU5i0BRxM/photo.jpg?sz=128", "display_name": "V&#237;t Karafi&#225;t", "link": "https://stackoverflow.com/users/9391335/v%c3%adt-karafi%c3%a1t"}, "reply_to_user": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1519225914, "post_id": 48908134, "comment_id": 84824513, "body": "I would like to completely avoid copying the data from the <code>cv::Mat</code> and use them as <code>float*</code> for the function."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9391335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tobhJFurp3o/AAAAAAAAAAI/AAAAAAAACfE/shOU5i0BRxM/photo.jpg?sz=128", "display_name": "V&#237;t Karafi&#225;t", "link": "https://stackoverflow.com/users/9391335/v%c3%adt-karafi%c3%a1t"}, "edited": false, "score": 0, "creation_date": 1519225568, "post_id": 48908526, "comment_id": 84824287, "body": "I tried to use <code>(float*)input.data</code> before posting here but unfortunately this does not work. It returns only zeros after executing the plan. I wonder if it has something to do with cv::Mat using steps to access data?"}, {"owner": {"reputation": 13, "user_id": 9391335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tobhJFurp3o/AAAAAAAAAAI/AAAAAAAACfE/shOU5i0BRxM/photo.jpg?sz=128", "display_name": "V&#237;t Karafi&#225;t", "link": "https://stackoverflow.com/users/9391335/v%c3%adt-karafi%c3%a1t"}, "edited": false, "score": 0, "creation_date": 1519227444, "post_id": 48908526, "comment_id": 84825584, "body": "Ok I found the problem. It seems that FFTW deletes data in input array if it is initialized before the creation of the plan. It seems that <code>FFTW_ESTIMATE</code> flag helps to solve this issue. So now I can use <code>(float*)input.data</code>. Thank you for your help. :)"}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "reply_to_user": {"reputation": 13, "user_id": 9391335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tobhJFurp3o/AAAAAAAAAAI/AAAAAAAACfE/shOU5i0BRxM/photo.jpg?sz=128", "display_name": "V&#237;t Karafi&#225;t", "link": "https://stackoverflow.com/users/9391335/v%c3%adt-karafi%c3%a1t"}, "edited": false, "score": 0, "creation_date": 1519246086, "post_id": 48908526, "comment_id": 84836761, "body": "@V&#237;tKarafi&#225;t so what is the solution you ended up with to solve the issue?"}, {"owner": {"reputation": 13, "user_id": 9391335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tobhJFurp3o/AAAAAAAAAAI/AAAAAAAACfE/shOU5i0BRxM/photo.jpg?sz=128", "display_name": "V&#237;t Karafi&#225;t", "link": "https://stackoverflow.com/users/9391335/v%c3%adt-karafi%c3%a1t"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1519283429, "post_id": 48908526, "comment_id": 84849281, "body": "@Ja_cpp I am using <code>plan_f=fftwf_plan_dft_r2c_2d( height , width , (float*)input.data, fft ,  FFTW_ESTIMATE );</code> now."}], "tags": [], "owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "is_accepted": true, "score": 0, "last_activity_date": 1519224356, "last_edit_date": 1519224356, "creation_date": 1519223681, "answer_id": 48908526, "question_id": 48908134, "link": "https://stackoverflow.com/questions/48908134/using-cvmat-with-multi-dimensional-fftw3/48908526#48908526", "title": "Using cv::Mat with multi-dimensional FFTW3", "body": "<p>If I understand your snippet correctly, you want to copy data from <code>cv::Mat</code> to a float array. Assuming your <code>cv::Mat</code> is of type <code>CV_32F</code> (floats), instead of copying every element separately, you can just copy the whole block with <a href=\"http://en.cppreference.com/w/cpp/string/byte/memcpy\" rel=\"nofollow noreferrer\"><code>memcpy</code></a>:</p>\n\n<pre><code>std::memcpy(data_in, input.data, input.total() * sizeof(float));\n</code></pre>\n\n<p>or you could skip the copying altogether and just use <code>(float*)input.data</code></p>\n"}], "owner": {"reputation": 13, "user_id": 9391335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tobhJFurp3o/AAAAAAAAAAI/AAAAAAAACfE/shOU5i0BRxM/photo.jpg?sz=128", "display_name": "V&#237;t Karafi&#225;t", "link": "https://stackoverflow.com/users/9391335/v%c3%adt-karafi%c3%a1t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 48908526, "answer_count": 1, "score": 1, "last_activity_date": 1519225954, "creation_date": 1519222626, "last_edit_date": 1519225954, "question_id": 48908134, "link": "https://stackoverflow.com/questions/48908134/using-cvmat-with-multi-dimensional-fftw3", "title": "Using cv::Mat with multi-dimensional FFTW3", "body": "<p>Is there anyway how to use <code>fftw_plan fftw_plan_dft_r2c_2d(int n0, int n1,double *in, fftw_complex *out, unsigned flags)</code> function from FFTW3 with input as a data from cv::Mat object? My currently working code looks like this:</p>\n\n<pre><code>data_in =  fftwf_alloc_real(width * height);\nfft = fftwf_alloc_complex((width/2+1) * height);\n\nplan_f=fftwf_plan_dft_r2c_2d( height , width , data_in, fft ,  FFTW_MEASURE );\n// Prepare input data\nfor(int i = 0,k=0; i &lt; height; ++i) {\n    const float* row = input.ptr&lt;float&gt;(i);\n    for(int j = 0; j &lt; width; j++) {\n        data_in[k]=(float)row[j];\n        k++;\n    }\n}\n\n// Exectue fft\nfftwf_execute( plan_f );\n</code></pre>\n\n<p>where <strong>data_in</strong> is array type <code>float*</code> and <strong>input</strong> is <code>cv::Mat</code>. I would like to get rid off the for cycles copying the data to <strong>data_in</strong> and just use the already allocated data from <strong>input</strong>.</p>\n"}, {"tags": ["c++", "c++11", "templates", "forwarding-reference"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519223289, "post_id": 48907948, "comment_id": 84822542, "body": "I daresay that holding C accountable for a syntax it doesn&#39;t have is unfair"}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519224668, "post_id": 48907948, "comment_id": 84823630, "body": "I meant the syntax used to specify types in C is bonkers. The result is often worse in C++ because its types are more complex, but <a href=\"http://www.unixwiz.net/techtips/reading-cdecl.html\" rel=\"nofollow noreferrer\">the complicated syntax comes from C</a>."}], "answers": [{"tags": [], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1519222258, "creation_date": 1519222258, "answer_id": 48908004, "question_id": 48907948, "link": "https://stackoverflow.com/questions/48907948/deduced-conflicting-types-for-universal-reference-and-pointer-to-member/48908004#48908004", "title": "Deduced conflicting types for universal reference and pointer to member", "body": "<p>Actually I just found that having a universal reference overload forward it to an l-value reference version works. Not particularly elegant though; I feel like there should be a better way.</p>\n\n<pre><code>template&lt;typename C, typename T&gt;\nvoid foo(C &amp;aclass, T (C::*const memberFunc)(unsigned)) {\n  // Code goes here.\n}\n\ntemplate&lt;typename C, typename T&gt;\nvoid foo(C &amp;&amp;aclass, T (C::*const memberFunc)(unsigned)) {\n  foo(aclass, memberFunc);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1519222370, "post_id": 48908011, "comment_id": 84821852, "body": "It&#39;s worth noting that <code>std::remove_reference</code> will <i>also</i> introduce a non-deduced context, which is helpful."}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 0, "creation_date": 1519224444, "post_id": 48908011, "comment_id": 84823456, "body": "Did you mean to have <code>_t</code> on the end of <code>remove_reference</code>?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 1, "creation_date": 1519224582, "post_id": 48908011, "comment_id": 84823572, "body": "@Timmmm Yes. This feature was introduced from C++14; in C++11 you can write <code>typename std::remove_reference&lt;C&gt;::type</code> instead."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 7, "last_activity_date": 1519223375, "last_edit_date": 1519223375, "creation_date": 1519222283, "answer_id": 48908011, "question_id": 48907948, "link": "https://stackoverflow.com/questions/48907948/deduced-conflicting-types-for-universal-reference-and-pointer-to-member/48908011#48908011", "title": "Deduced conflicting types for universal reference and pointer to member", "body": "<p>With lvalues <code>C</code> will be deduced to be an lvalue-reference type (i.e. <code>MyClass &amp;</code> for your case) for the 1st parameter, which is the expected behavior of <a href=\"http://en.cppreference.com/w/cpp/language/reference#Forwarding_references\" rel=\"nofollow noreferrer\">forwarding reference</a>; you can remove the reference-ness via <a href=\"http://en.cppreference.com/w/cpp/types/remove_reference\" rel=\"nofollow noreferrer\">std::remove_reference</a> when using <code>C</code> in the 2nd parameter, e.g.</p>\n\n<pre><code>template&lt;typename C, typename T&gt;\nvoid foo(C &amp;&amp;aclass, T (std::remove_reference_t&lt;C&gt;::*const memberFunc)(unsigned)) {\n\n}\n</code></pre>\n\n<p>And as @Quentin pointed, using of <code>std::remove_reference</code> also introduces <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction#Non-deduced_contexts\" rel=\"nofollow noreferrer\">non-deduced context</a>, that would prevent <code>C</code> from being deduced from the 2nd parameter.</p>\n"}], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 48908011, "answer_count": 2, "score": 2, "last_activity_date": 1519223375, "creation_date": 1519222049, "last_edit_date": 1519223117, "question_id": 48907948, "link": "https://stackoverflow.com/questions/48907948/deduced-conflicting-types-for-universal-reference-and-pointer-to-member", "title": "Deduced conflicting types for universal reference and pointer to member", "body": "<p>I want a function like this:</p>\n\n<pre><code>template&lt;typename C, typename T&gt;\nvoid foo(C &amp;&amp;aclass, T (C::*const memberFunc)(unsigned)) {\n\n}\n</code></pre>\n\n<p>The parameters are (in words because C/C++ type syntax is mental):</p>\n\n<ul>\n<li>A universal reference to a class, e.g. <code>MyClass</code>.</li>\n<li>A const pointer to a member function of <code>MyClass</code> that takes an unsigned int and returns <code>T</code>.</li>\n</ul>\n\n<p>This sort of works, however if I call it with an l-value reference as the first parameter I get an error like:</p>\n\n<blockquote>\n  <p>candidate template ignored: deduced conflicting types for parameter 'C' ('MyClass &amp;' vs. 'MyClass')</p>\n</blockquote>\n\n<p>As far as I understand it, it is deducing <code>C</code> from the first and second parameters, but comes up with different deductions and gets confused.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/a/21933915/265521\">this answer</a> you can make it only do deduction on the first parameter, and somehow use the <code>typename</code> keyword on the second parameter. But I can't work out the syntax to do this when I do want it to deduce one of the types in the parameter (<code>T</code>), but not the other (<code>C</code>).</p>\n\n<p><a href=\"https://stackoverflow.com/a/24622058/265521\">This answer</a> is also helpful but they solve it by just not using references for <code>C</code> at all, which <em>in that case</em> is equally efficient, but not in mine.</p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 11, "creation_date": 1519222027, "post_id": 48907894, "comment_id": 84821609, "body": "It drives the last nail into the undefined coffin."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1519222167, "post_id": 48907894, "comment_id": 84821715, "body": "Read from right to left.  Take the address (<code>&amp;</code>) of <code>st-&gt;flag1</code>, cast it to a <code>long*</code>, and then dereference (<code>*</code>) that pointer.  Whoever wrote that is using it as a terrible hack to set all four <code>flag</code>s to 0."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1519222257, "post_id": 48907894, "comment_id": 84821781, "body": "@0x5453 <code>&amp;</code> here takes the address of, not reference"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1519222347, "post_id": 48907894, "comment_id": 84821839, "body": "...**if** <code>sizeof long</code> actually is 4..."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1519222555, "post_id": 48907894, "comment_id": 84821987, "body": "<code>st</code> is a pointer of type <code>SpecialFlags</code>. <code>st-&gt;flag1</code> is the first flag in that struct. <code>&amp;(st-&gt;flag1)</code> is the address of the first element of type char with size 1 byte. (long*)&amp;(st-&gt;flag1) is a pointer of type long (size is usually 4) to the address of the first flag. <code>*(long*)&amp;(st-&gt;flag1) = 0;</code> sets 4 bytes beginning with the address of flag1 to 0. Since each flag uses one of these 4 bytes, each flag is set to 0."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1519222661, "post_id": 48907894, "comment_id": 84822062, "body": "@DevSolar That&#39;s platform-dependent, as is <code>sizeof(int)</code>. The only basic type with a size defined by the standard is <code>char</code>."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1519223044, "post_id": 48907894, "comment_id": 84822343, "body": "You should use <code>memset (st, 0, 4);</code> from <code>cstring</code> at this point."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1519223196, "post_id": 48907894, "comment_id": 84822464, "body": "@DavidLively: That was what I was hinting at. If <code>long</code> is <i>not</i> <code>4</code> but e.g. <code>8</code>, this code will write beyond the bounds of the <code>struct</code>, invoking undefined behaviour."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1519226757, "post_id": 48907894, "comment_id": 84825136, "body": "@Thomas, did you mean <code>memset (st, 0, sizeof *st);</code>?  I don&#39;t know where that <code>4</code> came from - we already know that <code>sizeof *st</code> is at least 4 more than <code>sizeof (int)</code>."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1519231747, "post_id": 48907894, "comment_id": 84828743, "body": "@DevSolar I missed the <code>if</code> in your comment."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1519285666, "post_id": 48907894, "comment_id": 84850442, "body": "@TobySpeight: no, I meant <code>memset(&amp;(st-&gt;flag1), 0, 4);</code>. This is the memory of the 4 flags. I don&#39;t want to change the memory of <code>st-&gt;id</code>. The 4 comes from 4 flags, each with size 1 byte."}], "answers": [{"comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1519285953, "post_id": 48908384, "comment_id": 84850595, "body": "There is a small mistake. The values are numbers and not chars. So 0 is 0 and not 48. If you want to set the flags to <code>&#39;0&#39;</code>, you need to assign <code>*(long*)&amp;(st-&gt;flag1) = 48+256*(48+256*(48+256*48));</code>"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 0, "last_activity_date": 1519223296, "creation_date": 1519223296, "answer_id": 48908384, "question_id": 48907894, "link": "https://stackoverflow.com/questions/48907894/memory-exploitation-for-setting-member-variables-of-a-structure-in-one-step/48908384#48908384", "title": "Memory exploitation for setting member variables of a Structure in one step", "body": "<p>In the Below structure</p>\n\n<pre><code>struct SpecialFlags{\n        int  id;\n        char flag1;\n        char flag2;\n        char flag3;\n        char flag4;\n};\n\n        id       flag1     flag2     flag3      flag4\n     -------------------------------------------------- \n     | 99      | 1(49)    | 2(50)   | 3(51)   |  4(52) |\n     ---------------------------------------------------\n   0x100     0x104       0x105     0x106      0x107   0x108 &lt;--lets say starting address is 0x100\n</code></pre>\n\n<p>When <code>ClearFlags()</code> is called <code>st</code> points to beginning of the structure. And when you do <code>*(long*)&amp;(st-&gt;flag1) = 0;</code> First <code>address</code> of <code>st-&gt;flags1(char type)</code> gets converted to <code>long*</code> type that means it will fetch <code>4 bytes</code> at a time and finally <code>*</code> means <em>value in that 4 bytes</em>.</p>\n\n<p>From above figure</p>\n\n<ul>\n<li><code>(long*)&amp;(st-&gt;flag1)</code> => from <code>0x104</code> address till next 4 byte i.e till <code>0x108</code></li>\n<li><code>*(long*)&amp;(st-&gt;flag1)</code> => what value is there in between <code>0x104</code> location to <code>0x108</code> location</li>\n<li><code>*(long*)&amp;(st-&gt;flag1) = 0</code> => what value is there in between <code>0x104</code> location to <code>0x108</code> location, will be overwritten with <code>0(zero)</code></li>\n</ul>\n\n<p>After this statement your structure looks like</p>\n\n<pre><code>       id       flag1     flag2     flag3      flag4\n     -------------------------------------------------- \n     | 99      | 0(48)    | 0(48)   | 0(48)   |  0(48) |\n     ---------------------------------------------------\n   0x100     0x104       0x105     0x106      0x107   0x108\n</code></pre>\n\n<p>Now when you prints <code>flags.flag1</code>, <code>flags.flag2</code>.. it prints <code>0</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 9298841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d239649cbee3fa80694346be035d3d1?s=128&d=identicon&r=PG&f=1", "display_name": "LAYMOONI", "link": "https://stackoverflow.com/users/9298841/laymooni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "closed_date": 1519222033, "accepted_answer_id": 48908384, "answer_count": 1, "score": 0, "last_activity_date": 1519266378, "creation_date": 1519221912, "last_edit_date": 1519266378, "question_id": 48907894, "link": "https://stackoverflow.com/questions/48907894/memory-exploitation-for-setting-member-variables-of-a-structure-in-one-step", "closed_reason": "Duplicate", "title": "Memory exploitation for setting member variables of a Structure in one step", "body": "<p>The below algorithm can output <code>99 0000</code></p>\n\n<p>Would you please let me know how does this following line of code work?</p>\n\n<p><code>*(long*)&amp;(st-&gt;flag1) = 0;</code></p>\n\n<p>The algorithm is: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct SpecialFlags{\n int  id;\n char flag1;\n char flag2;\n char flag3;\n char flag4;\n};\n\n\nvoid ClearFlags( SpecialFlags *st )\n{\n  *(long*)&amp;(st-&gt;flag1) = 0;\n}\n\nint main(void)\n{\n  SpecialFlags flags;\n  flags.id =    99;\n\n  flags.flag1 = 1;\n  flags.flag2 = 2;\n  flags.flag3 = 3;\n  flags.flag4 = 4;\n  ClearFlags( &amp;flags );\n\n  printf( \"%d %d%d%d%d\\n\", flags.id, \n    flags.flag1, flags.flag2, \n    flags.flag3, flags.flag4 );\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 4, "creation_date": 1519222091, "post_id": 48907892, "comment_id": 84821659, "body": "Why does it matter if it was or not??"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1519222467, "post_id": 48907892, "comment_id": 84821916, "body": "Usually you don&#39;t need to move object, until iw would be destroyed at all."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1519222645, "post_id": 48907892, "comment_id": 84822043, "body": "Rather than check <code>was_moved</code> just make the cleanup well-defined for an &quot;empty&quot; object. Don&#39;t just cannibalize pointer, but set the source pointer to <code>nullptr</code>, and so forth."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519222824, "post_id": 48908148, "comment_id": 84822173, "body": "I&#39;d recommend using <a href=\"http://en.cppreference.com/w/cpp/utility/exchange\" rel=\"nofollow noreferrer\"><code>std::exchange</code></a>. Having to supply the second argument won&#39;t let you forget resetting the member."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1519223265, "post_id": 48908148, "comment_id": 84822513, "body": "There&#39;s no strict need to make the source object empty. <i>Any</i> state is valid. That also means you can implement move-as-swap."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519223612, "post_id": 48908148, "comment_id": 84822796, "body": "@StoryTeller Do you mean <code>fd = std::exchange(other.fd, fd);</code>? It&#39;s the first time I use this function."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1519223929, "post_id": 48908148, "comment_id": 84823055, "body": "@MSalters Generally you are right. The answer is the context of OP&#39;s question which I assume is what he is looking for."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519227967, "post_id": 48908148, "comment_id": 84825943, "body": "@freakish - <code>fd = std::exchange(other.fd, -1)</code> in your example. And you can even turn the assignment into initialization."}], "tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": true, "score": 2, "last_activity_date": 1519294883, "last_edit_date": 1519294883, "creation_date": 1519222659, "answer_id": 48908148, "question_id": 48907892, "link": "https://stackoverflow.com/questions/48907892/how-to-know-if-an-object-was-moved/48908148#48908148", "title": "How to know if an object was moved", "body": "<p>There is no feature that allows that. But generally you don't need to know that.</p>\n\n<p>Normally when you define a move constructor you want it to \"move\" the underlying data from one object to another. In your context it seems that you want the source object to be \"empty\" afterwards so that there is only one owner (after all it is \"move\", not \"copy\"). So what you really need is a proper definition of an \"empty\" object and a proper way of handling that case.</p>\n\n<p>For example, assume that your class is associated with a file descriptor. Then you can have a default value of fd equal to -1 and differentiate destructor on that:</p>\n\n<pre><code>#include &lt;utility&gt;\n\nclass A\n{\n    public:\n        A(int fd) : fd { fd }\n        {\n        }\n\n        A(A&amp;&amp; other) : fd { std::exchange(other.fd, -1) }\n        {\n        }\n\n        ~A()\n        {\n            if (fd != -1)\n            {\n                close(fd);\n            }\n        }\n\n    private:\n        int fd = -1;\n};\n</code></pre>\n\n<p>Of course you can mark the object as empty via additional flag. And indeed people do this in some special cases. Even in the standard library. You may want to <a href=\"https://stackoverflow.com/questions/6687388/why-do-some-people-use-swap-for-move-assignments\">read this</a>. Note the <code>__owns_</code> flag on the <code>unique_lock</code> class.</p>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 3296970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf279565c0a40258ff31c03d0221a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Yalakki", "link": "https://stackoverflow.com/users/3296970/archie-yalakki"}, "is_accepted": false, "score": 2, "last_activity_date": 1519225943, "creation_date": 1519225943, "answer_id": 48909291, "question_id": 48907892, "link": "https://stackoverflow.com/questions/48907892/how-to-know-if-an-object-was-moved/48909291#48909291", "title": "How to know if an object was moved", "body": "<p>There is no standard way of knowing it. But it is important \nto define both Move Constructor and Move assignment so that you can clean up\nthe exisitng object's resource before move is performed:</p>\n\n<pre><code>class MoveDemo\n{\n    size_t size;\n    char *buf;\n\n    public:\n    explicit MoveDemo(int sz=1024):size(sz), buf(new char[size]) {}\n    ~MoveDemo { delete [] buf; }\n    MoveDemo(MoveDemo&amp;&amp; other);\n    MoveDemo&amp; operator=(MoveDemo&amp;&amp; other);\n};\n\nMoveDemo::MoveDemo(MoveDemo&amp;&amp; other):size(0), buf(nullptr)\n{\n    size = other.size;\n    buf = other.buf;\n\n    //reset other\n    other.size = 0;\n    other.buf = nullptr;\n}\n\nMoveDemo&amp; MoveDemo::operator=(MoveDemo&amp;&amp; other)\n{\n    if (this != &amp;other)\n    {\n        // release current objects resources\n        delete [] buf;\n        size = 0;\n\n        // move\n        size = other.size;\n        buf = other.buf;\n\n        //reset other\n        other.size = 0;\n        other.buf = nullptr;\n    }\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 6071697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ea2947bcc835bb3b6ab9ca5303272b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Epic", "link": "https://stackoverflow.com/users/6071697/epic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 48908148, "answer_count": 2, "score": 0, "last_activity_date": 1519294883, "creation_date": 1519221909, "last_edit_date": 1519223123, "question_id": 48907892, "link": "https://stackoverflow.com/questions/48907892/how-to-know-if-an-object-was-moved", "title": "How to know if an object was moved", "body": "<p>It might be a stupid question but I feel like I am missing some design pattern.</p>\n\n<p>During the destruction of a class I would like to do different operations if it was moved or not. I thought about implementing a simple boolean that is ticked when the class is moved.</p>\n\n<p>Like this:</p>\n\n<pre><code>class A {\n    A(A &amp;&amp; a) {\n        a.was_moved = true;\n    }\n\n~A() {\n    do some stuff\n\n    if (!was_moved) {\n        clean some more stuff\n    }\n\nbool was_moved = false;\n};\n</code></pre>\n\n<p>Is there a \"better\" way doing this? some cpp feature I could ask if the class was moved or some known design pattern.</p>\n"}, {"tags": ["c++", "multithreading", "cpu-usage", "midi", "juce"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519222226, "post_id": 48907796, "comment_id": 84821749, "body": "Not sure if it will help but you could try sleeping for the message length time using <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\"><code>std::this_thread::sleep_for</code></a>"}, {"owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519224065, "post_id": 48907796, "comment_id": 84823177, "body": "@NathanOliver Tried this.. however made marginal difference. Plus the issue of each note potentially leaving at the same time (forming a chord) makes this slightly more complex."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1519224588, "post_id": 48907796, "comment_id": 84823577, "body": "What&#39;s a single array of messages, an element of the larger array? Is it a chord of messages that all happen at the same time?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1519225782, "post_id": 48907796, "comment_id": 84824423, "body": "Have you tried <a href=\"https://juce.com/doc/classMidiOutput#ae54072205364d56260eaa11c7771289f\" rel=\"nofollow noreferrer\"><code>sendBlockOfMessagesNow()</code></a>?"}, {"owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1519226650, "post_id": 48907796, "comment_id": 84825064, "body": "@bipll One single array of midi messages equals a bars length of midi messages. Outer array cycles through 8 bars."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1519243143, "post_id": 48907796, "comment_id": 84835136, "body": "What a strange architecture. What&#39;s so sacred about 8 bars? It&#39;s not even necessarily a single phrase."}, {"owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1519246053, "post_id": 48907796, "comment_id": 84836742, "body": "@bipll nothing in particular: doesn&#39;t effect the problem proposed here however. It can be any x number of bars."}], "answers": [{"tags": [], "owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "is_accepted": true, "score": 0, "last_activity_date": 1519303831, "creation_date": 1519303831, "answer_id": 48927880, "question_id": 48907796, "link": "https://stackoverflow.com/questions/48907796/lowering-cpu-on-midi-playback-thread/48927880#48927880", "title": "Lowering CPU on MIDI playback thread", "body": "<p>To stop the build up within the thread it is better to turn on and off a timer object and trigger each message one by one. </p>\n\n<p>Broadcast messages (<a href=\"https://juce.com/doc/classActionBroadcaster\" rel=\"nofollow noreferrer\">Action Broadcaster</a> )can then be used to keep track of the index. </p>\n\n<p>Here is some example code to give the general idea : </p>\n\n<pre><code>MIDIThing::MIDIThing ()\n{\n    startTimer(1); //start a timer\n}\n\nvoid MIDIThing::start ()\n{\n    playstate = 1;\n    startTime = Time::getCurrentTime().toMilliseconds();\n}\n\nvoid MIDIThing::timerCallback()\n{\n    if (playstate == 1) {\n        Time::getMillisecondCounterHiRes();\n        int64 target;\n        if (Time::getCurrentTime().toMilliseconds() &gt; target) {\n            //fire off the message\n        }\n\n        //ended (possibly on a condition)\n        ActionBroadcaster::sendActionMessage(FINISHED_PLAYBACK);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 2849016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000041967732/picture?type=large", "display_name": "Corey Ford", "link": "https://stackoverflow.com/users/2849016/corey-ford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 48927880, "answer_count": 1, "score": 0, "last_activity_date": 1519303831, "creation_date": 1519221582, "last_edit_date": 1519224209, "question_id": 48907796, "link": "https://stackoverflow.com/questions/48907796/lowering-cpu-on-midi-playback-thread", "title": "Lowering CPU on MIDI playback thread", "body": "<p>The function below is run on an std::thread that is detached. The code itself is written using the JUCE API (Hence Array&lt;> object &amp; MidiMessage).</p>\n\n<pre><code> void triggerMidiMessages(Array&lt;Array&lt;MidiMessage&gt;&gt; messageBundle) \n{\n    //for each group of messages (bar) within the bundle\n    for(int bar = 0; bar &lt; messageBundle.size(); bar ++)\n    {   \n        //store our message from the bundle for playback\n        Array&lt;MidiMessage&gt; messages;\n        messages.clear();\n        messages = messageBundle[bar];\n\n        //intialise start time\n        double timestart = Time::getMillisecondCounterHiRes();\n\n        //for each midi inside a single \"gene\"\n        for(int i = 0; i &lt;= messages.size();)\n        {\n            double elapsedTime = Time::getMillisecondCounterHiRes() - timestart;\n\n            //output message whens appropriate\n            if(elapsedTime &gt; messages[i].getTimeStamp())\n            {\n                //output this message\n                masterMidiOutput-&gt;sendMessageNow(messages[i]);\n\n                //increment through the array\n                i++;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I need the midi messages to be output in real time but without having to run through the loop condition so much that the CPU runs super hot.</p>\n\n<p>Any ideas? I'm stuck for how to playback the messages in such an order that doesn't require constant checking with a timer. </p>\n\n<p>Thanks in advance.</p>\n\n<p>//=====================================================================\nupdate trying to sleep the thread...</p>\n\n<pre><code>void triggerMidiMessages(Array&lt;Array&lt;MidiMessage&gt;&gt; messageBundle)\n{\n    //for each group of messages (bar) within a bundle\n    for(int bar = 0; bar &lt; messageBundle.size(); bar ++)\n    {   \n        //store our message from the bundle for playback\n        Array&lt;MidiMessage&gt; messages;\n        messages.clear();\n        messages = messageBundle[bar];\n        }\n\n        //intialise start time\n        double previousTimeStamp = 0;\n\n        //for each midi inside a single \"gene\"\n        for(int i = 0; i &lt;= messages.size();)\n        {\n            //fire off all note on messages\n            while(messages[i].isNoteOn())\n            {\n                masterMidiOutput-&gt;sendMessageNow(messages[i]);\n                i++; //increment to the next\n            }\n\n            //fire off all note off messages\n            while(!messages[i].isNoteOn())\n            {\n                masterMidiOutput-&gt;sendMessageNow(messages[i]);\n                 i++; // do the next one\n\n                //if the next message is back to a note on command\n                if(messages[i+1].isNoteOn() == true)\n                {\n                    //sleep for x amount of time\n                    int sleepTime = messages[i].getTimeStamp() - previousTimeStamp;\n                    std::this_thread::sleep_for(std::chrono::milliseconds(sleepTime));\n                    previousTimeStamp = messages[i].getTimeStamp();\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "overriding", "multiple-inheritance", "pure-virtual"], "comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1519851565, "post_id": 48907742, "comment_id": 85082064, "body": "Inline is just an help for the optimizer. Nothing more, nothing less."}, {"owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1519909223, "post_id": 48907742, "comment_id": 85104752, "body": "That&#39;s why I asked &quot;reliably.&quot; If my compiler actually replaces calls to <code>FooBar::say()</code> with calls to <code>Bar::say()</code> then that would accomplish exactly what I desire, but I don&#39;t know if that solution is reliable or not, I.E. how often the compiler will actually obey it."}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1519222425, "post_id": 48907937, "comment_id": 84821888, "body": "I don&#39;t know why the horizontal line disappears in the answer. At least in my Firefox. Mysterious."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1519222656, "post_id": 48907937, "comment_id": 84822056, "body": "What is the gain here compared to making <code>Bar</code> inherit from <code>ISay</code> and <code>FooBar</code> simply inherit from <code>Bar</code>?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1519222949, "post_id": 48907937, "comment_id": 84822278, "body": "@super: ITYM compared to no additional inheritance of <code>ISay</code>. The general situation is that <code>FooBar</code> inherits from some abstract class that inherits from <code>ISay</code>, and that <code>FooBar</code> drags in an implementation by inheriting also from <code>Bar</code>. I know, the names here are not perfect."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1519852007, "post_id": 48907937, "comment_id": 85082313, "body": "&quot;<i>public virtual ISay, public Bar</i>&quot; why &quot;public virtual ISay&quot; here?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1519865872, "post_id": 48907937, "comment_id": 85087420, "body": "@curiousguy: You can replace that with inheritance of an abstract class that isn&#39;t a pure interface but drags in <code>ISay</code>."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 1, "last_activity_date": 1519222364, "last_edit_date": 1519222364, "creation_date": 1519222014, "answer_id": 48907937, "question_id": 48907742, "link": "https://stackoverflow.com/questions/48907742/override-pure-virtual-method-with-parallel-base-class-method/48907937#48907937", "title": "Override pure virtual method with parallel base class method?", "body": "<pre><code>#include &lt;iostream&gt;\n\nclass ISay {\npublic:\n    virtual void say() = 0;\n};\n\nclass Bar: public virtual ISay {\npublic:\n    void say() override {\n        std::cout &lt;&lt;\"I am a Bar.\" &lt;&lt; std::endl;\n    }\n};\n\nclass FooBar : public virtual ISay, public Bar {};\n\nint main() {\n    FooBar foobar;\n    foobar.say();  // Prints \"I am a Bar.\"\n}\n</code></pre>\n\n<p>This is known as <strong>dominance</strong> in virtual inheritance.</p>\n\n<p>Some argue that in order to support this, one should always inherit interfaces virtually.</p>\n\n<hr>\n\n<p>Virtual inheritance has two main costs (well maybe more):</p>\n\n<ul>\n<li>Initialization of the virtually inherited common class sub-object, that upmost base class, is specified in the most derived class. Specifications in classes intermediate in the inheritance chain(s), are ignored.</li>\n<li>There can be some overhead for member function calls, because the <code>this</code> pointer may have to be adjusted.</li>\n</ul>\n"}], "owner": {"reputation": 687, "user_id": 8785864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc539da405cd593d7539fc965d512950?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Gutierrez", "link": "https://stackoverflow.com/users/8785864/garrett-gutierrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 48907937, "answer_count": 1, "score": 1, "last_activity_date": 1519222364, "creation_date": 1519221392, "last_edit_date": 1519221814, "question_id": 48907742, "link": "https://stackoverflow.com/questions/48907742/override-pure-virtual-method-with-parallel-base-class-method", "title": "Override pure virtual method with parallel base class method?", "body": "<p>Say I have class <code>Foo</code> with a pure virtual function <code>say</code> and class <code>Bar</code> with a method <code>say</code> and I want to implement class <code>FooBar</code> which inherits from <code>Foo</code> and <code>Bar</code> with <code>Foo::say</code> being overrode by <code>Bar::say</code>. I could do something as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Foo {\npublic:\n    virtual void say() = 0;\n};\n\nclass Bar {\npublic:\n    void say() {\n        std::cout &lt;&lt;\"I am a Bar.\" &lt;&lt; std::endl;\n    }\n};\n\nclass FooBar : public Foo, public Bar {\npublic:\n    void say() override {\n        Bar::say();\n    }\n};\n\nint main() {\n    FooBar foobar;\n    foobar.say();  // I want to print \"I am a Bar.\"\n    return 0;\n}\n</code></pre>\n\n<p>But this just makes <code>FooBar::say</code> a function that calls <code>Bar::say</code>. It is a very minor annoyance but is there a way to actually just make <code>FooBar</code> override <code>Foo::say</code> directly with <code>Bar::say</code>? Would making <code>FooBar::say</code> <code>inline</code> reliably accomplish this? I realize I could make <code>Bar</code> inherit from <code>Foo</code> and <code>FooBar</code> inherit only from <code>Bar</code> but this would not be appropriate in the actual project this example is an analogous to.</p>\n"}, {"tags": ["c++", "cmake", "cpack"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1519221774, "post_id": 48907713, "comment_id": 84821449, "body": "One way is to put a call to find_package in the generated config script."}, {"owner": {"reputation": 1, "user_id": 9391283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfa1700167a50961d16a86bbfd9ac0f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9391283/j-doe"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1519222864, "post_id": 48907713, "comment_id": 84822200, "body": "I&#39;m not sure, that I understand you. Can you explain your idea? Thank!"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1519224428, "post_id": 48907713, "comment_id": 84823442, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32756195/recursive-list-of-link-libraries-in-cmake\">Recursive list of LINK_LIBRARIES in CMake</a>"}, {"owner": {"reputation": 1, "user_id": 9391283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfa1700167a50961d16a86bbfd9ac0f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9391283/j-doe"}, "edited": false, "score": 0, "creation_date": 1519298528, "post_id": 48907713, "comment_id": 84858365, "body": "So, it&#39;s good point, but it not handle dependencies of external dependencies."}, {"owner": {"reputation": 3572, "user_id": 5710233, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5LmFgRhfZNQ/AAAAAAAAAAI/AAAAAAAAABk/Etcd11tdJGc/photo.jpg?sz=128", "display_name": "Mizux", "link": "https://stackoverflow.com/users/5710233/mizux"}, "edited": false, "score": 0, "creation_date": 1519301605, "post_id": 48907713, "comment_id": 84860354, "body": "Personally, I did it by incorporating dependencies as CMake Subprojects (using ExternalProject) thus everything is exported but you need to recompile everything (and adapt each dependency to be used that way)..."}], "owner": {"reputation": 1, "user_id": 9391283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edfa1700167a50961d16a86bbfd9ac0f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9391283/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519221294, "creation_date": 1519221294, "question_id": 48907713, "link": "https://stackoverflow.com/questions/48907713/how-to-get-location-of-external-libraries-in-cmake", "title": "How to get location of external libraries in CMake?", "body": "<p>I have a CMake project which build library with external dependencies:</p>\n\n<pre><code>add_library(lib_name ${SRC})\ntarget_link_libraries(lib_name ${DEPENDENCIES})\n</code></pre>\n\n<p>${DEPENDENCIES} contains of dependencies which found by find_package().</p>\n\n<p>After I want to install my library in package:</p>\n\n<pre><code>install(TARGETS lib_name DESTINATION lib COMPONENT package)\n</code></pre>\n\n<p>So, and I want to add all (recursive) dynamic dependencies (*.so) of lib_name to package. I know that CMake solve recursive dependencies when build library, but I don't know how to install it to package.\nMaybe somebody know how to do it? Thanks in advance!</p>\n"}, {"tags": ["c++", "sockets", "winsock"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519220394, "post_id": 48907359, "comment_id": 84820535, "body": "2^32 equals 4294967296, 4294967295 is therefore likely a result of negative overflow. You use <code>unsigned</code> integer and subtract below 0. See <a href=\"https://stackoverflow.com/search?q=4294967295+\">stackoverflow.com/search?q=4294967295+</a>, there are over 3k questions with 4294967295 on StackOverflow ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519236714, "post_id": 48907423, "comment_id": 84831784, "body": "Functions like <code>recv()</code> and <code>send()</code> return signed <code>int</code> values. They return -1 on error, 0 on disconnect (<code>recv</code> only), and &gt; 0 on bytes read/written."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 3, "last_activity_date": 1519220368, "creation_date": 1519220368, "answer_id": 48907423, "question_id": 48907359, "link": "https://stackoverflow.com/questions/48907359/windows-socket-accepting-and-receiving-at-random/48907423#48907423", "title": "Windows socket accepting and receiving at random", "body": "<p>4294967295 is -1 cast to unsigned.  So you are getting -1 probably to indicate some socket error, and treating it as an unsigned number of bytes.</p>\n"}], "owner": {"reputation": 1038, "user_id": 7252179, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/bkNb0.jpg?s=128&g=1", "display_name": "Th&#233;o Champion", "link": "https://stackoverflow.com/users/7252179/th%c3%a9o-champion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519220368, "creation_date": 1519220192, "question_id": 48907359, "link": "https://stackoverflow.com/questions/48907359/windows-socket-accepting-and-receiving-at-random", "title": "Windows socket accepting and receiving at random", "body": "<p>I just finished my cross platform socket wrapper. It work well on Linux but on Window I get a very strange behavior.</p>\n\n<p>When I launch my server (on loopback port 4242), the program start accepting connections from random sources and receiving from those connection.</p>\n\n<p>Example of what is logged in my terminal (this happened at a very hight pace continously):</p>\n\n<pre><code>New client connected : 0.0.0.0:58030\nForwarding connection to worker in threadpool...\nWaiting for client request...\nNew client connected : 0.0.0.0:58031\nReceived 4294967295 bytes from client ''\nForwarding connection to worker in threadpool...\nWaiting for client request...\nNew client connected : Waiting for client request...\nReceived 4294967295 bytes from client ''0.0.0.0:Received 4294967295 bytes from client ''\n\n58032\nWaiting for client request...\nWaiting for client request...\nReceived 4294967295 bytes from client ''\nReceived 4294967295 bytes from client ''Forwarding connection to worker in threadpool...\n</code></pre>\n\n<p>Here we can see 3 connections are accepted form <code>0.0.0.0:58030</code>, <code>0.0.0.0:58031</code> and <code>0.0.0.0:58032</code>. For each connection <code>Recv</code> return a huge number of byte read but the actual buffer is empty.</p>\n\n<p>Any idea of what can cause this sort of behavior to orient my research ?</p>\n"}, {"tags": ["c++", "linux", "process", "posix"], "comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1519228630, "post_id": 48907272, "comment_id": 84826490, "body": "Is the control service the parent of the &quot;other process&quot;?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1519255500, "post_id": 48907272, "comment_id": 84840872, "body": "Isn&#39;t that what systemd attempts to do?"}], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 1, "last_activity_date": 1519221357, "last_edit_date": 1519221357, "creation_date": 1519220534, "answer_id": 48907472, "question_id": 48907272, "link": "https://stackoverflow.com/questions/48907272/how-to-monitor-a-child-process-state-in-linux/48907472#48907472", "title": "How to monitor a child process state in Linux", "body": "<blockquote>\n  <p>should I save the child process PID and check its state periodically? </p>\n</blockquote>\n\n<p>No, if the child exits, the parent will receive signal <code>SIGCHLD</code>, so you can install signal handler to react on this event.</p>\n\n<p>See <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\">sigaction(2)</a> for how to install a signal handler, see <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a> for general information about signal.</p>\n"}], "owner": {"reputation": 3401, "user_id": 493371, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fbe8f1da5df445a2f492154dab872ad8?s=128&d=identicon&r=PG", "display_name": "RRR", "link": "https://stackoverflow.com/users/493371/rrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519255422, "creation_date": 1519219926, "last_edit_date": 1519255422, "question_id": 48907272, "link": "https://stackoverflow.com/questions/48907272/how-to-monitor-a-child-process-state-in-linux", "title": "How to monitor a child process state in Linux", "body": "<p>I have a control service that its functionality is to manage another process in the system. I have to run this process, re-run it if it's unexpectedly closed, and close it manually upon user request.  </p>\n\n<p>Can you please advise me how to do that in Linux? should I save the child process PID and check its state periodically? can I register to some system events that will notify me if the application running state has been changed?   </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "gtk"], "answers": [{"tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": true, "score": 1, "last_activity_date": 1519235278, "creation_date": 1519235278, "answer_id": 48912350, "question_id": 48907114, "link": "https://stackoverflow.com/questions/48907114/scale-a-gtkmm-widget-in-vertically-and-horizontally/48912350#48912350", "title": "Scale a Gtkmm widget in vertically and horizontally", "body": "<p>You could use a <a href=\"https://developer.gnome.org/gtk3/stable/GtkTextView.html\" rel=\"nofollow noreferrer\">GtkTextView</a> which supports resizing. TextEntries are typically not re-sizable.</p>\n"}], "owner": {"reputation": 129, "user_id": 7883081, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a87c5e904438330593243d6e23709a34?s=128&d=identicon&r=PG&f=1", "display_name": "Razvan", "link": "https://stackoverflow.com/users/7883081/razvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48912350, "answer_count": 1, "score": 0, "last_activity_date": 1519235278, "creation_date": 1519219405, "question_id": 48907114, "link": "https://stackoverflow.com/questions/48907114/scale-a-gtkmm-widget-in-vertically-and-horizontally", "title": "Scale a Gtkmm widget in vertically and horizontally", "body": "<p>I am trying to make a <a href=\"https://developer.gnome.org/gtkmm/stable/classGtk_1_1Entry.html\" rel=\"nofollow noreferrer\">Gtkmm::Entry</a> bigger both vertically and horizontally so that in the end it would match the shape of a square. I wasn't able to find any documentation on this and would really appreciate if someone could help.</p>\n\n<p>I have seen that it is possible to use the <a href=\"https://developer.gnome.org/gtkmm/stable/classGtk_1_1Widget.html#a5e95431f630a226b0b7297e4815ee945\" rel=\"nofollow noreferrer\">set size request</a> method to give it a square shape however it is too small and the text written in it is illegible. Does anyone know how to achieve this?</p>\n"}, {"tags": ["c++", "sockets", "socketcan"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1519219386, "post_id": 48907050, "comment_id": 84819728, "body": "&quot;not working&quot; is not a useful question to post.  What error(s) are you getting?"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1519219418, "post_id": 48907050, "comment_id": 84819758, "body": "Where does <code>canSocket</code> come from in your class? Are you sure it has the same value as in main?"}, {"owner": {"reputation": 543, "user_id": 3809520, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cfca81b89111daf08e00f7a7a3cac90e?s=128&d=identicon&r=PG&f=1", "display_name": "royalTS", "link": "https://stackoverflow.com/users/3809520/royalts"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1519219527, "post_id": 48907050, "comment_id": 84819859, "body": "@Andrew Henle It fails with an errno saying that an argument is invalid, but I don&#39;t see what this might be and I can&#39;t spot any difference between the main part and the custom class part..."}, {"owner": {"reputation": 543, "user_id": 3809520, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cfca81b89111daf08e00f7a7a3cac90e?s=128&d=identicon&r=PG&f=1", "display_name": "royalTS", "link": "https://stackoverflow.com/users/3809520/royalts"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1519219642, "post_id": 48907050, "comment_id": 84819957, "body": "@Mat it is a class member and is created before with an initialization. The debugger shows me the same value (0x03) for both the main and the class"}, {"owner": {"reputation": 1118, "user_id": 8074683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8Ik8.jpg?s=128&g=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/8074683/anton"}, "edited": false, "score": 0, "creation_date": 1520698346, "post_id": 48907050, "comment_id": 85426771, "body": "launch it under gdb, set breakpoints at <code>write</code> calls and check its arguments. If they are the different, there you go, if not, the problem is in the global state, I would swap the order of <code>write</code> calls then just to check."}], "owner": {"reputation": 543, "user_id": 3809520, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cfca81b89111daf08e00f7a7a3cac90e?s=128&d=identicon&r=PG&f=1", "display_name": "royalTS", "link": "https://stackoverflow.com/users/3809520/royalts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519221678, "creation_date": 1519219198, "last_edit_date": 1519221678, "question_id": 48907050, "link": "https://stackoverflow.com/questions/48907050/socket-write-fails-in-custom-class-but-not-in-main", "title": "Socket Write() fails in custom class but not in main", "body": "<p>I am working on a simple project using the SocketCAN library to send some messages over CAN. But now I am stuck with a problem that I can not explain by myself... When I am using the socket command <code>write</code> within a custom class it fails with invalid argument (errno: 22 - EINVAL). To find my problem I made the whole class public and by using the same functionalities as within my class in my <code>main</code> method it works...</p>\n\n<p>Custom Class (not working):</p>\n\n<pre><code>void Can::SendFrame(const can_frame &amp;canFrame) const\n{\nbcm_message request = CreateSingleNonCyclicFrameTransmissionRequest(canFrame);\nint result = write(canSocket, &amp;request, sizeof(request));\n}\n</code></pre>\n\n<p>Main (working):</p>\n\n<pre><code>Can can;\nbcm_message = can.CreateSingleNonCyclicFrameTransmissionRequest(canFrame);\nint result = write(can.canSocket, &amp;request, sizeof(request));\n</code></pre>\n\n<p>I am using a BCM socket. The socket is connected and working fine (from the main method). </p>\n\n<p>Any idea what might be the problem?</p>\n\n<p>Edit:\nIf I create the <code>can_frame</code> within <code>SendFrame()</code> <code>write()</code> does not fail.</p>\n\n<pre><code>void Can::SendFrame(const can_frame &amp;canFrame) const\n{\ncan_frame testFrame;\ntestFrame.can_dlc = 1;\ntestFrame.can_id = 0x321;\ntestFrame.data[0] = 0xde;\nauto request2 = CreateSingleNonCyclicFrameTransmissionRequest(testFrame);\nint result2 = write(canSocket, &amp;request2, sizeof(request2));\n// as before:\nbcm_message request = CreateSingleNonCyclicFrameTransmissionRequest(canFrame);\nint result = write(canSocket, &amp;request, sizeof(request));\n}\n</code></pre>\n\n<p>Edit2:\nThere was a difference in the <code>flags</code> field of the created requests. In <code>request2</code> it is initialized with <code>0x01</code> and for <code>request</code> with <code>0x7effb80</code>... No idea where this comes from... But explicitly setting it to <code>0x0</code> solved the problem</p>\n"}, {"tags": ["c++", "sizeof"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 9, "creation_date": 1519219090, "post_id": 48906985, "comment_id": 84819528, "body": "Stay away from interviews asking you these questions."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1519219117, "post_id": 48906985, "comment_id": 84819547, "body": "Every subobject must have a unique address + type combination. This rule allows an empty derived class to have size 1 in C++, with effectively size 0 for the base class object. This is known as the Empty Base Class optimization, or EBO optimization."}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 2, "creation_date": 1519219505, "post_id": 48906985, "comment_id": 84819834, "body": "Why is this tagged <code>java</code>? The very concept of &quot;size&quot; of a class in Java is ill-defined and cannot be answered without detailed knowledge of the specific JVM version you&#39;re targeting."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1519219510, "post_id": 48906985, "comment_id": 84819841, "body": "I must say I don&#39;t understand what you find unclear exactly. I must also say that pulling both Java and C++ into this question is unlikely to end up being productive."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1534306488, "post_id": 48906985, "comment_id": 90658249, "body": "Rolled back. Please do not edit a question to be a completely different one. Instead, post a new question."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519221174, "post_id": 48907534, "comment_id": 84821049, "body": "The minimum is allowed to be 0 due to EBO: <a href=\"http://coliru.stacked-crooked.com/a/2714e1b9db0dfab9\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/2714e1b9db0dfab9</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519226530, "post_id": 48907534, "comment_id": 84824981, "body": "@NathanOliver - We are probably talking about different things. The minimum <i>total</i> size is 1, and <code>sizeof(any part)</code> will also never be less than 1. That the size of the whole object is not the sum of the sizes of the parts is not limited to his case."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": true, "score": 1, "last_activity_date": 1519220713, "creation_date": 1519220713, "answer_id": 48907534, "question_id": 48906985, "link": "https://stackoverflow.com/questions/48906985/what-is-the-size-of-empty-derived-class-in-c-and-java/48907534#48907534", "title": "What is the size of empty derived class in c++ and java?", "body": "<p>In C++ the minimum size is 1. </p>\n\n<p>However, the other question is about multiple inheritance from base classes <em>of the same type</em>. Two objects of the same type cannot have the same address, because then they would not <em>be</em> different objects. </p>\n\n<p>The address is an important part of the identity of an object.</p>\n\n<p>So, if you have two objects of the same type, the minimum size would be 2.</p>\n\n<p>None of this happens in Java, because there is no multiple inheritance.</p>\n"}], "owner": {"reputation": 127, "user_id": 9380990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e14fa9b38bcdbef11151f1049769174?s=128&d=identicon&r=PG", "display_name": "Rohit Potter", "link": "https://stackoverflow.com/users/9380990/rohit-potter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "closed_date": 1519224153, "accepted_answer_id": 48907534, "answer_count": 1, "score": -1, "last_activity_date": 1534307425, "creation_date": 1519219051, "last_edit_date": 1534307425, "question_id": 48906985, "link": "https://stackoverflow.com/questions/48906985/what-is-the-size-of-empty-derived-class-in-c-and-java", "closed_reason": "Needs more focus", "title": "What is the size of empty derived class in c++ and java?", "body": "<p>I have got some related answers like <a href=\"https://stackoverflow.com/questions/44624706/why-the-size-of-empty-class-that-is-derived-from-two-empty-classes-is-2\">Why the size of empty class that is derived from two empty classes is 2?</a>  but not get the answer to my question clearly.</p>\n\n<pre><code>interface PI1\n{\n    default void show()\n    {\n        System.out.println(\"Default PI1\");\n    }\n}\n\ninterface PI2\n{\n    default void show()\n    {\n        System.out.println(\"Default PI2\");\n    }\n}\n\nclass TestClass implements PI1, PI2\n{\n    public void show()\n    {\n        PI1.super.show();\n        PI2.super.show();\n    }\n\n    public static void main(String args[])\n    {\n        TestClass d = new TestClass();\n        d.show();\n    }\n}\n</code></pre>\n\n<p><strong>Does this JAVA program show multiple inheritance?</strong></p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 3667, "user_id": 2965738, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/EV9E2.png?s=128&g=1", "display_name": "not-a-user", "link": "https://stackoverflow.com/users/2965738/not-a-user"}, "edited": false, "score": 0, "creation_date": 1519219800, "post_id": 48907083, "comment_id": 84820057, "body": "Well this gets rid of <code>Base</code>, and that is not what I want. I want <code>Composition&lt;Base&gt;</code> to be an alias (or as close to that as possible) for <code>Base</code>, instead of a class that extends <code>Base</code>."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 3667, "user_id": 2965738, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/EV9E2.png?s=128&g=1", "display_name": "not-a-user", "link": "https://stackoverflow.com/users/2965738/not-a-user"}, "edited": false, "score": 0, "creation_date": 1519220178, "post_id": 48907083, "comment_id": 84820375, "body": "@not-a-user That&#39;s not really visible from the question at all, you might want to edit it. I will try to provide a solution in the meantime."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 3667, "user_id": 2965738, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/EV9E2.png?s=128&g=1", "display_name": "not-a-user", "link": "https://stackoverflow.com/users/2965738/not-a-user"}, "edited": false, "score": 0, "creation_date": 1519221102, "post_id": 48907083, "comment_id": 84820996, "body": "@not-a-user - but what about <code>Composition&lt;int, long&gt;</code>? If <code>Composition&lt;int&gt;</code> is an alias for <code>int</code>, you have <code>Composition&lt;int, long&gt; : public int</code>; and this is forbidden."}, {"owner": {"reputation": 3667, "user_id": 2965738, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/EV9E2.png?s=128&g=1", "display_name": "not-a-user", "link": "https://stackoverflow.com/users/2965738/not-a-user"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1519314484, "post_id": 48907083, "comment_id": 84869815, "body": "@max66 First argument must be an extendable class, yes."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1519220546, "last_edit_date": 1519220546, "creation_date": 1519219309, "answer_id": 48907083, "question_id": 48906841, "link": "https://stackoverflow.com/questions/48906841/get-rid-of-unnecessary-class-in-variadic-template-recursion-base-case/48907083#48907083", "title": "Get rid of unnecessary class in variadic template recursion base case", "body": "<p>You can just get tid of <code>Dummy</code> altogether and make the 1-argument form the stop condition:</p>\n\n<pre><code>template&lt;typename... Members&gt;\nclass Composition;\n\ntemplate&lt;typename FirstMember, typename... MoreMembers&gt;\nclass Composition&lt;FirstMember, MoreMembers...&gt;\n    : public Composition&lt;MoreMembers...&gt; {\nprotected:\n    FirstMember member;\n};\n\ntemplate&lt;typename FirstMember&gt;\nclass Composition&lt;FirstMember&gt;\n{\nprotected:\n    FirstMember member;\n};\n\nComposition&lt;Composition&lt;\n    Composition&lt;int&gt;, Composition&lt;int&gt;*&gt;, double&gt; composition;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/acd594fe43341c5d\" rel=\"nofollow noreferrer\">[Live example]</a></p>\n\n<p>If, as clarified in comments, <code>Base</code> is an important part of the design, you should be able to achieve what you want by adding one more layer of indirection:</p>\n\n<pre><code>template &lt;class Base, class... Members&gt;\nstruct CompositionHelper;\n\ntemplate &lt;class Base, class... Members&gt;\nusing Composition = typename CompositionHelper&lt;Base, Members...&gt;::Type;\n\ntemplate &lt;class Base&gt;\nstruct CompositionHelper&lt;Base&gt;\n{\n  using Type = Base;\n};\n\ntemplate &lt;class Base, class FirstMember, class... MoreMembers&gt;\nstruct CompositionHelper&lt;Base, FirstMember, MoreMembers...&gt;\n{\n  class Type : public Composition&lt;Base, MoreMembers...&gt;\n  {\n  protected:\n    FirstMember member;\n  };\n};\n\nComposition&lt;Composition&lt;\n    Composition&lt;Dummy, int&gt;, Composition&lt;Dummy, int&gt;*&gt;, double&gt; composition;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e181f6d7bbca8630\" rel=\"nofollow noreferrer\">[Live example]</a></p>\n"}], "owner": {"reputation": 3667, "user_id": 2965738, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/EV9E2.png?s=128&g=1", "display_name": "not-a-user", "link": "https://stackoverflow.com/users/2965738/not-a-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48907083, "answer_count": 1, "score": 0, "last_activity_date": 1519220546, "creation_date": 1519218690, "question_id": 48906841, "link": "https://stackoverflow.com/questions/48906841/get-rid-of-unnecessary-class-in-variadic-template-recursion-base-case", "title": "Get rid of unnecessary class in variadic template recursion base case", "body": "<p>The following variadic template recursively creates classes and adds each of the specified members in sequence:</p>\n\n<pre><code>class Dummy {};\n\ntemplate&lt;class Base, typename... Members&gt;\n// using Composition = Base;\nclass Composition : public Base {};\n\ntemplate&lt;class Base, typename FirstMember, typename... MoreMembers&gt;\nclass Composition&lt;Base, FirstMember, MoreMembers...&gt;\n    : public Composition&lt;Base, MoreMembers...&gt; {\nprotected:\n    FirstMember member;\n};\n\nComposition&lt;Composition&lt;\n    Composition&lt;Dummy, int&gt;, Composition&lt;Dummy, int&gt;*&gt;, double&gt; composition;\n</code></pre>\n\n<p>It works, but I feel the terminating step is a bit clumsy: It creates a new class <code>Composition&lt;Base&gt;</code> which inherits from <code>Base</code> but does not do anything else. I would prefer if the last step could simply be <code>template&lt;class Base, typename... Members&gt; using Composition = Base;</code> - but that is not allowed because we may not specialize alias templates.</p>\n"}, {"tags": ["c++", "stdvector"], "comments": [{"owner": {"reputation": 129, "user_id": 7224327, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/24eadd703019f03b8fdb2daac3c82302?s=128&d=identicon&r=PG&f=1", "display_name": "Prasath Shanmugakani", "link": "https://stackoverflow.com/users/7224327/prasath-shanmugakani"}, "edited": false, "score": 0, "creation_date": 1519218508, "post_id": 48906719, "comment_id": 84819134, "body": "Thanks for editing"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1519218581, "post_id": 48906719, "comment_id": 84819182, "body": "Remember that a vector resizes itself dynamically. When it does it needs to <i>copy</i> the existing contents."}, {"owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "edited": false, "score": 0, "creation_date": 1519218589, "post_id": 48906719, "comment_id": 84819187, "body": "You know vector performs copying on its elements when it grows right?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519218600, "post_id": 48906719, "comment_id": 84819195, "body": "The reallocation of internal <code>std::vector</code> buffer?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1519218633, "post_id": 48906719, "comment_id": 84819220, "body": "<code>reserve()</code> some space if you want those to go away."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1519218703, "post_id": 48906719, "comment_id": 84819273, "body": "try printing out Object.capacity after each push_back"}, {"owner": {"reputation": 18493, "user_id": 8176478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bfdd0a05bddc5a0bcaf042597babdef?s=128&d=identicon&r=PG&f=1", "display_name": "MKR", "link": "https://stackoverflow.com/users/8176478/mkr"}, "edited": false, "score": 0, "creation_date": 1519218743, "post_id": 48906719, "comment_id": 84819297, "body": "Add few more <code>Object.push_back(  sample( ?? ));</code>  sentences with different values and you will understand behavior of vector <code>resize</code>."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1519218825, "post_id": 48906719, "comment_id": 84819357, "body": "I believe that the capacity is doubled (?) for each push back to reduce the complexity."}], "answers": [{"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 8, "last_activity_date": 1519219606, "last_edit_date": 1519219606, "creation_date": 1519218749, "answer_id": 48906872, "question_id": 48906719, "link": "https://stackoverflow.com/questions/48906719/anonymous-constructor-and-destructor-call-in-vector/48906872#48906872", "title": "Anonymous constructor and destructor call in vector", "body": "<p><code>std::vector</code> is a dynamic array. When you add an element and the capacity of its internal buffer is full, <code>vector</code> needs to:</p>\n\n<ol>\n<li>allocate new memory buffer,</li>\n<li>copy/move elements from old buffer to new buffer,</li>\n<li>destroy elements in original buffer,</li>\n<li>deallocate original buffer,</li>\n<li>copy/move added element at the end of new buffer.</li>\n</ol>\n\n<p>(Not necessarily in this order.)</p>\n\n<p>Step 2. involves copy constructor you do not understand. Step 3 involves destructor you do not understand.</p>\n\n<hr>\n\n<p>To prevent this (inefficient) behavior, use <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>std::vector::reserve</code></a> before inserting elements (if you can). Then no reallocation and no hidden copy/move of elements will take place.</p>\n"}], "owner": {"reputation": 129, "user_id": 7224327, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/24eadd703019f03b8fdb2daac3c82302?s=128&d=identicon&r=PG&f=1", "display_name": "Prasath Shanmugakani", "link": "https://stackoverflow.com/users/7224327/prasath-shanmugakani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "accepted_answer_id": 48906872, "answer_count": 1, "score": 2, "last_activity_date": 1519219606, "creation_date": 1519218399, "last_edit_date": 1519218466, "question_id": 48906719, "link": "https://stackoverflow.com/questions/48906719/anonymous-constructor-and-destructor-call-in-vector", "title": "Anonymous constructor and destructor call in vector", "body": "<p>Am bit confused on the below program and its output.</p>\n\n<p>Could someone please clarify ?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n using namespace std;\nclass sample\n{\n   public:\n    int a;\n    sample( ){ cout&lt;&lt;\" Am in Default Cons \"&lt;&lt; a &lt;&lt; \"\\n\"; }\n    sample( int b ){ a=b; cout&lt;&lt;\" Am in Cons \"&lt;&lt; a &lt;&lt; \"\\n\"; }\n    sample(const sample&amp; s){ a=s.a; cout&lt;&lt;\" Am in copy \" &lt;&lt;s.a&lt;&lt;\"\\n\"; }\n    ~sample(){ cout&lt;&lt;\" Am in Des \"&lt;&lt;a &lt;&lt;\"\\n\"; }\n\n};\n\nint main()\n{\n    vector &lt; sample &gt; Object;\n    {\n     Object.push_back(  sample( 1 ));\n     Object.push_back(  sample( 2 ));\n     cout&lt;&lt;\" End of loop \\n\";\n    }\n    cout&lt;&lt;\" \\n End of Program \\n\";\n    return 0; \n}\n</code></pre>\n\n<p>and the output is </p>\n\n<pre>\n Am in Cons 1 // Understood this is for object 1 creation                                                                                                                                         \n Am in copy 1 // Understood this is for object 1 copy to vector \n Am in Des 1 // Understood this is for object 1 destruction.\n Am in Cons 2  // Understood this is for object 2 creation                                                                                                                                                 \n Am in copy 2 // Understood this is for object 2 copy to vector                                                                                                                                              \n Am in copy 1 // **Don't understand this COPY CALL**                                                                                                                                              \n Am in Des 1  // **Don't understand this DESTRUCTOR CALL**                                                                                                                                               \n Am in Des 2 // Understood this is for object 2 destruction.                                                                                                                                            \n End of loop                                                                                                                                               \n End of Program                                                                                                                                            \n Am in Des 1 //// Understood this is for object 1 destruction in vector .                                                                                                                                         \n Am in Des 2 //// Understood this is for object 2 destruction in vector .                                                                                                                                         \n</pre>\n"}, {"tags": ["c++", "windows", "multithreading", "crash", "malloc"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1519217665, "post_id": 48906343, "comment_id": 84818550, "body": "Are you linking with a thread-safe version of the runtime library?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1519217687, "post_id": 48906343, "comment_id": 84818560, "body": "Which version of the CRT are you using? You should paste the exact compiler and linker command line."}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "edited": false, "score": 0, "creation_date": 1519218161, "post_id": 48906343, "comment_id": 84818903, "body": "@ Mike Vine  I posted VS project archive here: <a href=\"https://drive.google.com/open?id=1A9NC52glqnIsaGLUxNgF6d1xJZRo-77e\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1A9NC52glqnIsaGLUxNgF6d1xJZRo-77e</a>  VS says that command line is:  /Yu&quot;stdafx.h&quot; /GS /GL /W3 /Gy /Zc:wchar_t /Zi /Gm- /O2 /sdl /Fd&quot;x64\\Release\\vc140.pdb&quot; /Zc:inline /fp:precise /D &quot;NDEBUG&quot; /D &quot;_CONSOLE&quot; /D &quot;_UNICODE&quot; /D &quot;UNICODE&quot; /errorReport:prompt /WX- /Zc:forScope /Gd /Oi /MD /Fa&quot;x64\\Release\\&quot; /EHsc /nologo /Fo&quot;x64\\Release\\&quot; /Fp&quot;x64\\Release\\MallocTest.pch&quot;"}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1519218340, "post_id": 48906343, "comment_id": 84819020, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4826479/visual-c-thread-safety-of-free-and-malloc\">Visual C++ thread safety of free and malloc?</a>"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1519218640, "post_id": 48906343, "comment_id": 84819224, "body": "@molbdnilo &quot;Are you linking with a thread-safe version of the runtime library?&quot;   I guess yes because there is /MD flag in command line:  /Yu&quot;stdafx.h&quot; /GS /GL /W3 /Gy /Zc:wchar_t /Zi /Gm- /O2 /sdl /Fd&quot;x64\\Release\\vc140.pdb&quot; /Zc:inline /fp:precise /D &quot;NDEBUG&quot; /D &quot;_CONSOLE&quot; /D &quot;_UNICODE&quot; /D &quot;UNICODE&quot; /errorReport:prompt /WX- /Zc:forScope /Gd /Oi /MD /Fa&quot;x64\\Release\\&quot; /EHsc /nologo /Fo&quot;x64\\Release\\&quot; /Fp&quot;x64\\Release\\MallocTest.pch&quot;"}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1519218793, "post_id": 48906343, "comment_id": 84819335, "body": "Do you get a crash if you use new/delete instead?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519218801, "post_id": 48906343, "comment_id": 84819342, "body": "Does it work with a smaller number of threads? Is 100 your magic limit?"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1519218837, "post_id": 48906343, "comment_id": 84819371, "body": "@stijn &quot;Possible duplicate of Visual C++ thread safety of free and malloc?&quot;  Looks similar; ome of replyes is &quot;apparently in visual C++ all stdlib and stdio are thread safe, so long as you use the /MD compiler directive to use the multithread libraries.&quot;. I use  /MD and my code is pretty simple but I&#39;m still having problems on Windows."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519219408, "post_id": 48906343, "comment_id": 84819747, "body": "You forgot to mention what kind of crash it is."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1519219431, "post_id": 48906343, "comment_id": 84819775, "body": "I was able to reproduce this. Error happens even if <code>new</code> is used (it actually still calls the same <code>_malloc_base</code>). Callstack ends with <code>ntdll.dll!RtlpLowFragHeapAllocFromContext(); tdll.dll!RtlpAllocateHeapInternal(); ucrtbase.dll!_malloc_base()</code>"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519219442, "post_id": 48906343, "comment_id": 84819781, "body": "@molbdnilo &quot;Does it work with a smaller number of threads? Is 100 your magic limit?&quot; It definitely crashes on 100 threads; I don&#39;t know actual magic number, may be it depends on hardware. In production environment we often have thousands of threads."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1519219526, "post_id": 48906343, "comment_id": 84819856, "body": "It&#39;s definitely not a duplicate of <a href=\"https://stackoverflow.com/questions/4826479/visual-c-thread-safety-of-free-and-malloc\" title=\"visual c thread safety of free and malloc\">stackoverflow.com/questions/4826479/&hellip;</a>. I could reproduce this using the multithreaded crt (BTW on my VS2017 there is no single thread crt at all). It&#39;s a crash in ntdll, call stack: <code>ntdll.dll!RtlpLowFragHeapAllocFromContext(); tdll.dll!RtlpAllocateHeapInternal(); ucrtbase.dll!_malloc_base()</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519219682, "post_id": 48906343, "comment_id": 84819977, "body": "I could not repro on VS2013, so it could be a new issue in VS. Of course it could also be a complete coincidence that I have failed to crash it."}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1519219925, "post_id": 48906343, "comment_id": 84820156, "body": "@AndersK. new/delete pair crashes as well."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519220949, "post_id": 48906343, "comment_id": 84820905, "body": "I enclosed both the <code>malloc</code> and the <code>free</code> into a critical section and now it apparenty doesn&#39;t crash anymore."}, {"owner": {"reputation": 546, "user_id": 1925289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/264ecdba62fe17fd00d911af0eb12ca3?s=128&d=identicon&r=PG", "display_name": "Zacharias", "link": "https://stackoverflow.com/users/1925289/zacharias"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1519221554, "post_id": 48906343, "comment_id": 84821305, "body": "@molbdnilo crashes on my machine with 1000 threads on VC2017, Release x64. Note: Malloc is threadsafe according to the documentation. Digging into the asm might reveal more information."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519222087, "post_id": 48906343, "comment_id": 84821653, "body": "See my previous comment: It has been running now for &gt;15 minutes without crashing but the computer becomes more and more painful to use, now every 10 to 15 seconds the whole computer becomes unresponsive for a couple of seconds, even the mouse cursor won&#39;t move anymore. It looks like a MS bug to me."}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 3, "creation_date": 1519222536, "post_id": 48906343, "comment_id": 84821971, "body": "You made my day. Reproduced issue with VC2017 100 threads. It shows access violation in HeapAlloc (somewhere in ntdll.dll)... There is some stupid error... or you&#39;ve found bug in MS c++ or ms windows..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519224466, "post_id": 48906343, "comment_id": 84823475, "body": "I can&#39;t spot anything wrong in this code provided that <code>malloc</code> and <code>free</code> are thread safe which they should be (usage of <code>&#47;MD</code> switch)."}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "edited": false, "score": 0, "creation_date": 1519225486, "post_id": 48906343, "comment_id": 84824229, "body": "@ Michael Walz &quot; and now it apparenty doesn&#39;t crash &quot; - Could you please put your code here, in comments?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519226867, "post_id": 48906343, "comment_id": 84825207, "body": "@peterg This is the modified code that works. <a href=\"https://pastebin.com/wAWxCCeN\" rel=\"nofollow noreferrer\">pastebin.com/wAWxCCeN</a>. It&#39;s just an experience, the code is very poor."}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 1, "creation_date": 1519285829, "post_id": 48906343, "comment_id": 84850522, "body": "@peterg.  I was able to reproduce issue with HeapAlloc and private LFH heap on Windows 10.  I&#39;m using similar code, but written mostly on Win32 calls to reduce influence of c++\\c. So this is 99.9% bug in Windows 10!!!  Could you please confirm that your problem reproducible on windows server?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519288809, "post_id": 48906343, "comment_id": 84852058, "body": "@PavloK could you post that code somewhere, for example on pasebin.com?"}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519289507, "post_id": 48906343, "comment_id": 84852452, "body": "@MichaelWalz Here you go. <a href=\"https://pastebin.com/TPDeq7wr\" rel=\"nofollow noreferrer\">pastebin.com/TPDeq7wr</a>."}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519290964, "post_id": 48906343, "comment_id": 84853335, "body": "@molbdnilo &quot;You forgot to mention what kind of crash it is&quot; - it&#39;s APPCRASH, details:   Problem signature:   Problem Event Name:APPCRASH   Fault Module Name:\tStackHash_e3c2   Fault Module Version:\t6.3.9600.17031   Fault Module Timestamp:\t530895af   Exception Code:\tc0000374   Exception Offset:\tPCH_24_FROM_ntdll+0x000000000009B13A   OS Version:\t6.3.9600.2.0.0.272.7   Locale ID:\t1033   Additional Information 1:\te3c2   Additional Information 2:\te3c2bb91516b405e48fec31ed1cb5192   Additional Information 3:\tb92e   Additional Information 4:\tb92ebbb6dbf28e28f6b2b620a162a1f4"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519291095, "post_id": 48906343, "comment_id": 84853425, "body": "@PavloK Yes, it is reproduced on Windows Server as well."}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519293118, "post_id": 48906343, "comment_id": 84854790, "body": "@peterg. What version of windows server? I guess this issue has to be reported to MS. Maybe they can provide workaround or tell what&#39;s wrong... Would you do a honors and communicate that problem?"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519297027, "post_id": 48906343, "comment_id": 84857372, "body": "@PavloK It definitely fails on Windows Server 2008, Windows Server 2012R2. &quot;I guess this issue has to be reported to MS&quot; - yes, I reported it via support channel but I have only MSDN subscription support level. They told me that this support level accepts issues only when MSDN sample code doesn&#39;t work, and my code is self-written. If you suggets me some MS channel to report the issue I would be grateful."}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519297779, "post_id": 48906343, "comment_id": 84857858, "body": "I think it make sense post this issue on microsoft technet. I don&#39;t expect quick turnaround in this case, but it can work. IMO it sounds like a great potential problem for MS server platform. I think it makes sense to include my research results since they localize problem to core windows functions. Let me know if you need any further help"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519298541, "post_id": 48906343, "comment_id": 84858375, "body": "@PavloK &quot;I think it make sense post this issue on microsoft technet.&quot; - what  forum would you consider the best for issue like this? I didn&#39;t find suitable category - all categories about products, not about development: <a href=\"https://social.technet.microsoft.com/Forums/en-us/newthread\" rel=\"nofollow noreferrer\">social.technet.microsoft.com/Forums/en-us/newthread</a> Or would you suggets some other way for reporting on TechNet? Thanks in advance."}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519301751, "post_id": 48906343, "comment_id": 84860444, "body": "Well, I see dev questions in category Windows Servers... However I support your concern. You can also try social.msdn.microsoft.com."}, {"owner": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519557830, "post_id": 48906343, "comment_id": 84950689, "body": "@peterg Could you please share link to question\\discussion on ms forum."}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519741720, "post_id": 48906343, "comment_id": 85026551, "body": "@PavloK <a href=\"https://social.technet.microsoft.com/Forums/en-US/40ccd599-e386-471f-95ce-721a5e80648b/mallocfree-in-several-threads-crahes-on-windows-whats-wrong?forum=winservercore\" rel=\"nofollow noreferrer\">social.technet.microsoft.com/Forums/en-US/&hellip;</a>  <a href=\"https://social.msdn.microsoft.com/Forums/en-US/63e75495-245b-43eb-8e03-e629573ee079/mallocfree-in-several-threads-crahes-on-windows-whats-wrong?forum=vcgeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>"}, {"owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "reply_to_user": {"reputation": 627, "user_id": 9111145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b40954830833d2657ded75a6debf1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo K", "link": "https://stackoverflow.com/users/9111145/pavlo-k"}, "edited": false, "score": 0, "creation_date": 1519743490, "post_id": 48906343, "comment_id": 85027770, "body": "Posted issue to MS sites,   @PavloK <a href=\"https://social.technet.microsoft.com/Forums/en-US/40ccd599-e386-471f-95ce-721a5e80648b/mallocfree-in-several-threads-crahes-on-windows-whats-wrong?forum=winservercore\" rel=\"nofollow noreferrer\">social.technet.microsoft.com/Forums/en-US/&hellip;</a>  <a href=\"https://social.msdn.microsoft.com/Forums/en-US/63e75495-245b-43eb-8e03-e629573ee079/mallocfree-in-several-threads-crahes-on-windows-whats-wrong?forum=vcgeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>"}, {"owner": {"reputation": 239, "user_id": 4146066, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WUyvhk8A6qE/AAAAAAAAAAI/AAAAAAAAADU/8_aq03Q2YD4/photo.jpg?sz=128", "display_name": "Hans", "link": "https://stackoverflow.com/users/4146066/hans"}, "edited": false, "score": 1, "creation_date": 1555444884, "post_id": 48906343, "comment_id": 98112031, "body": "All threads share the same heap, access to the allocator/deallocator must be synchronized."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1564393480, "creation_date": 1564393480, "answer_id": 57251156, "question_id": 48906343, "link": "https://stackoverflow.com/questions/48906343/malloc-free-in-several-threads-crashes-on-windows/57251156#57251156", "title": "malloc()/free() in several threads crashes on Windows", "body": "<p>Nothing in your remarkably small MVCE indicates a programming error, <code>malloc()</code> and <code>free()</code> are supposed to be thread safe and so should the methods invoked on <code>cout</code>. The program is not designed to ever stop, so it appears to be a fine stress test for <code>malloc()</code> in a multi-thread context.</p>\n\n<p>Note however that if <code>malloc()</code> fails, it is questionable to try and report the error to <code>cout</code>, which might make further calls to <code>malloc()</code> for buffering. Reporting the error to <code>cerr</code> or making <code>cout</code> unbuffered is advisable. In any case <code>malloc()</code> failure should not cause a crash, even in the stream methods.</p>\n\n<p>It looks like you found a bug in the runtime library you link to on the VS target platform. It would be interesting to track the memory usage of the program up to the crash. A steady increase in memory usage would indicate some problems in the runtime library too. The program never allocates more than <code>MAX_THREADS</code> blocks of 4K at a time, so the memory use should remain quite low, below 2MB, including the overhead associated with the thread based caches used by modern implementations of <code>malloc()</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 9390971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d09e6b9e34a0f4ba4edf78f7eb1b036?s=128&d=identicon&r=PG&f=1", "display_name": "peterg", "link": "https://stackoverflow.com/users/9390971/peterg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 6, "answer_count": 1, "score": 10, "last_activity_date": 1565538691, "creation_date": 1519217252, "last_edit_date": 1565538691, "question_id": 48906343, "link": "https://stackoverflow.com/questions/48906343/malloc-free-in-several-threads-crashes-on-windows", "title": "malloc()/free() in several threads crashes on Windows", "body": "<p>Simple code (below, <code>malloc()</code>/<code>free()</code> sequence being run in 100 threads) crashes on any Windows OS I tried it to run.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Maybe using some compiler directive can help?</p>\n\n<p>We build the executable in VS2017 in Release/x64; the executable file crashes on any Windows platform I tried after several minutes of running.</p>\n\n<p>I tried building with VS2015 as well but it doesn't help.</p>\n\n<p>The same code on Linux works fine.</p>\n\n<p>Actually, problem is more serious than it looks; we faced the situation when our server code crashes several times a day in a production environment without any reason (when user calls' number exceeds a certain value). We tried to nail down \nthe issue and created simplest solution that reproduces the problem.</p>\n\n<p>Archive with VS project is <a href=\"https://drive.google.com/open?id=1A9NC52glqnIsaGLUxNgF6d1xJZRo-77e\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>VS says that command line is:</p>\n\n<pre>\n/Yu\"stdafx.h\" /GS /GL /W3 /Gy /Zc:wchar_t /Zi /Gm- /O2 /sdl \n/Fd\"x64\\Release\\vc140.pdb\" /Zc:inline /fp:precise /D \"NDEBUG\"\n/D \"_CONSOLE\" /D \"_UNICODE\" /D \"UNICODE\" /errorReport:prompt /WX- /Zc:forScope /Gd\n/Oi /MD /Fa\"x64\\Release\\\" /EHsc /nologo /Fo\"x64\\Release\\\" /Fp\"x64\\Release\\MallocTest.pch\" \n</pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\n#define MAX_THREADS 100\n\nvoid task(void) {\n    while (true) {\n        char *buffer;\n        buffer = (char *)malloc(4096);\n        if (buffer == NULL) {\n            cout &lt;&lt; \"malloc error\" &lt;&lt; endl;\n        }\n        free(buffer);\n    }\n}\n\nint main(int argc, char** argv) {    \n    thread some_threads[MAX_THREADS];\n\n    for (int i = 0; i &lt; MAX_THREADS; i++) {\n        some_threads[i] = thread(task);\n    }\n\n    for (int i = 0; i &lt; MAX_THREADS; i++) {\n        some_threads[i].join();\n    }\n\n    _getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "compiler-optimization"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1519217418, "post_id": 48906338, "comment_id": 84818381, "body": "What is the <i>actual</i> problem you want to solve? Why are you doing this? Perhaps there&#39;s better or other solutions to the actual problem? And please take some time to <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">read about the XY problem</a>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1519217553, "post_id": 48906338, "comment_id": 84818484, "body": "What happens if you put <code>ptr</code> in an anonymous namespace?"}, {"owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1519217650, "post_id": 48906338, "comment_id": 84818539, "body": "@Bathsheba Tried on Godbolt. Still virtual call."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1519217753, "post_id": 48906338, "comment_id": 84818608, "body": "Weird. Would have thought gcc would have applied -fdevirtualize-at-ltrans in that case: it being simple standard C++. Nice question."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1519218049, "post_id": 48906338, "comment_id": 84818825, "body": "@lz96: Permission to change your code so it&#39;s standard C++?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1519218802, "post_id": 48906338, "comment_id": 84819344, "body": "Same behavior with <code>Interface* const ptr = new Impl1;</code>."}, {"owner": {"reputation": 6763, "user_id": 43673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76b1099b7d84ab213060530087251e42?s=128&d=identicon&r=PG&f=1", "display_name": "Ville Krumlinde", "link": "https://stackoverflow.com/users/43673/ville-krumlinde"}, "edited": false, "score": 1, "creation_date": 1519223432, "post_id": 48906338, "comment_id": 84822660, "body": "Using anonymous namespace like this seem to enable devirtualization: <a href=\"https://godbolt.org/g/exzQrC\" rel=\"nofollow noreferrer\">godbolt.org/g/exzQrC</a>"}, {"owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "reply_to_user": {"reputation": 6763, "user_id": 43673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76b1099b7d84ab213060530087251e42?s=128&d=identicon&r=PG&f=1", "display_name": "Ville Krumlinde", "link": "https://stackoverflow.com/users/43673/ville-krumlinde"}, "edited": false, "score": 0, "creation_date": 1519229212, "post_id": 48906338, "comment_id": 84826927, "body": "@VilleKrumlinde For non-<code>lto</code> case, <a href=\"http://llvm.org/devmtg/2016-11/Slides/Padlewski-DevirtualizationInLLVM.pdf\" rel=\"nofollow noreferrer\">this slides</a> explains such behavior well: Itanium ABI, by default, exposes vtable as PUBLIC, so for a public class its vtable may be modified during linking. However, this stll does not reason for cases where <code>-fvisibility=hidden -flto</code> is specified"}], "answers": [{"comments": [{"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 2, "creation_date": 1519852311, "post_id": 49023076, "comment_id": 85082484, "body": "This should be a comment, not an answer. An answer should address the following questions in sufficient detail: Is the optimization legal? How hard would it be to implement the optimization in a compiler? Why does GCC not perform the optimization? Is it worth being implemented?"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 4, "creation_date": 1519884290, "post_id": 49023076, "comment_id": 85091989, "body": "@HadiBrais - It&#39;s too big to be a comment. And the only people who could give you a real answer. I would suggest filing a bug report for missed optimization opportunity. I&#39;ve filled those myself and they&#39;re taken seriously."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1519919880, "post_id": 49023076, "comment_id": 85111931, "body": "Thanks for taking the time to file a bug report. I agree this is the only way to get an answer. You can update this answer based on that."}], "tags": [], "owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "is_accepted": false, "score": 11, "last_activity_date": 1519798533, "creation_date": 1519798533, "answer_id": 49023076, "question_id": 48906338, "link": "https://stackoverflow.com/questions/48906338/why-cant-gcc-devirtualize-this-function-call/49023076#49023076", "title": "Why can&#39;t gcc devirtualize this function call?", "body": "<p>If you move the ptr into the main function, the result is very telling and offers a strong hint as to why gcc doesn't want to de-virtualize the pointer.</p>\n\n<p>The <a href=\"https://godbolt.org/g/p3ChD4\" rel=\"noreferrer\">disassembly for this</a> shows that if the 'has the static been initialized flag' is false, it initializes the static and then jumps right back to the virtual function call, even though nothing could possibly have happened to it in between.</p>\n\n<p>This tells me that gcc is hard-wired to believe that any kind of globally persistent pointer must always be treated as a pointer to an unknown type.</p>\n\n<p>In fact, it's even worse than this. If you add in a local variable, it matters whether the call to the <code>f</code> on the static pointer occurs between the creation of the local variable and the call to <code>f</code> or not. The assembly showing the <code>f</code> interposed case is here: <a href=\"https://godbolt.org/g/MhM5CB\" rel=\"noreferrer\">Another godbolt link</a>; and it is simple to re-arrange it yourself on the site to see how the assembly turns into an inline of <code>f</code> once the other call isn't interposed.</p>\n\n<p>So, gcc must assume that the actual type a pointer refers to may change whenever control flow leaves the function for any reason. And whether or not it's declared <code>const</code> is irrelevant. Nor is it relevant if it's address is ever taken, or any number of other things.</p>\n\n<p>clang does the same thing. This seems overly cautious to me, but I'm not a compiler writer.</p>\n"}, {"comments": [{"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1519852349, "post_id": 49037730, "comment_id": 85082512, "body": "This should be a comment, not an answer. An answer should address the following questions in sufficient detail: Is the optimization legal? How hard would it be to implement the optimization in a compiler? Why does GCC not perform the optimization? Is it worth being implemented?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 3, "creation_date": 1519852565, "post_id": 49037730, "comment_id": 85082630, "body": "@HadiBrais Honestly I hesitated to put it in a comment to the answer of Omnifarious, since its answer is invalidated by this experiment. On the other hand it would have been not an appropriate comment. I have taken the habit to put partial answer when I am able to demonstrate that the previous answer is lacking something while I am still not able to provide a perfect one."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1519852795, "post_id": 49037730, "comment_id": 85082754, "body": "In general, you can post it as a comment under the question. If it&#39;s good enough, other people will tell you to promote it to an answer."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 3, "creation_date": 1519853280, "post_id": 49037730, "comment_id": 85083027, "body": "@HadiBrais I find comment unreadable, I would prefer something like the discussion page of wikis, so that solutions could be found by a collaborative effort. (that is a bottle in the sea)."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 1, "creation_date": 1519853816, "post_id": 49037730, "comment_id": 85083288, "body": "There are two techniques here to reach a good/better answer collaboratively: 1- by discussing the question in a comments section 2- by suggesting edits to an existing answer. If it was a very interesting question, it can be posted on Reddit or Hacker News to motivate a lengthy discussion and involve a wider audience."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1519856582, "post_id": 49037730, "comment_id": 85084537, "body": "@HadiBrais When you say &quot;there are two techniques&quot; you mean &quot;there are only two&quot;? What means techniques? ... What means answer? Of what is made the border between a complete or incomplete answer? Could I touch it?"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1519858189, "post_id": 49037730, "comment_id": 85085216, "body": "Partial or wrong answers are still answers. That&#39;s fine. This particular answer (and Omnifarious&#39; answer for that matter) is neither a partial answer nor a wrong one, it&#39;s really a comment that might help others to reach an answer. Consider your answer. The first part shows a case where devirtualization occurs. This is just a general observation. The second part states a vague guess that critically lacks technical details to back it up, which makes it almost meaningless. If your answer was wrong, I would&#39;ve downvoted it. But it&#39;s not an answer so I just flagged it as an NAA."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1519889255, "post_id": 49037730, "comment_id": 85093875, "body": "@HadiBrais The second part answer the question &quot;Why could the optimizer have difficulties to make the optimization?&quot; Answer: because it is allowed to replace the object at x by another one, check [basic.life] if you want to know how. You did not notice it because you may had no knowledge about this. The opinionic part starts when I say &quot;in my opinion&quot;. This part is the result of an abductive reasoning. The answer to my previous comment question is: the border is in your head.  Predicates all apply to your own representation of the &quot;world&quot;. Read Charles Pierce. Good luck."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1519916761, "post_id": 49037730, "comment_id": 85109653, "body": "The difference between your code and the OP is that in your code, everything can be done at compile time and the <code>static</code> can actually be put into constant storage. The OPs code requires that code be run when the program starts up."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1519920235, "post_id": 49037730, "comment_id": 85112189, "body": "@Omnifarious I have doubt about our two answers, please look at <a href=\"https://godbolt.org/g/UJbp73\" rel=\"nofollow noreferrer\">this assembly</a>. Why <code>ptr0-&gt;f()</code> devirtualized and not <code>ptr3-&gt;f()</code>?"}], "tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": false, "score": 4, "last_activity_date": 1519851991, "last_edit_date": 1519851991, "creation_date": 1519848564, "answer_id": 49037730, "question_id": 48906338, "link": "https://stackoverflow.com/questions/48906338/why-cant-gcc-devirtualize-this-function-call/49037730#49037730", "title": "Why can&#39;t gcc devirtualize this function call?", "body": "<p>I just made an other experiment, as in Omnifarious answer. But this time I make the pointer point to a static object:</p>\n\n<pre><code>Impl1 x;\nstatic Interface* const ptr = &amp;x ;\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/6oaJai\" rel=\"nofollow noreferrer\">GCC do devirtualize the function call</a>, <code>-O2</code> is sufficient. I don't see any rule in the C++ standard that would make pointer to static storage treated differently than pointer to dynamic storage. </p>\n\n<p>It is allowed to change the object at the address pointed to by <code>ptr</code>. So the compiler must track what is happening at that address to know what is the actual dynamic type of the object. So my opinion is that optimizer implementer may have considered that tracking what is happening on the heap would be too difficult in real program, so the compiler just don't do it.</p>\n"}], "owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2795, "favorite_count": 4, "answer_count": 2, "score": 30, "last_activity_date": 1519878368, "creation_date": 1519217231, "last_edit_date": 1519878368, "question_id": 48906338, "link": "https://stackoverflow.com/questions/48906338/why-cant-gcc-devirtualize-this-function-call", "title": "Why can&#39;t gcc devirtualize this function call?", "body": "<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\nstruct Interface {\n    virtual void f() = 0;\n};\n\nstruct Impl1: Interface {\n    void f() override {\n        std::puts(\"foo\");\n    }\n};\n\n// or __attribute__ ((visibility (\"hidden\")))/anonymous namespace\nstatic Interface* const ptr = new Impl1 ;\n\nint main() {\n    ptr-&gt;f();\n}\n</code></pre>\n\n<p>When compiled with g++-7 <code>-O3 -flto -fdevirtualize-at-ltrans -fipa-pta -fuse-linker-plugin</code>, the above <code>ptr-&gt;f()</code> call cannot be devirtualized. </p>\n\n<p>It seems that no external library can modify <code>ptr</code>. Is this a deficiency of GCC optimizer, or because some other sources make devirtualization unavailable in this case?</p>\n\n<p><a href=\"https://godbolt.org/g/HSMuEx\" rel=\"noreferrer\">Godbolt link</a></p>\n\n<p>UPDATE:\nIt seems that <a href=\"https://godbolt.org/g/fuZaU6\" rel=\"noreferrer\">clang-7 with <code>-flto -O3 -fwhole-program-vtables -fvisibility=hidden</code> is the only compiler+flags (as in 2018/03) that can devirtualize this program</a>.</p>\n"}]