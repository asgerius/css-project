[{"tags": ["c++", "nuget-package", "fstream", "jsoncpp"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1532564364, "post_id": 51529167, "comment_id": 90026940, "body": "Which jsoncpp are you using? I see two in NuGet. What is the version?"}, {"owner": {"reputation": 115, "user_id": 6525130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852f33764a179133ae0768cde55d8d7?s=128&d=identicon&r=PG&f=1", "display_name": "shreeya", "link": "https://stackoverflow.com/users/6525130/shreeya"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1532618654, "post_id": 51529167, "comment_id": 90052441, "body": "@RetiredNinja it is jsoncpp version 0.6.0.1"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1532893307, "post_id": 51529167, "comment_id": 90133158, "body": "Try the newer one, 1.8.0 I believe it is. That worked for me, and seems to be a continuation of the one you tried."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 6525130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852f33764a179133ae0768cde55d8d7?s=128&d=identicon&r=PG&f=1", "display_name": "shreeya", "link": "https://stackoverflow.com/users/6525130/shreeya"}, "is_accepted": true, "score": 0, "last_activity_date": 1533318166, "last_edit_date": 1533318166, "creation_date": 1533317717, "answer_id": 51677564, "question_id": 51529167, "link": "https://stackoverflow.com/questions/51529167/getting-an-unresolved-external-symbol-when-using-jsoncpp-nuget-package/51677564#51677564", "title": "Getting an unresolved external symbol when using jsoncpp NuGet package", "body": "<p>The problem was that with the jsoncpp version 0.6.0.1 there is no <code>Json::operator&gt;&gt;</code> function in the reader file, as a result of which I was getting the above error. I replaced <code>rootfile &gt;&gt; root</code> with the following code and that solved my problem.</p>\n\n<pre><code>Json::Reader reader;\nbool ok = reader.parse(rootfile, root, true);\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 6525130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852f33764a179133ae0768cde55d8d7?s=128&d=identicon&r=PG&f=1", "display_name": "shreeya", "link": "https://stackoverflow.com/users/6525130/shreeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 51677564, "answer_count": 1, "score": 0, "last_activity_date": 1533318166, "creation_date": 1532562525, "last_edit_date": 1532618694, "question_id": 51529167, "link": "https://stackoverflow.com/questions/51529167/getting-an-unresolved-external-symbol-when-using-jsoncpp-nuget-package", "title": "Getting an unresolved external symbol when using jsoncpp NuGet package", "body": "<p>I have this simple piece of code where I am using the jsoncpp version 0.6.0.1 NuGet package to read from a json file in VS2013.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include \"json\\json.h\"\nusing namespace std;\n\nJson::Value readJson(){\n    Json::Value root;\n    ifstream rootfile(\"restore.json\");\n    rootfile &gt;&gt; root;\n    return root;\n}\n\nvoid main(){\n\n    Json::Value root = readJson();\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n    system(\"pause\");\n\n}\n</code></pre>\n\n<p>I keep getting the error <code>Error 1   error LNK2019: unresolved external symbol \"class std::basic_istream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __cdecl Json::operator&gt;&gt;(class std::basic_istream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp;,class Json::Value &amp;)\" (??5Json@@YAAAV?$basic_istream@DU?$char_traits@D@std@@@std@@AAV12@AAVValue@0@@Z) referenced in function \"class Json::Value __cdecl readJson(void)\" (?readJson@@YA?AVValue@Json@@XZ)</code></p>\n\n<p>The problem is with the <code>operator&gt;&gt;</code>. So I uncommented <code>rootfile &gt;&gt; root</code> and the error went away. But I do not understand why that line is a problem. I added the jsoncpp.lib and it's path to the linker. I am not sure what part I am missing now.</p>\n"}, {"tags": ["c++", "loops", "keystroke"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1532562235, "post_id": 51529123, "comment_id": 90026524, "body": "Please focus on the <i>MINIMAL</i> portion of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1532562364, "post_id": 51529123, "comment_id": 90026551, "body": "Have you used your debugger or put in <code>cout</code> statements into your <code>timer</code> function so you can follow the logic? What have you observed if so?"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 2, "creation_date": 1532562429, "post_id": 51529123, "comment_id": 90026567, "body": "It&#39;s worth noting you have declared <code>timer</code> to return an <code>int</code> yet it&#39;s currently returning nothing. This is undefined behaviour. You should make sure your warnings are at the highest level possible"}], "answers": [{"tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 3, "last_activity_date": 1532562650, "last_edit_date": 1532562650, "creation_date": 1532562306, "answer_id": 51529136, "question_id": 51529123, "link": "https://stackoverflow.com/questions/51529123/function-timer-prevents-main-from-continuing/51529136#51529136", "title": "Function timer prevents main from continuing", "body": "<pre><code>  while(TRUE)\n    {\n        if(Delay == 28)//Aprox to 1 tic\n        {\n            Delay = 0;//Reset delay to 0\n            Tic ++;//Increase Tic by 1\n        }\n        else\n        {\n            Delay ++;//Increase Delay until it is at 28\n        }\n        Sleep(0.1);\n    }\n</code></pre>\n\n<p>There's no way out of this loop.  Did you mean to put a <code>break</code> in  the <code>if</code> block?  Or maybe <code>while (Delay &gt; 0)</code> (with it initially set to 1).</p>\n\n<p>Also, as mentioned in the comments, if you say a function returns int, you need to make sure it has a return statement on every path.  Maybe instead of a <code>break</code>, you just want to <code>return Tic;</code>?</p>\n"}], "owner": {"reputation": 11, "user_id": 10131263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4b772e23bc80c7954663e692b48044?s=128&d=identicon&r=PG&f=1", "display_name": "Fabysk", "link": "https://stackoverflow.com/users/10131263/fabysk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532562650, "creation_date": 1532562212, "question_id": 51529123, "link": "https://stackoverflow.com/questions/51529123/function-timer-prevents-main-from-continuing", "title": "Function timer prevents main from continuing", "body": "<p>I am new here. Little rusty after my C++ college class. I am trying to make a program where specific keystrokes log the text seen in cout. The problem I am having is that the <strong>timer</strong> function is preventing the <strong>main</strong> function from continuing. The <strong>timer</strong> function is made to increase <strong>Tic</strong> by 1 every time <strong>Delay</strong> reaches 28. <strong>timer</strong> loops and when it reaches 28, <strong>Delay</strong> resets back to 0. Why is it that my <strong>main</strong> is not continuing? Could it be that it is waiting for <strong>timer</strong> to finish looping? How can I make <strong>timer</strong> and <strong>main</strong> work simultaneously? This is not a homework assignment. Making a personal project.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint Tic = 0;\nint Delay = 0;\n\nbool KeyIsListed(int iKey)\n{\nswitch (iKey)\n{\n    case 0x41:\n        cout &lt;&lt; \"ACS_Execute(10,0,0,0,0);\\n\"; //the A Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x53:\n        cout &lt;&lt; \"ACS_Execute(11,0,0,0,0);\\n\"; //the S Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x44:\n        cout &lt;&lt; \"ACS_Execute(12,0,0,0,0);\\n\"; //the D Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x46:\n        cout &lt;&lt; \"ACS_Execute(13,0,0,0,0);\\n\"; //the F Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x47:\n        cout &lt;&lt; \"ACS_Execute(14,0,0,0,0);\\n\"; //the G Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x48:\n        cout &lt;&lt; \"ACS_Execute(15,0,0,0,0);\\n\"; //the H Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x4A:\n        cout &lt;&lt; \"ACS_Execute(16,0,0,0,0);\\n\"; //the J Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x4B:\n        cout &lt;&lt; \"ACS_Execute(17,0,0,0,0);\\n\"; //the K Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    case 0x4C:\n        cout &lt;&lt; \"ACS_Execute(18,0,0,0,0);\\n\"; //the L Note\n        cout &lt;&lt; \"Delay(\"&lt;&lt;Tic&lt;&lt;\");\\n\"; //Capture the time\n        Delay = 0;\n        Tic = 0\n        break;\n    }\n}\n\nint timer()//Doom Tic timer\n{\n    while(TRUE)\n    {\n        if(Delay == 28)//Aprox to 1 tic\n        {\n            Delay = 0;//Reset delay to 0\n            Tic ++;//Increase Tic by 1\n        }\n        else\n        {\n            Delay ++;//Increase Delay until it is at 28\n        }\n        Sleep(0.1);\n    }\n}\n\nint main()\n{\nchar key;\ntimer();//Call timer Function (This is preventing the main function from continuing)\nwhile(TRUE)\n{\n    for(key = 8; key &lt;= 190; key ++)\n    {\n        if(GetAsyncKeyState(key) == 1)\n        {\n            if(KeyIsListed(key) == FALSE)\n            {\n\n            }\n        }\n    }\n\n}\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "qt", "qt5", "qt-designer", "qlabel"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1532563213, "post_id": 51529055, "comment_id": 90026730, "body": "<code>QLabel::setScaledContents(bool)</code> ?"}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1532566739, "post_id": 51529055, "comment_id": 90027343, "body": "@MohammadKanan (<code>ui-&gt;imageLabel-&gt;setScaledContents(true)</code>) Doesn&#39;t work either. Still like in approaches 1. - 4."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1532574044, "post_id": 51529055, "comment_id": 90028780, "body": "If a label is part of a layout its size depends on the size of the widget (or window) to which the layout belongs. So you have to calculate and set the initial size of this widget (or window) instead."}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1532629469, "post_id": 51529055, "comment_id": 90058426, "body": "This may help: <a href=\"https://doc.qt.io/Qt-5/qsizepolicy.html#setHeightForWidth\" rel=\"nofollow noreferrer\"><code>QSizePolicy::setHeightForWidth</code></a>"}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1532712205, "post_id": 51529055, "comment_id": 90092375, "body": "@scopchanov I really think this is a pretty bad idea. There are spaces and borders  between the label and the widget which can change when adding other widgets or changing the spaces, alignment and other things. Adding a calculation for the belonging widget (not the label) would be inconvenient."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1532734687, "post_id": 51529055, "comment_id": 90100139, "body": "@goulashsoup, it is not an idea. I&#39;ve mentioned a fact."}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "edited": false, "score": 0, "creation_date": 1532872263, "post_id": 51529055, "comment_id": 90127245, "body": "@eyllanesc I only had time to get back to it just now. Your soultion works. Thx."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1532574130, "creation_date": 1532574130, "answer_id": 51530375, "question_id": 51529055, "link": "https://stackoverflow.com/questions/51529055/qt-qlabel-wont-resize-with-fixed-ratio/51530375#51530375", "title": "Qt - QLabel won&#39;t resize with fixed ratio", "body": "<p>A possible solution is to install an eventFilter to the centralwidget so doing the required calculation is set the size.</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    ui-&gt;centralWidget-&gt;installEventFilter(this);\n    ui-&gt;imageLabel-&gt;setPixmap(QPixmap(\":/image.png\"));\n    ui-&gt;imageLabel-&gt;setScaledContents(true);\n}\n\nbool MainWindow::eventFilter(QObject *watched, QEvent *event)\n{\n    const float ratio = 1.25;\n    if(watched == ui-&gt;centralWidget &amp;&amp; event-&gt;type() == QEvent::Resize\n            &amp;&amp; ui-&gt;centralWidget-&gt;width() &gt; 0\n            &amp;&amp; ui-&gt;centralWidget-&gt;height() &gt; 0){\n        float central_ratio = 1.0*ui-&gt;centralWidget-&gt;width()/ui-&gt;centralWidget-&gt;height();        QSize s;\n        if(central_ratio &gt; ratio){\n            s = QSize(ratio*ui-&gt;centralWidget-&gt;height(), ui-&gt;centralWidget-&gt;height());\n        }\n        else{\n            s = QSize(ui-&gt;centralWidget-&gt;width(), ui-&gt;centralWidget-&gt;width()/ratio);\n        }\n        ui-&gt;imageLabel-&gt;resize(s);\n    }\n    return QMainWindow::eventFilter(watched, event);\n}\n</code></pre>\n"}], "owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 0, "accepted_answer_id": 51530375, "answer_count": 1, "score": 1, "last_activity_date": 1532574130, "creation_date": 1532561607, "last_edit_date": 1592644375, "question_id": 51529055, "link": "https://stackoverflow.com/questions/51529055/qt-qlabel-wont-resize-with-fixed-ratio", "title": "Qt - QLabel won&#39;t resize with fixed ratio", "body": "<h3>Introduction</h3>\n<p>I am working with the Designer inside the Qt Creator and have a <code>QMainWindow</code> with a <code>QLabel</code> in it. Because the program loads pictures and displays them inside the label i want that the label resizes with a ratio of 1.25 inside setted boundaries when expanding or shrinking the <code>QMainWindow</code>. The label should resize INDEPENDENT, again INDEPENDENT from its content.</p>\n<p>What i want:</p>\n<ul>\n<li>Open the main window for first time:<br>\nwidth: 640, height: 512</li>\n<li>Shrinking the main window:<br>\nlabel shrinks with constant ratio (640/512) till minimum size (320 x 256)</li>\n<li>Expanding the main window:<br>\nlabel expands with constant ratio (640/512) till maximum size (1280 x 1024)</li>\n</ul>\n<h3>1. Approach:</h3>\n<p>Therefor i...</p>\n<ul>\n<li>added a <code>QLabel</code>(called <code>imageLabel</code>) inside the <code>centralWidget</code> of the <code>QMainWindow</code></li>\n<li>set the <code>centralWidget</code>'s layout to grid layout (<code>QGridLayout</code>)</li>\n<li>sed the following properties to the <code>QLabel</code>:\n<ul>\n<li>geometry - Can not set the values because of grid layout usages!</li>\n<li>minimumSize &gt; width: 320, height: 256 (Minimum values)</li>\n<li>maximumSize &gt; width: 1280, height: 1024 (Maximum values)</li>\n<li>sizePolicy &gt; Horizontal Policy == Vertical Policy == Expanding</li>\n</ul>\n</li>\n</ul>\n<p>Element structure:</p>\n<p><a href=\"https://i.stack.imgur.com/9U48w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9U48w.png\" alt=\"Initial Element structure\" /></a></p>\n<p>This doesn't work because i can not set an initial size in the 'geometry' section. The label does not scale with fixed ratio although it respects minimum and maximum values.</p>\n<h3>2. Approach:</h3>\n<p>Following <a href=\"https://stackoverflow.com/a/8212120/5233188\">that</a> answer i set an initial pixmap:</p>\n<pre><code>QPixmap p;\nui-&gt;imageLabel-&gt;setPixmap(p.scaled(640, 512, Qt::KeepAspectRatio));\n</code></pre>\n<p>Which didn't change anything.</p>\n<h3>3. Approach:</h3>\n<p>I also applied the other <a href=\"https://stackoverflow.com/a/22618496/5233188\">answer</a>'s class and promoted it to the widget:</p>\n<p><a href=\"https://i.stack.imgur.com/txCWZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/txCWZ.png\" alt=\"Structure after promoting 'AspectRatioPixmapLabel' class\" /></a></p>\n<p>That didn't change anything too.</p>\n<h3>4. Approach:</h3>\n<p>I then combined the 2. and 3. approach and set an initial pixmap which...</p>\n<p>...didn't change anything.</p>\n<p>Here is what it does for the approaches 1. - 4.:</p>\n<p><a href=\"https://i.stack.imgur.com/B4Byh.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4Byh.gif\" alt=\"Approaches 1. - 4. - It's all the same\" /></a></p>\n<h3>5. Approach</h3>\n<p>Adding the label of 4. approach into a widget:</p>\n<p><a href=\"https://i.stack.imgur.com/KKH01.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KKH01.png\" alt=\"5. approach element structure\" /></a></p>\n<p>Well the label doesn't resize at all:</p>\n<p><a href=\"https://i.stack.imgur.com/TC5tz.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TC5tz.gif\" alt=\"5. approach result\" /></a></p>\n<p>So, how can get the label to have an initial size of 640 x 512 and scale with fixed ratio between 1280 x 1024 and 320 x 256 ?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 4, "creation_date": 1532561761, "post_id": 51529052, "comment_id": 90026428, "body": "What do you expect <code>cout &lt;&lt; *this</code> to do? Why do you have output statements in an assignment operator in the first place?"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1532562614, "post_id": 51529052, "comment_id": 90026606, "body": "He&#39;s most likely using those for debugging purposes... I think."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1532563365, "post_id": 51529052, "comment_id": 90026754, "body": "Semi-related: <code>CarCounter</code> meets the requirements for <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">the Rule of Zero</a>. There is no need for an assignment operator. You can leave it out or declare it in the class as <code>CarCounter&amp; operator=(const CarCounter&amp; objToCopy) = default;</code> to make it clear that the class uses the default assignment logic."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1532563400, "post_id": 51529052, "comment_id": 90026763, "body": "How is the compiler supposed to know how to print a <code>CarCounter</code>? If you want to be able directly use the <code>&lt;&lt;</code> operator with a <code>CarCounter</code>, you&#39;re going to need to tell the compiler how you want the object to be printed by overloading the operator for your class."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1532567186, "post_id": 51529052, "comment_id": 90027410, "body": "Please give your question a more descriptive title. Almost all questions are about how to fix an issue, so that&#39;s useless."}, {"owner": {"reputation": 21, "user_id": 6716343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd4a9974e84f92de68a598e1e5615b9?s=128&d=identicon&r=PG&f=1", "display_name": "jBit", "link": "https://stackoverflow.com/users/6716343/jbit"}, "edited": false, "score": 0, "creation_date": 1532569179, "post_id": 51529052, "comment_id": 90027795, "body": "Sorry about the nondescript title; didn&#39;t quite know what to name it. Yes, I was trying to use cout for debugging (working on an assignment in a lousy web-ide and can&#39;t debug)."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1532575867, "post_id": 51529052, "comment_id": 90029081, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2981836/how-can-i-use-cout-myclass\">How can I use cout &lt;&lt; myclass</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6716343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd4a9974e84f92de68a598e1e5615b9?s=128&d=identicon&r=PG&f=1", "display_name": "jBit", "link": "https://stackoverflow.com/users/6716343/jbit"}, "edited": false, "score": 0, "creation_date": 1532569253, "post_id": 51529092, "comment_id": 90027805, "body": "Thank you for clarifying. I marked the other one as the answer, but this actually explained why."}], "tags": [], "owner": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "is_accepted": false, "score": 1, "last_activity_date": 1532561952, "creation_date": 1532561952, "answer_id": 51529092, "question_id": 51529052, "link": "https://stackoverflow.com/questions/51529052/how-to-pass-a-custom-class-to-stdcout/51529092#51529092", "title": "How to pass a custom class to std::cout?", "body": "<p>You can't pass your custom class to <code>cout</code>. The error is basically saying that your class <code>CarCounter</code> is incompatible to be piped to <code>cout</code>. It seems like that line is completely unneeded and can be removed.</p>\n"}, {"tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": true, "score": 1, "last_activity_date": 1532562245, "creation_date": 1532562245, "answer_id": 51529129, "question_id": 51529052, "link": "https://stackoverflow.com/questions/51529052/how-to-pass-a-custom-class-to-stdcout/51529129#51529129", "title": "How to pass a custom class to std::cout?", "body": "<p>Your copy assignment operator should look like this:</p>\n\n<pre><code>CarCounter&amp; CarCounter::operator=(const CarCounter&amp; objToCopy) {\n   carCount = objToCopy.carCount;\n   return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6716343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd4a9974e84f92de68a598e1e5615b9?s=128&d=identicon&r=PG&f=1", "display_name": "jBit", "link": "https://stackoverflow.com/users/6716343/jbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1947, "favorite_count": 0, "accepted_answer_id": 51529129, "answer_count": 2, "score": -6, "last_activity_date": 1538676304, "creation_date": 1532561578, "last_edit_date": 1538676304, "question_id": 51529052, "link": "https://stackoverflow.com/questions/51529052/how-to-pass-a-custom-class-to-stdcout", "title": "How to pass a custom class to std::cout?", "body": "<p>I am trying to write a C++ Program, but am greatly struggling with the copy assignment section. Here's my code:  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass CarCounter {\n   public:\n      CarCounter();\n      CarCounter&amp; operator=(const CarCounter&amp; objToCopy);\n      void SetCarCount(const int setVal) {\n         carCount = setVal;\n      }\n      int GetCarCount() const {\n         return carCount;\n      }\n   private:\n      int carCount;\n};\n\nCarCounter::CarCounter() {\n   carCount = 0;\n}\n\n// FIXME write copy assignment operator\n\n/* Your solution goes here  */\nCarCounter&amp; CarCounter::operator=(const CarCounter&amp; objToCopy) {\n   CarCounter nobj;\n   cout &lt;&lt; objToCopy.carCount &lt;&lt; endl;\n   nobj.carCount =  objToCopy.carCount;\n   cout &lt;&lt; nobj.carCount &lt;&lt; endl;\n   cout &lt;&lt; *this &lt;&lt; endl;\n   return *this;\n}\n\nint main() {\n   CarCounter frontParkingLot;\n   CarCounter backParkingLot;\n\n   frontParkingLot.SetCarCount(12);\n   backParkingLot = frontParkingLot;\n\n   cout &lt;&lt; \"Cars counted: \" &lt;&lt; backParkingLot.GetCarCount();\n\n   return 0;\n}\n</code></pre>\n\n<p>And the output is:  </p>\n\n<blockquote>\n  <p>main.cpp: In member function \u2018CarCounter&amp; CarCounter::operator=(const\n  CarCounter&amp;)\u2019: main.cpp:30:9: error: no match for \u2018operator&lt;&lt;\u2019\n  (operand types are \u2018std::ostream {aka std::basic_ostream}\u2019 and\n  \u2018CarCounter\u2019)\n      cout &lt;&lt; *this &lt;&lt; endl;</p>\n</blockquote>\n\n<p>I know it's probably an obvious rookie mistake, but I'm new to C++. I appreciate all the help I can get. Thanks!</p>\n"}, {"tags": ["c++", "macros", "visual-studio-2017", "resources"], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1532560867, "creation_date": 1532560867, "answer_id": 51528961, "question_id": 51528922, "link": "https://stackoverflow.com/questions/51528922/modifying-originalfilename-string-according-to-platform-target/51528961#51528961", "title": "Modifying OriginalFilename string according to platform target", "body": "<p>Resources are compiled with separate resource compiler tool. This tool has separate set of preprocessor defines that can be adjusted at Project Properties -> Resources -> General tab. By default target-specific macros such as <code>_M_X64</code> (that are defined by C++ compiler) are not defined for resource compiler so you'll need to supply them manually.</p>\n"}], "owner": {"reputation": 143, "user_id": 5752858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6124afa09bfbeec7be1d9a2b2efc3750?s=128&d=identicon&r=PG&f=1", "display_name": "user5752858", "link": "https://stackoverflow.com/users/5752858/user5752858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51528961, "answer_count": 1, "score": 0, "last_activity_date": 1532560867, "creation_date": 1532560569, "question_id": 51528922, "link": "https://stackoverflow.com/questions/51528922/modifying-originalfilename-string-according-to-platform-target", "title": "Modifying OriginalFilename string according to platform target", "body": "<p>I have a standard C++ console application built with Visual Studio 2017. I added a <strong>VS_VERSION_INFO resource</strong> by right-clicking on project name and then choosing Add, Resource, Version. I would like to set the <strong>OriginalFilename</strong> string to be <strong>MyProject.x86</strong> <strong>when</strong> I build the project <strong>targeting x86</strong> and <strong>MyProject.x64</strong> <strong>when</strong> I build <strong>targeting x64</strong>. I tried editing the automatically produced .rc file with Notepad but I always obtain that string to be \"Nothing_is_defined\"</p>\n\n<pre><code>#ifdef _M_X64 // Building to x64\n            VALUE \"OriginalFilename\", \"Setup.x64\"\n#elif _M_IX86 // Building to x86\n            VALUE \"OriginalFilename\", \"Setup.x86\"\n#else\n            VALUE \"OriginalFilename\", \"Nothing_is_defined\"\n#endif\n</code></pre>\n\n<p>What should I do to change that string according to platform target?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1532559613, "post_id": 51528751, "comment_id": 90026011, "body": "As you know, <code>strcat()</code> appends to an existing <code>\\0</code>-terminated string. Please point out the specific line in your code which makes sure that the string that&#39;s being <code>strcat</code>-ed to is<code>\\0</code>l-terminated. Additionally, it would be a good idea to work out with paper and pencil what happens when <code>size</code> is, say, 2, and <code>inputHex</code> is &quot;deadbeef&quot; (which is a valid hexadecimal number)."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 4, "creation_date": 1532559953, "post_id": 51528751, "comment_id": 90026090, "body": "Why are you torturing yourself with C-style strings in C++? You can make your life 10 times easier by using <code>std::string</code>. Chances are that your problem will be fixed if you used <code>std::string</code> everywhere instead of C-style strings."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1532560113, "post_id": 51528751, "comment_id": 90026121, "body": "If you have numbers instead of strings, and if you&#39;re okay with C, <code>printf</code> or <code>sprintf</code> will do what you want.  Use the format specifier <code>%#0*x</code> and pass it your length and the number you want to print, like this: <code>printf(&quot;%#0*x\\n&quot;, len+2, num)</code>.  (Or if <code>num</code> is a <code>long int</code>, use <code>%#0*lx</code>.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "edited": false, "score": 1, "creation_date": 1532560657, "post_id": 51528751, "comment_id": 90026217, "body": "Am ok with std::string. If someone can help!"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1532561429, "post_id": 51528751, "comment_id": 90026354, "body": "@DonK &quot;Working with C++ on Visual Studio 2010.&quot; you do have a calendar at hand, do you?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1532562251, "post_id": 51528751, "comment_id": 90026526, "body": "Not a bad compiler and it comes free with the Windows_SDK for win7, provides the Developer Command Prompt and installs in much less that 1G compared to VS Community which is a minimum 7G install to get the Developer Command Prompt <code>:)</code> (but you can forget about auto-ranged <code>for</code> loops and the other niceties from this century)"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1532562806, "post_id": 51528751, "comment_id": 90026646, "body": "@DavidC.Rankin &quot;from this century&quot; thats my point ;)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1532563211, "post_id": 51528751, "comment_id": 90026728, "body": "Oh I know, I was just teasing a little bit. I throw in on the VMs I have just to avoid the full VS install. The C++ compiler (absent the lack of features) isn&#39;t nearly as much &quot;fun&quot; as the C89 aspect of it. That&#39;s when things can get really painful..."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1532563848, "post_id": 51528751, "comment_id": 90026840, "body": "@DavidC.Rankin &quot;was just teasing a little bit&quot; Oh, ... you naughty playful thing! ;p"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "edited": false, "score": 0, "creation_date": 1532563319, "post_id": 51528986, "comment_id": 90026745, "body": "Am getting following errors for this code.  error C2734: &#39;input_len&#39; : const object must be initialized if not extern   error C2601: &#39;input_len&#39; : local function definitions are illegal  And many more too.."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1532563747, "post_id": 51528986, "comment_id": 90026824, "body": "@Don K I edited my answer to avoid everything I expect VS2010 not to swallow. If there are still error please be more specific instead of &quot;many more too.&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "edited": false, "score": 0, "creation_date": 1532566299, "post_id": 51528986, "comment_id": 90027260, "body": "That code works! Now the problem is, i cannot change arguments to my original function as this function is called from a different application. Please see UPDATED section of my original question."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1532566986, "post_id": 51528986, "comment_id": 90027376, "body": "@DonK I&#39;ve updated the answer to accommodate your updated question."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1532567279, "last_edit_date": 1532567279, "creation_date": 1532561127, "answer_id": 51528986, "question_id": 51528751, "link": "https://stackoverflow.com/questions/51528751/c-format-string-containing-hex-value/51528986#51528986", "title": "C++: Format String Containing Hex Value", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;cstddef&gt;\n\nstd::string formatHexString(std::string const &amp; input, std::size_t size = 0)\n{\n    std::size_t const input_len(input.length());\n\n    // always round up to an even count of digits if no size is specified\n    // or size would cause the output to be truncated\n    if (!size || (size * 2 &lt; input_len))\n        size = input_len / 2 + input_len % 2;\n\n    std::stringstream ss;\n    ss &lt;&lt; \"0x\" &lt;&lt; std::setw(2 * size) &lt;&lt; std::setfill('0') &lt;&lt; input;\n    return ss.str();\n}\n\nint main()\n{\n    std::cout &lt;&lt; formatHexString(   \"23\") &lt;&lt; '\\n'\n              &lt;&lt; formatHexString(   \"A3\", 2) &lt;&lt; '\\n'\n              &lt;&lt; formatHexString( \"AA23\", 4) &lt;&lt; '\\n'\n              &lt;&lt; formatHexString( \"7723\", 4) &lt;&lt; '\\n'\n              &lt;&lt; formatHexString(\"AA023\", 4) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<h2>Solution without <code>std::stringstream</code>:</h2>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;cstddef&gt;\n\nstd::string formatHexString(std::string const &amp; input, std::size_t size = 0)\n{\n    std::size_t const input_len(input.length());\n\n    // always round up to an even count of digits if no size is specified\n    // or size would cause the output to be truncated\n    if (!size || (size * 2 &lt; input_len))\n        size = input_len / 2 + input_len % 2;\n\n    std::string result(\"0x\");\n\n    for (std::size_t i = 0, leading_zeros = size * 2 - input_len; i &lt; leading_zeros; ++i)\n        result += '0';\n\n    result += input;\n    return result;\n}\n</code></pre>\n\n<h2>Updated:</h2>\n\n<pre><code>#define  _CRT_SECURE_NO_WARNINGS\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n#include &lt;cstddef&gt;\n#include &lt;cstdio&gt;\n\nvoid formatHexString(char const * inputHex, int size, char * outputFormattedHex)\n{\n    int const input_len(std::strlen(inputHex));\n\n    if (!size || (size * 2 &lt; input_len))\n        size = input_len / 2 + input_len % 2;\n\n    std::stringstream ss;\n    ss &lt;&lt; \"0x\" &lt;&lt; std::setw(2 * size) &lt;&lt; std::setfill('0') &lt;&lt; inputHex;\n    std::strcpy(outputFormattedHex, ss.str().c_str());\n}\n\nint main()\n{\n    char output[24];\n    formatHexString(\"23\", 1, output);\n    std::cout &lt;&lt; output &lt;&lt; '\\n';\n\n    formatHexString(\"A3\", 2, output);\n    std::cout &lt;&lt; output &lt;&lt; '\\n';\n\n    formatHexString(\"0AA23\", 4, output);\n    std::cout &lt;&lt; output &lt;&lt; '\\n';\n\n    formatHexString(\"7723\", 4, output);\n    std::cout &lt;&lt; output &lt;&lt; '\\n';\n\n    formatHexString(\"AA023\", 4, output);\n    std::cout &lt;&lt; output &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1812, "user_id": 706055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59587d800e072afcecf5dfe8bc374957?s=128&d=identicon&r=PG&f=1", "display_name": "Amit G.", "link": "https://stackoverflow.com/users/706055/amit-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1532617120, "last_edit_date": 1532617120, "creation_date": 1532569726, "answer_id": 51529848, "question_id": 51528751, "link": "https://stackoverflow.com/questions/51528751/c-format-string-containing-hex-value/51529848#51529848", "title": "C++: Format String Containing Hex Value", "body": "<p>It is unclear from your question, what you expect to happen with leading zeros on the input: I.e. either input \"00000000EA\" Size 2 turns to \"00EA\", or it keeps all its leading zeros. </p>\n\n<p>This simple solution is for both cases (bTrim = true, for the 1st case):</p>\n\n<pre><code>#include &lt;string&gt;\n\nvoid formatHexString(std::string &amp; strHex, unsigned int nSize, bool bTrim = true) \n{\n    if (bTrim) // Trim leading-zeros:\n        strHex = strHex.substr(strHex.find_first_not_of('0'));\n\n    if (nSize &gt; strHex.length()) // Pad with leading-zeros to fit nSize:\n        strHex.insert(0, std::string(nSize - strHex.length(), '0').c_str());\n\n    strHex.insert(0, \"0x\"); // Insert prefix\n}\n</code></pre>\n\n<p>-</p>\n\n<p>If it's important to keep the original signature, wrap the above <code>formatHexString</code> with:</p>\n\n<pre><code>void formatHexString(char* inputHex, int size, char* outputFormattedHex)\n{\n    std::string strHex(inputHex);\n    formatHexString(strHex, size * 2);\n    strcpy_s(outputFormattedHex, strHex.length()+1, strHex.c_str()); // Visual Studio\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 51528986, "answer_count": 2, "score": 1, "last_activity_date": 1532617120, "creation_date": 1532559277, "last_edit_date": 1532566239, "question_id": 51528751, "link": "https://stackoverflow.com/questions/51528751/c-format-string-containing-hex-value", "title": "C++: Format String Containing Hex Value", "body": "<p>Working with C++ on Visual Studio 2010.</p>\n\n<p>Trying to come up with a robust function that will take a hex value as string and size as integer and then output the formatted hex value.</p>\n\n<p>For e.g., </p>\n\n<p>If the input string is \"A2\" and size is 1, then the output is \"0xA2\"</p>\n\n<p>If the input string is \"800\" and size is 2, then the output is \"0x0800\"</p>\n\n<p>If the input string is \"DEF\" and size is 4, then the output is \"0x00000DEF\"</p>\n\n<p>If the input string is \"00775\" and size is 4, then the output is \"0x00000775\"</p>\n\n<p>If the input string is \"FB600\" and size is 3, then the output is \"0x0FB600\"</p>\n\n<p>The basic idea is, multiply size by 2 and then if the string length is less than that, then add leading zeros to the hex value and then append it with \"0x\". </p>\n\n<p>\"0x\" is appended irrespective of whether leading zeros are added.</p>\n\n<p>As you see in 1st example, there's no zeros to add as the string already contains 2 characters.</p>\n\n<p>I came up with below function, but it's having memory corruption. Also when i try to process large amount of data by calling this function few hundrend times, it crashes. Seems my logic has memory holes in it.</p>\n\n<p>So am hoping that someone can come up with a robust intelligent code for this function.</p>\n\n<p><strong>What i tried:</strong></p>\n\n<pre><code>void formatHexString(char* inputHex, int size, char* outputFormattedHex)\n{\n    int len = size * 2;\n    int diff = len - strlen(inputHex);\n    char * tempHex = new char [diff + 2]; //\"2\" is for holding \"0x\"\n    tempHex[0] = '0';\n    tempHex[1] = 'x';\n\n    if (len &gt; strlen(inputHex))\n    {\n\n        for (int i = 2; i &lt; ((len - strlen(inputHex)) + 2); i++)\n        {\n            tempHex[i] = '0';\n\n        }\n\n    }\n\n    strcat(tempHex, inputHex);\n    sprintf(outputFormattedHex, \"%s\", tempHex);\n\n    delete [] tempHex;\n\n    cout &lt;&lt;outputFormattedHex &lt;&lt;endl;\n}\n\n\nint main \n{\n    char bbb1[24];\n    formatHexString(\"23\", 1, bbb1);\n    char bbb2[24];\n    formatHexString(\"A3\", 2, bbb2);\n    char bbb3[24];\n    formatHexString(\"0AA23\", 4, bbb3);\n    char bbb4[24];\n    formatHexString(\"7723\", 4, bbb4);\n    char bbb5[24];\n    formatHexString(\"AA023\", 4, bbb5);\n    return 0;\n}\n</code></pre>\n\n<p><strong>UPDATED:</strong></p>\n\n<p>I cannot modify the arguments to original function as this function is called from a different application. So i modified my original function with your code, but this is not working. Any ideas?</p>\n\n<pre><code>void formatHexString(char* inputHex, int size, char* outputFormattedHex)\n{\n    string input(inputHex);\n    std::size_t const input_len(input.length());\n\n    if (!size || (size * 2 &lt; input_len))\n        size = input_len / 2 + input_len % 2;\n\n    std::stringstream ss;\n    ss &lt;&lt; \"0x\" &lt;&lt; std::setw(2 * size) &lt;&lt; std::setfill('0') &lt;&lt; input;\n    sprintf(outputFormattedHex, \"%s\", ss.str());\n}\n</code></pre>\n"}, {"tags": ["c++", ".net", "opencv", "unity3d", "tcp"], "comments": [{"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1532560553, "post_id": 51528750, "comment_id": 90026202, "body": "I have many questions. How are you loading the image from C++? Are you running the socket code in the main Thread?  How do you resize the image? If you really don&#39;t show the relevant code to these questions then it&#39;s impossible to help you since we can&#39;t tell what&#39;s causing it to slow down."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1532561068, "post_id": 51528750, "comment_id": 90026299, "body": "Hey programmer, I am using your code for TCP data transfer by the way. I couldn&#39;t ask questions on that thread because I don&#39;t have enough rep. The thread I am talking about is here: <a href=\"https://stackoverflow.com/questions/42717713/unity-live-video-streaming\" title=\"unity live video streaming\">stackoverflow.com/questions/42717713/unity-live-video-stream&zwnj;&#8203;ing</a>. What do you mean by loading the image from C++? The image stored in a intptr on C++ then Marshal back into C#. I am displaying the image onto the texture with GPU like this tutorial: <a href=\"https://docs.unity3d.com/Manual/NativePluginInterface.html\" rel=\"nofollow noreferrer\">docs.unity3d.com/Manual/NativePluginInterface.html</a>"}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 1, "creation_date": 1532561158, "post_id": 51528750, "comment_id": 90026312, "body": "But since you&#39;re using Opencv::Mat to obtain the camera data, most of the things in the code are now different...Note that I am compressing to jpeg to reduce the size before sending. It looks like you&#39;re using GZipStream. At this point, I can&#39;t tell what changed much until I see part of the code"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1532562084, "post_id": 51528750, "comment_id": 90026491, "body": "In my C++ I just have a function that gets the image and pass it back to C# with a pointer <a href=\"http://codepad.org/r1etRmPE\" rel=\"nofollow noreferrer\">codepad.org/r1etRmPE</a>. The TCP transfer code is pretty much the same other than using gzipstream to compress. Here is the example of the server <a href=\"http://codepad.org/Lkh0WjjS\" rel=\"nofollow noreferrer\">codepad.org/Lkh0WjjS</a>. Once the client receives the image, it will call back to a DLL function to render the image to a registered texture2d."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1532716406, "post_id": 51528750, "comment_id": 90094345, "body": "I am trying out zlib compression in C++. I think doing compression and decompression will be much faster in DLL than doing it in C#. Do you think this should be done in another thread?"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1532717091, "post_id": 51528750, "comment_id": 90094668, "body": "Should I not be using OpenCV for this task? and just grab the texture once it is rendered then send over to client after encoded in JPEG? The thing is I also require packing a depth map later to the image. I was thinking about replacing the alpha channel with the depth map."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1532717860, "post_id": 51528750, "comment_id": 90094921, "body": "I am not making a commercial app but just a demo app to try out remote assistant AR app. I will definitely try out this and get back to you with the result. Thanks for your help!"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1533924029, "post_id": 51528750, "comment_id": 90541013, "body": "Hey Programmer, I was able to do the above and get the image back into Unity. The performance is very good and lag is minimal. Compared with Skype video speed it is still about 10x more but it is good enough for my project. I guess that&#39;s why they make the big bucks :P"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1533926036, "post_id": 51528750, "comment_id": 90541926, "body": "All of the UDP and image reading parts of the code is in C++ now and that&#39;s why I can get it to 10x. I think #1 is pretty easy to do but #2 is definitely a lot more challenging... How to send part of the frame and having the receiver know where that piece belongs. I will have to research this a bit."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1533926264, "post_id": 51528750, "comment_id": 90542035, "body": "Oh great. Yeah I am still not super familiar with OpenCV. I will definitely start looking there. Thanks a lot for your help! Will report back results soon :) Oh BTW, doesn&#39;t solving #2 basically solves #1 as well?"}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1533927453, "post_id": 51528750, "comment_id": 90542582, "body": "<i>&quot;Oh BTW, doesn&#39;t solving #2 basically solves #1 as well?&quot;</i> Yes. I mentioned #2 so that if you can&#39;t do #2, you will stick with #1 since that&#39;s easier. #2 is much better and should be used when necessary. If you can do #2, don&#39;t worry about #1."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1533927783, "post_id": 51528750, "comment_id": 90542742, "body": "Thanks, I will attempt #2 first and see how it goes."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1533928143, "post_id": 51528750, "comment_id": 90542921, "body": "Good luck and you&#39;re welcome. Let me know how it goes when you ever finish."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534194339, "post_id": 51528750, "comment_id": 90615443, "body": "Hello Programmer, I was able to grab and show each of the contours with OpenCV. These contours have x,y,w,h. I should be able to grab all the pixels of each contour then writing them to buffer but I feel like this may not be that efficient. I debugged that sometimes the sizes of these frames are larger than the whole encoded JPG if each pixel is a byte. Should I be encoding these frames into a single JPG or compressing the buffer some other way?"}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 1, "creation_date": 1534241861, "post_id": 51528750, "comment_id": 90631121, "body": "For now, for simplicity, use JPG. You can use other advanced encoding later on once you get it working. Once you extract the pixel that changed, encode to JPG. Send the JPG with the x,y,w,h. Once you receive it, retrieve the x,y,w,h then the JPG array. Create <code>cv:Mat</code> then <b><a href=\"https://stackoverflow.com/a/50302473/3785314\">load</a></b> the received JPG to it. Use <code>Mat.copyTo</code> to copy the new mat to the old frame. You will need to use <code>cv::Rect</code> to specify which part of the image to be copied. The <code>cv::Rect</code> should be created from the received x,y,w,h."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 1, "creation_date": 1534243022, "post_id": 51528750, "comment_id": 90631741, "body": "You can find the example for copying or updating the frame <a href=\"http://answers.opencv.org/question/58414/how-to-replace-part-of-the-image-with-another-image-roi/?answer=58417#post-id-58417\" rel=\"nofollow noreferrer\">here</a>. Note that when sending x,y,w,h with the JPG,it would be easier to create a class to hold them then serialize them. On the other side just de-serialize them. Don&#39;t use json. Just binary serializing.See <a href=\"https://stackoverflow.com/a/44816991/3785314\">this</a> post for more info on how to do this in C++. When you run into issues,make sure to debug the x,y,w,h and verify that you&#39;re receiving the correct values"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534285271, "post_id": 51528750, "comment_id": 90654252, "body": "Very helpful! I was able to extract the pixels and tested the output. Though I think currently there is too much noise so I am creating too many contours. Working on serializing it right now. Do you think the each serialized object can be transferred one by one or should I pack them up before sending them?"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534285880, "post_id": 51528750, "comment_id": 90654398, "body": "There seems to be a lot of variables that need to be tweaked... It is very slow to extract and update the parts that have changed."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534286421, "post_id": 51528750, "comment_id": 90654527, "body": "How slow? Use a timer to time extracting it. Use another timer to time updating it. Do this for only one frame only. Let me know the outcome result"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534288326, "post_id": 51528750, "comment_id": 90654948, "body": "It takes about 3-4 milli seconds to do both crop and copyTo per frame. It doesn&#39;t seem that much even if you multiply this by 30 frames. But the resulting image looks like this: <a href=\"http://i1376.photobucket.com/albums/ah18/email2jie/FrameUpdate_zpsr69a2dmx.jpg\" rel=\"nofollow noreferrer\">i1376.photobucket.com/albums/ah18/email2jie/&hellip;</a> The code for it is here <a href=\"http://codepad.org/exVxvf3o\" rel=\"nofollow noreferrer\">codepad.org/exVxvf3o</a>."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534289585, "post_id": 51528750, "comment_id": 90655208, "body": "You&#39;re on the right track. Unfortunately, I don&#39;t have enough time to do this to see why it&#39;s behaving like that. I suggest you put the code that extracts the image into a function then the code that re-assembles it back into frame into another function then create a question with that code. Make sure to explain that you want to be able to extract a changed pixel and use it to update another image. I think that many people can help you or even provide better ideas on how to accomplish this with OpenCV"}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534289747, "post_id": 51528750, "comment_id": 90655236, "body": "By the way,  3-4 milli seconds is not bad. You can improve that later on. Just focus on getting it to work for now.  Another thing I suggest you do is to check if % amount of pixel changed. If the percent is too much or within some threshold, send the complete frame instead. I think that should fix the problem in the image issue you uploaded."}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534289976, "post_id": 51528750, "comment_id": 90655278, "body": "I have tried that already. I had a check to see if contours.size() is a certain size. I removed it to test the speed of the whole thing. It helped but didn&#39;t fix the issue. I feel like the threshold isn&#39;t giving all the correct changed spots."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534290340, "post_id": 51528750, "comment_id": 90655353, "body": "<i>&quot;I feel like the threshold isn&#39;t giving all the correct changed spots.&quot;</i> This is what I suspect too.Another possible issue is that the pixel are not being positioned where they are supposed to. Although it look like what you said. I do think you need to change the way you&#39;re detecting the image pixels. That&#39;s mostly the issue. Have you tried saving each individual pixel detected and comparing them?"}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 1, "creation_date": 1534290489, "post_id": 51528750, "comment_id": 90655378, "body": "I suggest you take a camera, take a picture of a table, put two items on the table then take another picture. Make sure to use a camera stand to take the picture from one position. Use these two pictures to test your code. This will help you troubleshoot your code. It will help you show which part is failing. You can use <code>imshow</code> to see if your pixel change detector code is working properly. Add more items to the table until you run into issues. This is better than using the camera to test this"}, {"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "reply_to_user": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534290826, "post_id": 51528750, "comment_id": 90655436, "body": "Maybe I should just take two static images to test with instead of using live video."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1534291003, "post_id": 51528750, "comment_id": 90655458, "body": "That&#39;s what I meant."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "edited": false, "score": 0, "creation_date": 1533923625, "post_id": 51564977, "comment_id": 90540850, "body": "For anyone wanting to use this for windows, you will have to link Ws2_32.lib and use winsock2.h in PracticalSocket.cpp instead."}], "tags": [], "owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "is_accepted": true, "score": 1, "last_activity_date": 1532722603, "creation_date": 1532722603, "answer_id": 51564977, "question_id": 51528750, "link": "https://stackoverflow.com/questions/51528750/hd-video-calling-in-unity3d/51564977#51564977", "title": "HD Video Calling in Unity3D", "body": "<p>I found a link that may be very useful to anyone working on something similar. <a href=\"https://www.cs.utexas.edu/~teammco/misc/udp_video/\" rel=\"nofollow noreferrer\">https://www.cs.utexas.edu/~teammco/misc/udp_video/</a>\n<a href=\"https://github.com/chenxiaoqino/udp-image-streaming/\" rel=\"nofollow noreferrer\">https://github.com/chenxiaoqino/udp-image-streaming/</a></p>\n"}], "owner": {"reputation": 21, "user_id": 7398251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lfrj86eg1Is/AAAAAAAAAAI/AAAAAAAAJA4/tK5E6OY8VJo/photo.jpg?sz=128", "display_name": "Jie Wei", "link": "https://stackoverflow.com/users/7398251/jie-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 2, "accepted_answer_id": 51564977, "answer_count": 1, "score": 1, "last_activity_date": 1532722603, "creation_date": 1532559267, "question_id": 51528750, "link": "https://stackoverflow.com/questions/51528750/hd-video-calling-in-unity3d", "title": "HD Video Calling in Unity3D", "body": "<p>I am an amateur in video/image processing but I am trying to create an app for HD video calling. I hope someone would see where I may be doing wrong and guide me on the right path. Here is what I am doing and what I think I understand, please correct me if you know better.</p>\n\n<ol>\n<li>I am using OpenCV currently to grab an image from my webcam in a DLL. (I will be using this image for other things later)</li>\n<li>Currently, the image that opencv gives me is a Opencv::Mat. I resized this and converted to a byte array size of a 720p image, which is about 3 Megapixels.</li>\n<li>I pass this ptr back to my C# code then I can now render this onto a texture.</li>\n<li>Now I created a TCP socket and connect the server and client and start to transmit previously gotten image byte array. I am able to transmit the byte array over to the client then I use the GPU to render it to a texture.</li>\n<li>Currently, there is a big delay of about 4-500ms delay. This is after I tried compressing the buffer with gzipstream for unity. It was able to compress the byte array from about 3 million bytes to 1.5 million. I am trying to get this to smallest as possible and also fastest as possible but this is where I am completely lost. I saw that Skype requires only 1.2Mbps connection for a 720p video calling at 22 fps. I have no idea how they can achieve such a small frame, but of course I don't need it to be that small. I need to be at least decent.</li>\n</ol>\n\n<p>Please give me a lecture on how this can be done! And let me know if you need anything else from me.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1532560683, "post_id": 51528717, "comment_id": 90026223, "body": "1. Where is <i>jsonfile</i> defined? 2. Would you like to display only the path or the path with the file name? 3. Where should the text be displayed? Also, I don&#39;t think it is a good idea to return the path, but to set it, i.e. instead of <i>QString saveJson()</i> - <i>void saveJson(const QString fileName)</i>. Furthermore, if the file cannot be written, you proceed with the writing anyway."}, {"owner": {"reputation": 127, "user_id": 9206467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b99fe9de92a681f5860813c24b1a53?s=128&d=identicon&r=PG&f=1", "display_name": "Sav", "link": "https://stackoverflow.com/users/9206467/sav"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1532562572, "post_id": 51528717, "comment_id": 90026595, "body": "1. jsonfile is defined in the header file 2. Only the path 3. Text should be displayed on a GUI just like how you&#39;d normally display text with QLabel such as text-&gt;setText(&quot;path&quot;);"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 9206467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b99fe9de92a681f5860813c24b1a53?s=128&d=identicon&r=PG&f=1", "display_name": "Sav", "link": "https://stackoverflow.com/users/9206467/sav"}, "edited": false, "score": 1, "creation_date": 1532595986, "post_id": 51529336, "comment_id": 90037703, "body": "Wasn&#39;t sure why .path() was displaying a period ( . ) instead of the path but i used .absoluteFilePath() to display the path and file name and it works now. Thank you!"}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1532564574, "last_edit_date": 1532564574, "creation_date": 1532564156, "answer_id": 51529336, "question_id": 51528717, "link": "https://stackoverflow.com/questions/51528717/how-to-return-the-file-path-after-saving-a-json-file/51529336#51529336", "title": "How to return the file path after saving a json file?", "body": "<p>Assuming that _std::string jsonfile and <em>QLabel *text</em> are members of <em>EditWindow</em>, use <a href=\"http://doc.qt.io/qt-5/qfileinfo.html\" rel=\"nofollow noreferrer\">QFileInfo</a> to do something like this:</p>\n\n<pre><code>...\njsonfile.assign(...); // this is where you set the value of jsonfile\nQFileInfo fi(QString::fromStdString(jsonfile));\ntext-&gt;setText(fi.path());\n...\n</code></pre>\n\n<p>That should do the work, but you could experiment with different methods of <em>QFileInfo</em> in order to display different information.</p>\n"}], "owner": {"reputation": 127, "user_id": 9206467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b99fe9de92a681f5860813c24b1a53?s=128&d=identicon&r=PG&f=1", "display_name": "Sav", "link": "https://stackoverflow.com/users/9206467/sav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 51529336, "answer_count": 1, "score": 0, "last_activity_date": 1532564574, "creation_date": 1532558989, "last_edit_date": 1532562058, "question_id": 51528717, "link": "https://stackoverflow.com/questions/51528717/how-to-return-the-file-path-after-saving-a-json-file", "title": "How to return the file path after saving a json file?", "body": "<p>I can successfully save a json file i created and i know in which directory it is saved, but i want to display the file path to where it is being saved as a text display. I'm stuck on which Qt class and functions to use. Below is my save_json() function:</p>\n\n<pre><code>void EditWindow::save_json()\n{\n    // update Plot vector\n    for(size_t i = 0; i &lt; plots.size(); i++)  {\n        //update json object\n        if(plots[i]-&gt;save_changes())  {\n              // reload_nodes(i);\n        }\n    }\n\n    /* Update json file\n     *\n     */\n    cout&lt;&lt;\"Json filename\" &lt;&lt;jsonfile&lt;&lt;endl;\n    QFile saveFile(QString::fromStdString(jsonfile));\n    if (!saveFile.open(QIODevice::WriteOnly))  {\n\n        qWarning(\"Couldn't open save file.\");\n\n    }\n\n    QJsonArray plotsArray;\n    for(size_t i = 0; i &lt; plots.size(); i++){\n        plotsArray.append(plots[i]-&gt;get_json_val());\n    }\n\n    QJsonDocument saveDoc(plotsArray);\n    saveFile.write(saveDoc.toJson());\n    setup_plot_list();\n    cout&lt;&lt;\"JSON FILE SAVED\"&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "metaprogramming"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532558951, "post_id": 51528632, "comment_id": 90025861, "body": "You probably want: <code>template &lt;template &lt;typename&gt; class TSettings&gt; struct FilteringClass</code>. first argument of bind seems to be a template instead of a type."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1532560068, "post_id": 51528632, "comment_id": 90026109, "body": "I&#39;m guessing Jarod has the answer. But we would have a better hint if you could show an example usage of <code>FilteringClass</code> (with whatever you provide as a template argument also declared)."}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 7427428, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2faa2c25665349556e88af59f0528e98?s=128&d=identicon&r=PG&f=1", "display_name": "TheSmokingGnu", "link": "https://stackoverflow.com/users/7427428/thesmokinggnu"}, "is_accepted": true, "score": 1, "last_activity_date": 1532560212, "creation_date": 1532560212, "answer_id": 51528878, "question_id": 51528632, "link": "https://stackoverflow.com/questions/51528632/aliasing-the-member-template-typedef-with-using-makes-compiler-think-it-is-not-a/51528878#51528878", "title": "Aliasing the member template typedef with using makes compiler think it is not a class template", "body": "<p>So, i found what i was missing, albeit almost randomly\nTo add that another alias correctly i needed to add <code>::template</code>, like that:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing wrapped = brigand::bind&lt;typename TSettings::template IsComponentFilter, brigand::_1&gt;;\n</code></pre>\n\n<p>I guess without it the fact that original alias was templated was somehow lost to the compiler.</p>\n\n<p>The meaning of the keyword is nicely explained in <a href=\"https://stackoverflow.com/questions/40035282/c-typedef-typename-classnametemplate/40035372\">this answer</a>.</p>\n"}], "owner": {"reputation": 172, "user_id": 7427428, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2faa2c25665349556e88af59f0528e98?s=128&d=identicon&r=PG&f=1", "display_name": "TheSmokingGnu", "link": "https://stackoverflow.com/users/7427428/thesmokinggnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 51528878, "answer_count": 1, "score": 0, "last_activity_date": 1532626609, "creation_date": 1532558391, "last_edit_date": 1532626609, "question_id": 51528632, "link": "https://stackoverflow.com/questions/51528632/aliasing-the-member-template-typedef-with-using-makes-compiler-think-it-is-not-a", "title": "Aliasing the member template typedef with using makes compiler think it is not a class template", "body": "<p>Eventually I need to filter a typelist (<code>brigand::list</code> - defined in brigand meta-programming library). But to start:</p>\n\n<p>I have a settings class that holds a type list:</p>\n\n<pre><code>   template&lt;typename TComponentList&gt;\n  class Settings {\n\n    // this is an integral_constant holding bool\n    template&lt;typename TList, typename T&gt;\n    using ContainsFilter = brigand::found&lt;TList, std::is_same&lt;T, brigand::_1&gt;&gt;;\n\n    // is the type present in component list?\n       template&lt;typename T&gt;\n    using IsComponentFilter = ContainsFilter&lt;TComponentList, T&gt;;\n}\n</code></pre>\n\n<p>The brigand library offers a <code>filter</code> \"function\", but to pass my filter there i need to wrap it using <code>brigand::bind</code>. Here's an example of that:</p>\n\n<pre><code>using ls = brigand::list&lt;TagA, SignatureA, ComponentB&gt;;\n\n// binds the template parameter - passes it to my filter\nusing wrapped = brigand::bind&lt;TestSettings::IsComponentFilter, brigand::_1&gt;;\n\n// a list holding only ComponentB\nusing filtered = brigand::filter&lt;ls, wrapped&gt;;\n</code></pre>\n\n<p>The last step - which i cannot overcome, is to put the filtering inside a class, depending on a template param:</p>\n\n<pre><code>   template &lt;class TSettings&gt;\n    struct FilteringClass\n    {\n        // problem line\n        using wrapped = brigand::bind&lt;TSettings::IsComponentFilter, brigand::_1&gt;;\n\n        // template&lt;typename TSignature&gt;\n        // using SignatureComponents = brigand::filter&lt;TSignature, wrapped&gt;;\n    };\n</code></pre>\n\n<p>When compiling the problem line i first get an error that i need to use typename keyword before <code>TSettings</code>:</p>\n\n<pre><code>to refer to a type member of a template parameter, use 'typename TSettings:: \n</code></pre>\n\n<p>That sounds exactly like what i want!\n I guess it is needed to explicitly tell compiler to treat <code>TSettings</code> as a type? However when i add it, i get this error from inside <code>brigand's</code> bind function:</p>\n\n<pre><code>error: type/value mismatch at argument 1 in template parameter list for 'template&lt;template&lt;class ...&gt; class&lt;template-parameter-1-1&gt;, class ...&gt; struct brigand::bind'\n     using wrapped = brigand::bind&lt;TSettings, brigand::_1&gt;;\n note:   expected a class template, got '(TSettings:: IsComponentFilter &lt; &lt;expression error&gt;)'\n</code></pre>\n"}, {"tags": ["c++", "graphics", "geometry", "mesh", "cgal"], "comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 1, "creation_date": 1532559555, "post_id": 51528514, "comment_id": 90026002, "body": "IANAE, but the basis for how I&#39;d try and solve this is to look up algorithms for <a href=\"https://en.wikipedia.org/wiki/Projective_texture_mapping\" rel=\"nofollow noreferrer\">projective texture mapping</a>.  You don&#39;t care about the algorithm that computes the texture coordinates (u,v), but if you think for a second, the algorithm that computes the model-space coordinates (s,t) for the edges of a square texture is exactly what you&#39;re looking for."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 2, "creation_date": 1532623057, "post_id": 51528514, "comment_id": 90055186, "body": "What do you mean by <i>straight</i>? You seem to be looking for geodesics, which is exactly what <code>Surface_mesh_shortest_path</code> calculates. It won&#39;t get any straighter than this (assuming that you mean that the curve is straight in tangent space). Calculating geodesics on surfaces is a pretty hard task. That might be why it is so slow. But you will probably find some other implementations with the keyword; there are a few approximative algorithms, which are faster."}, {"owner": {"reputation": 413, "user_id": 6919966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c15d07520b16f9fa9abd46dc750582?s=128&d=identicon&r=PG&f=1", "display_name": "beyond", "link": "https://stackoverflow.com/users/6919966/beyond"}, "edited": false, "score": 0, "creation_date": 1533127642, "post_id": 51528514, "comment_id": 90231528, "body": "Don&#39;t you need a normal (perhaps perpendicular to the p0-p1 vector) to project the line with ?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1576230309, "post_id": 51528514, "comment_id": 104839974, "body": "If you do not need the coordinates, just to render the line instead why not use shaders? and if rendered fragment intersects (is nearby) some (half)plane or region recolor it to red ... similar to this <a href=\"https://stackoverflow.com/a/45564968/2521214\">Analysis of a shader in VR</a>. In case you need also the polyline you can extract it from frame buffer ... or use compute shader and store it directly ..."}], "owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1532557546, "creation_date": 1532557546, "question_id": 51528514, "link": "https://stackoverflow.com/questions/51528514/project-a-line-segment-onto-a-mesh", "title": "Project a line segment onto a mesh", "body": "<p>What are the graphic/mathematical algorithms I have to look for in order to achieve the red line in the following image?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ah886.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ah886.png\" alt=\"enter image description here\"></a></p>\n\n<p>Explaining it better: I need to plot two points on the mesh and then generate a straight line segment from one point to the next. This line segment would be formed by new vertices created on every single edge in its way.</p>\n\n<p>I'm currently working with <code>CGAL</code> and <code>Libigl</code>, but none of them seem to have the solution. I have tried <code>CGAL::Surface_mesh_shortest_path</code> but it adds too much overhead (code runs very slowly) and the line would not be guaranteed to be straight depending on the mesh deformation.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1532561036, "post_id": 51528330, "comment_id": 90026295, "body": "More data required to give an answer. That said, a wrapper class around a <code>std::deque</code>, perhaps containing <code>std::function</code>s you want run in the main context, that protects access with a <code>std::mutex</code> might be all you need. If you want the main thread to block and wait, add a <code>std::condition_variable</code>."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1532568867, "post_id": 51528330, "comment_id": 90027733, "body": "Why would that ever be necessary?  Show us what you want to accomplish."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1532576524, "post_id": 51528330, "comment_id": 90029224, "body": "C++ concurrency in action (<a href=\"https://www.manning.com/books/c-plus-plus-concurrency-in-action\" rel=\"nofollow noreferrer\">manning.com/books/c-plus-plus-concurrency-in-action</a>) is a good book to buy and read if you want to do multithreading in C++. To complement user4581301 comment, on Windows, you could use PostMessage to tell the UI thread to run pending functions. A similar thing could probably be done on any OS where the UI is based on a message loop."}, {"owner": {"reputation": 1, "user_id": 7912267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1875827136024440/picture?type=large", "display_name": "Omar Sb", "link": "https://stackoverflow.com/users/7912267/omar-sb"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1532585680, "post_id": 51528330, "comment_id": 90031790, "body": "What I am trying to make is a library in native c++ to use in iOS and Android apps.  when I try to call smth like this in my cpp testing environment or Android or iOS <code>Lib.fetchData(Interface i);</code> the delegate ( interface will fire on a background thread (due to the multithreaded nature of my problem) not on Main thread of the UI of the OS). @JiveDadson @Phil1970"}], "owner": {"reputation": 1, "user_id": 7912267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1875827136024440/picture?type=large", "display_name": "Omar Sb", "link": "https://stackoverflow.com/users/7912267/omar-sb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532568693, "creation_date": 1532556221, "last_edit_date": 1532568693, "question_id": 51528330, "link": "https://stackoverflow.com/questions/51528330/message-passing-between-threads-to-call-functions-in-the-main-thread-of-c-prog", "title": "Message passing between threads to call functions in the main thread of c++ program", "body": "<p>In my C++ program I am calling <code>std::async</code> to make a new thread but in some point inside the thread I need to dispatch to the main thread to execute some functions. </p>\n\n<p>In Objective-C there is:</p>\n\n<pre><code>dispatch_async(dispatch_get_main_queue(), ^{\n  [self doSomething];\n});\n</code></pre>\n\n<p>Is there anything similar to that in C++ without the need to use Boost or any other third-party libraries?</p>\n\n<p>If not, would message passing work to send a message to the main thread in a non-blocking manner?</p>\n"}, {"tags": ["c++", "qt", "qprocess"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532557809, "post_id": 51528247, "comment_id": 90025599, "body": "You probably want to use a script file option: <a href=\"http://www.virtues.it/2010/07/howto-diskpart/\" rel=\"nofollow noreferrer\">virtues.it/2010/07/howto-diskpart</a>"}, {"owner": {"reputation": 1, "user_id": 10134523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3b94a0cdd5bc2bcb024b2656939dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rander Ens", "link": "https://stackoverflow.com/users/10134523/rander-ens"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532599602, "post_id": 51528247, "comment_id": 90039993, "body": "There are commands to diskpart, I need help how to use it in c++ code with QProcess class"}, {"owner": {"reputation": 536, "user_id": 5295425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7pza.png?s=128&g=1", "display_name": "bencemeszaros", "link": "https://stackoverflow.com/users/5295425/bencemeszaros"}, "edited": false, "score": 1, "creation_date": 1532604918, "post_id": 51528247, "comment_id": 90043205, "body": "<a href=\"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/diskpart-scripts-and-examples\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows-server/administration/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532619974, "post_id": 51528247, "comment_id": 90053326, "body": "Where are you getting the /C and /k command line parameters? I don&#39;t see those in a search. The searches say to use a script file option using /s script file. That would be easy to implement using <code>QProcess</code>. Use QFile to create a text file (yourFileName.txt) with your commands. then execute diskpart.exe with the following command line parameters: <code>&#47;s yourfileName.txt</code>"}, {"owner": {"reputation": 1, "user_id": 10134523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3b94a0cdd5bc2bcb024b2656939dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rander Ens", "link": "https://stackoverflow.com/users/10134523/rander-ens"}, "edited": false, "score": 0, "creation_date": 1532628496, "post_id": 51528247, "comment_id": 90058021, "body": "It works now with txt script, thanks :) But I need more to write a commands in the code than in txt file. /C and /k command are used with working with cmd etc. But how can I run commands like this: <code>process.start(&quot;diskpart.exe&quot;,QStringList()&lt;&lt;&quot;&#47;C&quot;&lt;&lt;&quot;select disk 1&quot;&lt;&lt;&quot;clean&quot;);</code> It doesn&#39;t work by this way, other solutions what I tried didn&#39;t work also."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532631226, "post_id": 51528247, "comment_id": 90059211, "body": "<b><i>/C and /k command are used with working with cmd etc</i></b> That does not mean every program would support /C or /k. And it certainly does not mean that they would function the same way as <code>cmd.exe</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532631342, "post_id": 51528247, "comment_id": 90059262, "body": "Just use <code>process.start(&quot;diskpart.exe&quot;,QStringList()&lt;&lt;&quot;&#47;s&quot;&lt;&lt;&quot;yourtextf&zwnj;&#8203;ile.txt&quot;);</code>"}, {"owner": {"reputation": 1, "user_id": 10134523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3b94a0cdd5bc2bcb024b2656939dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rander Ens", "link": "https://stackoverflow.com/users/10134523/rander-ens"}, "edited": false, "score": 0, "creation_date": 1532633088, "post_id": 51528247, "comment_id": 90060034, "body": "I did that and it works, but I need to run commands without txt file. About txt file I asked as a second option, I would like to solve it without txt file. I read about /C and /k command that they serve to choose if program like cmd.exe should works in background or normally."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532634510, "post_id": 51528247, "comment_id": 90060655, "body": "Again <code>&#47;C</code> and <code>&#47;k</code> will not work for <code>diskpart.exe</code>. Every program has its own command line support. There is no reason <code>diskpart.exe</code> would support the same options as <code>cmd.exe</code>. They are 2 different programs."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532634691, "post_id": 51528247, "comment_id": 90060748, "body": "My suggestion is use <code>QTemporaryFile</code> to generate a temporary file. <a href=\"http://doc.qt.io/qt-5/qtemporaryfile.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtemporaryfile.html</a>"}, {"owner": {"reputation": 1, "user_id": 10134523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3b94a0cdd5bc2bcb024b2656939dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rander Ens", "link": "https://stackoverflow.com/users/10134523/rander-ens"}, "edited": false, "score": 0, "creation_date": 1532646002, "post_id": 51528247, "comment_id": 90064846, "body": "Aaa, ok I didn&#39;t know this commands don&#39;t work on diskpart. QTemporaryFile class looks nice, thanks very much for help :) I need one more information about checking which pendrive on list disk in diskpart corresponds to which letter. Do you know something about it?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532706174, "post_id": 51528247, "comment_id": 90089536, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/desktop/fileio/enumerating-volumes\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/fileio/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1532706323, "post_id": 51528247, "comment_id": 90089613, "body": "Maybe also: <a href=\"https://stackoverflow.com/questions/327718/how-to-list-physical-disks\" title=\"how to list physical disks\">stackoverflow.com/questions/327718/how-to-list-physical-disk&zwnj;&#8203;s</a>"}], "owner": {"reputation": 1, "user_id": 10134523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3b94a0cdd5bc2bcb024b2656939dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Rander Ens", "link": "https://stackoverflow.com/users/10134523/rander-ens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532604520, "creation_date": 1532555737, "last_edit_date": 1532604520, "question_id": 51528247, "link": "https://stackoverflow.com/questions/51528247/how-to-enter-commands-to-diskpart-using-qprocess", "title": "How to enter commands to diskpart using QProcess", "body": "<p>I have problem with using QProcess class to format pendrive. I checked similar questions, but they didn't help me. How can I enter a few commands to diskpart.exe? It should be something like this?</p>\n\n<pre><code>QProcess process;\nprocess.start(\"diskpart.exe\",QStringList()&lt;&lt;\"/C\"&lt;&lt;\"select disk 1\"&lt;&lt;\"clean\");`\n</code></pre>\n\n<p>Because it doesn't work, I tried also other solutions, but without result. </p>\n\n<pre><code>QString command(\"diskpart.exe\");\nQStringList params=QStringList()&lt;&lt;\"/k\"&lt;&lt;\"select disk 1\"&lt;&lt;\"clean\";\nQProcess::startDetached(command,params);\n</code></pre>\n\n<p>The code above opens diskpart and immediately closes it without cleaning disk. Why is this happening?</p>\n\n<p>I would like to ask about running commands from txt file also, if I write them to txt file:</p>\n\n<pre><code>select disk 1\nclean\n</code></pre>\n\n<p>How to execute this? Because I failed with this too.\nOne more other question, how can I check a letter of pendrive in diskpart in c++? To select a specific pendrive which I select in comboBox in my program?</p>\n"}, {"tags": ["c++", "gcc", "syntax", "clang", "language-lawyer"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1532557043, "post_id": 51528227, "comment_id": 90025411, "body": "How about <code>auto p6 = std::vector&lt;std::function&lt;void()&gt;&gt;();</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1532561433, "post_id": 51528227, "comment_id": 90026356, "body": "Where you say &quot;too verbose&quot;, I would say &quot;easiest to read&quot;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1532561673, "post_id": 51528227, "comment_id": 90026410, "body": "Related: <a href=\"https://stackoverflow.com/questions/16634713/differences-between-new-charn-and-new-charn\" title=\"differences between new charn and new charn\">stackoverflow.com/questions/16634713/&hellip;</a>"}, {"owner": {"reputation": 11119, "user_id": 305118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc9d3428fb416baccc8843936ee60b23?s=128&d=identicon&r=PG", "display_name": "\u011b\u0155&#235;\u013a&#237;&#252;\u0119\u0155\u0358  \u202f\u011b\u0163\u011b&#235;\u0155", "link": "https://stackoverflow.com/users/305118/%c4%9b%c5%95%c3%ab%c4%ba%c3%ad%c3%bc%c4%99%c5%95%cd%98-%c4%9b%c5%a3%c4%9b%c3%ab%c5%95"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1532713304, "post_id": 51528227, "comment_id": 90092866, "body": "@Eljay Yes, this is close to what I would write in practice. My question is purely theoretical though."}], "answers": [{"comments": [{"owner": {"reputation": 11119, "user_id": 305118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc9d3428fb416baccc8843936ee60b23?s=128&d=identicon&r=PG", "display_name": "\u011b\u0155&#235;\u013a&#237;&#252;\u0119\u0155\u0358  \u202f\u011b\u0163\u011b&#235;\u0155", "link": "https://stackoverflow.com/users/305118/%c4%9b%c5%95%c3%ab%c4%ba%c3%ad%c3%bc%c4%99%c5%95%cd%98-%c4%9b%c5%a3%c4%9b%c3%ab%c5%95"}, "edited": false, "score": 0, "creation_date": 1532650528, "post_id": 51528685, "comment_id": 90065812, "body": "Thanks! Do you format grammar productions manually when posting on StackOverflow, or use some tool for this?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 11119, "user_id": 305118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc9d3428fb416baccc8843936ee60b23?s=128&d=identicon&r=PG", "display_name": "\u011b\u0155&#235;\u013a&#237;&#252;\u0119\u0155\u0358  \u202f\u011b\u0163\u011b&#235;\u0155", "link": "https://stackoverflow.com/users/305118/%c4%9b%c5%95%c3%ab%c4%ba%c3%ad%c3%bc%c4%99%c5%95%cd%98-%c4%9b%c5%a3%c4%9b%c3%ab%c5%95"}, "edited": false, "score": 0, "creation_date": 1532656020, "post_id": 51528685, "comment_id": 90066842, "body": "@VladimirReshetnikov Just typed it in, with some copy-pasting."}, {"owner": {"reputation": 11119, "user_id": 305118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc9d3428fb416baccc8843936ee60b23?s=128&d=identicon&r=PG", "display_name": "\u011b\u0155&#235;\u013a&#237;&#252;\u0119\u0155\u0358  \u202f\u011b\u0163\u011b&#235;\u0155", "link": "https://stackoverflow.com/users/305118/%c4%9b%c5%95%c3%ab%c4%ba%c3%ad%c3%bc%c4%99%c5%95%cd%98-%c4%9b%c5%a3%c4%9b%c3%ab%c5%95"}, "edited": false, "score": 0, "creation_date": 1532718625, "post_id": 51528685, "comment_id": 90095248, "body": "Do we have the same situation when dynamically allocating an array of pointers to an array, e.g. <code>new std::add_pointer_t&lt;int[5]&gt;[n]</code> or <code>new decltype((int(*)[5])0)[n]</code>?"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 4, "last_activity_date": 1532559411, "last_edit_date": 1592644375, "creation_date": 1532558777, "answer_id": 51528685, "question_id": 51528227, "link": "https://stackoverflow.com/questions/51528227/warning-when-dynamically-allocating-an-array-of-function-pointers/51528685#51528685", "title": "Warning when dynamically allocating an array of function pointers", "body": "<p>There is one way to write this expression without some sort of type alias. But it's not worth it.</p>\n<p>The grammar for <em>new-expression</em> is</p>\n<blockquote>\n<p><em>new-expression</em>:</p>\n<p>\u00a0\u00a0\u00a0\u00a0 <code>::</code><sub><em>opt</em></sub> \u00a0 <em>new-placement</em><sub><em>opt</em></sub> <em>new-type-id</em> <em>new-initializer</em><sub><em>opt</em></sub></p>\n<p>\u00a0\u00a0\u00a0\u00a0 <code>::</code><sub><em>opt</em></sub> \u00a0 <em>new-placement</em><sub><em>opt</em></sub> <code>(</code><em>type-id</em><code>)</code> <em>new-initializer</em><sub><em>opt</em></sub></p>\n<p><em>new-type-id</em>:</p>\n<p>\u00a0\u00a0\u00a0\u00a0 <em>type-specifier-seq</em> <em>new-declarator</em><sub><em>opt</em></sub></p>\n<p><em>new-declarator</em>:</p>\n<p>\u00a0\u00a0\u00a0\u00a0 <em>ptr-operator</em> <em>new-declarator</em><sub><em>opt</em></sub></p>\n<p>\u00a0\u00a0\u00a0\u00a0 <em>noptr-new-declarator</em></p>\n<p><em>ptr-operator</em>:</p>\n<p>\u00a0\u00a0\u00a0\u00a0 <code>*</code> <em>attribute-specifier-seq</em><sub><em>opt</em></sub> <em>cv-qualifier-seq</em><sub><em>opt</em></sub></p>\n<p>\u00a0\u00a0\u00a0\u00a0 <code>&amp;</code> <em>attribute-specifier-seq</em><sub><em>opt</em></sub></p>\n<p>\u00a0\u00a0\u00a0\u00a0 <code>&amp;&amp;</code> <em>attribute-specifier-seq</em><sub><em>opt</em></sub></p>\n<p>\u00a0\u00a0\u00a0\u00a0 <em>nested-name-specifier</em> <code>*</code> <em>attribute-specifier-seq</em><sub><em>opt</em></sub> <em>cv-qualifier-seq</em><sub><em>opt</em></sub></p>\n<p><em>noptr-new-declarator</em>:</p>\n<p>\u00a0\u00a0\u00a0\u00a0 <code>[</code> <em>expression</em> <code>]</code> <em>attribute-specifier-seq</em><sub><em>opt</em></sub></p>\n<p>\u00a0\u00a0\u00a0\u00a0 <em>noptr-new-declarator</em> <code>[</code> <em>constant-expression</em> <code>]</code> <em>attribute-specifier-seq</em><sub><em>opt</em></sub></p>\n</blockquote>\n<p>The <em>new-declarator</em> grammar symbol used in <em>new-type-id</em> is like the <em>abstract-declarator</em> symbol used in <em>type-id</em>, with three important differences:</p>\n<ul>\n<li><p><em>new-declarator</em> allows a non-constant expression between the first set of square brackets, to specify dynamic creation of an array with variable size.  <em>type-id</em> does not because &quot;array <code>T</code> of size <code>N</code>&quot; is only a valid C++ type if <code>N</code> is a constant expression.</p>\n</li>\n<li><p><em>type-id</em> allows enclosing a <em>ptr-abstract-declarator</em> in parentheses to help specify a pointer-to-array or pointer-to-function type, and/or enclosing a function parameter list in parentheses to specify a function type.  <em>new-declarator</em> does not allow any parentheses at all!  Any parentheses following a <code>new</code> keyword specify either a <em>new-placement</em>, or a parenthesized <em>type-id</em>, or a <em>new-initializer</em>.  (I guess if <em>new-type-id</em> could also involve parentheses, disambiguating the combinations of all these things would be extremely messy.)</p>\n</li>\n<li><p><em>type-id</em> allows the <code>...</code> ellipsis token in the place where a real declaration would have an identifier.  Not really relevant here, but this allows unnamed function parameter packs, as in <code>template&lt;class T&gt; void f(T...);</code></p>\n</li>\n</ul>\n<p>So the <em>new-expression</em> form using a <em>type-id</em> doesn't allow for a variable size, which your example function needs.  And the <em>new-expression</em> form using a <em>new-type-id</em> doesn't allow any function parameter lists at all in its syntax tree, so any function type must be introduced in the <em>type-specifier-seq</em>.  I think the possibilities are a <em>type-name</em>, a <em>decltype-specifier</em>, or a <em>typename-specifier</em>.</p>\n<p>So I guess the <em>decltype-specifier</em> option does give us another stupidly verbose way of writing the expression, but this time without needing a named type alias or an <code>#include</code>.</p>\n<pre><code>auto p6 = new decltype(static_cast&lt;void(*)()&gt;(nullptr))[n];\n</code></pre>\n"}], "owner": {"reputation": 11119, "user_id": 305118, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc9d3428fb416baccc8843936ee60b23?s=128&d=identicon&r=PG", "display_name": "\u011b\u0155&#235;\u013a&#237;&#252;\u0119\u0155\u0358  \u202f\u011b\u0163\u011b&#235;\u0155", "link": "https://stackoverflow.com/users/305118/%c4%9b%c5%95%c3%ab%c4%ba%c3%ad%c3%bc%c4%99%c5%95%cd%98-%c4%9b%c5%a3%c4%9b%c3%ab%c5%95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 51528685, "answer_count": 1, "score": 1, "last_activity_date": 1532712975, "creation_date": 1532555627, "last_edit_date": 1592644375, "question_id": 51528227, "link": "https://stackoverflow.com/questions/51528227/warning-when-dynamically-allocating-an-array-of-function-pointers", "title": "Warning when dynamically allocating an array of function pointers", "body": "<p>I want to dynamically allocate an array of function pointers. Here are some of my attempts:</p>\n<pre><code>#include &lt;type_traits&gt;\n\nvoid f(int n) {\n    // auto p1 = new void(*[n])(); // syntax error\n\n    auto p2 = new (void(*[n])()); // warning, see below\n\n    auto p3 = new typeof(void(*)())[n]; // non-standard extension\n\n    using fptr = void(*)(); auto p4 = new fptr[n]; // verbose, but okay\n\n    auto p5 = new std::add_pointer_t&lt;void()&gt;[n]; // hackish\n}\n</code></pre>\n<p>I wonder why <code>p2</code> results in a warning, given that I cannot write it without parentheses (like in <code>p1</code>)?</p>\n<blockquote>\n<p>(gcc) warning: non-constant array new length must be specified without\nparentheses around the type-id [-Wvla]</p>\n<p>(clang) warning: when type is in parentheses, array cannot have\ndynamic size</p>\n</blockquote>\n<p>This is a purely theoretical question. I am not looking for an advice how to write good code solving the problem.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1532555016, "post_id": 51528050, "comment_id": 90024762, "body": "What about using a GPU for &#39;per-pixel work&#39;? GPUs are embarrassingly more parallelized than CPUs for the work they can compute."}, {"owner": {"reputation": 319, "user_id": 9022303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f859bade263d222643ef6cfc2de9836d?s=128&d=identicon&r=PG&f=1", "display_name": "Elgirhath", "link": "https://stackoverflow.com/users/9022303/elgirhath"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1532555048, "post_id": 51528050, "comment_id": 90024778, "body": "@user2864740 I guess that would be even better. I don&#39;t have much experience with it though"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1532555070, "post_id": 51528050, "comment_id": 90024785, "body": "Make sure you have your loops the right way round so that you process adjacent pixels to make best use of caches. Don&#39;t process row 0 pixel 0 then row 1 pixel 0 which may be 1920x3 bytes away. Rather process row 0 pixel 0 then row 0 pixel 1 which is right next-door and will already be in cache."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1532555143, "post_id": 51528050, "comment_id": 90024816, "body": "@koman900 But now that&#39;s a different question - and hence why I voted as &#39;Too Broad&#39;. The <i>&#39;good&#39;</i> use of concurrency depends a good bit on the specific problem domain / requirements. Or is this just a task in &#39;learning how to use threads and basic synchronization primitives&#39;?"}, {"owner": {"reputation": 319, "user_id": 9022303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f859bade263d222643ef6cfc2de9836d?s=128&d=identicon&r=PG&f=1", "display_name": "Elgirhath", "link": "https://stackoverflow.com/users/9022303/elgirhath"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1532555536, "post_id": 51528050, "comment_id": 90024944, "body": "@user2864740 Well, I wouldn&#39;t say that is too broad, as the content of my question is quite specific and that is what answers i expected. The GPU is a different question indeed and that&#39;s why I would make a good use of a comment about that but I don&#39;t expect answers about GPU"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1532556031, "post_id": 51528050, "comment_id": 90025104, "body": "OpenMP doesn&#39;t split your task how you describe, by the way. It doesn&#39;t give 8 pixels to 8 CPU cores and then give the next pixel to whichever one finishes first. Rather, it splits the 1920 rows into 8 and gives 1920/8 rows to the first core, and the second lot of 1920/8 rows to the second core..."}], "answers": [{"comments": [{"owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "reply_to_user": {"reputation": 319, "user_id": 9022303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f859bade263d222643ef6cfc2de9836d?s=128&d=identicon&r=PG&f=1", "display_name": "Elgirhath", "link": "https://stackoverflow.com/users/9022303/elgirhath"}, "edited": false, "score": 0, "creation_date": 1532555291, "post_id": 51528074, "comment_id": 90024860, "body": "@koman900 Isn&#39;t it great? Feel free to accept if this answers your question."}], "tags": [], "owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "is_accepted": true, "score": 1, "last_activity_date": 1532555230, "last_edit_date": 1532555230, "creation_date": 1532554801, "answer_id": 51528074, "question_id": 51528050, "link": "https://stackoverflow.com/questions/51528050/multi-threading-a-for-loop-for-bitmap-coloring/51528074#51528074", "title": "Multi-threading a for loop for bitmap coloring", "body": "<p>This could be a great candidate for the <a href=\"https://www.openmp.org/\" rel=\"nofollow noreferrer\">OpenMP</a> library. Here's an example of using it to parallelize a for loop:</p>\n\n<pre><code>#pragma omp parallel\n#pragma omp for\nfor (i=0; i&lt;N; i++) {\n  // do something with i\n}\n</code></pre>\n\n<p>You can also use OpenMP with nested for loops. It may take a bit of setup to get running on your machine, but once you do it's surprisingly easy to use for tasks like this.</p>\n\n<p>If you're interested in leveraging your GPU, look into <a href=\"https://www.khronos.org/opencl/\" rel=\"nofollow noreferrer\">OpenCL</a> and <a href=\"https://www.opengl.org/\" rel=\"nofollow noreferrer\">OpenGL</a>.</p>\n"}], "owner": {"reputation": 319, "user_id": 9022303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f859bade263d222643ef6cfc2de9836d?s=128&d=identicon&r=PG&f=1", "display_name": "Elgirhath", "link": "https://stackoverflow.com/users/9022303/elgirhath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 51528074, "answer_count": 1, "score": -1, "last_activity_date": 1532569581, "creation_date": 1532554669, "last_edit_date": 1532569581, "question_id": 51528050, "link": "https://stackoverflow.com/questions/51528050/multi-threading-a-for-loop-for-bitmap-coloring", "title": "Multi-threading a for loop for bitmap coloring", "body": "<p>I have a loop in a program coloring a Bitmap. It looks about like this:</p>\n\n<pre><code>for (int i = 0; i&lt;1920; i++){\n    for (int j = 0; j &lt; 1080; j++){\n        compute_pixel(i, j);\n    }\n}\n</code></pre>\n\n<p>I want to speed it up by using 8 cores of my CPU and give them different threads, one pixel each, so that when I already have 8 cores in use (working on first 8 pixels), I can assign the 9th pixel to the first core which has finished its job. What is the best way to achieve that?</p>\n"}, {"tags": ["c++", "qt", "cmd", "snmp"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532554798, "post_id": 51528047, "comment_id": 90024687, "body": "Unless your problem has something to do with Qt, you should not use that tag."}, {"owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532555007, "post_id": 51528047, "comment_id": 90024758, "body": "@RSahu I am running this in Qt. If this was its own program I would be done, I need this to run as my Qt gui is running. I mentioned at the top that this was in Qt."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532555134, "post_id": 51528047, "comment_id": 90024811, "body": "I understand. Are you suggesting that if you run the above code without Qt, you don&#39;t see any problem?"}, {"owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532555311, "post_id": 51528047, "comment_id": 90024872, "body": "@RSahu yes, because I can just hold it open and wait for a user input. As part of my Qt program, it needs to happen passively without user input."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532555627, "post_id": 51528047, "comment_id": 90024968, "body": "That does not make sense to me. Hopefully it makes sense to others."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1532598326, "post_id": 51528047, "comment_id": 90039182, "body": "<code>&quot;...process repeats until the program crashes&quot;</code> -- firstly you need to identify the location/cause of the crash using your debugger.  Secondly, if this is being used in association with <code>Qt</code> then you need to provide some details as to precisely <i>how</i> it&#39;s being used with <code>Qt</code>.  That being said, you might want to look at using <a href=\"http://doc.qt.io/qt-5/qprocess.html\" rel=\"nofollow noreferrer\"><code>QProcess</code></a> rather than <code>_popen</code> -- it should be much easier to incorporate into the <code>Qt</code> event processing loop.  Finally, please consider editing your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "edited": false, "score": 0, "creation_date": 1532618355, "post_id": 51528359, "comment_id": 90052250, "body": "Unfortunately, this just keeps the command window open and prevents the Qt Gui from running. It also just runs the command once. When looped, it just opens a new cmd when the first is closed."}], "tags": [], "owner": {"reputation": 31, "user_id": 10095982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CeanpF9OH9c/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pUV_At-0q4vax28WEZEC8L_9Kf5w/mo/photo.jpg?sz=128", "display_name": "Jonah Simon", "link": "https://stackoverflow.com/users/10095982/jonah-simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1532556397, "creation_date": 1532556397, "answer_id": 51528359, "question_id": 51528047, "link": "https://stackoverflow.com/questions/51528047/how-to-input-multiple-commands-or-loop-a-command-in-command-prompt-using-c/51528359#51528359", "title": "How to input multiple commands or loop a command in Command Prompt using C++?", "body": "<p>I suggest that you use a nested cmd when you execute the first command. Something like:</p>\n\n<pre><code>cmd.exe /c cmd.exe /k \"Put the command you want to execute here!\"\n</code></pre>\n\n<p>Im not sure if quoting the command is necessary but I know that it does work with quotes so that would mean you change your first line to:</p>\n\n<pre><code>cmd = _popen(\"cmd.exe /c cmd.exe /k \\\"snmpget -v 2c -c public 192.168.127.101 .1.3.6.1.4.1.8691.8.4.6.1.1.3.1.1.4.1\\\"\", \"r\"); //Note the escaped quotes\n</code></pre>\n\n<p>The above is untested but I believe it should give you the intended result. Note that this opens an inner cmd each time so with this solution you might want to keep track of the exits. Basically for each command that isn't the first one, you will want to send exit to close that inner->inner cmd.</p>\n"}], "owner": {"reputation": 73, "user_id": 10043467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gktkh.jpg?s=128&g=1", "display_name": "viduwoy", "link": "https://stackoverflow.com/users/10043467/viduwoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532556397, "creation_date": 1532554646, "question_id": 51528047, "link": "https://stackoverflow.com/questions/51528047/how-to-input-multiple-commands-or-loop-a-command-in-command-prompt-using-c", "title": "How to input multiple commands or loop a command in Command Prompt using C++?", "body": "<p>I am trying to display the results of my commands live. I am already able to retrieve the results, but I want a live stream. Whenever I put a while loop into my code to repeat the command, a window opens, the command executes, then the window closes, then another window opens and the process repeats until the program crashes. I want the command prompt to run in the background while receiving commands because I am running a QT gui in front of it.</p>\n\n<p>Here is my code currently:</p>\n\n<pre><code>cmd = _popen(\"snmpget -v 2c -c public 192.168.127.101 .1.3.6.1.4.1.8691.8.4.6.1.1.3.1.1.4.1\", \"r\"); //input command in format (snmp_function -v version -c community_string IP_address OID)\nif (cmd == NULL)\n{\n    perror(\"_popen\");\n    exit(EXIT_FAILURE);\n}\nwhile (fgets(result, sizeof(result), cmd))          //gets full responce string to snmpget and passes string to result variable\n{\n    std::string str = result;                       //sets string to values in variable result\n    std::regex rgx(\"\\\"([^\\\"]*)\\\"\");                 //retrieves only the section of the output string that is between double air quotes\n    std::smatch match;\n    std::string buffer;\n    std::stringstream ss(str);\n    std::vector&lt;std::string&gt; strings;\n                                                //necessary? whitespace\n    while (ss &gt;&gt; buffer)\n        strings.push_back(buffer);\n    for (auto&amp; i : strings)\n    {\n        if (std::regex_match(i, match, rgx))\n        {\n            std::ssub_match submatch = match[1];\n            std::string str = submatch.str();\n            for (size_t j=0; j&lt;str.length(); j++)\n            {\n                output[j] = str[j];\n            }\n        }\n    }\n}\n\n_pclose(cmd);\n</code></pre>\n\n<p>The <code>std::string</code> stuff is just to get the part of the return value I want.\nI can normally hold the window open by putting in a <code>getchar()</code> at the end of a <code>while</code> loop that contains this, but I don't want to be reliant on the user pressing enter to get an updated result.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1532553432, "post_id": 51527764, "comment_id": 90024195, "body": "The code you present here doesn&#39;t even compile with any decent c++ compiler."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1532553441, "post_id": 51527764, "comment_id": 90024197, "body": "No usage of <code>rand()</code> &quot;in a loop&quot; ..?"}, {"owner": {"reputation": 536, "user_id": 4881960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0970a38e2aa57cb1c119f8c1a9849fb?s=128&d=identicon&r=PG&f=1", "display_name": "freim", "link": "https://stackoverflow.com/users/4881960/freim"}, "edited": false, "score": 1, "creation_date": 1532553692, "post_id": 51527764, "comment_id": 90024284, "body": "&quot;daysWithBonus&quot; will always be 0 (hint: because 5/100 == 0)."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1532553694, "post_id": 51527764, "comment_id": 90024286, "body": "Post the real code, all of it."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1532554079, "post_id": 51527764, "comment_id": 90024438, "body": "No, don&#39;t post &quot;all of it&quot;, but only a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as explained in stackoverflow.com&#39;s <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1532554725, "post_id": 51527764, "comment_id": 90024669, "body": "Here&#39;s code for a random number generator: <a href=\"https://xkcd.com/221/\" rel=\"nofollow noreferrer\">xkcd.com/221</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1532557487, "post_id": 51527764, "comment_id": 90025527, "body": "@Eljay, that&#39;s a <i>Randall</i> number generator."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1532560192, "post_id": 51527764, "comment_id": 90026137, "body": "Use the <code>&lt;random&gt;</code> library instead of outdated C random number functions, and properly seed your random generator."}], "answers": [{"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1532553694, "post_id": 51527803, "comment_id": 90024289, "body": "Ref. <a href=\"https://stackoverflow.com/questions/14251452/if-i-dont-specify-srand-what-seed-does-rand-use\" title=\"if i dont specify srand what seed does rand use\">stackoverflow.com/questions/14251452/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3879, "user_id": 7371784, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78e670334411962158df4d1ac6803ac9?s=128&d=identicon&r=PG&f=1", "display_name": "Kristjan Kica", "link": "https://stackoverflow.com/users/7371784/kristjan-kica"}, "is_accepted": false, "score": 1, "last_activity_date": 1534415384, "last_edit_date": 1534415384, "creation_date": 1532553516, "answer_id": 51527803, "question_id": 51527764, "link": "https://stackoverflow.com/questions/51527764/how-to-make-a-variable-have-a-diferent-random-between-x-and-y-value-everytime-it/51527803#51527803", "title": "How to make a variable have a diferent random between x and y value everytime it is used in the same loop?", "body": "<p>Because rand is pseudorandom. It is the same for every run so you can do better debugging for example.\nTake a look at srand, and use the time of your pc as a seed.\nThat is: add <code>srand(time(0));</code> to your code. </p>\n\n<p>Edit: Reference <a href=\"https://stackoverflow.com/questions/14251452/if-i-dont-specify-srand-what-seed-does-rand-use\">this</a> question.</p>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "is_accepted": true, "score": 0, "last_activity_date": 1532554475, "last_edit_date": 1532554475, "creation_date": 1532553805, "answer_id": 51527862, "question_id": 51527764, "link": "https://stackoverflow.com/questions/51527764/how-to-make-a-variable-have-a-diferent-random-between-x-and-y-value-everytime-it/51527862#51527862", "title": "How to make a variable have a diferent random between x and y value everytime it is used in the same loop?", "body": "<p>It's important to understand that <code>rand()</code> is \"pseudorandom.\" Give it a proper seed value (like the current time) via <code>srand()</code> and then it should give you random values, like so:</p>\n\n<pre><code>/* srand example */\n#include &lt;stdio.h&gt;      /* printf, NULL */\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n\nint main ()\n{\n  printf (\"First number: %d\\n\", rand()%100);\n  srand (time(NULL));\n  printf (\"Random number: %d\\n\", rand()%100);\n  srand (1);\n  printf (\"Again the first number: %d\\n\", rand()%100);\n\n  return 0;\n}\n</code></pre>\n\n<p>From here: <a href=\"http://www.cplusplus.com/reference/cstdlib/srand/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdlib/srand/</a></p>\n\n<p>I think using <code>rand()</code> in the context of simple schoolwork is fine. And as was previously pointed out, you need to be careful when calling <code>rand()</code> repeatedly (like in a loop) as this may give you duplicate numbers.</p>\n"}], "owner": {"reputation": 13, "user_id": 9072152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e635147da40e4cf7978865944ff44b1d?s=128&d=identicon&r=PG&f=1", "display_name": "D.Dimitrov", "link": "https://stackoverflow.com/users/9072152/d-dimitrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51527862, "answer_count": 2, "score": -5, "last_activity_date": 1534415384, "creation_date": 1532553302, "last_edit_date": 1532573711, "question_id": 51527764, "link": "https://stackoverflow.com/questions/51527764/how-to-make-a-variable-have-a-diferent-random-between-x-and-y-value-everytime-it", "title": "How to make a variable have a diferent random between x and y value everytime it is used in the same loop?", "body": "<p>I got this homework today. A worker works for an amount of days (inputted by the user). 5% of the days he gets a bonus money (the amount is also inputted by the user). The length of workday is measured in hours. The number of workhours must be different and random for every day.For example day1 the workhours are 8 day2-4 day3-12 etc.<br></p>\n\n<p>All the user input things are done, but when it comes to the calculations part I've made this loop.<br></p>\n\n<pre><code>for (int i=0;i&lt;= totalDays;i++)\n  {\n    daysWithBonus=totalDays*(5/100)\n    bonusIncome=daysWithBonus*Bonus\n    moneyForTimeWorked=timeWorked*paymentForHour\n    totalIncome=bonusIncome+moneyForTimeWorked\n  }\n</code></pre>\n\n<p><br></p>\n\n<p>Now my problem is that I can not get the timeWorked variable to be random and different for every day.I found this in the web:</p>\n\n<p><br>\n    <code>int timeWorked = rand() % 9 + 3;</code>\n<br>\nbut it does not seem to work. Every time I run the program I get 8 for the value of the variable for each day. Can someone help me figure this out?</p>\n"}, {"tags": ["c++", "ubuntu", "emgucv"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1532553239, "post_id": 51527694, "comment_id": 90024106, "body": "The errors shouldn&#39;t have anything to do with C++11. The errors are because many Windows-specific symbols aren&#39;t declared or defined. Perhaps it&#39;s because a missing header file for Linux builds of the library (to enable Windows compatibility)?"}, {"owner": {"reputation": 321, "user_id": 7991819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c490ba1cee82c16994527623860c96f5?s=128&d=identicon&r=PG&f=1", "display_name": "Ralph B.", "link": "https://stackoverflow.com/users/7991819/ralph-b"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1532555323, "post_id": 51527694, "comment_id": 90024878, "body": "@Someprogrammerdude Thanks I edited the question. I am confused as they say they support Ubuntu and they do not mention anything about installing extra headers or something. Is there anyway for Ubuntu to recognize those Windows symbols on Ubuntu?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1532592895, "post_id": 51527694, "comment_id": 90035705, "body": "@RalphB.: That doesn&#39;t make sense. Even if Ubuntu somehow would recognize the <i>symbol</i> <code>MAX_DRIVE</code>, it still wouldn&#39;t have 26 drives like Windows does. <a href=\"https://stackoverflow.com/posts/51527694/edit\">edit</a> Seems like the problem is due to bad style in emgucv; really not impressed with that code."}], "owner": {"reputation": 321, "user_id": 7991819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c490ba1cee82c16994527623860c96f5?s=128&d=identicon&r=PG&f=1", "display_name": "Ralph B.", "link": "https://stackoverflow.com/users/7991819/ralph-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532592815, "creation_date": 1532552976, "last_edit_date": 1532592815, "question_id": 51527694, "link": "https://stackoverflow.com/questions/51527694/how-to-get-the-emgucv-compiled-on-my-ubuntu-18-04-it-is-said-to-support-ubuntu", "title": "How to get the emgucv compiled on my Ubuntu 18.04? It is said to support Ubuntu", "body": "<p>First I am not very familiar with C++ compile process, but I have to compile the <a href=\"https://github.com/emgucv/emgucv\" rel=\"nofollow noreferrer\"><strong>emgucv repository</strong></a> on Ubuntu 18.04. I follow the instruction and try to figure out things by searching through Stack Exchange.</p>\n\n<p>I got every dependencies setup, then the only file I need to execute is <a href=\"https://github.com/emgucv/emgucv/tree/master/platforms/ubuntu/16.04/cmake_configure.sh\" rel=\"nofollow noreferrer\"><strong>this</strong></a> one.</p>\n\n<p>Although it is written for <code>16.04</code>, seems to work for <code>18.04</code>, but the compilation throws an error. It says <code>_MAX_DRIVE, _MAX_DIR, _MAX_PATH, DWORD, errno_t</code>, etc. are not declared. As suggested by the comment, they are Windows-specific. The <a href=\"https://github.com/emgucv/tesseract/blob/1f977fcca53f37b579dcc0ad10a67994ca5320f1/src/ccutil/mainblk.cpp\" rel=\"nofollow noreferrer\"><strong>error occurs in this</strong></a> file. And the <a href=\"https://github.com/emgucv/tesseract/tree/1f977fcca53f37b579dcc0ad10a67994ca5320f1\" rel=\"nofollow noreferrer\"><strong>module that contains this file is this</strong></a>.</p>\n\n<blockquote>\n  <p><strong>My question is</strong> how to get this compiled on Ubuntu 18.04? I am very confused, since <strong>Emgucv says they support Linux</strong> (instruction at the end), and I believe others could have successfully compiled it on their Linux. I attempted to replace those constants <code>_MAX_DRIVE, _MAX_DIR, _MAX_PATH</code> by just numbers, the <code>DWORD</code> by <code>unsigned long</code>, and <code>errno_t</code> by <code>int</code>, then it says now <code>GetModuleFileName, _splitpath_s</code> are not declared. I don't know how to do. Is there anyway for this to work for Ubuntu?</p>\n</blockquote>\n\n<pre><code>[ 74%] Building CXX object Emgu.CV.Extern/tesseract/libtesseract/CMakeFiles/tesseract_ccutil.dir/tesseract-ocr.git/src/ccutil/mainblk.cpp.o\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp: In member function \u2018void tesseract::CCUtil::main_setup(const char*, const char*)\u2019:\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:77:16: error: \u2018_MAX_DRIVE\u2019 was not declared in this scope\n     char drive[_MAX_DRIVE];\n                ^~~~~~~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:78:14: error: \u2018_MAX_DIR\u2019 was not declared in this scope\n     char dir[_MAX_DIR];\n              ^~~~~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:79:15: error: \u2018_MAX_PATH\u2019 was not declared in this scope\n     char path[_MAX_PATH];\n               ^~~~~~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:83:5: error: \u2018DWORD\u2019 was not declared in this scope\n     DWORD length = GetModuleFileName(nullptr, path, sizeof(path));\n     ^~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:85:9: error: \u2018length\u2019 was not declared in this scope\n     if (length &gt; 0 &amp;&amp; length &lt; sizeof(path)) {\n         ^~~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:85:39: error: \u2018path\u2019 was not declared in this scope\n     if (length &gt; 0 &amp;&amp; length &lt; sizeof(path)) {\n                                       ^~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:86:7: error: \u2018errno_t\u2019 was not declared in this scope\n       errno_t result = _splitpath_s(path, drive, sizeof(drive),\n       ^~~~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:88:11: error: \u2018result\u2019 was not declared in this scope\n       if (result == ERANGE) {\n           ^~~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:92:17: error: \u2018drive\u2019 was not declared in this scope\n       datadir = drive;\n                 ^~~~~\n/media/philips_cpm/data1/emgucv/Emgu.CV.Extern/tesseract/libtesseract/tesseract-ocr.git/src/ccutil/mainblk.cpp:93:18: error: \u2018dir\u2019 was not declared in this scope\n       datadir += dir;\n                  ^~~\nEmgu.CV.Extern/tesseract/libtesseract/CMakeFiles/tesseract_ccutil.dir/build.make:302: recipe for target 'Emgu.CV.Extern/tesseract/libtesseract/CMakeFiles/tesseract_ccutil.dir/tesseract-ocr.git/src/ccutil/mainblk.cpp.o' failed\nmake[2]: *** [Emgu.CV.Extern/tesseract/libtesseract/CMakeFiles/tesseract_ccutil.dir/tesseract-ocr.git/src/ccutil/mainblk.cpp.o] Error 1\nCMakeFiles/Makefile2:5929: recipe for target 'Emgu.CV.Extern/tesseract/libtesseract/CMakeFiles/tesseract_ccutil.dir/all' failed\nmake[1]: *** [Emgu.CV.Extern/tesseract/libtesseract/CMakeFiles/tesseract_ccutil.dir/all] Error 2\nMakefile:162: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<hr>\n\n<p><a href=\"http://www.emgu.com/wiki/index.php/Download_And_Installation#Ubuntu_16.04\" rel=\"nofollow noreferrer\"><strong>Emgu CV compile manual for Ubuntu</strong></a></p>\n\n<p><strong>The commands are summarized below</strong></p>\n\n<pre><code>git clone https://github.com/emgucv/emgucv emgucv \n\ncd emgucv\n\ngit submodule update --init --recursive\n\ncd platforms/ubuntu/16.04\n\n./apt_install_dependency.sh\n\n./cmake_configure.sh\n</code></pre>\n"}, {"tags": ["c++", "xcode", "pass-by-reference", "multiple-return-values"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532552377, "post_id": 51527550, "comment_id": 90023714, "body": "Just pass two references. One for each of your return values."}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1532552476, "post_id": 51527550, "comment_id": 90023758, "body": "You should show what you&#39;ve tried so far.  If you don&#39;t know how to pass by reference, I suggest studying from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good c++ book</a>."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1532553320, "post_id": 51527550, "comment_id": 90024140, "body": "Please don&#39;t do this. Return two values."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1532557226, "post_id": 51527550, "comment_id": 90025464, "body": "The use of the <code>if</code> and <code>else</code> statements is a little wonky . <code>if (width &gt;=215 &amp;&amp; height &gt;=281) minDistance=0;</code> is the whole <code>if</code>. <code>maxDistance=14;</code> is outside the <code>if</code>, so the <code>else</code> is disconnected. This results in a cascade of error messages. The braces are required: <code>if (width &gt;= 215 &amp;&amp; height &gt;= 281)         {             minDistance = 0;             maxDistance = 14;         }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1532552712, "creation_date": 1532552712, "answer_id": 51527632, "question_id": 51527550, "link": "https://stackoverflow.com/questions/51527550/c-how-to-use-pass-by-reference-to-return-multiple-values-in-a-method/51527632#51527632", "title": "C++: how to use pass by reference to return multiple values in a method?", "body": "<p>You can use <code>std::pair&lt;double, double&gt;</code> as the return type. E.g.</p>\n\n<pre><code>std::pair&lt;double, double&gt; foo()\n{\n   return {10, 20};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "is_accepted": false, "score": 0, "last_activity_date": 1532555674, "last_edit_date": 1532555674, "creation_date": 1532554552, "answer_id": 51528021, "question_id": 51527550, "link": "https://stackoverflow.com/questions/51527550/c-how-to-use-pass-by-reference-to-return-multiple-values-in-a-method/51528021#51528021", "title": "C++: how to use pass by reference to return multiple values in a method?", "body": "<p>If you really want to 'return' two values with pass-by-reference:</p>\n\n<pre><code>void foo(int&amp; x, int&amp; y)\n{\n    x = 55;\n    y = 66;\n}\n\nint main()\n{\n    int x = 0;\n    int y = 0;\n    foo(x, y);\n    if (x == 55 &amp;&amp; y == 66)\n    {\n        return 0;\n    }\n    else\n    {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Something like this should do. As others have noted, there are many other ways to actually return two values, but here you go.</p>\n\n<p>In the code you submitted, (syntax issues aside), you need to refer to <code>min</code> and <code>max</code> in your main method in the <code>cout</code> statement. In <code>getDistance()</code> with <code>minDistance</code> and <code>maxDistance</code>, you have created aliases to the doubles passed to it, but those aliases do not exist outside the function!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10064983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fed1c91fb2cb2d95655fd9a76df90795?s=128&d=identicon&r=PG&f=1", "display_name": "D-Campbell", "link": "https://stackoverflow.com/users/10064983/d-campbell"}, "is_accepted": false, "score": 0, "last_activity_date": 1532591739, "creation_date": 1532591739, "answer_id": 51533727, "question_id": 51527550, "link": "https://stackoverflow.com/questions/51527550/c-how-to-use-pass-by-reference-to-return-multiple-values-in-a-method/51533727#51533727", "title": "C++: how to use pass by reference to return multiple values in a method?", "body": "<p>As others have pointed out, there are other ways of returning 2 values than passing by reference.  If you do in fact want to return via reference, what you have written is almost correct.  Rather than use the variables 'minDistance' and 'maxDistance' in the main method (where they have not been declared), you should use the 'min' and 'max' variables that you have declared.  In addition, you should use '&lt;&lt;' rather than '+' to append the output in the cout call.  Also, if you want the output to appear on separate lines (rather than run together), you should end the line with '&lt;&lt; endl'.  Finally, as user4581301 has said, the bodies of your 'if' statements do not include both minDistance and maxDistance.  You need braces around the statements in order to include both.</p>\n\n<p>Rewriting your code to take these changes into account (but without ensuring the correctness of your 'calculation' in any way) gives:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int, char**) {\n  double min;\n  double max;\n  getDistance(766, 981, 328, 609, min, max);\n  getDistance(899, 171, 1009, 282, min, max);\n  std::cout &lt;&lt; \"Minimum distance is \" &lt;&lt; min &lt;&lt; \"inches\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Maximum distance is \" &lt;&lt; max &lt;&lt; \"inches\" &lt;&lt; std::endl;\n  return 0;\n}\n\nvoid getDistance(int left, int right, int top, int bottom, double&amp; minDistance, double&amp; maxDistance) {\n  int height = bottom - top;\n  int width = right - left;\n  bool isCNN = width !=height;\n\n  if (isCNN) {\n    if (width &gt;=215 &amp;&amp; height &gt;=281) {\n      minDistance=0;\n      maxDistance=14;\n    } else if (width &gt;=124 &amp;&amp; height &gt;=167) {\n      minDistance=14;\n      maxDistance=33.75;\n    } else if (width &gt;=76 &amp;&amp; height &gt;=111) {\n      minDistance=33.75;\n     maxDistance=53.5;\n    } else if (width &gt;=56 &amp;&amp; height &gt;=94) {\n      minDistance=53.5;\n      maxDistance=73.25;\n    } else if (width &gt;=49 &amp;&amp; height &gt;=84) {\n      minDistance=73.25;\n      maxDistance=93;\n    } else if (width &gt;=41 &amp;&amp; height &gt;=71) {\n      minDistance=93;\n      maxDistance=112.75;\n    } else if (width &gt;=28 &amp;&amp; height &gt;=57) {\n      minDistance=132.5;\n      maxDistance=172;\n    } else if (width &gt;=23 &amp;&amp; height &gt;=49) {\n      minDistance=191.75;\n      maxDistance=270.75;\n    } else {\n      minDistance=270.75;\n      maxDistance=480;\n    }\n  } else {\n    if (width &gt;=330) {\n      minDistance=0;\n      maxDistance=6.375;\n    } else if (width &gt;=238) {\n      minDistance=6.375;\n      maxDistance=16.25;\n    } else if (width &gt;=168) {\n      minDistance=16.25;\n      maxDistance=26.125;\n    } else if (width &gt;=122) {\n      minDistance=26.125;\n      maxDistance=36;\n    } else if (width &gt;=108) {\n      minDistance=36;\n      maxDistance=55.75;\n    } else if (width &gt;=91) {\n      minDistance=55.75;\n      maxDistance=75.5;\n    } else {\n      minDistance=75.5;\n      maxDistance=144;\n    }\n  }\n  return;\n}\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 8502417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-Q3GOxQ_2_dw/AAAAAAAAAAI/AAAAAAAAG_4/QAnVC2JT0Fs/photo.jpg?sz=128", "display_name": "Melanie", "link": "https://stackoverflow.com/users/8502417/melanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1532591739, "creation_date": 1532552316, "last_edit_date": 1532556731, "question_id": 51527550, "link": "https://stackoverflow.com/questions/51527550/c-how-to-use-pass-by-reference-to-return-multiple-values-in-a-method", "title": "C++: how to use pass by reference to return multiple values in a method?", "body": "<p>I need to return two doubles. I know a little about pass by reference, but I'm not sure how to use it to return multiple. Here's what I've tried so far. I made two reference parameters and added it to the method I hoped would return two values. </p>\n\n<pre><code>#include \"stdafx.h\" \n#include &lt;iostream&gt;\nusing namespace std;\nint main() {\n  double min;\n  double max;\n  getDistance(766, 981, 328, 609, min, max);\n  getDistance(899, 171, 1009, 282, min, max);\n  cout &lt;&lt; \"Minimum distance is \"+minDistance+\"inches\";\n  cout &lt;&lt; \"Maximum distance is \"+maxDistance+\"inches\";\n  return 0;\n}\n\nvoid getDistance(int left, int right, int top, int bottom, double&amp; minDistance, double&amp; maxDistance) {\n  int height=bottom - top;\n  int width=right - left;\n  bool isCNN=width !=height;\n  if (isCNN) {\n    if (width &gt;=215 &amp;&amp; height &gt;=281) minDistance=0;\n    maxDistance=14;\n    else if (width &gt;=124 &amp;&amp; height &gt;=167) minDistance=14;\n    maxDistance=33.75;\n    else if (width &gt;=76 &amp;&amp; height &gt;=111) minDistance=33.75;\n    maxDistance=53.5;\n    else if (width &gt;=56 &amp;&amp; height &gt;=94) minDistance=53.5;\n    maxDistance=73.25;\n    else if (width &gt;=49 &amp;&amp; height &gt;=84) minDistance=73.25;\n    maxDistance=93;\n    else if (width &gt;=41 &amp;&amp; height &gt;=71) minDistance=93;\n    maxDistance=112.75;\n    else if (width &gt;=28 &amp;&amp; height &gt;=57) minDistance=132.5;\n    maxDistance=172;\n    else if (width &gt;=23 &amp;&amp; height &gt;=49) minDistance=191.75;\n    maxDistance=270.75;\n    else minDistance=270.75;\n    maxDistance=480;\n  }\n  else {\n    if (width &gt;=330) minDistance=0;\n    maxDistance=6.375;\n    else if (width &gt;=238) minDistance=6.375;\n    maxDistance=16.25;\n    else if (width &gt;=168) minDistance=16.25;\n    maxDistance=26.125;\n    else if (width &gt;=122) minDistance=26.125;\n    maxDistance=36;\n    else if (width &gt;=108) minDistance=36;\n    maxDistance=55.75;\n    else if (width &gt;=91) minDistance=55.75;\n    maxDistance=75.5;\n    else minDistance=75.5;\n    maxDistance=144;\n  }\n  return;\n}\n</code></pre>\n\n<p>values. </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1532552779, "post_id": 51527512, "comment_id": 90023897, "body": "I don&#39;t see any issues with the code if it compiles. Have you already tried enabling compiler warnings?"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1532552940, "post_id": 51527512, "comment_id": 90023985, "body": "Which compiler are you using? I&#39;m aware of compiler bugs for initializer lists in MSVC2015"}, {"owner": {"reputation": 1199, "user_id": 6356744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c12512db0046c6637c3e4b084cff575?s=128&d=identicon&r=PG&f=1", "display_name": "tttapa", "link": "https://stackoverflow.com/users/6356744/tttapa"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1532553157, "post_id": 51527512, "comment_id": 90024074, "body": "@JVApen, Yes, it compiles without warnings. I&#39;m using <code>arm-none-eabi-g++ (GNU Tools for ARM Embedded Processors) 5.4.1 20160919 (release) [ARM&#47;embedded-5-branch revision 240496]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1199, "user_id": 6356744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c12512db0046c6637c3e4b084cff575?s=128&d=identicon&r=PG&f=1", "display_name": "tttapa", "link": "https://stackoverflow.com/users/6356744/tttapa"}, "edited": false, "score": 0, "creation_date": 1532557801, "post_id": 51528549, "comment_id": 90025597, "body": "Okay, thank you for confirming this. I&#39;ll have to look for my bug elsewhere then."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1532557740, "creation_date": 1532557740, "answer_id": 51528549, "question_id": 51527512, "link": "https://stackoverflow.com/questions/51527512/instantiate-const-array-reference-as-constructor-parameter-using-initializer-lis/51528549#51528549", "title": "Instantiate const array reference as constructor parameter using initializer list, allowed or not?", "body": "<p>In <code>Test test({1, 2, 3});</code>, lifetime of the temporary array ends at <code>;</code> (so after the constructor call finished).</p>\n\n<p>So your usage in constructor is correct.</p>\n\n<p>But if you kept reference to that array as member, that reference would become dangling.</p>\n"}], "owner": {"reputation": 1199, "user_id": 6356744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c12512db0046c6637c3e4b084cff575?s=128&d=identicon&r=PG&f=1", "display_name": "tttapa", "link": "https://stackoverflow.com/users/6356744/tttapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51528549, "answer_count": 1, "score": 2, "last_activity_date": 1532557740, "creation_date": 1532552175, "question_id": 51527512, "link": "https://stackoverflow.com/questions/51527512/instantiate-const-array-reference-as-constructor-parameter-using-initializer-lis", "title": "Instantiate const array reference as constructor parameter using initializer list, allowed or not?", "body": "<p>I have a constructor that takes a reference to an array as a parameter. Can I use a brace-enclosed initializer list to call that constructor?<br>\nIs the lifetime of the temporary array the lifetime of the constructor, or is that not guaranteed?</p>\n\n<p>My main question:<br>\n<strong>Is the following example program correct?</strong> </p>\n\n<pre><code>class Test {\npublic:\n  template &lt;size_t N&gt;\n  Test(const int (&amp;numbers)[N]) {\n    for (const int &amp;number : numbers)\n      sum += number;\n  }\n\n  int getSum() const {\n    return sum;\n  }\n\nprivate:\n    int sum = 0;\n};\n\nint main() {\n  Test test({1, 2, 3});\n  assert(test.getSum() == 6);\n}\n</code></pre>\n\n<p>The code above works fine, however, the reason why I'm asking this is that I'm using the same approach in a larger project, where the elements of the array are not correctly initialized.  </p>\n\n<p>E.g. if <code>{16}</code> is used as the argument to the constructor, sometimes the value of <code>numbers[0]</code> is <code>0b00000000 00000000 00000000 00010000</code>, which is correct, and sometimes it is a different number, e.g. <code>0b11111111 11111111 11111111 00010000</code> or <code>0b00000000 00000000 00000011 00010000</code>.<br>\nThe size of an <code>int</code> is 4 bytes on the microcontroller platform I'm working on, and when <code>numbers[0]</code> is wrong, I always see the same pattern: the least significant byte is correct, but in the 3 most significant bytes, there is always a block of all ones. This leads me to believe that it was not initialized correctly.</p>\n\n<p>I haven't been able to isolate the problem or reproduce it using a small example.  </p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1532552169, "post_id": 51527488, "comment_id": 90023630, "body": "<a href=\"https://stackoverflow.com/questions/492384/how-to-find-the-sizeof-a-pointer-pointing-to-an-array\">Don&#39;t use <code>sizeof</code> on a pointer array</a>. That won&#39;t work. Either pass the array&#39;s size as a parameter or use a <code>std::vector</code>, which you would probably want to pass by reference."}, {"owner": {"reputation": 11, "user_id": 10135681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec7f05a14c51ffe7f4b13cd7a21194e?s=128&d=identicon&r=PG&f=1", "display_name": "Innocent", "link": "https://stackoverflow.com/users/10135681/innocent"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1532552976, "post_id": 51527488, "comment_id": 90024001, "body": "@alterigel Thanks, it seems the problem was in sizeof, I fixed it as you said. I&#39;m a begginer and started learning programming like 2 days ago so I still know nothing about vectors. I will read about it for sure. Here is fixed code, maybe it will be helpful for someone: <a href=\"https://pastebin.com/6QcEmbNY\" rel=\"nofollow noreferrer\">pastebin.com/6QcEmbNY</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532552993, "post_id": 51527488, "comment_id": 90024005, "body": "Side note: An easier way to guarantee uniqueness when the size of the array matches the number possible values (each value is in the array exactly once) is <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">the Fisher-Yates Shuffle</a>. In this case, fill the array with 0 through 9 and then <a href=\"https://en.cppreference.com/w/cpp/algorithm/random_shuffle\" rel=\"nofollow noreferrer\">shuffle the values in the array</a>. The sample code given on the linked documentation page is almost exactly your use-case and easily adaptable."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532553108, "post_id": 51527488, "comment_id": 90024052, "body": "Feel free to take your fixed code, add on an explanation of what you changed and why, and self answer your question. Not only does it make the answer to the question obvious to any future programmer finds this while searching, it may earn you some good karma."}, {"owner": {"reputation": 11, "user_id": 10135681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec7f05a14c51ffe7f4b13cd7a21194e?s=128&d=identicon&r=PG&f=1", "display_name": "Innocent", "link": "https://stackoverflow.com/users/10135681/innocent"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532553270, "post_id": 51527488, "comment_id": 90024119, "body": "@user4581301 I will try it out for sure. Thanks for your answer."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1532553600, "post_id": 51527488, "comment_id": 90024258, "body": "@Innocent if you&#39;re just beginning to learn C++, it seems like you&#39;re being taught from a source that barely knows the difference from C. Modern C++ is markedly different from C and follows a different design mentality. If you want to pursue C++, I would suggest learning instead from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">recommended C++ book</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532553760, "post_id": 51527741, "comment_id": 90024317, "body": "@user4581301 you&#39;re right. i added example with shuffle."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532554285, "post_id": 51527741, "comment_id": 90024522, "body": "good point...didn&#39;t know std::iota yet, thanks for the hint :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532558093, "post_id": 51527741, "comment_id": 90025653, "body": "Due to its nature, purpose of <code>std::random_device</code> is generally to seed other random generators"}], "tags": [], "owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "is_accepted": false, "score": 1, "last_activity_date": 1532553960, "last_edit_date": 1532553960, "creation_date": 1532553199, "answer_id": 51527741, "question_id": 51527488, "link": "https://stackoverflow.com/questions/51527488/simple-number-generator-with-check-function-to-avoid-repeating/51527741#51527741", "title": "Simple number generator with check function to avoid repeating", "body": "<p>simple example how to do it using modern c++</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;set&gt;\n#include &lt;iostream&gt;\n\n\nint main()\n{\n    const uint32_t minValue = 0;\n    const uint32_t maxValue = 1000000;\n\n    const size_t numValues = 100;\n\n    std::random_device rd;\n    std::uniform_int_distribution&lt;int&gt; dist(minValue, maxValue);\n\n    std::set&lt;uint32_t&gt; myNumbers;\n\n    while (myNumbers.size() &lt; numValues)\n    {\n        myNumbers.insert(dist(rd));\n    }\n\n    for (const auto&amp; val : myNumbers)\n    {\n        std::cout &lt;&lt; val &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>random_device and uniform distribution give you proper random values.</p>\n\n<p>the \"set\" takes care of filtering duplicates.</p>\n\n<p>if you just want to shuffle a vector of e.g. numbers 0 to 100 use std::shuffle, example:</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include &lt;algorithm&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n\nint main()\n{\n    std::random_device rd;\n    std::mt19937 g(rd());\n\n    std::vector&lt;uint32_t&gt; myNumbers(100);\n    std::iota(myNumbers.begin(), myNumbers.end(), 0);\n    std::shuffle(myNumbers.begin(), myNumbers.end(), g);\n\n    for (const auto&amp; val : myNumbers)\n    {\n        std::cout &lt;&lt; val &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10135681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec7f05a14c51ffe7f4b13cd7a21194e?s=128&d=identicon&r=PG&f=1", "display_name": "Innocent", "link": "https://stackoverflow.com/users/10135681/innocent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1532553960, "creation_date": 1532552031, "question_id": 51527488, "link": "https://stackoverflow.com/questions/51527488/simple-number-generator-with-check-function-to-avoid-repeating", "title": "Simple number generator with check function to avoid repeating", "body": "<p>I am trying to write simple function to check if randomly generated value is already in array. I want to simply reach a number generator without repeating. Unluckly my code does not work. I mean it still generates me duplicated values. Could anyone tell me what I am doing wrong?</p>\n\n<blockquote>\n  <p>Checks if value exists in array:</p>\n</blockquote>\n\n<pre><code>bool valueExistsInArray(int* array, int value) {\n\nif ((sizeof(array) / sizeof(*array)) &lt;= 0) \n    return false; \n\nint i = 0;\n\ndo {\n    if (array[i] == value)\n        return true;\n    i++;\n} while (i &lt; (sizeof(array) / sizeof(*array)));\n\nreturn false;\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Generating random values from specified range:</p>\n</blockquote>\n\n<pre><code>int generateRandomValue(int from, int to) {  \n\nreturn (std::rand() % (to-from+1)) + from;\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Main function:</p>\n</blockquote>\n\n<pre><code>int main()\n{\nsrand((unsigned int)time(NULL));\n\nint array[10];\nint i = 0;\n\ndo {\n\n    int value = generateRandomValue(1, 10);\n\n    if (!valueExistsInArray(array, value)) {\n        array[i] = value;\n        i++;\n    }\n\n} while (i &lt; (sizeof(array) / sizeof(*array)));\n\nfor (int i = 0; i &lt; (sizeof(array) / sizeof(*array)); i++)  \n    std::cout &lt;&lt; \"Index: \" &lt;&lt; i &lt;&lt; \" Value: \" &lt;&lt; array[i] &lt;&lt; \"\\n\";\n\n\n_getch();\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "data-structures", "arduino"], "comments": [{"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1532552164, "post_id": 51527458, "comment_id": 90023627, "body": "if i understood correctly, passing by reference is what you are looking for. get a good c++ book to learn the basics (<a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1532552172, "post_id": 51527458, "comment_id": 90023631, "body": "You need to give a name to the parameter of <code>func1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10135691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec66ac89268ae7f042ef585410106919?s=128&d=identicon&r=PG&f=1", "display_name": "jc89", "link": "https://stackoverflow.com/users/10135691/jc89"}, "edited": false, "score": 0, "creation_date": 1532552752, "post_id": 51527503, "comment_id": 90023884, "body": "Thanks for this, that&#39;s working nicely! Now to see if I can get it working in my main project. I did find that I had to keep the struct definition in place, eg:   &#39;void func1(struct struct1 &amp;dataSet)&#39;"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1532552142, "creation_date": 1532552142, "answer_id": 51527503, "question_id": 51527458, "link": "https://stackoverflow.com/questions/51527458/how-to-pass-a-whole-structure-in-and-out-of-a-function-using-an-arduino-c/51527503#51527503", "title": "How to pass a whole structure in and out of a function using an Arduino / C++", "body": "<p><code>func1</code> is taking a <code>struct struct1</code>, i.e. a <em>copy</em> of a struct as a parameter.  As a result, changes made in the function are not visible in the calling code.  Even then, you're not actually changing the parameter but a local variable.</p>\n\n<p>You need to declare the parameter as a reference to link the parameter to the variable in the calling function.  Then you'll see the changes.</p>\n\n<pre><code>void func1(struct1 &amp;dataSet)\n{\n    dataSet.val1 = dataSet.val2;\n    dataSet.val2 = dataSet.val3;\n    dataSet.val3++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1532552236, "creation_date": 1532552236, "answer_id": 51527532, "question_id": 51527458, "link": "https://stackoverflow.com/questions/51527458/how-to-pass-a-whole-structure-in-and-out-of-a-function-using-an-arduino-c/51527532#51527532", "title": "How to pass a whole structure in and out of a function using an Arduino / C++", "body": "<p>I'm guessing a bit on the detail of what you want, but the essense of the answer is that your function must take a <em>reference</em> to the struct.</p>\n\n<pre><code>void func1(struct1&amp; dataSet)\n{\n    dataSet.val1 = dataSet.val2;\n    dataSet.val2 = dataSet.val3;\n    dataSet.val3++;\n}\n</code></pre>\n\n<p>The <code>&amp;</code> makes <code>dataSet</code> a reference. Your code was passing a <em>copy</em> of the structure (among other errors) which is why it could never alter the original structure.</p>\n"}], "owner": {"reputation": 3, "user_id": 10135691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec66ac89268ae7f042ef585410106919?s=128&d=identicon&r=PG&f=1", "display_name": "jc89", "link": "https://stackoverflow.com/users/10135691/jc89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 51527503, "answer_count": 2, "score": 0, "last_activity_date": 1532552236, "creation_date": 1532551832, "question_id": 51527458, "link": "https://stackoverflow.com/questions/51527458/how-to-pass-a-whole-structure-in-and-out-of-a-function-using-an-arduino-c", "title": "How to pass a whole structure in and out of a function using an Arduino / C++", "body": "<p>I'm pretty new to programming for Arduino, and am slightly confused about how I can use structures with functions.</p>\n\n<p>Below is an example - I have 2 sets of data stored in a structure, struct1 - firstSet and secondSet. I want to take each of these sets, and apply the function to them, changing all values. I then want to print the new values to the console, and the numbers should grow larger with each iteration, firstSet twice as fast as secondSet.</p>\n\n<p>This doesn't happen, and the initial values are printed over and over again. I'm not sure what I need to do to feed those values back out to their original structures. </p>\n\n<p>I've been looking at adding a return line, and also changing void to something else (int and void*), but I really can't seem to work this out. Is it even possible? Alternatively is there a better way to do this? Thanks in advance!</p>\n\n<pre><code>#include \"Arduino.h\"\n//The setup function is called once at startup of the sketch\nstruct struct1\n{\nint val1 = 1;\nint val2 = 2;\nint val3 = 3;\n\n};\n\nstruct1 firstSet;\nstruct1 secondSet;\n\nvoid func1(struct struct1)\n{\nstruct1 dataSet;\ndataSet.val1 = dataSet.val2;\ndataSet.val2 = dataSet.val3;\ndataSet.val3++;\n}\nvoid setup()\n{\n  Serial.begin(9600);\n  while (! Serial);\n  Serial.println(\"Console Online\");\n}\nvoid printAll()\n{\nSerial.println(firstSet.val1);\nSerial.println(firstSet.val2);\nSerial.println(firstSet.val3);\nSerial.println(\"---\");\nSerial.println(secondSet.val1);\nSerial.println(secondSet.val2);\nSerial.println(secondSet.val3);\nSerial.println(\"---END---\");\n}\n\n// The loop function is called in an endless loop\nvoid loop()\n{\nfunc1(firstSet);\nfunc1(firstSet);\nfunc1(secondSet);\nprintAll();\ndelay (1000);\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "compiler-errors", "redhat", "stdmap"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1532551768, "post_id": 51527392, "comment_id": 90023448, "body": "<code>this-&gt;lower_bound(...)</code> should fix the problem"}, {"owner": {"reputation": 55, "user_id": 1923802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f73fa1a1f5048ab0f1fd91279bbfb5?s=128&d=identicon&r=PG", "display_name": "Michael Horii", "link": "https://stackoverflow.com/users/1923802/michael-horii"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1532552108, "post_id": 51527392, "comment_id": 90023605, "body": "I could have sworn I tried that, but it must have been a dream. Your suggestion works--thank you!"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1532552152, "post_id": 51527392, "comment_id": 90023621, "body": "BTW, it&#39;s not that gcc 4.8 is <i>weaker</i> at disambiguation, it&#39;s following the standard closer than 3.2 apparently did."}, {"owner": {"reputation": 55, "user_id": 1923802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f73fa1a1f5048ab0f1fd91279bbfb5?s=128&d=identicon&r=PG", "display_name": "Michael Horii", "link": "https://stackoverflow.com/users/1923802/michael-horii"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1532552551, "post_id": 51527392, "comment_id": 90023791, "body": "Point taken, thanks again!"}], "owner": {"reputation": 55, "user_id": 1923802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f73fa1a1f5048ab0f1fd91279bbfb5?s=128&d=identicon&r=PG", "display_name": "Michael Horii", "link": "https://stackoverflow.com/users/1923802/michael-horii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1532552001, "answer_count": 0, "score": 0, "last_activity_date": 1532551769, "creation_date": 1532551556, "last_edit_date": 1532551769, "question_id": 51527392, "link": "https://stackoverflow.com/questions/51527392/errors-when-compiling-with-gcc-version-4-8-5-but-not-3-2-3-weaker-function-disa", "closed_reason": "Duplicate", "title": "Errors when compiling with gcc version 4.8.5 but not 3.2.3: Weaker function disambiguation in 4.8.5?", "body": "<p>I'm migrating code from a server with Red Hat Enterprise Linux ES release 3 to a server with Red Hat Enterprise Linux release 7.5. The code compiles successfully on the RH 3 box (with gcc 3.2.3), but not on the RH 7.5 box (with gcc 4.8.5). Here's the header file code in question:</p>\n\n<pre><code>#ifndef FSM_H\n#define FSM_H\n\n#include &lt;assert.h&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n\nnamespace fsm {\n\ntemplate&lt;class A&gt;\nclass Event {\n    bool (A::*Action)(void);    // Action to peform.  False means it failed.\n    std::string gotoState;      // State to transition on success\n\npublic:\n    Event();\n    Event( const Event &amp;rhs );\n    Event( bool (A::*Action)(void), const std::string &amp;newState );\n    const std::string HandleEvent(A *parent) const;\n};\n\n\ntemplate&lt;class A&gt;\nclass State : protected std::multimap&lt;const std::string,Event&lt;A&gt; &gt; {\npublic:\n    void addEvent(  const std::string &amp;event,\n                bool (A::*Action)(void),\n                const std::string &amp;newState);\n    const std::string HandleEvent( A *parent, const std::string &amp;event ) const;\n};\n\ntemplate&lt;class A&gt;\nvoid State&lt;A&gt;::addEvent(const std::string &amp;event,\n                    bool (A::*Action)(void),\n                    const std::string &amp;newState )\n{\n    insert(State&lt;A&gt;::value_type(event,Event&lt;A&gt;( Action, newState )));\n}\n\ntemplate&lt;class A&gt;\nconst std::string State&lt;A&gt;::HandleEvent( A *parent, const std::string &amp;event ) const\n{\n    typename State&lt;A&gt;::const_iterator i;\n    std::string newState;\n\n    for( i=lower_bound(event); i!=upper_bound(event); i++ ) {\n        newState = i-&gt;second.HandleEvent(parent);\n        if ( newState.size() ) return newState;\n    }\n    return std::string(); \n}\n\n} // namespace fsm\n#endif\n</code></pre>\n\n<p>The compiler complains about the <code>insert</code>, <code>lower_bound</code>, and <code>upper_bound</code> functions; it can't find a matching function for each of these functions. These should be interpreted as functions belonging to <code>std::map</code>, but the compiler appears to be trying to use <code>std::upper_bound</code> and <code>std::lower_bound</code> instead (I'm not sure what <code>insert</code> function the compiler is trying to use). </p>\n\n<p>In order to make it crystal-clear to the compiler, I modified the code so there was no ambiguity that <code>lower_bound</code>, <code>upper_bound</code>, and <code>insert</code> are <code>std::map</code> functions. For example, in this part of the code:</p>\n\n<pre><code>template&lt;class A&gt;\nconst std::string State&lt;A&gt;::HandleEvent( A *parent, const std::string &amp;event ) const\n{\n    typename State&lt;A&gt;::const_iterator i;\n    std::string newState;\n\n    for( i=lower_bound(event); i!=upper_bound(event); i++ ) {\n        newState = i-&gt;second.HandleEvent(parent);\n        if ( newState.size() ) return newState;\n    }\n    return std::string(); \n}\n</code></pre>\n\n<p>I modified the code as follows:</p>\n\n<pre><code>template&lt;class A&gt;\nconst std::string State&lt;A&gt;::HandleEvent( A *parent, const std::string &amp;event ) const\n{\n    typename State&lt;A&gt;::const_iterator i;\n    typename State&lt;A&gt;::const_iterator lowerBound;\n    typename State&lt;A&gt;::const_iterator upperBound;\n    std::string newState;\n\n    lowerBound = std::multimap&lt;const std::string, fsm::Event&lt;A&gt;, std::less&lt;const std::string&gt;,\n             std::allocator&lt;std::pair&lt;const std::string, fsm::Event&lt;A&gt; &gt; &gt; &gt;::lower_bound(event);\n    upperBound = std::multimap&lt;const std::string, fsm::Event&lt;A&gt;, std::less&lt;const std::string&gt;,\n             std::allocator&lt;std::pair&lt;const std::string, fsm::Event&lt;A&gt; &gt; &gt; &gt;::upper_bound(event);\n\n    for( i=lowerBound; i!=upperBound; i++ ) {\n        newState = i-&gt;second.HandleEvent(parent);\n        if ( newState.size() ) return newState;\n    }\n    return std::string();\n}\n</code></pre>\n\n<p>That works, but it's hokey, verbose and ugly. Is there a better way to help the compiler know that it should use the functions from <code>std::map</code> without having to spell it out in such a tedious manner? </p>\n"}, {"tags": ["c++", "recursion", "ifstream"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532550627, "post_id": 51527068, "comment_id": 90022925, "body": "It&#39;s not the correct call, if only because the function is called <code>dicReader</code> not <code>dictionaryReader</code>. A minor point but it is a good idea to avoid confusion by posting the genuine code, not untested code that might or might not illustrate your real problem."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1532554042, "post_id": 51527068, "comment_id": 90024419, "body": "Are you sure you want to do it recursively?"}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532550752, "post_id": 51527131, "comment_id": 90022982, "body": "Tail recursion might be worth mentioning."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532551139, "post_id": 51527131, "comment_id": 90023169, "body": "@john, that might be more than what the OP can digest."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532551268, "post_id": 51527131, "comment_id": 90023230, "body": "OK well I&#39;ll have a go."}, {"owner": {"reputation": 51, "user_id": 10072815, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9KIso2jQWk/AAAAAAAAAAI/AAAAAAAAAAA/O_v7-7y74EE/photo.jpg?sz=128", "display_name": "aelarabi", "link": "https://stackoverflow.com/users/10072815/aelarabi"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532552018, "post_id": 51527131, "comment_id": 90023564, "body": "Thanks @john! Please do.  @R Sahu - I am assuming the conditional will always cast to true if there are words left in the istream. Is that correct? Also, does the recursive call&#39;s second parameter of dict+1 ensure that we cannot return a value of MAXDICTWORDS? i.e. if we don&#39;t copy in a string from dictfile because dict[0] doesn&#39;t point anywhere, we return 0 and end our recursive call?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 51, "user_id": 10072815, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9KIso2jQWk/AAAAAAAAAAI/AAAAAAAAAAA/O_v7-7y74EE/photo.jpg?sz=128", "display_name": "aelarabi", "link": "https://stackoverflow.com/users/10072815/aelarabi"}, "edited": false, "score": 0, "creation_date": 1532552344, "post_id": 51527131, "comment_id": 90023700, "body": "@aelarabi, the expression will evaluate to <code>true</code> as  long as the read is successful. it does not say anything about what&#39;s left in the stream. No to the second question. If  you need to make sure that you don&#39;t read more than what the original can array can hold, you&#39;ll have to add more bookkeeping data."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1532550374, "creation_date": 1532550374, "answer_id": 51527131, "question_id": 51527068, "link": "https://stackoverflow.com/questions/51527068/recursively-transfer-strings-from-istream-into-array-c/51527131#51527131", "title": "Recursively transfer strings from istream into array - C++", "body": "<p>You are not using <code>count</code> correctly.</p>\n\n<p>You need to keep accumulating the value in the recursive calls.</p>\n\n<p>Also, <code>if (!dictfile.eof())</code> is wrong. See <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a> for details.</p>\n\n<p>The function can be simplified to:</p>\n\n<pre><code>int dictionaryReader(istream &amp;dictfile, string dict[])\n{\n    if (dictfile &gt;&gt; dict[0])\n    {\n        return (1 + dictionaryReader(dictfile, dict + 1));\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532552453, "post_id": 51527457, "comment_id": 90023748, "body": "That&#39;s definitely better as a second answer. It will be helpful to someone, I am sure."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1532551831, "creation_date": 1532551831, "answer_id": 51527457, "question_id": 51527068, "link": "https://stackoverflow.com/questions/51527068/recursively-transfer-strings-from-istream-into-array-c/51527457#51527457", "title": "Recursively transfer strings from istream into array - C++", "body": "<p>R Sahu has given you a complete answer, but there is an alternative way to formulate the recursive function. This alternative has the <code>count</code> variable as a parameter to the function. Like this</p>\n\n<pre><code>int dictionaryReader(istream &amp;dictfile, string dict[], int count)\n{\n    if (dictfile &gt;&gt; dict[0])\n    {\n        return dictionaryReader(dictfile, dict + 1, count + 1);\n    }\n    return count;\n}\n</code></pre>\n\n<p>When the function is initially called you supply a value of zero for <code>count</code>.</p>\n\n<pre><code>int nwords = dictionaryReader(dictfile, dict, 0);\n</code></pre>\n\n<p>In this implementation dictionaryReader calls itself and returns the resulting value directly. This  is called <em>tail recursion</em>. In the alternative implementation dictionaryReader calls itself and then adds one to the result, so it isn't tail recursive.</p>\n\n<p>The advantage of tail recursion is that it is trivially converted into a while loop (the while loop you were told to avoid). Some compilers perform this conversion for you as an optimisation. So you write a tail recursive function but end up with the same code as if you had written a while loop.</p>\n"}], "owner": {"reputation": 51, "user_id": 10072815, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j9KIso2jQWk/AAAAAAAAAAI/AAAAAAAAAAA/O_v7-7y74EE/photo.jpg?sz=128", "display_name": "aelarabi", "link": "https://stackoverflow.com/users/10072815/aelarabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532551831, "creation_date": 1532550043, "last_edit_date": 1532551363, "question_id": 51527068, "link": "https://stackoverflow.com/questions/51527068/recursively-transfer-strings-from-istream-into-array-c", "title": "Recursively transfer strings from istream into array - C++", "body": "<p>I am trying to copy in strings from a <code>.txt</code> file (every word is on a new line) into an array. The main routine would look like this.</p>\n\n<pre><code>const int MAXDICTWORDS = 5000;\n\nint main()\n{\n    string dict[MAXDICTWORDS];\n    ifstream dictfile;  // file containing the list of words\n\n    dictfile.open(\"words.txt\");\n    if (!dictfile) {\n        cout &lt;&lt; \"File not found!\" &lt;&lt; endl;\n        return (1);\n    }\n\n    int nwords = dicReader(dictfile, dict);\n    // dict should now hold array of words from words.txt\n    // nwords will be the amount of words in the array\n}\n</code></pre>\n\n<p>This is my current implementation of <code>dicReader</code>. <code>dict</code> will always be empty when passed to this function. I am practicing with recursion, so no <code>while</code> or <code>for</code> loops can be used. Any ideas on what I am missing?</p>\n\n<pre><code>int dicReader(istream &amp;dictfile, string dict[])\n{\n    int count = 0; // know this is wrong, recursive call will always reset count to 0\n    string item;\n\n    if (!dictfile.eof())\n    {\n        dictfile &gt;&gt; item;\n        dict[0] = item;\n        dicReader(dictfile, dict + 1); // is this the correct recursive call?\n        count++;\n    }\n\n    return count;\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "c++17", "clang++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1532550049, "post_id": 51527014, "comment_id": 90022665, "body": "Here&#39;s another one, maybe more fitting: <a href=\"https://stackoverflow.com/questions/48446983/deducing-first-template-argument-with-other-template-parameters-defaulted\" title=\"deducing first template argument with other template parameters defaulted\">stackoverflow.com/questions/48446983/&hellip;</a>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1532550507, "post_id": 51527014, "comment_id": 90022876, "body": "@Rakete1111 I agree it is a dupe of the second link---I suggest this question be closed."}, {"owner": {"reputation": 31, "user_id": 10135542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b720fcb09787b8dd5e816cfb114368?s=128&d=identicon&r=PG&f=1", "display_name": "anihilist", "link": "https://stackoverflow.com/users/10135542/anihilist"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1532550746, "post_id": 51527014, "comment_id": 90022976, "body": "@Rakete1111 Thanks, that was quick :) I searched for over an hour, but didn&#39;t find these. Anyway, -frelaxed-template-template-args indeed fixes the issue. I&#39;ll try to understand exactly why tomorrow, and then I&#39;ll probably close this."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1532551191, "post_id": 51527014, "comment_id": 90023192, "body": "@anihilist If you don&#39;t know the right keywords, there is no way to find dupes :) Some questions are really easy to find, but others, not so much - like this one. :("}], "owner": {"reputation": 31, "user_id": 10135542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b720fcb09787b8dd5e816cfb114368?s=128&d=identicon&r=PG&f=1", "display_name": "anihilist", "link": "https://stackoverflow.com/users/10135542/anihilist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1532550812, "answer_count": 0, "score": 3, "last_activity_date": 1532573677, "creation_date": 1532549769, "last_edit_date": 1532573677, "question_id": 51527014, "link": "https://stackoverflow.com/questions/51527014/partial-ordering-in-conjunction-with-template-template-parameter-and-variadic-te", "closed_reason": "Duplicate", "title": "Partial ordering in conjunction with template template parameter and variadic templates", "body": "<p>I have a question about template specialization in conjunction with variadic templates and template template parameters/arguments.</p>\n\n<p>The following little program compiles with <em><code>Clang 6.0.1</code></em> and <em><code>GCC 8.1.1</code></em> (target: <code>x86_64-pc-linux-gnu</code>).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nstruct IndexSlot3 {\n    static constexpr std::size_t size = 3;\n};\n\ntemplate&lt;typename T_, typename... IndexSlots_&gt;\nstruct Tensor {\n    Tensor() { std::cout &lt;&lt; \"Order N picked\" &lt;&lt; std::endl; }\n};\ntemplate&lt;typename T_, typename IndexSlot0_&gt;\nstruct Tensor&lt;T_, IndexSlot0_&gt; {\n    Tensor() { std::cout &lt;&lt; \"Order 1 picked\" &lt;&lt; std::endl; }\n};\ntemplate&lt;typename T_, typename IndexSlot0_, typename IndexSlot1_&gt;\nstruct Tensor&lt;T_, IndexSlot0_, IndexSlot1_&gt; {\n    Tensor() { std::cout &lt;&lt; \"Order 2 picked\" &lt;&lt; std::endl; }\n};\n\nint main(int argc, char** argv) {\n    Tensor&lt;int, IndexSlot3&gt; t1;\n    Tensor&lt;int, IndexSlot3, IndexSlot3&gt; t2;\n    Tensor&lt;int, IndexSlot3, IndexSlot3, IndexSlot3&gt; t3;\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Compile commands:</strong></p>\n\n<pre><code>clang++ -std=c++17 main.cpp -o main -Wall -Wpedantic\ng++ -std=c++17 main.cpp -o main -Wall -Wpedantic\n</code></pre>\n\n<hr>\n\n<p><strong>Running the program prints</strong></p>\n\n<pre><code>Order 1 picked\nOrder 2 picked\nOrder N picked\n</code></pre>\n\n<p>with both compilers, as expected.</p>\n\n<p>However, when I extend the above to the following program, where <code>Tensor</code> also takes a template template parameter defining storage, Clang picks the primary template in all three cases, while GCC still picks the specializations.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nstruct IndexSlot3 {\n    static constexpr std::size_t size = 3;\n};\n\ntemplate&lt;typename T_, std::size_t... sizes&gt;\nstruct CArrayStorage {\n    using Type = T_*;\n};\ntemplate&lt;typename T_, std::size_t size0_&gt;\nstruct CArrayStorage&lt;T_, size0_&gt; {\n    using Type = T_[size0_];\n};\ntemplate&lt;typename T_, std::size_t size0_, std::size_t size1_&gt;\nstruct CArrayStorage&lt;T_, size0_, size1_&gt; {\n    using Type = T_[size0_][size1_];\n};\n\ntemplate&lt;typename T_,\n        template&lt;typename, std::size_t...&gt; typename Storage_,\n        typename... IndexSlots_&gt;\nstruct Tensor {\n    typename Storage_&lt;T_, IndexSlots_::size...&gt;::Type _storage;\n    Tensor() { std::cout &lt;&lt; \"Order N picked\" &lt;&lt; std::endl; }\n};\ntemplate&lt;typename T_,\n        template&lt;typename, std::size_t&gt; typename Storage_,\n        typename IndexSlot0_&gt;\nstruct Tensor&lt;T_, Storage_, IndexSlot0_&gt; {\n    typename Storage_&lt;T_, IndexSlot0_::size&gt;::Type _storage;\n    Tensor() { std::cout &lt;&lt; \"Order 1 picked\" &lt;&lt; std::endl; }\n};\ntemplate&lt;typename T_,\n        template&lt;typename, std::size_t, std::size_t&gt; typename Storage_,\n        typename IndexSlot0_, typename IndexSlot1_&gt;\nstruct Tensor&lt;T_, Storage_, IndexSlot0_, IndexSlot1_&gt; {\n    typename Storage_&lt;T_, IndexSlot0_::size, IndexSlot1_::size&gt;::Type _storage;\n    Tensor() { std::cout &lt;&lt; \"Order 2 picked\" &lt;&lt; std::endl; }\n};\n\nint main(int argc, char** argv) {\n    Tensor&lt;int, CArrayStorage, IndexSlot3&gt; t1;\n    Tensor&lt;int, CArrayStorage, IndexSlot3, IndexSlot3&gt; t2;\n    Tensor&lt;int, CArrayStorage, IndexSlot3, IndexSlot3, IndexSlot3&gt; t3;\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Output with Clang:</strong></p>\n\n<pre><code>Order N picked\nOrder N picked\nOrder N picked\n</code></pre>\n\n<hr>\n\n<p><strong>Output with GCC:</strong></p>\n\n<pre><code>Order 1 picked\nOrder 2 picked\nOrder N picked\n</code></pre>\n\n<p>I <em>think</em> GCC is right, because the specialization and the primary match equally well, so the specialization should be picked. But I'm not entirely sure how the introduction of the template template parameter changes things.</p>\n\n<p>Should I file a bug against Clang?\nAgainst GCC?\nAgainst both?\nHave I wandered into the realm of undefined behaviour without realizing it?</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>[The examples aren't exactly minimal, but I wanted to provide a little bit of context, so you can understand what I'm trying to do.]</p>\n"}, {"tags": ["c++", "eclipse-photon"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1532551045, "post_id": 51526994, "comment_id": 90023115, "body": "A makefile is mostly so that <i>you</i> can easily compile your code. The other files objects.mk and sources.mk are also makefiles. IIRC they are kind of sub-makefiles that are includes or invoked by the main makefile."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532552539, "post_id": 51526994, "comment_id": 90023787, "body": "The Binaries folder is virtual. It gathers all of the binaries that are inside the project folders into one place so you can find them easily. The binaries themselves will wind up in the root of the Release and Debug folders (or the folders for any other configurations you define for the project) after they are successfully built. The makefile, objects.mk and sources.mk.files John covered. These are be useful as you can run them on their own without the Eclipse GUI and get the same results by typing <code>make</code> in the appropriate folder."}], "owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1532551080, "answer_count": 0, "score": 0, "last_activity_date": 1532549669, "creation_date": 1532549669, "question_id": 51526994, "link": "https://stackoverflow.com/questions/51526994/c-binaries-makefile-and-mk", "closed_reason": "Duplicate", "title": "C++, binaries, makefile and .mk", "body": "<p>I recently decided to download eclipse photon for C++ development. I have never written a C++ or C program before. I started a new project and they have a pre-built hello world program that I went with just to check it out.</p>\n\n<p>I noticed in the Project Explorer that there is the main src folder but there is also a folder called Debug and inside it is another src folder which includes: makefile, objects.mk and sources.mk.</p>\n\n<p>On top of that there is a Binaries folder (or file?) not really sure what any of this stuff is. I read a few things about the makefile essentially its so others can easily compile your code, correct? However, the rest of these files: objects.mk, sources.mk and the binaries file (folder?) what are these for?</p>\n"}, {"tags": ["android", "c++", "visual-studio", "android-studio"], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 8415177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68efaf3eb2e64dcc5ce28d99433274fb?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Patel", "link": "https://stackoverflow.com/users/8415177/nilesh-patel"}, "edited": false, "score": 0, "creation_date": 1532925913, "post_id": 51527432, "comment_id": 90139424, "body": "is there any way to get line number of .SO C++ build crash?. We are getting memory leak issue in C++ sometimes it&#39;s hard for us to find the exact threading memory leak because of the same function in class."}, {"owner": {"reputation": 1890, "user_id": 5164318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VjzX.jpg?s=128&g=1", "display_name": "emandt", "link": "https://stackoverflow.com/users/5164318/emandt"}, "reply_to_user": {"reputation": 46, "user_id": 8415177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68efaf3eb2e64dcc5ce28d99433274fb?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Patel", "link": "https://stackoverflow.com/users/8415177/nilesh-patel"}, "edited": false, "score": 1, "creation_date": 1532958797, "post_id": 51527432, "comment_id": 90156956, "body": "99% of JVM crashes caused by a native code prints a big stacktrace in the Log. Native code is not interpreted so it&#39;s not possible to get a line number because the .SO is compiled for ARM/x86. You can get the method name and THE MEMORY OFFSET (it&#39;s write as &quot;method +96&quot;) starting from THAT method&#39;s memory address, but it could be quite difficult to suppose a line number due to the compiler optimizations that could deeply change the code."}], "tags": [], "owner": {"reputation": 1890, "user_id": 5164318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VjzX.jpg?s=128&g=1", "display_name": "emandt", "link": "https://stackoverflow.com/users/5164318/emandt"}, "is_accepted": false, "score": 0, "last_activity_date": 1532551745, "creation_date": 1532551745, "answer_id": 51527432, "question_id": 51526989, "link": "https://stackoverflow.com/questions/51526989/how-to-debug-visual-studio-2017-generated-c-code-so-file-and-others-third-par/51527432#51527432", "title": "How to debug visual studio 2017 generated C++ code .SO file and others third party libraries in android?", "body": "<p>You cannot debug Native C++ code as you could be used on Android Studio. The only way is to print logs to LogCat to see where the Code flows.</p>\n"}], "owner": {"reputation": 46, "user_id": 8415177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68efaf3eb2e64dcc5ce28d99433274fb?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Patel", "link": "https://stackoverflow.com/users/8415177/nilesh-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532551745, "creation_date": 1532549660, "question_id": 51526989, "link": "https://stackoverflow.com/questions/51526989/how-to-debug-visual-studio-2017-generated-c-code-so-file-and-others-third-par", "title": "How to debug visual studio 2017 generated C++ code .SO file and others third party libraries in android?", "body": "<p>I have my C++ library code in Visual studio and I am generating AAR format lib in android studio and using that in my android project. </p>\n\n<p>aar format file built using multiple third party libraries. Is there any way to  debug in Android?</p>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 1996, "user_id": 3357105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c368973a174d114614a9debc188dad1?s=128&d=identicon&r=PG&f=1", "display_name": "ptb", "link": "https://stackoverflow.com/users/3357105/ptb"}, "edited": false, "score": 1, "creation_date": 1532555520, "post_id": 51526488, "comment_id": 90024937, "body": "There&#39;s nothing special about private members that would keep you from using them with <code>mpi</code>."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1532588626, "post_id": 51526488, "comment_id": 90033280, "body": "You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you want help in debugging your application. Also please show your own debugging effort - e.g. if you were convinced this had something to do with visibility, you could easily change that and tried it out. Then you would have found out it doesn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 3121, "user_id": 656552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hIcsv.jpg?s=128&g=1", "display_name": "Manolete", "link": "https://stackoverflow.com/users/656552/manolete"}, "is_accepted": true, "score": 0, "last_activity_date": 1585134503, "creation_date": 1585134503, "answer_id": 60847571, "question_id": 51526488, "link": "https://stackoverflow.com/questions/51526488/mpi-operations-on-private-members-of-a-class/60847571#60847571", "title": "MPI operations on private members of a Class", "body": "<p>A minimal reproducible example that demonstrates that private members are not a problem in MPI.</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n\n\nclass foo\n{\nprivate:\n  bool _isOperational;\n\npublic:\n  int rank;\n  int size;\n\n  foo()\n  { \n   _isOperational = false;\n  }\n  void changeOperational(bool b){\n    _isOperational = b;\n  }\n\n  void printOperational(){\n    printf(\"Rank: %d -&gt; Operational: %d\\n\",rank,_isOperational);\n  }\n\n void bcast(){\n    MPI_Bcast(&amp;_isOperational,1,MPI::BOOL, 0, MPI_COMM_WORLD);\n  }\n\n};\n\n\nint main(){\n\n  foo f;\n  MPI_Init(NULL,NULL);\n\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;f.size);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;f.rank);\n  f.printOperational();\n  if(f.rank == 0)\n    f.changeOperational(true);\n\n\n  f.bcast();\n  f.printOperational();\n\n\n  MPI_Finalize();\n\n\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3121, "user_id": 656552, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/hIcsv.jpg?s=128&g=1", "display_name": "Manolete", "link": "https://stackoverflow.com/users/656552/manolete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 60847571, "answer_count": 1, "score": 0, "last_activity_date": 1585134503, "creation_date": 1532547524, "last_edit_date": 1585133833, "question_id": 51526488, "link": "https://stackoverflow.com/questions/51526488/mpi-operations-on-private-members-of-a-class", "title": "MPI operations on private members of a Class", "body": "<p>I am wondering if you could use MPI with private members of C++ classes, for instance <code>void bcast</code> in the example below:</p>\n\n<pre><code>class foo\n{\npublic:\n  int rank;\n  int size;\n\n  foo()\n  { \n   _isOperational = false;\n  }\n\n void bcast(){\n    MPI_Bcast(&amp;_isOperational,1,MPI::BOOL, 0, MPI_COMM_WORLD);\n  }\nprivate:\n  bool _isOperational;\n\n};\n</code></pre>\n\n<p>All I am getting is a deadlock. Does this make some sense? </p>\n"}, {"tags": ["c++", "vector", "stdmove"], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1532565205, "post_id": 51526463, "comment_id": 90027086, "body": "Hm, and is there no additional guarantee for end Iterators of a <code>std::vector</code>?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 2, "creation_date": 1532572001, "post_id": 51526463, "comment_id": 90028376, "body": "<code>cppreference</code> I think, not <code>cccpreference</code>. The latter should be for fans of the former USSR ;)"}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 22, "last_activity_date": 1532604833, "last_edit_date": 1532604833, "creation_date": 1532547441, "answer_id": 51526463, "question_id": 51526424, "link": "https://stackoverflow.com/questions/51526424/is-the-front-address-of-stdvector-move-invariant/51526463#51526463", "title": "Is the front address of std::vector move invariant?", "body": "<p>From <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">cppreference.com</a> :</p>\n\n<blockquote>\n  <p>After container move construction (overload (6)), references, pointers, and iterators (other than the end iterator) to other remain valid, but refer to elements that are now in *this. The current standard makes this guarantee via the blanket statement in \u00a723.2.1[container.requirements.general]/12, and a more direct guarantee is under consideration via <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/lwg-active.html#2321\" rel=\"nofollow noreferrer\">LWG 2321</a>.</p>\n</blockquote>\n\n<p>Pointers to elements are not invalidated, including pointers to the first element.</p>\n"}], "owner": {"reputation": 793, "user_id": 5144825, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4cbcab1ee1bcc24718df68739d4e5226?s=128&d=identicon&r=PG&f=1", "display_name": "Teodor Nikolov", "link": "https://stackoverflow.com/users/5144825/teodor-nikolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 51526463, "answer_count": 1, "score": 18, "last_activity_date": 1532604833, "creation_date": 1532547241, "last_edit_date": 1532547344, "question_id": 51526424, "link": "https://stackoverflow.com/questions/51526424/is-the-front-address-of-stdvector-move-invariant", "title": "Is the front address of std::vector move invariant?", "body": "<p>In the following snippet:</p>\n\n<pre><code>std::vector&lt;double&gt; a(100, 4.2);\nauto* a_ptr = a.data();\n\nauto b = std::move(a);\nauto* b_ptr = b.data();\n\nstd::cout &lt;&lt; ((b_ptr == a_ptr) ? \"TRUE\" : \"FALSE\") &lt;&lt; '\\n';\n</code></pre>\n\n<p>does the C++ standard guarantee that <code>b_ptr</code> is always equal to <code>a_ptr</code> after <code>std::move</code>? Running the code on <a href=\"https://wandbox.org/\" rel=\"noreferrer\">wandbox</a> prints <code>TRUE</code>.</p>\n"}, {"tags": ["c++", "linux", "shared-libraries", "libstdc++", "gcc5"], "answers": [{"comments": [{"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1532551788, "post_id": 51527400, "comment_id": 90023456, "body": "Ok, thanks, this makes a lot of sense, I&#39;ll try that out. Still at least an upvote. Am I being too paranoid and maybe I should just drop the idea to use static libstdc++? Is stdlibc++ backwards compatible, and using a toolchain with a lets say gcc 5.4.0 work for modern distros?"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1532552321, "post_id": 51527400, "comment_id": 90023687, "body": "I updated the answer to mention that you actually need the second copy of libstdc++ because of the delayed loading of libpthread."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1532552478, "post_id": 51527400, "comment_id": 90023759, "body": "GCC 5 is too recent for wide distribution support, and libdstdc++ is backwards-compatible, but not forwards-compatible, so you need to build on the oldest supported distribution. Some toolchains use a hybrid linkage model where only newer libstdc++ bits are linked statically, so that applications run with the old, unchanged system libstdc++ from the system compiler. However, the harder (read: as of yet unsolved) problem is the <code>dlopen</code> of libpthread in a process which previous did not load libpthread, and an expectation that <code>pthread_create</code> will work."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1532552584, "post_id": 51527400, "comment_id": 90023808, "body": "Many thanks for sheding light on the internals of this:) Now at least I feel I understand what is going on."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1532592729, "post_id": 51527400, "comment_id": 90035589, "body": "Thank you very much, stuff seems to work now. One more thing, I implemented the hiding by using a linker script, but many articles I read, said that <code>-fvisibility=hidden</code> is superior. But if I understand correctly, <code>-fvisibility=hidden</code> (which I am already using when compiling my sources) does not control visibility of symbols that come from archive (like in this case <code>libstdc++.a</code>) and thus linker script is the only way here right?"}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 1, "last_activity_date": 1532552280, "last_edit_date": 1532552280, "creation_date": 1532551583, "answer_id": 51527400, "question_id": 51526304, "link": "https://stackoverflow.com/questions/51526304/stdthread-weak-when-using-static-libstdc-thus-causing-crash-at-runtime/51527400#51527400", "title": "std::thread weak when using -static-libstdc++, thus causing crash at runtime", "body": "<p>If you statically link a DSO against libstdc++ without hiding the libstdc++ symbols, and the main program is linked against libstdc++ as well, then the symbol definitions in the main program will interpose/preempt the definitions in the DSO when it is opened with <code>dlopen</code>.</p>\n\n<p>However, because the main program is not linked against libpthread, the the system libstdc++ DSO in the process image saw that the libpthread symbols were unavailable (null), and thus disabled thread support.  However, your DSO needs thread support, but can't get it from the system libstdc++.</p>\n\n<p>As an immediate workaround, you can hide all the statically linked libstdc++ symbols in the DSO.  Then no interposition will take place, and your DSO will actually use the libstdc++ copy in the DSO itself, which has already established that there should not be any thread support in the process.</p>\n\n<p>But this will likely not solve all of your problems because late loading of libpthread via <code>dlopen</code> has its problems.  We fixed one bug here:</p>\n\n<ul>\n<li><a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=16628\" rel=\"nofollow noreferrer\">Segfault after a binary without pthread dlopen()s a library linked with pthread </a></li>\n</ul>\n\n<p>But your distribution may not have that fix, and I expect there will be other issues, one of them being: The second, statically linked copy of libstdc++ is actually needed here because the system libstdc++ has been loaded without thread support (because libpthread was not loaded when its symbols were bound, causing the crash you observed), so you cannot use it for creating threads.  It also has activated optimizations which make the library not thread safe (avoid atomic instructions and things like that).</p>\n"}], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 51527400, "answer_count": 1, "score": 1, "last_activity_date": 1532552280, "creation_date": 1532546743, "last_edit_date": 1532547503, "question_id": 51526304, "link": "https://stackoverflow.com/questions/51526304/stdthread-weak-when-using-static-libstdc-thus-causing-crash-at-runtime", "title": "std::thread weak when using -static-libstdc++, thus causing crash at runtime", "body": "<p>I need to build a portable shared object, which is a plugin for another software on Linux. I did some amount of reading on the subject, came down to the conclusion, that I should build a sysrooted gcc (gcc 5.4.0 if it matters) with a decently old glibc (to provide compatibility with older systems), link with <code>-static-libstdc++</code> and <code>-static-libgcc</code> thus arriving to a point where I have something that only depends on the hosts <code>glibc</code> and some other minor stuff which will always be present.</p>\n\n<p>Now, I did all that and now I am experiencing a weird crash - segmentation fault happens in a place where the code calls <code>std::thread</code>, and gdb actually shows that the stack frame is inside <code>libstdc++.so.6</code> (where is shouldn't be, <code>ldd</code> of my shared object also does not list <code>libstdc++.so</code>). The top of the stack at the crash is:</p>\n\n<pre><code>#0  0x0000000000000000 in ?? ()\n#1  0x00007ffff79075e3 in std::thread::_M_start_thread(std::shared_ptr&lt;std::thread::_Impl_base&gt;, void (*)()) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6 # THIS SHOULD NOT BE HERE RIGHT?\n#2  0x00007ffff5a25a5c in std::thread::thread&lt;void (ReferenceAnalytics::*)(std::timed_mutex&amp;), ReferenceAnalytics*&amp;, std::reference_wrapper&lt;std::timed_mutex&gt; &gt;\n    (this=0x7fffffffcf40, __f=\n    @0x7fffffffcf60: (void (ReferenceAnalytics::*)(ReferenceAnalytics * const, std::timed_mutex &amp;)) 0x7ffff5a1750c &lt;ReferenceAnalytics::WorkerThreadMethod(std::timed_mutex&amp;)&gt;)\n    at /home/developer/Toolchains/x86_64-unknown-linux-gnu/x86_64-unknown-linux-gnu/include/c++/5.4.0/thread:137 # Looks like my toolchain\n</code></pre>\n\n<p>So, I did some reading, and then using <code>nm</code> discovered that my shared object has all the <code>std::thread</code> stuff like ctor, dtor, swap, .... defined as weak symbols (which I assume causes a collision if the host that loads the plugin uses dynamic <code>libstdc++</code> and then my calls are routed there and all hell breaks loose, is this right?).</p>\n\n<p>My further attempts of googling and reading did not give me an answer to how can I control this as in force the <code>std::thread</code> stuff to be resolved to the static <code>libstdc++</code> in my sysrooted gcc?</p>\n\n<p>More over, I made a small executable that just does <code>dlopen</code> on my shared object and then calls a method which internally constructs the thread - if the executable is also built with <code>-static-libstdc++</code> all is well, if not, the crash happens. So I assume my theory about the weak symbol for <code>std::thread</code> being resolved to the hosts <code>libstdc++</code> is correct, but how to solve this?</p>\n"}, {"tags": ["c++", "docker"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532547331, "post_id": 51526098, "comment_id": 90021478, "body": "Some causes why <code>std::fgets()</code> might fail, and returns a <code>NULL</code> pointer, are listed <a href=\"https://en.cppreference.com/w/cpp/io/c/fgets\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532550045, "post_id": 51526098, "comment_id": 90022657, "body": "I don&#39;t know the reason but your code shows the common misunderstanding that <code>feof</code> tells you whether your file position is at the &#39;end of file&#39;. It doesn&#39;t, instead it tells you whether the end of file flag is set. The end of file flag is only set when a <b>previous</b> operation failed because of end of file. There is no point calling <code>feof</code> before a <code>fgets</code> to try and anticipate an end of file error. In short I would guess that <code>fgets</code> fails because you hit the end of file, despite your attempts to avoid this.."}, {"owner": {"reputation": 11, "user_id": 10135341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5c88456e1f50fd0fb32f4c00c96c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/10135341/archana"}, "edited": false, "score": 0, "creation_date": 1532554369, "post_id": 51526098, "comment_id": 90024555, "body": "Thank&#39;s for your comment. I could resolve the issue. It was due to a missing library libtinfo.so.5 for shell scrip (&quot;sh&quot;) inside the container. After the library has been copied to /lib/ inside the container it started working."}], "answers": [{"comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1532559725, "post_id": 51527996, "comment_id": 90026037, "body": "How did you find this out?  What changes did you have to make to your Dockerfile to address it?"}], "tags": [], "owner": {"reputation": 11, "user_id": 10135341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5c88456e1f50fd0fb32f4c00c96c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/10135341/archana"}, "is_accepted": false, "score": 0, "last_activity_date": 1532554418, "creation_date": 1532554418, "answer_id": 51527996, "question_id": 51526098, "link": "https://stackoverflow.com/questions/51526098/c-program-in-docker-container/51527996#51527996", "title": "C++ Program in Docker container", "body": "<p>Thank's for your comment. I could resolve the issue. It was due to a missing library libtinfo.so.5 for shell scrip (\"sh\") inside the container. After the library has been copied to /lib/ inside the container it started working</p>\n"}], "owner": {"reputation": 11, "user_id": 10135341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5c88456e1f50fd0fb32f4c00c96c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Archana", "link": "https://stackoverflow.com/users/10135341/archana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532554418, "creation_date": 1532545903, "last_edit_date": 1532547190, "question_id": 51526098, "link": "https://stackoverflow.com/questions/51526098/c-program-in-docker-container", "title": "C++ Program in Docker container", "body": "<p>I am using following function inside container to execute command line argument <code>cd /mypath &amp;&amp; sha1sum -c mysha1sumfile</code> to compare the sha1sum of files available in /mypath with the values in mysha1sumfile in the same path. The command is working in when I execute it as binary. The same is working when I tried manually inside the container by executing /bin/bash (inside container). But not working from the program.</p>\n\n<pre><code>executeCmd(const char* command)\n{\n  string response = \"\";\n  char buffer[256];   \n  FILE* pipe = popen(command,\"r\");  \n\n  if(!pipe)  {  \n    response = \"ERROR\";  \n  }  \n  while(!feof(pipe)){        \n    if(fgets(buffer,128,pipe) != NULL){\n      response += buffer;\n    }  \n  }  \n  pclose(pipe);  \n  return response;  \n}\n</code></pre>\n\n<p>Verified that <code>pipe</code> is not <code>NULL</code> and <code>feof(pipe)</code> is also not <code>NULL</code>. But <code>fgets()</code> returning <code>NULL</code>.</p>\n\n<p>What can cause that?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1532544333, "post_id": 51525727, "comment_id": 90020177, "body": "<code>d1</code> has no possible conversion to <code>Base*</code> and your code simply won&#39;t compile. Maybe you meant <code>static_cast&lt;Base&amp;&gt;</code>, in which case the cast is implicit and doesn&#39;t add anything."}, {"owner": {"reputation": 11, "user_id": 9944444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f961c89af10b32696f32763063406ddb?s=128&d=identicon&r=PG", "display_name": "Saumya Pandey", "link": "https://stackoverflow.com/users/9944444/saumya-pandey"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1532544490, "post_id": 51525727, "comment_id": 90020256, "body": "Okay! What do you mean by &quot;has no possible conversion to Base*&quot; ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1532544592, "post_id": 51525727, "comment_id": 90020305, "body": "Just that. Trying to convert from a <code>Derived</code> object to a <code>Base*</code> pointer doesn&#39;t make sense and the language won&#39;t support it. If you want a <code>Base*</code> pointer to <code>d1</code> you have to take it&#39;s address, then the resulting <code>Derived*</code> <i>pointer</i> can be converted to <code>Base*</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1532547486, "post_id": 51525727, "comment_id": 90021536, "body": "Try it. ......."}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 2, "last_activity_date": 1532545139, "creation_date": 1532545139, "answer_id": 51525929, "question_id": 51525727, "link": "https://stackoverflow.com/questions/51525727/what-difference-does-it-make-if-i-dont-use-pointer/51525929#51525929", "title": "what difference does it make if i dont use pointer?", "body": "<p>Casting pointers (or references) doesn't do anything to the underlying objects, it just changes how you LOOK at something at the given address (when going through the casted pointer.)  If the cast is invalid, of course your code will have undefined behavior.</p>\n\n<p>Without pointers, you are actually modifying objects.</p>\n\n<pre><code>Derived d1;\nBase b = d1; // makes a copy of just the \"Base\" part of d1\n</code></pre>\n\n<p>The above is ok, and needs no cast, but it's not a view of d1 looking like a Base.  It is a sliced off copy of the base part of d1.  \"b\" is an unrelated object, merely initialized by d.  That is why it's called \"slicing\".</p>\n\n<p>Casting an object to a pointer is non-sensical, unless your class has a conversion operator to that type, though that would be a generally terrible design:</p>\n\n<pre><code>struct Derived : Base {   \n    explicit operator Base*() { return this; } // don't really do this, but it compiles\n};\n</code></pre>\n\n<p>Given such a weird conversion operator, your cast would work, and it would call Derived::operator Base*.  Because it's explicit, you would need the cast or the conversion would (usually) not happen.  In general, I think you should think about this as mis-matching concepts.  Pointers are not objects; they refer to them.  Doing things to blur that is going to make your program very hard to reason about.</p>\n"}], "owner": {"reputation": 11, "user_id": 9944444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f961c89af10b32696f32763063406ddb?s=128&d=identicon&r=PG", "display_name": "Saumya Pandey", "link": "https://stackoverflow.com/users/9944444/saumya-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1532545139, "creation_date": 1532544275, "last_edit_date": 1532544441, "question_id": 51525727, "link": "https://stackoverflow.com/questions/51525727/what-difference-does-it-make-if-i-dont-use-pointer", "title": "what difference does it make if i dont use pointer?", "body": "<p>I was watching a video on youtube, how to do casting in c++? \nAs this is static casting I just want to know what will happen if I don't use pointers.</p>\n\n<pre><code>class Base{};\nclass Derived1: public Base {};\nclass Derived2: public Base{};\n\nint main(){\n    Derived d1;\n    Derived d2;\n\n    Base *bp1=static_cast&lt;Base*&gt;(&amp;d1);\n    Base *bp2=static_cast&lt;Base*&gt;(&amp;d2);\n\n    Derived *d1p=static_cast&lt;Derived1*&gt;(bh2);\n    Derived *d2p=static_cast&lt;Derived2*&gt;(bp1);\n\n    return 0;\n}\n</code></pre>\n\n<p>For example: </p>\n\n<pre><code>    Base bp1=static_cast&lt;Base*&gt;(d1);\n</code></pre>\n\n<p>PS: I am sorry if this question doesn't make any sense.</p>\n"}, {"tags": ["c++", "qt", "multiple-inheritance", "qtplugin"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1532560209, "post_id": 51525696, "comment_id": 90026142, "body": "All these <code>Q_</code> macro are processed by MOC compiler and bind some functionality to one instance of C++ object. And we have both <code>Base</code> and <code>Derived</code> &quot;competing&quot; for the same implicit functionality tied to one instance. I would not do such Qt class design then. I would rather expose plug-interface from the target class once but we can as many children of iTest as we want. And we can have many target plug-ins, why not. This is not a final answer and I myself would like to listen to the wise on that."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5839939, "user_type": "registered", "profile_image": "https://graph.facebook.com/843576879093442/picture?type=large", "display_name": "Benjamin Slack", "link": "https://stackoverflow.com/users/5839939/benjamin-slack"}, "is_accepted": false, "score": 1, "last_activity_date": 1532621149, "creation_date": 1532621149, "answer_id": 51543203, "question_id": 51525696, "link": "https://stackoverflow.com/questions/51525696/is-it-possible-to-implement-qt-application-plugin-using-a-base-and-derived-class/51543203#51543203", "title": "Is it possible to implement Qt Application Plugin using a base and derived class?", "body": "<p>I believe I've come up with a solution for this. As Alexander V mentioned above, the Q_ macros in the Base and Derived classes were conflicting with one another. The documentation states that only a single called to the Q_PLUGIN_METADATA macro can be in the code. What occurred to me is that the base class itself need not even be a Q_Object, it's just a container for functions. I, therefore, re-declared the classes as follows:</p>\n\n<pre><code>class Base: public iTest{\n  void doA(void); // do something all derived should do\n  int data; // data all derived should have\n}\n\nclass Derived: public QObject, public Base{\n  Q_OBJECT\n  Q_PLUGIN_METADATA (IID \"somestring\")\n  Q_INTERFACES(iTEST)  \n  void doB(void): // custom to derived\n}\n</code></pre>\n\n<p>Also, the interface needs a slight modification:</p>\n\n<pre><code>...\n  virtual ~iTest(void){}\n...\n</code></pre>\n\n<p>This is due to the fact that the destructor needs to be defined, and cannot be pure virtual. With these modifications, this structure seems to work in my application.</p>\n"}], "owner": {"reputation": 11, "user_id": 5839939, "user_type": "registered", "profile_image": "https://graph.facebook.com/843576879093442/picture?type=large", "display_name": "Benjamin Slack", "link": "https://stackoverflow.com/users/5839939/benjamin-slack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532621149, "creation_date": 1532544104, "question_id": 51525696, "link": "https://stackoverflow.com/questions/51525696/is-it-possible-to-implement-qt-application-plugin-using-a-base-and-derived-class", "title": "Is it possible to implement Qt Application Plugin using a base and derived class?", "body": "<p>Suppose I have the following toy interface:</p>\n\n<pre><code>class iTest{\n  virtual ~iTest(void) = 0;\n  virtual void doA(void) = 0;\n  virtual void doB(void) = 0;\n}\n\nQ_DECLARE_INTERFACE(iTest, \"somestring\")\n</code></pre>\n\n<p>I'd like to implement this in two classes: Base and Derived.</p>\n\n<pre><code>class Base : public QObject, public iTest\n{\n  Q_OBJECT\n  Q_PLUGIN_METADATA (IID \"somestring\")\n  Q_INTERFACES(iTEST)\n  explicit Base(QObject* parent=0);\n  void doA(void); // do common thing all derived need do\n  int data; // some data member all derived should have\n}\n\nclass Derived: public Base\n{\n  Q_OBJECT\n  Q_PLUGIN_METADATA (IID \"somestring\")\n  Q_INTERFACES(iTEST)\n  explicit Derived(QObject* parent = 0);\n  void doB(); // do something custom dervived objects need do\n}\n</code></pre>\n\n<p>My faulty reasoning tells me that this should work. An abstract base class for the plugin giving functionality for a part of the interface while the derived classes constitute the remainder of it. I can get this to compile, with some judicious removal of macros (the base class metadata macro). However, the plugins resulting won't load. So I assume there's something faulty in my reasoning which a more experience Qt developer or c++ developer could point out that I just can't see.</p>\n"}, {"tags": ["php", "c++", "mysql", "murmurhash"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532544221, "post_id": 51525616, "comment_id": 90020129, "body": "Recommend adding how you are calling the C++ library and what you are providing to it to the question. Some smarty-pants here might be able to spot what went wrong and eliminate the need to port the algorithm."}, {"owner": {"reputation": 6456, "user_id": 728236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SOeHR.jpg?s=128&g=1", "display_name": "Brian Leishman", "link": "https://stackoverflow.com/users/728236/brian-leishman"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532544534, "post_id": 51525616, "comment_id": 90020279, "body": "@user4581301 I&#39;ve added a bit more about what I did for that approach with links to the original file and my updated C++ file"}, {"owner": {"reputation": 6456, "user_id": 728236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SOeHR.jpg?s=128&g=1", "display_name": "Brian Leishman", "link": "https://stackoverflow.com/users/728236/brian-leishman"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532555048, "post_id": 51525616, "comment_id": 90024779, "body": "@user4581301 I&#39;ve created my own solution that worked!"}], "answers": [{"tags": [], "owner": {"reputation": 6456, "user_id": 728236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SOeHR.jpg?s=128&g=1", "display_name": "Brian Leishman", "link": "https://stackoverflow.com/users/728236/brian-leishman"}, "is_accepted": true, "score": 0, "last_activity_date": 1532555019, "creation_date": 1532555019, "answer_id": 51528109, "question_id": 51525616, "link": "https://stackoverflow.com/questions/51525616/how-to-generate-a-64bit-murmur-hash-v2-in-php-7-2/51528109#51528109", "title": "How to generate a 64bit Murmur hash v2 in PHP 7.2?", "body": "<p>I've solved this myself by essentially porting the Percona hashing function directly to a PHP extension MySQL. </p>\n\n<p>Installation and usage instructions are posted here <a href=\"https://github.com/StirlingMarketingGroup/php-murmur-hash\" rel=\"nofollow noreferrer\">https://github.com/StirlingMarketingGroup/php-murmur-hash</a></p>\n\n<hr>\n\n<h2>Example output</h2>\n\n<p>In MySQL, the Percona extension is used like</p>\n\n<pre><code>select`murmur_hash`('Yeet')\n-- -7850704420789372250\n</code></pre>\n\n<p>And in PHP</p>\n\n<pre><code>php -r 'echo murmur_hash(\"Yeet\");'\n// -7850704420789372250\n</code></pre>\n\n<p>Note that those are getting treated as signed integers for both environments, which you can solve in MySQL by using <code>cast(`murmur_hash`('Yeet')as unsigned)</code>, but PHP doesn't support unsigned integers.</p>\n"}], "owner": {"reputation": 6456, "user_id": 728236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/SOeHR.jpg?s=128&g=1", "display_name": "Brian Leishman", "link": "https://stackoverflow.com/users/728236/brian-leishman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 51528109, "answer_count": 1, "score": 0, "last_activity_date": 1532555019, "creation_date": 1532543751, "last_edit_date": 1532544501, "question_id": 51525616, "link": "https://stackoverflow.com/questions/51525616/how-to-generate-a-64bit-murmur-hash-v2-in-php-7-2", "title": "How to generate a 64bit Murmur hash v2 in PHP 7.2?", "body": "<p>I've got a MySQL database that has some Murmur2 hashes (as unsigned 64bit ints) that were generated with the Percona UDF that comes with the Percona strand of MySQL database found here <a href=\"https://github.com/percona/build-test/blob/master/plugin/percona-udf/murmur_udf.cc\" rel=\"nofollow noreferrer\">https://github.com/percona/build-test/blob/master/plugin/percona-udf/murmur_udf.cc</a></p>\n\n<p>My problem is that now I need to generate these same hashes on the PHP side, but I can't seem to find or tweak anything existing to work/output the same output for the same input. </p>\n\n<p>Things I've tried:</p>\n\n<ol>\n<li>Copying the C++ function from the Percona UDF into my forked version of this PHP extension that originally produced 32bit int hashes <a href=\"https://github.com/StirlingMarketingGroup/php_murmurhash\" rel=\"nofollow noreferrer\">https://github.com/StirlingMarketingGroup/php_murmurhash</a>. This almost worked, as in it compiled, but when I execute the function within PHP the apache server crashes with a segfault and I'm not familiar enough with C++ and PHP extensions to debug this</li>\n</ol>\n\n<p>The segfault gets caused by me running this function</p>\n\n<pre><code>var_dump(murmurhash('Hello World'));\n</code></pre>\n\n<p>Which works fine normally when I downloaded <a href=\"https://github.com/kibae/php_murmurhash\" rel=\"nofollow noreferrer\">https://github.com/kibae/php_murmurhash</a> (the original, 32bit, hash producing extension) and followed the instructions, but once I replaced the function (Only edit in the MurmurHash2.cpp file to <a href=\"https://github.com/StirlingMarketingGroup/php_murmurhash/blob/master/MurmurHash2.cpp\" rel=\"nofollow noreferrer\">https://github.com/StirlingMarketingGroup/php_murmurhash/blob/master/MurmurHash2.cpp</a>) the same function call crashes the PHP script. </p>\n\n<ol start=\"2\">\n<li>Trying to port the Percona UDF C++ function to PHP. I'm not super sure if my PHP function is 100% accurate with trying to account for the pointer incrementing but I suspect more so that the reason I get entirely different output with the PHP version has something to do with PHP not supporting unsigned integers.</li>\n</ol>\n\n<p>Here is the PHP function that I've written as a port from the Percona C++ function </p>\n\n<pre><code>function murmurhash2(string $s) : int {\n    $len = strlen($s);\n    $seed = 0;\n\n    $m = 0x5bd1e995;\n    $r = 24;\n\n    $h1 = $seed ^ $len;\n    $h2 = 0;\n\n    $i = 0;\n\n    while ($len &gt;= 8) {\n        $k1 = ord($s[$i++]);\n        $k1 *= $m; $k1 ^= $k1 &gt;&gt; $r; $k1 *= $m;\n        $h1 *= $m; $h1 ^= $k1;\n        $len -= 4;\n\n        $k2 = ord($s[$i++]);\n        $k2 *= $m; $k2 ^= $k2 &gt;&gt; $r; $k2 *= $m;\n        $h2 *= $m; $h2 ^= $k2;\n        $len -= 4;\n    }\n\n    if ($len &gt;= 4) {\n        $k1 = ord($s[$i++]);\n        $k1 *= $m; $k1 ^= $k1 &gt;&gt; $r; $k1 *= $m;\n        $h1 *= $m; $h1 ^= $k1;\n        $len -= 4;\n    }\n\n    switch ($len) {\n        case 3: $h2 ^= ord($s[2]) &lt;&lt; 16;\n        case 2: $h2 ^= ord($s[1]) &lt;&lt; 8;\n        case 1: $h2 ^= ord($s[0]);\n                $h2 *= $m;\n    };\n\n    $h1 ^= $h2 &gt;&gt; 18; $h1 *= $m;\n    $h2 ^= $h1 &gt;&gt; 22; $h2 *= $m;\n    $h1 ^= $h2 &gt;&gt; 17; $h1 *= $m;\n\n    $h = $h1;\n\n    $h = ($h &lt;&lt; 32) | $h2;\n    return $h;\n}\n</code></pre>\n\n<p>Within MySQL I get this </p>\n\n<pre><code>select murmur_hash('Hello World'), cast(murmur_hash('Hello World')as unsigned), CONV(cast(murmur_hash('Hello World')as unsigned), 10, 16);\n-- -8846466548632298438 9600277525077253178 853B098B6B655C3A\n</code></pre>\n\n<p>And in PHP I get </p>\n\n<pre><code>var_dump(murmurhash2('Hello World'));\n// int(5969224437940092928)\n</code></pre>\n\n<p>So looking at the MySQL and PHP results, neither signed nor unsigned match my PHP output.</p>\n\n<p>Is there something that can be fixed with either of my previous two approaches, or maybe an already working approach that I can use instead?</p>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1532543060, "post_id": 51525406, "comment_id": 90019627, "body": "<code>1ULL &lt;&lt; 34</code> is 16 <i>billion</i>. Multiply that by <code>4</code> or <code>8</code> (the size of pointers on 32 and 64 bit systems respectively) and you have the number of bytes needed. Do you have that amount of memory? In a <i>single contiguous block</i>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1532543147, "post_id": 51525406, "comment_id": 90019668, "body": "As for possible way to solve your problem, the first and most obvious would be to use <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a> instead of implementing your own hash-map."}, {"owner": {"reputation": 63, "user_id": 7381996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e2da7fe82fd5b3df5c6f9f06d84f01?s=128&d=identicon&r=PG&f=1", "display_name": "Akshaya", "link": "https://stackoverflow.com/users/7381996/akshaya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1532543225, "post_id": 51525406, "comment_id": 90019703, "body": "@JesperJuhl: I was expecting an answer more in terms of being able to free up existing unused memory."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1532543424, "post_id": 51525406, "comment_id": 90019783, "body": "@Akshaya freeing memory isn&#39;t the issue. And it certainly won&#39;t solve your problem. You&#39;re asking for 64, or 128 (depending on your pointer size) <b>gigabytes</b> of contiguous memory. I have to ask. What algorithm on earth requires an <i>initial</i> bucket count in a hash table of 17179869184 slots? Fyi, if your pointer size if 4 bytes due to a 32bit platform, this absolutely cannot work, as you will be limited to at most 4GB of addressable memory (and far less than that on platforms like Windows). I suspect an XY problem, to be honest."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1532543954, "post_id": 51525406, "comment_id": 90020015, "body": "It seems unlikely that <code>TABLE_SIZE</code> fits in <code>int</code>, so <code>for (int i = 0; i &lt; TABLE_SIZE; i++)</code> is likely undefined behavior."}, {"owner": {"reputation": 4501, "user_id": 1053930, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/EyjC7.jpg?s=128&g=1", "display_name": "Shashwat Kumar", "link": "https://stackoverflow.com/users/1053930/shashwat-kumar"}, "edited": false, "score": 1, "creation_date": 1532544100, "post_id": 51525406, "comment_id": 90020075, "body": "If you want to implement your own HashTable, do something like existing classes does. Initialize with something lower like 16 in Java and keep growing whenever it gets filled."}, {"owner": {"reputation": 63, "user_id": 7381996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e2da7fe82fd5b3df5c6f9f06d84f01?s=128&d=identicon&r=PG&f=1", "display_name": "Akshaya", "link": "https://stackoverflow.com/users/7381996/akshaya"}, "edited": false, "score": 0, "creation_date": 1532549886, "post_id": 51525406, "comment_id": 90022583, "body": "Thanks for all your responses. Appreciate it."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1532543840, "creation_date": 1532543840, "answer_id": 51525644, "question_id": 51525406, "link": "https://stackoverflow.com/questions/51525406/how-can-i-handle-memory-allocation-errors-in-the-following-code/51525644#51525644", "title": "How can I handle memory allocation errors in the following code?", "body": "<p>Depending on the size of a pointer, your first block of code is requesting 128 gigabytes of contiguous memory (I am assuming 64-bit addresses, because you cannot even address that many bytes in a 32-bit address space). This is a certain way to run your system out of memory even before you start allocating <code>HashEntry</code> objects themselves!</p>\n\n<p>Fortunately, hash tables commonly require a lot fewer buckets than that: hash code gets translated to the actual range of valid bucket indexes with modulo <code>%</code> operator, and then a collision resolution algorithm is used to deal with multiple hash values being \"mapped\" to the same bucket. This approach lets you \"fold\" a large space of possible hash values onto a much smaller space of valid hash indexes.</p>\n"}], "owner": {"reputation": 63, "user_id": 7381996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e2da7fe82fd5b3df5c6f9f06d84f01?s=128&d=identicon&r=PG&f=1", "display_name": "Akshaya", "link": "https://stackoverflow.com/users/7381996/akshaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 51525644, "answer_count": 1, "score": -1, "last_activity_date": 1532543840, "creation_date": 1532542900, "question_id": 51525406, "link": "https://stackoverflow.com/questions/51525406/how-can-i-handle-memory-allocation-errors-in-the-following-code", "title": "How can I handle memory allocation errors in the following code?", "body": "<pre><code>const unsigned long long TABLE_SIZE = (1ULL &lt;&lt; 34);\n\nclass HashMap {\nprivate:\n      HashEntry** table;\npublic:\n      HashMap() {\n            table = new HashEntry*[TABLE_SIZE]; \n            for (int i = 0; i &lt; TABLE_SIZE; i++)\n                  table[i] = NULL;\n      }\n};\n</code></pre>\n\n<p>The above code on compilation throws the following exception: \"terminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\" whereas the code below throws no errors or warnings and compiles properly.</p>\n\n<pre><code>const unsigned long long TABLE_SIZE = 65536;\n\nclass HashMap {\nprivate:\n      HashEntry** table;\npublic:\n      HashMap() {\n            table = new HashEntry*[TABLE_SIZE]; \n            for (int i = 0; i &lt; TABLE_SIZE; i++)\n                  table[i] = NULL;\n      }\n};\n</code></pre>\n\n<p>I believe the \"bad_alloc\" exception is being thrown because the system ran out of memory. I would like to know how to get around this problem to get this code to work. </p>\n"}, {"tags": ["c++", "pointers", "constants", "transitive-const"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532542813, "post_id": 51525316, "comment_id": 90019526, "body": "Regarding the pointer class member variable, <code>mutable</code> might come in handy."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532543358, "post_id": 51525316, "comment_id": 90019749, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I think the dupe does not address the OP&#39;s concern. I think they want to be able to use <code>bar.foo_ptr.a++;</code> when <code>bar</code> is not <code>const</code> while disallowing it when <code>bar</code> is <code>const</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532543705, "post_id": 51525316, "comment_id": 90019913, "body": "@RSahu I believe such could be done providing appropriate getter/setter functions varying from the instances <code>const</code> nature, instead of just making the raw pointer member variable <code>public</code>. Anyways understanding the difference of a <code>const</code> pointer vs a pointer to a <code>const</code> object lays out the basis knowledge, how to implement such."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532543984, "post_id": 51525316, "comment_id": 90020028, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, exactly. They need appropriate <code>public</code> functions and not expose the pointer as a <code>public</code> member variable. Understanding <code>const</code> pointer vs pointer to <code>const</code> object is necessary but that does not necessarily help with their objective, assuming we, including the OP, are on the  same page on the objective."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532544118, "post_id": 51525316, "comment_id": 90020083, "body": "@RSahu Maybe sometime&#39;s I am implying too much and are step beyond how to solve the obvious compiler error. :-/ feel free to reopen the question."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1532544692, "post_id": 51525316, "comment_id": 90020347, "body": "well, it behaves exactly as you defined it. if you do not want foo changed, make it const. btw: you are leaking memory. Stop using owning raw pointers."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1532544880, "post_id": 51525316, "comment_id": 90020425, "body": "@skeller <i>&quot;Stop using owning raw pointers.&quot;</i> .., and if you really need them don&#39;t make these public member variables."}, {"owner": {"reputation": 3, "user_id": 8562921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42049a0550eb323c25ab432430119929?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Paliy", "link": "https://stackoverflow.com/users/8562921/dmitry-paliy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532545336, "post_id": 51525316, "comment_id": 90020628, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I agree, it would be better to make <code>foo_ptr</code> private, but suddenly class <code>Bar</code> is not mine. It was created automatically by QT framework."}, {"owner": {"reputation": 3, "user_id": 8562921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42049a0550eb323c25ab432430119929?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Paliy", "link": "https://stackoverflow.com/users/8562921/dmitry-paliy"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1532545350, "post_id": 51525316, "comment_id": 90020634, "body": "@RSahu you&#39;re right, I want to disallow <code>bar.foo_ptr.a++;</code> when <code>bar</code> is const."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532546606, "post_id": 51525316, "comment_id": 90021182, "body": "@DmitryPaliy <i>&quot;but suddenly class Bar is not mine. It was created automatically by QT framework.&quot;</i> Consider wrapping such stuff with <a href=\"https://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\"><i>smart pointer</i></a> class members, be it a simple <code>std::weak_ptr</code> implementation, if those instances are completely beyond your control. I am pretty sure such stuff is also considered in the Qt Framework and you have better choice to refer to other components than a public raw pointer."}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1532544856, "post_id": 51525802, "comment_id": 90020413, "body": "use a std::unique_ptr for &quot;foo_ptr&quot; to prevent it leaking memory :)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1532545230, "post_id": 51525802, "comment_id": 90020567, "body": "@skeller, or not use pointers for these silly objects at all. The crux of my post is to show how to define the notion of <code>const</code> for a user defined type and not get that  diluted by other concerns."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1532544592, "creation_date": 1532544592, "answer_id": 51525802, "question_id": 51525316, "link": "https://stackoverflow.com/questions/51525316/how-to-make-object-by-pointer-in-const-object-constant/51525802#51525802", "title": "How to make object by pointer in const object constant?", "body": "<blockquote>\n  <p>But I think it's a bit illogical. Why <code>Foo</code> object also did not become <code>const</code>?</p>\n</blockquote>\n\n<p>The compiler cannot assume how far to extend the notion of <code>const</code>. You, as the designer of <code>Bar</code>, have to help the compiler with that. You can do that by making the member variable <code>private</code> and providing <code>public</code> interfaces that preserve the <code>const</code>-ness of the object that the pointer points to.</p>\n\n<p>Update your class to:</p>\n\n<pre><code>class Bar {\n   public:\n      Foo* getFoo();\n      Foo const* getFoo() const;\n\n   private:\n      Foo *foo_ptr = new Foo;\n};\n</code></pre>\n\n<p>and now</p>\n\n<pre><code>int main() {\n\n    const Bar bar1;\n    bar1.getFoo()-&gt;a++;  // Not OK. Compiler error.\n\n    Bar bar2;\n    bar2.getFoo()-&gt;a++;  // OK.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1532560280, "creation_date": 1532560280, "answer_id": 51528885, "question_id": 51525316, "link": "https://stackoverflow.com/questions/51525316/how-to-make-object-by-pointer-in-const-object-constant/51528885#51528885", "title": "How to make object by pointer in const object constant?", "body": "<p>In your case, you might use value instead of pointer:</p>\n\n<pre><code>class Bar {\npublic:\n    Foo foo;\n};\n</code></pre>\n\n<p>then <code>bar.foo</code> would be const when <code>bar</code> is</p>\n\n<p>If you really need \"pointer\", you might use <a href=\"https://en.cppreference.com/w/cpp/experimental/propagate_const\" rel=\"nofollow noreferrer\">std::experimental::propagate_const</a></p>\n\n<pre><code>class Bar {\npublic:\n    std::experimental::propagate_const&lt;Foo*&gt; foo_ptr = new Foo; // work also with smart pointers\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/bfa681c4c378f82c\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 3, "user_id": 8562921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42049a0550eb323c25ab432430119929?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Paliy", "link": "https://stackoverflow.com/users/8562921/dmitry-paliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 51525802, "answer_count": 2, "score": 0, "last_activity_date": 1532566236, "creation_date": 1532542523, "last_edit_date": 1532566236, "question_id": 51525316, "link": "https://stackoverflow.com/questions/51525316/how-to-make-object-by-pointer-in-const-object-constant", "title": "How to make object by pointer in const object constant?", "body": "<pre><code>class Foo {\npublic:\n    int a = 1;\n};\n\nclass Bar {\npublic:\n    Foo *foo_ptr = new Foo;\n};\n\nint main() {\n    const Bar bar;\n    bar.foo_ptr.a++;        //   valid: a == 2\n    bar.foo_ptr = nullptr;  // invalid: foo_ptr is const\n}\n</code></pre>\n\n<p>I understand, why code above is correct - object <code>bar</code> is constant, so <code>foo_ptr</code> is constant pointer to a non-const <code>Foo</code> object. But I think it's a bit illogical. Why <code>Foo</code> object also did not become const?</p>\n\n<p>What should I do, if I want <code>Bar</code> object to become absolute <code>const</code> here, and the <code>foo_ptr</code> to be a constant pointer to a constant object?</p>\n\n<p>For example, I send <code>Bar</code> object to some method, and I don't want it or any <code>Foo</code> objects in it to be modifiable.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1532541734, "post_id": 51525070, "comment_id": 90019014, "body": "you can&#39;t switch back and forth between different strtok targets like this -- you have to do all of the first strtok before you use strtok again."}], "answers": [{"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1532542779, "post_id": 51525127, "comment_id": 90019514, "body": "Or don&#39;t use <code>strtok</code> family at all. There are much better ways to split strings."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1532541767, "creation_date": 1532541767, "answer_id": 51525127, "question_id": 51525070, "link": "https://stackoverflow.com/questions/51525070/split-string-with-strtok-nested/51525127#51525127", "title": "Split string with strtok (nested)", "body": "<p>You have <em>three</em> problems:</p>\n\n<ol>\n<li><p>The first is that you use implementation-specific multi-character literals like e.g. <code>'ssid'</code>, when you should be using strings like <code>\"ssid\"</code>.</p></li>\n<li><p>The second problem is that you use <code>==</code> to compare strings. That's almost impossible to get to work, as then you compare the <em>pointers</em> instead of the string contents. To compare strings you need to use <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\"><code>strcmp</code></a>.</p></li>\n<li><p>The <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok</code></a> function is not reentrant. You can't have multiple <code>strtok</code> parsings going simultaneously. Either separate the steps, or use <code>strtok_s</code> (or <code>strtok_r</code> if such a function is available).</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 176, "user_id": 2357245, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df753f814d3ad32edd6cd8ab83b166cc?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/2357245/pascal"}, "edited": false, "score": 0, "creation_date": 1532545318, "post_id": 51525135, "comment_id": 90020618, "body": "The solution works great. Many Thanks!!! strcmp should i known, my mistake. Strtok_r is new to me, so I have to read more about it."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1532541822, "creation_date": 1532541822, "answer_id": 51525135, "question_id": 51525070, "link": "https://stackoverflow.com/questions/51525070/split-string-with-strtok-nested/51525135#51525135", "title": "Split string with strtok (nested)", "body": "<p>The <code>strtok</code> function uses an internal static variable to keep track of its current state.  When you use the function for multiple different substrings interleaved like you're doing, you step on the internal state.</p>\n\n<p>You need to instead use <code>strtok_r</code>, which uses an external variable to keep track of state.  </p>\n\n<pre><code>  char *ptr, *sav1 = NULL;\n  ptr = strtok_r(params, \"&amp;\", &amp;sav1);    // outer strtok_r, use sav1\n\n  while (ptr != NULL) {\n\n    char *paramKey;\n    char *paramValue;\n    char *sav2 = NULL;\n    paramKey = strtok_r(ptr, \"=\", &amp;sav2);   // inner strtok_r, use sav2\n    Serial.println(paramKey);\n\n    if (!strcmp(paramKey, \"ssid\")) {\n      paramValue = strtok_r(NULL, \"=\", &amp;sav2);  // inner strtok_r, use sav2\n      Serial.println(paramValue);       \n\n      ssidName = paramValue;\n    }\n\n    if (!strcmp(paramKey, \"pwd\")) {\n      ...\n    }\n\n    if (!strcmp(paramKey, \"userId\")) {\n      ...\n    }       \n\n    ptr = strtok_r(NULL, \"&amp;\", &amp;sav1);    // outer strtok_r, use sav1\n  }\n</code></pre>\n\n<p>Not related to the parsing issue, you also can't compare strings with <code>==</code>.  You need to use <code>strcmp</code> instead, and string constants are surrounded in double quotes, not single quotes.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4853414"}, "is_accepted": false, "score": 0, "last_activity_date": 1532544218, "creation_date": 1532544218, "answer_id": 51525713, "question_id": 51525070, "link": "https://stackoverflow.com/questions/51525070/split-string-with-strtok-nested/51525713#51525713", "title": "Split string with strtok (nested)", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct split_result {\n    char first_part[64];\n    char second_part[64];\n};\n\nsplit_result return_left(char splitter, const char *str);\n\nint main() {\n    /*\n        ssid=SSID\n        pwd=PASSWORD\n        userId=1234\n    */\n    char *str = \"ssid=109304905995\";\n    split_result result = return_left('=', str);\n\n    printf(\"first part: %s \\n second part: %s\\n\", result.first_part, result.second_part);\n\n    return 0;\n}\n\nsplit_result return_left(char splitter, const char *str) {\n    int i = 0;\n\n    split_result split_ptr;\n\n    while (str[i] != 0) {\n        //we found splitter\n        if ((char)str[i] == splitter) {\n            //remove first half\n            strncpy_s(split_ptr.first_part, str, (int)(&amp;str[i]-str));\n            break;\n        }\n\n        //we need to remove second half now\n        i++;\n    }\n    strcpy_s(split_ptr.second_part, &amp;str[i+1]);\n    return split_ptr;\n}\n</code></pre>\n\n<p>I hope this will be helpful to anyone.</p>\n"}], "owner": {"reputation": 176, "user_id": 2357245, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df753f814d3ad32edd6cd8ab83b166cc?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/2357245/pascal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 51525135, "answer_count": 3, "score": 1, "last_activity_date": 1532565360, "creation_date": 1532541518, "last_edit_date": 1532565360, "question_id": 51525070, "link": "https://stackoverflow.com/questions/51525070/split-string-with-strtok-nested", "title": "Split string with strtok (nested)", "body": "<p>I use an arduino MEGA to parse a the param part of an url. \nIt should not matter how the order of the parameters are. I have following code and I tried that with strtok.</p>\n\n<pre><code>char text[] = \"ssid=SSID&amp;pwd=PASSWORD&amp;userId=1234\"\n</code></pre>\n\n<p>and will split in</p>\n\n<pre><code>ssid=SSID\npwd=PASSWORD\nuserId=1234\n</code></pre>\n\n<p>and split it again in key and values</p>\n\n<pre><code>ssid\nSSID\n\npwd\nPASSWORD\n\nuserId\n1234\n</code></pre>\n\n<p>I tried to use strtok for the first split.</p>\n\n<pre><code>  char *ptr;\n  ptr = strtok(params, \"&amp;\");\n\n  while (ptr != NULL) {\n    Serial.println(urlParam);\n    ptr = strtok(NULL, \"&amp;\");\n  }\n</code></pre>\n\n<p>and the output is as expected:</p>\n\n<p>Output:</p>\n\n<pre><code>ssid=SSID\npwd=PASSWORD\nuserId=1234\n</code></pre>\n\n<p>then the next split:</p>\n\n<pre><code>  char *ptr;\n  ptr = strtok(params, \"&amp;\");\n\n  while (ptr != NULL) {\n\n    char *paramKey;\n    char *paramValue;\n    paramKey = strtok(ptr, \"=\");\n    Serial.println(paramKey);\n\n    if (paramKey == 'ssid'){\n      paramValue = strtok(NULL, \"=\");\n      Serial.println(paramValue);       \n\n      ssidName = paramValue;\n    }\n\n    if (paramKey == 'pwd'){\n      ...\n    }\n\n    if (paramKey == 'userId'){\n      ...\n    }       \n\n    ptr = strtok(NULL, \"&amp;\");\n  }\n</code></pre>\n\n<p>But the output is just</p>\n\n<pre><code>ssid\nSSID\n</code></pre>\n\n<p>Looks like the loop is not working properly.</p>\n\n<p>Where do I make the mistake?\nIs there any other way to resolve this string?</p>\n"}, {"tags": ["c++", "c++11", "templates", "clion"], "comments": [{"owner": {"reputation": 91, "user_id": 6120090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd32b1a909021d485cf782441aac188f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B", "link": "https://stackoverflow.com/users/6120090/daniel-b"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1532550074, "post_id": 51525054, "comment_id": 90022675, "body": "Thank you @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6, that helped me a lot furthermore I have a better understanding of  &quot;how the compiler deals with Templates&quot;, thanks a lot."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1532550327, "post_id": 51525054, "comment_id": 90022797, "body": "<i>@DanielB</i> De nada, you&#39;re welcome. Us experienced users know what the FAQs are, and what&#39;s the right answer to lead you. A duplicate is just fine, and helps improving the research done withing the network, unless your research and explaining the problem appeared poor."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1532550529, "post_id": 51525054, "comment_id": 90022890, "body": "Duplicates here often aren&#39;t obviously to find, unless you know the right question to ask at google. The internal SE search engine is still poor about that."}, {"owner": {"reputation": 91, "user_id": 6120090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd32b1a909021d485cf782441aac188f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B", "link": "https://stackoverflow.com/users/6120090/daniel-b"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532941526, "post_id": 51525054, "comment_id": 90146064, "body": "I have got another Problem with explicit instanciation of templates in a class. In main.cpp I have at one point :&quot;ListeTriee&lt;SmartPointer&lt;int&gt; &gt; liste2;&quot; which leads to problems. In ListeTriee.cpp I have tried the following: ... #include &quot;SmartPointer.h&quot; ...(at the end) template class ListeBase&lt;SmartPointer&lt;int&gt;&gt;;  but I&#39;m still receiving errors."}, {"owner": {"reputation": 91, "user_id": 6120090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd32b1a909021d485cf782441aac188f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B", "link": "https://stackoverflow.com/users/6120090/daniel-b"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1532943313, "post_id": 51525054, "comment_id": 90147125, "body": "More simple: I want the template ListeTriee to work with class SmartPointer"}], "owner": {"reputation": 91, "user_id": 6120090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd32b1a909021d485cf782441aac188f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel B", "link": "https://stackoverflow.com/users/6120090/daniel-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1532541983, "answer_count": 0, "score": 1, "last_activity_date": 1532541854, "creation_date": 1532541466, "last_edit_date": 1532541854, "question_id": 51525054, "link": "https://stackoverflow.com/questions/51525054/undefined-symbols-for-architecture-x86-64-templates", "closed_reason": "Duplicate", "title": "Undefined symbols for architecture x86_64 (Templates)", "body": "<p>Hello I have a problem compiling my C++ project and I can't figure out the error message. I have already looked at the questions in this forum that are based on the same problem but none of them seem to have the same origin. </p>\n\n<p>Before you start reading this post. </p>\n\n<ul>\n<li>Limit your search to the header files(<strong>Definition of the methods</strong>)</li>\n<li>And the <strong>declarations</strong> of the methods in the .cpp files</li>\n</ul>\n\n<p>I suspect that the error occurs there.</p>\n\n<p>Macbook pro 13\", project compiled on CLion 2016.3.2 EAP</p>\n\n<p><strong>MAKEFILE</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.6)\nproject(C__Programm6)\n\nset(CMAKE_CXX_STANDARD 11)\n\nset(SOURCE_FILES main.cpp BaseException.cpp BaseException.h Couleur.cpp Couleur.h Forme.cpp Forme.h InvalidColorException.cpp InvalidColorException.h Ligne.cpp Ligne.h Pixel.cpp Pixel.h Point.cpp Point.h Rectangle.cpp Rectangle.h ListeBase.cpp ListeBase.h Liste.cpp Liste.h)\nadd_executable(C__Programm6 ${SOURCE_FILES})\n</code></pre>\n\n<p><strong>The Error message I get:</strong></p>\n\n<pre><code>Scanning dependencies of target C__Programm6\nUndefined symbols for architecture x86_64:\n  \"Liste&lt;int&gt;::Liste(Liste&lt;int&gt; const&amp;)\", referenced from:\n      Essai1() in main.cpp.o\n  \"Liste&lt;int&gt;::Liste()\", referenced from:\n      Essai1() in main.cpp.o\n  \"ListeBase&lt;int&gt;::getNombreElements()\", referenced from:\n      Essai1() in main.cpp.o\n  \"ListeBase&lt;int&gt;::Affiche()\", referenced from:\n      Essai1() in main.cpp.o\n  \"ListeBase&lt;int&gt;::estVide()\", referenced from:\n      Essai1() in main.cpp.o\n  \"ListeBase&lt;int&gt;::~ListeBase()\", referenced from:\n      Liste&lt;int&gt;::~Liste() in Liste.cpp.o\n  \"ListeBase&lt;int&gt;::operator=(ListeBase&lt;int&gt; const&amp;)\", referenced from:\n      Liste&lt;int&gt;::operator=(Liste&lt;int&gt; const&amp;) in main.cpp.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[3]: *** [C__Programm6] Error 1\nmake[2]: *** [CMakeFiles/C__Programm6.dir/all] Error 2\nmake[1]: *** [CMakeFiles/C__Programm6.dir/rule] Error 2\nmake: *** [C__Programm6] Error 2\n</code></pre>\n\n<p><strong>Main.cpp:</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n\n#include \"Liste.h\"\n//#include \"ListeTriee.h\"\n//#include \"Iterateur.h\"\n\n#include \"Couleur.h\"\n\nusing namespace std;\n\nint  Menu();\nvoid Essai1();\n/*void Essai2();\nvoid Essai3();\nvoid Essai4();\nvoid Essai5();\nvoid Essai6();\nvoid Essai7();\nvoid Essai8();*/\n\nint main(int argc,char* argv[])\n{\n</code></pre>\n\n<p>... (\"...\" represents he part where it prints the menu of the application, where you can chose between Essai 1 - 8)</p>\n\n<pre><code>void Essai1() {\n    cout &lt;&lt; \"----- 1. Test du template Liste avec des entiers --------------------------------------------\" &lt;&lt; endl;\n    cout &lt;&lt; \"----- 1.1 Creation et gestion d'une Liste ---------------------------------------------------\" &lt;&lt; endl;\n\n    Liste&lt;int&gt; liste;\n    liste.Affiche();                                       // --&gt; ()\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"Liste Vide ? \" &lt;&lt; liste.estVide() &lt;&lt; endl;\n    cout &lt;&lt; \"On insere 3,-2,5,-1 et 0...\" &lt;&lt; endl;\n    liste.insere(3);\n    liste.Affiche();\n\n    liste.insere(-2);\n    int *pI = liste.insere(5);\n    liste.insere(-1);\n    liste.insere(0);\n    cout &lt;&lt; \"Liste Vide ? \" &lt;&lt; liste.estVide() &lt;&lt; endl;\n    liste.Affiche();                                       // --&gt; (3 -2 5 -1 0)\n    cout &lt;&lt; \"La liste contient \" &lt;&lt; liste.getNombreElements() &lt;&lt; \" elements.\" &lt;&lt; endl;\n    cout &lt;&lt; \"On modifie le 3eme element :\" &lt;&lt; endl;\n    *pI = 100;\n    liste.Affiche();\n\n    cout &lt;&lt; \"----- 1.2 Test du constructeur de copie -----------------------------------------------------\" &lt;&lt; endl;\n    {\n        Liste&lt;int&gt; liste2(liste);\n        cout &lt;&lt; \"----&gt; Voici la copie :\" &lt;&lt; endl;\n        liste2.Affiche();\n        cout &lt;&lt; \"----&gt; On insere 50 dans la copie :\" &lt;&lt; endl;\n        liste2.insere(50);\n        liste2.Affiche();\n        cout &lt;&lt; \"----&gt; Destruction de la copie...\" &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl &lt;&lt; \"Et revoici la liste de depart : \" &lt;&lt; endl;\n    liste.Affiche();\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"----- 1.3 Test de l'operateur = -------------------------------------------------------------\" &lt;&lt; endl;\n    {\n        Liste&lt;int&gt; liste3;\n        liste3 = liste;\n        cout &lt;&lt; \"----&gt; Voici le resultat de l'operateur = :\" &lt;&lt; endl;\n        liste3.Affiche();\n        cout &lt;&lt; \"----&gt; On insere 50 dans la nouvelle liste :\" &lt;&lt; endl;\n        liste3.insere(50);\n        liste3.Affiche();\n        cout &lt;&lt; \"----&gt; Destruction de la nouvelle liste...\" &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl &lt;&lt; \"Et revoici la liste de depart : \" &lt;&lt; endl;\n    liste.Affiche();\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p><strong>ListeBase.h:</strong></p>\n\n<pre><code>#ifndef C_PROGRAMM6_LISTEBASE_H\n#define C_PROGRAMM6_LISTEBASE_H\n\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\ntemplate&lt;class T&gt; struct Cellule{\n    T valeur;\n    Cellule&lt;T&gt; *suivant;\n};\n\ntemplate&lt;class T&gt; class ListeBase{\n\nprotected:\n    Cellule&lt;T&gt; *ptete;\n    Cellule&lt;T&gt; *CopyList(const ListeBase&lt;T&gt; &amp;);\n    void VideListe();\npublic:\n    //Constructeurs\n    ListeBase();\n    ListeBase(const ListeBase&lt;T&gt; &amp;);\n    //Destructeur\n    virtual ~ListeBase();\n    //Autre\n    bool estVide();\n    int getNombreElements();\n    void Affiche();\n    //operateurs surcharge\n    ListeBase&lt;T&gt; &amp;operator=(const ListeBase&lt;T&gt; &amp;);\n    //Methodes virtuelles\n    virtual T *insere(const T &amp;) = 0;\n\n};\ntemplate class Cellule&lt;int&gt;;\n#endif //C_PROGRAMM6_LISTEBASE_H\n</code></pre>\n\n<p><strong>ListeBase.cpp</strong></p>\n\n<pre><code>#include \"ListeBase.h\"\ntemplate &lt;class T&gt;\nListeBase&lt;T&gt;::ListeBase() {\n    cout &lt;&lt; \"-&gt; Constructeur par defaut [ListeBase]\" &lt;&lt; endl;\n\n     ptete = NULL;\n}\ntemplate &lt;class T&gt;\nListeBase&lt;T&gt;::ListeBase(const ListeBase&lt;T&gt; &amp;new_Cellule) {\n    cout &lt;&lt; \"-&gt; Constructeur d'initialisation [ListeBase]\" &lt;&lt; endl;\n\n    CopyList(new_Cellule);\n}\ntemplate &lt;class T&gt;\nListeBase&lt;T&gt;::~ListeBase() {\n    cout &lt;&lt; \"-&gt; Destructeur [ListeBase]\" &lt;&lt; endl;\n\n    VideListe();\n}\ntemplate &lt;class T&gt;\nbool ListeBase&lt;T&gt;::estVide()  {\n    if(!ptete)\n        return true;\n    else\n        return false;\n}\ntemplate &lt;class T&gt;\nvoid ListeBase&lt;T&gt;::Affiche() {\n    Cellule&lt;T&gt; *temp;\n    temp = ptete;\n\n    if(temp != NULL) {\n        while (temp != NULL) {\n            cout &lt;&lt; temp-&gt;valeur &lt;&lt; \" \";\n            temp-&gt;suivant;\n        }\n    }\n    else\n        cout &lt;&lt; \"La liste est vide\" &lt;&lt; endl;\n}\ntemplate &lt;class T&gt;\nint ListeBase&lt;T&gt;::getNombreElements()  {\n    int nombElements = 0;\n    Cellule&lt;T&gt; *temp;\n    temp = ptete;\n\n    while(temp -&gt; suivant != NULL)\n    {\n        nombElements++;\n        temp -&gt; suivant;\n    }\n\n    return nombElements;\n}\ntemplate &lt;class T&gt;\nListeBase&lt;T&gt;&amp; ListeBase&lt;T&gt;::operator=(const ListeBase&lt;T&gt; &amp;new_ListeBase) {\n    VideListe();\n    CopyList(new_ListeBase);\n\n    return *this;\n}\ntemplate &lt;class T&gt;\nCellule&lt;T&gt;* ListeBase&lt;T&gt;::CopyList(const ListeBase&lt;T&gt;&amp; lb)\n{\n    Cellule&lt;T&gt; *pTmp, *tete, *pTrav, *pNext;\n\n    if(lb.ptete == NULL)\n        return NULL;\n\n    /*      Copie de tete       */\n    tete = new Cellule&lt;T&gt;;\n\n    tete-&gt;valeur = lb.ptete-&gt;valeur;\n    tete-&gt;suivant = NULL;\n\n    /*      Copie de la liste   */\n    pTmp = lb.ptete-&gt;suivant;\n    pNext = tete;\n    while(pTmp != NULL)\n    {\n        pTrav = new Cellule&lt;T&gt;;\n\n        /*      Nouvelle liste  */\n        pTrav-&gt;valeur = pTmp-&gt;valeur;\n        pNext-&gt;suivant = pTrav;\n        pNext = pTrav;\n\n        /*      Ancienne liste  */\n        pTmp = pTmp-&gt;suivant;\n        pTrav-&gt;suivant = NULL;\n    }\n    return tete;\n}\ntemplate &lt;class T&gt;\nvoid ListeBase&lt;T&gt;::VideListe()\n{\n    Cellule&lt;T&gt; *pTmp, *pDel;\n\n    if(ptete != NULL)\n    {\n        pTmp = ptete;\n        while(pTmp != NULL)\n        {\n            pDel = pTmp;\n            pTmp = pTmp-&gt;suivant;\n            delete pDel;\n        }\n    }\n    ptete = NULL;\n}\n</code></pre>\n\n<p><strong>Liste.h</strong></p>\n\n<pre><code>#ifndef C_PROGRAMM6_LISTE_H\n#define C_PROGRAMM6_LISTE_H\n\n#include \"ListeBase.h\"\n\ntemplate &lt;class T&gt; class Liste : public ListeBase&lt;T&gt;{\npublic:\n    //Constructeurs\n    Liste();\n    Liste(const Liste&lt;T&gt; &amp;);\n    //Destructeur\n    virtual ~Liste();\n    //Methodes virtuelles\n    virtual T *insere(const T &amp;);\n};\ntemplate class Liste&lt;int&gt;;\n#endif //C_PROGRAMM6_LISTE_H\n</code></pre>\n\n<p><strong>Liste.cpp</strong></p>\n\n<pre><code>#include \"Liste.h\"\n\ntemplate &lt;class T&gt;\nListe&lt;T&gt;::Liste() : ListeBase&lt;T&gt;(){\n    cout &lt;&lt; \"-&gt; Constructeur par defaut [Liste]\" &lt;&lt; endl;\n}\ntemplate &lt;class T&gt;\nListe&lt;T&gt;::Liste(const Liste&lt;T&gt; &amp;new_Liste) : ListeBase&lt;T&gt;(new_Liste) {\n    cout &lt;&lt; \"-&gt; Constructeur de copie [Liste]\" &lt;&lt; endl;\n}\n\ntemplate &lt;class T&gt;\nListe&lt;T&gt;::~Liste() {\n    cout &lt;&lt; \"-&gt; Destructeur [Liste]\" &lt;&lt; endl;\n}\ntemplate &lt;class T&gt;\nT* Liste&lt;T&gt;::insere(const T &amp;new_T) {\n    Cellule &lt;T&gt; *ptemp, *val;\n    ptemp = new Cellule&lt;T&gt;;\n    ptemp -&gt; suivant = NULL;\n    ptemp -&gt; valeur = new_T;\n\n    val = this -&gt; ptete;\n\n    if(this -&gt; ptete == NULL){\n        val -&gt; suivant = ptemp;\n    }\n\n    return &amp;ptemp -&gt; valeur;\n}\n</code></pre>\n"}, {"tags": ["c++", "move-semantics", "unique-ptr"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1532541554, "post_id": 51525025, "comment_id": 90018933, "body": "You likely just forgot the <code>std::move</code> for <code>m_deque.push_front(std::move(param));</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1532542087, "post_id": 51525025, "comment_id": 90019180, "body": "Unrelated: If C++14 or more recent is available and strong exception safety is desired, <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\">consider using <code>std::make_unique</code></a>. Link to <a href=\"https://stackoverflow.com/questions/37514509/advantages-of-using-stdmake-unique-over-new-operator\">some reasons why</a> even if exception safety isn&#39;t required."}], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 5507931, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14d9f9a2bc7be5a6990f11f7218a625c?s=128&d=identicon&r=PG&f=1", "display_name": "Yura", "link": "https://stackoverflow.com/users/5507931/yura"}, "edited": false, "score": 0, "creation_date": 1532543606, "post_id": 51525509, "comment_id": 90019860, "body": "What I need <code>void push(const T &amp; param) </code> for? Looks like universal reference is enough. Isn&#39;t it?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 513, "user_id": 5507931, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14d9f9a2bc7be5a6990f11f7218a625c?s=128&d=identicon&r=PG&f=1", "display_name": "Yura", "link": "https://stackoverflow.com/users/5507931/yura"}, "edited": false, "score": 1, "creation_date": 1532543831, "post_id": 51525509, "comment_id": 90019962, "body": "@Yura That is not a universal reference.  It is an rvalue reference.  Universal references are only formed from rvalue references to deduced template parameters, and <code>T</code> is not deduced in this case."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 6, "last_activity_date": 1532543348, "creation_date": 1532543348, "answer_id": 51525509, "question_id": 51525025, "link": "https://stackoverflow.com/questions/51525025/c-how-to-push-unique-ptr-to-deque/51525509#51525509", "title": "C++: How to push unique_ptr to deque?", "body": "<p>You should modify your class to handle move only type:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Queue\n{\npublic:\n\n    void push(const T &amp; param) \n    {\n        m_deque.push_front(param);\n    }\n\n    void push(T&amp;&amp; param) \n    {\n        m_deque.push_front(std::move(param));\n    }\n\n\nprivate:\n    std::deque&lt;T&gt; m_deque;\n};\n</code></pre>\n\n<p>With usage: </p>\n\n<pre><code>int main()\n{\n    Queue&lt; std::unique_ptr&lt;DataBox&gt; &gt; queue;\n\n    std::unique_ptr&lt;DataBox&gt; d1(new DataBox(11));\n\n    queue.push(std::move(d1));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532557272, "post_id": 51526286, "comment_id": 90025482, "body": "Don&#39;t you mean <code>std::forward&lt;U&gt;</code> ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532559519, "post_id": 51526286, "comment_id": 90025996, "body": "normal, <code>std::move(d1)</code> should be used. currently, you move with your <code>std::forward&lt;T&gt;</code> unconditionally :/ <a href=\"https://ideone.com/4zm4Kz\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532561893, "post_id": 51526286, "comment_id": 90026453, "body": "@Jarod42 That is correct, the argument is always moved with this arrangement, but the argument is <code>unique_ptr</code> so I suppose this is what is wanted?"}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": true, "score": 1, "last_activity_date": 1532547229, "last_edit_date": 1532547229, "creation_date": 1532546686, "answer_id": 51526286, "question_id": 51525025, "link": "https://stackoverflow.com/questions/51525025/c-how-to-push-unique-ptr-to-deque/51526286#51526286", "title": "C++: How to push unique_ptr to deque?", "body": "<p>If you would like to make it universal, so that <code>push</code> can take either l or r value you could try something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;deque&gt;\n#include &lt;utility&gt;\n\nclass DataBox \n{\npublic:\n    DataBox(int i) {}\n};\n\ntemplate &lt;typename T&gt;\nclass Queue\n{\npublic:\n    template &lt;typename U&gt;\n    void push(U &amp;&amp;param)\n    {\n        m_deque.push_front(std::forward&lt;T&gt;(param));\n    }\n\nprivate:\n    std::deque&lt;T&gt; m_deque;\n};      \n\nint main()\n{\n    Queue&lt;std::unique_ptr&lt;DataBox&gt;&gt; queue;\n    std::unique_ptr&lt;DataBox&gt; d1 = std::make_unique&lt;DataBox&gt;(11);\n    std::unique_ptr&lt;DataBox&gt; d2 = std::make_unique&lt;DataBox&gt;(22);\n    queue.push(d1);\n    queue.push(std::move(d2));\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/ixzEmN\" rel=\"nofollow noreferrer\">https://ideone.com/ixzEmN</a></p>\n"}, {"tags": [], "owner": {"reputation": 436, "user_id": 3092679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa035e5224fb2ba0b5f21aa4baecfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Matveiakin", "link": "https://stackoverflow.com/users/3092679/andrei-matveiakin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533074914, "creation_date": 1533074914, "answer_id": 51622800, "question_id": 51525025, "link": "https://stackoverflow.com/questions/51525025/c-how-to-push-unique-ptr-to-deque/51622800#51622800", "title": "C++: How to push unique_ptr to deque?", "body": "<p>You have the following options.</p>\n\n<p><strong>Option 1: concise and usually fast</strong></p>\n\n<pre><code>template &lt;typename T&gt;\nclass Queue {\npublic:\n    void push(T param) {\n        m_deque.push_front(std::move(param));\n    }\n\nprivate:\n    std::deque&lt;T&gt; m_deque;\n};\n</code></pre>\n\n<p>I would recommend this for most practical cases, since it's simple. However, if <code>T</code> isn't efficiently movable, it will do two copies instead of one.</p>\n\n<p><strong>Option 2: always fast</strong></p>\n\n<pre><code>template &lt;typename T&gt;\nclass Queue {\npublic:\n    void push(const T&amp; param) {\n        m_deque.push_front(param);\n    }\n    void push(T&amp;&amp; param) {\n        m_deque.push_front(std::move(param));\n    }\n\nprivate:\n    std::deque&lt;T&gt; m_deque;\n};\n</code></pre>\n\n<p>This is the most optimal solution, but it might be an overkill. If <code>T</code> is efficiently movable (and you should strive to make all types efficiently movable), then it does exactly the same amount of copies as option 1:</p>\n\n<pre><code>Queue&lt;std::vector&lt;int&gt;&gt; q;\nstd::vector&lt;int&gt; v;\nq.push(v);             // one copy, both with option 1 and option 2\nq.push(std::move(v));  // no copies, both with option 1 and option 2\n</code></pre>\n\n<p>However:</p>\n\n<pre><code>Queue&lt;NotEfficientlyMovableType&gt; q;\nNotEfficientlyMovableType x;\nq.push(x);             // one copy with option 2, two copies with option 1\nq.push(std::move(x));  // same (so it doesn't really make sense)\n</code></pre>\n\n<p><strong>Option 3: concise, always fast, but has caveats</strong></p>\n\n<pre><code>template &lt;typename T&gt;\nclass Queue {\npublic:\n    template &lt;typename U&gt;\n    void push(U&amp;&amp; param)\n    {\n        m_deque.push_front(std::forward&lt;T&gt;(param));\n    }\n\nprivate:\n    std::deque&lt;T&gt; m_deque;\n};\n</code></pre>\n\n<p>With option 3 you only get to write one function and it always does the minimum number of copies (like option 2). However, it requires template argument deduction, which can break valid code. For example, this works with options 1 and 2, but not with option 3:</p>\n\n<pre><code>Queue&lt;std::pair&lt;int, int&gt;&gt; q;\nq.push({1, 2});\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 5507931, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14d9f9a2bc7be5a6990f11f7218a625c?s=128&d=identicon&r=PG&f=1", "display_name": "Yura", "link": "https://stackoverflow.com/users/5507931/yura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2108, "favorite_count": 0, "accepted_answer_id": 51526286, "answer_count": 3, "score": 1, "last_activity_date": 1533074914, "creation_date": 1532541322, "question_id": 51525025, "link": "https://stackoverflow.com/questions/51525025/c-how-to-push-unique-ptr-to-deque", "title": "C++: How to push unique_ptr to deque?", "body": "<p>In my project I need container that holds smart pointers to an data unit instances. I write the class (simple example):</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Queue\n{\npublic:\n\n    void push(const T &amp; param) \n    {\n        m_deque.push_front(param);\n    }\n\nprivate:\n    std::deque&lt;T&gt; m_deque;\n};\n</code></pre>\n\n<p>Than I want to push the one:</p>\n\n<pre><code>int main()\n{\n\n    Queue&lt; std::unique_ptr&lt;DataBox&gt; &gt; queue;\n\n    std::unique_ptr&lt;DataBox&gt; d1(new DataBox(11));\n\n    queue.push(d1);\n\n    return 0;\n}\n</code></pre>\n\n<p>And VS2017 compiler says that I can't do this:</p>\n\n<p><code>Error C2280 std::unique_ptr&lt;DataBox,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': attempting to reference a deleted function</code></p>\n\n<p>As I understand the reason of the error is attempt to make copy of unique_ptr. But if I change signature to:</p>\n\n<p><code>void push(T &amp;&amp; param) {...}</code></p>\n\n<p>and the function call </p>\n\n<p><code>queue.push( std::move(d1) );</code></p>\n\n<p>I have this error again. So the question is - how should I implement <code>push()</code> that will move <code>unique_ptr</code> to the queue?</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "stdvector"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 2, "creation_date": 1532541635, "post_id": 51524968, "comment_id": 90018974, "body": "The explanation you&#39;ve given for your problem is worded in a confusing manner, making it difficult to understand what you&#39;re asking and what your problem is. You should edit your question to contain clear, distinct statements that explain what your <b>code is meant to do</b>, what <b>output you expect</b>, and what <b>incorrect output you&#39;re getting</b>. If you do that, it will be much more likely that you can get a useful answer."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1532541654, "post_id": 51524968, "comment_id": 90018985, "body": "I think we need a clear example of input, process, and desired output. IMy read of the question is that you want to sort the <code>vector</code>s in <code>vect</code> according to the indices in <code>row</code>, but this makes no sense in the face of  negative numbers in <code>row</code>."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1532542165, "post_id": 51524968, "comment_id": 90019228, "body": "Many phrases in this question give me pause.  I&#39;m not confident that I understand what&#39;s being said.  &quot;desired ones&quot;, &quot;we just care&quot;, &quot;that is&quot;, &quot;integers of same length&quot;, and four distinct &quot;I want...&quot;  Perhaps there is trouble writing this code because there is difficulty describing the problem?"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1532542376, "post_id": 51524968, "comment_id": 90019327, "body": "didn&#39;t get the whole, but from what I understood, I wanna know; what if <code>row[0]==5</code>? there you have some negative values in your array and you don&#39;t have that many rows in your 2D vector array."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1532542406, "post_id": 51524968, "comment_id": 90019343, "body": "I&#39;m afraid that after the update I still can&#39;t understand what you are asking. It reads as though if given 3, you want to sort elements 3, 4, and 5, but the sample of <code>vect</code> has no 3,4,and 5."}, {"owner": {"reputation": 45, "user_id": 9676657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20fd0ab9b1a350ec8a7a3aa4c682cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tripoli", "link": "https://stackoverflow.com/users/9676657/tripoli"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1532542595, "post_id": 51524968, "comment_id": 90019435, "body": "@JeJo Actually, <code>row[0]</code> is always same with <code>vect.size()</code> It is written in my code as <code>vect.resize(row[0]);</code>"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1532542945, "post_id": 51524968, "comment_id": 90019581, "body": "@Tripoli <i>vector according to the values 23, 215 and 124</i> here you simply treat whole 2D vector rows as a single integer elements, right?"}, {"owner": {"reputation": 45, "user_id": 9676657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20fd0ab9b1a350ec8a7a3aa4c682cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tripoli", "link": "https://stackoverflow.com/users/9676657/tripoli"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1532543004, "post_id": 51524968, "comment_id": 90019598, "body": "@JeJo Yes, I want to treat them just like an integer."}, {"owner": {"reputation": 45, "user_id": 9676657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20fd0ab9b1a350ec8a7a3aa4c682cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tripoli", "link": "https://stackoverflow.com/users/9676657/tripoli"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1532544477, "post_id": 51524968, "comment_id": 90020250, "body": "@user4581301 I want to sort the vector and looking the new positions and old positions of its values, I want to sort first <code>row[0]</code> elements of my array starting from index 1. So <code>vect[0]</code> corresponds to <code>row[1]</code>, <code>vect[1]</code> corresponds to <code>row[2]</code>, and so on. If <code>vect[0]</code> is new <code>vect[1]</code>, <code>row [1]</code> should be new <code>row[2]</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532560710, "post_id": 51524968, "comment_id": 90026228, "body": "As I understand, following should help <a href=\"https://stackoverflow.com/questions/13840998/sorting-zipped-locked-containers-in-c-using-boost-or-the-stl\">sorting-zipped-locked-containers</a>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1532573774, "post_id": 51524968, "comment_id": 90028734, "body": "Here is a link to an example of <a href=\"https://stackoverflow.com/questions/50336770/sort-multiple-arrays-simultaneously-in-place/50340797#50340797\">sorting multiple arrays according to one of the arrays</a> which might be helpful."}], "answers": [{"comments": [{"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 45, "user_id": 9676657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20fd0ab9b1a350ec8a7a3aa4c682cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tripoli", "link": "https://stackoverflow.com/users/9676657/tripoli"}, "edited": false, "score": 0, "creation_date": 1532547223, "post_id": 51526222, "comment_id": 90021431, "body": "@Tripoli Hope that was helpful. :)"}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 2, "last_activity_date": 1532546438, "creation_date": 1532546438, "answer_id": 51526222, "question_id": 51524968, "link": "https://stackoverflow.com/questions/51524968/how-can-i-sort-an-array-according-to-values-of-its-corresponding-vector/51526222#51526222", "title": "How can I sort an array according to values of its corresponding vector?", "body": "<p>Following will give your desired output or at least give away(may be un-efficient) to approach your problem. Hope, the comments can guide you through. </p>\n\n<p><a href=\"https://www.ideone.com/UXAHld\" rel=\"nofollow noreferrer\"><kbd><strong>See Output</strong></kbd></a></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n   std::vector&lt;std::vector&lt;int&gt;&gt;  vect = {{0,2,3},{2,1,5},{1,2,4}};\n   std::vector&lt;int&gt; row = {3,0,1,2,-1,-2,15};\n   // new vector:  pair of integer -&gt; representing the rows of vect and index\n   std::vector&lt;std::pair&lt;std::string, int&gt;&gt; newVect;\n   newVect.reserve(vect.size());\n\n   int index = 0;\n   for(const std::vector&lt;int&gt;&amp; each_row: vect)\n   {\n      std::string str;             // each row of vect to a single integer string\n      for(const int Integer: each_row) str += std::to_string(Integer);\n      newVect.emplace_back(std::make_pair(str, index));\n      ++index;\n   }\n   // sort the new vector, according to the whole 2D vector row(which is a single string)\n   std::sort(newVect.begin(), newVect.end(), [](const auto&amp; lhs, const auto&amp; rhs)\n   {\n      return lhs.first &lt; rhs.first;\n   });\n   // now you can actually store the sorted vect\n   vect.clear();\n   for(auto index = 1; index &lt;= row[0]; ++index)\n   {\n      row[index] = newVect[index-1].second;  // replace the row indexes which are sorted\n      std::vector&lt;int&gt; vect_row;\n      // change each chars of string back to corresponding row elements\n      for(const char Integer: newVect[index-1].first)\n         vect_row.emplace_back(static_cast&lt;int&gt;(Integer - '0'));\n      // store to original vector\n      vect.emplace_back(vect_row);\n   }\n\n   // to print\n   for(const std::vector&lt;int&gt;&amp; each_row: vect)\n   {\n      for(const int Intger: each_row)\n         std::cout &lt;&lt; Intger &lt;&lt; \" \";\n      std::cout &lt;&lt; std::endl;\n   }\n   for(const int it: row) std::cout &lt;&lt; it &lt;&lt; \" \";\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9676657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20fd0ab9b1a350ec8a7a3aa4c682cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tripoli", "link": "https://stackoverflow.com/users/9676657/tripoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 51526222, "answer_count": 1, "score": -3, "last_activity_date": 1532547919, "creation_date": 1532541083, "last_edit_date": 1532547919, "question_id": 51524968, "link": "https://stackoverflow.com/questions/51524968/how-can-i-sort-an-array-according-to-values-of-its-corresponding-vector", "title": "How can I sort an array according to values of its corresponding vector?", "body": "<p>I want to sort my <code>row</code> array according to the values of the corresponding vector. That means, I have a vector that contains vector of integers of the same length. <code>std::vector&lt;std::vector&lt;int&gt;&gt; vec</code>.\nAnd according to the values of <code>vect</code> I want to sort my array <code>row</code>. <code>row</code> contains <code>N</code> elements, where the first element gives the number that we should consider for our row. If <code>row[0]==2</code> then we should only care 2 elements after <code>row[0]</code>.</p>\n\n<blockquote>\n  <p>Example:</p>\n\n<pre><code>Input:   vect = {{0,2,3},{2,1,5},{1,2,4}} \n         row  = {3,0,1,2,-1,-2,15}\n</code></pre>\n</blockquote>\n\n<p>Note that in <code>row</code> we just care about 2nd to 4th element since its first element is 3 (which represents the size of <code>vect</code>. i.e, <code>row[0] = vect.size()</code>). </p>\n\n<p>I want to sort my array and vector according to the values <code>023, 215 and 124</code>. That is, after sorting my vector, according to its elements' new positions I should sort my array by considering its first element. (just sort the desired ones.)</p>\n\n<p>So what I want to get is:</p>\n\n<blockquote>\n<pre><code>Output: vect = {{0,2,3},{1,2,4},{2,1,5}}\n        row  = {3,0,2,1,-1,-2,15}\n</code></pre>\n</blockquote>\n\n<p>Thank you very much for any help. Following is the code:</p>\n\n<pre><code>std::vector&lt;int&gt; seq;\nint pair;\nwhile(pair!=-1) {\n    seq.push_back(letter[pair--]);\n}\n\n.\n.\n.\nint* row = new int[N]; // N is the input\nstd::vector&lt;std::vector&lt;int&gt;&gt; vect;\nvect.resize(row[0]);\nfor(int e=0;e&lt;row[0];e++){\n    for(int elm=0;elm&lt;seq.size();elm++)\n        vect[e].push_back(outputs[seq[elm]][row[e+1]]);\n}\nsort(vect,row); // sort both?\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "edited": false, "score": 0, "creation_date": 1532570127, "post_id": 51526737, "comment_id": 90027982, "body": "I&#39;ve done what you suggested me. But it doesn&#39;t work. When i click button on login windows to add record in another form the error pops up."}, {"owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "edited": false, "score": 0, "creation_date": 1532570608, "post_id": 51526737, "comment_id": 90028081, "body": "Here is the code in login windows when i push add button :void MainWindow::on_pushButton_2_clicked() {     connClose();     FrmNew frmnew;     frmnew.setModal(true);     frmnew.exec(); }"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "reply_to_user": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "edited": false, "score": 0, "creation_date": 1532584626, "post_id": 51526737, "comment_id": 90031410, "body": "@BehruzMontazeri, its difficult to follow like this, put your real code in the question , you are still doing same problem"}, {"owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "edited": false, "score": 0, "creation_date": 1533122801, "post_id": 51526737, "comment_id": 90228305, "body": "I still have problem with opening and closing database."}], "tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 3, "last_activity_date": 1532548557, "creation_date": 1532548557, "answer_id": 51526737, "question_id": 51524866, "link": "https://stackoverflow.com/questions/51524866/connection-qt-sql-default-connection-is-still-in-use-all-queries-will-cease-t/51526737#51526737", "title": "connection &#39;qt_sql_default_connection&#39; is still in use, all queries will cease to work", "body": "<p>You are committing <em>exactly</em> what <a href=\"http://doc.qt.io/qt-5/qsqldatabase.html#removeDatabase\" rel=\"nofollow noreferrer\">Qt QSqlDatabase Documentation</a> warns about:</p>\n\n<blockquote>\n  <p>Warning: There should be no open queries on the database connection\n  when this function is called</p>\n</blockquote>\n\n<p>...</p>\n\n<blockquote>\n  <p>// WRONG</p>\n</blockquote>\n\n<pre><code>QSqlDatabase db = QSqlDatabase::database(\"sales\");\nQSqlQuery query(\"SELECT NAME, DOB FROM EMPLOYEES\", db);\nQSqlDatabase::removeDatabase(\"sales\"); // will output a warning\n</code></pre>\n\n<blockquote>\n  <p>// \"db\" is now a dangling invalid database connection, // \"query\"\n  contains an invalid result set</p>\n</blockquote>\n\n<p><strong>and the correct is</strong>:</p>\n\n<pre><code>{\n    QSqlDatabase db = QSqlDatabase::database(\"sales\");\n    QSqlQuery query(\"SELECT NAME, DOB FROM EMPLOYEES\", db);\n}\n</code></pre>\n\n<blockquote>\n  <p>// Both \"db\" and \"query\" are destroyed because they are out of scope</p>\n</blockquote>\n\n<pre><code>  QSqlDatabase::removeDatabase(\"sales\"); // correct\n</code></pre>\n\n<hr>\n\n<p>So in your case you execute query <code>qry1</code> and remove the database within same scope (i.e before <code>qry1</code> goes out of scope), you should modify your code to make sure <code>qry1</code> is executed and gets destroyed / goes out of scope / before deleting the database. Try this:</p>\n\n<pre><code>{\n QSqlQuery * qry1 = new QSqlQuery(mainwindow.mydb);\n qry1-&gt;prepare(\"insert into Poems(Title,Poem,Group) values ('\"+Title+\"','\"+Poem+\"','\"+Group+\"')\");\n if(qry1-&gt;exec())\n {\n     QMessageBox::critical(this,tr(\"\u062f\u0631\u062c \u0634\u0639\u0631 \u062c\u062f\u06cc\u062f\"),tr(\"\u0634\u0639\u0631 \u0627\u0636\u0627\u0641\u0647 \u0634\u062f\"));\n }\n}\n     mainwindow.connClose();\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6213427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca3c0334fbdd3b3d1115a0ca3f089d0?s=128&d=identicon&r=PG", "display_name": "behruz montazeri", "link": "https://stackoverflow.com/users/6213427/behruz-montazeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2552, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1532548557, "creation_date": 1532540649, "question_id": 51524866, "link": "https://stackoverflow.com/questions/51524866/connection-qt-sql-default-connection-is-still-in-use-all-queries-will-cease-t", "title": "connection &#39;qt_sql_default_connection&#39; is still in use, all queries will cease to work", "body": "<p>I've made separate functions for open and close connection.But it wont let me to add new record on new form.\nthis is login header file.</p>\n\n<pre><code>public:\nQSqlDatabase mydb;\nvoid connClose()\n{\n\n    //QString connection;\n    //connection = mydb.connectionName();\n    mydb.close();\n    //mydb.removeDatabase(connection);\n    mydb.removeDatabase(mydb.connectionName());\n}\nbool connOpen()\n{\n    mydb=QSqlDatabase::addDatabase(\"QSQLITE\");\n    mydb.setDatabaseName(\"./Poem.db\");\n    if(mydb.open())\n    {\n        return true;\n    }\n    else if(!mydb.open())\n    {\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>this is the other form add button :</p>\n\n<pre><code>QString Title,Group,Poem;\n\nTitle = ui-&gt;lineEdit-&gt;text();\nGroup = ui-&gt;label_2-&gt;text();\nPoem = ui-&gt;textEdit-&gt;toPlainText();\n\n\n\nMainWindow mainwindow;\nmainwindow.connOpen();\n\n\n\n QSqlQuery * qry1 = new QSqlQuery(mainwindow.mydb);\n\n qry1-&gt;prepare(\"insert into Poems(Title,Poem,Group) values ('\"+Title+\"','\"+Poem+\"','\"+Group+\"')\");\n\n if(qry1-&gt;exec())\n {\n     QMessageBox::critical(this,tr(\"\u062f\u0631\u062c \u0634\u0639\u0631 \u062c\u062f\u06cc\u062f\"),tr(\"\u0634\u0639\u0631 \u0627\u0636\u0627\u0641\u0647 \u0634\u062f\"));\n     mainwindow.connClose();\n }\n</code></pre>\n\n<p>I get this errors :</p>\n\n<p>duplicate connection name 'qt_sql_default_connection', old connection removed.\nconnection 'qt_sql_default_connection' is still in use, all queries will cease to work.</p>\n"}, {"tags": ["c++", "qt", "qml", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1532540598, "creation_date": 1532540598, "answer_id": 51524850, "question_id": 51524427, "link": "https://stackoverflow.com/questions/51524427/cannot-invoke-c-method-from-qml-property-of-object-is-not-a-function/51524850#51524850", "title": "Cannot invoke c++ method from qml: &quot;Property of object is not a function&quot;", "body": "<p>The issue is probably that you named the context property <code>data</code>, which is <a href=\"http://doc.qt.io/qt-5/qml-qtquick-item.html#data-prop\" rel=\"nofollow noreferrer\">already a property of <code>Item</code>.</a> Call the property something else and it should work.</p>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 4886151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNZG8.jpg?s=128&g=1", "display_name": "Chickenturtle", "link": "https://stackoverflow.com/users/4886151/chickenturtle"}, "edited": false, "score": 0, "creation_date": 1542269912, "post_id": 51524859, "comment_id": 93510227, "body": "hi iam trying to use the same view.engine()-&gt;rootContext()-&gt;setContextProperty(&quot;newMails&quot;,&zwnj;&#8203;newMail); i am also getting the same issue can you please help me out"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1532544066, "last_edit_date": 1532544066, "creation_date": 1532540622, "answer_id": 51524859, "question_id": 51524427, "link": "https://stackoverflow.com/questions/51524427/cannot-invoke-c-method-from-qml-property-of-object-is-not-a-function/51524859#51524859", "title": "Cannot invoke c++ method from qml: &quot;Property of object is not a function&quot;", "body": "<p><a href=\"http://doc.qt.io/qt-5/qml-qtquick-window-window.html\" rel=\"nofollow noreferrer\">Window</a> it has a property called <a href=\"http://doc.qt.io/qt-5/qml-qtquick-window-window.html#data-prop\" rel=\"nofollow noreferrer\">data</a>, so you should not use that name since it will be understood that the data refers to that attribute and not to the object that you are passing on to it.</p>\n\n<p>The solution is to change the name:</p>\n\n<p>C++</p>\n\n<pre><code>engine.rootContext()-&gt;setContextProperty(\"helper\", myData);\n</code></pre>\n\n<p>QML:</p>\n\n<pre><code>helper.test(\"test\");\n</code></pre>\n\n<p>On the other hand it is not necessary to register the type if you are going to use <code>setContextProperty()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2576766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeda0f56bff376f25da6f5bac45950e?s=128&d=identicon&r=PG", "display_name": "mass shabani", "link": "https://stackoverflow.com/users/2576766/mass-shabani"}, "is_accepted": false, "score": 0, "last_activity_date": 1586356567, "creation_date": 1586356567, "answer_id": 61103312, "question_id": 51524427, "link": "https://stackoverflow.com/questions/51524427/cannot-invoke-c-method-from-qml-property-of-object-is-not-a-function/61103312#61103312", "title": "Cannot invoke c++ method from qml: &quot;Property of object is not a function&quot;", "body": "<p>better you create an object of that class in QML code and then use its functions.</p>\n\n<p>your main.qml</p>\n\n<pre><code>import QtQuick 2.7\nimport QtQuick.Window 2.2\nimport QtQuick.Controls 2.2\nimport com.br.classes 1.0\n\nWindow {\n    visible: true\n    width: 640\n    height: 480\n    title: qsTr(\"Hello World\")\n\n    Data { id: data }\n\n    Button {\n        text: \"Press me!\"\n        onClicked: {\n            data.test(\"test\");\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 2894356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd0ecd4ae3270a7cc2957a18c4f18ec?s=128&d=identicon&r=PG&f=1", "display_name": "user2894356", "link": "https://stackoverflow.com/users/2894356/user2894356"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2790, "favorite_count": 0, "accepted_answer_id": 51524859, "answer_count": 3, "score": 1, "last_activity_date": 1586356567, "creation_date": 1532538905, "last_edit_date": 1543201134, "question_id": 51524427, "link": "https://stackoverflow.com/questions/51524427/cannot-invoke-c-method-from-qml-property-of-object-is-not-a-function", "title": "Cannot invoke c++ method from qml: &quot;Property of object is not a function&quot;", "body": "<p>I am now trying to find a solution for hours and I absolutely have no clue what is wrong.</p>\n\n<p>I am trying to submit a string from QML to a C++ method and I get the error: \"qrc:/main.qml:16: TypeError: Property 'test' of object [object Object] is not a function\" </p>\n\n<p>Has anyone an idea how to fix that?</p>\n\n<p>Thank you very much!</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31630078/c-class-exposed-to-qml-error-in-fashion-typeerror-property-of-object-is\">Mabe related but I do not find a solution</a></p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include \"data.h\"\n#include &lt;QQmlContext&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n\n    QGuiApplication app(argc, argv);\n\n    qmlRegisterType&lt;Data&gt;(\"com.br.classes\", 1, 0, \"Data\");\n\n    Data* myData = new Data();\n\n    QQmlApplicationEngine engine;\n    engine.rootContext()-&gt;setContextProperty(\"data\", myData);\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n\n    if (engine.rootObjects().isEmpty())\n        return -1;\n\n    return app.exec();\n }\n</code></pre>\n\n<p>data.h</p>\n\n<pre><code>#ifndef DATA_H\n#define DATA_H\n\n#include &lt;QObject&gt;\n#include &lt;QDebug&gt;\n\nclass Data : public QObject\n{  \n    Q_OBJECT\npublic:\n    explicit Data(QObject *parent = nullptr);\n\n    Q_INVOKABLE void test(QString strg) {qDebug() &lt;&lt; \"Received string: \" &lt;&lt; strg;}\n};\n\n#endif // DATA_H\n</code></pre>\n\n<p>main.qml</p>\n\n<pre><code>import QtQuick 2.7\nimport QtQuick.Window 2.2\nimport QtQuick.Controls 2.2\nimport com.br.classes 1.0\n\nWindow {\n    visible: true\n    width: 640\n    height: 480\n    title: qsTr(\"Hello World\")\n\n    Button {\n        text: \"Press me!\"\n        onClicked: {\n            data.test(\"test\");\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "protocol-buffers", "google-style-guide"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1532538836, "post_id": 51524374, "comment_id": 90017535, "body": "Have you considered that maybe it <i>doesn&#39;t</i> work in those circumstances?"}, {"owner": {"reputation": 323, "user_id": 3050072, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e860f0c62ba70b70986241003580542a?s=128&d=identicon&r=PG&f=1", "display_name": "ByoTic", "link": "https://stackoverflow.com/users/3050072/byotic"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532539229, "post_id": 51524374, "comment_id": 90017737, "body": "With -fno-exceptions? obviously not, but that&#39;s the point. How can they say they are not using exceptions and disallow using object that may throw, but still uses those kind of objects?"}, {"owner": {"reputation": 37223, "user_id": 485561, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/61c769a3a57614e2cff3789076adde3d?s=128&d=identicon&r=PG", "display_name": "Mankarse", "link": "https://stackoverflow.com/users/485561/mankarse"}, "edited": false, "score": 0, "creation_date": 1532585561, "post_id": 51524374, "comment_id": 90031744, "body": "Basically the code contains bugs related to exceptions (such as throwing in code not designed to handle exceptions), but it is &quot;ok&quot; because the style guide says that exceptions are disallowed. In particular, exceptions related to out-of-memory are assumed to not occur in practice. I&#39;ve never understood the google style guide myself, for exactly the reasons you mention."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532597162, "post_id": 51524374, "comment_id": 90038437, "body": "@ByoTic You can safely let the standard library <code>throw</code>, as long as either: it doesn&#39;t <code>catch</code> with your code in between; or the handling of the catch is <code>std::terminate</code>"}], "owner": {"reputation": 323, "user_id": 3050072, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e860f0c62ba70b70986241003580542a?s=128&d=identicon&r=PG&f=1", "display_name": "ByoTic", "link": "https://stackoverflow.com/users/3050072/byotic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1615, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532585106, "creation_date": 1532538702, "last_edit_date": 1532585106, "question_id": 51524374, "link": "https://stackoverflow.com/questions/51524374/protobuf-and-exceptions", "title": "Protobuf and exceptions", "body": "<p>So I was reading about protobuf exception handling, and I've read the following document:\n<a href=\"https://groups.google.com/forum/#!topic/protobuf/IFcZQK0QuzI\" rel=\"nofollow noreferrer\">https://groups.google.com/forum/#!topic/protobuf/IFcZQK0QuzI</a></p>\n\n<blockquote>\n  <p>specifically: We don't use exceptions in protobuf as exceptions are\n  disallowed per Google C++ Style Guide:\n  <a href=\"https://google.github.io/styleguide/cppguide.html#Exceptions\" rel=\"nofollow noreferrer\">https://google.github.io/styleguide/cppguide.html#Exceptions</a></p>\n  \n  <p>As such the code likely won't work if some objects throw.</p>\n</blockquote>\n\n<p>So, first of all, inside thatsame google style guide, it is mentioned that it is possible to use std::hash, but std::hash is part of the STL which throws! How can it work properly when compiling with -fno-exceptions?\nAnd the same goes for protobuf: it heavily uses std::string for example. How can they claim that they don't throw exceptions?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "qt", "qt5", "c++14", "qtablewidgetitem"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532538722, "post_id": 51524354, "comment_id": 90017491, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532539362, "post_id": 51524354, "comment_id": 90017814, "body": "you say it does not work, that&#39;s called an error, it&#39;s not a syntax error but an error."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532539383, "post_id": 51524354, "comment_id": 90017828, "body": "only the delegate provides"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532539437, "post_id": 51524354, "comment_id": 90017865, "body": "I also think that with the reputation you have, you know that an MCVE does not necessarily refer to its project, but rather a code that can be a mini-project."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532539670, "post_id": 51524354, "comment_id": 90017983, "body": "Well, I will try to reproduce your problem :) although I do not know where it is."}, {"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532540048, "post_id": 51524354, "comment_id": 90018153, "body": "@eyllanesc So are you saying that my assumption that changing the delegate doesn&#39;t update the QTableWidgetItems display is wrong?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1532540385, "post_id": 51524354, "comment_id": 90018328, "body": "I just had a look into source code at woboq.org: <a href=\"https://code.woboq.org/qt5/qtbase/src/widgets/itemviews/qabstractitemview.cpp.html#_ZN17QAbstractItemView15setItemDelegateEP21QAbstractItemDelegate\" rel=\"nofollow noreferrer\"><code>QAbstractItemView::setItemDelegate()</code></a> does already a <code>viewport()-&gt;update();</code>. (If I didn&#39;t overlook something the derived classes don&#39;t overload this.)"}, {"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1532540976, "post_id": 51524354, "comment_id": 90018633, "body": "@eyllanesc I&#39;ve provided more code."}], "owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532543396, "creation_date": 1532538623, "last_edit_date": 1532543396, "question_id": 51524354, "link": "https://stackoverflow.com/questions/51524354/how-to-update-qtablewidgetitems-when-a-new-delegate-is-chosen", "title": "How to update QTableWidgetItems when a new delegate is chosen?", "body": "<p>I've created a QTableWidget which I change the delegate based upon an button.  I've been able to get the different delegates set up with the QTableWidget, but changing the delegates doesn't seem to automatically update the QTableWidgetItems.  When I go into a user edit of the QTableWidget item through the actual UI, the item is correctly updated to the correct delegate. </p>\n\n<p>Here is an example of the code I'm using to update the delegate:</p>\n\n<pre><code>//here is the item delegate I used\n#include &lt;QItemDelegate&gt;\n#include &lt;QSpinBox&gt;\n#include &lt;limits&gt;\n\nclass IntDelegate : public QItemDelegate {\n    int m_min;\n    int m_max;\npublic:\n    explicit IntDelegate(int min = std::numeric_limits&lt;int&gt;::min(),\n                         int max = std::numeric_limits&lt;int&gt;::max(),\n                         QObject *parent = nullptr) : QItemDelegate(\n            parent), m_min(min), m_max(max) {\n    }\n\n    QWidget *createEditor(QWidget *parent, const QStyleOptionViewItem &amp;option,\n                          const QModelIndex &amp;index) const override {\n        auto spinbox = new QSpinBox(parent);\n        spinbox-&gt;setMinimum(m_min);\n        spinbox-&gt;setMaximum(m_max);\n        return spinbox;\n    }\n\n    void setEditorData(QWidget *editor,\n                       const QModelIndex &amp;index) const override {\n        int value = index.model()-&gt;data(index, Qt::EditRole).toInt();\n        auto *spinBox = static_cast&lt;QSpinBox *&gt;(editor);\n        spinBox-&gt;setValue(value);\n    }\n\n    void setModelData(QWidget *editor, QAbstractItemModel *model,\n                      const QModelIndex &amp;index) const override {\n        auto *spinBox = static_cast&lt;QSpinBox *&gt;(editor);\n        spinBox-&gt;interpretText();\n        int value = spinBox-&gt;value();\n\n        model-&gt;setData(index, value, Qt::EditRole);\n    }\n\n    void updateEditorGeometry(QWidget *editor,\n                              const QStyleOptionViewItem &amp;option,\n                              const QModelIndex &amp;index) const override {\n        editor-&gt;setGeometry(option.rect);\n    }\n};\n</code></pre>\n\n\n\n<pre><code>#include &lt;QItemDelegate&gt;\n#include &lt;QDoubleSpinBox&gt;\n#include &lt;limits&gt;\n\nclass DoubleDelegate : public QItemDelegate {\ndouble m_min;\ndouble m_max;\npublic:\nexplicit DoubleDelegate(double min = -std::numeric_limits&lt;double&gt;::max(),\n                        double max = std::numeric_limits&lt;double&gt;::max(),\n                        QObject *parent = nullptr) : QItemDelegate(\n        parent), m_min(min), m_max(max) {\n}\n\nQWidget *createEditor(QWidget *parent, const QStyleOptionViewItem &amp;option,\n                      const QModelIndex &amp;index) const override {\n    auto spinbox = new QDoubleSpinBox(parent);\n    spinbox-&gt;setMinimum(m_min);\n    spinbox-&gt;setMaximum(m_max);\n    spinbox-&gt;setDecimals(323);\n\n    return spinbox;\n}\n\nvoid setEditorData(QWidget *editor,\n                   const QModelIndex &amp;index) const override {\n    double value = index.model()-&gt;data(index, Qt::EditRole).toDouble();\n    auto *spinBox = static_cast&lt;QDoubleSpinBox *&gt;(editor);\n    spinBox-&gt;setValue(value);\n}\n\nvoid\nsetModelData(QWidget *editor, QAbstractItemModel *model,\n             const QModelIndex &amp;index) const override {\n    auto *spinBox = static_cast&lt;QDoubleSpinBox *&gt;(editor);\n    spinBox-&gt;interpretText();\n    double value = spinBox-&gt;value();\n\n    model-&gt;setData(index, value, Qt::EditRole);\n}\n\nvoid updateEditorGeometry(QWidget *editor,\n                          const QStyleOptionViewItem &amp;option,\n                          const QModelIndex &amp;index) const override {\n    editor-&gt;setGeometry(option.rect);\n}\n\n};\n</code></pre>\n\n\n\n<pre><code> #include &lt;QTableWidget&gt; // table matrix box\n #include &lt;QLabel&gt;\n #include &lt;QVBoxLayout&gt;\n #include &lt;QGridLayout&gt;\n #include &lt;QFileDialog&gt;\n #include \"intdelegate.h\"\n #include \"doubledelegate.h\"\n #include &lt;QComboBox&gt; // selection of QT type\n #include &lt;limits&gt;\n\n\n #define CV_8U 0\n #define CV_8S 1\n #define CV_16U 2\n #define CV_16S 3\n #define CV_32S 4\n #define CV_32F 5\n #define CV_64F 6\n\n// inside area where widget is created\nclass MatrixBoxWidget : public QWidget {\n     Q_OBJECT\n\n     QTableWidget *m_matrix_table;\n     QComboBox *m_cv_types_combobox;\npublic:\n explicit MatrixBoxWidget(QWidget *parent = nullptr){\n    m_cv_types_combobox = new QComboBox(this);\n\n    m_cv_types_combobox-&gt;addItem(\"uint8\", QVariant::fromValue(CV_8U));\n    m_cv_types_combobox-&gt;addItem(\"int8\", QVariant::fromValue(CV_8S));\n    m_cv_types_combobox-&gt;addItem(\"uint16\", QVariant::fromValue(CV_16U));\n    m_cv_types_combobox-&gt;addItem(\"int16\", QVariant::fromValue(CV_16S));\n    m_cv_types_combobox-&gt;addItem(\"int32\", QVariant::fromValue(CV_32S));\n    m_cv_types_combobox-&gt;addItem(\"float\", QVariant::fromValue(CV_32F));\n    m_cv_types_combobox-&gt;addItem(\"double\", QVariant::fromValue(CV_64F));\n\n\n    connect(m_cv_types_combobox,\n        qOverload&lt;int&gt;(&amp;QComboBox::currentIndexChanged), this,\n        &amp;MatrixBoxWidget::validateDisplayType);\n\n    QTableWidget *m_matrix_table = new QTableWidget(this);\n    auto delegate = new IntDelegate();\n    m_matrix_table-&gt;setItemDelegate(delegate);\n    m_matrix_table-&gt;setItem(0, 0, new QTableWidgetItem());\n    m_matrix_table-&gt;item(0, 0)-&gt;setData(Qt::EditRole, 12723);\n    m_matrix_table-&gt;setItem(0, 1, new QTableWidgetItem());\n    m_matrix_table-&gt;item(0, 1)-&gt;setData(Qt::EditRole, 12723);\n    m_matrix_table-&gt;setItem(1, 0, new QTableWidgetItem());\n    m_matrix_table-&gt;item(1, 0)-&gt;setData(Qt::EditRole, 12723);\n    m_matrix_table-&gt;setItem(1, 1, new QTableWidgetItem());\n    m_matrix_table-&gt;item(1, 1)-&gt;setData(Qt::EditRole, 12723);\n\n    auto type_layout = new QVBoxLayout();\n    auto type_label = new QLabel(\"type\", this);\n    type_layout-&gt;addWidget(type_label);\n    type_layout-&gt;addWidget(m_cv_types_combobox);\n\n    auto layout = new QGridLayout(this);\n    layout-&gt;addLayout(type_layout, 0, 2);\n    layout-&gt;addWidget(m_matrix_table, 1, 0, 3, 3);\n\n}\nvoid validateDisplayType(int index) {\n    QVariant current_data = m_cv_types_combobox-&gt;currentData();\n    auto cv_type = current_data.value&lt;int&gt;();\n    QItemDelegate *delegate;\n    switch (cv_type) {\n        case CV_8U:\n            delegate = new IntDelegate(std::numeric_limits&lt;uint8_t&gt;::min(),\n                                       std::numeric_limits&lt;uint8_t&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        case CV_8S:\n            delegate = new IntDelegate(std::numeric_limits&lt;int8_t&gt;::min(),\n                                       std::numeric_limits&lt;int8_t&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        case CV_16U:\n            delegate = new IntDelegate(std::numeric_limits&lt;uint16_t&gt;::min(),\n                                       std::numeric_limits&lt;uint16_t&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        case CV_16S:\n            delegate = new IntDelegate(std::numeric_limits&lt;int16_t&gt;::min(),\n                                       std::numeric_limits&lt;int16_t&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        case CV_32S:\n            delegate = new IntDelegate(std::numeric_limits&lt;int32_t&gt;::min(),\n                                       std::numeric_limits&lt;int32_t&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        case CV_32F:\n            delegate = new DoubleDelegate(-std::numeric_limits&lt;float&gt;::max(),\n                                          std::numeric_limits&lt;float&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        case CV_64F:\n            delegate = new DoubleDelegate(-std::numeric_limits&lt;double&gt;::max(),\n                                          std::numeric_limits&lt;double&gt;::max());\n            m_matrix_table-&gt;setItemDelegate(delegate);\n            break;\n        default:\n            assert((false, \"unknown type format\"));\n            break;\n    }\n};\n</code></pre>\n\n<p>For example, one delegate is a uint16_t delegate, I set the value of the item to 1024.  When I swap delegates I want the display to change the value displayed accordingly.  When I go to edit an item, this has perfect behavior, and the delegate value becomes 255, and similarly, if I use a delegate that uses Doubles for display, then switch to integers, I go from 2.234 to 2. example of this in action, same number used for all, but I edit when the delegate changes and the correct range is clamped for it (going from uint16 to uint8):</p>\n\n<p><a href=\"https://i.stack.imgur.com/7BS2Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7BS2Q.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I force this behavior programmically when I switch the delegate instead of having to manually click on the display? I've tried updating the viewport but I don't think its doing what I think it does:</p>\n\n<pre><code>m_matrix_table-&gt;viewport()-&gt;update();\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt4", "qfiledialog"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532538473, "post_id": 51524245, "comment_id": 90017357, "body": "I have tried with Qt4 4.8.7 and it works correctly, if you want help it provides a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> since for me the error is in another side."}, {"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1532542251, "post_id": 51524245, "comment_id": 90019265, "body": "I think the problem was that I was using the QFileDialog::getSaveFileName in a background thread but gui elements are only valid in the main gui thread . I think they should write this in a big bold text in the first of the beginners documentation"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532542343, "post_id": 51524245, "comment_id": 90019307, "body": "The documentation is for everyone, not only for beginners, in the documentation about threads we talk about it: <a href=\"http://doc.qt.io/qt-5/thread-basics.html#gui-thread-and-worker-thread\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/thread-basics.html#gui-thread-and-worker-thre&zwnj;&#8203;ad</a>"}, {"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532542768, "post_id": 51524245, "comment_id": 90019510, "body": "I meant this <a href=\"https://wiki.qt.io/Qt_for_Beginners\" rel=\"nofollow noreferrer\">wiki.qt.io/Qt_for_Beginners</a> however the link you provided is very useful . thanks"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1532542919, "post_id": 51524245, "comment_id": 90019562, "body": "use threads you can say it&#39;s an intermediate knowledge so I do not expect this in those examples"}], "owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532538485, "creation_date": 1532538107, "last_edit_date": 1532538485, "question_id": 51524245, "link": "https://stackoverflow.com/questions/51524245/qfiledialog-getsavefilename-crashes-the-program", "title": "QFileDialog getSaveFileName crashes the program", "body": "<p>I use qt file dialog to get the path to save the output file but it crashes or hangs or breaks the programs design or or \nthis is my simple use :</p>\n\n<pre><code>QString save_file = QFileDialog::getSaveFileName(this,\"choose a path to save the file\",\"\",\n                                         \"executable files (*.exe)\");\n</code></pre>\n\n<p>However I can use QFileDialog getOpenFileName very usually without any problem and with same way :</p>\n\n<pre><code>icon_path = QFileDialog::getOpenFileName(this,\"choose an icon\",\"\",\n                                         \"ico and image files (*.ico *.xpm *.jpg *.jpeg *.png);;all files (*)\");\n</code></pre>\n\n<p>I'm using qt 4.8 and can't upgrade for the current project\nIs the problem in qt library or in my usage or in what ?</p>\n"}, {"tags": ["c++", "visual-c++", "dll"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 1, "creation_date": 1532539066, "post_id": 51524198, "comment_id": 90017653, "body": "Simple rule: don&#39;t do it, you are looking at a huge mess if things go wrong. Just put it in the cpp"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532539567, "post_id": 51524198, "comment_id": 90017937, "body": "&quot;in which case, windows guarantee&quot; - Don&#39;t care about that. Care about what the C++ standard guarantees."}, {"owner": {"reputation": 8551, "user_id": 440403, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f6698434e6b31de0de985726bb87364?s=128&d=identicon&r=PG", "display_name": "camino", "link": "https://stackoverflow.com/users/440403/camino"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532541364, "post_id": 51524198, "comment_id": 90018838, "body": "@JesperJuhl what c++ standard guarantees ?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532541565, "post_id": 51524198, "comment_id": 90018938, "body": "@camino Go look it up."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1532542861, "post_id": 51524198, "comment_id": 90019544, "body": "@JesperJuhl The C++ standard doesn&#39;t contemplate a concept of shared libraries, and says nothing about their behavior. The behavior at issue here is necessarily implementation-dependent."}], "owner": {"reputation": 8551, "user_id": 440403, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f6698434e6b31de0de985726bb87364?s=128&d=identicon&r=PG", "display_name": "camino", "link": "https://stackoverflow.com/users/440403/camino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1533141946, "answer_count": 0, "score": 1, "last_activity_date": 1532656857, "creation_date": 1532537983, "question_id": 51524198, "link": "https://stackoverflow.com/questions/51524198/in-which-case-windows-guarantee-the-static-variable-defined-inside-inline-membe", "closed_reason": "Duplicate", "title": "in which case, windows guarantee the static variable defined inside inline member functions are unique across modules(dll/exe)?", "body": "<p>According to this <a href=\"https://stackoverflow.com/a/19374253/440403\">post</a>: \nglobal variable not exported will be only visible to its own module.</p>\n\n<p>I am wondering what is the story for static variables defined inside a inline member function of a class, for example:</p>\n\n<pre><code>//cat.h\n\n#ifdef EXPORT_ADD_\n#define DLL_ __declspec(dllexport)\n#else\n#define DLL_ __declspec(dllimport)\n#endif\n\nClass DLL_ Cat\n{\npublic:\n    static void foo()\n    {\n        static int i = 0;\n        std::cout &lt;&lt; i++ &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>1) if cat.h is included in multiple module, say d1.dll,  d2,dll\n   and Cat::foo() are called in each module\n   what result will be guarantee to be get?<br>\n2)  it seems that __declspec(dllexport) and__declspec(dllimport) \n    play a important role.\n    In my test, </p>\n\n<pre><code>Class  Cat {...} //DLL_ is removed\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#define DLL_ //__declspec(dllimport)  comment out dllimport\n</code></pre>\n\n<p>the static variable will not be unique</p>\n\n<p>I am wondering what is the Rule of thumb to deal with static variable inside inline member functions. Thanks.</p>\n"}, {"tags": ["c++", "regex", "string", "memory", "cout"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1532537474, "post_id": 51523998, "comment_id": 90016843, "body": "Why can&#39;t these be combined into a singular regular expression of the form <code>(?:static|extends)</code>? It seems like what you really need is a parser but a regular expression could be one way of bootstrapping this."}, {"owner": {"reputation": 4081, "user_id": 1046965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f7d19c3b7877ce68c45d7a405b7f4b04?s=128&d=identicon&r=PG", "display_name": "Tomasz Szulc", "link": "https://stackoverflow.com/users/1046965/tomasz-szulc"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1532537733, "post_id": 51523998, "comment_id": 90016978, "body": "@tadman, on this specific case yes, they could, but I want to create different objects for different regular expressions with different number of params - so at the moment wanted to keep them separated."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1532537807, "post_id": 51523998, "comment_id": 90017011, "body": "At some point a regular expression will no longer cut it and what you need is a simple tokenizing parser. These aren&#39;t that hard to implement and offer significantly more flexibility than a regular expression."}, {"owner": {"reputation": 4081, "user_id": 1046965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f7d19c3b7877ce68c45d7a405b7f4b04?s=128&d=identicon&r=PG", "display_name": "Tomasz Szulc", "link": "https://stackoverflow.com/users/1046965/tomasz-szulc"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1532537852, "post_id": 51523998, "comment_id": 90017036, "body": "@tadman will read about tokenizing parser, thanks for advice!"}], "owner": {"reputation": 4081, "user_id": 1046965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f7d19c3b7877ce68c45d7a405b7f4b04?s=128&d=identicon&r=PG", "display_name": "Tomasz Szulc", "link": "https://stackoverflow.com/users/1046965/tomasz-szulc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532542729, "creation_date": 1532537277, "last_edit_date": 1532542729, "question_id": 51523998, "link": "https://stackoverflow.com/questions/51523998/getting-garbage-when-reading-string-from-stdsmatch", "title": "Getting garbage when reading string from std::smatch", "body": "<p>I'm trying to fix a memory issue, I think, for several hours now and I can't understand the issue of the problem.</p>\n\n<p>I have a classes <code>StaticTag</code> and <code>ExtendsTag</code> that I create with result of <code>std::smatch</code> (<code>&lt;regex&gt;</code>). Method creating <code>StaticTag</code> always works, but method creating <code>ExtendsTag</code> never works. The only difference is regular expression which works all the time because the substring is matched. Problem here is even printing a captured group which mostly all the time gives me a garbage with suffix of correct string. Here is the code.</p>\n\n<p>Execution of two methods <code>find_static_tag</code> and <code>find_extends_tag</code> (the latter does not work):</p>\n\n<pre><code>StaticTag static_tag;\nif (Regex::find_static_tag(this-&gt;_content, static_tag)) {\n\n}\n\nExtendsTag extends_tag;\nif (Regex::find_extends_tag(this-&gt;_content, extends_tag)) {\n\n}\n</code></pre>\n\n<p>Both methods presented below:</p>\n\n<pre><code>bool Regex::find_extends_tag(std::string in, ExtendsTag&amp; tag) {\n    std::string pattern = \"\\\\{%\\\\s*extends\\\\s+\\\"(\\\\S+)\\\"\\\\s*%\\\\}\";\n    std::smatch match;\n    if (Regex::find_first(pattern, in, match)) {\n        std::cout &lt;&lt; match[1] &lt;&lt; std::endl;\n        tag = ExtendsTag(match[1], match.position(), match.length());\n        return true;\n    }\n\n    return false;\n}\n\nbool Regex::find_static_tag(std::string in, StaticTag&amp; tag) {\n    std::string pattern = \"\\\\{%\\\\s*static\\\\s+\\\"(\\\\S+)\\\"\\\\s*%\\\\}\";\n    std::smatch match;\n    if (Regex::find_first(pattern, in, match)) {\n        std::cout &lt;&lt; match[1] &lt;&lt; std::endl;\n        tag = StaticTag(match[1], match.position(), match.length());\n        return true;\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>They need to match: <code>{% static \"style.css\" %}</code> and <code>{% extends \"master.html\" %}</code>.</p>\n\n<p>Usually I got something like this instead of \"master.html\": \ufffd0e.html.</p>\n\n<p>I think it might be memory issue, but I don't know where to start because two methods looks identical for me. It is not about creating objects of <code>StaticTag</code> and <code>ExtendsTag</code>, it fails printing <code>match[1]</code> in <code>find_extends_tag</code> method.</p>\n\n<p><strong>EDIT</strong>: Look like when I change from <code>static</code> to <code>extends</code> in the second method the result is the same. Is this something wrong with <code>&lt;regex&gt;</code> then?</p>\n\n<p>Thank you for your help in advance!</p>\n\n<p>The file I am trying to parse:</p>\n\n<pre><code>{% extends \"master.html\" %}\n\n{% block content %}\n    &lt;p&gt;Hello ios/index.html&lt;/p&gt;\n    &lt;img src=\"{% static \"html-css.png\" %}\"/&gt;\n{% endblock %}\n</code></pre>\n\n<p><strong>EDIT 2:</strong>\nNot sure why it started to work. I took out implementation of <code>Regex::find_first(pattern, in, match)</code> and put it directly in <code>find_static_tag</code> and <code>find_extends_tag</code> and it started to work correctly.</p>\n\n<p>Here is implementation of <code>find_extends_tag</code> that works always:</p>\n\n<pre><code>bool Regex::find_extends_tag(std::string in, ExtendsTag&amp; tag) {\n    std::smatch match;\n    if (std::regex_search(in, match, std::regex(\"\\\\{%\\\\s*extends\\\\s+\\\"(\\\\S+)\\\"\\\\s*%\\\\}\"))) {\n        tag = ExtendsTag(match[1], match.position(), match.length());\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>Not sure what's the difference here.</p>\n"}, {"tags": ["c++", "c++11", "templates", "language-lawyer"], "comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1532537418, "post_id": 51523965, "comment_id": 90016807, "body": "Same ways you do for a class: declare its =default constructor protected, or some virtual methods pure, or a virtual destructor protected. Yes, struct can have constructors and virtual methods, though they stop you using proper c-style aggregate initialisation. The constructor is cheep. The virtual methods have a cost if you don&#39;t otherwise want virtuals."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 3, "creation_date": 1532540094, "post_id": 51523965, "comment_id": 90018177, "body": "@Gem Taylor What on earth are you babeling about?"}], "answers": [{"tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": -1, "last_activity_date": 1532539799, "creation_date": 1532539799, "answer_id": 51524642, "question_id": 51523965, "link": "https://stackoverflow.com/questions/51523965/template-dependent-false/51524642#51524642", "title": "Template dependent false", "body": "<p>Maybe the following idea:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct AlwaysError\n{\n    AlwaysError&lt;T&gt;()\n    {\n        std::cout &lt;&lt; T::value &lt;&lt; std::endl;\n        static_assert( T::value, \"You must use specialization!\");\n    }\n};\n\n\ntemplate &lt;typename T&gt;\nstruct Foo: public AlwaysError&lt;Foo&lt;T&gt;&gt;\n{\n    static constexpr bool value = false;\n};\n\ntemplate &lt;&gt;\nstruct Foo&lt;int&gt;{};\n\nint main()\n{\n    //Foo&lt;double&gt; d; // error message as expected\n    Foo&lt;int&gt; i;  // specialized, compiles!\n}\n</code></pre>\n\n<p>The assert message contains the text and also the type which should be specialized. In hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1532554398, "post_id": 51524832, "comment_id": 90024568, "body": "I am uncertain this helps: so long as there is no instance of the primary specialization that makes the instantiation valid, isn&#39;t the program ill-formed?  Or is a function with a static assert sufficiently valid?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1532554700, "post_id": 51524832, "comment_id": 90024663, "body": "@Yakk-AdamNevraumont There must be a valid specialization, period. The primary doesn&#39;t have to be valid."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1532559675, "post_id": 51524832, "comment_id": 90026026, "body": "the standard uses specialization differently than we do.  I believe each of the partial/primary/full soecializations have to have a valid instantiation.  But not certain."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532607538, "post_id": 51524832, "comment_id": 90044820, "body": "I thought <a href=\"https://stackoverflow.com/a/47657098/4832499\">I was told by you</a> that this is in fact ill-formed NDR. Or perhaps <a href=\"https://stackoverflow.com/a/30079285/4832499\">this</a>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532610483, "post_id": 51524832, "comment_id": 90046787, "body": "@PasserBy Neither of those answers says that. The key is that <code>AlwaysFalse&lt;T&gt;::value</code> could hypothetically be specialized to be true, somewhere. But <code>false</code> and <code>sizeof(T) != sizeof(T)</code> are always <code>false</code>, neither of those depends on a template parameter."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532610757, "post_id": 51524832, "comment_id": 90046998, "body": "But wouldn&#39;t it be the same if <code>AlwaysFalse</code> doesn&#39;t have any specialization that that has <code>true</code> as <code>value</code>? It is still true that no <code>Foo&lt;T&gt;</code> (of the primary template) is a valid specialization. At the first point where <code>Foo</code> can possibly instantiated, if no specialization of <code>AlwaysFalse</code> up to that point has <code>true</code> as <code>value</code>, either it doesn&#39;t has one which is ill-formed NDR, or there is one after the point, which is also ill-formed NDR, isn&#39;t it?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1532613143, "post_id": 51524832, "comment_id": 90048637, "body": "@PasserBy I could always, at some arbitrary point in the future, write <code>struct Troll { }; template &lt;&gt; struct AlwaysFalse&lt;Troll&gt; : true_type { }; Foo&lt;Troll&gt; f</code>. There&#39;s no &quot;up to that point&quot; with templates."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532613155, "post_id": 51524832, "comment_id": 90048643, "body": "@PasserBy That said, it&#39;d be great if we just had a language feature that was like <code>diagnostic_if_instantiated(msg);</code> so we wouldn&#39;t even have to worry about this."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1532540933, "last_edit_date": 1532540933, "creation_date": 1532540521, "answer_id": 51524832, "question_id": 51523965, "link": "https://stackoverflow.com/questions/51523965/template-dependent-false/51524832#51524832", "title": "Template dependent false", "body": "<p>This:</p>\n\n<pre><code>#define DEPENDENT_FALSE(arg) AlwaysFalse&lt;decltype(sizeof(arg))&gt;::value\n</code></pre>\n\n<p>fails to actually be <em>dependent</em>. <code>decltype(sizeof(arg))</code> is always <code>size_t</code>, it doesn't actually depend on <code>arg</code> in any way (more broadly, here is a <a href=\"http://eel.is/c++draft/temp.dep#expr-4\" rel=\"nofollow noreferrer\">list of expressions</a> that are never type-dependent). Since it's not dependent, a compiler is perfectly able to see that <code>DEPENDENT_FALSE(T)</code> is <code>false</code> and just trigger that <code>static_assert</code>.</p>\n\n<p>What you want is just:</p>\n\n<pre><code>#define DEPENDENT_FALSE(arg) AlwaysFalse&lt;decltype(arg)&gt;::value\n</code></pre>\n\n<p>That is, drop the <code>sizeof</code>. This now <em>is</em> dependent. </p>\n\n<hr />\n\n<p>This won't work for the <code>int</code> directly, since that again won't be dependent (<code>decltype(i)</code> is just <code>int</code>, and we need something value-dependent now). For that, you can just wrap it in an integral constant:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct Foo{\n    static_assert(AlwaysFalse&lt;T&gt;::value, \"You must use specialization!\");\n};\n\ntemplate&lt;int i&gt;\nstruct Bar{\n    static_assert(AlwaysFalse&lt;std::integral_constant&lt;int, i&gt;&gt;::value, \"You must use specialization!\");\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 4631347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6128d8d252fbe10aa32143df8f7c90fc?s=128&d=identicon&r=PG&f=1", "display_name": "yrHeTateJlb", "link": "https://stackoverflow.com/users/4631347/yrhetatejlb"}, "is_accepted": false, "score": -1, "last_activity_date": 1532587924, "last_edit_date": 1532587924, "creation_date": 1532544592, "answer_id": 51525803, "question_id": 51523965, "link": "https://stackoverflow.com/questions/51523965/template-dependent-false/51525803#51525803", "title": "Template dependent false", "body": "<p>Solution which works on C++17. Unfortunately I have only C++11</p>\n\n<pre><code>template&lt;auto&gt;\nconstexpr bool dependentFalseHelper(){\n    return false;\n}\ntemplate&lt;class&gt;\nconstexpr bool dependentFalseHelper(){\n    return false;\n}\n\n#define DEPENDENT_FALSE(arg) (dependentFalseHelper&lt;arg&gt;())\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 4631347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6128d8d252fbe10aa32143df8f7c90fc?s=128&d=identicon&r=PG&f=1", "display_name": "yrHeTateJlb", "link": "https://stackoverflow.com/users/4631347/yrhetatejlb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 1, "accepted_answer_id": 51524832, "answer_count": 3, "score": 2, "last_activity_date": 1532587924, "creation_date": 1532537154, "last_edit_date": 1532540786, "question_id": 51523965, "link": "https://stackoverflow.com/questions/51523965/template-dependent-false", "title": "Template dependent false", "body": "<p>I have a class template which can't be used directly, only specializations are allowed. And I want to use <code>static_assert</code> to show meaningful error message. \nI can't just type <code>static_assert(false, \"error\");</code> since <code>false</code> isn't value dependent and compiler may show error message even if the template is never used.</p>\n\n<p>My solution:</p>\n\n<pre><code>template&lt;class&gt;\nstruct AlwaysFalse : std::false_type{};\n\n#define DEPENDENT_FALSE(arg) AlwaysFalse&lt;decltype(sizeof(arg))&gt;::value\n\ntemplate&lt;class T&gt;\nstruct Foo{\n    static_assert(DEPENDENT_FALSE(T), \"You must use specialization!\");\n};\n\ntemplate&lt;int i&gt;\nstruct Bar{\n    static_assert(DEPENDENT_FALSE(i), \"You must use specialization!\");\n};\n</code></pre>\n\n<p>But I'm not sure about realization <code>DEPENDENT_FALSE</code>. Because MSVC <a href=\"http://rextester.com/OCOBN40973\" rel=\"nofollow noreferrer\">doesn't</a> treat <code>sizeof(arg)</code> as template dependent expression(<a href=\"http://rextester.com/TEBIO81232\" rel=\"nofollow noreferrer\">unlike GCC</a>), but <code>decltype(sizeof(arg))</code> <a href=\"http://rextester.com/OGJFG98733\" rel=\"nofollow noreferrer\">is fine</a>.</p>\n\n<p>Can somebody explain this behavior in terms of standard? Is it portable?</p>\n"}, {"tags": ["c++", "qt", "directory"], "comments": [{"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1532584286, "post_id": 51523750, "comment_id": 90031294, "body": "what is your problem exactly? do you want to iterate all folders and subfolders to find <code>.h</code> files?"}, {"owner": {"reputation": 59, "user_id": 6449647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c4ad3fad7b8597c5d95096447e08a9?s=128&d=identicon&r=PG&f=1", "display_name": "woidler", "link": "https://stackoverflow.com/users/6449647/woidler"}, "reply_to_user": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1532595761, "post_id": 51523750, "comment_id": 90037578, "body": "Yes, i want to find all h-files in my folders and subfolders. But i have a list of folders which i don&#39;t want to search in. Subfolders of this folder should also be ignored."}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1532606377, "post_id": 51523750, "comment_id": 90044059, "body": "I will give you answer, wait for it please..."}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1532615288, "post_id": 51523750, "comment_id": 90050238, "body": "I did it, i changed my answer, it working perfectly!!!"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1532622647, "post_id": 51523750, "comment_id": 90054948, "body": "Your iterator advances twice in the loop."}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1532655284, "post_id": 51523750, "comment_id": 90066707, "body": "I answered your question, check my answer changes!"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6449647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c4ad3fad7b8597c5d95096447e08a9?s=128&d=identicon&r=PG&f=1", "display_name": "woidler", "link": "https://stackoverflow.com/users/6449647/woidler"}, "edited": false, "score": 0, "creation_date": 1532539295, "post_id": 51523896, "comment_id": 90017772, "body": "Thanks for your answer, but i can&#39;t get it working. Maybe my intention wasn&#39;t explained exactly. I&#39;m searching for all *.h-Files in a directory and its subdirectories. But i want to exclude some directories and their subdirectories while searching for the h-files."}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "reply_to_user": {"reputation": 59, "user_id": 6449647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c4ad3fad7b8597c5d95096447e08a9?s=128&d=identicon&r=PG&f=1", "display_name": "woidler", "link": "https://stackoverflow.com/users/6449647/woidler"}, "edited": false, "score": 0, "creation_date": 1532890302, "post_id": 51523896, "comment_id": 90132309, "body": "@woidler this is a new answer, its  absolutely working"}], "tags": [], "owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "is_accepted": false, "score": 0, "last_activity_date": 1532614639, "last_edit_date": 1532614639, "creation_date": 1532536898, "answer_id": 51523896, "question_id": 51523750, "link": "https://stackoverflow.com/questions/51523750/qdiriterator-skip-folders-and-its-subfolders/51523896#51523896", "title": "QDirIterator - Skip Folders and its subfolders", "body": "<p>Bellow instruction working 100 percent :</p>\n\n<p>This method <code>QString QDirIterator::next()</code> Advances the iterator to the next entry, and returns the \"file path\" of this new entry. If <code>hasNext()</code> returns <code>false</code>, this function does nothing, and returns a <code>null QString</code>.</p>\n\n<p>If <code>QDirIterator</code> found a file with specific <code>filter</code> (based on <code>const QStringList &amp;nameFilters</code> parameter) then <code>QDirIterator::next()</code> returns \"file-path\" and you  cannot compare the whole \"file-path\" with \"skiped-folder\" to iterate!</p>\n\n<p>Because of this i had to write a function as a directory parser as bellow :</p>\n\n<pre><code>QStringList Widget::getCurrDirsOfFile(const QFileInfo &amp;file_info, const QString &amp;default_folder)\n{\n    QString file_path = file_info.filePath();\n    QString file_name = file_info.fileName();\n    file_path.truncate(file_path.lastIndexOf(\"/\" + file_name));\n\n    file_path = file_path.mid(file_path.lastIndexOf(\"/\") + 1);\n\n    return file_path;\n}\n</code></pre>\n\n<p>This function get \"file-path\" and return last \"folder-name's\" of it like bellow :</p>\n\n<pre><code>input : /home/msi/Desktop/123/untitled/123/widget.h\noutput(list) : 123, 123\n</code></pre>\n\n<p>We have <code>QString skiped_dir(\"untitled\");</code> as skiped folders!</p>\n\n<p>In this state when you got something excluding <code>123</code> \"folder-name's\", you can append that file to <code>QStringList filenames</code> :</p>\n\n<pre><code>if(folder_list.indexOf(QRegExp(skiped_dir)) == -1)\n        filenames.append(it.filePath());\n</code></pre>\n\n<p>So try this (notice in comments) :</p>\n\n<pre><code>void Widget::btn_iterate_clicked()\n{\n    // folder to iterate\n    QString folder(\"/home/msi/Desktop/\");\n\n    // folder-name you want to skip\n    QString skiped_dir(\"untitled\");\n\n    // file-names which are match with .h filter stored in filenames list\n    QStringList filenames;\n\n    // this list used in QStringList getCurrDirsOfFile() method\n    QStringList folder_list;\n\n    // iterator\n    QDirIterator it(folder, QStringList() &lt;&lt; \"*.h\" , QDir::Files, QDirIterator::Subdirectories);\n    while (it.hasNext())     // if next object exist for iterate\n    {\n        // we have the file with .h extension\n        it.next();\n\n        // get previous folders that exist in filepath address of it.fileInfo()\n        folder_list = getCurrDirsOfFile(it.fileInfo(), folder);\n\n        // if folder_list contained skiped folder then reject that or appent it\n        if(folder_list.indexOf(QRegExp(skiped_dir)) == -1)\n            filenames.append(it.filePath());\n    }\n\n    for(int i = 0;i &lt; filenames.count();i++)\n    {\n        QMessageBox::information(this, \"\", filenames.at(i));\n    }\n}\n</code></pre>\n\n<p>Suppose we have bellow tree (directories) :</p>\n\n<p>This program just shows :</p>\n\n<pre><code>/home/msi/Desktop/build-untitled-Desktop_Qt_5_0_2_GCC_64bit-Debug/ui_widget.h\n/home/msi/Desktop/1/1.h\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ovanL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ovanL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 0, "last_activity_date": 1556736872, "creation_date": 1556736872, "answer_id": 55941192, "question_id": 51523750, "link": "https://stackoverflow.com/questions/51523750/qdiriterator-skip-folders-and-its-subfolders/55941192#55941192", "title": "QDirIterator - Skip Folders and its subfolders", "body": "<p>I know this is a bit old, but your original code was close...there's two problems. First, the iterator covers every entry and what it returns is a full path and filename, not just the entry name within the current directory. Checking for an exact match is the problem rather than for containment. The second issue is that you have two calls to \"next\" without a call to \"hasNext\" between them, so it's possible you'll have a crash.</p>\n\n<pre><code>while (dirIterator.hasNext())\n{      \n    QString fname = dirIterator.next ();\n\n    if (fname.contains (str)) continue;\n\n    filenames.append (fname);\n}\n</code></pre>\n\n<p>Note that you may need to be more specific with the value of \"str\". Any filename could contain the word \"folder\", so you'll probably want to check for str.endsWith (\"/folder\") as well as str.contains (\"/folder/\").</p>\n\n<p>If you inspect the values returned from \"next\", you'll better see how to compare what you're excluding to the current entry, so just tweak the string comparison to get what you want.</p>\n"}], "owner": {"reputation": 59, "user_id": 6449647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c4ad3fad7b8597c5d95096447e08a9?s=128&d=identicon&r=PG&f=1", "display_name": "woidler", "link": "https://stackoverflow.com/users/6449647/woidler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1153, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556736872, "creation_date": 1532536298, "last_edit_date": 1532622615, "question_id": 51523750, "link": "https://stackoverflow.com/questions/51523750/qdiriterator-skip-folders-and-its-subfolders", "title": "QDirIterator - Skip Folders and its subfolders", "body": "<p>How can you skip folders with the QDirIterator?\nI've tried it with:</p>\n\n<pre><code>QString nameFilter = \"*.h\";\nQDirIterator dirIterator(folder, nameFilter, QDir::Files, QDirIterator::Subdirectories);\nQString str(\"folder\");\nQStringList filenames;\n\nwhile (dirIterator.hasNext())\n{            \n    if(dirIterator.next() == str) continue;\n\n    filenames.append(dirIterator.next());\n}\n</code></pre>\n\n<p>but it only ignores the specific folder but not its subdirectories.\nAny idea?</p>\n"}, {"tags": ["c++", "gcc", "assembly", "elf", "dynamic-linking"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 0, "creation_date": 1532537729, "post_id": 51524001, "comment_id": 90016975, "body": "that I understand.. What I&#39;m asking is how can I populate each PROBE in a file before main, with an increasing ID, <b>FILE</b>,<b>LINE</b>, etc?  How can I get access to each declared PROBE  in the code?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 1, "creation_date": 1532538333, "post_id": 51524001, "comment_id": 90017296, "body": "What exactly should such a <code>PROBE</code> be? A global object? The problem is that there&#39;s not really a simple mechanism for anything to do with working across multiple separate translation units at compile time. Do the IDs have to be increasing numbers? One simple way to just get an ID that is guaranteed unique would be to simply use the address of a global object or function."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 1, "creation_date": 1532538733, "post_id": 51524001, "comment_id": 90017493, "body": "Oh, you meant <code>PROBEs</code> in the same file!? For that you could simply use the <code>__COUNTER__</code> macro. Also note that globals in the same translation unit are guaranteed to be initialized in the order in which they are defined\u2026"}, {"owner": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 0, "creation_date": 1532539551, "post_id": 51524001, "comment_id": 90017928, "body": "I actually found that counter macro earlier today but that introduces one of the same issues I want to avoid. I don\u2019t want to have to use PROBE(<b>COUNTER</b>,...).   I\u2019d like the probe to already have an id, and only an optional name is passed."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 0, "creation_date": 1532599394, "post_id": 51524001, "comment_id": 90039863, "body": "You could make <code>PROBE()</code> itself a macro that uses the <code>__COUNTER__</code> macro internally. Apart from that, what exactly are your requirements for an id? As I said, if you just need a unique identifier, simply use the address of a global object or function."}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1532538042, "last_edit_date": 1532538042, "creation_date": 1532537298, "answer_id": 51524001, "question_id": 51523530, "link": "https://stackoverflow.com/questions/51523530/elf-init-section-code-to-prepopulate-objects-used-at-runtime/51524001#51524001", "title": "ELF INIT section code to prepopulate objects used at runtime", "body": "<p>There's a pretty simple way to have code run on module load time: Use the constructor of a global variable:</p>\n\n<pre><code>struct RunMeSomeCode\n{\n  RunMeSomeCode()\n  {\n    // your code goes here\n  }\n} do_it;\n</code></pre>\n\n<p>The <code>.init</code>/<code>.fini</code> sections basically exist to implement global constructors/destructors as part of the <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI</a> on some platforms. Other platforms may use different mechanisms such as <code>_start</code> and <code>_init</code> functions or <code>.init_array</code>/<code>.deinit_array</code> and <code>.preinit_array</code>. There are lots of subtle differences between all these methods and which one to use for what is a question that can really only be answered by the documentation of your target platform. Not all platforms use ELF to begin with\u2026</p>\n\n<p>The main point to understand is that things like the <code>.init</code>/<code>.fini</code> sections in an ELF binary happen way below the level of C++ as a language. A C++ compiler may use these things to implement certain behavior on a certain target platform. On a different platform, a C++ compiler will probably have to use different mechanisms to implement that same behavior. Many compilers will give you tools in the form of language extensions like <code>__attributes__</code> or <code>#pragmas</code> to control such platform-specific details. But those generally only make sense and will only work with that particular compiler on that particular platform.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 0, "creation_date": 1532542119, "post_id": 51524512, "comment_id": 90019204, "body": "Keeping the run time data and static data in separate arrays is a good idea, and I was planning on using a global array. Not quite sure how I would use that macro probeinit##id() ?   How would I get the id?  Do you mean to lilterally call it in the code, or it would already be defined somehow in the probe object before main runs?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "edited": false, "score": 0, "creation_date": 1532542608, "post_id": 51524512, "comment_id": 90019439, "body": "@SubliminalBroccoli: <code>##id</code> is CPP concatenation of a macro parameter.  Like I said, that first idea is probably not very workable because it expands wherever you actually put <code>PROBE()</code>."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1532542572, "last_edit_date": 1532542572, "creation_date": 1532539274, "answer_id": 51524512, "question_id": 51523530, "link": "https://stackoverflow.com/questions/51523530/elf-init-section-code-to-prepopulate-objects-used-at-runtime/51524512#51524512", "title": "ELF INIT section code to prepopulate objects used at runtime", "body": "<p>You don't need a member function (which gets a <code>this</code> pointer passed as an arg); instead you can simply create constructor-like functions that reference a global array, like </p>\n\n<pre><code>#define PROBE(id, stuff, more_stuff) \\\n  __attribute__((constructor)) void \\\n  probeinit##id(){ probes[id] = {id, stuff, 0/*to be written later*/, more_stuff}; }\n</code></pre>\n\n<p>The trick is having this macro work in the middle of another function.  GNU C / C++ allows nested functions, but IDK if you can make them constructors.</p>\n\n<p>You don't want to declare a <code>static int dummy#id = something</code> because then you're adding overhead to the function you profile.  (gcc has to emit a thread-safe run-once locking mechanism.)</p>\n\n<hr>\n\n<p>Really what you'd like is some kind of separate pass over the source that identifies all the PROBE macros and collects up their args to declare</p>\n\n<pre><code>struct probe global_probes[] = {\n    {0, \"EventName\", 0 /*placeholder*/, filename, linenum},\n    {1, \"EventName\", 0 /*placeholder*/, filename, linenum},\n    ...\n };\n</code></pre>\n\n<p>I'm not confident you can make that happen with CPP macros; I don't think it's possible to <code>#define PROBE</code> such that every time it expands, it <em>redefines</em> another macro to tack on more stuff.</p>\n\n<p>But you could easily do that with an awk/perl/python / your fave scripting language program that scans your program and constructs a <code>.c</code> that declares an array with static storage.</p>\n\n<hr>\n\n<p>Or better (for a single-threaded program): keep the runtime timestamps in one array, and the names and stuff in a separate array.  So the cache footprint of the probes is smaller.  For a multi-threaded program, stores to the same cache line from different threads is called false sharing, and creates cache-line ping-pong.</p>\n\n<p>So you'd have <code>#define PROBE(id, evname, blah blah)  do { probe_times[id] = now(); }while(0)</code></p>\n\n<p>and leave the handling of the later args to your separate preprocessing.</p>\n"}, {"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1532553280, "creation_date": 1532553280, "answer_id": 51527757, "question_id": 51523530, "link": "https://stackoverflow.com/questions/51523530/elf-init-section-code-to-prepopulate-objects-used-at-runtime/51527757#51527757", "title": "ELF INIT section code to prepopulate objects used at runtime", "body": "<p>As far as I understand it, you do not actually need an ELF constructor here.  Instead, you could emit descriptors for your probes using <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">extended <code>asm</code> statements</a> (using data, instead of code).  This also involves switching to a dedicated ELF section for the probe descriptors, say <code>__probes</code>.</p>\n\n<p>The linker will concatenate all the probes and in an array, and generate special symbols <code>__start___probes</code> and <code>__stop___probes</code>, which you can use from your program to access thes probes. See the last paragraph in <a href=\"https://sourceware.org/binutils/docs-2.31/ld/Input-Section-Example.html\" rel=\"nofollow noreferrer\">Input Section Example</a>.</p>\n\n<p><a href=\"https://sourceware.org/systemtap/\" rel=\"nofollow noreferrer\">Systemtap</a> implements something quite similar for its userspace probes:</p>\n\n<ul>\n<li><a href=\"https://sourceware.org/systemtap/wiki/UserSpaceProbeImplementation\" rel=\"nofollow noreferrer\">User Space Probe Implementation</a></li>\n<li><a href=\"https://sourceware.org/systemtap/wiki/AddingUserSpaceProbingToApps\" rel=\"nofollow noreferrer\">Adding User Space Probing to an Application (heapsort example)</a></li>\n</ul>\n\n<p>Similar constructs are also used within the Linux kernel for its self-patching mechanism.</p>\n"}], "owner": {"reputation": 73, "user_id": 10060306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11eb751fa245ac4a3b6eb46be7dd185?s=128&d=identicon&r=PG&f=1", "display_name": "SubliminalBroccoli", "link": "https://stackoverflow.com/users/10060306/subliminalbroccoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1532553280, "creation_date": 1532535492, "last_edit_date": 1532538068, "question_id": 51523530, "link": "https://stackoverflow.com/questions/51523530/elf-init-section-code-to-prepopulate-objects-used-at-runtime", "title": "ELF INIT section code to prepopulate objects used at runtime", "body": "<p>I'm fairly new to c++ and am really interested in learning more. Have been reading quite a bit.  Recently discovered the init/fini elf sections.\nI started to wonder if &amp; how one would use the init section to prepopulate objects that would be used at runtime.  Say for example you wanted\nto add performance measurements to your code, recording the time, filename, linenumber, and maybe some ID (monotonic increasing int for ex) or name.\nYou would place for example:</p>\n\n<pre><code>PROBE(0,\"EventProcessing\",__FILE__,__LINE__)\n...... //process event\nPROBE(1,\"EventProcessing\",__FILE__,__LINE__)\n......//different processing on same event\nPROBE(2,\"EventProcessing\",__FILE__,__LINE__)\n</code></pre>\n\n<p>The PROBE could be some macro that populates a struct containing this data (maybe on an array/list, etc using the id as an indexer).\nWould it be possible to have code in the init section that could prepopulate all of this data for each PROBE (except for the time of course), so only the time would need to be retrieved/copied at runtime?</p>\n\n<p>As far as I know the <code>__attribute__((constructor))</code> can not be applied to member functions?</p>\n\n<p>My initial idea was to create some kind of \nlinked list with each node pointing to each probe and code in the init secction could iterate it populating the id, file, line, etc, but \nthat idea assumed I could use a member function that could run in the \"init\" section, but that does not seem possible.  Any tips appreciated!</p>\n"}, {"tags": ["c++", "cmake", "llvm"], "answers": [{"comments": [{"owner": {"reputation": 8780, "user_id": 318716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Jwj3.png?s=128&g=1", "display_name": "Joseph Quinsey", "link": "https://stackoverflow.com/users/318716/joseph-quinsey"}, "edited": false, "score": 0, "creation_date": 1532552042, "post_id": 51526670, "comment_id": 90023578, "body": "This is a link-only answer. You should copy a little more info from your site."}], "tags": [], "owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "is_accepted": true, "score": 1, "last_activity_date": 1533203958, "last_edit_date": 1533203958, "creation_date": 1532548272, "answer_id": 51526670, "question_id": 51523507, "link": "https://stackoverflow.com/questions/51523507/how-to-apply-llvm-passes-using-cmake/51526670#51526670", "title": "How to apply llvm passes using CMake", "body": "<p>You can have a look or even use <a href=\"https://github.com/compor/llvm-ir-cmake-utils\" rel=\"nofollow noreferrer\">this</a> repo that implements the various steps as <code>cmake</code> commands.</p>\n\n<p>The gist of it is that creates various commands (using the <code>cmake</code>'s <code>add_custom_command</code>) basically do exactly what you're looking for using the various LLVM subtools in conjunction with the various <code>cmake</code> target properties, in order to create the IR generation commands from source and to native binary code (i.e. <code>.o</code>).</p>\n\n<p>For example, using <code>llvmir_attach_bc_target()</code> attaches to a top-level <code>cmake</code> target and creates a (unoptimized) <code>.bc</code> file for each source file in the <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/SOURCES.html\" rel=\"nofollow noreferrer\">SOURCES</a> property of it.</p>\n\n<p>It contains various examples in the same repo that should be enough to get you started.</p>\n"}], "owner": {"reputation": 13, "user_id": 7410040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0d3b73305b701be516f22b79504b04?s=128&d=identicon&r=PG&f=1", "display_name": "Chao Peng", "link": "https://stackoverflow.com/users/7410040/chao-peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 51526670, "answer_count": 1, "score": 1, "last_activity_date": 1533203958, "creation_date": 1532535410, "last_edit_date": 1532551753, "question_id": 51523507, "link": "https://stackoverflow.com/questions/51523507/how-to-apply-llvm-passes-using-cmake", "title": "How to apply llvm passes using CMake", "body": "<p>We have implemented a LLVM pass and compiled it to a library (called <code>libMyPass.so</code>).</p>\n\n<p>We want to apply this pass to a project (all its source code files) which uses <code>cmake</code> to build it. Is there a way to do so in cmake?</p>\n\n<p>Generally, we used <code>clang</code> to emit llvm bit code from a source file, <code>opt</code> to apply this pass to the bit code, <code>llc</code> to translate the new bit code to assembly language and <code>clang</code> again to compile assembly language to executable. Can I encapsulate this process using <code>cmake</code>?</p>\n"}, {"tags": ["c++", "linker-errors", "variadic-functions"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1532535498, "post_id": 51523497, "comment_id": 90015909, "body": "What should it be? Variadic? Can&#39;t see templates here? Or you really want to use varargs?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1532535899, "post_id": 51523497, "comment_id": 90016090, "body": "This isn&#39;t the way that C-style varargs functions work. The error message is correct. I&#39;m not going to explain it; it&#39;s complicated and nasty. Use a template."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1532536327, "creation_date": 1532536327, "answer_id": 51523758, "question_id": 51523497, "link": "https://stackoverflow.com/questions/51523497/linker-error-for-recursive-calls-to-variadic-function/51523758#51523758", "title": "Linker error for recursive calls to variadic function", "body": "<p>You are declaring a vararg function but you define non-vararg overloads. The compiler emits code targeting the vararg form (as that is the visible declaration) but then the linker fails to find a matching definition.</p>\n\n<p>Either write declarations for the non-vararg forms or write (define) an actual vararg function, or better yet write a variadic template (the definition of which should be placed in the header file).</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532541380, "post_id": 51523796, "comment_id": 90018845, "body": "Note that <code>allSame( &quot;Test&quot;, &quot;Test&quot;, &quot;Test&quot;, &quot;Test&quot; )</code> might return <code>true</code> or <code>false</code>, we do pointer comparison, and those pointers might be different."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532541460, "post_id": 51523796, "comment_id": 90018884, "body": "Ubs! Thanks for the finding!"}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1532541500, "last_edit_date": 1532541500, "creation_date": 1532536484, "answer_id": 51523796, "question_id": 51523497, "link": "https://stackoverflow.com/questions/51523497/linker-error-for-recursive-calls-to-variadic-function/51523796#51523796", "title": "Linker error for recursive calls to variadic function", "body": "<p>In c++ we simply can write:</p>\n\n<pre><code>template &lt; typename S, typename ... T&gt;\nconstexpr bool allSame( S first, T ... t ) \n{   \n    return ((first == t) &amp;&amp; ...) ;\n}   \n\nint main()\n{   \n    std::cout &lt;&lt; allSame( 5,4,3 ) &lt;&lt; std::endl;\n    std::cout &lt;&lt; allSame( 10,10,10,10 ) &lt;&lt; std::endl;\n}   \n</code></pre>\n\n<p>So there is no need anymore to use variadic functions with varargs or use recursive templates.</p>\n\n<p>But if you like recursive templates, you can take this:</p>\n\n<pre><code>template &lt; typename S, typename ... T&gt;  \nconstexpr bool allSame( S , T ... );\n\ntemplate &lt;typename FIRST&gt;\nconstexpr bool allSame( FIRST first ) { return true; }\n\ntemplate &lt; typename FIRST, typename SECOND, typename ... REST&gt;\nconstexpr bool allSame( FIRST first, SECOND second, REST ... rest )\n{   \n    if ( first != second ) return false;\n    return allSame( second , rest... );\n}   \n\nint main()\n{   \n    std::cout &lt;&lt; allSame( 5,4,3 ) &lt;&lt; std::endl;\n    std::cout &lt;&lt; allSame( 10,10,10,10 ) &lt;&lt; std::endl;\n} \n</code></pre>\n\n<p>Functions using the old c-style varargs should not be used. I have no idea what you want to see, because you don't use template either varargs in your code!</p>\n"}], "owner": {"reputation": 11, "user_id": 7823154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/742c8ace127051c4029b9baa4e0ac73f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie Wang", "link": "https://stackoverflow.com/users/7823154/stephanie-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532541500, "creation_date": 1532535377, "question_id": 51523497, "link": "https://stackoverflow.com/questions/51523497/linker-error-for-recursive-calls-to-variadic-function", "title": "Linker error for recursive calls to variadic function", "body": "<p>I've read <a href=\"https://stackoverflow.com/questions/27067433/linker-error-for-variadic-template\">Linker error for variadic template</a> carefully but it doesn't seem to solve my problem. </p>\n\n<p>I have 3 files, <code>detail.h</code>, <code>detail.cpp</code>, and <code>main.cpp</code>.</p>\n\n<p>In <code>detail.h</code> there's only one line declaring a variadic function <code>allSame</code>.</p>\n\n<pre><code>//detail.h\nbool allSame(unsigned long...);\n</code></pre>\n\n<p>In <code>detail.cpp</code>, the implementation of the function is provided.</p>\n\n<pre><code>//detail.cpp\n#include \"detail.h\"\nbool allSame() { return true; }\nbool allSame(unsigned long first) { return true; }\nbool allSame(unsigned long first, unsigned long second) { \n    return first == second; \n}\nbool allSame(unsigned long first, unsigned long second, unsigned long others...) {\n    if (first == second)\n        return allSame(first, others);\n    else \n        return false;\n}\n</code></pre>\n\n<p>As one can easily infer, the function <code>allSame</code> serves the purpose to return if its variadic arguments are all the same.</p>\n\n<pre><code>//main.cpp\n#include \"detail.h\"\n#include &lt;iostream&gt;\n\nint main () {\n    if (allSame(2, 2, 2, 2)) \n        std::cout &lt;&lt; \"All same. \" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>In compiling and linking of the above three files (using command <code>g++ detail.cpp main.cpp</code>), I received this linker error</p>\n\n<pre><code>/disk1/tmp/ccTrBHWU.o: In function `main':\nmain.cpp:(.text+0x1e): undefined reference to `allSame(unsigned long, ...)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Indeed I didn't provide an overload with the particular signature <code>allSame(unsigned long, ...)</code>; however I did provide the function definition with 0, 1, 2, 2+(any) arguments. Perhaps the way the compiler expands the parameter pack upon function call is more delicate than I thought?  </p>\n\n<p><strong>[side note]</strong> If I move the content of <code>detail.cpp</code> to <code>detail.h</code> then the program compiles and runs as expected. </p>\n"}, {"tags": ["c++", "oop", "friend-class"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1532534652, "post_id": 51523222, "comment_id": 90015470, "body": "I&#39;ve heard of C++98/03/11/14/17 but never of C++ 4.3.2. Are you referring to your IDE or compiler version?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1532534689, "post_id": 51523222, "comment_id": 90015498, "body": "I&#39;d try to not use or rely on <code>friend</code> in the first place.  The code snippets as given do not repro the mentioned error."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1532535487, "post_id": 51523222, "comment_id": 90015900, "body": "The only time <code>friend</code> impacts if you can construct an object of a given type is when the (relevant) constructor isn&#39;t public"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1532535679, "post_id": 51523222, "comment_id": 90015985, "body": "You use <a href=\"https://ideone.com\" rel=\"nofollow noreferrer\">Ideone</a>? &quot;C++ 4.3.2&quot; is one of its options. It means you use GCC 4.3.2 as your compiler."}, {"owner": {"reputation": 588, "user_id": 2133098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCzMG.jpg?s=128&g=1", "display_name": "Taylor Nichols", "link": "https://stackoverflow.com/users/2133098/taylor-nichols"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532536370, "post_id": 51523222, "comment_id": 90016309, "body": "@Caleth: <code>friend</code> also lets <code>remove_duplicates</code> access <code>Hash_class</code>&#39;s non-public members."}], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 2133098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCzMG.jpg?s=128&g=1", "display_name": "Taylor Nichols", "link": "https://stackoverflow.com/users/2133098/taylor-nichols"}, "is_accepted": true, "score": 1, "last_activity_date": 1532536230, "last_edit_date": 1532536230, "creation_date": 1532534694, "answer_id": 51523329, "question_id": 51523222, "link": "https://stackoverflow.com/questions/51523222/can-a-friend-class-create-objects-from-its-friend-classes-in-c/51523329#51523329", "title": "Can a friend class create objects from its friend classes in C++?", "body": "<p>This looks like a circular include. </p>\n\n<ul>\n<li>\"Hash_class.h\" includes \"remove_duplicates.h\"</li>\n<li>\"remove_duplicates.h\" includes \"Hash_class.h\"</li>\n</ul>\n\n<p>To fix it, remove this line from \"Hash_class.h\":</p>\n\n<pre><code>#include \"remove_duplicates.h\"\n</code></pre>\n\n<p>That should work because the line</p>\n\n<pre><code>friend class remove_duplicates;\n</code></pre>\n\n<p>requires no information about how <code>class remove_duplicates</code> is implemented.</p>\n\n<p>EDIT: To avoid further errors, wrap both header files in <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">include guards</a>.</p>\n"}], "owner": {"reputation": 98, "user_id": 7227724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU8py.png?s=128&g=1", "display_name": "magmine", "link": "https://stackoverflow.com/users/7227724/magmine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 51523329, "answer_count": 1, "score": 4, "last_activity_date": 1559411959, "creation_date": 1532534298, "last_edit_date": 1559411959, "question_id": 51523222, "link": "https://stackoverflow.com/questions/51523222/can-a-friend-class-create-objects-from-its-friend-classes-in-c", "title": "Can a friend class create objects from its friend classes in C++?", "body": "<p>These are the code inside my two C++ header files where I declare two classes, one is friend of the other:</p>\n\n<p>==>The first class creates a hash table and fills it with words from a given file.</p>\n\n<pre><code>#include \"remove_duplicates.h\"\nclass Hash_class{\n\nprotected:\n    list&lt;string&gt; *hashTable;\n    string input_file;\n    string output_file;\n    int input_file_size;\n    friend class remove_duplicates;\n    //void file_size();\n\npublic:\n\n    /*load the words in the hash Table;\n    by calculating the hash Code of each string*/\n    Hash_class(string input_file,string output_file=\"output_file.txt\");\n\n    ~Hash_class(){\n        fclose(input_file);\n        fclose(ouput_file);\n    }\n\n    int hashCode( const string input_word);\n\n    void loadInHash();\n\n    void write_in_output();\n\n    int get_input_file_size(){\n        return input_file_size;\n    }\n\n    string get_input_file(){\n        return input_file;\n    }\n\n    string get_output_file(){\n        return output_file;\n    }\n};\n</code></pre>\n\n<p>In the second class I wanted to create an object from the first class and act on it, by first filling the hash table inside the object created then removing all the words that are concidered duplicates (if the Levenshtein distance is close to a certain proportion).</p>\n\n<pre><code>#include \"Hash_class.h\"\nclass remove_duplicates{\nprotected:\n    Hash_class hash_object;\npublic:\n\n    remove_duplicates(Hash_class &amp; hash_object);\n\n    int Levenshtein_distance(string s1,string s2);\n\n    void set_purge();\n\n};\n</code></pre>\n\n<p>The problem is when I compile the code I get the error: ([Error] 'Hash_class' does not name a type)\nIf is it possible can you please tell me how or some sources where I can learn about it. If it's not possible then some hints will be a great thing thanks.</p>\n\n<p>(\"I use GCC 4.3.2\")</p>\n"}, {"tags": ["c++", "qtserialport", "flashing"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532534321, "post_id": 51523179, "comment_id": 90015297, "body": "And your <i>specific</i> question/problem is what? We are not going to write code for you or point you at a third party tool. You need to show us what you&#39;ve tried so far and where you&#39;ve failed and then we can maybe help you fix whatever problems you are having."}, {"owner": {"reputation": 29, "user_id": 10054379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNJO_U3-c1Y/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pI1RrgLFRF1hP5uNONdnAzSGwAUg/mo/photo.jpg?sz=128", "display_name": "jocker fantom", "link": "https://stackoverflow.com/users/10054379/jocker-fantom"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532534619, "post_id": 51523179, "comment_id": 90015457, "body": "i want to start for make this program for flashing. how i can begin? where i can found a document about it?!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532534793, "post_id": 51523179, "comment_id": 90015548, "body": "No idea. Have you asked Google?"}, {"owner": {"reputation": 29, "user_id": 10054379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNJO_U3-c1Y/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pI1RrgLFRF1hP5uNONdnAzSGwAUg/mo/photo.jpg?sz=128", "display_name": "jocker fantom", "link": "https://stackoverflow.com/users/10054379/jocker-fantom"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532534837, "post_id": 51523179, "comment_id": 90015567, "body": "yes. but i can&#39;t find useful thing"}], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1532535018, "post_id": 51523392, "comment_id": 90015652, "body": "I hope answer will be useful to you."}, {"owner": {"reputation": 29, "user_id": 10054379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNJO_U3-c1Y/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pI1RrgLFRF1hP5uNONdnAzSGwAUg/mo/photo.jpg?sz=128", "display_name": "jocker fantom", "link": "https://stackoverflow.com/users/10054379/jocker-fantom"}, "edited": false, "score": 0, "creation_date": 1532535164, "post_id": 51523392, "comment_id": 90015726, "body": "thnx for answer. important problem is how send samsung system data to device with this library function. for example i want flash boot.img on samsung device, how can do this operation with this library?"}], "tags": [], "owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1532534948, "creation_date": 1532534948, "answer_id": 51523392, "question_id": 51523179, "link": "https://stackoverflow.com/questions/51523179/how-to-send-data-on-c-serialport-in-qt-widget/51523392#51523392", "title": "how to send data on c++ serialport in Qt Widget", "body": "<p>You can use library at <a href=\"http://qextserialport.github.io/\" rel=\"nofollow noreferrer\">qtserial library</a>. Here is the sample snippet to get uart working.</p>\n\n<pre><code>QextSerialPort port;\nport.setPortName(\"portName\");\nport.setBaudRate(BAUD115200);\nport.setFlowControl(FLOW_OFF);\nport.setParity(PAR_NONE);\nport.setDataBits(DATA_8);\nport.setStopBits(STOP_1);\nport.open(QIODevice::ReadWrite);\n</code></pre>\n\n<p>For reading data from UART.</p>\n\n<pre><code>char ch;\nport.getChar(&amp;ch))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 11208074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GTl8h.jpg?s=128&g=1", "display_name": "Tomse", "link": "https://stackoverflow.com/users/11208074/tomse"}, "is_accepted": false, "score": 0, "last_activity_date": 1552659730, "last_edit_date": 1552659730, "creation_date": 1552656789, "answer_id": 55183789, "question_id": 51523179, "link": "https://stackoverflow.com/questions/51523179/how-to-send-data-on-c-serialport-in-qt-widget/55183789#55183789", "title": "how to send data on c++ serialport in Qt Widget", "body": "<p>Here you have an almost complete code, to connect and send data, with a serial connection:</p>\n\n<p>.h file:</p>\n\n<pre><code>private slots:\n\n    void connectSerial();\n    void sendData();\n    void closeSerial();\n...\n</code></pre>\n\n<p>.cpp file:</p>\n\n<pre><code>#include &lt;QSerialPort&gt;\n#include &lt;QSerialPortInfo&gt;\n\nstatic QSerialPort * serialPort;\n...\n</code></pre>\n\n<p>Connect to Serial:</p>\n\n<pre><code>void MainWindow::connectSerial()\n{\n    serialPort = new QSerialPort;\n    serialPort-&gt;setPortName(\"com1\");\n    serialPort-&gt;open(QIODevice::ReadWrite);\n    serialPort-&gt;setBaudRate(QSerialPort::Baud9600);\n    serialPort-&gt;setDataBits(QSerialPort::Data8);\n    serialPort-&gt;setParity(QSerialPort::NoParity);\n    serialPort-&gt;setStopBits(QSerialPort::OneStop);\n    serialPort-&gt;setFlowControl(QSerialPort::NoFlowControl);\n    QObject::connect(serialPort, SIGNAL(readyRead()), this, SLOT(readSerial()));\n}\n...\n</code></pre>\n\n<p>Read data send from the device:</p>\n\n<pre><code>void MainWindow::readSerial()\n{\n    ....\n}\n</code></pre>\n\n<p>Send QString data (12345), to Serial:</p>\n\n<pre><code>void MainWindow::sendData()\n{\n    QByteArray payload_buffer;\n    QString Data = \"12345\";\n    payload_buffer = payload_buffer.append(Data.toLatin1());\n    if(serialPort-&gt;isWritable()){\n        serialPort-&gt;write(payload_buffer,(payload_buffer.size()));\n    }\n}\n...\n</code></pre>\n\n<p>Remember to close the connecting!:</p>\n\n<pre><code>void MainWindow::closeSerial()\n{\n    serialPort-&gt;close();\n}\n...\n</code></pre>\n\n<p><a href=\"/questions/tagged/qserialport\" class=\"post-tag\" title=\"show questions tagged &#39;qserialport&#39;\" rel=\"tag\">qserialport</a> <a href=\"/questions/tagged/qt\" class=\"post-tag\" title=\"show questions tagged &#39;qt&#39;\" rel=\"tag\">qt</a> </p>\n"}], "owner": {"reputation": 29, "user_id": 10054379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNJO_U3-c1Y/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pI1RrgLFRF1hP5uNONdnAzSGwAUg/mo/photo.jpg?sz=128", "display_name": "jocker fantom", "link": "https://stackoverflow.com/users/10054379/jocker-fantom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1552659730, "creation_date": 1532534145, "question_id": 51523179, "link": "https://stackoverflow.com/questions/51523179/how-to-send-data-on-c-serialport-in-qt-widget", "title": "how to send data on c++ serialport in Qt Widget", "body": "<p>i want make samsung flasher simillar to odin flasher for flash rom (package of system data) with qt widget.</p>\n\n<p>i need c++ command on port for flashing data to device and how to connect program to device for this operation.</p>\n"}, {"tags": ["c++", "c++11", "operators", "move-semantics", "move-constructor"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1532532311, "post_id": 51522536, "comment_id": 90014096, "body": "The output didn&#39;t come from your snippet, please fix it."}, {"owner": {"reputation": 677, "user_id": 3283414, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2c3b8ae04c67a36ff3cecade8702071b?s=128&d=identicon&r=PG&f=1", "display_name": "RuLoViC", "link": "https://stackoverflow.com/users/3283414/rulovic"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532532367, "post_id": 51522536, "comment_id": 90014142, "body": "Yes it did, I only replaced **** string by +++++"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1532532391, "post_id": 51522536, "comment_id": 90014160, "body": "<code>a</code> and <code>b</code>&#39;s <code>A</code> are being constructed in the first segment. How many construction calls do you expect?"}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532532418, "post_id": 51522536, "comment_id": 90014184, "body": "<code>void setToA(A a)</code> passes a by copy. Therefore a temporary object of type A is created when entering <code>b.setToA(a)</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1532532445, "post_id": 51522536, "comment_id": 90014198, "body": "If your question(s) about the first section please remove irrelevant code and output, ie create <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 5, "creation_date": 1532532480, "post_id": 51522536, "comment_id": 90014221, "body": "Copy elision is a thing."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1532532650, "post_id": 51522536, "comment_id": 90014332, "body": "You have too much cargo in your classes. Remove the irrelevant code. Irrelevant in respect to move semantics."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 6, "last_activity_date": 1532533353, "last_edit_date": 1532533353, "creation_date": 1532532729, "answer_id": 51522744, "question_id": 51522536, "link": "https://stackoverflow.com/questions/51522536/move-semantics-in-c11/51522744#51522744", "title": "Move semantics in C++11", "body": "<blockquote>\n  <p>First of all in first section, why is constructor being called twice?</p>\n</blockquote>\n\n<p>Because you construct both an <code>B</code> and a <code>A</code> with the former having its own instance of <code>A</code>, which the first (the unexpected) constructor call comes from.</p>\n\n<blockquote>\n  <p>I thought that if you pass r-value move constructor will be called, is that right? Isn't this <code>b.setoA(createA());</code> an r-value?</p>\n</blockquote>\n\n<p>The constructor is called from within <code>createA</code> (and yes, return value <em>is</em> an r-value), however, copy elision occurs and the object is directly instantiated in the parameter variable of <code>setoA</code>.</p>\n\n<p>Within <code>setoA</code>, however, the copy assignment is selected, as now <code>a</code> is an l-value. If you want to move, you need:</p>\n\n<pre><code>void setoA(A a) { oA_ = std::move(a); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 0, "last_activity_date": 1532540888, "creation_date": 1532540888, "answer_id": 51524931, "question_id": 51522536, "link": "https://stackoverflow.com/questions/51522536/move-semantics-in-c11/51524931#51524931", "title": "Move semantics in C++11", "body": "<p>Some copies and moves may be optionally elided by the compiler. To prevent this, use <code>-fno-elide-constructors</code> in GCC and Clang. In addition, some move elisions became mandatory in C++17, so to force the compiler to use C++11 move semantics, use <code>-std=c++11</code> as well.</p>\n"}], "owner": {"reputation": 677, "user_id": 3283414, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2c3b8ae04c67a36ff3cecade8702071b?s=128&d=identicon&r=PG&f=1", "display_name": "RuLoViC", "link": "https://stackoverflow.com/users/3283414/rulovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "accepted_answer_id": 51522744, "answer_count": 2, "score": 0, "last_activity_date": 1532540888, "creation_date": 1532532073, "last_edit_date": 1532534001, "question_id": 51522536, "link": "https://stackoverflow.com/questions/51522536/move-semantics-in-c11", "title": "Move semantics in C++11", "body": "<p>I would like to fully understand move semantics in C++11. So I have written a couple of classes to see when different constructors are called:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A {\npublic:\n    A() : a1_(0) {std::cout &lt;&lt; \"Calling constructor\" &lt;&lt; std::endl;}\n    A(A&amp;&amp; other) {\n        std::cout &lt;&lt; \"Calling move constructor\" &lt;&lt; std::endl;\n        a1_ = other.a1_;\n        other.a1_ = 0;\n    }\n\n    // Move assignment operator.\n    A&amp; operator=(A&amp;&amp; other) {\n        std::cout &lt;&lt; \"Calling move operator\" &lt;&lt; std::endl;\n        if (this != &amp;other) {\n            a1_ = other.a1_;\n            other.a1_ = 0;\n        }\n        return *this;\n    }\n\n    // Copy constructor.\n    A(const A&amp; other) {\n        std::cout &lt;&lt; \"Calling copy constructor\" &lt;&lt; std::endl;\n        a1_ = other.a1_;\n    }\n\n    // Copy assignment operator.\n    A&amp; operator=(const A&amp; other) {\n        std::cout &lt;&lt; \"Calling copy assignment operator\" &lt;&lt; std::endl;\n        if (this != &amp;other) {\n            a1_ = other.a1_;\n        }\n        return *this;\n    }\n\nprivate:\n    int a1_;\n};\n\nclass B {\n    A oA_;\n\npublic:\n    B() {}\n    void setoA(A a) {oA_ = a;}\n        A getoA() {return oA_;}\n};\n\nA createA() {\n    A a1;\n    return a1;\n}\n\nB createB() {\n    B tmpB;\n    A tmpA;\n    tmpB.setoA(tmpA);\n    return tmpB;\n}\n\nint main() {\n    B b;\n    A a;\n    b.setoA(a);\n    std::cout &lt;&lt; \"**************************\" &lt;&lt; std::endl;\n    b.setoA(createA());\n    std::cout &lt;&lt; \"**************************\" &lt;&lt; std::endl;\n    b.setoA(std::move(createA()));\n    std::cout &lt;&lt; \"**************************\" &lt;&lt; std::endl;\n    B b2;\n    b2.setoA(b.getoA());\n    std::cout &lt;&lt; \"**************************\" &lt;&lt; std::endl;\n    createB();\n\n    return 0;\n}\n</code></pre>\n\n<p>When I check the output of this code:</p>\n\n<pre>\n    Calling constructor\n\n    Calling constructor\n\n    Calling copy constructor\n\n    Calling copy assignment operator\n\n    ++++++++++++++++++++++++++++++++++\n\n    Calling constructor\n\n    Calling copy assignment operator\n\n    ++++++++++++++++++++++++++++++++++\n\n    Calling constructor\n\n    Calling move constructor\n\n    Calling copy assignment operator\n\n    ++++++++++++++++++++++++++++++++++\n\n    Calling constructor\n\n    Calling copy constructor\n\n    Calling copy assignment operator\n\n    ++++++++++++++++++++++++++++++++++\n\n    Calling constructor\n\n    Calling constructor\n\n    Calling copy constructor\n\n    Calling copy assignment operator\n</pre>\n\n<p>I have some doubts here:  </p>\n\n<p>I thought that if you pass <code>r-value</code>, move constructor will be called, is that right? Isn't this <code>b.setoA(createA());</code> an <code>r-value</code>?</p>\n\n<p>How can I make move constructor/operator being called?</p>\n"}, {"tags": ["c++", "stl", "stdtuple"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 6, "creation_date": 1532531953, "post_id": 51522440, "comment_id": 90013848, "body": "What is <code>d</code>? , what is <code>data</code>? You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1532531970, "post_id": 51522440, "comment_id": 90013862, "body": "&quot;Can anyone give me some idea?&quot; Don&#39;t you think it would be a good idea to at least provide that tuple definition? Our telepathy machine is broken today, sorry."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1532532067, "post_id": 51522440, "comment_id": 90013927, "body": "Guessing at what variables are with error messages is a... <i>curious</i> way of programming ."}, {"owner": {"reputation": 554, "user_id": 4476501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oTMdb.jpg?s=128&g=1", "display_name": "Summer Sun", "link": "https://stackoverflow.com/users/4476501/summer-sun"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1532532329, "post_id": 51522440, "comment_id": 90014110, "body": "@Jabberwocky Thank you Jabberwocky because I thought std::get should work for tuple anyway, so I did not attach the detail. I will add it soon."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1532532388, "post_id": 51522440, "comment_id": 90014156, "body": "@SummerSun OK, and please keep it minimal."}, {"owner": {"reputation": 554, "user_id": 4476501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oTMdb.jpg?s=128&g=1", "display_name": "Summer Sun", "link": "https://stackoverflow.com/users/4476501/summer-sun"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1532583566, "post_id": 51522440, "comment_id": 90031014, "body": "I&#39;m sorry @Jabberwocky and all, I fail to provide detail info due to the complexity of codes. Maybe you can help me close this question now. I apologize for posting this stupid question."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1532532077, "post_id": 51522503, "comment_id": 90013935, "body": "How do you know that there is a tuple with no elements involved?"}, {"owner": {"reputation": 588, "user_id": 2133098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCzMG.jpg?s=128&g=1", "display_name": "Taylor Nichols", "link": "https://stackoverflow.com/users/2133098/taylor-nichols"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1532532143, "post_id": 51522503, "comment_id": 90013978, "body": "@Slava: Because of the error: no matching function for call to \u2018get(std::tuple&lt;&gt;&amp;)\u2019"}, {"owner": {"reputation": 554, "user_id": 4476501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oTMdb.jpg?s=128&g=1", "display_name": "Summer Sun", "link": "https://stackoverflow.com/users/4476501/summer-sun"}, "edited": false, "score": 0, "creation_date": 1532582799, "post_id": 51522503, "comment_id": 90030770, "body": "Thank you for your idea, but here I truly have one element and it can be seen from debugger."}, {"owner": {"reputation": 588, "user_id": 2133098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCzMG.jpg?s=128&g=1", "display_name": "Taylor Nichols", "link": "https://stackoverflow.com/users/2133098/taylor-nichols"}, "reply_to_user": {"reputation": 554, "user_id": 4476501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oTMdb.jpg?s=128&g=1", "display_name": "Summer Sun", "link": "https://stackoverflow.com/users/4476501/summer-sun"}, "edited": false, "score": 0, "creation_date": 1532613956, "post_id": 51522503, "comment_id": 90049223, "body": "@SummerSun: Thanks for clarifying, I&#39;ve updated my answer to explain why."}], "tags": [], "owner": {"reputation": 588, "user_id": 2133098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCzMG.jpg?s=128&g=1", "display_name": "Taylor Nichols", "link": "https://stackoverflow.com/users/2133098/taylor-nichols"}, "is_accepted": false, "score": 4, "last_activity_date": 1532613923, "last_edit_date": 1532613923, "creation_date": 1532531975, "answer_id": 51522503, "question_id": 51522440, "link": "https://stackoverflow.com/questions/51522440/fail-to-use-stdget-to-reach-tuple-element/51522503#51522503", "title": "Fail to use std::get to reach tuple element", "body": "<p>You can't get the zeroth element from a tuple with no elements.</p>\n\n<p>It's the same concept as indexing an empty array at 0.</p>\n\n<p>EDIT: To clarify, I suspect your code is being called twice. The line</p>\n\n<pre><code>auto ha = std::get&lt; 1 &gt;( d.data ).data;\nint ma = ha;\n</code></pre>\n\n<p>gives two error messages, because in both cases, <code>ha</code> is a tuple, which can't cast to an int:</p>\n\n<pre><code>cannot convert \u2018std::tuple&lt;&gt;\u2019 to \u2018int\u2019 in initialization int ma = ha;\ncannot convert \u2018std::tuple&lt;PointStreamColor&lt;float&gt; &gt;\u2019 to \u2018int\u2019 in initialization\n</code></pre>\n\n<p>This shows in the first case, ha is an empty tuple. In the second case, ha has one element.</p>\n\n<p>The alternative code</p>\n\n<pre><code>auto ha = std::get&lt; 1 &gt;( d.data ).data;\nauto ma = std::get&lt; 0 &gt;( ha );\n</code></pre>\n\n<p>only results in one error message because <code>std::get&lt; 0 &gt;( ha )</code> is perfectly valid in the second case, when <code>ha</code> is type <code>std::tuple&lt;PointStreamColor&lt;float&gt; &gt;</code> which has one element. This error message arises from the first case, when <code>ha</code> is type <code>std::tuple&lt;&gt;</code> which is empty:</p>\n\n<pre><code>no matching function for call to \u2018get(std::tuple&lt;&gt;&amp;)\u2019 int ma = std::get&lt; 0 &gt;( ha );\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 4476501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oTMdb.jpg?s=128&g=1", "display_name": "Summer Sun", "link": "https://stackoverflow.com/users/4476501/summer-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "closed_date": 1532647631, "answer_count": 1, "score": -3, "last_activity_date": 1532613923, "creation_date": 1532531821, "last_edit_date": 1532583297, "question_id": 51522440, "link": "https://stackoverflow.com/questions/51522440/fail-to-use-stdget-to-reach-tuple-element", "closed_reason": "Not suitable for this site", "title": "Fail to use std::get to reach tuple element", "body": "<h2>Original post:</h2>\n\n<p>I am having an object in a complex project. So I may not be able to provide very detail API of all these classes, but I am trying to abstract my problem without need of detail.</p>\n\n<p>First of all, the code below works fine:</p>\n\n<pre><code>auto ha = std::get&lt; 1 &gt;( d.data ).data;\n</code></pre>\n\n<p>Then I am try to have code below:</p>\n\n<pre><code>auto ha = std::get&lt; 1 &gt;( d.data ).data;\nint ma = ha;\n</code></pre>\n\n<p>The compiler says</p>\n\n<pre><code>cannot convert \u2018std::tuple&lt;&gt;\u2019 to \u2018int\u2019 in initialization int ma = ha;\ncannot convert \u2018std::tuple&lt;PointStreamColor&lt;float&gt; &gt;\u2019 to \u2018int\u2019 in initialization\n</code></pre>\n\n<p>This should means that <code>ha</code> is a std::tuple variable. Then I have code below:</p>\n\n<pre><code>auto ha = std::get&lt; 1 &gt;( d.data ).data;\nauto ma = std::get&lt; 0 &gt;( ha );\n</code></pre>\n\n<p>For the code above, the compiler says </p>\n\n<pre><code>no matching function for call to \u2018get(std::tuple&lt;&gt;&amp;)\u2019 int ma = std::get&lt; 0 &gt;( ha );\n</code></pre>\n\n<p>I cannot understand why can't I use std::get here to reach the first element of a std::tuple? Can anyone give me some idea?</p>\n\n<h2>Update</h2>\n\n<p>Thank you all for pointing out that I should provide more info. I totally understand this before I post. But the implementation of classes here are \ntemplate based, so massive and hierarchical, that I am not able to provide them all.</p>\n\n<p>So I was trying to ask for any general idea that might cause failure for reaching <code>std::tuple</code> element by <code>std::get</code>.</p>\n\n<p>Maybe the problem I am facing is not suitable for public discusstion here. I am so sorry for taking your time. I cannot delete this question now and maybe one of you can help close this question now.</p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["c++", "qt", "project"], "comments": [{"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1532531543, "post_id": 51522233, "comment_id": 90013535, "body": "You can simply include it. Or what exactly is the problem you have with it?"}, {"owner": {"reputation": 329, "user_id": 2752503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ae2ae39bc9ad7d2e43588ec9c7d689e1?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/2752503/django"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1532531934, "post_id": 51522233, "comment_id": 90013834, "body": "@Jaa-c perhaps the issue is that I&#39;m not sure how to include it. A simple &quot;#include mainwindow.h&quot; does not suffice. as I get a &quot;No such file or directory&quot;. Is there a way to explicitly point it towards the class of another object? Do I have to add a dependency somewhere in the project files?"}, {"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 1, "creation_date": 1532532152, "post_id": 51522233, "comment_id": 90013985, "body": "Try putting <code>INCLUDEPATH += $$PWD&#47;..</code> to your controller.pro and then <code>#include VIEW&#47;mainwindow.h</code>?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1532532332, "post_id": 51522233, "comment_id": 90014116, "body": "@Jaa-c You left this detail out but I find this relevant: I would prefer <code>#include &lt;VIEW&#47;mainwindow.h&gt;</code> over <code>#include &quot;VIEW&#47;mainwindow.h&quot;</code> although I belief it would work in either case."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10133498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02bda4fd7b8dddd8e7ded10598bc225?s=128&d=identicon&r=PG&f=1", "display_name": "chodzikman", "link": "https://stackoverflow.com/users/10133498/chodzikman"}, "edited": false, "score": 0, "creation_date": 1532532245, "post_id": 51522573, "comment_id": 90014060, "body": "And by the way, I am succesfully using TEMPLATE = subdirs in one of my projects, and this top .pro file looks just fine"}], "tags": [], "owner": {"reputation": 9, "user_id": 10133498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02bda4fd7b8dddd8e7ded10598bc225?s=128&d=identicon&r=PG&f=1", "display_name": "chodzikman", "link": "https://stackoverflow.com/users/10133498/chodzikman"}, "is_accepted": false, "score": 0, "last_activity_date": 1532532170, "creation_date": 1532532170, "answer_id": 51522573, "question_id": 51522233, "link": "https://stackoverflow.com/questions/51522233/qt-project-management-with-subprojects-accessing-classes-from-another-project/51522573#51522573", "title": "Qt Project Management with subprojects: Accessing classes from another project", "body": "<p>Are your dependent projects libraries? I am not sure, but this feature might be intended to use it only with dynamic linkage.</p>\n\n<p>See TEMPLATE = lib examples in Qt documentation</p>\n"}, {"tags": [], "owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1532532520, "creation_date": 1532532520, "answer_id": 51522691, "question_id": 51522233, "link": "https://stackoverflow.com/questions/51522233/qt-project-management-with-subprojects-accessing-classes-from-another-project/51522691#51522691", "title": "Qt Project Management with subprojects: Accessing classes from another project", "body": "<p>In each of your pro file, setup your includepath like this:</p>\n\n<pre><code>INCLUDEPATH += $$PWD/..\n</code></pre>\n\n<p>Then, you can include files like </p>\n\n<pre><code>#include \"VIEW/mainwindow.h\"\n</code></pre>\n\n<p>Also if you will build subprojects to separate dll files, you will have to add dependecy of the dll like this:</p>\n\n<pre><code>LIBS += -lView\n</code></pre>\n\n<p>Also note that most likely, you should include controller to your view, not the other way around.</p>\n"}], "owner": {"reputation": 329, "user_id": 2752503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ae2ae39bc9ad7d2e43588ec9c7d689e1?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/2752503/django"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1532532520, "creation_date": 1532531226, "last_edit_date": 1532531954, "question_id": 51522233, "link": "https://stackoverflow.com/questions/51522233/qt-project-management-with-subprojects-accessing-classes-from-another-project", "title": "Qt Project Management with subprojects: Accessing classes from another project", "body": "<p>I am developing a large application that I wish to separate into 3 sub projects for organization and testing's sake; a model, a view, and a controller to act as a middle class between the two.</p>\n\n<p>Here is the structure I have currently:</p>\n\n<pre><code>/Project\n| Project.pro\n|--- MODEL\n|    |--- MODEL.pro\n|    `--- ...source files\n|--- VIEW\n|    |--- VIEW.pro\n|    `--- ... source files\n|--- CONTROLLER\n|    |--- CONTROLLER.pro\n|    `--- ...source files\n</code></pre>\n\n<p>My Project.pro looks like this</p>\n\n<pre><code>TEMPLATE = subdirs\n\nSUBDIRS += \\\n    VIEW \\\n    CONTROLLER \\\n    MODEL\n\n# where to find the sub projects\nVIEW.subdir = VIEW\nMODEL.subdir = MODEL\nCONTROLLER.subdir = CONTROLLER\n\n# what subproject depends on others\nCONTROLLER.depends = VIEW MODEL\n</code></pre>\n\n<p>I have a class MainWindow in VIEW. How can I add a reference to it in my CONTROLLER project so that I can use this MainWindow class in, for instance, the <code>main.cpp</code> in CONTROLLER?</p>\n\n<p>A simple \"#include mainwindow.h\" does not suffice. as I get a \"No such file or directory\". Is there a way to explicitly point it towards the class of another object? Do I have to add a dependency somewhere in the project files?</p>\n"}, {"tags": ["c++", "exception-handling", "try-catch"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 4, "creation_date": 1532531292, "post_id": 51522202, "comment_id": 90013341, "body": "A <a href=\"https://isocpp.org/wiki/faq/exceptions#too-many-trycatch-blocks\" rel=\"nofollow noreferrer\">good read</a> on the subject."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532531315, "post_id": 51522202, "comment_id": 90013355, "body": "Put one around anywhere exceptions belonging to the same problem may be thrown."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1532531455, "post_id": 51522202, "comment_id": 90013460, "body": "Only catch exceptions when you can take some sensible recovery action (not just debug output or telling the user there has been an error).  Now you know where to catch exceptions you can place the try-catch blocks."}], "owner": {"reputation": 457, "user_id": 8455470, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01e8b42b903732a5fcf2ba3fc7bd28dc?s=128&d=identicon&r=PG&f=1", "display_name": "sangmin park", "link": "https://stackoverflow.com/users/8455470/sangmin-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532533786, "creation_date": 1532531135, "question_id": 51522202, "link": "https://stackoverflow.com/questions/51522202/exception-handling-try-blocks", "title": "Exception Handling - try blocks", "body": "<p>I just started reading about error handling. I understand the basics and how the exceptions are thrown and caught. But I'm lost where I'm supposed to have the try blocks. If I have a program and I want to catch multiple errors that are located in various places, would I enclose my entire code in one try block. From what I've read you can have one try block? Or is error handling use for unit testing? For example, when you run into an error, you would manually enclose that part of the code in the try block to fix it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1532530935, "post_id": 51522136, "comment_id": 90013074, "body": "What compiler are you using?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1532531151, "post_id": 51522136, "comment_id": 90013238, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44863062/why-doesnt-a-simple-hello-world-style-program-compile-with-turbo-c\">Why doesn&#39;t a simple &quot;Hello World&quot;-style program compile with Turbo C++?</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1532531230, "post_id": 51522136, "comment_id": 90013286, "body": "Compile with what? How? Where? When?"}, {"owner": {"reputation": 588, "user_id": 2133098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xCzMG.jpg?s=128&g=1", "display_name": "Taylor Nichols", "link": "https://stackoverflow.com/users/2133098/taylor-nichols"}, "edited": false, "score": 0, "creation_date": 1532531356, "post_id": 51522136, "comment_id": 90013395, "body": "Not to nitpick, but Account is the wrong name for the constructor."}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532531375, "post_id": 51522136, "comment_id": 90013408, "body": "please how can i know which compiler am using.. i use code::blocks"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1532531892, "post_id": 51522136, "comment_id": 90013808, "body": "Also exactly how do you start the compilation.  From within the IDE, from the command line..  These details matter."}, {"owner": {"reputation": 592, "user_id": 4264155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00606b6f44e3bb6dcce12d100b01f3a6?s=128&d=identicon&r=PG", "display_name": "Shrikanth N", "link": "https://stackoverflow.com/users/4264155/shrikanth-n"}, "edited": false, "score": 0, "creation_date": 1532532056, "post_id": 51522136, "comment_id": 90013924, "body": "If your compiler was not auto-detected, go to &quot;Settings-&gt;Compiler and Debugger-&gt;Global Compiler settings-&gt;Toolchain executables&quot;, select the compiler you installed and press &quot;Auto-detect&quot;. Check link <a href=\"http://wiki.codeblocks.org/index.php/Installing_a_supported_compiler\" rel=\"nofollow noreferrer\">wiki.codeblocks.org/index.php/Installing_a_supported_compile&zwnj;&#8203;r</a>"}, {"owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "edited": false, "score": 0, "creation_date": 1532532120, "post_id": 51522136, "comment_id": 90013959, "body": "@learner My First question is What error ? And second is which Compiler ?"}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532532437, "post_id": 51522136, "comment_id": 90014191, "body": "||=== Build: Debug in constructeur (compiler: GNU GCC Compiler) fatal error: string: No such file or directory|"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1532532486, "post_id": 51522136, "comment_id": 90014228, "body": "Why are you using code::blocks in the first place?  Since it doesn&#39;t automatically install and configure a compiler, it&#39;s not the easiest choice for someone just starting.  What operating system are you using, there may be alternatives that work better &quot;out of the box&quot;"}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532532655, "post_id": 51522136, "comment_id": 90014337, "body": "i just compile with simple programm but when i tru to add class to my project, error occur"}, {"owner": {"reputation": 592, "user_id": 4264155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00606b6f44e3bb6dcce12d100b01f3a6?s=128&d=identicon&r=PG", "display_name": "Shrikanth N", "link": "https://stackoverflow.com/users/4264155/shrikanth-n"}, "edited": false, "score": 0, "creation_date": 1532532739, "post_id": 51522136, "comment_id": 90014382, "body": "Looks like you dont have the correct configuration. Compiler not be installed. If you are just using it to learn, try this online compiler <a href=\"https://www.tutorialspoint.com/compile_cpp_online.php\" rel=\"nofollow noreferrer\">tutorialspoint.com/compile_cpp_online.php</a>"}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532533099, "post_id": 51522136, "comment_id": 90014594, "body": "i had compile with other project! how can i know if it is installed properly or not? (using code::blocks settings)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1532536554, "post_id": 51522136, "comment_id": 90016380, "body": "@learner <code>#include &lt;iostream&gt; int main() { std::cout &lt;&lt;  &quot;Hello World&quot;; }</code> -- If this doesn&#39;t compile, go to step 1 in the compiler installation and start over."}, {"owner": {"reputation": 839, "user_id": 7113839, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hONZg.jpg?s=128&g=1", "display_name": "BStill", "link": "https://stackoverflow.com/users/7113839/bstill"}, "edited": false, "score": 0, "creation_date": 1532536580, "post_id": 51522136, "comment_id": 90016390, "body": "It looks to be a problem with <code>#include &lt;string&gt;</code>. Can you try this <code>#include &lt;string.h&gt;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1532531564, "post_id": 51522335, "comment_id": 90013555, "body": "Rather than revising the code as an answer, you should edit the original question to look like this, and then delete this answer."}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1532532041, "post_id": 51522335, "comment_id": 90013912, "body": "Yes.  But there is an <code>edit</code> link under your original question.  You are supposed to use that for code corrections."}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "reply_to_user": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1532532718, "post_id": 51522335, "comment_id": 90014366, "body": "thanks for your information .. i will use this option"}], "tags": [], "owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "is_accepted": false, "score": 1, "last_activity_date": 1532531490, "creation_date": 1532531490, "answer_id": 51522335, "question_id": 51522136, "link": "https://stackoverflow.com/questions/51522136/c-fatal-error-when-try-to-compile-fatal-error-string-no-such-file-or-direct/51522335#51522335", "title": "C++ fatal error when try to compile: fatal error: string: No such file or directory", "body": "<pre><code>#ifndef _ACCOUNT_\n#define _ACCOUNT_\n\n#include &lt;string&gt;\nusing namespace std;\n\nclass CompteBancaire\n{\nprivate: // Sheltered members:\n    string name; // Account holder\n    unsigned long nr; // Account number\n    double state; // State of the account\npublic: // Public interface:\n    CompteBancaire( const std::string&amp; nom, unsigned long a, double b);\n    CompteBancaire( const std::string&amp; nom );\n  //  bool init( const string&amp;, unsigned long, double);\n    void display();\n\n};\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532531938, "post_id": 51522434, "comment_id": 90013838, "body": "what should i do"}], "tags": [], "owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "is_accepted": false, "score": 0, "last_activity_date": 1532531811, "creation_date": 1532531811, "answer_id": 51522434, "question_id": 51522136, "link": "https://stackoverflow.com/questions/51522136/c-fatal-error-when-try-to-compile-fatal-error-string-no-such-file-or-direct/51522434#51522434", "title": "C++ fatal error when try to compile: fatal error: string: No such file or directory", "body": "<pre><code>#include &lt;string&gt;\n</code></pre>\n\n<p>and</p>\n\n<blockquote>\n  <p>fatal error: string: No such file or directory </p>\n</blockquote>\n\n<p>say you're missing an option to specify the directory to search for include files.  It's usually <code>-I</code>  That said, if code::blocks is set up property, it should take care of all this for you if you simply build from within the IDE.</p>\n"}, {"comments": [{"owner": {"reputation": 592, "user_id": 4264155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00606b6f44e3bb6dcce12d100b01f3a6?s=128&d=identicon&r=PG", "display_name": "Shrikanth N", "link": "https://stackoverflow.com/users/4264155/shrikanth-n"}, "reply_to_user": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532532409, "post_id": 51522481, "comment_id": 90014172, "body": "What is the error now? Try adding <code>#include &lt;iostream&gt;</code>. I tried on this online compiler <a href=\"https://www.tutorialspoint.com/compile_cpp_online.php\" rel=\"nofollow noreferrer\">tutorialspoint.com/compile_cpp_online.php</a> with the change I mentioned and its working well."}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532532534, "post_id": 51522481, "comment_id": 90014255, "body": "when i add  #include &lt;iostream&gt; ... this error appear:     fatal error: iostream: No such file or directory|"}, {"owner": {"reputation": 592, "user_id": 4264155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00606b6f44e3bb6dcce12d100b01f3a6?s=128&d=identicon&r=PG", "display_name": "Shrikanth N", "link": "https://stackoverflow.com/users/4264155/shrikanth-n"}, "reply_to_user": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532532822, "post_id": 51522481, "comment_id": 90014436, "body": "Looks like you might be having some problem with the compiler installation. Can you try the code on online compiler and then go back to code blocks. Check this link <a href=\"http://wiki.codeblocks.org/index.php/MinGW_installation\" rel=\"nofollow noreferrer\">wiki.codeblocks.org/index.php/MinGW_installation</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532537615, "post_id": 51522481, "comment_id": 90016914, "body": "@learner -- Why didn&#39;t you simply start off by compiling the simplest of C++ programs, i.e. &quot;Hello World&quot;.  There was no need to get into trying to create classes if you can&#39;t get a simple &quot;Hello World&quot; program to build correctly."}, {"owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "edited": false, "score": 0, "creation_date": 1532545078, "post_id": 51522481, "comment_id": 90020499, "body": "yes it compiles .. no problem with   &quot;Hello World&quot;. it run correctly"}], "tags": [], "owner": {"reputation": 592, "user_id": 4264155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00606b6f44e3bb6dcce12d100b01f3a6?s=128&d=identicon&r=PG", "display_name": "Shrikanth N", "link": "https://stackoverflow.com/users/4264155/shrikanth-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1532531920, "creation_date": 1532531920, "answer_id": 51522481, "question_id": 51522136, "link": "https://stackoverflow.com/questions/51522136/c-fatal-error-when-try-to-compile-fatal-error-string-no-such-file-or-direct/51522481#51522481", "title": "C++ fatal error when try to compile: fatal error: string: No such file or directory", "body": "<p>You are assuming <code>Account( const std::string&amp; nom, unsigned long a, double b)</code> and<br>\n <code>Account( const std::string&amp; nom)</code> to be a constructor. But it is not true. The constructor should have the same name as the class name. In your case constructor should have the name <code>CompteBancaire</code></p>\n\n<pre><code>CompteBancaire(const std::string&amp; nom, unsigned long a, double b);\nCompteBancaire(const std::string&amp; nom);\n</code></pre>\n\n<p>Make this change and compile, it should work.</p>\n"}], "owner": {"reputation": 11, "user_id": 8780810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b614f7a04696a71d52aad8610d162249?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/8780810/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1532531920, "creation_date": 1532530897, "last_edit_date": 1532531050, "question_id": 51522136, "link": "https://stackoverflow.com/questions/51522136/c-fatal-error-when-try-to-compile-fatal-error-string-no-such-file-or-direct", "title": "C++ fatal error when try to compile: fatal error: string: No such file or directory", "body": "<p>I want to create a new class like below, and when I try to compile, an error occurs. How can I deal with such problem?</p>\n\n<pre><code>#ifndef _ACCOUNT_\n#define _ACCOUNT_\n\n#include &lt;string&gt;\nusing namespace std;\n\nclass CompteBancaire\n{\nprivate: // Sheltered members:\n    string name; // Account holder\n    unsigned long nr; // Account number\n    double state; // State of the account\npublic: // Public interface:\n    Account( const std::string&amp; nom, unsigned long a, double b);\n    Account( const std::string&amp; nom );\n  //  bool init( const string&amp;, unsigned long, double);\n    void display();\n\n};\n#endif \n</code></pre>\n"}, {"tags": ["c++", "boost"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10072386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4dL5JtjrktU/AAAAAAAAAAI/AAAAAAAAHSE/E7xe58wsbco/photo.jpg?sz=128", "display_name": "sam smith", "link": "https://stackoverflow.com/users/10072386/sam-smith"}, "edited": false, "score": 0, "creation_date": 1532537291, "post_id": 51522892, "comment_id": 90016744, "body": "So essentially i need the entire boost library and can&#39;t only have Signals2 alone?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 3, "user_id": 10072386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4dL5JtjrktU/AAAAAAAAAAI/AAAAAAAAHSE/E7xe58wsbco/photo.jpg?sz=128", "display_name": "sam smith", "link": "https://stackoverflow.com/users/10072386/sam-smith"}, "edited": false, "score": 0, "creation_date": 1532538578, "post_id": 51522892, "comment_id": 90017408, "body": "It&#39;s the convenient thing to do. Technically, there&#39;s isn&#39;t any effective difference anyways, since it&#39;s all header-only. If you really want to try and conserve on-disk footprint you <b>could</b> look at the BCP tool, but in practice I&#39;ve found the size benefits to be marginal."}, {"owner": {"reputation": 3, "user_id": 10072386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4dL5JtjrktU/AAAAAAAAAAI/AAAAAAAAHSE/E7xe58wsbco/photo.jpg?sz=128", "display_name": "sam smith", "link": "https://stackoverflow.com/users/10072386/sam-smith"}, "edited": false, "score": 0, "creation_date": 1532549771, "post_id": 51522892, "comment_id": 90022537, "body": "Thanks, i downloaded the whole library and compiled it, and added all of the boost headers to my include folder, and the built library folders to my libraries folder and now it compiles without a hitch. I just had to add <code>_SCL_SECURE_NO_WARNINGS to Project-&gt;Properties-&gt;C&#47;C++-&gt;Preprocessor-&gt;Preprocessor Definitions</code>. Do i have to add Additional Dependencies to the Input of the Linker for the specific non-header-only portions of boost i may ever use (like..i dunno.. signals.lib) or is that unneccessay?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 3, "user_id": 10072386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4dL5JtjrktU/AAAAAAAAAAI/AAAAAAAAHSE/E7xe58wsbco/photo.jpg?sz=128", "display_name": "sam smith", "link": "https://stackoverflow.com/users/10072386/sam-smith"}, "edited": false, "score": 0, "creation_date": 1532567308, "post_id": 51522892, "comment_id": 90027433, "body": "Oh. You never mentioned you were using MSVC (I just looked at the way you spelled the include paths). Not that it makes a lot of difference. You shouldn&#39;t have had to compile it, like I said: Signals2 is header-only. Signals.lib is for the &quot;old&quot; library (not Signals2) so you donot need it."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 3, "user_id": 10072386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4dL5JtjrktU/AAAAAAAAAAI/AAAAAAAAHSE/E7xe58wsbco/photo.jpg?sz=128", "display_name": "sam smith", "link": "https://stackoverflow.com/users/10072386/sam-smith"}, "edited": false, "score": 0, "creation_date": 1532567313, "post_id": 51522892, "comment_id": 90027434, "body": "You might add the library-path since you compiled them anyways (it&#39;ll be in stage/lib or so). That way when you do use a library that is not header-only, <a href=\"https://www.boost.org/doc/libs/1_67_0/more/getting_started/windows.html#auto-linking\" rel=\"nofollow noreferrer\">AutoLinking</a> will kick will add the required linker inputs using #pragma directives for MSVC"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1532533230, "creation_date": 1532533230, "answer_id": 51522892, "question_id": 51522081, "link": "https://stackoverflow.com/questions/51522081/how-do-i-install-boost-signals2-into-my-project/51522892#51522892", "title": "How do I install Boost.signals2 into my project?", "body": "<p>You have to add the include path for the complete boost libraries to your compile flags.</p>\n\n<p>If you extracted the tarball in directory XYZ, the include path would just be that (so <code>-I XYZ</code> or <code>-isystem XYZ</code>).</p>\n\n<p>Signals2 in particular is header only, so it doesn't need to be built and/or linked. </p>\n"}], "owner": {"reputation": 3, "user_id": 10072386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4dL5JtjrktU/AAAAAAAAAAI/AAAAAAAAHSE/E7xe58wsbco/photo.jpg?sz=128", "display_name": "sam smith", "link": "https://stackoverflow.com/users/10072386/sam-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 51522892, "answer_count": 1, "score": 0, "last_activity_date": 1532533230, "creation_date": 1532530753, "last_edit_date": 1532531079, "question_id": 51522081, "link": "https://stackoverflow.com/questions/51522081/how-do-i-install-boost-signals2-into-my-project", "title": "How do I install Boost.signals2 into my project?", "body": "<p>I'm having trouble succesfully including Boost.signals2 in my project so i can have an event-like system for button presses with my OpenGL window. \nI downloaded boost.signals2 from its github page and took the contents of the Include folder, and put it into my own Include folder that i have included in my project (this is so i can just add stuff i need as i go and have something i can share across projects).</p>\n\n<p>Problem is, when i build my project after including Boost.signals2, and having the line <code>#Include &lt;boost/signals2/signal.hpp&gt;</code> i am presented with a bunch of errors from all the Boost.signals2 headers, all of which are <code>cannot open source file \"boost/config.hpp\": No such file or directory</code> or some other <code>boost/{x}.hpp</code>. I'm at a total loss as to where i'm going wrong. As far as i understand, i do not have to build the Boost.signals2 library as it is header only, but maybe i am wrong?\nHow can install Boost.signals2?</p>\n"}, {"tags": ["android", "c++", "android-studio", "cmake", "clang"], "comments": [{"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532530499, "post_id": 51521701, "comment_id": 90012784, "body": "Is the variable ${LIB_CUSE} well-defined? It seems that the <code>target_link_libraries</code> is the issue here. As the line <code>find_library(LIB_CUSE NAMES cuse libcuse HINTS libs libs&#47;cuse)</code> is commented that may be the problem."}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532531324, "post_id": 51521701, "comment_id": 90013362, "body": "@BenjaminBarrois I didn&#39;t realize it was still commented out. A leftover from yesterday&#39;s troubleshooting session. I&#39;ve updated the question. I&#39;ve also set it to the libname, same result."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532531566, "post_id": 51521701, "comment_id": 90013558, "body": "Have you tried <code>target_link_libraries(hello-jni cuse fuse bthread)</code> ?"}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532531713, "post_id": 51521701, "comment_id": 90013663, "body": "Yep, but I tried it again just now for sanity: Same error, undefined reference."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1532560648, "post_id": 51521701, "comment_id": 90026216, "body": "Looks like the library simply doesn&#39;t <b>define</b> these symbols for outer use. (The header <code>cuse.h</code> only <i>declares</i> them.) I have able only to google code which defines those symbols <i>statically</i>: <a href=\"https://libfuse.github.io/doxygen/cuse_8c_source.html\" rel=\"nofollow noreferrer\">libfuse.github.io/doxygen/cuse_8c_source.html</a>. BTW, you want to use these functions (e.g. <code>cusexmp_process_arg</code>), but how do you now what they do? Have you found documentation for them, or what?"}, {"owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1532560791, "post_id": 51521701, "comment_id": 90026244, "body": "@Tsyvarev I&#39;ve tried using the extern keyword, no change. How do I define the functions for outer use??"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1532560865, "post_id": 51521701, "comment_id": 90026260, "body": "&quot;How do I define the functions for outer use??&quot; - Define that functions in <code>cuse.c</code> without <code>static</code> modifier."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1532563569, "post_id": 51521701, "comment_id": 90026793, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "owner": {"reputation": 2718, "user_id": 1298503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CSB36.jpg?s=128&g=1", "display_name": "MDMoore313", "link": "https://stackoverflow.com/users/1298503/mdmoore313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532531292, "creation_date": 1532529719, "last_edit_date": 1532531292, "question_id": 51521701, "link": "https://stackoverflow.com/questions/51521701/troubleshooting-undefined-reference-error-android-studio-cmake-clanga", "title": "Troubleshooting &quot;undefined reference error&quot; - Android Studio/CMake/Clang++A", "body": "<p>I am trying to setup the <a href=\"https://developer.android.com/ndk/samples/sample_hellojni\" rel=\"nofollow noreferrer\">HelloJNI tutorial</a> to compile and link a native library to the default library the example creates. </p>\n\n<p>The file structure is as follows:</p>\n\n<pre><code>\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 libs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 bthread\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CMakeLists.txt\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 include\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 cuse\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CMakeLists.txt\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 include\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 fuse\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 CMakeLists.txt\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 include\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 modules\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 main\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 cpp\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 hello-jni.cpp\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 daemon.cpp\n</code></pre>\n\n<p>The <code>CMakeLists.txt</code> file for the libraries in the <code>libs</code> folder looks pretty much like this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\n# Create a library called \"Hello\" which includes the source file \"hello.cxx\".\n# The extension is already found. Any number of sources could be listed here.\n\ninclude_directories(\n    ${CMAKE_SOURCE_DIR}/lib/fuse/include\n    ${CMAKE_SOURCE_DIR}/lib/cuse/include)\n\n\nadd_library    (cuse    SHARED\n                        cuse.c)\n\nadd_executable (cuse_client cuse_client.c)\n\n\n# Make sure the compiler can find include files for our Hello library\n# when other libraries or executables link to Hello\n\ntarget_include_directories(cuse PUBLIC\n    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;\n    $&lt;INSTALL_INTERFACE:include&gt;)\n\nset_target_properties(cuse PROPERTIES PUBLIC_HEADER  \"include/cuse.h\")\n\ntarget_link_libraries( # Specifies the target library.\n                       cuse\n                       fuse)\n\ninstall(TARGETS cuse\n    EXPORT cuse-targets\n    PUBLIC_HEADER DESTINATION include\n    ARCHIVE DESTINATION lib\n    LIBRARY DESTINATION lib\n    RUNTIME DESTINATION bin)\n\ninstall(EXPORT cuse-targets\n    NAMESPACE cuse::\n    FILE cuse-config.cmake\n    DESTINATION lib/cmake/cuse)\n</code></pre>\n\n<p>For each library. <code>cuse</code> depends on <code>fuse</code>, and <code>fuse</code> depends on <code>bthread</code>, and each library is set to SHARED in <code>add_library()</code>. This all compiles and links with no errors.</p>\n\n<p>The <code>app/CMakeLists.txt</code> for the whole project is:</p>\n\n<pre><code># For more information about using CMake with Android Studio, read the\n# documentation: https://d.android.com/studio/projects/add-native-code.html\n\n# Sets the minimum version of CMake required to build the native library.\n\ncmake_minimum_required(VERSION 3.4.1)\n\nproject(app)\n\ninclude_directories(\n    ${CMAKE_SOURCE_DIR}/libs/cuse/include\n    ${CMAKE_SOURCE_DIR}/libs/fuse/include)\n\n\nadd_subdirectory(libs/bthread)\nadd_subdirectory(libs/fuse)\nadd_subdirectory(libs/cuse)\n\n#find_library(LIB_CUSE NAMES cuse libcuse HINTS libs libs/cuse)\n\nadd_library(hello-jni SHARED    src/main/cpp/hello-jni.cpp\n                                src/main/cpp/daemon.cpp)\n\n\n\ntarget_link_libraries( # Specifies the target library.\n                       hello-jni\n                       ${LIB_CUSE})\n</code></pre>\n\n<p>When building the project, I always receive an Undefined reference error referring to one or more functions in <code>cuse.c</code>. For example:</p>\n\n<pre><code>src/main/cpp/daemon.cpp.o: In function `start_cuse_server()':\nsrc/main/cpp/daemon.cpp:65: undefined reference to `cusexmp_process_arg(void*, char const*, int, fuse_args*)'\n</code></pre>\n\n<p>I've modified <code>app/CMakeLists.txt' several times to try and link to the</code>cuse` library. </p>\n\n<p>The header file <code>cuse.h</code>: </p>\n\n<pre><code>#ifndef CUSE_H\n#define CUSE_H\n\n#include \"cuse_lowlevel.h\"\n#include &lt;fuse_opt.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#include \"ioctl.h\"\n\n#define CUSEXMP_OPT(t, p) { t, offsetof(struct cusexmp_param, p), 1 }\n\nvoid *cusexmp_buf;\nsize_t cusexmp_size;\n\nint cusexmp_resize(size_t new_size);\n\nvoid cusexmp_open(fuse_req_t req, struct fuse_file_info *fi);\n\nvoid cusexmp_read(fuse_req_t req, size_t size, off_t off,\n                         struct fuse_file_info *fi);\n\nint cusexmp_expand(size_t new_size);\n\nvoid cusexmp_write(fuse_req_t req, const char *buf, size_t size,\n                          off_t off, struct fuse_file_info *fi);\n\nvoid fioc_do_rw(fuse_req_t req, void *addr, const void *in_buf,\n                       size_t in_bufsz, size_t out_bufsz, int is_read);\n\nvoid cusexmp_ioctl(fuse_req_t req, int cmd, void *arg,\n                          struct fuse_file_info *fi, unsigned flags,\n                          const void *in_buf, size_t in_bufsz, size_t out_bufsz);\n\nint cusexmp_process_arg(void *data, const char *arg, int key,\n                               struct fuse_args *outargs);\n\nstruct cusexmp_param {\n    unsigned        major;\n    unsigned        minor;\n    char            *dev_name;\n    int         is_help;\n};\n\nconst struct cuse_lowlevel_ops cusexmp_clop = {\n        .open       = cusexmp_open,\n        .read       = cusexmp_read,\n        .write      = cusexmp_write,\n        .ioctl      = cusexmp_ioctl,\n};\n\nconst struct fuse_opt cusexmp_opts[] = {\n        CUSEXMP_OPT(\"--maj=%u\",     major),\n        CUSEXMP_OPT(\"-m %u\",        minor),\n        CUSEXMP_OPT(\"--min=%u\",     minor),\n        CUSEXMP_OPT(\"-n %s\",        dev_name),\n        CUSEXMP_OPT(\"--name=%s\",    dev_name),\n        FUSE_OPT_KEY(\"-h\",      0),\n        FUSE_OPT_KEY(\"--help\",      0),\n        FUSE_OPT_END\n};\n\nconst char *usage =\n        \"usage: cusexmp [options]\\n\"\n                \"\\n\"\n                \"options:\\n\"\n                \"    --help|-h             print this help message\\n\"\n                \"    --maj=MAJ|-M MAJ      device major number\\n\"\n                \"    --min=MIN|-m MIN      device minor number\\n\"\n                \"    --name=NAME|-n NAME   device name (mandatory)\\n\"\n                \"    -d   -o debug         enable debug output (implies -f)\\n\"\n                \"    -f                    foreground operation\\n\"\n                \"    -s                    disable multi-threaded operation\\n\"\n                \"\\n\";\n\n\n#endif\n</code></pre>\n\n<p>As far as I can tell the <code>cuse</code> library compiles fine. Sample output from Gradle:</p>\n\n<pre><code>Build hello-jni arm64-v8a\n[1/3] Building CXX object CMakeFiles/hello-jni.dir/src/main/cpp/hello-jni.cpp.o\n[2/3] Building CXX object CMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:76:20: warning: ISO C++11 does not allow conversion from string literal to 'char *' [-Wwritable-strings]\n    param.dev_name=\"/dev/chardev_test\";\n                   ^\n1 warning generated.\n[3/3] Linking CXX shared library ../../../../build/intermediates/cmake/debug/obj/arm64-v8a/libhello-jni.so\nFAILED: : &amp;&amp; /data/android-ndk-r17b/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++  --target=aarch64-none-linux-android --gcc-toolchain=/data/android-ndk-r17b/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64 --sysroot=/data/android-ndk-r17b/sysroot -fPIC -isystem /data/android-ndk-r17b/sysroot/usr/include/aarch64-linux-android -D__ANDROID_API__=21 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -Wa,--noexecstack -Wformat -Werror=format-security -std=c++11  -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -nostdlib++ --sysroot /data/android-ndk-r17b/platforms/android-21/arch-arm64 -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -L/data/android-ndk-r17b/sources/cxx-stl/llvm-libc++/libs/arm64-v8a -Wl,--no-undefined -Wl,-z,noexecstack -Qunused-arguments -Wl,-z,relro -Wl,-z,now -shared -Wl,-soname,libhello-jni.so -o ../../../../build/intermediates/cmake/debug/obj/arm64-v8a/libhello-jni.so CMakeFiles/hello-jni.dir/src/main/cpp/hello-jni.cpp.o CMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o  -latomic -lm \"/data/android-ndk-r17b/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++_static.a\" \"/data/android-ndk-r17b/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++abi.a\" &amp;&amp; :\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o:(.bss+0x0): multiple definition of `cusexmp_buf'\nCMakeFiles/hello-jni.dir/src/main/cpp/hello-jni.cpp.o:(.bss+0x0): first defined here\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o: In function `__daemon_init()':\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:65: multiple definition of `cusexmp_size'\nCMakeFiles/hello-jni.dir/src/main/cpp/hello-jni.cpp.o:/data/android-ndk-r17b/sources/cxx-stl/llvm-libc++/include/string:1543: first defined here\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o: In function `__daemon_init()':\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:65: multiple definition of `usage'\nCMakeFiles/hello-jni.dir/src/main/cpp\n/hello-jni.cpp.o:/data/android-ndk-r17b/sources/cxx-stl/llvm-libc++/include/string:1543: first defined here\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o: In function `start_cuse_server()':\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:65: undefined reference to `cusexmp_process_arg(void*, char const*, int, fuse_args*)'\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:65: undefined reference to `cusexmp_process_arg(void*, char const*, int, fuse_args*)'\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:81: undefined reference to `fuse_opt_parse'\n/home/mike/Desktop/hellojni/app/src/main/cpp/daemon.cpp:101: undefined reference to `cuse_lowlevel_main'\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o:(.data.rel.ro+0xd8): undefined reference to `cusexmp_open(fuse_req*, fuse_file_info*)'\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o:(.data.rel.ro+0xe0): undefined reference to `cusexmp_read(fuse_req*, unsigned long, long, fuse_file_info*)'\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o:(.data.rel.ro+0xe8): undefined reference to `cusexmp_write(fuse_req*, char const*, unsigned long, long, fuse_file_info*)'\nCMakeFiles/hello-jni.dir/src/main/cpp/daemon.cpp.o:(.data.rel.ro+0x108): undefined reference to `cusexmp_ioctl(fuse_req*, int, void*, fuse_file_info*, unsigned int, void const*, unsigned long, unsigned long)'\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\nninja: build stopped: subcommand failed.\n:app:externalNativeBuildDebug FAILED\n</code></pre>\n\n<p>The <code>multiple definition</code> errors I beleive I can fix by rolling back to a previous version, but the undefined reference errors I don't know what to try next. </p>\n\n<p><em>My Question is</em>: How to next fix/troubleshoot this error: It appears that CMake is not linking the library properly, but I'm not familiar enough with CMake or linkers to know how to debug this. I've tried a lot of different CMake commands for linking libraries and exporting symbols, none of them have seemed to work in any combination. </p>\n\n<p>How do I run <code>cmake</code> from bash, view verbose output from <code>cmake</code> and/or <code>ld</code> and find the error?</p>\n\n<h2><strong>Update</strong></h2>\n\n<p>I didn't realize <code>find_library()</code> in <code>app/CMakeLists.txt</code> was still commented out. Uncommenting that line yields the following error:</p>\n\n<pre><code>CMake Error: The following variables are used in this project, but they are set to NOTFOUND.\nPlease set them or make sure they are set and tested correctly in the CMake files:\nLIB_CUSE\n    linked by target \"hello-jni\" in directory /home/mike/Desktop/hellojni/app\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532529566, "post_id": 51521520, "comment_id": 90012110, "body": "There is something very strange in your code. When you say &quot;Idea was to specialize function for different NodeCachingOptions&quot;, what do you mean? You mean for different implementations of NodeCachingOptions or if NodeCachingOptions value is AddPath or DontAddPath?"}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532529652, "post_id": 51521520, "comment_id": 90012177, "body": "Your first template function has a syntax issue anyway. You can&#39;t just give an existing class name in a template declaration like that."}, {"owner": {"reputation": 466, "user_id": 2282979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d31b3cf52c3fb50310f62aac3e96a6?s=128&d=identicon&r=PG", "display_name": "Dmitrii Motorygin", "link": "https://stackoverflow.com/users/2282979/dmitrii-motorygin"}, "reply_to_user": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532529663, "post_id": 51521520, "comment_id": 90012192, "body": "CreateSObject should have different implementation for NodeCachingOptions::AddPath and NodeCachingOptions::DontAddPath. I don&#39;t want to write 2 different functions (e.g. CreateSObject_DontSavePath(\u2026) and CreateSObject(...)   )"}, {"owner": {"reputation": 466, "user_id": 2282979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d31b3cf52c3fb50310f62aac3e96a6?s=128&d=identicon&r=PG", "display_name": "Dmitrii Motorygin", "link": "https://stackoverflow.com/users/2282979/dmitrii-motorygin"}, "reply_to_user": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532529776, "post_id": 51521520, "comment_id": 90012272, "body": "How is that different from e.g. template &lt;class T, int N&gt; struct mul_impl &lt;&gt;  ...       template &lt;class T&gt; struct mul_impl&lt;T, 0&gt; ?    (I looke here for example: <a href=\"https://stackoverflow.com/questions/2403928/partial-template-specialization-of-free-functions-best-practices\" title=\"partial template specialization of free functions best practices\">stackoverflow.com/questions/2403928/&hellip;</a>)"}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532530043, "post_id": 51521520, "comment_id": 90012466, "body": "Ok I understand what you want to do now (thanks to the answer below). I was thinking something totally different, my bad."}], "answers": [{"comments": [{"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1532530175, "post_id": 51521749, "comment_id": 90012553, "body": "and be careful with that, the <code>NodeCachingOptions</code> object you will pass as a template to your methods must be const. Else you have to find another way."}, {"owner": {"reputation": 466, "user_id": 2282979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d31b3cf52c3fb50310f62aac3e96a6?s=128&d=identicon&r=PG", "display_name": "Dmitrii Motorygin", "link": "https://stackoverflow.com/users/2282979/dmitrii-motorygin"}, "edited": false, "score": 0, "creation_date": 1532530254, "post_id": 51521749, "comment_id": 90012607, "body": "oh, I see. Thanks!"}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 4, "last_activity_date": 1532529848, "creation_date": 1532529848, "answer_id": 51521749, "question_id": 51521520, "link": "https://stackoverflow.com/questions/51521520/function-template-partial-specialization-are-there-any-workaround/51521749#51521749", "title": "Function template partial specialization - are there any workaround?", "body": "<p>Your syntax is all wrong. Make it</p>\n\n<pre><code>template &lt;typename T, NodeCachingOptions opt&gt;\nT* CreateSObject(const MPath&amp; ob)\n{\n   CreateSObject_Impl&lt;T, opt&gt; temp;\n   return temp.call(ob);\n}\n</code></pre>\n\n<p>You pass the <em>value</em> of type <code>NodeCachingOptions</code> as the second template paramter of <code>CreateSObject_Impl</code>, not the type itself.</p>\n\n<p>You may want to make <code>call</code> a static member of <code>CreateSObject_Impl</code>, and write <code>return CreateSObject_Impl&lt;T, opt&gt;::call(ob);</code></p>\n"}], "owner": {"reputation": 466, "user_id": 2282979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d31b3cf52c3fb50310f62aac3e96a6?s=128&d=identicon&r=PG", "display_name": "Dmitrii Motorygin", "link": "https://stackoverflow.com/users/2282979/dmitrii-motorygin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 51521749, "answer_count": 1, "score": 0, "last_activity_date": 1532529891, "creation_date": 1532529160, "last_edit_date": 1532529891, "question_id": 51521520, "link": "https://stackoverflow.com/questions/51521520/function-template-partial-specialization-are-there-any-workaround", "title": "Function template partial specialization - are there any workaround?", "body": "<p>I have the following function</p>\n\n<pre><code>enum class NodeCachingOptions\n{\n    AddPath,\n    DontAddPath\n};\n\ntemplate &lt;typename T, NodeCachingOptions&gt;\nT* CreateSObject(const MPath&amp; path)\n</code></pre>\n\n<p>Idea was to specialize function for different NodeCachingOptions.</p>\n\n<p>Turned out it is impossible to use partial function template specialization, thus I tried a workaround:</p>\n\n<pre><code>template &lt;typename T, NodeCachingOptions&gt;\nT* CreateSObject(const MPath&amp; ob)\n{\n   CreateSObject_Impl&lt;class T, NodeCachingOptions&gt; temp\n   return temp.call(ob);\n}\n\ntemplate &lt;typename T, NodeCachingOptions&gt;\nstruct CreateSObject_Impl\n{\n    T* call(const MPath&amp; ob);\n};\n\ntemplate &lt;typename T&gt;\nstruct CreateSObject_Impl&lt;typename T, NodeCachingOptions::AddPath&gt;\n{\n   T* call(const MDagPath&amp; ob)\n   {\u2026}\n}\ntemplate &lt;typename T&gt;\nstruct CreateSObject_Impl&lt;typename T, NodeCachingOptions::DontAddPath&gt;\n{\u2026}\n</code></pre>\n\n<p>However I'm getting compile error: ::NodeCachingOptions': illegal type for non-type template parameter '__formal'</p>\n\n<p>What am I doing wrong and is there a better way to solve this problem?</p>\n\n<p>I took idea of struct impl from here: <a href=\"https://stackoverflow.com/questions/2403928/partial-template-specialization-of-free-functions-best-practices\">Partial template specialization of free functions - best practices</a></p>\n"}, {"tags": ["c++", "move"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 2, "creation_date": 1532529212, "post_id": 51521514, "comment_id": 90011858, "body": "Why not strip out all the unnecessary details from your example code?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 6, "creation_date": 1532529363, "post_id": 51521514, "comment_id": 90011979, "body": "Research &quot;copy elision&quot;."}, {"owner": {"reputation": 40, "user_id": 10134007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e3fe83deb6fe453681842339465042?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Freeman", "link": "https://stackoverflow.com/users/10134007/eric-freeman"}, "edited": false, "score": 0, "creation_date": 1532530445, "post_id": 51521514, "comment_id": 90012734, "body": "found that this is a duplicate of: <a href=\"https://stackoverflow.com/questions/13099603/c11-move-constructor-not-called-default-constructor-preferred\" title=\"c11 move constructor not called default constructor preferred\">stackoverflow.com/questions/13099603/&hellip;</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1532531425, "post_id": 51521514, "comment_id": 90013443, "body": "Your code does not use <code>operator =</code> anywhere. In its current form there&#39;s no chance for <i>any</i> <code>operator =</code> to get called, move or non-move."}, {"owner": {"reputation": 40, "user_id": 10134007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e3fe83deb6fe453681842339465042?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Freeman", "link": "https://stackoverflow.com/users/10134007/eric-freeman"}, "edited": false, "score": 0, "creation_date": 1532531568, "post_id": 51521514, "comment_id": 90013560, "body": "everything worked as expected after adding -fno-elide-constructors tag to disable copy elision"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1532531894, "post_id": 51521514, "comment_id": 90013811, "body": "It is worth noting that by defining these &quot;move&quot; members you automatically made the compiler to implicitly <i>delete</i> the &quot;copy&quot; versions of these members. So, if your &quot;move&quot; versions are not called, it means that &quot;copy&quot; versions are not called either (they don&#39;t exist). I.e. it should have been clear from the very beginning that <i>nothing</i> is called here. All copying has been elided."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1532531955, "post_id": 51521514, "comment_id": 90013853, "body": "(Reference for what @AnT said: <a href=\"https://stackoverflow.com/a/4944131/560648\">stackoverflow.com/a/4944131/560648</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 40, "user_id": 10134007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e3fe83deb6fe453681842339465042?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Freeman", "link": "https://stackoverflow.com/users/10134007/eric-freeman"}, "edited": false, "score": 0, "creation_date": 1532531471, "post_id": 51522127, "comment_id": 90013483, "body": "added -fno-elide-constructors tag and it called the move constructor."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1532530871, "creation_date": 1532530871, "answer_id": 51522127, "question_id": 51521514, "link": "https://stackoverflow.com/questions/51521514/how-come-the-move-constructor-isnt-called-in-my-code/51522127#51522127", "title": "How come the move constructor isnt called in my code?", "body": "<p>This is a feature.</p>\n\n<p>Moves are better than copies, but C++ in this case is allowed to skip even the move! It's called <em>elision</em> and is most noticeable when you initialise like this, or return from a function. In fact since C++17 I think it's even guaranteed; in the olden days it was just a permitted optimisation. Note that it's permitted even if the constructor has side effects (e.g. output), which is quite unusual for C++.</p>\n\n<p>But there is nothing wrong with your code, which is indeed correctly poised to use the move constructor. The code would not compile otherwise, as elision is only permitted when the move <em>could</em> have been performed.</p>\n"}], "owner": {"reputation": 40, "user_id": 10134007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e3fe83deb6fe453681842339465042?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Freeman", "link": "https://stackoverflow.com/users/10134007/eric-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 51522127, "answer_count": 1, "score": 1, "last_activity_date": 1532531844, "creation_date": 1532529139, "last_edit_date": 1532531844, "question_id": 51521514, "link": "https://stackoverflow.com/questions/51521514/how-come-the-move-constructor-isnt-called-in-my-code", "title": "How come the move constructor isnt called in my code?", "body": "<pre><code>#include &lt;iostream&gt;\n#include&lt;algorithm&gt;\n\ntemplate&lt;class T&gt;\nclass Matrix {\n    std::pair&lt;unsigned int,unsigned int&gt; dim;\n    T* elem;\npublic:\n    Matrix(unsigned int d1, unsigned int d2) :\n        dim{std::make_pair(d1,d2)}, elem{new T[d1*d2]} { }\n\n    unsigned int size() const { return (dim.first)*(dim.second); }\n\n    Matrix(Matrix&amp;&amp; a){\n        std::cout&lt;&lt;\"move constructor\";\n        elem = a.elem;\n        a.elem =nullptr;\n        dim.first = a.dim.first+7;\n        dim.second = a.dim.second;\n        a.dim.first=0;\n        a.dim.second=0;\n    }\n\n    Matrix&amp; operator=(Matrix&amp;&amp; a){\n        std::cout&lt;&lt;\"move operator=\";\n        elem = a.elem;\n        a.elem =nullptr;\n        dim.first = a.dim.first;\n        dim.second = a.dim.second;\n        a.dim.first=0;\n        a.dim.second=0;\n        return *this;\n    }\n\n    ~Matrix() { delete[] elem; }\n};\n\nusing namespace std;\n\nint main() {\n    Matrix&lt;unsigned int&gt; bob = Matrix&lt;unsigned int&gt;(5,5);\n    Matrix&lt;unsigned int&gt; bob2(Matrix&lt;unsigned int&gt;(5,5));\n    return 0;\n}//no output\n</code></pre>\n\n<p>I'm expecting it to print \"move constructor\" and \"move operator=\"\nBut it prints neither of them.</p>\n\n<p>Matrix(5,5) doesnt have a name so i assume its rvalue, thus im expecting <code>Matrix&lt;unsigned int&gt; bob = Matrix&lt;unsigned int&gt;(5,5);</code> to call the move constructor</p>\n"}, {"tags": ["c++", "c", "visual-studio"], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 1, "last_activity_date": 1532531837, "creation_date": 1532531837, "answer_id": 51522448, "question_id": 51521356, "link": "https://stackoverflow.com/questions/51521356/multiple-dllmain-functions/51522448#51522448", "title": "Multiple DLLMain functions", "body": "<p>Rename one of the <code>DLLMain</code> functions to something else (I'll call it <code>CDLLMain</code>), then call that renamed function from the other <code>DLLMain</code>.  Care must be taken when deciding where to make the call to <code>CDLLMain</code> (first thing in <code>DLLMain</code>, last before returning (if safe to do so), or somewhere in the middle), in handling the return value from it (can you continue in <code>DLLMain</code> or do you need to return), and potential duplicated effort in the two <code>DLLMain</code> functions.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1532532430, "creation_date": 1532532430, "answer_id": 51522655, "question_id": 51521356, "link": "https://stackoverflow.com/questions/51521356/multiple-dllmain-functions/51522655#51522655", "title": "Multiple DLLMain functions", "body": "<p>If you cannot change the C source create a second DLL project and have your C++-based DLL depend on that second library. Each DLL can have a DllMain of its own. You could even use forwarding exports so that it appears that your C++ DLL exports the symbols from the secondary library.</p>\n\n<p>A forwarding export is done with the following in your library's .DEF file:</p>\n\n<pre><code>EXPORTS\nEntryName=realldll.RealEntryName\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 7698505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921fa549ec6ecc570361422e40b0f3bc?s=128&d=identicon&r=PG&f=1", "display_name": "user7698505", "link": "https://stackoverflow.com/users/7698505/user7698505"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532532430, "creation_date": 1532528687, "last_edit_date": 1532528991, "question_id": 51521356, "link": "https://stackoverflow.com/questions/51521356/multiple-dllmain-functions", "title": "Multiple DLLMain functions", "body": "<p>I have a C++ program that has a <code>DLLMain</code> function that runs some code when this program (which is actually a DLL) is loaded by another one. This is working fine.</p>\n\n<p>Now, when I compile this same C++ program this time including an <code>.obj</code> file (made from C code) that already has a <code>DLLMain</code> function defined, the compiler (in this case, VS2010 for Windows) complains that the <code>DLLMain</code> is already defined.</p>\n\n<p>Without using the linker flag <code>/FORCE:MULTIPLE</code> how can one have both <code>DLLMain</code> functions (defined in the C and the C++ programs) coexisting and running in the same final DLL?</p>\n\n<p>FYI, in GCC for Linux using <code>static void __attribute__((constructor)) _my_initializer(void)</code> works fine (i.e. both initializers can coexist in the same final <code>.so</code> file and run).</p>\n"}, {"tags": ["c++", "stl", "queue", "priority-queue"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1532528291, "post_id": 51521098, "comment_id": 90011190, "body": "Perhaps it&#39;s because, in English, you can be at the front of a queue and you can be a top priority but you can&#39;t be at the top of the queue or front-most priority."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1532528505, "post_id": 51521098, "comment_id": 90011338, "body": "Probably simply because those data structures, although similar in name, have different established terminology for the same operation. Compare for example wikipedia: <a href=\"https://en.wikipedia.org/wiki/Queue_(abstract_data_type)\" rel=\"nofollow noreferrer\">Queue</a> uses &#39;front&#39; while <a href=\"https://en.wikipedia.org/wiki/Priority_queue\" rel=\"nofollow noreferrer\">Priority queue</a> uses &#39;top&#39;. &quot;Why the <i>terminology</i> is different&quot; is a question about etymology, rather than API design."}, {"owner": {"reputation": 459, "user_id": 7123166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkq79.png?s=128&g=1", "display_name": "Ankur S", "link": "https://stackoverflow.com/users/7123166/ankur-s"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1532534453, "post_id": 51521098, "comment_id": 90015363, "body": "@user2079303 not necessarily, names are a fundamental part of api design and consistency in naming i feel is important as well. If they are named differently then they should have a difference in function"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1532534587, "post_id": 51521098, "comment_id": 90015437, "body": "@AnkurS consistency between API naming and commonly used terminology is in my opinion more important than consistency between naming of different types even within the same API."}, {"owner": {"reputation": 459, "user_id": 7123166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkq79.png?s=128&g=1", "display_name": "Ankur S", "link": "https://stackoverflow.com/users/7123166/ankur-s"}, "edited": false, "score": 0, "creation_date": 1532534744, "post_id": 51521098, "comment_id": 90015520, "body": "But we arent consistent in our commonly used terminology, for example the &quot;top&quot; of a heap is often called its root for example on <a href=\"https://www.geeksforgeeks.org/?p=26851\" rel=\"nofollow noreferrer\">geeksforgeeks.org/?p=26851</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1532535548, "post_id": 51521098, "comment_id": 90015932, "body": "@AnkurS Is there a name in the standard library which refers to the &quot;top&quot; of a heap? I know there is <code>std::pop_heap</code>, but that doesn&#39;t mention &quot;top&quot;, which is the element being popped."}, {"owner": {"reputation": 459, "user_id": 7123166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkq79.png?s=128&g=1", "display_name": "Ankur S", "link": "https://stackoverflow.com/users/7123166/ankur-s"}, "edited": false, "score": 0, "creation_date": 1532592734, "post_id": 51521098, "comment_id": 90035594, "body": "no not really, I havent found any at least"}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 2, "last_activity_date": 1532528346, "creation_date": 1532528346, "answer_id": 51521248, "question_id": 51521098, "link": "https://stackoverflow.com/questions/51521098/why-does-queue-have-front-but-priority-queue-has-top-in-stl/51521248#51521248", "title": "Why does queue have front but priority queue has top in stl?", "body": "<p>The <code>priority_queue</code> container adaptor is a convenience wrapper for the standard library's heap algorithms, using a sequence container as a classic binary heap. The name <code>top</code> likely reflects this association; we speak of the \"top\" of a heap, since we visualize it as a heap-ordered binary tree, with the element of greatest priority at the root (top).</p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 2, "last_activity_date": 1532530104, "creation_date": 1532530104, "answer_id": 51521842, "question_id": 51521098, "link": "https://stackoverflow.com/questions/51521098/why-does-queue-have-front-but-priority-queue-has-top-in-stl/51521842#51521842", "title": "Why does queue have front but priority queue has top in stl?", "body": "<p>Yes that's the point.</p>\n\n<p>These are two different adapters. They \"adapt\" an underlying container to have a specific interface. These two classes \"define\" the interface that can then used by algorithms.</p>\n\n<p>Why that terminology?</p>\n\n<ul>\n<li>Well a queue has a <code>front</code> and <code>back</code>.  </li>\n<li>There is not requirement for a priority to queue to get the least prioritized element; it just has the most prioritized element. So I suppose you could have just a <code>front</code> but probably to differentiate it from queue they choose <code>top</code>. It probably has something to do with the implementation (as it is almost definitely a heap underneath the covers which just has a <code>top</code>).</li>\n</ul>\n"}], "owner": {"reputation": 459, "user_id": 7123166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkq79.png?s=128&g=1", "display_name": "Ankur S", "link": "https://stackoverflow.com/users/7123166/ankur-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1532530104, "creation_date": 1532527939, "question_id": 51521098, "link": "https://stackoverflow.com/questions/51521098/why-does-queue-have-front-but-priority-queue-has-top-in-stl", "title": "Why does queue have front but priority queue has top in stl?", "body": "<p>Both are container adaptors and both are defined in the header <code>&lt;queue&gt;</code> still they both have different interfaces to access the 'first' element. I can understand the lack of a <code>back</code> due to the constraints of the data structure but naming <code>front</code> differently confuses me.</p>\n"}, {"tags": ["c++", "c++17", "move-semantics"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1532528123, "post_id": 51521031, "comment_id": 90011061, "body": "You have to do <code>return { true, std::move(vec) };</code>."}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1532528170, "post_id": 51521031, "comment_id": 90011104, "body": "Yup, this is required here to be sure that the vector will be moved. But compilers are mostly smart enough to optimize the copy away"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1532528894, "post_id": 51521031, "comment_id": 90011619, "body": "@bartop: Compilers are <i>not allowed</i> to &quot;optimize the copy away&quot;."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1532529102, "post_id": 51521031, "comment_id": 90011768, "body": "@NicolBolas Actually, they are allowed to do <i>anything</i>, as long as the observable behaviour does not change. Would be creating a copy observable (provided there are no observable side effects in constructor or destructor)?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532529166, "post_id": 51521031, "comment_id": 90011811, "body": "@Aconcagua: Yes, since the <code>allocator::construct&#47;destruct</code> and the copy constructor of the elements of <code>vector</code> are all observable side effects."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1532529599, "post_id": 51521031, "comment_id": 90012138, "body": "@NicolBolas I see, have overseen OS, which can observe: More memory requested, data in memory changes. That&#39;s the point, isn&#39;t it? Or is there even more involved?"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532528802, "post_id": 51521254, "comment_id": 90011558, "body": "Perhaps worth noting that in the &quot;avoid moving&quot; variant, the trailing return type <i>can</i> be omitted entirely..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532528966, "post_id": 51521254, "comment_id": 90011673, "body": "One-liner variant: <code>return std::make_tuple(true, std::vector&lt;int&gt;({1, 2}));</code> not sure, now, if any moving involved on <i>constructing</i> the return type, though..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532531759, "post_id": 51521254, "comment_id": 90013701, "body": "The more interesting point of my one-liner, though, is if I reintroduced moving - which we originally wanted to avoid, i. e. chances are that we cannot use this construct for given purpose..."}, {"owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532532747, "post_id": 51521254, "comment_id": 90014389, "body": "Thanks a lot, a very sharp explanation. I tested all the four versions both with GCC and MSVC, the behavior was the expected one.The one-liner of @Aconcagua is the same as the version with std::move (a part the different constructor)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 22, "last_activity_date": 1532528563, "last_edit_date": 1532528563, "creation_date": 1532528356, "answer_id": 51521254, "question_id": 51521031, "link": "https://stackoverflow.com/questions/51521031/return-stdtuple-and-move-semantics-copy-elision/51521254#51521254", "title": "Return std::tuple and move semantics / copy elision", "body": "<blockquote>\n  <p>In the return statement is <code>vec</code> considered an xvalue or prvalue and therefore moved or copy elided?</p>\n</blockquote>\n\n<p><code>vec</code> is <em>always</em> an lvalue. Even in the simple case:</p>\n\n<pre><code>std::vector&lt;int&gt; factory() {\n    std::vector&lt;int&gt; vec;\n    return vec;\n}\n</code></pre>\n\n<p>That is <em>still</em> returning an lvalue. It's just that we have <a href=\"http://eel.is/c++draft/class.copy.elision#1\" rel=\"noreferrer\">special rules</a> that say that we just ignore the copy in this case when we're returning the name of an automatic object (and another <a href=\"http://eel.is/c++draft/class.copy.elision#3\" rel=\"noreferrer\">special rule</a> in the case that copy elision doesn't apply, but we still try to move from lvalues).</p>\n\n<p>But those special rules <em>only</em> apply to the <code>return object;</code> case, they don't apply to the <code>return {1, object};</code> case, no matter how similar it might look. In your code here, that would do a copy, because that's what you asked for. If you want to do a move, you must do:</p>\n\n<pre><code>return {1, std::move(object)};\n</code></pre>\n\n<p>And in order to avoid the move, you must do:</p>\n\n<pre><code>auto factory() -&gt; std::tuple&lt;bool, std::vector&lt;int&gt;&gt;\n{\n    std::tuple&lt;bool, std::vector&lt;int&gt;&gt; t;\n\n    auto&amp; [b, vec] = t;\n    b = true;\n    vec.push_back(1);\n    vec.push_back(2);\n    return t;\n}\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 2, "accepted_answer_id": 51521254, "answer_count": 1, "score": 16, "last_activity_date": 1532528563, "creation_date": 1532527762, "question_id": 51521031, "link": "https://stackoverflow.com/questions/51521031/return-stdtuple-and-move-semantics-copy-elision", "title": "Return std::tuple and move semantics / copy elision", "body": "<p>I have the following factory function:</p>\n\n<pre><code>auto factory() -&gt; std::tuple&lt;bool, std::vector&lt;int&gt;&gt;\n{\n    std::vector&lt;int&gt; vec;\n    vec.push_back(1);\n    vec.push_back(2);\n\n    return { true, vec };\n}\n\nauto [b, vec] = factory();\n</code></pre>\n\n<p>In the return statement is <code>vec</code> considered an <code>xvalue</code> or <code>prvalue</code> and therefore moved or copy elided?</p>\n\n<p>My guess is no, because the compiler, when list-initializing the <code>std::tuple</code> in the return statement, still doesn't know that vec is going to be destroyed. So maybe an explicit std::move is required:</p>\n\n<pre><code>auto factory() -&gt; std::tuple&lt;bool, std::vector&lt;int&gt;&gt;\n{\n    ...\n    return { true, std::move(vec) };\n}\n\nauto [b, vec] = factory();\n</code></pre>\n\n<p>Is it that really required?</p>\n"}, {"tags": ["c++", "boost", "asio"], "answers": [{"comments": [{"owner": {"reputation": 768, "user_id": 1056837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db94c24e963c450aebef0222366e43?s=128&d=identicon&r=PG&f=1", "display_name": "user1056837", "link": "https://stackoverflow.com/users/1056837/user1056837"}, "edited": false, "score": 0, "creation_date": 1532537816, "post_id": 51522957, "comment_id": 90017016, "body": "Thank you for the answer. I&#39;m basically implementing a test. For this purpose, I do <code>io_context.run_for()</code> and then I want to see that handler was called with <code>connection_aborted</code>. That&#39;s it. And what do you think about question#2?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 768, "user_id": 1056837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db94c24e963c450aebef0222366e43?s=128&d=identicon&r=PG&f=1", "display_name": "user1056837", "link": "https://stackoverflow.com/users/1056837/user1056837"}, "edited": false, "score": 0, "creation_date": 1532538620, "post_id": 51522957, "comment_id": 90017433, "body": "The <code>aborted</code> case can be triggered by canceling the particular service object (so like a timer or socket)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1532533428, "creation_date": 1532533428, "answer_id": 51522957, "question_id": 51520716, "link": "https://stackoverflow.com/questions/51520716/how-to-call-a-handler/51522957#51522957", "title": "How to call a handler?", "body": "<p>By definition, <code>io_context::stop</code> prevents the event loop from executing other handlers. So there's no way to get the exit code into the handler, because it doesn't get invoked.</p>\n\n<p>You probably want to have a \"soft-stop\" function instead, where you stop admitting new async tasks to the io_context and optionally cancel any pending operations.</p>\n\n<p>If pending operations could take too long, you will want to add a deadline timer that forces the cancellation at some threshold time interval.</p>\n\n<p>The usual way to make the <code>run</code> loop exit is by releasing a <code>work</code> object. See <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost_asio/reference/io_context__work.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_67_0/doc/html/boost_asio/reference/io_context__work.html</a> </p>\n"}], "owner": {"reputation": 768, "user_id": 1056837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db94c24e963c450aebef0222366e43?s=128&d=identicon&r=PG&f=1", "display_name": "user1056837", "link": "https://stackoverflow.com/users/1056837/user1056837"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 51522957, "answer_count": 1, "score": 1, "last_activity_date": 1532533428, "creation_date": 1532526886, "question_id": 51520716, "link": "https://stackoverflow.com/questions/51520716/how-to-call-a-handler", "title": "How to call a handler?", "body": "<p>I don't understand how I could return handle in case the <code>io_context</code> was stopped. Minimum example:</p>\n\n<pre><code>void my_class::async_get_one_scan(\n    std::function&lt;void(const boost::system::error_code&amp; ec, \n                       std::shared_ptr&lt;my_chunked_packet&gt;)&gt; handler)\n{\n    asio::spawn(strand_, [this, handler] (asio::yield_context yield)\n    {\n        const auto work = boost::asio::make_work_guard(io_service_);\n        my_chunk_buffer chunks;\n\n        while (!chunks.full()) {\n            std::array&lt;uint8_t, 1000&gt; datagram;\n            boost::system::error_code ec;\n            auto size = socket_.async_receive(asio::buffer(datagram), yield[ec]);\n\n            if (!ec)\n                process_datagram(datagram, size, chunks);\n            else {\n                handler(ec, nullptr);\n                return;\n            }\n        }\n\n        io_service_.post(std::bind(handler, boost::system::error_code, chunks.packet()));\n    });\n}\n</code></pre>\n\n<p>Debug asio output:</p>\n\n<pre><code>@asio|1532525798.533266|6*7|strand@01198ff0.dispatch\n@asio|1532525798.533266|&gt;7|\n@asio|1532525798.533266|&gt;0|\n@asio|1532525798.533266|0*8|socket@008e345c.async_receive\n@asio|1532525798.533266|&lt;7|\n@asio|1532525798.533266|&lt;6|\n@asio|1532525799.550640|0|socket@008e34ac.close\n@asio|1532525799.550640|0|socket@008e345c.close\n@asio|1532525799.551616|~8|\n</code></pre>\n\n<p>So the last <code>async_receive() #8</code> is created, after <code>|&lt;6|</code> <code>io_context.stop()</code> is called  and then I have no idea how to get the <code>error_code</code> from <code>yield_context</code> to call the handler.</p>\n\n<p>question#2 is it even a correct way of async reading of chunks of data to collect the whole packet?</p>\n"}, {"tags": ["c++", "lua", "require"], "comments": [{"owner": {"reputation": 3515, "user_id": 3574628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5BJ2.jpg?s=128&g=1", "display_name": "luther", "link": "https://stackoverflow.com/users/3574628/luther"}, "edited": false, "score": 1, "creation_date": 1532544676, "post_id": 51520697, "comment_id": 90020340, "body": "Your custom <code>require</code> function needs to return the module."}], "answers": [{"tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": true, "score": 1, "last_activity_date": 1532556424, "creation_date": 1532556424, "answer_id": 51528364, "question_id": 51520697, "link": "https://stackoverflow.com/questions/51520697/crashes-when-calling-lua-getfield-after-overriding-the-require/51528364#51528364", "title": "Crashes when calling `lua_getfield()` after overriding the require", "body": "<p>I forgot to return the module table from overridden <code>require</code> function.  Sorry about that.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"lua.hpp\"\n\nint main() {\n    lua_State *L = luaL_newstate();\n    luaL_openlibs(L);\n    lua_settop(L, 0);\n    luaL_dostring(L, \"local require_original = require\\n\"\n                     \"function require(name, ...)\\n\"\n                         \"current_module = name\\n\"\n                         \"local val = table.pack(require_original(name, ...))\\n\"\n                         \"current_module = nil\\n\"\n                         \"return table.unpack(val,1,val.n)\\n\"\n                     \"end\\n\"); //if I comment out this chunk, it works fine\n    luaL_dostring(L, \"package.preload['test'] = function ()\\n\"\n                         \"local test = {}\\n\"\n                         \"print('While loading:', current_module)\\n\"\n                         \"function test.update() print('Updated!') end\\n\"\n                         \"return test\\n\"\n                     \"end\\n\");\n    lua_getglobal(L, \"require\");\n    lua_pushstring(L, \"test\");\n    if (lua_pcall(L, 1, LUA_MULTRET, 0))\n    {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n        lua_pop(L, 1);\n    }\n    int top = lua_gettop(L);\n    lua_getfield(L, -1, \"update\"); //crashes here\n    if (lua_isfunction(L, -1))\n    {\n        lua_pushnil(L);\n        if (lua_pcall(L, 1, LUA_MULTRET, 0))\n        {\n            std::cout &lt;&lt; \"Error: \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n            lua_pop(L, 1);\n        }\n    }\n    lua_close(L);\n}\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ clang++ -Wall -Wextra -Wpedantic -I /usr/include/lua5.2 test.cpp -llua5.2\ntest.cpp:28:9: warning: unused variable 'top' [-Wunused-variable]\n    int top = lua_gettop(L);\n        ^\n1 warning generated.\n$ ./a.out \nWhile loading:  test\nUpdated!\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 51528364, "answer_count": 1, "score": 3, "last_activity_date": 1532556424, "creation_date": 1532526844, "question_id": 51520697, "link": "https://stackoverflow.com/questions/51520697/crashes-when-calling-lua-getfield-after-overriding-the-require", "title": "Crashes when calling `lua_getfield()` after overriding the require", "body": "<p>This question is related to @Henri_Menke's answer from this question : <a href=\"https://stackoverflow.com/questions/51510308/how-to-get-preloaded-module-name-in-c\">How to get preloaded module name in C++</a></p>\n\n<p>I'm trying to override the <code>require</code> function with my own version so I can get the preloaded module name inside Lua script.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include \"lua.hpp\"\n\nvoid main()\n{\n    lua_State *L = luaL_newstate();\n    luaL_openlibs(L);\n    lua_settop(L, 0);\n    luaL_dostring(L, \"local require_original = require\\n\"\n                     \"function require(name, ...)\\n\"\n                         \"current_module = name\\n\"\n                         \"require_original(name, ...)\\n\"\n                         \"current_module = nil\\n\"\n                     \"end\\n\"); //if I comment out this chunk, it works fine\n    luaL_dostring(L, \"package.preload['test'] = function ()\\n\"\n                         \"local test = {}\\n\"\n                         \"print('While loading:', current_module)\\n\"\n                         \"function test.update() print('Updated!') end\\n\"\n                         \"return test\\n\"\n                     \"end\\n\");\n    lua_getglobal(L, \"require\");\n    lua_pushstring(L, \"test\");\n    if (lua_pcall(L, 1, LUA_MULTRET, 0))\n    {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n        lua_pop(L, 1);\n    }\n    int top = lua_gettop(L);\n    lua_getfield(L, -1, \"update\"); //crashes here\n    if (lua_isfunction(L, -1))\n    {\n        lua_pushnil(L);\n        if (lua_pcall(L, 1, LUA_MULTRET, 0))\n        {\n            std::cout &lt;&lt; \"Error: \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n            lua_pop(L, 1);\n        }\n    }\n    lua_close(L);\n}\n</code></pre>\n\n<p>However, it crashes when calling <code>lua_getfield(L, -1, \"update\");</code>. </p>\n\n<p>And it no longer crashes when I comment out the first chunk of Lua script(first <code>luaL_dostring</code>).</p>\n\n<p>I don't understand why it crashes if I use my own version of <code>require</code>. </p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["android", "c++", "opencv", "opencv4android"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4530384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8c62cc5a2a6ba948a17aeab0e7b9b3e1?s=128&d=identicon&r=PG&f=1", "display_name": "Colmike", "link": "https://stackoverflow.com/users/4530384/colmike"}, "edited": false, "score": 0, "creation_date": 1532606435, "post_id": 51522556, "comment_id": 90044100, "body": "Thank you, your suggestion pointed me in the right direction. I did not know that I had to release the memory, and the error report wasn&#39;t very clear."}], "tags": [], "owner": {"reputation": 246, "user_id": 1703217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd379f78c776c721b8a392145093d1fc?s=128&d=identicon&r=PG", "display_name": "tenta4", "link": "https://stackoverflow.com/users/1703217/tenta4"}, "is_accepted": true, "score": 1, "last_activity_date": 1532532126, "creation_date": 1532532126, "answer_id": 51522556, "question_id": 51520531, "link": "https://stackoverflow.com/questions/51520531/opencv-native-android-cvtcolor-crash/51522556#51522556", "title": "OpenCV Native Android cvtColor crash", "body": "<p>For second case you have memory leak and this leads to leak<br>\n<code>~ 3 sec * fps * frame_resolution * 4 bytes</code></p>\n\n<p>I think crash is happening after the memory is full.</p>\n\n<p>You need to call <code>result.release();</code> somewhere after each <code>exampleProcessImage2</code> call</p>\n"}], "owner": {"reputation": 75, "user_id": 4530384, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8c62cc5a2a6ba948a17aeab0e7b9b3e1?s=128&d=identicon&r=PG&f=1", "display_name": "Colmike", "link": "https://stackoverflow.com/users/4530384/colmike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 51522556, "answer_count": 1, "score": 0, "last_activity_date": 1532532126, "creation_date": 1532526386, "question_id": 51520531, "link": "https://stackoverflow.com/questions/51520531/opencv-native-android-cvtcolor-crash", "title": "OpenCV Native Android cvtColor crash", "body": "<p>I need to convert an image to grayscale and then back to RGBA to be able to draw in it.</p>\n\n<p>Currently, I am doing it with two different cvtColor calls, which works fine, although the performance is not good in Android (RGBA -> GRAY -> RGBA).</p>\n\n<p>Getting a gray image from the camera directly is faster and only having to do one cvtColor call makes a huge difference (GRAY -> RGBA).</p>\n\n<p>The problem is that the second method makes the app close after a few seconds. The logcat in Android Studio does not show a crash for the app, but it shows some errors with the No Filters option selected. Here is the log <a href=\"https://pastebin.com/jA7jFSvu\" rel=\"nofollow noreferrer\">https://pastebin.com/jA7jFSvu</a>. It seems to point to a problem with OpenCV's camera.</p>\n\n<p>Below are the two different pieces of code.</p>\n\n<pre><code>public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {\n\n    // Method 1 - works\n    cameraImage = inputFrame.rgba();\n    native.exampleProcessImage1(cameraImage.getNativeObjAddr(), cameraImage.getNativeObjAddr());\n\n    return cameraImage;\n\n    // Method 2 - app closes after a few seconds\n    cameraImage = inputFrame.gray();\n    Mat result = new Mat();\n    native.exampleProcessImage2(cameraImage.getNativeObjAddr(), result.getNativeObjAddr());\n\n    return result;\n}\n</code></pre>\n\n<p>And this is my code in C++:</p>\n\n<pre><code>void Java_com_example_native_exampleProcessImage1(JNIEnv *env, jobject instance, jlong sourceImage, jlong destImage) {\n    // works!\n    Mat &amp;src = * ((Mat *) sourceImage);\n    Mat &amp;dest = * ((Mat *) destImage);\n    Mat pivot;\n\n    // src is RGBA\n    cvtColor(src, pivot, COLOR_RGBA2GRAY);\n    cvtColor(pivot, dest, COLOR_GRAY2RGBA);\n    // dest is RGBA\n\n    // process\n}\n\nvoid Java_com_example_native_exampleProcessImage2(JNIEnv *env, jobject instance, jlong sourceImage, jlong destImage) {\n    // does not work\n    Mat &amp;src = * ((Mat *) sourceImage);\n    Mat &amp;dest = * ((Mat *) destImage);\n\n    // src is GRAY\n    cvtColor(src, dest, COLOR_GRAY2RGBA);\n    // dest is RGBA\n\n    // process\n}\n</code></pre>\n\n<p>This works as expected on Linux and OpenCV.</p>\n\n<p>Do you know what I am doing wrong? Is there another way to achieve the same? Performance is key, in particular for Android devices.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["java", "c++", "kotlin", "java-native-interface", "javacpp"], "comments": [{"owner": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "edited": false, "score": 0, "creation_date": 1545652516, "post_id": 51520009, "comment_id": 94669706, "body": "Although we can use JNI for this, you probably want to set the <code>long address</code> field from Java. We can set that <code>Pointer.address</code> by creating a subclass, of <code>Mat</code>, in this case. Does that sound like what you need to do?"}, {"owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "reply_to_user": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "edited": false, "score": 0, "creation_date": 1545653657, "post_id": 51520009, "comment_id": 94670029, "body": "As I wrote in edit, I solved the problem an other way. But the memory management is still an issue. If one call deallocate often the code is much faster than letting the Deallocator do its job. The new PointerScope is great\u2019ish. It also register and free static values lazy created by the code."}, {"owner": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "edited": false, "score": 0, "creation_date": 1545698502, "post_id": 51520009, "comment_id": 94679934, "body": "Yeah, it&#39;s not perfect, there&#39;s no reliable way to know when something gets assigned to a field or something, but we can easily call <code>PointerScope.detach()</code> manually and it works well enough, for example, with the callbacks in <a href=\"https://github.com/bytedeco/javacv/blob/master/src/main/java/org/bytedeco/javacv/FFmpegFrameGrabber.java\" rel=\"nofollow noreferrer\">github.com/bytedeco/javacv/blob/master/src/main/java/org/&hellip;</a> . If there&#39;s anything that you still need an answer for though, let me know!"}], "owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532607045, "creation_date": 1532524960, "last_edit_date": 1532607045, "question_id": 51520009, "link": "https://stackoverflow.com/questions/51520009/use-org-bytedeco-javacpp-objects-in-a-jni-context", "title": "Use org.bytedeco.javacpp objects in a JNI context", "body": "<p>I'm currently writing a JNI accelerator library to replace Java methods on some systems (Linux x64 and macOS).</p>\n\n<p>I have a working code written in Kotlin/Java with <a href=\"https://github.com/bytedeco/javacpp-presets/tree/master/opencv\" rel=\"nofollow noreferrer\">JavaCV 3.4.2</a></p>\n\n<p>I've created a JNI library that do the same job to avoid multiple back and forth between JVM and JNI.</p>\n\n<p>Example:</p>\n\n<p>Kotlin side (JVM + JavaCV) without acceleration :</p>\n\n<pre><code>override fun process(image: Mat): FeaturesDetectorResult {\n    val faceDetection = Dlib.faceDetection(image)\n    ...\n}\n</code></pre>\n\n<p>JNI accelerator part:</p>\n\n<p>Kotlin</p>\n\n<pre><code>@ByVal\nprotected external fun Process(imagePtr: Long, lines: List&lt;opencv_core.Rect&gt;): opencv_core.Mat?;\n\n// method of class overriding the native method\noverride fun process(image: opencv_core.Mat): FeaturesDetectorResult {\n    val lines = ArrayList&lt;opencv_core.Rect&gt;()\n    val rotatedMat = Process(image.address(), lines)\n    return FeaturesDetectorResult(rotatedMat, lines)\n}\n</code></pre>\n\n<p>C++</p>\n\n<pre><code>JNIEXPORT jlong JNICALL Java_fr_tessi_bmd_image_accel_MserFeaturesDetectorNative_Process\n  (JNIEnv *env, jobject self, jlong imagePtr, jobject list) {\n</code></pre>\n\n<p>At the end of my C++ method, I am stuck in converting a native <code>cv::Mat</code> to its java counterpart <code>opencv_core.Mat</code> (no constructor with native address is present).</p>\n\n<p>I've looked at the sources generated by javacpp and it seems that native objects are treated as <code>jlong</code>. All my tests this way lead to a crash.</p>\n\n<p>Anybody knows how to pass <code>org.bytedeco.javacpp</code> objects back and forth with a homemade JNI library ?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I've found a partial workaround to create <code>opencv_mat.Mat</code> from <code>cv::Mat</code>:</p>\n\n<pre><code>//Safety checks removed for simplicity\n#define ptr_to_jlong(a) ((jlong)(uintptr_t)(a))\nMat* toReturnToJava;\njclass pointerClass = env-&gt;FindClass(\"org/bytedeco/javacpp/Pointer\"); \njfieldID addressFld = env-&gt;GetFieldID(pointerClass, \"address\", \"J\");\njobject pointerObj = env-&gt;AllocObject(pointerClass);\nenv-&gt;SetLongField(pointerObj, addressFld, ptr_to_jlong(toReturnToJava));\n</code></pre>\n\n<p>The <code>Mat</code> is returned to Java as a <code>jlong</code> while the Java side declares the return value as <code>opencv.Mat</code>.</p>\n\n<p>The same type of code does not seem to work for Rect (I used the constructor Rect(x, y, w, h) instead).</p>\n"}, {"tags": ["c++", "c++11", "templates", "c++14"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1532526091, "post_id": 51519700, "comment_id": 90009543, "body": "Adding const to a reference never has any effect, because references can&#39;t be rebound anyway.  Reference collapsing doesn&#39;t reach inside and change modifiers on the referent."}, {"owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1532528834, "post_id": 51519700, "comment_id": 90011580, "body": "Ben, appreciate if you could make some more brief about it, I couldn&#39;t get that  &quot;references can&#39;t be rebound&quot; statement"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532529028, "post_id": 51519700, "comment_id": 90011720, "body": "By no rebound of reference, <code>int i = 42; int&amp; ref = i; int j = 0;</code> you cannot make <code>ref</code>points to <code>j</code> as you might have do with pointer (<code>int* p = &amp;i; p = &amp;j;</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 2624217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89ca753aeb8b7c492f2a18e7f870fdc?s=128&d=identicon&r=PG", "display_name": "Aldarrion", "link": "https://stackoverflow.com/users/2624217/aldarrion"}, "edited": false, "score": 1, "creation_date": 1532528497, "post_id": 51520397, "comment_id": 90011334, "body": "Why does <code>const T&amp;</code> (= <code>const F&amp; &amp;</code>) = <code>F&amp;</code>? Is it part of the reference collapsing rules or how does this work?"}, {"owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "edited": false, "score": 0, "creation_date": 1532528573, "post_id": 51520397, "comment_id": 90011387, "body": "True, this is what I&#39;ve thought, since we are explicitly mentioning what references to take we need either remove_ref... Or decay_t on type T  in this case"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 306, "user_id": 2624217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89ca753aeb8b7c492f2a18e7f870fdc?s=128&d=identicon&r=PG", "display_name": "Aldarrion", "link": "https://stackoverflow.com/users/2624217/aldarrion"}, "edited": false, "score": 2, "creation_date": 1532528833, "post_id": 51520397, "comment_id": 90011579, "body": "@Aldarrion: see <a href=\"https://www.ibm.com/support/knowledgecenter/SSGH3R_13.1.3/com.ibm.xlcpp1313.aix.doc/language_ref/reference_collapsing.html\" rel=\"nofollow noreferrer\">reference_collapsing</a> for example."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 306, "user_id": 2624217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89ca753aeb8b7c492f2a18e7f870fdc?s=128&d=identicon&r=PG", "display_name": "Aldarrion", "link": "https://stackoverflow.com/users/2624217/aldarrion"}, "edited": false, "score": 2, "creation_date": 1532534203, "post_id": 51520397, "comment_id": 90015243, "body": "@Aldarrion Lets use East const to make it easier to understand: <code>const T&amp;</code> --east const--&gt; <code>T const&amp;</code>. now we substitue F&amp;: <code>T const&amp;</code> --substitute F&amp; for T--&gt; <code>F&amp; const&amp;</code>. in plain words its: a reference to a const reference to a F. But a reference itself  is always const, so we can omit that: <code>F &amp; &amp;</code>. now its a reference to a reference to F. and a reference to a reference is just a reference. so its just <code>F&amp;</code>. Overall the table linked by Jarod42 has all the details, just without explainations."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 8, "last_activity_date": 1532534694, "last_edit_date": 1532534694, "creation_date": 1532525973, "answer_id": 51520397, "question_id": 51519700, "link": "https://stackoverflow.com/questions/51519700/const-qualifier-and-forward-reference/51520397#51520397", "title": "Const qualifier and forward reference", "body": "<p>for <code>template &lt;typename T&gt; class lambda_task</code>, with <code>lambda_task&lt;F&amp;&gt;</code>,\nwe have</p>\n\n<ul>\n<li><code>const T&amp;</code> = <code>T const&amp;</code> = <code>F&amp;</code></li>\n<li>and <code>T&amp;&amp;</code> = <code>F&amp;</code>.</li>\n</ul>\n\n<p>You probably want to decay both <code>T</code> to have respectively <code>const F&amp;</code> and <code>F&amp;&amp;</code>:</p>\n\n<pre><code>lambda_task(scheduling_group sg, const std::decay_t&lt;Func&gt;&amp; func) : task(sg), _func(func) {}\n\nlambda_task(scheduling_group sg, std::decay_t&lt;Func&gt;&amp;&amp; func) : task(sg), _func(std::move(func)) {}\n</code></pre>\n"}], "owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 51520397, "answer_count": 1, "score": 7, "last_activity_date": 1532534694, "creation_date": 1532524128, "question_id": 51519700, "link": "https://stackoverflow.com/questions/51519700/const-qualifier-and-forward-reference", "title": "Const qualifier and forward reference", "body": "<p>Have seen this code in the <a href=\"https://github.com/scylladb/seastar/blob/master/core/task.hh\" rel=\"noreferrer\">seastar</a> framework</p>\n\n<pre><code>template &lt;typename Func&gt;\nclass lambda_task final : public task {\n    Func _func;\npublic:\n    lambda_task(scheduling_group sg, const Func&amp; func) : task(sg), \n    _func(func) {}\n    lambda_task(scheduling_group sg, Func&amp;&amp; func) : task(sg), \n    _func(std::move(func)) {}\n    virtual void run_and_dispose() noexcept override {\n        _func();\n        delete this;\n    }\n};\n\ntemplate &lt;typename Func&gt;\ninline std::unique_ptr&lt;task&gt; make_task(Func&amp;&amp; func) {\n    return std::make_unique&lt;lambda_task&lt;Func&gt;&gt;(current_scheduling_group(), \n    std::forward&lt;Func&gt;(func));\n}\n</code></pre>\n\n<p><code>using scheduling_group = int;</code>\n<code>auto current_scheduling_group(){ return int{};}</code>//for simplicity</p>\n\n<p>let us assume I am going to instantiate <code>task</code> like below</p>\n\n<pre><code> auto work = [](){...}\n make_task(work);\n</code></pre>\n\n<p>so since the <code>work</code> is an <code>lvalue</code> <code>make_task(Func&amp;&amp;)</code>-><code>make_task(Func&amp;)</code> and it instantiate <code>lambda_task</code> as <code>lambda_task&lt;Func&amp;&gt;</code> which causes these two ctors</p>\n\n<pre><code>lambda_task(scheduling_group sg, const Func&amp; func)\nlambda_task(scheduling_group sg, Func&amp;&amp; func)\n</code></pre>\n\n<p>to become(I assume it would)</p>\n\n<pre><code>lambda_task(scheduling_group sg, **const Func&amp; func**)\nlambda_task(scheduling_group sg, **Func&amp; func**)\n</code></pre>\n\n<p>the instantiation of <code>lambda_task</code> with <code>work</code> object is throwing a compile-time error</p>\n\n<pre><code>&lt;source&gt;:127:5: error: 'lambda_task&lt;Func&gt;::lambda_task(scheduling_group, Func&amp;&amp;) [with Func = main()::&lt;lambda()&gt;&amp;; scheduling_group = int]' \ncannot be overloaded with 'lambda_task&lt;Func&gt;::lambda_task(scheduling_group, const Func&amp;) [with Func = main()::&lt;lambda()&gt;&amp;; scheduling_group = int]'\n\n     lambda_task(scheduling_group sg, Func&amp;&amp; func) : task(sg), _func(std::move(func)) {}\n\n     ^~~~~~~~~~~\n&lt;source&gt;:126:5: note: previous declaration 'lambda_task&lt;Func&gt;::lambda_task(scheduling_group, const Func&amp;) \n[with Func = main()::&lt;lambda()&gt;&amp;; scheduling_group = int]'\n</code></pre>\n\n<p>and what I did to make it work is I've changed </p>\n\n<pre><code>lambda_task(scheduling_group sg, Func&amp;&amp; func) to\nlambda_task(scheduling_group sg, std::remove_reference_t&lt;Func&gt;&amp;&amp; func)\n</code></pre>\n\n<p>question 1: was I right or wrong? will my change break anything? or it is needed?</p>\n\n<p>I realized that the </p>\n\n<pre><code> lambda_task(scheduling_group sg, const Func&amp; func)#1\n lambda_task(scheduling_group sg, Func &amp;&amp; func)#2\n</code></pre>\n\n<p><code>#1 &amp; #2</code> is conflicting and moreover adding <code>&amp;&amp;</code>to <code>Func</code> doesn't make it as an <code>rvalue</code> as it was reference collapsed to <code>lvalue</code>(so I used std::remove_reference_t )</p>\n\n<p>question 2: \nassume <code>T&amp;&amp;</code> is a forward reference [T=int] and collapsed into <code>T&amp;</code>.\nwhy <code>std::is_same&lt;const int&amp;, const T&amp;&gt;</code> isn't true?</p>\n\n<pre><code>&lt;source&gt;:162:5:   required from 'void maketest(T&amp;&amp;) [with T = int&amp;]'\n&lt;source&gt;:154:18: error: static assertion failed\nstatic_assert(std::is_same&lt;const int&amp;,const T&amp;&gt;::value,\"\");\n</code></pre>\n\n<p>why adding <code>const</code> to a collapsed reference isn't taking any effect?</p>\n\n<p>or my observation is wrong?</p>\n"}, {"tags": ["c++", "google-api", "parameter-passing", "benchmarking", "google-benchmark"], "comments": [{"owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 0, "creation_date": 1532524963, "post_id": 51519376, "comment_id": 90008680, "body": "What arguments do you want to pass to the program? It the arguments are for google benchmark then just call the program and append the arguments for example <code>.&#47;prog_name --benchmark_format=json</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532527013, "post_id": 51519376, "comment_id": 90010232, "body": "Did you read the documentation? What did that tell you?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7035883"}, "reply_to_user": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "edited": false, "score": 0, "creation_date": 1532590839, "post_id": 51519376, "comment_id": 90034587, "body": "@MikevanDyke I want to pass two integer values and a string, because it is meant to be a generic benchmark. I wanna add a chunk size and an iteration count for a loop inside the used function to benchmark and the name of the used function in the benchmark test itself. This way I wanna run single, are modifiable Benchmarks manually trough a go script."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7035883"}, "edited": false, "score": 0, "creation_date": 1532591162, "post_id": 51519376, "comment_id": 90034746, "body": "So far I just copied out the body of the &#39;BENCHMARK_MAIN()&#39; makro (the main method). So now I don&#39;t use the makro anymore but the the body of that, which I modified now to use the first passed Argument and put it into a variable."}, {"owner": {"reputation": 1038, "user_id": 4554650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39c7e41cfd3ecd55c7ef78c3db679dff?s=128&d=identicon&r=PG", "display_name": "Alastair Harrison", "link": "https://stackoverflow.com/users/4554650/alastair-harrison"}, "edited": false, "score": 0, "creation_date": 1593250073, "post_id": 51519376, "comment_id": 110717585, "body": "This approach is now mentioned in the official docs, so it ought to be stable: <a href=\"https://github.com/google/benchmark#using-registerbenchmarkname-fn-args\" rel=\"nofollow noreferrer\">github.com/google/benchmark#using-registerbenchmarkname-fn-a&zwnj;&#8203;rgs</a> You can also pass your args in to <code>benchmark::RegisterBenchmark</code> via <code>-&gt;Arg(...)</code>, rather than using a global variable."}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "is_accepted": false, "score": 3, "last_activity_date": 1532594405, "last_edit_date": 1532594405, "creation_date": 1532593901, "answer_id": 51534388, "question_id": 51519376, "link": "https://stackoverflow.com/questions/51519376/how-to-pass-arguments-to-a-google-benchmark-program/51534388#51534388", "title": "How to pass arguments to a Google Benchmark Program", "body": "<p>Hacking the whole <code>BENCHMARK_MAIN</code> function is of course one way to do it, but IMO it's really cumbersome and really ugly. So I'm just gonna propose a different approach:</p>\n\n<pre><code>// define your chunksize and iteration count combinations here (for i and j) \nstatic void CustomArguments(benchmark::internal::Benchmark* b) {\n  for (int i = 0; i &lt;= 10; ++i)\n    for (int j = 0; j &lt;= 50; ++j)\n      b-&gt;Args({i, j});\n}\n\n// the string (name of the used function is passed later)\nstatic void TestBenchmark(benchmark::State&amp; state, std::string func_name) {\n  // cout for testing purposes\n  std::cout &lt;&lt; state.range(0) /* = i */ &lt;&lt; \" \" &lt;&lt; state.range(1) /* = j */ \n  &lt;&lt; \" \" &lt;&lt; func_name &lt;&lt; std::endl;\n  for (auto _ : state) {\n     // do whatever with i and j and func_name\n  }\n}\n\n// This macro is used to pass the string \"function_name1/2/3\" \n// as a parameter to TestBenchmark\nBENCHMARK_CAPTURE(TestBenchmark, benchmark_name1, \"function_name1\")\n    -&gt;Apply(CustomArguments);\nBENCHMARK_CAPTURE(TestBenchmark, benchmark_name2, \"function_name2\")\n    -&gt;Apply(CustomArguments);\nBENCHMARK_CAPTURE(TestBenchmark, benchmark_name3, \"function_name3\")\n    -&gt;Apply(CustomArguments);\n\nBENCHMARK_MAIN()\n</code></pre>\n\n<p>And then in your go script, you call the benchmark with a regex filter:<br>\n<code>./prog_name --benchmark_filter=InsertRegexFilterHere</code></p>\n\n<p>So for example:<br>\n<code>./prog_name --benchmark_filter=TestBenchmark/benchmark_name2/5/35</code></p>\n\n<p>The above example will call the benchmark and will pass \"function_name2\", 5 and 35 (these are the values for your chunksize and iteration count) and so the output will be something like:</p>\n\n<pre><code>------------------------------------------------------------------------------\nBenchmark                                       Time           CPU Iterations\n------------------------------------------------------------------------------\nTestBenchmark/benchmark_name2/5/35               2 ns          2 ns  308047644\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 3067688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2d00db1dddf1cb645608c7ac1228e0?s=128&d=identicon&r=PG", "display_name": "virttop", "link": "https://stackoverflow.com/users/3067688/virttop"}, "is_accepted": false, "score": 1, "last_activity_date": 1616067189, "creation_date": 1616067189, "answer_id": 66690249, "question_id": 51519376, "link": "https://stackoverflow.com/questions/51519376/how-to-pass-arguments-to-a-google-benchmark-program/66690249#66690249", "title": "How to pass arguments to a Google Benchmark Program", "body": "<p>I would like to extend Mike van Dyke's answer by adding that the library also supports the following:</p>\n<pre><code>static void BM_SetInsert(benchmark::State&amp; state) {\n  std::set&lt;int&gt; data;\n  for (auto _ : state) {\n    state.PauseTiming();\n    data = ConstructRandomSet(state.range(0));\n    state.ResumeTiming();\n    for (int j = 0; j &lt; state.range(1); ++j)\n      data.insert(RandomNumber());\n  }\n}\nBENCHMARK(BM_SetInsert)\n    -&gt;Args({1&lt;&lt;10, 128})\n    -&gt;Args({2&lt;&lt;10, 128})\n    -&gt;Args({4&lt;&lt;10, 128})\n    -&gt;Args({8&lt;&lt;10, 128})\n    -&gt;Args({1&lt;&lt;10, 512})\n    -&gt;Args({2&lt;&lt;10, 512})\n    -&gt;Args({4&lt;&lt;10, 512})\n    -&gt;Args({8&lt;&lt;10, 512});\n</code></pre>\n<p>In your benchmark, <code>state.range(0)</code> and <code>state.range(1)</code> now refers to the first and second argument respectively. See more @ <a href=\"https://github.com/google/benchmark#passing-arguments\" rel=\"nofollow noreferrer\">https://github.com/google/benchmark#passing-arguments</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7035883"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4283, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1616067189, "creation_date": 1532523095, "last_edit_date": 1575578361, "question_id": 51519376, "link": "https://stackoverflow.com/questions/51519376/how-to-pass-arguments-to-a-google-benchmark-program", "title": "How to pass arguments to a Google Benchmark Program", "body": "<p>I have a C++ Google Benchmark Program. It uses Google's <code>BENCHMARK_MAIN()</code> method. Now I call and execute the compiled program with a Go script. Is there a way to pass arguments into my benchmark program? (I know the common way over a main method, but I'm not sure how to do it in Googletest, because it's implemented in <code>benchmark_api.h</code> and I can't just change that.)</p>\n\n<p>Update:</p>\n\n<p>So far I copied out the macro body into my <code>benchmark.cpp</code> and added a line. It is not a nice solution because possible changes from Google on this Macro (like a name changing or an added code line) wouldn't affect my copy. It is working at last.</p>\n\n<pre><code>int main (int argc, char** argv)\n{\n    MyNamespace::conf = {argv[1]};\n    ::benchmark::Initialize (&amp;argc, argv);\n    ::benchmark::RunSpecifiedBenchmarks ();\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14", "generic-programming"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1532522546, "post_id": 51519082, "comment_id": 90007016, "body": "&quot;but that would need me to have a lambda&quot; - You never <i>need</i> a lambda. A lambda is just syntactic sugar for a classical function object. You can always write classical C++98 code to give you the same effect as a lambda (it&#39;s just more verbose)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532524720, "post_id": 51519082, "comment_id": 90008502, "body": "You should provide the code as text within the question, not via external links!"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532527223, "post_id": 51519082, "comment_id": 90010411, "body": "Please have a look at discussion to <a href=\"https://stackoverflow.com/a/51519538/1312382\">this answer</a>, maybe you could be a little bit more precise about what you actually want to achieve?"}, {"owner": {"reputation": 43, "user_id": 6049861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d898fcfccbaf172a41064feefced0b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/6049861/joseph"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532529349, "post_id": 51519082, "comment_id": 90011963, "body": "@Aconcagua - Sure, will post the code within the question from next time.. And yes, as @Jarod42 said, my problem was the use of pointers.. Once I did the changes he suggested, I can now call the functions to the wrapped class without the need to explicitly use <code>operator-&gt;</code> . Thanks"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532534408, "post_id": 51519082, "comment_id": 90015343, "body": "@Joseph And you do add new functions within the wrapper class? Then consider Jarod&#39;s <code>get()</code> approach, it is dangerous to select one or the other variant of <code>print</code> just on the operator being used on the object: <code>wrapper-&gt;print</code> (getting original print) vs. <code>wrapper.print()</code> (getting the changed one). It gets a little more obvious with pointers (<code>(*wrapper)-&gt;print()</code> vs. <code>wrapper-&gt;print()</code>), but I still cannot recommend it..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532534644, "post_id": 51519082, "comment_id": 90015468, "body": "@Joseph And (unless you still want to use the lambdas for something totally different) you can just drop the <code>operator()</code> template, it renders unused now..."}, {"owner": {"reputation": 43, "user_id": 6049861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d898fcfccbaf172a41064feefced0b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/6049861/joseph"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532551022, "post_id": 51519082, "comment_id": 90023105, "body": "@Aconcagua, true.. I have removed that.. Thanks.."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1532523370, "creation_date": 1532523370, "answer_id": 51519476, "question_id": 51519082, "link": "https://stackoverflow.com/questions/51519082/c-generic-wrapper-class-which-adds-extra-processing-for-some-functions/51519476#51519476", "title": "C++ Generic wrapper class which adds extra processing for some functions", "body": "<p>Not exactly giving you the result you wanted, but still relatively cheap (in sense of code necessary to be written): inheritance:</p>\n\n<pre><code>class Wrapped\n{\npublic:\n    void f();\n    void g();\n};\n\nclass Wrapper : private Wrapped\n{\npublic:\n    // replacing Wrapped's f with own variant:\n    void f() { pre(); Wrapped::f(); post(); };\n    // pulling Wrapped's g into public  domain again:\n    using Wrapped::g;\n};\n</code></pre>\n\n<p>So all you have to do is adding the corresponding <code>using</code> declarations. If you now ask: <em>\"Why not inherit publicly, then I don't have to?\"</em>, then consider the following:</p>\n\n<pre><code>Wrapped* w = new Wrapper();\nw-&gt;f(); //Wrapped's version of f will be called, as f in given example is not virtual!\n</code></pre>\n\n<p>Maybe you say <em>\"I won't ever use <code>Wrapped</code> directly.\"</em>. That would work out, but the danger of still using it somewhere and then getting bugs remains immanent with public inheritance...</p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532523722, "post_id": 51519538, "comment_id": 90007846, "body": "If not replacing: (*wrapper)-&gt;print() should work as well, shouldn&#39;t it?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532523851, "post_id": 51519538, "comment_id": 90007941, "body": "@Aconcagua: Yes, added."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532525834, "post_id": 51519538, "comment_id": 90009353, "body": "Still, we&#39;d always use T&#39;s print function. What, if the wrapper shall change print? We&#39;d be able to call both <code>wrapper.print()</code> (changed) and <code>wrapper-&gt;print()</code> (unchanged) then? Don&#39;t want to this comment further... (Side note: any of the <code>-&gt;print()</code> variants don&#39;t use <code>Wrapper</code>&#39;s <code>operator()</code> anyway.)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532526487, "post_id": 51519538, "comment_id": 90009831, "body": "@Aconcagua: As written by OP, <code>wrapper-&gt;f(..)</code> call regular <code>Derived</code> function whereas <code>wrapper.f(..)</code> would add dedicated stuff (per function: <code>wrapper</code> <i>&quot;redefines&quot;</i> <code>prettyPrint</code> but not <code>print</code>) and calling <code>Derived</code> function. If it was generic, I would have <code>wrapper-&gt;f()</code> for extra stuff and <code>wrapper.get().f()</code> for regular call."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1532527167, "post_id": 51519538, "comment_id": 90010365, "body": "<code>.f()</code> and <code>.get().f()</code> at least makes it pretty clear what one is actually calling, in contrast to either using <code>.</code> or <code>-&gt;</code> only. I understood the question such that this should be transparent (always use .f() or -&gt;f(), using the changed variant, if existing, or the original one otherwise. Normally simply solved by inheritance, but from <i>&quot;which is not strictly polymorphic&quot;</i> I concluded that there are non-virtual functions that should be changed as well? Suppose OP should add some details to question..."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1532524209, "last_edit_date": 1532524209, "creation_date": 1532523572, "answer_id": 51519538, "question_id": 51519082, "link": "https://stackoverflow.com/questions/51519082/c-generic-wrapper-class-which-adds-extra-processing-for-some-functions/51519538#51519538", "title": "C++ Generic wrapper class which adds extra processing for some functions", "body": "<p>Your problem is that you use pointers actually.</p>\n\n<p>Currently, instead of </p>\n\n<pre><code>wrapper-&gt;operator-&gt;()-&gt;print();\n</code></pre>\n\n<p>you might write</p>\n\n<pre><code>(*wrapper)-&gt;print();\n</code></pre>\n\n<p>If you replace unneeded pointers</p>\n\n<pre><code>wrap&lt;Derived&gt; *wrapper = new wrap&lt;Derived&gt;(der);\n</code></pre>\n\n<p>by</p>\n\n<pre><code>wrap&lt;Derived&gt; wrapper(der);\n</code></pre>\n\n<p>Then, you might replace</p>\n\n<pre><code>wrapper-&gt;operator-&gt;()-&gt;print();\n</code></pre>\n\n<p>by</p>\n\n<pre><code>wrapper-&gt;print();\n// or wrapper.operator-&gt;()-&gt;print(); :)\n</code></pre>\n\n<p>In the same way</p>\n\n<pre><code>wrapper-&gt;operator()([](Derived&amp; x)\n    {\n       x.print();\n    });\n</code></pre>\n\n<p>would become</p>\n\n<pre><code>wrapper(([](Derived&amp; x)\n    {\n       x.print();\n    });\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6049861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d898fcfccbaf172a41064feefced0b?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/6049861/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 51519538, "answer_count": 2, "score": 2, "last_activity_date": 1532524209, "creation_date": 1532522241, "question_id": 51519082, "link": "https://stackoverflow.com/questions/51519082/c-generic-wrapper-class-which-adds-extra-processing-for-some-functions", "title": "C++ Generic wrapper class which adds extra processing for some functions", "body": "<p>I am trying to create a wrapper class for a legacy inheritance hierarchy, which is not strictly polymorphic. And in the wrapper class, I add extra functionality for a few methods, but for many other methods, I just want to call the wrapped class method.<br>\n</p>I was wondering if there is a way in which I can write a generic wrapper function in the wrapper class which would allow me to call the wrapped function in a normal way as if there was no wrapper class.\n</p>May be I am wrong, but I didn't think overloading operator-> would work because there are some methods of the wrapped class, for which I wanted to do some processing before calling the wrapped class function (though for many others, I don't need to do that). \n</p> I also had a look at Herb Sutter's wrapper pattern, (again, I might be wrong) but that would need me to have a lambda to access the wrapped function.\n</p> I was wondering whether anyone had any ideas about whether this is achievable?</p>\n\n<p></p> I have placed the code @ <a href=\"http://cpp.sh/2ombu\" rel=\"nofollow noreferrer\" title=\"live code\">cpp.sh/2ombu</a><br>\nHere instead of</p>\n\n<pre><code>wrapper-&gt;operator()([](Derived&amp; x)\n{\n   x.print();\n});\n</code></pre>\n\n<p>or </p>\n\n<pre><code>wrapper-&gt;operator-&gt;()-&gt;print();\n</code></pre>\n\n<p>is there someway I can have </p>\n\n<pre><code>wrapper-&gt;print();\n</code></pre>\n\n<p>Thanks in advance for the answers..</p>\n"}, {"tags": ["c++", "stl", "set", "erase", "unordered-multiset"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1532521951, "post_id": 51518935, "comment_id": 90006613, "body": "You surely meant &quot;print 3, then 2&quot;?"}, {"owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1532521969, "post_id": 51518935, "comment_id": 90006624, "body": "Have you tried it??? There is nothing to do with remove-erase idiom!! @Ron"}, {"owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1532522007, "post_id": 51518935, "comment_id": 90006654, "body": "Sorry, my bad @BartekBanachewicz. Edited"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1532522931, "post_id": 51518935, "comment_id": 90007286, "body": "Which <i>one item</i> is that? They all have the same value. There is no first nor last element in an unordered multiset."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1532523528, "post_id": 51519107, "comment_id": 90007708, "body": "Why range when there is a version that accepts one iterator?"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1532523574, "post_id": 51519107, "comment_id": 90007749, "body": "@Slava Range version is useful if you want to remove multiple ones, of course."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 4, "creation_date": 1532523739, "post_id": 51519107, "comment_id": 90007862, "body": "Your first and second version requires check, as it is illegal to pass <code>end()</code> to <code>erase()</code> and <code>next()</code>"}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 9, "last_activity_date": 1532524304, "last_edit_date": 1532524304, "creation_date": 1532522335, "answer_id": 51519107, "question_id": 51518935, "link": "https://stackoverflow.com/questions/51518935/remove-only-one-item-from-unordered-multiset/51519107#51519107", "title": "Remove only one item from unordered_multiset", "body": "<p>You can use another <code>erase</code> overload:</p>\n\n<pre><code>std::unordered_multiset&lt;int&gt; s { 1, 2, 2, 3, 3, 3 };\n\nconst auto it = s.find(2);\n\nif (it != s.end())\n    s.erase(it);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/aea94a559d8e4ad6\" rel=\"noreferrer\"><strong>Live version</strong></a></p>\n"}], "owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 1, "accepted_answer_id": 51519107, "answer_count": 1, "score": 3, "last_activity_date": 1532524304, "creation_date": 1532521749, "last_edit_date": 1532521986, "question_id": 51518935, "link": "https://stackoverflow.com/questions/51518935/remove-only-one-item-from-unordered-multiset", "title": "Remove only one item from unordered_multiset", "body": "<p>I want to erase a specific element from <code>std::unordered_multiset</code>, but when I try with <code>erase</code> function, it eliminates all the items, no matter how many they are.<br>\nFor example:</p>\n\n<pre><code>std::unordered_multiset&lt;int&gt; M;\nM.insert(1);\nM.insert(1);\nM.insert(1);\nstd::cout&lt;&lt;M.count(1)&lt;&lt;std::endl;\n\nM.erase(1);\nstd::cout &lt;&lt; M.count(1) &lt;&lt; std::endl;\n</code></pre>\n\n<p>I expect this to print 3 then 2. But it prints 3 then 0. So how to remove only one item?</p>\n"}, {"tags": ["c++", "opencv", "cmake", "opencv-contrib"], "comments": [{"owner": {"reputation": 8423, "user_id": 463796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Yihjq.png?s=128&g=1", "display_name": "w-m", "link": "https://stackoverflow.com/users/463796/w-m"}, "edited": false, "score": 0, "creation_date": 1532529427, "post_id": 51518867, "comment_id": 90012020, "body": "What OpenCV version are you trying to build?"}, {"owner": {"reputation": 21, "user_id": 9649680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ixeRGiSqyLw/AAAAAAAAAAI/AAAAAAAAAQU/k5_SzowMuEw/photo.jpg?sz=128", "display_name": "Luk&#225;\u0161 Vojtek", "link": "https://stackoverflow.com/users/9649680/luk%c3%a1%c5%a1-vojtek"}, "reply_to_user": {"reputation": 8423, "user_id": 463796, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Yihjq.png?s=128&g=1", "display_name": "w-m", "link": "https://stackoverflow.com/users/463796/w-m"}, "edited": false, "score": 0, "creation_date": 1532533775, "post_id": 51518867, "comment_id": 90015002, "body": "Well I have istalled OpenCV version 3.4.1 (seen from headers)."}, {"owner": {"reputation": 460, "user_id": 3779033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abcad966e8af590232932f78502190b?s=128&d=identicon&r=PG&f=1", "display_name": "pragmaticprog", "link": "https://stackoverflow.com/users/3779033/pragmaticprog"}, "edited": false, "score": 0, "creation_date": 1532548928, "post_id": 51518867, "comment_id": 90022175, "body": "Have you tried a clean build? Wondering if files from the previous build is causing errors while using making."}, {"owner": {"reputation": 21, "user_id": 9649680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ixeRGiSqyLw/AAAAAAAAAAI/AAAAAAAAAQU/k5_SzowMuEw/photo.jpg?sz=128", "display_name": "Luk&#225;\u0161 Vojtek", "link": "https://stackoverflow.com/users/9649680/luk%c3%a1%c5%a1-vojtek"}, "edited": false, "score": 0, "creation_date": 1532698141, "post_id": 51518867, "comment_id": 90084789, "body": "Well, I have tried to install openCV two times again to another folders to make sure for clean build and now I finally make it &gt; Configured. Generated. But. Another Issues occured on the next step in &#39;make -j7&#39; process.  I typed it in a new topic here: <a href=\"https://stackoverflow.com/questions/51558932/unable-to-complete-make-j7-with-opencv-contrib-modules\" title=\"unable to complete make j7 with opencv contrib modules\">stackoverflow.com/questions/51558932/&hellip;</a>"}], "owner": {"reputation": 21, "user_id": 9649680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ixeRGiSqyLw/AAAAAAAAAAI/AAAAAAAAAQU/k5_SzowMuEw/photo.jpg?sz=128", "display_name": "Luk&#225;\u0161 Vojtek", "link": "https://stackoverflow.com/users/9649680/luk%c3%a1%c5%a1-vojtek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532522275, "creation_date": 1532521539, "last_edit_date": 1532522275, "question_id": 51518867, "link": "https://stackoverflow.com/questions/51518867/an-issue-with-opencv-extra-modules", "title": "An Issue with OpenCV extra modules", "body": "<p>Because I couldn't compile a cpp code with using</p>\n\n<pre><code>#include  \"opencv2/text.hpp\n</code></pre>\n\n<p>in <code>.cpp</code> file I noticed I probably have not linked and correctly set OpenCV libraries from extra modules.</p>\n\n<p>Ok, so I tried instructions here <a href=\"https://github.com/opencv/opencv_contrib\" rel=\"nofollow noreferrer\">here</a>. I opened terminal and entered</p>\n\n<pre><code>cmake -DOPENCV_EXTRA_MODULES_PATH=/home/user/openc/opencv_contrib/modules /home/user/openc/opencv\n</code></pre>\n\n<p>but I got a</p>\n\n<pre><code>CMake Error at CMakeLists.txt:11 (message):\nManually-specified variables were not used by the project:\n\n  OPENCV_EXTRA_MODULES_PATH\n\n-- Configuring incomplete, errors occurred!\n</code></pre>\n\n<hr>\n\n<p>Could anybody please help me with setting OpenCV extra modules correctly? </p>\n\n<p>I have tried CMake-gui but that have a lot more errors after processing configure.</p>\n\n<p>Also I have tried force copy library module folder in <code>/usr/local/include/opencv2</code>, where basic modules are. But I got make errors with undefined references, for example like:</p>\n\n<pre><code> undefined reference to `cv::text::computeNMChannels(cv::_InputArray const&amp;, cv::_OutputArray const&amp;, int)' \" ).\n</code></pre>\n"}, {"tags": ["c++", "c++14", "language-lawyer"], "comments": [{"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1532521302, "post_id": 51518604, "comment_id": 90006157, "body": "Wait a second, where did <code>A</code> come from in this <code>a.b.A::B::~B();</code> expression?"}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1532521354, "post_id": 51518604, "comment_id": 90006190, "body": "@bartop Exactly what I was wondering. How would class member b have a &quot;A&quot; member?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 7, "creation_date": 1532521671, "post_id": 51518604, "comment_id": 90006422, "body": "The name of the destructor for <code>a.b</code> is <code>A::B::~B</code>. This is an explicit destructor call."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1532523293, "post_id": 51518604, "comment_id": 90007552, "body": "In case of ambiguity for type names for templates, I thought that to refer to the type name needs to have been marked with <code>typename</code> to disambiguate."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1532524109, "post_id": 51518604, "comment_id": 90008106, "body": "I&#39;m wondering whether this truly matters. The implicit <code>typename</code> is for constructs like <code>A::B&lt;T&gt;::C::~C</code>. You don&#39;t need to write<code>A::typename B&lt;T&gt;::C::~C</code>. But neither <code>B&lt;T&gt;</code> nor <code>typename B&lt;T&gt;</code> can be parsed as an <code>identifier</code>. That leaves just <code>type-name</code>, resolving the ambiguity."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1532525334, "post_id": 51518604, "comment_id": 90008965, "body": "@MSalters Given a template parameter <code>T</code>, a variable <code>x</code> of type <code>T::X</code> you might write <code>x.T::X::~X();</code>. This is arguably not much an issue because one of the production rule for pseudo-destructor-name got removed in C++17 but for a completely different reason."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1532527253, "post_id": 51518604, "comment_id": 90010428, "body": "@PasserBy: Fair point. Of course the second <code>X</code> makes it clear that <code>X</code> is a type-name, but that&#39;s now how the parser works."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1532699244, "post_id": 51518604, "comment_id": 90085511, "body": "I believe for your example the grammar <code>postfix-expression . template_opt id-expression</code> should be chosen, but I cannot find the rule to resolve this ambiguity."}], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1532520792, "creation_date": 1532520792, "question_id": 51518604, "link": "https://stackoverflow.com/questions/51518604/how-are-ambiguous-grammar-resolved", "title": "How are ambiguous grammar resolved?", "body": "<p>Is there a general rule on how to resolve ambiguous grammar?</p>\n\n<p>In particular, a <a href=\"https://timsong-cpp.github.io/cppwp/n4140/expr.post#nt:pseudo-destructor-name\" rel=\"nofollow noreferrer\"><em>pseudo-destructor-name</em></a> includes these production rules</p>\n\n<blockquote>\n  <p>nested-name-specifier<sub>opt</sub> type-name :: ~ type-name</p>\n  \n  <p>nested-name-specifier<sub>opt</sub> ~ type-name</p>\n</blockquote>\n\n<p>And <a href=\"https://timsong-cpp.github.io/cppwp/n4140/expr.prim.general#nt:nested-name-specifier\" rel=\"nofollow noreferrer\"><em>nested-name-specifier</em></a> includes</p>\n\n<blockquote>\n  <p>nested-name-specifier identifier ::</p>\n  \n  <p>type-name ::</p>\n</blockquote>\n\n<p>Given the following</p>\n\n<pre><code>struct A\n{\n    struct B {};\n    B b;\n};\n\nA a;\na.b.A::B::~B();\n</code></pre>\n\n<p>Which of the following production is choosed for the last line?</p>\n\n<blockquote>\n  <p>type-name :: type-name :: ~ type-name</p>\n  \n  <p>type-name :: identifier :: ~ type-name</p>\n</blockquote>\n\n<p>This has significance in a templated context, since <a href=\"https://timsong-cpp.github.io/cppwp/n4140/temp.res#5\" rel=\"nofollow noreferrer\">[temp.res]</a></p>\n\n<blockquote>\n  <p>In a nested-name-specifier that immediately contains a nested-name-specifier that depends on a template parameter, the identifier or simple-template-id is implicitly assumed to name a type, without the use of the typename keyword.</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 1, "creation_date": 1532520688, "post_id": 51518541, "comment_id": 90005702, "body": "the first line of this code is strange. Wouldn&#39;t it be <code>int *val, r, c;</code> ?"}, {"owner": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "edited": false, "score": 2, "creation_date": 1532521047, "post_id": 51518541, "comment_id": 90005986, "body": "Are you asking what <code>i * c + j</code> calculates? What you&#39;ve got is a 2D array stored as a 1D array. Usually you calculate the index via <code>coord_y * max_x + coord_x</code>. In this case <code>c</code> is the total number of columns (aka max_x)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1532521971, "post_id": 51518541, "comment_id": 90006625, "body": "Your second question: If memory allocation fails, <code>std::bad_alloc</code> is thrown (at least if you don&#39;t turn off exceptions). So in standard C++ environment, you don&#39;t have to check the result of allocation via <code>operator new</code>. (But you do have to if you use malloc for whatever reason! You shouldn&#39;t anyway, only <i>very</i> few exceptions force you to still use it, mainly if you pass the pointer to some C-API claiming ownership of - something very rare, haven&#39;t met any in 15 years...)."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532529413, "post_id": 51518541, "comment_id": 90012012, "body": "You <b>don&#39;t</b> have a &quot;two dimensional array&quot;. You are using a single array (so the allocation is contiguous) indexed by a calculation from two dimensions"}], "answers": [{"tags": [], "owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "is_accepted": false, "score": 1, "last_activity_date": 1532522175, "last_edit_date": 1532522175, "creation_date": 1532521149, "answer_id": 51518724, "question_id": 51518541, "link": "https://stackoverflow.com/questions/51518541/while-creating-dynamic-two-dimensional-array-what-is-the-use-of-c-in-ai-c-j/51518724#51518724", "title": "While creating dynamic two dimensional array, what is the use of c in A[i * c+ j], i.e., what does c represent?", "body": "<p>Tip:</p>\n\n<p>These two codes are doing the same thing.</p>\n\n<p>Code 1:</p>\n\n<pre><code>const int N = 3;\n\nint arr[N][N];\n\nfor(int i = 0; i &lt; N; i++) {\n    for(int j = 0; j &lt; N; j++) {\n        arr[i][j] = SOMETHING;\n    }\n}\n</code></pre>\n\n<p>Code 2:</p>\n\n<pre><code>const int N = 3;\n\nint arr[N*N];\n\nfor(int i = 0; i &lt; N; i++) {\n    for(int j = 0; j &lt; N; j++) {\n        arr[i * N + j] = SOMETHING;\n    }\n}\n</code></pre>\n\n<p>In the first code, the classic syntax for a bidimensional array is used. In the second code, a one-dimension array is used to represent a bidimensional array.</p>\n"}], "owner": {"reputation": 33, "user_id": 7339479, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2wjAedGYn7Y/AAAAAAAAAAI/AAAAAAAAABU/ZUab4U4le5U/photo.jpg?sz=128", "display_name": "Manjot Singh", "link": "https://stackoverflow.com/users/7339479/manjot-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1532525682, "answer_count": 1, "score": 0, "last_activity_date": 1532527858, "creation_date": 1532520595, "last_edit_date": 1532527858, "question_id": 51518541, "link": "https://stackoverflow.com/questions/51518541/while-creating-dynamic-two-dimensional-array-what-is-the-use-of-c-in-ai-c-j", "closed_reason": "Needs more focus", "title": "While creating dynamic two dimensional array, what is the use of c in A[i * c+ j], i.e., what does c represent?", "body": "<pre><code>int *val r,c;\ncout &lt;&lt; \"enter dimensions\";\ncin &gt;&gt; r &gt;&gt; c;\nval = new int[r*c];\nfor (int i = 0; i &lt; r; i++)\n{\n    cout &lt;&lt; \u201c\\n Enter element in row \u201c &lt;&lt; i + 1 &lt;&lt; \u201c : \u201c;\n    for (int j=0; j &lt; c; j++)\n        cin &gt;&gt; arr [ i * c + j];\n}\n</code></pre>\n\n<p>In the above code, what does <code>c</code> represents in expression <code>arr[i*c+j]</code>? but in normal two dimensional array we use <code>arr[i][j]</code> and what is the meaning of <code>val = new int[r*c]</code>? while creating a dynamic array I think <code>[r*c]</code> is the total size of array rows into column assigning to the variable var or something else? If I am not using <code>c</code> it gives an error but when I am using <code>c</code> it will not give an error. Please tell me why we are using <code>c</code> in <code>arr[i*c+j]</code>. Somewhere I read <code>c</code> means the maximum number of columns.</p>\n\n<pre><code>int *p = new int;\nif(!p)\n{\n    cout &lt;&lt; \"memory allocation\";\n}\n</code></pre>\n\n<p>Also, in the above snippet, how memory allocation is possible if the condition is <code>true</code>?</p>\n"}, {"tags": ["c++", "ms-word", "ms-office", "activex", "atl"], "comments": [{"owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "edited": false, "score": 0, "creation_date": 1532526894, "post_id": 51517939, "comment_id": 90010156, "body": "I can&#39;t help, directly, but I can tell you that Word&#39;s (Offices) graphics engine was changed massively in Office 2013. That might have something to do with what you&#39;re seeing."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532527617, "post_id": 51517939, "comment_id": 90010697, "body": "Have you tried contacting Microsoft? They are really the only ones why know how their file formats &quot;work&quot;."}, {"owner": {"reputation": 11, "user_id": 10131161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d3N0dQKe-nM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pwgGNIFMAj9zd6XYMuFq4BV-99bQ/mo/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/10131161/jay"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535419797, "post_id": 51517939, "comment_id": 91048535, "body": "@JesperJuhl Yes, Microsoft suggested contacting Microsoft support to raise an incident. but that cost $599 at least."}], "owner": {"reputation": 11, "user_id": 10131161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d3N0dQKe-nM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pwgGNIFMAj9zd6XYMuFq4BV-99bQ/mo/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/10131161/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1532526798, "creation_date": 1532518635, "last_edit_date": 1532526798, "question_id": 51517939, "link": "https://stackoverflow.com/questions/51517939/atl-control-display-image-with-bitblt-srcand-not-correct-in-word-2013", "title": "ATL control display image with Bitblt SRCAND not correct in word 2013", "body": "<p>I created a ATL project with following code:</p>\n\n<pre><code>LRESULT OnCreate(UINT /*uMsg*/, WPARAM /*wParam*/, LPARAM /*lParam*/, BOOL&amp; /*bHandled*/)\n{\n    const LONG_PTR exStyle = GetWindowLongPtr(GWL_EXSTYLE);\n    SetWindowLongPtr(GWL_EXSTYLE, exStyle | WS_EX_TRANSPARENT);\n    return 0;\n}\n\nHRESULT OnDrawAdvanced(ATL_DRAWINFO&amp; di)\n{\n    RECT&amp; rc = *(RECT*)di.prcBounds;\n\n    CImage imgx;\n    imgx.Load(_T(\"C:\\\\image.jpg\"));\n    imgx.TransparentBlt\n    imgx.StretchBlt(di.hdcDraw, rc.left, rc.top, rc.right, rc.bottom, 0,0,imgx.GetWidth(),imgx.GetHeight(), SRCAND);\n\n    return S_OK;\n}\n</code></pre>\n\n<p>image.jpg here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vdrr6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vdrr6.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>this works in ms-word2007</p>\n\n<p><a href=\"https://i.stack.imgur.com/BqEmv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BqEmv.png\" alt=\"enter image description here\"></a></p>\n\n<p>in ms-word2013, when I changed the wrapping style to \"In front of text\",it displays a grayed image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TYYU1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TYYU1.png\" alt=\"enter image description here\"></a></p>\n\n<p>why is that? and how to fix this. Thanks very much.</p>\n"}, {"tags": ["c++", "opencv", "cuda", "gpu", "nvidia"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1532519334, "post_id": 51517906, "comment_id": 90004700, "body": "In the documentation it tells you <code>In contrast with Mat, in most cases GpuMat::isContinuous() == false . This means that rows are aligned to a size depending on the hardware. Single-row GpuMat is always a continuous matrix.</code>, I haven&#39;t  work that much with the GpuMat so I am not sure how to know how much is being padded and how to avoid it..."}, {"owner": {"reputation": 129, "user_id": 6533705, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/97eae14bbda4494ee915011d94be62b6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/6533705/sam"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1532519712, "post_id": 51517906, "comment_id": 90004965, "body": "Appreciate your immediate reply @api55. I am also stuck in the same part. Also, I am trying to understand how it works with the image of the width 256 or 512."}, {"owner": {"reputation": 129, "user_id": 6533705, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/97eae14bbda4494ee915011d94be62b6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/6533705/sam"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1532520104, "post_id": 51517906, "comment_id": 90005239, "body": "@talonmies can you elaborate a bit more"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1532520381, "post_id": 51517906, "comment_id": 90005451, "body": "No.Literally go and read the GpuMat documentation and look at the step attribute"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1532520411, "post_id": 51517906, "comment_id": 90005477, "body": "@sam , it works because it does not need the padding with such values, probably is a padded to a power of 2 and in this case is not needed. The padding is used to align the rows to a certain number."}, {"owner": {"reputation": 129, "user_id": 6533705, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/97eae14bbda4494ee915011d94be62b6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/6533705/sam"}, "edited": false, "score": 0, "creation_date": 1532525949, "post_id": 51517906, "comment_id": 90009443, "body": "Thank you.  I understand the issue is due to the stride(step). The program works fine with width = power of 2. So the solution would be resizing the image in such a way that the image width is in the power of 2. Let me know if that&#39;s right."}], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 3, "last_activity_date": 1532535356, "last_edit_date": 1532535356, "creation_date": 1532526909, "answer_id": 51520728, "question_id": 51517906, "link": "https://stackoverflow.com/questions/51517906/opencv-copy-gpumat-into-cuda-device-data/51520728#51520728", "title": "OpenCV - Copy GpuMat into cuda device data", "body": "<p>OpenCV GpuMat uses strided storage (so the image is not stored contiguously in memory). In short, your example fails for most cases because </p>\n\n<ol>\n<li>You don't copy the whole image to the CUDA memory allocation, and</li>\n<li>You don't correctly specify the memory layout when you create the second GpuMat instance from the GPU pointer.</li>\n</ol>\n\n<p>By my reading of the documentation, you probably want something like this:</p>\n\n<pre><code>uint8_t *imgPtr;\ncv::Mat left, downloadedLeft;\ncv::cuda::GpuMat gpuLeft;\n\nleft = imread(\"leftview.jpg\", cv::IMREAD_GRAYSCALE);\ngpuLeft.upload(left);\n\ncudaMalloc((void **)&amp;imgPtr, gpuLeft.rows*gpuLeft.step);\ncudaMemcpyAsync(imgPtr, gpuLeft.ptr&lt;uint8_t&gt;(), gpuLeft.rows*gpuLeft.step, cudaMemcpyDeviceToDevice);\n\n// following code is just for testing and visualization...\ncv::cuda::GpuMat gpuImg(left.rows, left.cols, left.type(), imgPtr, gpuLeft.step);\ngpuImg.download(downloadedLeft);\nimshow (\"test\", downloadedLeft);\nwaitKey(0);\n</code></pre>\n\n<p>[Written by someone who has never used OpenCV, not compiled or tested, use at own risk]</p>\n\n<p>The only time your code would work correctly would be when the row pitch of the GpuMat was serendipitously the same as the number of columns times the size of the type stored in the matrix. This is likely to be images with sizes which are round powers of two.</p>\n"}], "owner": {"reputation": 129, "user_id": 6533705, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/97eae14bbda4494ee915011d94be62b6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/6533705/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4518, "favorite_count": 2, "accepted_answer_id": 51520728, "answer_count": 1, "score": 0, "last_activity_date": 1532535356, "creation_date": 1532518542, "last_edit_date": 1532519669, "question_id": 51517906, "link": "https://stackoverflow.com/questions/51517906/opencv-copy-gpumat-into-cuda-device-data", "title": "OpenCV - Copy GpuMat into cuda device data", "body": "<p>I am trying to copy the data in a <code>cv::cuda::GpuMat</code> to a <code>uint8_t*</code> variable which is to be used in a kernel.</p>\n\n<p>The GpuMat contains an image data of resolution 752x480 and of type CV_8UC1. Below is the sample code:</p>\n\n<pre><code>uint8_t *imgPtr;\ncv::Mat left, downloadedLeft;\ncv::cuda::GpuMat gpuLeft;\n\nleft = imread(\"leftview.jpg\", cv::IMREAD_GRAYSCALE);\ngpuLeft.upload(left);\n\ncudaMalloc((void **)&amp;imgPtr, sizeof(uint8_t)*gpuLeft.rows*gpuLeft.cols);\ncudaMemcpyAsync(imgPtr, gpuLeft.ptr&lt;uint8_t&gt;(), sizeof(uint8_t)*gpuLeft.rows*gpuLeft.cols, cudaMemcpyDeviceToDevice);\n\n// following code is just for testing and visualization...\ncv::cuda::GpuMat gpuImg(left.rows, left.cols, left.type(), imgPtr);\ngpuImg.download(downloadedLeft);\nimshow (\"test\", downloadedLeft);\nwaitKey(0);\n</code></pre>\n\n<p>But the output is not as expected. Following are the input and output image respectively.</p>\n\n<p><strong>INPUT</strong>\n<a href=\"https://i.stack.imgur.com/cbxOm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cbxOm.jpg\" alt=\"Input Image\"></a></p>\n\n<p><strong>OUTPUT</strong>\n<a href=\"https://i.stack.imgur.com/fOEPz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fOEPz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have tried giving the <code>cv::Mat</code> source to the <code>cudaMemcpy</code>. It seems to be working fine. The issue seems to be with the <code>cv::cuda::GpuMat</code> and <code>cudaMemcpy</code>. A similar issue is discussed in the <a href=\"http://answers.opencv.org/question/167465/how-to-pass-an-already-stored-data-in-gpu-by-gpumat-to-a-kernel/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Also, if the image with is 256 or 512, the program seems to be working fine. </p>\n\n<p>What is that I am missing? What should be done for the 752x480 image to work properly?</p>\n"}, {"tags": ["c++", "clock"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1532518707, "post_id": 51517843, "comment_id": 90004295, "body": "1) you never seed <code>rand</code> by calling <code>srand</code>. 2) you shouldn&#39;t be using <code>rand</code> in the first plase, but the modern <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">&lt;random&gt;</a> facilities (see also: <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">rand() Considered Harmful</a>). 3) you are busy looping. Use a proper timer where you can sleep until the timeout expires."}], "answers": [{"comments": [{"owner": {"reputation": 3568, "user_id": 898813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4417b6ee5bec5bc83de0b2f7f31d258b?s=128&d=identicon&r=PG", "display_name": "Markus Mayr", "link": "https://stackoverflow.com/users/898813/markus-mayr"}, "edited": false, "score": 0, "creation_date": 1532594986, "post_id": 51517959, "comment_id": 90037051, "body": "I think your answer misses the point; the main factor that the condition is true multiple times is because <code>float</code> does not provide enough accuracy, not because the CPU performs multiple iterations of the loop per clock."}, {"owner": {"reputation": 167922, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 3568, "user_id": 898813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4417b6ee5bec5bc83de0b2f7f31d258b?s=128&d=identicon&r=PG", "display_name": "Markus Mayr", "link": "https://stackoverflow.com/users/898813/markus-mayr"}, "edited": false, "score": 1, "creation_date": 1532595827, "post_id": 51517959, "comment_id": 90037613, "body": "@MarkusMayr: You&#39;re right; that is what I intended to say but fumbled my words. +1 to you."}], "tags": [], "owner": {"reputation": 167922, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 5, "last_activity_date": 1532595788, "last_edit_date": 1532595788, "creation_date": 1532518703, "answer_id": 51517959, "question_id": 51517843, "link": "https://stackoverflow.com/questions/51517843/program-that-prints-every-n-seconds/51517959#51517959", "title": "Program That Prints Every (n) Seconds", "body": "<p>Your code seems to be fast enough and your calculation precision small enough that you do multiple iterations before the number you are calculating changes. Thus, when the condition matches, it will match several times at once.</p>\n\n<p>However, this is not a good way to do this, as you are making your computer work very hard. This way of waiting will put a rather severe load on one processor, potentially slowing down your computer, and definitely draining more power. If you're on a quad-core desktop it is not that bad, but for a laptop it's hell on batteries. Instead of asking your computer \"is it time yet? is it time yet? is it time yet?\" as fast as you can, trust that your computer knows how to wait, and use <code>sleep</code>, <code>usleep</code>, <code>sleep_for</code>, or whatever the library you're using is calling it now. See <a href=\"https://stackoverflow.com/a/10613664/240443\">here</a> for an example.</p>\n"}, {"tags": [], "owner": {"reputation": 3568, "user_id": 898813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4417b6ee5bec5bc83de0b2f7f31d258b?s=128&d=identicon&r=PG", "display_name": "Markus Mayr", "link": "https://stackoverflow.com/users/898813/markus-mayr"}, "is_accepted": false, "score": 6, "last_activity_date": 1532596348, "last_edit_date": 1532596348, "creation_date": 1532519432, "answer_id": 51518194, "question_id": 51517843, "link": "https://stackoverflow.com/questions/51517843/program-that-prints-every-n-seconds/51518194#51518194", "title": "Program That Prints Every (n) Seconds", "body": "<p><em>EDIT: I felt this answer was incomplete, because it does not answer your actual question. The first part now explains why your approach fails, the second part is about how to solve your problem in a better way.</em></p>\n\n<p>You are using <code>clock()</code> in a way, where you wait for a number of specific points in time. Due to the nature of <code>clock()</code> and the limited precision of <code>float</code>, your check basically is equivalent to saying: Are we in a window <code>[x-eps, x+eps]</code>, where <code>x</code> is a multiple of <code>5</code> and <code>eps</code> is generally small and depends on the floating point type used and how big <code>(clock() - start)</code> is. A way to increase <code>eps</code> is to add a constant like <code>1e6</code> to <code>(clock() - start)</code>. If floating point numbers were precise, that should not affect your logic, because <code>1e6</code> is a multiple of <code>5</code>, but in fact it will do so drastically.</p>\n\n<p>On a fast machine, that condition can be true multiple times every 5 seconds; on a slow machine it may not be true every time 5 seconds passed.</p>\n\n<p>The correct way to implement it is below; but if you wanted to do it using a  polling approach (like you do currently), you would have to increment start by 5 * CLOCKS_PER_SECOND in your <code>if</code>-block and change the condition to something like <code>(clock() - start) / CLOCKS_PER_SECOND &gt;= 5</code>.</p>\n\n<hr>\n\n<p>Apart from the <code>clock()</code>-specific issues that you have, I want to remind you that it  measures CPU time or ticks and is hardly a reliable way to measure wall time. Fortunately, in modern C++, we have <code>std::chrono</code>:</p>\n\n<pre><code>auto t = std::chrono::steady_clock::now();\nauto end = t + std::chrono::seconds( 10 );\nwhile( t &lt; end )\n{\n    t += std::chrono::seconds( 5 );\n    std::this_thread::sleep_until( t );\n    std::cout &lt;&lt; ( rand() % 10 + 1 ) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I also highly recommend replacing <code>rand()</code> with the more modern tools in <code>&lt;random&gt;</code>, e.g.:</p>\n\n<pre><code>std::random_device rd; // Hopefully a good source of entropy; used for seeding.\nstd::default_random_engine gen( rd() ); // Faster pseudo-random source.\nstd::uniform_int_distribution&lt;&gt; dist( 1, 10 ); // Specify the kind of random stuff that you want.\nint random = dist( gen ); // equivalent to rand() % 10 + 1.\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10133110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YA6jjk-yXSo/AAAAAAAAAAI/AAAAAAAAADQ/PK2SjPTdn4k/photo.jpg?sz=128", "display_name": "Karset", "link": "https://stackoverflow.com/users/10133110/karset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532596348, "creation_date": 1532518300, "question_id": 51517843, "link": "https://stackoverflow.com/questions/51517843/program-that-prints-every-n-seconds", "title": "Program That Prints Every (n) Seconds", "body": "<p>I wrote a program that for every five seconds would print a random number (1-10) within a ten seconds timeframe. But it seems to be printing more than one random number every five seconds. Could anyone point me in the right direction?</p>\n\n<pre><code>clock_t start;\n\nint random;\n\nstart = clock();\n\nwhile (float(clock() - start) / CLOCKS_PER_SEC &lt;= 10.0) {\n    if (fmod(float(clock() - start) / CLOCKS_PER_SEC, 5) == 0 &amp;&amp; (float(clock() - start) / CLOCKS_PER_SEC) != 0) {\n        random = rand() % 10 + 1;\n        cout &lt;&lt; random &lt;&lt; endl;\n    }\n}\n\n\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "c++03"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532520370, "post_id": 51517670, "comment_id": 90005442, "body": "Can you have an array of <code>function&lt;Err()&gt;</code> and then iterate over that array with your check ? something like <code>for (auto&amp;&amp; f : functions) { auto error = f(); if (error) {&#47;*..*&#47;} }</code> ?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532520437, "post_id": 51517670, "comment_id": 90005503, "body": "@Jarod42 Yeah probably, it would be interesting to achieve with <code>boost::function</code> but probably very doable. You should add this as an answer."}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1532521926, "post_id": 51517670, "comment_id": 90006602, "body": "Short answer - take a look at how is haskell <code>Exception</code> created. Basically it wraps the function and propagates return value or error depending what happend until it gets to the end/the error handler. I&#39;ll try to give more elaborate answer soon"}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1532518812, "post_id": 51517921, "comment_id": 90004366, "body": "Yeah, this would be so nice. Unfortunately its an embedded system and we have a no exceptions rule, which is not very good (especially since this is not a critical section of the code). But this is certainly a good answer to the question."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1532519079, "post_id": 51517921, "comment_id": 90004542, "body": "@FantasticMrFox SO, on your project you write customer allocators that are <code>noexcept</code>? Because if you don&#39;t, much of the STL will throw exceptions."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1532519158, "post_id": 51517921, "comment_id": 90004580, "body": "<a href=\"https://stackoverflow.com/questions/691168/how-much-footprint-does-c-exception-handling-add\">How much footprint does C++ exception handling add</a>?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1532519312, "post_id": 51517921, "comment_id": 90004684, "body": "I am aware of both these things and have made people aware of this. Unfortunately no change at the moment. I am also pushing for an upgrade from c++03 to c++11. But 1 person pushing can only do so much ..."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1532520273, "post_id": 51517921, "comment_id": 90005382, "body": "@FantasticMrFox Make that two and counting."}], "tags": [], "owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "is_accepted": true, "score": 5, "last_activity_date": 1532518589, "creation_date": 1532518589, "answer_id": 51517921, "question_id": 51517670, "link": "https://stackoverflow.com/questions/51517670/how-to-delegate-an-action-to-function-return/51517921#51517921", "title": "How to delegate an action to function return?", "body": "<p>If error status codes are proving troublesome, you should consider using exceptions instead. That is, change the API of your functions</p>\n\n<ul>\n<li>so they are guaranteed to have success as a post-condition</li>\n<li>throw a suitable <code>std::exception</code> in the event of failure</li>\n</ul>\n\n<p>It is impossible to \"forget\" to examine a status code if you do this. If you choose not to handle an error condition, the exception thrown by low-level code automatically percolates upwards. You only need to <code>catch</code> a low-level exception if</p>\n\n<ul>\n<li>You need to do some manual roll-back or deallocation in the event of an error,\nand RAII is impractical. In this case you would rethrow the expcetion.</li>\n<li>You want to translate a low-level exception message or exception type into a high-level message, using a thrown) nested exception.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1532520162, "post_id": 51518319, "comment_id": 90005289, "body": "I don&#39;t think this is an answer to the question ... Do you wan&#39;t to elaborate some more?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532520402, "post_id": 51518319, "comment_id": 90005469, "body": "The body of <code>execute</code> becomes <code>{ if (!server_validate(params...)) return FAILURE; do_execute(params); return SUCCESS; }</code>, where <code>server_validate</code> and <code>do_execute</code> are the top half and bottom half of your current <code>execute</code> respectively"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532520546, "post_id": 51518319, "comment_id": 90005585, "body": "@Caleth then you would just be moving the big long line of <code>if error do</code> into the <code>server_validate</code> function. This hardly solves the problem, right?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1532524917, "post_id": 51518319, "comment_id": 90008647, "body": "@FantasticMrFox The &quot;big long line&quot; with the marshall from error code to one spot?  There are short lines where you do <code>if (blah) return x;</code> in the inner function."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1532524948, "last_edit_date": 1532524948, "creation_date": 1532519914, "answer_id": 51518319, "question_id": 51517670, "link": "https://stackoverflow.com/questions/51517670/how-to-delegate-an-action-to-function-return/51518319#51518319", "title": "How to delegate an action to function return?", "body": "<p>Split the function.</p>\n\n<p>The inner function returns an error code based on user input; the outer translates that to a client error, and only returns server side errors.</p>\n\n<p>Inner function contains:</p>\n\n<pre><code>if(Err error = someFunctionCall(clientInput))\n  return error;\n</code></pre>\n\n<p>repeatedly.  Outer has the relay to client error code, but only once.</p>\n\n<p>Err just needs an operator bool.  If it cannot have it, create a type that converts to/from Err and has an operator bool.</p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1532521490, "creation_date": 1532521490, "answer_id": 51518840, "question_id": 51517670, "link": "https://stackoverflow.com/questions/51517670/how-to-delegate-an-action-to-function-return/51518840#51518840", "title": "How to delegate an action to function return?", "body": "<p>Can you add a method to error that does the check etc and return a bool.</p>\n\n<pre><code>if(!someFunctionCall(clientInput).handleSuccess(results))\n{\n    return SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1532523058, "creation_date": 1532523058, "answer_id": 51519357, "question_id": 51517670, "link": "https://stackoverflow.com/questions/51517670/how-to-delegate-an-action-to-function-return/51519357#51519357", "title": "How to delegate an action to function return?", "body": "<p>Maybe, you can write your statement as array, something like:</p>\n\n<pre><code>Err execute( const ICommandContext &amp;context, ...)\n{\n    const boost::function&lt;Err()&gt; functions[] = {\n        boost::bind(&amp;someFunctionCall, std::ref(clientInput)),\n        boost::bind(&amp;someFunctionCall, std::ref(otherClientInput)),\n        // ...\n    };\n\n    for (std::size_t i = 0; i != sizeof(functions) / sizeof(functions[0]); ++i) {\n        Err err = functions[i]();\n\n        if (!err.successs()) {\n            results.setStatus(err);\n            return SUCCESS;\n        }\n    }\n    return SUCCESS;\n}\n</code></pre>\n\n<p>and if you do that several time with only different statements,\nyou might create</p>\n\n<pre><code>Err execute_functions(const ICommandContext &amp;context, std::function&lt;Err()&gt; functions);\n</code></pre>\n\n<p>Maybe also provide other entry points as <code>OnError</code> depending of your needs.</p>\n"}], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 51517921, "answer_count": 4, "score": 6, "last_activity_date": 1532524948, "creation_date": 1532517766, "last_edit_date": 1532519694, "question_id": 51517670, "link": "https://stackoverflow.com/questions/51517670/how-to-delegate-an-action-to-function-return", "title": "How to delegate an action to function return?", "body": "<h2>The problem</h2>\n\n<p>I have the following simple situation popping up all over the place. A large number of requests come to the device with a function signature like this:</p>\n\n<pre><code>Err execute( const ICommandContext &amp;context, \n         const RoutineArguments &amp;arguments, \n         RoutineResults &amp;results)\n</code></pre>\n\n<p>There is essentially a request handling server that will call this execute the function for a variety of request types that have these signatures. We have 2 return paths in the case of an error.</p>\n\n<ol>\n<li>The <code>Err</code> output type (consider it to be equivalent to an <code>int</code>) which is used to inform the server or system that something has gone wrong that is to do with the system, not the request. This is always sorted at the top of the function before the user request is dealt with.</li>\n<li><code>RoutineResults</code> provides a <code>setStatus</code> function that can be used to return failure information of the request to the client.</li>\n</ol>\n\n<p>For this reason we have a lot of this type of code popping up:</p>\n\n<pre><code>// Failure due to request\nErr error = someFunctionCall(clientInput);\nif (!error.success()) {\n    results.setStatus(error); // Inform the client of the error\n    return SUCCESS; // Inform the system that we are all good\n}\n</code></pre>\n\n<p>We have a particular request type that has around <code>15</code> parameters that come in and are sent off around the system. We would conceptually need 15 of this <code>if error do</code> set which seems wasteful. It is also prone to errors if we need to go through and change anything about how we return. <strong>How can we effectively delegate the <code>setStatus</code> and return to a short amount of code that only needs to happen once in the function?</strong></p>\n\n<h2>A Macro Solution</h2>\n\n<p>A <code>c</code> system might solve this with a macro, something like:</p>\n\n<pre><code>#define M_InitTry Err error\n#define M_Try(statement) if (!(error = statement).success()) { goto catch_lab; }\n#define M_Catch catch_lab: if (!error.successs())\n#define M_Return return error\n</code></pre>\n\n<p>Which would be used like this:</p>\n\n<pre><code>Err execute( const ICommandContext &amp;context, ...) {\n    M_InitTry;\n\n    ...\n\n    M_Try(someFunctionCall(clientInput));\n    M_Try(someFunctionCall(otherClientInput));\n    ...\n\n    M_Catch {\n        // Other specific actions for dealing with the return.\n        results.setStatus(error);\n        error = SUCCESS;\n    }\n    M_Return;\n}\n</code></pre>\n\n<p>This cleans the code nicely, but is not particularly nice with the <code>goto</code>. It will cause problems if defining variables that might be skipped by a <code>goto</code>. </p>\n\n<h2>A delegating solution</h2>\n\n<p>I was trying to think of a more <code>C++</code> so I thought an RAII type delegate might help. Something like:</p>\n\n<pre><code>class DelegateToFunctionEnd {\n\n    typedef std::function&lt;void(void)&gt; EndFunction; \n\n    public: \n    DelegateToFunctionEnd(EndFunction endFunction) : callAtEnd(endFunction) { }\n\n    ~DelegateToFunctionEnd() {\n        callAtEnd();\n    }\n\n    private:         \n    EndFunction callAtEnd;\n};\n</code></pre>\n\n<p>Pretty simple, it does a delegate of the action until the function return by implementing the action in the destructor. You might use it like this:</p>\n\n<pre><code>Err execute( const ICommandContext &amp;context, ...) {\n    Err error;\n    DelegateToFunctionEnd del(std::bind(&amp;RoutineResults::setStatus, &amp;results, std::cref(error)));\n\n    error = someFunctionCall(clientInput));\n    if (error) return SUCCESS;\n\n    ...\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/ZbwyCW\" rel=\"nofollow noreferrer\">Live example.</a>\nThis solution seems ok, but has several problems:</p>\n\n<ol>\n<li>It is not as clear what is happening.</li>\n<li>It is easier to make a mistake about setting error correctly.</li>\n<li>You still need a large number of <code>if</code> statements to deal with the returns.</li>\n<li>The ability to configure the terminating action is not great.</li>\n<li>Dangerous if the user doesn't carefully consider the destruction order of items at function return.</li>\n</ol>\n\n<h2>A better solution?</h2>\n\n<p>This must be a problem that comes up often. Is there a general solution that provides a clean delegation of this set and returns type action?</p>\n\n<hr>\n\n<p><em>I have some unfortunate restrictions below. Don't let these stop you from answering because it might be helpful for future people.</em></p>\n\n<ol>\n<li>I am working on a c++03 limited system. We have <code>boost</code>, but no c++11. </li>\n<li>Embedded system and we have silly rules about exceptions and memory allocation.</li>\n</ol>\n"}, {"tags": ["c++", "dictionary", "operator-overloading"], "comments": [{"owner": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1532517332, "post_id": 51517480, "comment_id": 90003393, "body": "No its not my question ^"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 1, "creation_date": 1532517412, "post_id": 51517480, "comment_id": 90003453, "body": "@YoavLinder <i>&quot;i cant understand why the code doesnt compile and its not working.&quot;</i> &lt;- This isn&#39;t a question either, what is your question? What errors are you getting? What&#39;s not working?"}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1532517413, "post_id": 51517480, "comment_id": 90003457, "body": "<i>the code doesnt compile and its not working</i> Why doesn&#39;t it  compile? What errors are thrown? How is it not working?"}, {"owner": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "edited": false, "score": 0, "creation_date": 1532517461, "post_id": 51517480, "comment_id": 90003492, "body": "im not getting any errors, the compiler says &quot;Process finished with exit code 139 (interrupted by signal 11: SIGSEGV) &quot;"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1532517509, "post_id": 51517480, "comment_id": 90003536, "body": "Well, that&#39;s not a compiler error then. It&#39;s runtime error, you program accesses invalid memory address. I retracted my flag, since we now know your program is compiling fine."}, {"owner": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "edited": false, "score": 0, "creation_date": 1532517574, "post_id": 51517480, "comment_id": 90003586, "body": "i am new to all this operator overloading thing (i just started using cpp, was coding with c before) and i have an exrecise of making a dictionary but i just couldnt find any solution in the internet for this problem i mentioned"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1532518278, "post_id": 51517480, "comment_id": 90004030, "body": "Solution? Easy! <code>using dictionary = std::map&lt;std::string, int&gt;;</code> Done."}, {"owner": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "edited": false, "score": 0, "creation_date": 1532518327, "post_id": 51517480, "comment_id": 90004060, "body": "thats not the point of the exrecise lol"}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1532519422, "post_id": 51517480, "comment_id": 90004764, "body": "@YoavLinder Your <code>operator[]</code> is broken."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "edited": false, "score": 0, "creation_date": 1532519850, "post_id": 51517631, "comment_id": 90005066, "body": "can you explain me please the lines &quot;this-&gt;values.push_back(Node&lt;V&gt;());      return this-&gt;values.back().value;&quot;"}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "reply_to_user": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "edited": false, "score": 1, "creation_date": 1532520508, "post_id": 51517631, "comment_id": 90005553, "body": "@YoavLinder Edited. Basically your <code>operator[]</code> should return reference to the corresponding entry in <code>values</code>. If <code>str</code> is not already present, you need to create entries in both <code>keys</code> and <code>values</code>."}], "tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": true, "score": 2, "last_activity_date": 1532520391, "last_edit_date": 1532520391, "creation_date": 1532517654, "answer_id": 51517631, "question_id": 51517480, "link": "https://stackoverflow.com/questions/51517480/operator-overloading-subscript-and-assignment-operator-for-multiple-tasks/51517631#51517631", "title": "Operator Overloading subscript and assignment operator for multiple tasks", "body": "<pre><code>return lol;\n</code></pre>\n\n<p>You return a reference to a temporary. <code>lol</code> gets destroyed at <code>}</code></p>\n\n<p>When <code>str</code> is not found, you also need to insert a default <code>Node&lt;V&gt;</code> in values.</p>\n\n<pre><code>template &lt;typename K, typename  V&gt;\nV&amp; Dict&lt;K,V&gt;::operator[](const K &amp;str)\n{\n    for(int i = 0; i &lt; this-&gt;keys.size(); i++)\n    {\n        if(this-&gt;keys[i] == str)\n        {\n            // Found, return corresponding value by reference.\n            return this-&gt;values[i].value;\n        }\n    }\n    // Not found, Insert into keys and values.\n    this-&gt;keys.push_back(str);\n    this-&gt;values.push_back(Node&lt;V&gt;()); //this will insert a default corresponding value in values.\n\n    return this-&gt;values.back().value; //this will return reference to the recently added value node \n}\n</code></pre>\n\n<p>See <a href=\"https://wandbox.org/permlink/TmdBrAuJeNHVbEgn\" rel=\"nofollow noreferrer\">code in action</a></p>\n"}, {"tags": [], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "is_accepted": false, "score": 0, "last_activity_date": 1532520907, "last_edit_date": 1532520907, "creation_date": 1532520514, "answer_id": 51518507, "question_id": 51517480, "link": "https://stackoverflow.com/questions/51517480/operator-overloading-subscript-and-assignment-operator-for-multiple-tasks/51518507#51518507", "title": "Operator Overloading subscript and assignment operator for multiple tasks", "body": "<p>I think you are overcomplicating things here a bit.</p>\n\n<p>First of all, as Yksisarvinen has already mentioned in the comment above, you are defining a templated class in a translation unit which is only possible under certain circumstances. It's explained fairly well in the link Yksisarvinen has posted.</p>\n\n<p>Second, as Gaurav has noticed, you are returning a temporary from a function and since you said that your code compiles, I suspect you are suppressing the compiler warnings, which isn't the best practice, as it leads to nasty bugs.</p>\n\n<p>Anyway, to your question of creating a dictionary, you should be just fine with using only one storage container for the keys and values. Then, when you want to access the value using some key, you can go through the container and look if the key already exists, if it does, return the value, if not, insert the key with a default-constructed value and return it.</p>\n\n<p>It can be as simple as this (Dict.h):</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\ntemplate &lt;class TKey, class TValue&gt;\nclass Dict {\n    struct KeyValue {\n        TKey key;\n        TValue value;\n        KeyValue(TKey key, TValue value)\n            : key(move(key))\n            , value(move(value)) {}\n    };\n\n    vector&lt;KeyValue&gt; pairs;\n\npublic:\n    Dict() = default;\n\n    TValue&amp; operator[](const TKey &amp;key) {\n        auto match = find_if(pairs.begin(), pairs.end(),\n            [&amp;key](const KeyValue&amp; pair) { return pair.key == key; }\n        );\n        if (match != pairs.end()) {\n            return match-&gt;value;\n        }\n        pairs.emplace_back(key, TValue());\n        return pairs.back().value;\n    }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/590250e39ac32cf1\" rel=\"nofollow noreferrer\">LIVE DEMO</a></p>\n\n<hr>\n\n<p>Another bad habit I can see in your code is not using namespace scope resolution operator, but rather polluting the global namespace with that <code>using namespace std;</code> statement. That can hit you pretty badly if you start using more libraries and generally working on bigger codebases.</p>\n"}], "owner": {"reputation": 123, "user_id": 9208636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87be994e901cd4a58ff9f6cf351eda8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yoav Linder", "link": "https://stackoverflow.com/users/9208636/yoav-linder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 51517631, "answer_count": 2, "score": 0, "last_activity_date": 1532523102, "creation_date": 1532517156, "last_edit_date": 1532523102, "question_id": 51517480, "link": "https://stackoverflow.com/questions/51517480/operator-overloading-subscript-and-assignment-operator-for-multiple-tasks", "title": "Operator Overloading subscript and assignment operator for multiple tasks", "body": "<p>I want to overload the operator <code>[]</code> and <code>=</code> for multiple tasks (in a dictionary class that I made).  </p>\n\n<p>when I write for example:</p>\n\n<pre><code>d[\"Home\"] = 5;\n</code></pre>\n\n<p>and if there is no <code>\"Home\"</code> key, it will create a key and assign the value to <code>5</code>, and if there is the key, it will change its value to <code>5</code>.</p>\n\n<p>and also, when writing </p>\n\n<pre><code>int i = d[\"Home\"];\n</code></pre>\n\n<p>the operator will return the value of the <code>\"Home\"</code> key.\nI have tried to do that with <code>2</code> classes (<code>Dict and Node</code>) but I can't understand why the code doesn't compile and it's not working.</p>\n\n<hr>\n\n<p><strong>this is the Dict header:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include \"Node.h\"\nusing namespace std;\n\n\ntemplate &lt;class K, class V&gt;\nclass Dict {\nprotected:\n    vector&lt;K&gt; keys;\n    vector&lt;Node&lt;V&gt;&gt; values;\npublic:\n    Dict();\n    V&amp; operator[](const K &amp;str);\n};\n</code></pre>\n\n<hr>\n\n<p><strong>this is the Dict cpp:</strong></p>\n\n<pre><code>#include \"Dict.h\"\n\ntemplate &lt;class K, class V&gt;\nDict&lt;K,V&gt;::Dict() {};\n\ntemplate &lt;typename K, typename  V&gt;\nV&amp; Dict&lt;K,V&gt;::operator[](const K &amp;str) {\n    V lol;\n    for(int i = 0; i &lt; this-&gt;keys.size(); i++){\n        if(this-&gt;keys[i] == str){\n            Node&lt;V&gt; n = this-&gt;values[i];\n            return n.value;\n        }\n    }\n    this-&gt;keys.push_back(str);\n    return lol;\n}\ntemplate class Dict&lt;string, int&gt;;\n</code></pre>\n\n<hr>\n\n<p><strong>this is the Node header:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\ntemplate &lt;class V&gt;\nclass Node {\nprotected:\n    Node&amp; operator=(const V&amp; val);\npublic:\n    V value;\n};\n</code></pre>\n\n<p>this is the node cpp:</p>\n\n<pre><code>#include \"Node.h\"\ntemplate &lt;typename  V&gt;\nNode&lt;V&gt;&amp; Node&lt;V&gt;::operator=(const V &amp;dict) {\n    this-&gt;value = dict;\n    return *this;\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>and this is the main:</strong></p>\n\n<pre><code>int main() {\n    Dict&lt;string, int&gt; d;\n\n    d[\"Home\"] = 6;\n    cout &lt;&lt; d[\"Home\"] &lt;&lt; endl;\n    cout &lt;&lt; \"Home2\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "storage-class-specifier"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1532515467, "post_id": 51516871, "comment_id": 90002293, "body": "There are four storage duration models in C++. None of them mentions stack nor code segment. Your second statement is not portable C++."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1532516063, "post_id": 51516871, "comment_id": 90002633, "body": "&quot;<code>char* arr = &quot;Hello&quot;;</code>&quot; should be <code>const char* arr = &quot;Hello&quot;;</code>"}, {"owner": {"reputation": 610, "user_id": 1273923, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1b228f50ab7d6a792f1ba24ebd11be33?s=128&d=identicon&r=PG", "display_name": "RKum", "link": "https://stackoverflow.com/users/1273923/rkum"}, "edited": false, "score": 0, "creation_date": 1532516776, "post_id": 51516871, "comment_id": 90003086, "body": "Thanks for the info."}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1532515350, "creation_date": 1532515350, "answer_id": 51516926, "question_id": 51516871, "link": "https://stackoverflow.com/questions/51516871/variable-storage-location/51516926#51516926", "title": "Variable storage location", "body": "<p>No. The string literal is not declared in any segment. </p>\n\n<p>It's got <em>static storage duration</em> and it's read-only. </p>\n\n<p>Because it's read-only, assigning its address to a <code>char*</code> is incorrect. Change it to <code>char const* arr = \"...\";</code></p>\n"}], "owner": {"reputation": 610, "user_id": 1273923, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1b228f50ab7d6a792f1ba24ebd11be33?s=128&d=identicon&r=PG", "display_name": "RKum", "link": "https://stackoverflow.com/users/1273923/rkum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1532515444, "answer_count": 1, "score": 0, "last_activity_date": 1532515350, "creation_date": 1532515185, "question_id": 51516871, "link": "https://stackoverflow.com/questions/51516871/variable-storage-location", "closed_reason": "Duplicate", "title": "Variable storage location", "body": "<p>When we declare a variable as</p>\n\n<pre><code>char arr[] = \"Hello\";\n</code></pre>\n\n<p>then the string \"Hello\" above is located in stack.</p>\n\n<p>But when we declare a variable as</p>\n\n<pre><code>char* arr = \"Hello\";\n</code></pre>\n\n<p>then the string \"Hello\" is declared in stack or code segment?\nIf code segment then why code segment and not in stack?</p>\n"}, {"tags": ["c++", "error-handling", "c++14", "stringstream", "string-parsing"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532515222, "post_id": 51516630, "comment_id": 90002113, "body": "Btw, your code is <i>not</i> reading garbage as -2147483648 and 2147483648 are in the same equivalence class in Z/2^32, so when using some <code>uint32_t</code>, those are indistinguishable."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532515804, "post_id": 51516630, "comment_id": 90002478, "body": "@BaummitAugen: agreed, I understand that now. Still, I need this to fail because -&lt;something&gt; is not a valid unsigned value."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532516215, "post_id": 51516630, "comment_id": 90002726, "body": "@BaummitAugen Great dupe find."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532516282, "post_id": 51516630, "comment_id": 90002771, "body": "@BaummitAugen: how is it a duplicate of the question that has no answers to my question? I specifically stated that I want to avoid hand-written heuristics like checking whether the first character is <code>-</code>. The single-handed question closures are getting out of hand, no pun intended."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1532516400, "post_id": 51516630, "comment_id": 90002851, "body": "@VioletGiraffe Sure it does. You&#39;ve been given  enough pointers and an exact duplicate of what you are trying to achieve. Baum knows his stuff."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532516442, "post_id": 51516630, "comment_id": 90002885, "body": "@VioletGiraffe It&#39;s a dupe because both ask how to check for this with standard streams. The answer to both is &quot;You can&#39;t&quot;. Which makes sense if you drop the incorrect notion of thinking of 1u as the number 1 and accept it&#39;s a shorthand notation for the equivalence class that contains the number 1 instead."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532516559, "post_id": 51516630, "comment_id": 90002949, "body": "@BaummitAugen: Does the C++ standard define anything through equivalence classes, though?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1532516750, "post_id": 51516630, "comment_id": 90003070, "body": "@VioletGiraffe Yes. <i>&quot;Unsigned integers shall obey the laws of arithmetic modulo 2^n where n is the number of bits in the value representation of that particular size of integer.&quot;</i> 6.9.1/4 in N4659. And that arithmetic is defined through equivalence classes. That&#39;s not  a C++ thing, that&#39;s a math thing."}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1532515111, "answer_count": 0, "score": 0, "last_activity_date": 1532514783, "creation_date": 1532514503, "last_edit_date": 1532514783, "question_id": 51516630, "link": "https://stackoverflow.com/questions/51516630/stdistringstream-error-handling-difficulties-when-reading-negative-values-int", "closed_reason": "Duplicate", "title": "std::istringstream: error handling difficulties when reading negative values into unsigned variables", "body": "<p>I've been using <code>std::istringstream</code> for parsing strings for a long time, and reading valid values was never a problem. However, I have discovered some difficulties and oddities performing operations that should be invalid and detecting failures.</p>\n\n<p>See the code (or <a href=\"https://ideone.com/QwCNal\" rel=\"nofollow noreferrer\">try it on Ideone</a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;stdint.h&gt;\n\nint main() {\n\n    std::istringstream ss(\"-2147483648\");\n    uint32_t i = 0;\n    try {ss &gt;&gt; i;}\n    catch (...) {\n       i = -3;\n    }\n\n    if (ss.fail())\n       i = -3;\n\n    std::cout &lt;&lt; i;\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm trying to read <code>INT_MIN</code>, a signed value, into a <code>uint32_t</code>. I expect a failure of some sort, indicated by the magic value <code>-3</code>. And yet, what I see in the output is <code>2147483648</code>. How to properly detect a failure in this situation?</p>\n\n<p>If <code>i</code> was <code>uint64_t</code>, its value is <code>18446744071562067968</code>.</p>\n\n<p>I need this call to fail because I don't need my code silently reading garbage. Can my goal be achieved with <code>std::stringstream</code>? I would hate to implement my own parser from scratch, or to wrap the simple <code>ss &gt;&gt; value;</code> in a dozen sanity check heuristics.</p>\n"}, {"tags": ["c++", "visual-studio-code", "unions", "forward-declaration"], "comments": [{"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 1, "creation_date": 1532514726, "post_id": 51516513, "comment_id": 90001791, "body": "Is this really what your file looks like ? Seems like <code>DataUnion</code> is defined in different namespace (mate::)."}, {"owner": {"reputation": 135, "user_id": 8266730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c84d401155bc61fd2fe4e5f201b2?s=128&d=identicon&r=PG&f=1", "display_name": "Cedric", "link": "https://stackoverflow.com/users/8266730/cedric"}, "reply_to_user": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1532515340, "post_id": 51516513, "comment_id": 90002202, "body": "Sorry @Filip-Ko\u010dica I updated my post with DataType definition. Class <code>Data</code>, union <code>DataUnion</code> and Enum <code>DataType</code> are in the same namespace <code>mate</code>"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 0, "creation_date": 1532515895, "post_id": 51516513, "comment_id": 90002528, "body": "Cannot reproduce: <a href=\"http://coliru.stacked-crooked.com/a/a5e451e681ec9bc4\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/a5e451e681ec9bc4</a>"}, {"owner": {"reputation": 135, "user_id": 8266730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c84d401155bc61fd2fe4e5f201b2?s=128&d=identicon&r=PG&f=1", "display_name": "Cedric", "link": "https://stackoverflow.com/users/8266730/cedric"}, "reply_to_user": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 1, "creation_date": 1532517617, "post_id": 51516513, "comment_id": 90003612, "body": "It seems like it&#39;s a bug from my VS Code"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532519567, "post_id": 51516513, "comment_id": 90004861, "body": "<code>std::</code> or <code>boost::</code> <code>variant</code> might be useful to replace your union."}], "answers": [{"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": false, "score": 0, "last_activity_date": 1532514396, "creation_date": 1532514396, "answer_id": 51516592, "question_id": 51516513, "link": "https://stackoverflow.com/questions/51516513/cpp-forward-class-declaration-and-union/51516592#51516592", "title": "Cpp forward class declaration and union", "body": "<p>I <a href=\"http://coliru.stacked-crooked.com/a/3a88181d4827806b\" rel=\"nofollow noreferrer\">cannot reproduce your error</a>, but you never define <code>DataType</code>. Following Clang's output <a href=\"http://coliru.stacked-crooked.com/a/3a88181d4827806b\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>main.cpp:18:5: error: unknown type name 'DataType'\n    DataType type;\n    ^\nmain.cpp:23:10: error: unknown type name 'DataType'\n    Data(DataType t);\n         ^\nmain.cpp:24:10: error: unknown type name 'DataType'\n    Data(DataType t, DataUnion v);\n         ^\n3 errors generated.\n</code></pre>\n\n<p>Provide a definition and you should be good to go. This seems to have nothing to do with the DataUnion thing you have.</p>\n"}], "owner": {"reputation": 135, "user_id": 8266730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c84d401155bc61fd2fe4e5f201b2?s=128&d=identicon&r=PG&f=1", "display_name": "Cedric", "link": "https://stackoverflow.com/users/8266730/cedric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532514534, "creation_date": 1532514143, "last_edit_date": 1532514534, "question_id": 51516513, "link": "https://stackoverflow.com/questions/51516513/cpp-forward-class-declaration-and-union", "title": "Cpp forward class declaration and union", "body": "<p>I get the following error from VS Code when I try to use Cpp forward class declaration within union definition.</p>\n\n<pre><code>variable \"mate::Data\" is not a type name\nclass std::vector&lt;&lt;error-type&gt; *&gt;\n</code></pre>\n\n<p>Is there something wrong or It's a VS Code bug ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/fZ2ke.png\" rel=\"nofollow noreferrer\">Cpp forward class declaration and union - VS Code error</a></p>\n\n<pre><code>class Data;\n\nenum DataType\n{\n    DATA_UNIT_TYPE_BOOLEAN,\n    DATA_UNIT_TYPE_NUMBER,\n    DATA_UNIT_TYPE_NUMBER_POSITIVE_INFINITY,\n    DATA_UNIT_TYPE_NUMBER_NEGATIVE_INFINITY,\n    DATA_UNIT_TYPE_STRING,\n    DATA_UNIT_TYPE_OBJECT,\n    DATA_UNIT_TYPE_ARRAY,\n    DATA_UNIT_TYPE_NULL,\n};\n\nunion DataUnion {\n    bool boolValue;\n    double numberValue;\n    std::string* stringValue;\n    std::vector&lt;Data*&gt;* arrayValue; // &lt;- error here \n    std::map&lt;std::string, Data*&gt;* objectValue; // &lt;- and there\n};\n\nclass Data\n{\nprivate:\n    DataType type;\n    DataUnion value;\n    bool hasNullValue;\npublic:\n    ~Data();\n    Data(DataType t);\n    Data(DataType t, DataUnion v);\n};\n</code></pre>\n"}, {"tags": ["c++", "regex", "stl", "std"], "owner": {"reputation": 11, "user_id": 10132603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3a760e805e09a269982a91205327474?s=128&d=identicon&r=PG&f=1", "display_name": "xflr6", "link": "https://stackoverflow.com/users/10132603/xflr6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1532513730, "answer_count": 0, "score": 1, "last_activity_date": 1532516269, "creation_date": 1532513423, "last_edit_date": 1532516269, "question_id": 51516284, "link": "https://stackoverflow.com/questions/51516284/on-the-use-of-std-before-function-regex-replace", "closed_reason": "Duplicate", "title": "on the use of std:: before function regex_replace", "body": "<p>Either I misuse the <code>std::</code> in front of functions, either there is something I do not understand when using the <code>regex_replace</code> function.</p>\n\n<p>For example, in the piece of code below (the latter compiles and runs correctly on my machine), I don't understand why the scope specification <code>std::</code> before <code>regex_replace</code> is not required by my compiler (<code>g++ -Wall -std=c++11</code> v. 6.4.0 on cygwin), whereas all other <code>std::</code> occurences are.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\nint main()\n{\n    std::string myString(\"myRegexReplaceTest\");\n    std::cout &lt;&lt; myString &lt;&lt; std::endl;\n    std::cout &lt;&lt; regex_replace(myString, std::regex(\"a|e|i|o|u|y\"), \"[$&amp;]\") &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>What did I miss ?</p>\n\n<p>Regards,\nxflr6.</p>\n\n<p>Edit : As pointed out to me by juanchopanza, the answer is <a href=\"https://stackoverflow.com/a/8111750/10132603\">here</a>, although my question is rised in a very different way... And the answer is much more complete than what I first expected. Thanks.</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 698, "user_id": 8682088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ol8Oh.jpg?s=128&g=1", "display_name": "Kamil Szelag", "link": "https://stackoverflow.com/users/8682088/kamil-szelag"}, "is_accepted": true, "score": 0, "last_activity_date": 1532514707, "creation_date": 1532514707, "answer_id": 51516691, "question_id": 51516027, "link": "https://stackoverflow.com/questions/51516027/matlabs-imfinfo-in-opencv/51516691#51516691", "title": "MATLAB&#39;s imfinfo in openCV", "body": "<p>As far as I know, there is no similar method. You have to access each property and create own string/structure.</p>\n"}], "owner": {"reputation": 1661, "user_id": 1877002, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8a1c3de36e3fb239c77f4439d1866894?s=128&d=identicon&r=PG", "display_name": "Benny K", "link": "https://stackoverflow.com/users/1877002/benny-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 51516691, "answer_count": 1, "score": 0, "last_activity_date": 1532514707, "creation_date": 1532512657, "question_id": 51516027, "link": "https://stackoverflow.com/questions/51516027/matlabs-imfinfo-in-opencv", "title": "MATLAB&#39;s imfinfo in openCV", "body": "<p>MATLAB has a nice function <a href=\"https://www.mathworks.com/help/matlab/ref/imfinfo.html\" rel=\"nofollow noreferrer\">imfinfo</a> from which I can know image dimensions without really loading it. Is there a similar function in openCV (C++)?</p>\n"}, {"tags": ["c++", "language-lawyer", "destructor", "typedef", "scope-resolution"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1532511984, "post_id": 51515703, "comment_id": 89999952, "body": "You&#39;re going to have to show how you initialised <code>ptr</code> using placement <code>new</code>.   As you&#39;ve worded it, you could have done that in various ways, and the technique to &quot;undo&quot; the effect will depend on how it was done."}, {"owner": {"reputation": 774, "user_id": 4838452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/415db9ee399cfd4f383700942b45f977?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Klauer", "link": "https://stackoverflow.com/users/4838452/alexander-klauer"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1532512467, "post_id": 51515703, "comment_id": 90000285, "body": "@Peter I edited the question"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1532512541, "post_id": 51515703, "comment_id": 90000344, "body": "It&#39;s not very satisfying from a language lawyer perspective, but <code>using T = A::Ptr; ptr-&gt;~T();</code> is accepted by both."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532517821, "post_id": 51515703, "comment_id": 90003741, "body": "Just reread everything concerning destructors, the current revision of the answer in the linked post holds for C++17, but not C++11. In C++11 the grammar is ambiguous (or so I think), and that is probably why it was changed. <code>ptr-&gt;A::Ptr::~Ptr();</code> is correct, but clang rejects it and the workaround as chris mentioned is to alias the type."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1532518542, "post_id": 51515703, "comment_id": 90004194, "body": "Nope, it&#39;s <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1753\" rel=\"nofollow noreferrer\">cwg #1753</a>, which is unrelated, but does change things."}], "owner": {"reputation": 774, "user_id": 4838452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/415db9ee399cfd4f383700942b45f977?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Klauer", "link": "https://stackoverflow.com/users/4838452/alexander-klauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1532512446, "creation_date": 1532511690, "last_edit_date": 1532512446, "question_id": 51515703, "link": "https://stackoverflow.com/questions/51515703/formally-correct-way-to-explicitly-call-destructor-of-typedefd-class-type", "title": "Formally correct way to explicitly call destructor of typedef&#39;d class type", "body": "<p>This question is related to: <a href=\"https://stackoverflow.com/questions/45873952/c-explicitly-call-destructor-of-template-parameters-typedef\">C++: Explicitly call destructor of template parameter&#39;s typedef</a></p>\n\n<p>I have the following:</p>\n\n<pre><code>class A {\npublic:\n  typedef std::shared_ptr&lt;A&gt; Ptr;\n  \u2026\n};\n</code></pre>\n\n<p>Later on, I have a variable <code>ptr</code> of type <code>A::Ptr *</code> obtained via placement new, essentially by a call to a function like this:</p>\n\n<pre><code>A::Ptr * f(A::Ptr obj) {\n  void * placement = get_legacy_storage(sizeof(obj));\n  return new(placement) A::Ptr(obj);\n}\n</code></pre>\n\n<p>I now want to undo the placement-new with an explicit destructor call. I do it like this:</p>\n\n<pre><code>ptr-&gt;A::Ptr::~Ptr();\n</code></pre>\n\n<p>As remarked in a comment to an answer to the linked question, this works on gcc, but not with clang. \u00a7 12.4p13 of the standard says</p>\n\n<blockquote>\n  <p>In an explicit destructor call, the destructor name appears as a  ~ followed by a <em>type-name</em> or <em>decltype-specifier</em> that denotes the destructor's class type.</p>\n</blockquote>\n\n<p>but I'm unsure how this interacts with typedefs and scope resolution.\nSo, my questions are:</p>\n\n<ol>\n<li>What are the C++-11 standards-compliant ways of explicitly calling the destructor in the above situation (ideally without revealing the type of <code>Ptr</code>)?</li>\n<li>Do the answers for 1 work in gcc and/or clang? If not, what are the generally accepted workarounds?</li>\n</ol>\n"}, {"tags": ["c++", "gcc", "floating-point"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 5, "creation_date": 1532511472, "post_id": 51515592, "comment_id": 89999606, "body": "Read <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a> -- and then at least use <code>double</code>. For monetary calculations, the only correct way is <i>fixed point math</i> (use integers, define where your decimal point should be)"}, {"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "edited": false, "score": 0, "creation_date": 1532511802, "post_id": 51515592, "comment_id": 89999833, "body": "it comes out with the same output <code>499.834</code>, when I use <code>double P(float PV, float r, int t)</code>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 5, "creation_date": 1532511804, "post_id": 51515592, "comment_id": 89999836, "body": "<code>PV&#47;1</code> looks really really odd. Why do you divide through <code>1</code>? It does not alter the result."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1532511957, "post_id": 51515592, "comment_id": 89999931, "body": "@WhitequillRiclo, They meant to make it a double <i>before</i> losing accuracy from the calculation due to the more limited precision of float. I&#39;d bet on the incorrect formula implementation before precision, though."}, {"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1532511991, "post_id": 51515592, "comment_id": 89999958, "body": "@mch: it&#39;s the formula for a loan payment: <a href=\"http://financeformulas.net/Loan_Payment_Formula.html\" rel=\"nofollow noreferrer\">financeformulas.net/Loan_Payment_Formula.html</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1532512076, "post_id": 51515592, "comment_id": 90000004, "body": "you&#39;re getting the formula incorrectly. It should be <code>r * PV&#47;(1 - pow(1 + r, -t))</code>. Remember subtraction has lower precedence than division"}, {"owner": {"reputation": 111, "user_id": 5088427, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1631ae0925d70af9e9fe6c6521f20c47?s=128&d=identicon&r=PG&f=1", "display_name": "KenyKeny", "link": "https://stackoverflow.com/users/5088427/kenykeny"}, "edited": false, "score": 1, "creation_date": 1532512303, "post_id": 51515592, "comment_id": 90000147, "body": "Should it be <code>(r * PV&#47;(1-pow((1+r),-t)))</code>?.By adding more braces can clarify the computation order."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1532512381, "post_id": 51515592, "comment_id": 90000214, "body": "The result should not be <code>500</code>, it should be <code>605.72</code>, accourding to the calculator at your link. When I add the missing parantheses, I get <code>605.718</code> as result."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1532512791, "post_id": 51515592, "comment_id": 90000519, "body": "I voted for duplicate before realizing the expression was also wrongly paranthesized. Anyways, doing this type of calculations in floating-point <b>is</b> a problem and the other one seems to be answered in comments...."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1532537697, "post_id": 51515592, "comment_id": 90016953, "body": "Don&#39;t even bother thinking about compiler bugs at this level. The chances that you&#39;re going to find one is just way to low."}], "answers": [{"tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 1, "last_activity_date": 1532555404, "creation_date": 1532555404, "answer_id": 51528182, "question_id": 51515592, "link": "https://stackoverflow.com/questions/51515592/floating-point-error-in-c/51528182#51528182", "title": "Floating point error in c++", "body": "<p>The code:</p>\n\n<pre><code>return(r * PV/1-pow((1+r),-t));\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>return(r * PV/(1-pow((1+r),-t)));\n</code></pre>\n\n<p>and the expected result is about 605.718, not 500.</p>\n"}], "owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 51528182, "answer_count": 1, "score": -1, "last_activity_date": 1532555404, "creation_date": 1532511336, "last_edit_date": 1532512148, "question_id": 51515592, "link": "https://stackoverflow.com/questions/51515592/floating-point-error-in-c", "title": "Floating point error in c++", "body": "<p>I have found a simple floating point error and I was wondering if there is a way around it. I'm compiling in Haiku OS.  I'm in Haiku r1 Alpha 4</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nfloat P(float PV, float r, int t){\n  return(r * PV/1-pow((1+r),-t));\n}\n\nint main(void){\n  float PV = 100000;\n  float r = .005;\n  int t = 350;\n\n  std::cout &lt;&lt; \"A loan valued at $\" &lt;&lt; PV &lt;&lt; \" at a rate of %\" &lt;&lt; r &lt;&lt; \" with a payment period of \" &lt;&lt; t &lt;&lt; \"months would be $\" &lt;&lt; P(PV,r,t) &lt;&lt; \", per-payment.\\n\";\n\n  return 0;\n}\n</code></pre>\n\n<p>When I run it <code>P(PV,r,t)</code> comes out as <code>499.834</code> it should be <code>500</code>. Though if I set <code>r = 0.06</code> <code>P</code> is correct and comes out as <code>P = 6000</code>.</p>\n\n<p>Maybe it's a compiler error. I'm using gcc version 2.95.3-haiku-121101.</p>\n"}, {"tags": ["c++", "2d", "game-engine"], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1532515699, "creation_date": 1532515699, "answer_id": 51517050, "question_id": 51515378, "link": "https://stackoverflow.com/questions/51515378/storing-and-accessing-tile-properties-in-c/51517050#51517050", "title": "Storing and accessing tile properties in C++", "body": "<p>Why are you reinventing OO? Objects already have a type, no need for <code>TileType</code>. You may want to read up on <code>virtual</code> functions. </p>\n"}, {"tags": [], "owner": {"reputation": 1493, "user_id": 4377932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f9nFx.jpg?s=128&g=1", "display_name": "artcorpse", "link": "https://stackoverflow.com/users/4377932/artcorpse"}, "is_accepted": false, "score": 1, "last_activity_date": 1532516485, "creation_date": 1532516485, "answer_id": 51517281, "question_id": 51515378, "link": "https://stackoverflow.com/questions/51515378/storing-and-accessing-tile-properties-in-c/51517281#51517281", "title": "Storing and accessing tile properties in C++", "body": "<p>Try using a <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">factory method</a>.</p>\n\n<p>The simplest way to do this is to use a switch.</p>\n\n<pre><code>Tile* createTile(TileType tileType) {\n    switch(tileType) {\n    case TileType.floor: return new Floor;\n    case TileType.wall: return new Wall;\n    }\n    return nullptr;\n}\n</code></pre>\n\n<p>This is usually not recommended as you have to update the factory each time you add a new type.</p>\n\n<p>Alternatively you could use some trick to register the types to the factory.\nOne approach is the one described <a href=\"https://stackoverflow.com/a/46769462/4377932\">here</a>. There are a lot more strategies.</p>\n"}, {"tags": [], "owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "is_accepted": false, "score": 0, "last_activity_date": 1533070878, "creation_date": 1533070878, "answer_id": 51621995, "question_id": 51515378, "link": "https://stackoverflow.com/questions/51515378/storing-and-accessing-tile-properties-in-c/51621995#51621995", "title": "Storing and accessing tile properties in C++", "body": "<p>There are several approaches here, depending on what exactly you want the tiles in your game to do. You can go the object oriented way, by having distinct classes for the different tile types that you have, or you can go simpler and just have a bitset that represent the different abilities your tiles will have. </p>\n\n<p>This choice will depend on what you want to do. </p>\n\n<h2>Bitset only</h2>\n\n<p>Oftentimes, the bitset-only variant is enough. To do that you'll need something along those lines:</p>\n\n<p>You most probably want a set of flags which will represent different abilities of your tiles (e.g IsWalkable, IsWater, etc). Something similar to this:</p>\n\n<pre><code>struct TileFlag\n{\n    bool m_IsWalkable : 1;\n    bool m_IsWater : 1;\n    //other flags you might need\n};\n</code></pre>\n\n<p>With this in mind, your Tiles would be something along those lines (Texture and Texture manager are there just for the example):</p>\n\n<pre><code>struct Tile\n{\n    void Render();\n\n    void Serialize(const boost::property_tree::ptree&amp; tileData)\n    {\n        m_Flags.m_IsWalkable = tileData.get&lt;bool&gt;(\"walkable\", false);\n        m_Flags.m_IsWater = tileData.get&lt;bool&gt;(\"water\", false);\n        std::string texturePath = tileData.get&lt;std::string&gt;(\"texturePath\", \"\");\n        m_TileTexture = TextureManager::GetOrLoad(texturePath);\n    }\n\n    TileFlags m_Flags;\n    std::shared_ptr&lt;Texture&gt; m_TileTexture;\n};\n</code></pre>\n\n<p>You would need some kind of registry, where you contain all of your tiles, so that your levels can reference the tiles. This registry can be as simple as an std::map.</p>\n\n<p>Some example code:</p>\n\n<pre><code>struct TileRegistry\n{\n    void LoadTiles(const boost::property_tree::ptree&amp; tiles)\n    {\n        for (boost::property_tree::ptree::value_type&amp; tileType : tiles.get_child(\"tileTypes\"))\n        {\n            std::unique_ptr&lt;Tile&gt; newTile = std::make_unique&lt;Tile&gt;();\n            newTile-&gt;Serialize(tileType.second);\n            m_Tiles[tileType.first] = std::move(newTile);\n        }\n    }\n    Tile* FindTile(const std::string&amp; tileType)\n    {\n        Tile* result = nullptr;\n        auto search = m_Tiles.find(tileType);\n        if (search != m_Tiles.end()) {\n            result = search-&gt;second.get();\n        } \n        return result;\n    }\n    std::map&lt;std::string, std::unique_ptr&lt;Tile&gt;&gt; m_Tiles;\n};\n</code></pre>\n\n<p>Then, when you load your levels, you just search for the Tile Type in the TileRegistry, and you'll get a pointer to your Tile.</p>\n\n<h2>OOP Style object inheritance</h2>\n\n<p>This approach would borrow a lot from the previous one, with the biggest difference being in how you are going to create your tiles. You are going to need some kind of Factory, as @artcorpse mentions. </p>\n\n<p>If you want to go a bit more generic, you can do some automation magic with a few macros:</p>\n\n<pre><code>struct TileFactory\n{\n    static std::map&lt;std::string, CreateFunctionPtr&gt; m_FactoryFunctors;\n    std::unique_ptr&lt;ITile&gt; CreateTile(const std::string&amp; tileType) \n    {\n        std::unique_ptr&lt;ITile&gt; result;\n        auto search = m_FactoryFunctors.find(tileType);\n        if (search != m_FactoryFunctors.end()) {\n            auto creationFunctionPtr = search-&gt;second;\n            result = creationFunctionPtr(); //Notice the function invocation here\n        } \n        return result;\n    }\n};\n\ntemplate&lt;typename T&gt;\nstruct TileRegistrator\n{\n    TileRegistrator(const std::string&amp; tileTypeName){\n        TileFactory::m_FactoryFunctors[tileTypeName] = &amp;T::CreateTile;\n    }\n};\n\n#define DECLARE_TILE_TYPE(TileType) \\\nstatic std::unique_ptr&lt;ITile&gt; CreateTile() { return std::make_unique&lt;TileType&gt;();} \\\nstatic const TileRegistrator&lt;TileType&gt; s_Registrator;\n\n#define DEFINE_TILE_TYPE(TileType) \\\nconst TileRegistrator&lt;TileType&gt; TileType::s_Registrator = {#TileType};\n</code></pre>\n\n<p>And how you use those macros:</p>\n\n<pre><code>struct ITile\n{\n    virtual ~ITile() = default; //Don't forget a virtual destructor when you have object which can be accessed by pointer to Base!\n    virtual bool IsWalkable() const = 0;\n    virtual bool IsSailable() const = 0;\n    virtual void Serialize(const boost::property_tree::ptree&amp; tileData) = 0;\n};\n</code></pre>\n\n<p>In your .h files, e.g. OceanTile.h:</p>\n\n<pre><code>struct OceanTile : public ITile\n{\n    DECLARE_TILE_TYPE(OceanTile);\n    bool IsWalkable() const override;\n    bool IsSailable() const override;\n    void Serialize(const boost::property_tree::ptree&amp; tileData) override;\n    int m_WavesIntensity{0};\n};\n</code></pre>\n\n<p>In your .cpp files, e.g. OceanTile.cpp:</p>\n\n<pre><code>DEFINE_TILE_TYPE(OceanTile)\n\nbool OceanTile::IsWalkable() const { \n    return false;\n}\n\nbool OceanTile::IsSailable() const { \n    return true;\n}\nvoid OceanTile::Serialize(const boost::property_tree::ptree&amp; tileData) {\n    m_WavesIntensity = tileData.get&lt;int&gt;(\"WavesIntensity\", 0);\n}\n</code></pre>\n\n<p>And creating a new tile object, asuming you know its type as a string (e.g. coming from a data file is very simple:</p>\n\n<pre><code>void LoadTiles(const boost::property_tree::ptree&amp; levelData)\n{\n    for (boost::property_tree::ptree::value_type&amp; tile : levelData.get_child(\"levelTiles\"))\n    {\n        std::unique_ptr&lt;ITile&gt; newTile = TileFactory::CreateTile(tile-&gt;first);\n        newTile-&gt;Serialize(tile.second);\n        //Do whatever you want to do with your Tile - maybe store it in some vector of all tiles for the level or something\n    }\n}\n</code></pre>\n\n<p>Disclaimer: I have not compiled or tested any of the above code, but hopefully it can give you an idea on how to get started. There might be any number of bugs hiding there. </p>\n\n<p>I encourage you to start with the Bitset only option, as this is enough for a lot of different types of games, and is much simpler to work with and reason about.</p>\n\n<p>Hope this gives you some start :)</p>\n"}], "owner": {"reputation": 51, "user_id": 9589243, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215805453477325/picture?type=large", "display_name": "Joe Fanelli", "link": "https://stackoverflow.com/users/9589243/joe-fanelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1533070878, "creation_date": 1532510683, "last_edit_date": 1532537592, "question_id": 51515378, "link": "https://stackoverflow.com/questions/51515378/storing-and-accessing-tile-properties-in-c", "title": "Storing and accessing tile properties in C++", "body": "<p>I am building a tile engine in C++. What is the most efficient way to store the logical properties of the individual tiles in the game? I understand the rendering side of the program, but I am having trouble taking a simple id number and turning it into an actual set of properties ( like whether or not a tile is walkable or flammable or can trigger an event, etc. )</p>\n\n<p>One idea is to have a tile object that has the potential to be any kind of tile, and turns on certain boolean \"switches\" based on the type ( note that the following is mostly just pseudocode and not meant to actually compile):</p>\n\n<pre><code>class Tile\n{\nprivate:\n    int m_type;\n    bool m_walkable;\n    // etc...\n\npublic:\n    Tile( int type ) : m_type( type)\n    {\n        if( type == 0 )\n        {\n            m_walkable = true;\n\n        } else if( type == 1 ) {\n              m_walkable = false;\n        }\n        // etc etc would probably be a switch\n        // statement but you get the idea\n    }\n};\n</code></pre>\n\n<p>Personally, I do not like this idea; I think it would be much more elegant for each type of tile to have its own data structure. I imagine using some kind of inheritance based system but I just can't seem to put it all together. Fundamentally, I think it should look something like this:</p>\n\n<pre><code>enum class TileType\n{\n     TILE_TYPE null, // 0\n     TILE_TYPE floor, // 1\n     TILE_TYPE wall, // 2\n     // etc ...\n};\n\nclass BTile\n{\nprivate:\n    // Location and dimensions of tile\n    int m_xOffset;\n    int m_yOffset;\n    int m_width;\n    int m_height;\n\n    // Type of tile, initialized to 0 for base class\n    TileType m_type;\n\npublic:\n    // ...\n};\n\nclass Floor : public BTile\n{\nprivate:\n    TileType = 1;\n    bool walkable = true;\n\n    // etc...\n};\n\nclass Wall : public BTile\n{\nprivate:\n    TileType = 2;\n    bool walkable = false;\n};\n</code></pre>\n\n<p>Something like this would feel much more organized and flexible, while also allowing me to plug <code>Floor</code> and <code>Wall</code> objects into any kind of function expecting a <code>Tile</code> object. The problem is that I just cannot seem to put this all together in a way that actually works - for example, how can I provide a specific tile type with the tile it is associated with? If I am reading a text file into my program for example, how can I get from <code>001</code> to <code>Tile-&gt;Floor</code>? Any advice or input on this subject would be greatly appreciated.</p>\n"}, {"tags": ["c++", "multithreading", "singleton"], "answers": [{"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": true, "score": 2, "last_activity_date": 1532512486, "creation_date": 1532512486, "answer_id": 51515977, "question_id": 51515329, "link": "https://stackoverflow.com/questions/51515329/thread-local-singleton-performs-lazy-initialization-by-default/51515977#51515977", "title": "thread_local singleton performs lazy initialization by default?", "body": "<p>This is indeed <a href=\"https://timsong-cpp.github.io/cppwp/stmt.dcl#4\" rel=\"nofollow noreferrer\">guaranteed</a>. static/thread_local local variables are initialized exactly once, when control reaches the declaration.</p>\n\n<p>A few points to take note of:</p>\n\n<ol>\n<li><p>If multiple threads are calling the function concurrently, only one will perform the initialization, and the others will wait. This is what the guard variables in the disassembly is doing.</p></li>\n<li><p>If the initialization throws an exception, it is considered incomplete, and will be performed again the next time control reaches it.</p></li>\n</ol>\n\n<p>In other words, they <em>just work</em>\u2122.</p>\n"}], "owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 51515977, "answer_count": 1, "score": 1, "last_activity_date": 1532512486, "creation_date": 1532510522, "question_id": 51515329, "link": "https://stackoverflow.com/questions/51515329/thread-local-singleton-performs-lazy-initialization-by-default", "title": "thread_local singleton performs lazy initialization by default?", "body": "<p>I have the following code of a <code>thread_local</code> singleton:</p>\n\n<pre><code>struct Singl {\n  int&amp; ref;\n\n  Singl(int&amp; r) : ref(r) {}\n  ~Singl() {}\n\n  void print() { std::cout &lt;&lt; &amp;ref &lt;&lt; std::endl; }\n};\n\nstatic auto&amp; singl(int&amp; r) {\n  static thread_local Singl i(r);\n  return i;\n}\n\nint main() {\n    int x = 4;\n    singl(x).print();\n\n    int y = 55;\n    singl(y).print();\n\n  return 0;\n}\n</code></pre>\n\n<p>This program prints twice the reference to <code>x</code>.</p>\n\n<p>The compiler (<a href=\"https://godbolt.org/g/Gpc8XY\" rel=\"nofollow noreferrer\">gcc 8.1 on godbolt</a>) seems to do a lazy initialization of the singleton object:</p>\n\n<pre><code>singl(int&amp;):\n        push    rbp\n        mov     rbp, rsp\n        sub     rsp, 16\n        mov     QWORD PTR [rbp-8], rdi\n        mov     rax, QWORD PTR fs:0\n        add     rax, OFFSET FLAT:guard variable for singl(int&amp;)::i@tpoff\n        movzx   eax, BYTE PTR [rax]\n        test    al, al\n        jne     .L5\n        mov     rax, QWORD PTR [rbp-8]\n        mov     rdx, QWORD PTR fs:0\n        add     rdx, OFFSET FLAT:singl(int&amp;)::i@tpoff\n        mov     rsi, rax\n        mov     rdi, rdx\n        call    Singl::Singl(int&amp;)\n        mov     rax, QWORD PTR fs:0\n        add     rax, OFFSET FLAT:guard variable for singl(int&amp;)::i@tpoff\n        mov     BYTE PTR [rax], 1\n        mov     rax, QWORD PTR fs:0\n        add     rax, OFFSET FLAT:singl(int&amp;)::i@tpoff\n        mov     edx, OFFSET FLAT:__dso_handle\n        mov     rsi, rax\n        mov     edi, OFFSET FLAT:_ZN5SinglD1Ev\n        call    __cxa_thread_atexit\n.L5:\n        mov     rax, QWORD PTR fs:0\n        add     rax, OFFSET FLAT:singl(int&amp;)::i@tpoff\n        leave\n        ret\n</code></pre>\n\n<p>Is this the default behaviour I can expect whenever I make multiple calls to the <code>singl</code>-function passing different arguments? Or is it possible that  the singleton object might be initialized a second time on a subsequent call?</p>\n"}, {"tags": ["c++", "error-handling", "codeblocks", "glfw", "opengl-3"], "comments": [{"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 1, "creation_date": 1532510272, "post_id": 51515170, "comment_id": 89998741, "body": "The code you embedded here doesn&#39;t <code>#include &lt;glad&#47;glad.h&gt;</code>"}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1532510353, "post_id": 51515170, "comment_id": 89998799, "body": "yes I know but the line #include &lt;glad/glad.h&gt; is part of glad.c"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 3, "creation_date": 1532510412, "post_id": 51515170, "comment_id": 89998842, "body": "@adamtheguy762 But you haven&#39;t included it in <b>the above file</b> which is where you are getting the errors. You are supposed to include <code>glad.h</code> in every file that uses the functions defined in <code>glad.c</code>. That&#39;s how header files work."}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "edited": false, "score": 0, "creation_date": 1532516275, "post_id": 51515170, "comment_id": 90002769, "body": "yes I tried adding #include &lt;glad/glad.h&gt; to main but it gave me the error: No such file or directory."}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "edited": false, "score": 0, "creation_date": 1532516436, "post_id": 51515170, "comment_id": 90002879, "body": "Also I dont know if I should be adding #include &lt;glad/glad.h&gt; or just  #include &lt;glad.h&gt;."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532516617, "post_id": 51515170, "comment_id": 90002987, "body": "@adamtheguy762 Well that&#39;s the problem, your project isn&#39;t set up correctly to find the file. Whether you should say <code>#include &lt;glad&#47;glad.h&gt;</code> or <code>#include &lt;glad.h&gt;</code> is best answered by looking at the GLAD documentation."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532516775, "post_id": 51515170, "comment_id": 90003085, "body": "@adamtheguy762 Looking at your description I get the impression (I might be wrong) that you are trying to put GLAD and OpenGL in your project. That&#39;s not correct. You should be installing OpenGL and GLAD on your system in some location that is <b>independent</b> of your project. You should then build them (if necessary, not sure about that). Only then create your project and refer to the existing installation locations from your project. OpenGL and GLAD are not part of your project, they are referred to by your project. This requires good understanding or your OS, your IDE and OpenGL and GLAD"}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "edited": false, "score": 0, "creation_date": 1532516993, "post_id": 51515170, "comment_id": 90003208, "body": "Ok but I have tried both and niether have worked"}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "edited": false, "score": 0, "creation_date": 1532517060, "post_id": 51515170, "comment_id": 90003242, "body": "Where can I find the GLAD documentation? Also, making the assumption I have the correct include for glad (because I dont think that is the problem as I have tried both), what other suggestions do you have?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532517151, "post_id": 51515170, "comment_id": 90003291, "body": "Here? <a href=\"https://www.khronos.org/opengl/wiki/OpenGL_Loading_Library#glad_.28Multi-Language_GL.2FGLES.2FEGL.2FGLX.2FWGL_Loader-Generator.29\" rel=\"nofollow noreferrer\">khronos.org/opengl/wiki/&hellip;</a>, it says <code>&lt;glad&#47;glad.h&gt;</code>"}, {"owner": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532517291, "post_id": 51515170, "comment_id": 90003366, "body": "@john It&#39;s perfectly fine to just have the GLAD files in the project folder since the header is usually tailored per project."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532517293, "post_id": 51515170, "comment_id": 90003369, "body": "@adamtheguy762 You need to understand how codeblocks  works. Including 3rd party libraries in projects is a common requirement. Just read the documentation and find out how to do it. Sorry but I don&#39;t know codeblocks myself."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "edited": false, "score": 0, "creation_date": 1532517343, "post_id": 51515170, "comment_id": 90003396, "body": "@Fibbles OK I stand corrected."}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1532517502, "post_id": 51515170, "comment_id": 90003529, "body": "Ok thanks I @john I will try reading the documentation"}, {"owner": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "edited": false, "score": 0, "creation_date": 1532518033, "post_id": 51515170, "comment_id": 90003888, "body": "@adamtheguy762 If your code::blocks project is in folder <code>my_project</code> the the GLAD files should be placed like  <code>&#47;my_project&#47;glad&#47;glad.h</code>. You also need to add all GLAD files the to the project in code:: blocks. Usually you right click on the file tree on the left and choose &#39;add files recursively&#39;. Lastly in each source or header file where you make use of Open GL or you include a library that uses OpenGL make sure you have either <code>#include &quot;glad&#47;glad.h&quot;</code> or <code>#include &lt;glad&#47;glad.h&gt;</code>. It needs to be included before anything else. Thats not the definitive way to set it up but it&#39;s the easiest."}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "reply_to_user": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "edited": false, "score": 0, "creation_date": 1532542126, "post_id": 51515170, "comment_id": 90019211, "body": "@Fibbles I have tried including #include &lt;glad/glad.h&gt; in my source file but it gave me an error that said that the header had already been included. Also I have placed all the files in my_project (well not the same name but I have done it). Also I have added glad.c and glad.h to the project."}, {"owner": {"reputation": 1230, "user_id": 3958860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iLugv.jpg?s=128&g=1", "display_name": "Fibbles", "link": "https://stackoverflow.com/users/3958860/fibbles"}, "edited": false, "score": 0, "creation_date": 1532543510, "post_id": 51515170, "comment_id": 90019817, "body": "It shouldn&#39;t matter if you include the same file twice since they have header guards. I can only guess at this point to be honest. Maybe Code::Blocks is getting confused due to your include paths and is seeing multiple options for <code>glad&#47;glad.h</code>. Try using <code>#include &quot;glad&#47;glad.h&quot;</code>? That&#39;ll check your project directory first. If that doesn&#39;t work you&#39;ll have to read through the Code::Blocks docs for setting up include paths and check that against your project."}, {"owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "edited": false, "score": 0, "creation_date": 1532545725, "post_id": 51515170, "comment_id": 90020795, "body": "ok thanks for the help anyway"}], "owner": {"reputation": 3, "user_id": 9280590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db399619539395cc9249427ac66e54f3?s=128&d=identicon&r=PG&f=1", "display_name": "adamtheguy762", "link": "https://stackoverflow.com/users/9280590/adamtheguy762"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3666, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532510048, "creation_date": 1532510048, "question_id": 51515170, "link": "https://stackoverflow.com/questions/51515170/i-am-struggling-to-set-up-opengl-and-glad", "title": "I am struggling to set up OpenGL and GLAD", "body": "<p>I am reading a book called learn OpenGL and I am struggling with the set up. I am using code blocks. What I have done so far is:\nI downloaded the 32 bit binaries for GLFW from this website: <a href=\"http://www.glfw.org/download.html\" rel=\"nofollow noreferrer\">http://www.glfw.org/download.html</a>\nI also downloaded GLAD from this website:\n<a href=\"http://glad.dav1d.de/\" rel=\"nofollow noreferrer\">http://glad.dav1d.de/</a> \nI then added all the files from these downloads to an include folder. After this I added glad.c and glad.h to my project. Then in codeblocks I clicked the project tab then went to build options - search directories - compiler and added the 2 include folders that I got from the downloads and the src folder. Then in search directories I went to linker and added lib-mingw.</p>\n\n<p>The book I am reading told me to add this code:</p>\n\n<pre><code>#include &lt;GLFW/glfw3.h&gt;\n#include &lt;iostream&gt;\nint main()\n{\n//setting the version of openGL\nglfwInit();\nglfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\nglfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\nglfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n//glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);\n\n//creating a window\nGLFWwindow* window = glfwCreateWindow(800, 600, \"LearnOpenGL\", NULL, NULL);\nif (window = NULL)\n{\n    std::cout &lt;&lt;\"Failed to create GLFW window\\n\";\n    glfwTerminate();\n    return -1;\n}\n\nglfwMakeContextCurrent(window);\n\nif (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress))\n{\nstd::cout &lt;&lt; \"Failed to initialize GLAD\" &lt;&lt; std::endl;\nreturn -1;\n}\n\nglViewport(0, 0, 800, 600);\n\nreturn 0;\n}\n</code></pre>\n\n<p>My problem is I keep getting the error: 'GLADloadproc' was not declared in this scope and 'GLADLoadGLLoader' was not declared in this scope. Also I have tried putting the glad folder into my project file directory so that the <code>#include &lt;glad/glad.h&gt;</code> can be found. What could be the problem?</p>\n"}, {"tags": ["c++", "qt", "qtreeview", "qstandarditemmodel", "qstandarditem"], "comments": [{"owner": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1532510608, "post_id": 51514675, "comment_id": 89998992, "body": "how do you append items to the model, can you show the code?"}, {"owner": {"reputation": 549, "user_id": 6911200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05be3c3f1ae8e8eaab9648064182b932?s=128&d=identicon&r=PG&f=1", "display_name": "NelDav", "link": "https://stackoverflow.com/users/6911200/neldav"}, "reply_to_user": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1532511614, "post_id": 51514675, "comment_id": 89999702, "body": "I forgot to post that code. Here it is: model-&gt;appendRow(root);"}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 2526978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8879f3faf8d7b0ece063c3d127e3bc?s=128&d=identicon&r=PG", "display_name": "J C Gonzalez", "link": "https://stackoverflow.com/users/2526978/j-c-gonzalez"}, "edited": false, "score": 0, "creation_date": 1532512095, "post_id": 51515665, "comment_id": 90000015, "body": "Good to hear, you found your solution while I was answering you...  Please, do check it anyway, just in case, you might find something useful."}], "tags": [], "owner": {"reputation": 549, "user_id": 6911200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05be3c3f1ae8e8eaab9648064182b932?s=128&d=identicon&r=PG&f=1", "display_name": "NelDav", "link": "https://stackoverflow.com/users/6911200/neldav"}, "is_accepted": false, "score": 1, "last_activity_date": 1532511556, "creation_date": 1532511556, "answer_id": 51515665, "question_id": 51514675, "link": "https://stackoverflow.com/questions/51514675/qtreeview-with-2-columns-for-each-entry/51515665#51515665", "title": "QTreeView with 2 columns for each entry", "body": "<p>I found a solution for my Problem. Now I am adding a second Item to the model, which displays the value.</p>\n\n<p>That means, first you have to create a model with so much columns you want.</p>\n\n<pre><code>QStandardItemModel *model = new QStandardItemModel(0,2); \n</code></pre>\n\n<p>In the second step you have to create a Item for each cell of a row.</p>\n\n<pre><code>QStandardItem *itemColumn1 = new QStandardItem();\nitemColumn1-&gt;setText(\"name\");\n\nQStandardItem *itemColumn2 = new QStandardItem();\nitemColumn2-&gt;setText(\"value\");\n</code></pre>\n\n<p>After that you have to create a List with them.</p>\n\n<pre><code>QList&lt;QStandardItem*&gt; list = QList&lt;QStandardItem*&gt;();\nlist.append(itemColumn1);\nlist.append(itemColumn2);\n</code></pre>\n\n<p>Now you can append this list to the parent item.</p>\n\n<pre><code>QStandardItem *root = new QStandardItem();\nroot-&gt;appendRow(list);\n</code></pre>\n\n<p>After that you append the root item to the model</p>\n\n<pre><code>model-&gt;appendRow(root);\n</code></pre>\n\n<p>At last you append the model to the treeView</p>\n\n<pre><code>ui-&gt;treeView-&gt;setModel(model);\n</code></pre>\n\n<p>Now you are ready. I think that is not the best solution. If you know a better one please let us know.</p>\n"}, {"comments": [{"owner": {"reputation": 549, "user_id": 6911200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05be3c3f1ae8e8eaab9648064182b932?s=128&d=identicon&r=PG&f=1", "display_name": "NelDav", "link": "https://stackoverflow.com/users/6911200/neldav"}, "edited": false, "score": 0, "creation_date": 1532517943, "post_id": 51515821, "comment_id": 90003826, "body": "Hi JC Gonzalez, what you are doing is nearly the same as that I have done. Where do you mean is the difference. Maybe I didn&#39;t see something."}, {"owner": {"reputation": 695, "user_id": 2526978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8879f3faf8d7b0ece063c3d127e3bc?s=128&d=identicon&r=PG", "display_name": "J C Gonzalez", "link": "https://stackoverflow.com/users/2526978/j-c-gonzalez"}, "reply_to_user": {"reputation": 549, "user_id": 6911200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05be3c3f1ae8e8eaab9648064182b932?s=128&d=identicon&r=PG&f=1", "display_name": "NelDav", "link": "https://stackoverflow.com/users/6911200/neldav"}, "edited": false, "score": 0, "creation_date": 1532520568, "post_id": 51515821, "comment_id": 90005602, "body": "Hi. I showed you a fully working example, that I prepared just before you added your answer. The example is similar to your final solution, but it is quite different from your initial question. Anyway, there are some things new; the most important is that I do not care about how many rows or columns the model will have, you do not need that, it can compute that internally. Another is the addition of headers, or the advice of using begin/endInsertRows(). I hope it helps."}, {"owner": {"reputation": 549, "user_id": 6911200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05be3c3f1ae8e8eaab9648064182b932?s=128&d=identicon&r=PG&f=1", "display_name": "NelDav", "link": "https://stackoverflow.com/users/6911200/neldav"}, "edited": false, "score": 0, "creation_date": 1532527634, "post_id": 51515821, "comment_id": 90010709, "body": "Ah Ok that&#39;s fine. Thank you for your answer."}], "tags": [], "owner": {"reputation": 695, "user_id": 2526978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8879f3faf8d7b0ece063c3d127e3bc?s=128&d=identicon&r=PG", "display_name": "J C Gonzalez", "link": "https://stackoverflow.com/users/2526978/j-c-gonzalez"}, "is_accepted": true, "score": 2, "last_activity_date": 1532512023, "creation_date": 1532512023, "answer_id": 51515821, "question_id": 51514675, "link": "https://stackoverflow.com/questions/51514675/qtreeview-with-2-columns-for-each-entry/51515821#51515821", "title": "QTreeView with 2 columns for each entry", "body": "<p>You don't need to specify the number of rows or columns, just concentrate on adding the elements to your model and it will care about the internal details.</p>\n\n<p>In this minimal example, a model is created, filled with three parents (external loop), with 3, 2 and 1 children each (internal loop).  That is, the model will have a total of (1 + 3) + (1 + 2) + (1 + 1) = 9 rows, and two columns per row for the children (name and data), but only one for the parents (only name, note the <code>0</code> added as second value).</p>\n\n<pre><code>QStandardItemModel * model = new QStandardItemModel;\n\nQStandardItem * root = model-&gt;invisibleRootItem();\n\nQList&lt;QStandardItem*&gt; rowItems;\nfor (int i = 0; i &lt; 3; ++i) {\n    QString parentName = QString(\"Parent #%1\").arg(i + 1);\n    QStandardItem* parent = new QStandardItem(parentName);\n    rowItems &lt;&lt; parent &lt;&lt; 0;\n    root-&gt;appendRow(rowItems);\n    rowItems.clear();\n\n    for (int j = 0; j &lt; 3 - i; ++j) {\n        QString childName = QString(\"Child %1-%2\").arg(i + 1).arg(j + 1);\n        QStandardItem* item = new QStandardItem(childName);\n        int content = (i + 1) * (j + 1) * 2700;\n        QStandardItem* itemData = new QStandardItem(QString(\"%1\").arg(content));\n        rowItems &lt;&lt; item &lt;&lt; itemData;\n        parent-&gt;appendRow(rowItems);\n        rowItems.clear();\n    }\n}\n\nmodel-&gt;setHeaderData(0, Qt::Horizontal, tr(\"Name\"));\nmodel-&gt;setHeaderData(1, Qt::Horizontal, tr(\"Data\"));\n\nui-&gt;treeView-&gt;setModel(model);\n</code></pre>\n\n<p>Note that the steps this example uses are:</p>\n\n<ol>\n<li>Create the model</li>\n<li>Fill the model row by row. Each row is a list of <code>QStandardItem</code> elements (<code>rowItems</code>), and you append the row to its parent item (or to a root item if they are first level elements).</li>\n<li>Set up additional characteristics of the model (headers in this case)</li>\n<li>Attach the model to any view that it is needed.</li>\n</ol>\n\n<p>Note that I did not use <code>model-&gt;beginInsertRows(...)</code> and <code>model-&gt;endInsertRows()</code> since the model modifications are done before attaching the model to the views. If you modify the model content <em>after</em> attaching it to any view, you should use those calls.  Otherwise, keep in mind that any index that you might be using could become invalid after the model is updated.</p>\n"}], "owner": {"reputation": 549, "user_id": 6911200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05be3c3f1ae8e8eaab9648064182b932?s=128&d=identicon&r=PG&f=1", "display_name": "NelDav", "link": "https://stackoverflow.com/users/6911200/neldav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1600, "favorite_count": 0, "accepted_answer_id": 51515821, "answer_count": 2, "score": 0, "last_activity_date": 1559679979, "creation_date": 1532508612, "last_edit_date": 1559679979, "question_id": 51514675, "link": "https://stackoverflow.com/questions/51514675/qtreeview-with-2-columns-for-each-entry", "title": "QTreeView with 2 columns for each entry", "body": "<p>I want to create a QTreeview with 2 columns. That is no problem so far. I made this with the following code:</p>\n\n<pre><code>QStandardItemModel *model = new QStandardItemModel(0,2); \nui-&gt;treeView-&gt;setModel(model);\n</code></pre>\n\n<p>Now I want to fill this TreeView. To do that I created a QStandardItem with 0 rows and 1 column.</p>\n\n<pre><code>QStandardItem *root = new QStandardItem(0,2);\n</code></pre>\n\n<p>After that I added data to this root item.</p>\n\n<pre><code>root-&gt;setText(\"name\");\nroot-&gt;setData(\"value\", 1);\n</code></pre>\n\n<p>At the end I am adding the model to a QTreeView</p>\n\n<pre><code>ui-&gt;treeView-&gt;setModel(model);\n</code></pre>\n\n<p>The problem is, that value is not displayed in the second column of the QTreeView. I am sure, that the reason is, that the second column of the model is not the same as the second column of the root item.</p>\n\n<p>But how to solve this problem?</p>\n"}, {"tags": ["c++", "matrix", "mpi", "matrix-multiplication", "hpc"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1532508536, "post_id": 51514536, "comment_id": 89997551, "body": "I don&#39;t know the answer to your question, but just so you&#39;re aware, this is a slow implementation of matrix multiplication."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1532508932, "post_id": 51514536, "comment_id": 89997843, "body": "Would you suggest me an alternative? Since I&#39;m just starting, the simple the better, I guess. Would you say the time I&#39;m getting is compatible with the hardware?"}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1532509573, "post_id": 51514536, "comment_id": 89998277, "body": "Are you getting the a similar plot consistently? Or it happened just once? It might be related to the load on the CPU at the particular moment you made your measurements."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1532509626, "post_id": 51514536, "comment_id": 89998318, "body": "Unfortunately everything that makes matrix multiplication fast also makes it more complicated.. For reference, on a Sandy Bridge E (I guess you use  i7-3960X?) your DP FPop/cycle ceiling is 4 multiplies and 4 adds, you can work out a minimum time from that based on clock speed (depends on how many cores are active), core count, and matrix size, then you can see how close you are to that"}, {"owner": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "edited": false, "score": 1, "creation_date": 1532509973, "post_id": 51514536, "comment_id": 89998538, "body": "I also suggest <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">Eigen</a>, a really easy to use library for matrix algebra."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1532510982, "post_id": 51514536, "comment_id": 89999270, "body": "@harold its Intel(R) Xeon(R) CPU E5-2620 v3 @ 2.40GHz"}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1532511122, "post_id": 51514536, "comment_id": 89999362, "body": "@IvanRubinson Yes, I tried multiple times in the last hour, same result."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1532511357, "post_id": 51514536, "comment_id": 89999515, "body": "@KcFnMi: maybe if you transpose the matrix in memory which is read in column-order before multiplication, you&#39;ll get better results. (you&#39;ll need to use a transpose algorithm, which is cache-friendly). But maybe there are better algorithms."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1532511535, "post_id": 51514536, "comment_id": 89999648, "body": "@KcFnMi ok different numbers then: 8 FP FMAs per cycle (8 adds + 8 multiplies but only if they appear together). I&#39;ve posted <a href=\"https://codereview.stackexchange.com/a/193734/36018\">some tips</a> for fast MMM before that you could use if you&#39;re interested"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1532512069, "post_id": 51514536, "comment_id": 89999999, "body": "For a specific discussion of your observed performance, you should prepare a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and provide a better system specification including compiler etc."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1532512351, "post_id": 51514536, "comment_id": 90000188, "body": "At a guess, you&#39;re probably running into the limit on the bandwidth to memory. More cores won&#39;t change that."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1532512511, "post_id": 51514536, "comment_id": 90000311, "body": "As a comparison, on my Haswell (4770K, 3.9GHz) multiplying two 4096x4096 matrixes together on a single core takes about 1.5 seconds, and it&#39;s not optimal yet. Note that MMM is rather unique in that it does not need to be limited by memory bandwidth, since there is a cubic amount of arithmetic and only a square amount of data - but it <i>will</i> be limited by memory bandwidth if you don&#39;t implement tiling."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1532515138, "post_id": 51514536, "comment_id": 90002046, "body": "Am I implement tiling? Here I just divide the rows across nodes (i.e. 6000x6000 each node will receive 1000 rows) and then each node goes to that multiplication code."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1532515746, "post_id": 51514536, "comment_id": 90002441, "body": "@KcFnMi yes a little, but the tiles are still much larger than the caches"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1532520078, "post_id": 51514536, "comment_id": 90005230, "body": "OT, but is it by intention that you did not use k as the innermost iteration? That could decrease frequency of cache misses."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1532562877, "post_id": 51514536, "comment_id": 90026663, "body": "Curious if your compiler is using the optimal vector math for this as well."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "reply_to_user": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1532652192, "post_id": 51514536, "comment_id": 90066096, "body": "@Red.Wave Yes, I tried to use k as the innermost iteration before. But having it there seems to be slower. To my understanding, that will cause longer jumps (next row at each iteration*) on the matrix. While in the way it is now, the jump is to the next element. *I&#39;m not sure if having all matrix in a continuos peace o memory will help."}, {"owner": {"reputation": 606, "user_id": 4759339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mkL09.jpg?s=128&g=1", "display_name": "jan.sende", "link": "https://stackoverflow.com/users/4759339/jan-sende"}, "edited": false, "score": 0, "creation_date": 1532773610, "post_id": 51514536, "comment_id": 90106940, "body": "Currently your code doesn&#39;t contain any MPI instructions! Therefore we can&#39;t really tell what is going wrong or right. Could you please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 311, "user_id": 10306949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTU8d.png?s=128&g=1", "display_name": "Robert van de Geijn", "link": "https://stackoverflow.com/users/10306949/robert-van-de-geijn"}, "edited": false, "score": 0, "creation_date": 1535902219, "post_id": 51514536, "comment_id": 91226515, "body": "There is a related discussion at <a href=\"https://stackoverflow.com/questions/1437501/what-is-a-good-free-open-source-blas-lapack-library-for-net-c/52138388#52138388\" title=\"what is a good free open source blas lapack library for net c\">stackoverflow.com/questions/1437501/&hellip;</a>"}, {"owner": {"reputation": 311, "user_id": 10306949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTU8d.png?s=128&g=1", "display_name": "Robert van de Geijn", "link": "https://stackoverflow.com/users/10306949/robert-van-de-geijn"}, "edited": false, "score": 0, "creation_date": 1535902318, "post_id": 51514536, "comment_id": 91226538, "body": "<a href=\"https://stackoverflow.com/questions/1437501/what-is-a-good-free-open-source-blas-lapack-library-for-net-c/52138388#52138388\" title=\"what is a good free open source blas lapack library for net c\">stackoverflow.com/questions/1437501/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1532650519, "post_id": 51526244, "comment_id": 90065809, "body": "Yes, I get time in the next line, just after allocating the matrix <code>auto v = mmi::gen_rand_matrix(size);</code> <code>double time = MPI_Wtime();</code>. But I don&#39;t understand how this matters, including it will affect all cases, I think."}, {"owner": {"reputation": 4505, "user_id": 1168733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ewxJ.jpg?s=128&g=1", "display_name": "Sigi", "link": "https://stackoverflow.com/users/1168733/sigi"}, "reply_to_user": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1532712964, "post_id": 51526244, "comment_id": 90092708, "body": "allocation on SMP systems are probably/possibly serialized, or in any way not necessarily independent. In any way they are not intended to be measured in your experiment: you are interested in timing your kernel only. Oh there are also SMP version (ie, distributed memory, in-node, OpenMP) linear algebra libraries. I remember of essl_smp just now, years ago as well"}], "tags": [], "owner": {"reputation": 4505, "user_id": 1168733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ewxJ.jpg?s=128&g=1", "display_name": "Sigi", "link": "https://stackoverflow.com/users/1168733/sigi"}, "is_accepted": true, "score": 1, "last_activity_date": 1532562429, "last_edit_date": 1532562429, "creation_date": 1532546545, "answer_id": 51526244, "question_id": 51514536, "link": "https://stackoverflow.com/questions/51514536/matrix-multiplication-performance-int-vs-double/51526244#51526244", "title": "Matrix multiplication performance, int vs double", "body": "<p>Are you sure that you aren't timing the allocation of 4K vector&lt;>'s...? </p>\n\n<p><code>vector&lt;vector&lt; &gt;&gt;</code> is not a suitable type to squeeze optimal performance. The matrix multiplication is one of the best operation regarding scalability and \"computation density\" with respect to memory accesses. In fact the number of operations scale as O(N^3) while the number of data as O(N^2).</p>\n\n<p>In fact it's used to benchmark <a href=\"https://www.top500.org/\" rel=\"nofollow noreferrer\">top500 fastest systems</a> on earth: <a href=\"http://www.netlib.org/benchmark/hpl/\" rel=\"nofollow noreferrer\">HPL</a> is for \"high performance linpack\", being linpack a reference implementation for linear algebral. Guess what... The operation being used in the benchmarks is DGEMM, that is \"Double precision GEneral Matrix Matrix multiply\".</p>\n\n<p>DGEMM is the name of the operation in the BLAS library, e de-facto standard for linear algebra. Today there are many locally optimized BLAS library either commercial (INTEL MKL, IBM ESSL,...) and open source (<a href=\"http://math-atlas.sourceforge.net\" rel=\"nofollow noreferrer\">ATLAS</a>), but all of them use the same original (originally fortran, now C too) BLAS interface. (NOTE: <a href=\"http://www.netlib.org/blas/\" rel=\"nofollow noreferrer\">the original implementation</a> is not optimized)</p>\n\n<p>Based on BLAS there are also <a href=\"http://www.netlib.org/lapack/\" rel=\"nofollow noreferrer\">LAPACK</a> libraries: system solver, eigensystems,... There are also optimized lapack libraries, but usually 90% of the performance is squeezed by using optimized BLAS library.</p>\n\n<p>I know very well one (not the only one... HPL is another one) powerful MPI based parallel library, which is <a href=\"http://www.netlib.org/scalapack/\" rel=\"nofollow noreferrer\">SCALAPACK</a>, and it contains PBLAS (parallel BLAS), and in it... an optimized and parallel version of DGEMM among other stuff.</p>\n\n<p>SCALAPACK comes with the <a href=\"http://www.netlib.org/scalapack/slug/\" rel=\"nofollow noreferrer\">SLUG</a>, where you can find an excellent explanation of the block-cyclic distribution, that's the data distribution strategy used to squeeze optimal performance arranging liner algebra problems on parallel systems.</p>\n\n<p>To obtain optimal performance however you will need to link your MPI executable with a locally optimized BLAS library. Or write your own, but you are not alone, so don't reinvent the wheel.</p>\n\n<p>Local optimization is obtained accessing matrices not by row, nor by column, but by block. With the block size being tuned in order to optimize the usage of the caches and/or of the TLB (I remember just now libgoto, another blas library, that optimized in order to minimize TLB misses, reached and surpassed on some systems Intel MKL... time ago). Find more information for example in this <a href=\"http://www.netlib.org/lapack/lawnspdf/lawn147.pdf\" rel=\"nofollow noreferrer\">ATLAS paper</a>. </p>\n\n<p>In any case, if you really want to... I would start analyzing how the other wheels have been forged, before trying to make mine ;)</p>\n"}], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 51526244, "answer_count": 1, "score": 1, "last_activity_date": 1532652281, "creation_date": 1532508246, "last_edit_date": 1532652281, "question_id": 51514536, "link": "https://stackoverflow.com/questions/51514536/matrix-multiplication-performance-int-vs-double", "title": "Matrix multiplication performance, int vs double", "body": "<p>I'm trying matrix multiplication using MPI and would like to ask some help to understang one issue. The machine has 6 cores, 32KB L1 cache, 256KB L2 cache and 15MB L3 cache. And multiplication goes like this:</p>\n\n<pre><code>vector&lt;vector&lt;double&gt;&gt; mult_mpi(vector&lt;vector&lt;double&gt;&gt; m, \n                                vector&lt;vector&lt;double&gt;&gt; n) { \n    int rows = m.size();\n    int size = n.size();\n    vector&lt;vector&lt;double&gt;&gt; r(rows, vector&lt;double&gt;(size));\n\n    for (int i = 0; i &lt; rows; ++i) \n        for (int k = 0; k &lt; size; ++k) \n            for (int j = 0; j &lt; size; ++j) \n                r[i][j] += m[i][k] * n[k][j];\n    return r;\n}\n</code></pre>\n\n<p>I have the same for <code>int</code>:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; mult_mpi(vector&lt;vector&lt;int&gt;&gt; m, vector&lt;vector&lt;int&gt;&gt; n);\n</code></pre>\n\n<p>Then I made some plots, different line colors indicate the number of nodes.</p>\n\n<p>The following plot shows time spent to multiply two int matrices:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3innQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3innQ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And the following plot shows time spent to multiply two double matrices:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jU28X.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jU28X.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Why I get the same times for 4 and 6 nodes in the double case? Am I running into the limit on the bandwidth to memory?</p>\n\n<p>I tried multiple times int the last hour, same result. Also checked machine load with <code>top</code> but to my eyes I'm alone there. </p>\n"}, {"tags": ["c++", "opencv", "video", "ffmpeg", "fourcc"], "comments": [{"owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "edited": false, "score": 1, "creation_date": 1532510171, "post_id": 51514532, "comment_id": 89998684, "body": "Your OpenCV is not built with FFmpeg support. Check value of FFmpeg in the output of <code>cv2.getBuildInformation()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532590471, "post_id": 51517236, "comment_id": 90034377, "body": "when I try to execute the code you have written in vs code I get the following error:  /tmp/ccMqUUra.o: In function <code>cv::String::~String()&#39;: &#47;usr&#47;local&#47;include&#47;opencv2&#47;core&#47;cvstd.hpp:647: undefined reference to </code>cv::String::deallocate()&#39; /tmp/ccMqUUra.o: In function <code>cv::String::operator=(cv::String const&amp;)&#39;: &#47;usr&#47;local&#47;include&#47;opencv2&#47;core&#47;cvstd.hpp:655: undefined reference to </code>cv::String::deallocate()&#39; collect2: error: ld returned 1 exit status The terminal process terminated with exit code: 1         Trying to fix that now. If you have any comment you are more than welcome."}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "reply_to_user": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532592167, "post_id": 51517236, "comment_id": 90035289, "body": "@burakakdemir looks like a linking problem, make sure you are linking opencv libraries (or opencv_world if you have it compiled). This one should opencv_core if I remember correctly"}, {"owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532592797, "post_id": 51517236, "comment_id": 90035637, "body": "I just run the code you have given using following:  g++ -std=c++11 Hello.cpp <code>pkg-config --libs --cflags opencv</code> -o HelloWorld and here is the related part of the outcome: <b>FFMPEG: YES | avcodec: YES (ver 56.60.100) | avformat: YES (ver 56.40.101) | avutil: YES (ver 54.31.100) | swscale: YES (ver 3.1.101) | avresample: YES (ver 2.1.0) | GStreamer: | base: YES (ver 1.8.3) | video: YES (ver 1.8.3) | app: YES (ver 1.8.3) | riff: YES (ver 1.8.3) | pbutils: YES (ver 1.8.3)</b> so does this mean gstreamer is OK? PS: I have already installed the gstreamer with the command you have given"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "reply_to_user": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532594077, "post_id": 51517236, "comment_id": 90036398, "body": "@burakakdemir Basically it tells you that you can use FFMPEG or GStreamer. If you installed the plugins, does the code from your question gives the same errors? stiil, I will suggest to avoid the C interface, and use the C++ one, in which you can select either GStreamer or FFMPEG"}, {"owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532622767, "post_id": 51517236, "comment_id": 90055012, "body": "thx a lot for the reply. How can i check if the plugins are installed or not. About the c interface, i am trying to implement the method which is suggested in darknet forums &amp; git bcs i  do not have a solid background in linux."}, {"owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532623873, "post_id": 51517236, "comment_id": 90055626, "body": "thx for the reply. How can i verify that the plugins are functional? And about the c interface, as you can see i do not have a solid background in linux so i want to stay close what ppl in darknet forums&amp;amp;git doing. Majority of the ppl there did the thing mentioned in the post. Thats why i am trying to avoid sth different."}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "reply_to_user": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532627727, "post_id": 51517236, "comment_id": 90057599, "body": "@burakakdemir you can check what package is installed with <code>dpkg --list &#39;package-name&#39;</code>. For gstreamer you can do <code>dpkg --list &#39;gstreamer*&#39;</code> at the begining you will have  <code>ii</code> for packages install so you can do <code>dpkg --list &#39;gstreamer*&#39; | grep ii</code> to see only the packages of gstreamer that are installed"}, {"owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1532678111, "post_id": 51517236, "comment_id": 90073582, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/176850/discussion-between-burak-akdemir-and-api55\">continue this discussion in chat</a>."}, {"owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "edited": false, "score": 0, "creation_date": 1532956659, "post_id": 51517236, "comment_id": 90155473, "body": "adding sudo before the terminal expression &amp; changing the file permissions solved my problem. As you suggested the folder that i am trying to write into was protected. Thx a lot!"}], "tags": [], "owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "is_accepted": false, "score": 3, "last_activity_date": 1532516258, "creation_date": 1532516258, "answer_id": 51517236, "question_id": 51514532, "link": "https://stackoverflow.com/questions/51514532/write-video-in-opencv-fourcc-codec/51517236#51517236", "title": "write video in OpenCV FOURCC codec", "body": "<p>You are not using ffmpeg to create the video, you should first check, as @zindarod points out, if OpenCV was built with ffmpeg. For that, you can run the following code in C++:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\nint main(void)\n{\n  std::cout &lt;&lt; cv::getBuildInformation() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>One other thing DO NOT USE C API unless it is necessary. It is deprecated and should not be used, specially if your code is in C++ as the tag of your question suggest.</p>\n\n<p>In the C++ API you can actually select a different backend. Take a look to the <a href=\"https://docs.opencv.org/3.3.0/dd/d9e/classcv_1_1VideoWriter.html#af52d129e2430c0287654e7d24e3bbcdc\" rel=\"nofollow noreferrer\">documentation of VideoWriter</a>.</p>\n\n<blockquote>\n  <p><strong>cv::VideoWriter::VideoWriter</strong>  (   const String &amp;  filename, int\n    apiPreference, int  fourcc, double  fps, Size   frameSize, bool\n    isColor = true  )</p>\n  \n  <p>This is an overloaded member function, provided for convenience. It\n  differs from the above function only in what argument(s) it accepts.\n  The apiPreference parameter allows to specify API backends to use. Can\n  be used to enforce a specific reader implementation if multiple are\n  available: e.g. cv::CAP_FFMPEG or cv::CAP_GSTREAMER.</p>\n</blockquote>\n\n<p>This mean, if both are installed and OpenCV was built with the support from both you can switch it to your liking :)</p>\n\n<p>GStreamer is not a bad backend to use, I actually use it, but I use it more to open videos rather than creating ones, but you need to have the plugins installed to make it work with more codecs... The <a href=\"https://gstreamer.freedesktop.org/documentation/installing/on-linux.html\" rel=\"nofollow noreferrer\">gstreamer webpage</a> recommends to install it like this:</p>\n\n<pre><code>apt-get install libgstreamer1.0-0 gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav gstreamer1.0-doc gstreamer1.0-tools\n</code></pre>\n\n<p>The 1.0 may change depending on the version you are using already. </p>\n\n<p>I hope this solves your problem, if not just leave a comment.</p>\n"}], "owner": {"reputation": 153, "user_id": 5381185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YypyCogMzX8/AAAAAAAAAAI/AAAAAAAAAQo/0IxWS1L_PVk/photo.jpg?sz=128", "display_name": "burak akdemir", "link": "https://stackoverflow.com/users/5381185/burak-akdemir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1532516258, "creation_date": 1532508238, "last_edit_date": 1532509807, "question_id": 51514532, "link": "https://stackoverflow.com/questions/51514532/write-video-in-opencv-fourcc-codec", "title": "write video in OpenCV FOURCC codec", "body": "<p>I am trying to save the results of <code>YOLO</code> to <code>.avi</code> file. Having already seen <a href=\"https://github.com/pjreddie/darknet/i\" rel=\"nofollow noreferrer\"><strong>this post</strong></a>... (I even asked the question there) I could NOT find any solution. Here is the code in which I am trying to save the <code>.avi</code>.</p>\n\n<pre><code>{\n    CvSize size;\n    size.width = disp-&gt;width;\n    size.height = disp-&gt;height;\n\n    static CvVideoWriter* output_video = NULL;    // cv::VideoWriter output_video;\n    if (output_video == NULL)\n    {\n        printf(\"\\n SRC output_video = %p \\n\", output_video);\n        const char* output_name = \"test_dnn_out.avi\";\n        output_video = cvCreateVideoWriter(output_name, CV_FOURCC('D', 'I', 'V', 'X'), 25, size, 1);\n        printf(\"\\n cvCreateVideoWriter, DST output_video = %p  \\n\", output_video);\n    }\n    cvWriteFrame(output_video, disp);\n}\n</code></pre>\n\n<p>Trying plenty of codecs ( changing <code>CV_FOURCC('D', 'I', 'V', 'X')</code> ) I get errors below:</p>\n\n<pre><code>**CODEC :-1**\n\n**ERROR**\n\nSRC output_video = (nil)  OpenCV: FFMPEG: tag 0xffffffff/'\ufffd\ufffd\ufffd\ufffd' is not\nfound (format 'avi / AVI (Audio Video Interleaved)')' OpenCV Error:\nUnsupported format or combination of formats (Gstreamer Opencv backend\ndoes not support this codec.) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1522 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1522:\nerror: (-210) Gstreamer Opencv backend does not support this codec. in\nfunction CvVideoWriter_GStreamer::open\n\n\n**CODEC: CV_FOURCC('M', 'J', 'P', 'G')**\n\n**ERROR**\n\nSRC output_video = (nil)  OpenCV Error: Unspecified error (GStreamer:\ncannot put pipeline to play ) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1690 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1690:\nerror: (-2) GStreamer: cannot put pipeline to play  in function\nCvVideoWriter_GStreamer::open\n\n\n**CODEC: CV_FOURCC('P','I','M','1')** SRC output_video = (nil) \n\n**ERROR**\n\n** (Demo:6801): CRITICAL **: gst_ffmpeg_cfg_set_property: assertion 'qdata- \nsize == sizeof (gint64)' failed OpenCV Error: Unspecified\nerror (GStreamer: cannot put pipeline to play ) in\nCvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1690 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1690:\nerror: (-2) GStreamer: cannot put pipeline to play  in function\nCvVideoWriter_GStreamer::open\n\n\n\n**CODEC:CV_FOURCC('M', 'P', '4', '2')**\n\n**ERROR**\n\nSRC output_video = (nil) \n\n** (Demo:7437): CRITICAL **: gst_ffmpeg_cfg_set_property: assertion 'qdata- \nsize == sizeof (gint64)' failed OpenCV Error: Unspecified\nerror (GStreamer: cannot put pipeline to play ) in\nCvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1690 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1690:\nerror: (-2) GStreamer: cannot put pipeline to play  in function\nCvVideoWriter_GStreamer::open\n\n\n**CODEC::CV_FOURCC('D', 'I', 'V', '3')**\n\n**ERROR** \n\nSRC output_video = (nil)  OpenCV Error: Unspecified error (GStreamer:\ncannot put pipeline to play ) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1690 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1690:\nerror: (-2) GStreamer: cannot put pipeline to play  in function\nCvVideoWriter_GStreamer::open\n\n\n**CODEC:CV_FOURCC('D', 'I', 'V', 'X')**\n\n**ERROR** \n\nSRC output_video = (nil)  OpenCV Error: Unspecified error (GStreamer:\ncannot put pipeline to play ) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1690 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1690:\nerror: (-2) GStreamer: cannot put pipeline to play  in function\nCvVideoWriter_GStreamer::open\n\n\n\n**CODEC:CV_FOURCC('U', '2', '6', '3')**\n\n**ERROR** \n\nOpenCV Error: Unspecified error (GStreamer: cannot put pipeline to\nplay ) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1690 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1690:\nerror: (-2) GStreamer: cannot put pipeline to play  in function\nCvVideoWriter_GStreamer::open\n\n\ncvCreateVideoWriter, DST output_video = (nil)  \n\nSRC output_video = (nil)  Could not open codec 'h263': Unspecified\nerror\n\n** (Demo:8342): CRITICAL **: gst_ffmpeg_cfg_set_property: assertion 'qdata- \nsize == sizeof (gint64)' failed\n\n\n\n**CODEC:CV_FOURCC('I', '2', '6', '3')**\n\n**ERROR** \n\nSRC output_video = (nil)  Could not find encoder for codec id 21:\nEncoder not found OpenCV Error: Unspecified error (GStreamer: cannot\nlink elements ) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1626 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1626:\nerror: (-2) GStreamer: cannot link elements  in function\nCvVideoWriter_GStreamer::open\n\n\ncvCreateVideoWriter, DST output_video = (nil)  \n\n\n**CODEC:CV_FOURCC('F', 'L', 'V', '1')**\n\n**ERROR** \n\nSRC output_video = (nil)  OpenCV Error: Unspecified error (GStreamer:\ncannot link elements ) in CvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1626 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1626:\nerror: (-2) GStreamer: cannot link elements  in function\nCvVideoWriter_GStreamer::open\n\n\ncvCreateVideoWriter, DST output_video = (nil)\n\n\n**CODEC:CV_FOURCC('i','Y', 'U', 'V')**\n\n**ERROR** \n\nSRC output_video = (nil)  OpenCV: FFMPEG: tag 0x56555969/'iYUV' is not\nsupported with codec id 14 and format 'avi / AVI (Audio Video\nInterleaved)' OpenCV Error: Unsupported format or combination of\nformats (Gstreamer Opencv backend does not support this codec.) in\nCvVideoWriter_GStreamer::open, file\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp, line\n1522 VIDEOIO(cvCreateVideoWriter_GStreamer (filename, fourcc, fps,\nframeSize, is_color)): raised OpenCV exception:\n\n/home/akde/opencv-3.3.0/modules/videoio/src/cap_gstreamer.cpp:1522:\nerror: (-210) Gstreamer Opencv backend does not support this codec. in\nfunction CvVideoWriter_GStreamer::open\n</code></pre>\n\n<p><strong>Here is my setup</strong></p>\n\n<p>-<code>ubuntu 16.04</code></p>\n\n<p>-<code>opencv 3.3.0</code></p>\n\n<p>-<code>ffmpeg version 2.8.14</code></p>\n\n<p>In my opinion, the problem is very likely to be about codecs. Because people solved the same problem by using different codecs. Even though I tried many codecs and have <code>ffmepeg</code> installed correctly I could NOT find any solution. So what should I do? Looking forward to your replies...</p>\n"}, {"tags": ["c++", "stl", "access-violation", "unordered-map"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1532507975, "post_id": 51514389, "comment_id": 89997214, "body": "No exceptions when calling <code>find</code> on empty map. I suspect your map is corrupted before the call."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1532508068, "post_id": 51514389, "comment_id": 89997266, "body": "Btw, by using iterator returned by <code>find</code>, you might avoid repetitive look-ups."}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532508153, "post_id": 51514389, "comment_id": 89997322, "body": "@Jarod42: thanks for your quick reply. Is there any to confirm that my map is corrupt? (I just see <code>size=0</code> in the watch-window, due to a native visualiser)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1532508391, "post_id": 51514389, "comment_id": 89997454, "body": "Look at other internal members might give indication."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1532508861, "post_id": 51514389, "comment_id": 89997790, "body": "If the map is <code>empty</code> can you produce a <i>complete</i> <code>5</code> line example program that reproduced the error?"}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1532509201, "post_id": 51514389, "comment_id": 89998023, "body": "@Galik: it&#39;s not that simple: it seems that my map has been modified by other threads, which makes it very difficult to reproduce."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1532509536, "post_id": 51514389, "comment_id": 89998253, "body": "If you have multiple thread, you should protect your data (<code>mutex</code>) to avoid UB by possibly writing and reading the same variable at the same time."}], "answers": [{"comments": [{"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 0, "creation_date": 1532508376, "post_id": 51514504, "comment_id": 89997449, "body": "That was also my idea: launching <code>find()</code> or <code>end()</code> does not cause an access violation. But if both methods give different results, then the map gets accessed (<code>internal_map[uiElemKey]</code>) and I&#39;m afraid that this might cause an access violation. Do you think that is possible?"}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 1, "creation_date": 1532508504, "post_id": 51514504, "comment_id": 89997531, "body": "@Dominique Before accessing <code>internal_map[uiElemKey]</code> you have already checked that <code>uiElemKey</code> exists. I can&#39;t see any reason for them to generate access violation."}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 1, "creation_date": 1532508637, "post_id": 51514504, "comment_id": 89997615, "body": "@Dominique the order of evaluation for <code>&amp;&amp;</code> <code>||</code> operators are also defined."}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 0, "creation_date": 1532508718, "post_id": 51514504, "comment_id": 89997677, "body": "That&#39;s exactly my problem: I&#39;ve executed a <code>find(uiElemKey)</code> and I have checked if this equals the <code>end()</code> method. As mentioned in some examples on the web, this way of working is working correctly (but all the examples are treating maps which are not empty). I just want to be sure that, in case of an empty map, the result of <code>find(anything)</code> and <code>end()</code> are also equal."}, {"owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "reply_to_user": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 1, "creation_date": 1532508863, "post_id": 51514504, "comment_id": 89997792, "body": "@Dominique yes they are also equal for empty containers. Whenever a key is not present it will return <code>end()</code>. Whether the container is empty or not doesn&#39;t matter."}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 0, "creation_date": 1532509105, "post_id": 51514504, "comment_id": 89997955, "body": "\u2026 which leaves me with the conclusion that my map is corrupt indeed (most probably because it&#39;s accessible from different threads who seem to be altering it). I&#39;ll try to find out how I can avoid this in future. Thanks a lot for your help."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 1, "creation_date": 1532515891, "post_id": 51514504, "comment_id": 90002523, "body": "@Dominique: The single solution to make an object safe to access from multiple threads is <code>std::mutex</code>. That&#39;s not just for threads altering an object, even the reader threads need it."}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1532521560, "post_id": 51514504, "comment_id": 90006341, "body": "@MSalters: thanks for the info. I&#39;ll pass it to the developers."}], "tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": true, "score": 2, "last_activity_date": 1532508415, "last_edit_date": 1532508415, "creation_date": 1532508164, "answer_id": 51514504, "question_id": 51514389, "link": "https://stackoverflow.com/questions/51514389/can-a-find-on-an-empty-unordered-map-lead-to-an-access-violation/51514504#51514504", "title": "Can a find() on an empty unordered_map lead to an access violation?", "body": "<p>Assuming that the unordered map is not being modified by some other thread when  <code>find()</code> is executing, there is no chance that <code>find()</code> or <code>end()</code> will throw an exception or crash. Their behavior is defined for empty container. So there is no way to corrupt the map by just calling them. Saying this, your test for <code>size()</code> is redundant. </p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": false, "score": 1, "last_activity_date": 1532509182, "creation_date": 1532509182, "answer_id": 51514867, "question_id": 51514389, "link": "https://stackoverflow.com/questions/51514389/can-a-find-on-an-empty-unordered-map-lead-to-an-access-violation/51514867#51514867", "title": "Can a find() on an empty unordered_map lead to an access violation?", "body": "<blockquote>\n  <p>As there are no entries in the map, the find() method generates an\n  exception</p>\n</blockquote>\n\n<p>No, if your program is valid (there is no UB somewhere earlier) <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/find\" rel=\"nofollow noreferrer\"><code>find()</code></a> method will return past-the-end iterator which equals to iterator returned by <code>end()</code> in the same line of code.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 0, "accepted_answer_id": 51514504, "answer_count": 2, "score": 0, "last_activity_date": 1532509182, "creation_date": 1532507757, "question_id": 51514389, "link": "https://stackoverflow.com/questions/51514389/can-a-find-on-an-empty-unordered-map-lead-to-an-access-violation", "title": "Can a find() on an empty unordered_map lead to an access violation?", "body": "<p>I'm investigating a dump, caused by an access violation.<br>\nOn that particular line of code, there is the following line:</p>\n\n<pre><code>if (internal_map.find(uiElemKey) == internal_map.end() || \n    internal_map[uiElemKey].find(m_iPID) == internal_map[uiElemKey].end() || \n    internal_map[uiElemKey][m_iPID].find(idx) == internal_map[uiElemKey][m_iPID].end()) {\n</code></pre>\n\n<p>In the watch-window I can see that the amount of entries in <code>internal_map</code> equals 0.</p>\n\n<p>In my opinion, the access violation might be caused by following reasons:</p>\n\n<ol>\n<li>As there are no entries in the map, the <code>find()</code> method generates an exception.</li>\n<li>As the are no entries in the map, the <code>end()</code> method generates an exception.</li>\n<li>The <code>find()</code> method and the <code>end()</code> method are working fine, but give different results, which leads to the following condition, where an access violation happens.</li>\n</ol>\n\n<p>I think that the access violation can be avoided, using this condition:</p>\n\n<pre><code>if (internal_map.size() == 0                                              ||\n    internal_map.find(uiElemKey) == internal_map.end()                    || \n    internal_map[uiElemKey].find(m_iPID) == internal_map[uiElemKey].end() || \n    internal_map[uiElemKey][m_iPID].find(idx) == internal_map[uiElemKey][m_iPID].end()) {\n</code></pre>\n\n<p>Can somebody confirm this is correct and explain which reason is the correct one?<br>\nThanks in advance</p>\n\n<p>P.s. for your information: I'm doing dump analysis, and it's almost impossible to reproduce the mentioned problem, so just trying and see what happens is not an option.</p>\n"}, {"tags": ["c++", "c++11", "templates", "template-specialization", "enable-if"], "comments": [{"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 2, "creation_date": 1532507586, "post_id": 51514248, "comment_id": 89996956, "body": "How do you distinct those types of classes? Without that code, we can&#39;t help you much."}, {"owner": {"reputation": 1038, "user_id": 547270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEM1T.png?s=128&g=1", "display_name": "scrutari", "link": "https://stackoverflow.com/users/547270/scrutari"}, "edited": false, "score": 1, "creation_date": 1532507646, "post_id": 51514248, "comment_id": 89996994, "body": "<code>std::enable_if</code>is exactly what you are looking for - so just define how you distinguish a &quot;container&quot; type from others."}, {"owner": {"reputation": 417, "user_id": 8721157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd37f5ecd50ea40d15d1d84b9c1cf3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jonn Dove", "link": "https://stackoverflow.com/users/8721157/jonn-dove"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1532508415, "post_id": 51514248, "comment_id": 89997472, "body": "@Jaa-c, I distinguish them just as their names suggest: ContainerType for std::containers (e.g. they have an iterator ), and NotAConatinerType for anything else"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1559312780, "post_id": 51514350, "comment_id": 99392305, "body": "tag dispatching for the win; so much nicer"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 20, "last_activity_date": 1559312810, "last_edit_date": 1559312810, "creation_date": 1532507644, "answer_id": 51514350, "question_id": 51514248, "link": "https://stackoverflow.com/questions/51514248/can-i-define-templates-for-different-sets-of-types/51514350#51514350", "title": "Can I define templates for different sets of types?", "body": "<p><a href=\"https://stackoverflow.com/q/12042824/560648\">Create a traits for your concept Container</a>, then, you might use SFINAE</p>\n\n<pre><code>template &lt;typename T&gt;\ntypename std::enable_if&lt;is_container&lt;T&gt;::value, bool&gt;::type\nmyFunc(T in){\n    //do some stuff\n}\n\ntemplate &lt;typename T&gt;\ntypename std::enable_if&lt;!is_container&lt;T&gt;::value, bool&gt;::type\nmyFunc(T in){\n    //do some stuff\n}\n</code></pre>\n\n<p>or tag dispatching</p>\n\n<pre><code>namespace details\n{\n\n    template &lt;typename T&gt;\n    bool myFunc(T in, std::true_type){\n        //do some stuff\n    }\n\n    template &lt;typename T&gt;\n    bool myFunc(T in, std::false_type){\n        //do some stuff\n    }\n\n}\n\n\ntemplate &lt;typename T&gt;\nbool myFunc(T in){\n    return details::myFunc(in, is_container&lt;T&gt;{});\n}\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 8721157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd37f5ecd50ea40d15d1d84b9c1cf3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jonn Dove", "link": "https://stackoverflow.com/users/8721157/jonn-dove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 51514350, "answer_count": 1, "score": 13, "last_activity_date": 1559312810, "creation_date": 1532507300, "last_edit_date": 1532527285, "question_id": 51514248, "link": "https://stackoverflow.com/questions/51514248/can-i-define-templates-for-different-sets-of-types", "title": "Can I define templates for different sets of types?", "body": "<p>I need to write a templated function, that behaves differently depending on the class of its parameter:</p>\n\n<pre><code>template&lt;class ContainerType&gt;\nbool myFunc(ContainerType in){\n//do some stuff\n}\n\ntemplate&lt;class NotAContainerType&gt;\nbool myFunc(NotAContainerType in){\n//do something else\n}\n</code></pre>\n\n<p>I am restricted to C++11, so <code>static_if</code> is off the table. Also, the classes of <code>ContainerType</code> and <code>NotAContainerType</code> are really large and might change in the future, so just adding a few exceptions by hand as a template specialization is not sensible either.</p>\n\n<p>I am aware of the <code>std::enable_if</code> workaround, but how do I use it, if I need to apply it to two mutually distinct sets of classes?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1532507198, "post_id": 51514061, "comment_id": 89996732, "body": "Why do you need to load all 50 images at once?"}, {"owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1532507275, "post_id": 51514061, "comment_id": 89996783, "body": "@vahancho Because I am showing them as photogalery (GridView delegate), but all I need to show is just that 200x200 image."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 2, "creation_date": 1532507432, "post_id": 51514061, "comment_id": 89996870, "body": "Why not read the images on a new thread and post the results back to the GUI thread using a queued signal/slot?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1532507512, "post_id": 51514061, "comment_id": 89996912, "body": "Well, but I hardly believe that you can show all 50 images at the same time. So you can load the first few and fetch the rest incrementally as soon as you scroll down, for example. This is good, especially, if you said, you cannot produce thumbnail images beforehand."}, {"owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1532507676, "post_id": 51514061, "comment_id": 89997012, "body": "@vahancho Yes, I can and I am showing all 50 images (I can show about 80 images on one screen), so I can&#39;t fetch them later unfortunally"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1532507856, "post_id": 51514061, "comment_id": 89997142, "body": "@Brykyz, even if you should show them all, show some of them, than make placeholders for the rest and fetch the full images one by one later with, as suggested, threads."}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "edited": false, "score": 0, "creation_date": 1532538827, "post_id": 51523647, "comment_id": 90017530, "body": "Yes, I already solved it with signals and <code>QThreads</code>, thank you"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1532535929, "creation_date": 1532535929, "answer_id": 51523647, "question_id": 51514061, "link": "https://stackoverflow.com/questions/51514061/optimizing-of-loading-qimage-from-file/51523647#51523647", "title": "Optimizing of loading QImage from file", "body": "<blockquote>\n  <p>Yes, I can and I am showing all 50 images (I can show about 80 images on one screen), so I can't fetch them later unfortunally</p>\n</blockquote>\n\n<p>Yes, you can show the images later. Your display should be a view and react to the data changes in the model. As the images are loaded asynchronously, the model will signal data changes, and the view will display the upcoming images automatically.</p>\n"}], "owner": {"reputation": 365, "user_id": 9616495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bcf4ea4e16e38ca0eb32fb3d544f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brykyz", "link": "https://stackoverflow.com/users/9616495/brykyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533356993, "creation_date": 1532506696, "last_edit_date": 1533356993, "question_id": 51514061, "link": "https://stackoverflow.com/questions/51514061/optimizing-of-loading-qimage-from-file", "title": "Optimizing of loading QImage from file", "body": "<p>I'm trying to load image from file to <code>QImage</code> with <code>QImage(path)</code> command.</p>\n\n<p>Currently, I am trying to optimize my code, because two lines of code take about 200 miliseconds per image, which is too much because loading of more than 50 pictures takes more than 10 seconds.</p>\n\n<pre><code>QImage tmp = QImage(path/to/file);\nthumbnail_ = tmp.scaled(200,200,Qt::KeepAspectRatioByExpanding);\n</code></pre>\n\n<p>Image from path have about 5MB with resolution 4000x3000. I can't directly scale <code>QImage</code> and save it to <code>thumbnail_</code> because I need to save some information about it later.</p>\n\n<p>Does anyone know better solution how to optimize loading that image?</p>\n"}, {"tags": ["c++", "sizeof", "unsigned"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 9, "creation_date": 1532506976, "post_id": 51513994, "comment_id": 89996588, "body": "why would you expect something different? The same thing happens when you do <code>cout &lt;&lt;  -(sizeof(a)) &lt;&lt; endl;</code>. This has zero to do with auto."}, {"owner": {"reputation": 1601, "user_id": 2781903, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e8eb70323cd0c988a1c17ef52eb24f52?s=128&d=identicon&r=PG&f=1", "display_name": "CodeShark", "link": "https://stackoverflow.com/users/2781903/codeshark"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1532507094, "post_id": 51513994, "comment_id": 89996660, "body": "My thought was that <code>auto</code> does not only respect the return type but do some kind context check like checking for unary minus operator or whatever happens in whole initialization process."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 5, "creation_date": 1532507169, "post_id": 51513994, "comment_id": 89996717, "body": "Because C designers wanted <code>-</code> to be valid on unsigned values. Personally I would have rendered it invalid."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 10, "creation_date": 1532507207, "post_id": 51513994, "comment_id": 89996735, "body": "That might be a misunderstanding about <code>auto</code> it does not add anything new to the C++ language, it uses the very same mechanism that was already present in the language for template argument type deduction"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1532508407, "post_id": 51513994, "comment_id": 89997468, "body": "I added tags but not one related to auto, type deduction, template, as it is an arithmetic issue not a template issue. But auto is defined in term of templates."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532508430, "post_id": 51513994, "comment_id": 89997480, "body": "@JohannesSchaub-litb Which operators would you allow for unsigned?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1532508615, "post_id": 51513994, "comment_id": 89997603, "body": "@curiousguy all except unary minus. By saying <code>0u - x</code>, you can get the same effect as <code>-x</code>. Perhaps I would even forbid mixing signedness/unsignedness in operator expressions. IMO it could be useful to still allow <code>-1u</code>.. so I could add a rule that unary minus on unsigned is only allowed on unsigned literals, which kind-of is similar to forbidding mixing of signedness in operator expressions."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532508797, "post_id": 51513994, "comment_id": 89997730, "body": "@JohannesSchaub-litb So subtraction of unsigned numbers, which is modulo, is OK, but not negation?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 2, "creation_date": 1532509165, "post_id": 51513994, "comment_id": 89997992, "body": "@curiousguy yes because wrap-around is just a special case for subtraction. Only if right is &gt; than left, you have wrap around. For negation on the other hand, wrap around is the majority of cases, with just <code>0</code> being the exception."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1532526410, "post_id": 51513994, "comment_id": 90009771, "body": "BTW, no need for all those unnecessary parens - <code>- sizeof a</code> demonstrates the behaviour just as effectively."}], "answers": [{"comments": [{"owner": {"reputation": 1601, "user_id": 2781903, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e8eb70323cd0c988a1c17ef52eb24f52?s=128&d=identicon&r=PG&f=1", "display_name": "CodeShark", "link": "https://stackoverflow.com/users/2781903/codeshark"}, "edited": false, "score": 0, "creation_date": 1532506864, "post_id": 51514075, "comment_id": 89996510, "body": "So do I have to cast it with explicitely saying it&#39;s a <code>signed int</code>? Is <code>auto</code> always only using the return type without checking if it makes sense? If so, I see an issue with casting here."}, {"owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "reply_to_user": {"reputation": 1601, "user_id": 2781903, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e8eb70323cd0c988a1c17ef52eb24f52?s=128&d=identicon&r=PG&f=1", "display_name": "CodeShark", "link": "https://stackoverflow.com/users/2781903/codeshark"}, "edited": false, "score": 0, "creation_date": 1532506919, "post_id": 51514075, "comment_id": 89996542, "body": "Exactly, you need to declare <code>c++</code> that you are going to store a negative value. <code>auto</code> does not know about this since the value was <code>size_t</code>. Casting will not give you an issue since you tell <code>c++</code> it will be a <code>signed int</code>."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 1601, "user_id": 2781903, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e8eb70323cd0c988a1c17ef52eb24f52?s=128&d=identicon&r=PG&f=1", "display_name": "CodeShark", "link": "https://stackoverflow.com/users/2781903/codeshark"}, "edited": false, "score": 0, "creation_date": 1532508559, "post_id": 51514075, "comment_id": 89997569, "body": "@CodeShark What doesn&#39;t &quot;make sense&quot; here?"}], "tags": [], "owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "is_accepted": false, "score": 1, "last_activity_date": 1532506752, "creation_date": 1532506752, "answer_id": 51514075, "question_id": 51513994, "link": "https://stackoverflow.com/questions/51513994/why-does-auto-not-respect-the-unary-minus-operator/51514075#51514075", "title": "Why does &#39;auto&#39; not respect the unary minus operator?", "body": "<p>If we take a look at: <a href=\"https://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/sizeof</a>, the result is of type <code>size_t</code> which is <code>unsigned</code>. You explicity need to declare it as an <code>signed int</code> to allow negative values.</p>\n\n<p>Instead of <code>auto</code> you can write <code>int</code> which allows negative values.</p>\n"}, {"comments": [{"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1532507244, "post_id": 51514193, "comment_id": 89996763, "body": "Don&#39;t you mean <b>un</b>-surprisingly?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 3, "creation_date": 1532507403, "post_id": 51514193, "comment_id": 89996860, "body": "@acraig5075 No, I mean surprisingly. It is rather confusing why unary minus is allowed to be applied to the unsigned type on the first place. I mean unary minus is supposed to change the sign of the value, but unsigned values can not have the sign changed."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1532507644, "post_id": 51514193, "comment_id": 89996992, "body": "VTT binary minus is applicable to unsigned values so why shouldn&#39;t unary minus?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 9, "creation_date": 1532507756, "post_id": 51514193, "comment_id": 89997071, "body": "What does integral promotion have to do with it? Nothing is promoted here as far as I can see; <code>size_t</code> in, <code>size_t</code> out...?!?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1532507824, "post_id": 51514193, "comment_id": 89997117, "body": "@DevSolar Yes, output type remains <code>size_t</code> according to the rules of integral promotions."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532507922, "post_id": 51514193, "comment_id": 89997181, "body": "@Caleth Binary minus is supposed to decrement the value so it makes sense in general. While unary minus is supposed to change the sign, which does not make much sense since the sign of the unsigned type can not be changed."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532508577, "post_id": 51514193, "comment_id": 89997581, "body": "@Caleth Technically unary minus applied to unsigned type <i>&quot;is computed by subtracting its value from 2 n, where n is the number of bits in the promoted operand&quot;</i> which is not exactly the same as &quot;binary minus partially applied to an appropriate zero &quot;"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532508801, "post_id": 51514193, "comment_id": 89997738, "body": "It&#39;s equivalent under arithmetic mod 2^n"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 2, "creation_date": 1532508905, "post_id": 51514193, "comment_id": 89997823, "body": "@VTT You can either think of an unsigned integer as a positive integer or an integer modulo 2^n. Negation of an unsigned being unsigned makes sense only in term of modulo arithmetic (Z/(2^n)Z). But saying that a number of bytes is an integer modulo is absurd, it&#39;s a positive number."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1532508987, "post_id": 51514193, "comment_id": 89997874, "body": "@DevSolar is right, that&#39;s why I downvoted it. The answer says that the issue comes from integral promotion. But even if you remove integral promotion from the spec, you still have &quot;size_t in, size_t out&quot;."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532509849, "post_id": 51514193, "comment_id": 89998457, "body": "@JohannesSchaub-litb If you remove integral promotions from the spec (that is replace them with different set of rules) type of result of applying unary minus to the unsigned type could be anything, including negative number as OP expects or such an operation being prohibited. The primary point of the answer is that <code>auto</code> works correctly."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532511837, "post_id": 51514193, "comment_id": 89999858, "body": "No it could not be anything. Or are you saying because my litb-promotions were not adopted into the spec, the type of &quot;x&quot; can actually be anything even today? By &quot;removing the rules that you make responsible&quot;, I don&#39;t mean &quot;replacing by a random other rule&quot;."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532512221, "post_id": 51514193, "comment_id": 90000086, "body": "It is true that integral promotions apply formally. But they are not responsible for this result, because they keep the result type equal to the source type. It asks for misinterpretation by readers to pick a random screw that even has no function at all in the problem and blame it."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532514419, "post_id": 51514193, "comment_id": 90001569, "body": "@JohannesSchaub-litb This is nonsense. Integral promotions are directly responsible for the type of the result. And it is the same thing with the most of the other built-in arithmetic operators, the type of the result is determined by the usual arithmetic conversions / integral promotions rather than by operator itself. &quot;removing rules&quot; can only mean making subject either implementation-defined or completely undefined anything else would be replacing rules."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1532514533, "post_id": 51514193, "comment_id": 90001661, "body": "@DevSolar Integral promotions are responsible for the type of the result, rather than minus operator, which yields result of the same type as (promoted) input. In this case <code>size_t</code> remains <code>size_t</code> but situation can be different, for example in <code>unsigned short x{1}; auto a{-x};</code> type of <code>a</code> will be <code>int</code> all of it sudden."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1532514629, "post_id": 51514193, "comment_id": 90001721, "body": "@VTT: I understand that. It&#39;s just that there is no promotion happening in the OP&#39;s example, so I thought bringing it up in the answer to be a bit confusing."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1532514679, "post_id": 51514193, "comment_id": 90001757, "body": "@DevSolar It actually does happen, but yields the same <code>size_t</code>."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 0, "creation_date": 1532515266, "post_id": 51514193, "comment_id": 90002147, "body": "@ilkkachu I reverted. &quot;An unsigned value does not promote to a signed value&quot; is actually wrong as I demonstrated at counter-example."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1532519356, "post_id": 51514193, "comment_id": 90004716, "body": "And BTW the fact that there is promotion even to a wider type contradicts the whole unsigned is modular over 2^n. A modular value should only be implicitly converted to a smaller module. Converting to a larger module should be an explicit operation. And converting to a non modular type is an even more serious contradiction of &quot;unsigned is modular&quot;. The whole construct makes no sense conceptually."}, {"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "edited": false, "score": 0, "creation_date": 1532522772, "post_id": 51514193, "comment_id": 90007177, "body": "&quot;so output will be -1&quot; the output of the program depends on the relative sizes of the built-in types. If int is larger than short then the result will indeed be -1. OTOH if int is the same size as short then the result will be the maximum value of unsigned short."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "edited": false, "score": 1, "creation_date": 1532529091, "post_id": 51514193, "comment_id": 90011760, "body": "@plugwash Illustrating the craziness of promotion rules"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532530449, "post_id": 51514193, "comment_id": 90012735, "body": "I rechecked the wording of &quot;[conv.prom]&quot;. In fact, the type <code>unsigned</code> is not even eligible to be promoted to anything, not even to itself. The integral promotion standard conversion is only applicable to certain other smaller types."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1532530894, "post_id": 51514193, "comment_id": 90013042, "body": "On second sight, it is even more complicated, because the integer conversion rank is implementation defined, however &quot;Note: It is recommended that implementations choose types for ptrdiff_&#173;t and size_&#173;t whose integer conversion ranks are no greater than that of signed long int unless a larger size is necessary to contain all the possible values.&quot;"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 3, "creation_date": 1532534768, "post_id": 51514193, "comment_id": 90015534, "body": "@curiousguy: The fundamental problem is that unsigned types are used for two disjoint purposes: to process modular arithmetic, or to hold natural numbers whose upper limit exceeds that of the corresponding signed type by a factor of less than two.  Unfortunately, rather than allowing programmers to specify which is needed, C simply assumes that &quot;small&quot; unsigned types should have the latter behavior an &quot;full-sized&quot; ones should have the former."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 28, "last_activity_date": 1532515198, "last_edit_date": 1532515198, "creation_date": 1532507119, "answer_id": 51514193, "question_id": 51513994, "link": "https://stackoverflow.com/questions/51513994/why-does-auto-not-respect-the-unary-minus-operator/51514193#51514193", "title": "Why does &#39;auto&#39; not respect the unary minus operator?", "body": "<p>The actual issue here is that use of unary minus operator, just like the rest of built-in arithmetic operators, is a subject to <em>integral promotions</em>. So surprisingly the result of applying unary minus to <code>size_t</code> will be still <code>size_t</code> and there is no need to blame <code>auto</code>.</p>\n\n<p>Counter-example. In this case due to integral promotions type of <code>x</code> will be <code>int</code> so output will be <code>-1</code>:</p>\n\n<pre><code>unsigned short a{1};\nauto x{-a};\ncout &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1601, "user_id": 2781903, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e8eb70323cd0c988a1c17ef52eb24f52?s=128&d=identicon&r=PG&f=1", "display_name": "CodeShark", "link": "https://stackoverflow.com/users/2781903/codeshark"}, "edited": false, "score": 0, "creation_date": 1532507613, "post_id": 51514305, "comment_id": 89996973, "body": "Thanks for showing the <code>auto x = 0-(sizeof(a));</code> way."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1532535071, "post_id": 51514305, "comment_id": 90015680, "body": "If <code>size_t</code> has a range larger than <code>int</code> (almost always the case), then given <code>size_t x,y=...;</code>, then <code>x=-y;</code> will set <code>x</code> to the one possible <code>size_t</code> value that would make <code>x+y</code> yield 0."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 4, "last_activity_date": 1532508379, "last_edit_date": 1532508379, "creation_date": 1532507486, "answer_id": 51514305, "question_id": 51513994, "link": "https://stackoverflow.com/questions/51513994/why-does-auto-not-respect-the-unary-minus-operator/51514305#51514305", "title": "Why does &#39;auto&#39; not respect the unary minus operator?", "body": "<p>The result of (unary) <code>-</code> applied to an unsigned value is unsigned, and <code>sizeof</code> returns an unsigned value.</p>\n\n<blockquote>\n  <p>The operand of the unary - operator shall have arithmetic or unscoped\n  enumeration type and the result is the negation of its operand.\n  Integral promotion is performed on integral or enumeration operands.\n  The negative of an unsigned quantity is computed by subtracting its\n  value from 2^n, where n is the number of bits in the promoted operand.\n  The type of the result is the type of the promoted operand.</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/expr.unary#op-8\" rel=\"nofollow noreferrer\"><code>[expr.unary.op]</code></a></p>\n\n<blockquote>\n  <p>The result of <code>sizeof</code> and <code>sizeof...</code> is a constant of type\n  <code>std\u200b::\u200bsize_\u00adt</code></p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/expr.sizeof#6\" rel=\"nofollow noreferrer\"><code>[expr.sizeof]</code></a></p>\n\n<p>To avoid implementation defined behaviour, you have to convert to <code>int</code> before applying the <code>-</code></p>\n\n<blockquote>\n  <p>If the destination type is signed, the value is unchanged if it can be\n  represented in the destination type; otherwise, the value is\n  implementation-defined.</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/conv.integral#3\" rel=\"nofollow noreferrer\"><code>[conv.integral]</code></a></p>\n\n<pre><code>class A{};\n\nint main() {\n    A a;\n    auto x = -(int{sizeof(a)});\n    cout &lt;&lt; x &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 4, "creation_date": 1532508521, "post_id": 51514351, "comment_id": 89997543, "body": "&quot;<i>operator does not turn an unsigned integral value into a signed one</i>&quot; Which entirely makes senses if you use unsigned for modulo arithmetic and makes no sense what so ever if you use unsigned for natural numbers"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1532537952, "post_id": 51514351, "comment_id": 90017089, "body": "You might like to mention that <code>size_t</code> like all integral types is subject to integral promotion, so iff it is smaller than <code>int</code>, it will be promoted to <code>int</code> before unary minus gets it. But I don&#39;t know any such perverse implementation."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 21, "last_activity_date": 1532507645, "creation_date": 1532507645, "answer_id": 51514351, "question_id": 51513994, "link": "https://stackoverflow.com/questions/51513994/why-does-auto-not-respect-the-unary-minus-operator/51514351#51514351", "title": "Why does &#39;auto&#39; not respect the unary minus operator?", "body": "<p>Your expression <code>-(sizeof(a))</code> applies the unary <code>-</code> operator to a value of unsigned type. The unary - operator does not turn an unsigned integral value into a signed one; it rather defines which unsigned value will be the result of such an operation as follows (cf. <a href=\"https://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"noreferrer\">unary arithmetic operators at cppreference.com</a>):</p>\n\n<blockquote>\n  <p>The builtin unary minus operator calculates the negative of its\n  promoted operand. For unsigned a, the value of -a is 2^b\n  -a, where b is the number of bits after promotion.</p>\n</blockquote>\n\n<p>Hence, even if it may be surprising, <code>auto</code> works correctly, as the result of applying unary <code>-</code> operator to an unsigned value is still an unsigned value.</p>\n"}], "owner": {"reputation": 1601, "user_id": 2781903, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e8eb70323cd0c988a1c17ef52eb24f52?s=128&d=identicon&r=PG&f=1", "display_name": "CodeShark", "link": "https://stackoverflow.com/users/2781903/codeshark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2555, "favorite_count": 2, "accepted_answer_id": 51514193, "answer_count": 4, "score": 31, "last_activity_date": 1532521809, "creation_date": 1532506466, "last_edit_date": 1532521809, "question_id": 51513994, "link": "https://stackoverflow.com/questions/51513994/why-does-auto-not-respect-the-unary-minus-operator", "title": "Why does &#39;auto&#39; not respect the unary minus operator?", "body": "<p>I'm quite new to C++ but I find this behaviour of <code>auto</code> weird:</p>\n\n<pre><code>class A{};\n\nint main() {\n    A a;\n    auto x = -(sizeof(a));\n    cout &lt;&lt; x &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Variable x is <code>unsigned</code> in this case although I used the unary minus operator at the initialiation of the variable. How come that only the return type of <code>sizeof</code> (<code>std::size_t</code>) is considered but not the fact that the stored number will be negative because of the used operator?</p>\n\n<p>I'm aware of <code>size_t</code> being an unsigned int.</p>\n\n<p>I've tried this with GCC 8.1.0 and C++17.</p>\n"}, {"tags": ["c++", "stl", "stdmap"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1532516456, "post_id": 51513916, "comment_id": 90002896, "body": "Clarification requested: You&#39;re still asking about a three-argument free function <code>std::find(map::iterator begin, map::iterator end, key)</code> ? Because I don&#39;t see how that can call <code>std::map::lowerbound( )</code> ."}], "answers": [{"comments": [{"owner": {"reputation": 6246, "user_id": 24913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24daeffcb799c6a88dfe9b80216f9f3a?s=128&d=identicon&r=PG", "display_name": "Kaz Dragon", "link": "https://stackoverflow.com/users/24913/kaz-dragon"}, "edited": false, "score": 0, "creation_date": 1532514244, "post_id": 51514183, "comment_id": 90001452, "body": "On your first point, surely <code>find(map.begin(), map.end(), map::value_type)</code> and <code>find(map.begin(), map.end(), map::mapped_type)</code> are not going to collide, and would just overload."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 6246, "user_id": 24913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24daeffcb799c6a88dfe9b80216f9f3a?s=128&d=identicon&r=PG", "display_name": "Kaz Dragon", "link": "https://stackoverflow.com/users/24913/kaz-dragon"}, "edited": false, "score": 2, "creation_date": 1532516292, "post_id": 51514183, "comment_id": 90002782, "body": "@KazDragon: The third argument to the generic <code>std::find</code> is independently deduced. That means for  <code>std::map&lt;std::string, int&gt;</code>, you get different overloads for <code>find(..., &quot;Foo&quot;)</code> and <code>find(..., &quot;Foo&quot;s)</code>. Only the latter would work. The former selects the generic overload, even though there&#39;s a conversion from <code>char[4]</code> to <code>std::string</code>."}, {"owner": {"reputation": 6246, "user_id": 24913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24daeffcb799c6a88dfe9b80216f9f3a?s=128&d=identicon&r=PG", "display_name": "Kaz Dragon", "link": "https://stackoverflow.com/users/24913/kaz-dragon"}, "edited": false, "score": 0, "creation_date": 1532527445, "post_id": 51514183, "comment_id": 90010580, "body": "I see.  Thanks for the clarification."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 8, "last_activity_date": 1532507083, "creation_date": 1532507083, "answer_id": 51514183, "question_id": 51513916, "link": "https://stackoverflow.com/questions/51513916/why-does-stdmap-have-a-find-member-function/51514183#51514183", "title": "Why does std::map have a find member function?", "body": "<p>A big objection to implementing <code>std::find</code> searching for a key on <code>std::map</code> as a non-member function is that doing so would prevent you from implementing the current version of <code>std::find</code>, which searches for a key-value pair.</p>\n\n<p>Being an associative container, <code>std::map</code> contains key-value pairs. Non-member <code>std::find</code> is defined for all containers as a function that searches for an item in the container, which must be a key-value pair for <code>std::map</code>; using <code>std::find</code> to look up an item by its key would be inconsistent.</p>\n\n<p>Obviously, one could implement <code>std::find_by_key</code> function applicable only to maps, but such function would always have a specialization based on the type of map. This provides no improvement in the API design over adding a member-function.</p>\n"}, {"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 3, "last_activity_date": 1532508005, "creation_date": 1532508005, "answer_id": 51514460, "question_id": 51513916, "link": "https://stackoverflow.com/questions/51513916/why-does-stdmap-have-a-find-member-function/51514460#51514460", "title": "Why does std::map have a find member function?", "body": "<blockquote>\n  <p>My colleague pointed out that it would be possible to implement <code>find</code> the same way as a non-member function using <code>map.lower_bound</code>.</p>\n</blockquote>\n\n<p>This would lead to inconsistency across different types of maps. For instance, you cannot implement a free function <code>find</code> using the <code>lower_bound</code> member function for <code>std::unordered_map</code>, since there is no such member function (same for <code>google::dense_hash_map</code> etc.). Efficient <code>find</code> for <code>unordered_map</code> needs access to class internals and needs to know its implementation details. Then, you would end up with <code>map</code> not having <code>find</code> member function and <code>unordered_map</code> having one. This would make hard to write a generic code that would allow user to choose between different types of maps, such as:</p>\n\n<pre><code>template &lt;class map_type&gt;\nvoid (const map_type &amp; map) {\n   // use std::find or map.find here ???\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6246, "user_id": 24913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24daeffcb799c6a88dfe9b80216f9f3a?s=128&d=identicon&r=PG", "display_name": "Kaz Dragon", "link": "https://stackoverflow.com/users/24913/kaz-dragon"}, "edited": false, "score": 1, "creation_date": 1532512498, "post_id": 51515008, "comment_id": 90000303, "body": "I thank you for taking the time to respond, but I believe you have missed the direction of my question.   It&#39;s not about whether there is a need for a special find function, it&#39;s about whether it is a member or non-member."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1532509555, "creation_date": 1532509555, "answer_id": 51515008, "question_id": 51513916, "link": "https://stackoverflow.com/questions/51513916/why-does-stdmap-have-a-find-member-function/51515008#51515008", "title": "Why does std::map have a find member function?", "body": "<p><code>std::map</code> has a member find because <code>map::operator[]</code> and <code>map::at</code> don't cover all the use cases for looking up by key.</p>\n\n<p><code>operator[]</code> requires the <code>mapped_type</code> be <em>DefaultConstructible</em>, and modifies the size of the map if it fails to find.</p>\n\n<p><code>at</code> throws if it fails to find.</p>\n\n<p><code>find</code> doesn't have the restriction of <code>operator[]</code>, and neither modifies nor throws if it fails to find.</p>\n"}], "owner": {"reputation": 6246, "user_id": 24913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24daeffcb799c6a88dfe9b80216f9f3a?s=128&d=identicon&r=PG", "display_name": "Kaz Dragon", "link": "https://stackoverflow.com/users/24913/kaz-dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 51514183, "answer_count": 3, "score": 5, "last_activity_date": 1532509555, "creation_date": 1532506174, "question_id": 51513916, "link": "https://stackoverflow.com/questions/51513916/why-does-stdmap-have-a-find-member-function", "title": "Why does std::map have a find member function?", "body": "<p>A colleague and I were discussing the relative merits of member vs. non-member functions.  A question arose: why does <code>std::map</code> have a <code>find</code> member function.</p>\n\n<p>My answer was that although you can use <code>std::find</code> on maps, you must search for the key-value pair, or use find_if and e.g. a lambda.  However, this is linear and <code>map.find</code> offers a search by key in better than linear time.  I ended with the assertion that if it could have been a non-member, then it would have been! (Although, std::string suggests that I might have been somewhat hasty in my generalization).</p>\n\n<p>My colleague pointed out that it would be possible to implement <code>find</code> the same way as a non-member function using <code>map.lower_bound</code>.</p>\n\n<p>Is there a rationale for <code>map.find</code> having been made a member?</p>\n"}, {"tags": ["c++", "windows", "windows-10", "taskbar"], "comments": [{"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "edited": false, "score": 1, "creation_date": 1532523349, "post_id": 51513785, "comment_id": 90007588, "body": "I wouldn&#39;t take that &quot;deprecated&quot; too literally. The very page they link to says &quot;In Windows 7, deskbands can still be implemented and thumbnail toolbars are not intended to replace them all. Not all applications will lend themselves to a thumbnail toolbar, and another solution such as a deskband or a task in a destination list might be the right answer for your application; you must decide which solution works best for your application as part of your development cycle.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1532507152, "post_id": 51513924, "comment_id": 89996699, "body": "That&#39;s not really what I want, or at least it looks very different. Should I give more information about it? Is something missing in my question?"}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1532508058, "post_id": 51513924, "comment_id": 89997260, "body": "To me it looks like a notify icon that opens a form when you click it. How it&#39;s styled and how it looks is up to the programmer I guess."}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1532508384, "post_id": 51513924, "comment_id": 89997453, "body": "When you look closely at the image, you see, that it is not inside of the notifyicon box, but to the left of it. Also you can (de-)activate it via the context menu of the taskbar itself and not a standalone program."}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 1, "creation_date": 1532510819, "post_id": 51513924, "comment_id": 89999152, "body": "@hellow That&#39;s called a DeskBand. <a href=\"https://stackoverflow.com/questions/13889290/how-do-i-place-my-custom-toolbar-deskband-on-taskbar-in-windows-7-win-wpf\">See here</a>. That&#39;s C++ territory for multiple reasons though."}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1532511727, "post_id": 51513924, "comment_id": 89999775, "body": "<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/Shobjidl/nn-shobjidl-ideskband2\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/api/Shobjidl/&hellip;</a>: &quot;Important  You should use thumbnail toolbars in new development in place of desk bands, which are not supported as of Windows 7.&quot; So it is still not the right thing?"}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 1, "creation_date": 1532523193, "post_id": 51513924, "comment_id": 90007466, "body": "I updated my question for more clarification. I hope this helps."}, {"owner": {"reputation": 8594, "user_id": 2441655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e0a2ff948b6678c5e0054a4c8392b67?s=128&d=identicon&r=PG", "display_name": "Venryx", "link": "https://stackoverflow.com/users/2441655/venryx"}, "edited": false, "score": 0, "creation_date": 1562943327, "post_id": 51513924, "comment_id": 100551653, "body": "@nvoigt Deskbands can be created in other languages fine (eg. C#), apparently: <a href=\"https://www.codeproject.com/Articles/2219/Extending-Explorer-with-Band-Objects-using-NET-and\" rel=\"nofollow noreferrer\">codeproject.com/Articles/2219/&hellip;</a>"}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1532506219, "creation_date": 1532506219, "answer_id": 51513924, "question_id": 51513785, "link": "https://stackoverflow.com/questions/51513785/taskbar-extension-like-contacts/51513924#51513924", "title": "Taskbar extension (like contacts)", "body": "<p>It's commonly called a tray icon or <a href=\"https://msdn.microsoft.com/en-US/library/system.windows.forms.notifyicon(v=vs.110).aspx\" rel=\"nofollow noreferrer\">NotifyIcon</a>. </p>\n\n<p>The official class is still in Windows Forms, if you want to be more modern have a look <a href=\"https://stackoverflow.com/questions/17674761/can-i-use-notifyicon-in-wpf\">here</a> on what your options are in WPF.</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 2487271, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VKyHN.jpg?s=128&g=1", "display_name": "Mr.Nimelo", "link": "https://stackoverflow.com/users/2487271/mr-nimelo"}, "is_accepted": false, "score": 2, "last_activity_date": 1532508126, "creation_date": 1532508126, "answer_id": 51514492, "question_id": 51513785, "link": "https://stackoverflow.com/questions/51513785/taskbar-extension-like-contacts/51514492#51514492", "title": "Taskbar extension (like contacts)", "body": "<p>I think that you might be interested in <strong>Shell Extensions</strong>/ <strong>Taskbar Extensions - Deskbands</strong>, please refer to following web-sides for more informations:</p>\n\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/windows/desktop/shell/taskbar-extensions#deskbands\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/shell/taskbar-extensions#deskbands</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff468984(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ff468984(v=vs.85).aspx</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8811621/how-to-write-a-shell-extension-in-c\">How to write a shell extension in C++?</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/magazine/dd942846.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/magazine/dd942846.aspx</a></li>\n</ul>\n\n<p>Perhaps the <strong>Taskbar API</strong> of Windows should be helpful in your case. Please note that the explorer.exe would be responsible for loading your extension, so that writing it in <code>C#</code> might have some limitations due to different <code>CLR</code> runtimes loaded.</p>\n"}], "owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1602202602, "creation_date": 1532505781, "last_edit_date": 1602202602, "question_id": 51513785, "link": "https://stackoverflow.com/questions/51513785/taskbar-extension-like-contacts", "title": "Taskbar extension (like contacts)", "body": "<p>In Windows 10, you can activate different buttons (e.g. task view button, windows ink workspace button, contacts button) by opening the context menu of the taskbar.</p>\n<p>This is something different than the classic tray icons, and similar to deskbands (which has been <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/Shobjidl/nn-shobjidl-ideskband2\" rel=\"nofollow noreferrer\">deprecated</a>?).</p>\n<p>An example of the contacts button:</p>\n<p><a href=\"https://i.stack.imgur.com/Ywc4J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ywc4J.png\" alt=\"Contacts button example\" /></a></p>\n<p>How can one achieve this? Is there a API for this? Are there documents available?</p>\n"}]