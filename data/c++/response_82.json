[{"tags": ["c++", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "is_accepted": true, "score": 1, "last_activity_date": 1470271877, "creation_date": 1470271877, "answer_id": 38755849, "question_id": 38755480, "link": "https://stackoverflow.com/questions/38755480/using-cmake-to-make-header-files-descendants-of-the-projects-source-directory/38755849#38755849", "title": "using cmake to make header files descendants of the project&#39;s source directory", "body": "<p>What I have done in the past is to set this in the top level <code>CMakeLists.txt</code> (which should be in your <code>GraphicsEngine</code> directory):</p>\n\n<pre><code>SET(PROJECT_ROOT \"${CMAKE_CURRENT_SOURCE_DIR}/..\")\n\nINCLUDE_DIRECTORIES(\n  ${PROJECT_ROOT}\n)\n</code></pre>\n\n<p>where according to <a href=\"https://cmake.org/Wiki/CMake_Useful_Variables\" rel=\"nofollow\">this</a>, <code>CMAKE_CURRENT_SOURCE_DIR</code> is</p>\n\n<blockquote>\n  <p>this is the directory where the currently processed CMakeLists.txt is located in</p>\n</blockquote>\n\n<p>Note that by defining <code>Project_Root</code> in this way, your <code>GraphicsEngine</code> project can also <code>#include</code> headers from <em>sister</em> projects to <code>GraphicsEngine</code>.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 6545408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fb1c48e57bb9591d4113708fc67125?s=128&d=identicon&r=PG&f=1", "display_name": "Bazinevis", "link": "https://stackoverflow.com/users/6545408/bazinevis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 38755849, "answer_count": 1, "score": 0, "last_activity_date": 1470271877, "creation_date": 1470268718, "last_edit_date": 1470269790, "question_id": 38755480, "link": "https://stackoverflow.com/questions/38755480/using-cmake-to-make-header-files-descendants-of-the-projects-source-directory", "title": "using cmake to make header files descendants of the project&#39;s source directory", "body": "<p>As in <a href=\"https://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes\" rel=\"nofollow\">Google C++ Style Guide</a> is mentioned all of a project's header files should be listed as descendants of the project's source directory without use of UNIX directory shortcuts . (the current directory) or .. (the parent directory). How can I do that in my project that is shortly described below.</p>\n\n<p>My project directory hierarchy is like this:</p>\n\n<ul>\n<li>GraphicsEngine\n\n<ul>\n<li>header_files.h</li>\n<li>source_files.cc</li>\n<li>CMakeLists.txt (1)</li>\n<li>Light\n\n<ul>\n<li>CMakeLists.txt (2)</li>\n<li>header_files.h</li>\n<li>source_files.cc</li>\n</ul></li>\n<li>Camera\n\n<ul>\n<li>CMakeLists.txt (3)</li>\n<li>header_files.h</li>\n<li>source_files.cc</li>\n</ul></li>\n<li>Core\n\n<ul>\n<li>CMakeLists.txt (4)</li>\n<li>header_files.h</li>\n<li>source_files.cc</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>These are contents of CMakeLists.txt files:</p>\n\n<p>CMakeLists.txt (1)</p>\n\n<pre><code>add_library(GraphicsEngineLib source_files.cc)\ntarget_link_libraries(GraphicsEngineLib LightLib CameraLib CoreLib)\nadd_subdirectory(Light)\nadd_subdirectory(Camera)\nadd_subdirectory(Core)\n</code></pre>\n\n<p>CMakeLists.txt (2)</p>\n\n<pre><code>add_library(LightLib source_files.cc)\n</code></pre>\n\n<p>CMakeLists.txt (3)</p>\n\n<pre><code>add_library(CameraLib source_files.cc)\n</code></pre>\n\n<p>CMakeLists.txt (4)</p>\n\n<pre><code>add_library(CoreLib source_files.cc)\n</code></pre>\n\n<p>Now when for example I want to include header files from Camera folder in to files in Core folder, I have to use ../Camera/header_file.h but I want to use GraphicsEngine/Camera/header_file.h. How can I do this?</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1470269195, "post_id": 38755356, "comment_id": 64884691, "body": "For the general case, no.  <code>__syncthreads()</code> is not a device-wide execution barrier.  It is a barrier at the block level only.  So I can come up with kernels that do a device wide operation that will break.  It&#39;s not to suggest that you can&#39;t combine kernels, but you must be thoughtful about any device-wide sync behavior that the separate kernels may have been taking advantage of (the kernel launch is a device-wide sync, for kernels in the same stream)."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1470277678, "post_id": 38755356, "comment_id": 64887562, "body": "Please post this as an answer so I can vote you up!"}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 3, "last_activity_date": 1470279097, "creation_date": 1470279097, "answer_id": 38757755, "question_id": 38755356, "link": "https://stackoverflow.com/questions/38755356/can-separate-cuda-kernels-be-merged-using-syncthreads/38757755#38757755", "title": "Can separate CUDA kernels be merged using __syncthreads()?", "body": "<p>The simplest, most general answer is no.  I only need to find one example for which the paradigm breaks to support that.  Let's remind ourselves that:</p>\n\n<ol>\n<li><p><code>__syncthreads()</code> is a block level execution barrier, but not a device-wide execution barrier.  The only defined device-wide execution barrier is the kernel launch (assuming we're talking about issuing kernels into the same stream, for sequential execution).</p></li>\n<li><p>threadblocks of a particular kernel launch can execute <em>in any order</em>.</p></li>\n</ol>\n\n<p>Let's say we have 2 functions:</p>\n\n<ol>\n<li>reverse the elements of a vector</li>\n<li>Sum the vector elements</li>\n</ol>\n\n<p>Let's assume the vector reversal is not an in-place operation (the output is distinct from the input), and that each threadblock handles a block-sized chunk of the vector, reading the elements and storing to the appropriate location in the output vector.</p>\n\n<p>To keep it really simple, we'll imagine we only have (need) two threadblocks.  For the first step, block 0 copies the left hand side of the vector to the right hand side (reversing the order) and block 1 copies right-to-left:</p>\n\n<pre><code>1 2 3 4 5 6 7 8\n|blk 0 |blk 1  |\n     \\ | /\n       X\n      /| \\\n     v |  v\n8 7 6 5 4 3 2 1\n</code></pre>\n\n<p>For the second step, in classical parallel reduction fashion, block zero sums the left hand elements of the output vector, and block 1 sums the right hand elements:</p>\n\n<pre><code>8 7 6 5 4 3 2 1\n  \\  /   \\  /\n  blk0    blk1\n   26      10\n</code></pre>\n\n<p>As long as the first function is issued in kernel1 and the second function is issued in kernel2, into the same stream after kernel1, this all just works.  For each kernel, it does not matter if block 0 executes before block 1, or vice-versa.</p>\n\n<p>If we combine the operations so that we have a single kernel, and block 0 copies/reverses the first half of the vector to the second half of the output vector, then executes a <code>__syncthreads()</code>, then sums the first half of the output vector, things are likely to break.  If block 0 executes <em>before</em> block 1, then the first step will be fine (copy/reversal of vector) but the second step will be operating on an output array half that has not been populated yet, because the block 1 has not begun executing yet.  The computed sum will be wrong.</p>\n\n<p>Without trying to give formal proofs, we can see that in the above case where there is data movement from one block's \"domain\" to another block's \"domain\", we run the risk of breaking things, because the previous device-wide sync (kernel launch) was necessary for correctness.  However, if we can limit the \"domain\" of a block so that any data consumed by subsequent operations is produced <em>only</em> by previous operations <em>in that block</em>, then a <code>__syncthreads()</code> may be sufficient to allow this strategy with correctness.  (The previous silly example could easily be reworked to allow this, simply by having block 0 be responsible for the <em>first half</em> of the output vector, thus copying from the <em>second half</em> of the input vector, and vice versa for the other block.)</p>\n\n<p>Finally, if we limit data scope to a single thread, then we can make such combinations without even using <code>__syncthreads()</code>.  These last two cases might have characteristics of \"embarassingly parallel\" problems, which exhibit a high degree of <em>independence</em>.</p>\n"}], "owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 38757755, "answer_count": 1, "score": 1, "last_activity_date": 1470279097, "creation_date": 1470267907, "question_id": 38755356, "link": "https://stackoverflow.com/questions/38755356/can-separate-cuda-kernels-be-merged-using-syncthreads", "title": "Can separate CUDA kernels be merged using __syncthreads()?", "body": "<p>Say I have this toy code:</p>\n\n<pre><code>#define N (1024*1024)\n#define M (1000000)\n\n__global__ void cudakernel1(float *buf)\n{\n   int i = threadIdx.x + blockIdx.x * blockDim.x;\n   buf[i] = 1.0f * i / N;\n   for(int j = 0; j &lt; M; j++)\n      buf[i] *= buf[i];\n}\n\n__global__ void cudakernel2(float *buf)\n{\n   int i = threadIdx.x + blockIdx.x * blockDim.x;\n   for(int j = 0; j &lt; M; j++)\n      buf[i] += buf[i];\n}\n\nint main()\n{\n   float data[N];\n   float *d_data;\n   cudaMalloc(&amp;d_data, N * sizeof(float));\n   cudakernel1&lt;&lt;&lt;N/256, 256&gt;&gt;&gt;(d_data);\n   cudakernel2&lt;&lt;&lt;N/256, 256&gt;&gt;&gt;(d_data);\n   cudaMemcpy(data, d_data, N * sizeof(float), cudaMemcpyDeviceToHost);\n   cudaFree(d_data); \n}\n</code></pre>\n\n<p>Can I merge the two kernels like so:</p>\n\n<pre><code>#define N (1024*1024)\n#define M (1000000)\n\n__global__ void cudakernel1_plus_2(float *buf)\n{\n   int i = threadIdx.x + blockIdx.x * blockDim.x;\n   buf[i] = 1.0f * i / N;\n   for(int j = 0; j &lt; M; j++)\n      buf[i] *= buf[i];\n\n   __syncthreads();\n\n   for(int j = 0; j &lt; M; j++)\n      buf[i] += buf[i];\n}\n\nint main()\n{\n   float data[N];\n   float *d_data;\n   cudaMalloc(&amp;d_data, N * sizeof(float));\n   cudakernel1_plus_2&lt;&lt;&lt;N/256, 256&gt;&gt;&gt;(d_data);\n   cudaMemcpy(data, d_data, N * sizeof(float), cudaMemcpyDeviceToHost);\n   cudaFree(d_data); \n}\n</code></pre>\n\n<p>Is the general case that two consecutive kernels which take the same block and thread parameters can be merged with an intermediate <code>__syncthreads()</code> true?</p>\n\n<p>(My real case is 6 consecutive non-trivial kernels that have a lot of set-up and tear-down overhead).</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470267015, "post_id": 38755218, "comment_id": 64884188, "body": "Please show implementation of function <code>RandomNum</code>.  Edit your post with the answer."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1470267079, "post_id": 38755218, "comment_id": 64884204, "body": "The function returns <code>Account*</code>, not <code>Account</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6276737"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 1, "creation_date": 1470267429, "post_id": 38755218, "comment_id": 64884272, "body": "@Falmarri I have no idea about horrible code as I&#39;m just a beginner.But if Stanford professor writes crap code then I don&#39;t know who else I can trust as a beginner hehehe."}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1470268446, "post_id": 38755218, "comment_id": 64884527, "body": "A 0 pointer is like &quot;absense of&quot;.  If you say &quot;what time is my appointment?&quot; and the answer is &quot;you do not have an appointment&quot;."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 1, "creation_date": 1470268750, "post_id": 38755218, "comment_id": 64884599, "body": "@Falmarri That&#39;s unduly harsh and not constructive. Focus on what&#39;s important, and mention less-important things in a nicer way, maybe? YMMV, but going after a beginner like that just seems mean-spirited."}, {"owner": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1470355804, "post_id": 38755218, "comment_id": 64929676, "body": "@DaveNewton It was suggested that this code was written by a professor, not by the asker of the question. That&#39;s why I was critiquing it."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1470355871, "post_id": 38755218, "comment_id": 64929692, "body": "@Falmarri Critique is valuable. Meanness, not so much. As I said, YMMV."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6276737"}, "edited": false, "score": 0, "creation_date": 1470267270, "post_id": 38755239, "comment_id": 64884242, "body": "So just saying zero I can denote null pointer? I don&#39;t have to say NULL?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1470267310, "post_id": 38755239, "comment_id": 64884248, "body": "@Arnob, Please use <code>nullptr</code>. While 0 and <code>NULL</code> both work, they have issues that were motivation for <code>nullptr</code> to exist."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470297388, "post_id": 38755239, "comment_id": 64894995, "body": "<code>nullptr</code> is only available in C++11 and later. In earlier versions, 0 is used instead, and <code>NULL</code> is usually just a macro for 0, eg <code>#define NULL 0</code>"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1470267141, "creation_date": 1470267141, "answer_id": 38755239, "question_id": 38755218, "link": "https://stackoverflow.com/questions/38755218/why-static-class-type-function-returns-zero/38755239#38755239", "title": "Why static class type function returns zero?", "body": "<p>The function returns <code>Account*</code>, not <code>Account</code>. That 0 is a null pointer constant.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6276737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 38755239, "answer_count": 1, "score": 2, "last_activity_date": 1470267525, "creation_date": 1470266943, "last_edit_date": 1470267077, "question_id": 38755218, "link": "https://stackoverflow.com/questions/38755218/why-static-class-type-function-returns-zero", "title": "Why static class type function returns zero?", "body": "<p>I'm reading C++ Essential handout by Stanford professor Nick Parlante.The following is a code example:   </p>\n\n<pre><code>/* If C++ kept class name information around at run-time,\n    this would be easier. */\n    static Account *RandomAccount(void) {\n    switch (RandomNum(3)) {\n    case 0: return(new Gambler); break;\n    case 1: return(new NickleNDime); break;\n    case 2: return(new MonthlyFee); break;\n    }\n    return(0);\n    }\n\nstatic int RandomNum(int num) {\nreturn(rand() % num);\n}\n</code></pre>\n\n<p>My question is, why this function returns zero when the type is <code>Account</code>?Does it mean false here?</p>\n"}, {"tags": ["java", "c++", "swig"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470265529, "post_id": 38755014, "comment_id": 64883803, "body": "How would you use the buffer if your main program was in C and you were not using JNI, without knowing the size?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470265540, "post_id": 38755014, "comment_id": 64883806, "body": "There is no way to create a Java array without knowing the size of the array."}, {"owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470266043, "post_id": 38755014, "comment_id": 64883951, "body": "I specifically said I am using SWIG, which generated JNI code and that one possibility I am considering is to modify that code so that it does what I want. This could include getting the C++ buffer size and replacing the array passed from Java with another of appropriate size and handing that one back out to Java.  And of course, I am interested in simpler approaches."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1470266403, "post_id": 38755014, "comment_id": 64884031, "body": "Before considering <code>SWIG</code> or <code>JNI</code> how does the <code>C++</code> function that calls <code>foo(ptr);</code> know what size the returned array is?"}, {"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1470266409, "post_id": 38755014, "comment_id": 64884034, "body": "I assume you know the size of the buffer. Is it documented? Is it also reference returned? How would a C++ user know the size of the buffer?"}, {"owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "edited": false, "score": 0, "creation_date": 1470278214, "post_id": 38755014, "comment_id": 64887713, "body": "The data that the function fills in the buffer is a file type with header information including its size. That is how the caller of <code>foo</code> can know the size of the buffer."}, {"owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "edited": false, "score": 0, "creation_date": 1470278781, "post_id": 38755014, "comment_id": 64887859, "body": "that is, after <code>foo</code> is called, the caller can use the passed-in pointer to examine the buffer&#39;s header to find out how big the buffer is"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1470296110, "post_id": 38755014, "comment_id": 64894241, "body": "Create a function with an <code>char**</code> argument. Your C program will allocat. Create an <code>in</code> and an <code>argout</code> typemaps to convert the argument into a return type and free any temporary char array. There should be plenty of such examples out there"}], "answers": [{"comments": [{"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1470851424, "post_id": 38839637, "comment_id": 65121669, "body": "Unless ``foo` is making the pointer <code>ptr</code> point to a buffer which is either static or disposed of properly when your library exits, you leak memory. I solved your problem 1000 times in Python, if you would like to see this solution, I can give it to you."}, {"owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1471475526, "post_id": 38839637, "comment_id": 65366897, "body": "Well, the Java side has in <code>array_classes.i</code> the function <code>delete</code>. Will that prevent the memory leak?"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1471475974, "post_id": 38839637, "comment_id": 65367016, "body": "There is almost a complete example of what you are trying to do in the SWIG manual in the Java section.."}, {"owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1471555897, "post_id": 38839637, "comment_id": 65406394, "body": "Do you mean 25.10.6, &quot;Using typemaps to return arguments&quot;?.  The manual doesn&#39;t elaborate on <code>delete</code> from <code>array_class</code>. Does it delete the C pointer that the Java array class was created from via <code>frompointer</code>? Or will I have to use typemaps to prevent the memory leak?"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1471556279, "post_id": 38839637, "comment_id": 65406546, "body": "No, 25.10.4. in the SWIG 3.0 documentation. An array of strings are returned as a Java String Array. It does a little more than you need, but you can change to a length 1 array or a single String object."}], "tags": [], "owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "is_accepted": true, "score": 0, "last_activity_date": 1470696567, "creation_date": 1470696567, "answer_id": 38839637, "question_id": 38755014, "link": "https://stackoverflow.com/questions/38755014/swig-java-get-buffer-of-unknown-size-from-c/38839637#38839637", "title": "SWIG/Java get buffer of unknown size from C++", "body": "<p>I've come up with a solution. Assuming the same function <code>foo</code> in my question:</p>\n\n<ol>\n<li><p>Write a function, say <code>bar</code>, that creates a local pointer, passes it into <code>foo</code>, and returns it. In this case, <code>bar</code> would be</p>\n\n<p><code>unsigned char* bar()\n{\n unsigned char* ptr;\n foo(ptr);\n return ptr;\n}</code></p></li>\n<li><p>In SWIG: Use <code>%array_classes</code> , ie, <code>array_class(unsigned char, ShortArray)</code></p></li>\n<li><p>Create an instance of the array class via the pointer returned from <code>bar</code> by using <code>frompointer</code>. \n<code>ShortArray sa = ShortArray.frompointer(example.bar())</code></p></li>\n</ol>\n\n<p>This bypasses the headache of getting SWIG to work with <code>type*&amp;</code> as an argin/out, since you are now dealing with ordinary pointers and arrays which SWIG handles just fine \"out of the box\". It also allows the Java side to receive a buffer of arbitrary size and also provides more Java-like syntax.</p>\n"}], "owner": {"reputation": 323, "user_id": 3043521, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4381d145f16fddd98cf8ff28f868b061?s=128&d=identicon&r=PG&f=1", "display_name": "BenK", "link": "https://stackoverflow.com/users/3043521/benk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 38839637, "answer_count": 1, "score": 0, "last_activity_date": 1470696567, "creation_date": 1470265476, "last_edit_date": 1495540298, "question_id": 38755014, "link": "https://stackoverflow.com/questions/38755014/swig-java-get-buffer-of-unknown-size-from-c", "title": "SWIG/Java get buffer of unknown size from C++", "body": "<p>I have a C++ function\n<code>foo(unsigned char*&amp; ptr)</code>\nthat creates a buffer and fills it with binary data and sets ptr to point to it.\nI need to get the buffer's contents from Java. </p>\n\n<p>To clarify, the C++ code can be used like this:</p>\n\n<pre><code>unsigned char* ptr;\nfoo(ptr);\n//now ptr points to a buffer, do what you want, eg\nx=ptr[1];\n</code></pre>\n\n<p>Using <code>arrays_java.i</code> will not work because SWIG needs to know the array size in advance. I also tried the built-in typemap NIOBUFFER for <code>unsigned char*</code> modified for <code>unsigned char*&amp;</code> but that presented problems with the generated C++ wrapper code, where the JVM crashed when attempting to use it. I also don't think using <code>carrays.i</code> as in <a href=\"https://stackoverflow.com/questions/11564334/how-to-define-swig-typemap-for-returning-unsigned-char-back-to-java\">this answer</a> will work either because the parameter is <code>unsigned char*&amp;</code>, not just <code>unsigned char*</code>, but I haven't tried this yet. (<strong>EDIT</strong> using <code>%array_functions (int * Iarr)</code> for a test function </p>\n\n<pre><code>void test(int*&amp; ia)\n{\nia[0]=1;\n...\n}\n</code></pre>\n\n<p>results in a JVM crash with EXCEPTION_ACCESS_VIOLATION as happened with the NIOBUFFER typemap)</p>\n\n<p>Is there a way to get the buffer's size from the C++/JNI wrapper code and then create a Java array of known size from within the JNI code so I can leverage <code>arrays_java.i</code>?</p>\n\n<p>Is there a way to use NIOBUFFER, possibly with modifications to its typemap and/or the generated C++ wrapper?</p>\n\n<p>Is there a way to treat some <code>type*&amp;</code> as a <code>type*</code>so I can use <code>carrays.i</code>?</p>\n\n<p>Because both the NIOBUFFER typemap and <code>array_functions</code> crashed the JVM, I have a feeling that the root of my problem is the <code>type*&amp;</code> parameter and that a way to solve this will allow either of those two options. How do I do this?</p>\n"}, {"tags": ["c++", "loops", "fstream", "ifstream", "seekg"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 4, "creation_date": 1470263834, "post_id": 38754761, "comment_id": 64883263, "body": "Why are you closing the file?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 4, "creation_date": 1470263919, "post_id": 38754761, "comment_id": 64883297, "body": "How about: don&#39;t close and open the file every time?"}, {"owner": {"reputation": 31, "user_id": 6674441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5fa6b42251517dc7b13a348cf8c5ec?s=128&d=identicon&r=PG&f=1", "display_name": "ntjess", "link": "https://stackoverflow.com/users/6674441/ntjess"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1470264013, "post_id": 38754761, "comment_id": 64883316, "body": "@Mooing Duck Yes, but when I took out the statement, the same problem occurred."}, {"owner": {"reputation": 31, "user_id": 6674441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5fa6b42251517dc7b13a348cf8c5ec?s=128&d=identicon&r=PG&f=1", "display_name": "ntjess", "link": "https://stackoverflow.com/users/6674441/ntjess"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470264060, "post_id": 38754761, "comment_id": 64883331, "body": "@immibis Is there a way to open the file only once, iterate through as many times as needed, and close at the end? Because the file is used in a function call outside main, so each end to the function call restarts the process."}, {"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "edited": false, "score": 4, "creation_date": 1470264147, "post_id": 38754761, "comment_id": 64883362, "body": "Please share you code to allow us to make an educated guess. :D and yes or you are closing and opening the file in each iteration or your pointer to the file is not moving..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1470264163, "post_id": 38754761, "comment_id": 64883366, "body": "@ntjess That&#39;s the normal way to process a file, and it happens automatically if you don&#39;t close and re-open it."}, {"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "edited": false, "score": 0, "creation_date": 1470264228, "post_id": 38754761, "comment_id": 64883393, "body": "use <a href=\"http://www.cplusplus.com/forum/beginner/22558/\" rel=\"nofollow noreferrer\">fopen()</a> then at the end of the looping fclose... see the <b><a href=\"http://www.cplusplus.com/forum/beginner/22558/#msg118123\" rel=\"nofollow noreferrer\">example</a></b>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1470264688, "post_id": 38754761, "comment_id": 64883530, "body": "You return a vector with only one item. Why not read all the items and return all of them in that vector."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1470264982, "post_id": 38754761, "comment_id": 64883626, "body": "Change it to <code>AddItemToInventory(vector&lt;Item*&gt; inventory, ifstream &amp;inptFile)</code> then have the caller in charge of opening and closing the <code>ifstream</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6674441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5fa6b42251517dc7b13a348cf8c5ec?s=128&d=identicon&r=PG&f=1", "display_name": "ntjess", "link": "https://stackoverflow.com/users/6674441/ntjess"}, "edited": false, "score": 0, "creation_date": 1470264503, "post_id": 38754795, "comment_id": 64883469, "body": "Ok, thanks. Does this mean I should open and close the file in main?"}, {"owner": {"reputation": 31, "user_id": 6674441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5fa6b42251517dc7b13a348cf8c5ec?s=128&d=identicon&r=PG&f=1", "display_name": "ntjess", "link": "https://stackoverflow.com/users/6674441/ntjess"}, "edited": false, "score": 0, "creation_date": 1470264861, "post_id": 38754795, "comment_id": 64883589, "body": "Because I run into scope problems doing this :/"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470264867, "post_id": 38754795, "comment_id": 64883593, "body": "Open yes. It will close itself when it goes out of scope."}, {"owner": {"reputation": 71, "user_id": 6596223, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dM--2yV7kqM/AAAAAAAAAAI/AAAAAAAAAVM/dzdtJ1MIr58/photo.jpg?sz=128", "display_name": "Jesse", "link": "https://stackoverflow.com/users/6596223/jesse"}, "edited": false, "score": 0, "creation_date": 1470273459, "post_id": 38754795, "comment_id": 64886671, "body": "Sure, you can open in main. Then you have to pass the input stream by reference to the calling function. If you pass by value, the copy of the input stream object in the calling function will not have an association with the file."}], "tags": [], "owner": {"reputation": 71, "user_id": 6596223, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dM--2yV7kqM/AAAAAAAAAAI/AAAAAAAAAVM/dzdtJ1MIr58/photo.jpg?sz=128", "display_name": "Jesse", "link": "https://stackoverflow.com/users/6596223/jesse"}, "is_accepted": false, "score": 3, "last_activity_date": 1470264006, "creation_date": 1470264006, "answer_id": 38754795, "question_id": 38754761, "link": "https://stackoverflow.com/questions/38754761/how-do-i-tell-a-program-where-to-start-reading-a-txt-file/38754795#38754795", "title": "How do I tell a program where to start reading a .txt file?", "body": "<p>Open the file before you use it and close it after you are done using it. The problem is that you are continually closing the input file so when you re-open it, it starts at the beginning again. </p>\n\n<p>You should only open and close your input file once.</p>\n"}], "owner": {"reputation": 31, "user_id": 6674441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5fa6b42251517dc7b13a348cf8c5ec?s=128&d=identicon&r=PG&f=1", "display_name": "ntjess", "link": "https://stackoverflow.com/users/6674441/ntjess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1470297121, "answer_count": 1, "score": -2, "last_activity_date": 1470264802, "creation_date": 1470263796, "last_edit_date": 1470264281, "question_id": 38754761, "link": "https://stackoverflow.com/questions/38754761/how-do-i-tell-a-program-where-to-start-reading-a-txt-file", "closed_reason": "Not suitable for this site", "title": "How do I tell a program where to start reading a .txt file?", "body": "<p>I want my program to be able to remember where it left off in a <code>.txt</code> file in order to proceed to the next input upon reiteration through a loop.\nFor instance, a text file containing:</p>\n\n<pre><code>Apples\nBananas\nOranges\n</code></pre>\n\n<p>would be accessed through a function <code>GetItem()</code> that appends the next file input into a vector of items. How do I make the function add <code>Apples</code> the first time, <code>Bananas</code> the second time, and <code>Oranges</code> the third iteration? As of now, each call to <code>GetItem()</code> keeps adding the first element to the vector, giving a vector containing:</p>\n\n<pre><code>Apples\nApples\nApples\n</code></pre>\n\n<p>Because the file keeps opening from the beginning. Any help would be appreciated.</p>\n\n<p>This is a simplified version of lengthy amounts of code that I could include, but would distract from the main purpose of the question. If the code is needed, I would be happy to include it.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>vector&lt;Item*&gt; AddItemToInventory(vector&lt;Item*&gt; inventory) {\r\nif (inptLctn == 'f') {\r\n        inptFile.open(\"TestFood.txt\");\r\n        if (!inptFile.is_open()) {\r\n            cout &lt;&lt; \"Could not open file.\" &lt;&lt; endl;\r\n            exit(1);\r\n            }\r\n            inptFile &gt;&gt; usrInptName;\r\n            inptFile &gt;&gt; usrInptQnty;\r\n            inptFile &gt;&gt; usrInptExpr;\r\n            inptFile &gt;&gt; usrInptPrice;\r\n\r\n            }\r\nprdc = new Produce;\r\n    prdc-&gt;SetName(usrInptName);\r\n    prdc-&gt;SetQuantity(usrInptQnty);\r\n    prdc-&gt;SetExpiration(usrInptExpr);\r\n    prdc-&gt;SetPrice(usrInptPrice);\r\n    inventory.push_back(prdc);\r\n\r\n    return inventory;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "edited": false, "score": 1, "creation_date": 1470263517, "post_id": 38754683, "comment_id": 64883170, "body": "the case of passing a pre-initialized vector to the constructor doesn&#39;t have to be costly if the caller uses std::move (<a href=\"http://en.cppreference.com/w/cpp/utility/move\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/move</a>) when passing it to the constructor"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470265867, "post_id": 38754683, "comment_id": 64883900, "body": "do these instances of <code>LargeClass</code> need to exist independent of <code>ABC</code> or can <code>ABC</code> take complete ownership?"}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "edited": false, "score": 0, "creation_date": 1470284188, "post_id": 38754683, "comment_id": 64889173, "body": "In your example, the vector is the owner, and the move constructor passes ownership from one vector to the next"}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1470267994, "creation_date": 1470267994, "answer_id": 38755367, "question_id": 38754683, "link": "https://stackoverflow.com/questions/38754683/ways-of-incorporating-large-class-elements-in-c/38755367#38755367", "title": "Ways of incorporating large class elements in c++", "body": "<p>Instead of </p>\n\n<pre><code>class Abc\n{\n  public: \n      Abc(std::vector&lt;LargeClass&gt; objTemp)\n      {\n            obj = objTemp;\n      }\n}\n</code></pre>\n\n<p>This has the potential of a copy-construction of some source <code>vector</code> into <code>objTemp</code>, a default construct of <code>obj</code>, and the copy of <code>objTemp</code> into <code>obj</code></p>\n\n<p>Possibly 2 copies and a default construct. Yucky.</p>\n\n<p>Instead take advantage of the <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow\">Member Initializer List</a></p>\n\n<pre><code>class Abc\n{\n  public: \n      Abc(std::vector&lt;LargeClass&gt; &amp; objTemp):obj(objTemp)\n      {\n      }\n}\n</code></pre>\n\n<p>This eliminates part of the initialization by copy-constructing <code>obj</code> with  a reference to <code>objTemp</code>. Declaring <code>objTemp</code> as a reference eliminates the copy-construction of <code>objTemp</code>.</p>\n\n<p>There may be performance advantages to this trick as well:</p>\n\n<pre><code>class Abc\n{\n  public: \n      Abc(std::vector&lt;LargeClass&gt; objTemp):obj(std::move(objTemp))\n      {\n      }\n}\n</code></pre>\n\n<p>In this case <code>objTemp</code> is copy-constructed, if the compiler sees fit to do so,  and then moved into <code>obj</code>. The compiler may be able to tweak this further behind the scenes for great savings.</p>\n\n<p>If <code>objTemp</code> is totally expendable, you can </p>\n\n<pre><code>class Abc\n{\n  public: \n      Abc(std::vector&lt;LargeClass&gt; &amp; objTemp):obj(std::move(objTemp))\n      {\n      }\n}\n</code></pre>\n\n<p>and move the contents of <code>objTemp</code> into <code>obj</code>, saving you the copying. <code>objTemp</code> is now totally empty. If you needed it outside of <code>ABC</code>, well... Sucks to be you.</p>\n\n<p>I would not use a shared pointer unless <code>ABC</code> and another both have equal claim to the ownership of <code>objTemp</code> and have incompatible scopes.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1470272873, "creation_date": 1470272873, "answer_id": 38756959, "question_id": 38754683, "link": "https://stackoverflow.com/questions/38754683/ways-of-incorporating-large-class-elements-in-c/38756959#38756959", "title": "Ways of incorporating large class elements in c++", "body": "<p>Use the move constructor:</p>\n\n<pre><code>class Abc\n{\npublic: \n    Abc(std::vector&lt;LargeClass&gt; objTemp) : obj(std::move(objTemp)) {}\n\nprivate:\n    std::vector&lt;LargeClass&gt; obj;\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class Abc\n{\npublic: \n    Abc(std::vector&lt;LargeClass&gt;&amp;&amp; objTemp) : obj(std::move(objTemp)) {}\n\nprivate:\n    std::vector&lt;LargeClass&gt; obj;\n};\n</code></pre>\n\n<p>If <code>LargeClass</code> is movable-only (not copyable), both solution are mainly equivalent.</p>\n\n<p>if <code>LargeClass</code> is copyable, I suggest the second one which force a correct usage.</p>\n\n<p>I suggest to delete the copy constructor of <code>LargeClass</code> if you want to avoid copy (and implement a cheap move constrctor).</p>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 38756959, "answer_count": 2, "score": 0, "last_activity_date": 1470272873, "creation_date": 1470263308, "question_id": 38754683, "link": "https://stackoverflow.com/questions/38754683/ways-of-incorporating-large-class-elements-in-c", "title": "Ways of incorporating large class elements in c++", "body": "<p>I give the following codes to illustrate my question. Suppose <code>LargeClass</code> is a class contains a lot of internal variables as the following codes show.</p>\n\n<pre><code>class LargClass\n{\n  public:\n       std::vector&lt;int&gt; abc={1,2,3, ...., 10000};\n\n}\n</code></pre>\n\n<p>Now suppose <code>LargeClass</code> becomes an element of another class <code>Abc</code> as the following codes show: </p>\n\n<pre><code>class Abc\n{\n public:\n       std::vector&lt;LargeClass&gt; obj;\n\n};\n</code></pre>\n\n<p>As <code>std::vector&lt;LargeClass&gt;</code> is very costly to be initialized when <code>Abc</code> class object is constructed, one possible solution is to construct <code>std::vector&lt;LargeClass&gt;</code> element after Abc is constructed as the following codes:</p>\n\n<pre><code>Abc abcObj;\n\nabcObj.obj.resize(3);\n....\n...\n</code></pre>\n\n<p>Instead of initialize <code>std::vector&lt;LargeClass&gt;</code> in a costly way:</p>\n\n<pre><code>class Abc\n{\n  public: \n      Abc(std::vector&lt;LargeClass&gt; objTemp)\n      {\n            obj = objTemp;\n      }\n}\n</code></pre>\n\n<p>Of course there are other solutions. One solution is to use pointer</p>\n\n<pre><code>   class Abc\n  {\npublic:\n   Abc(std::vector&lt;LargeClass&gt; &amp;obj)\n   {\n       pObj = &amp;obj;\n    }\nstd::vector&lt;LargeClass&gt; *pObj;\n}\n</code></pre>\n\n<p>With this solution, however, we must make sure that the given <code>std::vector&lt;LargeClass&gt; &amp;obj</code> always exists during the life span of class <code>Abc</code>.  In order to solve this problem, another solution is to use <code>shared_ptr</code>:</p>\n\n<pre><code>class Abc\n      {\n    public:\n       Abc(boost::shared_ptr&lt;std::vector&lt;LargeClass&gt;&gt; obj)\n       {\n           pObj = obj;\n        }\n    boost::shared_ptr&lt;std::vector&lt;LargeClass&gt; &gt; pObj;\n    }\n</code></pre>\n\n<p>So my question is: which solution is better? For me, I prefer the first, but it does not fit the rules of object-oriented programming. Any suggestions?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 2, "creation_date": 1470261324, "post_id": 38754274, "comment_id": 64882422, "body": "Use <code>boost::optional</code>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1470261365, "post_id": 38754274, "comment_id": 64882437, "body": "How do you define &quot;used&quot;? All the valid indices (<code>0</code> to <code>size() -1</code>) have valid elements."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1470261371, "post_id": 38754274, "comment_id": 64882442, "body": "Are you sure <code>vector</code> is the right data structure if you need to do this?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1470261425, "post_id": 38754274, "comment_id": 64882464, "body": "Your example is flawed in other ways as well, you don&#39;t set the size of the vector so all indexing will be out of bounds."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1470261533, "post_id": 38754274, "comment_id": 64882503, "body": "<code>myVector.erase(3);</code> is wrong as well."}], "answers": [{"tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": false, "score": 0, "last_activity_date": 1470261739, "creation_date": 1470261739, "answer_id": 38754371, "question_id": 38754274, "link": "https://stackoverflow.com/questions/38754274/how-to-check-if-an-index-in-a-vector-is-already-used/38754371#38754371", "title": "How to check if an index in a vector is already used", "body": "<p>Although use boost::optional correct it sounds like you might be asking for something like <code>std::map&lt;int, Object&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1470261818, "creation_date": 1470261818, "answer_id": 38754389, "question_id": 38754274, "link": "https://stackoverflow.com/questions/38754274/how-to-check-if-an-index-in-a-vector-is-already-used/38754389#38754389", "title": "How to check if an index in a vector is already used", "body": "<p>Use associative array aka <code>std::map</code>:</p>\n\n<pre><code>std::map&lt;size_t,int&gt; myVector;\nmyVector[0] = 5;\nmyVector[2] = 0;\nmyVector[3] = 1;\n\nmyVector.erase(3);\n</code></pre>\n\n<p>and your <code>isUsed()</code> will be equal to:</p>\n\n<pre><code>myVector.count(3)\n</code></pre>\n\n<p>you can wrap it into function if you want:</p>\n\n<pre><code>bool isUsed( const std::map&lt;size_t,int&gt; &amp;m, size_t idx )\n{\n    return m.count( idx );\n}\n</code></pre>\n\n<p>if you do not care on the order you iterate over your container, ytou may use <code>std::unordered_map</code> instead, which will be faster, but order of elements in iteration would be pretty much random.</p>\n"}, {"tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1470261826, "creation_date": 1470261826, "answer_id": 38754394, "question_id": 38754274, "link": "https://stackoverflow.com/questions/38754274/how-to-check-if-an-index-in-a-vector-is-already-used/38754394#38754394", "title": "How to check if an index in a vector is already used", "body": "<p>You could use the exact same logic you used when you were explaining your problem in your question. Which is to create a <code>bool</code> vector with the exact size of your vector, and then initialize it with <code>false</code>s.</p>\n\n<p>Now every time you use an index, you just go to your bool vector and change that index to <code>true</code>, means it was used before. You may check each index's value <code>true || false</code> to know if that index was used before or not. </p>\n"}, {"tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": true, "score": 1, "last_activity_date": 1470261947, "creation_date": 1470261947, "answer_id": 38754418, "question_id": 38754274, "link": "https://stackoverflow.com/questions/38754274/how-to-check-if-an-index-in-a-vector-is-already-used/38754418#38754418", "title": "How to check if an index in a vector is already used", "body": "<p>you may try an <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow\">std::unordered_map</a>, it works like a map, but is much faster for most operations </p>\n\n<pre><code>std::unordered_map&lt;int,std::string&gt; myMap;\nmyMap[1] = \"w\";\n\nmyMap.count(1) &gt; 0 == true\nmyMap.count(0) &gt; 0 == false\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "closed_date": 1470294731, "accepted_answer_id": 38754418, "answer_count": 4, "score": -1, "last_activity_date": 1470262308, "creation_date": 1470261252, "last_edit_date": 1470262308, "question_id": 38754274, "link": "https://stackoverflow.com/questions/38754274/how-to-check-if-an-index-in-a-vector-is-already-used", "closed_reason": "Needs more focus", "title": "How to check if an index in a vector is already used", "body": "<p>How do I check if an index in a vector is already used ?<br>\nI want something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if(isUsed(vector,index))\n    do something\nelse\n    do something else\n</code></pre>\n\n<p>example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;int&gt; myVector;\nmyVector[0] = 5;\nmyVector[2] = 0;\nmyVector[3] = 1;\n\nmyVector.erase(3);\n\nisUsed(myVector,3) = false\nisUsed(myVector,1) = false\nisUsed(myVector,2) = true\nisUsed(myVector,5) = false\nisUsed(myVector,0) = true\n</code></pre>\n\n<p>or:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::map&lt;int,std::string&gt; myMap;\nmyMap[1] = \"x\";\n\nmyMap.count(1) &gt; 0 = true\nmyMap.count(0) &gt; 0 = false\n</code></pre>\n\n<p>I want this function to be fast because im working with a lot of indexes.</p>\n"}, {"tags": ["android", "c++", "gradle", "android-ndk"], "comments": [{"owner": {"reputation": 6223, "user_id": 1178478, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/548a22264bc8bf9b26383ab5c84b39ee?s=128&d=identicon&r=PG", "display_name": "Derzu", "link": "https://stackoverflow.com/users/1178478/derzu"}, "edited": false, "score": 0, "creation_date": 1520360831, "post_id": 38754199, "comment_id": 85280324, "body": "Did you found the solution? Has it been deprecated?"}], "owner": {"reputation": 2384, "user_id": 933186, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nudDM.jpg?s=128&g=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/933186/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 865, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1470260934, "creation_date": 1470260934, "question_id": 38754199, "link": "https://stackoverflow.com/questions/38754199/error-while-compiling-gradle-could-not-find-method-sources", "title": "Error while compiling gradle - &#39;Could not find method sources()&#39;", "body": "<p>I am trying to compile the Gradle file in Android studio by including CPP files. But I get this error:</p>\n\n<pre><code>Error:(37, 0) Could not find method sources() for arguments [build_4ebkggkawsqgr6xhsg6qsm89y$_run_closure1$_closure3$_closure7$_closure8@25140] on object of type com.android.build.gradle.internal.dsl.NdkOptions.\n</code></pre>\n\n<p>Has it been deprecated?\nMy code looks like this:</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'maven'\napply plugin:  'cpp'\n\nandroid {\n    publishNonDefault true\n\n    compileSdkVersion 23\n    buildToolsVersion '23.0.2'\n\n    defaultConfig {\n        minSdkVersion 19\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n\n        ndk {\n            moduleName = \"xxxNative\"\n            ldLibs \"dlib\"\n            ldLibs.addAll([\"opencv_shape\", \"lopencv_stitching\",\n                           \"lopencv_objdetect\", \"lopencv_superres\", \"lopencv_videostab\",\n                           \"lopencv_calib3d\", \"lopencv_features2d\", \"lopencv_videoio\",\n                           \"lopencv_imgcodecs\", \"lopencv_video\", \"lopencv_photo\",\n                           \"lopencv_core\", \"llibjpeg\", \"llibpng\",\n                           \"llibtiff\", \"lzlib\", \"llog\",\n                           \"lgnustl_static\"])\n\n            stl = 'gnustl_shared'\n\n            sources {\n                cpp {\n                    source {\n                        srcDirs \"src/main/jni\"\n                        include \"*.cpp\"\n                    }\n                }\n            }\n        }\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            versionNameSuffix \"-debug\"\n        }\n\n        release {\n            minifyEnabled false\n            shrinkResources true\n            debuggable false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), '../proguard-rules.pro'\n        }\n    }\n\n    lintOptions {\n        abortOnError false\n        textReport true\n        textOutput 'stdout'\n    }\n\n    dexOptions {\n        incremental true\n        //preDexLibraries = rootProject.ext.preDexEnabled\n        javaMaxHeapSize \"3g\"\n    }\n}\n\ndependencies {\n    compile project(path: ':testApp')\n    compile 'com.android.support:appcompat-v7:23.2.1'\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "c++", "cython", "ucs2", "ucs-4"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1470261086, "post_id": 38754156, "comment_id": 64882327, "body": "Did you remember to link against Python?"}, {"owner": {"reputation": 1, "user_id": 6674325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8080f2b208d6c94d8dc966b96b3204ab?s=128&d=identicon&r=PG&f=1", "display_name": "someoneGeorge", "link": "https://stackoverflow.com/users/6674325/someonegeorge"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1470262042, "post_id": 38754156, "comment_id": 64882703, "body": "I include the python-config --cflags and python-config --ldflags in my CFLAGS and LDFLAGS respectively in my makefile."}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1470303600, "post_id": 38754156, "comment_id": 64899193, "body": "I was not able to reproduce this problem. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with complete details of gcc (g++) compile and link arguments should be included."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6674325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8080f2b208d6c94d8dc966b96b3204ab?s=128&d=identicon&r=PG&f=1", "display_name": "someoneGeorge", "link": "https://stackoverflow.com/users/6674325/someonegeorge"}, "is_accepted": false, "score": 0, "last_activity_date": 1470348513, "creation_date": 1470348513, "answer_id": 38778201, "question_id": 38754156, "link": "https://stackoverflow.com/questions/38754156/embedded-cython-ucs2-ucs4-issue/38778201#38778201", "title": "Embedded Cython UCS2 UCS4 issue", "body": "<p>It turns out I had two different installations of python on my system and I was linking the wrong one.</p>\n"}], "owner": {"reputation": 1, "user_id": 6674325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8080f2b208d6c94d8dc966b96b3204ab?s=128&d=identicon&r=PG&f=1", "display_name": "someoneGeorge", "link": "https://stackoverflow.com/users/6674325/someonegeorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470348513, "creation_date": 1470260755, "question_id": 38754156, "link": "https://stackoverflow.com/questions/38754156/embedded-cython-ucs2-ucs4-issue", "title": "Embedded Cython UCS2 UCS4 issue", "body": "<p>I have some python code I am trying to embed within c++ code using the cython api construct. For testing purposes I have been working off of:\n<a href=\"https://stackoverflow.com/questions/34480973/example-program-of-cython-as-python-to-c-converter\">Example program of Cython as Python to C Converter</a></p>\n\n<p>With the slightly modified code:</p>\n\n<pre><code>#foo.pyx\ncdef public foo(double* x):\n    x[0] = 0.0\n\n//file.cpp\n#include \"Python.h\"\n#include \"foo.h\"\n#include &lt;iostream&gt;\n\nint main(int argc, const char * argv[])\n{\n    double arr[2] = {1,2};\n    foo(arr);\n    std::cout &lt;&lt; arr[0] &lt;&lt; std::endl;\n    std::cout &lt;&lt; arr[1] &lt;&lt; std::endl;\n}   \n</code></pre>\n\n<p>After running</p>\n\n<pre><code>cython foo.pyx\n</code></pre>\n\n<p>I attempt to compile receiving the error message:</p>\n\n<pre><code>foo.c:(.text+0x387): undefined reference to 'PyUnicodeUCS4_DecodeUTF8'\n</code></pre>\n\n<p>I have seen other questions regarding the matter, such as <a href=\"https://stackoverflow.com/questions/19888104/an-ucs2-ucs4-incompatibility-import-failure-of-a-cythnized-pure-python-module\">An UCS2-UCS4 incompatibility import failure of a Cythnized pure-Python module</a>, and when I run:</p>\n\n<pre><code>import sys; sys.maxunicode\n</code></pre>\n\n<p>I get 1114111 which is in line with UCS4.  So what I am wondering is how to I resolve this undefined reference, when my python version seems to be line with the proper UCS there, but not elsewhere.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 85, "user_id": 1632874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc833513ec479598d76615c3aa0db71?s=128&d=identicon&r=PG", "display_name": "user1632874", "link": "https://stackoverflow.com/users/1632874/user1632874"}, "edited": false, "score": 0, "creation_date": 1470261146, "post_id": 38754233, "comment_id": 64882352, "body": "Sorry - I thought I was already on stackoverflow :)"}, {"owner": {"reputation": 335, "user_id": 5269463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd6d7a60b5855c0b520a2e3fa088460?s=128&d=identicon&r=PG&f=1", "display_name": "Anubioz", "link": "https://stackoverflow.com/users/5269463/anubioz"}, "edited": false, "score": 0, "creation_date": 1470261213, "post_id": 38754233, "comment_id": 64882378, "body": "Have you installed prerequisites? <code>apt-get install build-essential cmake gcc</code>?"}, {"owner": {"reputation": 85, "user_id": 1632874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc833513ec479598d76615c3aa0db71?s=128&d=identicon&r=PG", "display_name": "user1632874", "link": "https://stackoverflow.com/users/1632874/user1632874"}, "reply_to_user": {"reputation": 335, "user_id": 5269463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd6d7a60b5855c0b520a2e3fa088460?s=128&d=identicon&r=PG&f=1", "display_name": "Anubioz", "link": "https://stackoverflow.com/users/5269463/anubioz"}, "edited": false, "score": 0, "creation_date": 1470262719, "post_id": 38754233, "comment_id": 64882923, "body": "Yes - Wt, build essentials, cmake, gcc, g++, c++11, boost - all installed via apt-get."}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1243296000, "open_beta_date": 1241049600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon@2.png", "twitter_account": "ServerFault", "favicon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon.png", "audience": "system and network administrators", "site_url": "https://serverfault.com", "api_site_parameter": "serverfault", "logo_url": "https://cdn.sstatic.net/Sites/serverfault/Img/logo.png", "name": "Server Fault", "site_type": "main_site"}, "on_date": 1470261079, "question_id": 793721}, "owner": {"reputation": 85, "user_id": 1632874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc833513ec479598d76615c3aa0db71?s=128&d=identicon&r=PG", "display_name": "user1632874", "link": "https://stackoverflow.com/users/1632874/user1632874"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470261079, "creation_date": 1470260716, "question_id": 38754233, "link": "https://stackoverflow.com/questions/38754233/wt-build-examples-fails", "title": "Wt build examples fails", "body": "<p>Debian 8, C++11 and Boost libraries installed:</p>\n\n<p>From what I've read the examples get built all at once.</p>\n\n<p>try_compile() I believe there is a way to enable .c files (and .cpp), I don't think I have done that yet.</p>\n\n<p>crypt not found - is this OpenSSL it's looking for?</p>\n\n<p>Admission of guilt: I haven't worked with C++ in many many years, I've been scripting in PHP with MVC frameworks but I'd like to do more real programming!</p>\n\n<p>I installed the libraries with apt, and I'm using Netbeans with a default \"new project from existing sources\" on the example directory.</p>\n\n<p>Here's the cmake output:</p>\n\n<pre><code>cd '/home/perry/NetBeansProjects/examples'\n/usr/bin/cmake  -G \"Unix Makefiles\" -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=/usr/bin/gcc -DCMAKE_CXX_COMPILER=/usr/bin/g++ -DCMAKE_C_FLAGS_DEBUG=\"-g3 -gdwarf-2\" -DCMAKE_CXX_FLAGS_DEBUG=\"-g3 -gdwarf-2\" -DCMAKE_EXPORT_COMPILE_COMMANDS=ON\n*** Not building widget gallery; C++11 required (gcc &gt; 4.6 + set WT_CPP_11_MODE=-std=c++0x or MSVS &gt;= 2012)\n-- Looking for crypt\nCMake Error at /usr/share/cmake-3.0/Modules/CheckFunctionExists.cmake:56 (try_compile):\n  Unknown extension \".c\" for file\n\n    /usr/share/cmake-3.0/Modules/CheckFunctionExists.c\n\n  try_compile() works only for enabled languages.  Currently these are:\n\n\n\n  See project() command to enable other languages.\nCall Stack (most recent call first):\n  blog/CMakeLists.txt:30 (CHECK_FUNCTION_EXISTS)\n\n\n-- Looking for crypt - not found\n-- Looking for crypt in crypt\nCMake Error at /usr/share/cmake-3.0/Modules/CheckLibraryExists.cmake:52 (try_compile):\n  Unknown extension \".c\" for file\n\n    /usr/share/cmake-3.0/Modules/CheckFunctionExists.c\n\n  try_compile() works only for enabled languages.  Currently these are:\n\n\n\n  See project() command to enable other languages.\nCall Stack (most recent call first):\n  blog/CMakeLists.txt:32 (CHECK_LIBRARY_EXISTS)\n\n\n-- Looking for crypt in crypt - not found\n-- ** Not building codingview example: requires a multi-threaded build.\n-- ** Not building broadcast feature example: requires a multi-threaded build.\n-- ** Not building serverpush feature example: requires a multi-threaded build.\n-- ** Not building socketnotifier feature example: requires a multi-threaded build.\n-- ** hello-widget set example requires the built-in http... Skipping.\n-- ** Not building filetreetable example: requires boost_filesystem library.\n-- ** Not building gitmodel example: requires boost_filesystem library.\n-- ** Not building mandelbrot example: requires Wt::WRasterImage.\n-- ** Not building onethread example: requires a (ironically) a multi-threaded build.\n-- ** Not building simplechat example: requires a multi-threaded build.\n-- ** Not building style example: requires WRasterImage.\n-- ** Not building wt-homepage example: requires boost_filesystem library.\n-- ** Not building wtwithqt example.\n--    wtwithqt example requires a Qt4 installation.\n-- Configuring incomplete, errors occurred!\nSee also \"/home/perry/NetBeansProjects/examples/CMakeFiles/CMakeError.log\".\n\nCMAKE FAILED (exit value 1, total time: 355ms)\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "variadic-functions"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470260855, "post_id": 38754142, "comment_id": 64882219, "body": "No, not that I&#39;m aware of. Could you provide a [MCVE reproducing your problem please?]"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1470260857, "post_id": 38754142, "comment_id": 64882221, "body": "Why are you manually managing memory and then trying to free it on all exit paths?  Just use one of <code>std::vector&lt;char&gt;</code> or <code>std::string</code>.  Particularly since you&#39;re going to convert it to <code>std::string</code> anyway."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1470260899, "post_id": 38754142, "comment_id": 64882239, "body": "Also, <code>va_list</code> is designed to be passed by value, perhaps something goes wrong when you make a reference to it.  Can you show the code that calls this?  (Or since it is a callback, makes the function pointer)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470260914, "post_id": 38754142, "comment_id": 64882244, "body": "Including needed <code>#include</code> files? (None shown here)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 6, "creation_date": 1470260919, "post_id": 38754142, "comment_id": 64882250, "body": "<code>va_list &amp;ap</code> -- a callback from C won&#39;t pass anything by reference. The function should take the list by value."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1470260966, "post_id": 38754142, "comment_id": 64882275, "body": "If you are explicitly casting function pointers, stop immediately.  When the signature is right, no cast will be needed."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470261067, "post_id": 38754142, "comment_id": 64882317, "body": "@Phil Your code looks fairly bad. Why are you trying to manage memory allocation yourself actually?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470261144, "post_id": 38754142, "comment_id": 64882350, "body": "Variable argument lists is more a question of the <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">Application Binary Interface (ABI)</a>. If both the C and C++ source is compiled using the same ABI then they should be compatible."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1470261658, "post_id": 38754142, "comment_id": 64882561, "body": "In C, you pass the <code>va_list</code> by value, not by reference \u2014 your C++ code is showing that it is being passed by reference.  Does it work better in C++ if you remove the <code>&amp;</code> from the definition (of <code>void HttpDaemon::parseMessageVa(void * arg, const char * fmt, va_list &amp;ap)</code>)?"}, {"owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1470261936, "post_id": 38754142, "comment_id": 64882667, "body": "@PeteBecker This was the answer. Thanks. If you write it as an answer then I will mark it as such."}, {"owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1470262071, "post_id": 38754142, "comment_id": 64882709, "body": "@BenVoigt Yes, you are correct, a std::vector&lt;char&gt; would have been much better. This is my first use of va_list and I based my code on an example. I should have done a full rewrite."}, {"owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "edited": false, "score": 1, "creation_date": 1470262764, "post_id": 38754142, "comment_id": 64882936, "body": "I&#39;m not sure what the downvotes were for. Perhaps if someone (ideally those that gave them) could tell me then I can ask a better question next time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470264671, "post_id": 38754142, "comment_id": 64883523, "body": "Why do you expect two different languages to behave identical? And C does not support references."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470271361, "post_id": 38754142, "comment_id": 64885256, "body": "@Olaf Without going into language arguments, but in the context of Windows <code>va_list</code> is part of the ABI (APIs like <code>wvsprintf</code> use it), and the Win32 API <i>can</i> be used from C++, so it is natural to assume that the compatiblity extends to one&#39;s own code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1470272452, "post_id": 38754142, "comment_id": 64886484, "body": "@dxiv: Apparently not, as you cannot pass C++ types to a C function (that is not specific to windows). Note: you can call C functions from Python or Fortran. Does that make Python or Fortran the same language?"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470279835, "post_id": 38754142, "comment_id": 64888125, "body": "@Olaf The question was not about <code>two different languages to behave identically</code>. It was very narrowly about interoperability of <code>va_list</code> arguments between <code>C</code> and <code>C++</code> in <code>Windows</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470315819, "post_id": 38754142, "comment_id": 64907343, "body": "@PhilRosenberg: Not my DV, but I tend to. It should be obvious you cannot pass C++ types to C, but only the common set."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 4, "last_activity_date": 1470262159, "creation_date": 1470262159, "answer_id": 38754469, "question_id": 38754142, "link": "https://stackoverflow.com/questions/38754142/is-va-list-incompatible-between-c-and-c/38754469#38754469", "title": "Is va_list incompatible between C and C++?", "body": "<p><code>va_list &amp;ap</code> -- a callback from C won't pass anything by reference. The function should take the list by value.</p>\n"}], "owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1470292461, "accepted_answer_id": 38754469, "answer_count": 1, "score": 0, "last_activity_date": 1470262862, "creation_date": 1470260683, "last_edit_date": 1470262862, "question_id": 38754142, "link": "https://stackoverflow.com/questions/38754142/is-va-list-incompatible-between-c-and-c", "closed_reason": "Not suitable for this site", "title": "Is va_list incompatible between C and C++?", "body": "<p>I'm using a library (GNU MicroHttpDaemon) which passes out error messages through a callback which takes a va_list. I pass in a function pointer and if an error occurs then my function is called with a va_list and some other parameters. My problem is that when I receive the va_list it is garbage and attempting to use it causes an exception to be thrown.\nI am using Visual Studio 2015 on Windows 10. MicroHttpDaemon was built with the same compiler. My best guess for the cause is that MicroHttpDaemon is written in C, but I am using C++. Can anyone confirm that this is the issue? If it is then is there anything I can do to get the arguments into my C++ code?\nMy callback is below in case it's any use. Note that it is a static method, so should in general be fine to use as a C callback I think.</p>\n\n<pre><code>void HttpDaemon::parseMessageVa(void * arg, const char * fmt, va_list &amp;ap)\n{\n    HttpDaemon *daemon = static_cast&lt;HttpDaemon*&gt; (arg);\n    size_t n = vsnprintf(nullptr, 0, fmt, ap);\n    char *buffer = nullptr;\n    try\n    {\n        buffer = new char[n + 1];\n        vsprintf(buffer, fmt, ap);\n        try\n        {\n            daemon-&gt;m_lastMessage = std::string(buffer);\n        }\n        catch (...)\n        {\n            delete[] buffer;\n            throw;\n        }\n    }\n    catch (...)\n    {\n        //buffer allocation failed\n        daemon-&gt;m_lastMessage = \"Memory allocation failure.\";\n    }\n    if(buffer)\n        delete[] buffer;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "opengl"], "comments": [{"owner": {"reputation": 497, "user_id": 3603637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXMeg.png?s=128&g=1", "display_name": "Mio Bambino", "link": "https://stackoverflow.com/users/3603637/mio-bambino"}, "edited": false, "score": 0, "creation_date": 1470260382, "post_id": 38754058, "comment_id": 64882022, "body": "Yes, looking at your last 5 lines you&#39;re drawing a single frame, then you begin releasing the GL program and reset the window."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "reply_to_user": {"reputation": 497, "user_id": 3603637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXMeg.png?s=128&g=1", "display_name": "Mio Bambino", "link": "https://stackoverflow.com/users/3603637/mio-bambino"}, "edited": false, "score": 0, "creation_date": 1470294389, "post_id": 38754058, "comment_id": 64893133, "body": "I commented out the last 3 lines but it does not help."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "reply_to_user": {"reputation": 497, "user_id": 3603637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXMeg.png?s=128&g=1", "display_name": "Mio Bambino", "link": "https://stackoverflow.com/users/3603637/mio-bambino"}, "edited": false, "score": 0, "creation_date": 1470299091, "post_id": 38754058, "comment_id": 64896070, "body": "Why is my question down voted ? whats wrong with it ?"}, {"owner": {"reputation": 497, "user_id": 3603637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXMeg.png?s=128&g=1", "display_name": "Mio Bambino", "link": "https://stackoverflow.com/users/3603637/mio-bambino"}, "edited": false, "score": 0, "creation_date": 1470299145, "post_id": 38754058, "comment_id": 64896115, "body": "Is the vote count important for your question?"}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "reply_to_user": {"reputation": 497, "user_id": 3603637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXMeg.png?s=128&g=1", "display_name": "Mio Bambino", "link": "https://stackoverflow.com/users/3603637/mio-bambino"}, "edited": false, "score": 0, "creation_date": 1470314762, "post_id": 38754058, "comment_id": 64906554, "body": "@Mio Bambino yes. I think so. after getting these down votes, after a while I might not be able to post any other question. as I learnt from stacoverflow rules. But I want to understand the reason of down voting. if there is a mistake, then I would like to not repeat it next time while posting questions"}], "answers": [{"comments": [{"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470283767, "post_id": 38754146, "comment_id": 64889070, "body": "<code>m_program-&gt;release()</code> is the same as <code>glUseProgram(0)</code>. It may cause memory leak in his code, but is not why he is getting a white screen. See link <a href=\"http://doc.qt.io/qt-5/qopenglshaderprogram.html#release\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qopenglshaderprogram.html#release</a>"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470284981, "post_id": 38754146, "comment_id": 64889411, "body": "@Harish see now if my answer is more usefull"}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1470296472, "post_id": 38754146, "comment_id": 64894485, "body": "calling bind displays the data continuously every frame now. I also commented out the call to addShaderFromSourceCode. As I told I am a newbie in open gl, I copied the sample &amp; from <a href=\"http://doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-squircle-cpp.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/&hellip;</a>       . My target to provide my own char data from an image that I have &amp; replaced the chess board pattern with an actual image data (unsigned char array) that I have. Please comment if I am on the right. This discussion has been certainly helpful for me  guys"}, {"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "reply_to_user": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1470297822, "post_id": 38754146, "comment_id": 64895265, "body": "The answer looks more appropriate  now. @Nelson P accept the answer if it helped solve your problem."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 1, "last_activity_date": 1470284907, "last_edit_date": 1470284907, "creation_date": 1470260699, "answer_id": 38754146, "question_id": 38754058, "link": "https://stackoverflow.com/questions/38754058/open-gl-draw-turns-white-after-one-frame-drawn/38754146#38754146", "title": "Open gl draw turns white after one frame drawn", "body": "<p>At the very top you have:</p>\n\n<pre><code>if (!m_program) {\n</code></pre>\n\n<p>then you initialize <code>m_program</code>, at the very bottom you have:</p>\n\n<pre><code>m_program-&gt;release();\n</code></pre>\n\n<p>which as Harish in comments points out is equivalent to calling <code>glUseProgram(0);</code>. So in the next iteration of <code>paint</code> your shader is not bound and not available.</p>\n\n<p>According to docs, the reverse of <code>release();</code> is <code>bind();</code> so (I am not expert on this class) the solution might be to call <code>QOpenGLShaderProgram::bind()</code> on the next iteration of your <code>paint</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1470298421, "post_id": 38754189, "comment_id": 64895642, "body": "Good point @The Sombero Kid. I will try getting the gDebbugger on. At the moment I am mostly sort of wondering happening behind the API"}], "tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": false, "score": 0, "last_activity_date": 1470260903, "creation_date": 1470260903, "answer_id": 38754189, "question_id": 38754058, "link": "https://stackoverflow.com/questions/38754058/open-gl-draw-turns-white-after-one-frame-drawn/38754189#38754189", "title": "Open gl draw turns white after one frame drawn", "body": "<p>For future reference, it's a good idea to run opengl programs through a graphics debugger like gDEbugger to give you an insight into what's actually happening inside the API.</p>\n"}], "owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 38754146, "answer_count": 2, "score": -1, "last_activity_date": 1470284907, "creation_date": 1470260294, "question_id": 38754058, "link": "https://stackoverflow.com/questions/38754058/open-gl-draw-turns-white-after-one-frame-drawn", "title": "Open gl draw turns white after one frame drawn", "body": "<p>I am newbie in Opengl. I used the following example from Qt as a start in Opengl as I know Qt.<br>\n<a href=\"http://doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-squircle-cpp.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qtquick-scenegraph-openglunderqml-squircle-cpp.html</a>  </p>\n\n<p>I replaced the paint function of the program with following code with an intent to draw chess board pattern. Following is not the paint or render function of my program</p>\n\n<pre><code>paint()\n{\nif (!m_program) {\n    initializeOpenGLFunctions();\n\n    m_program = new QOpenGLShaderProgram();\n    m_program-&gt;addShaderFromSourceCode(QOpenGLShader::Vertex,\n                                       \"attribute highp vec4 vertices;\"\n                                       \"varying highp vec2 coords;\"\n                                       \"void main() {\"\n                                       \"    gl_Position = vertices;\"\n                                       \"    coords = vertices.xy;\"\n                                       \"}\");\n    m_program-&gt;addShaderFromSourceCode(QOpenGLShader::Fragment,\n                                       \"uniform lowp float t;\"\n                                       \"varying highp vec2 coords;\"\n                                       \"void main() {\"\n                                       \"    lowp float i = 1. - (pow(abs(coords.x), 4.) + pow(abs(coords.y), 4.));\"\n                                       \"    i = smoothstep(t - 0.8, t + 0.8, i);\"\n                                       \"    i = floor(i * 20.) / 20.;\"\n                                       \"    gl_FragColor = vec4(coords * .5 + .5, i, i);\"\n                                       \"}\");\n\n    m_program-&gt;bindAttributeLocation(\"vertices\", 0);\n    m_program-&gt;link();\n}\n\nauto width = static_cast&lt;float&gt;(m_viewportSize.width());\nauto height = static_cast&lt;float&gt;(m_viewportSize.height());\nauto a = 2.f / width;\nauto b = 2.f / height;\nstd::vector&lt;float&gt; matrix =\n{\n     a , 0, 0, 0,\n     0, -b, 0, 0,\n     0,  0, 1, 0,\n    -1,  1, 0, 1\n};\n\n// Set the projection matrix\nglMatrixMode(GL_PROJECTION);\nglLoadMatrixf(matrix.data());\n\n// Initialize vertices:\nstd::vector&lt;float&gt; vertices =\n{\n    0,     0,\n    0,     height,\n    width, height,\n    width, 0\n};\n\n// Initialize colors\nstd::vector&lt;float&gt; colors =\n{\n    1, 0, 0,\n    0, 1, 0,\n    0, 0, 1,\n    0, 1, 1\n};\n\n// Initialize texture virtice\nstd::vector&lt;float&gt; texCoord =\n{\n    0, 0,\n    0, 1,\n    1, 1,\n    1, 0\n};\n\n// Create texture: simple chess board 8x8\nauto numRows = 8u;\nauto numCols = 8u;\nauto character = 172u;\nauto remain = 255u - character;\nstd::vector&lt;unsigned char&gt; texture(numCols * numRows);\nfor (auto i = 0u; i &lt; texture.size(); ++i)\n    texture[i] = ((i + (i / numCols)) % 2) * remain + character;\n\n// Upload to GPU texture\nunsigned textureID;\nglGenTextures(1, &amp;textureID);\nglBindTexture(GL_TEXTURE_2D, textureID);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, numCols, numRows, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, texture.data());\n\n// Initialize clear colors\nglClearColor(0.f, 0.f, 0.f, 1.f);\n// Activate necessary states\nglEnable(GL_TEXTURE_2D);\nglEnableClientState(GL_VERTEX_ARRAY);\nglEnableClientState(GL_COLOR_ARRAY);\nglEnableClientState(GL_TEXTURE_COORD_ARRAY);\nglVertexPointer(2, GL_FLOAT, 0, vertices.data());\nglColorPointer(3, GL_FLOAT, 0, colors.data());\nglTexCoordPointer(2, GL_FLOAT, 0, texCoord.data());\n\n// render\nglClear(GL_COLOR_BUFFER_BIT);\nglDrawArrays(GL_QUADS, 0, 4);\n\nm_program-&gt;disableAttributeArray(0);\nm_program-&gt;release();\nm_window-&gt;resetOpenGLState();\n}\n</code></pre>\n\n<p>The chess board is drawn. But its drawn for a split second &amp; then the screen turns fully white. I want to draw the chess board pattern continiously with each frame draw. \nCan someone pls point out what might be going wrong ?</p>\n"}, {"tags": ["c++", "try-catch"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470258809, "post_id": 38753686, "comment_id": 64881263, "body": "Not sure but just one try {} and catch(...)? Then check Exception through a function...Like ExceptionStatement(Exception e)."}], "answers": [{"comments": [{"owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "edited": false, "score": 0, "creation_date": 1470259419, "post_id": 38753873, "comment_id": 64881530, "body": "Nice idea, thanks!"}], "tags": [], "owner": {"reputation": 5572, "user_id": 3375670, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dftd9.jpg?s=128&g=1", "display_name": "Robert Kock", "link": "https://stackoverflow.com/users/3375670/robert-kock"}, "is_accepted": false, "score": 2, "last_activity_date": 1470259468, "last_edit_date": 1470259468, "creation_date": 1470259370, "answer_id": 38753873, "question_id": 38753686, "link": "https://stackoverflow.com/questions/38753686/multiply-nested-try-catch/38753873#38753873", "title": "Multiply nested try-catch", "body": "<p>Try the other way round:<br>\nConvert into to a string, then try bool, etc.<br>\nEverything within a single try-catch and ignore the exception.</p>\n"}, {"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 4, "last_activity_date": 1470259417, "creation_date": 1470259417, "answer_id": 38753884, "question_id": 38753686, "link": "https://stackoverflow.com/questions/38753686/multiply-nested-try-catch/38753884#38753884", "title": "Multiply nested try-catch", "body": "<p>You may put it in a function like:</p>\n\n<pre><code>template&lt;typename N, typename T&gt;\nbool tryParseNode(N&amp; node, T&amp; val) {\n  try {\n    val = node.as&lt;T&gt;();\n    return true;\n  } catch (YAML::BadConversion) {\n    return false;\n  }  \n}\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>int a;\ndouble d;\nbool b;\nstd::string s;\nif (tryParseNode(node, a) {\n  std::cout &lt;&lt; \"int!\" &lt;&lt; a &lt;&lt; std::endl;\n}\nelse if (tryParseNode(node, d) {\n  std::cout &lt;&lt; \"double!\" &lt;&lt; d &lt;&lt; std::endl;\n}\nelse if (tryParseNode(node, b) {\n  std::cout &lt;&lt; \"bool!\" &lt;&lt; b &lt;&lt; std::endl;\n}\nelse if (tryParseNode(node, s) {\n  std::cout &lt;&lt; \"string!\" &lt;&lt; s &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": false, "score": 1, "last_activity_date": 1470260691, "creation_date": 1470260691, "answer_id": 38754144, "question_id": 38753686, "link": "https://stackoverflow.com/questions/38753686/multiply-nested-try-catch/38754144#38754144", "title": "Multiply nested try-catch", "body": "<p>Using exceptions for normal control flow is considered bad practice. In this case, the <code>as</code> method uses the `YAML::convert::decode' method to attempt to convert the node into the requested type returning a false if it fails instead of throwing an exception.</p>\n\n<pre><code>int anInt;\ndouble aDouble;\nbool aBool;\n\nif (YAML::convert &lt;int&gt;::decode (node, anInt))\n  std::cout &lt;&lt; \"int!\" &lt;&lt; anInt &lt;&lt; std::endl;\nelse\nif (YAML::convert &lt;double&gt;::decode (node, aDouble))\n    std::cout &lt;&lt; \"double!\" &lt;&lt; aDouble &lt;&lt; std::endl;\nelse\nif (YAML::convert &lt;bool&gt;::decode (node, aBool))\n    std::cout &lt;&lt; \"double!\" &lt;&lt; aBool &lt;&lt; std::endl;\nelse\n    std::cout &lt;&lt; \"string!\" &lt;&lt; node.as &lt;std::string&gt; () &lt;&lt; std::endl;\n</code></pre>\n\n<p>which could be further simplified to </p>\n\n<pre><code>template &lt;typename value_type&gt;\nstd::optional &lt;value_type&gt; decode (YAML::Node const &amp; Node)\n{\n    value_type Value;\n\n    if (YAML::convert &lt;value_type&gt;::decode (node, Value))\n        return  { Value };\n    else\n        return {};\n}\n\nif (auto anInt = decode &lt;int&gt; (node))\n  std::cout &lt;&lt; \"int!\" &lt;&lt; *anInt &lt;&lt; std::endl;\nelse\nif (auto aDouble = decode &lt;double&gt; (node))\n    std::cout &lt;&lt; \"double!\" &lt;&lt; *aDouble &lt;&lt; std::endl;\nelse\nif (auto aBool = decode &lt;bool&gt; (node))\n    std::cout &lt;&lt; \"double!\" &lt;&lt; *aBool &lt;&lt; std::endl;\nelse\n    std::cout &lt;&lt; \"string!\" &lt;&lt; node.as &lt;std::string&gt; () &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "closed_date": 1470295881, "accepted_answer_id": 38753884, "answer_count": 3, "score": -2, "last_activity_date": 1470260691, "creation_date": 1470258616, "question_id": 38753686, "link": "https://stackoverflow.com/questions/38753686/multiply-nested-try-catch", "closed_reason": "Duplicate", "title": "Multiply nested try-catch", "body": "<p>I have a <a href=\"https://github.com/jbeder/yaml-cpp\" rel=\"nofollow\">yaml-cpp</a> which always converts into a <code>std::string</code>, and sometimes also into something else. For example, if the string actually is <code>\"3.14\"</code>, it would also convert into <code>double</code>. I'd first like to try <code>int</code>, then <code>double</code>, then <code>bool</code>, and if that doesn't work, convert to a <code>std::string</code>. Alright, so let's nest those <code>try</code>-<code>catch</code>es:</p>\n\n\n\n<pre><code>try {\n  const int a = node.as&lt;int&gt;();\n  std::cout &lt;&lt; \"int!\" &lt;&lt; a &lt;&lt; std::endl;\n} catch (YAML::BadConversion) {\n  try {\n    const double a = node.as&lt;double&gt;();\n    std::cout &lt;&lt; \"double!\" &lt;&lt; a &lt;&lt; std::endl;\n  } catch (YAML::BadConversion) {\n    try {\n      const bool a = node.as&lt;bool&gt;();\n      std::cout &lt;&lt; \"bool!\" &lt;&lt; a &lt;&lt; std::endl;\n    } catch (YAML::BadConversion) {\n      const std::string a = node.as&lt;std::string&gt;();\n      std::cout &lt;&lt; \"string!\" &lt;&lt; a &lt;&lt; std::endl;\n    }\n  }\n}\n</code></pre>\n\n<p>Hm, the deeper and deeper nesting tells me that this isn't the best way to write that code.</p>\n\n<p>Any suggestions on how to improve the design here? Flat nesting would certainly be advised.</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470259547, "post_id": 38753546, "comment_id": 64881593, "body": "You are overriding rules for <code>%.c</code>: files here: <code>$(OBJDIR)&#47;main.o : add.h mul.h did.h</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "is_accepted": false, "score": 1, "last_activity_date": 1470263383, "creation_date": 1470263383, "answer_id": 38754696, "question_id": 38753546, "link": "https://stackoverflow.com/questions/38753546/put-the-object-files-into-a-separate-folder-gnu-make/38754696#38754696", "title": "put the object files into a separate folder GNU make", "body": "<p>Two issues: you haven't substituted your source files correctly, and the implicit rule for compiling will only work for objects and sources with matching paths.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>objdir  := objdir\nsources := $(wildcard src/*.c)\nobjs    := $(sources:src/%.c=$(objdir)/%.o)\ndeps    := $(objs:.o=.d)\n\nCPPFLAGS := -MMD -MP\n\n.PHONY: clean\n\noptest: $(objs)\n    $(LINK.o) $^ $(LDLIBS) -o $@\n\n$(objs): $(objdir)/%.o: src/%.c | $(objdir)\n    $(COMPILE.c) $(OUPUT_OPTION) $&lt;\n\n$(objdir): ; mkdir $@\n\nclean: ; $(RM) $(objs) $(deps) optest\n\n-include $(deps)\n</code></pre>\n\n<p>Other stuff:</p>\n\n<ul>\n<li>Recycle the builtin recipes instead of rolling your own</li>\n<li>Use dependency generation instead of specifying each dependency manually</li>\n<li>Don't delete entire directories, even if you created them, stick to the files the makefile is responsible for</li>\n<li>Rules that don't actually make a file should be <code>.PHONY</code>.</li>\n</ul>\n"}], "owner": {"reputation": 183, "user_id": 4803159, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a376b377b696ebb5e35834f2ca4ac6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/4803159/jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470263383, "creation_date": 1470258040, "question_id": 38753546, "link": "https://stackoverflow.com/questions/38753546/put-the-object-files-into-a-separate-folder-gnu-make", "title": "put the object files into a separate folder GNU make", "body": "<p>I am trying to generate the object files (.o files) into a separate folder. It worked well. The problem is the object files generated were not put into the folder I wanted them to be. The following is my makefile:</p>\n\n<pre><code>OBJDIR :=objdir\nSOURCES=$(wildcard ./src/*.c)\nOBJS=$(patsubst %.c, %.o, $(SOURCES))\nvpath %.h ./src\nvpath %.c ./src\noptest : $(OBJS)\n    cc -o optest $(OBJS)\n$(OBJDIR)/main.o : add.h mul.h did.h\n$(OBJDIR)/add.o : add.h\n$(OBJDIR)/mul.o : mul.h\n$(OBJDIR)/did.o : did.h\n\n$(OBJS): | $(OBJDIR)\n\n$(OBJDIR):\n    mkdir $(OBJDIR)\n\n\nclean :\n    rm -rf $(OBJDIR)\n    rm -f optest\n</code></pre>\n\n<p>My .h and .c files are put in the <code>./src</code> folder. The result of above makefile is that all the object files are also put in <code>./src</code> folder rather than the <code>objdir</code> folder. Can anyone give any suggestion?</p>\n"}, {"tags": ["c++", "arrays", "dynamic"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 3, "creation_date": 1470257889, "post_id": 38753465, "comment_id": 64880828, "body": "I suppose you can&#39;t keep the size around when you constructed the array in the first place?"}, {"owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "edited": false, "score": 2, "creation_date": 1470257961, "post_id": 38753465, "comment_id": 64880865, "body": "You could use your own sentinel value as the marker for the end of the array, such as <code>-1</code>, or <code>0x8000000</code>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1470258657, "post_id": 38753465, "comment_id": 64881184, "body": "&quot;The rest of the array is NULL&quot; What does that mean? Maybe it would be easier to show how you initialized the array."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1470258887, "post_id": 38753465, "comment_id": 64881298, "body": "C strings may be null terminated... but that convention works only because it&#39;s assumed the null character will never be a legitimate character in the string.  You can&#39;t use that approach in general without deciding on a sentinel value that will never be part of your data, yet is representable in the type you use.  But searching the array for a sentinel to get the length isn&#39;t very efficient anyway... it&#39;s usually better to just keep track of it with another variable."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1470260428, "post_id": 38753465, "comment_id": 64882038, "body": "<i>We are not allowed to use vectors.</i> -- But nothing stops you from creating a simple class or struct that contains a pointer, a size member, and the requisite member functions.  That&#39;s how you thwart these restrictions -- create your own &quot;vector&quot; class, even a minimal one."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1470265447, "post_id": 38754965, "comment_id": 64883775, "body": "Unfortunately <code>NULL</code> is specified to be zero, so this doesn&#39;t work any better that OP&#39;s code."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1470266069, "post_id": 38754965, "comment_id": 64883960, "body": "I think you are right, I just tested it. I remember I used to use NULL.. Good catch and thank you. I edited my answer for a different approach."}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1470266028, "last_edit_date": 1470266028, "creation_date": 1470265109, "answer_id": 38754965, "question_id": 38753465, "link": "https://stackoverflow.com/questions/38753465/issue-finding-size-of-dynamic-int-array-that-contains-a-zero/38754965#38754965", "title": "Issue finding size of dynamic int array that contains a zero", "body": "<p>You could do something like this only if you are sure that the input data are <strong>not</strong> negatives:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int MyArray[50]; // declare your array\n\n    // ..\n\n    for (int i = 0; i &lt; 50; i++)\n        MyArray[i] = -1; // fill with negatives\n\n    MyArray[0] = 0; // some data\n    MyArray[1] = 10; // some data\n\n    for (int i = 0; i &lt; 50; i++)\n    {\n        if (MyArray[i] &gt;= 0 )\n        {\n            std::cout &lt;&lt; MyArray[i];\n            // write to your file\n        }\n    }\n\n    //..\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1470321433, "post_id": 38755320, "comment_id": 64912015, "body": "@Hurkyl If he/she cannot use <code>std::vector</code> then I doubt <code>std::unique_ptr</code> is &quot;allowed&quot; (silly school assignments) either but it would be better indeed."}], "tags": [], "owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "is_accepted": false, "score": 2, "last_activity_date": 1470321522, "last_edit_date": 1470321522, "creation_date": 1470267652, "answer_id": 38755320, "question_id": 38753465, "link": "https://stackoverflow.com/questions/38753465/issue-finding-size-of-dynamic-int-array-that-contains-a-zero/38755320#38755320", "title": "Issue finding size of dynamic int array that contains a zero", "body": "<p>As pointed out in the comments the best approach here, given that you cannot use <code>std::vector</code> (*sigh*), is to make your own minimal <code>dynamic_array</code> (mimicking a <code>std::vector</code>) which knows its own size at all times.</p>\n\n<p>It's interface could look something like this:</p>\n\n<pre><code>template&lt;typename _Ty&gt;\nclass dynamic_array {\npublic:\n    typedef _Ty value_type;\n    typedef const _Ty&amp; const_reference;\n    typedef _Ty&amp; reference;\n    typedef std::size_t size_type;\n    //... other necessary typedefs\n    dynamic_array() : arr(), arr_size(0), allocated_size(0) {}\n    dynamic_array(size_type n) : arr_size(n), allocated_size(n) { allocate(n); }\n    ~dynamic_array() { delete arr; }\n    size_type size() const noexcept { return arr_size; }\n    const_reference operator[](size_type n) const { return arr[n]; }\n    reference operator[](size_type n) { return arr[n]; }\n    void push_back(const value_type&amp; _val) { \n        ++arr_size;\n        // actual implementation of pushing back _val up to you\n    }\nprivate:\n    value_type* arr;\n    size_type arr_size; // number of elements\n    size_type allocated_size; // actual number of allocated elements in memory\n    void allocate(size_type n) { arr = new value_type[n]; }\n};\n</code></pre>\n\n<p>Then to iterate through this via indices you would simply do:</p>\n\n<pre><code>dynamic_array&lt;int&gt; darr;\n// populate darr\nfor (int i = 0; i &lt; darr.size(); ++i) {\n    // do stuff with each element accessing via: darr[i] as before\n}\n</code></pre>\n\n<p>Edit - If you can use <code>std::unique_ptr</code> then use this instead of the raw pointer <code>value_type* arr</code> to avoid any potential memory management headaches.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 0, "last_activity_date": 1470268779, "creation_date": 1470268779, "answer_id": 38755486, "question_id": 38753465, "link": "https://stackoverflow.com/questions/38753465/issue-finding-size-of-dynamic-int-array-that-contains-a-zero/38755486#38755486", "title": "Issue finding size of dynamic int array that contains a zero", "body": "<p>There is no such thing as NULL for integer value. So there are 3 usual approaches, that used:</p>\n\n<ol>\n<li>Special value, marker of the end. This aproach is used for C-style strings, where '\\0' used as end. For integer this approach will not work as 0 is \"normal\" value. You may use some other special value, like <code>std::numeric_limits&lt;int&gt;::min</code> or <code>std::numeric_limits&lt;int&gt;::max</code>, but this would be not very good approach.</li>\n<li>Have another variable, that holds current size of array. Note this is usually different, than for how many elements were allocated. This could be wrapped into a class. This is how <code>std::vector</code> is implemented.</li>\n<li>Have another variable, pointer, that points to the pone element after the last one. This could be useful for using in standard algorithms.</li>\n</ol>\n\n<p>Approach 2 and 3 are very close and one can be converted very easy to another. So I would recommend to rewrite your algorithm using start and behind_end iterator:</p>\n\n<pre><code>auto end = myArray + 5; // 5 elements in array\nfor( auto it = myArray; it != end; ++it ) {\n    std::cout &lt;&lt; *it &lt;&lt; endl;\n}\n</code></pre>\n\n<p>this code can be easily templatized and used with standard containers.</p>\n"}, {"tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": false, "score": 0, "last_activity_date": 1470322728, "creation_date": 1470322728, "answer_id": 38770878, "question_id": 38753465, "link": "https://stackoverflow.com/questions/38753465/issue-finding-size-of-dynamic-int-array-that-contains-a-zero/38770878#38770878", "title": "Issue finding size of dynamic int array that contains a zero", "body": "<p>boost::static_vector would help here. It is essentually a cross between vector and array: either a stack-allocated vector with fixed capacity or uninitialized array with some facilities to track logical size.</p>\n\n<p>Example of use:</p>\n\n<pre><code>#include \"boost/container/static_vector.hpp\"\n#include &lt;iostream&gt;\n\nnamespace cnt = boost::container;\n\nvoid foo()\n{\n    cnt::static_vector&lt;int, 50&gt; buf = {1, 9, 5, 3, 8, 0, 8, 2, 0, 6,};\n    std::cout &lt;&lt; buf.size();\n}\n\nint main()\n{\n    foo();   \n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6524524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfab79f5c8d01192295100832b996768?s=128&d=identicon&r=PG&f=1", "display_name": "anna", "link": "https://stackoverflow.com/users/6524524/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 38755486, "answer_count": 4, "score": -1, "last_activity_date": 1470682872, "creation_date": 1470257769, "last_edit_date": 1470682872, "question_id": 38753465, "link": "https://stackoverflow.com/questions/38753465/issue-finding-size-of-dynamic-int-array-that-contains-a-zero", "title": "Issue finding size of dynamic int array that contains a zero", "body": "<p><strong>We are not allowed to use vectors.</strong> </p>\n\n<p>Another noobie with a problem. I am trying to find the index of a dynamic int array that is initialized to a size of 50. <em>We can only use a dynamic int array.</em></p>\n\n<p>Say for example I\u2019m only entering 10 integers into this array: 1 9 5 3 8 0 8 2 0 6</p>\n\n<p>The rest of the array is NULL. The goal is to keep the integer values that were entered into this array and put them into an output file. So the size of the array of ints I want is 9. But when I do the following:</p>\n\n<pre><code>int index = 0;\n\n    while (intArray[index])\n    {\n        index++;\n    }\n</code></pre>\n\n<p>It tells me that the index is 5 and thus only 5 values get copied into the output file. I know it\u2019s because of the 0 in the array. If there is no 0 in the array, the results come out as expected. How do I bypass this so that the index is correctly reflected as 9 and all the values get copied properly? I appreciate any input!</p>\n"}, {"tags": ["c++", "sockets", "boost", "proxy", "boost-asio"], "comments": [{"owner": {"reputation": 5331, "user_id": 1464780, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/93db7adb43e6578e81422e6120fb3cab?s=128&d=identicon&r=PG", "display_name": "Walter Fabio Simoni", "link": "https://stackoverflow.com/users/1464780/walter-fabio-simoni"}, "edited": false, "score": 0, "creation_date": 1470304602, "post_id": 38753445, "comment_id": 64899877, "body": "Not even a little help or a little answer. Please, tell my why my post/question is bad...i need help :("}], "answers": [{"comments": [{"owner": {"reputation": 5331, "user_id": 1464780, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/93db7adb43e6578e81422e6120fb3cab?s=128&d=identicon&r=PG", "display_name": "Walter Fabio Simoni", "link": "https://stackoverflow.com/users/1464780/walter-fabio-simoni"}, "edited": false, "score": 0, "creation_date": 1470319385, "post_id": 38769059, "comment_id": 64910227, "body": "Thanks for the answer, you&#39;re right, it&#39;s a TCP proxy, not an HTTP proxy !"}], "tags": [], "owner": {"reputation": 38, "user_id": 5765544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08819c39e7c327c6ab4e15051b97a9e0?s=128&d=identicon&r=PG&f=1", "display_name": "CapSel", "link": "https://stackoverflow.com/users/5765544/capsel"}, "is_accepted": true, "score": 0, "last_activity_date": 1470318107, "creation_date": 1470318107, "answer_id": 38769059, "question_id": 38753445, "link": "https://stackoverflow.com/questions/38753445/retrieving-adress-from-browser-for-my-proxy-in-cpp-boostasio/38769059#38769059", "title": "Retrieving adress from browser for my proxy in cpp (boost::Asio)", "body": "<p>You need some kind of protocol for communication between your browser and proxy. First your browser needs to send something like \"connect to\" message, then proxy should send info if connection was successful. I believe that HTTP has some headers specific for proxy handling.</p>\n"}], "owner": {"reputation": 5331, "user_id": 1464780, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/93db7adb43e6578e81422e6120fb3cab?s=128&d=identicon&r=PG", "display_name": "Walter Fabio Simoni", "link": "https://stackoverflow.com/users/1464780/walter-fabio-simoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1470321048, "accepted_answer_id": 38769059, "answer_count": 1, "score": 0, "last_activity_date": 1470318107, "creation_date": 1470257689, "question_id": 38753445, "link": "https://stackoverflow.com/questions/38753445/retrieving-adress-from-browser-for-my-proxy-in-cpp-boostasio", "closed_reason": "Needs more focus", "title": "Retrieving adress from browser for my proxy in cpp (boost::Asio)", "body": "<p>I'm trying to adapt a sample code of a TCP Proxy in order to use it on my browser.</p>\n\n<p>Here is the complete proxy i use :</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/enable_shared_from_this.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/thread/mutex.hpp&gt;\n\n\nnamespace tcp_proxy\n{\n   namespace ip = boost::asio::ip;\n\n   class bridge : public boost::enable_shared_from_this&lt;bridge&gt;\n   {\n   public:\n\n      typedef ip::tcp::socket socket_type;\n      typedef boost::shared_ptr&lt;bridge&gt; ptr_type;\n\n      bridge(boost::asio::io_service&amp; ios)\n      : downstream_socket_(ios),\n        upstream_socket_(ios)\n      {}\n\n      socket_type&amp; downstream_socket()\n      {\n         return downstream_socket_;\n      }\n\n      socket_type&amp; upstream_socket()\n      {\n         return upstream_socket_;\n      }\n\n      void start(const std::string&amp; upstream_host, unsigned short upstream_port)\n      {\n         upstream_socket_.async_connect(\n              ip::tcp::endpoint(\n                   boost::asio::ip::address::from_string(upstream_host),\n                   upstream_port),\n               boost::bind(&amp;bridge::handle_upstream_connect,\n                    shared_from_this(),\n                    boost::asio::placeholders::error));\n      }\n\n      void handle_upstream_connect(const boost::system::error_code&amp; error)\n      {\n         if (!error)\n         {\n            upstream_socket_.async_read_some(\n                 boost::asio::buffer(upstream_data_,max_data_length),\n                 boost::bind(&amp;bridge::handle_upstream_read,\n                      shared_from_this(),\n                      boost::asio::placeholders::error,\n                      boost::asio::placeholders::bytes_transferred));\n\n            downstream_socket_.async_read_some(\n                 boost::asio::buffer(downstream_data_,max_data_length),\n                 boost::bind(&amp;bridge::handle_downstream_read,\n                      shared_from_this(),\n                      boost::asio::placeholders::error,\n                      boost::asio::placeholders::bytes_transferred));\n         }\n         else\n            close();\n      }\n\n   private:\n\n      void handle_downstream_write(const boost::system::error_code&amp; error)\n      {\n         if (!error)\n         {\n            upstream_socket_.async_read_some(\n                 boost::asio::buffer(upstream_data_,max_data_length),\n                 boost::bind(&amp;bridge::handle_upstream_read,\n                      shared_from_this(),\n                      boost::asio::placeholders::error,\n                      boost::asio::placeholders::bytes_transferred));\n         }\n         else\n            close();\n      }\n\n      void handle_downstream_read(const boost::system::error_code&amp; error,\n                                  const size_t&amp; bytes_transferred)\n      {\n         if (!error)\n         {\n            async_write(upstream_socket_,\n                  boost::asio::buffer(downstream_data_,bytes_transferred),\n                  boost::bind(&amp;bridge::handle_upstream_write,\n                        shared_from_this(),\n                        boost::asio::placeholders::error));\n         }\n         else\n            close();\n      }\n\n      void handle_upstream_write(const boost::system::error_code&amp; error)\n      {\n         if (!error)\n         {\n            downstream_socket_.async_read_some(\n                 boost::asio::buffer(downstream_data_,max_data_length),\n                 boost::bind(&amp;bridge::handle_downstream_read,\n                      shared_from_this(),\n                      boost::asio::placeholders::error,\n                      boost::asio::placeholders::bytes_transferred));\n         }\n         else\n            close();\n      }\n\n      void handle_upstream_read(const boost::system::error_code&amp; error,\n                                const size_t&amp; bytes_transferred)\n      {\n         if (!error)\n         {\n            async_write(downstream_socket_,\n                 boost::asio::buffer(upstream_data_,bytes_transferred),\n                 boost::bind(&amp;bridge::handle_downstream_write,\n                      shared_from_this(),\n                      boost::asio::placeholders::error));\n         }\n         else\n            close();\n      }\n\n      void close()\n      {\n         boost::mutex::scoped_lock lock(mutex_);\n\n         if (downstream_socket_.is_open())\n         {\n            downstream_socket_.close();\n         }\n\n         if (upstream_socket_.is_open())\n         {\n            upstream_socket_.close();\n         }\n      }\n\n      socket_type downstream_socket_;\n      socket_type upstream_socket_;\n\n      enum { max_data_length = 8192 }; //8KB\n      unsigned char downstream_data_[max_data_length];\n      unsigned char upstream_data_[max_data_length];\n\n      boost::mutex mutex_;\n\n   public:\n\n      class acceptor\n      {\n      public:\n\n         acceptor(boost::asio::io_service&amp; io_service,\n                  const std::string&amp; local_host, unsigned short local_port,\n                  const std::string&amp; upstream_host, unsigned short upstream_port)\n         : io_service_(io_service),\n           localhost_address(boost::asio::ip::address_v4::from_string(local_host)),\n           acceptor_(io_service_,ip::tcp::endpoint(localhost_address,local_port)),\n           upstream_port_(upstream_port),\n           upstream_host_(upstream_host)\n         {}\n\n         bool accept_connections()\n         {\n            try\n            {\n               session_ = boost::shared_ptr&lt;bridge&gt;(new bridge(io_service_));\n\n               acceptor_.async_accept(session_-&gt;downstream_socket(),\n                    boost::bind(&amp;acceptor::handle_accept,\n                         this,\n                         boost::asio::placeholders::error));\n            }\n            catch(std::exception&amp; e)\n            {\n               std::cerr &lt;&lt; \"acceptor exception: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n               return false;\n            }\n\n            return true;\n         }\n\n      private:\n\n         void handle_accept(const boost::system::error_code&amp; error)\n         {\n            if (!error)\n            {\n               session_-&gt;start(upstream_host_,upstream_port_);\n\n               if (!accept_connections())\n               {\n                  std::cerr &lt;&lt; \"Failure during call to accept.\" &lt;&lt; std::endl;\n               }\n            }\n            else\n            {\n               std::cerr &lt;&lt; \"Error: \" &lt;&lt; error.message() &lt;&lt; std::endl;\n            }\n         }\n\n         boost::asio::io_service&amp; io_service_;\n         ip::address_v4 localhost_address;\n         ip::tcp::acceptor acceptor_;\n         ptr_type session_;\n         unsigned short upstream_port_;\n         std::string upstream_host_;\n      };\n\n   };\n}\n\nint main(int argc, char* argv[])\n{\n   if (argc != 5)\n   {\n      std::cerr &lt;&lt; \"usage: tcpproxy_server &lt;local host ip&gt; &lt;local port&gt; &lt;forward host ip&gt; &lt;forward port&gt;\" &lt;&lt; std::endl;\n      return 1;\n   }\n\n   const unsigned short local_port   = static_cast&lt;unsigned short&gt;(::atoi(argv[2]));\n   const unsigned short forward_port = static_cast&lt;unsigned short&gt;(::atoi(argv[4]));\n   const std::string local_host      = argv[1];\n   const std::string forward_host    = argv[3];\n\n   boost::asio::io_service ios;\n\n   try\n   {\n      tcp_proxy::bridge::acceptor acceptor(ios,\n                                           local_host, local_port,\n                                           forward_host, forward_port);\n\n      acceptor.accept_connections();\n\n      ios.run();\n   }\n   catch(std::exception&amp; e)\n   {\n      std::cerr &lt;&lt; \"Error: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n      return 1;\n   }\n\n   return 0;\n}\n</code></pre>\n\n<p>Actually, this sample code need as args the local host and local port, and the forward port and the forward host.</p>\n\n<p>I would like to edit this code in order to get automatically the host who is asked in the browser...</p>\n\n<p>From my research i have to used the remote_endpoint() property.\nThe problem is i don't know how to implement it in order to \"trigger\" this function eachtime use ask for another adress on the browser...</p>\n\n<p>I tried this :</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/enable_shared_from_this.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/thread/mutex.hpp&gt;\n\n\nnamespace tcp_proxy\n{\n    namespace ip = boost::asio::ip;\n\n    class bridge : public boost::enable_shared_from_this&lt;bridge&gt;\n    {\n    public:\n\n        typedef ip::tcp::socket socket_type;\n        typedef boost::shared_ptr&lt;bridge&gt; ptr_type;\n\n        bridge(boost::asio::io_service&amp; ios)\n            : downstream_socket_(ios),\n            upstream_socket_(ios)\n        {}\n\n        socket_type&amp; downstream_socket()\n        {\n            return downstream_socket_;\n        }\n\n        socket_type&amp; upstream_socket()\n        {\n            return upstream_socket_;\n        }\n\n        void start(const std::string&amp; upstream_host, unsigned short upstream_port)\n        {\n            upstream_socket_.async_connect(\n                ip::tcp::endpoint(\n                    boost::asio::ip::address::from_string(upstream_host),\n                    upstream_port),\n                boost::bind(&amp;bridge::handle_upstream_connect,\n                    shared_from_this(),\n                    boost::asio::placeholders::error));\n        }\n\n        void handle_upstream_connect(const boost::system::error_code&amp; error)\n        {\n            if (!error)\n            {\n                upstream_socket_.async_read_some(\n                    boost::asio::buffer(upstream_data_, max_data_length),\n                    boost::bind(&amp;bridge::handle_upstream_read,\n                        shared_from_this(),\n                        boost::asio::placeholders::error,\n                        boost::asio::placeholders::bytes_transferred));\n\n                downstream_socket_.async_read_some(\n                    boost::asio::buffer(downstream_data_, max_data_length),\n                    boost::bind(&amp;bridge::handle_downstream_read,\n                        shared_from_this(),\n                        boost::asio::placeholders::error,\n                        boost::asio::placeholders::bytes_transferred));\n            }\n            else\n                close();\n        }\n\n    private:\n\n        void handle_downstream_write(const boost::system::error_code&amp; error)\n        {\n            if (!error)\n            {\n                upstream_socket_.async_read_some(\n                    boost::asio::buffer(upstream_data_, max_data_length),\n                    boost::bind(&amp;bridge::handle_upstream_read,\n                        shared_from_this(),\n                        boost::asio::placeholders::error,\n                        boost::asio::placeholders::bytes_transferred));\n            }\n            else\n                close();\n        }\n\n        void handle_downstream_read(const boost::system::error_code&amp; error,\n            const size_t&amp; bytes_transferred)\n        {\n            if (!error)\n            {\n                async_write(upstream_socket_,\n                    boost::asio::buffer(downstream_data_, bytes_transferred),\n                    boost::bind(&amp;bridge::handle_upstream_write,\n                        shared_from_this(),\n                        boost::asio::placeholders::error));\n            }\n            else\n                close();\n        }\n\n        void handle_upstream_write(const boost::system::error_code&amp; error)\n        {\n            if (!error)\n            {\n                downstream_socket_.async_read_some(\n                    boost::asio::buffer(downstream_data_, max_data_length),\n                    boost::bind(&amp;bridge::handle_downstream_read,\n                        shared_from_this(),\n                        boost::asio::placeholders::error,\n                        boost::asio::placeholders::bytes_transferred));\n            }\n            else\n                close();\n        }\n\n        void handle_upstream_read(const boost::system::error_code&amp; error,\n            const size_t&amp; bytes_transferred)\n        {\n            if (!error)\n            {\n                async_write(downstream_socket_,\n                    boost::asio::buffer(upstream_data_, bytes_transferred),\n                    boost::bind(&amp;bridge::handle_downstream_write,\n                        shared_from_this(),\n                        boost::asio::placeholders::error));\n            }\n            else\n                close();\n        }\n\n        void close()\n        {\n            boost::mutex::scoped_lock lock(mutex_);\n\n            if (downstream_socket_.is_open())\n            {\n                downstream_socket_.close();\n            }\n\n            if (upstream_socket_.is_open())\n            {\n                upstream_socket_.close();\n            }\n        }\n\n        socket_type downstream_socket_;\n        socket_type upstream_socket_;\n\n        enum { max_data_length = 8192 }; //8KB\n        unsigned char downstream_data_[max_data_length];\n        unsigned char upstream_data_[max_data_length];\n\n        boost::mutex mutex_;\n\n    public:\n\n        class acceptor\n        {\n        public:\n\n            acceptor(boost::asio::io_service&amp; io_service,\n                const std::string&amp; local_host, unsigned short local_port,\n                const std::string&amp; upstream_host, unsigned short upstream_port)\n                : io_service_(io_service),\n                localhost_address(boost::asio::ip::address_v4::from_string(local_host)),\n                acceptor_(io_service_, ip::tcp::endpoint(localhost_address, local_port)),\n                upstream_port_(upstream_port),\n                upstream_host_(upstream_host)\n            {}\n\n            bool accept_connections()\n            {\n                try\n                {\n                    session_ = boost::shared_ptr&lt;bridge&gt;(new bridge(io_service_));\n\n                    acceptor_.async_accept(session_-&gt;downstream_socket(),\n                        boost::bind(&amp;acceptor::handle_accept,\n                            this,\n                            boost::asio::placeholders::error));\n                }\n                catch (std::exception&amp; e)\n                {\n                    std::cerr &lt;&lt; \"acceptor exception: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n                    return false;\n                }\n\n                return true;\n            }\n\n        private:\n\n            void handle_accept(const boost::system::error_code&amp; error)\n            {\n                if (!error)\n                {\n                    session_-&gt;start(upstream_host_, upstream_port_);\n\n                    if (!accept_connections())\n                    {\n                        std::cerr &lt;&lt; \"Failure during call to accept.\" &lt;&lt; std::endl;\n                    }\n                }\n                else\n                {\n                    std::cerr &lt;&lt; \"Error: \" &lt;&lt; error.message() &lt;&lt; std::endl;\n                }\n            }\n\n            boost::asio::io_service&amp; io_service_;\n            ip::address_v4 localhost_address;\n            ip::tcp::acceptor acceptor_;\n            ptr_type session_;\n            unsigned short upstream_port_;\n            std::string upstream_host_;\n        };\n\n    };\n}\n\nint main(int argc, char* argv[])\n{\n    if (argc != 5)\n    {\n        std::cerr &lt;&lt; \"usage: EvilProxy.exe &lt;local host ip&gt; &lt;local port&gt; &lt;forward host ip&gt; &lt;forward port&gt;\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    const unsigned short local_port = static_cast&lt;unsigned short&gt;(::atoi(argv[2]));\n    const unsigned short forward_port = static_cast&lt;unsigned short&gt;(::atoi(argv[4]));\n    const std::string local_host = argv[1];\n    const std::string forward_host = argv[3];\n\n    boost::asio::io_service ios;\n\n    boost::system::error_code ec;\n\n    boost::asio::ip::tcp::socket &amp;mySocket = tcp_proxy::bridge(ios).downstream_socket();\n\n    try\n    {\n\n        std::string str_IpDest = mySocket.remote_endpoint().address().to_string(); // Here i try to get the adresse but with this code, the adresse is seeking only at the begining...it's too earl\n\n        tcp_proxy::bridge::acceptor acceptor(ios,\n            local_host, local_port,\n            str_IpDest, forward_port);\n\n        acceptor.accept_connections();\n\n        ios.run();\n    }\n    catch (std::exception&amp; e)\n    {\n        std::cerr &lt;&lt; \"Error: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm doing this </p>\n\n<pre><code>std::string str_IpDest = mySocket.remote_endpoint().address().to_string();\n</code></pre>\n\n<p>But it's called to earl, i don't know how to trigger it each time user ask another adress.</p>\n\n<p>I use boost:asio.</p>\n\n<p>Anyon can help me please ?\nThe goal...After is to use SSL...but...after :)</p>\n\n<p>Thanks a lot :)</p>\n\n<p>Regards</p>\n"}, {"tags": ["c++", "operators", "cout"], "comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 6, "creation_date": 1470258594, "post_id": 38753430, "comment_id": 64881154, "body": "You are confusing pre-increment and post-increment. <code>a++</code> and <code>++a</code> are not the same. Related: <a href=\"http://stackoverflow.com/questions/4445706/post-increment-and-pre-increment-concept\" title=\"post increment and pre increment concept\">stackoverflow.com/questions/4445706/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1470257899, "post_id": 38753484, "comment_id": 64880835, "body": "It&#39;d be good to explain prefix vs postfix"}], "tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 2, "last_activity_date": 1470257815, "creation_date": 1470257815, "answer_id": 38753484, "question_id": 38753430, "link": "https://stackoverflow.com/questions/38753430/c-and-operators/38753484#38753484", "title": "C++ and ++ operators", "body": "<p>Here you go:</p>\n\n<ul>\n<li>initiate a = 3</li>\n<li>initiate b = 2;</li>\n<li>assign the value of (a) to b, so b = 3 and increment a to 4;</li>\n<li>print b+1, which is 4.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": false, "score": 4, "last_activity_date": 1470297903, "last_edit_date": 1470297903, "creation_date": 1470257908, "answer_id": 38753507, "question_id": 38753430, "link": "https://stackoverflow.com/questions/38753430/c-and-operators/38753507#38753507", "title": "C++ and ++ operators", "body": "<p>In the statement:</p>\n\n<pre><code>b = a++\n</code></pre>\n\n<p><code>a</code> is evaluated for the assignment to <code>b</code> and <strong>after</strong> that <code>a</code> is then incremented so <code>a = a+1</code>.</p>\n\n<p>On the other hand:</p>\n\n<pre><code>b = ++a\n</code></pre>\n\n<p>Increments <code>a</code> so <code>a = a+1</code> <strong>before</strong> <code>a</code> is then evaluated for assignment to <code>b</code>.</p>\n\n<p>You can look deeply here:</p>\n\n<p><a href=\"http://www.embedded.com/design/programming-languages-and-tools/4410601/Pre-increment-or-post-increment-in-C-C-\" rel=\"nofollow\">Pre-increment or post-increment in C/C++</a></p>\n"}, {"tags": [], "owner": {"reputation": 558, "user_id": 1466885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f3dbc479f96b0133eb624336e7842c9?s=128&d=identicon&r=PG&f=1", "display_name": "daljit97", "link": "https://stackoverflow.com/users/1466885/daljit97"}, "is_accepted": true, "score": 3, "last_activity_date": 1470258359, "creation_date": 1470258359, "answer_id": 38753629, "question_id": 38753430, "link": "https://stackoverflow.com/questions/38753430/c-and-operators/38753629#38753629", "title": "C++ and ++ operators", "body": "<p>In C++ when an increment or decrement is used in an expression, the position of \"++\" or \"--\" matters.\nIf the operator is before a variable then the increment or decrement will be done before the end of the expression, in the opposite situation the increment or decrement will be done after the entire  expression is executed.</p>\n\n<pre><code>int b = ++a; // first add +1 to a, then assign a to b\nint b = a++; // assign a to b, then add +1 to a\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1470301148, "accepted_answer_id": 38753629, "answer_count": 3, "score": 0, "last_activity_date": 1470297903, "creation_date": 1470257642, "question_id": 38753430, "link": "https://stackoverflow.com/questions/38753430/c-and-operators", "closed_reason": "Duplicate", "title": "C++ and ++ operators", "body": "<p>so I am looking at the following snippet of code</p>\n\n<pre><code>int a = 3;\nint b = 2;\nb = a++;\ncout &lt;&lt; ++b;\n</code></pre>\n\n<p>My understanding line by line is:</p>\n\n<ol>\n<li>initiate a = 3</li>\n<li>initiate b = 2;</li>\n<li>assign the value of (a+1) to b, so b = 4;</li>\n<li>print b+1, which is 5.</li>\n</ol>\n\n<p>However this is wrong, can someone explain this in simple terms? I am new to C++ </p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2013"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1470257808, "post_id": 38753414, "comment_id": 64880792, "body": "<i>where upgrading is not an option at the moment.</i> -- Maybe you are trying to squeeze blood out of a stone.  The VS 2013 compiler is what it is, and is not going to be upgraded / fixed."}, {"owner": {"reputation": 580, "user_id": 2367188, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0760bddf7050619ba2302006daef410a?s=128&d=identicon&r=PG", "display_name": "RIanGillis", "link": "https://stackoverflow.com/users/2367188/riangillis"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470258113, "post_id": 38753414, "comment_id": 64880929, "body": "Yes, that is a distinct possibility, though I am hopeful somebody with a little more knowledge of the compiler bug could point me in the direction of a work-around as in some of the linked questions."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1470259760, "post_id": 38753414, "comment_id": 64881711, "body": "As workaroud, you may add extra parameter to FIELD which corresponds to <code>decltype(data)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": true, "score": 2, "last_activity_date": 1470263771, "creation_date": 1470263771, "answer_id": 38754756, "question_id": 38753414, "link": "https://stackoverflow.com/questions/38753414/overcoming-decltype-issues-in-visual-studio-2013/38754756#38754756", "title": "Overcoming decltype Issues in Visual Studio 2013", "body": "<p>I was wondering what the <code>decltype</code> does for you so I have tried to rewrite the code a little, this might not be what you were looking for as the types are always uint64_t.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#define GETMASK(index, size) (((1ULL &lt;&lt; (size)) - 1ULL) &lt;&lt; (index))\n#define READFROM(data, index, size) (((data) &amp; GETMASK((index), (size))) &gt;&gt;  (index))\n#define WRITETO(data, index, size, value) ((data) = ((data) &amp; (~GETMASK((index), (size)))) | ((value) &lt;&lt; (index)))\n\n#define FIELD(data, name, index, size) \\\n      inline uint64_t name() { return READFROM(data, index, size); } \\\n      inline void set_##name(uint64_t value) { WRITETO(data, index, size, value); }\n\nstruct A {\n  uint16_t bitData;\n  FIELD(bitData, one, 0, 1)\n  FIELD(bitData, two, 1, 2)\n};\n\nint main() {\n  struct A a;\n  a.bitData = 2;\n\n  uint16_t res = a.two();\n  a.set_two(3);\n\n  printf(\"res = %u\\n\", res);\n  printf(\"a = %u\\n\", a.bitData);\n}\n</code></pre>\n\n<p>check result at <a href=\"http://ideone.com/yWnlJu\" rel=\"nofollow\">http://ideone.com/yWnlJu</a></p>\n"}], "owner": {"reputation": 580, "user_id": 2367188, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0760bddf7050619ba2302006daef410a?s=128&d=identicon&r=PG", "display_name": "RIanGillis", "link": "https://stackoverflow.com/users/2367188/riangillis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 1, "accepted_answer_id": 38754756, "answer_count": 1, "score": 1, "last_activity_date": 1470263771, "creation_date": 1470257585, "last_edit_date": 1495535492, "question_id": 38753414, "link": "https://stackoverflow.com/questions/38753414/overcoming-decltype-issues-in-visual-studio-2013", "title": "Overcoming decltype Issues in Visual Studio 2013", "body": "<p>I have been using the great bit-handling examples provided by @ddriver:</p>\n\n<pre><code>#define GETMASK(index, size) (((1 &lt;&lt; (size)) - 1) &lt;&lt; (index))\n#define READFROM(data, index, size) (((data) &amp; GETMASK((index), (size))) &gt;&gt;  (index))\n#define WRITETO(data, index, size, value) ((data) = ((data) &amp; (~GETMASK((index), (size)))) | ((value) &lt;&lt; (index)))\n#define FIELD(data, name, index, size) \\\n  inline decltype(data) name() { return READFROM(data, index, size); } \\\n  inline void set_##name(decltype(data) value) { WRITETO(data, index, size, value); }\n</code></pre>\n\n<p>taken from: <a href=\"https://stackoverflow.com/questions/11815894/how-to-read-write-arbitrary-bits-in-c-c\">How to read/write arbitrary bits in C/C++</a> , to do some amazing and wonderful things. </p>\n\n<p>The problem I'm encountering is that most of my development work is done in VS 2015, where the above #defines work great, but not in VS 2013, which is my other dev environment, where upgrading is not an option at the moment.</p>\n\n<p>I am pretty sure the issue is the calls to decltype(), as there are a couple SO questions related to that function and VS 2013 with a couple of different workarounds:</p>\n\n<p>[<a href=\"https://stackoverflow.com/questions/24563593/why-is-visual-studio-2013-having-trouble-with-this-class-member-decltype\">Why is Visual Studio 2013 having trouble with this class member decltype?</a> ]<br/>\n[<a href=\"https://stackoverflow.com/questions/14085274/c-decltype-fails-to-deduce-type\">C++ decltype fails to deduce type</a> ]<br/>\n[<a href=\"https://stackoverflow.com/questions/31843154/visual-c-decltype-as-a-return-type-of-a-class-templates-member-function\">Visual C++ - decltype as a return type of a class template&#39;s member function</a> ]<br/>\n[<a href=\"https://stackoverflow.com/questions/36015083/vs2013-intellisense-doesnt-understand-decltype\">VS2013 Intellisense doesn&#39;t understand decltype</a> ]<br/>\n[<a href=\"https://stackoverflow.com/questions/27371102/how-to-use-auto-return-and-decltype-when-class-members-involved-with-c11\">How to use auto return and decltype when class members involved with c++11?</a> ]<br/><br/>Unfortunately, I was unable to use any of the above solutions to solve my problem that does not involve upgrading the environment to VS 2015.<br/>Any help would be greatly appreciated.</p>\n\n<p>The errors I am receiving are thrown when compiling something similar to:</p>\n\n<pre><code>FIELD(bytes[0][0].r, layer1a, 1, 8);\n</code></pre>\n\n<p>I get the following errors:</p>\n\n<pre><code>error C2597: illegal reference to non-static member 'mBit::bP::bytes'\nerror C3867: 'mBit::bP::bytes': function call missing argument list; use '&amp;mBit::bP::bytes' to create a pointer to member\nerror C2109: subscript requires array or pointer type\n</code></pre>\n\n<p>Modifying the bytes[][] object so it is not an array does not seem to help.</p>\n"}, {"tags": ["c++", "c++11", "for-loop", "foreach"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1470257369, "post_id": 38753318, "comment_id": 64880585, "body": "I believe this happens because of <code>f</code> declared as <code>foo f;</code> and not <code>const foo f;</code> That&#39;s why the non-const overloaded function is selected over const. My question is why do you need the <code>getNumbers()</code> both public and private?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1470257635, "post_id": 38753318, "comment_id": 64880715, "body": "Avoid any private/protected getter/setter (or use a different name)"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1470257683, "post_id": 38753318, "comment_id": 64880737, "body": "@DimChtz Yes, that&#39;s the problem. The overload selected is the function signature, not the return type."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1470257753, "post_id": 38753318, "comment_id": 64880765, "body": "@DieterL&#252;cking Yes... this is a contrived example strictly for the purposes of illustrating the problem. This question has nothing to do with proper use of getters, but thanks for your input."}, {"owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1470257914, "post_id": 38753318, "comment_id": 64880842, "body": "isn&#39;t setting a getter as private kind of defeating the purpose of a getter...?"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1470258158, "post_id": 38753318, "comment_id": 64880946, "body": "I&#39;ve changed the example to make the non-<code>const</code> getter <code>protected</code> instead of <code>private</code> (this is the situation in my real code that prompted this question, but I changed it here to shorten the example by one line.)"}], "answers": [{"comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1470258427, "post_id": 38753523, "comment_id": 64881075, "body": "Thanks, this is good information as far as understanding why the non-<code>const</code> overload is selected. But it doesn&#39;t quite answer the question of whether there&#39;s a more convenient way to select the <code>const</code> overload without explicitly making a <code>const</code> reference to the instance."}, {"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1470258515, "post_id": 38753523, "comment_id": 64881117, "body": "@TypeIA Some others suggest the same as you did: <a href=\"http://stackoverflow.com/a/7287093\">stackoverflow.com/a/7287093</a>"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1470258978, "post_id": 38753523, "comment_id": 64881337, "body": "Thanks, that&#39;s a great link and I&#39;ve added it to the top of my question. That linked question really gets at the heart of this issue, which is unrelated to range-based for loops."}], "tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": false, "score": 3, "last_activity_date": 1470257958, "creation_date": 1470257958, "answer_id": 38753523, "question_id": 38753318, "link": "https://stackoverflow.com/questions/38753318/range-expression-of-range-based-for-loops-to-use-const-function-overloads/38753523#38753523", "title": "Range expression of range-based for loops to use const function overloads", "body": "<blockquote>\n  <p>But a <code>const</code> version of <code>get_numbers()</code> is available and could be used.</p>\n</blockquote>\n\n<p>The best function is selected before accessibility is considered. The standard states (emphasis mine):</p>\n\n<blockquote>\n  <p>If a best viable function exists and is unique, overload resolution succeeds and produces it as the result.\n  Otherwise overload resolution fails and the invocation is ill-formed. <strong><em>When overload resolution succeeds, and\n  the best viable function is not accessible</em></strong> (Clause 11) in the context in which it is used, the program is\n  ill-formed.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1470260437, "post_id": 38753616, "comment_id": 64882047, "body": "C++17, <a href=\"http://en.cppreference.com/w/cpp/utility/as_const\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/as_const</a>. It would be safer to add <code>template &lt;class T&gt; void as_const(const T&amp;&amp;) = delete;</code> to prevent dangling references to temporaries."}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1470260863, "post_id": 38753616, "comment_id": 64882224, "body": "nice, I wasn&#39;t aware you could delete arbitrary function declarations"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1470263067, "post_id": 38753616, "comment_id": 64883041, "body": "<code>_T</code> is reserved. Use something else."}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1470263234, "post_id": 38753616, "comment_id": 64883077, "body": "@T.C. is that better?"}], "tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": false, "score": 0, "last_activity_date": 1470263115, "last_edit_date": 1470263115, "creation_date": 1470258291, "answer_id": 38753616, "question_id": 38753318, "link": "https://stackoverflow.com/questions/38753318/range-expression-of-range-based-for-loops-to-use-const-function-overloads/38753616#38753616", "title": "Range expression of range-based for loops to use const function overloads", "body": "<p>A simple template function <code>as_const</code> can make the cast not so ugly. I believe this is being added or was recently added to the standard library.</p>\n\n<pre><code>template &lt;typename T&gt; T const &amp; as_const (T const &amp; t) { return t; }\n\nvoid f ()\n{\n    for (auto &amp;&amp; x: as_const (y)) {}\n}\n</code></pre>\n"}], "owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470263115, "creation_date": 1470257228, "last_edit_date": 1495541694, "question_id": 38753318, "link": "https://stackoverflow.com/questions/38753318/range-expression-of-range-based-for-loops-to-use-const-function-overloads", "title": "Range expression of range-based for loops to use const function overloads", "body": "<p><strong>Update, thanks to AlexD's answer</strong>: This question boils down to the language rules for selecting member function overloads, which is discussed in the following question: <a href=\"https://stackoverflow.com/questions/7287065/calling-a-const-function-rather-than-its-non-const-version/7287093#7287093\">Calling a const function rather than its non-const version</a></p>\n\n<hr>\n\n<p>When the range expression of a <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-based for loop</a> is a call to a member function with <code>const</code> and non-<code>const</code> overloads, it seems that the non-<code>const</code> overload is selected. As a result, the following program does not compile:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass foo {\n    public:\n        const std::vector&lt;int&gt;&amp; get_numbers() const { return numbers; }\n    protected:\n        std::vector&lt;int&gt;&amp; get_numbers() { return numbers; }\n    private:\n        std::vector&lt;int&gt; numbers;\n};\n\nint main() {\n    foo f;\n    for (int x : f.get_numbers()) std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p></p>\n\n<p>Diagnostic message from gcc 5.3:</p>\n\n<blockquote>\n  <p><code>error: \u2018std::vector&lt;int&gt;&amp; foo::get_numbers()\u2019 is protected</code></p>\n</blockquote>\n\n<p>But a <code>const</code> version of <code>get_numbers()</code> is available and could be used. We can force it to be used by using a <code>const</code> reference to the <code>foo</code> instance, like this:</p>\n\n<pre><code>int main() {\n    foo f;\n    const foo&amp; g = f;\n    for (int x : g.get_numbers()) std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Is there a better/easier way to tell the compiler that it can and should use the <code>const</code> member function overload, without explicitly making a <code>const</code> reference to the object?</p>\n\n<p>There are some <a href=\"https://stackoverflow.com/questions/15176104/c11-range-based-loop-get-item-by-value-or-reference-to-const\">similar questions</a> about making the range-based for loop use <code>const</code> iterators, but I haven't found any questions about making the loop's range expression <code>const</code> for the purposes of selecting function overloads.</p>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1470257076, "post_id": 38753213, "comment_id": 64880434, "body": "I think I can put it this way: All four bytes are allocated as one <code>block of memory</code> for your integer, where each block has a unique address."}, {"owner": {"reputation": 109, "user_id": 5653385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5a4013fe93e62e17a42826ce7ed40533?s=128&d=identicon&r=PG&f=1", "display_name": "plee", "link": "https://stackoverflow.com/users/5653385/plee"}, "edited": false, "score": 0, "creation_date": 1470257342, "post_id": 38753213, "comment_id": 64880569, "body": "Thank you! This makes a lot of sense."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1470257353, "post_id": 38753213, "comment_id": 64880577, "body": "Extending on @FirstStep&#39;s comment, the location of the first byte and its length are all that is required to know everything you need to know. The real pain comes later with pointers to arrays where you might not know the length."}, {"owner": {"reputation": 471, "user_id": 3737891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ulyNU.jpg?s=128&g=1", "display_name": "Remis", "link": "https://stackoverflow.com/users/3737891/remis"}, "edited": false, "score": 1, "creation_date": 1470260424, "post_id": 38753213, "comment_id": 64882037, "body": "This <a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/cpp/cp4_PointerReference.html\" rel=\"nofollow noreferrer\">link</a> provides a very good explanation."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1470275014, "post_id": 38753213, "comment_id": 64886962, "body": "Um... Address-of operator does not print anything. Neither 1 address, nor 4. If you are printing something in your program, it is <i>you</i> who are doing this, using some other tools. If you print 1 address - you get 1 address, if you print 4 - you get 4, if you print 100 addresses - you get 100 addresses. But from what you posted so far it is completely unclear what you are printing and how."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1470261301, "last_edit_date": 1470261301, "creation_date": 1470257298, "answer_id": 38753338, "question_id": 38753213, "link": "https://stackoverflow.com/questions/38753213/how-come-console-prints-only-1-unique-address-of-integer-variable-when-using-add/38753338#38753338", "title": "How come console prints only 1 unique address of integer variable when using address-of operator?", "body": "<p>Each <em>variable</em> is located in memory somewhere, so each <em>variable</em> gets an address you can get with the address-of operator.</p>\n\n<p>That each byte in a multi-byte variable also have their addresses doesn't matter, the address-of operator gives you a pointer to the <em>variable</em>.</p>\n\n<p>Some \"graphics\" to hopefully explain it...</p>\n\n<p>Lets say we have an <code>int</code> variable named <code>i</code>, and that the type <code>int</code> takes four bytes (32 bits, this is the usual for <code>int</code>). Then you have something like</p>\n\n<pre>\n+---+---+---+---+\n|   |   |   |   |\n+---+---+---+---+\n</pre>\n\n<p>Some place is reserved for the four bytes, where doesn't matter the compiler will handle all that for you.</p>\n\n<p>Now if you use the address-of operator to get a <em>pointer</em> to the variable <code>i</code> i.e. you do <code>&amp;i</code>, then you have something like</p>\n\n<pre>\n+---+---+---+---+\n|   |   |   |   |\n+---+---+---+---+\n^\n|\n&i\n</pre>\n\n<p>The expression <code>&amp;i</code> points to the memory position where the byte-sequence of the variable <em>begins</em>. It can't possible give you multiple pointers, one for each byte, that's really impossible, and not needed as well.</p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 6, "last_activity_date": 1470257304, "creation_date": 1470257304, "answer_id": 38753341, "question_id": 38753213, "link": "https://stackoverflow.com/questions/38753213/how-come-console-prints-only-1-unique-address-of-integer-variable-when-using-add/38753341#38753341", "title": "How come console prints only 1 unique address of integer variable when using address-of operator?", "body": "<blockquote>\n  <p>shouldn't my console, when using the address-of operator print out 4 unique addresses instead of 1?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>The address of an object is the address of its starting byte. A 4-byte <code>int</code> has a unique address, the address of its first byte, but it occupies the next three bytes as well. Those next three bytes have different addresses, but they are not the address of the <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": true, "score": 3, "last_activity_date": 1470274563, "last_edit_date": 1470274563, "creation_date": 1470257599, "answer_id": 38753419, "question_id": 38753213, "link": "https://stackoverflow.com/questions/38753213/how-come-console-prints-only-1-unique-address-of-integer-variable-when-using-add/38753419#38753419", "title": "How come console prints only 1 unique address of integer variable when using address-of operator?", "body": "<p>Yes an integer type requires four bytes. <strong>All</strong> four bytes are allocated as <strong>one</strong> <code>block of memory</code> for your integer, where each block has a unique address. This unique address is simply the first byte's address of the <code>block</code>.</p>\n"}], "owner": {"reputation": 109, "user_id": 5653385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5a4013fe93e62e17a42826ce7ed40533?s=128&d=identicon&r=PG&f=1", "display_name": "plee", "link": "https://stackoverflow.com/users/5653385/plee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38753419, "answer_count": 3, "score": 1, "last_activity_date": 1470274563, "creation_date": 1470256808, "question_id": 38753213, "link": "https://stackoverflow.com/questions/38753213/how-come-console-prints-only-1-unique-address-of-integer-variable-when-using-add", "title": "How come console prints only 1 unique address of integer variable when using address-of operator?", "body": "<p>I am a university student currently studying computer science and programming and while reading chapter 2 of c++ primer by Stanley B. Lippmann a question popped up into my mind and that is, if computer memory is divided into tiny storage locations called Bytes (8 bits) and each Byte of memory is assigned a unique address, and an integer variable uses up 4 Bytes of memory, shouldn't my console, when using the address-of operator print out 4 unique addresses instead of 1? </p>\n\n<p>I doubt that the textbook is incorrect and that their is a flaw in my understanding of computer memory. As a result, I would like a positive clarification of this question I am facing. Thanks in advance people :)</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "edited": false, "score": 0, "creation_date": 1470256035, "post_id": 38752936, "comment_id": 64879915, "body": "I&#39;d look towards <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/interprocess/streams.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/doc/html/interprocess/streams.html</a>"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1470256125, "post_id": 38752936, "comment_id": 64879960, "body": "Maybe implement <code>std::string X::repr()</code> or similar, and call that in both <code>append</code> and <code>operator&lt;&lt;</code>? Not ideal, but you avoid the intermediate <code>stringstream</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470256211, "post_id": 38752936, "comment_id": 64880005, "body": "What about simply <code>s.append(std::string::to_string(x));</code>? Did I miss something essential?"}, {"owner": {"reputation": 39095, "user_id": 398060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47073e025b05ee4d61d720f6424d0191?s=128&d=identicon&r=PG", "display_name": "GWW", "link": "https://stackoverflow.com/users/398060/gww"}, "edited": false, "score": 0, "creation_date": 1470256279, "post_id": 38752936, "comment_id": 64880033, "body": "This <a href=\"http://stackoverflow.com/questions/1494182/setting-the-internal-buffer-used-by-a-standard-stream-pubsetbuf\">question</a> may have some useful information"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 2, "creation_date": 1470259729, "post_id": 38752936, "comment_id": 64881691, "body": "Maybe overloading <code>std::string&amp; operator+=(std::string&amp; s, X const&amp; x)</code>? This definitely would be more direct ;)"}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1470259772, "post_id": 38753069, "comment_id": 64881718, "body": "There are times when I feel like I know C++. This is not one of those times."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470265062, "post_id": 38753069, "comment_id": 64883657, "body": "Is there any reason to store a pointer and not a reference? Does the buffer have to be copyable?"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470294823, "post_id": 38753069, "comment_id": 64893433, "body": "@NathanOliver That&#39;s a very good point (thanks!), but it unfortunately exceeds my knowledge (the pointer was indeed chosen just so not to risk it). On the one hand, <code>streambuf</code> seems to be required to have a copy ctor; on the other hand, the pointer argument of the <code>ostream</code> taking it seems to indicate it&#39;s not copied. Bottom line - not sure."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 15, "last_activity_date": 1470257988, "last_edit_date": 1470257988, "creation_date": 1470256215, "answer_id": 38753069, "question_id": 38752936, "link": "https://stackoverflow.com/questions/38752936/stream-object-directly-into-a-stdstring/38753069#38753069", "title": "Stream object directly into a std::string", "body": "<p>This can be solved by a new type of <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/streambufs.html\" rel=\"noreferrer\"><code>streambuf</code></a> (see <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321585585\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Standard C++ IOStreams and Locales: Advanced Programmer's Guide and Reference</a>).</p>\n\n<p>Here is a sketch of how it can look:</p>\n\n<pre><code>#include &lt;streambuf&gt;\n\nclass existing_string_buf : public std::streambuf\n{\npublic:\n    // Store a pointer to to_append.\n    explicit existing_string_buf(std::string &amp;to_append); \n\n    virtual int_type overflow (int_type c) {\n        // Push here to the string to_append.\n    }\n};\n</code></pre>\n\n<p>Once you flesh out the details here, you could use it as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstd::string s;\n// Create a streambuf of the string s\nexisting_string_buf b(s);\n// Create an ostream with the streambuf\nstd::ostream o(&amp;b);\n</code></pre>\n\n<p>Now you just write to <code>o</code>, and the result should appear as appended to <code>s</code>.</p>\n\n<pre><code>// This will append to s\no &lt;&lt; 22;\n</code></pre>\n\n<p><strong>Edit</strong> </p>\n\n<p>As @rustyx correctly notes, overriding <code>xsputn</code> is required for improving performance.</p>\n\n<p><strong>Full Example</strong></p>\n\n<p>The following prints <code>22</code>:</p>\n\n<pre><code>#include &lt;streambuf&gt;\n#include &lt;string&gt;\n#include &lt;ostream&gt; \n#include &lt;iostream&gt;\n\nclass existing_string_buf : public std::streambuf\n{\npublic:\n    // Somehow store a pointer to to_append.\n    explicit existing_string_buf(std::string &amp;to_append) : \n        m_to_append(&amp;to_append){}\n\n    virtual int_type overflow (int_type c) {\n        if (c != EOF) {\n            m_to_append-&gt;push_back(c);\n        }\n        return c;\n    }\n\n    virtual std::streamsize xsputn (const char* s, std::streamsize n) {\n        m_to_append-&gt;insert(m_to_append-&gt;end(), s, s + n);                                                                                 \n        return n;\n    }\n\nprivate:\n    std::string *m_to_append;\n};\n\n\nint main()\n{   \n    std::string s;\n    existing_string_buf b(s);\n    std::ostream o(&amp;b);\n\n    o &lt;&lt; 22; \n\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n}   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1470260144, "post_id": 38753146, "comment_id": 64881915, "body": "Ok but now I have the same logic twice."}, {"owner": {"reputation": 156, "user_id": 1090100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049cd30e93f031cdc855b24d8893ae26?s=128&d=identicon&r=PG", "display_name": "HeywoodFloyd", "link": "https://stackoverflow.com/users/1090100/heywoodfloyd"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1472750755, "post_id": 38753146, "comment_id": 65889695, "body": "True. Change the first line of the operator&lt;&lt; method to &quot;os &lt;&lt; static_cast&lt;string&gt;(x);&quot;."}], "tags": [], "owner": {"reputation": 156, "user_id": 1090100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049cd30e93f031cdc855b24d8893ae26?s=128&d=identicon&r=PG", "display_name": "HeywoodFloyd", "link": "https://stackoverflow.com/users/1090100/heywoodfloyd"}, "is_accepted": false, "score": 2, "last_activity_date": 1472750671, "last_edit_date": 1472750671, "creation_date": 1470256515, "answer_id": 38753146, "question_id": 38752936, "link": "https://stackoverflow.com/questions/38752936/stream-object-directly-into-a-stdstring/38753146#38753146", "title": "Stream object directly into a std::string", "body": "<p>You could write a std::string casting operator:</p>\n\n<pre><code>struct X {\nint i;\n\nfriend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, X const&amp; x) {\n    os &lt;&lt; \"X(\" &lt;&lt; x.i &lt;&lt; ')';\n    return os;\n}\n\noperator std::string() {\n    return std::string(\"X(\") + std::to_string(x.i) + \")\";\n}\n\n};\n</code></pre>\n\n<p>Then, you could simply append it to a std::string:</p>\n\n<pre><code>X myX;\nmyX.i = 2;\nstd::string s(\"The value is \");\ns.append(myX); //myX is cast into the string \"X(2)\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": false, "score": -1, "last_activity_date": 1470257273, "creation_date": 1470257273, "answer_id": 38753333, "question_id": 38752936, "link": "https://stackoverflow.com/questions/38752936/stream-object-directly-into-a-stdstring/38753333#38753333", "title": "Stream object directly into a std::string", "body": "<p>Since the original string is likely only large enough for the existing allocation, the best you can hope for is to format everything you want to append once in the stream, then append the result as you have in your example. </p>\n\n<p>If you plan on performing these appends often, I would argue std::string is the wrong type for the problem at hand. I would recommend using an std::ostringtream directly instead of a std::string, and only convert to a string when you need the final result.</p>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1470260314, "last_edit_date": 1470260314, "creation_date": 1470259476, "answer_id": 38753897, "question_id": 38752936, "link": "https://stackoverflow.com/questions/38752936/stream-object-directly-into-a-stdstring/38753897#38753897", "title": "Stream object directly into a std::string", "body": "<p>In this specific case I'd just follow the KISS principle:</p>\n\n<pre><code>struct X {\n    int i;\n\n    std::string toString() const {\n        return \"X(\" + std::to_string(i) + \")\";\n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>string += x.toString();\nstd::cout &lt;&lt; x.toString();\n</code></pre>\n\n<p>An <code>operator&lt;&lt;(std::ostream&amp;, \u2026)</code> isn't really suitable for generic string conversion, so if that's what you're after then a <code>toString</code> type of method / free function is much better. And if you want <code>std::cout &lt;&lt; x</code> you can trivially implement <code>operator&lt;&lt;</code> to just call <code>toString</code>.</p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2829, "favorite_count": 9, "accepted_answer_id": 38753069, "answer_count": 4, "score": 22, "last_activity_date": 1472750671, "creation_date": 1470255697, "question_id": 38752936, "link": "https://stackoverflow.com/questions/38752936/stream-object-directly-into-a-stdstring", "title": "Stream object directly into a std::string", "body": "<p>Given some type that is streamable:</p>\n\n<pre><code>struct X {\n    int i;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, X const&amp; x) {\n        return os &lt;&lt; \"X(\" &lt;&lt; x.i &lt;&lt; ')';\n    }\n};\n</code></pre>\n\n<p>I want to append this onto a <code>std::string</code>. I can implement this as:</p>\n\n<pre><code>void append(std::string&amp; s, X const&amp; x) {\n    std::ostringstream os;\n    os &lt;&lt; x;\n    s.append(os.str());\n}\n</code></pre>\n\n<p>But this seems lame since I'm writing data into one stream just to then allocate a new string just for the purposes of appending it onto a different one. Is there a more direct route? </p>\n"}, {"tags": ["c++", "precompile"], "comments": [{"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1470255980, "post_id": 38752928, "comment_id": 64879894, "body": "Do you mean preprocessor? The preprocessor just replaces <code>FOOBARS</code> with <code>(1&lt;&lt;(2*3))</code>. The compiler then optimizes this expression to 64 in compile time."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256154, "last_edit_date": 1470256154, "creation_date": 1470255846, "answer_id": 38752979, "question_id": 38752928, "link": "https://stackoverflow.com/questions/38752928/will-bitshift-and-arithmetic-operations-be-evaluated-by-the-precompiler/38752979#38752979", "title": "Will bitshift and arithmetic operations be evaluated by the precompiler?", "body": "<p>A multiplication and bit-shift operation will take place at each location that you use <code>FOOBARS</code>.</p>\n\n<p>See:  <a href=\"https://msdn.microsoft.com/en-us/library/teas0593.aspx\" rel=\"nofollow\">#define Directive (C/C++)</a></p>\n\n<p><code>#define</code> forms a macro, meaning the identifier is replaced with everything in the token-string.  In your case, the preprocessor replaces instances of <code>FOOBARS</code> with the expression <code>(1&lt;&lt;(BITS_PER_FOO*BITS_PER_BAR))</code></p>\n"}, {"tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 2, "last_activity_date": 1470255998, "creation_date": 1470255998, "answer_id": 38753013, "question_id": 38752928, "link": "https://stackoverflow.com/questions/38752928/will-bitshift-and-arithmetic-operations-be-evaluated-by-the-precompiler/38753013#38753013", "title": "Will bitshift and arithmetic operations be evaluated by the precompiler?", "body": "<p>No, since it's not the preprocessor's business. It does the usual replace thing, not constant folding.</p>\n\n<p>However, any reasonable compiler will do constant folding, so you should not expect this to correspond to instructions being executed at runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 2, "last_activity_date": 1470256034, "creation_date": 1470256034, "answer_id": 38753023, "question_id": 38752928, "link": "https://stackoverflow.com/questions/38752928/will-bitshift-and-arithmetic-operations-be-evaluated-by-the-precompiler/38753023#38753023", "title": "Will bitshift and arithmetic operations be evaluated by the precompiler?", "body": "<p>The precompiler just does text substitution - it's essentially copy &amp; paste on steroids. This means that the expression you wrote for <code>FOOBAR</code> will be expanded in full at each replacement location. </p>\n\n<p>Now, any decent compiler will evaluate that whole subexpression at compile time anyway. However, you can save it some work (and have some extra advantages, like having a clear type of your expression, clearer diagnostic, less surprises deriving from substitutions in the wrong places, and having an actual lvalue for your constants instead of expressions) by defining these values as actual constants, like:</p>\n\n<pre><code>const int bits_per_foo = 2;\nconst int bits_per_bar = 3;\nconst int foobars = 1&lt;&lt;(bits_per_foo*bits_per_bar);\n</code></pre>\n"}], "owner": {"reputation": 1684, "user_id": 1590790, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/52ada69db49a5d75240cc0c989c934f4?s=128&d=identicon&r=PG", "display_name": "nispio", "link": "https://stackoverflow.com/users/1590790/nispio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470256154, "creation_date": 1470255660, "question_id": 38752928, "link": "https://stackoverflow.com/questions/38752928/will-bitshift-and-arithmetic-operations-be-evaluated-by-the-precompiler", "title": "Will bitshift and arithmetic operations be evaluated by the precompiler?", "body": "<p>If I define the following in a C++98 program:</p>\n\n<pre><code>#define BITS_PER_FOO 2\n#define BITS_PER_BAR 3\n#define FOOBARS (1&lt;&lt;(BITS_PER_FOO*BITS_PER_BAR))\n</code></pre>\n\n<p>then will <code>FOOBARS</code> get evaluated as 64 by the precompiler?  Or will a multiplication and bit-shift operation take place at each location that I use <code>FOOBARS</code> in the code?</p>\n"}, {"tags": ["c++", "ssl", "https", "winhttp"], "comments": [{"owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "reply_to_user": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "edited": false, "score": 0, "creation_date": 1470255866, "post_id": 38752888, "comment_id": 64879838, "body": "&quot;I cannot provide a MVCE&quot; (Minimum Verifiable Code Example)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470298668, "post_id": 38752888, "comment_id": 64895783, "body": "Since you are making a <b>secure</b> HTTP request, and are getting a <b>security</b> error, it is probably likely that <code>WinHttpSendRequest()</code> itself is internally supplying an insufficient buffer of data to the security API it uses to encrypt the HTTP traffic. It is probably not any fault on your part. Though it is difficult to say for sure since you have not shown any code.."}, {"owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1470325073, "post_id": 38752888, "comment_id": 64914909, "body": "Thanks @RemyLebeau, that is my suspicion also.  The most relevant explanation for this I have seen is here: <a href=\"https://github.com/dblock/waffle/pull/128\" rel=\"nofollow noreferrer\">github.com/dblock/waffle/pull/128</a> (see comment from &quot;wbond&quot; user on Dec 9, 2015).  I suspect that WinHttpSendRequest() is internally calling InitializeSecurityContext() and receiving SEC_E_BUFFER_TOO_SMALL but not handling it.  My best option may be to detect that error and just try calling WinHttpSendRequest() again since it is very likely that the subsequent try will work."}], "answers": [{"tags": [], "owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "is_accepted": false, "score": 5, "last_activity_date": 1472605673, "last_edit_date": 1472605673, "creation_date": 1472516684, "answer_id": 39217099, "question_id": 38752888, "link": "https://stackoverflow.com/questions/38752888/what-is-causing-intermittent-sec-e-buffer-too-small-error-coming-from-winhttpsen/39217099#39217099", "title": "What is causing intermittent SEC_E_BUFFER_TOO_SMALL error coming from WinHttpSendRequest?", "body": "<p>I was provided an answer by someone offline and find it very interesting.</p>\n\n<p>During the key exchange that occurs in TLS 1.2 with RSA+ECDHE, the 256-byte (2048-bit) public modulus integer of ECDHE is generated randomly, and as such it will occasionally have a high order byte of zero. In this situation, the server being used (some Linux box with OpenSSL, do not know distro or version of anything) sends the integer using 25<strong>5</strong> bytes instead of 256.</p>\n\n<p>The WinHTTP code which receives the public modulus integer in its slightly shorter form apparently does not handle it correctly.  It is worth noting that I have not yet seen this problem reproduced on Windows 7 with all software updates, but see it quite often on Windows 8 (Windows 10 not yet tested).</p>\n\n<p>This bug report in Microsoft Edge confirms the same behavior, just with a 1024-bit modulus instead of 2048, but probably it is the same problem:</p>\n\n<p><a href=\"https://connect.microsoft.com/IE/feedback/details/1253526/tls-serverkeyexchange-with-1024-dhe-may-encode-dh-y-as-127-bytes-breaking-internet-explorer-11\" rel=\"noreferrer\">TLS ServerKeyExchange with 1024 DHE may encode dh_Y as 127 bytes, breaking Internet Explorer 11</a></p>\n\n<p>However, it does make me wonder if OpenSSL should be padding the integer.  I have not looked for the actual spec to see what is the allowed behavior(s) in this situation.</p>\n"}], "owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2205, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1472605673, "creation_date": 1470255498, "last_edit_date": 1470298098, "question_id": 38752888, "link": "https://stackoverflow.com/questions/38752888/what-is-causing-intermittent-sec-e-buffer-too-small-error-coming-from-winhttpsen", "title": "What is causing intermittent SEC_E_BUFFER_TOO_SMALL error coming from WinHttpSendRequest?", "body": "<p>I have a tool which executes an HTTP<strong>S</strong> POST command against the same URL with same headers, same post body, etc. for a number of iterations.</p>\n\n<p>What I have run into is that for some testers, every so often the WinHttpSendRequest() function fails and the subsequent call to GetLastError() returns SEC_E_BUFFER_TOO_SMALL (0x80090321) documented here: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd542646.aspx\" rel=\"noreferrer\">COM Error Codes (Security and Setup)</a>.</p>\n\n<p>This is not a documented error code for WinHttpSendRequest() and fairly extensive Googling has not turned up anything at all for this.</p>\n\n<p>I have quadruple checked that the inputs I am providing WinHttpSendRequest() are correct and valid, and those inputs work tens of thousands of times in a row... until it doesn't.</p>\n\n<p>I cannot provide a MVCE, but under the assumptions provided here, Im looking for any possible reason for the error code coming back.</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1470255568, "post_id": 38752858, "comment_id": 64879700, "body": "Its to long so ill send it in paste bin. <a href=\"http://pastebin.com/sraW6Cry\" rel=\"nofollow noreferrer\">pastebin.com/sraW6Cry</a>"}, {"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1470255606, "post_id": 38752858, "comment_id": 64879716, "body": "woops fixed that error and it made the error I just sent"}, {"owner": {"reputation": 1066, "user_id": 5960850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tnJbUrwp8gM/AAAAAAAAAAI/AAAAAAAAABg/iPOhz7bBu8g/photo.jpg?sz=128", "display_name": "Matthew Woo", "link": "https://stackoverflow.com/users/5960850/matthew-woo"}, "edited": false, "score": 1, "creation_date": 1470295074, "post_id": 38752858, "comment_id": 64893562, "body": "Why do you change your code from what the original was? The answers won&#39;t make sense if the problem no longer exists in the posted code"}], "answers": [{"comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1470255697, "post_id": 38752900, "comment_id": 64879762, "body": "Worth mentioning <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">Why is \u201cusing namespace std\u201d in C++ considered bad practice</a>"}], "tags": [], "owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "is_accepted": true, "score": 3, "last_activity_date": 1470255748, "last_edit_date": 1495539859, "creation_date": 1470255558, "answer_id": 38752900, "question_id": 38752858, "link": "https://stackoverflow.com/questions/38752858/i-cant-get-this-simple-c-script-to-compile-any-ideas/38752900#38752900", "title": "I can&#39;t get this simple c++ script to compile. Any ideas?", "body": "<p>You commented out the standard namespace... Change</p>\n\n<pre><code>//using namespace std;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>Edit: your compiler is telling you exactly what's wrong... It can't find a reference to the std namespace functions because you haven't declared it. But note that it is <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">bad practice to be declaring it globally</a>. When you gain more familiarity with the language you should be declaring the namespace manually using the scope resultion <code>::</code> operator. </p>\n"}, {"comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1470256049, "post_id": 38752911, "comment_id": 64879921, "body": "Code compiles and has no problem. Check your IDE (compiler). And for the record, always <b>state</b> what is the error!"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1470256864, "post_id": 38752911, "comment_id": 64880320, "body": "Glad we were able to help. :)"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 3, "last_activity_date": 1470255589, "last_edit_date": 1495542773, "creation_date": 1470255589, "answer_id": 38752911, "question_id": 38752858, "link": "https://stackoverflow.com/questions/38752858/i-cant-get-this-simple-c-script-to-compile-any-ideas/38752911#38752911", "title": "I can&#39;t get this simple c++ script to compile. Any ideas?", "body": "<p>Obviously you commented <code>using namespace std;</code> but kept using some of its references (<code>cout</code> and <code>cin</code>) without explicitly stating which namespace they come from (eq <code>std::cout</code>).</p>\n\n<p>Solution:</p>\n\n<p>Add <code>std::</code> to all your <code>cout</code>s and <code>cin</code>s because <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">using \u201cusing namespace std\u201d in C++ is considered bad practice</a></p>\n"}], "owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 38752900, "answer_count": 2, "score": 1, "last_activity_date": 1470270619, "creation_date": 1470255389, "last_edit_date": 1470270619, "question_id": 38752858, "link": "https://stackoverflow.com/questions/38752858/i-cant-get-this-simple-c-script-to-compile-any-ideas", "title": "I can&#39;t get this simple c++ script to compile. Any ideas?", "body": "<p>Im learning c++ and am a noob at it any help would be nice. :)\nplease\n   This is a text based rpg that im messing with. Making a rpg is a great way to learn a language. But any help would be appreciated. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int health, armor, damage;\n    health = 100;\n    armor = 0;\n    damage = 5;// This is a dynamic var for desision making\n    int loopcon = 1;\n    int decision = 1; \n\n    cout &lt;&lt; \"You enter the forest and have no idea what has happened and your head hurts.\\n\";\n    cout &lt;&lt; \"You are trying to remember whaT happened to you and how you ended up here but you cant.\\n\";\n    cout &lt;&lt; \"You see a town would you like to explore it?\";\n    cout &lt;&lt; \"What is your name?\";\n    while (loopcon == 1) {\n        cout &lt;&lt; \"1/0\";\n        cin &gt;&gt; decision;\n        if (decision == 1) \n            cout &lt;&lt; \"You enter the city\";\n        if (decision == 0)\n            cout &lt;&lt; \"Theres also a forsest want to export that?\";\n\n        else\n            cout &lt;&lt; \"try useing caps\";\n\n    }    \n\n\n    return 0;\n}\n</code></pre>\n\n<p>when I run this is get a big long error any ideas?</p>\n\n<pre><code>sudo gcc maingame.cpp\n/tmp/cca53Qhv.o: In function `main':\nmaingame.cpp:(.text+0x31): undefined reference to `std::cout'\nmaingame.cpp:(.text+0x36): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0x40): undefined reference to `std::cout'\nmaingame.cpp:(.text+0x45): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0x4f): undefined reference to `std::cout'\nmaingame.cpp:(.text+0x54): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0x5e): undefined reference to `std::cout'\nmaingame.cpp:(.text+0x63): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0x6f): undefined reference to `std::cout'\nmaingame.cpp:(.text+0x74): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0x80): undefined reference to `std::cin'\nmaingame.cpp:(.text+0x85): undefined reference to `std::istream::operator&gt;&gt;(int&amp;)'\nmaingame.cpp:(.text+0x97): undefined reference to `std::cout'\nmaingame.cpp:(.text+0x9c): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0xad): undefined reference to `std::cout'\nmaingame.cpp:(.text+0xb2): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\nmaingame.cpp:(.text+0xbe): undefined reference to `std::cout'\nmaingame.cpp:(.text+0xc3): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\n/tmp/cca53Qhv.o: In function `__static_initialization_and_destruction_0(int, int)':\nmaingame.cpp:(.text+0xf7): undefined reference to `std::ios_base::Init::Init()'\nmaingame.cpp:(.text+0x106): undefined reference to `std::ios_base::Init::~Init()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c++", "direct3d11"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470284705, "post_id": 38752710, "comment_id": 64889319, "body": "Do you have the debug device enabled? With Windows 10, you have to enable the <i>Graphics Tools</i> Windows optional feature to enable it."}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470398743, "post_id": 38752710, "comment_id": 64947683, "body": "Thanks for the reply. I can&#39;t find the path you speak of. Via VS15 I enabled debugging through Debug -&gt; Graphics -&gt; DirectX Control Panel and set my program to use graphical debugging. No messages are muted and it&#39;s set to display all messages!    I also looked for the path you mentioned in windows Settings, but I have no &quot;Optional Features&quot; tab."}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470398920, "post_id": 38752710, "comment_id": 64947787, "body": "Be aware this program is using Win32 and WINAPI. I know it&#39;s kinda outdated."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470414180, "post_id": 38752710, "comment_id": 64957903, "body": "PC Settings -&gt; System -&gt; Apps &amp; features -&gt; Manage optional features -&gt; Add a feature"}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470441097, "post_id": 38752710, "comment_id": 64968499, "body": "Thank you for being parental with me. On my system, there&#39;s no choice called <i>Graphics Tools</i> in <i>Add A Feature</i>.  Might this mean that it&#39;s already enabled?"}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470441347, "post_id": 38752710, "comment_id": 64968554, "body": "Actually, the <i>Graphics Tools</i> is listed in the <i>Manage Optional Features</i> tab."}], "owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470254823, "creation_date": 1470254823, "question_id": 38752710, "link": "https://stackoverflow.com/questions/38752710/render-target-not-found-using-dedicated-graphics-card", "title": "Render target not found using dedicated Graphics card", "body": "<p>I'm building a simulator using Direct3D 11. Recently I upgraded to VS2015 from VS2013. I also switched to Win10 and I've had a lot of problem porting the project.</p>\n\n<p>This last one I can't seem to solve:</p>\n\n<p><strong>When I run the program with the dedicated graphics card, it seems like the shaders can't find the target draw-surface (Although I get no Error Messages)</strong></p>\n\n<p>The Window to be drawn to is simply just white. It doesn't even Clear in the right color. I've also tried enabling \"Force WARP\".</p>\n\n<p>My dedicated card is a GeForce GTX 770M. \nMy integrated graphics accelerator is on the Intel i7-4800MQ </p>\n\n<p>I could technically keep working using the integrated HAL. It just bugs me. Get it?</p>\n\n<p>My Pixel Shader looks like this, if it's of interest. It simply passes the Color transformed to pixel-space:</p>\n\n<pre><code>struct PS_OUTPUT\n{\n    //float4 position;\n    float4 color;\n};\n\nPS_OUTPUT PS_Main(float4 color : COLOR, float4 position : SV_Position0 ) : SV_TARGET\n{\n    PS_OUTPUT output;\n\n\n    output.color = color ;\n\n\n\n    return output;\n</code></pre>\n\n<p>}</p>\n\n<p>The DGC uses driver version 368.81. I can't seem to find anyone who has similar problems with this.</p>\n\n<p>Any Ideas?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c++", "c++builder-6"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470255145, "post_id": 38752659, "comment_id": 64879494, "body": "<i>&quot;How can I change it?&quot;</i> Get a more modern compiler, like VS2015."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470256079, "post_id": 38752659, "comment_id": 64879932, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That might not be necessary, there is a way to do it relating to manifest files. (Even programs compiled with MSVC 2010 have the old look)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470256155, "post_id": 38752659, "comment_id": 64879979, "body": "See if any of the steps in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773175(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a> can apply to you. (You might need to create a .rc file)"}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470256481, "post_id": 38752659, "comment_id": 64880125, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 i wont, i hate it, literally. Maybe C++ Builder is not so modern, it is very old actually, but i like it and it&#39;s very easy for me. I don&#39;t fell good in VS or QT. immibis i will try, if someone have other things, come on."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470256864, "post_id": 38752659, "comment_id": 64880321, "body": "@Persantarus <i>&quot; i hate it, literally&quot;</i> Seems you fell down into some <i>&quot;blinders syndrome&quot;</i>. I&#39;d never let my powers and capabilities be restricted by any particular 3rd party IDE, framework or such. You may prefer walking in  the <i>dark tunnels below</i>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470257765, "post_id": 38752659, "comment_id": 64880774, "body": "Easier is relative. Quite often I still fall back on a text editor from the early nineties because it easily does a few things everything else makes me jump through hoops to do. And as you may suspect, it absolutely sucks at a bunch of other things. Learn lots of tools and use the best tool for the job."}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470264127, "post_id": 38752659, "comment_id": 64883354, "body": "Immibis have you something easier than that? Or can u tell me what to do exactly? Actually i don&#39;t understand it."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470278880, "post_id": 38752659, "comment_id": 64887884, "body": "I myself still use C++Builder 6 on a daily basis at my day job (the PTBs would not agree to upgrades through the years).  Yes, it is old, but it still gets the job done."}, {"owner": {"reputation": 16565, "user_id": 3235496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8ea8f12cc0983b9b878120f7d052e42?s=128&d=identicon&r=PG", "display_name": "manlio", "link": "https://stackoverflow.com/users/3235496/manlio"}, "edited": false, "score": 0, "creation_date": 1470381658, "post_id": 38752659, "comment_id": 64937418, "body": "How can it be &quot;too broad&quot;? There&#39;s a good, clear, self-contained answer."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470310243, "post_id": 38757707, "comment_id": 64903513, "body": "Okay, thank you guys, it works! But i have one more question, it works when im in Builder and when im running .exe in project folder, but when i take .exe to another location(even with rc and manifest) it doesn&#39;t work. What should i do now?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470322930, "post_id": 38757707, "comment_id": 64913292, "body": "@Persantarus it works fine (I&#39;ve been doing it for years). Do you have your manifest compiled into the resources of your .exe file, with the correct resource ID and resource type? It sounds like you do not, or haven&#39;t done it correctly."}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470329003, "post_id": 38757707, "comment_id": 64917571, "body": "A guy told me that i should make .res file from this .rc file, but when i&#39;m doing it by brcc32.exe it doesn&#39;t make .res file. I don&#39;t know what i&#39;m doing wrong."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470329382, "post_id": 38757707, "comment_id": 64917793, "body": "@Persantarus: netiher do we, as you have not provided <i>any</i> details about what you are actually doing. But in general, yes you need a <code>.res</code> file, and you need to link it into your <code>.exe</code> resources. If you add an <code>.rc</code> file to your project, it will automatically be compiled into a <code>.res</code> file and linked into the <code>.exe</code>. Otherwise, yes you can use <code>brcc32</code> manually to create a <code>.res</code>, and then add that to your project instead of <code>.rc</code>. If you are not getting a <code>.res</code> file from brcc32, you are not calling it correctly."}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470329603, "post_id": 38757707, "comment_id": 64917946, "body": "How should i call that in command line?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470330710, "post_id": 38757707, "comment_id": 64918550, "body": "Did you read its documentation at all? Call it with the <code>&#47;?</code> switch, or read the <a href=\"http://docwiki.embarcadero.com/RADStudio/en/BRCC32.EXE,_the_Resource_Compiler\" rel=\"nofollow noreferrer\">online documentation</a>."}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470339204, "post_id": 38757707, "comment_id": 64923292, "body": "Ye, i was in this documentation, i&#39;m doing exactly what i should do."}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470339871, "post_id": 38757707, "comment_id": 64923666, "body": "Ye, i was in this documentation, i&#39;m doing exactly what i should do. //Edit: Ye, it works now! I had something bad in my rc file, now compiler works. I have only one more problem - can i do something with that rc and manifest files in .exe folder? Because .exe file works only with them, if there aren&#39;t manifest and rc, button look becomes old again. In addition i can&#39;t actually change name of this .exe file, because it doesn&#39;t  work either. Can I do something to compile all these files in Builder together, to have only .exe? I added .res"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470341224, "post_id": 38757707, "comment_id": 64924428, "body": "Using the steps I have given you, the manifest will be compiled into the <code>.exe</code> file, regardless of its name. Use a 3rd party resource viewer tool to verify that. If things are not working for you, you are not following the steps correctly. Either 1) the <code>.rc</code> is not defining the manifest resource correctly, 2) you are not compiling the <code>.rc</code> file into a <code>.res</code> file correctly, 2) you are not linking the <code>.res</code> file into the <code>.exe</code> file correctly, or 4) you are running the <code>.exe</code> file with the &quot;Disable visual themes&quot; option enabled in the &quot;Compatibility&quot; section of its right-click &quot;Properties&quot;."}, {"owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "edited": false, "score": 0, "creation_date": 1470344282, "post_id": 38757707, "comment_id": 64925963, "body": "Oh my god.... we did it guys! :D Thank u so much for your help, i was adding it like File -&gt; Open, i should do Project -&gt; Add to Project... Thanks again! :)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1470330912, "last_edit_date": 1470330912, "creation_date": 1470278715, "answer_id": 38757707, "question_id": 38752659, "link": "https://stackoverflow.com/questions/38752659/c-builder-6-how-to-change-very-old-looking-widgets-to-windows-look/38757707#38757707", "title": "C++ Builder 6 - how to change very old looking Widgets to Windows look?", "body": "<p>C++Builder 6 predates XP and the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773187.aspx\" rel=\"nofollow\">Visual Styles</a> feature, so its VCL has no built-in support for theming/styling at all (there are 3rd party components for custom skinning, though).  That is why your UI looks \"old\".</p>\n\n<p>Many of the native VCL components are based on standard Win32 controls that support Visual Styles if a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773175.aspx\" rel=\"nofollow\">ComCtrl v6 manifest is added to your application</a>.  However, several VCL components exhibit run-time problems when styled, since they were not designed to handle styling correctly.</p>\n\n<p>Fortunately, you can install <a href=\"http://www.soft-gems.net/index.php/controls/windows-xp-theme-manager\" rel=\"nofollow\">SoftGems XP Theme Manager</a> to address these issues (SoftGems' code was integrated directly into the VCL in a later C++Builder version).</p>\n\n<p>SoftGems' <code>TThemeManager</code> component dynamically hooks into various VCL components at runtime (and also allows user-defined hooks for custom controls) to fix styling-related bugs in them.  Just drop it on your MainForm, and optionally set a few properties to control what type of UI controls it hooks.</p>\n\n<p>SoftGems' <code>TXPManifest</code> component has an embedded ComCtrl v6 manifest resource to enable Visual Styles.  Just drop it on your MainForm, there is nothing to configure.</p>\n\n<p>However, enabling Visual Styles is <em>all</em> that <code>TXPManifest</code> does.  An app can only have one manifest, and if you need to customize the manifest (such as for handling UAC, specifying Windows compatibility flags, etc - things which most modern apps pretty much need to do nowadays), don't use <code>TXPManifest</code> at all.  You will have to create your own custom manifest, compiled into a <code>.res</code> file that is linked into the resources of your application's <code>.exe</code> file.  The easiest way to do that is to define the manifest content in an external <code>.manifest</code> file and then compile it into a <code>.res</code> file using an <code>.rc</code> file, eg:</p>\n\n<p>myapp.exe.manifest</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\"&gt;\n  &lt;assemblyIdentity\n    version=\"1.0.0.0\"\n    processorArchitecture=\"*\"\n    name=\"CompanyName.ProductName.YourApplication\"\n    type=\"win32\"\n  /&gt;\n  &lt;description&gt;Your application description here.&lt;/description&gt;\n  &lt;dependency&gt;\n    &lt;dependentAssembly&gt;\n      &lt;assemblyIdentity\n        type=\"win32\"\n        name=\"Microsoft.Windows.Common-Controls\"\n        version=\"6.0.0.0\"\n        processorArchitecture=\"*\"\n        publicKeyToken=\"6595b64144ccf1df\"\n        language=\"*\"\n      /&gt;\n    &lt;/dependentAssembly&gt;\n  &lt;/dependency&gt;\n\n  &lt;!-- other manifest elements as needed --&gt;\n\n&lt;/assembly&gt;\n</code></pre>\n\n<p>mymanifest.rc:</p>\n\n<pre><code>#define APP_MANIFEST 1\n#define RT_MANIFEST 24\n\nAPP_MANIFEST RT_MANIFEST \"myapp.exe.manifest\"\n</code></pre>\n\n<p>If you add the <code>.rc</code> file to your project, the <code>.manifest</code> file will be compiled and linked into the <code>.exe</code> automatically.  Otherwise, you will have to manually compile the <code>.rc</code> file into a <code>.res</code> file using C++Builder's command-line <a href=\"http://docwiki.embarcadero.com/RADStudio/en/BRCC32.EXE,_the_Resource_Compiler\" rel=\"nofollow\">brcc32 tool</a>, and then you can add the resulting <code>.res</code> file to your project:</p>\n\n<pre><code>brcc32 mymanifest.rc\n</code></pre>\n\n<p>Otherwise, forget all of this and just use 3rd-party component suites that provide advanced UIs and functionality, such as <a href=\"https://www.tmssoftware.com/site/\" rel=\"nofollow\">TMS</a>, <a href=\"https://www.devexpress.com/products/vcl/\" rel=\"nofollow\">DevExpress</a>, <a href=\"http://www.raize.com/DevTools/RzComps/Default.asp\" rel=\"nofollow\">Raize</a>, etc.</p>\n"}], "owner": {"reputation": 39, "user_id": 6674093, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f269cb31796c90bf51f87cee98047ea?s=128&d=identicon&r=PG&f=1", "display_name": "Persantarus", "link": "https://stackoverflow.com/users/6674093/persantarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "closed_date": 1470297741, "answer_count": 1, "score": -1, "last_activity_date": 1470381433, "creation_date": 1470254660, "last_edit_date": 1470381433, "question_id": 38752659, "link": "https://stackoverflow.com/questions/38752659/c-builder-6-how-to-change-very-old-looking-widgets-to-windows-look", "closed_reason": "Needs more focus", "title": "C++ Builder 6 - how to change very old looking Widgets to Windows look?", "body": "<p>I'm using C++ Builder 6 and f.e. Button or ProgressBar has very old look, like from Windows 95/98. :P</p>\n\n<p>How can I change it? I actually want to make them like in Windows.</p>\n\n<p>I mean make program in Builder and this program will show button in Windows 7 like it(button) looks in Windows 7, show ProgressBar in W10/W8 like it looks in W10/W8.\nI want to make it depend on the OS. </p>\n\n<p>I'm a beginner in C++ so please... make it really simple unless it is too hard.</p>\n"}, {"tags": ["c++", "c++11", "runtime-error"], "comments": [{"owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 1, "creation_date": 1470254393, "post_id": 38752518, "comment_id": 64879091, "body": "Please indent your code."}, {"owner": {"reputation": 37, "user_id": 6463745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7d4fafe59d6f308b222e70ff927440?s=128&d=identicon&r=PG&f=1", "display_name": "saksham jindal", "link": "https://stackoverflow.com/users/6463745/saksham-jindal"}, "reply_to_user": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1470254966, "post_id": 38752518, "comment_id": 64879400, "body": "Hi @VaibhavBajaj , done !"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1470255016, "post_id": 38752518, "comment_id": 64879428, "body": "Do you get error text?  If so, please post that."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 1, "creation_date": 1470255108, "post_id": 38752518, "comment_id": 64879482, "body": "@donjuedo Why don&#39;t you hard-code the input into your post that you claim works?  We don&#39;t care about the number of test cases.  In other words post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, not what you give to SPOJ verbatim."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470255252, "post_id": 38752518, "comment_id": 64879543, "body": "@sakshamjindal Asking about online code judges is futile here, since no one knows all of their undisclosed test cases, or other inner workings."}, {"owner": {"reputation": 37, "user_id": 6463745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7d4fafe59d6f308b222e70ff927440?s=128&d=identicon&r=PG&f=1", "display_name": "saksham jindal", "link": "https://stackoverflow.com/users/6463745/saksham-jindal"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1470255349, "post_id": 38752518, "comment_id": 64879598, "body": "@donjuedo There seems to be no error encountered when it is made to run on my machine (Linux gcc 4.8) . But if the same code is submitted to an online judge (here SPOJ and codechef) , error pops up <code>Runtime-Error</code> . I have tested it on my machine for a lot of cases."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470255429, "post_id": 38752518, "comment_id": 64879631, "body": "@sakshamjindal - Again, please post the input you say &quot;works&quot;.  An out-of-bounds access (which could be likely in your code) causes <i>undefined behavior</i>.  For that, you could have used <code>at()</code> instead of <code>[ ]</code> in your vector accesses.  This would reveal if your test cases you say works actually do work."}, {"owner": {"reputation": 37, "user_id": 6463745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7d4fafe59d6f308b222e70ff927440?s=128&d=identicon&r=PG&f=1", "display_name": "saksham jindal", "link": "https://stackoverflow.com/users/6463745/saksham-jindal"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470255528, "post_id": 38752518, "comment_id": 64879679, "body": "Hi @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 ! My bad ! Asking it on Stackoverflow is the last thing I did before exhausting all sources of information.  In future , I will keep that in mind"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470255799, "post_id": 38752518, "comment_id": 64879809, "body": "@sakshamjindal Well, asking at Stack Overflow never was meant as your <i>least resort personal help-desk</i>, Sorry."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470256769, "post_id": 38752518, "comment_id": 64880270, "body": "@sakshamjindal -- You say you tried the test cases and saw no error.  That is not what happens <a href=\"http://ideone.com/j3D2dz\" rel=\"nofollow noreferrer\">here</a>.  A runtime error occurs on the very first test case.  That&#39;s why I asked you for the test case, but I took one for the team and plugged it in, and lo and behold, it doesn&#39;t work.  Using <code>at()</code> reveals the mistake <a href=\"http://ideone.com/kJrFqj\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 37, "user_id": 6463745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7d4fafe59d6f308b222e70ff927440?s=128&d=identicon&r=PG&f=1", "display_name": "saksham jindal", "link": "https://stackoverflow.com/users/6463745/saksham-jindal"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470287209, "post_id": 38752518, "comment_id": 64890060, "body": "@PaulMcKenzie Hey , initially I thought that something wrong is with the way I am using C++ (new to vectors and STL ; you only advised me to adopt vectors instead of array ; It was the last time I asked a question) . But thought over and found that I missed a lot of cases . For example : I finput is 9 or the central digit is 9 . These are few of the left out cases . I really don&#39;t think that it has something to do with  <code>at()</code> ."}], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 5727123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/704dc3afb71e378fa6362d18e64ab505?s=128&d=identicon&r=PG&f=1", "display_name": "Hayk Petrosyan", "link": "https://stackoverflow.com/users/5727123/hayk-petrosyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256414, "creation_date": 1470256414, "answer_id": 38753124, "question_id": 38752518, "link": "https://stackoverflow.com/questions/38752518/runtime-error-encountered-while-running-on-online-judges/38753124#38753124", "title": "Runtime Error encountered while running on Online Judges", "body": "<p>I found one of your problems for segmentation fault , when you give for example \"aaaaa\" input to s you will get segmentation fault on this part of code</p>\n\n<pre><code>if(n%2!=0)\n            {   i = (n-1)/2;\n\n                while(A[i-1]==A[n-i])\n                    i--;\n\n                i--;\n            }\n</code></pre>\n\n<p>because you didn't check i &lt; 0 or not </p>\n"}], "owner": {"reputation": 37, "user_id": 6463745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7d4fafe59d6f308b222e70ff927440?s=128&d=identicon&r=PG&f=1", "display_name": "saksham jindal", "link": "https://stackoverflow.com/users/6463745/saksham-jindal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1470256414, "creation_date": 1470254145, "last_edit_date": 1470254929, "question_id": 38752518, "link": "https://stackoverflow.com/questions/38752518/runtime-error-encountered-while-running-on-online-judges", "title": "Runtime Error encountered while running on Online Judges", "body": "<p>I have been solving <a href=\"http://www.spoj.com/problems/PALIN/\" rel=\"nofollow\">this</a> problem on SPOJ . One of the most frequent problems encountered while using online judges is <code>Runtime Error</code>. You never know which case leads to a <code>Segmentation fault</code>. Please help me figure out why does the code below correspond to a <code>Runtime Error</code> or <code>Segmentation Fault</code> even though I have ensured that every possible case runs properly on my linux gcc.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n\nusing namespace std;\n\nint main ()\n{\n    int t,i;\n    cin &gt;&gt; t;\n    string s;\n    vector&lt;int&gt; A;\n\n\n    while(t--)\n    {   \n\n        cin &gt;&gt; s;\n        int n=s.size();\n        int temp;\n\n        if (n!=1) \n        {\n            for(i=0;i&lt;s.size();i++)\n            {\n                A.push_back(s.at(i)-'0');\n            }\n\n            if(n%2!=0)\n                {   i = (n-1)/2;\n\n                    while(A[i-1]==A[n-i])\n                        i--;\n\n                    i--;\n                }\n\n            else\n                {   i=n/2-1;\n\n                    while(A[i]==A[n-1-i])\n                        i-- ;       \n                }\n\n\n            if (A[i]&lt;A[n-i-1])\n                {   \n                    if ((n%2)!=0)\n                        {\n                            A[n/2] = A[n/2] + 1;\n                            A[n-i-1] = A[i];\n                        }\n            else\n                {\n                    A[n/2-1] = A[n/2-1]+1;\n                    A[n/2] = A[n/2-1];\n                    A[n-i-1] = A[i]; \n                }\n            }\n\n            else\n                A[n-i-1] = A[i];\n\n            while(i--)\n                A[n-i-1] = A[i];\n\n\n\n            while(!(A.empty()))\n            {\n                printf(\"%d\",A.back());\n                A.pop_back();\n            }\n        }\n\n        else\n            cout &lt;&lt; s;\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "c++03"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1470253727, "post_id": 38752384, "comment_id": 64878758, "body": "I see there&#39;s an overload of <code>list_of</code> with 0 parameters. Does that work?"}, {"owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1470254147, "post_id": 38752384, "comment_id": 64878967, "body": "@chris I can but only for non <code>const</code> initialization. I can use <code>boost::assign_detail::generic_list</code> though (check my edit)"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1470254519, "post_id": 38752384, "comment_id": 64879159, "body": "Looking at <a href=\"https://github.com/boostorg/assign/blob/develop/include/boost/assign/list_of.hpp#L592\" rel=\"nofollow noreferrer\">this source</a>, I don&#39;t see how it wouldn&#39;t work for initializing a constant vector. However, it does look like it would prepend an extra 0."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1470255522, "post_id": 38752384, "comment_id": 64879676, "body": "may I ask why you&#39;re using boost.assign instead of using the iterator pair constructor with boost.iterator&#39;s counting and transform iterators?"}, {"owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1470255733, "post_id": 38752384, "comment_id": 64879780, "body": "@jaggedSpire can you show how to do this? I am not aware of this"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1470256302, "post_id": 38752384, "comment_id": 64880039, "body": "@Patryk <a href=\"http://coliru.stacked-crooked.com/a/cf9e09765442beda\" rel=\"nofollow noreferrer\">sure</a>"}], "owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470254232, "creation_date": 1470253510, "last_edit_date": 1470254232, "question_id": 38752384, "link": "https://stackoverflow.com/questions/38752384/how-to-initialize-a-const-stdvector-with-boostassignrepeat-with-repeating", "title": "How to initialize a const std::vector with boost::assign::repeat with repeating elements?", "body": "<p>I have the following snippet of code:</p>\n\n<pre><code>#include &lt;boost/assign/list_of.hpp&gt;\n#include &lt;boost/assert.hpp&gt;\n\nint main()\n{\n  const std::vector&lt;int&gt; v = boost::assign::list_of(1).repeat(999, 1).repeat(1000, 2);\n  BOOST_ASSERT(v.size() == 2000);\n}\n</code></pre>\n\n<p>Which I would like to convert to something more like </p>\n\n<pre><code>#include &lt;boost/assign/list_of.hpp&gt;\n#include &lt;boost/assert.hpp&gt;\n\nint main()\n{\n  const std::vector&lt;int&gt; v = boost::assign::repeat(1000, 1).repeat(1000, 2); // illegal\n  // or\n  // const std::vector&lt;int&gt; v(1000,1).repeat(1000,2); // illegal\n  BOOST_ASSERT(v.size() == 2000);\n}\n</code></pre>\n\n<p>Is there some kind of adapter that I can use so that I do not need to use <code>boost::assign::list_of()</code> with one element and then <code>boost::assign::repeat</code>?</p>\n\n<p>I have found a way to do this with <code>boost::assign::push_back()</code> but this way I cannot declare vector as <code>const</code>:</p>\n\n<pre><code>#include &lt;boost/assign/list_of.hpp&gt;\n#include &lt;boost/assert.hpp&gt;\n\nint main()\n{\n  std::vector&lt;int&gt; v;\n  boost::assign::push_back(v).repeat(1000, 1).repeat(1000, 2);\n  BOOST_ASSERT(v.size() == 2000);\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>So as suggested I have tried:</p>\n\n<pre><code>std::vector&lt;int&gt; v = boost::assign::list_of&lt;int&gt;().repeat(1000, 3).repeat(1000, 2);\n</code></pre>\n\n<p>but this works only for non <code>const</code> initialization like above. I can use something like this though:</p>\n\n<pre><code>const std::vector&lt;int&gt; v = boost::assign_detail::generic_list&lt;int&gt;().repeat(1000, 1).repeat(1000, 2);\n</code></pre>\n\n<p>Is that recommended?</p>\n"}, {"tags": ["c++", "compiler-errors", "linker-errors"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1470254349, "post_id": 38752320, "comment_id": 64879067, "body": "Can you post the linker command that <i>VStudio</i> generates? That can be found by going to your project options -&gt; <i>Linker</i> -&gt; <i>Command Line</i>."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1470254381, "post_id": 38752320, "comment_id": 64879082, "body": "Turn on VERBOSE mode for the linker to learn more about lib.obj"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1470254442, "post_id": 38752320, "comment_id": 64879124, "body": "Open the property pages and go to C/C++ | Output Files | Object File Name. Any unusual values?"}, {"owner": {"reputation": 41, "user_id": 6673317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1649cf474b0a901dae4f105a44e883b5?s=128&d=identicon&r=PG&f=1", "display_name": "A. Syriac", "link": "https://stackoverflow.com/users/6673317/a-syriac"}, "edited": false, "score": 0, "creation_date": 1470332859, "post_id": 38752320, "comment_id": 64919750, "body": "In the Command Line, I see that the following was added, that is not in the VS 2012 version:  &quot;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\lib&quot; &quot;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\atlmfc\\lib&quot; &quot;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.1A\\lib&quot;  What would cause those to be added, and do I need them? Obviously the VC\\lib one is causing the issues, but why were they added to begin with?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7473667, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymn5P.jpg?s=128&g=1", "display_name": "Andr&#233; de Vries", "link": "https://stackoverflow.com/users/7473667/andr%c3%a9-de-vries"}, "is_accepted": false, "score": 2, "last_activity_date": 1485528464, "creation_date": 1485528464, "answer_id": 41896650, "question_id": 38752320, "link": "https://stackoverflow.com/questions/38752320/lnk1104-cannot-open-file-lib-obj/41896650#41896650", "title": "LNK1104 cannot open file &#39;...lib.obj&#39;", "body": "<p>The problem might be that you added something like \"$(VC_LibraryPath_x86)xxxx.lib\" to the Linker input additional dependencies. This goes wrong, resulting in the error. It should just be \"xxxx.lib\".</p>\n"}, {"tags": [], "owner": {"reputation": 3711, "user_id": 2079885, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dZ51t.jpg?s=128&g=1", "display_name": "Muhammad Rehan Qadri", "link": "https://stackoverflow.com/users/2079885/muhammad-rehan-qadri"}, "is_accepted": false, "score": 1, "last_activity_date": 1489510035, "creation_date": 1489510035, "answer_id": 42791870, "question_id": 38752320, "link": "https://stackoverflow.com/questions/38752320/lnk1104-cannot-open-file-lib-obj/42791870#42791870", "title": "LNK1104 cannot open file &#39;...lib.obj&#39;", "body": "<p>Check your path. If that's correct then make sure you've written xxx.lib rather than xxx</p>\n"}], "owner": {"reputation": 41, "user_id": 6673317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1649cf474b0a901dae4f105a44e883b5?s=128&d=identicon&r=PG&f=1", "display_name": "A. Syriac", "link": "https://stackoverflow.com/users/6673317/a-syriac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6155, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1489510035, "creation_date": 1470253288, "question_id": 38752320, "link": "https://stackoverflow.com/questions/38752320/lnk1104-cannot-open-file-lib-obj", "title": "LNK1104 cannot open file &#39;...lib.obj&#39;", "body": "<p>I'm trying to update Visual Studio 2012 C++ projects so that I can compile them in Visual Studio 2015 (Update 3). I've gotten it narrowed down to just one error in one project that I'm completely stumped on:</p>\n\n<p>LNK1104 cannot open file 'C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\lib.obj'</p>\n\n<p>I've installed all the C++ language options (they don't get installed by default) and even uninstalled and reinstalled Visual Studio.</p>\n\n<p>That file doesn't exist in that directory, and it also doesn't exist in the Visual Studio 2012 directory either.</p>\n\n<p>Anyone have any ideas on how to solve this?</p>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1470253369, "post_id": 38752256, "comment_id": 64878602, "body": "what&#39;s a &#39;macro-backtrace&#39;? The preprocessor output? Also you know you can login to AppVeyor instances using Remote Desktop right?"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1470258450, "post_id": 38752256, "comment_id": 64881086, "body": "Check the non-MFC headers being included. One of them probably <code>#define</code>&#39;s a macro called <code>IsNull</code> which breaks MFC&#39;s declaration of <code>CD2DSizeF::IsNull()</code>."}, {"owner": {"reputation": 17430, "user_id": 309483, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d797538504a367f277d19bd8369e9a19?s=128&d=identicon&r=PG", "display_name": "Janus Troelsen", "link": "https://stackoverflow.com/users/309483/janus-troelsen"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1470258741, "post_id": 38752256, "comment_id": 64881230, "body": "@stijn: By macro-backtrace, I mean a listing showing where macros were called from, like <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=45333#c0\" rel=\"nofollow noreferrer\">here</a>. I will now check RDP and non-MFC headers."}, {"owner": {"reputation": 17430, "user_id": 309483, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d797538504a367f277d19bd8369e9a19?s=128&d=identicon&r=PG", "display_name": "Janus Troelsen", "link": "https://stackoverflow.com/users/309483/janus-troelsen"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 1, "creation_date": 1470261910, "post_id": 38752256, "comment_id": 64882654, "body": "@dxiv: You were right, post an answer."}], "answers": [{"tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 5, "last_activity_date": 1470262383, "creation_date": 1470262383, "answer_id": 38754520, "question_id": 38752256, "link": "https://stackoverflow.com/questions/38752256/syntax-error-in-mfc-header/38754520#38754520", "title": "Syntax error in MFC header", "body": "<pre><code>atlmfc\\include\\afxrendertarget.h(142): warning C4003: not enough actual parameters for macro 'IsNull' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\n</code></pre>\n\n<p>The first error provides a couple of clues:</p>\n\n<ul>\n<li><p>line #<code>142</code> in <code>afxrendertarget.h</code> is the inline definition of member function <code>BOOL IsNull() const</code> of <code>CD2DSizeF</code>;</p></li>\n<li><p><code>C4003</code> refers to an illegal expansion of macro <code>IsNull</code>.</p></li>\n</ul>\n\n<p>This indicates that some other non-MFC header file <code>#define</code>'s a macro <code>IsNull</code>, and when that header is included before (the MFC header file which includes) <code>afxrendertarget.h</code> the <code>IsNull</code> macro breaks the <code>IsNull</code> member function declaration.</p>\n"}], "owner": {"reputation": 17430, "user_id": 309483, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d797538504a367f277d19bd8369e9a19?s=128&d=identicon&r=PG", "display_name": "Janus Troelsen", "link": "https://stackoverflow.com/users/309483/janus-troelsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 38754520, "answer_count": 1, "score": 1, "last_activity_date": 1470262383, "creation_date": 1470253058, "question_id": 38752256, "link": "https://stackoverflow.com/questions/38752256/syntax-error-in-mfc-header", "title": "Syntax error in MFC header", "body": "<p>I am trying to compile pgpfone, and I have a problem with the build system which I migrated from VS6 to VS2008 and then to VS2015.</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\CL.exe /c /I.\\ /I..\\common /I..\\bignum /I..\\..\\..\\libs\\pfl\\win32 /I..\\..\\..\\libs\\pfl\\common /I..\\..\\..\\libs\\pfl\\common\\util /ZI /nologo /W2 /WX- /Od /Oy- /D WIN32 /D _DEBUG /D _WINDOWS /D PGP_WIN32=1 /D PGPXFER=1 /D PGP_INTEL=1 /D BNINCLUDE=bni80386c.h /D _VC80_UPGRADE=0x0600 /Gm /EHsc /MTd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Zc:inline /Fo\".\\Debug/\" /Fd\".\\Debug/vc140.pdb\" /Gd /TP /analyze- /errorReport:queue ..\\common\\ADPCM.cpp ..\\common\\blowfish.cpp ..\\common\\bytefifo.cpp ..\\common\\cast5.cpp ..\\common\\CControlThread.cpp ..\\common\\CCounterEncryptor.cpp ..\\common\\CEncryptionStream.cpp ..\\common\\CMessageQueue.cpp ..\\common\\CPFPackets.cpp ..\\common\\CPFTransport.cpp ..\\common\\CPipe.cpp ..\\common\\CPriorityQueue.cpp ..\\common\\crc.cpp ..\\common\\CSoundInput.cpp ..\\common\\CSoundOutput.cpp ..\\common\\CXferThread.cpp ..\\common\\des3.cpp ..\\common\\dh.cpp ..\\common\\DHPrimes.cpp ..\\common\\fastpool.cpp ..\\common\\HashWordList.cpp ..\\common\\PGPFoneUtils.cpp ..\\common\\samplerate.cpp ..\\common\\SHA.cpp CAuthWindow.cpp CEncryptionDialog.cpp CFileTransferDialog.cpp CLevelMeter.cpp CModemDialog.cpp CPFTInternet.cpp CPFTSerial.cpp CPFWindow.cpp CPGPFone.cpp CPGPFoneFrame.cpp CPGPFStatusBar.cpp CPhoneDialog.cpp CSoundLight.cpp CStatusPane.cpp CTriThreshold.cpp CWinFilePipe.cpp CXferWindow.cpp LMutexSemaphore.cpp LSemaphore.cpp LThread.cpp PGPFWinUtils.cpp\n  PGPFWinUtils.cpp\n  _WIN32_WINNT not defined. Defaulting to _WIN32_WINNT_MAXVER (see WinSDKVer.h)\natlmfc\\include\\afxrendertarget.h(142): warning C4003: not enough actual parameters for macro 'IsNull' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2059: syntax error: '(' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2143: syntax error: missing ')' before '==' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2143: syntax error: missing ',' before '==' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2059: syntax error: '==' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2059: syntax error: ')' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2059: syntax error: '{' [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\natlmfc\\include\\afxrendertarget.h(142): error C2334: unexpected token(s) preceding '{'; skipping apparent function body [C:\\projects\\pgpfone\\src\\win32\\PGPfone.vcxproj]\n</code></pre>\n\n<p>Here is the full log:\n<a href=\"https://ci.appveyor.com/project/ysangkok/pgpfone\" rel=\"nofollow\">https://ci.appveyor.com/project/ysangkok/pgpfone</a></p>\n\n<p>How can I find out what is causing the error? I assume that the code of PGPFWinUtils.cpp is including a header that call a macro incorrectly, causing the error, but I can't figure out where that would be.</p>\n\n<p>Is it possible with Visual C++ to get a macro-backtrace? I remember Clang or GCC has this feature.</p>\n\n<p>Here is the full source: <a href=\"https://github.com/ysangkok/pgpfone/blob/master/src/win32/PGPFWinUtils.cpp\" rel=\"nofollow\">https://github.com/ysangkok/pgpfone/blob/master/src/win32/PGPFWinUtils.cpp</a></p>\n\n<p>I am compiling on AppVeyor, and I do not have the sources of afxrendertarget.h locally. How can I download the Windows SDK for header inspection on Ubuntu?</p>\n"}, {"tags": ["c++", "loops", "return"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1470253064, "post_id": 38752230, "comment_id": 64878420, "body": "<code>} while (0);</code> should probably be <code>} while (1);</code>"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1470253134, "post_id": 38752230, "comment_id": 64878455, "body": "@DimChtz no, it should probably be <code>while (variable)</code> where <code>variable</code> was set with the return value of the function."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1470253137, "post_id": 38752230, "comment_id": 64878459, "body": "You&#39;re meant to use the editor you prefer and then paste in your code. If they tried to set up keybinds everyone liked, no one would like it ;)"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1470253141, "post_id": 38752230, "comment_id": 64878462, "body": "You&#39;re <i>not</i> checking the return of <code>cMode</code> - you&#39;re just testing <code>0</code>.  And in C/C++, <code>0</code> means <i>false</i> (non-zero means true).  Which is a good reason these are bad values to choose for signaling ..."}, {"owner": {"reputation": 705, "user_id": 5798365, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/471e3db0538e41ddecaccb0e1e73391d?s=128&d=identicon&r=PG&f=1", "display_name": "alekscooper", "link": "https://stackoverflow.com/users/5798365/alekscooper"}, "edited": false, "score": 0, "creation_date": 1470253239, "post_id": 38752230, "comment_id": 64878524, "body": "&gt;&gt; why cant I put endl at the end of the &quot;&quot; on a cout line? cout &lt;&lt; &quot;Hello world&quot; &lt;&lt; endl; works fine for me"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470253244, "post_id": 38752230, "comment_id": 64878527, "body": "@MarkRansom That&#39;s another story. Obviously OP wants an infinite loop or maybe he plans to use a <code>break</code> depending on what <code>cMode()</code> returns. I just pointed him why his loop stops."}, {"owner": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1470254794, "post_id": 38752230, "comment_id": 64879300, "body": "@davidbak, what would be a good value for signaling?  I though 0 was true, which is what the root of the issue is."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1470255410, "post_id": 38752230, "comment_id": 64879626, "body": "@wolf_adventures1909 - when you get to that point in your studies: that&#39;s what enums (enumerated values) are for.  As you&#39;ve learned here, <code>0</code> is false.  (You may be confused if you&#39;re from a Unix command line background where a <code>0</code> exit code is success - the opposite of here.)  And that isn&#39;t the root of the issue:  The root of the issue is you&#39;re <i>not</i> testing the return value of the function <code>cNode</code> in that <code>while</code> expression.  You&#39;re not even saving it to a variable so you could have it to test."}, {"owner": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1470256361, "post_id": 38752230, "comment_id": 64880060, "body": "@davidbak I fixed it by putting ret = cMode(); and then putting ret in the while loop, which works perfectly for now."}], "answers": [{"comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1470253530, "post_id": 38752278, "comment_id": 64878675, "body": "or just <code>while(cMode()){}</code>"}, {"owner": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "edited": false, "score": 0, "creation_date": 1470254706, "post_id": 38752278, "comment_id": 64879259, "body": "Ok, I thought that 0 was for the loop to continue, 1 was for it to end.  Sorry, noob mistake!"}, {"owner": {"reputation": 1545, "user_id": 1872234, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ebaa7e51aa78b438266d08deb48fcfc4?s=128&d=identicon&r=PG", "display_name": "Wajahat", "link": "https://stackoverflow.com/users/1872234/wajahat"}, "edited": false, "score": 0, "creation_date": 1470254745, "post_id": 38752278, "comment_id": 64879272, "body": "Yep, it is the other way around."}, {"owner": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "edited": false, "score": 0, "creation_date": 1470255268, "post_id": 38752278, "comment_id": 64879553, "body": "And just got it to work!  Thank you very much for your help, really had me stumped!"}], "tags": [], "owner": {"reputation": 1545, "user_id": 1872234, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ebaa7e51aa78b438266d08deb48fcfc4?s=128&d=identicon&r=PG", "display_name": "Wajahat", "link": "https://stackoverflow.com/users/1872234/wajahat"}, "is_accepted": true, "score": 1, "last_activity_date": 1470253765, "last_edit_date": 1495539859, "creation_date": 1470253128, "answer_id": 38752278, "question_id": 38752230, "link": "https://stackoverflow.com/questions/38752230/c-while-loop-does-not-function-as-expected-hoped/38752278#38752278", "title": "C++ while loop does not function as expected/hoped", "body": "<p>Problem is here:</p>\n\n<pre><code>int main() { // main function start\n    do {\n       cMode();\n    } while (0);\n}\n</code></pre>\n\n<p>It will execute the <code>do {}</code> part and then since condition in while is <code>0</code> it exits. <code>do-while</code> executes until the condition evaluates to a non-zero value.</p>\n\n<p>You probably want to create a variable and store the return value from <code>cMode()</code> and then have something like:</p>\n\n<pre><code>int main() { // main function start\n    int ret=0;   \n    do {\n       ret=cMode();\n    } while (ret);\n}\n</code></pre>\n\n<p>By the way, for this to work, you need to make sure that <code>cMode()</code> returns 0 only if user selects mode 6 (Exit). </p>\n\n<p><strong>NVM Edited your question, as that was a code formatting issue:</strong> <s>And another thing, maybe it is a question formatting problem but you have your <code>add()</code> function inside the <code>main()</code> and  <a href=\"https://stackoverflow.com/questions/4324763/c-can-we-have-functions-inside-functions\">I don't think that works in <code>c++</code></a>.</s></p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "edited": false, "score": 0, "creation_date": 1470255100, "post_id": 38752642, "comment_id": 64879480, "body": "Thanks, but the answer above already cleared things up for me."}, {"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "reply_to_user": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "edited": false, "score": 0, "creation_date": 1470256061, "post_id": 38752642, "comment_id": 64879926, "body": "@wolf_adventures1909 no problem, the idea is to show different ways to do the same."}], "tags": [], "owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1470254590, "creation_date": 1470254590, "answer_id": 38752642, "question_id": 38752230, "link": "https://stackoverflow.com/questions/38752230/c-while-loop-does-not-function-as-expected-hoped/38752642#38752642", "title": "C++ while loop does not function as expected/hoped", "body": "<p>You should do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n\nusing namespace std;\n\nint cMode(); // function prototypes\nint add();\nint sub();\nint mult();\nint divide();\nint sqr();\n\nint main() { // main function start\n    while (cMode() == 0); //This keep the loop\n    return 0;\n}\n\nint cMode() { // mode selection func\n    int mode;\n    cout&lt;&lt;\"Please select which mode you would like to avail from the following:\\n\";\n    cout&lt;&lt;\"1. Addition\\n2. Subtraction\\n3. Multiplication\\n4. Division\\n5. Sqaure root finder\\n6. Exit\\n\";\n    cin&gt;&gt;mode;\n    if ( mode == 1 ) {\n        return add(); //all functions should return 0 in success\n    }\n    if ( mode == 6) {\n        return 1; //returning 1 exits the loop\n    }\n}\n\nint add() { // addition function\n    int x, y; // variables\n\n    cout&lt;&lt;\"Please type the first number to add: \";\n    cin&gt;&gt;x;\n    cin.ignore();\n    cout&lt;&lt;\"Please type the second number to add: \";\n    cin&gt;&gt;y;\n    x = x + y;\n    cout&lt;&lt;\"The answer is \"&lt;&lt; x &lt;&lt;\".\";\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that while(0) is the same as saying while(false) so it evaluates to false and end...</p>\n"}], "owner": {"reputation": 27, "user_id": 3621113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uGQY2.jpg?s=128&g=1", "display_name": "wolf_adventures1909", "link": "https://stackoverflow.com/users/3621113/wolf-adventures1909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 38752278, "answer_count": 2, "score": 1, "last_activity_date": 1470256210, "creation_date": 1470252948, "last_edit_date": 1470256210, "question_id": 38752230, "link": "https://stackoverflow.com/questions/38752230/c-while-loop-does-not-function-as-expected-hoped", "title": "C++ while loop does not function as expected/hoped", "body": "<p>I've been programming a little calculator project in C++ just to train my skills (and hopefully give me a sense of achievement), but I'm encountering a problem with my while loop.</p>\n\n<p>Essentially the program prompts the user for the 'mode'/command to use (e.g multiplication, division etc), and then calling the appropriate command.  Once they've finished it should bring them back to the start (the while loop which is while true essentially) and start over again (return 0), with the option to quit (return 1).  However, it quits instantly after the first time, even though.  Am I doing something wrong?  Do I seriously misunderstand C++ programming?  Or what?\nHere is my code: (most functions cut out)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n\nusing namespace std;\n\nint cMode(); // function prototypes\nint add();\nint sub();\nint mult();\nint divide();\nint sqr();\n\nint main() { // main function start\n    do {\n          cMode();\n    } while (0);\n\n    return 0;\n}\n\nint cMode() { // mode selection func\n    int mode;\n    cout&lt;&lt;\"Please select which mode you would like to avail from the following:\\n\";\n    cout&lt;&lt;\"1. Addition\\n2. Subtraction\\n3. Multiplication\\n4. Division\\n5. Sqaure root finder\\n6. Exit\\n\";\n    cin&gt;&gt;mode;\n    if ( mode == 1 ) {\n        return add();\n    }\n}\n\nint add() { // addition function\n    int x, y; // variables\n\n    cout&lt;&lt;\"Please type the first number to add: \";\n    cin&gt;&gt;x;\n    cin.ignore();\n    cout&lt;&lt;\"Please type the second number to add: \";\n    cin&gt;&gt;y;\n    x = x + y;\n    cout&lt;&lt;\"The answer is \"&lt;&lt; x &lt;&lt;\".\";\n    return 0;\n}\n</code></pre>\n\n<p>Anyway, if someone could help would be much appreciated.  Also, two further little questions on the line with out&lt;&lt;\"....\"&lt;&lt; x &lt;&lt;;, why do I have to include the \"\" at the end for it to run?  I was getting an error with them, and why cant I put endl at the end of the \"\" on a cout line? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "directx", "directx-11", "hlsl", "compute-shader"], "answers": [{"comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 3, "creation_date": 1470380218, "post_id": 38773907, "comment_id": 64936583, "body": "First thing to do for any Direct3D problem: (a) make sure you are checking the <code>HRESULT</code> for every function that returns one using <code>SUCCEEDED</code> or <code>FAILED</code> macros or using something like <a href=\"https://github.com/Microsoft/DirectXTK/wiki/ThrowIfFailed\" rel=\"nofollow noreferrer\">ThrowIfFailed</a>, (b) make sure you enable the debug output and look for errors or corruption, and check any warnings."}, {"owner": {"reputation": 7992, "user_id": 2694444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lQntl.jpg?s=128&g=1", "display_name": "galop1n", "link": "https://stackoverflow.com/users/2694444/galop1n"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 2, "creation_date": 1470773884, "post_id": 38773907, "comment_id": 65083455, "body": "@ChuckWalbourn binding hazard is not a error result, only the debug layer can report it"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 7992, "user_id": 2694444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lQntl.jpg?s=128&g=1", "display_name": "galop1n", "link": "https://stackoverflow.com/users/2694444/galop1n"}, "edited": false, "score": 0, "creation_date": 1573931483, "post_id": 38773907, "comment_id": 104053419, "body": "@galop1n That doesn&#39;t change its utility for &quot;any Direct3D problem&quot;."}], "tags": [], "owner": {"reputation": 176, "user_id": 2023516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q9O8I.jpg?s=128&g=1", "display_name": "errollw", "link": "https://stackoverflow.com/users/2023516/errollw"}, "is_accepted": true, "score": 3, "last_activity_date": 1470331991, "creation_date": 1470331991, "answer_id": 38773907, "question_id": 38752215, "link": "https://stackoverflow.com/questions/38752215/directx-rendering-to-texture2darray-and-loading-from-it-in-compute-shader/38773907#38773907", "title": "DirectX: rendering to Texture2DArray, and Loading from it in compute shader", "body": "<p>Solved it. I created the D3D device with debugging enabled and noticed:</p>\n\n<pre><code>D3D11 WARNING: ID3D11DeviceContext::CSSetShaderResources:\nResource being set to CS shader resource slot 0 is still bound on output!\n</code></pre>\n\n<p>So the problem was that my Texture2DArray was still bound as a render target as I tried to set it as a resource in the compute shader.</p>\n\n<p>Easily fixed by unbinding the render targets like so:</p>\n\n<pre><code>deviceContext-&gt;OMSetRenderTargets(0, NULL, NULL);\n</code></pre>\n\n<p>before using <code>CSSetShaderResources()</code>.</p>\n\n<p>I hope this helps anyone that has a similar issue.</p>\n"}], "owner": {"reputation": 176, "user_id": 2023516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q9O8I.jpg?s=128&g=1", "display_name": "errollw", "link": "https://stackoverflow.com/users/2023516/errollw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2212, "favorite_count": 3, "accepted_answer_id": 38773907, "answer_count": 1, "score": 1, "last_activity_date": 1470331991, "creation_date": 1470252885, "question_id": 38752215, "link": "https://stackoverflow.com/questions/38752215/directx-rendering-to-texture2darray-and-loading-from-it-in-compute-shader", "title": "DirectX: rendering to Texture2DArray, and Loading from it in compute shader", "body": "<p>I want to render several images to a Texture2DArray, and access the resulting images in a compute shader. However, the <code>Load</code> method in the compute shader returns <code>[0.0, 0.0, 0.0, 0.0]</code> rather than the image data.</p>\n\n<p>Currently, I am doing the following:</p>\n\n<h2>1. Setup</h2>\n\n<p>I first prepare a set of \"render slots\" by creating a <strong>Texture2DArray</strong> using <code>CreateTexture2D</code> with <code>texArrayDesc.ArraySize = numRenderSlots</code>:</p>\n\n<pre><code>texArrayDesc.Width = width;\ntexArrayDesc.Height = height;\ntexArrayDesc.MipLevels = 1;\ntexArrayDesc.ArraySize = numRenderSlots;\ntexArrayDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;\ntexArrayDesc.Usage = D3D11_USAGE_DEFAULT;\ntexArrayDesc.BindFlags = D3D11_BIND_RENDER_TARGET | D3D11_BIND_SHADER_RESOURCE;\ntexArrayDesc.CPUAccessFlags = 0;\nm_device-&gt;CreateTexture2D(&amp;texArrayDesc, NULL, &amp;m_renderSlotsTexArray);\n</code></pre>\n\n<p>I then create a <strong>ShaderResourceView</strong> for this texture array so I can access it from a compute shader:</p>\n\n<pre><code>srvDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;\nsrvDesc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2DARRAY;\nsrvDesc.Texture2DArray.FirstArraySlice = 0;\nsrvDesc.Texture2DArray.MostDetailedMip = 0;\nsrvDesc.Texture2DArray.MipLevels = 1;\nsrvDesc.Texture2DArray.ArraySize = numRenderSlots;\nm_device-&gt;CreateShaderResourceView(m_renderSlotsTexArray, &amp;srvDesc, &amp;m_renderSlotsSrv);\n</code></pre>\n\n<p>For each slice in the Texture2DArray, I create a <strong>RenderTargetView</strong> so I can render to it.</p>\n\n<pre><code>rtvDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;\nrtvDesc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE2DARRAY;\nrtvDesc.Texture2DArray.MipSlice = 0;\nrtvDesc.Texture2DArray.ArraySize = 1;\n\nfor (int i = 0; i &lt; numRenderSlots; i++) {\n\n    // Change slot RTV desc to choose correct slice from array\n    rtvDesc.Texture2DArray.FirstArraySlice = D3D11CalcSubresource(0, i, 1);\n\n    // Create the RTV for the slot in m_renderSlotsTexArray\n    ID3D11RenderTargetView* slotRtv;\n    m_device-&gt;CreateRenderTargetView(m_renderSlotsTexArray, &amp;rtvDesc, &amp;slotRtv);\n\n    // Add the RenderTargetView to a list\n    m_slotRtvs.push_back(slotRtv);\n}\n</code></pre>\n\n<h2>2. Usage</h2>\n\n<p>I then render a set of different images by setting the associated render slot as a render target. Note that the background color is not <code>[0,0,0,0]</code>. Code simplified:</p>\n\n<pre><code>for (int i = 0; i &lt; numRenderSlots; i++) {\n    setupScene(i);\n    deviceContext-&gt;OMSetRenderTargets(1, &amp;m_slotRtvs[i], depthStencilView);\n    deviceContext-&gt;ClearRenderTargetView(m_slotRtvs[slotIdx], {0.2,0.2,0.2,0.0});\n    deviceContext-&gt;ClearDepthStencilView(depthStencilView, D3D11_CLEAR_DEPTH, 1.0f, 0);\n    render();\n}\n</code></pre>\n\n<p>I then setup a compute shader with a StructuredBuffer for shader output with associated UnorderedAccessView. I pass this into the shader, along with the SRV of the render slots Texture2DArray. I finally dispatch the shader, to operate over the image in 32x32 sized chunks.</p>\n\n<pre><code>deviceContext-&gt;CSSetShader(m_computeShader, NULL, 0);\ndeviceContext-&gt;CSSetShaderResources(0, 1, &amp;renderSlotsSrv);\ndeviceContext-&gt;CSSetUnorderedAccessViews(0, 1, &amp;outputUav, nullptr);\ndeviceContext-&gt;Dispatch(img_width / 32, img_height / 32, numParams);\n</code></pre>\n\n<p>I then try to access the rendered image data in the compute shader. <strong>However,  <code>imgs.Load</code> always seems to return <code>[0.0, 0.0, 0.0, 0.0]</code>.</strong></p>\n\n<pre><code>Texture2DArray&lt;float4&gt; imgs : register(t0);\nRWStructuredBuffer&lt;float3&gt; output : register(u0);\n\n[numthreads(32,32,1)]\nvoid ComputeShaderMain(\n    uint3 gID : SV_GroupID,\n    uint3 dtID : SV_DispatchThreadID,\n    uint3 tID : SV_GroupThreadID, \n    uint gi : SV_GroupIndex )\n{  \n    int idx_x = (gID.x * 32 + tID.x);\n    int idx_y = (gID.y * 32 + tID.y);\n    float4 px = imgs.Load(int4(idx_x,idx_y,gID.z,0));\n    ...\n    output[outIdx] = float3(px.x, px.y, px.z);\n}\n</code></pre>\n\n<p>I know the render slots are working, as I can access each render slot by doing CopySubresourceRegion into a staging texture to view the byte data. However, this <code>GPU-&gt;CPU</code> transfer is what I'm trying to avoid.</p>\n\n<p>Also, I know the compute shader output is working as I can map the output buffer and inspect some basic test data.</p>\n\n<hr>\n\n<p>What am I doing wrong? Thanks in advance.</p>\n"}, {"tags": ["c++", "compiler-errors", "codeblocks"], "comments": [{"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 0, "creation_date": 1470252956, "post_id": 38752138, "comment_id": 64878354, "body": "Is your header really called Game.H rather than Game.h? And are you working on Linux?"}, {"owner": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "reply_to_user": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 0, "creation_date": 1470253123, "post_id": 38752138, "comment_id": 64878450, "body": "Sorry, is &quot;Game.h&quot;, ill edit my mistake. Im working on Windows 7 Ultimate x64"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470254276, "post_id": 38752138, "comment_id": 64879030, "body": "Unable to reproduce after removing the stuff that can&#39;t possibly compile (and you aren&#39;t reporting errors about) and the SDL stuff (which I don&#39;t have). Recommend adding <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">include guards</a> to your header files."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "edited": false, "score": 0, "creation_date": 1470254342, "post_id": 38752319, "comment_id": 64879065, "body": "The reason of this &quot;../Constantes.h&quot; is because my codeblocks hierarchy looks like this. <a href=\"http://imgur.com/QE0NVB3\" rel=\"nofollow noreferrer\">imgur.com/QE0NVB3</a>. So when i include &quot;Constantes.h&quot; codeblocks cant found it."}, {"owner": {"reputation": 322, "user_id": 6642051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5lf1.png?s=128&g=1", "display_name": "ProgramGamer", "link": "https://stackoverflow.com/users/6642051/programgamer"}, "reply_to_user": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "edited": false, "score": 0, "creation_date": 1470254774, "post_id": 38752319, "comment_id": 64879283, "body": "You still need to write <code>#include &quot;..&#47;Headers&#47;Constantes.h&quot;</code> though, right?"}, {"owner": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "edited": false, "score": 0, "creation_date": 1470255041, "post_id": 38752319, "comment_id": 64879445, "body": "Nope. Because i understand codeblocks looks for headers in the &quot;include&quot; folder of that tree. EDIT: Sorry wrong link. <a href=\"http://imgur.com/Jf8VR0H\" rel=\"nofollow noreferrer\">imgur.com/Jf8VR0H</a>"}, {"owner": {"reputation": 322, "user_id": 6642051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5lf1.png?s=128&g=1", "display_name": "ProgramGamer", "link": "https://stackoverflow.com/users/6642051/programgamer"}, "reply_to_user": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "edited": false, "score": 0, "creation_date": 1470255166, "post_id": 38752319, "comment_id": 64879506, "body": "Maybe try going up the directory twice? #include &quot;../../Headers/Constantes.h&quot;"}, {"owner": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "edited": false, "score": 0, "creation_date": 1470255279, "post_id": 38752319, "comment_id": 64879562, "body": "Tried. &quot;No such file or directory&quot;. Are you sure is &quot;Constantes.h&quot; fault?"}, {"owner": {"reputation": 322, "user_id": 6642051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5lf1.png?s=128&g=1", "display_name": "ProgramGamer", "link": "https://stackoverflow.com/users/6642051/programgamer"}, "reply_to_user": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "edited": false, "score": 0, "creation_date": 1470309161, "post_id": 38752319, "comment_id": 64902867, "body": "yeah, I think I was mistaken. The issue had nothing to do with that. Sorry"}], "tags": [], "owner": {"reputation": 322, "user_id": 6642051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5lf1.png?s=128&g=1", "display_name": "ProgramGamer", "link": "https://stackoverflow.com/users/6642051/programgamer"}, "is_accepted": false, "score": 0, "last_activity_date": 1470253287, "creation_date": 1470253287, "answer_id": 38752319, "question_id": 38752138, "link": "https://stackoverflow.com/questions/38752138/codeblocks-c-class-parameters-appear-as-not-declared-in-scope/38752319#38752319", "title": "Codeblocks c++ class parameters appear as not declared in scope", "body": "<p>You're not including <code>Constantes.h</code> in <code>Game.cpp</code>.</p>\n\n<p>Well, you're trying at least. In don't know why you have <code>#include \"../Constantes.h\"</code> in your <code>Game.h</code> when you would only need <code>#include \"Constantes.h\"</code>. Are you trying to get a different file from a few folders above?</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256398, "creation_date": 1470256398, "answer_id": 38753114, "question_id": 38752138, "link": "https://stackoverflow.com/questions/38752138/codeblocks-c-class-parameters-appear-as-not-declared-in-scope/38753114#38753114", "title": "Codeblocks c++ class parameters appear as not declared in scope", "body": "<p>I couldnt fix the problem, but i came with a solution. I dont know why it was generated, but, i deleted the Game.cpp and Game.h and created the class again(created new ones), Copy/Pasted the code and its working. \u00af_(\u30c4)_/\u00af</p>\n"}], "owner": {"reputation": 3, "user_id": 5109437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5ac091d08ef6e3b09ba03cbfa65d71?s=128&d=identicon&r=PG&f=1", "display_name": "Azokasion", "link": "https://stackoverflow.com/users/5109437/azokasion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470256398, "creation_date": 1470252589, "last_edit_date": 1470253140, "question_id": 38752138, "link": "https://stackoverflow.com/questions/38752138/codeblocks-c-class-parameters-appear-as-not-declared-in-scope", "title": "Codeblocks c++ class parameters appear as not declared in scope", "body": "<p>Im just trying to get some small prototype in c++ and codeblocks, but i dont know why, every method and parameter would appear as not declared in scope. This is my code so far:</p>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Constantes.h\"\n#include \"Game.h\"\n\n\nint main(int argc, char* argv[])\n{\n    std::cout &lt;&lt;\"Incializando \"&lt;&lt;TITULO&lt;&lt;\" en \"&lt;&lt;ALTO&lt;&lt;\"x\"&lt;&lt;ANCHO&lt;&lt;\" a \"&lt;&lt;FPS&lt;&lt;\" FPS\"&lt;&lt;\"...\"&lt;&lt; std::endl;\n    Game juego;\n    std::cout &lt;&lt; \"Finalizando Juego...\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Game.h:</p>\n\n<pre><code>#include \"../Constantes.h\"\n#include &lt;SDL2/SDL.h&gt;\n\nclass Game\n{\n    public:\n        Game();\n        virtual ~Game();\n\n    protected:\n\n    private:\n        void Init();\n        void Bucle();\n        void Exit();\n\n        bool gameOver;\n        SDL_Window * ventana;\n        SDL_Renderer * render;\n\n};\n</code></pre>\n\n<p>Game.cpp:</p>\n\n<pre><code>#include \"Game.h\"\n\nGame::Game()\n{\n    Init();\n}\n\nGame::~Game()\n{\n    //dtor\n}\n\nvoid Game::Init()\n{\n    gameOver = false;\n    SDL_Init(SDL_INIT_EVERYTHING);\n    ventana = SDL_CreateWindow(TITULO,SDL_WINDOWPOS_CENTERED,SDL_WINDOWPOS_CENTERED,ANCHO,ALTO,SDL_WINDOW_SHOWN);\n    SDL_CreateRenderer(ventana,0,SDL_RENDERER_ACCELERATED);\n}\n\nvoid Game::Bucle()\n{\n    while(!gameOver)\n    {\n        SDL_RenderClear();\n    }\n}\n</code></pre>\n\n<p>Constantes.h:</p>\n\n<pre><code>#define ALTO 640\n#define ANCHO 480\n#define FPS 60\n#define TITULO \"V0.01\"\n</code></pre>\n\n<p>And this is my error list:</p>\n\n<pre><code>    ||=== Build: Debug in Gameu (compiler: GNU GCC Compiler) ===|\nC:\\Users\\SIMU\\Desktop\\ppm\\Gameu\\Gameu\\src\\Game.cpp||In constructor 'Game::Game()':|\nC:\\Users\\SIMU\\Desktop\\ppm\\Gameu\\Gameu\\src\\Game.cpp|5|error: 'gameOver' was not declared in this scope|\nC:\\Users\\SIMU\\Desktop\\ppm\\Gameu\\Gameu\\src\\Game.cpp||In member function 'void Game::Init()':|\nC:\\Users\\SIMU\\Desktop\\ppm\\Gameu\\Gameu\\src\\Game.cpp|16|error: 'gameOver' was not declared in this scope|\nC:\\Users\\SIMU\\Desktop\\ppm\\Gameu\\Gameu\\src\\Game.cpp|22|error: no 'void Game::Bucle()' member function declared in class 'Game'|\n||=== Build failed: 3 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n\n<p>i can see gameOver pretty much declared in the private section of class Game. I dont know what is wrong.</p>\n"}, {"tags": ["c++", "qt", "qsqlquery", "qvariant"], "comments": [{"owner": {"reputation": 7364, "user_id": 1217270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8oG4y.jpg?s=128&g=1", "display_name": "Honest Abe", "link": "https://stackoverflow.com/users/1217270/honest-abe"}, "edited": false, "score": 0, "creation_date": 1470252984, "post_id": 38752111, "comment_id": 64878374, "body": "<code>if (c == 1)</code> is this supposed to be <code>if (e == 1)</code>?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1470254175, "post_id": 38752111, "comment_id": 64878983, "body": "You should probably check for errors..."}, {"owner": {"reputation": 267, "user_id": 6385931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b9fafc2536d895b11117a6670e1f4533?s=128&d=identicon&r=PG&f=1", "display_name": "trangan", "link": "https://stackoverflow.com/users/6385931/trangan"}, "reply_to_user": {"reputation": 7364, "user_id": 1217270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8oG4y.jpg?s=128&g=1", "display_name": "Honest Abe", "link": "https://stackoverflow.com/users/1217270/honest-abe"}, "edited": false, "score": 0, "creation_date": 1470292764, "post_id": 38752111, "comment_id": 64892248, "body": "@HonestAbe: yeah, sorry, it should be <code>e==1</code>. I correct it already, Could you help me to point out problem ?"}, {"owner": {"reputation": 267, "user_id": 6385931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b9fafc2536d895b11117a6670e1f4533?s=128&d=identicon&r=PG&f=1", "display_name": "trangan", "link": "https://stackoverflow.com/users/6385931/trangan"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1470299894, "post_id": 38752111, "comment_id": 64896604, "body": "@hyde: I checked again with <code>bool valid = mDb-&gt;sqlQuery().isValid();</code> the result is <code>false</code>. But I still don&#39;t know why it is invalid. :("}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1470307096, "post_id": 38752111, "comment_id": 64901611, "body": "You should probably read the docs of <code>mDb</code>... You want something like <a href=\"http://doc.qt.io/qt-5/qsqldatabase.html#lastError\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qsqldatabase.html#lastError</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "is_accepted": false, "score": 0, "last_activity_date": 1470406569, "creation_date": 1470406569, "answer_id": 38791448, "question_id": 38752111, "link": "https://stackoverflow.com/questions/38752111/qvariant-returns-invalid-meanwhile-the-value-is-valid/38791448#38791448", "title": "QVariant returns invalid meanwhile the value is valid", "body": "<p>Your problem is that you're trying to fetch the result from a column with a special (and in some places invalid) name <code>count(*)</code>. You can set an alias for the column and fetch the value using that column alias:</p>\n\n<pre><code>...\nmDb-&gt;prepareSqlQuery(\"SELECT count(*) as count FROM mytable WHERE userid=:userId;\", \"database\");\n...\nQVariant c = mDb-&gt;sqlQuery().value(\"count\");\n...\n</code></pre>\n\n<p>And <strong>checking return values</strong> for error states is also good practice...</p>\n"}], "owner": {"reputation": 267, "user_id": 6385931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b9fafc2536d895b11117a6670e1f4533?s=128&d=identicon&r=PG&f=1", "display_name": "trangan", "link": "https://stackoverflow.com/users/6385931/trangan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1924, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470406569, "creation_date": 1470252500, "last_edit_date": 1592644375, "question_id": 38752111, "link": "https://stackoverflow.com/questions/38752111/qvariant-returns-invalid-meanwhile-the-value-is-valid", "title": "QVariant returns invalid meanwhile the value is valid", "body": "<p>I have a small function like this</p>\n<pre><code>bool QcgDatabase::onceindb(const QString&amp; userId)\n{\n    mDb-&gt;prepareSqlQuery(&quot;SELECT count(*) FROM mytable WHERE userid=:userId;&quot;, &quot;database&quot;);\n    mDb-&gt;prepareBindValue(&quot;:userId&quot;, userId);\n    mDb-&gt;sqlExec();\n\n    bool d = mDb-&gt;sqlQuery().isActive();\n    QVariant c = mDb-&gt;sqlQuery().value(QString(&quot;count(*)&quot;));\n    int e = c.toInt();\n\n    if (e == 1) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n</code></pre>\n<p>When I do this command in SQL, the result looks like this</p>\n<p><a href=\"https://i.stack.imgur.com/kQ2Ui.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQ2Ui.png\" alt=\"sql\" /></a></p>\n<p>I just want to take value <code>2</code> for comparison below, but in the code when I debug, <code>QVariant c</code> always return invalid, therefore <code>e is always = 0</code>. I thought my SQL command is not active, but when I debug, <code>bool d</code>always return true. Do you guys know why? how can I receive <code>2</code> as expected ?</p>\n"}, {"tags": ["c++", "qt", "qpainterpath"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470256382, "post_id": 38752059, "comment_id": 64880070, "body": "Sorry but your question is too broad and not a good fit for SO."}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 6659494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Cmwn6.png?s=128&g=1", "display_name": "Damir Porobic", "link": "https://stackoverflow.com/users/6659494/damir-porobic"}, "is_accepted": true, "score": 0, "last_activity_date": 1470379395, "last_edit_date": 1470379395, "creation_date": 1470345689, "answer_id": 38777597, "question_id": 38752059, "link": "https://stackoverflow.com/questions/38752059/how-to-implement-scribble-drawing-with-possibility-to-erase-paths-in-qt/38777597#38777597", "title": "How to implement scribble drawing with possibility to erase paths in QT?", "body": "<p>This seems to be indeed a valid, or at least a working approach, even though my question is a bit broad, eventually someone will find the answer useful:</p>\n\n<pre><code>/*\n * QList&lt;QGraphicsPathItem *&gt; mList;\n * bool mErase;\n * QPainterPath * mCurrentPath;\n * QPainterPathStroker mStroker;\n */\n\nvoid ScribbleArea::mousePressEvent ( QGraphicsSceneMouseEvent* event)\n{\n    if(!mErase)\n    {\n        mCurrentPath = new QPainterPath();\n        mCurrentPath-&gt;moveTo(event-&gt;lastScenePos());\n        mList.append(addPath(mStroker.createStroke(*mCurrentPath), QPen(Qt::red), QBrush(Qt::red)));\n    }\n    QGraphicsScene::mousePressEvent(event);\n}\n\nvoid ScribbleArea::mouseMoveEvent ( QGraphicsSceneMouseEvent* event)\n{ \n      if(!mErase)\n      {\n          mCurrentPath-&gt;lineTo(event-&gt;lastScenePos());\n          mList[mList.count()-1]-&gt;setPath(mStroker.createStroke(*mCurrentPath));\n      }\n      else\n      {\n          for(int i=0; i &lt; mList.count(); i++)\n          {\n              if(mList[i]-&gt;isUnderMouse())\n              {\n                  removeItem(mList[i]);\n                  delete mList[i];\n                  mList.removeAt(i);\n              } \n          }\n      }    \n      QGraphicsScene::mouseMoveEvent(event);\n}\n</code></pre>\n\n<p>Those are the two key functions, on mousePressEvent I start a new path and move it to the current mouse location, next, I add the path to the QGraphicsScene to get a pointer to QGraphicsPathItem that I will use in the mouseMoveEvent function.</p>\n\n<p>In the mouseMoveEvent function, I first check if we are currently erasing or drawing. In case of drawing, I add a line from the paths last point to current mouse location and add the path again to the QGraphicsScene, otherwise it wont show those new lines (maybe there is a better way, I'm open for improvements), that's it for drawing.\nIn case we are deleting, I go through a list of all paths and check if any of the paths is currently under the mouse, if yes, remove it.</p>\n\n<p>This is currently just a draft, more improvements to come.</p>\n\n<p>Some awesome example of the drawing/scribbling:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Jywnw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jywnw.png\" alt=\"Some awesome example of the drawing\"></a></p>\n"}], "owner": {"reputation": 451, "user_id": 6659494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Cmwn6.png?s=128&g=1", "display_name": "Damir Porobic", "link": "https://stackoverflow.com/users/6659494/damir-porobic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 38777597, "answer_count": 1, "score": 0, "last_activity_date": 1470379395, "creation_date": 1470252298, "question_id": 38752059, "link": "https://stackoverflow.com/questions/38752059/how-to-implement-scribble-drawing-with-possibility-to-erase-paths-in-qt", "title": "How to implement scribble drawing with possibility to erase paths in QT?", "body": "<p>What would be the right approach to implement scribble like drawing in QT but also be able to erase some of the drawn paths? </p>\n\n<p>I've seen some examples where drawing is implemented by adding ellipses as points to images (QImage) but as far as I understand, you would not be able to delete any of drawn lines? One thing I've been thinking about is to implement QPainterPaths. On mouse down, start a new path, on mouse move add points to the path at the mouse location and on mouse release finish this path. On the draw event I would go through an array of QPainterPaths and draw each of them. On erase, I would go through every QPainterPath in the array and check if any point collides, if yes, remove whole path from the array, effectively erasing it.</p>\n\n<p>Is that some valid approach or is it something that cannot be achieved with QPaths?  </p>\n\n<p>Is there a better, smarter, way to do it?</p>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1470252059, "post_id": 38751915, "comment_id": 64877816, "body": "The expression <code>(n2-n1)&#47;n3 + 1</code> might be a register value (extended double). After storing it to N it is a (likely  rounded) double. Yes it is a truncation issue."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1470252108, "post_id": 38751915, "comment_id": 64877840, "body": "It is very likely that the first expression returns something slightly below 11, so it is truncated to 10. The difference is that the first one may be an extended precision intermediate value that is truncated, while in the second example, it is guaranteed that a double is truncated."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1470251998, "creation_date": 1470251998, "answer_id": 38751991, "question_id": 38751915, "link": "https://stackoverflow.com/questions/38751915/getting-wrong-result-when-casting-from-double-to-unsigned-int/38751991#38751991", "title": "Getting wrong result when casting from double to unsigned int", "body": "<blockquote>\n  <p>Is the right hand side expression in the first case not calculated as <code>double</code> first, before being cast into <code>unsigned int</code>.</p>\n</blockquote>\n\n<p>Not necessarily. It might be computed as <code>long double</code>, which might result in a different truncation than <code>double</code>. Different compilers or different compiler options might produce a different result.</p>\n\n<blockquote>\n  <p>Is there a way to get the shorter expression (the first one) to work?</p>\n</blockquote>\n\n<p>Rounding is often a much better strategy than truncation, particularly if you are expecting the result to be very close to an integer.</p>\n\n<h3>Standard reference:</h3>\n\n<p>&sect;6.3.1.8 (Usual arithmetic conversions), paragraph 2, with relevant footnote:</p>\n\n<blockquote>\n  <p>The values of floating operands and of the results of floating expressions may be represented in greater range and precision than that required by the type; the types are not changed thereby. (63)</p>\n  \n  <p>63) The cast and assignment operators are still required to remove extra range and precision.</p>\n</blockquote>\n"}], "owner": {"reputation": 435, "user_id": 2021470, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ebe61fd04eb0091f89703de5e5916912?s=128&d=identicon&r=PG", "display_name": "Mo Sanei", "link": "https://stackoverflow.com/users/2021470/mo-sanei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 1, "closed_date": 1470252509, "accepted_answer_id": 38751991, "answer_count": 1, "score": 1, "last_activity_date": 1470251998, "creation_date": 1470251739, "question_id": 38751915, "link": "https://stackoverflow.com/questions/38751915/getting-wrong-result-when-casting-from-double-to-unsigned-int", "closed_reason": "Duplicate", "title": "Getting wrong result when casting from double to unsigned int", "body": "<p>What is the difference between</p>\n\n<pre><code>unsigned int n = (n2-n1)/n3 + 1;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>double N = (n2-n1)/n3 + 1;\n\nunsigned int n = (unsigned int)(N);\n</code></pre>\n\n<p>where <code>n1</code>, <code>n2</code>, and <code>n3</code> are <code>double</code>s? I am asking this because with <code>n1=3</code>, <code>n2=4</code> and <code>n3=0.1</code>, <code>n</code> gets 10 in the first case and 11 in the second (at least on my computer). The correct answer is 11 so the result of the first one is wrong. I am guessing it has something to do with truncation to <code>unsigned int</code>. Is that right? Is the right hand side expression in the first case not calculated as <code>double</code> first, before being cast into <code>unsigned int</code> (in which case it would be equivalent to the second piece of code)? Also, is there a way to get the shorter expression (the first one) to work? </p>\n"}, {"tags": ["c++", "zip", "miniz"], "comments": [{"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 0, "creation_date": 1470250350, "post_id": 38751382, "comment_id": 64876853, "body": "Since in a zip file appending something to the data and then zipping doesn&#39;t result in appending something to the file, but rather in changing it in multiple plaes, I figure that&#39;s impossible. Zipping is possible due to correlations between different data elements, so is non-local with respect to a certain data element."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6673769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4af025bd4de52770cc9a6e73317dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Will M", "link": "https://stackoverflow.com/users/6673769/will-m"}, "edited": false, "score": 0, "creation_date": 1470256403, "post_id": 38751922, "comment_id": 64880085, "body": "If I could get the file stats from the archive such as its local directory header, offset into the archive, etc... couldn&#39;t I just edit that information and write compressed data as if I were writing a new file into the archive?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 19, "user_id": 6673769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4af025bd4de52770cc9a6e73317dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Will M", "link": "https://stackoverflow.com/users/6673769/will-m"}, "edited": false, "score": 0, "creation_date": 1470256523, "post_id": 38751922, "comment_id": 64880149, "body": "@WillM Well, if your compression library API provides such featur, go forward with it."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1470251758, "creation_date": 1470251758, "answer_id": 38751922, "question_id": 38751382, "link": "https://stackoverflow.com/questions/38751382/appending-to-a-file-in-a-zip-archive/38751922#38751922", "title": "Appending to a file in a zip archive", "body": "<blockquote>\n  <p>I would just like to \"open\" a file in the zip archive to continue writing compressed data to it.</p>\n</blockquote>\n\n<p>Compressed files aren't working like a file system or folder, where you could change individual files. They keep e.g. check sums, that need to apply for the whole archive.</p>\n\n<p>So no, you can't do such <em>inplace</em>, but have to unpack the compressed file, apply your changes and compress everything again.</p>\n"}], "owner": {"reputation": 19, "user_id": 6673769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4af025bd4de52770cc9a6e73317dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Will M", "link": "https://stackoverflow.com/users/6673769/will-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470251951, "creation_date": 1470249827, "last_edit_date": 1470251951, "question_id": 38751382, "link": "https://stackoverflow.com/questions/38751382/appending-to-a-file-in-a-zip-archive", "title": "Appending to a file in a zip archive", "body": "<p>I have written a zip class that uses functions and code from miniz to: Open an archive, Close an archive, Open a file in the archive, Close a file in the archive, and write to the currently open file in the archive. </p>\n\n<p>Currently opening a file in an archive overwrites it if it already exists. I would like to know if it is possible to APPEND to a file within a zip archive that has already been closed?</p>\n\n<p>I want to say that it is possible but I would have to edit all offsets in each of the other file's internal states and within the central directory. If it is possible - is this the right path to look in to?</p>\n\n<p>Note: \n I deal with large files so decompressing and compressing again is not ideal and neither is doing any copying of files. I would just like to \"open\" a file in the zip archive to continue writing compressed data to it.</p>\n"}, {"tags": ["c++", "string", "binaryfiles", "getline", "null-terminated"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470250031, "post_id": 38751348, "comment_id": 64876693, "body": "It works in your simple case, and other equally simple cases. It won&#39;t work generally. Remember that binary files can contain any bytes in any order, including zeroes (which is what <code>&#39;\\0&#39;</code> is) anywhere, especially where you don&#39;t expect it. Using &quot;text&quot; functions on binary data will, sooner or later, cause you more trouble than it&#39;s worth."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470251425, "post_id": 38751348, "comment_id": 64877439, "body": "In two words: <i>Silly idea</i>!"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470252380, "post_id": 38751348, "comment_id": 64878002, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Well that is the reason that I posted it here. So, I&#39;m working in a code base that&#39;s doing this. Why do you say that it&#39;s a silly idea? (As in how much effort should I expend converting this over to a size and array?)"}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1470252572, "post_id": 38751418, "comment_id": 64878133, "body": "That&#39;s a really excellent point about line endings, I hadn&#39;t considered that. But if I&#39;m in windows, are you saying the line ending style differs between what&#39;s in memory and what&#39;s written to a file? I thought the conversion would have happened before I ever bothered to write to file."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1470253007, "post_id": 38751418, "comment_id": 64878388, "body": "In text mode the conversion happens as you write to the file."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1470253165, "post_id": 38751418, "comment_id": 64878476, "body": "So you&#39;re telling me that I carry it around in memory as 1 character, but when I go to write it out they decided to make it 2 characters? So it&#39;s just a completely pointless second step?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1470253277, "post_id": 38751418, "comment_id": 64878546, "body": "Not pointless. It produces a text file as the platform and its programs expect it to look so you can open it in things like notepad,  for example."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 3, "last_activity_date": 1470251803, "last_edit_date": 1470251803, "creation_date": 1470250004, "answer_id": 38751418, "question_id": 38751348, "link": "https://stackoverflow.com/questions/38751348/using-getline-on-a-binary-file/38751418#38751418", "title": "Using Getline on a Binary File", "body": "<p>No, it's not breaking any rules that I can see.</p>\n\n<p>Yes, it's more common to write an array with a prefixed size, but using a delimiter to mark the end can work perfectly well also. The big difference is that (like with a text file) you have to read through data to find the next item. With a prefixed size, you can look at the size, and skip directly to the next item if you don't need the current one. Of course, you also need to ensure that if you're using something to mark the end of a field, that it can never occur inside the field (or come up with some way of detecting when it's inside a field, so you can read the rest of the field when it does).</p>\n\n<p>Depending on the situation, that can mean (for example) using Unicode text. This gives you a lot of options for values that can't occur inside the text (because they aren't legal Unicode). That, on the other hand, would also mean that your \"binary\" file is really a text file, and has to follow some basic text-file rules to make sense.</p>\n\n<p>Which is preferable depends on how likely it is that you'll want to read random pieces of the file rather than reading through it from beginning to end, as well as the difficulty (if any) of finding a unique delimiter and if you don't have one, the complexity of making the delimiter recognizable from data inside a field. If the data is only meaningful if written in order, then having to read it in order doesn't really pose a problem. If you can read individual pieces meaningfully, then being able to do so much more likely to be useful.</p>\n\n<p>In the end, it comes down to a question of what you want out of your file being \"binary'. In the typical case, all 'binary\" really means is that what end of line markers that might be translated from a new-line character to (for example) a carriage-return/line-feed pair, won't be. Depending on the OS you're using, it might not even mean that much though--for example, on Linux, there's normally no difference between binary and text mode at all.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 1, "last_activity_date": 1470250505, "last_edit_date": 1470250505, "creation_date": 1470250129, "answer_id": 38751455, "question_id": 38751348, "link": "https://stackoverflow.com/questions/38751348/using-getline-on-a-binary-file/38751455#38751455", "title": "Using Getline on a Binary File", "body": "<p>Well, there are no rules broken and you'll get away with that just fine, except that may miss the precision of reading <em>binary</em> from a stream object.</p>\n\n<p>With binary input, you usually want to know how many characters were read successfully, which you can obtain afterwards with <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/gcount\" rel=\"nofollow\"><code>gcount()</code></a>... Using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow\"><code>std::getline</code></a> will not reflect the bytes read in <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/gcount\" rel=\"nofollow\"><code>gcount()</code></a>.</p>\n\n<p>Of cause, you can simply get such info from the size of the string you passed into <code>std::getline</code>. But the stream will no longer encapsulate the number of bytes you consumed in the last Unformatted Operation</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3830, "favorite_count": 0, "accepted_answer_id": 38751418, "answer_count": 2, "score": 3, "last_activity_date": 1470251803, "creation_date": 1470249696, "question_id": 38751348, "link": "https://stackoverflow.com/questions/38751348/using-getline-on-a-binary-file", "title": "Using Getline on a Binary File", "body": "<p>I have read that <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow\"><code>getline</code></a> behaves as an unformatted input function. Which I believe should allow it to be used on a binary file. Let's say for example that I've done this:</p>\n\n<pre><code>ofstream ouput(\"foo.txt\", ios_base::binary);\nconst auto foo = \"lorem ipsum\";\n\noutput.write(foo, strlen(foo) + 1);\noutput.close();\n\nifstream input(\"foo.txt\", ios_base::binary);\nstring bar;\n\ngetline(input, bar, '\\0');\n</code></pre>\n\n<p>Is that breaking any rules? It seems to work fine, I think I've just traditionally seen arrays handled by writing the size and then writing the array.</p>\n"}, {"tags": ["c++", "opengl", "math", "camera", "glm-math"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470249364, "post_id": 38751103, "comment_id": 64876267, "body": "If you have a quaternion, why are you using Euler angles like yaw, pitch, and roll?"}, {"owner": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470249556, "post_id": 38751103, "comment_id": 64876399, "body": "I began to use quaternions recently... Newbie in this case :("}, {"owner": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470249677, "post_id": 38751103, "comment_id": 64876473, "body": "I&#39;m trying to rotate the camera around a some object by the gamepad stick. tmp_(yaw/pitch) let me construct temporary quat for a single frame"}, {"owner": {"reputation": 1066, "user_id": 5960850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tnJbUrwp8gM/AAAAAAAAAAI/AAAAAAAAABg/iPOhz7bBu8g/photo.jpg?sz=128", "display_name": "Matthew Woo", "link": "https://stackoverflow.com/users/5960850/matthew-woo"}, "edited": false, "score": 0, "creation_date": 1470255922, "post_id": 38751103, "comment_id": 64879863, "body": "What is the orbital camera? Can you explain that?"}, {"owner": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "edited": false, "score": 0, "creation_date": 1470260213, "post_id": 38751103, "comment_id": 64881940, "body": "Yes of course. &quot;Orbit camera&quot;: 1)camera position is in the area circumscribed around the object (&quot;target&quot;) 2)eye_direction = normalize(target - camera_position)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "edited": false, "score": 0, "creation_date": 1470260034, "post_id": 38753463, "comment_id": 64881851, "body": "Thanks for the answer.  But could you explain why we are taking a negative value of target and radius? I really can not understand this part of the solution...  target - position in world space, right?"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "reply_to_user": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "edited": false, "score": 0, "creation_date": 1470260277, "post_id": 38753463, "comment_id": 64881982, "body": "Yes, target position is in world space. The view matrix does not have the purpose of positioning an object (the camera). Instead it has the purpose of transforming the scene, such that the camera will be at the origin. That is why all participating matrices are inverted (I assume the rotation matrix is already inverted) and in reverse order."}, {"owner": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "edited": false, "score": 0, "creation_date": 1470261042, "post_id": 38753463, "comment_id": 64882305, "body": "Oh, I see! So I can replace it with glm::inverse(glm::translate(0, 0, radius) * rotate * glm::translate(target)), right? (rotation matrix is not inverted) I must simply invert a model matrix?  If it is, thanks for the answer! You helped me a lot, thank you very much again!"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "reply_to_user": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "edited": false, "score": 0, "creation_date": 1470261203, "post_id": 38753463, "comment_id": 64882375, "body": "If you also reverse the order of the matrices, then this should be fine."}], "tags": [], "owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "is_accepted": true, "score": 1, "last_activity_date": 1470257762, "creation_date": 1470257762, "answer_id": 38753463, "question_id": 38751103, "link": "https://stackoverflow.com/questions/38751103/orbit-camera-c-glm/38753463#38753463", "title": "Orbit camera (C++, GLM)", "body": "<p>If you change the <code>translate</code> matrix to</p>\n\n<pre><code>glm::mat4 translate = glm::translate(-camera_position);\n</code></pre>\n\n<p>, it should be simply</p>\n\n<pre><code>glm::mat4 view_matrix = rotation * translation;\n</code></pre>\n\n<p>However, there is an easier way to go there. What you basically want to do is the following: Move the camera to the target, rotate the camera there, move it a bit back. This can be expressed in matrix form with (note that the view matrix is the inverse model transform for the camera):</p>\n\n<pre><code>view_matrix = glm::translate(0, 0, -radius) * rotate * glm::translate(-target);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6673757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhZP5.png?s=128&g=1", "display_name": "Saitei", "link": "https://stackoverflow.com/users/6673757/saitei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2575, "favorite_count": 0, "accepted_answer_id": 38753463, "answer_count": 1, "score": 1, "last_activity_date": 1475296156, "creation_date": 1470248826, "last_edit_date": 1475296156, "question_id": 38751103, "link": "https://stackoverflow.com/questions/38751103/orbit-camera-c-glm", "title": "Orbit camera (C++, GLM)", "body": "<p>I'm trying to write the orbital camera (based on glm::quat) for my OpenGL application.\nI have a few questions:</p>\n\n<ol>\n<li><p>\u0421an I make ViewMatrix from RotationMatrix + position of camera? </p>\n\n<p>camera_quat = glm::quat(glm::vec3(tmp_pitch, tmp_yaw, 0)) * camera_quat;</p>\n\n<pre><code>float pitch = camera_quat.pitch();\nfloat yaw = camera_quat.yaw();\n\nglm::mat4 rotate = glm::mat4_cast(camera_quat);\n\nglm::vec3 view_direction(cos(yaw) * cos(pitch), sin(pitch), -sin(yaw) * cos(pitch));\ncamera_position = target - view_direction * radius;\n\nglm::mat4 translate = glm::translate(camera_position);\n\nglm::mat4 view_matrix = **???**;\n</code></pre></li>\n<li><p>Is this line correct?: \n<code>glm::vec3 view_direction(cos(yaw) * cos(pitch), sin(pitch), -sin(yaw) * cos(pitch));</code></p></li>\n</ol>\n\n<p>P.S. Sorry if my english is bad. It is not my native language, I am russian.\nI hope you can help me. Thank you in advance!</p>\n"}, {"tags": ["c++", "c", "reference", "simd"], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 5, "last_activity_date": 1470252015, "last_edit_date": 1470252015, "creation_date": 1470251300, "answer_id": 38751796, "question_id": 38750994, "link": "https://stackoverflow.com/questions/38750994/what-is-ext-vector-type-and-simd/38751796#38751796", "title": "What is __ext_vector_type__ and simd?", "body": "<p>It appears to be a clang extension to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Vector-Extensions.html\" rel=\"noreferrer\">GNU C vector extensions</a>, where something like this would be normal:</p>\n\n<pre><code>typedef int v4si __attribute__ ((vector_size (16)));\n</code></pre>\n\n<hr>\n\n<p>Googling for <code>ext_vector_type</code> without the leading/trailing underscores found <a href=\"http://clang.llvm.org/docs/LanguageExtensions.html#vectors-and-extended-vectors\" rel=\"noreferrer\">the Clang docs</a>.  IDK why they added an underscores version, since it's already only valid inside a GNU C <code>__attribute__</code>.</p>\n\n<p>My best guess is that it's <strong>a way to let the compiler know you only care about the value of the first 3 elements of a 4 element SIMD register.</strong>  So it can potentially do optimizations that leave different garbage in the high element than the source would have.</p>\n\n<hr>\n\n<blockquote>\n  <p>why the compiler doesn't allow references to <code>vector_float3</code></p>\n</blockquote>\n\n<p>Works for me with clang3.8.  Try a different compiler.</p>\n\n<pre><code>typedef __attribute__((__ext_vector_type__(3))) float vector_float3;\n\nint foo(vector_float3 &amp;arg) {\n  vector_float3  v;\n  vector_float3&amp; ref = v;  // unused, but syntactically valid\n  return arg[0];           // return the low element of the vector, converted to an integer.  GNU C vector-extensions syntax.\n}\n</code></pre>\n\n<p><a href=\"http://gcc.godbolt.org/#compilers:!((compiler:clang380,options:&#39;-std%3Dgnu%2B%2B11+-Wall+-Wextra+-O3+-fno-verbose-asm+-march%3Dnehalem&#39;,source:&#39;typedef+__attribute__((__ext_vector_type__(3)))+float+vector_float3%3B%0A%0Aint+foo(vector_float3+%26arg)+%7B%0A++vector_float3++v%3B%0A++vector_float3%26+ref+%3D+v%3B%0A++return+arg%5B0%5D%3B%0A%7D%0A&#39;)),filterAsm:(commentOnly:!t,directives:!t,intel:!t,labels:!t),version:3\" rel=\"noreferrer\">compiles to the following asm on the Godbolt compiler explorer</a></p>\n\n<pre><code>    # targeting x86-64 SystemV ABI (so the first integer/pointer arg is in rdi)\n    cvttss2si       eax, dword ptr [rdi]\n    ret\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 3640988, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100008222029442/picture?type=large", "display_name": "Andrey Lyubimov", "link": "https://stackoverflow.com/users/3640988/andrey-lyubimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2374, "favorite_count": 1, "accepted_answer_id": 38751796, "answer_count": 1, "score": 1, "last_activity_date": 1470252015, "creation_date": 1470248474, "question_id": 38750994, "link": "https://stackoverflow.com/questions/38750994/what-is-ext-vector-type-and-simd", "title": "What is __ext_vector_type__ and simd?", "body": "<p>I'm playing with Apple Metal API along with so called <em>simd</em> library. There's such code in a header:</p>\n\n<pre><code>typedef __attribute__((__ext_vector_type__(3))) float vector_float3;\n</code></pre>\n\n<p>And I'm curious what it actually does and why the compiler doesn't allow references to <strong>vector_float3</strong> in a function's argument or in the next manner:</p>\n\n<pre><code>vector_float3  v;\nvector_float3&amp; ref = v;\n</code></pre>\n"}, {"tags": ["c++", "directx", "directx-9"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470327876, "post_id": 38750815, "comment_id": 64916859, "body": "Why are you using legacy Direct3D9 exactly? Otherwise I&#39;d suggest using <a href=\"https://github.com/Microsoft/DirectXTK\" rel=\"nofollow noreferrer\">DirectX Tool Kit for DirectX 11</a> and <code>SpriteFont</code>."}, {"owner": {"reputation": 99, "user_id": 5767869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffc600eb846cfbd99ef6fb420ee7343c?s=128&d=identicon&r=PG&f=1", "display_name": "NoobyLearner", "link": "https://stackoverflow.com/users/5767869/noobylearner"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 1, "creation_date": 1470329293, "post_id": 38750815, "comment_id": 64917733, "body": "Sadly in this current world... people are still using XP and we cant really do something about it but supporting it."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470329690, "post_id": 38750815, "comment_id": 64917999, "body": "Depends on your target market of course. The <a href=\"http://store.steampowered.com/hwsurvey\" rel=\"nofollow noreferrer\">Valve Steam Hardware Survey</a> shows less than 2% of users on Windows XP. The two places you are likely to still find Windows XP in use today are: (a) emerging markets like South Korea, China, and Russia which all basically have systems frozen in amber ~15 years ago, and (b) slow-to-upgrade enterprises settings that have locked down their network to the point that they aren&#39;t likely to be running your application. These days, Windows 7 is the &#39;legacy&#39; gamer system you need to worry about and it supports DX11."}, {"owner": {"reputation": 99, "user_id": 5767869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffc600eb846cfbd99ef6fb420ee7343c?s=128&d=identicon&r=PG&f=1", "display_name": "NoobyLearner", "link": "https://stackoverflow.com/users/5767869/noobylearner"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470332912, "post_id": 38750815, "comment_id": 64919771, "body": "Thats the thing, the reason valve has less than 2% is probably because the players doesnt have a good enough hardware to play on steam games. My customers are all from thailand and my main income is from cyber cafe, and trust me, the money is huge over there, only becasue of the easy of payment in thailand, lookup TrueMoney, its something similar to PaySafeCard for us, but in thailand... gosh."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1470344702, "post_id": 38750815, "comment_id": 64926148, "body": "The PC caf&#233;s tend to be very odd setups so be sure to check into exactly which version of the legacy toolsets they require--often they don&#39;t allow games to run REDISTs or the latest DirectSetup. Keep in mind that Direct3D 9 debugging is not supported on Windows 8.x or Windows 10. Best of luck!"}], "owner": {"reputation": 99, "user_id": 5767869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffc600eb846cfbd99ef6fb420ee7343c?s=128&d=identicon&r=PG&f=1", "display_name": "NoobyLearner", "link": "https://stackoverflow.com/users/5767869/noobylearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 624, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474909169, "creation_date": 1470247753, "question_id": 38750815, "link": "https://stackoverflow.com/questions/38750815/directx-9-draw-font-on-texture", "title": "directx 9 draw font on texture", "body": "<p>What im currently doing is drawing multiple textures on a single IDirect3DTexture9 and then scale it to make a nice animation using ID3DXSprite.</p>\n\n<p>Im searching a way to draw text on that final IDirect3DTexture9, however ID3DXFont does not apparently support it.\nTextOut requires the DC of the texture and in consequence requires the texture to be in format D3DFMT_X8R8G8B8, which will make me lose my opacity support.</p>\n\n<p>Is there anyway to do this without coding my own font engine?</p>\n\n<p>DirectX9 and C++</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "lambda", "standards", "c++14"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1470247992, "post_id": 38750777, "comment_id": 64875496, "body": "<code>x</code> is a const expression. which is ODR-used only for #2 because of the reference."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1470253298, "post_id": 38750777, "comment_id": 64878561, "body": "In other words, <code>g</code> behaves as if its body is <code>{ f(17); }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": true, "score": 0, "last_activity_date": 1470254603, "creation_date": 1470254603, "answer_id": 38752647, "question_id": 38750777, "link": "https://stackoverflow.com/questions/38750777/using-of-not-captured-variable-in-lambda/38752647#38752647", "title": "Using of not captured variable in lambda", "body": "<p>As T.C. said in his comment, #1 does not require a capture as <code>x</code> is known at compile time and is therefore baked into the lambda. Not unlike how the function <code>f</code> is known at compile time so it doesn't need to be captured.</p>\n\n<p>I believe if you change <code>f</code>'s signature to <code>int const &amp;</code> you are now attempting to pass the address of the constant which is on the stack, thus subject to changes, and it would require capturing <code>x</code> by value or reference.</p>\n"}], "owner": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2208, "favorite_count": 1, "accepted_answer_id": 38752647, "answer_count": 1, "score": 4, "last_activity_date": 1470304041, "creation_date": 1470247621, "last_edit_date": 1470304041, "question_id": 38750777, "link": "https://stackoverflow.com/questions/38750777/using-of-not-captured-variable-in-lambda", "title": "Using of not captured variable in lambda", "body": "<p>I can not quite understand an example from C++14 standard draft <code>N4140 5.1.2.12 [expr.prim.lambda]</code>.</p>\n\n<blockquote>\n  <p>A lambda-expression with an associated capture-default that does not explicitly capture this or a variable with automatic storage duration (this excludes any id-expression that has been found to refer to an initcapture\u2019s associated non-static data member), is said to implicitly capture the entity (i.e., this or a variable) if the compound-statement:</p>\n  \n  <ul>\n  <li>odr-uses the entity, or</li>\n  <li>names the entity in a potentially-evaluated expression where the enclosing full-expression depends on a generic lambda parameter declared within the reaching scope of the lambda-expression.</li>\n  </ul>\n  \n  <p>[ Example:</p>\n\n<pre><code>void f(int, const int (&amp;)[2] = {}) { } // #1\nvoid f(const int&amp;, const int (&amp;)[1]) { } // #2\nvoid test() {\n  const int x = 17;\n  auto g = [](auto a) {\n    f(x); // OK: calls #1, does not capture x\n  };\n  auto g2 = [=](auto a) {\n    int selector[sizeof(a) == 1 ? 1 : 2]{};\n    f(x, selector); // OK: is a dependent expression, so captures x\n  };\n}\n</code></pre>\n  \n  <p>\u2014end example ]</p>\n  \n  <p>All such implicitly captured entities shall be declared within the reaching scope of the lambda expression.</p>\n  \n  <p>[ Note: The implicit capture of an entity by a nested lambda-expression can cause its implicit capture by the containing lambda-expression (see below). Implicit odr-uses of this can result in implicit capture. \u2014end note ]</p>\n</blockquote>\n\n<p>I thought that the beginning of a phrase <code>a lambda-expression with an associated capture-default</code> should prohibit any implicit capture (and it's confirmed by comment), therefore <code>#1</code> call will lead to an error (something about using not captured variable). So how it works? What will be first argument of <code>f</code>? What if <code>g</code> will be called after exiting <code>test()</code> scope? What if I change <code>#1</code> signature to <code>void(const int&amp;)</code>?</p>\n\n<p>--</p>\n\n<p>upd: Thanks to all for explanation of how it works. Later I'll try to find and post references to standard about this case.</p>\n"}, {"tags": ["c++", "c++11", "boost", "chrono"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470248488, "post_id": 38750737, "comment_id": 64875758, "body": "Is your target system capable of <i>nanosecond</i> timer resolution actually?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 1, "creation_date": 1470248817, "post_id": 38750737, "comment_id": 64875940, "body": "What time do you want the nanoseconds <i>since</i>?  Do you want nanoseconds since the last whole second (a high-resolution timestamp), or do you want nanoseconds since the epoch, or what?"}, {"owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1470249248, "post_id": 38750737, "comment_id": 64876195, "body": "Yes, my target system is capable of nanoseconds resolution. I need the current time in nanoseconds(high resolution timestamp)."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1470252396, "post_id": 38751857, "comment_id": 64878015, "body": "Hi Remis, isn&#39;t this solution for getting the delta time in nanoseconds? Is it possible to get the current time in nanoseconds? Please advice"}, {"owner": {"reputation": 471, "user_id": 3737891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ulyNU.jpg?s=128&g=1", "display_name": "Remis", "link": "https://stackoverflow.com/users/3737891/remis"}, "reply_to_user": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1470252932, "post_id": 38751857, "comment_id": 64878336, "body": "What do you mean by &quot;current time in nanoseconds&quot;? A timepoint is defined as a duration after an epoch, which is defined by a clock. For example 1970-01-01 is the  epoch of the UNIX systems. So, &quot;current time&quot; is something like 1,470,252,780,000,000,000 nanoseconds since an epoch."}, {"owner": {"reputation": 471, "user_id": 3737891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ulyNU.jpg?s=128&g=1", "display_name": "Remis", "link": "https://stackoverflow.com/users/3737891/remis"}, "reply_to_user": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1470253334, "post_id": 38751857, "comment_id": 64878580, "body": "Look for more info on this in Chapter <a href=\"http://www.informit.com/articles/article.aspx?p=1881386&amp;seqNum=2\" rel=\"nofollow noreferrer\">5.7. Clocks and Timers</a> from C++ Standard Library, The: A Tutorial and Reference."}], "tags": [], "owner": {"reputation": 471, "user_id": 3737891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ulyNU.jpg?s=128&g=1", "display_name": "Remis", "link": "https://stackoverflow.com/users/3737891/remis"}, "is_accepted": false, "score": 2, "last_activity_date": 1470251841, "last_edit_date": 1470251841, "creation_date": 1470251539, "answer_id": 38751857, "question_id": 38750737, "link": "https://stackoverflow.com/questions/38750737/how-to-get-nanoseconds-from-boostchronohight-resolution-clocktime-point/38751857#38751857", "title": "How to get nanoseconds from boost::chrono::hight_resolution_clock::time_point?", "body": "<p>If tagged <code>c++11</code>, any reason why not to use <code>std::chrono</code>?    </p>\n\n<pre><code>// Using std::chrono\nauto start = std::chrono::high_resolution_clock::now();  // start timer\n\n/* do some work */\n\nauto diff = std::chrono::high_resolution_clock::now() - start; // get difference \nauto nsec = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(diff);\nstd::cout &lt;&lt; \"it took: \" &lt;&lt; nsec.count() &lt;&lt; \" nanoseconds\" &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 1, "last_activity_date": 1470253384, "creation_date": 1470253384, "answer_id": 38752344, "question_id": 38750737, "link": "https://stackoverflow.com/questions/38750737/how-to-get-nanoseconds-from-boostchronohight-resolution-clocktime-point/38752344#38752344", "title": "How to get nanoseconds from boost::chrono::hight_resolution_clock::time_point?", "body": "<p><code>boost::chrono::duration_cast</code> converts a duration into the specified units, but you've given it a <code>boost::chrono::time_point</code>, not a duration.</p>\n\n<p>There's really no such thing as \"<em>the current time in nanoseconds</em>\".  To get a duration, you need to specify the time since which you want to know how many nanoseconds have elapsed (an \"epoch\").  Different clocks will measure their time based on different epochs.</p>\n\n<p><code>boost::chrono::system_clock</code> (currently) uses the Unix epoch (midnight Jan 1, 1970) as its epoch, but it's not steady and it may not have the resolution you need (it's in nanoseconds on my Ubuntu box, but in 1/10,000,000ths of a second on my Windows box).</p>\n\n<p><code>boost::chrono::high_resolution_clock</code> uses boot up as its epoch, is steady, and measures time in nanoseconds on both boxes I tested on.</p>\n\n<p>Boost also provides other clocks like <code>process_cpu_clock</code> that use other epochs and count in other units.</p>\n\n<p>Thus you can get nanos since Jan 1, 1970 using <code>system_clock</code>, but it may not actually be nanosecond-accurate, and it may go backwards if the user changes the system time or the computer syncs with network time, or you can get nanos since some other point in time using <code>high_resolution_clock</code>.</p>\n"}], "owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1470253384, "creation_date": 1470247473, "question_id": 38750737, "link": "https://stackoverflow.com/questions/38750737/how-to-get-nanoseconds-from-boostchronohight-resolution-clocktime-point", "title": "How to get nanoseconds from boost::chrono::hight_resolution_clock::time_point?", "body": "<p>I am new to boost and chrono. I am writing a logger that logs the timestamps of API calls, entry and exit. I tried using boost::xtime first, but it wasn't giving the high resolution value I needed. Hence was thinking about using Chrono. I declared a boost::chrono::hight_resolution_clock::time_stamp x; variable for getting the timestamp and assigned it to boost::chrono::hight_resolution_clock::now ();. Now, I need to get the nanoseconds from this variable and put it in my log file (thats the requirement). So I cast it  boost::chrono::duration_cast (x). But it just wouldn't let me do that. It needs 2 parameters apparently,  and I only have one. Is there a way to get around this?. Is it possible to create another time_stamp variable and assign zero to it and use that variable?. I tried assigning zero, but its not working. Kindly help me out.</p>\n\n<p>Thanks, \nSam</p>\n"}, {"tags": ["c++", "debugging", "gdb", "g++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470247559, "post_id": 38750697, "comment_id": 64875253, "body": "<a href=\"http://coliru.stacked-crooked.com/a/af0be938691491cb\" rel=\"nofollow noreferrer\">No repro</a>"}, {"owner": {"reputation": 115, "user_id": 5175580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Sa_lDg8Eu4/AAAAAAAAAAI/AAAAAAAAADE/jUOLp7wk9HA/photo.jpg?sz=128", "display_name": "Henrique Inonhe", "link": "https://stackoverflow.com/users/5175580/henrique-inonhe"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470247824, "post_id": 38750697, "comment_id": 64875404, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I&#39;m aware that the code itself is not supposed to crash, nevertheless it does."}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1470248277, "post_id": 38750697, "comment_id": 64875622, "body": "I am not down voting your question because I understand your situation but the problem is somewhere else. <i>Broken</i> libraries,... ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1470248283, "post_id": 38750697, "comment_id": 64875631, "body": "Bit weird this. Why so many threads? &quot;Error detected on stdin.&quot; Could this be gdb and your program scraping it out over your program blocking on stdin? Worth tacking on your compiler and GDB version. OS probably wouldn&#39;t hurt, either."}, {"owner": {"reputation": 115, "user_id": 5175580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Sa_lDg8Eu4/AAAAAAAAAAI/AAAAAAAAADE/jUOLp7wk9HA/photo.jpg?sz=128", "display_name": "Henrique Inonhe", "link": "https://stackoverflow.com/users/5175580/henrique-inonhe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470248562, "post_id": 38750697, "comment_id": 64875798, "body": "@user4581301 That&#39;s exactly what I was asking myself, even though I do not really understand how threads work. This was happening with QT, so I though it was an issue related to the IDE, but now it&#39;s clear that&#39;s not the case. I already reinstalled minGW and it didn&#39;t solve the problem yet, maybe the only way out is to reinstall the OS."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470249350, "post_id": 38750697, "comment_id": 64876255, "body": "I don&#39;t think you want to nuke your OS over this. Which version of mingw are you using, and what&#39;s the build command line. What IDE?"}, {"owner": {"reputation": 115, "user_id": 5175580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Sa_lDg8Eu4/AAAAAAAAAAI/AAAAAAAAADE/jUOLp7wk9HA/photo.jpg?sz=128", "display_name": "Henrique Inonhe", "link": "https://stackoverflow.com/users/5175580/henrique-inonhe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470251280, "post_id": 38750697, "comment_id": 64877363, "body": "@user4581301 Last time, just to make sure it wasn&#39;t anything IDE related, I compiled via command line with g++ and -g flag, also invoked gdb directly via command line. &quot;Configured with: ../src/gcc-4.9.3/configure --build=x86_64-pc-linux-gnu --host=m ingw32 --prefix=/mingw --disable-win32-registry --target=mingw32 --with-arch=i58 6 --enable-languages=c,c++,objc,obj-c++,fortran,ada --enable-static --enable-sha red --enable-threads --with-dwarf2 --disable-sjlj-exceptions --enable-version-sp ecific-runtime-libs --enable-libstdcxx-debug --with-tune=generic --enable-nls Thread model: win32&quot;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470251696, "post_id": 38750697, "comment_id": 64877589, "body": "No reproduce.  Using g++ version 5.3.0 on Cygwin, Windows 7.  Using gdb version &quot;Cygwin 7.10.1-1&quot;."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470251863, "post_id": 38750697, "comment_id": 64877678, "body": "Yow! That&#39;s a lot of cruft for a simple program like this. Start with <code>g++ -O0 -g3 &lt;name of input file&gt;</code>. This should spit out an a.out or a.exe, still not sure which OS you&#39;re using, that you can pop into GDB. If you still get an error, there is some sort of low-level configuration screw-up or a conceptual break like trying to debug a cross-compiled win32 program with the default GDB on linux. If no error, start adding more options until you do get the error."}, {"owner": {"reputation": 115, "user_id": 5175580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Sa_lDg8Eu4/AAAAAAAAAAI/AAAAAAAAADE/jUOLp7wk9HA/photo.jpg?sz=128", "display_name": "Henrique Inonhe", "link": "https://stackoverflow.com/users/5175580/henrique-inonhe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470252336, "post_id": 38750697, "comment_id": 64877966, "body": "I&#39;ll try! @user4581301 , thanks a lot!"}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 5175580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Sa_lDg8Eu4/AAAAAAAAAAI/AAAAAAAAADE/jUOLp7wk9HA/photo.jpg?sz=128", "display_name": "Henrique Inonhe", "link": "https://stackoverflow.com/users/5175580/henrique-inonhe"}, "is_accepted": true, "score": 0, "last_activity_date": 1470434507, "creation_date": 1470434507, "answer_id": 38798326, "question_id": 38750697, "link": "https://stackoverflow.com/questions/38750697/segfault-even-on-the-simplest-program-only-when-debugging/38798326#38798326", "title": "SEGFAULT even on the simplest program only when debugging", "body": "<p>Finally I fixed it!</p>\n\n<p>Turns out that it really was something with windows runtime libraries, so I did a clean reinstall and now everything works just fine!</p>\n\n<p>However I really have no idea of how this came to be.</p>\n"}], "owner": {"reputation": 115, "user_id": 5175580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Sa_lDg8Eu4/AAAAAAAAAAI/AAAAAAAAADE/jUOLp7wk9HA/photo.jpg?sz=128", "display_name": "Henrique Inonhe", "link": "https://stackoverflow.com/users/5175580/henrique-inonhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 38798326, "answer_count": 1, "score": 0, "last_activity_date": 1470434507, "creation_date": 1470247302, "last_edit_date": 1470247710, "question_id": 38750697, "link": "https://stackoverflow.com/questions/38750697/segfault-even-on-the-simplest-program-only-when-debugging", "title": "SEGFAULT even on the simplest program only when debugging", "body": "<p>My program is <strong>exactly</strong> this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n\n    int a;\n\n    std::cin &gt;&gt; a;\n}\n</code></pre>\n\n<p>And it is crashing (SEGFAULT) only when I use the gdb debugger.</p>\n\n<p>I'm compiling with g++.</p>\n\n<p>If it is of any use, this is the disassembler output when the program crashes.</p>\n\n<pre><code>-&gt;-&gt;post-prompt\neax            0x474e5089   1196314761\necx            0x1  1\nedx            0x22fea24    36694564\nebx            0x74ca2fe8   1959407592\nesp            0x41afe4c    0x41afe4c\nebp            0x41afe5c    0x41afe5c\nesi            0x4e8ffd 5148669\nedi            0x0  0\neip            0x74b11a37   0x74b11a37\neflags         0x10202  [ IF RF ]\ncs             0x23 35\nss             0x2b 43\nds             0x2b 43\nes             0x2b 43\nfs             0x53 83\ngs             0x2b 43\n</code></pre>\n\n<p>Any help is highly appreciated.</p>\n\n<p><strong>EDIT:</strong> This is the debugger output when invoked via command line:</p>\n\n<pre><code>[New Thread 180.0x8e4]\n[New Thread 180.0x1a40]\n[New Thread 180.0x1bb4]\n[New Thread 180.0x19a0]\n[New Thread 180.0x1630]\n[New Thread 180.0xc28]\n[New Thread 180.0x788]\n[New Thread 180.0x5f8]\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 180.0x5f8]\n0x74b11a37 in ?? ()\n(gdb) Exception condition detected on fd 0\nerror detected on stdin\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "reply_to_user": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470253301, "post_id": 38750692, "comment_id": 64878562, "body": "@aichao Note that there&#39;s no word about <b>handlers</b> of these functions in the &quot;Thread Safety&quot; section of the documentation"}, {"owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "reply_to_user": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470254308, "post_id": 38750692, "comment_id": 64879049, "body": "@aichao Could you give me a link to this example?"}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470254446, "post_id": 38750692, "comment_id": 64879126, "body": "For 1_61_0 it is in <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/examples/cpp03_examples.html\" rel=\"nofollow noreferrer\">here</a>. It is the http server 3 example."}, {"owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "reply_to_user": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470254716, "post_id": 38750692, "comment_id": 64879262, "body": "@aichao Well, I guess it&#39;s because they can&#39;t have two concurrent <code>async_read_some</code> calls in that example due to logical &quot;synchronization&quot; -- they call <code>async_read_some</code> right after the previous call handler was called"}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470255194, "post_id": 38750692, "comment_id": 64879519, "body": "Are you referring to connection::handle_read()? Note, however, that the <code>connection</code> object needs to be the same across async calls as that object has the socket object (hence the <code>shared_from_this</code>). Do you want to move this discussion to chat. They don&#39;t like us going back and forth with comments. BTW, I don&#39;t know how to start that."}, {"owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "reply_to_user": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470255382, "post_id": 38750692, "comment_id": 64879611, "body": "@aichao &quot;Are you referring to connection::handle_read()?&quot; -- yep. &quot;Note, however, that the connection object needs to be the same across async calls&quot; -- I know. Look at the example again -- there&#39;s no way (as far as I can see) when two or more operations on the same <code>socket</code> object will be executed simultaneously. &quot;BTW, I don&#39;t know how to start that&quot; -- you can&#39;t unless SO automatically suggests so after some amount of comments"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1470329352, "post_id": 38750692, "comment_id": 64917775, "body": "I am misunderstanding the question, but could you please elaborate how concurrent function calls occur when there is only a single thread?  Perhaps it may be easier to express ones concerns with some pseudo code?"}, {"owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1470510680, "post_id": 38750692, "comment_id": 64983959, "body": "@Tanner Sansbury Edited"}], "answers": [{"tags": [], "owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "is_accepted": false, "score": 0, "last_activity_date": 1470521608, "creation_date": 1470521608, "answer_id": 38809184, "question_id": 38750692, "link": "https://stackoverflow.com/questions/38750692/can-i-call-any-socket-functions-concurrently-even-when-they-are-all-running-in-o/38809184#38809184", "title": "Can I call any socket functions concurrently even when they are all running in one single thread", "body": "<p>In the provided example, <code>thread1</code> and <code>thread2</code> violate the thread safety requirement of socket.  <code>thread3</code> is  inconsequential.</p>\n\n<hr>\n\n<p>The thread safety for a type and the running of the <code>io_service</code> are orthogonal.  The <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/overview/core/threads.html#boost_asio.overview.core.threads.thread_safety\" rel=\"nofollow\">Thread and Boost.Asio</a> documentation notes:</p>\n\n<blockquote>\n  <p>In general, it is safe to make concurrent use of distinct objects, but unsafe to make concurrent use of a single object. However, types such as <code>io_service</code> provide a stronger guarantee that it is safe to use a single object concurrently.</p>\n</blockquote>\n\n<p>Therefore, for type <code>T</code>:</p>\n\n<ul>\n<li>when the thread safety of distinct objects is unsafe, given two discrete objects <code>t1</code> and <code>t2</code> that are of type <code>T</code>, then <code>thread1</code> must not concurrently invoke functions on <code>t1</code> while <code>thread2</code> is invoking functions on <code>t2</code></li>\n<li>when the thread safety of distinct objects is safe, given two discrete objects <code>t1</code> and <code>t2</code> that are of type <code>T</code>, then it is safe for <code>thread1</code> to concurrently invoke functions on <code>t1</code> while <code>thread2</code> is invoking functions on <code>t2</code></li>\n<li>when the thread safety of shared objects is unsafe, given object <code>t</code> of type <code>T</code>, then <code>thread1</code> must not concurrently invoke functions on <code>t</code> while <code>thread2</code> is invoking functions on <code>t</code></li>\n<li>when the thread safety of shared  objects is safe, given object <code>t</code> of type <code>T</code>, then it is safe for <code>thread1</code> to concurrently invoke functions on <code>t</code> while <code>thread2</code> is invoking functions on <code>t</code></li>\n</ul>\n\n<p>Composed operations, such as <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/reference/async_read/overload1.html\" rel=\"nofollow\"><code>async_read()</code></a>, can have a non-obvious impact on thread safety.  Composed operations are implemented in zero or more calls to the I/O object.  The initiating function may attempt to perform an I/O operation, and any additional <em>intermediate operations</em> are initiated within the context of a thread running the <code>io_service</code>.  Therefore, given <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/reference/ip__tcp/socket.html\" rel=\"nofollow\"><code>ip::tcp::socket</code></a> where the thread safety on shared objects is unsafe:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> thread1                              | thread2\n--------------------------------------+-------------------------------------------\nip::tcp::socket socket(io_service);   | io_service::work work(io_service);\n...                                   | io_service.run();\nasync_read(socket, ...);              | |-- ...\nsocket.async_write_some(...)          | `-- ... // possible socket.async_receive()\n</code></pre>\n\n<p>The above is unsafe because <code>thread1</code> may attempt to invoke <code>socket.async_write_some()</code> while an intermediate operation within <code>thread2</code> is invoking <code>socket.async_receive()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3123, "user_id": 273348, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/35ugZ.jpg?s=128&g=1", "display_name": "Peter Jankuliak", "link": "https://stackoverflow.com/users/273348/peter-jankuliak"}, "is_accepted": false, "score": 0, "last_activity_date": 1470870701, "last_edit_date": 1470870701, "creation_date": 1470869576, "answer_id": 38884824, "question_id": 38750692, "link": "https://stackoverflow.com/questions/38750692/can-i-call-any-socket-functions-concurrently-even-when-they-are-all-running-in-o/38884824#38884824", "title": "Can I call any socket functions concurrently even when they are all running in one single thread", "body": "<p>Do you actually start threads somewhere explicitly using the std::thread constructor? I'm asking to make sure whether you're not confused about what the <code>async_read</code> and <code>async_write</code> functions actually do.</p>\n\n<p>If you - as per your example - did just this:</p>\n\n<pre><code>sock.async_write(write_handler);\nsock.async_read(read_handler);\n// Notice: no need to put this in a while loop, this is a blocking call.\nio_service.run();\n</code></pre>\n\n<p>Then you don't need to care about multi-threading because both handlers shall be executed <strong>inside</strong> the <code>io_service.run()</code> function <strong>one after another</strong> sequentially (only the order in which they are executed is undefined).</p>\n\n<p>Now if you had something like this:</p>\n\n<pre><code>sock.async_write(write_handler);\nsock.async_read(read_handler);\nstd::thread thread1([&amp;]() { io_service.run(); });\nstd::thread thread2([&amp;]() { io_service.run(); });\n</code></pre>\n\n<p>That would be still valid, but now you can't tell in which <code>io_service.run()</code> function shall your handlers be executed. It would be possible for the two handlers to be invoked <strong>concurrently</strong> (i.e. one could start before the other one finished). In this case it would be wise to consider strands or explicit locking.</p>\n\n<p>Then there is the third case:</p>\n\n<pre><code>std::thread thread1([&amp;]() { sock.async_write(write_handler); });\nstd::thread thread2([&amp;]() { sock.async_read(read_handler); });\nio_service.run();\n</code></pre>\n\n<p>I believe this is how @TannerSansbury understood your pseudocode and as he explained in his answer, this approach would be incorrect.</p>\n\n<p>Which of these three is actually most alike with what you've got?</p>\n"}], "owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470870701, "creation_date": 1470247287, "last_edit_date": 1470510668, "question_id": 38750692, "link": "https://stackoverflow.com/questions/38750692/can-i-call-any-socket-functions-concurrently-even-when-they-are-all-running-in-o", "title": "Can I call any socket functions concurrently even when they are all running in one single thread", "body": "<p>I know that this question has been asked here many times before but they are all focused on <code>strand</code>s and that kind of stuff. Let's take a look at it in a more general manner.</p>\n\n<p>First things first -- let's take a look at the <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/reference/ip__tcp/socket.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>Thread Safety</p>\n  \n  <p>Distinct objects: Safe.</p>\n  \n  <p>Shared objects: Unsafe.</p>\n</blockquote>\n\n<p>So it seems for me that none of these functions can be called concurrently with another, even when they all are <code>run</code>ning via the same <code>io_service</code> object in one <strong>single</strong> thread:</p>\n\n<pre><code>// thread 1\nsock.async_write(/* ... */); // happens at the same time as async_read from the thread 2\n\n// thread 2\nsock.async_read(/* ... */); // happens at the same time as async_write from the thread 1\n\n// thread 3 (the only thread that calls io_service::run function)\nwhile (true)\n{\n  io_service.run();\n}\n</code></pre>\n\n<p>I think so because there's no wording in the correspoding link that says that it's \"Safe, if these operations running under implicit or explicit strand\".</p>\n\n<p>Am I right?</p>\n"}, {"tags": ["c++", "boost", "clion"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1470247707, "post_id": 38750690, "comment_id": 64875340, "body": "Did you compile boost with whatever compiler you are using here? Sounds like you just extracted the source code at <code>C:&#47;Users&#47;Marczak&#47;boost_1_61_0</code>"}, {"owner": {"reputation": 852, "user_id": 5189849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb1b76043c40b325a8b0bed6280d7be?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon Marczak", "link": "https://stackoverflow.com/users/5189849/szymon-marczak"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1470248150, "post_id": 38750690, "comment_id": 64875565, "body": "@drescherjm No. I&#39;m new in C++.  How to compile it?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1470248965, "post_id": 38750690, "comment_id": 64876024, "body": "Maybe a boost binary download for mingw would be better for you. With that said I am not sure what compiler / toolkit <code>CLion</code> is using under windows. Is it mingw/gcc??"}, {"owner": {"reputation": 852, "user_id": 5189849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb1b76043c40b325a8b0bed6280d7be?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon Marczak", "link": "https://stackoverflow.com/users/5189849/szymon-marczak"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1470249501, "post_id": 38750690, "comment_id": 64876352, "body": "@drescherjm Yes, it is."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470306322, "post_id": 38750690, "comment_id": 64901107, "body": "@SzymonMarczak you might want to add the clion and mingw tags, because they quite centrally describe your problem, don&#39;t they?"}, {"owner": {"reputation": 852, "user_id": 5189849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb1b76043c40b325a8b0bed6280d7be?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon Marczak", "link": "https://stackoverflow.com/users/5189849/szymon-marczak"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470306571, "post_id": 38750690, "comment_id": 64901274, "body": "@MarcusM&#252;ller What tags?"}], "answers": [{"comments": [{"owner": {"reputation": 852, "user_id": 5189849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb1b76043c40b325a8b0bed6280d7be?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon Marczak", "link": "https://stackoverflow.com/users/5189849/szymon-marczak"}, "edited": false, "score": 0, "creation_date": 1470312236, "post_id": 38765661, "comment_id": 64904798, "body": "Worked! Thank you very much."}], "tags": [], "owner": {"reputation": 816, "user_id": 1577539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV1dN.jpg?s=128&g=1", "display_name": "goldwin-es", "link": "https://stackoverflow.com/users/1577539/goldwin-es"}, "is_accepted": true, "score": 1, "last_activity_date": 1470308861, "creation_date": 1470308861, "answer_id": 38765661, "question_id": 38750690, "link": "https://stackoverflow.com/questions/38750690/error-while-importing-boost-1-61-0-to-c-project/38765661#38765661", "title": "Error while importing Boost 1.61.0 to C++ project", "body": "<p>If you're new to C++, I suggest you to download MinGW distribution maintained by Stephan T. Lavavej (Microsoft C++ developer): <a href=\"https://nuwen.net/mingw.html\" rel=\"nofollow\">https://nuwen.net/mingw.html</a>. It, among other tools and libraries, contains pre-built boost binaries. Unpack it and specify the path to it via <code>Settings | Build, Execution, Deployment | Toolchains</code>.</p>\n\n<p>After that you should be able to compile the program with the following <code>CMakeLists.txt</code>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nproject(WsServer)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\nset(SOURCE_FILES src/main.cpp)\n\nfind_package(Boost REQUIRED COMPONENTS filesystem)\ninclude_directories(${Boost_INCLUDE_DIRS})\nadd_executable(WsServer ${SOURCE_FILES})\ntarget_link_libraries(WsServer ${Boost_LIBRARIES})\n</code></pre>\n\n<p>Don't forget to drop CMake cache as <code>find_packages</code> doesn't update successful results due to performance reasons (in CLion it can be done via <code>Cmake toolbar | Cache | red arrows icon</code>).</p>\n\n<p>Some additional remarks:</p>\n\n<ul>\n<li><code>Boost_USE_STATIC_LIBRARIES</code> is not meant to be set manually, it is set by running <code>find_package(Boost)</code>, which uses <code>BOOST_ROOT</code> or <code>BOOST_INCLUDEDIR + BOOST_LIBRARYDIR</code>, you should set those if required. You don't have to do it with the MinGW distro I've linked because it already has boost includes and libraries in accessible locations.</li>\n<li>You can check that the paths to libraries are correct by looking at <code>Boost_*</code> variables in CMake cache.</li>\n<li><code>libs</code> directory inside boost sources is unrelated to the problem, it doesn't conitain any binaries</li>\n<li>You've downloaded boost binaries built with Visual Studio toolchain, not MinGW, so they are incompatible with your setup. If you don't want to use MinGW package I've linked, you have to either find boost binaries built with correct MinGW version or build it yourself.</li>\n</ul>\n"}], "owner": {"reputation": 852, "user_id": 5189849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb1b76043c40b325a8b0bed6280d7be?s=128&d=identicon&r=PG&f=1", "display_name": "Szymon Marczak", "link": "https://stackoverflow.com/users/5189849/szymon-marczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 38765661, "answer_count": 1, "score": 0, "last_activity_date": 1470308861, "creation_date": 1470247277, "last_edit_date": 1470307335, "question_id": 38750690, "link": "https://stackoverflow.com/questions/38750690/error-while-importing-boost-1-61-0-to-c-project", "title": "Error while importing Boost 1.61.0 to C++ project", "body": "<p>I tried to import Boost 1.61.0 (downloaded from <a href=\"https://sourceforge.net/projects/boost/files/boost/1.61.0/\" rel=\"nofollow noreferrer\">SourceForge - Boost 1.61.0</a> as .7z), but failed.</p>\n\n<p>Console:</p>\n\n<pre><code>\"D:\\Program Files (x86)\\JetBrains\\CLion 2016.2\\bin\\cmake\\bin\\cmake.exe\" --build C:\\Users\\Marczak\\.CLion2016.2\\system\\cmake\\generated\\WsServer-e351c9f9\\e351c9f9\\Debug --target WsServer -- -j 4\n[ 50%] Linking CXX executable WsServer.exe\nCMakeFiles\\WsServer.dir\\build.make:96: recipe for target 'WsServer.exe' failed\nCMakeFiles\\Makefile2:66: recipe for target 'CMakeFiles/WsServer.dir/all' failed\nCMakeFiles\\WsServer.dir/objects.a(main.cpp.obj): In function `_static_initialization_and_destruction_0':\nC:/Users/Marczak/boost_1_61_0/boost/system/error_code.hpp:221: undefined reference to `boost::system::generic_category()'\nC:/Users/Marczak/boost_1_61_0/boost/system/error_code.hpp:222: undefined reference to `boost::system::generic_category()'\nC:/Users/Marczak/boost_1_61_0/boost/system/error_code.hpp:223: undefined reference to `boost::system::system_category()'\ncollect2.exe: error: ld returned 1 exit status\nmingw32-make.exe[3]: *** [WsServer.exe] Error 1\nmingw32-make.exe[2]: *** [CMakeFiles/WsServer.dir/all] Error 2\nmingw32-make.exe[1]: *** [CMakeFiles/WsServer.dir/rule] Error 2\nCMakeFiles\\Makefile2:78: recipe for target 'CMakeFiles/WsServer.dir/rule' failed\nmingw32-make.exe: *** [WsServer] Error 2\nMakefile:117: recipe for target 'WsServer' failed\n</code></pre>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nproject(WsServer)\n\nset(BOOST_ROOT \"C:/Users/Marczak/boost_1_61_0\")\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\nset(SOURCE_FILES src/main.cpp)\n\nfind_package(Boost)\ninclude_directories(${Boost_INCLUDE_DIRS})\nadd_executable(WsServer ${SOURCE_FILES})\n</code></pre>\n\n<p>If I do <code>find_package(Boost 1.61.0 COMPONENTS system filesystem REQUIRED)</code> I get:</p>\n\n<pre><code>Error: Unable to find the requested Boost libraries.\nBoost version: 1.61.0\nBoost include path: C:/Users/Marczak/boost_1_61_0\nCould not find the following static Boost libraries:\n        boost_system         boost_filesystem\nNo Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the directory containing Boost libraries or BOOST_ROOT to the location of Boost.\n</code></pre>\n\n<p>I tried to set <code>Boost_USE_STATIC_LIBRARIES</code> on, but it failed too. I use CLion 2016.2.</p>\n\n<p><strong>UPDATE:</strong> I tried older versions too. Same error. What's inside the .7z:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VBpwf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VBpwf.png\" alt=\".7z file\"></a></p>\n\n<p>In other topics I see <code>lib</code> folder. But here I don't see it. What I should put in <code>BOOST_LIBRARYDIR</code>?</p>\n\n<p><strong>UPDATE 2:</strong> Installed binary from <a href=\"https://sourceforge.net/projects/boost/files/boost-binaries/1.61.0/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/boost/files/boost-binaries/1.61.0/</a> . I noticed there's new folder: <code>lib64-msvc-14.0</code>. It contains many .dll and .lib files, e.g. <code>boost_atomic-vc140-mt-1_61.dll</code>.</p>\n\n<p>Boost.org says:</p>\n\n<blockquote>\n  <p>If you plan to use your tools from the Windows command prompt, you're in the right place. If you plan to build from the Cygwin bash shell, you're actually running on a POSIX platform and should follow the instructions for getting started on Unix variants. Other command shells, such as MinGW's MSYS, <strong>are not supported\u2014they may or may not work</strong>.</p>\n</blockquote>\n\n<p>I'll try using Cygwin.</p>\n"}, {"tags": ["c++", "c", "opengl", "sdl", "sdl-ttf"], "comments": [{"owner": {"reputation": 575, "user_id": 5403975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4092f9309bc4ab2f0e180e014508ca3a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5403975/michael"}, "edited": false, "score": 0, "creation_date": 1470312591, "post_id": 38750624, "comment_id": 64905000, "body": "Sorry, but I think you should first learn more about OpenGL before you try to make what are currently trying. First of all OpenGL has no build in text functions, also not modern OpenGL. Moreover you should not use this old OpenGL 1.1 with it&#39;s fixed function pipeline. It&#39;s definitely completely deprecated. And I never saw glVertex2px before. Also I can&#39;t  find something about it. So finally it&#39;s hard to say what&#39;s wrong from this context without further information. Maybe you set up the Modelview/Projection matrix wrong so you can only see a small section of the whole?"}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "reply_to_user": {"reputation": 575, "user_id": 5403975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4092f9309bc4ab2f0e180e014508ca3a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5403975/michael"}, "edited": false, "score": 0, "creation_date": 1470313455, "post_id": 38750624, "comment_id": 64905611, "body": "@Michael About <code>glVertex2px</code>, it&#39;s a macro that I&#39;ve made myself which draws things using the number of pixels from the top left corner of the window like in SDL. In 2D, I find that more practical. I forgot to include its definition in the code, but I edited to correct that."}], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 2, "last_activity_date": 1470326103, "creation_date": 1470326103, "answer_id": 38772106, "question_id": 38750624, "link": "https://stackoverflow.com/questions/38750624/text-in-opengl-using-sdl-ttf/38772106#38772106", "title": "Text in OpenGL using SDL_TTF", "body": "<p>Your resulting texture is filled with solid colour. What makes it shape the text is alpha channel, but you have no alpha blending enabled so you don't see it. Add</p>\n\n<pre><code>glEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n</code></pre>\n\n<p>or at least alpha test (will produce sharper edges due to lack of blending - for some fonts it even look better that way).</p>\n\n<p>Also note that you didn't freed neither generated <code>SDL_Surface</code> nor GL texture; that way you'll quickly run out of memory. Texture could be reused and SDL_Surface may be freed as soon as you copied data to GL texture.</p>\n"}], "owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 38772106, "answer_count": 1, "score": 0, "last_activity_date": 1470326103, "creation_date": 1470247065, "last_edit_date": 1470313217, "question_id": 38750624, "link": "https://stackoverflow.com/questions/38750624/text-in-opengl-using-sdl-ttf", "title": "Text in OpenGL using SDL_TTF", "body": "<p>I'm a beginner in OpenGL and I've created a function to write text in OpenGL using SDL_TTF. Here is the code for my function:</p>\n\n<pre><code>#define WINDOW_WIDTH 832\n#define WINDOW_HEIGHT 487\n#define glVertex2px(x,y) glVertex2d((double)(x) * 2.0 / (double)WINDOW_WIDTH - 1.0, 1.0 - (double)(y) * 2.0 / (double)WINDOW_HEIGHT);\nvoid glWriteText2d(TTF_Font *font,const char *text,SDL_Color color,const int x,const int y){\n    GLuint texture;\n    SDL_Surface *surface;\n    surface = TTF_RenderText_Blended(font,text,color);\n    glGenTextures(1,&amp;texture);\n    glBindTexture(GL_TEXTURE_2D,texture);\n    gluBuild2DMipmaps(GL_TEXTURE_2D,4,surface-&gt;w,surface-&gt;h,GL_RGBA,GL_UNSIGNED_BYTE,surface-&gt;pixels);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_REPEAT);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_REPEAT);\n    GLboolean textureIsEnabled = glIsEnabled(GL_TEXTURE_2D);\n    glEnable(GL_TEXTURE_2D);\n    glColor3ub(255,255,255);\n    glBegin(GL_QUADS);\n        glTexCoord2f(0,0);\n        glVertex2px(x,y);\n        glTexCoord2f(0,1);\n        glVertex2px(x,y + surface-&gt;h);\n        glTexCoord2f(1,1);\n        glVertex2px(x + surface-&gt;w,y + surface-&gt;h);\n        glTexCoord2f(1,0);\n        glVertex2px(x + surface-&gt;w,y);\n    glEnd();\n    if(!textureIsEnabled){\n        glDisable(GL_TEXTURE_2D);\n    }\n}\n</code></pre>\n\n<p>This function doesn't work because when I use it, it draws a rectangle which is the color of <code>color</code> at the place where the text should be. What should I change in my code so that it works?</p>\n"}, {"tags": ["c++", "visual-studio", "video", "ms-media-foundation"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1470246740, "post_id": 38750483, "comment_id": 64874842, "body": "0xC00D3704 is MF_E_HW_MFT_FAILED_START_STREAMING"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1470247287, "post_id": 38750483, "comment_id": 64875137, "body": "Thanks! I actually knew that but somehow didn&#39;t spot the code in there.  I don&#39;t see why it&#39;s preceded by all these F bytes, and why the NotifyError(hr); in the example code doesn&#39;t show the error to me. Windows doesn&#39;t make it easy sometimes..."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470249394, "post_id": 38750483, "comment_id": 64876283, "body": "The extra F bytes are sign extension on a negative number. Has nothing to do with Windows."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1470249982, "post_id": 38750483, "comment_id": 64876663, "body": "Yes, I see that now. Thank you for clarifying. I simply meant that I don&#39;t understand why the code is FFFFFFFFC00D3704 instead of 00000000C00D3704."}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1470292030, "post_id": 38750483, "comment_id": 64891919, "body": "Something is possibly wrong with H.264 stream. I used to deal with other StraTech products and I had to patch other problematic things with their [cheap] hardware because they cut corners on their side."}], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470247464, "creation_date": 1470246542, "last_edit_date": 1470247464, "question_id": 38750483, "link": "https://stackoverflow.com/questions/38750483/cant-use-mfcapturetofile-with-startech-video-grabber", "title": "can&#39;t use MFCaptureToFile with startech video grabber", "body": "<p>I have a <a href=\"http://www.adorama.com/stsvid2usb23.html?gclid=CjwKEAjwrIa9BRD5_dvqqazMrFESJACdv27G7Z5piQHlk8cmfIFjBd2IXSDjwGGXlHTd487uwg2KYhoCoa7w_wcB\" rel=\"nofollow\">startech composite to usb video grabber</a> connected to a small security cam that I want to use in order to capture video for a custom Windows application. I am using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee663604(v=vs.85).aspx\" rel=\"nofollow\">MFCaptureToFile</a> as an example for learning the yoga of how to do this in Visual Studio with C++.</p>\n\n<p>The example code builds and runs fine on my Windows 7 setup and performs normally with a cheapo <a href=\"http://www.tenettech.com/product/2410/logitech-webcam-pro-9000\" rel=\"nofollow\">logitech usb webcam</a>, but not with my little security cam+video grabber rig. However, the camera does work in Windows. I can use other applications (other custom ones written using the EmbarcaderoXE/borland/vcl based video grabbing stack) work perfectly.</p>\n\n<p>When I break on the callback function:</p>\n\n<pre><code>HRESULT CCapture::OnReadSample(\nHRESULT hrStatus,\nDWORD /*dwStreamIndex*/,\nDWORD /*dwStreamFlags*/,\nLONGLONG llTimeStamp,\nIMFSample *pSample      // Can be NULL\n)\n</code></pre>\n\n<p>with the logitech cam, <code>hrStatus</code> is <code>S_OK</code> (as it should be). When I break using the startech device it is <code>-1072875772</code> which is <code>FFFFFFFFC00D3704</code> in hex and a string of Chinese characters in human-readable unicode format. So that is of little help.</p>\n\n<p>Edited due to first comment by Mike Vine:\nActually, the code stands for MF_E_HW_MFT_FAILED_START_STREAMING. Why does it fail?</p>\n\n<p>The EmbarcaderXE-based video grabbing app that I have uses VCL as a backend, which I've read is incompatible with visual studio? For various reasons I need to do this in VS.</p>\n"}, {"tags": ["c++", "variables"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 1, "creation_date": 1470246061, "post_id": 38750333, "comment_id": 64874471, "body": "Unassigned variables exhibit undefined behavior."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1470246063, "post_id": 38750333, "comment_id": 64874473, "body": "UB is UB.  You cannot expect <code>a</code> to be anything."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1470246084, "post_id": 38750333, "comment_id": 64874485, "body": "How can you say <i>always</i>?"}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1470246143, "post_id": 38750333, "comment_id": 64874516, "body": "It&#39;s just random. It could even be reproducible on your machine, but it doesn&#39;t mean it is always like that. Changing optimization flags, or compiler, or architecture, or whatever, could give you different results."}, {"owner": {"reputation": 27792, "user_id": 1830293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6prVF.jpg?s=128&g=1", "display_name": "DAXaholic", "link": "https://stackoverflow.com/users/1830293/daxaholic"}, "edited": false, "score": 1, "creation_date": 1470246241, "post_id": 38750333, "comment_id": 64874571, "body": "In that simple example it is likely to be 0 as (at least for Windows) you get new mem pages from the zero page pool so that you can&#39;t &#39;spy&#39; on other processes freed pages and possibly get secure data - but as other&#39;s have said don&#39;t rely on that. As soon as you alloc / free memory and reuse previous memory from your own process (which the stdlib could also do) you will see &#39;garbage&#39; in uninitialized data"}, {"owner": {"reputation": 471, "user_id": 3737891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ulyNU.jpg?s=128&g=1", "display_name": "Remis", "link": "https://stackoverflow.com/users/3737891/remis"}, "edited": false, "score": 1, "creation_date": 1470246414, "post_id": 38750333, "comment_id": 64874664, "body": "Uninitialized values result in undefined (unpredictable) behaviour; thus you are &quot;not allowed&quot; to use this value. For example reading the same uninitialized variable can return different values."}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 5854499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1042009565820313/picture?type=large", "display_name": "Shlomi", "link": "https://stackoverflow.com/users/5854499/shlomi"}, "edited": false, "score": 0, "creation_date": 1470246418, "post_id": 38750370, "comment_id": 64874668, "body": "I just realized I fooled myself. I actually use g++ compiler. Oh my...."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 128, "user_id": 5854499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1042009565820313/picture?type=large", "display_name": "Shlomi", "link": "https://stackoverflow.com/users/5854499/shlomi"}, "edited": false, "score": 0, "creation_date": 1470246438, "post_id": 38750370, "comment_id": 64874679, "body": "The GNU C++ compiler is g++. It usually, in my experience, sets local variables to zero if they&#39;re not initialized. But I haven&#39;t read any guarantee of that, and other compilers generally don&#39;t."}, {"owner": {"reputation": 128, "user_id": 5854499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1042009565820313/picture?type=large", "display_name": "Shlomi", "link": "https://stackoverflow.com/users/5854499/shlomi"}, "edited": false, "score": 0, "creation_date": 1470246736, "post_id": 38750370, "comment_id": 64874840, "body": "Thank you, but I want to ask which compiler does not set UB values? I know they generally much faster than g++"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 128, "user_id": 5854499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1042009565820313/picture?type=large", "display_name": "Shlomi", "link": "https://stackoverflow.com/users/5854499/shlomi"}, "edited": false, "score": 0, "creation_date": 1470246835, "post_id": 38750370, "comment_id": 64874896, "body": "@Shlomi: I think most compilers won&#39;t clear local variables by default. For example, Visual C++ doesn&#39;t. There is no such thing as &quot;UB values&quot; though :) But I think I understood what you meant."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 3, "last_activity_date": 1470247363, "last_edit_date": 1470247363, "creation_date": 1470246119, "answer_id": 38750370, "question_id": 38750333, "link": "https://stackoverflow.com/questions/38750333/unassigned-variable-value/38750370#38750370", "title": "Unassigned variable value", "body": "<p>It depends on the compiler and options. Formally you have an <em>indeterminate value</em>. But the g++ compiler tends to set those variables to 0.</p>\n\n<p>Thinking about what happens at the machine code level, if <code>a</code> is 0 the first time execution passes through the declaration, there is nothing in the program that reasonably could cause the value in that memory location to change, so then you get an infinite loop.</p>\n\n<p>At the source code level, however, use of that indeterminate value (including just checking it) incurs formal Undefined Behavior, where anything or nothing can happen, including that what one expects would happen, happens. :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 4, "last_activity_date": 1470247064, "last_edit_date": 1470247064, "creation_date": 1470246178, "answer_id": 38750385, "question_id": 38750333, "link": "https://stackoverflow.com/questions/38750333/unassigned-variable-value/38750385#38750385", "title": "Unassigned variable value", "body": "<p>Reading an uninitialized variable is \"undefined behaviour\" - meaning \"anything can happen, your compiler is free to do whatever it pleases\" (and not just to the variable in question, actually to your <em>entire</em> program).</p>\n\n<p>Don't invoke undefined behaviour in your programs. Or suffer the (unpredictable) consequences.</p>\n"}, {"comments": [{"owner": {"reputation": 128, "user_id": 5854499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1042009565820313/picture?type=large", "display_name": "Shlomi", "link": "https://stackoverflow.com/users/5854499/shlomi"}, "edited": false, "score": 0, "creation_date": 1470259800, "post_id": 38750398, "comment_id": 64881730, "body": "Thank you a lot. I did not read this answer before, but it explains a lot to me now. I asked my father the same question and you gave it like him. I understand that UB is very dangerous and MUST be avoided."}], "tags": [], "owner": {"reputation": 4676, "user_id": 2052730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atz9A.jpg?s=128&g=1", "display_name": "Sasha Pachev", "link": "https://stackoverflow.com/users/2052730/sasha-pachev"}, "is_accepted": false, "score": 2, "last_activity_date": 1470246230, "creation_date": 1470246230, "answer_id": 38750398, "question_id": 38750333, "link": "https://stackoverflow.com/questions/38750333/unassigned-variable-value/38750398#38750398", "title": "Unassigned variable value", "body": "<p>When you do not assign a value to a variable, and then reference it, the behavior of the program is not defined as that value could be whatever garbage was by luck at that memory location. In your case, luck has it that it is always zero. If you change the operating system/compiler/compiler options or even just what is going on in the operating system you could very well have different results.</p>\n"}], "owner": {"reputation": 128, "user_id": 5854499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1042009565820313/picture?type=large", "display_name": "Shlomi", "link": "https://stackoverflow.com/users/5854499/shlomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 0, "accepted_answer_id": 38750370, "answer_count": 3, "score": -1, "last_activity_date": 1470247363, "creation_date": 1470245955, "last_edit_date": 1470246453, "question_id": 38750333, "link": "https://stackoverflow.com/questions/38750333/unassigned-variable-value", "title": "Unassigned variable value", "body": "<p>When I use the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n\n    while(1) {\n        int a;\n        if(a != 0) {\n            cout &lt;&lt; a &lt;&lt; endl;\n            break;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program never stops.</p>\n\n<p>I learned that unassigned variables store whatever there is in the specific location in memory.\n <strong><em>Why always the value of a is 0?</em></strong></p>\n\n<p>Maybe because its my large memory capacity or its just the compiler?\nI use GNU compiler C++ 11\nI use Release build configuration.\nI'm also newbie to this language.</p>\n\n<p><strong><em>EDIT:</em></strong>\nI use g++ compiler, got my answer.</p>\n"}, {"tags": ["c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 5, "creation_date": 1470245528, "post_id": 38750179, "comment_id": 64874176, "body": "If you have no sub-structures don&#39;t put <i>anything</i> in the vector."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1470246088, "post_id": 38750179, "comment_id": 64874487, "body": "If you have to ask whether or not a null pointer is appropriate in your graph then you&#39;re going to have a bad time."}], "answers": [{"comments": [{"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 3, "creation_date": 1470245862, "post_id": 38750255, "comment_id": 64874357, "body": "Avoid <code>NULL</code> too. Use <code>nullptr</code>."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1470245958, "post_id": 38750255, "comment_id": 64874405, "body": "<code>nullptr</code> is not defined in some older versions of C++."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1470246411, "post_id": 38750255, "comment_id": 64874662, "body": "@MarkLakata Good point, but no matter how you specify it, <code>0</code> or otherwise, invalid pointers shouldn&#39;t be in that list."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1470245661, "creation_date": 1470245661, "answer_id": 38750255, "question_id": 38750179, "link": "https://stackoverflow.com/questions/38750179/c-null-pointers-and-structs/38750255#38750255", "title": "C++ : Null pointers and structs", "body": "<p>There's no need to put arbitrary \"nothing\" records in a <code>std::vector</code>, this isn't like a variable-length C-style array where you must terminate with some kind of delimiter. Just leave it empty.</p>\n\n<p>In general practice you want to avoid putting <code>NULL</code> into lists like this where something might iterate over the contents and re-reference that pointer, causing a crash.</p>\n"}, {"tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": 0, "last_activity_date": 1470246277, "creation_date": 1470246277, "answer_id": 38750413, "question_id": 38750179, "link": "https://stackoverflow.com/questions/38750179/c-null-pointers-and-structs/38750413#38750413", "title": "C++ : Null pointers and structs", "body": "<p>If <code>RenderGroup</code> is a base class and your <code>Children</code> vector is storing arbitrary children classes of <code>RenderGroup</code> then this approach is \"fine\" (though smart pointers would probably be preferred).</p>\n\n<p>However, as tadman mentioned, if you're using pointers to represent the absense of a <code>RenderGroup</code>, you'll probably want to instead just remove the items in the vector when they are no longer needed.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6207098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1196e7dc9c09c2a8a1f4ec90ad6a2914?s=128&d=identicon&r=PG&f=1", "display_name": "Matta", "link": "https://stackoverflow.com/users/6207098/matta"}, "is_accepted": false, "score": 0, "last_activity_date": 1470250147, "creation_date": 1470250147, "answer_id": 38751460, "question_id": 38750179, "link": "https://stackoverflow.com/questions/38750179/c-null-pointers-and-structs/38751460#38751460", "title": "C++ : Null pointers and structs", "body": "<p>See if this structure can help:</p>\n\n<pre><code>struct RenderGroup {\n    std::map&lt;Renderable, std::vector&lt;RenderGroup*&gt;&gt; Renderables;\n}\n</code></pre>\n\n<p>List of child (RenderGroup) objects are mapped to Renderable object.</p>\n"}, {"comments": [{"owner": {"reputation": 90, "user_id": 5703833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WDt1r.jpg?s=128&g=1", "display_name": "PearlSek", "link": "https://stackoverflow.com/users/5703833/pearlsek"}, "edited": false, "score": 0, "creation_date": 1470407591, "post_id": 38751757, "comment_id": 64953699, "body": "Thanks for your useful answer. So how to solve the slicing problems ? Pointers ?"}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 1, "last_activity_date": 1470251136, "creation_date": 1470251136, "answer_id": 38751757, "question_id": 38750179, "link": "https://stackoverflow.com/questions/38750179/c-null-pointers-and-structs/38751757#38751757", "title": "C++ : Null pointers and structs", "body": "<p>A <code>std::vector</code> is not fixed size, so if there are no elements in it, <code>size</code> will return <code>0</code> and empty will return <code>true</code>.</p>\n\n<pre><code>std::vector&lt;int&gt; v;\nauto sz = v.size();  // sz has value 0\nauto e = v.empty();  // true\nv.push_back(42);\nsz = v.size();  // 1\ne = v.emi empty();  // false\n</code></pre>\n\n<p>You can also remove elements (the vector moves all the followingv elements down to fill the gap)</p>\n\n<pre><code>std::vector&lt;int&gt; v { 1, 2, 3 };\nauto it = v.find(2);\nif (it != v.end())\n    v.erase(it);  // v now contains 1, 3\n</code></pre>\n\n<p>So, in theory, no you don't need to put <code>nullptr</code>s in your vector. This assumes you've designed your application in a way that doesn't require a certain population size in your vector; if so, vector might not be the right container. Consider std::array.</p>\n\n<p>There is a problem with your renderables vector, though: the vector stores <em>instances</em> of <code>Renderable</code>. The elements I'm the vector are exactly the size of a Renderable. So if you try and store a derived class, e.g <code>Mesh</code>, you will lose the derived classes extra fields.</p>\n\n<p>This is called slicing. <a href=\"https://en.m.wikipedia.org/wiki/Object_slicing\" rel=\"nofollow\">https://en.m.wikipedia.org/wiki/Object_slicing</a></p>\n\n<p>You'll need to store pointers or references to the instances of the objects. Which depends on lifetime and ownership of the instances.</p>\n\n<p>If your vector owns the remediables, you could use <code>std::vector&lt;std::unique_pre&lt;Remediable&gt;&gt;</code>.</p>\n\n<p>If you are being given the instances from your caller, perhaps <code>std::shared_ptr</code>.</p>\n"}], "owner": {"reputation": 90, "user_id": 5703833, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/WDt1r.jpg?s=128&g=1", "display_name": "PearlSek", "link": "https://stackoverflow.com/users/5703833/pearlsek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 38751757, "answer_count": 4, "score": 0, "last_activity_date": 1470251136, "creation_date": 1470245403, "last_edit_date": 1470249382, "question_id": 38750179, "link": "https://stackoverflow.com/questions/38750179/c-null-pointers-and-structs", "title": "C++ : Null pointers and structs", "body": "<p>If I want to make a struct for representing an item to render on the screen, and contains:</p>\n\n<ol>\n<li>A list of natives \"renderables\" (<code>meshes</code>, <code>triangles</code>, etc)</li>\n<li>A pointer to others sub-structures</li>\n</ol>\n\n<p>Does this:</p>\n\n<pre><code>struct RenderGroup {\n    std::vector&lt;RenderGroup*&gt; Children;\n    std::vector&lt;Renderable&gt; Renderables;\n}\n</code></pre>\n\n<p>What is the best way to do this? And if I have no sub-structures, can I just put a null pointer in the vector ?</p>\n\n<p><strong>Edit :</strong> Bad tags</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1470244957, "post_id": 38749976, "comment_id": 64873817, "body": "Having a reference to a pointer is pretty much useless unless you are supposed to modify the pointer, which you are not doing (which is why you marked it as a constant pointer I guess? Which makes it even more useless actually). Just declare the argument as plain <code>const char *</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1470245183, "post_id": 38749976, "comment_id": 64873970, "body": "As for your problem, when asking about build errors it helps (a lot!) if you include the actual errors you get (in full, complete, and unedited) in the body of the question."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1470245703, "post_id": 38750194, "comment_id": 64874279, "body": "Or, you know, <a href=\"http://en.cppreference.com/w/cpp/algorithm/count\" rel=\"nofollow noreferrer\"><code>std::count_if</code></a>"}, {"owner": {"reputation": 57, "user_id": 6567376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-YlpeYI6Laig/AAAAAAAAAAI/AAAAAAAAAaI/TCzn7Qs57M8/photo.jpg?sz=128", "display_name": "Shaun Ziqin Rong", "link": "https://stackoverflow.com/users/6567376/shaun-ziqin-rong"}, "edited": false, "score": 0, "creation_date": 1470246014, "post_id": 38750194, "comment_id": 64874444, "body": "Thank you for the response. In that case, why can&#39;t a C-style string literal be deduced as the type of <code>const char *</code>. In template type deduction, array to pointer conversion is allowed and implicit."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 57, "user_id": 6567376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-YlpeYI6Laig/AAAAAAAAAAI/AAAAAAAAAaI/TCzn7Qs57M8/photo.jpg?sz=128", "display_name": "Shaun Ziqin Rong", "link": "https://stackoverflow.com/users/6567376/shaun-ziqin-rong"}, "edited": false, "score": 0, "creation_date": 1470246234, "post_id": 38750194, "comment_id": 64874565, "body": "@ShaunZiqinRong Because the conversion comes later.  The actual type of a string literal is a <code>const char[n]</code> and that is what the template uses."}, {"owner": {"reputation": 57, "user_id": 6567376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-YlpeYI6Laig/AAAAAAAAAAI/AAAAAAAAAaI/TCzn7Qs57M8/photo.jpg?sz=128", "display_name": "Shaun Ziqin Rong", "link": "https://stackoverflow.com/users/6567376/shaun-ziqin-rong"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470246685, "post_id": 38750194, "comment_id": 64874809, "body": "@NathanOliver Understood. The conversion happens for parameters passed to the function. Thanks a lot for replying."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470248282, "post_id": 38750194, "comment_id": 64875630, "body": "@NathanOliver Heh, the fix to <code>[2]</code> is correct but the non-<code>const</code> part I got right the first time. <code>const T&amp;</code> so <code>T</code> is just <code>char[2]</code>. Thanks though."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470248329, "post_id": 38750194, "comment_id": 64875656, "body": "@Barry Of course.  I forgot it was <code>const T</code> in the parameter.  Sorry for that."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470248722, "post_id": 38750194, "comment_id": 64875886, "body": "@NathanOliver No worries. Appreciate the fix."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1470248289, "last_edit_date": 1470248289, "creation_date": 1470245474, "answer_id": 38750194, "question_id": 38749976, "link": "https://stackoverflow.com/questions/38749976/no-matching-function-call-for-template-specialization-of-const-char/38750194#38750194", "title": "No matching function call for template specialization of const char*", "body": "<p>The way specializations work is: first deduction happens against the primary template, and then any specializations are considered. When you call <code>count(vc, \"I\")</code>, we perform deduction on</p>\n\n<pre><code>template &lt;typename T&gt;\nsize_t count(const vector&lt;T&gt;&amp; v, const T&amp; find)\n</code></pre>\n\n<p>which will deduce <code>const char*</code> for the first <code>T</code>, but <code>char[2]</code> for the second <code>T</code>. Since those don't match, deduction fails. It doesn't matter what your specializations are (which are wrong anyway, for the same reason). </p>\n\n<hr />\n\n<p>Instead of specializing and using the same <code>T</code> in both places, simply provide two overloads:</p>\n\n<pre><code>template &lt;class Container, class ELem&gt;\nsize_t count(Container const&amp; c, Elem const&amp; elem); // uses operator==\n\ntemplate &lt;class Container, class UnaryPredicate&gt;\nsize_t count(Container const&amp; c, UnaryPredicate f); // uses f()\n</code></pre>\n\n<p>That way, you can write:</p>\n\n<pre><code>count(vd, [](double d){return abs(d-0.1) &lt; 0.00001;});\ncount(vc, [](const char* p){ return strcmp(p, \"I\") == 0; });\n</code></pre>\n\n<p>without added duplication. </p>\n"}], "owner": {"reputation": 57, "user_id": 6567376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-YlpeYI6Laig/AAAAAAAAAAI/AAAAAAAAAaI/TCzn7Qs57M8/photo.jpg?sz=128", "display_name": "Shaun Ziqin Rong", "link": "https://stackoverflow.com/users/6567376/shaun-ziqin-rong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 38750194, "answer_count": 1, "score": 1, "last_activity_date": 1470248289, "creation_date": 1470244702, "question_id": 38749976, "link": "https://stackoverflow.com/questions/38749976/no-matching-function-call-for-template-specialization-of-const-char", "title": "No matching function call for template specialization of const char*", "body": "<p>I am trying to learn the template specialization for C++ language, coming across this situation I can't solve myself. Codes below:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\nsize_t count(const vector&lt;string&gt; &amp;, const char* const &amp;);\n\ntemplate &lt;typename T&gt;\nsize_t count(const vector&lt;T&gt;&amp; v, const T&amp; find) {\n  size_t c = 0;\n  for (auto ele : v) {\n    if (ele == find)\n      ++c;\n  }\n  return c;\n}\n\ntemplate &lt;&gt;\nsize_t count(const vector&lt;double&gt; &amp;v, const double &amp;find) {\n  size_t c = 0;\n  for (auto ele : v) {\n    if (abs(ele - find) &lt; 0.0001)\n      ++c;\n  }\n  return c;\n}\n\ntemplate &lt;&gt;\nsize_t count(const vector&lt;const char*&gt; &amp;v, const char* const &amp;find) {\n  size_t c = 0;\n  for (auto ele : v) {\n    if (strcmp(ele, find) == 0)\n      ++c;\n  }\n  return c;\n}\n\nsize_t count(const vector&lt;string&gt; &amp;v, const char* const &amp;find) {\n  size_t c = 0;\n  for (auto ele : v) {\n    if (strcmp(ele.c_str(), find) == 0)\n      ++c;\n  }\n  return c;\n}\n\nint main() {\n  vector&lt;double&gt; vd{0.1, 0.1, 0.2};\n  cout &lt;&lt; count(vd, 0.1) &lt;&lt; endl;\n  vector&lt;string&gt; vs{\"I\", \"you\", \"I\"};\n  cout &lt;&lt; count(vs, \"I\") &lt;&lt; endl;\n  vector&lt;const char*&gt; vc{\"I\", \"you\", \"I\"};\n  cout &lt;&lt; count(vc, \"I\") &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>Compiling this code, <code>cout &lt;&lt; count(vc, \"I\") &lt;&lt; endl;</code> will report error about not  finding a matching function call.</p>\n\n<p>However, I deliberately declare a specialization for this function call, namely <code>template &lt;&gt; size_t count(const vector&lt;const char*&gt; &amp;v, const char* const &amp;find)</code></p>\n\n<p>What is wrong here?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates", "variadic-functions"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1470244786, "post_id": 38749951, "comment_id": 64873748, "body": "I assume that <code>bar</code> is supposed to call <code>foo</code>? Not call itself recursively?"}, {"owner": {"reputation": 978, "user_id": 1705189, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ZpDCW.jpg?s=128&g=1", "display_name": "Duly Kinsky", "link": "https://stackoverflow.com/users/1705189/duly-kinsky"}, "edited": false, "score": 0, "creation_date": 1470248074, "post_id": 38749951, "comment_id": 64875521, "body": "have you looked at an associative array? This seems like a problem for this type of data structure"}, {"owner": {"reputation": 73, "user_id": 4434758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb7bb8e2124bb5b1b27844a45caf29?s=128&d=identicon&r=PG&f=1", "display_name": "wannabe programmer", "link": "https://stackoverflow.com/users/4434758/wannabe-programmer"}, "edited": false, "score": 0, "creation_date": 1470298175, "post_id": 38749951, "comment_id": 64895487, "body": "Yes, i was wrong, it&#39;s of course &#39;foo&#39;, not &#39;bar&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1470253635, "post_id": 38751934, "comment_id": 64878722, "body": "I would have found making a tuple-of-2-tuples, then flattening, to be my default approach.  In C++17, I could use <code>if constexpr</code>, <code>tupler</code>, a lambda and <code>std::apply</code> to do the call inline, which would be really fun."}], "tags": [], "owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "is_accepted": false, "score": 2, "last_activity_date": 1470251801, "creation_date": 1470251801, "answer_id": 38751934, "question_id": 38749951, "link": "https://stackoverflow.com/questions/38749951/how-to-create-custom-integer-sequence-in-c/38751934#38751934", "title": "How to create custom integer sequence in C++", "body": "<p>Here's a C++14 solution, but all the necessary library parts can be written in C++11 as well.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;utility&gt;\n\ntemplate &lt;typename ... Types&gt;\nvoid foo(const Types &amp; ... values)\n{\n    using swallow = bool[];\n    (void)swallow{ (std::cout &lt;&lt; values &lt;&lt; std::endl,false)... };\n}\n\ntemplate &lt;std::size_t N, bool = (N%2==0)&gt;\nstruct pick {\n    template&lt;typename... Types&gt;\n    static std::size_t get(const std::tuple&lt;Types...&gt;&amp;) { return N/2; }\n};\n\ntemplate &lt;std::size_t N&gt;\nstruct pick&lt;N,false&gt; {\n    template&lt;typename... Types&gt;\n    static auto get(const std::tuple&lt;Types...&gt;&amp; t) { return std::get&lt;N/2&gt;(t); }\n};\n\ntemplate &lt;std::size_t... Indices, typename ... Types&gt;\nvoid bar2(const std::index_sequence&lt;Indices...&gt;, const Types &amp; ... values)\n{\n    auto x = std::tie(values...);\n    foo(pick&lt;Indices&gt;::get(x)...);\n}\n\ntemplate &lt;typename ... Types&gt;\nvoid bar(const Types &amp; ... values)\n{\n    bar2(std::index_sequence_for&lt;Types...,Types...&gt;(), values...);\n}\n\nint main()\n{\n    bar( \"Hallo\", 42, 1.23 );\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/aab30fcad790aa40\" rel=\"nofollow\"><strong>Live example</strong></a></p>\n\n<p>It is currently zero-based, but a <code>+1</code> in the right place will fix that easily. Also, it creates an intermediate <code>std::tuple</code> with references to the values, if performance is an issue better options might exist but since you weren't using <code>std::forward</code> I figured that a small performance impact might be acceptable for you.</p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1470278345, "last_edit_date": 1470278345, "creation_date": 1470254351, "answer_id": 38752571, "question_id": 38749951, "link": "https://stackoverflow.com/questions/38749951/how-to-create-custom-integer-sequence-in-c/38752571#38752571", "title": "How to create custom integer sequence in C++", "body": "<p>Not really elegant but, using tuples, <code>std::tie</code>, etc...</p>\n\n<p>The following example should work with C++11</p>\n\n<p><strong>--- EDIT ---</strong></p>\n\n<p>Modified and unified (C++11 without C++14 elements) my first example.</p>\n\n<p>There is no need of <code>std::index_sequence</code> (a trivial <code>struct indSeq</code> can be used instead) or <code>std::make_index_sequence</code> (the index sequence can be contructed step by step using <code>sizeof...(I)</code>); no need of <code>qux()</code> anymore.</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\n\nvoid foo ()\n { }\n\ntemplate &lt;typename T0, typename ... Types&gt;\nvoid foo (const T0 &amp; v0, const Types &amp; ... values)\n {\n   std::cout &lt;&lt; \"-- \" &lt;&lt; v0 &lt;&lt; std::endl;\n\n   foo(values...);\n }\n\n\ntemplate &lt;std::size_t ...&gt;\nstruct indSeq\n { };\n\ntemplate &lt;std::size_t ... Is, typename ... Ts1&gt;\nvoid baz (std::size_t, const indSeq&lt;Is...&gt; &amp;, const std::tuple&lt;Ts1...&gt; &amp; t)\n { foo(std::get&lt;Is&gt;(t)...); }\n\ntemplate &lt;std::size_t ... Is, typename ... Ts1, typename T0, typename ... Ts2&gt;\nvoid baz (std::size_t n, const indSeq&lt;Is...&gt; &amp;, const std::tuple&lt;Ts1...&gt; &amp; t,\n          const T0 &amp; v0, const Ts2 &amp; ... vs)\n { baz(n+1U, indSeq&lt;Is..., sizeof...(Is), sizeof...(Is)+1U&gt;(),\n       std::tuple_cat(t, std::tie(n), std::tie(v0)), vs...); }\n\ntemplate &lt;typename ... Types&gt;\nvoid bar (const Types &amp; ... values)\n { baz (1U, indSeq&lt;&gt;(), std::tuple&lt;&gt;(), values...); }\n\nint main()\n {\n   bar(11, 22L, \"33\", 44.44);\n   return 0;\n }\n</code></pre>\n\n<p>p.s.: sorry for my bad English. </p>\n"}], "owner": {"reputation": 73, "user_id": 4434758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb7bb8e2124bb5b1b27844a45caf29?s=128&d=identicon&r=PG&f=1", "display_name": "wannabe programmer", "link": "https://stackoverflow.com/users/4434758/wannabe-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1979, "favorite_count": 1, "accepted_answer_id": 38752571, "answer_count": 2, "score": 6, "last_activity_date": 1518294065, "creation_date": 1470244627, "last_edit_date": 1518294065, "question_id": 38749951, "link": "https://stackoverflow.com/questions/38749951/how-to-create-custom-integer-sequence-in-c", "title": "How to create custom integer sequence in C++", "body": "<p>I have function like this:</p>\n\n<pre><code>template &lt;typename ... Types&gt;\nvoid foo(const Types &amp; ... values)\n{\n    // expected that 'values' is sequence like\n    // '1, customvalue1, 2, customvalue2, 3,...'\n}\n</code></pre>\n\n<p>And second function:</p>\n\n<pre><code>template &lt;typename ... Types&gt;\nvoid bar(const Types &amp; ... values)\n{\n    // where 'values' are any variables\n    // some magic here\n    foo((int_seq&lt;sizeof...(Types)&gt;, values)...);\n}\n</code></pre>\n\n<p>I'd like to pass any sequence of variables to <strong>bar</strong>, so that this sequence convert to sequence like <strong>'1, value1, 2, value2, 3, value3'</strong>. So each value follows its number in base sequence. But I cannot create this <strong>'magic code'</strong> to transform sequence on compile phase between this two state.</p>\n"}, {"tags": ["java", "android", "c++", "opencv", "opencv4android"], "comments": [{"owner": {"reputation": 699, "user_id": 5059864, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9507a8d18307b659b895f92a5d887808?s=128&d=identicon&r=PG&f=1", "display_name": "Vikesh Prasad", "link": "https://stackoverflow.com/users/5059864/vikesh-prasad"}, "edited": false, "score": 0, "creation_date": 1481874996, "post_id": 38749867, "comment_id": 69559297, "body": "Can you share the complete code for reference? I also have to implement the same Functionality."}, {"owner": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "reply_to_user": {"reputation": 699, "user_id": 5059864, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9507a8d18307b659b895f92a5d887808?s=128&d=identicon&r=PG&f=1", "display_name": "Vikesh Prasad", "link": "https://stackoverflow.com/users/5059864/vikesh-prasad"}, "edited": false, "score": 0, "creation_date": 1482156949, "post_id": 38749867, "comment_id": 69647634, "body": "No I&#39;m sorry, it&#39;s for a company work, but I think the working code I gave is quite complete, you have the camera code in &quot;onCameraFrame&quot; (openCV framework) and the calculation. The rest is pretty much the basic OpenCV Android camera sample."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "edited": false, "score": 0, "creation_date": 1470313463, "post_id": 38750301, "comment_id": 64905614, "body": "I change to &quot;m1.copyTo(new Mat(src,roi));&quot; but the result is still the same... I&#39;ve also tried to change &quot;src.submat(roi).copyTo(src1);&quot; to &quot;src1 = new Mat(src, roi);&quot; but same result. I still don&#39;t understand why the ROI in the preview camera is not modified"}, {"owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "reply_to_user": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "edited": false, "score": 0, "creation_date": 1470320121, "post_id": 38750301, "comment_id": 64910903, "body": "you don&#39;t have to change &quot;src.submat(roi).copyTo(src1)&quot;;as in c++ version also they are making copy here.there may be other problems in your code. Are you sure about this ? 255-mask2  in c++ equal to Core.subtract(mask2, new Scalar(255), mask2); I think the operands should be reverse i.e Core.subtract(new Scalar(255), mask2,mask2);"}, {"owner": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "edited": false, "score": 0, "creation_date": 1470322217, "post_id": 38750301, "comment_id": 64912656, "body": "I&#39;m not sure at all, but there isn&#39;t a Core.subtract(Scalar, Mat, Mat) method in the Java SDK, so I didn&#39;t know how to write mask2=255-mask2...."}, {"owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "reply_to_user": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "edited": false, "score": 0, "creation_date": 1470323691, "post_id": 38750301, "comment_id": 64913900, "body": "if it is not present then try core.invert"}, {"owner": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "edited": false, "score": 0, "creation_date": 1470324496, "post_id": 38750301, "comment_id": 64914505, "body": "It throws an error : error: (-215) type == CV_32F || type == CV_64F in function double cv::invert(cv::InputArray, cv::OutputArray, int)    when I write Core.invert(mask2, mask2);"}, {"owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "reply_to_user": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "edited": false, "score": 0, "creation_date": 1470326113, "post_id": 38750301, "comment_id": 64915623, "body": "ok i never try invert so dont know about exception.please try this bitwise_not ( src, dst ); this should work."}], "tags": [], "owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "is_accepted": true, "score": 1, "last_activity_date": 1470245826, "creation_date": 1470245826, "answer_id": 38750301, "question_id": 38749867, "link": "https://stackoverflow.com/questions/38749867/mask-not-displayed-in-opencv-camera-preview/38750301#38750301", "title": "Mask not displayed in OpenCV camera preview", "body": "<p><code>src.submat(roi)</code> is not equalent to <code>src(roi)</code> in c++.Because in c++ <code>src(roi)</code> actually modifying the <code>src</code> data matrix in the roi area but in java <code>submat</code> is making clone of the roi of src.So any changes done to roi will not effect src that is why you got nothing in camera preview.\nto make it correct you need to use constructor like c++\ni.e use </p>\n\n<pre><code>m1.copyTo(new Mat(src,roi));\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code> m1.copyTo(src.submat(roi));\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4526096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRgBk.jpg?s=128&g=1", "display_name": "paul_poveda", "link": "https://stackoverflow.com/users/4526096/paul-poveda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 2, "accepted_answer_id": 38750301, "answer_count": 1, "score": 2, "last_activity_date": 1470389491, "creation_date": 1470244375, "last_edit_date": 1470389491, "question_id": 38749867, "link": "https://stackoverflow.com/questions/38749867/mask-not-displayed-in-opencv-camera-preview", "title": "Mask not displayed in OpenCV camera preview", "body": "<p>I want to make a simple Android app which put a mask on a detected face with OpenCV such as this example : </p>\n\n<p><a href=\"http://opencvexamples.blogspot.com/2013/11/putting-mask-on-face-using-opencv.html\" rel=\"nofollow\">Mask on face detection tutorial</a></p>\n\n<p>I translate the C++ into Java for my app.The mask is well resized and the white part eliminated (I displayed the result for testing in an ImageView on the Preview) but the mask never appear on the detected face int the green rectangle :</p>\n\n<p><a href=\"http://i.stack.imgur.com/rDRH6.jpg\" rel=\"nofollow\">Screenshot of the result</a></p>\n\n<p>My code :</p>\n\n<pre><code>    public Mat onCameraFrame(CvCameraViewFrame inputFrame) {\n             [...]\n\n    for( int i = 0; i &lt; facesArray.length; i++)\n        min_face_size = facesArray[0].width*0.7;\n        max_face_size = facesArray[0].width*1.5;\n        Point center=new Point (facesArray[i].x + facesArray[i].width/2, facesArray[i].y + facesArray[i].height/2);\n        mRgba=putMask(mRgba,center, new Size(facesArray[i].width, facesArray[i].height));\n    }\n    return mRgba;\n}\n\nMat putMask(Mat src, Point center, Size face_size)\n{\n\n    //mask : loaded mask image\n    Mat mask1 = new Mat(); //resized mask\n    src1 = new Mat(); //ROI\n    m = new Mat();\n\n    Imgproc.resize(mask ,mask1,face_size);\n\n    // ROI selection\n    roi = new Rect((int) (center.x - face_size.width/2), (int) (center.y - face_size.height/2),(int) face_size.width, (int) face_size.height);\n    //Rect roi = new Rect(100, 100, (int) face_size.width, (int) face_size.height);\n    src.submat(roi).copyTo(src1);\n\n\n    // to make the white region transparent\n    Mat mask2 = new Mat(); //greymask\n    m1= new Mat();\n    Imgproc.cvtColor(mask1,mask2, Imgproc.COLOR_BGR2GRAY);\n    Imgproc.threshold(mask2,mask2,230,255, Imgproc.THRESH_BINARY_INV);\n\n    ArrayList&lt;Mat&gt; maskChannels = new ArrayList&lt;&gt;(3);\n    ArrayList&lt;Mat&gt; result_mask = new ArrayList&lt;&gt;(3);\n    result_mask.add(new Mat());\n    result_mask.add(new Mat());\n    result_mask.add(new Mat());\n\n    Core.split(mask1, maskChannels);\n\n    Log.e(TAG, \"MASK maskChannels :\"+maskChannels.get(0).size());\n    Log.e(TAG, \"MASK mask2 :\"+mask2.size());\n\n    Core.bitwise_and(maskChannels.get(0),mask2, result_mask.get(0));\n    Core.bitwise_and(maskChannels.get(1),mask2, result_mask.get(1));\n    Core.bitwise_and(maskChannels.get(2),mask2, result_mask.get(2));\n    Core.merge(result_mask, m);        \n\n\n    Core.subtract(mask2, new Scalar(255), mask2);\n\n    ArrayList&lt;Mat&gt; srcChannels = new ArrayList&lt;&gt;(3);\n    Core.split(src1, srcChannels);\n    Core.bitwise_and(srcChannels.get(0),mask2, result_mask.get(0));\n    Core.bitwise_and(srcChannels.get(1),mask2, result_mask.get(1));\n    Core.bitwise_and(srcChannels.get(2),mask2, result_mask.get(2));\n    Core.merge(result_mask,m1);        \n\n\n    Core.addWeighted(m,1,m1,1,0,m1);    \n\n    m1.copyTo(src.submat(roi));\n\n    return src;\n}\n</code></pre>\n\n<p>==============</p>\n\n<p>Thanks to @hariprasad :) here the working code : </p>\n\n<pre><code> onCreate(){\n          [...]\n                try {\n                    File file = new File(Environment.getExternalStorageDirectory(), \"1-alpha.png\");\n\n                    mask = Imgcodecs.imread(file.getPath(), -1);\n\n                }catch (Exception e){\n                    e.printStackTrace();\n                }\n        }\n\n\nMat putMask(Mat src, Point center, Size face_size)\n{\n\n    //mask : masque charg\u00e9 depuis l'image\n    Mat mask_resized = new Mat(); //masque resiz\u00e9\n    src_roi = new Mat(); //ROI du visage cropp\u00e9 depuis la preview\n    roi_gray = new Mat();\n\n\n    Imgproc.resize(mask ,mask_resized,face_size);\n\n    // ROI selection\n    roi = new Rect((int) (center.x - face_size.width/2), (int) (center.y - face_size.height/2),(int) face_size.width, (int) face_size.height);\n    //Rect roi = new Rect(10, 10, (int) face_size.width, (int) face_size.height);\n\n    src.submat(roi).copyTo(src_roi);\n\n    Log.e(TAG, \"MASK SRC1 :\"+ src_roi.size());\n\n    // to make the white region transparent\n    Mat mask_grey = new Mat(); //greymask\n    roi_rgb = new Mat();\n    Imgproc.cvtColor(mask_resized,mask_grey, Imgproc.COLOR_BGRA2GRAY);\n    Imgproc.threshold(mask_grey,mask_grey,230,255, Imgproc.THRESH_BINARY_INV);\n\n    ArrayList&lt;Mat&gt; maskChannels = new ArrayList&lt;&gt;(4);\n    ArrayList&lt;Mat&gt; result_mask = new ArrayList&lt;&gt;(4);\n    result_mask.add(new Mat());\n    result_mask.add(new Mat());\n    result_mask.add(new Mat());\n    result_mask.add(new Mat());\n\n    Core.split(mask_resized, maskChannels);\n\n    Core.bitwise_and(maskChannels.get(0),mask_grey, result_mask.get(0));\n    Core.bitwise_and(maskChannels.get(1),mask_grey, result_mask.get(1));\n    Core.bitwise_and(maskChannels.get(2),mask_grey, result_mask.get(2));\n    Core.bitwise_and(maskChannels.get(3),mask_grey, result_mask.get(3));\n\n    Core.merge(result_mask, roi_gray);        \n\n    Core.bitwise_not(mask_grey,mask_grey);\n\n    ArrayList&lt;Mat&gt; srcChannels = new ArrayList&lt;&gt;(4);\n    Core.split(src_roi, srcChannels);\n    Core.bitwise_and(srcChannels.get(0),mask_grey, result_mask.get(0));\n    Core.bitwise_and(srcChannels.get(1),mask_grey, result_mask.get(1));\n    Core.bitwise_and(srcChannels.get(2),mask_grey, result_mask.get(2));\n    Core.bitwise_and(srcChannels.get(3),mask_grey, result_mask.get(3));\n\n    Core.merge(result_mask, roi_rgb);          \n\n    Core.addWeighted(roi_gray,1, roi_rgb,1,0, roi_rgb); \n\n    roi_rgb.copyTo(new Mat(src,roi));\n\n    return src;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "sfml", "member-functions"], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1470244631, "creation_date": 1470244631, "answer_id": 38749953, "question_id": 38749802, "link": "https://stackoverflow.com/questions/38749802/sftext-member-function-getfont-doesnt-work/38749953#38749953", "title": "sf::Text member function getFont() doesn&#39;t work?", "body": "<p>Like you suspect, the problem is that <a href=\"http://www.sfml-dev.org/documentation/2.0/classsf_1_1Text.php#ab831de193307ab591b34221440613aa1\" rel=\"nofollow\"><code>sf::Text::getFont</code></a> returns a <em>pointer</em> to a <code>Font</code>, while <a href=\"http://www.sfml-dev.org/documentation/2.0/classsf_1_1Text.php#a2927805d1ae92d57f15034ea34756b81\" rel=\"nofollow\"><code>sf::Text::setFont</code></a> expects a <em>reference</em> to a <code>Font</code> as argument. Pointer != reference, therefore you get an error.</p>\n\n<p>The solution is simple: Dereference (using the <code>*</code> operator) the pointer returned by <code>getFont</code>:</p>\n\n<pre><code>textDisplay2.text.setFont(*textDisplayVector.back().text.getFont());\n//                        ^\n//                        |\n// Notice the dereference operator here\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6152756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EIN2j.jpg?s=128&g=1", "display_name": "WakeUpToFlatEarth", "link": "https://stackoverflow.com/users/6152756/wakeuptoflatearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 38749953, "answer_count": 1, "score": 1, "last_activity_date": 1470244631, "creation_date": 1470244170, "question_id": 38749802, "link": "https://stackoverflow.com/questions/38749802/sftext-member-function-getfont-doesnt-work", "title": "sf::Text member function getFont() doesn&#39;t work?", "body": "<p>In my program I have a function that creates an outline of another sf::Text string which is as follows:</p>\n\n<pre><code>void textDisplay::createOutline(std::vector&lt;textDisplay&gt; &amp;textDisplayVector, std::vector&lt;textDisplay&gt; &amp;textDisplayVector2, textDisplay &amp;textDisplay2)\n{\n//create text2 npc dialogue outline\ntextDisplay2.text.setString(textDisplayVector.back().text.getString());\ntextDisplay2.text.setPosition(textDisplayVector.back().text.getPosition().x + 1, textDisplayVector.back().text.getPosition().y + 1);\ntextDisplay2.text.setCharacterSize(textDisplayVector.back().text.getCharacterSize());\ntextDisplay2.text.setColor(sf::Color::Black);\n//textDisplay2.text.setFont(textDisplayVector.back().text.getFont());\ntextDisplayVector2.push_back(textDisplay2);\n}\n</code></pre>\n\n<p>I want to also copy the text's font, but i get this error: </p>\n\n<p>'no suitable constructor exists to convert from \"const sf::Font *\" to \"sf::Font\"'. </p>\n\n<p>I looked at the sfml documentation and I believe the issue lies with getFont() using a pointer rather than a reference. I have no idea how to implement this though. How can this commented out line of code that uses setFont() and getFont() be improved so that it works? All of the other lines of code work properly.</p>\n"}, {"tags": ["c++", "binary", "packing"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1470243556, "post_id": 38749590, "comment_id": 64873021, "body": "What, precisely, is your question?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470243562, "post_id": 38749590, "comment_id": 64873027, "body": "You could use a union with a <code>uint64_t</code> and a bit-field structure perhaps? Though type-punning like that breaks the strict aliasing rule."}, {"owner": {"reputation": 3280, "user_id": 3493289, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08927897947ad3bae66cf2d02f587ffc?s=128&d=identicon&r=PG&f=1", "display_name": "MS Srikkanth", "link": "https://stackoverflow.com/users/3493289/ms-srikkanth"}, "edited": false, "score": 0, "creation_date": 1470243667, "post_id": 38749590, "comment_id": 64873097, "body": "An int variable shifted by 56 positions is implicitly shifting it only by 24 positions which explains why u r getting the wrong answer. That is assuming an int is 4 bytes..."}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1470243709, "post_id": 38749590, "comment_id": 64873120, "body": "@Rob\u1d69, well, my question is &#39;what I&#39;m doing wrong?&#39; and &#39;how to make it right?&#39;. Honestly I&#39;m not experienced with binary operations much as I used standart types all the way before so might just be missing something obvious. But web is not really helping on topic so far."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1470243842, "post_id": 38749590, "comment_id": 64873201, "body": "@jinxed Use a bitfield structure insteadt."}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "reply_to_user": {"reputation": 3280, "user_id": 3493289, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08927897947ad3bae66cf2d02f587ffc?s=128&d=identicon&r=PG&f=1", "display_name": "MS Srikkanth", "link": "https://stackoverflow.com/users/3493289/ms-srikkanth"}, "edited": false, "score": 0, "creation_date": 1470243850, "post_id": 38749590, "comment_id": 64873204, "body": "@Madhusudhan, ah, that might be the problem, perhaps. I usually need info only from the first byte out of 4 int bytes. Except for dat4 and 3 - from which I need 4 and 2 bytes respectively. Maybe I need some half-way variable of 1 byte size as a middle man?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470243855, "post_id": 38749590, "comment_id": 64873207, "body": "<code>int</code> is a strange beast. Depending on the compiler it could be anywhere from 16 bits long to, for now at least, 64 bits. This makes overflowing it by accident relatively easy. If your compiler has support for them, consider using <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\">fixed width integers</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470244108, "post_id": 38749590, "comment_id": 64873369, "body": "<code>dat1 &lt;&lt; 56</code> but <code>dat1</code> was declared as <code>unsigned int</code>. <i>If</i> <code>unsigned int</code> is 32bits on your platform then that is undefined behaviour - <i>if</i> it is 64bits then you are good."}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "edited": false, "score": 0, "creation_date": 1470244616, "post_id": 38749590, "comment_id": 64873645, "body": "God bless this site and all of you :)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470244798, "post_id": 38749590, "comment_id": 64873754, "body": "@jinxed feel free to praise, but <i>please</i> don&#39;t bring imaginary beings like &quot;god&quot; into it. Yes, I do in fact find that offensive."}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470244998, "post_id": 38749590, "comment_id": 64873847, "body": "@JesperJuhl I&#39;m as well so feel free to take as a generalized, popularity-accepted frase standing for &#39;thank you, best wishes&#39;"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470245240, "post_id": 38749590, "comment_id": 64874012, "body": "You could then have just written that ;)"}], "answers": [{"comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1470243861, "post_id": 38749669, "comment_id": 64873218, "body": "I&#39;ll let somebody else answer on how to use bitfields."}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "edited": false, "score": 0, "creation_date": 1470243983, "post_id": 38749669, "comment_id": 64873296, "body": "Yes, sizeof(unsigned int) != sizeof(unsigned long long) - give me a moment to try this out, thanks"}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "edited": false, "score": 0, "creation_date": 1470244404, "post_id": 38749669, "comment_id": 64873528, "body": "Both ways working, so might be the problem of compiling it in 32bit mode resulting in undefined behavior? Eh, that&#39;s convinient. I may better try to look the other way, maybe fixed width ints or bitfields as folks&#39;ve suggested above..."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1470244466, "last_edit_date": 1470244466, "creation_date": 1470243663, "answer_id": 38749669, "question_id": 38749590, "link": "https://stackoverflow.com/questions/38749590/c-packing-different-data-types-into-one-long-variable/38749669#38749669", "title": "C++ packing different data types into one long variable", "body": "<p>Assuming that <code>sizeof(unsigned int) != sizeof(unsigned long long)</code>, the left operand of each shift is the wrong type. Each shift operation is being truncated (probably to 32 bits). </p>\n\n<p>Try, for example:</p>\n\n<pre><code>typedef unsigned long long PACKAGE; // 8 byte (shows as _int64 in debug)\n(sizeof returns '8')\nunsigned long long dat1   = 25;  // 1 byte long max\nunsigned long long dat2   = 1;   // 4 bit long max\nunsigned long long dat3   = 100; // 2 byte long max\nunsigned long long dat4   = 200; // 4 byte long max\nunsigned long long dat5   = 2;   // 4 bit long max\n\npack = (dat1 &lt;&lt; 56) | (dat2 &lt;&lt; 52) | (dat3 &lt;&lt; 36) | (dat4 &lt;&lt; 4) | dat5;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>typedef unsigned long long PACKAGE; // 8 byte (shows as _int64 in debug)\n(sizeof returns '8')\nunsigned int dat1   = 25;  // 1 byte long max\nunsigned int dat2   = 1;   // 4 bit long max\nunsigned int dat3   = 100; // 2 byte long max\nunsigned int dat4   = 200; // 4 byte long max\nunsigned int dat5   = 2;   // 4 bit long max\n\npack = ((PACKAGE)dat1 &lt;&lt; 56) | ((PACKAGE)dat2 &lt;&lt; 52) | ((PACKAGE)dat3 &lt;&lt; 36) | ((PACKAGE)dat4 &lt;&lt; 4) | (PACKAGE)dat5;\n</code></pre>\n\n<p>Note: Okay, in actuality each shift operation in which the right-hand operand is greater than the size of the left-hand type, in bits invokes <em>undefined behavior</em>. The typical undefined behavior is truncation, but any other behavior, up to and including global thermonuclear war, is allowed by the standard.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470245075, "post_id": 38750033, "comment_id": 64873894, "body": "Future readers: Take note of the use of <code>uint64_t</code>. This type, if supported by your compiler, will guarantee an unsigned 64 bit integer. The definition can be found in <code>&lt;cstdint&gt;</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470245128, "post_id": 38750033, "comment_id": 64873937, "body": "@user4581301 It&#39;s actually supported by the standard."}, {"owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "edited": false, "score": 1, "creation_date": 1470245237, "post_id": 38750033, "comment_id": 64874010, "body": "Thanks, I might just go for it actually - just got to spend some time reading stuff on the matter, haven&#39;t crossed my ways with bitfields before."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "edited": false, "score": 0, "creation_date": 1470245351, "post_id": 38750033, "comment_id": 64874075, "body": "@jinxed De nada. You might consider to change your accept, since this should be the <i>canonical way</i> to handle such structures."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1470245368, "post_id": 38750033, "comment_id": 64874082, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 It&#39;s actually optional by the standard."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1470245605, "post_id": 38750033, "comment_id": 64874217, "body": "@rubenvb Samples of any <i>modern</i> compiler implementations, which don&#39;t provide <code>uint64_t</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470245723, "post_id": 38750033, "comment_id": 64874285, "body": "Compiler will be quite loud if <code>uint64_t</code> is not present, so you&#39;ll know early if you don&#39;t beforehand. Most likely it will only be missing in compilers for light-weight embedded systems."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1470245951, "post_id": 38750033, "comment_id": 64874396, "body": "On the other hand, <code>uint_least64_t</code> is not optional, if you can afford to risk a bit of waste. Why this is mandatory and <code>uint64_t</code> isn&#39;t probably has a really interesting story behind it."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1470257889, "post_id": 38750033, "comment_id": 64880830, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That&#39;s irrelevant. If you say it&#39;s supported by (with which you probably mean included and fully defined by) the Standard, you&#39;re wrong. These kinds of assumptions make code not-so-portable in 10-20 years. Smells just like the &quot;long is 64-bit&quot; debacle in the cross-platform world."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1470258213, "post_id": 38750033, "comment_id": 64880984, "body": "@rubenvb <i>&quot;If you say it&#39;s supported by (with which you probably mean included and fully defined by) the Standard, you&#39;re wrong.&quot;</i> Where did I do so in my answer?"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1470246608, "last_edit_date": 1495542156, "creation_date": 1470244893, "answer_id": 38750033, "question_id": 38749590, "link": "https://stackoverflow.com/questions/38749590/c-packing-different-data-types-into-one-long-variable/38750033#38750033", "title": "C++ packing different data types into one long variable", "body": "<p>I'd rather use a <a href=\"http://en.cppreference.com/w/cpp/language/bit_field\" rel=\"nofollow noreferrer\">bitfield</a> struct to represent such type (also use <code>uint64_t</code> to be sure of the available size):</p>\n\n<pre><code>union PACKAGE {\n    struct bits {\n        uint64_t dat1 : 8;  // 1 byte long max\n        uint64_t dat2 : 4;  // 4 bit long max\n        uint64_t dat3 : 16; // 2 byte long max\n        uint64_t dat4 : 32; // 4 byte long max\n        uint64_t dat5 : 4;  // 4 bit long max\n    };\n    uint64_t whole; // for convenience\n};\n</code></pre>\n\n<hr>\n\n<p>As mentioned in <a href=\"https://stackoverflow.com/questions/38749590/c-packing-different-data-types-into-one-long-variable/38750033?noredirect=1#comment64874396_38750033\">comments</a> you could even use the <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\"><code>uint_least64_t</code></a> data type, to ensure your target supports it (since availability of <code>uint64_t</code> is optional from the current c++ standard):</p>\n\n<pre><code>union PACKAGE {\n    struct bits {\n        uint_least64_t dat1 : 8;  // 1 byte long max\n        uint_least64_t dat2 : 4;  // 4 bit long max\n        uint_least64_t dat3 : 16; // 2 byte long max\n        uint_least64_t dat4 : 32; // 4 byte long max\n        uint_least64_t dat5 : 4;  // 4 bit long max\n    };\n    uint_least64_t whole; // for convenience\n};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6460255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CJnSe.jpg?s=128&g=1", "display_name": "jinxed", "link": "https://stackoverflow.com/users/6460255/jinxed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 0, "accepted_answer_id": 38750033, "answer_count": 2, "score": 1, "last_activity_date": 1470258323, "creation_date": 1470243425, "last_edit_date": 1470258323, "question_id": 38749590, "link": "https://stackoverflow.com/questions/38749590/c-packing-different-data-types-into-one-long-variable", "title": "C++ packing different data types into one long variable", "body": "<p>I've got into a trap trying to pack a couple of variables into a one variable 8 byte long.</p>\n\n<p>Basically, I've got a couple of short items which have small binary size and I need to pack them together to send into class which must be able to depack it back.</p>\n\n<p>So I made the following:</p>\n\n<pre><code>typedef unsigned long long PACKAGE; // 8 byte (shows as _int64 in debug)\n(sizeof returns '8')\nunsigned int dat1   = 25;  // 1 byte long max\nunsigned int dat2   = 1;   // 4 bit long max\nunsigned int dat3   = 100; // 2 byte long max\nunsigned int dat4   = 200; // 4 byte long max\nunsigned int dat5   = 2;   // 4 bit long max\n</code></pre>\n\n<p>Then I make a variable of PACKAGE type which is empty (0)</p>\n\n<pre><code>PACKAGE pack = 0;\n</code></pre>\n\n<p>And I want to throw variables into that pack using binary operations, I do:</p>\n\n<pre><code>pack = (dat1 &lt;&lt; 56) | (dat2 &lt;&lt; 52) | (dat3 &lt;&lt; 36) | (dat4 &lt;&lt; 4) | dat5;\n</code></pre>\n\n<p>it works only half-good, I calculated that I must get decimal value of pack equals to <code>2526526262902525058</code>, or </p>\n\n<pre><code>0010001100010000000001100100000000000000000000000000110010000010\n</code></pre>\n\n<p>as binary, however istead I'm getting <code>588254914</code>, or\n\u202d<code>00100011000100000000111011000010\u202c</code> as binary\nwhich is somehow correct at it's tail and head but the middle part is missing off somewhere.</p>\n\n<p>And when this is done I'm still about to extract the data back somehow.</p>\n"}, {"tags": ["c++", "multithreading", "poco", "poco-libraries"], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 2867733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zy8W3.png?s=128&g=1", "display_name": "dhia", "link": "https://stackoverflow.com/users/2867733/dhia"}, "edited": false, "score": 0, "creation_date": 1474395443, "post_id": 39538692, "comment_id": 66510514, "body": "you say &quot;separate AutoPtr instances in the 2 threads&quot;. How that work? if we have 2 separate instances we will have two separate refCount so how will we be able to delete the object at the right time?"}], "tags": [], "owner": {"reputation": 1481, "user_id": 2053585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50726c6168b851ff25f395e5b2ab5050?s=128&d=identicon&r=PG", "display_name": "G&#252;nter Obiltschnig", "link": "https://stackoverflow.com/users/2053585/g%c3%bcnter-obiltschnig"}, "is_accepted": true, "score": 1, "last_activity_date": 1474053339, "creation_date": 1474053339, "answer_id": 39538692, "question_id": 38749500, "link": "https://stackoverflow.com/questions/38749500/is-poco-refcountedobject-thread-safe/39538692#39538692", "title": "Is Poco RefCountedObject thread safe?", "body": "<p>Strictly from looking at duplicate and release in isolation, the above is correct.</p>\n\n<p>However, if you have two threads, both having a pointer to the same RefCountedObject, you either should have separate AutoPtr instances in each thread (which implies the _counter is > 1 to begin with), or, if you share the same AutoPtr, it must be protected by a mutex, if at least one thread can change the AutoPtr (which would result in release() being called). Needless to say sharing an mutable AutoPtr between multiple threads is a recipe for disaster.</p>\n\n<p>If you manage RefCountedObject by manually calling duplicate() and release() (which I would not recommend), you should follow POCO's reference counting rules and be very careful.</p>\n\n<p>So, for well-behaved code, RefCountedObject together with AutoPtr is safe for multithreaded use. </p>\n"}], "owner": {"reputation": 190, "user_id": 2867733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zy8W3.png?s=128&g=1", "display_name": "dhia", "link": "https://stackoverflow.com/users/2867733/dhia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 39538692, "answer_count": 1, "score": 0, "last_activity_date": 1474053339, "creation_date": 1470243164, "question_id": 38749500, "link": "https://stackoverflow.com/questions/38749500/is-poco-refcountedobject-thread-safe", "title": "Is Poco RefCountedObject thread safe?", "body": "<p>Poco RefCountedObject offer 2 interfaces:</p>\n\n<pre><code>    inline void RefCountedObject::duplicate() const\n{\n    ++_counter;\n}\n\n\ninline void RefCountedObject::release() const throw()\n{\n    try\n    {\n        if (--_counter == 0) delete this;\n    }\n    catch (...)\n    {\n        poco_unexpected();\n    }\n}\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>class Foundation_API RefCountedObject\n    /// A base class for objects that employ\n    /// reference counting based garbage collection.\n    ///\n    /// Reference-counted objects inhibit construction\n    /// by copying and assignment.\n{\npublic:\n    RefCountedObject();\n        /// Creates the RefCountedObject.\n        /// The initial reference count is one.\n\n    void duplicate() const;\n        /// Increments the object's reference count.\n\n    void release() const throw();\n        /// Decrements the object's reference count\n        /// and deletes the object if the count\n        /// reaches zero.\n\n    int referenceCount() const;\n        /// Returns the reference count.\n\nprotected:\n    virtual ~RefCountedObject();\n        /// Destroys the RefCountedObject.\n\nprivate:\n    RefCountedObject(const RefCountedObject&amp;);\n    RefCountedObject&amp; operator = (const RefCountedObject&amp;);\n\n    mutable AtomicCounter _counter;\n};\n</code></pre>\n\n<p>Note that:\n<strong>mutable AtomicCounter _counter;</strong></p>\n\n<p>my question is if I use a RefCountedObject in multithreading is it safe?</p>\n\n<p>In my opinion it's not because only --_counter is atomic but if(--_count) is not atomic and could lead to having a reference to a deleted object.\nFor example let say I have 2 threads A and B one executing duplicate and the other release, the execution sequence is as follow:</p>\n\n<ul>\n<li>B start executing release and reach --_counter</li>\n<li>A start executing duplicate and reach ++_counter</li>\n<li>At this point _counter=1</li>\n<li>B execute --_counter and return the result to be evaluated by the if (which is 0 &amp;&amp; counter is 0 now)  </li>\n<li>B is preempted and stop before the branching statement (the if)</li>\n<li>A execute _counter++ and return a reference to the object</li>\n<li>B continue and evaluate the branching statement with value 0 and delete the object</li>\n</ul>\n\n<p>We end up with A having a reference to a deleted object.\neven if the mutable keyword force the compiler to not optimize the _counter it won't help in multithreading</p>\n\n<p>Am I missing something? </p>\n"}, {"tags": ["c++", "visual-studio", "gcc", "visual-studio-2015"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1470242899, "post_id": 38749361, "comment_id": 64872608, "body": "Whenever I see <code>reinterpret_cast</code> in a code review, I start hunting for bugs (extra carefully) (beyond the cast itself that is) - there are usually a few.. just saying."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470243188, "post_id": 38749361, "comment_id": 64872783, "body": "&quot;gcc version 4.3.2&quot; - that&#39;s pretty <i>old</i>. Completly unrelated to your question, but have you considered using a more modern compiler (and C++ language version)?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470243377, "post_id": 38749361, "comment_id": 64872896, "body": "@JesperJuhl 1. Yes, but this is neccasary here and we have been very careful. 2. We cant, its tied to the OS, and an OS update will be a 6month - 1year project, dont have the resources."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470243510, "post_id": 38749361, "comment_id": 64872986, "body": "Downvoter, a comment explaining what i can improve will help a lot, is this really a bad question?"}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470243440, "post_id": 38749545, "comment_id": 64872932, "body": "Silly downvoter, please explain your silly downvote."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 1, "creation_date": 1470243465, "post_id": 38749545, "comment_id": 64872955, "body": "This doesn&#39;t answer the question, that&#39;s why the downvote. The question is &quot;why do I have compiler warning&quot;, your silly answer is &quot;use memcpy&quot;."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470243477, "post_id": 38749545, "comment_id": 64872961, "body": "We moved from a <code>memcpy</code> to a <code>std::vector</code> to make easily expandable memory, we didn&#39;t really want to move back, not my downvote though."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1470243530, "post_id": 38749545, "comment_id": 64873001, "body": "@Paul: It&#39;s your <b>opinion</b> that it doesn&#39;t answer the question. Can you please elaborate on that, how, you think, it doesn&#39;t answer the question? I&#39;m interested in your thinking (the phenomenon in general)."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470243554, "post_id": 38749545, "comment_id": 64873017, "body": "@Ben: you can use <code>memcpy</code> with <code>std::vector</code>, that&#39;s not a problem."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1470243578, "post_id": 38749545, "comment_id": 64873036, "body": "I added to my comment about why it doesn&#39;t answer the question. Also, it is for sure my opinion and I express my opinion via downvoting unhelpful answers."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470243588, "post_id": 38749545, "comment_id": 64873043, "body": "@Cheersandhth.-Alf But it wont allocate space for you automatically, hence, insert ..."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470243619, "post_id": 38749545, "comment_id": 64873063, "body": "@Ben: It&#39;s trivial to allocate space. It&#39;s also shorter code than you have."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1470243707, "post_id": 38749545, "comment_id": 64873119, "body": "@Paul: Thank you. You have not read the question. Your <b>alleged quote</b> is not a quote. Here is the question, verbatim: &quot;Knowing that the format of ControllerConfigDataType1 cannot change, is there a way to satisfy the compilers reservations about this line?&quot;."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470243750, "post_id": 38749545, "comment_id": 64873151, "body": "@Cheersandhth.-Alf Sure, but is the <code>insert</code> code invalid? I know that using <code>memcpy</code> will be a good workaround, but I thought that this was fine also ..."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470243917, "post_id": 38749545, "comment_id": 64873250, "body": "@Ben: I think you&#39;ll find it can be argued both ways. Some people have a very strict interpretation of the standard, and think g++ &quot;strict aliasing&quot; checking expresses the rules exactly. Others (including me) think not. But what matters in practice is how to write portable code, including catering to that compiler. <code>memcpy</code> is one solution in your case."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470246095, "post_id": 38749545, "comment_id": 64874491, "body": "@Cheersandhth.-Alf Is the question actually a bad one, i thought i conformed to the question guidelines well, it is a bit specific, but I dont think the question is bad ..."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470246672, "post_id": 38749545, "comment_id": 64874801, "body": "@Ben: As I see it the question is good. It&#39;s answerable. My answer may not be perfect, and it&#39;s certainly not complete in all possible details, but it illustrates that it&#39;s a reasonable question with a reasonable single answer (or single main direction of answer)."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470247824, "post_id": 38749545, "comment_id": 64875403, "body": "@Cheersandhth.-Alf Yeah, just been bombarded with downvotes lately for what i thought were well asked questions. I am changing to a memcpy now we will see how it goes. +1, thanks for your help."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470263031, "post_id": 38749545, "comment_id": 64883019, "body": "I would like to follow this up, can you give a short example of how to <code>memcpy</code> into a vector? You say its shorter then using insert, but the only way i can figure to do it is: `   reply.resize(reply.size() + sizeof data1); memcpy(&amp;reply[reply.size() - sizeof data1], reinterpret_cast&lt;char*&gt;(&amp;data1), sizeof data1);`"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1470275563, "post_id": 38749545, "comment_id": 64887066, "body": "@Ben: Done. Happily it turned out that the code really was shorter. I only guessed that. :)"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 2, "last_activity_date": 1470276292, "last_edit_date": 1470276292, "creation_date": 1470243266, "answer_id": 38749545, "question_id": 38749361, "link": "https://stackoverflow.com/questions/38749361/error-array-subscript-is-above-array-bounds-for-stdvectorinsert/38749545#38749545", "title": "error: array subscript is above array bounds for std::vector::insert", "body": "<p>One good way to obtain the bytes of an object is to use <code>memcpy</code>, and to let the byte type be <code>unsigned char</code>. It's good because the Holy Standard has at least one example of that, so that if a compiler chokes on it then it's easy to say, hey, this compiler chokes on an example from the standard, let's stop using it. Even if examples in ISO standards are non-normative.</p>\n\n<hr>\n\n<p>Your original example, with this approach:</p>\n\n<pre><code>int someFunc1()\n{\n    std::vector&lt;unsigned char&gt; reply;\n    reply.reserve(255);     // Note: this, from original example, is only an optimization.\n    ControllerConfigDataType1 response = { { 0 } };\n//  reply.insert(reply.end(), reinterpret_cast&lt;char*&gt;(&amp;response), reinterpret_cast&lt;char*&gt;(&amp;response) + sizeof(response));\n    int rs = reply.size(); int ds = sizeof(response); reply.resize(rs+ds); memcpy(&amp;reply[rs], &amp;response, ds);\n    return 0;\n}\n</code></pre>\n\n<p>This code assumes that <code>int</code> is sufficient for the size of a <code>vector</code> as used here, which is reasonable for a network packet: it can't very well be 2 GB or more. Otherwise replace the <code>int</code> with a <code>ptrdiff_t</code>. Possibly renamed as <code>Size</code>.</p>\n\n<hr>\n\n<p>More generally you can abstract that up and centralize it, which can help with both testing and maintenance, like this:</p>\n\n<pre><code>#include &lt;stddef.h&gt;     // ptrdiff_t\n#include &lt;string.h&gt;     // memcpy\n#include &lt;type_traits&gt;  // std::is_trivially_copyable\n#include &lt;utility&gt;      // std::enable_if_t\n\nusing Byte = unsigned char;\nusing Size = ptrdiff_t;\n\ntemplate&lt; class Type\n    // The following sanity-check line must be removed for a C++03 compiler:\n    , class Enabled_ = std::enable_if_t&lt; std::is_trivially_copyable&lt; Type &gt;::value &gt;\n    &gt;\nvoid append_to( std::vector&lt;Byte&gt;&amp; v, Type const&amp; o )\n{\n    Size const n_v_bytes = v.size();\n    Size const n_o_bytes = sizeof( o );\n    v.resize( n_v_bytes + n_o_bytes );\n    memcpy( &amp;v[n_v_bytes], &amp;o, n_o_bytes );\n}\n</code></pre>\n"}], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 38749545, "answer_count": 1, "score": 0, "last_activity_date": 1470276292, "creation_date": 1470242701, "question_id": 38749361, "link": "https://stackoverflow.com/questions/38749361/error-array-subscript-is-above-array-bounds-for-stdvectorinsert", "title": "error: array subscript is above array bounds for std::vector::insert", "body": "<p>I am compiling with <code>-Werror</code> and found a warning translated to the error:</p>\n\n<pre><code>1&gt;  cc1plus.exe: warnings being treated as errors\n1&gt;  c:\\rtems-4.9\\bin\\../lib/gcc/powerpc-rtems4.9/4.3.2/include/c++/bits/stl_vector.h: In function 'int someFunc()':\n1&gt;  D:\\Git\\Error_Parsing_script\\Src\\Plus\\RTEMS_proj\\c:\\rtems-4.9\\bin\\..\\lib\\gcc\\powerpc-rtems4.9\\4.3.2\\include\\c++\\bits\\stl_vector.h(1043,1) : error: array subscript is above array bounds\n</code></pre>\n\n<p>From this code:</p>\n\n<pre><code>struct ControllerConfigDataType1 {\n    char name[50];\n    int controllerType;\n};\n\nint someFunc()\n{\n    std::vector&lt;char&gt; reply;\n    reply.reserve(255);\n    ControllerConfigDataType1 response = { { 0 } };\n    reply.insert(reply.end(), reinterpret_cast&lt;char*&gt;(&amp;response), reinterpret_cast&lt;char*&gt;(&amp;response) + sizeof(response));\n    return 0;\n}\n</code></pre>\n\n<p>As far as I can tell, <a href=\"http://ideone.com/ndIXaW\" rel=\"nofollow\">this code is completely valid</a>. One peculiar thing is that if I manually set the <code>sizeof(resonse)</code> to &lt;= 50 (the size of the char array) then we get no error. It seems that this error comes from trying to go outside the bounds of the <code>char name[50]</code> array in <code>response</code>, which i guess makes sense from my pointer de-reference <code>reinterpret_cast&lt;char*&gt;(&amp;response) + sizeof(response)</code>. </p>\n\n<p><strong>Knowing that the format of <code>ControllerConfigDataType1</code> cannot change, is there a way to satisfy the compilers reservations about this line?</strong> </p>\n\n<p><em>Note that this is on a somewhat old compiler from RTEMS 4.9.2 (see details below), this may mean that this warning does not appear for more recent versions of GCC (and does not appear for Visual C++ from VS2015).</em></p>\n\n<h2>Other info</h2>\n\n<p>The error mentions <code>stl_vector.h(1043,1)</code> which is the implementation of the <code>std::vector::insert</code> function:</p>\n\n<pre><code>  // Called by the range insert to implement [23.1.1]/9\n  template&lt;typename _InputIterator&gt;\n    void\n    _M_insert_dispatch(iterator __pos, _InputIterator __first,\n           _InputIterator __last, __false_type)\n    {\n  typedef typename std::iterator_traits&lt;_InputIterator&gt;::\n    iterator_category _IterCategory;\n  _M_range_insert(__pos, __first, __last, _IterCategory());\n}\n</code></pre>\n\n<p><strong>Indentation left as retrieved from library</strong></p>\n\n<p>Note that the compiler is supplied from <code>RTEMS 4.9.2</code> and has the following version information:</p>\n\n<pre><code>Thread model: rtems\ngcc version 4.3.2 (GCC)\n</code></pre>\n"}, {"tags": ["c++", "winapi", "process"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470242772, "post_id": 38749316, "comment_id": 64872522, "body": "What, about reading the <code>CreateProcess()</code> documentation again? You should find out quickly what&#39;s wrong."}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470242840, "post_id": 38749316, "comment_id": 64872572, "body": "Is it that arguments should be passed in with first argument in createprocess function?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470242899, "post_id": 38749316, "comment_id": 64872606, "body": "No, but <code>bff</code> should probably use wide-chars as well."}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470243049, "post_id": 38749316, "comment_id": 64872689, "body": "I am passing bff2 and that is widechar, isn&#39;t it? and it contains my arguments for application"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470243059, "post_id": 38749316, "comment_id": 64872695, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: I&#39;m fairly convinced, that you wouldn&#39;t even know, what&#39;s wrong (or how to <b>properly</b> use <i>lpApplicationName</i> and <i>lpCommandLine</i>). Oh, look... you guessed wrong. At any rate, if you want to pass command line arguments, pass <code>NULL</code> for <i>lpApplicationName</i>, and pass the entire command line (including the properly quoted, fully qualified pathname to the executable image) as the <i>lpCommandLine</i> argument."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 2, "creation_date": 1470243080, "post_id": 38749316, "comment_id": 64872713, "body": "<code>char bff[512]; size_t size = strlen(bff) + 1;</code> is incorrect; the contents of <code>bff</code> are undefined until you set them explicitly. But since you want <code>size</code> to be the size of the <code>wchar_t</code> array, you probably just mean to say <code>wchar_t bff2[512];</code>. And you seem to be using it just to convert a literal C string; why not use a wide literal C string (<code>L&quot;...&quot;</code>)? And even then, since you&#39;re using C++, and using <code>wstring</code> later in the function, why not just use <code>wstring</code> everywhere?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470243279, "post_id": 38749316, "comment_id": 64872839, "body": "Well, for starters, you are allocating <code>bff2</code> with a garbage size because <code>bff</code> has not been initialized yet. Why are you using <code>sprintf_s</code> and <code>mbstowcs_s</code> at all, instead of using <code>std::wstring</code>? Just don&#39;t use <code>c_str()</code> when passing it to the <code>lpCommandLine</code> parameter of <code>CreateProcess()</code>. When using the <code>lpApplicationName</code> parameter, you should duplicate the EXE file path in the <code>lpCommandLine</code> parameter. The documentation even says so, but you are not doing it."}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "edited": false, "score": 0, "creation_date": 1470243444, "post_id": 38749316, "comment_id": 64872935, "body": "I probably read the documentation wrong but when I try to pass wstring to lpCommandLine parameter it says there is no suitable conversion."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470243473, "post_id": 38749316, "comment_id": 64872959, "body": "Did you verify that <code>stemp</code> has the correct path? That <code>bff2</code> has the expected parameters? When <code>CreateProcess()</code> fails, what does <code>GetLastError()</code> return?"}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "edited": false, "score": 0, "creation_date": 1470243626, "post_id": 38749316, "comment_id": 64873070, "body": "Like it won&#39;t even compile when i pass wstring to lpCommandLine parameter. <a href=\"http://prntscr.com/c16mru\" rel=\"nofollow noreferrer\">Screenshot</a> Also, stemp (wstring) contains <code>&quot;path\\to\\exe.exe&quot; -rc:eu -lac:eng</code>."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470243792, "post_id": 38749316, "comment_id": 64873171, "body": "The documentation explains: <code>CreateProcessW()</code> may modify <code>lpCommandLine</code> from under you, but <code>std::wstring.c_str()</code> is a <code>const</code> buffer, not a modifiable buffer."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470243858, "post_id": 38749316, "comment_id": 64873213, "body": "@andlabs: That&#39;s not an issue on Windows. It is an issue, when you pass a character string literal. It&#39;s wrong, no doubt, but it&#39;s not fatal."}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "edited": false, "score": 0, "creation_date": 1470243902, "post_id": 38749316, "comment_id": 64873238, "body": "When I pass it without .c_str() then it shows this <a href=\"http://prntscr.com/c16ork\" rel=\"nofollow noreferrer\">Screenshot</a>"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470243983, "post_id": 38749316, "comment_id": 64873297, "body": "@IInspectable right; I was just explaining what the error message means, since it seems they don&#39;t know enough to interpret these types of errors"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470243993, "post_id": 38749316, "comment_id": 64873305, "body": "@andlabs <code>std::wstring::c_str()</code> returns a <b>const</b> pointer, but the <code>lpCommandLine</code> parameter wants a <b>non-const</b> pointer instead, as it might need to modify the data (this is documented). You could use <code>const_cast</code> but some would argue that is undefined behavior in this situation. You can use <code>std::wstring::operator[]</code> instead of <code>c_str()</code>, though you might have to insert an explicit null terminator into the character data (a string&#39;s internal data is not guaranteed to be null terminated until C++11)."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470243998, "post_id": 38749316, "comment_id": 64873310, "body": "Well, of course. Programming is not the art to try random things, until the compiler shuts up. You want to know what you are doing. Get back to your educational material (and that better be books)."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470244023, "post_id": 38749316, "comment_id": 64873322, "body": "@Entropy you can&#39;t pass a <code>std::wstring</code> to a function that expects a C string. The safest option is to make a copy of the <code>std::wstring</code> in a <code>new wchar_t[wstr.size() + 1]</code>. And yes, you will need to figure out how to read error messages carefully. In general, a Windows string type will be of the form <code>LP(C)(W&#47;T)STR</code>, where the <code>C</code> means constant and the <code>W</code> means wide. <code>T</code> means either wide or not, and is a historical remnant too complicated to explain in this comment; just use Unicode functions exclusively and wide strings everywhere and you should be fine."}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "edited": false, "score": 0, "creation_date": 1470245129, "post_id": 38749316, "comment_id": 64873938, "body": "I cannot seem to be possible to copy wstring into new wchar_t using <code>std::copy(stemp.begin(), stemp.end(), steemp);</code> because it says <a href=\"http://prntscr.com/c16yn1\" rel=\"nofollow noreferrer\">Screenshot</a>."}, {"owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "edited": false, "score": 0, "creation_date": 1470245915, "post_id": 38749316, "comment_id": 64874376, "body": "Fixed it the bad way... #pragma warning(disable:4996)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470249344, "post_id": 38749316, "comment_id": 64876251, "body": "The less bad way would be <code>std::vector&lt;wchar_t&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470243557, "post_id": 38749593, "comment_id": 64873022, "body": "You should probably also discuss the misguided string handling too. There are misunderstandings all over the place, and misusing <code>CreateProcess()</code> is only the most obvious."}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 0, "last_activity_date": 1470243788, "last_edit_date": 1470243788, "creation_date": 1470243432, "answer_id": 38749593, "question_id": 38749316, "link": "https://stackoverflow.com/questions/38749316/cannot-start-process-with-arguments/38749593#38749593", "title": "Cannot start process with arguments", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx\" rel=\"nofollow\">CreateProcess</a> is more versatile than the old C convention to pass the name of the executable image as <code>argv[0]</code> to the newly created process. It allows you to pass arbitrary command line arguments. <em>lpApplicationName</em> designates the executable image, <em>lpCommandLine</em> is passed as to <code>argv</code>, starting with <code>argv[0]</code>.</p>\n\n<p>Populating both parameters is usually not required. By far the most common way to invoke <code>CreateProcess</code> is to pass <code>NULL</code> as the <code>lpApplicationName</code> argument, and the entire command line (including the properly quoted, fully qualified pathname to the executable image) as the <em>lpCommandLine</em> argument.</p>\n\n<p>Your call should essentially look like this (pseudocode):</p>\n\n<pre><code>CreateProcessW(NULL, L\"\\\"&lt;path to exe&gt;\\\\Client.exe\\\" -rc:eu -lac:eng\", ...);\n</code></pre>\n\n<p><hr/>\nNote: Most of your string handling is wrong, too. You should really be using <code>wchar_t</code> throughout, better yet, <code>std::wstring</code>. Apart from that, calling <code>_getcwd</code> is a bug waiting to happen. The current working directory is shared by all threads in a process. It can change <strong>at any time</strong>. Don't use it, ever. Instead, query for the currently executing module's path, or retrieve the installation path from the registry, etc.</p>\n"}], "owner": {"reputation": 125, "user_id": 5739003, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1500240653603966/picture?type=large", "display_name": "ovxrfl0w", "link": "https://stackoverflow.com/users/5739003/ovxrfl0w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1470243788, "creation_date": 1470242519, "question_id": 38749316, "link": "https://stackoverflow.com/questions/38749316/cannot-start-process-with-arguments", "title": "Cannot start process with arguments", "body": "<p>I tried to start a new process with arguments from C++ application but it doesn't work - it just starts the process without those arguments</p>\n\n<p>Here is my code</p>\n\n<pre><code>void Launch(HWND hWnd) {\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    char bff[512];\n    size_t size = strlen(bff) + 1;\n    wchar_t* bff2 = new wchar_t[size];\n    size_t outSize;\n    memset(&amp;si, 0, sizeof(si));\n    si.cb = sizeof(si);\n    sprintf_s(bff, \"-rc:eu -lac:eng\");\n    mbstowcs_s(&amp;outSize, bff2, size, bff, size-1);\n\n    char* pathe = NULL;\n    size_t size3 = MAX_PATH;\n    pathe = _getcwd(pathe, size3);\n    std::string myString(pathe);\n    std::size_t found = myString.find_last_of(\"\\\\\");\n\n    wchar_t* txt = L\"\\\\Client.exe\";\n    std::wstring stre(txt);\n    std::wstring stemp = s2ws(myString) + stre;\n    return;\n    if (!CreateProcess(stemp.c_str(), bff2, NULL, NULL, 0, 0, NULL, NULL, &amp;si, &amp;pi)) {\n        MessageBox(hWnd, L\"Cannot launch Client!\", L\"Error\", 0);\n        return;\n    }\n\n    MessageBox(hWnd, L\"Client should start soon!\", L\"Success!\", 0);\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "input", "vertica", "vsql"], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 5964992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b0736ec9778dd4bd6e3d13ca8e663f?s=128&d=identicon&r=PG&f=1", "display_name": "elirevach", "link": "https://stackoverflow.com/users/5964992/elirevach"}, "is_accepted": false, "score": 0, "last_activity_date": 1470317051, "creation_date": 1470317051, "answer_id": 38768618, "question_id": 38748913, "link": "https://stackoverflow.com/questions/38748913/how-to-read-data-from-columns-not-having-the-same-number-of-rows-in-hp-vertica-d/38768618#38768618", "title": "How to read data from columns not having the same number of rows in HP vertica DB?", "body": "<p>Something is not make scenes to me  , UDX is basically  running  of top of query result set  so I  assumed the UDX is getting two columns from the results set as an input , having say that the problem that you refer to is not valid and can\u2019t be exists  . It will be very useful if you will be able to provide more info about how you plan to execute this  UDX   .   </p>\n"}], "owner": {"reputation": 1, "user_id": 6614397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68a416c852bc59457896638f91d5636e?s=128&d=identicon&r=PG&f=1", "display_name": "BM. Hamza", "link": "https://stackoverflow.com/users/6614397/bm-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1470317051, "creation_date": 1470241174, "last_edit_date": 1470306266, "question_id": 38748913, "link": "https://stackoverflow.com/questions/38748913/how-to-read-data-from-columns-not-having-the-same-number-of-rows-in-hp-vertica-d", "title": "How to read data from columns not having the same number of rows in HP vertica DB?", "body": "<p>I am creating a C++ transform function with the HP Vertica database and I want to read data from 2 columns from 2 different tables and store them into 2 vectors.\nThen it will output the number of occurences of each element of one vector in the second one.\nThe problem is that these columns do not have the same number of rows. When I logged the code I used I found that it was reading input a much great times than the table size. \nHere is the code i am using.</p>\n\n<pre><code>  virtual void processPartition(ServerInterface &amp;srvInterface,\n                              PartitionReader &amp;inputReader,\n                              PartitionWriter &amp;outputWriter)\n{\n\n            try {\n            std::vector&lt;string&gt; vectcomb;\n            std::vector&lt;string&gt; vectrule;\n        if (inputReader.getNumCols() != 2)\n            vt_report_error(0, \"Function only accepts 2 argument, but %zu provided\", inputReader.getNumCols());\n\n            try{\n            int a=0 ;\n        do {\n\n\n            srvInterface.log(\"[occurence] data load %d \",a);\n            a++;\n\n            if(inputReader.isNull(1)){vectcomb.emplace_back(inputReader.getStringRef(0).str());}\n            else {vectcomb.emplace_back(inputReader.getStringRef(0).str());\n            vectrule.emplace_back(inputReader.getStringRef(1).str());}\n\n        } while (inputReader.next());\n            }catch(exception&amp; e){ srvInterface.log(\"[occurence] exception catched\");}\n\n            for(int i=0;i&lt;vectcomb.size();i++) {\n                    int occ=0;\n                    srvInterface.log(\"[occurence] test %d \",i);\n                    for(int j=0;j&lt;vectrule.size();j++) {\n                            if(vectrule.at(j).find(vectcomb.at(i)) != std::string::npos) {occ++ ;}\n                                                              }\n                            outputWriter.setInt(0,occ) ; outputWriter.next() ;\n                    }\n\n    } catch(exception&amp; e) {\n        // Standard exception. Quit.\n        vt_report_error(0, \"Exception while processing partition: [%s]\", e.what());\n    }\n}\n};\n</code></pre>\n"}, {"tags": ["c++", "3d", "vtk"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5463962, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-8LH6ZzN-ahc/AAAAAAAAAAI/AAAAAAAAAVI/XY73kA5KCzE/photo.jpg?sz=128", "display_name": "Manan Maqbool", "link": "https://stackoverflow.com/users/5463962/manan-maqbool"}, "edited": false, "score": 0, "creation_date": 1470316158, "post_id": 38750013, "comment_id": 64907596, "body": "I have also tried with that command line earlier but nothing appears on the rendering window :/ for my vtk the command is   mapper-&gt;SetInput(polyData);"}, {"owner": {"reputation": 81, "user_id": 4068274, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kLk_WZBkQIY/AAAAAAAAAAI/AAAAAAAAABs/m81a_3tNRTE/photo.jpg?sz=128", "display_name": "Lucas Chavez", "link": "https://stackoverflow.com/users/4068274/lucas-chavez"}, "reply_to_user": {"reputation": 103, "user_id": 5463962, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-8LH6ZzN-ahc/AAAAAAAAAAI/AAAAAAAAAVI/XY73kA5KCzE/photo.jpg?sz=128", "display_name": "Manan Maqbool", "link": "https://stackoverflow.com/users/5463962/manan-maqbool"}, "edited": false, "score": 0, "creation_date": 1470430648, "post_id": 38750013, "comment_id": 64965647, "body": "Did it compile like that? It should be &quot;SetInputData&quot; See this <a href=\"http://www.vtk.org/doc/nightly/html/classvtkPolyDataMapper.html#acc442e69006a90a371959eec6c1ee74e\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 103, "user_id": 5463962, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-8LH6ZzN-ahc/AAAAAAAAAAI/AAAAAAAAAVI/XY73kA5KCzE/photo.jpg?sz=128", "display_name": "Manan Maqbool", "link": "https://stackoverflow.com/users/5463962/manan-maqbool"}, "edited": false, "score": 0, "creation_date": 1470742586, "post_id": 38750013, "comment_id": 65063536, "body": "Yes it did compile using the mapper-&gt;setInput(polyData)..  But actually this does not show any changes in the model..!! What i Did extra is   reader-&gt;Modified();  and then it started showing the model but still.. the changes in the vertices are not being saved in Obj file. I used below code to save the changes :-  vtkOBJExporter* objExporter = vtkOBJExporter::New(); objExporter-&gt;SetRenderWindow(renderWindow);   objExporter-&gt;Write();"}, {"owner": {"reputation": 81, "user_id": 4068274, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kLk_WZBkQIY/AAAAAAAAAAI/AAAAAAAAABs/m81a_3tNRTE/photo.jpg?sz=128", "display_name": "Lucas Chavez", "link": "https://stackoverflow.com/users/4068274/lucas-chavez"}, "reply_to_user": {"reputation": 103, "user_id": 5463962, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-8LH6ZzN-ahc/AAAAAAAAAAI/AAAAAAAAAVI/XY73kA5KCzE/photo.jpg?sz=128", "display_name": "Manan Maqbool", "link": "https://stackoverflow.com/users/5463962/manan-maqbool"}, "edited": false, "score": 0, "creation_date": 1471373823, "post_id": 38750013, "comment_id": 65317837, "body": "Ok. Did using vtkOBJExporter solve the issue? You should edit your original question to have to most up to date version of your code. Try it with &quot;SetInputData.&quot; The reason why I say this can be seen in the only link of my first comment from August 5th.      Also, I am getting confused on the workflow. Are you wanting to open a .obj, modify the data, and then display it. And that is it? Or do you need to save a new .obj file?      Last, is there a program that you could modify the .obj file in separately that you are more comfortable in? That might be the easiest way."}, {"owner": {"reputation": 103, "user_id": 5463962, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-8LH6ZzN-ahc/AAAAAAAAAAI/AAAAAAAAAVI/XY73kA5KCzE/photo.jpg?sz=128", "display_name": "Manan Maqbool", "link": "https://stackoverflow.com/users/5463962/manan-maqbool"}, "edited": false, "score": 0, "creation_date": 1472716815, "post_id": 38750013, "comment_id": 65866572, "body": "Actually I wanted to open .obj file and then do some changes and save as a new .obj file..!! I would like to do it with same vtk."}], "tags": [], "owner": {"reputation": 81, "user_id": 4068274, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kLk_WZBkQIY/AAAAAAAAAAI/AAAAAAAAABs/m81a_3tNRTE/photo.jpg?sz=128", "display_name": "Lucas Chavez", "link": "https://stackoverflow.com/users/4068274/lucas-chavez"}, "is_accepted": false, "score": 0, "last_activity_date": 1470244819, "creation_date": 1470244819, "answer_id": 38750013, "question_id": 38748759, "link": "https://stackoverflow.com/questions/38748759/modifying-the-polydata-points-vertices-in-vtk/38750013#38750013", "title": "Modifying the polyData points/vertices in VTK", "body": "<p>First thing, you have alignment issues in the code that you included in your question. I believe you are missing a for loop too. (where is \"i\" defined?)</p>\n\n<p>The major issue is that you are not rendering polyData at all. The only thing you are rendering is what is in the .obj file. Evident from this line:</p>\n\n<pre><code>mapper-&gt;SetInputConnection(reader-&gt;GetOutputPort());\n</code></pre>\n\n<p>In order to render polyData replace the above line with:</p>\n\n<pre><code>mapper-&gt;SetInputData(polyData);\n</code></pre>\n\n<p>This assumes polyData was created correctly. I can't easily tell this from the code you provided. </p>\n\n<p><a href=\"http://www.vtk.org/Wiki/VTK/Examples/Cxx/PolyData/Silhouette\" rel=\"nofollow\">Here</a> is an example that may help. </p>\n"}], "owner": {"reputation": 103, "user_id": 5463962, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-8LH6ZzN-ahc/AAAAAAAAAAI/AAAAAAAAAVI/XY73kA5KCzE/photo.jpg?sz=128", "display_name": "Manan Maqbool", "link": "https://stackoverflow.com/users/5463962/manan-maqbool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561466789, "creation_date": 1470240720, "last_edit_date": 1561466789, "question_id": 38748759, "link": "https://stackoverflow.com/questions/38748759/modifying-the-polydata-points-vertices-in-vtk", "title": "Modifying the polyData points/vertices in VTK", "body": "<p>I'm trying to use VTK to change points, i.e. I am changing coordinates (x,y,z) by a (+1/-1) value. I am reading an .OBJ file and then accessing the points of a model and when I am trying to visualise the changes in the model the RenderWindow doesnt show anything. Below is my code:-</p>\n\n<pre><code>vtkSmartPointer&lt;vtkOBJReader&gt; reader = vtkSmartPointer&lt;vtkOBJReader&gt;::New();\nreader-&gt;SetFileName(filename.c_str());\nreader-&gt;Update();\n\nvtkSmartPointer&lt;vtkPolyData&gt; polyData = reader-&gt;GetOutput();\npolyData-&gt;Update();\n\nPoint3d point;\nstd::vector&lt;Point3d&gt; vertices; \n\ndouble p[3];        \nvtkPoints* points = vtkPoints::New();       \nvtkDoubleArray* pcoord = vtkDoubleArray::New();\n\npcoord-&gt;SetNumberOfComponents(3);       \npcoord-&gt;SetNumberOfTuples(polyData-&gt;GetNumberOfPoints());\n\nfor(vtkIdType i = 0; i &lt; polyData-&gt;GetNumberOfPoints(); i++) \n{  \n    polyData-&gt;GetPoint(i,p);\n    p[0] +=1;\n    p[1] +=1;\n    p[2] +=1;\n    pcoord-&gt;SetTuple(i, p);       \n}\n\npoints-&gt;SetData(pcoord);\npolyData-&gt;SetPoints(points);   \npolyData-&gt;Modified();\n\n//Visualize Code\n\nvtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\nmapper-&gt;SetInputConnection(reader-&gt;GetOutputPort());\n\nvtkSmartPointer&lt;vtkActor&gt; actor = vtkSmartPointer&lt;vtkActor&gt;::New();\nactor-&gt;SetMapper(mapper);\n\nvtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\nrenderer-&gt;AddActor(actor);\n\nvtkRenderWindow* renderWindow = vtkRenderWindow::New();\nrenderWindow-&gt;AddRenderer(renderer);\n\nvtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();\nrenderWindowInteractor-&gt;SetRenderWindow(renderWindow);\n\nrenderWindowInteractor-&gt;Initialize();\nrenderWindowInteractor-&gt;Start();\n</code></pre>\n\n<p>I am new to this 3D and VTK stuff, Please check where I am missing since I want to change the coordinates of each vertex (x,y,z). Do I need to further change something else as well?</p>\n\n<p>Many Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1470240745, "post_id": 38748654, "comment_id": 64871267, "body": "You&#39;re the author. You can specify any initialization you like in the constructor initializer list."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1470240781, "post_id": 38748654, "comment_id": 64871288, "body": "<code>top-base</code> is not a valid identifier. Post real code please."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470242121, "post_id": 38748654, "comment_id": 64872139, "body": "Instead of <code>top-base</code>, maybe you mean <code>A</code>?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1470244621, "post_id": 38748654, "comment_id": 64873651, "body": "I was able to get around the problem with a wrapper class, E has-a D, but that forces you to duplicate all of D&#39;s interface (and A,B,C) that you want to expose from E, which is worse."}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1470242333, "post_id": 38748779, "comment_id": 64872254, "body": "By changing the design, possibly class <code>D</code> could use a data member and forwarding instead of direct inheritance, and that data member could be of a class inheriting <code>B</code> and <code>C</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470242981, "post_id": 38748779, "comment_id": 64872651, "body": "@Cheersandhth.-Alf as I was rewriting the OP&#39;s code to make it legible and match the question, that was what I was thinking as well."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1470243380, "post_id": 38748779, "comment_id": 64872898, "body": "I suppose all that depends on what the question is perceived to be about. Changing a design is not an appropriate workaround for a coding problem, although running into a coding problem can be an indication of a design problem. But given the design in the question, the answer is simply no."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1470240793, "creation_date": 1470240793, "answer_id": 38748779, "question_id": 38748654, "link": "https://stackoverflow.com/questions/38748654/not-to-use-default-constructor-for-virtual-base-class/38748779#38748779", "title": "Not to use default constructor for virtual base class", "body": "<p>The constructor for the top-level class calls the constructors for all virtual bases. But that's no different from calling constructors for direct non-virtual bases: if you put in an explicit constructor call, that's what the compiler will use; if you don't, it will use the default constructor. So the answer is no, if the default constructor isn't appropriate, you can't avoid calling A's constructor from E.</p>\n"}], "owner": {"reputation": 873, "user_id": 2612857, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ed2037e275bde13a34572d6ca3ee3374?s=128&d=identicon&r=PG", "display_name": "thundium", "link": "https://stackoverflow.com/users/2612857/thundium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470244149, "creation_date": 1470240460, "last_edit_date": 1495542156, "question_id": 38748654, "link": "https://stackoverflow.com/questions/38748654/not-to-use-default-constructor-for-virtual-base-class", "title": "Not to use default constructor for virtual base class", "body": "<p>I was looking at <a href=\"https://stackoverflow.com/questions/6461784/understanding-virtual-base-classes-and-constructor-calls\">Understanding virtual base classes and constructor calls</a> and I understand that the most derived class will call the top-base class default constructor directly. But is there a way not to call top-base default constructor?</p>\n\n<p>One example for my problem,</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n\n////// BEGIN LIBRARY CODE\nclass A\n{\npublic:\n    A()\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n\n    A(int)\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n};\n\nclass B : virtual public A\n{\npublic:\n    B()\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n};\n\nclass C: virtual public A\n{\npublic:\n    C()\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n};\n\nclass D: public B, public C\n{\npublic:\n    D(int x) : A(x), B(), C() // ok. works as expected\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n};\n////// END LIBRARY CODE\n\n\n////// USER CODE BEGINS\n\nclass E: public D\n{\npublic:\n    E() : D(42) // problem, invokes A(), not A(int)\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n\n    E(int x) : D(x) // same problem\n    {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    }\n};\n////// USER CODE ENDS\n\nint main()\n{\n    D d(1);\n    E e1,e2(42);\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>A::A(int)\nB::B()\nC::C()\nD::D(int)\nA::A()\nB::B()\nC::C()\nD::D(int)\nE::E()\nA::A()\nB::B()\nC::C()\nD::D(int)\nE::E(int)\n</code></pre>\n\n<p><strong>Problem:</strong></p>\n\n<p>I want <code>E</code> to only care about <code>D</code> construction. But from the explanation in the beginning, if I don't add <code>A::A(int)</code> below, I will always use default constructor no matter how I update class D</p>\n\n<pre><code>E() : A(42), D(42) // works, but undesirable\n{\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n}\n\nE(int x) : A(x), D(x) // this works, but undesirable\n{\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>In short, I don't want the user-code <code>class E</code> extending the library code <code>class D</code> to have to specify <code>class A</code> construction parameters so...</p>\n\n<ul>\n<li>Is there any way it can be done by a \"middle\" class in the inheritance chain such as class <code>D</code> in my example above, to alleviate the most-derived classes from having to do so?</li>\n</ul>\n"}, {"tags": ["c++", "macos", "cmake", "sfml"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470240387, "post_id": 38748533, "comment_id": 64871024, "body": "Looks like you are forgetting to actually link the library.. but I&#39;m no cmake expert so I can&#39;t tell you why. What does the final linker commandline look like?"}, {"owner": {"reputation": 540, "user_id": 1253882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e21541f3c9319b72f13b5bd9a21366c?s=128&d=identicon&r=PG", "display_name": "almyz125", "link": "https://stackoverflow.com/users/1253882/almyz125"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470240740, "post_id": 38748533, "comment_id": 64871260, "body": "Wouldn&#39;t this link the SFGUI library? target_link_libraries(${PROJECT_NAME} ${SFGUI_LIBRARIES} ${SFGUI_DEPENDENCIES})"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470241907, "post_id": 38748533, "comment_id": 64872008, "body": "Looks reasonable. But as I said, &quot;not a cmake expert&quot; - what does the <i>actual</i> final linker commandline end up looking like?"}, {"owner": {"reputation": 540, "user_id": 1253882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e21541f3c9319b72f13b5bd9a21366c?s=128&d=identicon&r=PG", "display_name": "almyz125", "link": "https://stackoverflow.com/users/1253882/almyz125"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470244173, "post_id": 38748533, "comment_id": 64873405, "body": "Sorry for my ignorance here, but where would I find the info you&#39;re looking for?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470244491, "post_id": 38748533, "comment_id": 64873576, "body": "Observe the final build command that cmake generates. If (for example), it is generating Makefile&#39;s, then add VERBOSE=1 when running <code>make</code>, etc for other build systems. You can also look in the files that cmake generates to run the real compiler/linker somewhere in your build directory."}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470245558, "post_id": 38748533, "comment_id": 64874191, "body": "When running cmake itself (or ccmake), does it give you the message &quot;Found SFGUI...&quot;? I don&#39;t know SFGUI, but you only requested cmake to find and link the window, button, and widget modules. Does it make a difference if you just <code>find_package(SFGUI)</code>?"}, {"owner": {"reputation": 540, "user_id": 1253882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e21541f3c9319b72f13b5bd9a21366c?s=128&d=identicon&r=PG", "display_name": "almyz125", "link": "https://stackoverflow.com/users/1253882/almyz125"}, "edited": false, "score": 0, "creation_date": 1470246130, "post_id": 38748533, "comment_id": 64874508, "body": "It does find SFGUI, I get that message. I&#39;ve tried running with only find_package(SFGUI) and I get the same result."}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1470248389, "post_id": 38748533, "comment_id": 64875707, "body": "The <i>actual final linker command line</i> is in a file that is usually named <code>link.txt</code> under the directory <code>build&#47;&lt;subdirectory&gt;&#47;CMakeFiles&#47;&lt;target&gt;.dir&#47;.</code> Please check that."}], "answers": [{"comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 1, "creation_date": 1470292186, "post_id": 38751094, "comment_id": 64891993, "body": "That&#39;s not how you should use CMAKE. Always look for the libraries and pass them."}, {"owner": {"reputation": 540, "user_id": 1253882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e21541f3c9319b72f13b5bd9a21366c?s=128&d=identicon&r=PG", "display_name": "almyz125", "link": "https://stackoverflow.com/users/1253882/almyz125"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1470311061, "post_id": 38751094, "comment_id": 64904016, "body": "I agree it&#39;s a bad solution, but at the end of the day it worked."}], "tags": [], "owner": {"reputation": 540, "user_id": 1253882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e21541f3c9319b72f13b5bd9a21366c?s=128&d=identicon&r=PG", "display_name": "almyz125", "link": "https://stackoverflow.com/users/1253882/almyz125"}, "is_accepted": false, "score": -1, "last_activity_date": 1470248795, "creation_date": 1470248795, "answer_id": 38751094, "question_id": 38748533, "link": "https://stackoverflow.com/questions/38748533/ld-symbols-not-found-for-architecture-x86-64-cmake-sfgui/38751094#38751094", "title": "ld: symbol(s) not found for architecture x86_64 (CMake SFGUI)", "body": "<p>Thanks for the help guys, I think I figured out what was wrong. Though I don't know why this works...</p>\n\n<p>I changed:</p>\n\n<pre><code>target_link_libraries(${PROJECT_NAME} ${SFGUI_LIBRARIES} ${SFGUI_DEPENDENCIES})\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>target_link_libraries(${PROJECT_NAME} -lsfgui)\n</code></pre>\n\n<p>I hope this helps someone down the line.</p>\n"}], "owner": {"reputation": 540, "user_id": 1253882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7e21541f3c9319b72f13b5bd9a21366c?s=128&d=identicon&r=PG", "display_name": "almyz125", "link": "https://stackoverflow.com/users/1253882/almyz125"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 751, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470248795, "creation_date": 1470240080, "last_edit_date": 1470246571, "question_id": 38748533, "link": "https://stackoverflow.com/questions/38748533/ld-symbols-not-found-for-architecture-x86-64-cmake-sfgui", "title": "ld: symbol(s) not found for architecture x86_64 (CMake SFGUI)", "body": "<p>I'm trying to build a project with SFML and SFGUI. The project builds until I try to instantiate sfg::SFGUI. When I try I get the following error:</p>\n\n<pre><code>/Applications/CLion.app/Contents/bin/cmake/bin/cmake -E cmake_link_script CMakeFiles/tilemap.dir/link.txt --verbose=1\n/usr/bin/clang++    -std=c++11 -stdlib=libc++ -g -Wl,-search_paths_first -Wl,-headerpad_max_install_names  CMakeFiles/tilemap.dir/src/main.cpp.o CMakeFiles/tilemap.dir/src/Camera.cpp.o CMakeFiles/tilemap.dir/src/Player.cpp.o CMakeFiles/tilemap.dir/src/Tile.cpp.o CMakeFiles/tilemap.dir/src/TileMap.cpp.o  -o tilemap /usr/local/lib/libsfml-system.dylib /usr/local/lib/libsfml-window.dylib /usr/local/lib/libsfml-graphics.dylib /usr/local/lib/libsfml-network.dylib /usr/local/lib/libsfml-audio.dylib \nUndefined symbols for architecture x86_64:\n  \"sfg::SFGUI::SFGUI()\", referenced from:\n      MyInterface::MyInterface() in main.cpp.o\n  \"sfg::SFGUI::~SFGUI()\", referenced from:\n      MyInterface::~MyInterface() in main.cpp.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>Here is my \"MyInterface.h\":</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;SFGUI/SFGUI.hpp&gt;\n#include &lt;SFGUI/Widgets.hpp&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n\nclass MyInterface {\npublic:\n    void RunInterface();\n    void ButtonClick();\n\nprivate:\n    sfg::SFGUI mysfgui;\n    // sfg::Window::Ptr m_window;\n    // sfg::Button::Ptr m_button;\n};\n\nvoid MyInterface::RunInterface() {\n    printf(\"Interface running!\\n\");\n    // m_window = sfg::Window::Create();\n    // auto box = sfg::Box::Create( sfg::Box::Orientation::VERTICAL, 5.f );\n    // m_button = sfg::Button::Create( \"Click me\" );\n    // box-&gt;Pack( m_button );\n    // m_button-&gt;GetSignal( sfg::Widget::OnLeftClick ).Connect( std::bind( &amp;MyInterface::ButtonClick, this ) );\n}\n\nvoid MyInterface::ButtonClick() {\n    // m_button-&gt;SetLabel( \"I was clicked\" );\n}\n</code></pre>\n\n<p>As you can see I've commented everything out besides the SFGUI instantiation.</p>\n\n<p>Here is what my CMake file looks like:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\n# Project Specific stuff\nset(SOURCE_FILES src/main.cpp src/Camera.cpp src/Player.cpp src/Tile.cpp src/TileMap.cpp src/MyInterface.h)\nset(PROJECT_NAME myproject)\nadd_executable(${PROJECT_NAME} ${SOURCE_FILES})\nmessage(\"Building ${PROJECT_NAME}...\")\nproject(${PROJECT_NAME})\n\n# CMake Options\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nset(CMAKE_MODULE_PATH \"${CMAKE_CURRENT_LIST_DIR}/cmake_modules\")\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}/bin\")\nif (APPLE)\n    message(\"Found Apple Machine!\")\n    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -stdlib=libc++\")\n    set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} -stdlib=libc++\")\n    set(CMAKE_CXX_COMPILER \"/usr/bin/clang++\")\n    set(CMAKE_C_COMPILER \"/usr/bin/clang\")\nendif (APPLE)\n\n# SFML Stuff\nfind_package(SFML REQUIRED system window graphics network audio)\nif (SFML_FOUND)\n    message(\"Found SFML...\")\n    include_directories(${SFML_INCLUDE_DIR} ${SFML_INCLUDE_DIRS}) # Do I need dir and dirs?\n    target_link_libraries(${PROJECT_NAME} ${SFML_LIBRARIES} ${SFML_DEPENDENCIES})\nelse ()\n    message(FATAL_ERROR \"Could not locate SFML!\")\nendif (SFML_FOUND)\n\n# SFGUI Stuff\nfind_package(SFGUI REQUIRED window button widget)\nif (SFGUI_FOUND)\n    message(\"Found SFGUI...\")\n    include_directories(${SFGUI_INCLUDE_DIR} ${SFGUI_INCLUDE_DIRS}) # Do I need dir and dirs?\n    target_link_libraries(${PROJECT_NAME} ${SFGUI_LIBRARIES} ${SFGUI_DEPENDENCIES})\nelse ()\n    message(FATAL_ERROR \"Could not locate SFGUI!\")\nendif (SFGUI_FOUND)\n</code></pre>\n\n<p>Finally I've compiled SFML with the following options:</p>\n\n<pre><code>cmake -DCMAKE_CXX_FLAGS=\"-stdlib=libc++\" -DCMAKE_C_COMPILER=\"/usr/bin/clang\" -DCMAKE_CXX_COMPILER=\"/usr/bin/clang++\" -DCMAKE_OSX_ARCHITECTURES=\"i386;x86_64\"\n</code></pre>\n\n<p>and SFGUI:</p>\n\n<pre><code>cmake -DCMAKE_CXX_FLAGS=\"-stdlib=libc++\" -DCMAKE_C_COMPILER=\"/usr/bin/clang\" -DCMAKE_CXX_COMPILER=\"/usr/bin/clang++\" -DSFGUI_BUILD_EXAMPLES=\"false\" -DSFGUI_BUILD_DOC=\"false\" -DCMAKE_OSX_ARCHITECTURES=\"i386;x86_64\"\n</code></pre>\n\n<p>What am I doing wrong? Any help is appreciated.</p>\n"}, {"tags": ["c++", "qt", "networking", "memory-management", "qnetworkaccessmanager"], "comments": [{"owner": {"reputation": 8275, "user_id": 1465625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5294e4ecf2875e565ad0c6e2950e4042?s=128&d=identicon&r=PG", "display_name": "hank", "link": "https://stackoverflow.com/users/1465625/hank"}, "edited": false, "score": 0, "creation_date": 1470252251, "post_id": 38748470, "comment_id": 64877920, "body": "<code>QNetworkAccessManager</code> itself probably won&#39;t cause any problems with your machine load, but your usage of it will. You should investigate what exactly <code>QNetworkAccessManager</code> is doing and how often it is being used."}, {"owner": {"reputation": 1073, "user_id": 226962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3b7f5c29fba3f539b11661843e1b2abf?s=128&d=identicon&r=PG", "display_name": "Jaebum", "link": "https://stackoverflow.com/users/226962/jaebum"}, "reply_to_user": {"reputation": 8275, "user_id": 1465625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5294e4ecf2875e565ad0c6e2950e4042?s=128&d=identicon&r=PG", "display_name": "hank", "link": "https://stackoverflow.com/users/1465625/hank"}, "edited": false, "score": 0, "creation_date": 1470278924, "post_id": 38748470, "comment_id": 64887893, "body": "No. When I removed all the code and just simply created QNetworkAccessManager object, it showed the same result."}], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 226962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3b7f5c29fba3f539b11661843e1b2abf?s=128&d=identicon&r=PG", "display_name": "Jaebum", "link": "https://stackoverflow.com/users/226962/jaebum"}, "is_accepted": true, "score": 2, "last_activity_date": 1470367747, "creation_date": 1470367747, "answer_id": 38780627, "question_id": 38748470, "link": "https://stackoverflow.com/questions/38748470/qt-qnetworkaccessmanager-slows-down-other-application/38780627#38780627", "title": "(Qt) QNetworkAccessManager slows down other application", "body": "<p>I found out that it was a bug within QNetworkAccessManager. </p>\n\n<p>In Wireless environment, QNetworkAccessManager scans the wifi status every few seconds. Those little spikes were the evidence for that. Check the following bug report.</p>\n\n<p><a href=\"https://bugreports.qt.io/browse/QTBUG-40332\" rel=\"nofollow\">https://bugreports.qt.io/browse/QTBUG-40332</a></p>\n\n<p>To solve this problem, either compile with </p>\n\n<pre><code>-D QT_NO_BEARERMANAGEMENT \n</code></pre>\n\n<p>option or just remove bearer folder in a plugin. </p>\n"}], "owner": {"reputation": 1073, "user_id": 226962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3b7f5c29fba3f539b11661843e1b2abf?s=128&d=identicon&r=PG", "display_name": "Jaebum", "link": "https://stackoverflow.com/users/226962/jaebum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 1, "accepted_answer_id": 38780627, "answer_count": 1, "score": 1, "last_activity_date": 1470367747, "creation_date": 1470239888, "last_edit_date": 1470240385, "question_id": 38748470, "link": "https://stackoverflow.com/questions/38748470/qt-qnetworkaccessmanager-slows-down-other-application", "title": "(Qt) QNetworkAccessManager slows down other application", "body": "<p>It seems like after I create a QNetworkAccessManager object in Qt, it makes other applications (those who heavily uses network, such as multiplayer game) run slow.</p>\n\n<p>For example, if I run Dota2 while running my app as a background, the game starts to lag even if my Qt app is very light (I checked through process explorer and it only consumes under 1% of CPU usage whole time). If I remove the QNetworkAccessManager part from the code, then game runs smoothly without any lagging. </p>\n\n<p>Here is how I use QNetworkAccessManager;</p>\n\n<pre><code>QNetworkAccessManager *qnam = new QNetworkAccessManager(this);\nresponse = qnam-&gt;get(QNetworkRequest(url));\nconnect(response , &amp;QNetworkReply::finished, this, &amp;Test::parse_response);\n</code></pre>\n\n<p>And in parse_response()</p>\n\n<pre><code>void parse_response() {\n        // Network Error occured\n        if (response-&gt;error() != QNetworkReply::NoError) {\n            response-&gt;deleteLater();\n            return;\n        }\n\n        response-&gt;deleteLater();\n        qnam-&gt;deleteLater();\n}\n</code></pre>\n\n<p>Funny thing is that when I check I/O usage of my app through process explorer, it shows weird activity on I/O usage</p>\n\n<p><a href=\"https://i.stack.imgur.com/TVZA7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TVZA7.png\" alt=\"I/O usage (marked as &#39;Other&#39;). Those purple spikes are the one when I actually made HTTP request. Rest of the small spikes are unknown ones. By the way, the weird I/O constantly requests 12.8KB \"></a></p>\n\n<p>When I haven't used QNetworkAccessManager, that weird I/O Usage disappears. Hence I assume that my qnam has not been successfully deleted yet could not found any problem in my code. </p>\n\n<p>If has anyone had similar experiences with this problem?\nOr is it just my configuration of usage of QNetworkAccessManager incorrect?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 2, "creation_date": 1470239913, "post_id": 38748394, "comment_id": 64870708, "body": "Do you heve a specific reason to use <code>NULL</code> instead of <code>nullptr</code> in post c++11 code? Also, gcc 4.4.7 is <i>extremely</i> old, I suggest you upgrade your compiler since that code works flawlessly on a modern compiler: <a href=\"http://coliru.stacked-crooked.com/a/a01d03ae16e6c3bf\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/a01d03ae16e6c3bf</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470239926, "post_id": 38748394, "comment_id": 64870716, "body": "It may be a bug.  FWIW if you are using C++11 you should use <code>nullptr</code>."}, {"owner": {"reputation": 468, "user_id": 3232626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f0e00df340ce3630c945129d3f033f8?s=128&d=identicon&r=PG&f=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/3232626/bernie"}, "edited": false, "score": 0, "creation_date": 1470240223, "post_id": 38748394, "comment_id": 64870920, "body": "I admit my ignorance of <code>nullptr</code>. The code was not originally written for C++11, but I have changed another part of it to include a library that needs C++11."}, {"owner": {"reputation": 468, "user_id": 3232626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f0e00df340ce3630c945129d3f033f8?s=128&d=identicon&r=PG&f=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/3232626/bernie"}, "edited": false, "score": 0, "creation_date": 1470240480, "post_id": 38748394, "comment_id": 64871097, "body": "Although gcc 4.6.0+ is needed for it <a href=\"http://stackoverflow.com/questions/3756473/what-header-file-needs-to-be-included-for-using-nullptr-in-g\" title=\"what header file needs to be included for using nullptr in g\">stackoverflow.com/questions/3756473/&hellip;</a>"}, {"owner": {"reputation": 468, "user_id": 3232626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f0e00df340ce3630c945129d3f033f8?s=128&d=identicon&r=PG&f=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/3232626/bernie"}, "reply_to_user": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1470240989, "post_id": 38748394, "comment_id": 64871442, "body": "@Fatih BAKIR, I run into other issues with this code with newer gcc versions. I am not the author."}], "answers": [{"tags": [], "owner": {"reputation": 54, "user_id": 6432659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5341b9b5bc4daa92968f1217489b86f6?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/6432659/richard"}, "is_accepted": true, "score": 2, "last_activity_date": 1470247941, "last_edit_date": 1495539958, "creation_date": 1470247941, "answer_id": 38750865, "question_id": 38748394, "link": "https://stackoverflow.com/questions/38748394/returning-null-pointer-invalid-conversion-from-long-int-to-object/38750865#38750865", "title": "Returning NULL pointer, invalid conversion from &#39;long int&#39; to &#39;Object*&#39;", "body": "<p>I believe the answer to your question is here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18217221/c-cant-initialize-a-pointer-in-a-pair-to-null\">C++ can&#39;t initialize a pointer in a pair to NULL</a></p>\n\n<p>The NULL is represented as a long by gcc and it cannot be converted to type Object* without the explicit cast.</p>\n"}], "owner": {"reputation": 468, "user_id": 3232626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0f0e00df340ce3630c945129d3f033f8?s=128&d=identicon&r=PG&f=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/3232626/bernie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 858, "favorite_count": 0, "accepted_answer_id": 38750865, "answer_count": 1, "score": 0, "last_activity_date": 1470247941, "creation_date": 1470239659, "last_edit_date": 1495541627, "question_id": 38748394, "link": "https://stackoverflow.com/questions/38748394/returning-null-pointer-invalid-conversion-from-long-int-to-object", "title": "Returning NULL pointer, invalid conversion from &#39;long int&#39; to &#39;Object*&#39;", "body": "<p>My problem seems somewhat similar to <a href=\"https://stackoverflow.com/questions/33637130/conversion-from-null-integer-to-pointer-in-comma-list\">Conversion from null-integer to pointer in comma list</a></p>\n\n<p>Here is a minimal example</p>\n\n<pre><code>#include &lt;utility&gt;\n\nstruct Object {\n  double foo;\n};\n\nstd::pair&lt;Object*,int&gt; test_function() {\n  typedef std::pair&lt;Object*,int&gt;  pair_t;\n  return pair_t(NULL, 2);\n}\n// test.cc\n</code></pre>\n\n<p>With gcc 4.4.7, <code>g++ -std=c++0x -c test.cc -o test.o</code> fails with</p>\n\n<blockquote>\n  <p>/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../include/c++/4.4.7/bits/stl_pair.h:90: error: invalid conversion from \\u2018long int\\u2019 to \\u2018Object*</p>\n</blockquote>\n\n<p>It does compile if I omit <code>-std=c++0x</code>. Also, if I use newer versions of gcc, the compilation is fine. Is there anything wrong with the code? Should one expect such differences in gcc versions?</p>\n\n<p>A later edit: I can also return <code>pair_t((Object*)NULL, 2)</code></p>\n"}, {"tags": ["c#", "c++", ".net", "dll"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1470240966, "post_id": 38748389, "comment_id": 64871420, "body": "That&#39;s the ultimate failure mode of Gieseke&#39;s utility.  Managed code likes throwing exceptions, you can&#39;t get the details in native C++.  And the most basic mishap, like file-not-found, gets completely undiagnosable.  Try/catch in the C# code is important but this is the kind of exception that&#39;s thrown by the jitter, <i>before</i> the C# code can start running.  You&#39;ll have to putz around to get somewhere, changing the Debugger Type from Auto to Mixed can help.  Custom-hosting the CLR or COM is the better mousetrap, at least you can use IErrorInfo."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 1, "creation_date": 1470242323, "post_id": 38748389, "comment_id": 64872245, "body": "Converting your Dll&#39;s functions to be exposed via COM gets IErrorInfo and Exception-to-HRESULT mapping."}, {"owner": {"reputation": 147, "user_id": 1455605, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/07097f31cdce326238df34d42f786f98?s=128&d=identicon&r=PG", "display_name": "Andrei", "link": "https://stackoverflow.com/users/1455605/andrei"}, "edited": false, "score": 1, "creation_date": 1470291754, "post_id": 38748389, "comment_id": 64891789, "body": "Thank you. I decided to convert dll to a Windows Application so I can execute it as a different process. This should fix the problem."}], "owner": {"reputation": 147, "user_id": 1455605, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/07097f31cdce326238df34d42f786f98?s=128&d=identicon&r=PG", "display_name": "Andrei", "link": "https://stackoverflow.com/users/1455605/andrei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470239641, "creation_date": 1470239641, "question_id": 38748389, "link": "https://stackoverflow.com/questions/38748389/unmanaged-c-use-c-dll-which-throws-exception", "title": "Unmanaged C++ use c# dll which throws exception", "body": "<p>I have an unmanaged C++ project.\nRecently I added a DLL written in C# (wasn't able to find an implementation in C++). The C# project is configured to build as DLL.</p>\n\n<p>I'm using LoadLibrary and GetProcAddress in unmanaged C++ to call an exported method in C#. For C# I'm using RGiesecke.DllExport to export a method from DLL.</p>\n\n<p>The DLL project throws an FileNotException. I'm using the try{}catch in C# to catch the exception, but I receive an error in unmanaged C++ which breaks the application. error code is: 0xE0434352.\nI know I should fix the problem so exception is not thrown, but the problem is that some exceptions may be thrown at runtime and I need to be sure the unmanaged code is not broken because of this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1470239510, "post_id": 38748277, "comment_id": 64870445, "body": "Forward declaration?"}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470239553, "post_id": 38748277, "comment_id": 64870479, "body": "concrete answer ? according to questions here it the matter, I did exactly what they show."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470239585, "post_id": 38748277, "comment_id": 64870503, "body": "Put class child; at the top of your file of Base"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470239706, "post_id": 38748277, "comment_id": 64870573, "body": "@Curnelious just comment/guess rather than answer since I&#39;m not 100% sure from your question and can&#39;t access a computer right now to test stuff."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1470239734, "post_id": 38748277, "comment_id": 64870586, "body": "Title is misleading. There&#39;s no calling and no method?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470239804, "post_id": 38748382, "comment_id": 64870636, "body": "instead of the include child in the base ?"}, {"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 2, "creation_date": 1470240040, "post_id": 38748382, "comment_id": 64870791, "body": "@Curnelious yes, instead. Compiler does not have to know anything about <code>Child</code>&#39;s realisation since it needs only pointer to <code>Child</code> in this translation unit."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470240072, "post_id": 38748382, "comment_id": 64870815, "body": "Well this will not work. Doing exactly that will cause more errors"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 1, "creation_date": 1470240263, "post_id": 38748382, "comment_id": 64870941, "body": "@Curnelious This is the standard way to solve the problem.  If it i giving you errors you can always ask a new question about those errors."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470240270, "post_id": 38748382, "comment_id": 64870948, "body": "Removing the include child will cause error - he will not see then the child and give errors when creating instances of the child/"}, {"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 1, "creation_date": 1470240298, "post_id": 38748382, "comment_id": 64870969, "body": "@Curnelious In that case, there likely are other problems, which is a topic for another question. These cyclic-includes you told about in a question are definetly dealt with forward-declarations."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470240429, "post_id": 38748382, "comment_id": 64871051, "body": "@Anton the errors not on the declaration of the child, but on this : childInstance=new Child(built);  - is that wrong ?  error is :  &quot;alocation of incomplete type Child&quot;"}, {"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470240541, "post_id": 38748382, "comment_id": 64871142, "body": "@Curnelious that changes things a lot, please update the question and provide full, minimal example."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470240616, "post_id": 38748382, "comment_id": 64871188, "body": "what does it change? the parent need to create instance of the child , so how would you do that otherwise? instance= new Child() , no ?"}, {"owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470240774, "post_id": 38748382, "comment_id": 64871282, "body": "@Curnelious when you construct an object, at least you have to know something about its constructors. That matters. I think you should post another question, because if you will update this one, the meaning will change significantly."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 1, "creation_date": 1470240786, "post_id": 38748382, "comment_id": 64871290, "body": "@Curnelious Forward-declaration and actual declaration are 2 different things. Forward-declarations suffice to <i>declare</i> methods returning the forward-declared types by pointer/reference. Full declaration is needed in order to <i>implement</i> any method that uses the (dereferenced) object itself, including constructing it. Look it up. And if you want a full answer, post the full code, first time, not piecemeal."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470241455, "post_id": 38748382, "comment_id": 64871737, "body": "@underscore_d thank you. This is why they called base and child, obviously the Base create an instance of the child. because we are HUMANS and not robots, you get what I am trying to do, so you can help me now instead of sending me to write another question. the goal is for a base function, to create a child instance, then let the child call functions on the base. this is the intention, and maybe I did not put it that way because I am not a robot. So, the only thing I need is to find a way to create an instance of a child and let that child call functions inside the base."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470241522, "post_id": 38748382, "comment_id": 64871790, "body": "If I would ask it differently then you would have other complains, it really does not matter how you ask, there are some really bad people here, that attack others, because they do not have life."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470241527, "post_id": 38748382, "comment_id": 64871793, "body": "&quot;obviously the Base create an instance of the child&quot; No. The child <b>is</b> a Base. Therefore you need an instance of the child, and it inherits the ability to call its base&#39;s methods. Just look up basic inheritance. And calm down. No one is attacking you. They are just suggesting that you ask well-defined questions, preferably after having done some basic research."}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470241563, "post_id": 38748382, "comment_id": 64871818, "body": "child is a child, not a base."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1470241740, "post_id": 38748382, "comment_id": 64871905, "body": "@Curnelious Search for the <i>Liskov substitution principle</i>. Per the language, a Child <b>is</b> a Base because it <b>contains</b> a Base and can <b>act as</b> a Base when passed by reference/pointer to situations that expect a Base. If your Child shouldn&#39;t be usable like this, you shouldn&#39;t inherit it from Base. And anyway, this is all orthogonal to whatever unknown other errors you&#39;re getting, which people quite rightly asked you to provide more info or another question for. As written, assuming the mysterious missing code is OK, there&#39;s no evident reason you&#39;d get errors... so it must have a problem."}], "tags": [], "owner": {"reputation": 670, "user_id": 2894133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9V2lL.png?s=128&g=1", "display_name": "Anton K", "link": "https://stackoverflow.com/users/2894133/anton-k"}, "is_accepted": true, "score": 5, "last_activity_date": 1470239966, "last_edit_date": 1470239966, "creation_date": 1470239619, "answer_id": 38748382, "question_id": 38748277, "link": "https://stackoverflow.com/questions/38748277/calling-a-method-in-a-parent-class/38748382#38748382", "title": "Calling a method in a parent class", "body": "<p>Use forward-declaration:</p>\n\n<p>File Base.hpp:</p>\n\n<pre><code>class Child; // forward declaration\n\nclass Base {\n public:\n    Child* child;\n    // whatever\n};\n</code></pre>\n\n<p>File Child.hpp:</p>\n\n<pre><code>#include \"Base.hpp\"\n\nclass Child : public Base {\n    // whatever\n};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 38748382, "answer_count": 1, "score": 0, "last_activity_date": 1470239966, "creation_date": 1470239342, "question_id": 38748277, "link": "https://stackoverflow.com/questions/38748277/calling-a-method-in-a-parent-class", "title": "Calling a method in a parent class", "body": "<p>After a little bit searching I learned that I could call a parent method like this:</p>\n\n<p>Base class :</p>\n\n<pre><code>class Base\n{\n\n\npublic:\n\n    Base();\n     child *children;  // instance of the child is needed on the base\n    float theDelegate(char *arg);\n</code></pre>\n\n<p>Then child class :</p>\n\n<pre><code>class child: public Base  //**** problem\n{\n\n\npublic:\n...\n</code></pre>\n\n<p>But when I am trying to add the <code>public Base</code> line, I get an error that he does not know <code>Base</code>.</p>\n\n<p>So then I include <code>base</code> <strong>to</strong> the <code>child</code> , with this :</p>\n\n<pre><code>#include \"Base.hpp\"\n</code></pre>\n\n<p>This time the child can see the parent ,but right when I include the <code>base</code> on the <code>child</code> I get an error on the parent because <strong>they include each other</strong> .</p>\n\n<pre><code>child *children;  - unknown type name child - appear only if I include parent in the child\n</code></pre>\n\n<p>What am I doing wrong here ? How should it be done ?</p>\n"}, {"tags": ["c++", "r", "rinside"], "comments": [{"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 1, "creation_date": 1470242705, "post_id": 38748245, "comment_id": 64872481, "body": "<code>attach()</code> is the root of all evil. Use the <code>data = </code> argument of <code>lm()</code>. You probably also need to setup something related to handling the graph output. And, lastly, this isn&#39;t an Rcpp question. &#39;Tis more so an <code>RInside</code> question so I&#39;m removing the Rcpp tag."}], "answers": [{"comments": [{"owner": {"reputation": 1122, "user_id": 308120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0f622051018990eed97e43f67c27962?s=128&d=identicon&r=PG", "display_name": "Mark Lilback", "link": "https://stackoverflow.com/users/308120/mark-lilback"}, "edited": false, "score": 0, "creation_date": 1470322359, "post_id": 38750424, "comment_id": 64912785, "body": "I don&#39;t know why I didn&#39;t check it, but I was using an older version of RInside since I had to modify RInsideConfig.h and I&#39;d added a new parse method that returns a result code so incomplete responses can be handled by the caller. Making a patch for my changes and applying it to 0.2.13 fixed the problem."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 1122, "user_id": 308120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0f622051018990eed97e43f67c27962?s=128&d=identicon&r=PG", "display_name": "Mark Lilback", "link": "https://stackoverflow.com/users/308120/mark-lilback"}, "edited": false, "score": 0, "creation_date": 1470323257, "post_id": 38750424, "comment_id": 64913539, "body": "Good to know it works. And is that something I should change upstream to be more tolerant on &#39;bad&#39; input?  Can you file an issue ticket / send a pull request?"}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 1, "last_activity_date": 1470246326, "creation_date": 1470246326, "answer_id": 38750424, "question_id": 38748245, "link": "https://stackoverflow.com/questions/38748245/error-in-abline-when-run-via-rinside/38750424#38750424", "title": "error in abline when run via RInside", "body": "<p>Works for me without any issues. Ubuntu 16.04.  Running out of the examples directory to get the <code>GNUmakefile</code>-based build for free:</p>\n\n<pre><code>~/git/rinside/inst/examples/standard(master)$ vi soquestion.cpp\n~/git/rinside/inst/examples/standard(master)$ make soquestion\nccache g++ -I/usr/share/R/include -I/usr/local/lib/R/site-library/Rcpp/include \\\n     -I/usr/local/lib/R/site-library/RInside/include -g -O3 -Wall -pipe \\\n     -Wno-unused -Wall    soquestion.cpp  -Wl,--export-dynamic -fopenmp \\\n     -L/usr/lib/R/lib -lR -lpcre -llzma -lbz2 -lz -lrt -ldl -lm  -lblas -llapack  \\\n     -L/usr/local/lib/R/site-library/RInside/lib -lRInside \\\n     -Wl,-rpath,/usr/local/lib/R/site-library/RInside/lib -o soquestion\n~/git/rinside/inst/examples/standard(master)$ vi abline.R\n~/git/rinside/inst/examples/standard(master)$ ./soquestion \n'data.frame':   10 obs. of  2 variables:\n $ age     : num  28 23 52 42 27 29 43 34 40 28\n $ systolic: num  70 68 90 75 68 80 78 70 80 72\n~/git/rinside/inst/examples/standard(master)$ \n</code></pre>\n\n<p>I literally just copied an pasted your two files.  Also:</p>\n\n<pre><code>~/git/rinside/inst/examples/standard(master)$ ls -1tr | tail -4\nsoquestion.cpp\nsoquestion\nabline.R\nRplots.pdf\n~/git/rinside/inst/examples/standard(master)$ \n</code></pre>\n\n<p>You probably want to open a device file via <code>pdf()</code> or <code>png()</code> ...</p>\n"}], "owner": {"reputation": 1122, "user_id": 308120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0f622051018990eed97e43f67c27962?s=128&d=identicon&r=PG", "display_name": "Mark Lilback", "link": "https://stackoverflow.com/users/308120/mark-lilback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 38750424, "answer_count": 1, "score": 0, "last_activity_date": 1470246326, "creation_date": 1470239239, "last_edit_date": 1470242718, "question_id": 38748245, "link": "https://stackoverflow.com/questions/38748245/error-in-abline-when-run-via-rinside", "title": "error in abline when run via RInside", "body": "<p>I'm running into a problem using RInside vs the console. This is all run on ubuntu 14.04 using R 3.2.4 installed via apt-get from CRAN. Here is the c++ and R code:</p>\n\n<pre><code>#include &lt;RInside.h&gt;                            // for the embedded R via RInside\n\nint main(int argc, char *argv[]) {\n\n    RInside R(argc, argv);                      // create an embedded R instance\n    R.parseEval(\"source('abline.R')\");\n}\n</code></pre>\n\n<p>abline.R</p>\n\n<pre><code>bp &lt;- data.frame(\n  age = c(28, 23, 52, 42, 27, 29, 43, 34, 40, 28),\n  systolic = c(70, 68, 90, 75, 68, 80, 78, 70, 80, 72))\nstr(bp)\nattach(bp)\n\nbp.lm &lt;- lm(systolic ~ age)\n\nplot(age, systolic)\nabline(bp.lm)\nlines(lowess(age, systolic, f=0.75), lty=2)\n</code></pre>\n\n<p>The R code works fine from the console, but errors when the program is run. </p>\n\n<pre><code>mlilback@rc2x:/tmp/abtest$ ./abtest \n'data.frame':   10 obs. of  2 variables:\n $ age     : num  28 23 52 42 27 29 43 34 40 28\n $ systolic: num  70 68 90 75 68 80 78 70 80 72\nError in if (noInt) { : argument is of length zero\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  Error evaluating: source('abline.R')\nAborted (core dumped)\n</code></pre>\n\n<p>The <code>if (noInt) {</code> is from the source of abline (line 18 in my version of R). I'm completely stumped as to why this only happens via RInside. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "function", "c++11", "constants"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1470240022, "post_id": 38748218, "comment_id": 64870778, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I can&#39;t tell what you&#39;re actually doing."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1470240092, "post_id": 38748218, "comment_id": 64870830, "body": "What am I missing? What is included that is not necessary? I think I have included everything needed? Do you want a zipped project? I am trying to store a list of function pointers to log functions."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1470240480, "post_id": 38748218, "comment_id": 64871096, "body": "You&#39;re missing an MCVE. I&#39;m looking for a short, self-contained, example that I can see what compile error you&#39;re getting and what you&#39;re trying to do. All I see are several unconnected code fragments and I do not understand either what you&#39;re trying to do or why it&#39;s failing."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1470241104, "post_id": 38748218, "comment_id": 64871530, "body": "<a href=\"https://godbolt.org/g/RfbrUI\" rel=\"nofollow noreferrer\">godbolt.org/g/RfbrUI</a> It seems to compile fine though which is a problem. I am not sure why my clang compiler is failing."}], "answers": [{"comments": [{"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1470240668, "post_id": 38748676, "comment_id": 64871221, "body": "Thanks, but I provided that same solution myself at the bottom of my post. I dont understand why I cant store and call a const function. I am trying to avoid const cast."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1470240991, "post_id": 38748676, "comment_id": 64871444, "body": "I tried that as well figuring it would work but I get the same error. Its weird because online clang compilers seem to compile it without error."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1470241027, "post_id": 38748676, "comment_id": 64871480, "body": "@marsh, so does online and offline g++ compilers: <a href=\"http://coliru.stacked-crooked.com/a/ccf66094fb802e7d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/ccf66094fb802e7d</a>"}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1470241520, "post_id": 38748676, "comment_id": 64871789, "body": "Yes that is indeed a problem, I believe it is a custom built version for console development. I guess that people cannot provide support for that when they cannot reproduce the issue."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 1, "creation_date": 1470241638, "post_id": 38748676, "comment_id": 64871850, "body": "@marsh, I have no idea, however it looks like a compiler problem instead of a language one. Also, as far as I know, it is undefined to cast a function pointer to a <code>void*</code>. Why don&#39;t you use T directly to store the function pointers, by simply letting the base class go?"}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1470241833, "post_id": 38748676, "comment_id": 64871965, "body": "The function pointer type changes, that part was not included in my example. You are right though I think this is a compiler problem that I will have to solve."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 1, "creation_date": 1470241863, "post_id": 38748676, "comment_id": 64871982, "body": "@marsh, the function pointer type can still change, check this one, it is type safe: <a href=\"http://coliru.stacked-crooked.com/a/6759067d687386a6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/6759067d687386a6</a>"}], "tags": [], "owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "is_accepted": true, "score": 3, "last_activity_date": 1470240915, "last_edit_date": 1470240915, "creation_date": 1470240521, "answer_id": 38748676, "question_id": 38748218, "link": "https://stackoverflow.com/questions/38748218/calling-const-function-pointer/38748676#38748676", "title": "Calling Const function pointer", "body": "<p>You are storing the function pointers as <code>const void*</code>:</p>\n\n<pre><code>const void*     m_functions[kNbrMax];\n</code></pre>\n\n<p>And you are <em>trying</em> to cast them to <code>T</code> and call it using <code>reinterpret_cast</code>:</p>\n\n<pre><code>reinterpret_cast&lt;T&gt;(m_functions[i])(title,cause,file,line);\n</code></pre>\n\n<p>However, <code>reinterpret_cast</code> cannot remove <code>const</code> qualifier from a type, therefore, you should first remove the <code>const</code> using <code>const_cast</code>:</p>\n\n<pre><code>reinterpret_cast&lt;T&gt;(const_cast&lt;void*&gt;(m_functions[i]))(title,cause,file,line);\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>However, please note that <code>const_cast</code> engenders undefined behavior and is unsafe. So is calling a function pointer returned from <code>reinterpret_cast</code> if the original pointer was not actually a <code>T</code>.</p>\n\n<p><strong>Edit:</strong>\nYou can call a <code>const</code> qualified function pointer, however, then the <code>reinterpret_cast</code> should contain the <code>const</code> qualifier:</p>\n\n<pre><code>reinterpret_cast&lt;const T&gt;(m_functions[i])(title,cause,file,line);\n</code></pre>\n"}], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 0, "accepted_answer_id": 38748676, "answer_count": 1, "score": 0, "last_activity_date": 1470240915, "creation_date": 1470239155, "question_id": 38748218, "link": "https://stackoverflow.com/questions/38748218/calling-const-function-pointer", "title": "Calling Const function pointer", "body": "<p>First off I would like to mention that this works with MSVC but not with clang. I am using Clang with c++11.</p>\n\n<p>I have a function pointer:</p>\n\n<pre><code>typedef void (*Log) (const char* title, const char* msg, const char* file, int line);\n</code></pre>\n\n<p>I have this struct:</p>\n\n<pre><code> struct FunctionList\n    {\n    protected:\n        static const int kNbrMax = 32;\n        FunctionList();\n        bool Add(const void* f);\n        bool Remove(const void* f);\n\n        const void*     m_functions[kNbrMax];\n    };\n</code></pre>\n\n<p>And this class:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct MessageFunctionList\n    : public FunctionList\n{\npublic:\n    MessageFunctionList(T defaultFunction)  \n    {\n        Add(defaultFunction);\n    }\n\n    void Call(const char* title,const char* cause,const char* file,int line)\n    {\n        for (unsigned long i = 0;i &lt; m_nbrUsed;++i)\n        {\n            reinterpret_cast&lt;T&gt;(m_functions[i])(title,cause,file,line);\n        }\n    }\n}\n</code></pre>\n\n<p>I am creating it like so:</p>\n\n<pre><code>static void DefaultLogMessageFunction(const char* title,const char* msg,const char* file,int line)\n{\n\n}\n\nMessageFunctionList&lt;Log&gt; functionList(DefaultLogMessageFunction)\n</code></pre>\n\n<p>But I get the compile time error: </p>\n\n<blockquote>\n  <p>reinterpret_cast from 'const void <em>' to 'void (</em>)(const char *, const\n  char *, const char *, int)' casts away qualifiers  for line:\n  reinterpret_cast(m_functions[i])(title,cause,file,line);</p>\n</blockquote>\n\n<p>So as far as I understand I am trying to cast my const list of functions to a non const value. That is not allowed which makes sense. So I tried the following:</p>\n\n<pre><code>const void* funcPtr = m_functions[i];\nconst T call = reinterpret_cast&lt;const T&gt;(funcPtr);\ncall(title, cause, file, line);\n</code></pre>\n\n<p>But that does not work either.</p>\n\n<p>This works:</p>\n\n<pre><code>void* funcPtr = const_cast&lt;void*&gt;(m_functions[i]);\nT call = reinterpret_cast&lt;T&gt;(funcPtr);\ncall(title,cause,file,line);\n</code></pre>\n\n<p>But I would like to avoid using a const cast. What am I doing wrong? How can I call this const function? Or is it simply not allowed because it does not know if the function being called is a const function or not? Or perhaps it is because my static function is not a member of a class so it can not be declared const?</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1470239712, "post_id": 38747943, "comment_id": 64870575, "body": "<code>std::abs(std::complex&lt;T&gt;)</code> returns the magnitude, a T, (vector length) of a complex number. You can then use max()."}, {"owner": {"reputation": 187, "user_id": 4402284, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-LjqWF0J3rfs/AAAAAAAAAAI/AAAAAAAAAM8/JpnWqVL1WQ0/photo.jpg?sz=128", "display_name": "suiyuan2009", "link": "https://stackoverflow.com/users/4402284/suiyuan2009"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1470279944, "post_id": 38747943, "comment_id": 64888151, "body": "one of eigen&#39;s developer says complex number will not be packet"}], "owner": {"reputation": 187, "user_id": 4402284, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-LjqWF0J3rfs/AAAAAAAAAAI/AAAAAAAAAM8/JpnWqVL1WQ0/photo.jpg?sz=128", "display_name": "suiyuan2009", "link": "https://stackoverflow.com/users/4402284/suiyuan2009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470238369, "creation_date": 1470238369, "question_id": 38747943, "link": "https://stackoverflow.com/questions/38747943/pmax-pmin-in-scalar-tanh-op-in-eigen", "title": "pmax/pmin in scalar_tanh_op in eigen", "body": "<p>I know SSE2 optimization will packet complex numbers 4 by 4, but it's still complex number, so It must need max/min operator, but where is max/min operator for complex number</p>\n"}, {"tags": ["c++", "ffmpeg", "piping"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1470239281, "post_id": 38747898, "comment_id": 64870272, "body": "try unsigned char instead of a char?"}, {"owner": {"reputation": 31, "user_id": 6608077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b85cbbe1ebf09f69cfacee3f1b919457?s=128&d=identicon&r=PG&f=1", "display_name": "JLucas", "link": "https://stackoverflow.com/users/6608077/jlucas"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1470248944, "post_id": 38747898, "comment_id": 64876014, "body": "I tried it but it does not make a difference"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6608077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b85cbbe1ebf09f69cfacee3f1b919457?s=128&d=identicon&r=PG&f=1", "display_name": "JLucas", "link": "https://stackoverflow.com/users/6608077/jlucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1470296986, "creation_date": 1470296986, "answer_id": 38761455, "question_id": 38747898, "link": "https://stackoverflow.com/questions/38747898/problems-reading-output-from-ffmpeg/38761455#38761455", "title": "problems reading output from ffmpeg", "body": "<p>It seems that the problem was reading stdin. I am working on a windows machine and did not set the inputstream to binary mode.</p>\n\n<p>Setting the inputstream to binary mode.</p>\n\n<pre><code>_setmode(_fileno(stdin), _O_BINARY);\n</code></pre>\n\n<p>and reading the stream like this</p>\n\n<pre><code>cin.get(in);\n</code></pre>\n\n<p>fixed the issue.</p>\n"}], "owner": {"reputation": 31, "user_id": 6608077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b85cbbe1ebf09f69cfacee3f1b919457?s=128&d=identicon&r=PG&f=1", "display_name": "JLucas", "link": "https://stackoverflow.com/users/6608077/jlucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470296986, "creation_date": 1470238265, "question_id": 38747898, "link": "https://stackoverflow.com/questions/38747898/problems-reading-output-from-ffmpeg", "title": "problems reading output from ffmpeg", "body": "<p>I am trying to read raw BGR24 image data from ffmpeg into a C++ application. The C++ application will then process the image further using openCV.\njpg -> ffmpeg -> application -> openCV</p>\n\n<p>I started by storing the output from ffmpeg into a file and reading that file from within the application. OpenCV apparently accepts this as it happily displays the image. \nHowever, it fails when piping the output from ffmpeg directly into stdin of the application. </p>\n\n<p>I changed the program to just save the input to a file and I compared the two files. The first 1856 bytes are the same, but after that the file saved from stdin differs and after that the entire file is just hex D1 (or decimal 209). </p>\n\n<p><a href=\"http://i.stack.imgur.com/jXdgp.png\" rel=\"nofollow\">bytes read from stdin</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/uV4ud.png\" rel=\"nofollow\">bytes read from file</a></p>\n\n<p>I presume that I am making a mistake while reading stdin instead of ffmpeg having a different output. But I find it very strange that the first part is the same.\nThis is the code I use to read stdin</p>\n\n<pre><code>char* img = (char*) malloc(FRM_SIZE_BYTES);\ncout &lt;&lt; \"array address: \" &lt;&lt; &amp;img;\ncout &lt;&lt; \"array of size: \" &lt;&lt; FRM_SIZE_BYTES &lt;&lt; endl;\n\nint read = int read = read_stdin(img, FRM_SIZE_BYTES);\ncout &lt;&lt; \"read \" &lt;&lt; read &lt;&lt; \" bytes\" &lt;&lt; endl;\n\nint read_stdin(char* buffer, int count) \n{\n    int read = 0;\n    char in;\n    for (int i = 0; i &lt; count; i++) {\n        cin &gt;&gt;  in;\n        buffer[i] = in;\n        read++;\n    }\n    return read;\n}\n</code></pre>\n\n<p>this is how I try to read the file</p>\n\n<pre><code>ifstream image;\nimage.open(\"img.raw\", ios_base::binary | ios_base::in);\nstd::streampos start, end;  \nchar* imgFile = (char*)malloc(FRM_SIZE_BYTES);\nimage.read(imgFile, FRM_SIZE_BYTES);\nimage.close();\n</code></pre>\n\n<p>Any help would be appreciated</p>\n"}, {"tags": ["c++", "sorting", "optimization", "stl", "icu"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470237968, "post_id": 38747694, "comment_id": 64869341, "body": "This <code>--std=c++0x ... -std=c++14</code> is harmless but a bit silly. The second one will overrule the first, so just get rid of the &quot;c++0x&quot; bit."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470238093, "post_id": 38747694, "comment_id": 64869429, "body": "If you don&#39;t need the properties of <code>std::stable_sort</code> consider using <code>std::sort</code> instead - it is faster. Also consider the parallel version of sort."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470238100, "post_id": 38747694, "comment_id": 64869435, "body": "@JesperJuhl Well spotted :) the first one comes from <code>icu-config</code>, I didn&#39;t want to show the Makefile on top of everything else. I simply added the <code>=c++14</code> so that I can use <code>auto</code> in places where I couldn&#39;t otherwise, and couldn&#39;t easily figure out how to make <code>icu-config</code> not put this there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470238177, "post_id": 38747694, "comment_id": 64869490, "body": "@JesperJuhl Yes, please see the question. I would need the properties of <code>stable_sort</code>, if sorting only on key was indeed faster than sorting on key-value, as one would expect (but it isn&#39;t, which is the question)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470238316, "post_id": 38747694, "comment_id": 64869587, "body": "Have you tried other optimization levels than <code>-O2</code>? Like <code>-Os</code>, <code>-O1</code>, <code>-O3</code> &amp; <code>-Ofast</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470238352, "post_id": 38747694, "comment_id": 64869611, "body": "No, I haven&#39;t yet. I willl do it and add this to the question."}, {"owner": {"reputation": 2187, "user_id": 1204348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b5ca565946ddc3ecc203f3cbf0b734?s=128&d=identicon&r=PG", "display_name": "rectummelancolique", "link": "https://stackoverflow.com/users/1204348/rectummelancolique"}, "edited": false, "score": 2, "creation_date": 1470238638, "post_id": 38747694, "comment_id": 64869790, "body": "Have you tried passing your String_pair args by const ref in the lambda?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "reply_to_user": {"reputation": 2187, "user_id": 1204348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b5ca565946ddc3ecc203f3cbf0b734?s=128&d=identicon&r=PG", "display_name": "rectummelancolique", "link": "https://stackoverflow.com/users/1204348/rectummelancolique"}, "edited": false, "score": 0, "creation_date": 1470239397, "post_id": 38747694, "comment_id": 64870357, "body": "@rectummelancolique I can&#39;t believe I missed this. It indeed cuts the time by two. You should write this up as an answer."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "edited": false, "score": 1, "creation_date": 1470405205, "post_id": 38748063, "comment_id": 64952142, "body": "The reason why your answer was downvoted (not by me, I just did not vote on it): the &quot;pass by reference&quot; part at the end is correct, but everything before it is not really answering the question, and it is at least a bit misleading. It might also be that your relatively low &quot;reputation&quot; score it biasing people to disliking your wording."}, {"owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "edited": false, "score": 0, "creation_date": 1470435942, "post_id": 38748063, "comment_id": 64967385, "body": "He literally asks &quot;The question finally ... Why is doing less costing more?&quot;. The first part explains why he is not actually &quot;doing less&quot;, since the exact same comparison takes place. The second part explains the skewed timing due to pass-by-value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "edited": false, "score": 0, "creation_date": 1470462638, "post_id": 38748063, "comment_id": 64971664, "body": "There you go, you have it. This is the misleading (or even wrong) part. It is not the exact same comparison! The default comparison is to compare first, then if necessary second. In the question, it is a stable sort that uses only first (and <b>never</b> second) for the comparison."}], "tags": [], "owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "is_accepted": false, "score": 0, "last_activity_date": 1470238688, "creation_date": 1470238688, "answer_id": 38748063, "question_id": 38747694, "link": "https://stackoverflow.com/questions/38747694/what-is-slowing-down-sorting-the-pairs-on-a-key/38748063#38748063", "title": "What is slowing down sorting the pairs on a key?", "body": "<p>There is an operator&lt; for std::pair, which will compare first the first value and then the second. Thus, if you use the default comparison function, it will do the exact same thing: compare the first value. After that it will most likely stop, since the key value is likely to be sufficient to apply a sorting order. </p>\n\n<p>The lambda does the same thing, of course, but the string_pairs are passed by value, and the additional copying is also taking some time. If you pass them by reference, presumably the speeds will be identical.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "edited": false, "score": 1, "creation_date": 1470238885, "post_id": 38748106, "comment_id": 64869979, "body": "Which is why I am not surprised, but rather relieved by the timing comparison between <code>sort</code> and <code>keysort</code>."}], "tags": [], "owner": {"reputation": 17421, "user_id": 634629, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b59fe76ab243e7069197c75cd11fb01e?s=128&d=identicon&r=PG", "display_name": "Paulo Moura", "link": "https://stackoverflow.com/users/634629/paulo-moura"}, "is_accepted": false, "score": 0, "last_activity_date": 1470238818, "creation_date": 1470238818, "answer_id": 38748106, "question_id": 38747694, "link": "https://stackoverflow.com/questions/38747694/what-is-slowing-down-sorting-the-pairs-on-a-key/38748106#38748106", "title": "What is slowing down sorting the pairs on a key?", "body": "<p>Regarding the SWI-Prolog version, when using <code>keysort/2</code>, the sorting algorithm only compares the keys. But <code>sort/2</code> must compare the keys and, for any two pairs where the keys are the same, it must also compare the values. It is also possible/likely (I have not looked into the implementations of these predicates) that <code>keysort/2</code> goes for the keys in a direct way (given that the list members must be pairs using the <code>(-)/2)</code> infix operator) while <code>sort/2</code> must be able to deal with arbitrary terms which, for compound terms, implies traversing the whole term in the worst case using generic code. For pairs (which are, of course, a compound term), it means comparing the <code>(-)/2</code> functor, finding it to be the same, then descending into the arguments and comparing them. Thus, always twice the number of comparisons compared with <code>keysort/2</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "edited": false, "score": 0, "creation_date": 1470239611, "post_id": 38748313, "comment_id": 64870517, "body": "Thank you, this seems to have been the real problem. I can&#39;t believe I overlooked this. With this, the stable sort on the key gives about the same time as the sort on the key-value pair for this input. Btw, about 1/8 of the keys appear more than once."}, {"owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "edited": false, "score": 0, "creation_date": 1470246222, "post_id": 38748313, "comment_id": 64874553, "body": "That&#39;s an absolutely excellent answer. I&#39;d like to know though why my answer (which was posted an hour earlier and comes to the same conclusion) was voted down -1. while this answer is voted +5 and accepted. I&#39;d like to improve my contributions but I do not know what makes my answer not as good."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1470239431, "creation_date": 1470239431, "answer_id": 38748313, "question_id": 38747694, "link": "https://stackoverflow.com/questions/38747694/what-is-slowing-down-sorting-the-pairs-on-a-key/38748313#38748313", "title": "What is slowing down sorting the pairs on a key?", "body": "<blockquote>\n  <p>Why is doing less costing more?</p>\n</blockquote>\n\n<p>Because you are doing more - copying all strings multiple times in the lamba taking time. As stated in documentation <a href=\"http://en.cppreference.com/w/cpp/algorithm/stable_sort\">std::stable_sort</a>:</p>\n\n<blockquote>\n  <p>O(N\u00b7log2(N)), where N = std::distance(first, last) applications of cmp.</p>\n</blockquote>\n\n<p>So for every call of cmp you copy 4 strings. Change parameters type to const reference and remeasure.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1812457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 38748313, "answer_count": 3, "score": 3, "last_activity_date": 1470405292, "creation_date": 1470237737, "last_edit_date": 1492087233, "question_id": 38747694, "link": "https://stackoverflow.com/questions/38747694/what-is-slowing-down-sorting-the-pairs-on-a-key", "title": "What is slowing down sorting the pairs on a key?", "body": "<h2>Timing after implementing the accepted answer</h2>\n\n<p>Changing the lambda definition from:</p>\n\n<pre><code>[] (String_pair x, String_pair y) {\n    return x.first &lt; y.first;\n}\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>[] (const String_pair &amp;x, const String_pair &amp;y) {\n    return x.first &lt; y.first;\n}\n</code></pre>\n\n<p>Cuts down the sorting time to 0.23 sec. This is still slightly slower than using <code>sort</code>, which is not surprising. Most of the strings with the same key are probably different already on the first character, and only 1/8 of all elements in the vector have keys that appear more than once anyway.</p>\n\n<h2>The original question</h2>\n\n<p>A toy problem from \"Programming Pearls\", finding anagrams in the English language. This is not homework, but you can treat the question as if it were. To solve this, I implemented the textbook solution:</p>\n\n<ol>\n<li>Calculate a signature for each word in the dictionary (the word itself, sorted by characters)</li>\n<li>Sort by signatures (all words are in {signature, word} pairs)</li>\n<li>Output the runs with the same signature with length greater than 1.</li>\n</ol>\n\n<p>This is of course trivial, to make it a bit more interesting I used the ICU library (<a href=\"https://codereview.stackexchange.com/a/136479/62591\">with help from Roland Illig</a>) so that the program doesn't choke up on non-ascii characters and could find anagrams in say Finnish.</p>\n\n<p>Here follows the complete program. It is admittedly a bit long, but it is not easy to generate a realistic test input and output in less code.</p>\n\n<pre><code>$ cat find-anagrams.cpp\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include \"unicode/ustream.h\"\n#include \"unicode/unistr.h\"\n#include \"unicode/schriter.h\"\n\n#include &lt;chrono&gt;\n\nint main()\n{\n    using String = icu::UnicodeString;\n    using String_pair = std::pair&lt;String, String&gt;;\n    using namespace std::chrono;\n\n    auto start = steady_clock::now();\n\n    // sign\n    std::vector&lt;String_pair&gt; ws;\n    String w;\n    while (std::cin &gt;&gt; w) {\n        String k{w};\n        auto n = k.length();\n        UChar *begin = k.getBuffer(n);\n        if (!begin) return 1;\n        std::stable_sort(begin, begin + n);\n        k.releaseBuffer(n);\n        ws.emplace_back(k, w);\n    }\n    auto sign_done = steady_clock::now();\n\n    // sort\n    std::stable_sort(ws.begin(), ws.end(),\n            [] (String_pair x, String_pair y) {\n                return x.first &lt; y.first;\n            });\n    auto sort_done = steady_clock::now();\n\n    // squash\n    auto begin = ws.cbegin();\n    while (begin != ws.cend()) {\n        auto sig = begin-&gt;first;\n        auto run_end = std::partition_point(begin, ws.cend(),\n                [&amp;sig] (String_pair x) {\n                    return sig == x.first;\n                });\n        if ((run_end - begin) &gt; 1) {\n            std::cout &lt;&lt; begin-&gt;second;\n            ++begin;\n            while (begin != run_end) {\n                std::cout &lt;&lt; ' ' &lt;&lt; begin-&gt;second;\n                ++begin;\n            }\n            std::cout &lt;&lt; '\\n';\n        }\n        begin = run_end;\n    }\n    auto squash_done = steady_clock::now();\n\n    duration&lt;double&gt; time;\n    time = duration_cast&lt;duration&lt;double&gt;&gt;(sign_done - start);\n    std::cerr\n        &lt;&lt; \"Read and calculate signatures:\\n\"\n        &lt;&lt; '\\t' &lt;&lt; time.count() &lt;&lt; \" sec\\n\";\n    time = duration_cast&lt;duration&lt;double&gt;&gt;(sort_done - sign_done);\n    std::cerr\n        &lt;&lt; \"Sort by signatures:\\n\"\n        &lt;&lt; '\\t' &lt;&lt; time.count() &lt;&lt; \" sec\\n\";\n\n    time = duration_cast&lt;duration&lt;double&gt;&gt;(squash_done - sort_done);\n    std::cerr\n        &lt;&lt; \"Squash and output:\\n\"\n        &lt;&lt; '\\t' &lt;&lt; time.count() &lt;&lt; \" sec\\n\";\n    time = duration_cast&lt;duration&lt;double&gt;&gt;(squash_done - start);\n    std::cerr\n        &lt;&lt; \"Total:\\n\"\n        &lt;&lt; '\\t' &lt;&lt; time.count() &lt;&lt; \" sec\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the compiler I am using:</p>\n\n<pre><code>$ g++ -v\nUsing built-in specs.\nCOLLECT_GCC=g++\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-pc-linux-gnu/6.1.1/lto-wrapper\nTarget: x86_64-pc-linux-gnu\nConfigured with: /build/gcc/src/gcc/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --enable-libmpx --with-system-zlib --with-isl --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --disable-libstdcxx-pch --disable-libssp --enable-gnu-unique-object --enable-linker-build-id --enable-lto --enable-plugin --enable-install-libiberty --with-linker-hash-style=gnu --enable-gnu-indirect-function --disable-multilib --disable-werror --enable-checking=release\nThread model: posix\ngcc version 6.1.1 20160707 (GCC) \n</code></pre>\n\n<p>This is how I compile it:</p>\n\n<pre><code>g++  --std=c++0x  -pedantic -Wall -O2 -std=c++14  -L/usr/lib -licui18n -licuuc -licudata   -licuio  find-anagrams.cpp -o cpp-find-anagrams\n</code></pre>\n\n<p>And this is how I run it, also showing the timings:</p>\n\n<pre><code>./cpp-find-anagrams &lt; clean-words | sort &gt; cpp-result\nRead and calculate signatures:\n    0.328156 sec\nStable sort by signatures:\n    0.512024 sec\nSquash and output:\n    0.189494 sec\nTotal:\n    1.02967 sec\n</code></pre>\n\n<p><code>clean-words</code> are the words as found in <code>/usr/share/dict/words</code>, passed through the following:</p>\n\n<pre><code>sed -n '/'\"'\"'s$/!p' | tr [:upper:] [:lower:] | sort --unique\n</code></pre>\n\n<p>In other words, get rid of the words with apostrophes, all capitals, and all capitalized duplicates.</p>\n\n<p>We observe that sorting, using <code>std::stable_sort</code> and a lambda, is taking way too long. For comparison, if I sort on the whole pair, it takes about half that time. Changing, in the above program:</p>\n\n<pre><code>    // sort\n    std::stable_sort(ws.begin(), ws.end(),\n            [] (String_pair x, String_pair y) {\n                return x.first &lt; y.first;\n            });\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>    // sort\n    std::sort(ws.begin(), ws.end());\n</code></pre>\n\n<p>Gives the following timings:</p>\n\n<pre><code>./cpp-find-anagrams &lt; clean-words | sort &gt; cpp-result\nRead and calculate signatures:\n    0.338751 sec\nSort pairs:\n    0.216526 sec\nSquash and output:\n    0.168725 sec\nTotal:\n    0.724002 sec\n</code></pre>\n\n<p>(0.51 sec to 0.22 sec)</p>\n\n<p>Of course, the two sorts give identical results, because the words in the input file are already sorted. Notably, it is not a <code>sort</code> vs <code>stable_sort</code> issue. Using <code>stable_sort</code> (I know it is unnecessary with this input, but anyway), so changing to:</p>\n\n<pre><code>    // sort\n    std::stable_sort(ws.begin(), ws.end());\n</code></pre>\n\n<p>Changes the timings only minimally:</p>\n\n<pre><code>./cpp-find-anagrams &lt; clean-words | sort &gt; cpp-result\nRead and calculate signatures:\n    0.334139 sec\nStable sort by signatures:\n    0.264751 sec\nSquash and output:\n    0.180663 sec\nTotal:\n    0.779552 sec\n</code></pre>\n\n<p>(0.22 sec to 0.26 sec)</p>\n\n<p>While trying to figure out what is going on, I implemented the same algorithm in SWI-Prolog, and noticed that the built-in <code>sort</code> and <code>keysort</code> predicates show the expected difference, namely, <code>sort</code> needs longer than <code>keysort</code>. With the following implementation (again, the full program):</p>\n\n<pre><code>$ cat find-anagrams.pl\n:- use_module(library(apply_macros)).\n:- use_module(library(pairs)).\n\nmain :-\n    statistics(cputime, Start),\n    read_words(Ws),\n    sign_words(Ws, Signed),\n    statistics(cputime, Sign_done),\n    keysort(Signed, Sorted),\n    statistics(cputime, Sort_done),\n    squash(Sorted, Anagrams),\n    maplist(anagrams_string, Anagrams, Str),\n    atomics_to_string(Str, \"\\n\", Output),\n    format(current_output, \"~s~n\", [Output]),\n    statistics(cputime, Squash_done),\n    format(user_error,\n        \"Read and calculate signatures:\\n\\t~f sec~n\\c\n         Sort by signatures:\\n\\t~f sec~n\\c\n         Squash and output:\\n\\t~f sec~n\\c\n         Total:\\n\\t~f sec\\n\",\n        [Sign_done - Start,\n         Sort_done - Sign_done,\n         Squash_done - Sort_done,\n         Squash_done - Start]),\n    halt.\nmain :- halt(1).\n\nanagrams_string(Anagrams, Str) :-\n    atomics_to_string(Anagrams, \" \", Str).\n\nread_words(Ws) :-\n    read_string(current_input, _, Input),\n    split_string(Input, \"\\n\", \"\", Ws).\n\nsign_words(Ws, Signed) :-\n    maplist(string_codes, Ws, Ws_codes),\n    maplist(sort(0, @=&lt;), Ws_codes, Ss_codes),\n    maplist(string_codes, Ss, Ss_codes),\n    pairs_keys_values(Signed, Ss, Ws).\n\nsquash(Sorted, Anagrams) :-\n    group_pairs_by_key(Sorted, Grouped),\n    groups_anagrams(Grouped, Anagrams).\n\ngroups_anagrams([], []).\ngroups_anagrams([_-Set|Rest], As) :-\n    length(Set, N),\n    (   N &gt; 1\n    -&gt;  As = [Set|As0]\n    ;   As = As0\n    ),\n    groups_anagrams(Rest, As0).\n</code></pre>\n\n<p>This is the Prolog I am using:</p>\n\n<pre><code>$ swipl -v\nSWI-Prolog version 7.3.24 for x86_64-linux\n</code></pre>\n\n<p>I \"compile\" the program (create a \"saved state\" for the interpreter):</p>\n\n<pre><code>swipl -q -O --goal=main -o swi-find-anagrams -c find-anagrams.pl\n</code></pre>\n\n<p>And run it:</p>\n\n<pre><code>./swi-find-anagrams &lt; clean-words | sort &gt; swi-result\nRead and calculate signatures:\n    0.928485 sec\nStable sort by signatures:\n    0.174832 sec\nSquash and output:\n    0.183567 sec\nTotal:\n    1.286884 sec\n</code></pre>\n\n<p>When I change</p>\n\n<pre><code>keysort(Signed, Sorted),\n</code></pre>\n\n<p>with</p>\n\n<pre><code>sort(Signed, Sorted),\n</code></pre>\n\n<p>I get the following increased running time for the sorting:</p>\n\n<pre><code>./swi-find-anagrams &lt; clean-words | sort &gt; swi-result\nRead and calculate signatures:\n    0.935780 sec\nSort pairs:\n    0.269151 sec\nSquash and output:\n    0.187508 sec\nTotal:\n    1.392440 sec\n</code></pre>\n\n<p>(0.17 to 0.27 sec)</p>\n\n<p>The final result of the sort is the same, but, as expected, sorting only by keys is considerably faster.</p>\n\n<h2>The question finally</h2>\n\n<p>What am I missing? Why is doing less costing more?</p>\n\n<p>I know I can use a map to achieve the same end result, but still it is interesting to know what is causing this considerable slowdown.</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1470237970, "post_id": 38747687, "comment_id": 64869343, "body": "[FYI] String literals have the type <code>const char[n]</code> not <code>const char *</code>."}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1470238390, "post_id": 38747687, "comment_id": 64869636, "body": "Any reason to prefer <code>template&lt;&gt; void foo&lt;int&gt;(int const &amp; t)</code> over <code>template&lt;&gt; void foo&lt;int&gt;(int t)</code>? I prefer to pass by value primitive type instead"}], "answers": [{"comments": [{"owner": {"reputation": 5834, "user_id": 274460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b76693482ab729ff9f4cf92406d95623?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/274460/tom"}, "edited": false, "score": 0, "creation_date": 1470240233, "post_id": 38747760, "comment_id": 64870925, "body": "Of course.  Adding overloading into the mix is what I was missing.  Thanks."}, {"owner": {"reputation": 5834, "user_id": 274460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b76693482ab729ff9f4cf92406d95623?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/274460/tom"}, "edited": false, "score": 0, "creation_date": 1470240252, "post_id": 38747760, "comment_id": 64870938, "body": "I understood the first bit - just not how to get the effect I was looking for."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1470238387, "last_edit_date": 1470238387, "creation_date": 1470237919, "answer_id": 38747760, "question_id": 38747687, "link": "https://stackoverflow.com/questions/38747687/pass-by-reference-template-functions-with-const-char-specialisation/38747760#38747760", "title": "Pass-by-reference template functions with `const char *` specialisation", "body": "<p>This:</p>\n\n<pre><code>foo(\"Hello, world.\");\n</code></pre>\n\n<p>Doesn't call <code>foo&lt;const char*&gt;</code>. It calls <code>foo&lt;char[14]&gt;</code>, since <code>foo</code> takes a <code>T const&amp;</code>. Your specialization isn't called since it isn't the same type as the template.</p>\n\n<p>That said, just don't specialize. Overload:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T const&amp; );\n\nvoid foo(int const&amp; );\n\nvoid foo(char const* );\n</code></pre>\n\n<p>It's way easier to reason about and is more likely to do what you actually want. </p>\n"}], "owner": {"reputation": 5834, "user_id": 274460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b76693482ab729ff9f4cf92406d95623?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/274460/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 38747760, "answer_count": 1, "score": 0, "last_activity_date": 1470238387, "creation_date": 1470237715, "question_id": 38747687, "link": "https://stackoverflow.com/questions/38747687/pass-by-reference-template-functions-with-const-char-specialisation", "title": "Pass-by-reference template functions with `const char *` specialisation", "body": "<p>I have a template function:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T const &amp; t);\n</code></pre>\n\n<p>And some specialisations of that function:</p>\n\n<pre><code>template&lt;&gt; void foo&lt;int&gt;(int const &amp; t) {\n  cout &lt;&lt; t &lt;&lt; endl;\n}\n\ntemplate&lt;&gt; void foo&lt;const char *&gt;(const char * const &amp; t) {\n  cout &lt;&lt; t &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And some ways I want to call that function:</p>\n\n<pre><code>foo(3);\nfoo(\"Hello, world.\");\n</code></pre>\n\n<p>But I can't figure out how to formulate the template so that template type deduction gets literals of both <code>int</code> and <code>const char *</code> right.  If I do the above, then I get <code>undefined reference to void foo&lt;char [14]&gt;(char const [14] &amp;)</code>.  I tried recasting the template like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T t);\n\ntemplate&lt;&gt; void foo&lt;int&gt;(int t) { ... }\ntemplate&lt;&gt; void foo&lt;const char *&gt;(const char * t) { ... }\n</code></pre>\n\n<p>which works, but of course now I get call-by-value semantics, requiring any class types that I use as the template parameter to have a copy constructor.</p>\n\n<p>Is there no way to write a pass-by-reference template function with a <code>const char *</code> specialisation that works?</p>\n"}, {"tags": ["c++", "rest", "visual-studio-2015", "casablanca"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1470237815, "post_id": 38747680, "comment_id": 64869233, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1470238016, "post_id": 38747680, "comment_id": 64869378, "body": "@HansPassant Just including the header cause above errors <code>#include &lt;cpprest&#47;http_client.h&gt; #include &lt;cpprest&#47;filestream.h&gt;</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1470238049, "post_id": 38747680, "comment_id": 64869398, "body": "It may help to copy the text of the error messages to the question from the output window you have shown in the picture. In the current form we can&#39;t see the actual errors since that part is cutoff. If this text is long maybe just the first few errors."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470238740, "post_id": 38747680, "comment_id": 64869879, "body": "Does the Casablanca source code inadvertently <code>#define</code> or erroneously restore the <code>_HAS_VARIABLE_TEMPLATES</code> preprocessor symbol?"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470239001, "post_id": 38747680, "comment_id": 64870060, "body": "@IInspectable Atleast the search does not show it"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470240129, "post_id": 38747680, "comment_id": 64870859, "body": "@IInspectable Can you answer this <a href=\"http://stackoverflow.com/questions/38748498/alternatives-to-c-rest-casablanca-for-windows-using-visual-studio-2015\" title=\"alternatives to c rest casablanca for windows using visual studio 2015\">stackoverflow.com/questions/38748498/&hellip;</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470240233, "post_id": 38747680, "comment_id": 64870926, "body": "Have you installed Update 3 for Visual Studio 2015? To verify, go to <i>Configuration Properties</i> \u2192 <i>C/C++</i> \u2192 <i>General</i> and set the <i>Suppress Startup Banner</i> option to <i>&quot;No&quot;</i>. Build the solution again. The compiler version for Update 3 should be reported as 19.00.24213.1 (or maybe 19.00.24210.0)."}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470240399, "post_id": 38747680, "comment_id": 64871032, "body": "@IInspectable Help &gt; About Visual Studio and I see Version 14.0.25425.01 Update 3"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470240432, "post_id": 38747680, "comment_id": 64871054, "body": "@IInspectable Built by setting Suppress Startup Banner option to &quot;No&quot;., failed again"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470240623, "post_id": 38747680, "comment_id": 64871198, "body": "It wasn&#39;t meant to fix the issue. Setting the option to <i>&quot;No&quot;</i> allows you to take note of the compiler used to compile the code from the <i>Output</i> window. What version did it report?"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470241152, "post_id": 38747680, "comment_id": 64871566, "body": "@IInspectable Sorry. It gave this <code>Microsoft (R) C&#47;C++ Optimizing Compiler Version 19.00.23026 for x64</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470241357, "post_id": 38747680, "comment_id": 64871679, "body": "That&#39;s not Update 3. Looks more like Visual Studio 2015 RC. Had you installed the Release Candidate? Did you fail to properly uninstall it prior to installing the RTM?"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470241956, "post_id": 38747680, "comment_id": 64872042, "body": "@IInspectable I actually downloaded it from torrent (en_visual_studio_professional_2015_x86_x64_dvd_6846629.iso)&zwnj;&#8203;. Is it possible for me to use express version of 2015 ?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1470242145, "post_id": 38747680, "comment_id": 64872148, "body": "You could use the <a href=\"https://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx\" rel=\"nofollow noreferrer\">Express Edition</a>, but noone does anymore, since the <a href=\"https://www.visualstudio.com/products/visual-studio-community-vs\" rel=\"nofollow noreferrer\">Community Editions</a> have been published. Still free, but almost the feature set of the Professional version."}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470242303, "post_id": 38747680, "comment_id": 64872229, "body": "@IInspectable I will install Community edition and get back to you. Thanks"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1470242811, "post_id": 38747680, "comment_id": 64872551, "body": "Make sure you <b>fully</b> uninstall your version of Visual Studio 2015 first. Use a tool like <a href=\"https://github.com/Microsoft/VisualStudioUninstaller/releases\" rel=\"nofollow noreferrer\">Visual Studio Uninstaller</a> to make this more reliable. Note: This tool will install Visual Studio 2013 as well. If you have Visual Studio 2013 and want to keep it, look for another solution."}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470243125, "post_id": 38747680, "comment_id": 64872738, "body": "@IInspectable Thanks"}, {"owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470313879, "post_id": 38747680, "comment_id": 64905890, "body": "@IInspectable It worked !!!!!! Installed VS Community 2015 with Update 3. Installed Casablanca from NuGet. Created sample program mentioned above and it worked like a charm. Thanks for all the help !!"}], "answers": [{"tags": [], "owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1470314142, "creation_date": 1470314142, "answer_id": 38767500, "question_id": 38747680, "link": "https://stackoverflow.com/questions/38747680/visual-studio-2015-c-rest-api-casablanca-failing-compilation-in-vs-includes/38767500#38767500", "title": "Visual Studio 2015: C++ REST API (Casablanca) failing compilation in VS includes/headers", "body": "<p>I installed <a href=\"https://www.visualstudio.com/post-download-vs?sku=community&amp;clcid=0x409&amp;downloadrename=true#\" rel=\"nofollow\">Visual Studio Community Edition 2015</a>. After that I installed Casablanca from NuGet. And all worked. I seems that the installation was corrupted / was a RC, as </p>\n\n<p><strong>Casablanca Version</strong> --> <code>cpprestsdk.v140.windesktop.msvcstl.dyn.rt-dyn.2.8.0</code></p>\n"}], "owner": {"reputation": 2393, "user_id": 3722884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7AFP5.jpg?s=128&g=1", "display_name": "SimpleGuy", "link": "https://stackoverflow.com/users/3722884/simpleguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 38767500, "answer_count": 1, "score": 1, "last_activity_date": 1523975035, "creation_date": 1470237701, "last_edit_date": 1523975035, "question_id": 38747680, "link": "https://stackoverflow.com/questions/38747680/visual-studio-2015-c-rest-api-casablanca-failing-compilation-in-vs-includes", "title": "Visual Studio 2015: C++ REST API (Casablanca) failing compilation in VS includes/headers", "body": "<p>I installed <strong>Visual Studio 2015</strong> Professional edition today and created a <strong>C++ Win32 console application</strong></p>\n\n<p>Then I want to use C++ REST SDK (Casablanca), so I downloaded it v14 using NuGet package manager And created a sample program using <a href=\"https://github.com/Microsoft/cpprestsdk/wiki/Getting-Started-Tutorial\" rel=\"nofollow noreferrer\">this</a> link</p>\n\n<p>However, when I compiled, I am getting errors in VS includes..</p>\n\n<p><a href=\"https://i.stack.imgur.com/ylwJW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ylwJW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Clicked on first error, it takes to here</p>\n\n<p><a href=\"https://i.stack.imgur.com/Go9eE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Go9eE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can't understand why VS includes are failing compilation. \nSo, I created another project and just put \"hello world\" and it worked fine</p>\n\n<p><strong>Please help</strong></p>\n\n<p><strong>Edit:</strong> Pasting error test</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(100): error C2737: 'std::is_same_v': 'constexpr' object must be initialized\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(100): error C2998: 'const bool std::is_same_v': cannot be a template definition\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(245): error C2737: 'std::is_integral_v': 'constexpr' object must be initialized\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(245): error C2998: 'const bool std::is_integral_v': cannot be a template definition\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(282): error C2737: 'std::is_floating_point_v': 'constexpr' object must be initialized\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(282): error C2998: 'const bool std::is_floating_point_v': cannot be a template definition\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(295): error C2737: 'std::is_arithmetic_v': 'constexpr' object must be initialized\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(295): error C2998: 'const bool std::is_arithmetic_v': cannot be a template definition\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xstddef(697): error C2737: 'std::is_function_v': 'constexpr' object must be initialized\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xstddef(697): error C2998: 'const bool std::is_function_v': cannot be a template definition\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1113): error C3861: '__builtin_huge_valf': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1118): error C3861: '__builtin_nanf': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1123): error C3861: '__builtin_nansf': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1176): error C3861: '__builtin_huge_val': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1181): error C3861: '__builtin_nan': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1186): error C3861: '__builtin_nans': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1239): error C3861: '__builtin_huge_val': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1244): error C3861: '__builtin_nan': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\limits(1249): error C3861: '__builtin_nans': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(524): error C2275: '_To': illegal use of this type as an expression\r\n1&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(521): note: see declaration of '_To'\r\n1&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(526): note: see reference to class template instantiation 'std::is_assignable&lt;_To,_From&gt;' being compiled\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(524): error C2275: '_From': illegal use of this type as an expression\r\n1&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(522): note: see declaration of '_From'\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(524): error C3861: '__is_assignable': identifier not found\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(524): error C2975: '_Val': invalid template argument for 'std::integral_constant', expected compile-time constant expression\r\n1&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xtr1common(21): note: see declaration of '_Val'\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(1245): error C2061: syntax error: identifier '__make_integer_seq'\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(1249): error C2065: '_Vals': undeclared identifier\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(1249): error C2975: '_Vals': invalid template argument for 'std::integer_sequence', expected compile-time constant expression\r\n1&gt;  c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(1190): note: see declaration of '_Vals'\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(1252): error C2061: syntax error: identifier 'make_integer_sequence'\r\n1&gt;c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\type_traits(1261): error C2631: 'identity': a class or enum cannot be defined in an alias template\r\n1&gt;c:\\users\\arunav\\documents\\visual studio 2015\\projects\\consoleapplication1\\consoleapplication1\\stdafx.cpp : fatal error C1903: unable to recover from previous error(s); stopping compilation</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "c", "header-files"], "comments": [{"owner": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "edited": false, "score": 0, "creation_date": 1470237665, "post_id": 38747604, "comment_id": 64869105, "body": "I call it the &#39;interface&#39;... I think this might be a technical name"}, {"owner": {"reputation": 777, "user_id": 1791084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f97e6a50390550004415bfe5a6032?s=128&d=identicon&r=PG", "display_name": "KidneyChris", "link": "https://stackoverflow.com/users/1791084/kidneychris"}, "edited": false, "score": 1, "creation_date": 1470237780, "post_id": 38747604, "comment_id": 64869203, "body": "Why not &quot;I switch from the implementation to the header&quot;? I don&#39;t think there&#39;s standardised terminology: my office calls them &quot;source&quot; and &quot;header&quot;  respectively &quot;Look at dummy&#39;s source/Look at dummy&#39;s header&quot;"}, {"owner": {"reputation": 712, "user_id": 4009370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b92c9a656d5274db5b46d2341ea468?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Sprague", "link": "https://stackoverflow.com/users/4009370/chris-sprague"}, "edited": false, "score": 3, "creation_date": 1470237793, "post_id": 38747604, "comment_id": 64869213, "body": "Typically you have your <i>declarations</i> in the header file and <i>definitions</i> in the source file. I think &quot;corresponding header&quot; is clear enough. I often find myself referring to the corresponding header as &quot;the dot h&quot; (as in <code>.h</code>)... i.e. if I need to talk about <code>foo.cpp</code>&#39;s corresponding header, I might say &quot;foo&#39;s dot h file.&quot;"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 6, "creation_date": 1470237925, "post_id": 38747604, "comment_id": 64869313, "body": "There is no official/technical term. &quot;Corresponding header&quot; is perfectly acceptable."}, {"owner": {"reputation": 606, "user_id": 1223292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d1fb2e93924f47c29b17d269ca8596f?s=128&d=identicon&r=PG", "display_name": "Eirik M", "link": "https://stackoverflow.com/users/1223292/eirik-m"}, "edited": false, "score": 0, "creation_date": 1470238078, "post_id": 38747604, "comment_id": 64869421, "body": "I think corresponding header is fine. For the .c file the technical term is &#39;module&#39;, because it is what actually gets compiled. The header file is also source code, which gets included in the module to create a translation unit, that gets compiled. The thing with &quot;corresponding header&quot; is that it should include what another module should be able to access."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1470238206, "post_id": 38747604, "comment_id": 64869511, "body": "The point is that such an association is <i>conventional</i> (and not every project follows that convention). For small projects (of less than e.g. 100KLOC) I don&#39;t use such a convention. I would have a <i>single</i> header file included by all the translation unit (e.g. <code>*.c</code>)."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470238225, "post_id": 38747604, "comment_id": 64869525, "body": "Here is Dummy&#39;s Class Implementation."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1470314568, "post_id": 38747604, "comment_id": 64906408, "body": "@RobK I am ok with the question being closed, however when I asked, there was no way to know if a technical term existed, and that this would have generated opinion-based discussion."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1470239385, "post_id": 38747979, "comment_id": 64870347, "body": "C++ does not have modules."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1470247868, "post_id": 38747979, "comment_id": 64875434, "body": "@LightnessRacesinOrbit In C++, can&#39;t it be used as synonymous of <a href=\"http://stackoverflow.com/a/1106167/2436175\">translation unit</a>? See <a href=\"http://stackoverflow.com/a/14714959/2436175\">stackoverflow.com/a/14714959/2436175</a>"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1470248251, "post_id": 38747979, "comment_id": 64875610, "body": "I like your answer. However, if &quot;module&quot; is just a synonymous of &quot;translation unit&quot;, it sound very strange to say &quot;the interface (or the header) of the translation unit&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1470263605, "post_id": 38747979, "comment_id": 64883192, "body": "@Antonio: That very answer makes it pretty clear that the term should be avoided for its use is at best non-standard and at worst highly ambiguous."}], "tags": [], "owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "is_accepted": false, "score": 1, "last_activity_date": 1470238456, "creation_date": 1470238456, "answer_id": 38747979, "question_id": 38747604, "link": "https://stackoverflow.com/questions/38747604/is-there-a-technical-name-of-the-header-corresponding-to-a-given-source-file/38747979#38747979", "title": "Is there a technical name of the header &quot;corresponding&quot; to a given source file?", "body": "<p>You have a module, consisting of an interface (the header) and an implementation (the C++ file).</p>\n\n<p>So you can say the interface or header of the module, and the implementation or C++ file of the module.</p>\n\n<p>Compare it to the wheels and motor of a car. You can say wheels of a car, motor of a car, but not (in the most obvious sense) wheels of a motor, motor of the wheels.</p>\n\n<p>And: All this is only half true, since language isn't mathematics...\nSo in fact to me all the possibilities you mention do the job: to clarify to me what you mean.</p>\n"}, {"tags": [], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "is_accepted": true, "score": 0, "last_activity_date": 1470314139, "last_edit_date": 1470314139, "creation_date": 1470306067, "answer_id": 38764696, "question_id": 38747604, "link": "https://stackoverflow.com/questions/38747604/is-there-a-technical-name-of-the-header-corresponding-to-a-given-source-file/38764696#38764696", "title": "Is there a technical name of the header &quot;corresponding&quot; to a given source file?", "body": "<p>It appears there is no official/technical term for this. Given the comments, it seems there's an agreement that the term \"corresponding header\" is clear enough.</p>\n\n<p>To be totally unambiguous, I can express my concept saying:</p>\n\n<blockquote>\n  <p>An implementation file should first of all include the header file it is implementing.</p>\n</blockquote>\n\n<p>(And then, the concept might be correct or wrong, but this is another story :) )</p>\n"}], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1470306096, "accepted_answer_id": 38764696, "answer_count": 2, "score": 1, "last_activity_date": 1470314139, "creation_date": 1470237529, "last_edit_date": 1470238067, "question_id": 38747604, "link": "https://stackoverflow.com/questions/38747604/is-there-a-technical-name-of-the-header-corresponding-to-a-given-source-file", "closed_reason": "Opinion-based", "title": "Is there a technical name of the header &quot;corresponding&quot; to a given source file?", "body": "<p>Let's say I have a header file <code>dummy.h</code>, and a corresponding <code>dummy.cpp</code> or <code>dummy.c</code>. When I switch from the first to the second, I can say \"I switch from the header to its implementation\". But how can I express the opposite? \"Header's implementation\" sounds ok, but \"Implementation's header\" not really.</p>\n\n<p>The question came to me when I wanted to express the concept that an implementation file should first of all include... <em>its own header</em>. (This is actually not the topic of this question, it might very well be a future question, if I understand how to ask it).</p>\n\n<p>I saw a couple of occurrences of the term \"corresponding header\", but it's not used so often to be sure it's the right term.</p>\n"}, {"tags": ["c++", "testing", "boost", "bjam"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1470237337, "post_id": 38747506, "comment_id": 64868840, "body": "Do you have python installed? In fact, what is your problem specifically? What did you try? How did it fail? SO is not a tech support resource."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1470237424, "post_id": 38747506, "comment_id": 64868904, "body": "Check your python installation by typing python -v on a terminal. If you don&#39;t, get python and then run the script on the terminal by &#39;python boost_check_library.py&#39;"}, {"owner": {"reputation": 33, "user_id": 6028770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2874696999df02e311e66eaf3f4eda9?s=128&d=identicon&r=PG&f=1", "display_name": "Volodymyr Sereda", "link": "https://stackoverflow.com/users/6028770/volodymyr-sereda"}, "edited": false, "score": 0, "creation_date": 1470238007, "post_id": 38747506, "comment_id": 64869366, "body": "Apologies! I have Python installed (version 2.7). The problem lies in finding the correct combination of command-line options to execute the test script. Perhaps a better question would be... Is there any known way to run it? ^^ I&#39;m in the process of perusing the code in investigation, but it&#39;s strange how nothing on the internet shows how the script may be used."}, {"owner": {"reputation": 2941, "user_id": 318688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e569f859d0131ff8a22eca5884af78c1?s=128&d=identicon&r=PG", "display_name": "GrafikRobot", "link": "https://stackoverflow.com/users/318688/grafikrobot"}, "edited": false, "score": 0, "creation_date": 1470252133, "post_id": 38747506, "comment_id": 64877853, "body": "Nothing shows how to run it because it&#39;s a really new script I wrote.. And because it&#39;s mostly an internal script that is usually only used from b2."}], "answers": [{"comments": [{"owner": {"reputation": 2941, "user_id": 318688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e569f859d0131ff8a22eca5884af78c1?s=128&d=identicon&r=PG", "display_name": "GrafikRobot", "link": "https://stackoverflow.com/users/318688/grafikrobot"}, "edited": false, "score": 0, "creation_date": 1470252013, "post_id": 38748162, "comment_id": 64877777, "body": "You can shorten that command to only include the &quot;organization&quot; check. As it will include all the sub-checks (organization-*) in that case. Otherwise, that&#39;s the direct way to use it. It&#39;s also possible to just do: b2 --check-libs-only --limit-tests=&lt;library&gt;"}, {"owner": {"reputation": 33, "user_id": 6028770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2874696999df02e311e66eaf3f4eda9?s=128&d=identicon&r=PG&f=1", "display_name": "Volodymyr Sereda", "link": "https://stackoverflow.com/users/6028770/volodymyr-sereda"}, "reply_to_user": {"reputation": 2941, "user_id": 318688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e569f859d0131ff8a22eca5884af78c1?s=128&d=identicon&r=PG", "display_name": "GrafikRobot", "link": "https://stackoverflow.com/users/318688/grafikrobot"}, "edited": false, "score": 0, "creation_date": 1470302538, "post_id": 38748162, "comment_id": 64898439, "body": "Oh! Thank you :) I did not find the <code>--check-libs-only</code> option documented anywhere."}], "tags": [], "owner": {"reputation": 33, "user_id": 6028770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2874696999df02e311e66eaf3f4eda9?s=128&d=identicon&r=PG&f=1", "display_name": "Volodymyr Sereda", "link": "https://stackoverflow.com/users/6028770/volodymyr-sereda"}, "is_accepted": false, "score": 0, "last_activity_date": 1470238955, "creation_date": 1470238955, "answer_id": 38748162, "question_id": 38747506, "link": "https://stackoverflow.com/questions/38747506/c-boost-how-to-run-boost-check-library-py/38748162#38748162", "title": "C++ Boost: How To Run boost_check_library.py", "body": "<p>Okay, I have managed to find a solution :)</p>\n\n<p>Predonditions:</p>\n\n<ul>\n<li>You're using Python 2.7</li>\n</ul>\n\n<p>To run all tests for a library, you can use:</p>\n\n<p><code>./boost_check_library.py --boost-root=\"..\" --library=\"libs/&lt;library&gt;/\" --jamfile=\"Jamfile.v2\" --debug organization organization-build organization-doc organization-include organization-meta organization-test</code></p>\n\n<p>Where <code>&lt;library&gt;</code> the library that you want to test.</p>\n\n<p>Hope this helps someone ^_^</p>\n"}], "owner": {"reputation": 33, "user_id": 6028770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2874696999df02e311e66eaf3f4eda9?s=128&d=identicon&r=PG&f=1", "display_name": "Volodymyr Sereda", "link": "https://stackoverflow.com/users/6028770/volodymyr-sereda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470238955, "creation_date": 1470237278, "question_id": 38747506, "link": "https://stackoverflow.com/questions/38747506/c-boost-how-to-run-boost-check-library-py", "title": "C++ Boost: How To Run boost_check_library.py", "body": "<p>I'm trying to run <code>&lt;boost&gt;/status/boost_check_library.py</code> for a particular Boost library to test that it conforms to the Boost Library Requirements.</p>\n\n<p>However, I'm having a hard time finding how to do so - there does not appear to be any documentation on the subject. I found that it's meant to be executed from <code>&lt;boost&gt;/status/Jamfile.v2</code>, but my knowledge of jamfiles is limited and I can't seem to get it to work.</p>\n\n<p>Would anyone have any experience with this and be willing to help? Thank you! :)</p>\n"}, {"tags": ["c++", "concurrency", "stl", "c++14", "transactional-memory"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1470241898, "post_id": 38747188, "comment_id": 64872004, "body": "I strongly suspect that the unconditional transaction-safe on <code>operator[]</code> for <code>unordered_meow</code> is a defect."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1470259383, "creation_date": 1470259383, "answer_id": 38753877, "question_id": 38747188, "link": "https://stackoverflow.com/questions/38747188/why-are-ordered-stdmap-and-ordered-stdset-not-invited-to-make-transaction-sa/38753877#38753877", "title": "Why are ordered std::map and ordered std::set not invited to make transaction_safe?", "body": "<p>That <code>unordered_meow::operator[]</code> is specified to be unconditionally transaction-safe is a defect.</p>\n\n<ul>\n<li>To start with, <code>unordered_set</code>, <code>unordered_multiset</code> and <code>unordered_multimap</code> don't even have an <code>operator[]</code> in the first place.</li>\n<li><code>unordered_map::operator[]</code> must call <code>Hash</code> and <code>Pred</code>, and possibly allocate memory and construct a new key-value pair; none of these are necessarily transaction safe.</li>\n</ul>\n\n<p>Instead, <code>map::operator[]</code>'s transaction safety is governed by the addition to [container.requirements.general]:</p>\n\n<blockquote>\n  <p>Unless unconditionally specified to be transaction-safe, a function in\n  this Clause is transaction-safe if all required operations are\n  transaction-safe. [ Note: This includes operations on the element\n  type, on <code>std::allocator_traits</code>, and on <code>Compare</code>, <code>Pred</code>, or <code>Hash</code> objects,\n  depending on the respective function. -- end note ]</p>\n</blockquote>\n"}], "owner": {"reputation": 11039, "user_id": 1558037, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1abbdabec023ba29c9ee3340d5519a3?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1558037/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 2, "accepted_answer_id": 38753877, "answer_count": 1, "score": 3, "last_activity_date": 1470259383, "creation_date": 1470236409, "last_edit_date": 1495541694, "question_id": 38747188, "link": "https://stackoverflow.com/questions/38747188/why-are-ordered-stdmap-and-ordered-stdset-not-invited-to-make-transaction-sa", "title": "Why are ordered std::map and ordered std::set not invited to make transaction_safe?", "body": "<p>As known there are Transactional Memory TS (ISO/IEC TS 19841:2015) in the Experimental C++: <a href=\"https://stackoverflow.com/questions/38663379/is-it-enough-to-declare-a-function-as-transaction-safe-so-they-can-be-used-thre\">Is it enough to declare a function as transaction_safe, so they can be used thread-safe?</a></p>\n\n<p>And <code>operator[]</code> declared as <code>transaction_safe</code> only for containers: <code>std::vector</code>, <code>std::unordered_map</code>, <code>std::unordered_multimap</code>, <code>std::unordered_set</code>, <code>std::unordered_multiset</code>, <code>std::deque</code> - Taken from n4514: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4514.pdf\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4514.pdf</a></p>\n\n<blockquote>\n  <p>23.4 Associative containers [associative]</p>\n  \n  <p>23.4.4 Class template map [map]</p>\n  \n  <p>23.4.4.1 Class template map overview [map.overview]</p>\n  \n  <p>In 23.4.4.1 [map.overview], add \"transaction_safe\" to the declarations\n  of all variants of the begin and end member functions and to the\n  declarations of size, max_size, and empty.</p>\n</blockquote>\n\n<p>But why is not there <code>operator[]</code> declared as <code>transaction_safe</code> for <code>std::map</code> and <code>std::set</code> (but there are for <code>unordered_map</code>/<code>unordered_set</code>)? </p>\n\n<p>And why there are add \"transaction_safe\" to the declarations of all variants of the <code>begin</code> and <code>end</code> member functions for <code>std::map</code> and <code>std::set</code>?</p>\n\n<p>Iterators <code>begin</code> and <code>end</code> are very necessary for the <code>std::array</code>, <code>std::vector</code> or <code>std::list</code>, but not for an associative array. In an associative array required find or find-and-modify functions: <code>find</code>, <code>at</code>, <code>insert</code>, <code>erase</code> and <code>operator[]</code>. Without them, it does not make sense.</p>\n\n<p>Why are ordered std::map and ordered std::set not invited to make transaction_safe?</p>\n"}, {"tags": ["c#", "c++", "visual-studio"], "owner": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470237287, "creation_date": 1470236381, "last_edit_date": 1495541624, "question_id": 38747180, "link": "https://stackoverflow.com/questions/38747180/vs-2015-doesnt-rebuild-startup-project-when-referenced-project-changed", "title": "VS 2015 doesn&#39;t rebuild startup project when referenced project changed", "body": "<p>In VS 2015\nI have UWP C# project, which references UWP Windows Runtime Component C++ project, which references native shared C++ library.</p>\n\n<p><code>UWP C# -&gt; UWP WRT C++ -&gt; unmanaged C++</code></p>\n\n<p>Basically WRT project is just connect C# with C++. it doesn't contain any files, all calls go thorugh PInvoke's.</p>\n\n<p>Every time I make changes in native C++ library and press run, I see in Outout windows that it rebuild that C++ project. But it somehow doesn't affect startup project. (may be it just don't copy C++'s dll?)</p>\n\n<p>To see the changes, I have to clean/rebuild startup project each time.</p>\n\n<p>P.S. I tried this <a href=\"https://stackoverflow.com/a/3544451/1559666\">https://stackoverflow.com/a/3544451/1559666</a> - but it didn't help me.</p>\n"}, {"tags": ["java", "c++", "eclipse", "ide", "eclipse-neon"], "answers": [{"comments": [{"owner": {"reputation": 14016, "user_id": 741249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fe8209386c5536cf11e790de7751da?s=128&d=identicon&r=PG", "display_name": "THelper", "link": "https://stackoverflow.com/users/741249/thelper"}, "edited": false, "score": 0, "creation_date": 1474882013, "post_id": 38747767, "comment_id": 66696572, "body": "It&#39;s also recommended to create a new workspace, or at least create a backup of your workspace if you decide to upgrade it a newer Eclipse version."}], "tags": [], "owner": {"reputation": 8377, "user_id": 3378204, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jrjpD.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/3378204/eugene"}, "is_accepted": true, "score": 5, "last_activity_date": 1470239876, "last_edit_date": 1495540109, "creation_date": 1470237934, "answer_id": 38747767, "question_id": 38747120, "link": "https://stackoverflow.com/questions/38747120/should-i-uninstall-eclipse-or-just-install-a-new-version-on-top/38747767#38747767", "title": "Should I Uninstall Eclipse, or Just Install a New Version on Top?", "body": "<p>No need to uninstall existed Eclipse since it's allowed to let multi eclipse run on the same machine. </p>\n\n<p>If no big change has been made from original eclipse, I suggest just download a new version eclipse and unzip it to a different folder from existed eclipse folder based on instructions from <a href=\"https://wiki.eclipse.org/FAQ_How_do_I_upgrade_Eclipse_IDE%3F\" rel=\"nofollow noreferrer\">FAQ How do I upgrade Eclipse IDE?</a> </p>\n\n<blockquote>\n  <p>We strongly recommend against unzipping over your existing Eclipse\n  version as unexpected side effects may occur, including (but not\n  limited to): nausea, vomitting, shortness of breath, corrupt\n  installation.</p>\n</blockquote>\n\n<p>You can then point the new Eclipse version to your existing workspace(s) and it will load with all your projects and preferences intact.</p>\n\n<p>If your you have added many plugins and preferences to current Eclipse, please follow <a href=\"https://stackoverflow.com/questions/11263423/easiest-way-to-upgrade-eclipse-3-7-to-4-2-juno\">Easiest way to upgrade eclipse 3.7 to 4.2 (Juno)</a> to migrate the plugins and preferences. Although that's a bit of a dicey process, since many plugins would be incompatible or need to be updated themselves. Better to just install whatever third-party plugins you use into the new Eclipse installation.</p>\n"}], "owner": {"reputation": 707, "user_id": 6557223, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/TxoeR.jpg?s=128&g=1", "display_name": "Mink", "link": "https://stackoverflow.com/users/6557223/mink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 0, "accepted_answer_id": 38747767, "answer_count": 1, "score": 4, "last_activity_date": 1470239876, "creation_date": 1470236217, "question_id": 38747120, "link": "https://stackoverflow.com/questions/38747120/should-i-uninstall-eclipse-or-just-install-a-new-version-on-top", "title": "Should I Uninstall Eclipse, or Just Install a New Version on Top?", "body": "<p>To preface, I am a student and have limited experience with IDEs. My situation is that I currently have two versions of Eclipse on my machine (OSX El Capitan), one being a C/C++ IDE (Mars) and the other is a Java IDE (Mars.2).  I am interested in upgrading to Eclipse Neon for my Java IDE.  </p>\n\n<p>Would it be a good idea to uninstall my current Mars.2 version, or just install Neon on top of what I have?</p>\n\n<p>Or, is there a another simple way to upgrade?</p>\n\n<p>If the solution involves uninstalling my Mars.2 version, what files/directories do I need to delete so that my C++ IDE remains functional?</p>\n\n<p>I apologize for the newbie question, but I wanted to get an expert's take that I can bring into my (hopeful) career.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1470236307, "post_id": 38747102, "comment_id": 64868078, "body": "You have a circular include dependency, so you need to use forward declarations for at least one of your classes."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1470236466, "post_id": 38747102, "comment_id": 64868191, "body": "in fact, <i>none</i> of your header files need any includes - just forward declarations as needed."}], "owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "closed_date": 1470236496, "answer_count": 0, "score": 0, "last_activity_date": 1470236170, "creation_date": 1470236170, "question_id": 38747102, "link": "https://stackoverflow.com/questions/38747102/cannot-convert-argument-from-const-bar-to-const-int", "closed_reason": "Duplicate", "title": "Cannot convert argument from &quot;const bar&quot; to &quot;const int&quot;", "body": "<p>I already posted this question but not Minimal, Complete and Verifiable. So here it is again:\nGiven are the following 5 very small files:</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"bar.h\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    const bar testBar;\n\n    testBar.barTest();\n\n    std::cin.get();\n}\n</code></pre>\n\n<p>bar.h</p>\n\n<pre><code>#pragma once\n\n#include \"foobar.h\"\n\nclass bar\n{\npublic:\n    bar();\n    ~bar();\n\n    void barTest() const;\n\nprivate:\n    foobar* m_pFoobar;\n};\n</code></pre>\n\n<p>bar.cpp</p>\n\n<pre><code>#include \"bar.h\"\n\nbar::bar()\n{\n    m_pFoobar = new foobar;\n}\n\nbar::~bar()\n{\n}\n\nvoid bar::barTest() const\n{\n    m_pFoobar-&gt;fooTest(*this);\n}\n</code></pre>\n\n<p>foo.h</p>\n\n<pre><code>#pragma once\n\n#include \"bar.h\"\n\nclass foo\n{\npublic:\n    virtual void fooTest(const bar&amp; b);\n};\n</code></pre>\n\n<p>foobar.h</p>\n\n<pre><code>#pragma once\n\n#include \"bar.h\"\n#include \"foo.h\"\n\nclass foobar : public foo\n{\npublic:\n    foobar();\n    ~foobar();\n\n    void fooTest(const bar&amp; b);\n};\n</code></pre>\n\n<p>foobar.cpp</p>\n\n<pre><code>#include \"foobar.h\"\n\n#include &lt;iostream&gt;\n\nfoobar::foobar()\n{\n}\n\nfoobar::~foobar()\n{\n}\n\nvoid foobar::fooTest(const bar&amp; b)\n{\n    std::cout &lt;&lt; \"SUCCESS\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>When I run this code, VS2015 is telling me the following:</p>\n\n<pre><code>Error   C2664   'void foobar::fooTest(const int)': cannot convert argument 1 from 'const bar' to 'const int'    bar.cpp 14\n</code></pre>\n\n<p>I don't understand the reason why the compiler interprets my function with an <code>int</code> as argument. I hope someone can help me.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "edited": false, "score": 0, "creation_date": 1470236714, "post_id": 38747074, "comment_id": 64868388, "body": "You can&#39;t create a vector of objects of abstract type but you can create a vector of pointers (either smart or not) or references for such objects. This approach solves your problem."}], "answers": [{"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 0, "last_activity_date": 1470236344, "creation_date": 1470236344, "answer_id": 38747170, "question_id": 38747074, "link": "https://stackoverflow.com/questions/38747074/c-how-to-call-pure-virtual-method-from-multiple-derived-classes-from-one-funct/38747170#38747170", "title": "c++ how to call pure virtual method from multiple derived classes from one function?", "body": "<p>Your problem will be creating the <code>vector&lt;Base&gt;</code>: this is not allowed, as it requires instantiation of an abstract class, <code>Base</code>.</p>\n\n<p>You could have a <code>vector</code> of <em>pointers</em> to base, as it is only pointers (and references) that can behave polymorphically (note: your function should take the <code>vector</code> by <code>const</code> reference rather than by value):</p>\n\n<pre><code>void printDerive(const vector&lt;std::unique_ptr&lt;Base&gt;&gt;&amp; bases){\n      for (auto&amp; base: bases)\n      {\n        base-&gt;printMe();\n      }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "edited": false, "score": 0, "creation_date": 1470236829, "post_id": 38747217, "comment_id": 64868468, "body": "Thanks, the compiler did not give an error on function void printDerive(vector&lt;Base&gt; bases) without any contents in the brackets so i thought it would be allowd."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 3, "last_activity_date": 1470236483, "creation_date": 1470236483, "answer_id": 38747217, "question_id": 38747074, "link": "https://stackoverflow.com/questions/38747074/c-how-to-call-pure-virtual-method-from-multiple-derived-classes-from-one-funct/38747217#38747217", "title": "c++ how to call pure virtual method from multiple derived classes from one function?", "body": "<p>You can't have a <code>vector&lt;Base&gt;</code> or have <code>Base base</code> in your range-based for loop, because <code>Base</code> is abstract and both of those require constructing a <code>Base</code>.</p>\n\n<p>One solution would be to store <code>std::vector&lt;std::unique_ptr&lt;Base&gt;&gt;</code> for both <code>one</code> and <code>two</code> so that you can get dynamic dispatch:</p>\n\n<pre><code>class holder{\nprivate:\n   std::vector&lt;std::unique_ptr&lt;Base&gt;&gt; one;\n   std::vector&lt;std::unique_ptr&lt;Base&gt;&gt; two;\npublic:\n   void printDerive(const std::vector&lt;std::unique_ptr&lt;Base&gt;&gt;&amp; bases){\n      for (auto&amp;&amp; base: bases)\n      {\n        base-&gt;printMe();\n      }\n   };\n};\n</code></pre>\n\n<p>Another option would be to keep your storage as-is and have a template function to print them:</p>\n\n<pre><code>class holder{\nprivate:\n   std::vector&lt;derivedOne&gt; one;\n   std::vector&lt;derivedTwo&gt; two;\npublic:\n   template &lt;class T&gt;\n   void printDerive(const std::vector&lt;T&gt;&amp; ts){\n      for (auto&amp;&amp; t: ts)\n      {\n        t.printMe();\n      }\n   };\n};\n</code></pre>\n\n<p>These solutions will have consequences for how you allocate the elements and use the vectors, so choose based on your other requirements.</p>\n"}], "owner": {"reputation": 9876, "user_id": 1667868, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01faa51ea5dddd44aeeb572d4b45c835?s=128&d=identicon&r=PG&f=1", "display_name": "Sven van den Boogaart", "link": "https://stackoverflow.com/users/1667868/sven-van-den-boogaart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 38747217, "answer_count": 2, "score": 1, "last_activity_date": 1470236483, "creation_date": 1470236088, "question_id": 38747074, "link": "https://stackoverflow.com/questions/38747074/c-how-to-call-pure-virtual-method-from-multiple-derived-classes-from-one-funct", "title": "c++ how to call pure virtual method from multiple derived classes from one function?", "body": "<p>Is it possible to call a pure virtual function from a loop?</p>\n\n<p>Some pseudocode to explain what im trying to achive </p>\n\n<p>(tried a version of the following example but got error: object of abstract class type \"Base\" is not allowed)   </p>\n\n<pre><code>class Base{\n  public:\n    virtual void printMe() =0;\n};\n\nclass derivedOne{\n  public:\n    void printMe(){std::cout &lt;&lt; \"one \"&lt;&lt;endl;\n};\n\nclass derivedTwo{\n  public:\n    void printMe(){std::cout &lt;&lt; \"two\"&lt;&lt;endl;\n};\n\nclass holder{\n  private:\n   vector&lt;derivedOne&gt; one;\n   vector&lt;derivedTwo&gt; two;\n   void printDerive(vector&lt;Base&gt; bases){\n      for (Base base: bases)\n      {\n        base.printMe();\n      }\n   };\n};\n</code></pre>\n\n<p>All derived classes implement the function printMe (because its a pure virtual function in base).\nIm trying to avoid writing a print loop for each class that implemented printMe from base because the functions will all do the same (loop the items in a vector and call printMe).  </p>\n"}, {"tags": ["c++", "binary-search"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1470236030, "post_id": 38746996, "comment_id": 64867861, "body": "You should do some <i>more</i> debugging.  Step through the whole thing to find out which calculation went wrong."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1470236128, "post_id": 38746996, "comment_id": 64867953, "body": "You make all these recursive calls to <code>bsearch</code>, then discard their result. The top-level call (the one from <code>main</code>) then falls through to <code>return -1;</code>. The two recursive call should be <code>return bsearch(...);</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470236992, "post_id": 38746996, "comment_id": 64868588, "body": "You should place a <code>return</code> with the recursive calls: <code>return bsearch(x, lo, hi, a);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6672853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3fa4b277c9c2b0ef53c4a92c8e31ba?s=128&d=identicon&r=PG&f=1", "display_name": "problem_solver", "link": "https://stackoverflow.com/users/6672853/problem-solver"}, "edited": false, "score": 0, "creation_date": 1470412115, "post_id": 38748348, "comment_id": 64956667, "body": "Thanks. The problem was with my understanding of recursive calls. Just to be clear, the return statement in a recursively called function transfers the control to the program that called it, right? (And here I assumed it would return control to the &#39;main&#39; function.)"}], "tags": [], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "is_accepted": false, "score": 2, "last_activity_date": 1470239509, "creation_date": 1470239509, "answer_id": 38748348, "question_id": 38746996, "link": "https://stackoverflow.com/questions/38746996/wrong-output-for-binary-search-for-extreme-elements-in-a-sorted-array/38748348#38748348", "title": "Wrong output for binary search for extreme elements in a sorted array", "body": "<p>You are missing return statement in lines with recursive calls to bsearch function.</p>\n\n<p>This seems to work:</p>\n\n<pre><code>int bsearch(int x, int lo, int hi, int a[])\n{\n    if(lo &lt;= hi)\n    {\n        int mid = lo + (hi - lo)/2;\n        if(x == a[mid])\n        {\n           return mid;\n        }\n        else if(x &lt; a[mid])\n        {\n            hi = mid - 1;\n            return bsearch(x, lo, hi, a);\n        }\n        else\n        {\n            lo = mid + 1;\n            return bsearch(x, lo, hi, a);\n        }\n    }\n    return -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6672853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3fa4b277c9c2b0ef53c4a92c8e31ba?s=128&d=identicon&r=PG&f=1", "display_name": "problem_solver", "link": "https://stackoverflow.com/users/6672853/problem-solver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470241606, "creation_date": 1470235872, "last_edit_date": 1470241606, "question_id": 38746996, "link": "https://stackoverflow.com/questions/38746996/wrong-output-for-binary-search-for-extreme-elements-in-a-sorted-array", "title": "Wrong output for binary search for extreme elements in a sorted array", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint bsearch(int x, int lo, int hi, int a[])\n{\n    if(lo &lt;= hi) {\n        int mid = lo + (hi - lo)/2;\n        if(x == a[mid]) {\n            cout&lt;&lt;mid&lt;&lt;endl;\n           return mid;\n        } else if(x &lt; a[mid]) {\n            hi = mid - 1;\n            bsearch(x, lo, hi, a);\n        } else {\n            lo = mid + 1;\n            bsearch(x, lo, hi, a);\n        }\n    }\n\n    return -1;\n}\n\nmain()\n{\n    int a[5] = {12, 13, 15, 18, 20};\n    cout &lt;&lt; bsearch(20, 0, 4, a);\n}\n</code></pre>\n\n<p>The above is an implementation of binary search in C++. I wrote a function to perform binary search that takes in a sorted array as input. Inside the main function, I have passed an array of sorted integers as an argument to the function. The program seems to work fine when I search for an element not located at the extreme ends of the array, but gives wrong output for extreme elements. To find out the error, I included a \"cout\" statement within the function body to print out the value of 'mid'. Surprisingly, the value of mid is calculated correctly, even in the case of elements at extremes of the array, but the output of the program is still wrong for extreme elements. Can anyone point out what is wrong with it?</p>\n"}, {"tags": ["c++", "boost", "boost-geometry"], "answers": [{"tags": [], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "is_accepted": true, "score": 2, "last_activity_date": 1470257271, "creation_date": 1470257271, "answer_id": 38753332, "question_id": 38746894, "link": "https://stackoverflow.com/questions/38746894/dilating-a-polygon-boostgeometry/38753332#38753332", "title": "Dilating a polygon boost::geometry", "body": "<p>The term for this is \"buffer\", and buffering polygons is only implemented in the overload of buffer() with strategies: <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/geometry/doc/html/geometry/reference/algorithms/buffer/buffer_7_with_strategies.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_61_0/libs/geometry/doc/html/geometry/reference/algorithms/buffer/buffer_7_with_strategies.html</a></p>\n\n<p>Here is an example that dilates a triangle by .1 units.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n\n#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;boost/geometry/geometries/polygon.hpp&gt;\n\nusing coordinate_type = double;\nusing point_type = boost::geometry::model::d2::point_xy&lt;coordinate_type&gt;;\nusing polygon_type = boost::geometry::model::polygon&lt;point_type&gt;;\n\nint main()\n{\n    // Construct\n    polygon_type polygon;\n    // Counter clock-wise points don't seem to work (no error, but empty output)\n//    boost::geometry::append(polygon, point_type {0,0});\n//    boost::geometry::append(polygon, point_type {1,0});\n//    boost::geometry::append(polygon, point_type {0,1});\n//    boost::geometry::append(polygon, point_type {0,0});\n\n    // Points specified in clockwise order\n    boost::geometry::append(polygon, point_type {0,0});\n    boost::geometry::append(polygon, point_type {0,1});\n    boost::geometry::append(polygon, point_type {1,0});\n    boost::geometry::append(polygon, point_type {0,0});\n\n    //boost::geometry::buffer(poly, output, .5); // THIS_OPERATION_IS_NOT_OR_NOT_YET_IMPLEMENTED\n\n    const double buffer_distance = .1;\n    const int points_per_circle = 36;\n    boost::geometry::strategy::buffer::distance_symmetric&lt;coordinate_type&gt; distance_strategy(buffer_distance);\n    boost::geometry::strategy::buffer::join_round join_strategy(points_per_circle);\n    boost::geometry::strategy::buffer::end_round end_strategy(points_per_circle);\n    boost::geometry::strategy::buffer::point_circle circle_strategy(points_per_circle);\n    boost::geometry::strategy::buffer::side_straight side_strategy;\n\n    boost::geometry::model::multi_polygon&lt;polygon_type&gt; input;\n    input.push_back(polygon);\n\n    boost::geometry::model::multi_polygon&lt;polygon_type&gt; outputMultiPolygon;\n\n    boost::geometry::buffer(polygon, outputMultiPolygon,\n                distance_strategy, side_strategy,\n                join_strategy, end_strategy, circle_strategy);\n\n    std::cout &lt;&lt; outputMultiPolygon.size() &lt;&lt; std::endl;\n\n    polygon_type outputPolygon = outputMultiPolygon[0];\n\n    // Print the points of the result (there are many more than in the input because the corners have been rounded)\n    for(unsigned int pointID = 0; pointID &lt; outputPolygon.outer().size(); ++pointID) {\n        std::cout &lt;&lt; boost::geometry::get&lt;0&gt;(outputPolygon.outer()[pointID]) &lt;&lt; \" \" &lt;&lt; boost::geometry::get&lt;1&gt;(outputPolygon.outer()[pointID]) &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 1, "accepted_answer_id": 38753332, "answer_count": 1, "score": 0, "last_activity_date": 1470257271, "creation_date": 1470235580, "question_id": 38746894, "link": "https://stackoverflow.com/questions/38746894/dilating-a-polygon-boostgeometry", "title": "Dilating a polygon boost::geometry", "body": "<p>Is there a morphological dilation operation for polygon geometry objects? </p>\n\n<p>For example, say I have a square with side length 1 centered at the origin (a boost::geometry::model::polygon with points (.5, .5), (-.5, .5), (-.5, -.5), (.5, -.5) ). If I \"dilate\" it with a distance/radius of .5, I would get a square with side length 2, still centered at the origin. That is, all of the edges of the polygon should be \"pushed out\" along their normal direction.</p>\n"}, {"tags": ["c++", "opencv", "import", "neural-network", "rapidminer"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6672711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe89e0ba9bbe45ec429f9c07f4305f73?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Wieland", "link": "https://stackoverflow.com/users/6672711/sebastian-wieland"}, "is_accepted": false, "score": 0, "last_activity_date": 1470730648, "creation_date": 1470730648, "answer_id": 38845482, "question_id": 38746870, "link": "https://stackoverflow.com/questions/38746870/is-there-a-way-to-import-a-rapidminer-mlp-ann-in-opencv/38845482#38845482", "title": "Is there a way to import a RapidMiner MLP-ANN in OpenCV?", "body": "<p>After some time playing around with weights, positions and scales I came to the conclusion that it is generally <strong>not possible to use the same weights.</strong></p>\n\n<p>The reason for this is in my opinion the inability to handle categorical data as is (Look at the <a href=\"http://docs.opencv.org/2.4/modules/ml/doc/neural_networks.html\" rel=\"nofollow\">Official Documentation</a> for details).\nThe whole structure of the weights and scales becomes somehow incomprehensible for me.</p>\n\n<p>I had to retrain the network directly with OpenCV. This is sad, because I am not able to use the great crossvalidation-feature from RapidMiner to validate the classification. Furthermore the algorithms for training seem to work quite different, so I get a different network.</p>\n\n<p>If someone has a solution for importing the weights to OpenCV in the future, please let me know.</p>\n"}], "owner": {"reputation": 11, "user_id": 6672711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe89e0ba9bbe45ec429f9c07f4305f73?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Wieland", "link": "https://stackoverflow.com/users/6672711/sebastian-wieland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1470730648, "creation_date": 1470235522, "question_id": 38746870, "link": "https://stackoverflow.com/questions/38746870/is-there-a-way-to-import-a-rapidminer-mlp-ann-in-opencv", "title": "Is there a way to import a RapidMiner MLP-ANN in OpenCV?", "body": "<p>I trained and validated a MLP Model in RapidMiner Studio.\nMy Input Values are already normalized to [-1, 1].\nAs far as I understood, the MLP is already defined by its weights.\nAs you can see here, the ANN has one Hidden Layer:\n<a href=\"http://i.stack.imgur.com/qhVP0.png\" rel=\"nofollow\">http://i.stack.imgur.com/qhVP0.png</a></p>\n\n<p>Now I'm trying to import this in OpenCV, as I don't want to retrain the whole model.\nI got all weights per Node + Bias from RapidMiner.</p>\n\n<p>OpenCV offers the function CvANN_MLP::load(), where I am able to load a XML or YML file.\nI tried to modify an existing YML config for my needs. As you can see, I already defined the dimensions of the layers/data.</p>\n\n<p>I have 23 Inputs, 15 Hidden Nodes and 5 Outputs.\nSo i got (23 + 1) * 15 = 360 weights for the Hidden-Layer and (15 + 1) * 5 = 80 weights for the Output-Layer.</p>\n\n<p>My main questions are:</p>\n\n<ul>\n<li>Is this even possible?</li>\n<li>What is the correct order for the values?</li>\n<li>Where are the Bias-Values located?</li>\n<li>What exactly does the output-scaling do?</li>\n<li>How to determine the predicted label from the Response Matrix in OpenCV? (Is it the Index of the largest Value?)</li>\n</ul>\n\n<p>I already tried to import the modified file and the program compiled as well.\nIt computes something, but I don't think / am not really sure it worked.</p>\n\n<p>Here is my YML File:</p>\n\n<pre><code>%YAML:1.0\nmlp: !!opencv-ml-ann-mlp\n   layer_sizes: !!opencv-matrix\n      rows: 1\n      cols: 3\n      dt: i\n      data: [ 23, 15, 5 ]\n   activation_function: SIGMOID_SYM\n   f_param1: 0.6666666666666666\n   f_param2: 1.7159000000000000\n   min_val: -0.9500000000000000\n   max_val: 0.9500000000000000\n   min_val1: -0.9800000000000000\n   max_val1: 0.9800000000000000\n   training_params:\n      train_method: RPROP\n      dw0: 0.1000000000000000\n      dw_plus: 1.2000000000000000\n      dw_minus: 0.5000000000000000\n      dw_min: 1.1920928955078125e-07\n      dw_max: 50.\n      term_criteria: { epsilon:9.9999997764825821e-03, iterations:1000 }\n   input_scale: [ 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1 ]\n   output_scale: [ 1, -1, 1, -1, 1, -1, 1, -1, 1, -1 ]\n   inv_output_scale: [ 1, -1, 1, -1, 1, -1, 1, -1, 1, -1 ]\n   weights:\n      - [ 10.063, 8.812, 3.996, 19.716, -10.239, 2.720, -21.349, 16.635, 0.797, -0.906, -3.003, -5.882, -2.595, -0.957, -4.255, -2.008, 2.978, 17.362, 2.246, 9.740, 0.491, 3.492, 23.299, 10.214,\n          31.730, -23.089, 0.369, -72.193, 2.193, -9.687, 4.192, -26.858, 2.780, 5.791, 0.348, -3.331, 2.822, -15.520, -9.149, -16.861, -10.512, -17.079, -14.414, -14.371, -0.278, 10.420, -3.733, -1.921,\n          -0.198, 50.929, 0.355, 3.136, 4.892, 0.496, -10.206, -2.844, 0.606, 1.570, -3.054, 6.012, 1.654, -2.043, -2.194, -3.776, -4.745, -6.988, -4.795, -0.397, -2.280, -7.741, -12.301, -4.852,\n          21.052, 17.829, -5.563, -4.054, -4.946, 0.678, 12.326, 3.211, -0.077, 0.134, 2.265, 1.193, -0.252, -1.217, 2.801, -6.759, -0.816, -1.864, 3.791, -1.765, -0.300, -0.838, 2.362, 4.991,\n          9.959, 5.587, 0.087, 1.134, -0.840, -2.012, 9.899, 3.960, -1.249, 2.009, -1.026, 0.461, 0.856, 0.985, -1.318, -3.725, -0.370, -1.032, 3.027, 1.670, 3.671, 3.363, -0.966, 0.772,\n          2.141, 6.319, 1.173, 37.751, 2.052, -4.105, -33.639, -18.147, -1.244, -1.832, -1.618, 2.928, 0.035, -6.696, -3.505, -4.559, 0.323, -1.206, -10.850, 0.375, 2.033, -6.208, 7.072, -2.194,\n          -106.173, 23.689, -1.622, -32.154, 12.832, -55.287, -5.667, 20.985, 16.064, 4.698, 3.423, 9.451, 3.948, 1.577, -2.676, 15.881, -3.287, -6.384, 2.212, 3.454, -17.373, 0.468, -0.158, -12.710,\n          -50.325, -19.556, 11.445, 4.624, 17.463, 40.003, -18.085, -40.158, -4.420, -3.204, 9.482, 16.973, -0.983, 5.422, -3.963, 3.192, 4.276, 0.048, 0.945, -0.705, 12.549, -20.505, -23.406, -17.500,\n          2.170, 25.429, -0.580, -43.367, -12.480, 45.753, -14.348, -52.088, 7.153, -0.057, -2.941, -3.973, -1.758, -2.525, -4.490, -4.230, -5.430, -4.688, -3.771, -3.549, -0.440, -7.770, -2.080, 12.518,\n          11.252, 7.898, -0.520, -17.707, -4.407, -5.331, 30.505, 13.269, 0.283, 4.721, -1.135, -1.546, -0.606, 7.173, -1.892, -7.053, -7.691, 0.806, 5.935, 9.022, -0.864, 12.893, -4.822, 4.370,\n          -1.093, 9.921, -0.802, -7.914, -1.993, -1.787, -6.430, -5.814, 0.252, 0.518, -0.331, -3.952, -1.088, 0.780, 0.433, 0.413, -1.318, 2.360, 0.420, 1.616, 0.146, 0.591, 0.732, 2.001,\n          57.532, -41.869, -12.159, -5.874, 5.427, -8.832, 23.333, 30.359, -1.924, 0.381, 2.149, 5.306, 1.218, -0.096, 6.807, 0.768, -1.179, -2.081, 3.161, 3.027, -4.115, 4.467, -8.611, -5.322,\n          -7.083, 2.329, -1.774, -7.084, 3.629, 2.580, 8.041, -30.396, 4.485, 3.507, 5.641, 3.479, 4.649, 16.726, -10.149, -2.149, 12.574, -3.936, -14.388, -16.592, 10.642, -16.776, -28.675, -3.649,\n          -20.185, -3.553, -0.956, 21.986, 2.851, 5.577, -15.121, 2.955, 1.307, -1.009, 2.845, -0.853, 1.353, 2.904, 3.493, 0.152, -0.209, 15.398, 13.453, -1.700, -4.743, -0.650, 16.701, -2.937,\n          7.023, 0.194, 1.299, -50.949, -2.719, -6.921, 22.979, 25.758, 1.773, 1.856, 1.130, -0.082, 0.491, 3.782, 0.131, -2.763, -2.333, -2.575, -3.118, 3.226, 2.422, -0.072, 1.284, 2.726 ]\n      - [ -7.520, -9.371, -22.550, -18.724, -6.839, -2.827, 8.158, 7.286, -7.619, -14.201, -1.802, -7.981, 17.489, -12.048, -0.711, -2.863,\n          5.659, 9.175, 17.781, -3.963, -16.634, 17.243, -7.931, -7.002, 7.120, -19.737, -13.348, 7.506, -17.768, 12.578, 1.903, -10.863,\n          7.543, -7.573, 0.975, 6.101, -3.182, -8.354, -0.534, -1.656, -7.454, 11.196, -3.254, -3.823, 0.541, -9.587, -25.693, -1.856,\n          -1.394, -12.486, -0.036, -2.638, 6.597, -12.324, -0.735, -6.608, 0.773, 2.329, -13.445, -0.192, -0.605, 5.244, 15.621, -13.113,\n          -4.430, 17.325, 3.450, 3.499, -11.163, -14.549, 0.957, -9.089, 1.989, 9.820, 22.517, 7.370, -9.074, -3.695, 1.741, -16.864 ]\n</code></pre>\n"}, {"tags": ["c++", "macos", "qt", "cmake", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "reply_to_user": {"reputation": 829, "user_id": 63289, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/aa426492f4c3793a85c490d041d5d451?s=128&d=identicon&r=PG", "display_name": "tivadj", "link": "https://stackoverflow.com/users/63289/tivadj"}, "edited": false, "score": 0, "creation_date": 1500460696, "post_id": 38746849, "comment_id": 77343215, "body": "@tivadj Should work. If you&#39;re encountering issues with your project, may I suggest to post an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> as a new question ?"}, {"owner": {"reputation": 1679, "user_id": 267874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/007a9c64b82a001443ff463ef326366b?s=128&d=identicon&r=PG", "display_name": "Paul-Sebastian Manole", "link": "https://stackoverflow.com/users/267874/paul-sebastian-manole"}, "edited": false, "score": 0, "creation_date": 1516261093, "post_id": 38746849, "comment_id": 83617400, "body": "<code>set(Qt5Core_DIR &#47;usr&#47;local&#47;opt&#47;qt&#47;lib&#47;cmake&#47;Qt5Core)</code> or any other package configuration *_DIR variable as needed. In my example I set it to where Homebrew installed Qt (/usr/local/opt/qt)."}], "tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": true, "score": 9, "last_activity_date": 1470235453, "creation_date": 1470235453, "answer_id": 38746849, "question_id": 38746635, "link": "https://stackoverflow.com/questions/38746635/how-to-solve-qt5-packages-not-found-cmake-errors-in-mac/38746849#38746849", "title": "How to solve qt5 (packages not found) cmake errors in mac?", "body": "<p>You should find the cmake packages in your Qt installation in:</p>\n\n<pre><code>&lt;install_prefix&gt;/lib/cmake\n</code></pre>\n\n<p>Assuming <code>&lt;install_prefix&gt;</code> is the root path of your installation. Set the variable Qt5_DIR to <code>&lt;install_prefix&gt;/lib/cmake/Qt5</code> in your configuration and cmake should be able to find all the modules</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 3857893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482c5364d27a066e64ae8c6c6b2c5e55?s=128&d=identicon&r=PG&f=1", "display_name": "user3857893", "link": "https://stackoverflow.com/users/3857893/user3857893"}, "is_accepted": false, "score": 3, "last_activity_date": 1551283721, "last_edit_date": 1551283721, "creation_date": 1500825446, "answer_id": 45267072, "question_id": 38746635, "link": "https://stackoverflow.com/questions/38746635/how-to-solve-qt5-packages-not-found-cmake-errors-in-mac/45267072#45267072", "title": "How to solve qt5 (packages not found) cmake errors in mac?", "body": "<p>Maybe, you should try to add the proper path to the <code>CMAKE_PREFIX_PATH</code> variable in the environment or config.</p>\n\n<pre><code>export CMAKE_PREFIX_PATH=path_to/Qt/5.9/clang_64:$CMAKE_PREFIX_PATH\n</code></pre>\n\n<p>Replace <code>path_to</code> with your real path.</p>\n"}, {"tags": [], "owner": {"reputation": 5115, "user_id": 1017348, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rKrOK.jpg?s=128&g=1", "display_name": "Joachim W", "link": "https://stackoverflow.com/users/1017348/joachim-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1561046694, "creation_date": 1561046694, "answer_id": 56689945, "question_id": 38746635, "link": "https://stackoverflow.com/questions/38746635/how-to-solve-qt5-packages-not-found-cmake-errors-in-mac/56689945#56689945", "title": "How to solve qt5 (packages not found) cmake errors in mac?", "body": "<p>One possible cause for this error message is outdated CMake code like [1]</p>\n\n<pre><code>find_package(Qt5Core REQUIRED).\n</code></pre>\n\n<p>Then there is a good chance for solving the problem by changing to</p>\n\n<pre><code>find_package(Qt5 COMPONENTS REQUIRED Core).\n</code></pre>\n\n<p>[1] <a href=\"http://cmake.3232098.n2.nabble.com/debugging-CMAKE-PREFIX-PATH-td7596290.html\" rel=\"nofollow noreferrer\">http://cmake.3232098.n2.nabble.com/debugging-CMAKE-PREFIX-PATH-td7596290.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 6997866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1415579238471547/picture?type=large", "display_name": "Mariusz Wawrzonkowski", "link": "https://stackoverflow.com/users/6997866/mariusz-wawrzonkowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1575364013, "creation_date": 1575364013, "answer_id": 59153520, "question_id": 38746635, "link": "https://stackoverflow.com/questions/38746635/how-to-solve-qt5-packages-not-found-cmake-errors-in-mac/59153520#59153520", "title": "How to solve qt5 (packages not found) cmake errors in mac?", "body": "<p>in many times its enough to have the PATH environment variable correctly set, so when typing qmake in terminal, it executes the right file. Once you have it, execute cmake in the command line</p>\n"}], "owner": {"reputation": 123, "user_id": 5822554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caefa2458dbbce2852bb808c7cc71042?s=128&d=identicon&r=PG&f=1", "display_name": "D.vijay", "link": "https://stackoverflow.com/users/5822554/d-vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16339, "favorite_count": 2, "accepted_answer_id": 38746849, "answer_count": 4, "score": 7, "last_activity_date": 1598457172, "creation_date": 1470234968, "last_edit_date": 1500459947, "question_id": 38746635, "link": "https://stackoverflow.com/questions/38746635/how-to-solve-qt5-packages-not-found-cmake-errors-in-mac", "title": "How to solve qt5 (packages not found) cmake errors in mac?", "body": "<p>I get these following errors during build of a file using CMake:</p>\n\n<pre><code>CMake Warning at CMakeLists.txt:33 (FIND_PACKAGE):\n\nBy not providing \"FindQt5Core.cmake\" in CMAKE_MODULE_PATH this project has\n  asked CMake to find a package configuration file provided by \"Qt5Core\", but\n  CMake did not find one.\n\n  Could not find a package configuration file provided by \"Qt5Core\" with any of the following names:\n\n    Qt5CoreConfig.cmake\n    qt5core-config.cmake\n</code></pre>\n\n<p>Anybody know how to solve this? Thanks in advance</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1470234792, "post_id": 38746537, "comment_id": 64866814, "body": "Did you try anything?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1470234794, "post_id": 38746537, "comment_id": 64866815, "body": "Once nesting of these is allowed, a regular expression won\u2019t cut it any more. This calls for a proper parser. Give Boost.Spirit a try."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1470234908, "post_id": 38746537, "comment_id": 64866918, "body": "@DimChtz, I&#39;ve been trying all day to write a parser, my regular expression knowledge isn&#39;t great and normally have to resort to a refresher course."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1470234966, "post_id": 38746537, "comment_id": 64866964, "body": "@Konrad Rudolph, I think I&#39;m pretty close to completing the parser myself, but if it was possible with a regular expression it could be more elegant."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470235064, "post_id": 38746537, "comment_id": 64867050, "body": "Not sure if the C++ tag is required here.  Regex is regex."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470235067, "post_id": 38746537, "comment_id": 64867052, "body": "&quot;I think I&#39;m pretty close to completing the parser myself&quot; OK, where is it?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470235114, "post_id": 38746537, "comment_id": 64867092, "body": "@NathanOliver, that was to give a clue as to the language I&#39;m coding in and a hint at the preferred solution."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470235128, "post_id": 38746537, "comment_id": 64867102, "body": "@underscore_d, I will post shortly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470235229, "post_id": 38746537, "comment_id": 64867179, "body": "Are you going to have nesting like <code>[[aaaa,bbbb,cccc],[aaaa,bbbb,cccc],[aaaa,bbbb,cccc]]</code>?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470235272, "post_id": 38746537, "comment_id": 64867213, "body": "@NathanOliver, no, I&#39;ve just coded a working parser, will post now."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1470235357, "post_id": 38746537, "comment_id": 64867295, "body": "@SPlatten Cool. All I mean is that asking for things like &quot;a hint at the preferred solution&quot;, without having posted any evidence that you&#39;ve done anything, might be read as if you&#39;re just looking to get code for free. I&#39;m sure that&#39;s not what you meant, but many other askers <i>do</i> expect that."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470235691, "post_id": 38746537, "comment_id": 64867601, "body": "@underscore_d, Solution is up in the original post now."}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 1, "creation_date": 1470235809, "post_id": 38746537, "comment_id": 64867694, "body": "<a href=\"http://regexr.com/\" rel=\"nofollow noreferrer\">Regexr</a> is a nice resource to learn and make regexes."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1470235847, "post_id": 38746537, "comment_id": 64867723, "body": "@IvanRubinson, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1470239240, "post_id": 38748177, "comment_id": 64870238, "body": "Thank you, close but not quite."}], "tags": [], "owner": {"reputation": 1, "user_id": 6673170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db15879b02484ff8d2edccbb63de4caf?s=128&d=identicon&r=PG&f=1", "display_name": "Please Ignore", "link": "https://stackoverflow.com/users/6673170/please-ignore"}, "is_accepted": false, "score": 0, "last_activity_date": 1470239012, "creation_date": 1470239012, "answer_id": 38748177, "question_id": 38746537, "link": "https://stackoverflow.com/questions/38746537/c-regular-expression-to-split-string-into-an-array/38748177#38748177", "title": "C++ regular expression to split string into an array", "body": "<p>I have this regex that should work.</p>\n\n<pre><code>\\[.*?\\]|([^,\\s]+)\n</code></pre>\n\n<p><a href=\"http://regexr.com/3dugk\" rel=\"nofollow\">See here at Regexr</a></p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1470248137, "last_edit_date": 1470248137, "creation_date": 1470247477, "answer_id": 38750739, "question_id": 38746537, "link": "https://stackoverflow.com/questions/38746537/c-regular-expression-to-split-string-into-an-array/38750739#38750739", "title": "C++ regular expression to split string into an array", "body": "<pre><code>auto term = \"(?:[^,&lt;]*)\"s;\nauto chain = \"(?:(?:\"+term+\",)*\"+term+\")\"s;\n\nauto clause = \"(?:(?:\"+term+\")|(?:&lt;\" + chain + \"&gt;))\"s;\n\nauto re_str = \"^(?:(\"+term+\")|(?:&lt;(\"+chain+\")&gt;))\" \"(?:|,((?:\"+clause+\",)*\"+clause+\"))\";\n</code></pre>\n\n<p><code>re_str</code> takes your string, and splits off the first term or chain from the tail.</p>\n\n<p>It returns up to 3 sub-matches.  The first is a lone term.  The second is a comma-delimited chain of terms.  The third is the rest of the string after the <code>,</code>.</p>\n\n<p>The tail is going to be empty, or another string that can be parsed using the above regular expression.</p>\n\n<p>Chains of terms can be parsed by the same regular expression.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9bdc4b7dff2def4e\" rel=\"nofollow\">live example</a>.</p>\n\n<p>I matched <code>&lt;&gt;</code> delimited chains of terms, not <code>[]</code>, because I got bored of <code>\\\\</code>s.</p>\n\n<p>You also want to discard whitespace around clauses.  I omitted that, it should be easy to stitch in.</p>\n"}], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 38750739, "answer_count": 2, "score": 0, "last_activity_date": 1470248137, "creation_date": 1470234718, "last_edit_date": 1470235649, "question_id": 38746537, "link": "https://stackoverflow.com/questions/38746537/c-regular-expression-to-split-string-into-an-array", "title": "C++ regular expression to split string into an array", "body": "<p>I am trying to write a handler to extract parameters from a function, where the parameters are between () and the parameters will be delimited by a command ','  parameters may also be defined as arrays which are comma delimited and wrapped in [].</p>\n\n<p>Examples of what I'm trying to decode:</p>\n\n<pre><code>    testA(aaaa, [bbbb,cccc,dddd], eeee)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    testB([aaaa,bbbb,cccc], dddd, [eeee,ffff])\n</code></pre>\n\n<p>Basically any combination and any number of parameters, what I want from these would be a list containing:</p>\n\n<p>for testA:</p>\n\n<pre><code>    0 : aaaa\n    1 : [bbbb,cccc,dddd]\n    2 : eeee\n</code></pre>\n\n<p>for testB:</p>\n\n<pre><code>    0 : [aaaa,bbbb,cccc]\n    1 : dddd\n    2 : [eeee,ffff]\n</code></pre>\n\n<p>I'm trying to write a parser that will give me the same, but a regular expression to do this would be preferred.</p>\n\n<p>This is my coded solution which works written in C++ for Qt5.6:</p>\n\n<pre><code>    int intOpSB, intPStart;\n    //Analyse and count the parameters\n    intOpSB = intPStart = 0;\n    for( int p=0; p&lt;strParameters.length(); p++ ) {\n        const QChar qc = strParameters.at(p);\n\n        if ( qc == clsXMLnode::mcucOpenSquareBracket ) {\n            intOpSB++;\n            continue;\n        } else if ( qc == clsXMLnode::mcucCloseSquareBracket ) {\n            intOpSB--;\n            continue;\n        }\n        if ( (intOpSB == 0 &amp;&amp; qc == clsXMLnode::mcucArrayDelimiter)\n        || p == strParameters.length() - 1 ) {\n            if ( strParameters.at(intPStart) == clsXMLnode::mcucArrayDelimiter ) {\n    //Skip over the opening bracket or array delimiter\n                intPStart++;\n            }\n            if ( intPStart &gt; p ) {\n                continue;\n            }\n            int intEnd = p;\n            while( true ) {\n                if ( intEnd &gt; 0 &amp;&amp; (strParameters.at(intEnd) == clsXMLnode::mcucArrayDelimiter) ) {\n    //We don't want the delimiter or the closing square bracket in the parameter\n                    intEnd--;\n                } else {\n                    break;\n                }\n            }\n            if ( intEnd &gt; intPStart ) {\n                QString strParameter = strParameters.mid(intPStart, intEnd - intPStart + 1);\n    //Update remaining parameters, skipping the parameter and any delimiter\n                strParameters = strParameters.mid(strParameter.length() + 1);\n    //Remove any quotes\n                strParameter = strParameter.replace(\"\\\"\", \"\");\n                strParameter = strParameter.replace(\"\\'\", \"\");\n    //Add the parameter\n                mslstParameters.append(strParameter);\n    //Reset parameter start\n                intPStart = 0;\n                p = -1;\n            }\n        }\n    }\n</code></pre>\n\n<p>References:</p>\n\n<pre><code>    mcucOpenSquareBracket is a constant defined as '['\n    mcucCloseSquareBracket is a constant defined as ']'\n    mcucArrayDelimiter is a constant defined as ','\n    mslstParameters is a member defined as QStringList\n</code></pre>\n"}, {"tags": ["c++", "object", "vector", "heap"], "comments": [{"owner": {"reputation": 73, "user_id": 3111197, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8ba2faaa99f4c1bc345992a6100bec03?s=128&d=identicon&r=PG&f=1", "display_name": "user3111197", "link": "https://stackoverflow.com/users/3111197/user3111197"}, "reply_to_user": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "edited": false, "score": 0, "creation_date": 1470234374, "post_id": 38746344, "comment_id": 64866463, "body": "Ok, that&#39;s what I thougt too, but how can I do the operation properly then?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1470234422, "post_id": 38746344, "comment_id": 64866504, "body": "Why don&#39;t you just <code>vector&lt;vector&lt;A&gt;&gt; vec_of_class(20, vector&lt;A&gt;(10));</code> ?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1470234425, "post_id": 38746344, "comment_id": 64866506, "body": "I suspect you want a class member like this: <code>std::vector&lt;std::vector&lt;A&gt; &gt; member {20, std::vector&lt;A&gt;(10)};</code>. Et voila, 20 vectors of 10 elements each."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1470234455, "post_id": 38746344, "comment_id": 64866539, "body": "Your question is too vague. It&#39;s pretty sure what you propose is not valid. But to obtain a valid answer, you should precise the context of your question"}, {"owner": {"reputation": 73, "user_id": 3111197, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8ba2faaa99f4c1bc345992a6100bec03?s=128&d=identicon&r=PG&f=1", "display_name": "user3111197", "link": "https://stackoverflow.com/users/3111197/user3111197"}, "edited": false, "score": 0, "creation_date": 1470234489, "post_id": 38746344, "comment_id": 64866573, "body": "Thanks a lot for your answers, but as I mentioned I would like to find a way to do this witout using a vector of vector."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1470234583, "post_id": 38746344, "comment_id": 64866654, "body": "@user3665594 Well in that case you need to create 20 different vectors like <code>vector&lt;A&gt; * vec_of_class1;</code>, <code>vector&lt;A&gt; * vec_of_class2;</code> etc which is bad. You can&#39;t create 20 different vectors with the same name."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1470234803, "post_id": 38746344, "comment_id": 64866825, "body": "What&#39;s wrong with vector of vectors? Why do you want to reject the most natural and straightforward solution to your stated problem? Is there something you neglect to tell us?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470235002, "post_id": 38746344, "comment_id": 64866997, "body": "Do you actually want to &quot;use them globally&quot;, or do you just need to return them from the class by-copy (probably with RVO) and use them outside of it thereafter?"}, {"owner": {"reputation": 73, "user_id": 3111197, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8ba2faaa99f4c1bc345992a6100bec03?s=128&d=identicon&r=PG&f=1", "display_name": "user3111197", "link": "https://stackoverflow.com/users/3111197/user3111197"}, "edited": false, "score": 0, "creation_date": 1470235014, "post_id": 38746344, "comment_id": 64867016, "body": "The reason why I am asking for a solution with vector and not vector of vectors is because of other (unrelated with the question) reasons. That&#39;s why I try to udnerstand how it would be possible to initialize them via ten singe vectors instead of a vector of vectors"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1470235070, "post_id": 38746344, "comment_id": 64867056, "body": "You&#39;d need to explain those reasons. Until then, what we have before us is clearly an instance of an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. If those reasons are indeed unrelated to the question as you claim, then how come they affect the solution thereto?"}, {"owner": {"reputation": 73, "user_id": 3111197, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8ba2faaa99f4c1bc345992a6100bec03?s=128&d=identicon&r=PG&f=1", "display_name": "user3111197", "link": "https://stackoverflow.com/users/3111197/user3111197"}, "edited": false, "score": 0, "creation_date": 1470235677, "post_id": 38746344, "comment_id": 64867580, "body": "I want to be able to use the vector outside the class scope and to pass it to an other class, that&#39;s what i mean by saying globally."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470236228, "post_id": 38746344, "comment_id": 64868031, "body": "@user3665594  Honestly, I don&#39;t understand your reasons for not choosing a vector when you&#39;re already using vector.  Why are you willing to use a <code>vector&lt;A&gt;</code> and not a <code>vector&lt;T&gt;</code>, where <code>T</code> just happens to be a <code>std::vector</code>?  Is it the name &quot;std::vector&quot; that is causing you concern?  A vector whose type <i>just happens to be vector</i> works no differently than a vector of any other type."}], "answers": [{"tags": [], "owner": {"reputation": 871, "user_id": 6581003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b11cffe6105720b60b54480f6a377f?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Olivert Riera", "link": "https://stackoverflow.com/users/6581003/vincent-olivert-riera"}, "is_accepted": false, "score": 0, "last_activity_date": 1470234472, "creation_date": 1470234472, "answer_id": 38746449, "question_id": 38746344, "link": "https://stackoverflow.com/questions/38746344/initialization-of-vector-of-objects/38746449#38746449", "title": "Initialization of vector of objects", "body": "<p>If you declare a variable into a function, the scope of that variable will be the function. It won't be accessible from outside.</p>\n\n<p>What you can do is declare the 20 pointers in the global scope, and initialize them wherever you want (inside a function, for instance).</p>\n"}, {"comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470234839, "post_id": 38746536, "comment_id": 64866857, "body": "Isn&#39;t it vector&lt;int&gt; vec = {10,20,30,40,50}; ?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470234891, "post_id": 38746536, "comment_id": 64866903, "body": "@OmidCompSCI Both are valid"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1470234986, "post_id": 38746536, "comment_id": 64866986, "body": "@underscore_d, thanks just glanced over uniform initialisation. I swear C++ is just way to big of a language god dam!"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1470234715, "creation_date": 1470234715, "answer_id": 38746536, "question_id": 38746344, "link": "https://stackoverflow.com/questions/38746344/initialization-of-vector-of-objects/38746536#38746536", "title": "Initialization of vector of objects", "body": "<p>There should never be a case when you dynamically allocate any standard container, including vector. So <code>std::vector&lt;&gt; = new &lt;&gt;</code> is always wrong.</p>\n\n<p>To initialize your vector, you can use multitude of techniques. I find initializer lists especially handy, like here:</p>\n\n<pre><code>std::vector&lt;int&gt; vec{10, 20, 30, 40, 50};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1470236784, "creation_date": 1470236784, "answer_id": 38747323, "question_id": 38746344, "link": "https://stackoverflow.com/questions/38746344/initialization-of-vector-of-objects/38747323#38747323", "title": "Initialization of vector of objects", "body": "<blockquote>\n  <p>So, say I want to create 20 times a vector of objects (say of size ten each)</p>\n</blockquote>\n\n<p>That's easy. Use:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;A&gt;&gt; my_data{20, std::vector&lt;A&gt;{10}};\n</code></pre>\n\n<blockquote>\n  <p>that should be of global scope (in the sense that this is done inside a class and i want these vectors of objects to be passed outside the class).</p>\n</blockquote>\n\n<p>I don't have a clear picture of what you want to accomplish here.</p>\n\n<p>When something is done inside a class, it could be done in a <code>static</code> member function or a regular member function. It seems like you should use a <code>static</code> member function but I am not sure.</p>\n\n<p>If you use a <code>static</code> member function, I would suggest:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;A&gt;&gt; const&amp; TheClass::get_my_data()\n{\n   static std::vector&lt;std::vector&lt;A&gt;&gt; my_data{20, std::vector&lt;A&gt;{10}};\n   static bool inited = false;\n   if ( !inited )\n   {\n      // Set the values of the elements in my_data\n      // ...\n\n      inited = true;\n   }\n   return my_data;\n}\n</code></pre>\n\n<p>If you use a regular member function, I suggest populating <code>my_data</code> in the constructor and returning from a  function.</p>\n\n<pre><code>// Need to make my_data a member variable\nTheClass::TheClass() : my_data{20, std::vector&lt;A&gt;{10}}\n{\n   // Set the values of the elements in my_data\n   // ...\n}\n\nstd::vector&lt;std::vector&lt;A&gt;&gt; const&amp; TheClass::get_my_data() const\n{\n   return my_data;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3111197, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8ba2faaa99f4c1bc345992a6100bec03?s=128&d=identicon&r=PG&f=1", "display_name": "user3111197", "link": "https://stackoverflow.com/users/3111197/user3111197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1470236784, "creation_date": 1470234215, "question_id": 38746344, "link": "https://stackoverflow.com/questions/38746344/initialization-of-vector-of-objects", "title": "Initialization of vector of objects", "body": "<p>Before I put my question let me mention in advance that I am aware that this topic has been discussed a lot, but yet again by looking to most of the answers I failed to figure out the proper way to achieve what I want (most probably because I missed sth from the anwers given).\nSo, say I want to create 20 times a vector of objects (say of size ten each) that should be of global scope (in the sense that this is done inside a class and i want these vectors of objects to be passed outside the class).\nSo, I am really not sure if the following is valid:</p>\n\n<pre><code>for ( int i =0; i&lt;20; i++)\n vector&lt;A&gt; * vec_of_class = new vector&lt;A&gt;(10);\n /*where A is the class and I use new to have them in the heap,\n so that they won't be local */\n</code></pre>\n\n<p>Now, I know that this means that I should be extra carefull with handling them\nand make sure that I preper delete them, but I am not sure if the operation I am doing is valid. In general I want to achieve to initialize 20 different vectors of object A that can be used in the global scope (the operation is happening inside a function of an other class), I know that it could be used\na vector of vectors of object A, but I would like to find out how to do correctly this kind of operation (initializing 20 different vectors of object A inside the body function of an other class and use them globally).\nI hope ,my question was not to confusing and you could give me some help here.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1470234894, "post_id": 38746324, "comment_id": 64866905, "body": "You never explain, what you are really trying to accomplish. Neither do you explain, why your solutions don&#39;t meet your expectations. Specifically, you never explain, what expressions should not produce code (or why)."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1470236492, "post_id": 38746324, "comment_id": 64868212, "body": "I don&#39;t see what the point of using a non-pure function here is. The compiler can&#39;t learn any optimization information from <code>assert(syscall(GET_TID)==tid);</code>, because it doesn&#39;t know that <code>syscall(GET_TID)</code> will return the same thing next time."}, {"owner": {"reputation": 2223, "user_id": 377178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c533ec1f0a3a62857c56c8a249d0f?s=128&d=identicon&r=PG", "display_name": "user377178", "link": "https://stackoverflow.com/users/377178/user377178"}, "edited": false, "score": 0, "creation_date": 1470236594, "post_id": 38746324, "comment_id": 64868310, "body": "I have legacy assertions, Ideally I would not vary or guess which one can provide hints for compiler."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1545308233, "post_id": 38746324, "comment_id": 94584023, "body": "<a href=\"https://stackoverflow.com/q/44054078/3233393\">Related</a>."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1545308906, "post_id": 38746324, "comment_id": 94584371, "body": "<code>assert()</code> is a run-time check, unclear why you think it wouldn&#39;t generate code. Maybe you want <code>static_assert()</code>? (though you can&#39;t assert a syscall at compile time)"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1545315924, "post_id": 38746324, "comment_id": 94588122, "body": "What is wrong with <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\"><code>__builtin_expect</code></a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545309794, "post_id": 53868485, "comment_id": 94584838, "body": "<code>assume()</code> could be an interesting new language feature tbf, though I expect (particularly considering branch prediction) computers are good enough at this already in most cases"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1545315022, "post_id": 53868485, "comment_id": 94587605, "body": "@LightnessRacesinOrbit assume is already present in Visual Studio but AFAIK noone uses it. Using <code>asserts</code> as poor man&#39;s <code>assume</code> is tempting but I&#39;ve never seen anyone succeeding in this (my try is <a href=\"https://gcc.gnu.org/ml/gcc/2016-11/msg00047.html\" rel=\"nofollow noreferrer\">here</a>)."}, {"owner": {"reputation": 2223, "user_id": 377178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c533ec1f0a3a62857c56c8a249d0f?s=128&d=identicon&r=PG", "display_name": "user377178", "link": "https://stackoverflow.com/users/377178/user377178"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568749285, "post_id": 53868485, "comment_id": 102371229, "body": "@Lightness Races in Orbit In this case the point is to employ compiler, as it, when given hints, can remove entire branches of code, do computations in compile time, and/or move unlikely code away from hot branches to improve code locality. CPU cannot do that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2223, "user_id": 377178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c533ec1f0a3a62857c56c8a249d0f?s=128&d=identicon&r=PG", "display_name": "user377178", "link": "https://stackoverflow.com/users/377178/user377178"}, "edited": false, "score": 0, "creation_date": 1568801170, "post_id": 53868485, "comment_id": 102387679, "body": "@user377178 I realise that but it&#39;s all a trade-off isn&#39;t it. How much real-world benefit are we likely to get from such a thing in the general case in the modern era? Not much. Don&#39;t get me wrong: I <i>like</i> &quot;unreachable&quot; built-ins, and I use them myself in some hotspots. I just don&#39;t expect there&#39;s a strong enough case for standardisation here."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568824077, "post_id": 53868485, "comment_id": 102400731, "body": "@LightnessRacesinOrbit It very much depends on the codebase. When I experimented with asserts-as-assumes I&#39;seen cases where asserts enabled optimization and cases where they disabled them. John Regehr made similar analysis (and similar conclusions) in <a href=\"https://blog.regehr.org/archives/1096\" rel=\"nofollow noreferrer\">Assertions Are Pessimistic, Assumptions Are Optimistic</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568824180, "post_id": 53868485, "comment_id": 102400776, "body": "@yugr To be clear, I&#39;m not talking about asserts-as-assumes"}, {"owner": {"reputation": 2223, "user_id": 377178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c533ec1f0a3a62857c56c8a249d0f?s=128&d=identicon&r=PG", "display_name": "user377178", "link": "https://stackoverflow.com/users/377178/user377178"}, "edited": false, "score": 0, "creation_date": 1569397942, "post_id": 53868485, "comment_id": 102579629, "body": "@yugr Quote from the paper you are bringing in: &quot;[On worsened performance] I would guess this is because sometimes the compiler cannot elide function calls that are made during the computation of a expression that is being assumed.&quot; And this very stack overflow ticket can be phrased: How to avoid &quot;calls that are made during the computation of a expression that is being assumed.&quot; as obviously we want asserts that involve runtime execution to result in no-assumption and no code."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 2223, "user_id": 377178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c533ec1f0a3a62857c56c8a249d0f?s=128&d=identicon&r=PG", "display_name": "user377178", "link": "https://stackoverflow.com/users/377178/user377178"}, "edited": false, "score": 0, "creation_date": 1569401947, "post_id": 53868485, "comment_id": 102581790, "body": "@user377178 Yes, exactly (also additional computations / struct fields under <code>! defined NDEBUG</code> which are used to verify complex invariants). &quot;How to avoid&quot; - my patch (link in the answer) does that. Unfortunately I haven&#39;t got enough interest in GCC mailing list to get it merged (although some people were positive). One issue with this approach is that omitting one (complex) assertion may break another (simple) assertion in completely different file."}], "tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 2, "last_activity_date": 1545315093, "last_edit_date": 1545315093, "creation_date": 1545307976, "answer_id": 53868485, "question_id": 38746324, "link": "https://stackoverflow.com/questions/38746324/ignore-side-effects-in-asserted-expression-in-c/53868485#53868485", "title": "Ignore side-effects in asserted expression in C++", "body": "<p>No, you can not make <code>assert</code> to ignore conditions which may contain side-effects (e.g. function calls) which is the main reason why they can't be used as optimization hints.</p>\n\n<p>You'd need to modify compiler frontend to get this sort of functionality (I've submitted a GCC patch for this a while ago <a href=\"https://gcc.gnu.org/ml/gcc/2016-11/msg00047.html\" rel=\"nofollow noreferrer\">here</a>).</p>\n"}], "owner": {"reputation": 2223, "user_id": 377178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886c533ec1f0a3a62857c56c8a249d0f?s=128&d=identicon&r=PG", "display_name": "user377178", "link": "https://stackoverflow.com/users/377178/user377178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545315093, "creation_date": 1470234150, "last_edit_date": 1545308060, "question_id": 38746324, "link": "https://stackoverflow.com/questions/38746324/ignore-side-effects-in-asserted-expression-in-c", "title": "Ignore side-effects in asserted expression in C++", "body": "<p>I have the following macro,</p>\n\n<pre><code>#define assert(exp) ({ if(! (exp) ) __builtin_unreachable(); })\n</code></pre>\n\n<p>However it turned out that some (minority of) expressions generate code (gcc Redhat 5.2.1-2 -O2 -std=c++17).</p>\n\n<p>That is certainly the case for  <code>assert(syscall(GET_TID)==tid);</code></p>\n\n<p>And I assume would be the case for non-pure functions in general.</p>\n\n<p>My second take:</p>\n\n<pre><code>#define assume(exp) \\\n  ({ \\\n    auto __a = [&amp;] () __attribute__((pure)) -&gt; int { \\\n      return !! (exp); \\\n    }; \\\n    if (!__a()) \\\n      __builtin_unreachable(); \\\n  })\n</code></pre>\n\n<p>This meant to either fool compiler into believing expression is pure to optimize it out or generate error if not. Unfortunately, no improvement seen.</p>\n\n<p>Question.</p>\n\n<p>Is there a way to force compiler to optimize out all the code.\nOr, alternatively can I detect the problem at compile time: that is whether expression generates code or is non-pure. Compile/link error is acceptable but I wish to think of these as last resort.</p>\n\n<p>Update: More explanation.</p>\n\n<ol>\n<li>I want compiler to utilise hints from the expressions to optimize code further down the line.</li>\n<li>I want no extra code to be produced at the place assumption is checked (or at least be able to confirm that).</li>\n</ol>\n\n<p>From checking briefly compiler output.\nIt achieves (1) pretty neatly in many cases provided that expression is useful and transparent for the compiler (e.g. variable comparison, inline function calls, no side effects).</p>\n\n<p>With (2) there is a problem. Compiler leaves code where expressions are non-transparent (or non-pure). These are actually the exact expressions compiler is unable to derive hints from.</p>\n\n<p>I want to stop compiler doing (2) or generate warning on such an occurrence.</p>\n"}, {"tags": ["c++", "winapi", "console", "diacritics", "keycode"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470236461, "post_id": 38746232, "comment_id": 64868190, "body": "Sending key down and key up with separate calls to SendInput is always a mistake. Why not read the documentation?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470236602, "post_id": 38746232, "comment_id": 64868317, "body": "@DavidHeffernan: Why is that a mistake?  An array of two elements might be slightly cleaner, but why is it wrong?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470236682, "post_id": 38746232, "comment_id": 64868368, "body": "@MartinBonner: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx\" rel=\"nofollow noreferrer\">SendInput</a>: <i>&quot;The SendInput function inserts the events in the INPUT structures serially into the keyboard or mouse input stream. These events are not interspersed with other keyboard or mouse input events inserted either by the user (with the keyboard or mouse) or by calls to keybd_event, mouse_event, or other calls to SendInput.&quot;</i>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470236929, "post_id": 38746232, "comment_id": 64868545, "body": "@IInspectable OK, but does getting the inserted input events mixed up with real events actually matter?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470236999, "post_id": 38746232, "comment_id": 64868596, "body": "Why the down votes?  It looks like a reasonable question to me.  Is it just that reading the docs is so easy?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1470237142, "post_id": 38746232, "comment_id": 64868696, "body": "@MartinBonner: If it didn&#39;t matter, why would the Windows API introduce a replacement for <code>keybd_event</code>? Of course it matters. Downvotes for the bump &#39;answer&#39; 20 minutes after asking a question plus asking a question that has been answered a bazillion times before."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470256510, "post_id": 38746232, "comment_id": 64880140, "body": "Technically, the right way to deal with a question answered a bazillion times before is &quot;vote to close&quot; as duplicate."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470292577, "post_id": 38746232, "comment_id": 64892160, "body": "@martin Why didn&#39;t you do so?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470292729, "post_id": 38746232, "comment_id": 64892233, "body": "@DavidHeffernan Because I haven&#39;t seen the question before.  I am not one of the people down-voting it."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470241204, "post_id": 38747147, "comment_id": 64871598, "body": "Even when using <code>KEYEVENTF_UNICODE</code>, you still need to send two input events, one without <code>KEYEVENTF_KEYUP</code> and one with. And note that <code>wScan</code> is expressed in UTF-16, so if you need to send a Unicode character that uses a surrogate pair, you need separate input events for each surrogate."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470255757, "post_id": 38747147, "comment_id": 64879790, "body": "@RemyLebeau: Are you sure?  The documentation says that &quot; This flag <code>KEYEVENTF_UNICODE</code> can only be combined with the <code>KEYEVENTF_KEYUP</code> flag.&quot;"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1470255807, "post_id": 38747147, "comment_id": 64879816, "body": "Oh, I think I see.  It cannot be <i>combined</i> with another flag, but it can be used on it&#39;s own.  I&#39;ll edit the code."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256095, "last_edit_date": 1470256095, "creation_date": 1470236289, "answer_id": 38747147, "question_id": 38746232, "link": "https://stackoverflow.com/questions/38746232/virtual-key-codes/38747147#38747147", "title": "Virtual key codes", "body": "<p>Per the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646271.aspx\" rel=\"nofollow\"><code>KEYBDINPUT</code></a> documentation, you can use the <code>KEYEVENTF_UNICODE</code> flag:</p>\n\n<pre><code>INPUT ip[2];\n// Set up a generic keyboard event.\nip[0].type = INPUT_KEYBOARD;\nip[0].ki.dwFlags = KEYEVENTF_UNICODE;  // We want to send a Unicode key code.\nip[0].ki.wScan = 0x00E9;               // Unicode value of \u00e9\nip[0].ki.time = 0;\nip[0].ki.dwExtraInfo = 0; \nip[0].ki.wVk = 0;                      // Ignored\n\nip[1] = ip[0];  // Duplicate entry\nip[1].ki.dwFlags |= KEYEVENTF_KEYUP;  // but make it key up\n\nSendInput( 2, ip, sizeof(ip[0]));\n</code></pre>\n\n<p>(If you are ambitious, you can make that final \"2\" be your favourite <code>ARRAY_COUNT</code> macro or template function.)</p>\n"}], "owner": {"reputation": 11, "user_id": 6672822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52475df089a302eb5b40fe8570cff7e9?s=128&d=identicon&r=PG&f=1", "display_name": "T Jayceon", "link": "https://stackoverflow.com/users/6672822/t-jayceon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 922, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1470256095, "creation_date": 1470233943, "last_edit_date": 1470236107, "question_id": 38746232, "link": "https://stackoverflow.com/questions/38746232/virtual-key-codes", "title": "Virtual key codes", "body": "<p>I have a c++ console program. Ho can I simulate the \"\u00e9\" character ? \nCode:</p>\n\n<pre><code>// Set up a generic keyboard event.\nip.type = INPUT_KEYBOARD;\nip.ki.wScan = 0; // hardware scan code for key\nip.ki.time = 0;\nip.ki.dwExtraInfo = 0; \nip.ki.wVk = 0x45; //e\nip.ki.dwFlags = 0;\nSendInput(1, &amp;ip, sizeof(INPUT));\nip.ki.dwFlags = KEYEVENTF_KEYUP;\nSendInput(1, &amp;ip, sizeof(INPUT));\n</code></pre>\n\n<p>How do I convert it to the \"\u00e9\" instead of \"e\"?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "methods", "reference", "qualifiers"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1470233783, "post_id": 38746126, "comment_id": 64866014, "body": "This means the method can only be called on an lvalue of <code>MyClass</code> type (as opposed to an rvalue). So that one can&#39;t do <code>MyClass() = my_class_instance</code> or <code>functionReturningMyClass() = my_class_instance</code>. Similarly, <code>&amp;&amp;</code> after closing paren means &quot;only callable on rvalue&quot;."}, {"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1470233948, "post_id": 38746126, "comment_id": 64866148, "body": "To the down voter: Ever tried to google for special characters? Doesn&#39;t work very well. @IgorTandetnik, why didn&#39;t you put your comment as an answer?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1470234372, "post_id": 38746126, "comment_id": 64866462, "body": "@Kay likely because he knew it would be dupe-hammered and wanted to avoid posting a duplicate answer on a duplicate question."}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 3, "last_activity_date": 1470234881, "last_edit_date": 1470234881, "creation_date": 1470234058, "answer_id": 38746285, "question_id": 38746126, "link": "https://stackoverflow.com/questions/38746126/meaning-of-ampersand-in-method-declaration/38746285#38746285", "title": "Meaning of ampersand in method declaration", "body": "<blockquote>\n  <ol>\n  <li>So what does the ampersand mean in here?</li>\n  </ol>\n</blockquote>\n\n<p>It means <a href=\"http://en.cppreference.com/w/cpp/language/member_functions#const-.2C_volatile-.2C_and_ref-qualified_member_functions\" rel=\"nofollow\">ref-qualified member functions</a>:</p>\n\n<blockquote>\n  <p>A non-static member function can be declared with either an lvalue ref-qualifier (the token &amp; after the function name) or rvalue ref-qualifier (the token &amp;&amp; after the function name). During overload resolution, non-static cv-qualified member function of class X is treated as a function that takes an implicit parameter of type lvalue reference to cv-qualified X if it has no ref-qualifiers or if it has the lvalue ref-qualifier. Otherwise (if it has rvalue ref-qualifier), it is treated as a function taking an implicit parameter of type rvalue reference to cv-qualified X.</p>\n</blockquote>\n\n<p>You can define both (lvalue/rvalue ref-qualifier), and the appropriate one will be picked up by overload resolution. Such as:</p>\n\n<pre><code>bool operator ==(const MyClass &amp;right) const &amp;;\nbool operator ==(const MyClass &amp;right) const &amp;&amp;;\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Isn't decltype(*this) always MyClass&amp; / const MyClass&amp;?</li>\n  </ol>\n</blockquote>\n\n<p>Note the type of <code>*this</code> won't change even in the rvalue ref-qualified function.</p>\n\n<blockquote>\n  <p>Note: unlike cv-qualification, ref-qualification does not change the properties of the <code>this</code> pointer: within a rvalue ref-qualified function, <code>*this</code> remains an lvalue expression.</p>\n</blockquote>\n"}], "owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "closed_date": 1470234066, "accepted_answer_id": 38746285, "answer_count": 1, "score": 1, "last_activity_date": 1470234881, "creation_date": 1470233664, "question_id": 38746126, "link": "https://stackoverflow.com/questions/38746126/meaning-of-ampersand-in-method-declaration", "closed_reason": "Duplicate", "title": "Meaning of ampersand in method declaration", "body": "<p>I know what a <code>const</code> qualifier means in a method declaration (making <code>*this</code> const), but I can't fathom what the ampersands in these lines means:</p>\n\n<pre><code>MyClass &amp;operator =(const MyClass&amp;) &amp; = default;\n//                                  ^- this one\nbool operator ==(const MyClass &amp;right) const &amp;;\n//                                 that one -^\n</code></pre>\n\n<p>Isn't <code>decltype(*this)</code> always <code>MyClass&amp;</code> / <code>const MyClass&amp;</code>? So what does the ampersand mean in here?</p>\n"}, {"tags": ["c++", "pointers", "dereference"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470233769, "post_id": 38746113, "comment_id": 64865994, "body": "There&#39;s no <code>new</code> (memory allocation), why should there be any <code>delete</code> (memory deallocation)? BTW, a pointer is not deleted, a block of memory whose start address is given by a pointer may be deleted. But that memory block may be deleted only if it has been allocated dynamically."}, {"owner": {"reputation": 109, "user_id": 6672727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/905494873676d7946cebd4b5bbc5ab5b?s=128&d=identicon&r=PG&f=1", "display_name": "Art C", "link": "https://stackoverflow.com/users/6672727/art-c"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470234470, "post_id": 38746113, "comment_id": 64866551, "body": "Well what about setting it to null?"}, {"owner": {"reputation": 109, "user_id": 6672727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/905494873676d7946cebd4b5bbc5ab5b?s=128&d=identicon&r=PG&f=1", "display_name": "Art C", "link": "https://stackoverflow.com/users/6672727/art-c"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470234716, "post_id": 38746113, "comment_id": 64866756, "body": "Or dereferencing the pointer, basically I just want to know if I am doing it the right way."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470235591, "post_id": 38746113, "comment_id": 64867504, "body": "What do you mean &quot;what about setting it to null&quot;???  You are not setting any pointer to null in the code that you have posted."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470235706, "post_id": 38746113, "comment_id": 64867611, "body": "The variable declarations inside the if` statements are wrong though (as far as I&#39;m aware of, unless there&#39;s some some new syntax in C++ whatever). Declare those variables outside (and before) those <code>if</code> statements."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470236767, "post_id": 38746113, "comment_id": 64868422, "body": "@barakmanos: You are wrong.  That syntax is definitely in C++11, and may well be in C++03.  It&#39;s an extension of <code>for (int i = 0;...)</code> but the test is that the variable when converted to bool is true."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470237687, "post_id": 38746113, "comment_id": 64869126, "body": "@MartinBonner: Please read what&#39;s in the parenthesis."}, {"owner": {"reputation": 109, "user_id": 6672727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/905494873676d7946cebd4b5bbc5ab5b?s=128&d=identicon&r=PG&f=1", "display_name": "Art C", "link": "https://stackoverflow.com/users/6672727/art-c"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470243572, "post_id": 38746113, "comment_id": 64873033, "body": "@barakmanos this is the correct syntax and yes it is in C++11, maybe you need to update your compiler?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1470256335, "post_id": 38746113, "comment_id": 64880050, "body": "@barakmanos:  I actually wrote my comment thinking you had used the phrase &quot;if I&#39;m not wrong&quot; - which (if true) would have made my wording direct without being rude.  As it is, please accept my apologies."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470256891, "post_id": 38746113, "comment_id": 64880340, "body": "@MartinBonner: No worries... I thought I&#39;d mention that to you, by emphasizing the &quot;as far as I&#39;m aware of&quot; part, which meant I could be &quot;unaware of&quot; but not &quot;wrong&quot;... Then I realized it would make me a kind of a nit-picker... so your apology is accepted :)"}], "answers": [{"tags": [], "owner": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "is_accepted": false, "score": 1, "last_activity_date": 1470238003, "last_edit_date": 1470238003, "creation_date": 1470236275, "answer_id": 38747141, "question_id": 38746113, "link": "https://stackoverflow.com/questions/38746113/delete-mulitple-pointers-in-a-method-of-another-class/38747141#38747141", "title": "Delete mulitple pointers in a method of another class", "body": "<p><code>delete</code> is only required if there is a call to <code>new</code> when you obtain the <code>Cylinder</code> object from the game. There probably isn't, but you need to check the code.</p>\n\n<p>Setting to <code>NULL</code> is something that you do if the object pointed to has been (or is at risk of getting) deleted. This is <strong>only</strong> to ensure that the invalid pointer cannot be accidentally used some time later.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1470238666, "creation_date": 1470238666, "answer_id": 38748050, "question_id": 38746113, "link": "https://stackoverflow.com/questions/38746113/delete-mulitple-pointers-in-a-method-of-another-class/38748050#38748050", "title": "Delete mulitple pointers in a method of another class", "body": "<p>In general (and unless the documentation says otherwise), don't <code>delete</code> objects if you are passed a pointer.  Assume that you are not being given ownership of the object.</p>\n\n<p>Modern C++ helps you avoid needing to know whether you are being given ownership: you may be given a <code>std::shared_ptr&lt;Cylinder&gt;</code> or a <code>std::unique_ptr&lt;Cylinder&gt;</code> - either way, deletion is handled for you when the smart pointer goes out of scope.  But often, you have to work with a library that doesn't give you such reassurance.</p>\n\n<p>There's no need to null out any pointers used within a small scope (e.g. a function).  If you keep pointer variables around for longer (in a member variable, perhaps), then it may help prevent accidents if you do so.  As C++ is not a garbage-collected language, there's no benefit from nulling pointers that are about to go out of scope.</p>\n"}], "owner": {"reputation": 109, "user_id": 6672727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/905494873676d7946cebd4b5bbc5ab5b?s=128&d=identicon&r=PG&f=1", "display_name": "Art C", "link": "https://stackoverflow.com/users/6672727/art-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 38748050, "answer_count": 2, "score": 1, "last_activity_date": 1470238666, "creation_date": 1470233645, "last_edit_date": 1470238246, "question_id": 38746113, "link": "https://stackoverflow.com/questions/38746113/delete-mulitple-pointers-in-a-method-of-another-class", "title": "Delete mulitple pointers in a method of another class", "body": "<p>I am editing some code of an open source game and normally the code doesn't directly access the player or creature class; however its parameter <code>Cylinder</code> is at the top of the food chain when it comes to everything.</p>\n\n<p>My question is should I be deleting all these pointers or setting them to <code>NULL</code> after I am done with them?</p>\n\n<p>Here is the code I've written; it works fine but I don't want to crash the server over an issue such as a dangling pointer (still a bit new to C++).</p>\n\n<pre><code>bool Game::removeMoney(Cylinder* cylinder, uint64_t money, uint32_t flags /*= 0*/)\n{\n    if (cylinder == nullptr) {\n        return false;\n    }\n\n    if (money == 0) {\n        return true;\n    }\n\n    if (Creature *creature = cylinder-&gt;getCreature()) {\n        if (Player *player = creature-&gt;getPlayer()) {\n            uint64_t cash = player-&gt;getBankBalance();\n            if (cash &lt; money) {\n                return false;\n            }\n            player-&gt;setBankBalance(cash - money);\n        }\n    }\n    return true;\n}\n\nvoid Game::addMoney(Cylinder* cylinder, uint64_t money, uint32_t flags /*= 0*/)\n{\n    if (Creature *creature = cylinder-&gt;getCreature()) {\n        if (Player *player = creature-&gt;getPlayer()) {\n                player-&gt;setBankBalance(player-&gt;getBankBalance() + money);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 245415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bb3723c9baeeafcfc5033a806f905?s=128&d=identicon&r=PG", "display_name": "XKpe", "link": "https://stackoverflow.com/users/245415/xkpe"}, "edited": false, "score": 0, "creation_date": 1470237896, "post_id": 38746757, "comment_id": 64869290, "body": "Thank you, it works great! I&#39;ve changed your helper slightly to take the IndexTypePair as a template parameter, that that&#39;s essentially what I was looking for."}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": true, "score": 2, "last_activity_date": 1470235253, "creation_date": 1470235253, "answer_id": 38746757, "question_id": 38746040, "link": "https://stackoverflow.com/questions/38746040/creating-pairs-of-index-and-type-from-parameter-pack/38746757#38746757", "title": "Creating pairs of index and type from parameter pack", "body": "<p>Use a nested structure setup to help you, together with the standard <code>make_index_sequence</code>:</p>\n\n<pre><code>template &lt; typename ... T &gt;\nstruct make_index_type_tuple_helper\n{    \n    template&lt; typename V &gt;\n    struct idx;\n\n    template&lt; size_t ... Indices &gt;\n    struct idx&lt;std::index_sequence&lt;Indices...&gt;&gt;\n    {\n        using tuple_type = std::tuple&lt;IndexTypePair&lt;Indices, T&gt;...&gt;;\n    };\n\n    using tuple_type = typename idx&lt;std::make_index_sequence&lt;sizeof...(T)&gt;&gt;::tuple_type;\n};\n\ntemplate &lt; typename ... T&gt;\nusing make_index_type_tuple = typename make_index_type_tuple_helper&lt;T...&gt;::tuple_type;\n</code></pre>\n\n<p>Then you can use it exactly how you want (<a href=\"http://coliru.stacked-crooked.com/a/1a40396c38205862\" rel=\"nofollow\">live demo</a>):</p>\n\n<pre><code>using Indices = make_index_type_tuple&lt; int, int, float &gt;;\ntest2&lt; Indices, 0 &gt;();\ntest2&lt; Indices, 1 &gt;();\ntest2&lt; Indices, 2 &gt;();\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 245415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1bb3723c9baeeafcfc5033a806f905?s=128&d=identicon&r=PG", "display_name": "XKpe", "link": "https://stackoverflow.com/users/245415/xkpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 38746757, "answer_count": 1, "score": 2, "last_activity_date": 1470235253, "creation_date": 1470233446, "last_edit_date": 1495540865, "question_id": 38746040, "link": "https://stackoverflow.com/questions/38746040/creating-pairs-of-index-and-type-from-parameter-pack", "title": "Creating pairs of index and type from parameter pack", "body": "<p>I'm trying to create a tuple or pairs of the index a parameter pack.</p>\n\n<p>Here is an example of what the code wants to achieve:</p>\n\n<pre><code>  {\n    using Indices =\n        std::tuple&lt; IndexTypePair&lt; 0, int &gt;, IndexTypePair&lt; 1, int &gt;, IndexTypePair&lt; 2, float &gt; &gt;;\n    test2&lt; Indices, 0 &gt;();\n    test2&lt; Indices, 1 &gt;();\n    test2&lt; Indices, 2 &gt;();\n  }\n</code></pre>\n\n<p>And here is the generalization:</p>\n\n<pre><code>  {\n    template &lt; typename... T &gt;\n    using make_index_tuple = tuple&lt; IndexTypePair&lt; Index_v&lt; T, T... &gt;, T &gt;... &gt;;\n    using Indices = make_index_tuple&lt; int, int, float &gt;;\n    test2&lt; Indices, 0 &gt;();\n    test2&lt; Indices, 1 &gt;();\n    test2&lt; Indices, 2 &gt;();\n  }\n</code></pre>\n\n<p>This solution is based on the answer to this question: \n<a href=\"https://stackoverflow.com/questions/26169198/how-to-get-the-index-of-a-type-in-a-variadic-type-pack\">How to get the index of a type in a variadic type pack?</a></p>\n\n<p>One of the problems I'm having is to create the variadic template alias, the previous code gives the following error:</p>\n\n<pre><code>$ make index-sequence clang++-3.8 -Wall -Werror -Wextra -std=c++14\n-pedantic -Wconversion -stdlib=libc++ -O3 -pthread    index-sequence.cpp   -o index-sequence index-sequence.cpp:50:5: error: expected expression\n    template &lt; typename... T &gt;\n    ^ index-sequence.cpp:52:21: error: unknown type name 'make_index_tuple'\n    using Indices = make_index_tuple&lt; int, int, float &gt;;\n                    ^ ...\n</code></pre>\n\n<hr>\n\n<p>Here are some other bits and pieces to make this code work:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\ntemplate &lt; typename T, typename... Ts &gt;\nstruct Index;\n\ntemplate &lt; typename T, typename... Ts &gt;\nstruct Index&lt; T, T, Ts... &gt; : std::integral_constant&lt; std::size_t, 0 &gt;\n{\n};\n\ntemplate &lt; typename T, typename U, typename... Ts &gt;\nstruct Index&lt; T, U, Ts... &gt; : std::integral_constant&lt; std::size_t, 1 + Index&lt; T, Ts... &gt;::value &gt;\n{\n};\n\ntemplate &lt; typename T, typename... Ts &gt;\nconstexpr std::size_t Index_v = Index&lt; T, Ts... &gt;::value;\n\ntemplate &lt; size_t i, typename T &gt;\nstruct IndexTypePair\n{\n  static constexpr size_t index{i};\n  using Type = T;\n};\n\ntemplate &lt; typename Idx, size_t i &gt;\nvoid test2()\n{\n  using ITP = typename std::tuple_element&lt; i, Idx &gt;::type;\n  typename ITP::Type v{};\n  //....\n  std::cout &lt;&lt; ITP::index &lt;&lt; ' ' &lt;&lt; v &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "embedding"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470233549, "post_id": 38745999, "comment_id": 64865842, "body": "Where does the crash happen? How do you call your program (i.e. what arguments are you passing to it)? Do you have any null-pointer checks anywhere in your actual code?"}, {"owner": {"reputation": 2338, "user_id": 1256369, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b78860ec1b96a3d835f65dc9a5d8fd53?s=128&d=identicon&r=PG&f=1", "display_name": "Adorn", "link": "https://stackoverflow.com/users/1256369/adorn"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470234822, "post_id": 38745999, "comment_id": 64866839, "body": "Code crashes at the `    pFunc = PyDict_GetItemString(pDict, argv[2]);` line; yes, pointers are being checked for nullity, everyone upto pDict is not null. I call it like this: <code>.&#47;test_cpp.o test_python multiply</code>  test_python is name of the python script"}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "edited": false, "score": 0, "creation_date": 1470238143, "post_id": 38745999, "comment_id": 64869470, "body": "Does the call stack of the crash point directly at the this line, or somewhere inside python? What are the specifics of the crash?"}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1470407322, "post_id": 38745999, "comment_id": 64953536, "body": "There is not much C++ in this question, <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> tag might be more appropriate."}], "answers": [{"tags": [], "owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "is_accepted": false, "score": -1, "last_activity_date": 1470407035, "creation_date": 1470407035, "answer_id": 38791595, "question_id": 38745999, "link": "https://stackoverflow.com/questions/38745999/embedding-python-in-c-segmentation-fault/38791595#38791595", "title": "Embedding python in C++, Segmentation fault", "body": "<p>It might be easier to use <code>boost::python</code> or the code generated by cython.</p>\n\n<p>The main culprit seems to be the missing </p>\n\n<pre><code>PySys_SetArgv(argc, wargs);\n</code></pre>\n\n<p>where <code>wargs</code> contains the arguments as wide character strings. Without it, relative imports do not work.</p>\n\n<p>The following code (compiled with gcc, g++ would require some casts in case of <code>malloc()</code>) seems to work.</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;string.h&gt;\n\nint to_wide_args(wchar_t **argsw[], int argc, char *argv[])\n{\n    int i;\n    size_t len;\n    wchar_t *wstr;\n    wchar_t **tmp = NULL;\n    tmp = malloc(sizeof(wchar_t **) * argc);\n\n    for (i = 0; i &lt; argc; i++) {\n        /* In case of python 3.5, see Py_DecodeLocale */\n        len = mbstowcs(NULL, argv[i], 0);\n        wstr = malloc(sizeof(wchar_t) * (len + 1));\n        if (len != mbstowcs(wstr, argv[i], len + 1)) {\n            return -1;\n        }\n        tmp[i] = wstr;\n    }\n    *argsw = tmp;\n    return 0;\n}\n\nint main(int argc, char *argv[])\n{\n    PyObject *dict = 0;\n    PyObject *func = 0;\n    PyObject *module = 0;\n\n    wchar_t **wargs = NULL;\n    int rc = 0;\n\n    if (argc &lt; 3) {\n        printf(\"Usage: exe_name python_source function_name\\n\");\n        return 1;\n    }\n\n    if (to_wide_args(&amp;wargs, argc, argv) &lt; 0) goto error;\n\n    Py_SetProgramName(wargs[0]);\n    Py_Initialize();\n    PySys_SetArgv(argc, wargs);\n\n    if (PyErr_Occurred()) goto error;\n\n    module = PyImport_ImportModule(argv[1]);\n    printf(\"Module ptr: %p\\n\", module);\n    if (module == NULL || PyErr_Occurred()) goto error;\n\n    dict = PyModule_GetDict(module);\n    printf(\"Module dict ptr: %p\\n\", dict);\n    if (dict == NULL || PyErr_Occurred()) goto error;\n\n    func = PyDict_GetItemString(dict, argv[2]);\n    printf(\"Function ptr: %p\\n\", func);\n    if (func == NULL || PyErr_Occurred()) goto error;\n\n    if (PyCallable_Check(func)) {\n        PyObject_CallObject(func, NULL);\n    } else {\n        goto error;\n    }\n    goto ok;\n\nerror:\n    PyErr_Print();\n    rc = 1;\nok:\n    Py_XDECREF(module);\n    Py_Finalize();\n\n    return rc;\n}\n</code></pre>\n"}], "owner": {"reputation": 2338, "user_id": 1256369, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b78860ec1b96a3d835f65dc9a5d8fd53?s=128&d=identicon&r=PG&f=1", "display_name": "Adorn", "link": "https://stackoverflow.com/users/1256369/adorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 795, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470407035, "creation_date": 1470233342, "question_id": 38745999, "link": "https://stackoverflow.com/questions/38745999/embedding-python-in-c-segmentation-fault", "title": "Embedding python in C++, Segmentation fault", "body": "<p>I am trying to embed python script in a c++ application.\nTo try out the integration, I made a pilot code:</p>\n\n<pre><code>// c++ code\n\nint main(int argc, char *argv[])\n{\n    PyObject *pName, *pModule, *pDict, *pFunc, *pValue;\n\n    if (argc &lt; 3) \n    {\n        printf(\"Usage: exe_name python_source function_name\\n\");\n        return 1;\n    }\n\n    // Initialize the Python Interpreter\n    Py_Initialize();\n\n    // Build the name object\n    pName = PyBytes_FromString(argv[1]);\n    //std::to_string(argv[1]).encode(\n\n    // Load the module object\n    pModule = PyImport_Import(pName);\n\n    // pDict is a borrowed reference \n    pDict = PyModule_GetDict(pModule);\n\n    // pFunc is also a borrowed reference \n    pFunc = PyDict_GetItemString(pDict, argv[2]);\n\n    if (PyCallable_Check(pFunc)) \n    {\n        PyObject_CallObject(pFunc, NULL);\n    } \n    else \n    {\n        PyErr_Print();\n    }\n\n    // Clean up\n    Py_DECREF(pModule);\n    Py_DECREF(pName);\n\n    // Finish the Python Interpreter\n    Py_Finalize();\n\n    return 0;\n}\n\n\n# Python script\ndef multiply():\n    c = 12345*6789\n    print ('The result of 12345 x 6789 :' + str(c))\n</code></pre>\n\n<p>I came across the posts that suggest to use boost.\nIs boost simpler than this? Def of simple: less code, straight forward, largely used  by community.</p>\n\n<p>I am interested in these questions because the real code we are going to integrate is pretty complex (because not following the coding ethics), and it needs to communicate with Python code at many times, hence there is synchronization issue as well.</p>\n"}, {"tags": ["c++", "memory-management", "smart-pointers"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1470233325, "post_id": 38745801, "comment_id": 64865695, "body": "You can use something like <code>std::unique_ptr&lt;Base, std::function&lt;void(Base*)&gt;&gt;</code> for a fully dynamic deleter."}], "answers": [{"comments": [{"owner": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "edited": false, "score": 0, "creation_date": 1470233234, "post_id": 38745908, "comment_id": 64865637, "body": "That was my first guess, but how can <code>clone()</code> possibly know what kind of ownership is desired by the caller?"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "reply_to_user": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "edited": false, "score": 0, "creation_date": 1470233387, "post_id": 38745908, "comment_id": 64865741, "body": "@stakx If the caller wants different ownership they can call <code>.release()</code>.  The huge advantage to returning a smart pointer here is that it removes the possibility of leaks."}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 3, "creation_date": 1470233387, "post_id": 38745908, "comment_id": 64865742, "body": "eh? I think if your caller cares about ownership - they will take ownership of the object returned by clone (in the above case by <i>moving</i> it to it&#39;s own internal member for example..) or if it doesn&#39;t care, let it go out of scope and cleanup automatically..."}, {"owner": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "edited": false, "score": 0, "creation_date": 1470241171, "post_id": 38745908, "comment_id": 64871581, "body": "@Nim: Thank you, returning a <code>unique_ptr</code> is what I shall do then. Seems I was misled by <a href=\"https://isocpp.org/wiki/faq/virtual-functions#virtual-ctors\" rel=\"nofollow noreferrer\">this FAQ on isocpp.org</a>, which suggests a <code>clone</code> function returning a raw pointer."}], "tags": [], "owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "is_accepted": true, "score": 3, "last_activity_date": 1470233110, "creation_date": 1470233110, "answer_id": 38745908, "question_id": 38745801, "link": "https://stackoverflow.com/questions/38745801/destruction-policy-for-stdunique-ptrbaseptr-when-i-dont-know-how-ptr/38745908#38745908", "title": "Destruction policy for `std::unique_ptr&lt;Base&gt;(ptr)` when I don&#39;t know how `ptr` was allocated?", "body": "<p>Your <code>clone()</code> should return a smart pointer appropriately, i.e.</p>\n\n<pre><code>virtual std::unique_ptr&lt;Base&gt; clone() {\n...\n}\n</code></pre>\n\n<p>This avoids all ambiguity.</p>\n"}, {"comments": [{"owner": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "edited": false, "score": 0, "creation_date": 1470233365, "post_id": 38745953, "comment_id": 64865724, "body": "But how can <code>clone</code> know what mode of ownership is desired by the caller?"}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "reply_to_user": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "edited": false, "score": 1, "creation_date": 1470233435, "post_id": 38745953, "comment_id": 64865770, "body": "@stakx It doesn&#39;t. By returning a <code>std::unique_ptr</code>, the caller has to own the returned pointer. They can give up ownership if they would like, but they can&#39;t request an unowned pointer."}], "tags": [], "owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "is_accepted": false, "score": 1, "last_activity_date": 1470233229, "creation_date": 1470233229, "answer_id": 38745953, "question_id": 38745801, "link": "https://stackoverflow.com/questions/38745801/destruction-policy-for-stdunique-ptrbaseptr-when-i-dont-know-how-ptr/38745953#38745953", "title": "Destruction policy for `std::unique_ptr&lt;Base&gt;(ptr)` when I don&#39;t know how `ptr` was allocated?", "body": "<p>Just have <code>Base</code> define a <code>clone</code> method that returns the smart pointer with the correct deleter.</p>\n\n<pre><code>void clone_and_use(const Base&amp; original) {\n  auto clone = original.Clone();\n  ... // do something with `clone`\n}\n\nstd::unique_ptr&lt;Base, BaseDeleter&gt; Clone() const {\n    return std::unique_ptr&lt;Base, BaseDeleter&gt;(new Base(this));\n}\n</code></pre>\n\n<p>Alternatively, you can override <code>std::default_delete</code> for your type.</p>\n\n<pre><code>namespace std\n{\n   template&lt;&gt;\n   class default_delete&lt;Base&gt;\n   {\n   public:\n      void operator()(Base* ptr)\n      {\n         // Do delete operation on `ptr`\n      }\n   };\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1470234098, "creation_date": 1470234098, "answer_id": 38746302, "question_id": 38745801, "link": "https://stackoverflow.com/questions/38745801/destruction-policy-for-stdunique-ptrbaseptr-when-i-dont-know-how-ptr/38746302#38746302", "title": "Destruction policy for `std::unique_ptr&lt;Base&gt;(ptr)` when I don&#39;t know how `ptr` was allocated?", "body": "<blockquote>\n  <p>What if original.clone() returned a pointer to memory that was not allocated with new? </p>\n</blockquote>\n\n<p>If you don't know how to deallocate it, you cannot deallocate it, with or without help from any smart pointer class. Therefore you cannot take ownership of it in any shape or form.</p>\n\n<blockquote>\n  <p>How to properly work with smart pointer destruction policies</p>\n</blockquote>\n\n<p>You cannot work with unknown policies. How to properly work with smart pointer destruction policies in <em>your</em> class? Easy: it's <em>your</em> class. Make the policy known. Decide on one policy and document your decision, thus everyone who writes a derived class must obey. Alternatively, add an output-argument <code>std::function&amp; deletePolicy</code> to <code>clone</code>, then wrap <code>clone</code> in a convenience function that returns a <code>unique_ptr</code>.</p>\n"}], "owner": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 38745908, "answer_count": 3, "score": 1, "last_activity_date": 1470234098, "creation_date": 1470232827, "question_id": 38745801, "link": "https://stackoverflow.com/questions/38745801/destruction-policy-for-stdunique-ptrbaseptr-when-i-dont-know-how-ptr", "title": "Destruction policy for `std::unique_ptr&lt;Base&gt;(ptr)` when I don&#39;t know how `ptr` was allocated?", "body": "<p>Another \"modern C++\" beginner question. I seem to have some misconception about how to properly use smart pointers / smart pointer destruction policies.</p>\n\n<pre><code>struct Base {\n    virtual Base* clone() const = 0;\n    virtual ~Base() { }\n};\n\nvoid clone_and_use(const Base &amp;original) {\n    auto clone = std::unique_ptr&lt;Base&gt;(original.clone());\n    \u2026  // do something with `clone`\n}\n</code></pre>\n\n<p>As far as I can tell, when <code>clone</code> goes out of scope, the pointed-to memory will be <code>delete</code>d thanks to the <code>std::default_delete&lt;Base&gt;</code> destruction policy used by <code>std::unique_ptr&lt;Base&gt;</code> (which appears to be equivalent to <code>std::unique_ptr&lt;Base, std::default_delete&lt;Base&gt;&gt;</code>).</p>\n\n<p>What if <code>original.clone()</code> returned a pointer to memory that was <em>not</em> allocated with <code>new</code>? Obviously the standard <code>std::default_delete&lt;Base&gt;</code> destruction policy would be inappropriate&mdash;<code>delete</code> should only be used together with <code>new</code>, but not with <code>new[]</code>, <code>malloc</code>, or anything else&mdash; and I should specify a different destruction policy when I create the <code>clone</code> smart pointer\u2026 but which one would I specify?</p>\n\n<pre><code>    auto clone = std::unique_ptr&lt;Base, ?&gt;(original.clone());\n    //                                 ^\n</code></pre>\n\n<p>I am guessing that I would have to extend <code>Base</code> such that I can simply ask any derived type to provide a destruction policy suitable for its <code>clone()</code> implementation, but I'm not exactly sure how I would do this.</p>\n\n<p>Can someone show me how to:</p>\n\n<ul>\n<li>Define the <code>Base</code> interface such that it can support a <code>clone()</code> method without leading to leaked or incorrectly freed memory; and</li>\n<li>How to properly work with smart pointer destruction policies (if they are necessary at all in this example)?</li>\n</ul>\n"}, {"tags": ["c++", "gdal", "rasterio"], "comments": [{"owner": {"reputation": 374, "user_id": 2679239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebeaa0c4e9831d1851a8e6a951ded107?s=128&d=identicon&r=PG&f=1", "display_name": "kory", "link": "https://stackoverflow.com/users/2679239/kory"}, "edited": false, "score": 0, "creation_date": 1531364789, "post_id": 38745692, "comment_id": 89570831, "body": "GDT_CFloat32 is size of 8 but you are only allocating a size of 4, so it will crash once it reaches the middle of the buffer.  Either change the type to GDT_Float32 or multiply by two for the size of the buffer.  Also your loop method is very slow because you are allocating memory and freeing it inside of the loop.  It is best to just allocate the memory outside of the loop and reuse that same memory and then free it outside of the loop as well.  I used your code above (with my mods) on a slow spinning disk and it read in a 77 MP raster and wrote it to disk within only a few seconds."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2882142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc58929903d5ba9f15234a5e4e6a1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut Sandric", "link": "https://stackoverflow.com/users/2882142/ionut-sandric"}, "edited": false, "score": 0, "creation_date": 1470244624, "post_id": 38747666, "comment_id": 64873653, "body": "Thank you for your help. The code bellow is working now, but it takes more time like this than reading the entire image at ones I changed       \tfloat* rasterBlock = (float*)CPLMalloc(nCols<i>nRows * sizeof(GDT_CFloat32)); \tfloat</i> rasterBlockOut = (float*)CPLMalloc(nCols*nRows * sizeof(GDT_CFloat32));"}, {"owner": {"reputation": 1293, "user_id": 6093326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f3b47138d4c533e1faddc46ed9cac8?s=128&d=identicon&r=PG&f=1", "display_name": "Gwen", "link": "https://stackoverflow.com/users/6093326/gwen"}, "reply_to_user": {"reputation": 35, "user_id": 2882142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc58929903d5ba9f15234a5e4e6a1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut Sandric", "link": "https://stackoverflow.com/users/2882142/ionut-sandric"}, "edited": false, "score": 0, "creation_date": 1470245027, "post_id": 38747666, "comment_id": 64873864, "body": "The purpose of working with blocks is not to speed up the processing (if you process the whole image) but to be able to handle a quantity of data that wouldn&#39;t fit in ram. If you can load the whole image at once in ram, it will for sure be quicker."}], "tags": [], "owner": {"reputation": 1293, "user_id": 6093326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f3b47138d4c533e1faddc46ed9cac8?s=128&d=identicon&r=PG&f=1", "display_name": "Gwen", "link": "https://stackoverflow.com/users/6093326/gwen"}, "is_accepted": true, "score": 0, "last_activity_date": 1470237673, "creation_date": 1470237673, "answer_id": 38747666, "question_id": 38745692, "link": "https://stackoverflow.com/questions/38745692/gdal-c-rasterio-by-blocks/38747666#38747666", "title": "GDAL C++ RasterIO by blocks", "body": "<p>This may not be the cause of the crash, but you're asking for a 2048*2048 block even if your image is smaller. This code should only work for images with multiples of 2048 as size.</p>\n\n<p>You should do something like:</p>\n\n<pre><code>nXSize = min(readCols, rasterBand-&gt;GetXSize() - j * readCols);\nnYSize = min(readRows, rasterBand-&gt;GetYSize() - i * readRows);\n\nrasterBand-&gt;RasterIO(GDALRWFlag::GF_Read, j * readCols, i * readRows, \n    nXSize, nYSize, rasterBlock, nXSize, nYSize, GDALDataType::GDT_CFloat32, 0, 0);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 2882142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc58929903d5ba9f15234a5e4e6a1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut Sandric", "link": "https://stackoverflow.com/users/2882142/ionut-sandric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 0, "accepted_answer_id": 38747666, "answer_count": 1, "score": 1, "last_activity_date": 1470237673, "creation_date": 1470232563, "last_edit_date": 1470236851, "question_id": 38745692, "link": "https://stackoverflow.com/questions/38745692/gdal-c-rasterio-by-blocks", "title": "GDAL C++ RasterIO by blocks", "body": "<p>I am new to gdal and c++ and I am trying to create a function that reads a raster by blocks (using RasterIO and not ReadBlock) do something with the values and writes the result to new raster file</p>\n\n<p>I am getting an error: </p>\n\n<blockquote>\n  <p>Unhandled exception at 0x00007FFDFB517BC4 (gdal201.dll) in Test.exe:\n  0xC0000005: Access violation writing location 0x00000230E2593000 at\n  line rasterBand->RasterIO(GDALRWFlag::GF_Read, j * readCols, i *\n  readRows, readCols, readRows, rasterBlock, readCols, readRows,\n  GDALDataType::GDT_CFloat32, 0, 0)</p>\n</blockquote>\n\n<p>I have a very similar function that works ok, but it reads the pixel values row by row</p>\n\n<p>Any help is appreciated</p>\n\n<p>The function is bellow</p>\n\n<p>Thank you</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"gdal_priv.h\"\nusing namespace std;\n\nvoid SlopeBlock()\n{\nint readRows = 2048;\nint readCols = 2048;\nint nBlockXSize;\nint nBlockYSize;\nint rowOff = 0;\nint colOff = 0;\nint nRows = 0;\nint nCols = 0;\ndouble noData = -9999;\n\nGDALAllRegister();\n\nGDALDataset* dem = (GDALDataset*)GDALOpen(\"path/EUD_CP-DEMS_4500025000-AA.tif\", GA_ReadOnly);\n\nGDALDriver *gTIF = GetGDALDriverManager()-&gt;GetDriverByName(dem-&gt;GetDriverName());\n\ndouble geoTransform[6];\ndem-&gt;GetGeoTransform(geoTransform);\n\nGDALRasterBand* rasterBand = dem-&gt;GetRasterBand(1);\n\nnCols = rasterBand-&gt;GetXSize();\nnRows = rasterBand-&gt;GetYSize();\nnoData = rasterBand-&gt;GetNoDataValue();\n\n//rasterBand-&gt;GetBlockSize(&amp;nBlockXSize, &amp;nBlockYSize);\n\nint nXBlocks = (rasterBand-&gt;GetXSize() + readCols - 1) / readCols;\nint nYBlocks = (rasterBand-&gt;GetYSize() + readRows - 1) / readRows;\n\ncout &lt;&lt; nYBlocks &lt;&lt; \"___\" &lt;&lt; nXBlocks &lt;&lt; \"\\n\";\n\n\n//Slope\nGDALDataset *slope = gTIF-&gt;Create(\"path/slopeBlock.tif\", nCols, nRows, 1, GDT_Float32, NULL);\nslope-&gt;SetGeoTransform(geoTransform);\n\nfor (int i = 0; i &lt; nYBlocks; i++)\n{\n    for (int j = 0; j &lt; nXBlocks; j++)\n    {\n        float* rasterBlock = (float*)CPLMalloc(readCols*readRows*sizeof(float));\n        float* rasterBlockOut = (float*)CPLMalloc(readCols*readRows*sizeof(float));\n\n        if (rasterBand != nullptr)\n            rasterBand-&gt;RasterIO(GDALRWFlag::GF_Read, j * readCols, i * readRows, readCols, readRows, rasterBlock, readCols, readRows, GDALDataType::GDT_CFloat32, 0, 0);\n\n        //Not sure if is working\n        for (int jb = 0; jb &lt; readCols; jb++)\n        {\n            if (rasterBlock[jb] == noData)\n            {\n                rasterBlockOut[jb] = noData;\n            }\n            else\n            {\n                rasterBlockOut[jb] = rasterBlock[jb];\n            }\n        }\n\n        slope-&gt;GetRasterBand(1)-&gt;RasterIO(GDALRWFlag::GF_Write, j * readCols, i * readRows, readCols, readRows, rasterBlockOut, readCols, readRows, GDALDataType::GDT_CFloat32, 0, 0);\n\n        CPLFree(rasterBlock);\n        CPLFree(rasterBlockOut);\n    }\n}\n\nGDALClose(dem);\nGDALClose(slope);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1470232612, "post_id": 38745633, "comment_id": 64865130, "body": "This sounds like a symptom of using <code>using namespace std;</code>.  If you are using that <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">please stop</a>."}, {"owner": {"reputation": 83, "user_id": 6636545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6deffeaf852079fe73cffe59d1dc24e3?s=128&d=identicon&r=PG&f=1", "display_name": "pjcognetta", "link": "https://stackoverflow.com/users/6636545/pjcognetta"}, "edited": false, "score": 0, "creation_date": 1470232731, "post_id": 38745633, "comment_id": 64865224, "body": "If you use your own namespace, you can reuse stl function names. e.g. <code>mynamespace{ ostream&amp; cout(String str) ... }</code>. Then you can use your namespace using the scope resolution operator (::) to specify which cout you would like to use"}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1470232824, "post_id": 38745633, "comment_id": 64865306, "body": "&quot;Exactly matching&quot; as in you&#39;re introducing new symbols in the <code>std</code> namespace? That&#39;s explicitely forbidden by &#167;17.6.4.2.1: <i>&quot;The behavior of a program is undefined if it adds declarations or definitions to namespace <code>std</code>&quot;</i>. However, you&#39;re allowed to specialize templates on user types."}], "answers": [{"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1470233539, "post_id": 38745764, "comment_id": 64865839, "body": "@HolyBlackCat I don&#39;t know why <code>putchar</code> has this behavior, but to me  your code should not work, see <a href=\"http://ideone.com/EXJ50I\" rel=\"nofollow noreferrer\">ideone.com/EXJ50I</a>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1470234979, "post_id": 38745764, "comment_id": 64866979, "body": "The standard library has no special precedence. If the <code>sort</code> from <code>std</code> is pulled in with <code>using namespace std</code> and there is also a user-defined function named <code>sort</code> the usual overloading rules apply."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1470235711, "post_id": 38745764, "comment_id": 64867614, "body": "@ialcuaz - no, that&#39;s not right. The compiler handles overloading at the point of the call, and looks at all of the declarations that are in scope. It doesn&#39;t matter how they got there."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1470237490, "post_id": 38745764, "comment_id": 64868953, "body": "@ialcuaz - that example with <code>putchar</code> relies on the declaration of the C library functions being in the global namespace; there&#39;s no ambiguity because it amounts to <code>int putchar(int); int putchar(int i) { ... }</code> and the using declaration doesn&#39;t really affect anything. That&#39;s different from the C++ library functions, which are declared in namespace <code>std</code>. so in the example by @Holt there are <b>two</b> functions in the same scope: <code>std::stod</code>, which got hoisted into the global namespace by the using declaration, and the definition of <code>stod</code> in the global namespace. It&#39;s also different ..."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1470237589, "post_id": 38745764, "comment_id": 64869023, "body": "... from an implementation that puts the C library functions in <code>std</code> and then hoists them into the global namespace (not that anyone does that, although it&#39;s legal to do it that way). The <code>putchar</code> example would be ambiguous with that implementation. All in all, it&#39;s an interesting example."}], "tags": [], "owner": {"reputation": 3196, "user_id": 4245174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qhbam.jpg?s=128&g=1", "display_name": "ifma", "link": "https://stackoverflow.com/users/4245174/ifma"}, "is_accepted": false, "score": 2, "last_activity_date": 1470236092, "last_edit_date": 1495542896, "creation_date": 1470232752, "answer_id": 38745764, "question_id": 38745633, "link": "https://stackoverflow.com/questions/38745633/does-c-also-reserve-the-standard-library-function-names/38745764#38745764", "title": "Does C++ also reserve the standard library function names?", "body": "<p>I'm not sure if I understand the question correctly (correct me if I am wrong) but say you have a function like so:</p>\n\n<pre><code>void sort( // blah blah\n</code></pre>\n\n<p>Or declaring the std namespace <code>using namespace std</code> <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">(which you should not be doing)</a></p>\n\n<p>When you call <code>sort(...)</code> within your translation unit, the compiler overloads the definitions and in this case your function has precedence.</p>\n\n<p>But if you are calling the standard library function by explicitly defining the std namespace (using the scope resolution operator) like so</p>\n\n<pre><code>std::sort( // blah blah\n</code></pre>\n\n<p>it will use the std library function instead.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 2, "last_activity_date": 1470233253, "creation_date": 1470233253, "answer_id": 38745962, "question_id": 38745633, "link": "https://stackoverflow.com/questions/38745633/does-c-also-reserve-the-standard-library-function-names/38745962#38745962", "title": "Does C++ also reserve the standard library function names?", "body": "<p>No, the names of functions within namespace <code>std</code> are not reserved - at least, not in the sense that using the same names outside of namespace <code>std</code> is forbidden.</p>\n\n<p>However, placing names within namespace <code>std</code> (except in a few cases, such as specialising certain template functions) gives undefined behaviour.</p>\n\n<p>If you are getting the compiler complaining about ambiguity when calling your functions, where one of the functions has the same name as yours but is in namespace <code>std</code>, then the cause is probably a <code>using namespace std</code> in your code.   The effect of that, when the compiler encounters a name, is that both your functions and those in namespace <code>std</code> are valid matches.   If the compiler has no reason to prefer one over the other (e.g. they accept the same types of argument) the code will not compile.   In that case, the solution is to remove the <code>using namespace std</code> from your code - there is no way to undo the effects of <code>using namespace std</code> other than removing it.</p>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 5516474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71edc807db6aa3176cd7538ebd05b012?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkzz", "link": "https://stackoverflow.com/users/5516474/sparkzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1508932606, "last_edit_date": 1508932606, "creation_date": 1470236068, "answer_id": 38747068, "question_id": 38745633, "link": "https://stackoverflow.com/questions/38745633/does-c-also-reserve-the-standard-library-function-names/38747068#38747068", "title": "Does C++ also reserve the standard library function names?", "body": "<p>That's the reason why people say <code>using namespace std;</code> in C++ is a bad practice.</p>\n\n<p>Because the function definition gets conflicted when you use the same function name which is already defined inside the <code>namespace std</code> leading to many unrelated errors.</p>\n\n<p>Read this thread for more details:-</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">Why using namespace std; in C++ is considered a bad practice?</a></p>\n"}], "owner": {"reputation": 121, "user_id": 6629018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a60e2a0c4a59cac4673c3793291b7e36?s=128&d=identicon&r=PG&f=1", "display_name": "dlp96", "link": "https://stackoverflow.com/users/6629018/dlp96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 38745962, "answer_count": 3, "score": 1, "last_activity_date": 1508932606, "creation_date": 1470232434, "question_id": 38745633, "link": "https://stackoverflow.com/questions/38745633/does-c-also-reserve-the-standard-library-function-names", "title": "Does C++ also reserve the standard library function names?", "body": "<p>Suppose you define a function inside the translation unit with the name of function exactly matching with any of the standard library function. \nAs the compiler first looks for the definition in the translation unit(s) and then in the library file, so will this cause to use the own version of the function definition or will it cause a diagnostic? </p>\n"}, {"tags": ["c++", "unit-testing", "c++11", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 3262982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCtRG.png?s=128&g=1", "display_name": "Spirit", "link": "https://stackoverflow.com/users/3262982/spirit"}, "edited": false, "score": 0, "creation_date": 1470234758, "post_id": 38746414, "comment_id": 64866782, "body": "Thank you for your opinions Eirik, I appreciate the feedback. However I just feel when I mock my main class and do so, im overlooking the actual testing of my connection class. but I appreciate your view and I can see that having a seperate ConnectionMock is probably the way I should be going :)"}, {"owner": {"reputation": 606, "user_id": 1223292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d1fb2e93924f47c29b17d269ca8596f?s=128&d=identicon&r=PG", "display_name": "Eirik M", "link": "https://stackoverflow.com/users/1223292/eirik-m"}, "reply_to_user": {"reputation": 130, "user_id": 3262982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCtRG.png?s=128&g=1", "display_name": "Spirit", "link": "https://stackoverflow.com/users/3262982/spirit"}, "edited": false, "score": 1, "creation_date": 1470235995, "post_id": 38746414, "comment_id": 64867831, "body": "I added some book suggestions that I found helpful. Basically, if done right, the mock should be as important as the test code in documenting functionality."}, {"owner": {"reputation": 130, "user_id": 3262982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCtRG.png?s=128&g=1", "display_name": "Spirit", "link": "https://stackoverflow.com/users/3262982/spirit"}, "edited": false, "score": 0, "creation_date": 1470296311, "post_id": 38746414, "comment_id": 64894374, "body": "Thank you very much for the books Eirik, they look very interesting. Ive since placed an order for them both :)"}], "tags": [], "owner": {"reputation": 606, "user_id": 1223292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d1fb2e93924f47c29b17d269ca8596f?s=128&d=identicon&r=PG", "display_name": "Eirik M", "link": "https://stackoverflow.com/users/1223292/eirik-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1470235898, "last_edit_date": 1470235898, "creation_date": 1470234383, "answer_id": 38746414, "question_id": 38745542, "link": "https://stackoverflow.com/questions/38745542/unit-testing-application-interface-to-hardware-to-mock-or-not/38746414#38746414", "title": "Unit Testing application interface to hardware - to mock or not", "body": "<p>Personally I would have the mock as either a separate class, or part of the test code. To differentiate between mock and actual library I would do the changes in the build script, which I assume would be to include the test file (and mock) <em>or</em> linking to a library.</p>\n\n<p>Creating a separate class is not wasted effort. It should behave as expected, but this can be simplified to the bare minimum needed for the test. A more interesting thing is to make the class generate error events, to make sure your code handles these events correctly. The alternative is sometimes to wait for the error to occur, which I wouldn't recommend.</p>\n\n<p>Two highly recommended books on the subject:</p>\n\n<ul>\n<li><a href=\"https://pragprog.com/book/jgade/test-driven-development-for-embedded-c\" rel=\"nofollow\">Test-Driven Development for Embedded C</a>: Part 2 gives a good overview of test doubles (mocks being one example) and how to use them.</li>\n<li><a href=\"https://pragprog.com/book/lotdd/modern-c-programming-with-test-driven-development\" rel=\"nofollow\">Modern C++ Programming with Test-Driven Development</a>: Less on test doubles, but more geared towards C++.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 130, "user_id": 3262982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCtRG.png?s=128&g=1", "display_name": "Spirit", "link": "https://stackoverflow.com/users/3262982/spirit"}, "edited": false, "score": 0, "creation_date": 1470235666, "post_id": 38746595, "comment_id": 64867569, "body": "Hi Marko, I think you have just provided me with my ideal design for this, thank you! I really like this interface approach. Its very abstract in relation to me having embedded the test/mock code within my class. Im going to try this design out now but I believe its exactly what I was needing."}], "tags": [], "owner": {"reputation": 3418, "user_id": 2835286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357f94482ec908e87bbc8055feaa88d0?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Popovic", "link": "https://stackoverflow.com/users/2835286/marko-popovic"}, "is_accepted": true, "score": 5, "last_activity_date": 1470235328, "last_edit_date": 1470235328, "creation_date": 1470234873, "answer_id": 38746595, "question_id": 38745542, "link": "https://stackoverflow.com/questions/38745542/unit-testing-application-interface-to-hardware-to-mock-or-not/38746595#38746595", "title": "Unit Testing application interface to hardware - to mock or not", "body": "<p>You can avoid adding test code to your class by using dependency injection. Create an interface <code>IDevice</code> and make class <code>Device</code> implement that interface. Then, in class <code>TConnection</code>, use pointers to this interface instead of a member of type <code>Device</code>. Also create a helper method that allows you to set a new device, something like:</p>\n\n<pre><code>void setDevice(IDevice *device);\n</code></pre>\n\n<p>Now, for your production code simple use an instance of class <code>Device</code>, while in your test code use <code>setDevice</code> to swap implementation of device with a mock object. This mock object will be an instance of class <code>MockDevice</code> which will also implement interface <code>IDevice</code>. That way you can change the implementation in tests and use the mock class. Since you are using <strong>gtest</strong> already, I would suggest you do not write the mock class yourself but use C++ mocking framework <strong>gmock</strong> (which is fully compatible with gtest) instead. This way, you will also need to create a separate class but almost everything will be handled by the mocking framework. All you need to do is define mocked methods. Creation of an additional interface and mock class seems like overkill at first, but it definitely pays off in the long run. If you want to do any serious test-driving of code, learning to use interfaces, dependency injection and mock classes is essential. Check the documentation for more details:</p>\n\n<p><a href=\"https://github.com/google/googlemock/blob/master/googlemock/docs/CheatSheet.md\" rel=\"noreferrer\">https://github.com/google/googlemock/blob/master/googlemock/docs/CheatSheet.md</a></p>\n"}], "owner": {"reputation": 130, "user_id": 3262982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lCtRG.png?s=128&g=1", "display_name": "Spirit", "link": "https://stackoverflow.com/users/3262982/spirit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 0, "accepted_answer_id": 38746595, "answer_count": 2, "score": 2, "last_activity_date": 1470235898, "creation_date": 1470232170, "question_id": 38745542, "link": "https://stackoverflow.com/questions/38745542/unit-testing-application-interface-to-hardware-to-mock-or-not", "title": "Unit Testing application interface to hardware - to mock or not", "body": "<p>im very curious for peoples opinions on what way a software side application that interfaces with hardware should be unit tested.</p>\n\n<p>For example, the main class of the software application \"Connection\" would be constructing a handle to a USB device.</p>\n\n<p>I want to test the \"Connection\" class base function, say \"OpenConnection\" that would attempt to connect to a USB hardware device.</p>\n\n<p>so far I have constructed a MOCK hardware device, and have included in my connection class a compiler flag, so if its built in unit test mode, it will use a mock object, otherwish it will use the actual hardware interface.</p>\n\n<p>See example below</p>\n\n<pre><code>class TConnection\n{\npublic:\n    static TConnection* GetConnection();\n    static void Shutdown();\n\n    bool DidInitialise();\n\n    bool Write(uint8_t* _pu8_buffer);\n    bool Read(uint8_t* _pu8_buffer);\n\nprotected:\n    TConnection();\n    virtual ~TConnection();\n    bool init();\n\nprivate:\n    static TConnection* mp_padConnection;\n    static bool mb_DidInitialise;\n\n#ifdef _UNIT_TEST_BUILD\n    static mock_device* mp_handle;\n#else\n    static device* mp_handle;\n#endif\n};\n</code></pre>\n\n<p>then in the source file I include something like</p>\n\n<pre><code>#include \"connection.h\"\n\n#ifdef _UNIT_TEST_BUILD\n    mock_device* TConnection::mp_handle = nullptr;\n#else\n    device* TConnection::mp_handle = nullptr;\n#endif // _UNIT_TEST_BUILD\n\nTConnection::TConnection()\n{\n    ...\n    init();\n    ...\n}\n\nbool TConnection::init()\n{\n    mp_handle = hid_open( _VENDOR_ID, _PRODUCT_ID, nullptr );\n    if (mp_hidHandle == nullptr) {\n        return false;\n    }\n    if (hid_set_nonblocking(mp_hidHandle, _DISABLE_NB) == _ERROR_CODE) {\n        return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>The only thing I really dislike about my code is that my actual connection class contains test code. I would much prefer them to be separate.</p>\n\n<p>Saying that, I also dont agree with having an entirely new mocked connection class written solely for the purpose of unit testing, it makes me feel like im just writting something designed to work as expected.</p>\n\n<p>So I ask, what would be a better approach to testing such a class</p>\n\n<p>Thank you in advance for your time and advice</p>\n"}, {"tags": ["c++", "arrays", "visual-studio-2013"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1470231974, "post_id": 38745402, "comment_id": 64864626, "body": "My educated guess would be heap corruption, quite likely in seemingly unrelated part of code. Heap corruption bugs are nasty this way."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1470232308, "post_id": 38745402, "comment_id": 64864895, "body": "1) You don&#39;t need to check for a null pointer when issuing a <code>delete[]</code>.  2) Why not use <code>std::vector&lt;BYTE&gt;</code> instead of <code>BYTE *</code>?"}, {"owner": {"reputation": 3303, "user_id": 2339664, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/64b54fa6ca1be975a3ae0b683d0d8164?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Boy", "link": "https://stackoverflow.com/users/2339664/harry-boy"}, "edited": false, "score": 0, "creation_date": 1470233571, "post_id": 38745402, "comment_id": 64865856, "body": "whats the benefit of std::vector&lt;BYTE&gt; over BYTE* ? (Apart from having to manually call delete on the pointer)"}, {"owner": {"reputation": 333, "user_id": 2636873, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QMtey.jpg?s=128&g=1", "display_name": "crisron", "link": "https://stackoverflow.com/users/2636873/crisron"}, "edited": false, "score": 1, "creation_date": 1470234261, "post_id": 38745402, "comment_id": 64866360, "body": "See this: <a href=\"http://stackoverflow.com/questions/3373193/why-is-vector-deleting-destructor-being-called-as-a-result-of-a-scalar-delete?rq=1\" title=\"why is vector deleting destructor being called as a result of a scalar delete\">stackoverflow.com/questions/3373193/&hellip;</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1470234355, "post_id": 38745402, "comment_id": 64866452, "body": "@HarryBoy It does much more than not have you write <code>delete</code>.  It makes it so that you don&#39;t have to write a destructor at all.  In addition, usage of <code>std::vector</code> over raw pointers and hand-coded dynamic allocation  alleviates you from having to write a user-defined copy constructor and assignment operator for your class.  Does your current class have those two functions, or do you have these two functions &quot;turned off&quot;?  If not, then your <code>MyClass</code> is not safely copyable, i.e. making copies of instances of those classes will lead to memory corruption."}, {"owner": {"reputation": 3303, "user_id": 2339664, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/64b54fa6ca1be975a3ae0b683d0d8164?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Boy", "link": "https://stackoverflow.com/users/2339664/harry-boy"}, "edited": false, "score": 0, "creation_date": 1470234522, "post_id": 38745402, "comment_id": 64866596, "body": "No my class does not have these two functions. Are they needed even though my class is never assigned to another variable?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1470235072, "post_id": 38745402, "comment_id": 64867059, "body": "@HarryBoy You cannot guarantee that no copying is going on (whether you do it explicitly, or whether the compiler does so) unless you turn off these functions.  Either you need to make these functions <code>private</code> and unimplemented, or you use the new <code>C++11</code>&#39;s <code>=delete</code> syntax for those functions.  Read up on the <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">Rule of 3</a>"}], "owner": {"reputation": 3303, "user_id": 2339664, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/64b54fa6ca1be975a3ae0b683d0d8164?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Boy", "link": "https://stackoverflow.com/users/2339664/harry-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470231829, "creation_date": 1470231829, "question_id": 38745402, "link": "https://stackoverflow.com/questions/38745402/scalar-deleting-destructor-crashes-after-program-has-been-running-overnight", "title": "scalar deleting destructor crashes after program has been running overnight", "body": "<p>I have a problem in my C++ program after it has been running for a while I get a crash and the crash dump shows :</p>\n\n<p><strong>msvcr120.dll!free(void * pBlock) Line 51                C</strong></p>\n\n<p><strong>~MyClass::`scalar deleting destructor'(unsigned int)        C++</strong></p>\n\n<p>Here is some brief details of the member variable in question.</p>\n\n<pre><code>//Header file\nBYTE* m_pBuffer;\n\n//Constructor\nm_pBuffer = new BYTE[256 * 1024];\n\n//Destructor\nif( m_pBuffer )\n{\n    delete[] m_pBuffer ;   &lt;-- Crashes here\n}\n</code></pre>\n\n<p>What exactly does the term <strong>scalar deleting destructor</strong> mean? and what could be causing it?</p>\n"}, {"tags": ["c++", "qt", "opengl", "oculus"], "answers": [{"tags": [], "owner": {"reputation": 26262, "user_id": 85306, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4283ac48d7f22118cc4e47a514b3269c?s=128&d=identicon&r=PG", "display_name": "Jherico", "link": "https://stackoverflow.com/users/85306/jherico"}, "is_accepted": false, "score": 0, "last_activity_date": 1470260533, "creation_date": 1470260533, "answer_id": 38754110, "question_id": 38745214, "link": "https://stackoverflow.com/questions/38745214/black-screen-using-oculus-pc-sdk-with-opengl-and-qt/38754110#38754110", "title": "Black screen using Oculus PC SDK with OpenGL and Qt", "body": "<blockquote>\n  <p><code>glClearColor(0., 0., 0., 1.0);</code></p>\n</blockquote>\n\n<p>You should try setting the clear color to something other than black, so you know whether the framebuffer being submitted at all.  If you clear to say 'red' and the HMD is still black, then you know the framebuffer isn't getting there.  If the display is red, but everything you render is missing, then you know that your rendering code is wrong.</p>\n\n<p>Speaking of which, you never actually clear the framebuffer... your example code does not contain <code>glClear</code> anywhere at all.  You just have a comment </p>\n\n<blockquote>\n  <p>// clear the framebuffer</p>\n</blockquote>\n\n<p>but you don't actually do it.  So it's entirely possible that your <code>glDrawElements</code> isn't doing anything because the depth test is failing for every fragment.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7662642, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6b5ae219ec3e15a2db537457c21e6ca8?s=128&d=identicon&r=PG", "display_name": "MeghwarLeb", "link": "https://stackoverflow.com/users/7662642/meghwarleb"}, "is_accepted": false, "score": 0, "last_activity_date": 1488735448, "creation_date": 1488735448, "answer_id": 42611715, "question_id": 38745214, "link": "https://stackoverflow.com/questions/38745214/black-screen-using-oculus-pc-sdk-with-opengl-and-qt/42611715#42611715", "title": "Black screen using Oculus PC SDK with OpenGL and Qt", "body": "<p>If you have no solved this yet, you must set the textures received from GetTextureSwapChainBufferGL as a framebuffer using glFramebufferTexture2D.\nSo you have to call set framebufferTexture2D twice each time, one for each texture id (one for left and one for right). \nCurrently you are drawing nothing to the textures you got from the function and so they remain black and that is what you are getting.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 6672531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3abc739e540fd777a67bf87f5a9f6164?s=128&d=identicon&r=PG&f=1", "display_name": "HelpMepls", "link": "https://stackoverflow.com/users/6672531/helpmepls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1488735448, "creation_date": 1470231308, "question_id": 38745214, "link": "https://stackoverflow.com/questions/38745214/black-screen-using-oculus-pc-sdk-with-opengl-and-qt", "title": "Black screen using Oculus PC SDK with OpenGL and Qt", "body": "<p>I'm trying to make a basic test with the Oculus\nI use the PC SDK 1.6, OpenGL and Qt.</p>\n\n<p>I first began with <a href=\"https://developer.oculus.com/documentation/pcsdk/latest/concepts/dg-render/\" rel=\"nofollow\">https://developer.oculus.com/documentation/pcsdk/latest/concepts/dg-render/</a></p>\n\n<p>Then i lookd at different topic but i cant figure out what i do wrong but especially where are my mistakes..</p>\n\n<p>It seams the initialize part is correct. The Oculus shows the health warning message, but all I see is a black screen once the health warning message goes away. </p>\n\n<p>Here si the code i use :</p>\n\n<p>OculusManager.h </p>\n\n<pre><code>#ifndef OCULUSMANAGER_H\n#define OCULUSMANAGER_H\n\n#include \"main.h\"\n#include &lt;OVR_CAPI_GL.h&gt;\n#include &lt;QtGui/qopengl.h&gt;\n#include &lt;QOpenGLFunctions_4_3_Compatibility&gt;\n\nclass OculusManager : protected QOpenGLFunctions_4_3_Compatibility\n{\npublic:\n    OculusManager();\n    bool initLibOVR();\n    void displayLastError();\n    void run();\n    void shutdown();\n    void destroy();\n\nprivate:\n\n    bool mainLoop(bool value);\n\n    ovrSession session;\n    ovrGraphicsLuid luid;\n    bool isOVRLibLoaded = false;\n    ovrHmdDesc hmdDesc;\n    ovrSizei bufferSize;\n    ovrTextureSwapChain textureSwapChain;\n    ovrLayerEyeFov layer;\n    // Initialize VR structures, filling out description.\n    ovrEyeRenderDesc eyeRenderDesc[2];\n    ovrVector3f      hmdToEyeViewOffset[2];\n    ovrVector3f hmdToEyeOffset[2];\n    double sensorSampleTime;\n    bool isVisible = true;\n    // it needs to be updated each new frame\n    long long frameIndex = 0;\n    // Initialize a default Pose\n    ovrPosef eyeRenderPose[2];\n\n    bool end = false;\n\n    void openglError();\n};\n\n#endif // OCULUSMANAGER_H\n</code></pre>\n\n<p>OculusManager.cpp</p>\n\n<pre><code>#include \"oculusmanager.h\"\n\n\nOculusManager::OculusManager()\n{\n}\n\n\nbool OculusManager::initLibOVR(){\n\n    if(initializeOpenGLFunctions() == false){\n        qDebug() &lt;&lt; \"Impossible to load OpenGL functions\";\n        return false;\n    }\n\n    glEnable(GL_TEXTURE_2D);\n    glEnable(GL_DEPTH_TEST);\n    // Accept fragment if it closer to the camera than the former one\n    glDepthFunc(GL_LESS);\n    glEnable(GL_CULL_FACE);\n\n    glShadeModel(GL_SMOOTH);                        // Enable Smooth Shading\n    glClearDepth(1.0f);                         // Depth Buffer Setup\n    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);          // Really Nice Perspective Calculations\n\n\n    //background color\n    glClearColor(0., 0., 0., 1.0);\n\n\n    if(OVR_FAILURE(ovr_Initialize(nullptr)))\n    {\n        return false;\n    }\n\n\n    if (OVR_FAILURE(ovr_Create(&amp;session, &amp;luid)))\n    {\n        return false;\n    }\n\n    //main code\n\n    hmdDesc = ovr_GetHmdDesc(session);\n\n    ovrSizei recommenedTex0Size = ovr_GetFovTextureSize(session, ovrEye_Left, hmdDesc.DefaultEyeFov[0], 1.0f);\n    ovrSizei recommenedTex1Size = ovr_GetFovTextureSize(session, ovrEye_Right,hmdDesc.DefaultEyeFov[1], 1.0f);\n\n    bufferSize;\n    bufferSize.w  = recommenedTex0Size.w + recommenedTex1Size.w;\n    bufferSize.h = std::max( recommenedTex0Size.h, recommenedTex1Size.h );\n\n\n    ovrTextureSwapChainDesc ovrTextdesc = {};\n    ovrTextdesc.Type = ovrTexture_2D;\n    ovrTextdesc.ArraySize = 1;\n    ovrTextdesc.Format = OVR_FORMAT_R8G8B8A8_UNORM_SRGB;\n    ovrTextdesc.Width = bufferSize.w;\n    ovrTextdesc.Height = bufferSize.h;\n    ovrTextdesc.MipLevels = 1;\n    ovrTextdesc.SampleCount = 1;\n    ovrTextdesc.StaticImage = ovrFalse;\n\n\n\n    if(OVR_SUCCESS(ovr_CreateTextureSwapChainGL(session, &amp;ovrTextdesc, &amp;textureSwapChain)))\n    {\n        int length = 0;\n        if (OVR_FAILURE(ovr_GetTextureSwapChainLength(session, textureSwapChain, &amp;length))){\n            return false;\n        }\n\n        for (int i = 0; i &lt; length; ++i)\n        {\n            GLuint chainTexId;\n            if (OVR_FAILURE(ovr_GetTextureSwapChainBufferGL(session, textureSwapChain, i, &amp;chainTexId))){\n                return false;\n            }\n\n            glBindTexture(GL_TEXTURE_2D, chainTexId);\n\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n\n        }\n\n\n        // Generate frame buffer to render\n        GLuint fboID;\n        glGenFramebuffers(1, &amp;fboID);\n        // Generate depth buffer of the frame buffer\n        GLuint depthBuffID;\n        glGenTextures(1, &amp;depthBuffID);\n        glBindTexture(GL_TEXTURE_2D, depthBuffID);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n        GLenum internalFormat = GL_DEPTH_COMPONENT24;\n        GLenum type = GL_UNSIGNED_INT;\n        glTexImage2D(GL_TEXTURE_2D, 0, internalFormat, bufferSize.w, bufferSize.h, 0, GL_DEPTH_COMPONENT, type, NULL);\n\n\n        // FloorLevel will give tracking poses where the floor height is 0\n        ovr_SetTrackingOriginType(session, ovrTrackingOrigin_FloorLevel);\n\n        eyeRenderDesc[0] = ovr_GetRenderDesc(session, ovrEye_Left, hmdDesc.DefaultEyeFov[0]);\n        eyeRenderDesc[1] = ovr_GetRenderDesc(session, ovrEye_Right, hmdDesc.DefaultEyeFov[1]);\n        hmdToEyeViewOffset[0] = eyeRenderDesc[0].HmdToEyeOffset;\n        hmdToEyeViewOffset[1] = eyeRenderDesc[1].HmdToEyeOffset;\n\n        // Initialize our single full screen Fov layer.\n\n        layer.Header.Type      = ovrLayerType_EyeFov;\n        layer.Header.Flags     = 0;\n        layer.ColorTexture[0]  = textureSwapChain;\n        layer.ColorTexture[1]  = textureSwapChain;\n        layer.Fov[0]           = eyeRenderDesc[0].Fov;\n        layer.Fov[1]           = eyeRenderDesc[1].Fov;\n\n        ovrSizei rectsize;\n        rectsize.w  =  bufferSize.w / 2;\n        rectsize.h =  bufferSize.h;\n\n        ovrVector2i rectPosL;\n        rectPosL.x = 0;\n        rectPosL.y = 0;\n\n        ovrVector2i rectPosR;\n        rectPosR.x = bufferSize.w / 2;\n        rectPosR.y = 0;\n\n        ovrRecti rectLeft, rectRight;\n        rectLeft.Pos = rectPosL;\n        rectLeft.Size = rectsize;\n\n        rectRight.Pos = rectPosR;\n        rectRight.Size = rectsize;\n\n\n        layer.Viewport[0] = rectLeft;\n        layer.Viewport[1] = rectRight;\n        // ld.RenderPose and ld.SensorSampleTime are updated later per frame.\n\n        isOVRLibLoaded = true;\n\n    }\n\n\n    return isOVRLibLoaded;\n\n}\n\n\nvoid OculusManager::run(){\n\n    mainLoop(true);\n}\n\nbool OculusManager::mainLoop(bool value){\n\n\n    // Get both eye poses simultaneously, with IPD offset already included.\n    double displayMidpointSeconds = ovr_GetPredictedDisplayTime(session, 0);\n\n    ovrTrackingState hmdState = ovr_GetTrackingState(session, displayMidpointSeconds, ovrTrue);\n    ovr_CalcEyePoses(hmdState.HeadPose.ThePose, hmdToEyeViewOffset, layer.RenderPose);\n\n\n    openglError();\n\n   // qDebug() &lt;&lt; hmdState.HeadPose.ThePose.Position.x &lt;&lt; hmdState.HeadPose.ThePose.Position.y &lt;&lt; hmdState.HeadPose.ThePose.Position.z;\n\n    // Get texture swap index where we must draw our frame\n    GLuint curTexId;\n    // Get next available index of the texture swap chain\n    int currentIndex = 0;\n    ovr_GetTextureSwapChainCurrentIndex(session, textureSwapChain, &amp;currentIndex);\n    ovr_GetTextureSwapChainBufferGL(session, textureSwapChain, currentIndex, &amp;curTexId);\n\n\n    // Call ovr_GetRenderDesc each frame to get the ovrEyeRenderDesc, as the returned values (e.g. HmdToEyeOffset) may change at runtime.\n    eyeRenderDesc[0] = ovr_GetRenderDesc(session, ovrEye_Left, hmdDesc.DefaultEyeFov[0]);\n    eyeRenderDesc[1] = ovr_GetRenderDesc(session, ovrEye_Right, hmdDesc.DefaultEyeFov[1]);\n    hmdToEyeOffset[0] = eyeRenderDesc[0].HmdToEyeOffset;\n    hmdToEyeOffset[1] = eyeRenderDesc[1].HmdToEyeOffset;\n    // Get eye poses, feeding in correct IPD offset\n    ovr_GetEyePoses(session, frameIndex, ovrTrue, hmdToEyeOffset, eyeRenderPose, &amp;sensorSampleTime);\n\n    if (isVisible)\n    {\n\n        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, 0, 0);\n        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, 0, 0);\n        // Clear the frame buffer\n\n        // Render Scene to Eye Buffers\n        for (int eye = 0; eye &lt; 2; eye++)\n        {\n\n            // Set the left or right vertical half of the buffer as the viewport\n            glViewport(eye == ovrEye_Left ? 0 : bufferSize.w / 2, 0, bufferSize.w / 2, bufferSize.h);\n            glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_SHORT, 0);\n\n        }\n\n        // Do not forget to increment the frameIndex!\n        frameIndex++;\n\n        // Commit the changes to the texture swap chain\n        ovr_CommitTextureSwapChain(session, textureSwapChain);\n    }\n\n\n    layer.Header.Type = ovrLayerType_EyeFov;\n    // Tell to the Oculus compositor that our texture origin is at the bottom left\n    layer.Header.Flags = ovrLayerFlag_TextureOriginAtBottomLeft;   // Because OpenGL | Disable head tracking\n    // Set the Oculus layer eye field of view for each view\n    for (int eye = 0; eye &lt; 2; ++eye)\n    {\n        // Set the color texture as the current swap texture\n        layer.ColorTexture[eye] = textureSwapChain;\n        // Set the viewport as the right or left vertical half part of the color texture\n        ovrRecti rect;\n        rect.Pos.x = eye == ovrEye_Left ? 0 : bufferSize.w / 2;\n        rect.Pos.y = 0;\n        rect.Size.h = bufferSize.h;\n        rect.Size.w = bufferSize.w / 2;\n        layer.Viewport[eye] =rect;\n        // Set the field of view\n        layer.Fov[eye] = hmdDesc.DefaultEyeFov[eye];\n        // Set the pose matrix\n        layer.RenderPose[eye] = eyeRenderPose[eye];\n    }\n\n    layer.SensorSampleTime = sensorSampleTime;\n\n    // Submit frame with one layer we have.\n    ovrLayerHeader* layers = &amp;layer.Header;\n    ovrResult       result = ovr_SubmitFrame(session, 0, nullptr, &amp;layers, 1);\n    if(OVR_FAILURE(result)){\n        qDebug() &lt;&lt; \"ovr_submitFrame failed\";\n    }\n    isVisible = (result == ovrSuccess);\n\n    //TODO if response is lost, destroy everything here\n    //TODO if response is lost, destroy everything here\n    //TODO if response is lost, destroy everything here\n    //TODO if response is lost, destroy everything here\n\n    // This is not really needed for this application but it may be usefull for an more advanced application\n    ovrSessionStatus sessionStatus;\n    ovr_GetSessionStatus(session, &amp;sessionStatus);\n    if (sessionStatus.ShouldRecenter)\n    {\n        qDebug() &lt;&lt; \"Recenter Tracking asked by Session\" ;\n        ovr_RecenterTrackingOrigin(session);\n    }\n\n    return true;\n\n}\n\nvoid OculusManager::openglError(){\n    GLenum error = glGetError();\n    while(error !=0){\n        qDebug() &lt;&lt; \"error gl : \" &lt;&lt; error;\n        error = glGetError();\n    }\n}\n\nvoid OculusManager::displayLastError(){\n    ovrErrorInfo errorInfo;\n    ovr_GetLastErrorInfo(&amp;errorInfo);\n    qDebug() &lt;&lt; \"Oculus Manager error : \" &lt;&lt; errorInfo.ErrorString;\n}\n\nvoid OculusManager::shutdown(){\n    ovr_Shutdown();\n}\n\nvoid OculusManager::destroy(){\n    ovr_Destroy(session);\n}\n</code></pre>\n\n<p>Thx in advance for your help</p>\n\n<p>Possible duplicate but did not helped me :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25291131/black-screen-when-rendering-with-oculus-sdk\">Black Screen when rendering with Oculus SDK</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/35400308/oculus-0-8-sdk-black-screen\">Oculus 0.8 SDK Black Screen</a></p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1470231413, "post_id": 38745184, "comment_id": 64864178, "body": "SOunds like an XY-problem. State what you want to achieve, not just <b>how</b>"}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470231856, "post_id": 38745184, "comment_id": 64864537, "body": "@Olaf, why XY-problem? I guess the OP is looking for a nice implementation of CHECK in those &quot;should print&quot; statements. So we have a test case and can suggest an implementation. Though, it&#39;s a duplicate :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1470232049, "post_id": 38745184, "comment_id": 64864688, "body": "@gavv: The question has the haut-gout of an XY-problem. Without clarifying what I requested we can&#39;t know for sure, though."}, {"owner": {"reputation": 8255, "user_id": 55935, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9dd3e86de462c468aa17e4cea37870e6?s=128&d=identicon&r=PG", "display_name": "Giovanni Funchal", "link": "https://stackoverflow.com/users/55935/giovanni-funchal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470232146, "post_id": 38745184, "comment_id": 64864767, "body": "I think @Olaf means I didn&#39;t specify my motive, I&#39;ll edit it to make it clearer."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 1, "creation_date": 1470232475, "post_id": 38745184, "comment_id": 64865023, "body": "@Giovanni, isn&#39;t <a href=\"http://stackoverflow.com/a/10119699/3169754\"><code>is_set</code></a> macro from the question I linked what you&#39;re looking for?"}, {"owner": {"reputation": 8255, "user_id": 55935, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9dd3e86de462c468aa17e4cea37870e6?s=128&d=identicon&r=PG", "display_name": "Giovanni Funchal", "link": "https://stackoverflow.com/users/55935/giovanni-funchal"}, "edited": false, "score": 1, "creation_date": 1470232944, "post_id": 38745184, "comment_id": 64865409, "body": "Almost, thanks for point it out. I think a combination of is_set and <a href=\"http://stackoverflow.com/a/5465352/55935\">DEFINED</a> does 99% of what I wanted (the case <code>#define macro &quot;&quot;</code> still doesn&#39;t work)."}], "owner": {"reputation": 8255, "user_id": 55935, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9dd3e86de462c468aa17e4cea37870e6?s=128&d=identicon&r=PG", "display_name": "Giovanni Funchal", "link": "https://stackoverflow.com/users/55935/giovanni-funchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "closed_date": 1470232401, "answer_count": 0, "score": 0, "last_activity_date": 1470232289, "creation_date": 1470231251, "last_edit_date": 1470232289, "question_id": 38745184, "link": "https://stackoverflow.com/questions/38745184/check-if-c-preprocessor-macro-defined-in-expression", "closed_reason": "Duplicate", "title": "Check if C preprocessor macro defined in expression", "body": "<p>Motivation: I'm trying to define a template parameter based on whether or not a certain macro is defined. If the macro is defined, the template will select a different specialisation. I could put the whole specialisation in a huge <code>#ifdef</code> but I'm looking for perhaps a simpler way of doing it.</p>\n\n<p>Question: Is there a way to check if a macro is defined in an expression ie without using <code>#ifdef</code>? This is what I mean:</p>\n\n<pre><code>int main()\n{\n    std::cout &lt;&lt; CHECK(macro) &lt;&lt; \" should print 0\\n\";\n#define macro\n    std::cout &lt;&lt; CHECK(macro) &lt;&lt; \" should print 1\\n\";\n#undef macro\n#define macro 1\n    std::cout &lt;&lt; CHECK(macro) &lt;&lt; \" should print 1\\n\";\n#undef macro\n#define macro \"\"\n    std::cout &lt;&lt; CHECK(macro) &lt;&lt; \" should print 1\\n\";\n#undef macro\n    std::cout &lt;&lt; CHECK(macro) &lt;&lt; \" should print 0\\n\";\n}\n</code></pre>\n\n<p>So far I got two options, this does it at runtime:</p>\n\n<pre><code>#define CHECK_HELPER(x, y) (strcmp(#x, y) != 0)\n#define CHECK(x) CHECK_HELPER(x, #x)\n</code></pre>\n\n<p>and this does it at compile-time, but not very nicely:</p>\n\n<pre><code>#define CHECK_HELPER(...) (#__VA_ARGS__[0] == '1' || #__VA_ARGS__[0] == '\\0')\n#define CHECK(...) CHECK_HELPER(__VA_ARGS__)\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470231936, "post_id": 38745369, "comment_id": 64864596, "body": "Thanks for the reply - I have a added my test method in the shared library in the post. Maybe you can give me some more information what to do, based on my example."}, {"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470237813, "post_id": 38745369, "comment_id": 64869230, "body": "So you mean I should be able to call the <code>AndroidRexxStart()</code> function directly from my <code>rexxwrapper.c</code>?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "reply_to_user": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470237990, "post_id": 38745369, "comment_id": 64869358, "body": "Yeah. I mean, that&#39;s an option. It will come down to how you want to organize your code but that&#39;s the idea."}, {"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470238151, "post_id": 38745369, "comment_id": 64869477, "body": "Ok - because if I try that the gradle build throws an error: <code>Error:(12) undefined reference to &#39;AndroidRexxStart&#39;</code> -  <code>Error:Execution failed for task &#39;:app:linkRexxwrapperArmeabi-v7aDebugSharedLibrary&#39;.</code>"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "reply_to_user": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470241672, "post_id": 38745369, "comment_id": 64871868, "body": "Are you including the file with AndroidRexxStart into your JNI file?"}, {"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470242389, "post_id": 38745369, "comment_id": 64872286, "body": "Sorry, I do not understand what you mean. What should I include?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "reply_to_user": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470243026, "post_id": 38745369, "comment_id": 64872678, "body": "Is the <code>AndroidRexxStart()</code> method in the same file as your JNI code? If it&#39;s not then you need to include whatever file it&#39;s in. If it is in the same file then it has to be above where it&#39;s being used."}, {"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470243577, "post_id": 38745369, "comment_id": 64873034, "body": "No, the <code>AndroidRexxStart()</code> is the function in the prebuilt shared library that I want to call - so it is not in my JNI code. Problem is I want to include the *.h file where the method is, but I do not know how. I tried with <code>#include&lt;librexx&#47;rexx.h&gt; </code> and also other options. It always ends up with a build error: <code>Error:(3, 23) librexx&#47;rexx.h: No such file or directory</code>."}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "reply_to_user": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470245239, "post_id": 38745369, "comment_id": 64874011, "body": "Ok, so generall C++ programming. When you&#39;re using a precompiled library you need two things. You need the library, for Android this will be an .so or a .a file and you need the header files. You need to either have them installed somewhere on your system path, tell your compiler where to find them or have them in your project directory. I&#39;m guessing the easiest thing for you would be to copy them into your project directory and include them from there."}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "reply_to_user": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470245396, "post_id": 38745369, "comment_id": 64874095, "body": "If you look at the helloLibs example that comes with the NDK it will show you how to get this set up."}, {"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470245444, "post_id": 38745369, "comment_id": 64874122, "body": "In this moment I am adding the header files - I did not understand that I need the header files additionally to the shared library."}, {"owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "edited": false, "score": 0, "creation_date": 1470246896, "post_id": 38745369, "comment_id": 64874935, "body": "Thank you @CaseyB - I re-structed everything (equal to the helloLibs example) and now it is working."}], "tags": [], "owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "is_accepted": true, "score": 2, "last_activity_date": 1470232274, "last_edit_date": 1470232274, "creation_date": 1470231715, "answer_id": 38745369, "question_id": 38745179, "link": "https://stackoverflow.com/questions/38745179/call-prebuilt-c-shared-library-from-android-with-jni/38745369#38745369", "title": "Call prebuilt C++ shared library from Android with JNI", "body": "<p>You've made a Java wrapper for the library but you also need to make a JNI wrapper for the Java to call. So you'll need JNI methods for each of the library methods you want to call. I don't know what LibRexx is so I don't know what you would want to call but you just need to expose those in JNI so they can be called from Java.</p>\n\n<p>First, you're rexxWrapper should be linking in librexx so you shouldn't need to load it in Java. Second you can just create another JNI method like this:</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_org_oorexx_oorexxforandroid_jniwrapper_RexxWrapper_start(JNIEnv *env, jobject instance) {\n\n    return AndroidRexxStart();\n}\n</code></pre>\n\n<p>Then in your <code>AndroidRexxStart()</code> you would actually call into the librexx to start it.</p>\n\n<p>In Java you'll add:</p>\n\n<pre><code>private native String start();\n</code></pre>\n\n<p>to call the JNI method. The naming of the JNI method is important. It has to match the Java path, class and method name that you want to use.</p>\n"}], "owner": {"reputation": 788, "user_id": 2677458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44405a35ab5eb5d8a89b5818c55af46?s=128&d=identicon&r=PG&f=1", "display_name": "K.E.", "link": "https://stackoverflow.com/users/2677458/k-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "accepted_answer_id": 38745369, "answer_count": 1, "score": 1, "last_activity_date": 1470242570, "creation_date": 1470231245, "last_edit_date": 1470242570, "question_id": 38745179, "link": "https://stackoverflow.com/questions/38745179/call-prebuilt-c-shared-library-from-android-with-jni", "title": "Call prebuilt C++ shared library from Android with JNI", "body": "<p>I want to use a prebuilt C++ library from Android via JNI. Therefore I am working with Android Studio. </p>\n\n<p>I am building the project with com.android.tools.build:gradle-experimental:0.7.0-alpha4 and my build.gradle looks like this:</p>\n\n<pre><code>apply plugin: \"com.android.model.application\"\n\nmodel {\n    repositories {\n        libs(PrebuiltLibraries) {\n            rexxlib {\n                binaries.withType(SharedLibraryBinary) {\n                    sharedLibraryFile = file(\"src/main/jniLibs/armeabi/librexx.so\")\n                }\n            }\n            rexxapilib {\n                binaries.withType(SharedLibraryBinary) {\n                    sharedLibraryFile = file(\"src/main/jniLibs/armeabi/librexxapi.so\")\n                }\n            }\n        }\n    }\n\n\n\n    android {\n        compileSdkVersion 23\n        buildToolsVersion \"23.0.3\"\n\n        defaultConfig {\n            applicationId \"org.oorexx.oorexxforandroid\"\n            minSdkVersion.apiLevel 19\n            targetSdkVersion.apiLevel 23\n            versionCode 1\n            versionName \"1.0\"\n            buildConfigFields {\n                create() {\n                    type \"int\"\n                    name \"VALUE\"\n                    value \"1\"\n                }\n            }\n        }\n\n        ndk {\n            moduleName \"rexxwrapper\"\n        }\n\n        buildTypes {\n            release {\n                minifyEnabled false\n                proguardFiles.add(file(\"proguard-rules.pro\"))\n            }\n        }\n\n        // Configures source set directory.\n        sources {\n            main {\n                java {\n                    source {\n                        srcDir \"src/main/java\"\n                    }\n                }\n                jniLibs {\n                    dependencies {\n                        library \"rexxlib\"\n                        library \"rexxapilib\"\n                    }\n\n                }\n            }\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.3.0'\n    compile 'com.android.support:design:23.3.0'\n}\n</code></pre>\n\n<p>I created a wrapper C library to call the prebuilt library from there.</p>\n\n<pre><code>#include \"org_oorexx_oorexxforandroid_jniwrapper_RexxWrapper.h\"\n#include &lt;jni.h&gt;\n\nJNIEXPORT jstring JNICALL Java_org_oorexx_oorexxforandroid_jniwrapper_RexxWrapper_callrexx(JNIEnv *env, jobject instance) {\n\n    //TODO: call function of prebuilt library librexx.so - What todo?\n\n    return (*env)-&gt;NewStringUTF(env, \"Hello From Jni\");\n}\n</code></pre>\n\n<p>My Java class for the wrapper:</p>\n\n<pre><code>public class RexxWrapper {\n\n    private native String callrexx();\n\n    static public void execute(String argv[]) {\n        RexxWrapper rexxWrapper = new RexxWrapper();\n        System.out.println(\"--&gt; \"+rexxWrapper.callrexx());\n    }\n\n    static {\n        System.loadLibrary(\"rexx\");\n        System.loadLibrary(\"rexxwrapper\");\n    }\n\n}\n</code></pre>\n\n<p>I have created a test-method in my shared library (C++) which looks like this:</p>\n\n<pre><code>int AndroidRexxStart()\n{\n    return 1;\n}\n</code></pre>\n\n<p>Everything is working fine, and I get the response from my wrapper c library. Now I want to call a function <code>AndroidRexxStart()</code> of the prebuilt library <code>librexx.so</code> in my wrapper library and I do not know how to do that. What I have to include and how can I call the method?</p>\n\n<p>EDIT: \nMy Projectstructure:\n<a href=\"https://i.stack.imgur.com/0vc7h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0vc7h.png\" alt=\"enter image description here\"></a></p>\n"}]