[{"tags": ["c++", "char", "concatenation", "command-line-arguments", "strlen"], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 3377592, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2a0f96f915e636dd99ecc10145400c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Ricca", "link": "https://stackoverflow.com/users/3377592/ricca"}, "edited": false, "score": 0, "creation_date": 1441845816, "post_id": 32491123, "comment_id": 52842979, "body": "Quick somewhat related question: if my program call is: <code>myProg.o -a -b foo=bar stack -overflow</code> would <code>optind</code> point to <code>foo=bar</code> still? Or would the <code>-overflow</code> throw that off? I want to be able to call other programs and their args as well, hence the need for concatenation."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 196, "user_id": 3377592, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2a0f96f915e636dd99ecc10145400c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Ricca", "link": "https://stackoverflow.com/users/3377592/ricca"}, "edited": false, "score": 0, "creation_date": 1441846010, "post_id": 32491123, "comment_id": 52843035, "body": "That I do not know.  I was just using <code>optind</code> as the index of the first non switch argument but I have not used it."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1441844526, "creation_date": 1441844526, "answer_id": 32491123, "question_id": 32490887, "link": "https://stackoverflow.com/questions/32490887/best-way-to-concatenate-command-line-args/32491123#32491123", "title": "Best way to concatenate command line args", "body": "<p>You can use a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\"><code>std::string</code></a> and it's <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%2B%3D\" rel=\"nofollow\"><code>operator +=()</code></a> and loop through <code>argv[]</code> and add the parameters to the string.</p>\n\n<pre><code>std::string non_switch;\nfor (int i = optind; i &lt; argc; i++)\n    non_switch += argv[i];\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 3377592, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2a0f96f915e636dd99ecc10145400c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Ricca", "link": "https://stackoverflow.com/users/3377592/ricca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1743, "favorite_count": 0, "accepted_answer_id": 32491123, "answer_count": 1, "score": 0, "last_activity_date": 1441844526, "creation_date": 1441842559, "question_id": 32490887, "link": "https://stackoverflow.com/questions/32490887/best-way-to-concatenate-command-line-args", "title": "Best way to concatenate command line args", "body": "<p>I have <code>optind</code> pointing to my first non-switch argument. There can be any number of arguments total. I need to concatenate the remaining args into a <code>char*</code>. I have a loop that goes from <code>arg[optind]</code> to <code>arg[argc-1]</code> and gets the (length + 1) of each (one for spaces between args and one for <code>'\\0'</code> at the end: <code>totalLen += strlen(arg[i]) + 1</code>. Once I have the length though what is the best route to use to concatenate the args through another loop?</p>\n"}, {"tags": ["c++", "matlab", "mex"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1441842948, "post_id": 32490874, "comment_id": 52842309, "body": "If you get rid of stuff like <code>Xlen = (*(GridSize) + 3)*Vpts;</code>, it gets easier. Apparently, the current pointer-ness is to much for you, and you don&#39;t have any reason to avoid more C++-like things, so... and try valgrind."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1441843118, "post_id": 32490874, "comment_id": 52842352, "body": "And the question is missing some (much?) relevant code. Start with a main."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1441843484, "post_id": 32490874, "comment_id": 52842440, "body": "@deviantfan There is no <code>main</code> in a mex function, <code>mexFunction</code> is the entry point. It&#39;s basically an so/dll that MATLAB calls. That being said, I agree with your assessment that the OP should stop being so pointer happy and try to simplify things. DavidGW, you can run mex functions under a debugger, you might want to give that a try."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1441843611, "post_id": 32490874, "comment_id": 52842470, "body": "<code>mexFunction</code> is MATLAB&#39;s equivalent to <code>main()</code>"}, {"owner": {"reputation": 8079, "user_id": 253771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92acdde55a722e45d3bd0140a63520a2?s=128&d=identicon&r=PG", "display_name": "Ramashalanka", "link": "https://stackoverflow.com/users/253771/ramashalanka"}, "edited": false, "score": 0, "creation_date": 1441848445, "post_id": 32490874, "comment_id": 52843570, "body": "I think this is a fair question and doesn&#39;t deserve the close vote. Memory seems to be unintentionally overwritten. OP: I ran the function with s=t=X=rand(40,30); and I got output of 40,30 right to the end, so you need to provide some idea of the inputs. We don&#39;t want a huge dump, so either get it to fail with something like ones or zeros, or reduce the matrix size to 3x3 or less."}, {"owner": {"reputation": 17, "user_id": 4635218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510e831977c553f97c8ff883bc80a6b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidGW", "link": "https://stackoverflow.com/users/4635218/davidgw"}, "edited": false, "score": 0, "creation_date": 1441850172, "post_id": 32490874, "comment_id": 52843976, "body": "Thanks for the responses so far. In terms of the over pointerisation, I&#39;ve deleted the &#39;Xlen = (*(GridSize) + 3)*Vpts;&#39; line, and am feeding in the Xlen value from the main mexFunction. I&#39;ve also separated GridSize into two non-pointered long ints.  Unfortunately, now the code completely kills Matlab when run, so I&#39;ll have to get it running before I can add much more that will help."}, {"owner": {"reputation": 17, "user_id": 4635218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510e831977c553f97c8ff883bc80a6b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidGW", "link": "https://stackoverflow.com/users/4635218/davidgw"}, "edited": false, "score": 0, "creation_date": 1441850414, "post_id": 32490874, "comment_id": 52844037, "body": "Deviantfan: This is not my first mex file, I have written over a dozen heavily pointered mex files before, so although I&#39;m sure it&#39;s a pointer problem, I&#39;m not completely new to pointers. Also, most of the pointers that are used are for large vectors of variable length, so they can&#39;t really be removed."}, {"owner": {"reputation": 17, "user_id": 4635218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510e831977c553f97c8ff883bc80a6b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidGW", "link": "https://stackoverflow.com/users/4635218/davidgw"}, "edited": false, "score": 1, "creation_date": 1441850468, "post_id": 32490874, "comment_id": 52844048, "body": "Ramashalanka: Thanks for your time in trying to run the code. As I have mentioned, I&#39;ve broken my version of the code in trying to fix it, however &quot;s&quot; and &quot;t&quot; will range between zero and GridSize, not zero and one. When it runs, I&#39;ll repost the code, hopefully with inputs that make it not work."}, {"owner": {"reputation": 17, "user_id": 4635218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510e831977c553f97c8ff883bc80a6b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidGW", "link": "https://stackoverflow.com/users/4635218/davidgw"}, "edited": false, "score": 0, "creation_date": 1441854749, "post_id": 32490874, "comment_id": 52845062, "body": "POSSIBLE ANSWER: After completely tearing apart my code trying to get it running again, I think I&#39;ve finally figured out what the problem is. And it&#39;s because I&#39;m an idiot (or because I thought C++ was slightly smarter than it is...). If you note, I&#39;m writing to &#39;t_frac&#39; and &#39;t_crd_dbl&#39; without malloccing them a single double of memory. I guess I&#39;ll try either malloccing them their memory, or pass the addresses of non-pointers into functions, instead of using pointers here. Assuming I can reassemble my nuked code... :("}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 2, "creation_date": 1441867019, "post_id": 32490874, "comment_id": 52849334, "body": "Why won&#39;t you return a <code>std::pair</code> or <code>boost::tuple</code> or a simple struct from <code>Simple_Separate_Parametrics</code>, instead of pushing outputs via pointers? Why do you pass so much via pointers, not references? What about const-correctness? Why do you have functions that take a bazillion parameters instead of a structure (or a tuple)? Why no RAII? Why do you <code>malloc</code> a simple array of 16 doubles (J)?  This reads like C, not C++. Don&#39;t write C when you got a C++ compiler. Don&#39;t use naked pointers to own data, use <code>std::unique_ptr</code>, but prefer values on stack for small fixed arrays. Uurgh!"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1441875534, "post_id": 32490874, "comment_id": 52854549, "body": "<code>Also, most of the pointers that are used are for large vectors of variable length, so they can&#39;t really be removed.</code> etc.etc.: That&#39;s wrong. As KubaOber said too, you don&#39;t need any raw pointer and malloc here."}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1441867519, "post_id": 32494467, "comment_id": 52849589, "body": "Problem is not &quot;solved&quot; in that the code is still a horrible mess. It should be shorter, easier to read, and much harder to allow you to make such mistakes by design. This is at best bad C code. C-style &quot;out arguments&quot; via pointers are gut-wrenching. A <code>Function_that_Calculates_Variable</code> should return the variable (or a pair/tuple/struct of them) by value. Only if you are to modify arrays passed from matlab&#39;s side you&#39;re forced to scribble over data passed by pointers, and even then you should wrap them up for safe consumption from C++."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441896847, "post_id": 32494467, "comment_id": 52869694, "body": "Please describe the mathematical operation you wish to carry out in the question itself (edit the question). IWhat is a splurface, and a splurface map? What would you like the code to do? I&#39;d like to flesh out the example to actually do something useful. Could you describe what the <code>s, t, X</code> parameters are, etc.?"}], "tags": [], "owner": {"reputation": 17, "user_id": 4635218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510e831977c553f97c8ff883bc80a6b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidGW", "link": "https://stackoverflow.com/users/4635218/davidgw"}, "is_accepted": false, "score": 0, "last_activity_date": 1441865764, "creation_date": 1441865764, "answer_id": 32494467, "question_id": 32490874, "link": "https://stackoverflow.com/questions/32490874/variables-changing-that-should-be-unaffected-memory-overflow/32494467#32494467", "title": "Variables changing that should be unaffected (Memory overflow?)", "body": "<p>The reason issues were being caused was through not using a malloc call after declaring a pointer:</p>\n\n<pre><code>double* Variable;\n*Variable = 0.0;\nFunction_that_Calculates_Variable( Variable );\n</code></pre>\n\n<p>This caused either crashes, or memory overruns. I didn't realise/forgot you had to malloc a pointer to a single value. I therefore replaced it with:</p>\n\n<pre><code>double Variable;\nVariable = 0.0;\nFunction_that_Calculates_Variable( &amp;Variable );\n</code></pre>\n\n<p>which does the same thing, except does not require a malloc call and associated free, while still allowing multiple outputs in this form from the function.</p>\n\n<p>Problem solved! (After far more hours of debugging than I care to admit :P)</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1442037172, "last_edit_date": 1442037172, "creation_date": 1441895905, "answer_id": 32504908, "question_id": 32490874, "link": "https://stackoverflow.com/questions/32490874/variables-changing-that-should-be-unaffected-memory-overflow/32504908#32504908", "title": "Variables changing that should be unaffected (Memory overflow?)", "body": "<p>The mex API, even though available from C++, is really a C API and its direct use makes one's code look like C code. This is not a good place to be in.</p>\n\n<p>So, let's write the code first assuming that nice C++11 mex array wrappers exist.</p>\n\n<p>We start with the parameters to the function. Let's say that <code>DoubleArray</code> and <code>LogicalArray</code> will represent the arrays of a given type and have constructors that initialize them from rhs parameters, or create new ones for lhs parameters. The arrays are simply handles to underlying matlab data, and represent a logical pointer. They would be incrementable to offset their position in relation to underlying data.</p>\n\n<p>We should not use C-style fixed-size arrays, instead using the <code>std::array</code> type.</p>\n\n<pre><code>struct Params {\n   DoubleArray s, t, X, inGridSize;\n   size_t NumPts;\n   std::array&lt;size_t, 2&gt; GridSize;\n   DoubleArray Points, Jacobian;\n   LogicalArray Valid;\n   std::array&lt;double, 16&gt; M;\n\n   Params(mxArray * plhs[], const mxArray * prhs[]) :\n      s(prhs, 0),\n      t(prhs, 1),\n      X(prhs, 2),\n      inGridSize(prhs, 3),\n      NumPts(s.size()),\n      Points(1, NumPts, plhs, 0),\n      Jacobian(NumPts, X.size(), plhs, 1),\n      Valid(NumPts, 1, plhs, 2)\n   {\n      std::copy(inGridSize.begin(), inGridSize.end(), GridSize.begin());\n   }\n};\n</code></pre>\n\n<p>These parameters can then be passed to various functions. They can be copied if we wish to modify any of the array positions.</p>\n\n<p>This is pretty noncontroversial, although one could argue that perhaps the <code>inGridSize</code> is not necessary and we should initialize the <code>GridSize</code> from a temporary <code>DoubleArray</code>.</p>\n\n<p>The additional parameters to the calculation of an individual point can be similarly wrapped in a structure:</p>\n\n<pre><code>struct PointParams {\n   unsigned int Vpts;\n   unsigned int Xlen;\n   std::array&lt;double, 16&gt; J;\n   std::vector&lt;unsigned int&gt; Crds { Xlen };\n   std::array&lt;unsigned int, 16&gt; RelCrds;\n\n   PointParams(const Params &amp; p) :\n      Vpts(p.GridSize[1] + 3),\n      Xlen((p.GridSize[0] + 3)*Vpts)\n   {}\n};\n</code></pre>\n\n<p>Finally, the <code>Simple_Separate_Parametrics</code> function calculates a result of <code>Parametrics</code> type:</p>\n\n<pre><code>struct Parametrics {\n   double t_crd_dbl, t_frac;\n};\n\nParametrics Simple_Separate_Parametrics(double t_full) {\n   Parametrics p;\n   p.t_crd_dbl = floor(t_full);\n   p.t_frac = t_full - p.t_crd_dbl;\n   return p;\n}\n</code></pre>\n\n<p>The <code>Calc_Point_...</code> takes a reference to <code>Params</code> and <code>PointParams</code>:</p>\n\n<pre><code>void Calc_Point_and_XJacobian_On_SplurfaceMap(Params &amp; p, PointParams &amp; pp) {\n   mexPrintf(\"Begin Inner Function %u, %u\\n\", p.GridSize[0], p.GridSize[1]);\n\n   auto pms = Simple_Separate_Parametrics(p.t[0]);\n\n   mexPrintf(\"End Inner Function %u, %u\\n\", p.GridSize[0], p.GridSize[1]);\n}\n</code></pre>\n\n<p>The <code>Points_and_XJacobian_...</code> takes its parameters by value, copying them so that the array pointers can be modified (incremented) within the loop. Since <code>p</code> changes in the loop, each iteration we generate a new <code>PointParams</code> instance based on <code>p</code>.</p>\n\n<pre><code>void Points_and_XJacobian_on_Splurface(Params p) {\n   mexPrintf(\"Begin Outer Function %u, %u\\n\", p.GridSize[0], p.GridSize[1]);\n\n   for (unsigned int n = 0; n &lt; 1; ++n) {//NumPts\n      PointParams pp(p);\n      Calc_Point_and_XJacobian_On_SplurfaceMap(p, pp);\n      p.Points += 1;\n      p.Valid += 1;\n      p.s += 1;\n      p.t += 1;\n   }\n\n   mexPrintf(\"End Outer Function %u, %u\\n\", p.GridSize[0], p.GridSize[1]);\n}\n</code></pre>\n\n<p>The <code>mexFunction</code> checks for proper argument counts, initializes the initial <code>Params</code>, and run the worker function <code>Points_and_...</code>.</p>\n\n<pre><code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) {\n   // [Points, Jacobian, Valid] = Function( s, t, X, GridSize)\n\n   if (nrhs != 4)\n      mexErrMsgTxt(\"Need four input parameters\");\n   if (nlhs != 3)\n      mexErrMsgTxt(\"Need three output parameters\");\n   if (mxGetNumberOfElements(prhs[3]) != 2)\n      mexErrMsgTxt(\"GridSize needs two elements\");\n\n   Params p { plhs, prhs };\n   mexPrintf(\"Begin Mex %u, %u\\n\", p.GridSize[0], p.GridSize[1]);\n   Points_and_XJacobian_on_Splurface(p);\n   mexPrintf(\"End Mex %u, %u\\n\", p.GridSize[0], p.GridSize[1]);\n}\n</code></pre>\n\n<p>You'll notice that none of this code does any explicit memory allocations.</p>\n\n<p>So, how do we implement the magic sauce? Through a generic <code>MxArray</code> class, parametrized by a value-type-specific <code>Traits</code> specialization. It of course can be reused in any mex file.</p>\n\n<p>The array type acts like a C array that knows its bounds. You could easily add bounds checking in the implementation of <code>operator[]</code>. You can also add an offset to the array, shifting the position of the element at 0 index. The <code>size()</code> always returns the number of elements available from the 0 index onward. As you add a positive offset, the <code>size()</code> decreases. Adding a negative offset will increase the <code>size()</code>. The cumulative offset must not be below zero, or the behavior is undefined.</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/mex-32490874\n\n#include &lt;cstddef&gt;\n#include &lt;cstdint&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n\ntemplate &lt;typename T&gt; struct Traits;\n\ntemplate &lt;typename T, class Tr = Traits&lt;T&gt;&gt; class MxArray {\n   const mxArray * m_data;\n   T * m_ptr;\npublic:\n   typedef T * iterator;\n   typedef const T * const_iterator;\n   MxArray(const mxArray * data[], int index) :\n      m_data(Tr::check(data, index)),\n      m_ptr(Tr::ptr(m_data))\n   {}\n   MxArray(int n, int m, mxArray * out[], index) :\n      m_data(out[index] = Tr::create(n, m)),\n      m_ptr(Tr::ptr(out[index]))\n   {}\n   size_t size() const { return mxGetNumberOfElements(m_data) - offset(); }\n   int n_dims() const { return mxGetNumberOfDimensions(m_data); }\n   int dim(int i) const { return mxGetDimensions(m_data)[i]; }\n   inline ptrdiff_t offset() const { return m_ptr - Tr::ptr(m_data); }\n   T operator[](ptrdiff_t i) const { return m_ptr[i]; }\n   T &amp; operator[](ptrdiff_t i) { return m_ptr[i]; }\n   MxArray &amp; operator+=(ptrdiff_t offset) {\n      m_ptr += offset;\n      return *this;\n   }\n   friend MxArray operator+(MxArray lhs, ptrdiff_t offset) {\n      return lhs += offset;\n   }\n   void resetOffset() { m_ptr = Tr::ptr(m_data); }\n   iterator begin() { return m_ptr; }\n   iterator end() { return m_ptr + size(); }\n   const_iterator begin() const { return m_ptr; }\n   const_iterator end() const { return m_ptr + size(); }\n};\n</code></pre>\n\n<p>The traits for <code>double</code> and <code>mxLogical</code> (<em>not <code>bool</code>!</em>) types implement a type check and forward the functionality to relevant mex APIs.</p>\n\n<pre><code>const char kMsgId[] = \"SO:MexExample\";\n\ntemplate &lt;&gt; struct Traits&lt;double&gt; {\n   static const mxArray * check(const mxArray * data[], int index) {\n      if (! mxIsDouble(data[index]))\n         mexErrMsgIdAndTxt(kMsgId, \"Expected real type for input parameter #%d\", index);\n      return data[index];\n   }\n   static double * ptr(const mxArray * data) {\n      return mxGetPr(data);\n   }\n   static mxArray * create(int n, int m) {\n      return mxCreateDoubleMatrix(n, m, mxREAL);\n   }\n};\n\ntemplate &lt;&gt; struct Traits&lt;mxLogical&gt; {\n   static const mxArray * check(const mxArray * data[], int index) {\n      if (! mxIsLogical(data[index]))\n         mexErrMsgIdAndTxt(kMsgId, \"Expected logical type for input parameter #%d\", index);\n      return data[index];\n   }\n   static mxLogical * ptr(const mxArray * data) {\n      return mxGetLogicals(data);\n   }\n   static mxArray * create(int n, int m) {\n      return mxCreateLogicalMatrix(n, m);\n   }\n};\n</code></pre>\n\n<p>Finally, the <code>DoubleArray</code> and <code>LogicalArray</code> are simple type aliases that parametrize <code>MxArray</code> for the needed type.</p>\n\n<pre><code>typedef MxArray&lt;double&gt; DoubleArray;\ntypedef MxArray&lt;mxLogical&gt; LogicalArray;\n</code></pre>\n\n<p>It is undefined behavior to address <code>mxLogical</code> data as if it was <code>bool</code> data, but it's OK to cast between a single <code>mxLogical</code> value and <code>bool</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 4635218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510e831977c553f97c8ff883bc80a6b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidGW", "link": "https://stackoverflow.com/users/4635218/davidgw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442037172, "creation_date": 1441842474, "question_id": 32490874, "link": "https://stackoverflow.com/questions/32490874/variables-changing-that-should-be-unaffected-memory-overflow", "title": "Variables changing that should be unaffected (Memory overflow?)", "body": "<p>I've been wrestling with an issue for hours now, and am at my wit's end.</p>\n\n<p>Effectively, I have functions that take in a number of variables, and outputs others. You know, pretty standard stuff.</p>\n\n<p>The problem is that one of my variables is not changed, yet it becomes messed up. I can only assume that there is a memory overflow into its space somewhere, but I cannot figure out where, why or how.</p>\n\n<p>A highly simplified code is provided below (The full version is around 300 lines, and should calculate points and derivatives of a spline surface 'NURBS' thing). Apologies for the number of unused inputs in the functions (I've disabled and removed much of the code to hopefully help you guys figure out what's wrong).</p>\n\n<p>When it is compiled and run, the screen output is:</p>\n\n<pre><code>Start Mex 40, 30\nOuter Function Part 1 40, 30\nInner Function Part 1 40, 30\nInner Function Part 2 40, 30\nOuter Function Part 2 817645044, 1069852220\nOuter Function Part 3 817645044, 1069852220\nEnd Mex 817645044, 1069852220\n</code></pre>\n\n<p>However the output should obviously be consistent (40, 30).</p>\n\n<p>So I would be extremely grateful if someone could alert me to the reason that I'm an idiot, so I can avoid being an idiot in the future.</p>\n\n<pre><code>void Simple_Separate_Parametrics(double* t_frac, double* t_crd_dbl, double t_full) {\n    *t_crd_dbl = floor((double)t_full);\n    *t_frac = t_full - *t_crd_dbl;\n}\n\n\n\nvoid Calc_Point_and_XJacobian_On_SplurfaceMap(double* P, double* J, bool* Valid, unsigned long* RelCrds, double* s, double* t, double* M, double* X, unsigned long* Crds, unsigned long* GridSize) {\n\n    double *t_frac;\n    double *t_crd;\n\n    mexPrintf(\"Inner Function Part 1 %u, %u\\n\", *(GridSize), *(GridSize+1));\n\n    Simple_Separate_Parametrics(t_frac, t_crd, *t);\n\n    mexPrintf(\"Inner Function Part 2 %u, %u\\n\", *(GridSize), *(GridSize+1));\n}\n\n\n\nvoid Points_and_XJacobian_on_Splurface(double* Points, double* Jacobian, bool* Valid, double* s, double* t, double* M, double* X, unsigned long* GridSize, size_t NumPts) {\n\n    double* J = (double*)malloc(16*sizeof(double));\n    unsigned long n, Xlen, Vpts;//m, \n    Vpts = *(GridSize+1) + 3;\n    Xlen = (*(GridSize) + 3)*Vpts;\n\n\n    unsigned long* Crds    = (unsigned long*)malloc(Xlen*sizeof(unsigned long));\n    unsigned long* RelCrds = (unsigned long*)malloc(16*sizeof(unsigned long));\n\n    mexPrintf(\"Outer Function Part 1 %u, %u\\n\", *(GridSize), *(GridSize+1));\n\n    for (n = 0; n &lt; 1; ++n) {//NumPts\n        Calc_Point_and_XJacobian_On_SplurfaceMap(Points + n, J, Valid + n, RelCrds, s + n, t + n, M, X, Crds, GridSize);\n        mexPrintf(\"Outer Function Part 2 %u, %u\\n\", *(GridSize), *(GridSize+1));\n    }\n\n    mexPrintf(\"Outer Function Part 3 %u, %u\\n\", *(GridSize), *(GridSize+1));\n\n    free(J); free(Crds); free(RelCrds);\n}\n\n\n\nvoid mexFunction( int nlhs, mxArray *plhs[],\n    int nrhs, const mxArray *prhs[])\n{\n\n    // [Points, Jacobian, Valid] = Function( s, t, X, GridSize)\n\n    double *Points, *Jacobian, *s, *t, *X, *M;\n    size_t NumPts, Xlen;\n    unsigned long* GridSize;\n    bool* Valid;\n\n    s   = mxGetPr(prhs[0]);\n    t   = mxGetPr(prhs[1]);\n    X   = mxGetPr(prhs[2]);\n\n    GridSize = (unsigned long*)malloc(2*sizeof(unsigned long));\n    *(GridSize  ) = 40;\n    *(GridSize+1) = 30;\n\n    mexPrintf(\"Start Mex %u, %u\\n\", *GridSize, *(GridSize+1));\n    NumPts   = mxGetN(prhs[0]);\n\n    Xlen = mxGetM(prhs[2])*mxGetN(prhs[2]);\n\n    M = (double*)malloc(16*sizeof(double));\n\n\n    if (nlhs == 3) {\n        plhs[0] = mxCreateDoubleMatrix( 1, NumPts, mxREAL);\n        Points = mxGetPr(plhs[0]);\n\n        plhs[1] = mxCreateDoubleMatrix( NumPts, Xlen, mxREAL);\n        Jacobian = mxGetPr(plhs[1]);\n\n        plhs[2] = mxCreateLogicalMatrix( NumPts, 1);\n        Valid = (bool*)mxGetData(plhs[2]);\n\n        Points_and_XJacobian_on_Splurface(Points, Jacobian, Valid, s, t, M, X, GridSize, NumPts);\n\n    }\n\n    mexPrintf(\"End Mex %u, %u\\n\", *(GridSize), *(GridSize+1));\n\n    free(M); free(GridSize);\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1441844382, "post_id": 32490836, "comment_id": 52842639, "body": "<code>o &lt;&lt; rhs.array_[i][j];</code>"}, {"owner": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "reply_to_user": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1441844580, "post_id": 32490836, "comment_id": 52842693, "body": "Ahh I see, but array_ is a private data member. What should I do instead?"}, {"owner": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "reply_to_user": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1441845259, "post_id": 32490836, "comment_id": 52842860, "body": "It gives an error that array_ is private by the way. This works if I make it public, but I need to keep it private"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "edited": false, "score": 0, "creation_date": 1441849038, "post_id": 32491592, "comment_id": 52843714, "body": "Thanks so much, I&#39;ve never heard of using &lt;&lt;&lt;&gt; but it actually fixed it. I guess I need to find another C++ book"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "edited": false, "score": 0, "creation_date": 1441849188, "post_id": 32491592, "comment_id": 52843754, "body": "It&#39;s actually the <code>operator&lt;&lt;</code> function name combined with the empty template parameter <code>&lt;&gt;</code> that&#39;s used to indicate a fully specialized template. You might want to read the Super-FAQ I linked above before picking up another book--it&#39;s actually rather helpful for newbies, and answers lots of common questions in a conversational format that&#39;s relatively easy to follow."}], "tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 0, "last_activity_date": 1441848270, "creation_date": 1441848270, "answer_id": 32491592, "question_id": 32490836, "link": "https://stackoverflow.com/questions/32490836/overloading-output-stream-to-print-entire-matrix/32491592#32491592", "title": "Overloading output stream to print entire matrix", "body": "<p>Your function signatures don't match:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt; (ostream&amp; o, const matrix&lt;Comparable&gt; &amp; rhs);\n</code></pre>\n\n<p>is not</p>\n\n<pre><code>template &lt;typename Comparable&gt;\nostream&amp; operator&lt;&lt; (ostream&amp; o, matrix&lt;Comparable&gt; &amp; rhs);\n</code></pre>\n\n<p>Notice that one is not a template, and the other is. Also, the first has a const reference argument for <code>rhs</code> and the second has just a reference. This mismatch means the function you define isn't <code>Matrix</code>'s friend, and so can't access the <code>private</code> (or <code>protected</code> members of <code>Matrix</code>)</p>\n\n<p>What you want is to declare a templated function, and then inform the compiler that a single instantiation (say <code>ostream&amp; operator&lt;&lt;(ostream&amp; out, const matrix&lt;int&gt;&amp; val)</code> ) is the single function you want to be friends with <code>matrix&lt;int&gt;</code>. </p>\n\n<p>To do this, you need to declare that you want only a specific version of the function template, and to do <em>that</em> you need to declare the template, and to do <em>that</em> you need to declare the templated class. </p>\n\n<p>Ultimately that whole chain of declarations might look something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// forward declare the class so the compiler knows what's up at the\n// templated operator&lt;&lt; declaration.\ntemplate &lt;typename T&gt;\nclass Foo; \n\n// forward declare the templated operator&lt;&lt; so the compiler knows you're\n// 'friend'ing a specific instantiation of this template in the\n// class definition.\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Foo&lt;T&gt;&amp; value);\n\ntemplate &lt;typename T&gt;\nclass Foo{\n    // declare the instantiation of the operator&lt;&lt; template that shares\n    // T with the class template to be a friend:\n    // operator&lt;&lt;&lt;&gt; can be separated out into operator&lt;&lt; &lt;&gt;\n    friend std::ostream&amp; operator&lt;&lt;&lt;&gt;(std::ostream&amp; out, const Foo&lt;T&gt;&amp; value);\n    int bar_;\npublic:\n    Foo(int bar) : bar_{bar}{}\n};\n\n// now that you know the contents of `Foo&lt;T&gt;`, define the templated operator&lt;&lt;\ntemplate &lt;typename T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Foo&lt;T&gt;&amp; value){\n    return std::cout &lt;&lt; \"Foo: \" &lt;&lt; value.bar_;\n}\n\nint main(){\n    Foo&lt;int&gt;\n        a{2},\n        b{3};\n\n    std::cout &lt;&lt; a &lt;&lt; '\\n' &lt;&lt; b;\n\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ec9da7a9cbdca79a\" rel=\"nofollow\"><strong>Live on Coliru</strong></a></p>\n\n<p>You can read further on Template Friends on the <a href=\"https://isocpp.org/wiki/faq/templates#template-friends\" rel=\"nofollow\">C++ Super-FAQ</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 1342764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M3uJb.jpg?s=128&g=1", "display_name": "IllIdan", "link": "https://stackoverflow.com/users/1342764/illidan"}, "is_accepted": false, "score": 0, "last_activity_date": 1441849543, "creation_date": 1441849543, "answer_id": 32491747, "question_id": 32490836, "link": "https://stackoverflow.com/questions/32490836/overloading-output-stream-to-print-entire-matrix/32491747#32491747", "title": "Overloading output stream to print entire matrix", "body": "<p>You can declare a get function to access array_ instead of making it as an public member;</p>\n"}], "owner": {"reputation": 117, "user_id": 3444650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d4aad59c1d4f259050c891c122026b5?s=128&d=identicon&r=PG&f=1", "display_name": "user3444650", "link": "https://stackoverflow.com/users/3444650/user3444650"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 32491592, "answer_count": 2, "score": 0, "last_activity_date": 1441849543, "creation_date": 1441842257, "question_id": 32490836, "link": "https://stackoverflow.com/questions/32490836/overloading-output-stream-to-print-entire-matrix", "title": "Overloading output stream to print entire matrix", "body": "<p>I'm trying to make &lt;&lt; output an entire matrix which I wrote a template for. Not sure why this isn't working, the error is:</p>\n\n<pre><code> error: no match for 'operator[]' (operand types are 'matrix&lt;int' and 'int')\n candidate is:\n matrix&lt;Comparable&gt; matrix&lt;Comparable&gt;::operator[](matrix&lt;Comparable&gt;&amp;) [with Comparable = int]|\n no known conversion for argument 1 from 'int' to 'matrix&lt;int&gt;&amp;'|\n</code></pre>\n\n<p>which refers to this line: o &lt;&lt; rhs[ i ][ j ].  Am I supposed to overload [ ] as well?</p>\n\n<p>matrix.h:</p>\n\n<pre><code>template &lt;typename Comparable&gt;\nclass matrix\n{\n    private:\n        size_t num_cols_;\n        size_t num_rows_;\n        Comparable **array_;\n\n    public:\n        friend ostream&amp; operator&lt;&lt; (ostream&amp; o, const matrix&lt;Comparable&gt; &amp; rhs);\n        size_t NumRows();\n        size_t NumCols();\n};\n</code></pre>\n\n<p>matrix.cpp:</p>\n\n<pre><code>template &lt;typename Comparable&gt;\nostream&amp; operator&lt;&lt; (ostream&amp; o, matrix&lt;Comparable&gt; &amp; rhs){\n    size_t c = rhs.NumRows();\n    size_t d = rhs.NumCols();\n    for (int i = 0; i &lt; c; i++){\n        for (int j = 0; j &lt; d; j++){\n            o &lt;&lt; rhs[i][j];          //error\n        }\n    }\n}\n\ntemplate &lt;typename Comparable&gt;\nsize_t matrix&lt;Comparable&gt;::NumRows(){\n    return num_rows_;\n}\n\ntemplate &lt;typename Comparable&gt;\nsize_t matrix&lt;Comparable&gt;::NumCols(){\n    return num_cols_;\n}\n</code></pre>\n\n<p>And probably irrelevant but I implemented the matrix like this:</p>\n\n<pre><code>array_ = new Comparable*[num_rows_];\nfor (int i = 0; i &lt; num_rows_; i++){\n    array_[i] = new Comparable[num_cols_];\n</code></pre>\n"}, {"tags": ["c++", "device", "directx-11"], "comments": [{"owner": {"reputation": 3657, "user_id": 2222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d50fbca6a7a8303191c483221abbbf?s=128&d=identicon&r=PG", "display_name": "Jeff Linahan", "link": "https://stackoverflow.com/users/2222/jeff-linahan"}, "edited": false, "score": 0, "creation_date": 1441841386, "post_id": 32490668, "comment_id": 52841948, "body": "Do you have access to the source code?  The swap chain is created at the same time as the device in a call to D3D11CreateDeviceAndSwapChain"}, {"owner": {"reputation": 45, "user_id": 3003544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bk7mU.jpg?s=128&g=1", "display_name": "Zshelley", "link": "https://stackoverflow.com/users/3003544/zshelley"}, "reply_to_user": {"reputation": 3657, "user_id": 2222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d50fbca6a7a8303191c483221abbbf?s=128&d=identicon&r=PG", "display_name": "Jeff Linahan", "link": "https://stackoverflow.com/users/2222/jeff-linahan"}, "edited": false, "score": 0, "creation_date": 1441842073, "post_id": 32490668, "comment_id": 52842109, "body": "No I don&#39;t. I am trying to get access to the swapchain from another program, and I have the device, but cant find a path to the swapchain. Apparently nobody ever thought somebody would need that."}, {"owner": {"reputation": 3657, "user_id": 2222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d50fbca6a7a8303191c483221abbbf?s=128&d=identicon&r=PG", "display_name": "Jeff Linahan", "link": "https://stackoverflow.com/users/2222/jeff-linahan"}, "edited": false, "score": 0, "creation_date": 1441842177, "post_id": 32490668, "comment_id": 52842134, "body": "How did you get the device anyway?"}, {"owner": {"reputation": 45, "user_id": 3003544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bk7mU.jpg?s=128&g=1", "display_name": "Zshelley", "link": "https://stackoverflow.com/users/3003544/zshelley"}, "reply_to_user": {"reputation": 3657, "user_id": 2222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d50fbca6a7a8303191c483221abbbf?s=128&d=identicon&r=PG", "display_name": "Jeff Linahan", "link": "https://stackoverflow.com/users/2222/jeff-linahan"}, "edited": false, "score": 0, "creation_date": 1441842532, "post_id": 32490668, "comment_id": 52842234, "body": "It(unity) provides it via api. Sadly not the device chain."}, {"owner": {"reputation": 45, "user_id": 3003544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bk7mU.jpg?s=128&g=1", "display_name": "Zshelley", "link": "https://stackoverflow.com/users/3003544/zshelley"}, "reply_to_user": {"reputation": 3657, "user_id": 2222, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d50fbca6a7a8303191c483221abbbf?s=128&d=identicon&r=PG", "display_name": "Jeff Linahan", "link": "https://stackoverflow.com/users/2222/jeff-linahan"}, "edited": false, "score": 0, "creation_date": 1441842633, "post_id": 32490668, "comment_id": 52842252, "body": "Basically what I want to do is copy the backbuffer (or share or whatever is fastest) into my own and render that onto my own window (create a copy of the unity&#39;s render output)."}], "answers": [{"tags": [], "owner": {"reputation": 3244, "user_id": 2498598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de08236fe3ba6726fb5f34a6a5bb1aa6?s=128&d=identicon&r=PG", "display_name": "Adam Miles", "link": "https://stackoverflow.com/users/2498598/adam-miles"}, "is_accepted": false, "score": 0, "last_activity_date": 1441974533, "creation_date": 1441974533, "answer_id": 32523555, "question_id": 32490668, "link": "https://stackoverflow.com/questions/32490668/directx11-get-swapchain-of-a-device/32523555#32523555", "title": "DirectX11 Get Swapchain of a Device", "body": "<p>I don't think this is possible. An application could have any number of Swap Chains, one per pane on a UI, one per monitor, etc. How would you know which of the many swap chains that have been created is the one you want?</p>\n"}], "owner": {"reputation": 45, "user_id": 3003544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bk7mU.jpg?s=128&g=1", "display_name": "Zshelley", "link": "https://stackoverflow.com/users/3003544/zshelley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1630, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441974533, "creation_date": 1441841079, "question_id": 32490668, "link": "https://stackoverflow.com/questions/32490668/directx11-get-swapchain-of-a-device", "title": "DirectX11 Get Swapchain of a Device", "body": "<p>I need the swapchain of a program so I can access it's backbuffer, but I can only get the device. Is there a way to get the swapchain from a device?</p>\n"}, {"tags": ["c++", "yaml", "yaml-cpp"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2566343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c0e1f8cabd7d85f691782e8d845d9d?s=128&d=identicon&r=PG", "display_name": "user2566343", "link": "https://stackoverflow.com/users/2566343/user2566343"}, "edited": false, "score": 0, "creation_date": 1441912469, "post_id": 32490885, "comment_id": 52878900, "body": "Thanks for the answer! That was what I was looking. But know I have a different problem, that I&#39;m sure you can help me with..  Doing this:  \tfor (YAML::Node tipo : tipos) {  \t\ttry { \t\t\tname = tipo[&quot;nombre&quot;].as&lt;string&gt;(); \t\t} catch (YAML::Exception&amp; yamlException) { \t\t\tname = &quot;pepe&quot;; \t\t}  it always enters via the &quot;catch&quot; part.. And doesn&#39;t read the value from the file. Do you know what can be?   I left you the code well indented edited on the main question."}], "tags": [], "owner": {"reputation": 29797, "user_id": 112, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8cff214f16c7c8e73244a8ed8dea7e0e?s=128&d=identicon&r=PG", "display_name": "Jesse Beder", "link": "https://stackoverflow.com/users/112/jesse-beder"}, "is_accepted": true, "score": 1, "last_activity_date": 1441842549, "creation_date": 1441842549, "answer_id": 32490885, "question_id": 32490418, "link": "https://stackoverflow.com/questions/32490418/iterate-in-yaml/32490885#32490885", "title": "Iterate in YAML", "body": "<p>It looks like you want <code>Tipos</code> to be a sequence of maps, not a map:</p>\n\n<pre><code>Configuracion:\n  vel_personaje: 3\n  merge_scroll: 30\n\n\nTipos:\n\n  - nombre: arbol\n    imagen: img/tree\n    ancho_base: 2\n    alto_base: 2\n    pixel_ref_x: 30\n    pixel_ref_y: 40\n    fps: 10\n    delay: 5\n\n  - nombre: casa\n    imagen: img/house\n\n  - nombre: auto\n    imagen: img/tree\n    ancho_base: 2\n    alto_base: 2\n</code></pre>\n\n<p>The, you can iterate like:</p>\n\n<pre><code>for (YAML::Node tipo : tipos) {\n  // handle tipo\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 2566343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c0e1f8cabd7d85f691782e8d845d9d?s=128&d=identicon&r=PG", "display_name": "user2566343", "link": "https://stackoverflow.com/users/2566343/user2566343"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 0, "accepted_answer_id": 32490885, "answer_count": 1, "score": 2, "last_activity_date": 1441912593, "creation_date": 1441839315, "last_edit_date": 1441912593, "question_id": 32490418, "link": "https://stackoverflow.com/questions/32490418/iterate-in-yaml", "title": "Iterate in YAML", "body": "<p>I have the following YAML:</p>\n\n<pre><code>Configuracion:\n  vel_personaje: 3\n  merge_scroll: 30\n\n\nTipos:\n    nombre: arbol\n    imagen: img/tree\n    ancho_base: 2\n    alto_base: 2\n    pixel_ref_x: 30\n    pixel_ref_y: 40\n    fps: 10\n    delay: 5\n\n    nombre: casa\n    imagen: img/house\n\n    nombre: auto\n    imagen: img/tree\n    ancho_base: 2\n    alto_base: 2\n</code></pre>\n\n<p>The thing is that i can have as many \"Tipos\" as I want, but sometimes they have 8 parameters, sometimes just 2, or any number in between those two. I'm trying to figure out how to read those values with yaml-cpp, but I'm not being able to do it. I tried the following, but with no luck.</p>\n\n<pre><code>while (contador &lt; tipos_size){\n\n    try {\n        name = tipos[\"nombre\"].as&lt;string&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        name = \"pepe\";\n    }\n\n    try {\n        imagen = tipos[\"imagen\"].as&lt;string&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        imagen = \"img/def\";\n    }\n\n    try {\n        ancho_base = tipos[\"ancho_base\"].as&lt;int&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        ancho_base = 1;\n    }\n\n    try {\n        alto_base = tipos[\"alto_base\"].as&lt;int&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        alto_base = 1;\n    }\n\n    try {\n        pixel_ref_x = tipos[\"pixel_ref_x\"].as&lt;int&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        pixel_ref_x = 10;\n    }\n\n    try {\n        pixel_ref_y = tipos[\"pixel_ref_y\"].as&lt;int&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        pixel_ref_y = 10;\n    }\n\n    try {\n        fps = tipos[\"fps\"].as&lt;int&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        fps = 24;\n    }\n\n    try {\n        delay = tipos[\"delay\"].as&lt;int&gt;();\n        contador++;\n    } catch (YAML::Exception&amp; yamlException) {\n        delay = 100;\n    }\n</code></pre>\n\n<p>I will appreciate any help. Thanks!</p>\n\n<p>EDIT CODE:</p>\n\n<pre><code>    for (YAML::Node tipo : tipos) {\n\n    try {\n        name = tipo[\"nombre\"].as&lt;string&gt;();\n    } catch (YAML::Exception&amp; yamlException) {\n        name = \"pepe\";\n    }\n</code></pre>\n"}, {"tags": ["c++", "maps"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1441838397, "post_id": 32490244, "comment_id": 52841102, "body": "Use a reference (<code>map&lt;unsigned short, unsigned short&gt;&amp; firstMap</code>) if you don&#39;t want a copy, that simple."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1441838428, "post_id": 32490244, "comment_id": 52841119, "body": "And <code>const &amp;</code> if you do not want to modify the map."}], "answers": [{"tags": [], "owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "is_accepted": true, "score": 3, "last_activity_date": 1441838439, "creation_date": 1441838439, "answer_id": 32490285, "question_id": 32490244, "link": "https://stackoverflow.com/questions/32490244/map-object-is-copied-during-method-call/32490285#32490285", "title": "Map object is copied during method call", "body": "<p>I think you might want to pass the maps by reference rather than by value</p>\n\n<pre><code>void Function(int* integer, map&lt;unsigned short, unsigned short&gt;&amp; firstMap, map&lt;int, unsigned char&gt;&amp; secondMap);\n</code></pre>\n\n<p>Notice the addition of the '&amp;'.</p>\n\n<p>An additional feature of C++11 that you might be interested in is <a href=\"http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html\" rel=\"nofollow\">moving in place</a> (if the variables are only used temporarily).</p>\n"}], "owner": {"reputation": 374, "user_id": 3761097, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9964803bcc254021cb999c27cac92ebb?s=128&d=identicon&r=PG&f=1", "display_name": "Slack Groverglow", "link": "https://stackoverflow.com/users/3761097/slack-groverglow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 32490285, "answer_count": 1, "score": 0, "last_activity_date": 1441838439, "creation_date": 1441838238, "question_id": 32490244, "link": "https://stackoverflow.com/questions/32490244/map-object-is-copied-during-method-call", "title": "Map object is copied during method call", "body": "<p>For function:</p>\n\n<pre><code>void Function(int* integer, map&lt;unsigned short, unsigned short&gt; firstMap, map&lt;int, unsigned char&gt; secondMap);\n</code></pre>\n\n<p>Whenever I call it from another class like so...</p>\n\n<pre><code>Object-&gt;Function(integer, firstMap, secondMap);\n</code></pre>\n\n<p>A call is made to </p>\n\n<pre><code>std::_Tree&lt;std::_Tmap_traits&lt;int,unsigned char,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,unsigned char&gt; &gt;,0&gt; &gt;::_Tree&lt;std::_Tmap_traits&lt;int,unsigned char,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,unsigned char&gt; &gt;,0&gt; &gt; \n</code></pre>\n\n<p>stepping into xtree the method being called is:</p>\n\n<pre><code>_Tree(const _Myt&amp; _Right)\n    : _Mybase(_Right.key_comp(), _Right.get_allocator())\n    {   // construct tree by copying _Right\n    _Init();\n    _TRY_BEGIN\n    _Copy(_Right);\n    _CATCH_ALL\n    _Tidy();\n    _RERAISE;\n    _CATCH_END\n    }\n</code></pre>\n\n<p>What is this doing? Why is it being called? Are the maps being copied? Using very sleepy I was able to find that 20% of my cycle time is used up by this call.</p>\n"}, {"tags": ["c++", "templates", "c++11", "overload-resolution"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441838082, "post_id": 32490128, "comment_id": 52840998, "body": "what exactly do you want to be able to do? you want to somehow disambiguate these definitions? what exactly does it mean &quot;call 3 functions without commenting them?&quot;"}, {"owner": {"reputation": 305, "user_id": 5178497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f59c809fdba5fd4a031bb8102a7a7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jagan Arikuti", "link": "https://stackoverflow.com/users/5178497/jagan-arikuti"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441838237, "post_id": 32490128, "comment_id": 52841049, "body": "@Chris Beck I want to disambiguate these 3 functions and want to understand the difference between them"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1441838709, "post_id": 32490128, "comment_id": 52841211, "body": "Did you try compiling before posting the code? <code>print_type</code> is <code>private</code>, once I fix that, I don&#39;t have to comment anything out. So I don&#39;t understand what you&#39;re asking."}, {"owner": {"reputation": 305, "user_id": 5178497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f59c809fdba5fd4a031bb8102a7a7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jagan Arikuti", "link": "https://stackoverflow.com/users/5178497/jagan-arikuti"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1441839190, "post_id": 32490128, "comment_id": 52841352, "body": "@Praetorian sorry it&#39;s typo mistake,  try executing the above with below test cases 1. don&#39;t comment any function  2. comment 1 fun and run 3. comment 1,2 and run"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1441840474, "post_id": 32490128, "comment_id": 52841712, "body": "Okay, I think you&#39;re asking about <i>partial ordering of function templates</i>, you should be able to find more information about that on SO. The reason for 1. is that the first version of <code>fun</code> is the most specialized for the arguments you&#39;re passing in <code>main</code>. You can call the other versions by either explicitly specifying the template arguments, or by using different types - <a href=\"http://coliru.stacked-crooked.com/a/e406a86df64b4118\" rel=\"nofollow noreferrer\">example</a>"}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1441840506, "post_id": 32490128, "comment_id": 52841723, "body": "My guess is that the compiler determines that it doesn&#39;t need to compile fun2 or fun3, so it doesn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1441845430, "creation_date": 1441845430, "answer_id": 32491226, "question_id": 32490128, "link": "https://stackoverflow.com/questions/32490128/template-function-overloading-with-template-type-parameter-list/32491226#32491226", "title": "template function overloading with template type-parameter-list", "body": "<p>Let's take a look at our three functions:</p>\n\n<pre><code>template &lt;typename T&gt; void fun(Demo&lt;T&gt; );                           // (1)\ntemplate &lt;typename T, typename D&gt; void fun(D );                     // (2)\ntemplate &lt;typename T, template &lt;typename&gt; class D&gt; void fun(D&lt;T&gt; ); // (3)\n</code></pre>\n\n<p>Let's consider the second. <code>D</code> will be deduced from the first argument, but <code>T</code> does not appear in any of the function parameters - it is a <em>non-deduced context</em>. As such, it must be specified explicitly by the caller in order to be considered. You do not specify it, so it's a deduction failure and is thrown out of the overload set.</p>\n\n<p>Now (1) and (3) are both viable candidates for arguments of type <code>Demo&lt;int&gt;</code> and <code>Demo&lt;float&gt;</code>. In both cases, the two functions take identical arguments that are exact matches for the caller and are both function templates - so the last tiebreaker is to consider which function template is <em>more specialized</em> (this is also called function template partial ordering). (1) can <em>only</em> accept types that look like <code>Demo&lt;T&gt;</code>. (3) can accept <code>Demo&lt;T&gt;</code> but also <code>OtherTemplate&lt;T&gt;</code> or <code>YetAnotherClass&lt;T&gt;</code>. It's more generic - so we prefer to call (1). The rules for this are pretty complicated, but you can do more searching if you're interested. A simpler example might be:</p>\n\n<pre><code>template &lt;typename T&gt; void foo(T );  // (4)\ntemplate &lt;typename T&gt; void foo(T* ); // (5)\nfoo(new int(42)); \n</code></pre>\n\n<p>Both candidates are viable, (4) matches with <code>T = int*</code> and (5) matches with <code>T = int</code>. But (4) matches <em>anything</em> whereas (5) only matches pointers, which makes it more specialized and thus the best viable candidate. </p>\n\n<p>If you comment out (2), nothing changes - it wasn't a viable candidate anyway. But if you comment out (1), then we call (3) because (3) becomes the only viable candidate (and thus, trivially, the best viable candidate).</p>\n"}], "owner": {"reputation": 305, "user_id": 5178497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f59c809fdba5fd4a031bb8102a7a7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jagan Arikuti", "link": "https://stackoverflow.com/users/5178497/jagan-arikuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441845541, "creation_date": 1441837624, "last_edit_date": 1441845541, "question_id": 32490128, "link": "https://stackoverflow.com/questions/32490128/template-function-overloading-with-template-type-parameter-list", "title": "template function overloading with template type-parameter-list", "body": "<p>Please help to understand below 3 different syntax's</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nclass Demo {\npublic:\n   void print_type(){\n        if(is_same&lt;int,T&gt;())\n                cout &lt;&lt; \"Int type\" &lt;&lt; endl;\n        if(is_same&lt;float,T&gt;())\n                cout &lt;&lt; \"float type\" &lt;&lt; endl;\n\n    }\n };\n\n//1.   fun\ntemplate&lt;typename T&gt;   \nvoid fun(Demo&lt;T&gt; a){\n    cout &lt;&lt; \"In &lt;T&gt;fun(Demo&lt;T&gt;)\" &lt;&lt;endl;\n    a.print_type();\n}\n\n//2. fun\ntemplate&lt;typename T=int,class D=Demo&lt;T&gt; &gt;\nvoid fun(D a){\n    cout &lt;&lt; \"In &lt;T,class&gt;fun(Demo)\" &lt;&lt;endl;\n    a.print_type();\n}\n// 3. fun\ntemplate&lt;typename T=int,template &lt;typename T&gt; class D=Demo &gt;\nvoid fun(D&lt;T&gt; a){\n    cout &lt;&lt; \"In &lt;T,template&gt;fun(Demo&lt;T&gt;)\" &lt;&lt;endl;\n}\nint main()\n{\n   fun(Demo&lt;int&gt;());\n   fun(Demo&lt;float&gt;());\n   return 0;\n}\n</code></pre>\n\n<ol>\n<li>the function calls in <code>main</code> are calling the first version of <code>fun</code> </li>\n<li>if I comment out any two definitions of <code>fun</code>, the third one is called</li>\n</ol>\n\n<p>What is the difference between the three <code>fun</code> definitions? How can I call all 3 without commenting out any of them?</p>\n"}, {"tags": ["c++", "bulletphysics"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441840094, "post_id": 32490120, "comment_id": 52841614, "body": "You should transform the pivot point to the origin, then rotate, then apply the reverse transform."}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 0, "creation_date": 1441915960, "post_id": 32490120, "comment_id": 52880709, "body": "I&#39;ve eddited my answer."}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 0, "creation_date": 1442001033, "post_id": 32490120, "comment_id": 52920348, "body": "For me both fragments of code work exactly the same assuming that offsetToPivot was initially set to <code>btVector3(0.0, 2.0, 0.0)</code>. If it was set to <code>btVector3(-2.0, 0.0, 0.0);</code> it obvously wont work, because you try to rotate point around the axis on which it lies, which of course leaves it in the same place."}], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441909364, "post_id": 32490645, "comment_id": 52877130, "body": "Thank you for the reply, but I&#39;m not entirely sure what you mean. Shouldn&#39;t invRot be the same rotation that was applied to the rigidBody (there is a btVector3 now)? I tried using this code but it&#39;s causing the rigidbody to rotate on it&#39;s center of mass while moving up and down. Does the rigidbody have to have a height of 0 for this to work?"}, {"owner": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441997304, "post_id": 32490645, "comment_id": 52918514, "body": "Thank you for the update. I understand what you&#39;re doing now, but I still don&#39;t think the code is quite right. I printed out invTrans and it appears to be the same as bt-&gt;offsetToPivot; so for some reason invRot didn&#39;t get applied properly."}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "reply_to_user": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441998310, "post_id": 32490645, "comment_id": 52919021, "body": "@Jaitnium you know... I can&#39;t run this code anywhere so it is written from my mind and there is no way for me to check it. If you understand the approach, you can at least try to fix it on your own. In what line do you print those values? Do you see the line <code>btPhys-&gt;offsetToPivot = invTrans;</code>? After this line, they should be equal. What is the behavior of your RigidBody? What initial value did you assign to <code>offsetToPivot</code>? What is the initial <code>WorldTransform</code> when you start rotating? Have you tried using debugger as I advised you?"}, {"owner": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441998987, "post_id": 32490645, "comment_id": 52919397, "body": "bt-&gt;offsetToPivot is the same as invTrans after the line: &quot;btVector3 invTrans = invRot * btPhys-&gt;offsetToPivot;&quot; The behaviour is that the rigidbody is still spinning on it&#39;s center of mass."}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "reply_to_user": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441999208, "post_id": 32490645, "comment_id": 52919511, "body": "@Jaitnium And what is the initial value of <code>btPhys-&gt;offsetToPivot</code>? Do you even set it anywhere? And the position? How do you imagine anybody can help you if you don&#39;t provide crucial information? Actually I&#39;ve checked this line and it definitely sets <code>invTrans</code> into other value than <code>offsetToPivot</code>. One more question... What does your function degreesToRads return?"}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "reply_to_user": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441999544, "post_id": 32490645, "comment_id": 52919666, "body": "@Jaitnium Can you post this code in your question. This way I can&#39;t read it at all..."}, {"owner": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1441999923, "post_id": 32490645, "comment_id": 52919850, "body": "I set btPhys-&gt;offset to btVector3(-2.0, 0.0, 0.0) prior to the loop. degreesToRads returns -0.017444 (or the actual code is : &quot;   return (3.14f * degrees)/180.0f;&quot;"}, {"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "reply_to_user": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1442000243, "post_id": 32490645, "comment_id": 52920004, "body": "@Jaitnium Please check my last edit. I have no idea why you don&#39;t obtain the same result... Something must be wrong somewhere else."}, {"owner": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "edited": false, "score": 0, "creation_date": 1442001708, "post_id": 32490645, "comment_id": 52920663, "body": "I figured out the problem! I was trying to rotate on the x axis instead of the y. The values weren&#39;t changing because I was trying to rotate the offsetToPivot vector (which is lying on the x-axis -2, 0, 0) with respect to the x-axis."}], "tags": [], "owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "is_accepted": true, "score": 1, "last_activity_date": 1442000156, "last_edit_date": 1442000156, "creation_date": 1441840919, "answer_id": 32490645, "question_id": 32490120, "link": "https://stackoverflow.com/questions/32490120/rotating-a-rigidbody-around-a-pivot-point/32490645#32490645", "title": "Rotating a RigidBody around a pivot point", "body": "<p>This method actually works, you're just applying it incorrectly. Your second translation is performed along world axis but you have rotated the object, so you have to translate it back along the rotated vector.</p>\n\n<p>Correct code should look more or less like this:</p>\n\n<pre><code>btMatrix3x3 orn = btPhys-&gt;getWorldTransform().getBasis();   \nbtQuaternion quat;\norn.getRotation(quat);\nbtVector3 axis = quat.getAxis();\n\n//Move rigidbody 2 units along its axis to the origin\nbtPhys-&gt;translate(btVector3(-2.0 * axis.getX(), 0.0, -2.0 * axis.getZ()));\n\n//Rotate the rigidbody by 1 degree on its center of mass\norn *= btMatrix3x3(btQuaternion( btVector3(1, 0, 0), btScalar(degreesToRads(-1))));\nbtPhys-&gt;getWorldTransform().setBasis(orn);  \n\n//Get rotation matrix\nbtTransform invRot(btQuaternion(btVector3(1, 0, 0), btScalar(degreesToRads(-1))),btVector3(0,0,0));\n//Rotate your first translation vector with the matrix\nbtVector3 invTrans(-2.0 * axis.getX(), 0.0, -2.0 * axis.getZ());\ninvTrans = invRot * invTrans;\n\n//Update axis variable to apply transform on\norn.getRotation(quat);\naxis = quat.getAxis();\n\n//Translate back by rotated vector\nbtPhys-&gt;translate(-invTrans); \n</code></pre>\n\n<p>I'm not sure if the rotation shouldn't be with minus (I can't check it right now) but you can easily try both.</p>\n\n<p>EDIT.</p>\n\n<p>Ok, so you forgot to mention that you perform a continuous rotation instead of a single one. This procedure is correct for a single rotation around pivot (eg. 30 degrees rotation). I've looked into your code once more and I understand that you try to perform your first translation along local x and z-axis. However it is not what happens. In this line:</p>\n\n<pre><code>btVector3 axis = quat.getAxis();\n</code></pre>\n\n<p>the variable axis is a unit vector representing the axis around which your object is rotated. It is NOT its coordinate system. I haven't noticed this part before. Quaternions are tricky and you should read more about them because many people missuse them.</p>\n\n<p>A solution that will work in a continuous case is to store the last translation (from center of mass to pivot - in my example it is represented by invTrans) in your object and use it to perform the first translation, then rotate it in the same way it is done, and use it to move to the right position.</p>\n\n<p>The corrected code will look like this:</p>\n\n<pre><code>btMatrix3x3 orn = btPhys-&gt;getWorldTransform().getBasis();   \nbtQuaternion quat;\norn.getRotation(quat);\n\n//Move rigidbody 2 units along its axis to the origin\nbtPhys-&gt;translate(btPhys-&gt;offsetToPivot);\n\n//Rotate the rigidbody by 1 degree on its center of mass\norn *= btMatrix3x3(btQuaternion( btVector3(1, 0, 0), btScalar(degreesToRads(-1))));\nbtPhys-&gt;getWorldTransform().setBasis(orn);  \n\n//Get rotation matrix\nbtTransform invRot(btQuaternion(btVector3(1, 0, 0), btScalar(degreesToRads(-1))),btVector3(0,0,0));\n//Rotate your first translation vector with the matrix\nbtVector3 invTrans = invRot * btPhys-&gt;offsetToPivot;\n\n//Update axis variable to apply transform on\norn.getRotation(quat);\naxis = quat.getAxis();\n\n//Translate back by rotated vector\nbtPhys-&gt;translate(-invTrans); \nbtPhys-&gt;offsetToPivot = invTrans;\n</code></pre>\n\n<p>However before starting this whole procedure you have to set offsetToPivot into its position relative to the center of mass.</p>\n\n<p>I have an impression that the main source of your problems is the lack of understanding of linear algebra and basic spatial transformations. If you are planning to continue in this field, I strongly recommend reading into this topic. Also drawing your problem on paper really helps.</p>\n\n<p>EDIT2.</p>\n\n<p>Ok, I've tried your code:</p>\n\n<pre><code>btVector3 temp = vec3(0,2,0);\nbtTransform invRot(btQuaternion(btVector3(1, 0, 0), btScalar(-0.017453f)),btVector3(0,0,0));\ntemp = invRot * temp;\n</code></pre>\n\n<p>After this, <code>temp</code> is equal to <code>{0.000000000, 1.99969542, -0.0349042267}</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 0, "creation_date": 1441953051, "post_id": 32513605, "comment_id": 52892054, "body": "So what&#39;s the point in using Bullet then? Btw. your transformation only works to rotate a <code>Point</code> in a 2D plane, while the question is to rotate a <code>Rigid Body</code> around the 3D axis. It is a little bit more complex than that. Even if you scale it to a 3D space (which is painful), you still calculate only the position of the body, but where is the orientation?"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 878, "user_id": 5153277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248e3e20233de52d4cdd3c0293fb7912?s=128&d=identicon&r=PG&f=1", "display_name": "Estiny", "link": "https://stackoverflow.com/users/5153277/estiny"}, "edited": false, "score": 0, "creation_date": 1442001193, "post_id": 32513605, "comment_id": 52920426, "body": "@Estiny you are right. I&#39;ll update the answer to match the question requirements, apologies!"}], "tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 1, "last_activity_date": 1441932269, "last_edit_date": 1495541969, "creation_date": 1441930862, "answer_id": 32513605, "question_id": 32490120, "link": "https://stackoverflow.com/questions/32490120/rotating-a-rigidbody-around-a-pivot-point/32513605#32513605", "title": "Rotating a RigidBody around a pivot point", "body": "<p>In the below function, these transformations perform the three steps you've described:</p>\n\n<pre><code>int x = cos(angRads) * (initial.x - axisOfRotation.x) - sin(angRads) * (initial.y - axisOfRotation.y) + axisOfRotation.x;      \nint y = sin(angRads) * (initial.x - axisOfRotation.x) + cos(angRads) * (initial.y - axisOfRotation.y) + axisOfRotation.y;\n</code></pre>\n\n<p>namely:</p>\n\n<blockquote>\n  <p>Step 1:Transform the rigidbody to the origin.</p>\n</blockquote>\n\n<pre><code>    initial.x - axisOfRotation.x\n    initial.y - axisOfRotation.y\n</code></pre>\n\n<blockquote>\n  <p>Step 2:Rotate the rigidbody on its center of mass.</p>\n</blockquote>\n\n<pre><code>    cos(angRads) * initial.x - sin(angRads) * initial.y\n    sin(angRads) * initial.x + cos(angRads) * initial.y \n</code></pre>\n\n<blockquote>\n  <p>Step 3:Transform the rigidbody off of the origin.</p>\n</blockquote>\n\n<pre><code>    +axisOfRotation.x;\n    +axisOfRotation.y;\n</code></pre>\n\n<p>Here is a recursive function that performs exactly what you need and returns\nall the consecutively rotated points in a vector: (use it as a benchmark)</p>\n\n<pre><code>rotateCoordinate(vector&lt;Point&gt;&amp; rotated, Point&amp; axisOfRotation, Point initial, \n                            float angRads, int numberOfRotations){\n    // base case: when all rotations performed return vector holding the rotated points\n    if(numberOfRotations &lt;= 0) return;\n    else{\n        // apply transformation on the initial point\n        int x = cos(angRads) * (initial.x - axisOfRotation.x) - sin(angRads) * (initial.y - axisOfRotation.y) + axisOfRotation.x;\n        int y = sin(angRads) * (initial.x - axisOfRotation.x) + cos(angRads) * (initial.y - axisOfRotation.y) + axisOfRotation.y;\n        // save the result\n        rotated.push_back(Point(x, y));\n        // call the same function this time on the rotated point and decremented number of rotations\n        rotateCoordinate(rotated, axisOfRotation, Point(x,y), angRads, numberOfRotations -1);\n    }\n}\n</code></pre>\n\n<p>where <code>Point</code> is:</p>\n\n<pre><code>struct Point {\n    int x, y;\n    Point(int xx, int yy) : x(xx), y(yy) { }\n    Point() :x(0), y(0) { }\n};\n</code></pre>\n\n<p>For further reading that explains the math behind it <a href=\"https://stackoverflow.com/questions/2259476/rotating-a-point-about-another-point-2d/32376643#32376643\">here</a>.</p>\n"}], "owner": {"reputation": 529, "user_id": 4557167, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b400a8743eabd4b771d18f412c663877?s=128&d=identicon&r=PG&f=1", "display_name": "Jaitnium", "link": "https://stackoverflow.com/users/4557167/jaitnium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 1, "accepted_answer_id": 32490645, "answer_count": 2, "score": 3, "last_activity_date": 1473876498, "creation_date": 1441837560, "last_edit_date": 1473876498, "question_id": 32490120, "link": "https://stackoverflow.com/questions/32490120/rotating-a-rigidbody-around-a-pivot-point", "title": "Rotating a RigidBody around a pivot point", "body": "<p>I'm trying to rotate a rigidbody around a pivot point (in this case the origin), rather than its center of mass.</p>\n\n<p>I had a suggestion to apply three transformations:</p>\n\n<ol>\n<li><p>Transform the rigidbody to the origin</p></li>\n<li><p>Rotate the rigidbody on its center of mass</p></li>\n<li><p>Transform the rigidbody off of the origin.</p></li>\n</ol>\n\n<p>Here is my code:</p>\n\n<pre><code>btMatrix3x3 orn = btPhys-&gt;getWorldTransform().getBasis();   \nbtQuaternion quat;\norn.getRotation(quat);\nbtVector3 axis = quat.getAxis();\n\n//Move rigidbody 2 units along its axis to the origin\nbtPhys-&gt;translate(btVector3(-2.0 * axis.getX(), 0.0, -2.0 * axis.getZ()));\n\n//Rotate the rigidbody by 1 degree on its center of mass\norn *= btMatrix3x3(btQuaternion( btVector3(1, 0, 0), btScalar(degreesToRads(-1))));\nbtPhys-&gt;getWorldTransform().setBasis(orn);  \n\n//Update axis variable to apply transform on\norn.getRotation(quat);\naxis = quat.getAxis();\n\n//Move the rigidbody 2 units along new axis\nbtPhys-&gt;translate(btVector3(2.0 * axis.getX(), 0.0, 2.0 * axis.getZ())); \n</code></pre>\n\n<p>However, the pivot points appears to be moving around instead of staying in one place (the origin). Is there a better way (that actually works) to rotate a rigidbody around a pivot point?</p>\n\n<p><strong>EDIT:</strong>\nI added some sanity-check code for the rotate function:</p>\n\n<pre><code>//Code that doesn't work\nbtVector3 invTrans = btPhys-&gt;offsetToPivot.rotate(btVector3(1.0, 0.0, 0.0), btScalar(degreesToRads(-1)));\n//Values printed out are identical to offsetToPivot\nprintf(\"invTrans: %f %f %f\\n\", invTrans.getX(), invTrans.getY(), invTrans.getZ());\n\n//Sanity code that DOES work\n//Arbitrary vector\nbtVector3 temp = btVector3(0.0, 2.0, 0.0);\ntemp = temp.rotate(btVector3(1.0, 0.0, 0.0), btScalar(degreesToRads(-1)));\nprintf(\"temp %f %f %f\\n\", temp.getX(), temp.getY(), temp.getZ());\n</code></pre>\n"}, {"tags": ["c++", "c", "macos", "compiler-errors"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441837697, "post_id": 32490003, "comment_id": 52840851, "body": "Looking at <code>aacurses.c</code>, there is a choice between whether to include <code>&lt;curses&gt;</code> or <code>&lt;ncurses&gt;</code>, presumably due to a definition in <code>&quot;config.h&quot;</code>.  Perhaps the configure script picked up the wrong <i>curses</i>.  Check if <code>RENAMED_NCURSES</code> is defined in <code>config.h</code>, then comment it out or undefine it and try <code>make</code> again (without running <code>configure</code>)."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441837927, "post_id": 32490003, "comment_id": 52840936, "body": "Alternatively, you could use <a href=\"http://brew.sh\" rel=\"nofollow noreferrer\">Homebrew</a> to install a pre-built aalib package.  Install homebrew, then invoke <code>brew install aalib</code>."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441838123, "post_id": 32490003, "comment_id": 52841012, "body": "One other thing to try is not using <i>curses</i> at all: <code>.&#47;configure --with-curses-driver=no</code>.  I found that option in a very old thread, so there&#39;s no guarantee it&#39;s still there."}, {"owner": {"reputation": 11, "user_id": 5318964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264e45a9b3e45ef41d54c04fca8ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Nosreme", "link": "https://stackoverflow.com/users/5318964/nosreme"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1441847538, "post_id": 32490003, "comment_id": 52843357, "body": "Hey thanks for your help.  I did manage to install it via Homebrew.  I wasn&#39;t aware that it was on Homebrew, so that&#39;s pretty awesome.  I have another question related to aview, I don&#39;t know if you have any experience with the program itself...  When I open a .pnm with aview several of the options say &quot;unsupported&quot; including half-bright (dim) mode, 8-bit Acsii mode, and control characters.  Is this an issue with my terminal?  Or the actual program itself?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1441849998, "post_id": 32490003, "comment_id": 52843929, "body": "Actually, I have no experience with <i>aview</i> or <i>aalib</i>.  I was just helping with general troubleshooting.  It&#39;s probably a lack of ANSI support in your terminal, which I believe is detected by <i>ncurses</i>.  Try running it under <code>xterm</code>."}], "owner": {"reputation": 11, "user_id": 5318964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264e45a9b3e45ef41d54c04fca8ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Nosreme", "link": "https://stackoverflow.com/users/5318964/nosreme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441837033, "creation_date": 1441837033, "question_id": 32490003, "link": "https://stackoverflow.com/questions/32490003/trouble-compiling-aalib-on-mac-osx-yosemite", "title": "Trouble compiling aalib on Mac OSX Yosemite", "body": "<p>So I'm looking to compile aalib and aview on my Mac, both are used for converting images into acsii art.  </p>\n\n<p>aview requires that aalib is installed before it can be compiled</p>\n\n<p>At first when I was trying to compile aalib I was receiving an error telling me that malloc.h could not be found.  After some googling I figured I could just copy malloc.h and paste it into the src folder of aalib.  This seemed to solve that problem, but now when I run the following in the aalib directory (as instructed in the README):</p>\n\n<pre><code>./configure\nmake\nmake install\n</code></pre>\n\n<p>I get a new error </p>\n\n<pre><code>Making all in src\n/bin/sh ../libtool --mode=compile gcc -DHAVE_CONFIG_H -I. -I. -I.     \n-g -O2 -I/usr/include/ncurses  -c aacurses.c gcc -DHAVE_CONFIG_H -I. -\nI. -I. -g -O2 -I/usr/include/ncurses -c aacurses.c -o aacurses.o\naacurses.c:74:20: error: incomplete definition of type 'struct _win_st'\n*width = stdscr-&gt;_maxx + 1;\n         ~~~~~~^\n/usr/include/curses.h:322:16: note: forward declaration of 'struct \n_win_st'\ntypedef struct _win_st WINDOW;\n               ^\naacurses.c:75:21: error: incomplete definition of type 'struct _win_st'\n    *height = stdscr-&gt;_maxy + 1;\n              ~~~~~~^\n/usr/include/curses.h:322:16: note: forward declaration of 'struct \n_win_st'\ntypedef struct _win_st WINDOW;\n               ^\n2 errors generated.\nmake[1]: *** [aacurses.lo] Error 1\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>Honestly I'm in a bit over my head.  I'm not sure what this error means or if there is any way I can actually fix it.  Has anyone got aalib running on a mac?  Did you run into these same problems?</p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["c++", "header", "codeblocks"], "comments": [{"owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "edited": false, "score": 0, "creation_date": 1441836822, "post_id": 32489943, "comment_id": 52840557, "body": "Helpful hint, always use <code>std::</code> instead of <code>using namespace std;</code> you&#39;ll learn whats in the <code>std</code> namespace and avoid errors like this ( as well as many other things but unrelated )."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1441836838, "post_id": 32489943, "comment_id": 52840561, "body": "Please edit your question to include the compilation errors. As an aside, including a .cpp file like that is not a normal thing to do. If you have implementation in a .cpp file, compile that separately and link to it."}, {"owner": {"reputation": 108, "user_id": 5318941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2db107808b6907105b3bbf749fd9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5318941/tim"}, "reply_to_user": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "edited": false, "score": 0, "creation_date": 1441838587, "post_id": 32489943, "comment_id": 52841164, "body": "@Serdalis I&#39;m not doubting that having better effects, but because the professor wrote all this, I feel the solution to the error would be more specific."}], "answers": [{"comments": [{"owner": {"reputation": 262, "user_id": 3915162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3178c869edafd5b8cb7d7af5f25cab?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Ayres", "link": "https://stackoverflow.com/users/3915162/nick-ayres"}, "edited": false, "score": 1, "creation_date": 1441839198, "post_id": 32490345, "comment_id": 52841353, "body": "The code was probably meant to have a &quot;using namespace std&quot; statement somewhere. It is a better solution to insert std:: in front of those standard library components, because this helps prevent namespace collisions, which can be tricky to diagnose. This is where you have two things with the same name."}, {"owner": {"reputation": 108, "user_id": 5318941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2db107808b6907105b3bbf749fd9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5318941/tim"}, "edited": false, "score": 0, "creation_date": 1441841183, "post_id": 32490345, "comment_id": 52841887, "body": "Ok, so I used std:: for strings in h, and anything with iostream definitions like cout and endl. My error count shrunk significantly, but is it problematic to mix std:: and using namespace std in the same files?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441845285, "post_id": 32490345, "comment_id": 52842869, "body": "Completely harmless. std:: prefixing just tells the compiler what namespace to use as an extra hint, if needed. Just like you did with <code>void super::display()</code>. &quot;Hey, compiler! there&#39;s a method called <code>display</code> in <code>super</code>&quot; Later you could have another <code>display</code> method in <code>uber</code> and with the namespacing the compiler can tell the two apart. If you want super&#39;s display, call <code>super::display</code>. For uber&#39;s display, <code>uber::display</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 108, "user_id": 5318941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2db107808b6907105b3bbf749fd9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5318941/tim"}, "edited": false, "score": 1, "creation_date": 1441845683, "post_id": 32490345, "comment_id": 52842955, "body": "@Tim Where <code>using namespace std;</code> becomes dangerous is everything that should be prefixed with std:: can now be referenced without and there is a lot of stuff in std that can have the same name as your stuff. The classic example is having to write a <code>reverse</code> function to reverse a string, common in early programming classes. But if <code>using namespace std;</code> has been used, <code>std::reverse</code> will also answer to <code>reverse</code>. Which <code>reverse</code> does the compiler use? Yours or the the library&#39;s? End result can be some really weird error messages."}], "tags": [], "owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "is_accepted": false, "score": 3, "last_activity_date": 1441838804, "creation_date": 1441838804, "answer_id": 32490345, "question_id": 32489943, "link": "https://stackoverflow.com/questions/32489943/c-compilation-errors-in-header/32490345#32490345", "title": "C++ compilation errors in header", "body": "<p>In <code>super.h</code> :</p>\n\n<p>You should prefix all <code>string</code> occurrences by <code>std::</code>. Same thing for <code>cout</code> and <code>endl</code> that too come from the standard library. You should include the relevant headers in <code>super.h</code>.</p>\n\n<p>You can also add header guards, to prevent multiple inclusions.</p>\n\n<p>In <code>super_test_1.cpp</code>:</p>\n\n<p>You want to include <code>super.h</code> and not <code>super_impl.cpp</code>. \nWhy ? Because in case you include <code>super_impl.cpp</code> several times, multiple definitions of the same functions may cause issues.</p>\n"}], "owner": {"reputation": 108, "user_id": 5318941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2db107808b6907105b3bbf749fd9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5318941/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1441838804, "creation_date": 1441836679, "last_edit_date": 1441837728, "question_id": 32489943, "link": "https://stackoverflow.com/questions/32489943/c-compilation-errors-in-header", "title": "C++ compilation errors in header", "body": "<p>Just a heads up, this is a school assignment, but it is not graded.</p>\n\n<p>I was provided these 4 source code files, but the header seems to be holding me back with string/function errors etc.</p>\n\n<p>This was built in Codeblocks</p>\n\n<p>super.h</p>\n\n<pre><code>    class super\n{\npublic:\n    ///default constructor\n    super(){}\n    ///alternate constructor\n    super(string i, string a, string m, string l)\n        {Ident = i; Alias = a; MState=m; Location=l;}\n    ///destructor\n    ~super(){cout&lt;&lt;\"BOING!! Hero Disappears\"&lt;&lt;endl;}\n\n    ///mutators  -- Sets\n    void setIdent(string i){Ident = i;}\n    void setAlias(string a){Alias = a;}\n    void setMState(string m){MState = m;}\n    void setLocation(string l){Location = l;}\n\n\n    ///accessors  -- Gets\n    string getIdent(){return Ident;}\n    string getAlias(){return Alias;}\n    string getMState(){return MState;}\n    string getLocation(){return Location;}\n\n    ///other functionality  -- declared here, defined in impl file\n    void display();\n    void changeLoc();\n\nprivate:\n    string Ident;\n    string Alias;\n    string MState;\n    string Location;\n\n};\n</code></pre>\n\n<p>super_impl.cpp</p>\n\n<pre><code>///first.....go find the definition of a super.\n#include \"super.h\"\n\n///this file contains the \"guts\" of\n///functions too large to be in the header.\n///this is apart of the definition of a SUPER\n///a void function display that follows an instance of super\nvoid super::display()\n{\n    cout&lt;&lt;\"The Amazing \"&lt;&lt;Alias&lt;&lt;endl;\n    cout&lt;&lt;\"Mild Mannered \"&lt;&lt;Ident&lt;&lt;\" seeks \";\n    cout&lt;&lt;MState&lt;&lt;endl;\n    cout&lt;&lt;\"Currently found at \"&lt;&lt;Location&lt;&lt;endl&lt;&lt;endl;\n}\n\nvoid super::changeLoc()\n{   string stemp;\n    cout&lt;&lt;\"Where is \"&lt;&lt;Alias&lt;&lt;\" going?\"&lt;&lt;endl;\n    getline(cin,stemp);\n    Location = stemp;\n    cout&lt;&lt;endl;\n}\n</code></pre>\n\n<p>super_test_1.cpp</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\n#include \"super_impl.cpp\"\n\nint main()\n{\n    super S1;\n    S1.display();\n\n    S1.setIdent(\"Robby Williams\");\n    S1.setAlias(\"Snail\");\n    S1.setMState(\"To Protect Invertebrates Everywhere\");\n    S1.setLocation(\"His secret lair under the rock\");\n\n    S1.display();\n    S1.changeLoc();\n    S1.display();\ncout&lt;&lt;\"we are getting ready to call S1's destructor as we leave scope\"&lt;&lt;endl;\n   return 0;\n}\n</code></pre>\n\n<p>super_test_2.cpp</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\n#include \"super_impl.cpp\"\n\nint main()\n{\n    ///sptr is a location that can contain\n    /// ONE thing...the address of a super\n    super * sptr;\n    ///we have an address..but no super..sooooo...\n    ///using the alternate constructor\n\n    sptr = new super;\n    sptr -&gt;setAlias(\"temp\");\n    sptr -&gt;display();\n    cout&lt;&lt;\"before delete: \"&lt;&lt;&amp;sptr&lt;&lt;endl;\n    ///the next line calls the destructor of the thing that\n    ///sptr is pointing at...sptr is NOT deleted..how weird.\n    delete sptr;\n    cout&lt;&lt;\"After delete: \"&lt;&lt;&amp;sptr&lt;&lt;endl;\n    sptr = new super(\"Brian Ye\",\"Proxy\", \"Save People\", \"no one knows\");\n    ///NOW we have a NEW super because sptr STILL EXISTS\n\n    sptr-&gt;display();\n\n    sptr-&gt;setIdent(\"Robby Williams\");\n    sptr-&gt;setAlias(\"Snail\");\n    sptr-&gt;setMState(\"To Protect Invertebrates Everywhere\");\n    sptr-&gt;setLocation(\"His secret lair under the rock\");\n\n    sptr-&gt;display();\n\n\n   return 0;\n}\n</code></pre>\n\n<p>Compilation errors</p>\n\n<pre><code>||=== Build: Debug in Simple Super Person Object (compiler: GNU GCC Compiler) ===|\nZ:\\CS250\\super.h|7|error: expected ')' before 'i'|\nZ:\\CS250\\super.h|13|error: 'string' has not been declared|\nZ:\\CS250\\super.h|14|error: 'string' has not been declared|\nZ:\\CS250\\super.h|15|error: 'string' has not been declared|\nZ:\\CS250\\super.h|16|error: 'string' has not been declared|\nZ:\\CS250\\super.h|20|error: 'string' does not name a type|\nZ:\\CS250\\super.h|21|error: 'string' does not name a type|\nZ:\\CS250\\super.h|22|error: 'string' does not name a type|\nZ:\\CS250\\super.h|23|error: 'string' does not name a type|\nZ:\\CS250\\super.h|30|error: 'string' does not name a type|\nZ:\\CS250\\super.h|31|error: 'string' does not name a type|\nZ:\\CS250\\super.h|32|error: 'string' does not name a type|\nZ:\\CS250\\super.h|33|error: 'string' does not name a type|\nZ:\\CS250\\super.h||In destructor 'super::~super()':|\nZ:\\CS250\\super.h|10|error: 'cout' was not declared in this scope|\nZ:\\CS250\\super.h|10|error: 'endl' was not declared in this scope|\nZ:\\CS250\\super.h||In member function 'void super::setIdent(int)':|\nZ:\\CS250\\super.h|13|error: 'Ident' was not declared in this scope|\nZ:\\CS250\\super.h||In member function 'void super::setAlias(int)':|\nZ:\\CS250\\super.h|14|error: 'Alias' was not declared in this scope|\nZ:\\CS250\\super.h||In member function 'void super::setMState(int)':|\nZ:\\CS250\\super.h|15|error: 'MState' was not declared in this scope|\nZ:\\CS250\\super.h||In member function 'void super::setLocation(int)':|\nZ:\\CS250\\super.h|16|error: 'Location' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp||In member function 'void super::display()':|\nZ:\\CS250\\super_impl.cpp|11|error: 'cout' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|11|error: 'Alias' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|11|error: 'endl' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|12|error: 'Ident' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|13|error: 'MState' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|14|error: 'Location' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp||In member function 'void super::changeLoc()':|\nZ:\\CS250\\super_impl.cpp|18|error: 'string' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|18|error: expected ';' before 'stemp'|\nZ:\\CS250\\super_impl.cpp|19|error: 'cout' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|19|error: 'Alias' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|19|error: 'endl' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|20|error: 'cin' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|20|error: 'stemp' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|20|error: 'getline' was not declared in this scope|\nZ:\\CS250\\super_impl.cpp|21|error: 'Location' was not declared in this scope|\n||=== Build failed: 34 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441836528, "post_id": 32489899, "comment_id": 52840448, "body": "They&#39;re often necessary to interface with C API&#39;s."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 7, "creation_date": 1441836599, "post_id": 32489899, "comment_id": 52840472, "body": "This smacks of a homework question. Which would be fine if you showed that you&#39;d made some effort, and were perhaps looking for clarification. But that&#39;s not evident. There appear also to be multiple questions here. It&#39;s one question at a time here on Stack Overflow."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1441836634, "post_id": 32489899, "comment_id": 52840489, "body": "They&#39;re sometimes handy for type erasure, too."}, {"owner": {"reputation": 449, "user_id": 5286485, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/seEFW.jpg?s=128&g=1", "display_name": "ohadsas", "link": "https://stackoverflow.com/users/5286485/ohadsas"}, "edited": false, "score": 0, "creation_date": 1441836813, "post_id": 32489899, "comment_id": 52840551, "body": "A void* It is a pointer, but the type that it points to is not known. dealing in unformatted memory. This is what operator new and malloc return: a pointer to a block of memory of a certain size."}, {"owner": {"reputation": 75, "user_id": 5233567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/790fca75ef7b9d4f5d3243231fb31f2f?s=128&d=identicon&r=PG&f=1", "display_name": "destrovel", "link": "https://stackoverflow.com/users/5233567/destrovel"}, "edited": false, "score": 0, "creation_date": 1441836848, "post_id": 32489899, "comment_id": 52840564, "body": "Not homework, I&#39;ve just found myself in times where I think to use but want to genuinely know more. Thanks for the condescension though!"}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1441836861, "post_id": 32489899, "comment_id": 52840570, "body": "They can be useful when interfacing with hardware at times to signify a plain ol&#39; memory address."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1441836964, "post_id": 32489899, "comment_id": 52840608, "body": "When using a <code>DMA</code> with another device (eg. an FPGA) they are useful to change arbitrary blocks of 32 bit ints into structures that hold usefull data."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441837373, "post_id": 32489899, "comment_id": 52840746, "body": "If you want to use <code>malloc</code> in your C++ code for any reason, malloc returns a <code>void *</code>, so there will be a pointer like that in your program, even if you cast it to another type right away."}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 1, "creation_date": 1441837502, "post_id": 32489899, "comment_id": 52840790, "body": "What&#39;s their utility? For when you don&#39;t know/care about the type in memory pointed to. Kinda unnecessary in C++ with templates, but still a means to an end."}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1441839313, "post_id": 32489899, "comment_id": 52841391, "body": "Sorry again for misreading. See my answer. I&#39;ve added a small example to illustrate a common scenario along with two things you might want to be careful about when working with void pointers."}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1441839363, "post_id": 32489899, "comment_id": 52841408, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4334831/what-is-a-void-pointer-and-what-is-a-null-pointer\">What is a void pointer and what is a null pointer?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5233567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/790fca75ef7b9d4f5d3243231fb31f2f?s=128&d=identicon&r=PG&f=1", "display_name": "destrovel", "link": "https://stackoverflow.com/users/5233567/destrovel"}, "edited": false, "score": 0, "creation_date": 1441838298, "post_id": 32490199, "comment_id": 52841068, "body": "Note I was asking about <i>void</i> pointers, though this is all good to know."}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "reply_to_user": {"reputation": 75, "user_id": 5233567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/790fca75ef7b9d4f5d3243231fb31f2f?s=128&d=identicon&r=PG&f=1", "display_name": "destrovel", "link": "https://stackoverflow.com/users/5233567/destrovel"}, "edited": false, "score": 0, "creation_date": 1441838409, "post_id": 32490199, "comment_id": 52841107, "body": "Ah sorry, will add this."}], "tags": [], "owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "is_accepted": true, "score": 2, "last_activity_date": 1441841063, "last_edit_date": 1495540334, "creation_date": 1441838000, "answer_id": 32490199, "question_id": 32489899, "link": "https://stackoverflow.com/questions/32489899/usage-of-void-pointers-in-c/32490199#32490199", "title": "Usage of void pointers in C++", "body": "<p>Void pointers can be viewed as a neutral way of passing things around. A void pointer can point at whatever you want unlike a non-void one.</p>\n\n<p><strong>Example:</strong>\nImagine you have an integer variable</p>\n\n<pre><code>int myvar;\n</code></pre>\n\n<p>There are two ways you can tackle this variable if you want to pass it along somewhere using a pointer:</p>\n\n<pre><code>int *myvar_ptr = &amp;myvar;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void *myvar_ptr = &amp;myvar;\n</code></pre>\n\n<p>In the first case using a integer pointer restricts you to pointing at <strong>only</strong> a memory block containing an integer. In the second case you might as well have a float, double, an object, the beginning of an array of some sort, std container etc.</p>\n\n<p>The downside is that even though you have this neutral way of passing things around you still have to retrieve the thing that the void pointer is pointing at at some point, which means that you need to cast it to the respective type. This is a very tricky part and if you do it incorrectly you can 1)create segmentations faults (imagine your void pointer is pointing at an array of chars but you cast it back to a double -> memory-wise you jump \"further\" thus the probability of accessing a memory you are not supposed to is pretty big), 2)corrupt your data etc.</p>\n\n<p>Another downside of the void pointers is the absence of pointer arithmetic. You cannot do:</p>\n\n<pre><code>myvar_ptr++;\n</code></pre>\n\n<p>if <code>myvar_ptr</code> is a void pointer since you don't know what the <code>+1</code> indicates memory-wise. Might be a char, might be a big fat object or else.</p>\n\n<p>In <code>C++</code> most people prefer using pointers combined with templates since you still get a higher degree of flexibility compared to a primitive type pointer yet the information about the type is not lost. Mimicing void pointers for classes using templates combined with pointers is not that difficult especially since we have things inheritance. Void can also be used as a type for a template (see <a href=\"https://stackoverflow.com/a/13372788/1559401\">here</a>).</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Sorry about misreading your question's title. Since I don't want my writing to go to waste here is the old post.</p>\n\n<p>Some extra information on pointers:</p>\n\n<p>Pointers are useful for</p>\n\n<ul>\n<li>talking to C applications (especially those using UI APIs where event handling of the various components is usually (always?) done using pointers to functions)</li>\n<li>dynamic memory allocation including malloc (and similar oldies but goldies), new operator (C++; new actually returns a pointer if you didn't know) etc.</li>\n<li>pointer arithmetic - performance and flexibility</li>\n<li>embedded software development - pointers allow you a very precise access to the memory (which is also essential for the *nix systems, where C is the widely used standard language)</li>\n<li>generally offer extra flexibility and reusability of components - unlike some other language C/C++ allows you to pass things by value and by reference, which means that you are not obligated to copy stuff (basically what <strong>pass by value</strong> does) if you don't want to. Since everything has a starting point in the memory you can even pass functions using pointers (as I've mentioned a very popular way of doing UI components' callbacks)</li>\n</ul>\n\n<p>Pointers can also be a pain in the butt:</p>\n\n<ul>\n<li>many books/tutorials do a poor job in explaining in an easy-to-understand manner how you can screw things up (pretty badly on top of that) if you use pointers incorrectly</li>\n<li>stacking pointer of a pointer of a pointer of a pointer ... can lead to an extremely obfuscated (meaning hard to read and understand) code</li>\n<li>where there is dynamic memory allocation involved there is always a chance you miss something and there is you big fat memory leak. But then again you can assign something on the stack to a pointer. ;)</li>\n</ul>\n\n<p>In C++ as mentioned by some here manages to hide a lot of the pointer stuff (maybe exactly in order to prevent developers misusing pointers) but you still need it depending on what you are doing.</p>\n"}, {"tags": [], "owner": {"reputation": 4319, "user_id": 2027237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6457db0676be7f14f63e0f45aec333d?s=128&d=identicon&r=PG", "display_name": "anneb", "link": "https://stackoverflow.com/users/2027237/anneb"}, "is_accepted": false, "score": 0, "last_activity_date": 1441838521, "creation_date": 1441838521, "answer_id": 32490299, "question_id": 32489899, "link": "https://stackoverflow.com/questions/32489899/usage-of-void-pointers-in-c/32490299#32490299", "title": "Usage of void pointers in C++", "body": "<p>void pointers are pointers to data of unknown type.</p>\n\n<p>For example, you can write a sorting function for sorting data. You do not need to know the data type (numeric, ASCII text, Chinese, a double precision number or something else), the algorithm is always the same. If you pass in a void pointer to the data and a pointer to a data comparison function you will be able to sort the data.</p>\n\n<p>Another example of using a void pointer would be a data compression function. The compression function doesn't care about the data type. It only needs to know the start of the data and the size of the data.</p>\n"}], "owner": {"reputation": 75, "user_id": 5233567, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/790fca75ef7b9d4f5d3243231fb31f2f?s=128&d=identicon&r=PG&f=1", "display_name": "destrovel", "link": "https://stackoverflow.com/users/5233567/destrovel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "closed_date": 1441840026, "accepted_answer_id": 32490199, "answer_count": 2, "score": -4, "last_activity_date": 1441843472, "creation_date": 1441836432, "last_edit_date": 1441843472, "question_id": 32489899, "link": "https://stackoverflow.com/questions/32489899/usage-of-void-pointers-in-c", "closed_reason": "Needs more focus", "title": "Usage of void pointers in C++", "body": "<p>Is there ever a time they're necessary or are they a symptom of poor code design?\nIf the former, can you give an example?\nIf the latter, can you explain the dangers of using them?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1441837007, "post_id": 32489850, "comment_id": 52840627, "body": "You can&#39;t just delete your question after you received an answer. That&#39;s really poor style. We&#39;re not servants for you, personally. You post questions that may help future users (including you)."}, {"owner": {"reputation": 2597, "user_id": 1715055, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b29b29364de300edef57e8579ec8780?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1715055/john"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1441837158, "post_id": 32489850, "comment_id": 52840668, "body": "@sehe I know, but I was stupid. You&#39;re answer from the other question answers what I was looking for exactly. Is that still poor style? Or would my rephrasing help?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1441837207, "post_id": 32489850, "comment_id": 52840689, "body": "Nah. You either find the dupe before you post, or maaaayybe you delete before someone answers (this is iffy, because few things are so frustrating as answering a question that *POOF* vanishes). In this case, just leave it here. I marked it as the dupe after I verified that, indeed, it is."}, {"owner": {"reputation": 2597, "user_id": 1715055, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b29b29364de300edef57e8579ec8780?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1715055/john"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1441837378, "post_id": 32489850, "comment_id": 52840747, "body": "I remember reading the same question a few days ago too. I was like: &quot;What is all this extra stuff about nullptr and is_loading?&quot; After finally sort of understanding the boost serialization library and seeing the answer again, I realize that was a part of what I needed."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 2, "creation_date": 1441837419, "post_id": 32489850, "comment_id": 52840763, "body": "Good for you! You learned :) It&#39;s not bad to learn with mistakes. It was just bad form to throw away effort that someone just made on your behalf."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1441837017, "post_id": 32489937, "comment_id": 52840636, "body": "Ha. Saved me some work there :)"}], "tags": [], "owner": {"reputation": 15468, "user_id": 321772, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c03247f45c9f291391b894375c2709ca?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/321772/adam"}, "is_accepted": true, "score": 2, "last_activity_date": 1441836657, "last_edit_date": 1495540331, "creation_date": 1441836657, "answer_id": 32489937, "question_id": 32489850, "link": "https://stackoverflow.com/questions/32489850/how-to-serialize-large-malloced-float-array-with-boost-allocated-outside-of-con/32489937#32489937", "title": "How to serialize large malloc&#39;ed float array with Boost allocated outside of constructor?", "body": "<p>According to <a href=\"https://stackoverflow.com/a/20599449/321772\">this answer</a>, you can do it like this:</p>\n\n<pre><code>template&lt;class Archive&gt;\nvoid serialize(Archive &amp; ar, Monkey&amp; m, const unsigned int version)\n{\n    ar &amp; m.num;\n    if (Archive::is_loading::value)\n    {\n        assert(m.arr == nullptr);\n        m.arr = new float[m.num];\n    }\n    ar &amp; make_array&lt;float&gt;(m.arr, m.num);\n}\n</code></pre>\n"}], "owner": {"reputation": 2597, "user_id": 1715055, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0b29b29364de300edef57e8579ec8780?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1715055/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "closed_date": 1441837528, "accepted_answer_id": 32489937, "answer_count": 1, "score": 0, "last_activity_date": 1441836657, "creation_date": 1441836203, "last_edit_date": 1441836504, "question_id": 32489850, "link": "https://stackoverflow.com/questions/32489850/how-to-serialize-large-malloced-float-array-with-boost-allocated-outside-of-con", "closed_reason": "Duplicate", "title": "How to serialize large malloc&#39;ed float array with Boost allocated outside of constructor?", "body": "<p>Due to certain constraints I am forced to use a C float array for one of my libraries. The array is malloc'ed following some processing. How would I allocate memory within the <code>serialize()</code> method? </p>\n\n<p>If you move the malloc from <code>init()</code> to the constructor, the code works.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#pragma warning(disable: 4244)\n#include &lt;boost/serialization/serialization.hpp&gt;\n#include &lt;boost/archive/binary_oarchive.hpp&gt;\n#include &lt;boost/archive/binary_iarchive.hpp&gt;\n\nstruct Monkey\n{\n    int num = 256*70000;\n    float* arr;\n\n    Monkey()\n        {}\n        void init() {\n                arr = (float*)malloc(num*sizeof(float));//new float[num];\n        }  \n    ~Monkey() { free(arr); }\n};\n\nnamespace boost\n{   \n    namespace serialization\n    {   \n        template&lt;class Archive&gt;\n        void serialize(Archive &amp; ar, Monkey&amp; m, const unsigned int version)\n        {   \n            ar &amp; m.num;\n            ar &amp; make_array&lt;float&gt;(m.arr, m.num);\n        }\n    }\n}\nint main(int argc, char* argv[])\n{\n    const char* name = \"monkey.txt\";\n    {   \n        Monkey m;\n        m.init();\n\n        std::ofstream outStream(name, std::ios::out | std::ios::binary | std::ios::trunc);\n        boost::archive::binary_oarchive oar(outStream);\n        oar &lt;&lt; (m);\n    }\n\n    Monkey m;\n    std::ifstream inStream(name, std::ios::in | std::ios::binary);\n    boost::archive::binary_iarchive iar(inStream);\n    iar &gt;&gt; (m);\n\n    //std::copy(m.arr, m.arr + m.num, std::ostream_iterator&lt;float&gt;(std::cout, \";\"));\n    std::cout &lt;&lt; m.arr[10] &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>To be honest, I don't really get what's going on under the hood with boost serialization. It's just a black box to me. I'm too much of a beginner to read its source code.</p>\n"}, {"tags": ["c++", "c", "cmake", "clion"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441837122, "post_id": 32489826, "comment_id": 52840660, "body": "You use <code>${CMAKE_SOURCE_DIR}&#47;bno055&#47;bno055.c</code> file for build <code>bno055</code> library, so you shouldn&#39;t use that file for build <code>imc-server</code> executable. Also, it is better to use library target name for link that executable: <code>target_link_libraries(imc-server bno055)</code>. As for external project <code>mraa</code>, you additionally need explicit target dependencies for correctly link with it: <code>add_dependencies(imc-server mraa)</code>."}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441837787, "post_id": 32489826, "comment_id": 52840888, "body": "@Tsyvarev Ok, I just added the BNO055 files to the executable(So no lib or linking for bno055). However I am still getting undefined function errors. I also uncommented all the mraa code and I am getting undefined function errors for those functions as well. Is there something I am fundamentally missing here? <a href=\"https://github.com/Noah-Huppert/Inertial-Motion-Capture/tree/39a6196e48623c76323b92d37bf6e811c22f3ad5/imc-server\" rel=\"nofollow noreferrer\">Commit with changes =&gt; 39a6196</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441875789, "post_id": 32489826, "comment_id": 52854726, "body": "Which source is being compiled, when you get error? Precise error message(at least, for one function) would be helpful."}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441913652, "post_id": 32489826, "comment_id": 52879517, "body": "@Tsyvarev Indeed, Here is the end part of the CMake build log. <a href=\"http://pastebin.com/Av5p45eK\" rel=\"nofollow noreferrer\">Pastebin</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441922852, "post_id": 32489826, "comment_id": 52883750, "body": "As build log shows, function (<code>mraa_i2c_address</code>) is defined in the <code>mraa</code> library, not in the <code>bno055</code> one. You need both link with that library (<code>target_link_libraries(imc-server libmraa.so</code>) and add dependency with <code>mraa</code> target (<code>add_dependencies(imc-server mraa)</code>)."}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441925406, "post_id": 32489826, "comment_id": 52884556, "body": "@Tsyvarev Awesome! Now only the BNO055 functions are missing. Even though I include them in the executable build"}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441974433, "post_id": 32489826, "comment_id": 52904569, "body": "@Tsyvarev The Undefined BNO055 errors where from an other issue. If you want, put your comments into an answer."}], "answers": [{"comments": [{"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "edited": false, "score": 1, "creation_date": 1444067259, "post_id": 32926887, "comment_id": 53734276, "body": "The issue was that I had to wrap the bno055 include in a <code>extern &quot;C&quot; {}&quot;</code>"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1480348119, "post_id": 32926887, "comment_id": 68913191, "body": "maybe you could post your own answer, it would be more visible"}], "tags": [], "owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "is_accepted": false, "score": 0, "last_activity_date": 1443902250, "creation_date": 1443902250, "answer_id": 32926887, "question_id": 32489826, "link": "https://stackoverflow.com/questions/32489826/cmake-undefined-reference-to-function/32926887#32926887", "title": "CMake &quot;undefined reference to function&quot;", "body": "<p>Remove the header from your SOURCE_FILES.</p>\n\n<pre><code>set(SOURCE_FILES ${SOURCE_FILES}\n        # ${CMAKE_SOURCE_DIR}/bno055/bno055.h\n        ${CMAKE_SOURCE_DIR}/bno055/bno055.c)\n</code></pre>\n\n<p>CMake should find the required header by itself. Additional includes are found by <code>include_directories</code></p>\n"}, {"tags": [], "owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "is_accepted": true, "score": 9, "last_activity_date": 1494774622, "creation_date": 1494774622, "answer_id": 43965493, "question_id": 32489826, "link": "https://stackoverflow.com/questions/32489826/cmake-undefined-reference-to-function/43965493#43965493", "title": "CMake &quot;undefined reference to function&quot;", "body": "<p>The problem was that the BNO055 library was written in C, and my program was written in C++. </p>\n\n<p>I learned that to use a function defined in a C program, in a C++ program, you have to wrap the include of the C library in an <code>extern \"C\" {}</code> block like so:</p>\n\n<pre><code>extern \"C\" {\n    #include \"bno055.h\"\n}\n#include \"mraa.hpp\"\n\nstruct bno055_t bno055;\nmraa::I2c *i2c(0);\n\nint main() {\n    bno055_init(&amp;bno055);\n    i2c-&gt;address(0x29);\n}\n</code></pre>\n"}], "owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6100, "favorite_count": 1, "accepted_answer_id": 43965493, "answer_count": 2, "score": 7, "last_activity_date": 1494774622, "creation_date": 1441836069, "last_edit_date": 1441915202, "question_id": 32489826, "link": "https://stackoverflow.com/questions/32489826/cmake-undefined-reference-to-function", "title": "CMake &quot;undefined reference to function&quot;", "body": "<p>I am attempting to use CMake to link a library(<a href=\"https://github.com/BoschSensortec/BNO055_driver\" rel=\"noreferrer\">BNO055 Driver</a>). Since the BNO055 Driver doesn't use CMake and it hasn't been changed for about a year I decided to just download the source files and put them in my project. </p>\n\n<p>I then use CMake to create a library and link it.  </p>\n\n<p>The issue is that the link does not seem to be working. When I compile the project I get a <code>undefined reference to &lt;function&gt;</code> error, where <code>&lt;function&gt;</code> is a function defined by the BNO055 driver.</p>\n\n<p>Am I creating or linking the library incorrectly?<br>\nDo I need to do something else to define these functions?</p>\n\n<p>For the sake of not pasting in 200 lines of code, here is a simplified <code>main.cpp</code> that produces the same error as the real <code>main.cpp</code>. If you would like to see the real <code>main.cpp</code> follow the link bellow to the Github repo  </p>\n\n<pre><code>#include \"bno055.h\"\n#include \"mraa.hpp\"\n\nstruct bno055_t bno055;\nmraa::I2c *i2c(0);\n\nint main() {\n    bno055_init(&amp;bno055);\n    i2c-&gt;address(0x29);\n}\n</code></pre>\n\n<p><strong>CMakeLists.txt</strong>  </p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.4)\nproject(imc-server)\n\n# CMake\n# -- Config\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -pthread\")\n\n# Global\n# -- Include\ninclude(ExternalProject)\n\n# BNO055\n# -- Include\ninclude_directories(${CMAKE_SOURCE_DIR}/bno055)\n\nset(SOURCE_FILES ${SOURCE_FILES}\n        ${CMAKE_SOURCE_DIR}/bno055/bno055.h\n        ${CMAKE_SOURCE_DIR}/bno055/bno055.c)\n\n# MRAA\n# -- Build\nexternalProject_add(mraa\n        GIT_REPOSITORY https://github.com/intel-iot-devkit/mraa.git\n        GIT_TAG        v0.7.5\n)\n\n# Compile\n# -- Source\nset(SOURCE_FILES ${SOURCE_FILES}\n        main.cpp)\n\n# -- Create\nadd_executable(imc-server ${SOURCE_FILES})\nadd_dependencies(imc-server mraa)\n</code></pre>\n\n<p><strong>Relevant Part of Build Log</strong>  </p>\n\n<pre><code>[ 90%] Linking CXX executable imc-server\nCMakeFiles/imc-server.dir/test.cpp.o: In function `main':\n/home/noah/Documents/Inertial-Motion-Capture/imc-server/test.cpp:8: undefined reference to `bno055_init(bno055_t*)'\nCMakeFiles/imc-server.dir/test.cpp.o: In function `mraa::I2c::address(unsigned char)':\n/usr/local/include/mraa/i2c.hpp:99: undefined reference to `mraa_i2c_address'\ncollect2: error: ld returned 1 exit status\nmake[2]: *** [imc-server] Error 1\nmake[1]: *** [CMakeFiles/imc-server.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p><a href=\"https://github.com/Noah-Huppert/Inertial-Motion-Capture/tree/39a6196e48623c76323b92d37bf6e811c22f3ad5/imc-server\" rel=\"noreferrer\">Project Github</a>(<code>39a6196</code>)<br>\n<a href=\"http://pastebin.com/Av5p45eK\" rel=\"noreferrer\">Build Log</a></p>\n"}, {"tags": ["c++", "windows", "mingw", "scons"], "answers": [{"comments": [{"owner": {"reputation": 3807, "user_id": 628011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4e665fcec7fa0bc88afbccf60f1c882?s=128&d=identicon&r=PG&f=1", "display_name": "dirkbaechle", "link": "https://stackoverflow.com/users/628011/dirkbaechle"}, "edited": false, "score": 0, "creation_date": 1441869536, "post_id": 32490021, "comment_id": 52850702, "body": "Correct, it&#39;s not an error but only a warning. If you&#39;d want to get rid of it completely, you&#39;d have to specify an empty <code>tools</code> variable for the DefaultEnvironment as well. The latter gets initialized automatically..."}], "tags": [], "owner": {"reputation": 341, "user_id": 3421791, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5a5fdf6dbf4992aa9ed50c78802ecf16?s=128&d=identicon&r=PG&f=1", "display_name": "windenergy", "link": "https://stackoverflow.com/users/3421791/windenergy"}, "is_accepted": false, "score": 0, "last_activity_date": 1441837117, "creation_date": 1441837117, "answer_id": 32490021, "question_id": 32489798, "link": "https://stackoverflow.com/questions/32489798/struggling-to-get-scons-to-work-with-mingw-on-windows/32490021#32490021", "title": "Struggling to get scons to work with mingw on windows", "body": "<p>My problem in this case was caused by me using PowerShell for the first time. Which for some reason that I have not yet learned, does not provide popups of error messages. When I used cmd I saw that I had a path issue, and scons was otherwise working fine.</p>\n"}], "owner": {"reputation": 341, "user_id": 3421791, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5a5fdf6dbf4992aa9ed50c78802ecf16?s=128&d=identicon&r=PG&f=1", "display_name": "windenergy", "link": "https://stackoverflow.com/users/3421791/windenergy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441837117, "creation_date": 1441835864, "question_id": 32489798, "link": "https://stackoverflow.com/questions/32489798/struggling-to-get-scons-to-work-with-mingw-on-windows", "title": "Struggling to get scons to work with mingw on windows", "body": "<p>Trying to get a test case working so that I can compile C++ using scons.</p>\n\n<p>However I am getting this error:</p>\n\n<pre><code>scons: Reading SConscript files ...\nscons: done reading SConscript files.\nscons: Building targets ...\n\nscons: warning: No version of Visual Studio compiler found - C/C++ compilers most likely not set correctly\nFile \"C:\\Python27\\Scripts\\scons.py\", line 199, in &lt;module&gt;\nC:/Qt/Tools/mingw492_32/bin/g++.exe -o test.o -c test.cpp\nscons: *** [test.o] Error 1\nscons: building terminated because of errors.\n</code></pre>\n\n<p>Here is my SConstruct at this time:</p>\n\n<pre><code>env = Environment(tools = [\"mingw\"],  TARGET_ARCH=['x86'])\nenv.Replace(CXX = 'C:/Qt/Tools/mingw492_32/bin/g++.exe')\nenv.Program(\"main\",\"test.cpp\")\n</code></pre>\n\n<p>I am confused by the visual studio error, because I have specified that I want to use mingw.</p>\n"}, {"tags": ["c++", "pointers", "iterator", "copying"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441835625, "post_id": 32489734, "comment_id": 52840084, "body": "Probably better lookup for something like <code>vector&lt;std::shared_ptr&lt;SuperHeavyObject&gt;&gt;</code>. Iteratior implementation sounds like the wrong tree you&#39;re barking up."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1441835971, "post_id": 32489734, "comment_id": 52840216, "body": "This is a well-worded, answerable question looking for a standard-provided solution to a legitimate requirement, I really cannot understand both the downvotes and the close vote."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 2, "last_activity_date": 1441835748, "creation_date": 1441835748, "answer_id": 32489780, "question_id": 32489734, "link": "https://stackoverflow.com/questions/32489734/c-convenient-pointer-array-based-value-iterator-for-super-heavy-objects/32489780#32489780", "title": "C++: Convenient pointer array based value iterator for super-heavy objects", "body": "<p>Seems like a legitimate use case for <code>std::reference_wrapper</code><sup>1</sup>:</p>\n\n<pre><code>vector&lt;SuperHeavyObject&gt; objects;\nfor (auto &amp;objectGroup : objectGroups) {\n    vector&lt;std::reference_wrapper&lt;SuperHeavyObject&gt;&gt; objectsInThisGroup;\n    for (size_t index : objectGroup) {\n        // fast, we are only storing reference-like objects\n        objectsInThisGroup.push_back(objects[index]);\n    }\n    doSomething(objectsInThisGroup.begin(), objectsInThisGroup.end());\n}\n</code></pre>\n\n<hr>\n\n<ol>\n<li>C++11 required</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "is_accepted": false, "score": 1, "last_activity_date": 1441886740, "last_edit_date": 1441886740, "creation_date": 1441840411, "answer_id": 32490568, "question_id": 32489734, "link": "https://stackoverflow.com/questions/32489734/c-convenient-pointer-array-based-value-iterator-for-super-heavy-objects/32490568#32490568", "title": "C++: Convenient pointer array based value iterator for super-heavy objects", "body": "<p>Thanks @matteo-italia for your helpful answer! I used it for a while, and decided to look closer at Boost's iterators, and I found that they have an <code>indirect_iterator</code> which is also a good way to do what I want.</p>\n\n<p>\"indirect_iterator adapts an iterator by applying an extra dereference inside of operator*()\"</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_59_0/libs/iterator/doc/indirect_iterator.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_59_0/libs/iterator/doc/indirect_iterator.html</a></p>\n"}], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 32489780, "answer_count": 2, "score": 0, "last_activity_date": 1441886740, "creation_date": 1441835507, "question_id": 32489734, "link": "https://stackoverflow.com/questions/32489734/c-convenient-pointer-array-based-value-iterator-for-super-heavy-objects", "title": "C++: Convenient pointer array based value iterator for super-heavy objects", "body": "<p>In my code, I have something like this:</p>\n\n<pre><code>vector&lt;SuperHeavyObject&gt; objects; // objects in this vector are extremely slow to copy!\nfor (auto &amp;objectGroup : objectGroups) {\n    vector&lt;SuperHeavyObject&gt; objectsInThisGroup;\n    for (size_t index : objectGroup) {\n        objectsInThisGroup.push_back(objects[index]); // slow as copying is needed!\n    }\n    doSomething(objectsInThisGroup.begin(), objectsInThisGroup.end());\n}\n</code></pre>\n\n<p>What I'd really want is something like this:</p>\n\n<pre><code>vector&lt;SuperHeavyObject&gt; objects; // objects in this vector are extremely slow to copy!\nfor (auto &amp;objectGroup : objectGroups) {\n    vector&lt;SuperHeavyObject*&gt; objectsInThisGroup; // pointers!\n    for (size_t index : objectGroup) {\n        objectsInThisGroup.push_back(&amp;objects[index]); // not slow anymore\n    }\n    doSomething(magicIterator(objectsInThisGroup.begin()), \n                magicIterator(objectsInThisGroup.end()));\n}\n</code></pre>\n\n<p><code>doSomething</code> is allowed to copy the objects, so there's no scope problem. Inside <code>doSomething</code> is the only place where I'd like copying to take place, because these objects really are very slow to copy (I've profiled and it's a chokepoint).</p>\n\n<p>At the same time, I don't want to change the signature of <code>doSomething</code> to accept iterators that dereference <code>SuperHeavyObject*</code>, because that would require a lot of changes; dereferencing to <code>SuperHeavyObject</code> would be ideal, as it would only happen at one place (where copying happens).</p>\n\n<p>My question is; I could write an iterator like this myself, but it feels like I'm reinventing the wheel. Does C++ (11) have facilities to do this? I also have Boost if someone knows of anything like this.</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1441836257, "post_id": 32489702, "comment_id": 52840337, "body": "After changing <code>uint32</code> to <code>uint32_t</code> and <code>uint16</code> to <code>uint16_t</code>, it worked fine for me using g++ 4.9.3."}, {"owner": {"reputation": 377, "user_id": 3927447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561920107ca3a792100d7c5ab7f9208?s=128&d=identicon&r=PG&f=1", "display_name": "Nipheris", "link": "https://stackoverflow.com/users/3927447/nipheris"}, "edited": false, "score": 0, "creation_date": 1441836327, "post_id": 32489702, "comment_id": 52840369, "body": "Maybe it is related to <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/06/02/constexpr-complete-for-vs-2015-rtm-c-11-compiler-c-17-stl.aspx\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/vcblog/archive/2015/06/02/&hellip;</a>, citing: &quot;I&#39;m not aware of any constexpr bugs in the STL, but there are a few compiler bugs that remain to be fixed - notably DevDiv#1134662 &quot;constexpr constructors are emitting dynamic initializers&quot; and 1165072 &quot;constexpr ICE with brace elision&quot; in our internal database. &quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441836600, "post_id": 32489702, "comment_id": 52840473, "body": "After changing <code>uint32</code> to <code>uint32_t</code> and <code>uint16</code> to <code>uint16_t</code> I can reproduce in MSVC 2015 but not on g++(<a href=\"http://coliru.stacked-crooked.com/a/0c22a7bd8d64ccc3\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/0c22a7bd8d64ccc3</a>)"}], "answers": [{"tags": [], "owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "is_accepted": true, "score": 4, "last_activity_date": 1441837094, "creation_date": 1441837094, "answer_id": 32490017, "question_id": 32489702, "link": "https://stackoverflow.com/questions/32489702/constexpr-with-delegating-constructors/32490017#32490017", "title": "constexpr with delegating constructors", "body": "<p>This is a bug in MSVC 2015. The C++ 11 documentation <code>\u00a77.1.5 4</code> says in a pretty clear manner:</p>\n\n<blockquote>\n  <p><strong>4. The definition of a constexpr constructor shall satisfy the following constraints</strong>:</p>\n  \n  <p><em>4.1</em> the class shall not have any virtual base classes</p>\n  \n  <p><em>4.2</em> each of the parameter types shall be a literal type</p>\n  \n  <p><em>4.3</em> its function-body shall not be a function-try-block;</p>\n  \n  <p>In addition, either its function-body shall be = delete, or it shall satisfy the following constraints:</p>\n  \n  <p><em>4.4</em> either its function-body shall be = default, or the compound-statement of its function-body shall satisfy the constraints for a function-body of a constexpr function;</p>\n  \n  <p><em>4.5</em> every non-variant non-static data member and base class sub-object shall be initialized</p>\n  \n  <p><em>4.6</em> if the class is a union having variant members (9.5), exactly one of them shall be initialized;</p>\n  \n  <p><em>4.7</em> if the class is a union-like class, but is not a union, for each of its anonymous union members having variant members, exactly one of them shall be initialized;</p>\n  \n  <p><em>4.8</em> for a non-delegating constructor, every constructor selected to initialize non-static data members and base class sub-objects shall be\n  a constexpr constructor;</p>\n  \n  <p><em>4.9</em> for a delegating constructor, the target constructor shall be a constexpr constructor.</p>\n</blockquote>\n\n<p>Your class matches all criterias. <a href=\"http://goo.gl/IaZNDe\" rel=\"nofollow\">Clang</a> and <a href=\"http://goo.gl/Cfv5Ax\" rel=\"nofollow\">GCC</a> also accept your source so I would be surprised if I overlooked something.</p>\n"}], "owner": {"reputation": 2016, "user_id": 2534689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GoNJo.png?s=128&g=1", "display_name": "Rick de Water", "link": "https://stackoverflow.com/users/2534689/rick-de-water"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "accepted_answer_id": 32490017, "answer_count": 1, "score": 2, "last_activity_date": 1441872599, "creation_date": 1441835343, "last_edit_date": 1441872599, "question_id": 32489702, "link": "https://stackoverflow.com/questions/32489702/constexpr-with-delegating-constructors", "title": "constexpr with delegating constructors", "body": "<p>I have to following code:</p>\n\n<pre><code>class IP4Address\n{\n    public:\n    constexpr IP4Address();\n    constexpr IP4Address(uint32_t a_IP, uint16_t a_Port);\n\n    private:\n    uint32_t m_IP;\n    uint16_t m_Port;\n};\n\nconstexpr IP4Address::IP4Address():\n    IP4Address(0, 0)\n{\n\n}\n\nconstexpr IP4Address::IP4Address(uint32_t a_IP, uint16_t a_Port):\n    m_IP(a_IP),\n    m_Port(a_Port)\n{\n\n}\n</code></pre>\n\n<p>Which results in the following errors (Visual Studio 2015):</p>\n\n<pre><code>error C2476: 'constexpr' constructor does not initialize all members\nnote: 'IP4Address::m_IP' was not initialized by the constructor\nnote: 'IP4Address::m_Port' was not initialized by the constructor\n</code></pre>\n\n<p>Is this invalid C++? Am I doing something wrong? Or is this possibly a compiler bug?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 699354, "user_id": 218196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4P5DY.jpg?s=128&g=1", "display_name": "Felix Kling", "link": "https://stackoverflow.com/users/218196/felix-kling"}, "edited": false, "score": 1, "creation_date": 1441835301, "post_id": 32489679, "comment_id": 52839955, "body": "In the link you posted you see <code>operator type\t(2)</code> and if you follow the second link you get to  <a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/cast_operator</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441835365, "post_id": 32489679, "comment_id": 52839984, "body": "Check <a href=\"http://stackoverflow.com/questions/28307887/c-type-cast-operator-overloading-and-implicit-conversions?s=3|2.4106\" title=\"c type cast operator overloading and implicit conversions\">stackoverflow.com/questions/28307887/&hellip;</a>"}, {"owner": {"reputation": 2094, "user_id": 2069572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96d9436269fcd61678ca4543145cb1f1?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2069572/stephen"}, "reply_to_user": {"reputation": 699354, "user_id": 218196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4P5DY.jpg?s=128&g=1", "display_name": "Felix Kling", "link": "https://stackoverflow.com/users/218196/felix-kling"}, "edited": false, "score": 0, "creation_date": 1441835676, "post_id": 32489679, "comment_id": 52840098, "body": "@FelixKling, not sure how I missed that. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2653, "user_id": 1012759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ezwAs.jpg?s=128&g=1", "display_name": "CyberGuy", "link": "https://stackoverflow.com/users/1012759/cyberguy"}, "is_accepted": true, "score": 3, "last_activity_date": 1441835282, "creation_date": 1441835282, "answer_id": 32489692, "question_id": 32489679, "link": "https://stackoverflow.com/questions/32489679/what-does-this-use-of-the-operator-keyword-mean/32489692#32489692", "title": "What does this use of the `operator` keyword mean?", "body": "<p>It is a user-defined conversion operator</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/cast_operator</a></p>\n\n<pre><code>struct X {\n    //implicit conversion\n    operator int() const { return 7; }\n\n    // explicit conversion\n    explicit operator int*() const { return nullptr; }\n\n//   Error: array operator not allowed in conversion-type-id\n//   operator int(*)[3]() const { return nullptr; }\n    using arr_t = int[3];\n    operator arr_t*() const { return nullptr; } // OK if done through typedef\n//  operator arr_t () const; // Error: conversion to array not allowed in any case\n};\n\nint main()\n{\n    X x;\n\n    int n = static_cast&lt;int&gt;(x);   // OK: sets n to 7\n    int m = x;                     // OK: sets m to 7\n\n    int* p = static_cast&lt;int*&gt;(x);  // OK: sets p to null\n//  int* q = x; // Error: no implicit conversion\n\n    int (*pa)[3] = x;  // OK\n}\n</code></pre>\n"}], "owner": {"reputation": 2094, "user_id": 2069572, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/96d9436269fcd61678ca4543145cb1f1?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2069572/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32489692, "answer_count": 1, "score": 1, "last_activity_date": 1441835282, "creation_date": 1441835221, "question_id": 32489679, "link": "https://stackoverflow.com/questions/32489679/what-does-this-use-of-the-operator-keyword-mean", "title": "What does this use of the `operator` keyword mean?", "body": "<p>I found the following code on <a href=\"http://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow\" title=\"cppreference.com\">cppreference.com</a> (I was looking up what the <code>explicit</code> keyword meant.) </p>\n\n<pre><code>struct A\n{\n    A(int) {} // converting constructor\n    A(int, int) {} // converting constructor (C++11)\n    operator int() const { return 0; }\n};\n</code></pre>\n\n<p>On the third line of the struct definition there is the line:\n<code>operator int() const { return 0; }</code></p>\n\n<p>I'm not sure what that line does. What operator is being overloaded, is it int?</p>\n\n<p>I looked <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow\">here</a> to try and figure this out myself, but I'm still scratching my head.</p>\n"}, {"tags": ["c++", "gnu"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441850786, "post_id": 32489387, "comment_id": 52844135, "body": "Are these OpenSSL functions or just stuff you are making up yourself?  In either case you need to use prototypes properly instead of casts."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1441963996, "post_id": 32489387, "comment_id": 52897990, "body": "please, show the complete list of header files you have included so far, as as such, the functions are incompletely defined."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441850711, "post_id": 32489577, "comment_id": 52844112, "body": "<code>SSLv23_client_method</code> returns <code>const SSL_METHOD *</code>. The correct fix is probably for OP to include the right prototype (preferably by including the right header, instead of ad-hoc prototypes as he seems to be doing)"}, {"owner": {"reputation": 9, "user_id": 5318837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a88bfb807ff4b5c4827059d259f115?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5318837/james"}, "edited": false, "score": 0, "creation_date": 1441869556, "post_id": 32489577, "comment_id": 52850706, "body": ":3: error: conflicting types for &#226;\u20ac\u02dcSSLv3_client_method&#226;\u20ac\u2122 /usr/include/openssl/ssl.h:2029: note: previous declaration of &#226;\u20ac\u02dcSSLv3_client_method&#226;\u20ac\u2122 was here   &lt;-- Does not appear to work"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1441851757, "last_edit_date": 1441851757, "creation_date": 1441834676, "answer_id": 32489577, "question_id": 32489387, "link": "https://stackoverflow.com/questions/32489387/warning-cast-to-pointer-from-integer-of-different-size-64bit/32489577#32489577", "title": "warning: cast to pointer from integer of different size 64bit", "body": "<p>It appears that you are using the <a href=\"https://www.openssl.org/docs/manmaster/ssl/SSL_CTX_new.html\" rel=\"nofollow\">OpenSSL</a> library.</p>\n\n<p>Add </p>\n\n<pre><code>#include &lt;openssl/ssl.h&gt;\n</code></pre>\n\n<p>to the source file.</p>\n"}], "owner": {"reputation": 9, "user_id": 5318837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a88bfb807ff4b5c4827059d259f115?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5318837/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441851757, "creation_date": 1441833803, "question_id": 32489387, "link": "https://stackoverflow.com/questions/32489387/warning-cast-to-pointer-from-integer-of-different-size-64bit", "title": "warning: cast to pointer from integer of different size 64bit", "body": "<p>I've got a piece of code that works well on 32bit but on a 64bit system i get a warning: cast to pointer from integer of different size</p>\n\n<p>Here is the code</p>\n\n<pre><code>#define _GNU_SOURCE 1\nvoid *SSLv3_client_method(void) {\nreturn (void *) SSLv23_client_method();\n}\n</code></pre>\n\n<p>This on a Debian x64 system on which i am getting the error</p>\n\n<p>Any help would be greatly appreciated </p>\n"}, {"tags": ["c++", "string", "recursion", "recursive-backtracking"], "comments": [{"owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441834360, "post_id": 32489364, "comment_id": 52839605, "body": "Thanks :) updated the question.See last line please"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441834407, "post_id": 32489364, "comment_id": 52839624, "body": "Already done this rant once today, but what complete and utter expletive deleted moron told you to do this: <code>#include&lt;bits&#47;stdc++.h&gt;</code> and <code>using namespace std;</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441836758, "post_id": 32489364, "comment_id": 52840529, "body": "I&#39;ll do the rant again. <code>#include&lt;bits&#47;stdc++.h&gt;</code> includes virtually the entire gnu port of the c standard library into your file. This has a number of problems, but the biggie is you&#39;ve included massive amounts of stuff into your program that sets you up for a naming collision nightmare. <code>using namespace std;</code> places the std namespace into the global namespace. All those potential naming collisions just became very real. You have a function named <code>swap</code>? So does the standard library. And it&#39;s templated. It is legion. Find? Copy? Move? You&#39;re walking in a Minefield."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441834963, "post_id": 32489594, "comment_id": 52839824, "body": "Hi! I want backtracking solution for two reason.1) I am very poor with recursion so the more I deal with it the more perfect I become 2) Backtracking is the first thought that came to my mind so changing whole mindset and approach will not be feasible I guess :)"}, {"owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441835138, "post_id": 32489594, "comment_id": 52839898, "body": "You did some kind of dfs/bfs i guess correct me if I am wrong"}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "reply_to_user": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441835193, "post_id": 32489594, "comment_id": 52839914, "body": "Try to pick the right tool for the job instead of insisting that the hammer you have in hand will work as a screwdriver as well. There is quite simply nothing to backtrack from in your problem (unless you make it by force, e.g. by randomly adding &quot;5&quot; so that you have a cause to backtrack). The approach I outlined can also be implemented recursively very nicely."}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "reply_to_user": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441835310, "post_id": 32489594, "comment_id": 52839960, "body": "Not really. I just realized that a list of words does not become unordered by adding a common prefix to each word."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441835325, "post_id": 32489594, "comment_id": 52839967, "body": "Argument 1 I can understand. Practice does make better, but consider: If someone on SO writes the algorithm for you, how much practice did you get? Argument 2 is inexcusable. If you can&#39;t change your mind when presented with a better solution, best to get out of science."}, {"owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441835724, "post_id": 32489594, "comment_id": 52840116, "body": "Thanks :) I will mark it correct answer.Is this question impossible to do this with backtracking.Tell me this so that I can move on."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441836030, "post_id": 32489594, "comment_id": 52840237, "body": "It will be possible to do with backtracking, just not as easily or quickly. By all means, keep working on it because it is good practice and practice is good. When you get stuck on something concrete, ask SO. &quot;Why does this work?&quot; and &quot;Why doesn&#39;t this work?&quot; are usually good questions."}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1441837126, "post_id": 32489594, "comment_id": 52840661, "body": "Backtracking basically means making a wrong choice that only becomes apparent later on, and then tracking back to the point where that choice was made. Of course you want to minimize the number of bad choices - so in a way this is a backtracking algorithm that just never needs to track back because it always makes the right choice. If you really want to backtrack, just make some bad choices (like &quot;accidentally&quot; adding a &#39;5&#39; instead of a &#39;4&#39;)."}, {"owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "edited": false, "score": 0, "creation_date": 1441861483, "post_id": 32489594, "comment_id": 52846973, "body": "Thanks,I learnt a new thing today.That&#39;s why I was asking a backtracking solution.You taught me new thing about backtracking :).Your answer is correct thanks again"}], "tags": [], "owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "is_accepted": true, "score": 2, "last_activity_date": 1441834745, "creation_date": 1441834745, "answer_id": 32489594, "question_id": 32489364, "link": "https://stackoverflow.com/questions/32489364/generating-all-strings-by-only-two-letters-having-length-from-1-to-10/32489594#32489594", "title": "Generating all strings by only two letters having length from 1 to 10?", "body": "<p>Backtracking is not required, as a very simple algorithm exists that always does the right thing:</p>\n\n<ul>\n<li><p>Start with the empty word. (As you require length > 0 this need not be printed)</p></li>\n<li><p>After having done the work for size n - 1, you can do it for size n by:</p>\n\n<ul>\n<li>Printing every word of size n - 1 prefixed with a \"4\"</li>\n<li>Followed by printing every word of size n - 1 prefixed with a \"7\"</li>\n</ul></li>\n</ul>\n\n<p>Since every move you do is guaranteed to move in the right direction (even in a recursive implementation that does not actually store anything explicitly), this would not really be backtracking - but why would you want to backtrack anyway?</p>\n\n<p>P.S.: This algorithm is optimal: It spends O(1) time for each character it prints.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "is_accepted": false, "score": 1, "last_activity_date": 1441873010, "last_edit_date": 1441873010, "creation_date": 1441867984, "answer_id": 32495090, "question_id": 32489364, "link": "https://stackoverflow.com/questions/32489364/generating-all-strings-by-only-two-letters-having-length-from-1-to-10/32495090#32495090", "title": "Generating all strings by only two letters having length from 1 to 10?", "body": "<p>I am writing answer to my own question.I found solution after investing some time on it.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n#define ll long long int\nvector&lt;ll&gt; v;\nvoid recurse(ll num)\n{\n    v.push_back(num);\n    if (num &gt; ((ll)10e10))\n        return;\n    recurse(num * 10 + 4);\n    recurse(num * 10 + 7);\n}\n\nint main()\n{\n    recurse(0);\n    sort(v.begin(), v.end());\n    ll n;\n    cin &gt;&gt; n;\n    cout &lt;&lt; find(v.begin(),v.end(),n)-v.begin()&lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Better algorithms already suggested but though I though sharing this would be good.</p>\n"}], "owner": {"reputation": 13, "user_id": 5171391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd51d5c48e1aac32ad712d5c15341694?s=128&d=identicon&r=PG&f=1", "display_name": "HANOI I", "link": "https://stackoverflow.com/users/5171391/hanoi-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 32489594, "answer_count": 2, "score": 0, "last_activity_date": 1441873010, "creation_date": 1441833724, "last_edit_date": 1441834325, "question_id": 32489364, "link": "https://stackoverflow.com/questions/32489364/generating-all-strings-by-only-two-letters-having-length-from-1-to-10", "title": "Generating all strings by only two letters having length from 1 to 10?", "body": "<p>I want to generate all the strings of length from 1 to 10 by only words '4' and '7' in sorted order </p>\n\n<pre><code>  example-&gt; 1)4 //first string\n\n            2)7 //second string\n\n            3)44 //third,because next after 7 should be 44\n\n            4)47 //fourth,after 44\n\n            . . .\n\n            . . .\n\n            . . .\n\n            This way till length &lt;=10\n</code></pre>\n\n<p>I tried myself and my backtracking code looks something like this</p>\n\n<pre><code>        #include&lt;bits/stdc++.h&gt;\n        using namespace std;\n        vector&lt;string&gt;v;                // for storing intermediate string in backtracking\n        void generate(string s,char ch)\n        {\n            if(s.length()&gt;=9)return;    //length &gt; 10 returning\n            s+=ch;                      //adding to string a new character\n            v.push_back(s);                    //storing strings\n            generate(s,'4');            //first backtracking\n            generate(s,'7');            //second backtracking\n        }\n        int main()\n        {\n        generate(\"\",'4');\n        sort(v.begin(),v.end());     //sorting  to get ascending order string\n        string thisfind;             //to find postion of string thisfind in vector...like postion of '4' is 1\n        cin&gt;&gt;thisfind;\n        int l=find(v.begin(),v.end(),thisfind)-v.begin();  //just usual find function\n        cout&lt;&lt;l+1&lt;&lt;endl;            //output\n        return 0;\n    }\n</code></pre>\n\n<p>This is not correct please propose a backtracking algorithm to do the same</p>\n\n<p>Note:- No worries of time-complexity</p>\n"}, {"tags": ["c++", "variadic-templates"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441834132, "post_id": 32489337, "comment_id": 52839525, "body": "It might help to show some code that you tried. Also to show some kind of stub for &quot;Container&quot;."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1441845086, "post_id": 32489337, "comment_id": 52842808, "body": "I&#39;m voting to close this question as off-topic because you haven&#39;t tried anything yourself."}], "answers": [{"tags": [], "owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "is_accepted": true, "score": 3, "last_activity_date": 1441840920, "creation_date": 1441840920, "answer_id": 32490646, "question_id": 32489337, "link": "https://stackoverflow.com/questions/32489337/retrieve-given-member-of-variadic-class-by-int/32490646#32490646", "title": "Retrieve given member of variadic class by int", "body": "<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;class T&gt;\nstruct Container {};\n\ntemplate&lt;class... T&gt;\nclass Mgr2\n{\n\n};\n\ntemplate&lt;class T, class... args&gt;\nclass Mgr2&lt;T, args...&gt;\n{\n  Container&lt;T&gt; _container;\n  Mgr2&lt;args...&gt; _tail;\n\n  template&lt;int idx&gt;\n  auto _get(std::integral_constant&lt;int, idx&gt;) const\n    -&gt; decltype(_tail.template get&lt;idx-1&gt;())\n  { return _tail.get&lt;idx-1&gt;(); }\n\n  const Container&lt;T&gt; &amp;_get(std::integral_constant&lt;int, 0&gt;) const\n  { return _container; }\n\npublic:\n  Mgr2() { };\n\n  template&lt;int idx&gt;\n  auto get() const -&gt; decltype(this-&gt;_get(std::integral_constant&lt;int, idx&gt;()))\n  { return _get(std::integral_constant&lt;int, idx&gt;()); }\n\n};\n\nint main()\n{\n  Mgr2&lt;int, double&gt; mgr;\n  mgr.get&lt;0&gt;(); // retrieves the Container&lt;int&gt; element\n}\n</code></pre>\n\n<p>It is probably a good idea to look at <code>std::tuple</code>, though.</p>\n"}], "owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 32490646, "answer_count": 1, "score": 0, "last_activity_date": 1441840920, "creation_date": 1441833600, "question_id": 32489337, "link": "https://stackoverflow.com/questions/32489337/retrieve-given-member-of-variadic-class-by-int", "title": "Retrieve given member of variadic class by int", "body": "<p>here is a recursive class definition :</p>\n\n<pre><code>template&lt;class... T&gt;\nclass Mgr2\n{\n\n};\n\ntemplate&lt;class T, class... args&gt;\nclass Mgr2&lt;T, args...&gt;\n{\n  Container&lt;T&gt; _container;\n  Mgr2&lt;args...&gt; _tail;\npublic:\n  Mgr2() { };\n};\n</code></pre>\n\n<p>I'd like to implement the following :</p>\n\n<pre><code>Mgr2&lt;int, double&gt; mgr;\nmgr.get&lt;0&gt;(); // retrieves the Container&lt;int&gt; element\n</code></pre>\n\n<p>How could I do this? </p>\n"}, {"tags": ["c++", "makefile", "android-ndk", "g++", "ndk-build"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441868926, "post_id": 32489291, "comment_id": 52850343, "body": "You probably want <code>add_definitions</code>. In the end, that also ends up on the command line to the compiler, but it&#39;s a bit clearer semantically."}, {"owner": {"reputation": 2374, "user_id": 343178, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/u1g2Z.png?s=128&g=1", "display_name": "Alyoshak", "link": "https://stackoverflow.com/users/343178/alyoshak"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441904461, "post_id": 32489291, "comment_id": 52874465, "body": "@MSalters, thanks for the help.  I tried Michael&#39;s bc it was first and it worked fine."}], "answers": [{"comments": [{"owner": {"reputation": 2374, "user_id": 343178, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/u1g2Z.png?s=128&g=1", "display_name": "Alyoshak", "link": "https://stackoverflow.com/users/343178/alyoshak"}, "edited": false, "score": 0, "creation_date": 1441904371, "post_id": 32493812, "comment_id": 52874408, "body": "that was it.  Thanks especially for the detailed answer with an example."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": true, "score": 1, "last_activity_date": 1441862900, "creation_date": 1441862900, "answer_id": 32493812, "question_id": 32489291, "link": "https://stackoverflow.com/questions/32489291/why-does-ndk-compiler-not-recognize-a-local-cflags-definition/32493812#32493812", "title": "Why does NDK compiler not recognize a LOCAL_CFLAGS definition?", "body": "<p>From <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Invocation.html\" rel=\"nofollow\">the GCC documentation</a> (it should be the same if you use Clang):</p>\n\n<blockquote>\n  <p><code>-D name</code><br>\n  Predefine name as a macro, with definition 1. <br><br>\n  <code>-D name=definition</code><br>\n  The contents of <code>definition</code> are tokenized and processed as if they appeared during translation phase three in a \u2018#define\u2019 directive. In particular, the definition will be truncated by embedded newline characters.</p>\n</blockquote>\n\n<p>So to define <code>WINONLY</code> with the value 1 you'd use:</p>\n\n<pre><code>LOCAL_CFLAGS := -DWINONLY=1\n</code></pre>\n\n<p>or simply</p>\n\n<pre><code>LOCAL_CFLAGS := -DWINONLY\n</code></pre>\n"}], "owner": {"reputation": 2374, "user_id": 343178, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/u1g2Z.png?s=128&g=1", "display_name": "Alyoshak", "link": "https://stackoverflow.com/users/343178/alyoshak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 0, "accepted_answer_id": 32493812, "answer_count": 1, "score": 0, "last_activity_date": 1441862900, "creation_date": 1441833387, "question_id": 32489291, "link": "https://stackoverflow.com/questions/32489291/why-does-ndk-compiler-not-recognize-a-local-cflags-definition", "title": "Why does NDK compiler not recognize a LOCAL_CFLAGS definition?", "body": "<p>I have some pre-existing code I'm trying to compile into an NDK library.  There's a simply #ifndef I need to execute correctly, but in my Android.mk the var I've defined with LOCAL_CFLAGS is not recognized.  It thinks it's a command line option  </p>\n\n<p>When I run ndk-build with the NDK_LOG option it all compiles fine until I see this:</p>\n\n<pre><code>[armeabi-v7a] Compile++ thumb: NDKImageProcessor &lt;= NDKImageProcessor.cpp\narm-linux-androideabi-g++: error: unrecognized command line option '-WINONLY=1'\nmake: *** [obj/local/armeabi-v7a/objs/NDKImageProcessor/NDKImageProcessor.o] Error 1\n</code></pre>\n\n<p>I'm simply trying to get the following from being included in compilation:</p>\n\n<pre><code>#ifndef WINONLY\n    #import &lt;CoreGraphics/CGGeometry.h&gt;\n#endif\n</code></pre>\n\n<p>Android.mk is pretty straightforward:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE    := NDKImageProcessor\n\nLOCAL_SRC_FILES := NDKImageProcessor.cpp\nLOCAL_SRC_FILES += ../../../../SharedSrc/Image.cpp\n\nLOCAL_LDLIBS := -llog\n\nLOCAL_CFLAGS := -WINONLY=1\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>If I simply do not add that LOCAL_CFLAGS line the compiler tries to compile that iOS code, which is a no-go obviously.</p>\n"}, {"tags": ["c++", "vector", "integer", "chars"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1441832960, "post_id": 32489195, "comment_id": 52839000, "body": "What are you trying to do? Were are you getting stuck? What&#39;s not working? What is working? What are you expecting. So many questions, so few  answers."}, {"owner": {"reputation": 9, "user_id": 2917285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d63cde8ead15ee88785e6f2b52b24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/2917285/jack"}, "edited": false, "score": 0, "creation_date": 1441833327, "post_id": 32489195, "comment_id": 52839163, "body": "sorry. what i am trying: i want a vector3i (3 dimensional - type integer) as the following: <a href=\"https://suckmypic.net/84501/aim.png\" rel=\"nofollow noreferrer\">suckmypic.net/84501/aim.png</a>"}, {"owner": {"reputation": 9, "user_id": 2917285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d63cde8ead15ee88785e6f2b52b24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/2917285/jack"}, "edited": false, "score": 1, "creation_date": 1441833357, "post_id": 32489195, "comment_id": 52839183, "body": "the file size is not static by the way :D"}, {"owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "edited": false, "score": 2, "creation_date": 1441833358, "post_id": 32489195, "comment_id": 52839186, "body": "Hello and welcome to stackoverflow! Could you provide an example code that actually compiles, what we call an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>? Like providing an <code>int main()</code> with parenthesis, and also where does <code>m_numInput</code> comes from and what it is ? Also what is your <i>actual</i> issue? Are you getting an error you cannot understand? Is there a bug in your program you don&#39;t understand? Try asking a very specific question, and make a single question for each issue you&#39;re trying to solve. The more focused your questions are, the better the answers will be!"}, {"owner": {"reputation": 9, "user_id": 2917285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d63cde8ead15ee88785e6f2b52b24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/2917285/jack"}, "edited": false, "score": 1, "creation_date": 1441833513, "post_id": 32489195, "comment_id": 52839258, "body": "sorry for being so unspecific. i dont know how to edit my post. it looks terrible. if i find it i will rework it"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441833531, "post_id": 32489195, "comment_id": 52839265, "body": "The input loop should be <code>while(file &gt;&gt; tmpNumPoints &gt;&gt; tmpint &gt;&gt; tmpint &gt;&gt; tmpint &gt;&gt; tmpNumFired &gt;&gt; tmpNumGot)</code> . No idea what you are doing with <code>getline</code>; or the temp string as there are no words in between your numbers... if you are still having trouble then post a MCVE which outputs something and explain how the output differs from what you expected"}, {"owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "edited": false, "score": 0, "creation_date": 1441833560, "post_id": 32489195, "comment_id": 52839280, "body": "@user2917285, hint: click the &quot;edit&quot; button below the post"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441833835, "post_id": 32489195, "comment_id": 52839406, "body": "When you say you want a three dimensional array, do you mean an array with three elements (one each for x, y, and z for example) or an array shaped like a Rubic&#39;s cube?"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 2917285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d63cde8ead15ee88785e6f2b52b24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/2917285/jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1441835285, "creation_date": 1441835285, "answer_id": 32489694, "question_id": 32489195, "link": "https://stackoverflow.com/questions/32489195/read-specific-integers-from-file-with-chars-into-vector-c/32489694#32489694", "title": "Read specific integers from file with chars into vector (C++)", "body": "<blockquote>\n  <p>The input loop should be while(file >> tmpNumPoints >> tmpint >>\n  tmpint >> tmpint >> tmpNumFired >> tmpNumGot) . No idea what you are\n  doing with getline; or the temp string as there are no words in\n  between your numbers... if you are still having trouble then post a\n  MCVE which outputs something and explain how the output differs from\n  what you expected \u2013  M.M</p>\n</blockquote>\n\n<p>Hi, i am sorry for this bad post. Thanks to M.M i now have the correct output.</p>\n\n<p>i wanted this:\n<a href=\"https://suckmypic.net/84503/aim.png\" rel=\"nofollow\">https://suckmypic.net/84503/aim.png</a></p>\n\n<p>here is the corrected code:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main(){\n\n    std::vector&lt;Vector3i&gt; m_numInput; ///&lt; this is a vector of a sfml specific vector(x,y,z type int)\n\n    //first open the file\n    std::fstream file;\n    file.open(\"highscore.txt\", std::ios::in);\n    if (file.fail()){\n        perror(\"could not load highscore.txt file\\n\");\n    }\n\n    //create some stuff for temp save\n    int tmpNumPoints, tmpNumFired, tmpNumGot, tmpint;\n\n    //now extract the integer we need (points, shots fired, shots got)\n    while (file &gt;&gt; tmpNumPoints &gt;&gt; tmpint &gt;&gt; tmpint &gt;&gt; tmpint &gt;&gt; tmpNumFired &gt;&gt; tmpNumGot){\n\n        std::cout &lt;&lt; \"X: \" &lt;&lt; tmpNumPoints &lt;&lt; \" Y: \" &lt;&lt; tmpNumFired &lt;&lt; \" Z: \" &lt;&lt; tmpNumGot &lt;&lt; \"\\n\";\n        //and store it into the integer\n        //------------------------X--------------Y----------Z-------\n        m_numInput.emplace_back(tmpNumPoints, tmpNumFired, tmpNumGot);\n    }\n\n    //close file\n    file.close();\n}\n</code></pre>\n\n<p>Thank you all, and again - please excuse my bad style</p>\n"}], "owner": {"reputation": 9, "user_id": 2917285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d63cde8ead15ee88785e6f2b52b24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/2917285/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1441835285, "creation_date": 1441832892, "last_edit_date": 1441834351, "question_id": 32489195, "link": "https://stackoverflow.com/questions/32489195/read-specific-integers-from-file-with-chars-into-vector-c", "title": "Read specific integers from file with chars into vector (C++)", "body": "<p>I used the search function but could not really find what i was searching for.</p>\n\n<p>I have the following problem:</p>\n\n<p>There is a file like this:</p>\n\n<pre><code>370 18 28 1 129 120 \n0 0 0 0 0 0 \n0 0 0 0 0 0 \n0 0 0 0 0 0 \n0 0 0 0 0 0 \n0 0 0 0 0 0 \n0 0 0 0 0 0 \n370 18 28 1 129 78 \n0 0 0 0 0 0 \n</code></pre>\n\n<p><a href=\"https://suckmypic.net/84499/data.png\" rel=\"nofollow\">https://suckmypic.net/84499/data.png</a></p>\n\n<p>I want to read the 1st, 5th and 6th integers into a 3-dimensional vector.\nafter that i want to sort the data etc.. but i just cant read this in</p>\n\n<p>Here is what i have:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main{\n\n    //first open the file\n    std::fstream file;\n    file.open(\"highscore.txt\", std::ios::in);\n    if (file.fail()){\n        perror(\"could not load highscore.txt file\\n\");\n    }\n\n    //create some stuff for temp save\n    std::string tmp;\n    int tmpNumPoints, tmpNumFired, tmpNumGot, tmpint;\n\n    //now extract the integer we need (points, shots fired, shots got)\n    while (std::getline(file, tmp, '\\n')){\n        //IN-(1)STRING--POINTS--------(2)--------------(3)---------------(4)--------------(5)----Shots fired----(6)----Shots got\n        file &gt;&gt; tmpNumPoints &gt;&gt; tmp &gt;&gt; tmpint &gt;&gt; tmp &gt;&gt; tmpint &gt;&gt; tmp &gt;&gt; tmpint &gt;&gt; tmp &gt;&gt; tmpNumFired &gt;&gt; tmp &gt;&gt; tmpNumGot &gt;&gt; tmp;\n\n        //and store it into the integer\n        //------------------------X--------------Y----------Z-------\n        m_numInput.emplace_back(tmpNumPoints, tmpNumFired, tmpNumGot);\n    }\n\n    //close the file\n    file.close();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "pointers", "matrix", "vector"], "comments": [{"owner": {"reputation": 532, "user_id": 3049908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a7f92ff124203b5e5d1b3d9a15f171?s=128&d=identicon&r=PG&f=1", "display_name": "maxime.bochon", "link": "https://stackoverflow.com/users/3049908/maxime-bochon"}, "edited": false, "score": 0, "creation_date": 1441833237, "post_id": 32489184, "comment_id": 52839129, "body": "For this kind of problem, executing your program with <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> might help revealing details on the segmentation fault and maybe other memory leaks."}, {"owner": {"reputation": 748, "user_id": 1560509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SeHe1.jpg?s=128&g=1", "display_name": "memo1288", "link": "https://stackoverflow.com/users/1560509/memo1288"}, "edited": false, "score": 2, "creation_date": 1441833643, "post_id": 32489184, "comment_id": 52839311, "body": "When you <code>push_back</code>, you create a copy which has the same pointers (pointers are copied by value). It is then pointing to the same memory, which you then delete. You want to create a copy constructor which allocates memory for the new matrix."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441837032, "post_id": 32489184, "comment_id": 52840638, "body": "Evil twin of <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 0, "last_activity_date": 1441833769, "creation_date": 1441833769, "answer_id": 32489375, "question_id": 32489184, "link": "https://stackoverflow.com/questions/32489184/push-a-2d-array-into-a-vector-and-delete-the-array-but-cause-segmentation-fault/32489375#32489375", "title": "push a 2D array into a vector and delete the array, but cause segmentation fault", "body": "<p>Your <code>Matrix</code> class doesn't have a proper <code>copy constructor</code> so when you push the new matrix to the <code>vector</code> all the fields are copied to a new created <code>Matrix</code> inside the <code>vector</code>. </p>\n\n<p><strong>AND</strong> <code>Matrix::data</code> is also copied as a pointer. Which means that the new <code>Matrix</code> inside the <code>vector</code> points to <strong>the same</strong> <code>Matrix</code> <code>a</code> that you created in the <code>for</code> loop. Thus, when you delete <code>a</code> you actually make the <code>Matrix</code> inside the <code>vector</code> invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 3, "last_activity_date": 1441833940, "creation_date": 1441833940, "answer_id": 32489420, "question_id": 32489184, "link": "https://stackoverflow.com/questions/32489184/push-a-2d-array-into-a-vector-and-delete-the-array-but-cause-segmentation-fault/32489420#32489420", "title": "push a 2D array into a vector and delete the array, but cause segmentation fault", "body": "<p>I see multiple problems in your code:</p>\n\n<ul>\n<li>it's C++ and you are manually allocating memory for the matrix, why?</li>\n<li>even if you have access to destructors you don't implement it but you delete data for the matrix manually in the main code</li>\n<li>your approach doesn't manage memory clearly, when you <code>push_back</code> by value, the <code>Matrix</code> is copied inside the vector, who owns the pointers for the data at this point? The copy on stack or the copy inside the vector?</li>\n</ul>\n\n<p><strong>You should take care of carefully manage memory by implementing a correct copy constructor, copy assignment operator and destructor for the class.</strong></p>\n\n<p>But this is irrelevant since you can just use C++ features and forget about these problems, some solutions:</p>\n\n<h3>Store pointers in the vector</h3>\n\n<pre><code>class Matrix{\npublic:\n  Matrix(int row, int col){\n    rows = row; cols = col;\n    data = new Type*[rows];\n    for(int i = 0; i &lt; rows; i++){\n      data[i] = new Type[cols];\n    }\n  }\n  ~Matrix() {  // you need a destructor\n    for (int i = 0; i &lt; rows; ++i)\n      delete[] data[i];\n    delete data;\n  }\npublic:\n  int rows;\n  int cols;\n  Type **data;\n};\n\nstd::vector&lt;std::unique_ptr&lt;Matrix&gt;&gt; v;\nMatrix* matrix = new Matrix(3,3);\nv.push_back(std::unique_ptr&lt;Matrix&gt;(matrix));\n</code></pre>\n\n<p>Now matrices become persistent but they'll get automatically released when <code>v</code> goes out of scope (thanks to <code>unique_ptr</code> and destructor)</p>\n\n<h3>Use a <code>std::vector</code> / <code>std::array</code> for matrix elements</h3>\n\n<p>You are using them to store multiple matrices, why don't you use them also for matrix itself?</p>\n\n<pre><code>template&lt;size_t ROWS, size_t COLS, class TYPE&gt;\nclass Matrix\n{\n  std::array&lt;std::array&lt;COLS, TYPE&gt;, ROWS&gt; data;\n  ...\n}\n</code></pre>\n\n<p>Now everything is automatically managed, you don't need to release memory and you don't need a destructor for <code>Matrix</code> at all.</p>\n\n<pre><code>std::vector&lt;Matrix&lt;3,3,float&gt;&gt; v;\nMatrix&lt;3,3,float&gt; m;\nv.emplace_back(m);\nm.data[0][0] = 1;\n</code></pre>\n\n<p>If you want to have different sizes of matrices in same vector or if you want to keep stack usage low (since <code>std::array</code> is not dynamically allocated) then use a <code>std::vector</code> instead that an <code>std::array</code> so that you can remove the template arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1441838405, "creation_date": 1441838405, "answer_id": 32490276, "question_id": 32489184, "link": "https://stackoverflow.com/questions/32489184/push-a-2d-array-into-a-vector-and-delete-the-array-but-cause-segmentation-fault/32490276#32490276", "title": "push a 2D array into a vector and delete the array, but cause segmentation fault", "body": "<p>OP's problem is a classic <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow\">Rule of Three</a> violation.</p>\n\n<p>The class uses raw pointers to memory allocated by the constructor</p>\n\n<pre><code>Matrix(int row, int col)\n{\n    rows = row; cols = col;\n    data = new Type*[rows];\n    for(int i = 0; i &lt; rows; i++)\n    {\n        data[i] = new Type[cols]; \n    }\n}\n</code></pre>\n\n<p>The destructor deletes all of the memory so there will be no leak.</p>\n\n<pre><code>~Matrix() \n{  // you need a destructor\n    for (int i = 0; i &lt; rows; ++i)\n        delete[] data[i];\n    delete data;\n}\n</code></pre>\n\n<p>However, there are no copy or move constructors or assign or move operators, so the defaults will simply copy the pointers, resulting in two objects pointing to the same memory.</p>\n\n<p>Not only are both copies modified when one is changed, but when one is deleted, the other copy's pointers are rendered invalid.</p>\n\n<p>This is generally seen as bad.</p>\n\n<p>Solution one is create copy and move constructors and assignment and move operators, but that is a bit of work to get right.</p>\n\n<p>Thankfully, <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\">std::vector</a> gets it right out of the box.</p>\n\n<pre><code>template&lt;class Type&gt;\nclass Matrix{\npublic:\n  Matrix(int row, int col):rows(row), cols(col), data(rows, std::vector(cols))\n  {\n    // does nothing. All of the heavy lifting was in the initializer\n  }\n  // no longer need a destructor.\npublic:\n  int rows;\n  int cols;\n  std::vector&lt;std::vector&lt;type&gt;&gt; data;\n};\n</code></pre>\n\n<p>The next bit I suggest as a performance enhancement. Because the vector of vectors is literally a vector containing other vectors, it's not all in one memory block. Having to jump around in RAM to find the next bit of data can be costly. Look up <a href=\"https://en.wikipedia.org/wiki/CPU_cache\" rel=\"nofollow\">Cache Miss</a> and <a href=\"https://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"nofollow\">Spatial locality</a> to see why.</p>\n\n<pre><code>template&lt;class Type&gt;\nclass Matrix{\npublic:\n  Matrix(int row, int col):rows(row), cols(col), data(rows*cols)\n  {\n    // does nothing. All of the heavy lifting was in the initializer\n  }\n  // no longer need a destructor.\n  //add a convenience method for easy access to the vector\n  type &amp; operator()(size_t row, size_t col)\n  {\n    return data[row*cols+col];\n  } \n  type operator()(size_t row, size_t col) const\n  {\n    return data[row*cols+col];\n  } \nprivate: // note change of access to private Best to keep ones data to one's self\n  int rows;\n  int cols;\n  std::vector&lt;type&gt; data;\n};\n</code></pre>\n\n<p>Now your're safe for stuff like:</p>\n\n<pre><code>std::vector&lt;Matrix&lt;float&gt;&gt; v;\nMatrix&lt;float&gt; m(3,3);\nv.emplace_back(m);\nm(0,0) = 1;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1441838405, "creation_date": 1441832841, "question_id": 32489184, "link": "https://stackoverflow.com/questions/32489184/push-a-2d-array-into-a-vector-and-delete-the-array-but-cause-segmentation-fault", "title": "push a 2D array into a vector and delete the array, but cause segmentation fault", "body": "<p>I have a class named Matrix. There is a 2D array in the class to save the data. </p>\n\n<pre><code>    template &lt;class Type&gt;\n    class Matrix{\n        public:\n           Matrix(int row, int col){\n             rows = row; cols = col;\n             data = new Type*[rows];\n             for(int i = 0; i &lt; rows; i++){\n              data[i] = new Type[cols]; \n              }\n           }\n      public: \n         int rows;\n         int cols;\n         Type **data;\n    };\n</code></pre>\n\n<p>And I have a vector to save the Matrix. Every time I have a Matrix, I will push back the matrix in this vector for future calculation. In order to avoid memory leak, I want to delete the Matrix after pushing it back to the vector. But if I don't delete it, the program works; if I delete it (as shown in the code below), the program will show the segmentation fault when I want to do some calculation for this vector. The code I used is shown below</p>\n\n<pre><code>    vector&lt;Matrix&lt;int&gt;&gt; v; \n    for(int i = 0; i &lt; 10; ++i){\n         Matrix&lt;int&gt; a(3,3);\n                 ...... // I fill the elements of a.data\n       v.push_back(a);\n       for(int j = 0; j &lt; a.rows; ++j)\n             delete[] a.data[j];\n       delete[] a.data;\n    }\n</code></pre>\n\n<p>Hope I have explained my problem clearly. If anything makes you confuse, please comment me.  </p>\n\n<p>Thanks for help!!!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1441832854, "post_id": 32489133, "comment_id": 52838944, "body": "Variables do not go in single quotes, and <code>==</code> does not assign."}, {"owner": {"reputation": 1883, "user_id": 1681097, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aVWcd.jpg?s=128&g=1", "display_name": "Adi Bradfield", "link": "https://stackoverflow.com/users/1681097/adi-bradfield"}, "edited": false, "score": 0, "creation_date": 1441833352, "post_id": 32489133, "comment_id": 52839178, "body": "And programs (nearly) never print the wrong thing. They just do what you tell them!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1441833366, "post_id": 32489133, "comment_id": 52839189, "body": "There should have been a &quot;warning: statement has no effect&quot; for <code>&#39;A&#39; == Const * Radius;</code> or your compiler&#39;s equivalent message. If you aren&#39;t getting these warnings, check your development environment documentation for how to turn them on and read them. Your bacon they can save."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5318813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d043e7df919b6114ddf1326d5e6680e?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5318813/josh"}, "edited": false, "score": 0, "creation_date": 1441834070, "post_id": 32489220, "comment_id": 52839496, "body": "Thank you so much Alex. I&#39;m still relatively new to c++, like I&#39;ve only been in the class for 2 weeks, and you&#39;ve helped me immensely!"}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": true, "score": 1, "last_activity_date": 1441833298, "last_edit_date": 1441833298, "creation_date": 1441832995, "answer_id": 32489220, "question_id": 32489133, "link": "https://stackoverflow.com/questions/32489133/my-program-is-printing-the-wrong-thing-after-completing-and-i-cant-figure-out/32489220#32489220", "title": "My program is printing the wrong thing after completing, and I can&#39;t figure out why. C++", "body": "<p>I think you better review the latest lesson in C++ first.</p>\n\n<p>Here is the fix for your code:</p>\n\n<pre><code>double a = Const * Radius; //'A' == Const * Radius;\n\ndouble c = 2 * Const * Radius; //'C' == 2 * Const * Radius;  \n\ndouble d = 2 * Radius; //'D' == 2 * Radius;  \n\nif (Code == 'A')\n    cout &lt;&lt; \"The area of a circle with radius\" &lt;&lt; Radius &lt;&lt;   \"is\" &lt;&lt; a /*'A'*/&lt;&lt; endl;\n\n\nelse if (Code == 'C')\n    cout &lt;&lt; \"The circumference of a circle with radius\" &lt;&lt;  Radius &lt;&lt; \"is\" &lt;&lt; c /*'C'*/ &lt;&lt; endl;\n\n\nelse if (Code == 'D')\n    cout &lt;&lt; \"The diameter of a circle with radius\" &lt;&lt; Radius &lt;&lt; \"is\" &lt;&lt; d /*'D'*/ &lt;&lt; \n\nendl; \n</code></pre>\n\n<p>'A', 'B', 'C' are values as well as 1, 3, 100, etc.</p>\n\n<p><code>=</code> is an assignment operator while <code>==</code> is compare operator.</p>\n\n<p>Once you write something like <code>'A' == Radius;</code> it will be evaluated to boolean (most likely <code>false</code> value) and that's it. In the same way you can write <code>false;</code> or <code>5;</code> in your code. It does nothing at all.</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 4161264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9451b39389805d54fbbb79a8f91c3972?s=128&d=identicon&r=PG&f=1", "display_name": "Osama Bin Omar", "link": "https://stackoverflow.com/users/4161264/osama-bin-omar"}, "is_accepted": false, "score": 0, "last_activity_date": 1441833664, "creation_date": 1441833664, "answer_id": 32489349, "question_id": 32489133, "link": "https://stackoverflow.com/questions/32489133/my-program-is-printing-the-wrong-thing-after-completing-and-i-cant-figure-out/32489349#32489349", "title": "My program is printing the wrong thing after completing, and I can&#39;t figure out why. C++", "body": "<p>You're not assigning the value but making it equal to that. by the you can assign a value to char.</p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\n/*run this program using the console pauser or add your own     getch, system(\"pause\") or input loop */\n\nint main(int argc, char** argv) {\n\ncout &lt;&lt; fixed &lt;&lt; setprecision(2);\nchar Code;\ndouble Radius;\n\n//promt for a code and A, C, or D\ncout &lt;&lt; \"Please enter your code A, C, or D \";\n\n// read the input\ncin &gt;&gt; Code;\n\n//promt user for value of radius\ncout &lt;&lt; \"Please enter a value for the radius\";\n\n//read the input radius\ncin &gt;&gt; Radius;\n// based on the code, calculate the required computed result\ndouble Const;\n\nConst = 3.1416;\n/*      NO need of this. you can't assign value to a char.\n'A' == Const * Radius;\nyou have used == sign whic is not assigning\n'C' = 2 * Const * Radius;  \n\n'D' = 2 * Radius;  \n*/\nif (Code == 'A'){\n    float temp;    //change\n    temp=Const * Radius;   //change\n    cout &lt;&lt; \"The area of a circle with radius\" &lt;&lt; Radius &lt;&lt;   \"is\" &lt;&lt; temp &lt;&lt; endl;\n\n}\n\n\nelse if (Code == 'C'){\n    float temp;\n    temp=2 * Const * Radius; \n    cout &lt;&lt; \"The circumference of a circle with radius\" &lt;&lt;  Radius &lt;&lt; \"is\" &lt;&lt; temp&lt;&lt; endl; \n}\n\n\n\nelse if (Code == 'D'){\n    float temp;\n    temp=2 * Radius;  \n    cout &lt;&lt; \"The diameter of a circle with radius\" &lt;&lt; Radius &lt;&lt; \"is\" &lt;&lt; temp &lt;&lt; endl;    \n}\n    //Hope this helps.\n//output the result\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5318813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d043e7df919b6114ddf1326d5e6680e?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5318813/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 32489220, "answer_count": 2, "score": -1, "last_activity_date": 1441833900, "creation_date": 1441832617, "question_id": 32489133, "link": "https://stackoverflow.com/questions/32489133/my-program-is-printing-the-wrong-thing-after-completing-and-i-cant-figure-out", "title": "My program is printing the wrong thing after completing, and I can&#39;t figure out why. C++", "body": "<p>When the program is operating correctly, it is supposed to ask the user for a code (A, C ,D) and then ask for a Radius.</p>\n\n<p>Which it does fine.</p>\n\n<p>But when it's finished it is supposed to cout something that looks like \"The area of a circle with radius 6.75 is 143.14\"</p>\n\n<p>But when I run mine, it prints \"The area of a circle with radius 6.75 is A.\" I just can't seem to find what I'm doing wrong, and any help is greatly appreciated</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\n/*run this program using the console pauser or add your own     getch, system(\"pause\") or input loop */\n\nint main(int argc, char** argv) {\n\ncout &lt;&lt; fixed &lt;&lt; setprecision(2);\nchar Code;\ndouble Radius;\n\n//promt for a code and A, C, or D\ncout &lt;&lt; \"Please enter your code A, C, or D \";\n\n// read the input\ncin &gt;&gt; Code;\n\n//promt user for value of radius\ncout &lt;&lt; \"Please enter a value for the radius\";\n\n//read the input radius\ncin &gt;&gt; Radius;\n// based on the code, calculate the required computed result\ndouble Const;\n\nConst = 3.1416;\n\n'A' == Const * Radius;\n\n'C' == 2 * Const * Radius;  \n\n'D' == 2 * Radius;  \n\nif (Code == 'A')\n    cout &lt;&lt; \"The area of a circle with radius\" &lt;&lt; Radius &lt;&lt;   \"is\" &lt;&lt; 'A' &lt;&lt; endl;\n\n\nelse if (Code == 'C')\n    cout &lt;&lt; \"The circumference of a circle with radius\" &lt;&lt;  Radius &lt;&lt; \"is\" &lt;&lt; 'C' &lt;&lt; endl;\n\n\nelse if (Code == 'D')\n    cout &lt;&lt; \"The diameter of a circle with radius\" &lt;&lt; Radius &lt;&lt; \"is\" &lt;&lt; 'D' &lt;&lt; endl;    \n//output the result\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "random", "srand"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1441832395, "post_id": 32489058, "comment_id": 52838677, "body": "Actually that will be between 0 and num-2, as the end iterator should be one past the end. Using <code>std::end</code> would probably have prevented that."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1441832974, "post_id": 32489058, "comment_id": 52839009, "body": "You always get the same numbers? Even if you wait five minutes between runs?"}, {"owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "edited": false, "score": 0, "creation_date": 1441833014, "post_id": 32489058, "comment_id": 52839033, "body": "You&#39;re right - that is true and I just fixed that. I&#39;m still getting the same random numbers though (however now they&#39;re different from the ones I kept getting before)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1441841497, "post_id": 32489058, "comment_id": 52841984, "body": "Call <code>srand</code> exactly once, before any calls to <code>rand</code>, and call it with <code>time(NULL)</code> as the parameter."}, {"owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "edited": false, "score": 0, "creation_date": 1441843877, "post_id": 32489058, "comment_id": 52842525, "body": "David- I did do that, except now I have accidentally erased my whole program so I have to do the whole thing over. Who knows, maybe it won&#39;t do this weird thing anymore :/"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "edited": false, "score": 0, "creation_date": 1441837816, "post_id": 32489880, "comment_id": 52840898, "body": "You may not believe this, but in opening up an Xcode project to run this code, I accidentally deleted my whole project which I had been working on for over a week. I kid you not. So now I don&#39;t even know anymore. I have to start all over. I swear I&#39;m not kidding."}, {"owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "edited": false, "score": 0, "creation_date": 1441850491, "post_id": 32489880, "comment_id": 52844051, "body": "WhiteViking - I did run this code, and it did create different random numbers each time. The code which I&#39;ve now rewritten (not the whole program) is still giving the same random numbers each time. I&#39;m pretty sure it&#39;s happening here: random_shuffle(&amp;chrom_array[0], &amp;chrom_array[num-1]);"}], "tags": [], "owner": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "is_accepted": false, "score": 2, "last_activity_date": 1441869612, "last_edit_date": 1495542575, "creation_date": 1441836337, "answer_id": 32489880, "question_id": 32489058, "link": "https://stackoverflow.com/questions/32489058/trouble-generating-random-numbers-in-c-on-a-mac-using-xcode/32489880#32489880", "title": "Trouble generating random numbers in c++ on a Mac using Xcode", "body": "<p>Alex, can you please post a small but complete program that fails to generate different random numbers every time you run it? I'd be interested to see it...</p>\n\n<p>Here's one that (of course) <em>does</em> yield different numbers every time it is run on my Mac:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;cstdlib&gt;\n\nint main()\n{\n    srand(time(NULL));\n    for (int i = 0; i &lt; 10; ++i)\n        std::cout &lt;&lt; rand() % 10 &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>What does it do if you compile and run it several times on your computer?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I thought you meant <code>srand()</code> + <code>rand()</code> <em>also</em> produced identical numbers every time. That is not true. However, you are right about the behaviour of <code>srand()</code> + <code>random_shuffle()</code>: it may indeed produce the same numbers every time, depending on your compiler. It does on my compiler (clang on Mac) too.</p>\n\n<p>This is explained <a href=\"https://stackoverflow.com/questions/22496942/stdrandom-shuffle-produce-the-same-result-even-though-srandtime0-called-on\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "edited": false, "score": 0, "creation_date": 1441843906, "post_id": 32490682, "comment_id": 52842531, "body": "I&#39;ll try that once I write my program again (I just accidentally erased the whole thing...)"}, {"owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "edited": false, "score": 0, "creation_date": 1441850651, "post_id": 32490682, "comment_id": 52844090, "body": "Hey this actually worked. Thanks! I don&#39;t know what it was doing before."}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": true, "score": 1, "last_activity_date": 1441841190, "creation_date": 1441841190, "answer_id": 32490682, "question_id": 32489058, "link": "https://stackoverflow.com/questions/32489058/trouble-generating-random-numbers-in-c-on-a-mac-using-xcode/32490682#32490682", "title": "Trouble generating random numbers in c++ on a Mac using Xcode", "body": "<p>You should try somethig like this:</p>\n\n<pre><code>srand(static_cast&lt;unsigned int&gt;(time(0)));\nstd::shuffle(chrom_arr.begin(), chrom_arr.end(), default_random_engine(rand()));\n</code></pre>\n\n<p>This will work as long as <code>chrom_arr</code> is a <code>std::vector</code>. Once you are using C++, I presume this is what you are trying to do.</p>\n"}], "owner": {"reputation": 15, "user_id": 5313257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DMVPW.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5313257/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4440, "favorite_count": 0, "closed_date": 1441900693, "accepted_answer_id": 32490682, "answer_count": 2, "score": 1, "last_activity_date": 1441869612, "creation_date": 1441832300, "last_edit_date": 1441837079, "question_id": 32489058, "link": "https://stackoverflow.com/questions/32489058/trouble-generating-random-numbers-in-c-on-a-mac-using-xcode", "closed_reason": "Duplicate", "title": "Trouble generating random numbers in c++ on a Mac using Xcode", "body": "<p>I am writing a program that uses random numbers extensively in different ways and I am getting the same random numbers each time. I know to put <code>srand(time(NULL));</code>at the beginning of the program to seed the random number generator and so I have that, but it isn't working. Perhaps it has something to do with XCode or the Mac or something else? I can't find a similar problem online that I has a solution I haven't already tried. Some ways I'm using the random numbers are:</p>\n\n<pre><code>for (int i=0; i&lt;num; i++)\n{\n    chrom_arr[i] = i;\n}\nrandom_shuffle(&amp;chrom_arr[0], &amp;chrom_arr[num-1]);\n</code></pre>\n\n<p>(to get an array with a series of random ints between 0 and num-1)</p>\n\n<pre><code>int crossover = rand() % num;\n</code></pre>\n\n<p>and other simple things like that. Even though I have <code>srand(time(NULL));</code> at the beginning, it still doesn't work. I've also tried <code>srand(time(0));</code> and also putting it in different parts of the program, but I have since learned that's not right. </p>\n"}, {"tags": ["c++", "cgal", "quadratic-programming", "mps-format"], "answers": [{"comments": [{"owner": {"reputation": 16, "user_id": 5333478, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f5096ed4d3a15f57aa95b5f6113fc371?s=128&d=identicon&r=PG", "display_name": "Bernd G&#228;rtner", "link": "https://stackoverflow.com/users/5333478/bernd-g%c3%a4rtner"}, "edited": false, "score": 0, "creation_date": 1442226887, "post_id": 32562651, "comment_id": 52980389, "body": "Sorry, the post got garbled. You should indeed use the type double instead of int in the Program typedef."}, {"owner": {"reputation": 77, "user_id": 2300944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a4bbdd413185eb6d08a549f3a2dfe5?s=128&d=identicon&r=PG", "display_name": "user2300944", "link": "https://stackoverflow.com/users/2300944/user2300944"}, "edited": false, "score": 0, "creation_date": 1442230415, "post_id": 32562651, "comment_id": 52982505, "body": "Thank you, Bernd. What you suggested has worked. Why does the CGAL manual list MP_Float as the exact type that corresponds to the input type double, but it does not work properly in my case? I am referring to <a href=\"http://doc.cgal.org/latest/QP_solver/group__PkgQPSolverFunctions.html#gac769fb5f56983e35bec295b26501df7f\" rel=\"nofollow noreferrer\">this page</a>"}], "tags": [], "owner": {"reputation": 16, "user_id": 5333478, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f5096ed4d3a15f57aa95b5f6113fc371?s=128&d=identicon&r=PG", "display_name": "Bernd G&#228;rtner", "link": "https://stackoverflow.com/users/5333478/bernd-g%c3%a4rtner"}, "is_accepted": true, "score": 0, "last_activity_date": 1442226835, "creation_date": 1442226835, "answer_id": 32562651, "question_id": 32489034, "link": "https://stackoverflow.com/questions/32489034/cgal-quadratic-programming-package-finds-incorrect-solution/32562651#32562651", "title": "CGAL Quadratic Programming Package Finds Incorrect Solution", "body": "<p>You should indeed use  instead of  in the Program type. But on top of that, ET should be typedef'd as CGAL::Gmpzf (exact floating point type), and not CGAL::Gmpz (exact integral type).  </p>\n"}], "owner": {"reputation": 77, "user_id": 2300944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a4bbdd413185eb6d08a549f3a2dfe5?s=128&d=identicon&r=PG", "display_name": "user2300944", "link": "https://stackoverflow.com/users/2300944/user2300944"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 1, "accepted_answer_id": 32562651, "answer_count": 1, "score": 3, "last_activity_date": 1442226835, "creation_date": 1441832219, "last_edit_date": 1441838060, "question_id": 32489034, "link": "https://stackoverflow.com/questions/32489034/cgal-quadratic-programming-package-finds-incorrect-solution", "title": "CGAL Quadratic Programming Package Finds Incorrect Solution", "body": "<p>I am using CGAL QP package to solve the following quadratic problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SrxsG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SrxsG.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am using the following MPS file to define the problem (first_qp.mps):</p>\n\n<pre><code>NAME first_qp\nROWS\nE c0\nCOLUMNS\nx0  c0  1\nx1  c0  1\nx2  c0  1\nx3  c0  1\nx4  c0  1\nx5  c0  1\nx6  c0  1\nx7  c0  1\nx8  c0  1\nRHS\nrhs c0  1\nBOUNDS\nUP  BND  x0  0.2\nUP  BND  x1  0.2\nUP  BND  x2  0.2\nUP  BND  x3  0.2\nUP  BND  x4  0.2\nUP  BND  x5  0.2\nUP  BND  x6  0.2\nUP  BND  x7  0.2\nUP  BND  x8  0.2\nQUADOBJ\nx0  x0  39.07\nx1  x0  25.54\nx2  x0  27.29\nx3  x0  28.56\nx4  x0  24.38\nx5  x0  10.23\nx6  x0  11.12\nx7  x0  15.26\nx8  x0  25.17\nx1  x1  38.82\nx2  x1  18.11\nx3  x1  20.67\nx4  x1  17.20\nx5  x1  8.10\nx6  x1  12.41\nx7  x1  9.82\nx8  x1  14.69\nx2  x2  39.97\nx3  x2  26.82\nx4  x2  22.55\nx5  x2  12.81\nx6  x2  10.90\nx7  x2  16.17\nx8  x2  26.42\nx3  x3  29.00\nx4  x3  24.61\nx5  x3  10.37\nx6  x3  10.65\nx7  x3  14.93\nx8  x3  23.61\nx4  x4  49.71\nx5  x4  7.04\nx6  x4  6.20\nx7  x4  17.41\nx8  x4  25.87\nx5  x5  12.47\nx6  x5  8.21\nx7  x5  7.53\nx8  x5  9.73\nx6  x6  19.02\nx7  x6  7.47\nx8  x6  7.87\nx7  x7  16.04\nx8  x7  14.95\nx8  x8  28.90\nENDATA\n</code></pre>\n\n<p>Note that I am using QUADOBJ to define the D matrix. In case of QUADOBJ, only the entries of 2D on or below the diagonal must be specified, entries above the diagonal are deduced from symmetry. I then feed this file to the solver (first_qp_from_mps.cpp):</p>\n\n<pre><code>// example: read quadratic program in MPS format from file\n// the QP below is the first quadratic program example in the user manual\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;CGAL/basic.h&gt;\n#include &lt;CGAL/QP_models.h&gt;\n#include &lt;CGAL/QP_functions.h&gt;\n\n// choose exact integral type\n#ifdef CGAL_USE_GMP\n#include &lt;CGAL/Gmpz.h&gt;\ntypedef CGAL::Gmpz ET;\n#else\n#include &lt;CGAL/MP_Float.h&gt;\ntypedef CGAL::MP_Float ET;\n#endif\n\n// program and solution types\ntypedef CGAL::Quadratic_program_from_mps&lt;int&gt; Program;\ntypedef CGAL::Quadratic_program_solution&lt;ET&gt; Solution;\n\nint main() {\n  std::ifstream in (\"first_qp.mps\");\n  Program qp(in);         // read program from file\n  assert (qp.is_valid()); // we should have a valid mps file\n\n  // solve the program, using ET as the exact type\n  Solution s = CGAL::solve_quadratic_program(qp, ET());\n\n  // output solution\n  std::cout &lt;&lt; s;\n  return 0;\n}\n</code></pre>\n\n<p>The project compiles and the executable file runs and returns the solution vector (0 1 0 0 0 0 0 0 0) and the value of the objective function is 0. I know this is not correct. The solution vector does not satisfy the upper bound constraint. The objective function evaluated at this solution vector cannot be equal to 0.</p>\n\n<p>Am I making a mistake in specifying the MPS file for my quadratic programming problem, or is there something I need to adjust in the way the solver searches for a solution? Could my problem be related to the exact type that CGAL uses?</p>\n\n<p>For instance, I have tried changing <code>&lt;int&gt;</code> to <code>&lt;double&gt;</code> in the following line</p>\n\n<pre><code>typedef CGAL::Quadratic_program_from_mps&lt;int&gt; Program;\n</code></pre>\n\n<p>The program compiled, but when I ran the executable the solver returned that no solution was feasible. But I know there is a feasible solution - I have found one using the solver in Excel.</p>\n"}, {"tags": ["c++", "arrays", "message-queue", "windows-embedded-compact"], "comments": [{"owner": {"reputation": 2653, "user_id": 1012759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ezwAs.jpg?s=128&g=1", "display_name": "CyberGuy", "link": "https://stackoverflow.com/users/1012759/cyberguy"}, "edited": false, "score": 1, "creation_date": 1441832081, "post_id": 32488983, "comment_id": 52838503, "body": "The best way to solve it is to watch the memory in the debugger."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1441832138, "post_id": 32488983, "comment_id": 52838540, "body": "VS2008? any specific reason for that ancient IDE?"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1441832239, "post_id": 32488983, "comment_id": 52838589, "body": "@MarcusM&#252;ller It is the only version of VS that is supported by Windows Embedded Compact 7 for the project i am working on (which was started almost 3 years ago when Compact 7 was the latest)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441832483, "post_id": 32488983, "comment_id": 52838726, "body": "@Javia1492 Efforts required to ask includes debugging efforts seriously. Provide a MCVE reproducing your problem please!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441832670, "post_id": 32488983, "comment_id": 52838840, "body": "You&#39;re probably writing out of bounds of an array somewhere"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441832741, "post_id": 32488983, "comment_id": 52838874, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 It would be tough to provide an MVCE because this code is for an IPC. I wouldnt be able to reduce the code for creating the processes. Likewise, most people dont have WEC7 to even be able to recreate this issue. Im not asking to debug the issue directly, but more on a theoretical sense in that how safe is it to send an array over a message queue, and on a basic level have i setup the process to work with queues correctly."}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441832996, "post_id": 32488983, "comment_id": 52839024, "body": "@M.M I have a loop variable that is set to the size of the array so that i cannot access out of bound elements. Also, when writing/reading the array from the queue, i specify 160 bytes, which is the exact size of the a <code>double array[20]</code>, so writing/reading should not go out of bounds either."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441833166, "post_id": 32488983, "comment_id": 52839101, "body": "use <code>sizeof</code> instead of magic numbers in your code. The bug is probably in code you didn&#39;t show."}], "answers": [{"tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": false, "score": 0, "last_activity_date": 1441833990, "creation_date": 1441833990, "answer_id": 32489433, "question_id": 32488983, "link": "https://stackoverflow.com/questions/32488983/array-values-changed-to-0/32489433#32489433", "title": "Array values changed to 0", "body": "<p>That looks like a timing problem in inter-process communication.  A read succeeds but with fewer characters than were sent, because of the relative timing.<br>\nYou need to check for a short read and retry to complete the desired amount.</p>\n"}], "owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1441833990, "creation_date": 1441832003, "last_edit_date": 1441832418, "question_id": 32488983, "link": "https://stackoverflow.com/questions/32488983/array-values-changed-to-0", "title": "Array values changed to 0", "body": "<p>I am passing an array through a message queue:</p>\n\n<pre><code>double data[20];\nif(i!=20)\n{\n    data[i] = getInstance()-&gt;real_time_data.f_ChannelData;\n    i++;\n}\nelse\n{\n    i = 0;\n    MsgQueueCommunicator::getInstance()-&gt;Write_Array_To_Queue(s_hMsgQueue_Communication, data);\n}\n</code></pre>\n\n<p><code>Write_Array_To_Queue()</code> looks like this:</p>\n\n<pre><code>BOOL MsgQueueCommunicator::Write_Array_To_Queue(HANDLE hq,double data[20])\n{\n    return WriteMsgQueue(hq,(LPVOID)data, 160,INFINITE,0);\n}\n</code></pre>\n\n<p>Reading from the queue is pretty much the same as writing:</p>\n\n<pre><code>BOOL MsgQueueCommunicator::Read_Buffer_From_Queue(HANDLE hq,double data[20])\n{\n    DWORD dwBytesRead;\n    DWORD dwFlags;\n    return ReadMsgQueue(hq, (LPVOID)data, 160, &amp;dwBytesRead, INFINITE, &amp;dwFlags);\n}\n</code></pre>\n\n<p>To initialize the queue on both ends, I use the following function:</p>\n\n<pre><code>HANDLE MsgQueueCommunicator::InitMessageQueue(bool IsRead,wchar16_t* wQueueName)\n{\n  MSGQUEUEOPTIONS msgopts;\n  msgopts.dwSize        = sizeof(MSGQUEUEOPTIONS);   \n  msgopts.dwFlags       = MSGQUEUE_ALLOW_BROKEN;//0;\n  msgopts.dwMaxMessages = 0;\n  msgopts.cbMaxMessage  = 160;   \n  msgopts.bReadAccess   = IsRead;   \n  HANDLE hq = CreateMsgQueue(wQueueName, &amp;msgopts);\n  return hq;\n}\n</code></pre>\n\n<p>The issue i am getting is that the last 3 values of the array will occasionally be 0. I checked by printing the values in the array before and after writing to the queue and noticed the discrepancy. I am not sure where the issue is. I've tried changing the number of bytes for the destination buffer, i printed out the number of bytes read to make sure it was correct, and I have not yet been able to find the root cause.</p>\n\n<p>Here is a snippet of what i see when i print out the values:</p>\n\n<pre><code>6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088488 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088490 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088490 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088490 PID:7bb0046 TID:6a50052 Channel Data (USB): 0\n6088490 PID:7bb0046 TID:6a50052 Channel Data (USB): 0\n6088492 PID:7bb0046 TID:6a50052 Channel Data (USB): 0\n6088528 PID:7bb0046 TID:6a50052 Bytes Read: 160\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088528 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088530 PID:7bb0046 TID:6a50052 Channel Data (USB): 0\n6088530 PID:7bb0046 TID:6a50052 Channel Data (USB): 0\n6088530 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Bytes Read: 160\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088568 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088569 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088569 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088570 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088570 PID:7bb0046 TID:6a50052 Channel Data (USB): 0\n6088570 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n6088570 PID:7bb0046 TID:6a50052 Channel Data (USB): 1100\n</code></pre>\n\n<p>The 0's are not intended, but the 1100's are. Im not sure what I am doing wrong (if any), but is it possible to send arrays over message queues without possible memory issues?</p>\n\n<p>Notes: This is being developed for Platform Builder (WEC7) and VS2008.</p>\n"}, {"tags": ["c++", "opencv", "gcc"], "comments": [{"owner": {"reputation": 853, "user_id": 339652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c46a42378dbd8720ae24c684ed9992af?s=128&d=identicon&r=PG", "display_name": "Plankalk&#252;l", "link": "https://stackoverflow.com/users/339652/plankalk%c3%bcl"}, "edited": false, "score": 1, "creation_date": 1441832358, "post_id": 32488956, "comment_id": 52838646, "body": "Because of duplicate: I am working on this project for over a year now and I never had any linking errors. So I am not really sure some general advice of what to do when linking fails is going to help me? As I said: It compiles and links without any problem with all GCCs up to 5.1 and suddenly breaks with GCC 5.2.0"}, {"owner": {"reputation": 853, "user_id": 339652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c46a42378dbd8720ae24c684ed9992af?s=128&d=identicon&r=PG", "display_name": "Plankalk&#252;l", "link": "https://stackoverflow.com/users/339652/plankalk%c3%bcl"}, "edited": false, "score": 0, "creation_date": 1441877073, "post_id": 32488956, "comment_id": 52855597, "body": "OK, so I &quot;solved&quot; the problem by building the new OpenCV 3.0 library from source. Still would be interesting to know why that was necessary."}, {"owner": {"reputation": 853, "user_id": 339652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c46a42378dbd8720ae24c684ed9992af?s=128&d=identicon&r=PG", "display_name": "Plankalk&#252;l", "link": "https://stackoverflow.com/users/339652/plankalk%c3%bcl"}, "edited": false, "score": 1, "creation_date": 1441882533, "post_id": 32488956, "comment_id": 52859217, "body": "After reading a bit I assume the reason is that with GCC 5.2.0 a new ABI is activated by default.   From the GCC release notes: The old ABI is still supported and can be used by defining the macro _GLIBCXX_USE_CXX11_ABI to 0 before including any C++ standard library headers.  So maybe that will be of help to someone else."}], "owner": {"reputation": 853, "user_id": 339652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c46a42378dbd8720ae24c684ed9992af?s=128&d=identicon&r=PG", "display_name": "Plankalk&#252;l", "link": "https://stackoverflow.com/users/339652/plankalk%c3%bcl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1441831979, "answer_count": 0, "score": 0, "last_activity_date": 1441831901, "creation_date": 1441831901, "question_id": 32488956, "link": "https://stackoverflow.com/questions/32488956/sudden-linker-error-with-gcc-5-2-0", "closed_reason": "Duplicate", "title": "Sudden linker error with GCC 5.2.0", "body": "<p>I am using OpenCV in a project and up to GCC 5.1.0 I had no problems. </p>\n\n<p>Suddenly, after installing GCC 5.2.0 (from source) I get a linker error for some of the OpenCV functions. The majority seems to work. Only the cs::im* functions seem to cause problems.</p>\n\n<pre><code>CMakeFiles/2DSIL.dir/main.cpp.o: In function `main':\n/home/c7031105/Dropbox/2DSIL/main.cpp:35: undefined reference to `cv::imread(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\n/home/c7031105/Dropbox/2DSIL/main.cpp:110: undefined reference to `cv::imwrite(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, cv::_InputArray const&amp;, std::vector&lt;int, std::allocator&lt;int&gt; &gt; const&amp;)'\nCMakeFiles/2DSIL.dir/V4.cpp.o: In function `V4::getWeights(std::vector&lt;int, std::allocator&lt;int&gt; &gt;, double&amp;)':\n/home/c7031105/Dropbox/2DSIL/V4.cpp:313: undefined reference to `cv::imread(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\nCMakeFiles/2DSIL.dir/V4.cpp.o: In function `V4::compare(std::vector&lt;int, std::allocator&lt;int&gt; &gt;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)':\n/home/c7031105/Dropbox/2DSIL/V4.cpp:110: undefined reference to `cv::imread(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\nCMakeFiles/2DSIL.dir/V4.cpp.o: In function `V4::getWeights(cv::Mat, cv::Mat, double&amp;)':\n/home/c7031105/Dropbox/2DSIL/V4.cpp:352: undefined reference to `cv::imread(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\n/home/c7031105/Dropbox/2DSIL/V4.cpp:379: undefined reference to `cv::imread(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\nCMakeFiles/2DSIL.dir/V4.cpp.o: In function `V4::compare(cv::Mat, cv::Mat, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)':\n/home/c7031105/Dropbox/2DSIL/V4.cpp:179: undefined reference to `cv::imread(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\nCMakeFiles/2DSIL.dir/V4.cpp.o: In function `void cv::Mat::push_back&lt;int&gt;(int const&amp;)':\n/usr/local/include/opencv2/core/mat.hpp:689: undefined reference to `cv::Exception::Exception(int, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\nCMakeFiles/2DSIL.dir/img_read_write.cpp.o: In function `dsil::visualize(cv::Mat const&amp;, int)':\n/home/c7031105/Dropbox/2DSIL/img_read_write.cpp:91: undefined reference to `cv::namedWindow(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int)'\n/home/c7031105/Dropbox/2DSIL/img_read_write.cpp:92: undefined reference to `cv::imshow(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, cv::_InputArray const&amp;)'\nCMakeFiles/2DSIL.dir/img_read_write.cpp.o: In function `dsil::imgwrite(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, cv::Mat const&amp;)':\n/home/c7031105/Dropbox/2DSIL/img_read_write.cpp:49: undefined reference to `cv::imwrite(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, cv::_InputArray const&amp;, std::vector&lt;int, std::allocator&lt;int&gt; &gt; const&amp;)'\ncollect2: error: ld returned 1 exit status\nmake[3]: *** [2DSIL] Error 1\nmake[2]: *** [CMakeFiles/2DSIL.dir/all] Error 2\nmake[1]: *** [CMakeFiles/2DSIL.dir/rule] Error 2\nmake: *** [2DSIL] Error 2\n</code></pre>\n\n<p>Does anyone know what the problem could be?</p>\n"}, {"tags": ["python", "c++", "c", "fann"], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 776515, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/IrXxz.png?s=128&g=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/776515/luis"}, "is_accepted": false, "score": -1, "last_activity_date": 1466880699, "last_edit_date": 1466880699, "creation_date": 1464703385, "answer_id": 37547932, "question_id": 32488943, "link": "https://stackoverflow.com/questions/32488943/how-to-save-a-fann-to-string/37547932#37547932", "title": "How to save a FANN to string?", "body": "<p>Did you try <a href=\"http://leenissen.dk/fann/html/files/fann_io-h.html#fann_save\" rel=\"nofollow\">fann_save</a> ?</p>\n\n<h2>train.c</h2>\n\n<pre><code>fann_save( ann, \"./nets/trained.net\" );\n</code></pre>\n\n<p>It allows to save the network and then <a href=\"http://leenissen.dk/fann/html/files/fann_io-h.html#fann_create_from_file\" rel=\"nofollow\">load it again</a> in another program:</p>\n\n<h2>simulate.c</h2>\n\n<pre><code>ann = fann_create_from_file(\"./nets/trained.net\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 472, "user_id": 494762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3dbf149c4e0d8bf513f5241a9c9a635d?s=128&d=identicon&r=PG", "display_name": "wi1", "link": "https://stackoverflow.com/users/494762/wi1"}, "is_accepted": false, "score": 0, "last_activity_date": 1513278923, "creation_date": 1513278923, "answer_id": 47820612, "question_id": 32488943, "link": "https://stackoverflow.com/questions/32488943/how-to-save-a-fann-to-string/47820612#47820612", "title": "How to save a FANN to string?", "body": "<p>If you look at the IO code in, <a href=\"https://github.com/libfann/fann/blob/master/src/fann_io.c\" rel=\"nofollow noreferrer\">https://github.com/libfann/fann/blob/master/src/fann_io.c</a> you can very easily create your own create_from_string function using how it reads the file as a template.</p>\n"}], "owner": {"reputation": 1204, "user_id": 1418164, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e5a3eb0187fc81a20d80f37a6126417b?s=128&d=identicon&r=PG", "display_name": "MrFox", "link": "https://stackoverflow.com/users/1418164/mrfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1531103891, "creation_date": 1441831821, "last_edit_date": 1531103891, "question_id": 32488943, "link": "https://stackoverflow.com/questions/32488943/how-to-save-a-fann-to-string", "title": "How to save a FANN to string?", "body": "<p>I want to use FANN by saving the configuration into a database, then load it during runs. All of the functions seem to be saving/loading networks into config files. But my application can't have temporary files.</p>\n\n<p>How can I save a training into a string / load a network from a string? I am using the Python bindings, but a C/C++ answer is also welcome.</p>\n"}, {"tags": ["c++", "c++11", "memory-management"], "comments": [{"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 6, "creation_date": 1441831811, "post_id": 32488833, "comment_id": 52838374, "body": "You are looking for <a href=\"http://stackoverflow.com/questions/22148258/what-is-the-purpose-of-stdscoped-allocator-adapter\">this</a>"}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 2, "creation_date": 1441833311, "post_id": 32488833, "comment_id": 52839160, "body": "You can simply iterate through the vector, print the address of the position the iterator is currently pointing at, then you can dissect your string element into a C-string (see <a href=\"http://stackoverflow.com/questions/7440746/address-of-each-character-of-stdstring\">here</a>) and analyze the memory layout of both. Since C++0x the std::vector is also bound to store its elements in a <a href=\"http://stackoverflow.com/a/849190/1559401\">continuous manner</a> so it should be easy enough to see what is where."}], "answers": [{"tags": [], "owner": {"reputation": 2653, "user_id": 1012759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ezwAs.jpg?s=128&g=1", "display_name": "CyberGuy", "link": "https://stackoverflow.com/users/1012759/cyberguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1441831639, "creation_date": 1441831639, "answer_id": 32488898, "question_id": 32488833, "link": "https://stackoverflow.com/questions/32488833/how-the-memory-allocation-works-for-nested-containers/32488898#32488898", "title": "How the memory allocation works for nested containers?", "body": "<p>ChunkVec stores only the pointer to the data allocated by string.(in this case it stores a std::string object which stores pointer). Its a totally different allocation. A Good way to understand it is to analyze the tree structure in programming.</p>\n\n<pre><code>struct node  \n{\n     int data;\n     struct node* left;\n     struct node* right;\n};\n</code></pre>\n\n<p>left and right are different memory allocations than node. You can remove them without removing this very node.</p>\n"}, {"tags": [], "owner": {"reputation": 29116, "user_id": 382471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/804ee314e1022f48ddd7d9cebe329afc?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/382471/robert"}, "is_accepted": false, "score": 1, "last_activity_date": 1441831750, "creation_date": 1441831750, "answer_id": 32488921, "question_id": 32488833, "link": "https://stackoverflow.com/questions/32488833/how-the-memory-allocation-works-for-nested-containers/32488921#32488921", "title": "How the memory allocation works for nested containers?", "body": "<p><code>std::string</code> has two things to store--the size of the string and the content.  If I allocate one on the stack, the size will be on the stack as well. For short strings, the character data itself will also be on the stack. These two items make up the \"control structure\". <code>std::string</code> only uses its allocator for long strings that don't fit in its fixed-size control structure.</p>\n\n<p><code>std::vector</code> allocates memory to store the control structure of the <code>std::string</code>. Any allocation required by <code>std::string</code> to store long strings could be in a completely different area of memory than the vector. Short strings will be entirely managed be the allocator of <code>std::vector</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1441843069, "post_id": 32490914, "comment_id": 52842337, "body": "<code>std::string</code> is a typedef for <code>std::basic_string&lt; char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;</code>  From that fact, finding a way to use a string with a different allocator should be quite easy."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1441843738, "post_id": 32490914, "comment_id": 52842493, "body": "Ben Voigt knows what he is talking about.  Also, sbabbi has pointed to what he is anticipating your next question might be, &quot;How do I ...&quot;"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1441904029, "post_id": 32490914, "comment_id": 52874218, "body": "If your <code>std::string</code> is 8 bytes large, then it is (mostly likely) using an implementation that does not comply to C++11 (COW strings)."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": true, "score": 1, "last_activity_date": 1441843386, "last_edit_date": 1441843386, "creation_date": 1441842843, "answer_id": 32490914, "question_id": 32488833, "link": "https://stackoverflow.com/questions/32488833/how-the-memory-allocation-works-for-nested-containers/32490914#32490914", "title": "How the memory allocation works for nested containers?", "body": "<blockquote>\n  <p>i have std::vector &lt; std::string ></p>\n</blockquote>\n\n<p>On my Ubuntu 15.04, 64 bit, a std::string is 8 bytes, regardless of contents. </p>\n\n<p>(using std::string s1; I am comparing sizeof(std::string)  versus  s1.size(). Then  append to the string and then print them both again.)</p>\n\n<p>I have not noticed or found a way to specify what allocator to use when the string allocates its data from the heap, therefore, I believe it must use some standard allocator, probably new, but I have never looked into the std::string code. And that standard allocator would know nothing about your vector.  </p>\n\n<blockquote>\n  <p>does the allocator for string allocate memory inside ChunkVec so that\n  the memory allocated for each string sums to ChunkVec?</p>\n</blockquote>\n\n<p>I believe the part of the string in a vector element is only the 8 byte pointer to where the string 'proper' resides in the heap.  So no.</p>\n\n<blockquote>\n  <p>Or the allocator for string allocates memory outside ChunkVec?</p>\n</blockquote>\n\n<p>Yes, I believe so.</p>\n\n<p>You can confirm this by printing the addresses of the vector elements i, and i+1, and the address of the some of the chars of element i.  </p>\n\n<p>By the way, on my implementation (g++ 4.9.2) , sizeof(std::vector) is 24 bytes, regardless of the number of data elements (vec.size()) and regardless of element size.  Note also, that I have read about some implementations where some of a small vector might actually reside in the 24 bytes.  Implementation details can be tedious, but helpful.  Still, some might be interested in why you want to know this.</p>\n\n<hr>\n\n<p>Be aware we are talking about implementation details (I think) ... so your exploration might vary from mine.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is the answer the same for other nested containers?</p>\n</blockquote>\n\n<p>I have not explored every container (but I have used many \"std::vector&lt; std::string >\").</p>\n\n<p>Generally, and without much thought, I would guess not.</p>\n\n<blockquote>\n  <p>And is there a difference between C++ and C++11?</p>\n</blockquote>\n\n<p>Implementation details change for various reasons, including language feature changes.  What have you tried?</p>\n"}], "owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 32490914, "answer_count": 3, "score": 1, "last_activity_date": 1441843386, "creation_date": 1441831389, "last_edit_date": 1441832239, "question_id": 32488833, "link": "https://stackoverflow.com/questions/32488833/how-the-memory-allocation-works-for-nested-containers", "title": "How the memory allocation works for nested containers?", "body": "<p>For example, i have <code>std::vector&lt;std::string&gt;</code>, how the allocators for <code>vector</code> and <code>string</code> work together?</p>\n\n<p>Say the allocator for <code>vector</code> allocates a chunk of memory <code>ChunkVec</code>, does the allocator for <code>string</code> allocate memory inside <code>ChunkVec</code> so that the memory allocated  for each <code>string</code> sums to <code>ChunkVec</code>? Or the allocator for <code>string</code> allocates memory outside <code>ChunkVec</code>? </p>\n\n<p>Is the answer the same for other nested containers? </p>\n\n<p>And is there a difference between C++ and C++11?</p>\n"}, {"tags": ["c++", "opengl", "hyperlink"], "comments": [{"owner": {"reputation": 195, "user_id": 2059235, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a4a09386198b649d2edd1a0e129f895?s=128&d=identicon&r=PG", "display_name": "Nathan J", "link": "https://stackoverflow.com/users/2059235/nathan-j"}, "edited": false, "score": 0, "creation_date": 1463594430, "post_id": 32488715, "comment_id": 62135343, "body": "I have this exact issue.  Did you find the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 5318671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65044805e16a10a6bb38087209846904?s=128&d=identicon&r=PG&f=1", "display_name": "j.sb", "link": "https://stackoverflow.com/users/5318671/j-sb"}, "is_accepted": false, "score": 0, "last_activity_date": 1441833759, "creation_date": 1441833759, "answer_id": 32489373, "question_id": 32488715, "link": "https://stackoverflow.com/questions/32488715/link-error-on-glgenvertexarrays-et-glbindvertexarray/32489373#32489373", "title": "Link error on glGenVertexArrays et glBindVertexArray", "body": "<p>Ok, i set the preprocessor flash : GLEW_STATIC and now the others functions are shown as external symbol unresolved. </p>\n\n<p>In my depedencies i have : glew32s.lib and glew64.lib.   Am I right ?</p>\n\n<p>I already included <code>#include &lt;GL/glew.h&gt;</code></p>\n"}], "owner": {"reputation": 9, "user_id": 5318671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65044805e16a10a6bb38087209846904?s=128&d=identicon&r=PG&f=1", "display_name": "j.sb", "link": "https://stackoverflow.com/users/5318671/j-sb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1441833759, "creation_date": 1441830963, "last_edit_date": 1441833017, "question_id": 32488715, "link": "https://stackoverflow.com/questions/32488715/link-error-on-glgenvertexarrays-et-glbindvertexarray", "title": "Link error on glGenVertexArrays et glBindVertexArray", "body": "<p>I'm learning OpenGL and i have issue with just a simple triangle...</p>\n\n<p>I get a link error with glGenVertexArrays et glBindVertexArray.</p>\n\n<p>When i delete these 2 lines, my program has no link error.</p>\n\n<p>I linked with freeglut, glew64, glew32, glew32s just in case. My program is configured as x64.</p>\n\n<pre><code>GLuint VertexArrayID;\nglGenVertexArrays(1, &amp;VertexArrayID); // ERROR HERE\nglBindVertexArray(VertexArrayID); // ERROR HERE\n\nstatic const GLfloat g_vertex_buffer_data[] = {\n    -1.0f, -1.0f, 0.0f,\n    1.0f, -1.0f, 0.0f,\n    0.0f, 1.0f, 0.0f,\n};\n\nGLuint vertexbuffer;\n\nglGenBuffers(1, &amp;vertexbuffer);\n\nglBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n\nglBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);\n\nglEnableVertexAttribArray(0);\nglBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\nglVertexAttribPointer(\n    0,                  correspondre au \u00ab layout \u00bb dans le shader \n    3,                 \n    GL_FLOAT,            \n    GL_FALSE,    \n    0,\n    (void*)0 \n    );\n\nglDrawArrays(GL_TRIANGLES, 0, 3); // D\u00e9marre \u00e0 partir du sommet 0; 3 sommets au total -&gt; 1 triangle \n\nglDisableVertexAttribArray(0);\n</code></pre>\n\n<p>Link errors :</p>\n\n<pre><code>error LNK2001: symbole externe non r\u00e9solu __imp___glewGenVertexArrays\nerror LNK2001: symbole externe non r\u00e9solu __imp___glewBindVertexArrays\n</code></pre>\n\n<p>I'm programming on VS 2013, my GC is a GTX 970 and my drivers are up to date.</p>\n\n<p>I tried on a sample of CUDA and is does the same thing.</p>\n\n<p>Thank you for your help !</p>\n"}, {"tags": ["c++", "qt", "user-interface", "shape", "qpushbutton"], "comments": [{"owner": {"reputation": 643, "user_id": 2692481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1tMmK.jpg?s=128&g=1", "display_name": "Alexander Sorokin", "link": "https://stackoverflow.com/users/2692481/alexander-sorokin"}, "edited": false, "score": 0, "creation_date": 1441832764, "post_id": 32488658, "comment_id": 52838885, "body": "Do you need exactly <code>QPushButton</code>? You can use <a href=\"http://doc.qt.io/qt-5/qgraphicsview.html\" rel=\"nofollow noreferrer\">QGraphicsView</a>, <a href=\"http://doc.qt.io/qt-5/qgraphicsscene.html\" rel=\"nofollow noreferrer\">QGraphicsScene</a> and reimplement <a href=\"http://doc.qt.io/qt-5/qgraphicsitem.html\" rel=\"nofollow noreferrer\">QGraphicsItem</a> to make it tiangle."}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 3, "creation_date": 1441850113, "post_id": 32490734, "comment_id": 52843956, "body": "The geometry of a widget is a rectangle, but that&#39;s really just a bounding rectangle. You can define any visible geometry you want, and any event-sensitive geometry as well. A rectangular widget can let events fall through the transparent parts. About the only &quot;issue&quot; is that of a layout, one&#39;d need fixed positioning or a custom layout for such widgets."}, {"owner": {"reputation": 77, "user_id": 5274284, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ebcd71d8f491351afe054908ce95cae6?s=128&d=identicon&r=PG&f=1", "display_name": "Outsmash", "link": "https://stackoverflow.com/users/5274284/outsmash"}, "edited": false, "score": 0, "creation_date": 1441954184, "post_id": 32490734, "comment_id": 52892554, "body": "But every small triangle needs a bounding rectangle if I use QGraphicsItem right? Obviously, the rectangle would cut through the neighboring triangles. I want individual functionality for each small triangle. Is there any way to bypass the boundingrect?"}, {"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "reply_to_user": {"reputation": 77, "user_id": 5274284, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ebcd71d8f491351afe054908ce95cae6?s=128&d=identicon&r=PG&f=1", "display_name": "Outsmash", "link": "https://stackoverflow.com/users/5274284/outsmash"}, "edited": false, "score": 0, "creation_date": 1441956799, "post_id": 32490734, "comment_id": 52893953, "body": "@Outsmash: the bounding rectangle is just a method which returns the extents of the QGraphicsPolygonItem, it does not mean, that the whole bounding rectangle is your button area. You have the mousepressevent, mousereleaseevent, mousemoveevent and for those a method called &quot;contains(QPoint)&quot;, to see whether the mouse position is inside the triangle."}, {"owner": {"reputation": 77, "user_id": 5274284, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ebcd71d8f491351afe054908ce95cae6?s=128&d=identicon&r=PG&f=1", "display_name": "Outsmash", "link": "https://stackoverflow.com/users/5274284/outsmash"}, "edited": false, "score": 0, "creation_date": 1441977395, "post_id": 32490734, "comment_id": 52906457, "body": "Thanks! I managed to create it. I overrode the shape function to match the polygon created.  I created a sub class from QGraphicsItem and created three triangles using this subclass. The class definition has a mousepressedevent which has &quot;update();&quot;. I have a few pushbuttons (outside graphicsview) that change a QColor variable to respective colors and the paint function in the sub class has a brush variable that changes it&#39;s color according to the QColor variable. When i click on a triangle in my application, all of the triangles change color. How can I separate the functionality?"}, {"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1441977642, "post_id": 32490734, "comment_id": 52906642, "body": "the paintevent runs always, as it does not matter, if you clicked on it or not. the paintevent paints everything. So if you change a variable used in the paintevent of all triangles, of course all triangles have the changed variable as a color. instead, you could save the color to a member of the specific triangle instance."}, {"owner": {"reputation": 77, "user_id": 5274284, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ebcd71d8f491351afe054908ce95cae6?s=128&d=identicon&r=PG&f=1", "display_name": "Outsmash", "link": "https://stackoverflow.com/users/5274284/outsmash"}, "edited": false, "score": 0, "creation_date": 1442004261, "post_id": 32490734, "comment_id": 52921761, "body": "That helped! Thanks a lot. But if I created many triangles using a for loop and the user changes the color of each triangle as per his requirement. How will I know which instance of my class he clicked? I have it coded such that every instance of a traingle has a mousepressedevent which changes the color as per the user but how do I record the color chosen? I want all the colors in a particular order, not the way the user clicked which might be random. Thanks again"}, {"owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "edited": false, "score": 0, "creation_date": 1442018977, "post_id": 32490734, "comment_id": 52926096, "body": "When constructing the triangles or in an initial routine, you could give your triangles IDs. In the mousepressevent, you could call a method returning a specific color depending on the ID. In the mousepressevent, you know the ID of your current triangle, since the mousepressevent is also a member method of the class and voila."}], "tags": [], "owner": {"reputation": 1706, "user_id": 1066891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35219aa43c9639fb92299202e1ccd78?s=128&d=identicon&r=PG", "display_name": "Gombat", "link": "https://stackoverflow.com/users/1066891/gombat"}, "is_accepted": true, "score": 0, "last_activity_date": 1441841560, "creation_date": 1441841560, "answer_id": 32490734, "question_id": 32488658, "link": "https://stackoverflow.com/questions/32488658/how-can-i-create-a-qpushbutton-with-a-custom-triangular-shape-in-qt-5-5/32490734#32490734", "title": "How can I create a QPushButton with a custom (triangular) shape in Qt 5.5?", "body": "<p>The geometry on a QWidget is always a rectangle. </p>\n\n<p>It would be possible to create a QPushButton derivative, override its paintevent and do some nasty painting considering its neighborhood etc. but it would be really a pain... </p>\n\n<p>it is much easier to use a QGraphicsView, QGraphicsScene and add appropriate QGraphicsItem (maybe the QGraphicsPolygonItem?), add them and use their signals/slots or create a derived class for your purposes. </p>\n\n<p>It is not that hard to override the mouseevents to recognize clicks and you can even use the QStyleSheets to let the \"button\" look like it gets pressed. </p>\n"}], "owner": {"reputation": 77, "user_id": 5274284, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ebcd71d8f491351afe054908ce95cae6?s=128&d=identicon&r=PG&f=1", "display_name": "Outsmash", "link": "https://stackoverflow.com/users/5274284/outsmash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1625, "favorite_count": 0, "accepted_answer_id": 32490734, "answer_count": 1, "score": 0, "last_activity_date": 1441841560, "creation_date": 1441830749, "question_id": 32488658, "link": "https://stackoverflow.com/questions/32488658/how-can-i-create-a-qpushbutton-with-a-custom-triangular-shape-in-qt-5-5", "title": "How can I create a QPushButton with a custom (triangular) shape in Qt 5.5?", "body": "<p>How can I create a triangular pushbutton in Qt? What is the most simplest way of executing this? I use the designer to create buttons and not code.</p>\n\n<p>Also, I read somewhere that shapes may be changed as long as the frame of the button is still rectangular but I want the frame to adjust according to the shape as well. How can I achieve this?</p>\n\n<p>More detail: I want to place lots of small triangular buttons next to each other with every other triangle flipped. Each triangle button has it's own function, etc (no overlapping borders accepted). Can anyone give me a <strong>descriptive</strong> explanation for how I might go about this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/sIiTv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sIiTv.jpg\" alt=\"Pyraminx\"></a></p>\n"}, {"tags": ["c++", "sorting", "vector", "compare", "std-pair"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441832289, "post_id": 32488613, "comment_id": 52838616, "body": "The comparison function makes no sense. What exactly are you trying to do?"}, {"owner": {"reputation": 27, "user_id": 5307118, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1228757103816617/picture?type=large", "display_name": "Mazen Mohamed", "link": "https://stackoverflow.com/users/5307118/mazen-mohamed"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441841334, "post_id": 32488613, "comment_id": 52841937, "body": "It&#39;s a UVa problem (UVa 11321) ,I have N numbers and a positive integer M. I have to sort the N numbers in ascending order of their modulo M value. If there is a tie between an odd number and an even number (that  their modulo M value is the same) then the odd number will precede the even number. If there is a tie between two odd numbers (that is their modulo M value is the same) then the larger odd number will precede the smaller odd number and if there is a tie between two even numbers (that their modulo M value is the same) then the smaller even number will precede the larger even number."}, {"owner": {"reputation": 27, "user_id": 5307118, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1228757103816617/picture?type=large", "display_name": "Mazen Mohamed", "link": "https://stackoverflow.com/users/5307118/mazen-mohamed"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441841349, "post_id": 32488613, "comment_id": 52841941, "body": "For remainder value of negative numbers follow the rule of C programming language: A negative number can never have modulus greater than zero. E.g. -100 MOD 3 = -1, -100 MOD 4 = 0, etc. @T.C."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5307118, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1228757103816617/picture?type=large", "display_name": "Mazen Mohamed", "link": "https://stackoverflow.com/users/5307118/mazen-mohamed"}, "edited": false, "score": 0, "creation_date": 1441841464, "post_id": 32488857, "comment_id": 52841976, "body": "Thanks alot , because of your help I found the problem it was with that line"}, {"owner": {"reputation": 27, "user_id": 5307118, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1228757103816617/picture?type=large", "display_name": "Mazen Mohamed", "link": "https://stackoverflow.com/users/5307118/mazen-mohamed"}, "edited": false, "score": 0, "creation_date": 1441841547, "post_id": 32488857, "comment_id": 52841996, "body": "sort(u.begin(),u.end(),sortPair(u.at(i),u.at(i+1))); and I shifted it to sort(u.begin(),u.end(),sortPair)) as you sugggested and it worked well. @CyberGuy"}], "tags": [], "owner": {"reputation": 2653, "user_id": 1012759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ezwAs.jpg?s=128&g=1", "display_name": "CyberGuy", "link": "https://stackoverflow.com/users/1012759/cyberguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1441831492, "creation_date": 1441831492, "answer_id": 32488857, "question_id": 32488613, "link": "https://stackoverflow.com/questions/32488613/overloading-custom-sort-comparison-function-in-c/32488857#32488857", "title": "Overloading custom sort comparison function in C++", "body": "<p>Its hard to understand what you want to achieve, but take a look at this function:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::array&lt;int, 10&gt; s = {5, 7, 4, 2, 8, 6, 1, 9, 0, 3}; \n\n    // sort using the default operator&lt;\n    std::sort(s.begin(), s.end());\n    for (int a : s) {\n        std::cout &lt;&lt; a &lt;&lt; \" \";\n    }   \n    std::cout &lt;&lt; '\\n';\n\n    // sort using a standard library compare function object\n    std::sort(s.begin(), s.end(), std::greater&lt;int&gt;());\n    for (int a : s) {\n        std::cout &lt;&lt; a &lt;&lt; \" \";\n    }   \n    std::cout &lt;&lt; '\\n';\n\n    // sort using a custom function object\n    struct {\n        bool operator()(int a, int b)\n        {   \n            return a &lt; b;\n        }   \n    } customLess;\n    std::sort(s.begin(), s.end(), customLess);\n    for (int a : s) {\n        std::cout &lt;&lt; a &lt;&lt; \" \";\n    }   \n    std::cout &lt;&lt; '\\n';\n\n    // sort using a lambda expression \n    std::sort(s.begin(), s.end(), [](int a, int b) {\n        return b &lt; a;   \n    });\n    for (int a : s) {\n        std::cout &lt;&lt; a &lt;&lt; \" \";\n    } \n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Those are the basic usage of custom compare function in <code>std::sort.</code></p>\n\n<p>It looks wrong:</p>\n\n<pre><code>sort(u.begin(),u.end(),sortPair(u.at(i),u.at(i+1)));\n</code></pre>\n\n<p>You dont have to pass these two variables manually. The usage should be:</p>\n\n<pre><code>sort(u.begin(),u.end(),sortPair));\n</code></pre>\n\n<p>Moreover you are missing the const&amp; in your compare function.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1441831500, "creation_date": 1441831500, "answer_id": 32488858, "question_id": 32488613, "link": "https://stackoverflow.com/questions/32488613/overloading-custom-sort-comparison-function-in-c/32488858#32488858", "title": "Overloading custom sort comparison function in C++", "body": "<p>Change the function signature to take <code>const&amp;</code>.</p>\n\n<pre><code>bool sortPair (pair &lt; int , int &gt; const&amp; x , pair &lt; int , int &gt; const&amp; y) \n</code></pre>\n\n<p>and then use it as:</p>\n\n<pre><code>sort(u.begin(), u.end(), sortPair);\n</code></pre>\n\n<p>Having said that, I noticed that <code>sortPair</code> does not have a <code>return</code> statement before the end of the function. That leads to undefined behavior. Make sure you add</p>\n\n<pre><code>return true;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>return false;\n</code></pre>\n\n<p>I couldn't tell which is appropriate in your function.</p>\n"}], "owner": {"reputation": 27, "user_id": 5307118, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1228757103816617/picture?type=large", "display_name": "Mazen Mohamed", "link": "https://stackoverflow.com/users/5307118/mazen-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 32488857, "answer_count": 2, "score": 0, "last_activity_date": 1441831500, "creation_date": 1441830610, "question_id": 32488613, "link": "https://stackoverflow.com/questions/32488613/overloading-custom-sort-comparison-function-in-c", "title": "Overloading custom sort comparison function in C++", "body": "<p>I want to sort pairs in a vector of pairs according to a certain standards so i overloaded a sort function with a function named sortPair , but I don't know what is the appropriate parameters that I should pass to the function .</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\nusing namespace std;\n\nbool sortPair (pair &lt; int , int &gt; &amp;x , pair &lt; int , int &gt; &amp;y)\n{\n    if ( x.second % 2 == 0 &amp;&amp; y.second % 2 == 0 &amp;&amp; x.first == y.first )\n    {\n        if ( x.second &gt; y.second )\n        {\n            return y.second &lt; x.second ;\n        }\n        else\n        {\n            return x.second &lt; y.second ;\n        }\n    }\n\n    if ( x.second % 2 != 0 &amp;&amp; y.second != 0 &amp;&amp; x.first == y.first )\n    {\n        if( x.second &gt; y.second )\n        {\n            return y.second &lt; x.second ;\n        }\n        else\n        {\n            return x.second &lt; y.second ;\n        }\n    }\n\n    if ( x.second % 2 == 0 &amp;&amp; y.second != 0 &amp;&amp; x.first == y.first )\n    {\n        return y.second &lt; x.second ;\n    }\n\n    if ( x.second % 2 != 0 &amp;&amp; y.second == 0 &amp;&amp; x.first == y.first)\n    {\n        return x.second &lt; y.second ;\n    }\n}\n\nint main()\n{\n    int t = 1;\n    while ( t -- )\n    {\n        int n , m , x;\n        cin&gt;&gt; n &gt;&gt; m ;\n        vector &lt; pair &lt; int , int &gt; &gt; u ;\n\n        for ( int i=0 ; i&lt;n ; i++)\n        {\n            u.push_back(make_pair(x%m,x));\n\n        }\n\n        for ( int i=0 ; i&lt;n ; i++)\n        {\n\n            sort(u.begin(),u.end(),sortPair(u.at(i),u.at(i+1)));\n\n        }\n\n        cout&lt;&lt;endl;\n        cout&lt;&lt;n&lt;&lt;\" \"&lt;&lt;m&lt;&lt;endl;\n\n        for (auto&amp; e : u)\n        {\n            cout &lt;&lt; e.first &lt;&lt; \"\\n\";\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/bdjlU3\" rel=\"nofollow\">Ideone link</a></p>\n"}, {"tags": ["c++", "c++11", "stdmap", "std-function"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1441830786, "post_id": 32488600, "comment_id": 52837887, "body": "This called factory pattern"}, {"owner": {"reputation": 3045, "user_id": 956880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8wevB.png?s=128&g=1", "display_name": "Anonymous Coward", "link": "https://stackoverflow.com/users/956880/anonymous-coward"}, "edited": false, "score": 1, "creation_date": 1441830871, "post_id": 32488600, "comment_id": 52837925, "body": "Description of factory pattern which works for your use case : <a href=\"http://stackoverflow.com/a/954565/956880\">stackoverflow.com/a/954565/956880</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2653, "user_id": 1012759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ezwAs.jpg?s=128&g=1", "display_name": "CyberGuy", "link": "https://stackoverflow.com/users/1012759/cyberguy"}, "is_accepted": false, "score": 5, "last_activity_date": 1441830771, "creation_date": 1441830771, "answer_id": 32488666, "question_id": 32488600, "link": "https://stackoverflow.com/questions/32488600/can-a-stdmap-contain-a-reference-to-a-constructor/32488666#32488666", "title": "Can a std::map contain a reference to a constructor?", "body": "<p>You cannot take the address of a constructor according to C++ standard\n(\u00a7 12.1.12 of C++98/03 and \u00a7 12.1.10 of C++11):  </p>\n\n<blockquote>\n  <p>Constructors - The address of a constructor shall not be taken.</p>\n</blockquote>\n\n<p>For this problem the typical solution is to create specific factories/methods that creates object.</p>\n"}, {"comments": [{"owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "edited": false, "score": 0, "creation_date": 1442369034, "post_id": 32489107, "comment_id": 53049976, "body": "I appreciate this instructive answer, but I will accept TonyB&#39;s lambda answer for its relative simplicity."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1441832512, "creation_date": 1441832512, "answer_id": 32489107, "question_id": 32488600, "link": "https://stackoverflow.com/questions/32488600/can-a-stdmap-contain-a-reference-to-a-constructor/32489107#32489107", "title": "Can a std::map contain a reference to a constructor?", "body": "<p>While directly getting a pointer to a ctor is not possible, you can create your own ctor objects:</p>\n\n<pre><code>template&lt;class Sig&gt;\nstruct ctor_t;\n\ntemplate&lt;class T, class...Args&gt;\nstruct ctor_t&lt;T(Args...)&gt; {\n  T* operator()(Args...args)const {\n    return new T(std::forward&lt;Args&gt;(args)...);\n  }\n  T* operator()(void*p, Args...args)const {\n    return new(p) T(std::forward&lt;Args&gt;(args)...);\n  }\n  using simple = T*(*)(Args...args);\n  using placement = T*(*)(void*, Args...args);\n  operator simple()const {\n    return [](Args...args)-&gt;T* {\n      return ctor_t{}(std::forward&lt;Args&gt;(args)...);\n    };\n  }\n  operator placement()const {\n    return [](void*p, Args...args)-&gt;T* {\n      return ctor_t{}(p, std::forward&lt;Args&gt;(args)...);\n    };\n  }\n};\n\ntemplate&lt;class Sig&gt;\nstatic const ctor_t&lt;Sig&gt; ctor = {};\n</code></pre>\n\n<p>which lets you create an object that acts like a ctor and can be turned into a function pointer as well.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b6dfcbc2c3c8140a\" rel=\"nofollow\">live example</a>.</p>\n\n<p>The above uses some C++14.  Replace <code>ctor</code> with:</p>\n\n<pre><code>template&lt;class Sig&gt;\nconstexpr ctor_t&lt;Sig&gt; ctor() { return {}; }\n</code></pre>\n\n<p>and its use from <code>ctor&lt;A()&gt;</code> to <code>ctor&lt;A()&gt;()</code> for C++11 (without variable templates).</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 3270517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2339b979ef9d496b90392ea5b46e3147?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3270517/tonyb"}, "is_accepted": true, "score": 2, "last_activity_date": 1441905443, "creation_date": 1441905443, "answer_id": 32508016, "question_id": 32488600, "link": "https://stackoverflow.com/questions/32488600/can-a-stdmap-contain-a-reference-to-a-constructor/32508016#32508016", "title": "Can a std::map contain a reference to a constructor?", "body": "<p>A couple of points:</p>\n\n<ol>\n<li><p>A constructor is a bit of code that takes raw memory and turns it into an object. This means you have to have exactly the right amount of memory available.</p></li>\n<li><p>There is no mechanism for you to access a constructor like a normal function because of that: the constructor's <code>this</code> pointer is already known when construction starts, and there's no way to pass one in.\nThe way around these limitations is to use <code>operator new</code>. The usual <code>operator new</code> will allocate the memory needed for the object and apply the constructor code if allocation was successful. (Alternatively, there is a \"placement <code>new</code>\" that allows the programmer to provide a pointer to \"enough memory\" for the object. It's used for \"emplaced\" construction, where you've allocated a suitable buffer beforehand. Generally that stuff lives in container libraries only.)</p></li>\n</ol>\n\n<p>So what you put in your map is going to have to use <code>new</code> in the functions. The usual <code>new</code> will do since you don't have any mechanism for passing in raw memory.</p>\n\n<p>Using lambdas, your map could look like this:</p>\n\n<pre><code>type_map_t type_map = {\n    {Type::A, []() -&gt; Base* { return new A; } },\n    {Type::B, []() -&gt; Base* { return new B; } },\n};\n</code></pre>\n\n<p>The construct <code>[]() -&gt; Base*</code> says that the following code block is treated as a function body taking no arguments (nothing in the <code>()</code>-list), and nothing from surrounding scope (nothing in the <code>[]</code>-list), and returning a <code>Base*</code>. It's usable as an initialization value for the <code>std::function&lt;Base*()&gt;</code> holder object.</p>\n\n<p>You can call your map entry directly too:</p>\n\n<pre><code>Base* base = type_map[Type::A]();\n</code></pre>\n"}], "owner": {"reputation": 4060, "user_id": 629530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e4763f0cc8124d677d249a99800950a?s=128&d=identicon&r=PG", "display_name": "firebush", "link": "https://stackoverflow.com/users/629530/firebush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1478, "favorite_count": 0, "accepted_answer_id": 32508016, "answer_count": 3, "score": 3, "last_activity_date": 1441905443, "creation_date": 1441830561, "question_id": 32488600, "link": "https://stackoverflow.com/questions/32488600/can-a-stdmap-contain-a-reference-to-a-constructor", "title": "Can a std::map contain a reference to a constructor?", "body": "<p>Is there a way to point to a constructor from a std::map?  I'd like to do the following, with the code I desire to use in <code>#if 0</code>, but I can't seem to get this to work:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nclass Base { };\nclass A : public Base { };\nclass B : public Base { };\n\nenum class Type { A, B, };\n\n#if 0\nusing type_map_t = std::map&lt;Type, std::function&lt;Base*()&gt;&gt;;\ntype_map_t type_map = {\n    {Type::A, &amp;A::A},\n    {Type::B, &amp;B::B},\n};\n#endif\n\nBase*\ngetBase(Type t)\n{\n#if 0\n    auto constructor = type_map[t];\n    return constructor();\n#else\n    switch(t)\n    {\n        case Type::A:\n            return new A();\n        case Type::B:\n            return new B();\n    }\n#endif\n}\n\nint\nmain(int argc, char *argv[])\n{\n    Base *base = getBase(Type::A);\n    return 0;\n}\n</code></pre>\n\n<p>Rather than have a switch statement in getBase, I'd rather have the map indicate what constructor gets called for each type.</p>\n\n<p>std::function comes to mind for how to do this, but it doesn't seem possible to get the address of a constructor in C++.  Is there an elegant way to accomplish what I want to do here?</p>\n"}, {"tags": ["c#", "c++", ".net", "wpf", "xaml"], "comments": [{"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 4, "creation_date": 1441830047, "post_id": 32488429, "comment_id": 52837510, "body": "You probably should use C++/CLI to write the glue code between C# and C++. <code>DllExportAttribute</code> is a third-party hack."}, {"owner": {"reputation": 116487, "user_id": 80274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cdf128a0ee0cf38f0a673dbc82a74449?s=128&d=identicon&r=PG", "display_name": "Scott Chamberlain", "link": "https://stackoverflow.com/users/80274/scott-chamberlain"}, "edited": false, "score": 0, "creation_date": 1441830199, "post_id": 32488429, "comment_id": 52837585, "body": "Link to a introduction to <a href=\"https://msdn.microsoft.com/en-us/library/68td296t.aspx\" rel=\"nofollow noreferrer\">C++/cli</a> (Here is a <a href=\"https://msdn.microsoft.com/de-de/library/68td296t.aspx\" rel=\"nofollow noreferrer\">German version</a>, as your original link was to the German MSDN)"}, {"owner": {"reputation": 40956, "user_id": 6932, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8b52879235295240c05367d4127de1ef?s=128&d=identicon&r=PG", "display_name": "Greg D", "link": "https://stackoverflow.com/users/6932/greg-d"}, "edited": false, "score": 0, "creation_date": 1441830211, "post_id": 32488429, "comment_id": 52837587, "body": "If it is at <i>all</i> possible, pull in C++/CLI for interop scenarios like this. You can do this from a fully C++ project by creating a shim library in C++/CLI.  Seriously. It will save you a <i>lot</i> of pain."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1441833381, "post_id": 32488429, "comment_id": 52839198, "body": "Your function pointer declaration is not correct, it is __cdecl, not __stdcall as your C# code requires.  COM is a good way to do this in a type-safe way."}], "owner": {"reputation": 3, "user_id": 2409995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e88c904b5a1e89f839cbae73fae5bed6?s=128&d=identicon&r=PG", "display_name": "Frisko", "link": "https://stackoverflow.com/users/2409995/frisko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441829904, "creation_date": 1441829904, "question_id": 32488429, "link": "https://stackoverflow.com/questions/32488429/how-to-import-a-wpf-dll-c-in-c-c", "title": "How to import a WPF DLL (C#) in C/C++?", "body": "<p>I want to get access to an external WPF window in my application (has to be C/C++). I am fairly new to this, but as far as I know I have to put all the functions in a DLL and import them in my code. Unfortunately I get stuck when it comes to the linking between the DLL and my code. I am using Microsoft Visual Studio Community 2015 and I created one project of type <em>wpf control library</em> and another project of type <em>console application</em> (only for testing) and linked them together in one solution as described in <a href=\"https://msdn.microsoft.com/de-de/library/ms235636.aspx\" rel=\"nofollow\">this walkthrough</a>. Here is what I have so far:</p>\n\n<p><strong>UserControl1.xaml.cs:</strong></p>\n\n<pre><code>using RGiesecke.DllExport;\nusing System.Runtime.InteropServices;\n\nnamespace WpfControlLibrary1\n{\n    class Control\n    {\n        [DllExport(\"AddInteger\", CallingConvention = CallingConvention.StdCall)]\n        public static int AddInteger(int Value1, int Value2)\n        {\n            //MessageBox.Show(\"Add Integers: \" + Value1.ToString() + \" \" + Value2.ToString(), \"AddInteger\");\n            return (Value1 + Value2);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>ConsoleApplication1.cpp:</strong></p>\n\n<pre><code>// ConsoleApplication1.cpp\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n\nint main()\n{\n    typedef int(*AI)(int val1, int val2);\n\n    HMODULE DLL = LoadLibrary(_T(\"WpfControlLibrary1.dll\"));\n\n    if (DLL)\n    {\n        std::cout &lt;&lt; \"DLL loaded!\" &lt;&lt; std::endl;\n        AI AddInteger = (AI)GetProcAddress(DLL, \"AddInteger\");\n\n        //int res = AddInteger(1, 2);\n        std::cout &lt;&lt; AddInteger &lt;&lt; std::endl;\n\n        if (AddInteger)\n        {\n            std::cout &lt;&lt; \"Successful link to function in DLL!\" &lt;&lt; std::endl;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Unable to link to function in DLL!\" &lt;&lt; std::endl;\n        }\n    }\n    else\n    {\n        std::cout &lt;&lt; \"DLL failed to load!\" &lt;&lt; std::endl;\n    }\n    FreeLibrary(DLL);\n    return 0;\n}\n</code></pre>\n\n<p>The first message \u201cDLL loaded!\u201d is written to the console so the library seems to load fine (?). But when I call the AddInteger function the console crashes. (The function pointer is 0).<br>\nAre the projects types correct or am I using them in a wrong way? Visual Studio originally created something like this for the UserControl1.xaml.cs:</p>\n\n<pre><code>namespace WpfControlLibrary1\n{\n    public partial class UserControl1 : UserControl\n    {\n        public UserControl1()\n        {\n            InitializeComponent();\n        }\n    }\n}\n</code></pre>\n\n<p>I changed it as you can see above.<br>\nWhat am I doing wrong here? Please light me up. Thank you vm.</p>\n"}, {"tags": ["c++", "c", "osx-yosemite", "sigbus"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1441829762, "post_id": 32488353, "comment_id": 52837373, "body": "SIGBUS generally means that a pointer is not properly aligned for the size of value you&#39;re accessing through it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441829816, "post_id": 32488353, "comment_id": 52837393, "body": "Although that makes no sense when writing a single char, since there are no alignment requirements for <code>char</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1441830259, "post_id": 32488353, "comment_id": 52837610, "body": "The problem is the <code>const</code> keyword in <code>const char mem[4]</code>. You&#39;re declaring <code>mem</code> as read-only, and then trying to write to it."}, {"owner": {"reputation": 306, "user_id": 3508350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e8b4d87030697e2b69d6bdcf6c681c0?s=128&d=identicon&r=PG", "display_name": "Joe Sewell", "link": "https://stackoverflow.com/users/3508350/joe-sewell"}, "edited": false, "score": 1, "creation_date": 1441830369, "post_id": 32488353, "comment_id": 52837666, "body": "Since you&#39;re writing to <code>mem</code>, which is declared <code>const char</code>, it&#39;s possible that the memory is not writable in this case, whereas it might be under the other platforms?"}, {"owner": {"reputation": 634, "user_id": 1735629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5aa21470f60d3d0e6b38584eeae179?s=128&d=identicon&r=PG", "display_name": "akosky", "link": "https://stackoverflow.com/users/1735629/akosky"}, "edited": false, "score": 0, "creation_date": 1441830752, "post_id": 32488353, "comment_id": 52837868, "body": "Thanks! This was indeed the problem. I was looking for issues with pointer alignment, but it didn&#39;t notice that the memory was declared as const. It&#39;s interesting that it didn&#39;t show up on other platforms."}], "owner": {"reputation": 634, "user_id": 1735629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5aa21470f60d3d0e6b38584eeae179?s=128&d=identicon&r=PG", "display_name": "akosky", "link": "https://stackoverflow.com/users/1735629/akosky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441829597, "creation_date": 1441829597, "question_id": 32488353, "link": "https://stackoverflow.com/questions/32488353/diagnosing-sigbus-error-on-os-x-yosemite", "title": "Diagnosing SIGBUS error on OS X Yosemite", "body": "<p>I'm attempting to convert some code to run on OS X and having problems with some of the low-level memory writing code (which works on Linux/Windows platforms).</p>\n\n<p>Specifically the method being called is:</p>\n\n<pre><code>void Dset_mem_write_i1B(void* ptr,int val) {\n  unsigned char* p=(unsigned char*)ptr;\n  *p=(val)&amp;0xFF;\n}\n</code></pre>\n\n<p>The relevant test code (GTest) is:</p>\n\n<pre><code>TEST(DsetMemIoTest, test_write) {\n  const char mem[4] = \"\";\n  void* vmem = (void*)mem;\n  int mem_read = 0;\n  int to_write = 0;\n\n  to_write = 'a';\n  Dset_mem_write_i1B(vmem, to_write);\n  mem_read = Dset_mem_read_i1B(vmem);\n  EXPECT_EQ('a', (char)mem_read);\n</code></pre>\n\n<p>When running in gdb (installed using homebrew) I'm getting:</p>\n\n<pre><code>Program received signal SIGBUS, Bus error.\n0x0000000100009213 in Dset_mem_write_i1B (ptr=0x100054c95 &lt;DsetMemIoTest_test_write_Test::TestBody()::mem&gt;, val=97) at ...\n78        *p=(val)&amp;0xFF;\n</code></pre>\n\n<p>I tried adding explicit casts which didn't seem to make a difference. </p>\n\n<p>I can't find any clue as to why this would fail on OS X. Any help on how to diagnose this would be appreciated.</p>\n"}, {"tags": ["c++", "image"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441829760, "post_id": 32488185, "comment_id": 52837372, "body": "That code made my formatter hurl. I had to fix it by hand. Crom, dude, what did you write that with?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441829978, "post_id": 32488185, "comment_id": 52837469, "body": "Don&#39;t use macros, why would you only want to ever support 128x128 images? Use vectors so you don&#39;t leak memory and you can copy your class without it breaking. Why are the filestreams class members? You only use them inside the function, and they shouldn&#39;t be dynamically allocated."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441830444, "post_id": 32488185, "comment_id": 52837706, "body": "There is no check to ensure the file is 128x128. The header contents are totally ignored, so you have no clue how the image data is encoded."}], "answers": [{"tags": [], "owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "is_accepted": false, "score": 1, "last_activity_date": 1441830007, "last_edit_date": 1441830007, "creation_date": 1441829700, "answer_id": 32488380, "question_id": 32488185, "link": "https://stackoverflow.com/questions/32488185/read-image-in-2d-array-c-and-save-it/32488380#32488380", "title": "read image in 2d array C++ and save it", "body": "<p>Hope it helps ;)\nI skipped error checking but you should add it to the final code. For writing a .bmp image, wirte BITMAPFILEHEADER first, then BITMAPINFOHEADER and at the end the actual raw data</p>\n\n<pre><code>FILE* filePtr;\nint error;\nunsigned int count;\nBITMAPFILEHEADER bitmapFileHeader;\nBITMAPINFOHEADER bitmapInfoHeader;\nint imageSize;\nunsigned char* bitmapImage;\n\n// Open the height map file in binary.\nerror = fopen_s(&amp;filePtr, filename, \"rb\");\n\n// Read in the file header.\ncount = fread(&amp;bitmapFileHeader, sizeof(BITMAPFILEHEADER), 1, filePtr);\n\n// Read in the bitmap info header.\ncount = fread(&amp;bitmapInfoHeader, sizeof(BITMAPINFOHEADER), 1, filePtr);\n\n// Save the dimensions of the terrain.\nWidth= bitmapInfoHeader.biWidth;\nHeight= bitmapInfoHeader.biHeight;\n\n// Calculate the size of the bitmap image data.\nimageSize = Width* Height* 3;\n\n// Allocate memory for the bitmap image data.\nbitmapImage = new unsigned char[imageSize];\n\n// Move to the beginning of the bitmap data.\nfseek(filePtr, bitmapFileHeader.bfOffBits, SEEK_SET);\n\n// Read in the bitmap image data.\ncount = fread(bitmapImage, 1, imageSize, filePtr);\n\n// Close the file.\nerror = fclose(filePtr);\n</code></pre>\n\n<p>Don't forget to delete <code>bitmapImage</code> or use <code>std::vector</code> instead</p>\n"}], "owner": {"reputation": 11, "user_id": 5002037, "user_type": "registered", "profile_image": "https://graph.facebook.com/874480019273251/picture?type=large", "display_name": "Farhan Ali Cheema", "link": "https://stackoverflow.com/users/5002037/farhan-ali-cheema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2436, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1441830007, "creation_date": 1441828889, "last_edit_date": 1441829791, "question_id": 32488185, "link": "https://stackoverflow.com/questions/32488185/read-image-in-2d-array-c-and-save-it", "title": "read image in 2d array C++ and save it", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt; // for file I/O\n#define WIDTH 128\n#define HEIGHT 128\n#include &lt;cmath&gt;\n\nusing namespace std;\ntypedef unsigned char unchar;\n\nclass MImage\n{\n\n///////////////////////////////////////////////////////////////////////////////////////read\n\npublic:\n    void readimage()\n    {\n\n        imageData = new unchar*[HEIGHT]; // create new array size: height of image.\n\n        for (int i = 0; i &lt; HEIGHT; i++)\n        {\n            imageData[i] = new unchar[WIDTH]; //create matrix.          \n        }\n\n        //image I/O\n        pInFile = new ifstream;\n        pInFile-&gt;open(\"L.bmp\", ios::in | ios::binary); // open fileName and read as binary.\n\n        pInFile-&gt;read(reinterpret_cast&lt;char*&gt;(imageHeaderData), 1078); //read bmp header data into array.\n\n        for (int i = 0; i &lt; HEIGHT; i++)\n        {\n            pInFile-&gt;read(reinterpret_cast&lt;char*&gt;(imageData[i]), WIDTH); //read row into each array entry.   \n        }\n\n        pInFile-&gt;close(); //close stream.\n    }\n\npublic:\n    void write()\n    {\n\n        //smoothFilter();\n        pOutFile = new ofstream;\n        pOutFile-&gt;open(\"output.bmp\", ios::out | ios::binary);\n        pOutFile-&gt;write(reinterpret_cast&lt;char*&gt;(imageHeaderData), 1078); //write header data onto output\n\n        for (int i = 0; i &lt; HEIGHT; i++)\n        {\n\n            pOutFile-&gt;write(reinterpret_cast&lt;char*&gt;(imageData[i]), WIDTH); // write new image data.\n\n        }\n\n        pOutFile-&gt;close(); //close stream\n    }\n\npublic:\n    ifstream* pInFile;\n    ofstream* pOutFile;\n    unchar imageHeaderData[1078]; //.bmp header data with offset 1078.  unchar** imageData;\n\n};\nint main()\n{\n\n    MImage abc;\n    abc.readimage();\n    abc.write();\n\n    return 0;\n}    \n</code></pre>\n\n<p>I am unable to read image in a 2d array so that i could do some processing on it. i have used the code above but saved file is giving error.\nwhat i am doing is first reading a .bmp file 128x128 then saving it in an other .bmp file. but when i try to open output file it gives error \"file is corrupted or large in size\"</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 2046, "user_id": 3829741, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d134a7bfba2d86b9777d674344758d?s=128&d=identicon&r=PG&f=1", "display_name": "dari", "link": "https://stackoverflow.com/users/3829741/dari"}, "edited": false, "score": 0, "creation_date": 1441829104, "post_id": 32488146, "comment_id": 52837081, "body": "The stencil test is like the depth test, while rendering you are reading and writing from the same buffer. So if you want to use your stencil buffer in a later rendering pass you need to attach or blit it to the currently bound framebuffer."}, {"owner": {"reputation": 935, "user_id": 3365063, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f85ec976ad1f53d8d6e885a174d9e335?s=128&d=identicon&r=PG&f=1", "display_name": "zeb", "link": "https://stackoverflow.com/users/3365063/zeb"}, "reply_to_user": {"reputation": 2046, "user_id": 3829741, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d134a7bfba2d86b9777d674344758d?s=128&d=identicon&r=PG&f=1", "display_name": "dari", "link": "https://stackoverflow.com/users/3829741/dari"}, "edited": false, "score": 0, "creation_date": 1441832462, "post_id": 32488146, "comment_id": 52838715, "body": "Ok but I use the depth buffer as a texture sampler in my shaders. I&#39;ve never tried to use it as the actual buffer in order to do depth tests and so I don&#39;t even know how to use the previously created stencil to do stencil test. So how can I use them? I&#39;ve read that blitting doesn&#39;t always work."}, {"owner": {"reputation": 1948, "user_id": 1548601, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fabb1f3db767a21f84f19a077ef5d83d?s=128&d=identicon&r=PG", "display_name": "Entalpi", "link": "https://stackoverflow.com/users/1548601/entalpi"}, "edited": false, "score": 0, "creation_date": 1520240259, "post_id": 32488146, "comment_id": 85218185, "body": "One thing to note is that directional lights should probably affect your whole scene and thus not require a stencil test in order to cull pixels. That part is mostly for light volumes and other bounded light sources."}], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 3365063, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f85ec976ad1f53d8d6e885a174d9e335?s=128&d=identicon&r=PG&f=1", "display_name": "zeb", "link": "https://stackoverflow.com/users/3365063/zeb"}, "edited": false, "score": 0, "creation_date": 1441866179, "post_id": 32492627, "comment_id": 52848888, "body": "Ok, really interesting and I&#39;m thinking to use this method for some thing I&#39;m gonna do. But what I&#39;m looking for is something different I think. At the moment I don&#39;t need to sample the stencil buffer in my shaders like I do for the depth buffer, I just need to use it to draw only a portion of my viewport, excluding the rest in order to try to optimize some drawing. For example when I do my directional light pass, I don&#39;t need to draw the entire viewport quad, but only the section where the is some geometry, so I was planning to use a stencil buffer created during my first geometry pass."}, {"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "reply_to_user": {"reputation": 935, "user_id": 3365063, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f85ec976ad1f53d8d6e885a174d9e335?s=128&d=identicon&r=PG&f=1", "display_name": "zeb", "link": "https://stackoverflow.com/users/3365063/zeb"}, "edited": false, "score": 0, "creation_date": 1441943362, "post_id": 32492627, "comment_id": 52888778, "body": "@zeb I added some explanation for basic stencil buffer usage."}, {"owner": {"reputation": 935, "user_id": 3365063, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f85ec976ad1f53d8d6e885a174d9e335?s=128&d=identicon&r=PG&f=1", "display_name": "zeb", "link": "https://stackoverflow.com/users/3365063/zeb"}, "edited": false, "score": 0, "creation_date": 1441959668, "post_id": 32492627, "comment_id": 52895443, "body": "Thanks a lot. I&#39;m going to try like that now."}, {"owner": {"reputation": 935, "user_id": 3365063, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f85ec976ad1f53d8d6e885a174d9e335?s=128&d=identicon&r=PG&f=1", "display_name": "zeb", "link": "https://stackoverflow.com/users/3365063/zeb"}, "edited": false, "score": 0, "creation_date": 1441966308, "post_id": 32492627, "comment_id": 52899500, "body": "just perfect. I was able to use the stencil test like I was planning to. My rendering pipeline looks like this now: [first] <b>geometry pass fills the FBO so also the stencil buffer like you showed me</b> [second] <b>directional light pass blits the stencil buffer from the geometry pass into the light buffer and uses the stencil buffer like you told me.</b>  I used the same method to implement the skybox. Wonderful! Thanks a lot!"}], "tags": [], "owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "is_accepted": true, "score": 0, "last_activity_date": 1441943340, "last_edit_date": 1441943340, "creation_date": 1441855531, "answer_id": 32492627, "question_id": 32488146, "link": "https://stackoverflow.com/questions/32488146/deferred-renderer-with-stencil-buffer-fbo/32492627#32492627", "title": "Deferred renderer with stencil buffer FBO", "body": "<p>You can of course always use the stencil buffer for stencil testing. To illustrate how to use stencil testing on a basic level, here are the critical calls for an example where you draw in two passes, where in the second pass we will exclude all pixels that were not covered in the first pass:</p>\n\n<ul>\n<li><p>When you clear the framebuffer, make sure that you include the bit for clearing the stencil buffer:</p>\n\n<pre><code>glClear(... | GL_STENCIL_BUFFER_BIT);\n</code></pre></li>\n<li><p>Enable the stencil test:</p>\n\n<pre><code>glEnable(GL_STENCIL_TEST);\n</code></pre></li>\n<li><p>Set up the stencil function/operation to set the value in the stencil buffer to 1 for all rendered pixels:</p>\n\n<pre><code>glStencilFunc(GL_ALWAYS, 1, 1);\nglStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);\n</code></pre>\n\n<p><code>GL_ALWAYS</code> specifies that all pixels pass the stencil test (i.e. no pixels are rejected). <code>GL_REPLACE</code> specifies that the value in the stencil buffer is replaced by the reference value, which is the second argument to <code>glStencilFunc()</code>, for all rendered pixels.</p></li>\n<li><p>Draw the geometry for the first pass.</p></li>\n<li><p>Change the stencil function/operation to only render pixels where the value in the stencil buffer is 1:</p>\n\n<pre><code>glStencilFunc(GL_EQUAL, 1, 1);\nglStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);\n</code></pre>\n\n<p><code>GL_EQUAL</code> specifies that only pixels at positions where the stencil buffer value is equal to the reference value 1 pass the stencil test, and all other pixels are rejected. <code>GL_KEEP</code> specifies that the current values in the stencil buffer are not modified in this pass.</p></li>\n<li><p>Draw the geometry for the second pass.</p></li>\n</ul>\n\n<p>But the way I read your question, you're looking for something different. You want to sample the stencil buffer from one rendering pass in a later rendering pass, similar to the way you can sample depth textures.</p>\n\n<p>This is supported in OpenGL 4.3 and later. With <code>texId</code> the name of your depth/stencil texture, the key part is this texture parameter setting:</p>\n\n<pre><code>glBindTexture(GL_TEXTURE_2D, texId);\nglTexParamteri(GL_TEXTURE_2D, GL_DEPTH_STENCIL_TEXTURE_MODE, GL_STENCIL_INDEX);\n</code></pre>\n\n<p>This specifies that the stencil part of the depth/stencil texture should be used for sampling. Only nearest sampling is supported for stencil textures, so make sure that you also have these values:</p>\n\n<pre><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n</code></pre>\n\n<p>Not surprisingly based on the nature of the value, stencil textures are treated as unsigned integer textures. This means that the sampler type in the shader code needs to be <code>usampler2D</code>:</p>\n\n<pre><code>uniform usampler2D MyStencilTexture;\n</code></pre>\n\n<p>And when you sample the texture, the result will also be of type unsigned:</p>\n\n<pre><code>uvec4 stencilValue = texture(MyStencilTexture, textureCoordinates);\n</code></pre>\n\n<p>The stencil value will then be in <code>stencilValue.r</code>.</p>\n"}], "owner": {"reputation": 935, "user_id": 3365063, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f85ec976ad1f53d8d6e885a174d9e335?s=128&d=identicon&r=PG&f=1", "display_name": "zeb", "link": "https://stackoverflow.com/users/3365063/zeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 32492627, "answer_count": 1, "score": 0, "last_activity_date": 1441943340, "creation_date": 1441828766, "question_id": 32488146, "link": "https://stackoverflow.com/questions/32488146/deferred-renderer-with-stencil-buffer-fbo", "title": "Deferred renderer with stencil buffer FBO", "body": "<p>In my deferred renderer I create a FBO for my geometry pass where I store also a depth + stencil buffer into a texture with these parameters:</p>\n\n<ul>\n<li>Attachment: <code>GL_DEPTH_STENCIL_ATTACHMENT</code></li>\n<li>Format: <code>GL_DEPTH_STENCIL</code></li>\n<li>Internal format: <code>GL_DEPTH32F_STENCIL8</code></li>\n<li>Data type: <code>GL_UNSIGNED_INT_24_8</code></li>\n</ul>\n\n<p>and I can successfully populate this texture with depth and stencil.</p>\n\n<p>The problem I'm facing now is how to use the stencil buffer created in my geometry pass in order to use it somewhere else, like when I do a directional light pass I'd like to process only the pixels covered by the geometry visible on my geometry pass.</p>\n\n<p>So, how can I use the stencil buffer stored during my geometry pass for further use?</p>\n"}, {"tags": ["c++", "c++11", "gcc"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441828953, "post_id": 32488055, "comment_id": 52837004, "body": "What about the question you linked didn&#39;t answer your question?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441829040, "post_id": 32488055, "comment_id": 52837047, "body": "@Barry Operator lookup might make a difference. (But it doesn&#39;t.)"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441829120, "post_id": 32488055, "comment_id": 52837089, "body": "Related: <a href=\"http://stackoverflow.com/q/19159784/\">stackoverflow.com/q/19159784</a>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441829289, "post_id": 32488055, "comment_id": 52837174, "body": "@Barry Ah, that&#39;s the one I&#39;ve been looking for :)"}, {"owner": {"reputation": 1398, "user_id": 758986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c8a0d7d0ec4a33a462ce7f61f05814?s=128&d=identicon&r=PG", "display_name": "DimanNe", "link": "https://stackoverflow.com/users/758986/dimanne"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441829692, "post_id": 32488055, "comment_id": 52837346, "body": "@Barry in this case I use lambdas, and they could be handled/treated in some special way. For example they can at some conditions define implicit conversion operator (see ClosureType::operator ret(*)(params)() at <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/lambda</a>), which in its turn can somehow affect lookup rules."}], "owner": {"reputation": 1398, "user_id": 758986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c8a0d7d0ec4a33a462ce7f61f05814?s=128&d=identicon&r=PG", "display_name": "DimanNe", "link": "https://stackoverflow.com/users/758986/dimanne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "closed_date": 1441829268, "answer_count": 0, "score": 0, "last_activity_date": 1441828415, "creation_date": 1441828384, "last_edit_date": 1495535223, "question_id": 32488055, "link": "https://stackoverflow.com/questions/32488055/who-is-wrong-gcc-or-clang-and-why", "closed_reason": "Duplicate", "title": "Who is wrong gcc or clang and why?", "body": "<p>gcc fails to compile this code, but clang compiles it well.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/5368862/why-do-multiple-inherited-functions-with-same-name-but-different-signatures-not\">this</a> gcc is right. Because there is several base classes with the same function name - <code>operator()</code>, which is an ambiguity</p>\n\n<p>Is it really clang bug? Or may be there is special lookup rules for <code>operator()</code> in standard or something else not so obvious?</p>\n\n<pre><code>#include &lt;utility&gt;\n\ntemplate &lt;class... Ts&gt;\nclass TMultiLambda: public Ts... {\npublic:\n    template &lt;class... Fs&gt;\n    TMultiLambda(Fs&amp;&amp;... Vs) noexcept: Ts(std::forward&lt;Fs&gt;(Vs))... {\n    }\n};\ntemplate &lt;class... Ts&gt;\nauto MakeMultiLambda(Ts&amp;&amp;... Vs) noexcept -&gt; TMultiLambda&lt;std::remove_reference_t&lt;Ts&gt;...&gt; {\n    return { std::forward&lt;Ts&gt;(Vs)... };\n}\n\nint main() {\n    int x;\n    auto a = [x](int, int) { };\n    auto b = [x] (char) { };\n    auto c = MakeMultiLambda(a, b);\n    c(2, 2);\n    c('q');\n    return 0;\n}\n</code></pre>\n\n<p>P.S.\nYou can compile code online <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">here</a>, do not forget to append <code>-std=c++1y</code> to compiler options</p>\n"}, {"tags": ["c++", "multithreading", "matrix", "parallel-processing", "task-parallel-library"], "comments": [{"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1441828708, "post_id": 32488027, "comment_id": 52836885, "body": "You could add patchin algorithm so it fits in cache, works wwell with high order Strassen&#39;s algorithm but is some lossy. Otherwise, only a gpu(with equal cost$ of that cpu) can get under 0.1 sec per multiplication of 5kx5k"}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1441851195, "post_id": 32488027, "comment_id": 52844232, "body": "Call BLAS DGEMM. Will outperform loops by as much as 1000x."}], "owner": {"reputation": 3, "user_id": 5318581, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156021794825203/picture?type=large", "display_name": "Reem", "link": "https://stackoverflow.com/users/5318581/reem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441828258, "creation_date": 1441828258, "question_id": 32488027, "link": "https://stackoverflow.com/questions/32488027/parallel-matrix-multiplication-using-tpl", "title": "Parallel Matrix Multiplication using TPL", "body": "<p>Of the different ways to implement matrix multiplication code in TPL using Parallel.For, what will provide better speedup of the following schemes (assume you have an 8-core machine and matrix size to be multiplied is at least 5000x5000). \n1. Only the outer loop i is implemented as Parallel.For.\n2. Only the inner loop k is implement as Parallel.For.\n3. All three loops i, j, k are implemented as Parallel.For.</p>\n\n<p>Code:</p>\n\n<pre><code>Parallel.For (0, n, i =&gt;\n{\n   for (int j = 0; j &lt; n; j++)\n   {\n      for (int k = 0; k &lt; n; k++)\n      C[i, j] += A[i, k] * B[k, j];\n   }\n});\n</code></pre>\n"}, {"tags": ["c++", "bits"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1441863586, "post_id": 32488011, "comment_id": 52847778, "body": "the &#39;cout&#39; keyword is from C++ not from C.  suggest correcting the tag from &#39;c&#39; to &#39;c++&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 5671, "user_id": 1473751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DIVCL.jpg?s=128&g=1", "display_name": "Zong", "link": "https://stackoverflow.com/users/1473751/zong"}, "is_accepted": true, "score": 7, "last_activity_date": 1502467123, "last_edit_date": 1502467123, "creation_date": 1441829853, "answer_id": 32488416, "question_id": 32488011, "link": "https://stackoverflow.com/questions/32488011/printing-the-binary-representation-of-a-number/32488416#32488416", "title": "printing the binary representation of a number", "body": "<p>You're starting at the least significant bit in the number and printing it first. However, whatever you print first is the most significant digit in the typical binary representation. </p>\n\n<p>65 is <code>01000001</code> so this is how your loop iterates</p>\n\n<pre><code>01000001\n       ^   Output: 1\n\n01000001\n      ^    Output: 10\n\n01000001\n     ^     Output: 100\n\n...\n\n01000001\n^          Output: 10000010\n</code></pre>\n\n<p>Thus the printed output is in reverse. The simplest fix is to change the order of the loop. </p>\n\n<pre><code>for (int i = 7; i &gt;= 0; i--) {\n   cout &lt;&lt; ((a &gt;&gt; i) &amp; 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1441864152, "creation_date": 1441864152, "answer_id": 32494068, "question_id": 32488011, "link": "https://stackoverflow.com/questions/32488011/printing-the-binary-representation-of-a-number/32494068#32494068", "title": "printing the binary representation of a number", "body": "<p>An int in C is typically 32 bits. So this works for me</p>\n\n<pre><code>void binary(unsigned n) {\n    unsigned i;\n    // Reverse loop\n    for (i = 1 &lt;&lt; 31; i &gt; 0; i &gt;&gt;= 1)\n        printf(\"%u\", !!(n &amp; i));\n}\n\n. . .\n\nbinary(65);\n</code></pre>\n\n<blockquote>\n  <p>Output</p>\n</blockquote>\n\n<pre><code>00000000000000000000000001000001\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1441865979, "creation_date": 1441865979, "answer_id": 32494520, "question_id": 32488011, "link": "https://stackoverflow.com/questions/32488011/printing-the-binary-representation-of-a-number/32494520#32494520", "title": "printing the binary representation of a number", "body": "<p>In addition to just producing a binary string, sometimes it is beneficial to be able to specify the length of the resulting string for comparison or readability purposes. The following little function will take a number and length (number of digits int binary field) and provide that as a character for use or printing. With slightly more effort you can also break the sting up into formatted sections. (e.g. 16 digits: <code>0034-4843-2392-6720</code>)</p>\n\n<p>Try the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* BUILD_64 */\n#if defined(__LP64__) || defined(_LP64)\n# define BUILD_64   1\n#endif\n\n/* BITS_PER_LONG */\n#ifdef BUILD_64\n# define BITS_PER_LONG 64\n#else\n# define BITS_PER_LONG 32\n#endif\n\nchar *binpad (unsigned long n, size_t sz);\n\nint main (int argc, char **argv) {\n\n    int n = argc &gt; 1 ? atoi (argv[1]) : 251;\n    size_t sz = argc &gt; 2 ? (size_t) atoi (argv[2]) : 8;\n\n    printf (\"\\n %8d  :  %s\\n\\n\", n, binpad (n, sz));\n\n    return 0;\n}\n\n/** returns pointer to binary representation of 'n' zero padded to 'sz'.\n*  returns pointer to string contianing binary representation of\n*  unsigned 64-bit (or less ) value zero padded to 'sz' digits.\n*/\nchar *binpad (unsigned long n, size_t sz)\n{\n    static char s[BITS_PER_LONG + 1] = {0};\n    char *p = s + BITS_PER_LONG;\n    register size_t i;\n\n    for (i = 0; i &lt; sz; i++)\n        *--p = (n&gt;&gt;i &amp; 1) ? '1' : '0';\n\n    return p;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ binprnex\n\n  251  :  11111011\n\n$ binprnex 42869 16\n\n42869  :  1010011101110101\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5182482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6efefe77c108482253225e8251c5db?s=128&d=identicon&r=PG&f=1", "display_name": "User124", "link": "https://stackoverflow.com/users/5182482/user124"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10134, "favorite_count": 1, "accepted_answer_id": 32488416, "answer_count": 3, "score": 4, "last_activity_date": 1502467123, "creation_date": 1441828201, "last_edit_date": 1441866936, "question_id": 32488011, "link": "https://stackoverflow.com/questions/32488011/printing-the-binary-representation-of-a-number", "title": "printing the binary representation of a number", "body": "<p>What is wrong with the below code which prints the binary representation of a number?</p>\n\n<pre><code>int a = 65;\nfor (int i = 0; i &lt; 8; i++) {\n    cout &lt;&lt; ((a &gt;&gt; i) &amp; 1);\n}\n</code></pre>\n"}, {"tags": ["c++", "copy", "logic"], "comments": [{"owner": {"reputation": 28791, "user_id": 427328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47be1cc0ad1f581c1f487f556a2c119?s=128&d=identicon&r=PG", "display_name": "jwueller", "link": "https://stackoverflow.com/users/427328/jwueller"}, "edited": false, "score": 0, "creation_date": 1441828124, "post_id": 32487933, "comment_id": 52836594, "body": "What output are you expecting, and what output are you getting, exactly?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1441828292, "post_id": 32487933, "comment_id": 52836670, "body": "Honestly, that is overly complex code just to reverse a string."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441828305, "post_id": 32487933, "comment_id": 52836680, "body": "Why <code>strcpy</code> inside a loop???"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1441828519, "post_id": 32487933, "comment_id": 52836785, "body": "Just get a pointer to the last character and iterate backwards, copying to the output string. Take care of the terminating character."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1441828641, "post_id": 32487933, "comment_id": 52836850, "body": "Yes, I think the OP isn&#39;t aware that loops can go backwards.  I&#39;m assuming this since the call to strcpy is totally unnecessary (even though it is being used incorrectly)."}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1441828679, "post_id": 32487933, "comment_id": 52836873, "body": "I would highly recommend using <code>std::string</code> in c++ code"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1441828722, "post_id": 32487933, "comment_id": 52836891, "body": "<code>int i=0; i&lt;num; num--)</code>  To the OP.  What are you trying to accomplish here?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441828724, "post_id": 32487933, "comment_id": 52836892, "body": "@AlexLop. Overachieving, of course."}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1441829111, "post_id": 32487933, "comment_id": 52837083, "body": "@PaulMcKenzie This actually causes UB cause it will loop 2^32/2 times"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441829483, "post_id": 32487933, "comment_id": 52837261, "body": "Pretty sure he knew that."}], "answers": [{"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441828558, "post_id": 32488080, "comment_id": 52836808, "body": "You might want to elaborate, technically they are strings, but not <code>std::string</code>"}], "tags": [], "owner": {"reputation": 671, "user_id": 5298959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdb0a2b0364de45e4108bdfa18d44002?s=128&d=identicon&r=PG&f=1", "display_name": "fuzzything44", "link": "https://stackoverflow.com/users/5298959/fuzzything44"}, "is_accepted": false, "score": 0, "last_activity_date": 1441828491, "creation_date": 1441828491, "answer_id": 32488080, "question_id": 32487933, "link": "https://stackoverflow.com/questions/32487933/how-to-do-a-reverse-char-copy-in-c/32488080#32488080", "title": "How to do a reverse char copy in C++", "body": "<p>You can always turn them to strings and use source.rbegin() with a copy function.</p>\n"}, {"comments": [{"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1441829333, "post_id": 32488148, "comment_id": 52837199, "body": "This is UB, because it will go from 0 to -1, -2 etc. AND it will loop 2^31 times"}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": true, "score": 1, "last_activity_date": 1441831987, "last_edit_date": 1441831987, "creation_date": 1441828767, "answer_id": 32488148, "question_id": 32487933, "link": "https://stackoverflow.com/questions/32487933/how-to-do-a-reverse-char-copy-in-c/32488148#32488148", "title": "How to do a reverse char copy in C++", "body": "<p>But there are easier and faster ways to do this:\nFor example why do you need to copy the <code>source</code> to the <code>destination</code> in a loop?</p>\n\n<p>And what if <code>destination == source</code>?</p>\n\n<p>Also this loop:</p>\n\n<pre><code>for (int i=0; i&lt;num; num--)\n{\n    placeHolder = destination[num];\n    destination[i]=placeHolder;\n}\n</code></pre>\n\n<p>Is incorrectly written and even it was a proper written loop, you would override the non reverted data in the <code>destination</code>.</p>\n\n<p>I hope something like this would work (taking care of the case that <code>source == destination</code> is possible):</p>\n\n<pre><code>char* reverseCopy(char* destination, const char* source, int num) {\n    if (destination != source)\n    {\n        std::copy ( source, source + num - 1, destination );\n    }\n    std::reverse(destination ,destination + num - 1);\n    destination[num-1] = '\\0';\n\n    return destination;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441829055, "post_id": 32488190, "comment_id": 52837058, "body": "what if <code>destination == source</code> ??"}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441829198, "post_id": 32488190, "comment_id": 52837134, "body": "@AlexLop. This isn&#39;t about optimizing. He only wants to know how to reverse a string."}, {"owner": {"reputation": 139, "user_id": 2109751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7912944e8a44c843ed5337427fe9ec?s=128&d=identicon&r=PG", "display_name": "Danilo Fiorenzano", "link": "https://stackoverflow.com/users/2109751/danilo-fiorenzano"}, "edited": false, "score": 0, "creation_date": 1441829541, "post_id": 32488190, "comment_id": 52837291, "body": "Then the behaviour would be undefined, just like with library functions like memcpy when operating on overlapping areas. That&#39;s an issue outside the scope of the OP&#39;s question. If desired, then the source should be first copied to a temporary buffer and then the backwards copy executed from there."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1441830569, "post_id": 32488190, "comment_id": 52837758, "body": "@Quest checking that <code>destination == source</code> isn&#39;t about optimizing. It is about input checking."}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441910647, "post_id": 32488190, "comment_id": 52877880, "body": "@AlexLop. Kind of both"}], "tags": [], "owner": {"reputation": 139, "user_id": 2109751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7912944e8a44c843ed5337427fe9ec?s=128&d=identicon&r=PG", "display_name": "Danilo Fiorenzano", "link": "https://stackoverflow.com/users/2109751/danilo-fiorenzano"}, "is_accepted": false, "score": 0, "last_activity_date": 1441828910, "creation_date": 1441828910, "answer_id": 32488190, "question_id": 32487933, "link": "https://stackoverflow.com/questions/32487933/how-to-do-a-reverse-char-copy-in-c/32488190#32488190", "title": "How to do a reverse char copy in C++", "body": "<p>I might write that function as follows:</p>\n\n<pre><code>char* reverseCopy(char* destination, const char* source, int num) {\n    char* d = destination;\n    while (num) {\n        *d++ = source[--num];\n    }\n    *d = '\\0';\n    return destination;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 493, "user_id": 3352542, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e90f7aee98e72215484e7ad8bbf6cbf?s=128&d=identicon&r=PG&f=1", "display_name": "GrapeSoda3", "link": "https://stackoverflow.com/users/3352542/grapesoda3"}, "edited": false, "score": 0, "creation_date": 1441831101, "post_id": 32488193, "comment_id": 52838032, "body": "Unfortunately I cannot use the std lib. I can only use c-strings"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 493, "user_id": 3352542, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e90f7aee98e72215484e7ad8bbf6cbf?s=128&d=identicon&r=PG&f=1", "display_name": "GrapeSoda3", "link": "https://stackoverflow.com/users/3352542/grapesoda3"}, "edited": false, "score": 1, "creation_date": 1441831363, "post_id": 32488193, "comment_id": 52838143, "body": "@GrapeSoda3: You don&#39;t have to change to <code>std::string</code>, this operates on the C string(s) passed as parameters. If you aren&#39;t allowed to use functions from <code>&lt;algorithm&gt;</code> then I guess you&#39;ll have to reinvent this. It would be unfortunate because there are a LOT of useful <a href=\"http://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow noreferrer\">standard library algorithms</a>."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 493, "user_id": 3352542, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e90f7aee98e72215484e7ad8bbf6cbf?s=128&d=identicon&r=PG&f=1", "display_name": "GrapeSoda3", "link": "https://stackoverflow.com/users/3352542/grapesoda3"}, "edited": false, "score": 0, "creation_date": 1441832130, "post_id": 32488193, "comment_id": 52838535, "body": "@GrapeSoda3 Just look at the sample code for <code>std::reverse_copy</code> and base it on that."}], "tags": [], "owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "is_accepted": false, "score": 2, "last_activity_date": 1441828921, "creation_date": 1441828921, "answer_id": 32488193, "question_id": 32487933, "link": "https://stackoverflow.com/questions/32487933/how-to-do-a-reverse-char-copy-in-c/32488193#32488193", "title": "How to do a reverse char copy in C++", "body": "<p>Would it be cheating to use a <a href=\"http://en.cppreference.com/w/cpp/algorithm/reverse_copy\" rel=\"nofollow\">standard library algorithm</a>?</p>\n\n<pre><code>char* reverseCopy(char* destination, const char* source, int num)\n{\n    std::reverse_copy(source, source + num, destination);\n    destination[num] = '\\0';\n    return destination;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441832168, "post_id": 32488729, "comment_id": 52838560, "body": "This solution uses extra memory."}], "tags": [], "owner": {"reputation": 888, "user_id": 4618308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moha6.jpg?s=128&g=1", "display_name": "mrflash818", "link": "https://stackoverflow.com/users/4618308/mrflash818"}, "is_accepted": false, "score": 0, "last_activity_date": 1441831017, "creation_date": 1441831017, "answer_id": 32488729, "question_id": 32487933, "link": "https://stackoverflow.com/questions/32487933/how-to-do-a-reverse-char-copy-in-c/32488729#32488729", "title": "How to do a reverse char copy in C++", "body": "<p>Push the string, char by char, into a STL stack, then pop the chars off the top of the stack, into a new string.</p>\n\n<p>They'll be reversed.</p>\n"}], "owner": {"reputation": 493, "user_id": 3352542, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4e90f7aee98e72215484e7ad8bbf6cbf?s=128&d=identicon&r=PG&f=1", "display_name": "GrapeSoda3", "link": "https://stackoverflow.com/users/3352542/grapesoda3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1421, "favorite_count": 0, "accepted_answer_id": 32488148, "answer_count": 5, "score": 0, "last_activity_date": 1441831987, "creation_date": 1441827841, "question_id": 32487933, "link": "https://stackoverflow.com/questions/32487933/how-to-do-a-reverse-char-copy-in-c", "title": "How to do a reverse char copy in C++", "body": "<p>Hi guys so I am having some trouble with my reverse copy method. The method needs to copy the char* in reverse. </p>\n\n<pre><code>char* reverseCopy(char* destination, const char* source, int num)\n{\n    char placeHolder;\n    for (int j=0; j&lt;=num; j++)\n    {\n        strcpy(destination,source);\n    }\n\n    for (int i=0; i&lt;num; num--)\n    {\n        placeHolder = destination[num];\n        destination[i]=placeHolder;\n    }\n    destination[num]='\\0';\n    return destination;\n}\n</code></pre>\n\n<p>Destination is where the copy is being stored.</p>\n\n<p>Source is copied char</p>\n\n<p>Num is the number of characters in the array </p>\n\n<p>Any insight is appreciated. Thanks</p>\n"}, {"tags": ["c++", "string", "stl"], "comments": [{"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 0, "creation_date": 1441827913, "post_id": 32487924, "comment_id": 52836491, "body": "Calling <code>s.c_str()</code> doesn&#39;t convert the <code>std::string</code> to a &quot;c type string.&quot; It returns a pointer to the string held in the <code>std::string</code> which you ignore. So the statement, essentially, is a no-op. Try: <code>std::cout &lt;&lt; strlen(s.c_str ())</code> or, better still, <code>std::cout &lt;&lt; s.size()</code>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1441827915, "post_id": 32487924, "comment_id": 52836492, "body": "This line <code>s.c_str();</code> does nothing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user146043"}, "edited": false, "score": 1, "creation_date": 1441827985, "post_id": 32487924, "comment_id": 52836534, "body": "It is.....not working?  That&#39;s a pretty vague bug report. What&#39;s it supposed to do? What&#39;s it actually doing?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1441828297, "post_id": 32487924, "comment_id": 52836676, "body": "Congratulations! You just included the entire standard library AND pulled it all into the global namespace. I can&#39;t see this working well with anything non trivial. To explain: <code>#include&lt;bits&#47;stdc++.h&gt;</code> this includes the whole damn standard library or near enough to make no difference. That&#39;s a lot of extra compiling. <code>using namespace std;</code> makes everything in the std namespace global. You are setting yourself up for massive mystery bug nightmares with two lines of code. Don&#39;t do this to yourself."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441829018, "post_id": 32487924, "comment_id": 52837038, "body": "@user4581301 We&#39;ve got a <a href=\"http://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">meme</a> for this recently :-D ..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441829393, "post_id": 32487924, "comment_id": 52837220, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6  I&#39;m just thrilled to see both <a href=\"https://www.youtube.com/watch?v=Kj4PSlqt4BQ\" rel=\"nofollow noreferrer\">Wave Motion</a>-calibre FUBAR cannons in use at the same time. The debugging will be epic."}], "answers": [{"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1441828304, "post_id": 32487970, "comment_id": 52836678, "body": "I would make it clear that calling <code>string::size()</code> is an O(1) operation versus the O(n) operation of <code>strlen</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1441828794, "post_id": 32487970, "comment_id": 52836932, "body": "@Mgetz Fair point! Upvoted their answer as well. Anyway the question looks doomed for me from long-term view."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1441828990, "post_id": 32487970, "comment_id": 52837024, "body": "no probably about the more efficient part at least C++11 requires <code>string::size()</code> to be O(1)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1441829421, "post_id": 32487970, "comment_id": 52837232, "body": "@Mgetz Changed from probability to certainly."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 5, "last_activity_date": 1441830040, "last_edit_date": 1441830040, "creation_date": 1441828003, "answer_id": 32487970, "question_id": 32487924, "link": "https://stackoverflow.com/questions/32487924/strlen-for-strings-in-c/32487970#32487970", "title": "Strlen for strings in c++", "body": "<blockquote>\n<pre><code>s.c_str();\n</code></pre>\n</blockquote>\n\n<p>This code has no side effects on <code>s</code> actually regarding a conversion or such. You want to process the result further.</p>\n\n<p>Instead of </p>\n\n<blockquote>\n<pre><code>cout&lt;&lt;strlen(s);\n</code></pre>\n</blockquote>\n\n<p>you want to have either</p>\n\n<pre><code>cout&lt;&lt;strlen(s.c_str());\n</code></pre>\n\n<p>or </p>\n\n<pre><code>cout&lt;&lt;s.size();\n</code></pre>\n\n<p>Where the latter is the certainly more efficient, because the standard requires a time complexity of O(1) for <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/size\" rel=\"nofollow\"><code>std::string::size()</code></a>, where <code>strlen()</code> cannot guarantee a better time complexity than <code>O(strlen(s))</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 0, "last_activity_date": 1441828293, "creation_date": 1441828293, "answer_id": 32488032, "question_id": 32487924, "link": "https://stackoverflow.com/questions/32487924/strlen-for-strings-in-c/32488032#32488032", "title": "Strlen for strings in c++", "body": "<p>Why use <code>strlen</code> when the <code>string</code> class does the business?</p>\n\n<p>Please read <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/string/basic_string</a> and not the size/length method</p>\n\n<p>Otherwise do as the @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 suggests</p>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 4, "last_activity_date": 1441828303, "creation_date": 1441828303, "answer_id": 32488035, "question_id": 32487924, "link": "https://stackoverflow.com/questions/32487924/strlen-for-strings-in-c/32488035#32488035", "title": "Strlen for strings in c++", "body": "<p>If you want to waste clock-cycles in your processor:</p>\n\n<pre><code> cout &lt;&lt; strlen(s.c_str());\n</code></pre>\n\n<p>will count every character up to the first nul character in <code>s</code>. </p>\n\n<p>If you just want to know how long the string is:</p>\n\n<pre><code> cout &lt;&lt; s.length();\n</code></pre>\n\n<p>or </p>\n\n<pre><code> cout &lt;&lt; s.size();\n</code></pre>\n\n<p>will give you that (and with an algorithm that is <code>O(1)</code> rather than the <code>strlen</code> algorithm that is <code>O(n)</code> - meaning that a million character long string takes one million times longer to measure the length of than a single character string). [Of course, if you have a <code>std::string</code> that contains a nul character in the middle, you may find that one of these methods is \"right\" and the other is \"wrong\" because it either gives too long or too short a length - a C style string is not allowed to contain a nul character in the middle of the string, it is only allowed as a termination]</p>\n"}], "owner": {"reputation": 99, "user_id": 3948671, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100006371283072/picture?type=large", "display_name": "Ishan Bansal", "link": "https://stackoverflow.com/users/3948671/ishan-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1441830040, "creation_date": 1441827807, "question_id": 32487924, "link": "https://stackoverflow.com/questions/32487924/strlen-for-strings-in-c", "title": "Strlen for strings in c++", "body": "<p>I have converted c++ to c type string and working with strlen but it is not working.  </p>\n\n<pre><code> #include&lt;bits/stdc++.h&gt;\nusing namespace std;\nint main(){\nstring s(\"Hello\");\ns.c_str();\ncout&lt;&lt;strlen(s);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl", "g++", "std"], "comments": [{"owner": {"reputation": 915, "user_id": 2016450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9IKl.jpg?s=128&g=1", "display_name": "mrunion", "link": "https://stackoverflow.com/users/2016450/mrunion"}, "edited": false, "score": 1, "creation_date": 1441827866, "post_id": 32487866, "comment_id": 52836467, "body": "The short answer is &quot;you can&#39;t&quot;. Those are C++ 11 features and you need C++ 11 to do it (or C++ 14). You CAN do as the patch above did and implement your own implementation of std::begin, etc. But you have to write it in whatever version of C++ you have."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 915, "user_id": 2016450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R9IKl.jpg?s=128&g=1", "display_name": "mrunion", "link": "https://stackoverflow.com/users/2016450/mrunion"}, "edited": false, "score": 0, "creation_date": 1441827907, "post_id": 32487866, "comment_id": 52836485, "body": "@mrunion, why so sad? Of course you can do std::begin, std::end and std::stoi in C++03."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441828041, "post_id": 32487866, "comment_id": 52836559, "body": "Well you wouldn&#39;t be able to put them in <code>namespace std</code> itself, but you could work around that."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441828090, "post_id": 32487866, "comment_id": 52836581, "body": "Look in the headers provided by modern VS for the code of these functions and figure out how to adapt it. Basically you need one version which calls <code>c.begin()</code> but another version specialized for arrays."}], "answers": [{"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1441827949, "post_id": 32487934, "comment_id": 52836517, "body": "What about arrays? That is the whole point why these functions are needed."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441827952, "post_id": 32487934, "comment_id": 52836518, "body": "@dyp, sure thing. Added it, was typing in a hurry."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1441827959, "post_id": 32487934, "comment_id": 52836522, "body": "And a <code>const_iterator</code> / <code>const C&amp;</code> overload. And another overload for arrays."}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1441828222, "post_id": 32487934, "comment_id": 52836641, "body": "Naming it <code>my_begin</code> kinda defeats the purpose of having it at all"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3835277"}, "edited": false, "score": 0, "creation_date": 1441828350, "post_id": 32487934, "comment_id": 52836692, "body": "Thanks for giving me an idea of how to do it. Now I just need to figure out <code>std::stoi</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1441828392, "post_id": 32487934, "comment_id": 52836720, "body": "@imreal, once you start hacking, nothign stops you from actually naming it begin and putting into std::. Prohibited, but whatever."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 4, "creation_date": 1441828607, "post_id": 32487934, "comment_id": 52836831, "body": "The last overload isn&#39;t necessary. For const arrays, <code>C</code> will be deduced to be <code>const</code> in the third overload, and it is more specialized than the other two."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1441828772, "post_id": 32487934, "comment_id": 52836919, "body": "@gragas: <code>stoi</code> is just an <code>istringstream s(input); s &gt;&gt; i</code> with some error handling."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 5, "last_activity_date": 1441828498, "last_edit_date": 1441828498, "creation_date": 1441827844, "answer_id": 32487934, "question_id": 32487866, "link": "https://stackoverflow.com/questions/32487866/how-can-i-use-stdbegin-and-stdend-without-c11/32487934#32487934", "title": "How can I use std::begin and std::end without C++11?", "body": "<p>Pretty straightforward.\nFor instance, here is std::begin:</p>\n\n<pre><code>template &lt;typename C&gt;\ntypename C::iterator my_begin(C&amp; ctr) { return ctr.begin(); }\n\ntemplate &lt;typename C&gt;\ntypename C::const_iterator my_begin(const C&amp; ctr) { return ctr.begin(); }\n\ntemplate &lt;typename C, size_t sz&gt;\nC* my_begin(C (&amp;ctr)[sz]) { return &amp;ctr[0]; } \n\ntemplate &lt;typename C, size_t sz&gt;\nconst C* my_begin(const C (&amp;ctr)[sz]) { return &amp;ctr[0]; } \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3835277"}, "edited": false, "score": 0, "creation_date": 1441843043, "post_id": 32489191, "comment_id": 52842327, "body": "The whole point is this must compile with vanilla MS-VC++6.0 or G++. By vanilla I mean <b>no flags, no options, no extras.</b> This means I cannot use boost."}], "tags": [], "owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "is_accepted": false, "score": 0, "last_activity_date": 1441832887, "creation_date": 1441832887, "answer_id": 32489191, "question_id": 32487866, "link": "https://stackoverflow.com/questions/32487866/how-can-i-use-stdbegin-and-stdend-without-c11/32489191#32489191", "title": "How can I use std::begin and std::end without C++11?", "body": "<p>boost::lexical_cast can do the same job as that of to_string and it does not require C++11. Below is a simple example:</p>\n\n<pre><code>std::string s = boost::lexical_cast&lt;std::string&gt;(12345)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3835277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 32487934, "answer_count": 2, "score": 3, "last_activity_date": 1441832887, "creation_date": 1441827547, "last_edit_date": 1495539863, "question_id": 32487866, "link": "https://stackoverflow.com/questions/32487866/how-can-i-use-stdbegin-and-stdend-without-c11", "title": "How can I use std::begin and std::end without C++11?", "body": "<p>I'm trying to write code that will compile for <a href=\"http://poj.org\" rel=\"nofollow noreferrer\">POJ</a>. POJ doesn't use C++11 so I can't use really basic STL functions like <code>std::to_string</code>, <code>std::begin</code>, or <code>std::end</code>. I looked around and found <a href=\"https://stackoverflow.com/questions/12975341/to-string-is-not-a-member-of-std-says-so-g\">another StackOverflow question</a> inquiring about <code>std::to_string</code>. To get <code>std::to_string</code> code to compile with a bare <code>g++ myfile.cpp</code> command, a user suggested this patch, which works nicely:</p>\n\n<pre><code>namespace patch\n{\n    template &lt; typename T &gt; std::string to_string( const T&amp; n )\n    {\n        std::ostringstream stm ;\n        stm &lt;&lt; n ;\n        return stm.str() ;\n    }\n}\n</code></pre>\n\n<p>I want to do the same thing for <code>std::begin</code>, <code>std::end</code>, and <code>std::stoi</code>, but I'm not sure how to do it. I'm quite unfamiliar with the STL. I just want my working C++11 code to compile with either MS-VC++6.0 or G++ <em>without any flags, etc.</em> How can I do this?</p>\n"}, {"tags": ["c++", "boost", "modbus-tcp"], "answers": [{"comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1441921653, "post_id": 32488590, "comment_id": 52883326, "body": "You definitely <i>can</i> use a custom deleter to call whatever function you want."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1441830533, "creation_date": 1441830533, "answer_id": 32488590, "question_id": 32487853, "link": "https://stackoverflow.com/questions/32487853/boost-shared-ptr-with-typedef-struct/32488590#32488590", "title": "Boost shared_ptr with typedef struct", "body": "<p>In fact this appears to be a C-style API where they've completely hidden the implementation of <code>modbus_t</code> from you as a user (since you pass the pointer to free functions rather than calling object members).</p>\n\n<p>What this means is that you can't use <code>shared_ptr</code> out of the box (since it needs the definition to call <code>delete</code>, which also happens to be the wrong call to make). There <em>may</em> be a way to use a custom deleter that calls the appropriate cleanup function (probably <code>modbus_free</code>). You would then have to use <code>.get()</code> to get the raw pointer any time you wanted to call into the API.</p>\n"}, {"comments": [{"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 4, "creation_date": 1441909807, "post_id": 32489731, "comment_id": 52877369, "body": "Thank you.  I wish c programmers would embrace Boost more"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1441921604, "post_id": 32489731, "comment_id": 52883300, "body": "@xinthose Thank you. I agree, but I&#39;d like to note that nothing is boost-specific in that answer :)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1441835499, "creation_date": 1441835499, "answer_id": 32489731, "question_id": 32487853, "link": "https://stackoverflow.com/questions/32487853/boost-shared-ptr-with-typedef-struct/32489731#32489731", "title": "Boost shared_ptr with typedef struct", "body": "<p>You could - perhaps - use a</p>\n\n<pre><code>if (std::unique_ptr&lt;modbus_t, void(*)(modbus_t*)&gt; mb(modbus_new_tcp(ip_address.c_str(), modbus_port), &amp;modbus_free)) {\n\n    modbus_connect(mb);\n\n    /* Read 5 registers from the address 0 */\n    modbus_read_registers(mb, 0, 5, tab_reg);\n\n    modbus_close(mb);\n} // modbus_free invoked, even in the case of exception.\n</code></pre>\n\n<p>This, of course, assuming that there is unique ownership.</p>\n"}], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 32488590, "answer_count": 2, "score": 1, "last_activity_date": 1441835499, "creation_date": 1441827487, "last_edit_date": 1441828526, "question_id": 32487853, "link": "https://stackoverflow.com/questions/32487853/boost-shared-ptr-with-typedef-struct", "title": "Boost shared_ptr with typedef struct", "body": "<p>I am having compile issues with <a href=\"https://github.com/stephane/libmodbus\" rel=\"nofollow\">libmodbus</a>.  I have the following code</p>\n\n<pre><code>boost::shared_ptr &lt;modbus_t&gt; ctx;\nctx-&gt;modbus_new_tcp(ip_address.c_str(), modbus_port);\n</code></pre>\n\n<p>but I get the following error</p>\n\n<pre><code>error: invalid use of incomplete type 'struct _modbus'\n</code></pre>\n\n<p>it points to this line in modbus.h</p>\n\n<pre><code>typedef struct _modbus modbus_t;\n</code></pre>\n\n<p>I do not understand enough about this to troubleshoot my problem.  What do you think it is?  Is this library not comptatible with a smart pointer?  They tell you to use a regular pointer</p>\n\n<pre><code>modbus_t* ctx;\n</code></pre>\n\n<p>Thank you.  </p>\n"}, {"tags": ["c++", "class", "polymorphism"], "comments": [{"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 1, "creation_date": 1441827274, "post_id": 32487730, "comment_id": 52836193, "body": "IIRC, you are passing <i>a copy</i> of the objects you create, not the original ones. And the copy is of the type defined by the param variable. See <a href=\"http://www.cplusplus.com/forum/windows/9891/\" rel=\"nofollow noreferrer\">cplusplus.com/forum/windows/9891</a>"}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 2, "creation_date": 1441827406, "post_id": 32487730, "comment_id": 52836259, "body": "Aaaand <a href=\"http://stackoverflow.com/questions/2432683/what-does-slicing-mean-in-c\" title=\"what does slicing mean in c\">stackoverflow.com/questions/2432683/what-does-slicing-mean-i&zwnj;&#8203;n-c</a>"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441827659, "post_id": 32487730, "comment_id": 52836374, "body": "No elegant way to fix it without changing the call in <code>main()</code>. Sorry."}, {"owner": {"reputation": 1467, "user_id": 1864033, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/032be4c624f9cbd83a4288ecca8fda1d?s=128&d=identicon&r=PG", "display_name": "Stepan Loginov", "link": "https://stackoverflow.com/users/1864033/stepan-loginov"}, "edited": false, "score": 0, "creation_date": 1441828421, "post_id": 32487730, "comment_id": 52836736, "body": "Ok, i understood that without references or pointers constructor cuts objects into unit objects. Thanks."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1441829359, "post_id": 32487730, "comment_id": 52837208, "body": "In theory, you could use rvalue-references <code>(unit&amp;&amp;)</code>. However, that would introduce a problem with lifetime. In the code as you write, it wouldn&#39;t be a problem, but if you constructed a duel using temporaries, and then used it later, it would be a problem."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1441830655, "post_id": 32487730, "comment_id": 52837814, "body": "I would not call it elegant, but have a look at <a href=\"http://coliru.stacked-crooked.com/a/0e0b9b69598d3bc7\" rel=\"nofollow noreferrer\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1441828631, "last_edit_date": 1441828631, "creation_date": 1441827877, "answer_id": 32487942, "question_id": 32487730, "link": "https://stackoverflow.com/questions/32487730/call-parent-virtual-function-from-child-class/32487942#32487942", "title": "call parent virtual function from child class", "body": "<p>In</p>\n\n<pre><code>duel(unit _a, unit _b):a(&amp;_a),b(&amp;_b){};\n</code></pre>\n\n<p>You are slicing the objects as you are passing by value.  To fix this you can take in pointers in your constructor</p>\n\n<pre><code>duel(unit* _a, unit* _b):a(_a),b(_b){};\n</code></pre>\n\n<p>And then you will need to change <code>main()</code> to create to objects and pass them to <code>duel</code></p>\n\n<pre><code>int main(){\n    unit npc;\n    hero bob;\n    duel d(&amp;npc,&amp;bob);\n    d.start();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "is_accepted": true, "score": 2, "last_activity_date": 1441834003, "creation_date": 1441834003, "answer_id": 32489438, "question_id": 32487730, "link": "https://stackoverflow.com/questions/32487730/call-parent-virtual-function-from-child-class/32489438#32489438", "title": "call parent virtual function from child class", "body": "<p>Due to slicing, it's better to always use polymorphism together with\nsmart-pointers. This would be a possible design:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;utility&gt;\n\nusing namespace std;\n\nclass unit_base\n{\npublic:\n    virtual ~unit_base() = default;\n    virtual void make_hit() =0;\n};\n\nclass unit : public unit_base\n{\npublic:\n    unit() = default;\n    virtual void make_hit() override\n    {\n        cout &lt;&lt; \"pure hit\" &lt;&lt; endl;\n    }\n};\n\nclass hero : public unit_base\n{\npublic:\n    hero() = default;\n    virtual void make_hit() override\n    {\n        cout &lt;&lt; \"SUPER hit\" &lt;&lt; endl;\n    }\n};\n\nclass duel\n{\npublic:\n    duel( shared_ptr&lt;unit_base&gt; a, shared_ptr&lt;unit_base&gt; b )\n        : a(a), b(b)\n    {}\n    void start()\n    {\n        auto aa = a.lock();\n        auto bb = b.lock();\n        if( aa &amp;&amp; bb )\n        {\n            aa-&gt;make_hit();\n            bb-&gt;make_hit();\n        } else {\n            cout &lt;&lt; \"duelist expired\" &lt;&lt; endl;\n        }\n    }\nprivate:\n    weak_ptr&lt;unit_base&gt; a, b;\n};\n\nint main()\n{\n    // use with temporarys\n    duel{ make_shared&lt;unit&gt;(), make_shared&lt;hero&gt;() }.start();\n\n    cout &lt;&lt; \"-------------\" &lt;&lt; endl;\n\n    // use with variables\n    auto u = make_shared&lt;unit&gt;();\n    auto h = make_shared&lt;hero&gt;();\n    duel d{h,u};\n    d.start();\n\n    cout &lt;&lt; \"-------------\" &lt;&lt; endl;\n\n    // try to use with expired duelists\n    u.reset();\n    d.start();\n}\n</code></pre>\n\n<p>Also remember to always have a virtual destructor in your base-class.</p>\n"}, {"comments": [{"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 1, "creation_date": 1441892940, "post_id": 32496347, "comment_id": 52866664, "body": "the <a href=\"http://coliru.stacked-crooked.com/a/0e0b9b69598d3bc7\" rel=\"nofollow noreferrer\">templated version</a> is not pretty either"}, {"owner": {"reputation": 1467, "user_id": 1864033, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/032be4c624f9cbd83a4288ecca8fda1d?s=128&d=identicon&r=PG", "display_name": "Stepan Loginov", "link": "https://stackoverflow.com/users/1864033/stepan-loginov"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1441894531, "post_id": 32496347, "comment_id": 52867911, "body": "It&#39;s look really nice for me. I am very impressed. I can&#39;t understand all code, but i will try to understand."}], "tags": [], "owner": {"reputation": 1467, "user_id": 1864033, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/032be4c624f9cbd83a4288ecca8fda1d?s=128&d=identicon&r=PG", "display_name": "Stepan Loginov", "link": "https://stackoverflow.com/users/1864033/stepan-loginov"}, "is_accepted": false, "score": 1, "last_activity_date": 1441872248, "creation_date": 1441872248, "answer_id": 32496347, "question_id": 32487730, "link": "https://stackoverflow.com/questions/32487730/call-parent-virtual-function-from-child-class/32496347#32496347", "title": "call parent virtual function from child class", "body": "<p>The only way I have found for myself in C++ is make all combination of constructor in \"duel\" class. This solution not so elegant, need changing in \"duel\" code when added new class, and also this have overhead. </p>\n\n<pre><code>  ~duel(){\n    delete a;\n    delete b;\n  }\n#define _cc(t1, t2) duel(t1 _a, t2 _b) : a(new t1 (_a)), b (new t2(_b)){}\n  _cc(unit,unit);\n  _cc(hero,unit);\n  _cc(unit,hero);\n  _cc(hero,hero);\n#undef _cc\n</code></pre>\n\n<p>I also tried use template for this, but I can't find a way make automatic type determination.</p>\n"}], "owner": {"reputation": 1467, "user_id": 1864033, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/032be4c624f9cbd83a4288ecca8fda1d?s=128&d=identicon&r=PG", "display_name": "Stepan Loginov", "link": "https://stackoverflow.com/users/1864033/stepan-loginov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 32489438, "answer_count": 3, "score": 1, "last_activity_date": 1441872248, "creation_date": 1441826952, "question_id": 32487730, "link": "https://stackoverflow.com/questions/32487730/call-parent-virtual-function-from-child-class", "title": "call parent virtual function from child class", "body": "<p>I want to make some \"duel\" with two \"units\".\nI write class \"duel\" that constructs from two \"units\".\nBut some kind of \"unit\" is special (inherited from units) like heroes, bosses etc. And they want to use special strikes during battle. \nBut actually class \"duel\" doesn't know who is hero, or who is pure unit.</p>\n\n<p>Code looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass unit{\n  public:\n   unit(){};\n   virtual void make_hit(){\n     std::cout&lt;&lt;\"pure hit\\n\";\n   }\n};\n\nclass hero:public unit {\n  public:\n   hero():unit(){};\n   void  make_hit(){\n     std::cout&lt;&lt;\"SUPER hit\\n\";\n   }\n};\n\nclass duel {\n  unit *a, *b;\n  public:\n  duel(unit _a, unit _b):a(&amp;_a),b(&amp;_b){};\n  void start (){\n    a-&gt;make_hit();\n    b-&gt;make_hit();\n  }\n};\n\nint main(){\n  duel(unit(),hero()).start();\n  return 0;\n\n}\n</code></pre>\n\n<p>I have two main problem.</p>\n\n<p>First - I use refers to temporary objects in constructor. That objects illegal when duel::duel() finished.</p>\n\n<p>Second - my hero turned into pure unit, and doesn't use \"SUPER hit\"</p>\n\n<p>Is it possible fix it in elegant way (without changing call in <code>main()</code>)?</p>\n"}, {"tags": ["c++", "qt", "deployment", "gstreamer"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441826581, "post_id": 32487581, "comment_id": 52835858, "body": "You need to include your actual code, so that people can get some idea what is actually going on."}, {"owner": {"reputation": 73, "user_id": 4120569, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G3Eb2.jpg?s=128&g=1", "display_name": "Dionis", "link": "https://stackoverflow.com/users/4120569/dionis"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441827456, "post_id": 32487581, "comment_id": 52836282, "body": "Thanks for the comment @ChrisBeck , I edited the question and added some code. Please comment if you need more code."}, {"owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1441915457, "post_id": 32487581, "comment_id": 52880448, "body": "Can you give us some general specs on the machines you&#39;re testing on, and the size of videos you&#39;re working with.  I see a few things that could be improved depending on the hardware you&#39;re on."}, {"owner": {"reputation": 73, "user_id": 4120569, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G3Eb2.jpg?s=128&g=1", "display_name": "Dionis", "link": "https://stackoverflow.com/users/4120569/dionis"}, "edited": false, "score": 0, "creation_date": 1441930311, "post_id": 32487581, "comment_id": 52885851, "body": "I have a Fujitsu i5 2.4GHz, ram4; also tried in a dell i3, ram4, the same. I try with different videos, the same. I asked here <a href=\"http://gstreamer-devel.966125.n4.nabble.com/Timestamping-error-or-comptuer-too-slow-with-gstreamer-gstbasesink-in-Qt-td4673555.html\" rel=\"nofollow noreferrer\">here</a> and tried the suggestion, adding the queue element, but is still the same. If you need any details about my graphic card, <a href=\"http://i58.tinypic.com/fw2hw6.jpg\" rel=\"nofollow noreferrer\">here</a> is a screenshot."}, {"owner": {"reputation": 73, "user_id": 4120569, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G3Eb2.jpg?s=128&g=1", "display_name": "Dionis", "link": "https://stackoverflow.com/users/4120569/dionis"}, "edited": false, "score": 0, "creation_date": 1441930696, "post_id": 32487581, "comment_id": 52885926, "body": "<a href=\"http://i772.photobucket.com/albums/yy7/Dionis_Prifti/graphicCard_zpsjm5d8ofr.png\" rel=\"nofollow noreferrer\">here</a> is the screenshot, sorry"}, {"owner": {"reputation": 73, "user_id": 4120569, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G3Eb2.jpg?s=128&g=1", "display_name": "Dionis", "link": "https://stackoverflow.com/users/4120569/dionis"}, "reply_to_user": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1442067122, "post_id": 32487581, "comment_id": 52936703, "body": "any suggestion @mpr ?"}, {"owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1442237733, "post_id": 32487581, "comment_id": 52987420, "body": "On these two computers, can they both handle the simpler command line pipeline: <code>gst-launch-1.0 playbin uri=file:&#47;&#47;...</code>?  If so, that would rule out hardware issues and we&#39;d need to see more of your code, probably in pad_added_handler."}, {"owner": {"reputation": 73, "user_id": 4120569, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G3Eb2.jpg?s=128&g=1", "display_name": "Dionis", "link": "https://stackoverflow.com/users/4120569/dionis"}, "reply_to_user": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1442241198, "post_id": 32487581, "comment_id": 52989853, "body": "@mpr on my computer when I try with gst-launch/run from qt/from .exe everything works fine. This problem is only on other computers. Thats why I guess it might be a deploying problem, maybe some .dll/linking needed. I have edit the question and edded the code of pad_added_handler."}, {"owner": {"reputation": 2714, "user_id": 1496237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V12VS.jpg?s=128&g=1", "display_name": "mpr", "link": "https://stackoverflow.com/users/1496237/mpr"}, "edited": false, "score": 0, "creation_date": 1442243131, "post_id": 32487581, "comment_id": 52991193, "body": "The only thing I can suggest is to maybe try a much simpler pipeline, say with a <code>videotestsrc</code>, and verify that it works on the other system.  It&#39;s hard to tell at what level the issue is: hardware, OS configuration, GStreamer, or pipeline.  You can also try using GST_DEBUG_DUMP_DOT_DIR env var to collect some pipeline analysis on the non-functioning machine."}, {"owner": {"reputation": 158, "user_id": 890558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed32ff56f30ab35a1644fad1df82be3c?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/890558/dave"}, "edited": false, "score": 0, "creation_date": 1569426600, "post_id": 32487581, "comment_id": 102595974, "body": "I have this problem, did you ever find a solution? I have a 9 second delay between &quot;pressing play&quot; and the sink displaying it. With those same timing errors."}], "owner": {"reputation": 73, "user_id": 4120569, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G3Eb2.jpg?s=128&g=1", "display_name": "Dionis", "link": "https://stackoverflow.com/users/4120569/dionis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1324, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442240602, "creation_date": 1441826416, "last_edit_date": 1495540688, "question_id": 32487581, "link": "https://stackoverflow.com/questions/32487581/timestamping-error-or-comptuer-too-slow-with-gstreamer-gstbasesink-in-qt", "title": "Timestamping error/or comptuer too slow with gstreamer/gstbasesink in Qt", "body": "<p>I am building a simple video player in Qt using gstreamer-1.0. When I run it from Qt, or .exe in my pc, everything runs and works ok. But when I try it from another pc, it plays for some seconds that it skips some seconds/minutes and so on. I guess the problem is with sync, I have tried setting d3dvidesink property: sync=false, but is the same. I have read many similiar threads but none seems to help.</p>\n\n<p><strong>A lot of buffers are being dropped.\nAdditional debug info:\ngstbasesink.c(2846): gst_base_sink_is_too_late (): \nThere may be a timestamping problem, or this computer is too slow.</strong></p>\n\n<p>I have tried setting different properties, but none helped. I have seen the following threads, but still the same problem:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11397655/streaming-rtp-rtsp-sync-timestamp-problems\">Thread 1</a>\n<a href=\"http://gstreamer-devel.966125.n4.nabble.com/There-may-be-a-timestamping-problem-or-this-computer-is-too-slow-td3807357.html\" rel=\"nofollow noreferrer\">Thread 2</a>\n<a href=\"http://gstreamer-devel.966125.n4.nabble.com/Video-stream-timestamps-problem-td4657379.html\" rel=\"nofollow noreferrer\">Thread 3</a></p>\n\n<p>On Thread 3 there is a suggestion setting \"do-timestamp\" property on appsrc to TRUE, but I use uridecodebin as source that has not a \"do-timestamp\" property.</p>\n\n<p>My pipeline is as follows: </p>\n\n<p><strong>uridecodebin ! audioconvert ! volume ! autoaudiosink ! videoconvert ! gamma ! d3dvideosink</strong></p>\n\n<p>Thanks in Advance!</p>\n\n<p>Here is some code from the elements creation/linking. Please comment if you need any other code.</p>\n\n<pre><code>    // Create the elements\n   data.source        = gst_element_factory_make ( \"uridecodebin\",  \"source\" );\n   data.audio_convert = gst_element_factory_make ( \"audioconvert\",  \"audio_convert\" );\n   data.volume        = gst_element_factory_make ( \"volume\",        \"volume\");\n   data.audio_sink    = gst_element_factory_make ( \"autoaudiosink\", \"audio_sink\" );\n   data.video_convert = gst_element_factory_make ( \"videoconvert\",  \"video_convert\" ); \n   data.filter        = gst_element_factory_make ( \"gamma\",         \"filter\"); \n   data.video_sink    = gst_element_factory_make ( \"d3dvideosink\",  \"video_sink\" );\n\n\n   // Create the empty pipeline\n   data.pipeline = gst_pipeline_new (\"test-pipeline\");\n   if (!data.pipeline || !data.source || !data.audio_convert || !data.volume || !data.audio_sink\n                      || !data.video_convert || !data.filter  || !data.video_sink ) {\n   g_printerr (\"Not all elements could be created.\\n\");}\n   return ;\n   }\n\n   // Build the pipeline. Note that we are NOT linking the source at this point. We will do it later.\n   gst_bin_add_many (GST_BIN (data.pipeline), data.source, data.audio_convert , data.volume, data.audio_sink,\n                                                   data.video_convert, data.filter, data.video_sink, NULL);\n\n\nif (!gst_element_link (data.audio_convert, data.volume)) {\ng_printerr (\"Elements AUDIO_CONVERT - VOLUME could not be linked.\\n\");\ngst_object_unref (data.pipeline);\nreturn ;\n}\n\nif (!gst_element_link (data.volume, data.audio_sink)) {\ng_printerr (\"Elements VOLUME - AUDIO_SINK could not be linked.\\n\");\ngst_object_unref (data.pipeline);\nreturn ;\n}\n\nif (!gst_element_link(data.video_convert, data.filter)) {\ng_printerr(\"Elements VIDEO_CONVERT - FILTER could not be linked.\\n\");\ngst_object_unref(data.pipeline);\nreturn ;\n}\n\nif (!gst_element_link(data.filter, data.video_sink)) {\ng_printerr(\"Elements FILTER - VIDEO_SINK could not be linked.\\n\");\ngst_object_unref(data.pipeline);\nreturn ;\n}\n</code></pre>\n\n<p>When I open video:</p>\n\n<pre><code> // Set the URI to play\n    QString filePath = \"file:///\"+filename;\n    QByteArray ba = filePath.toLatin1();\n    const char *c_filePath = ba.data();\n\nret = gst_element_set_state (data.pipeline, GST_STATE_NULL);\n\ngint64 max_lateness = 2000000; //2 milli sec\ng_object_set (data.source, \"uri\", c_filePath, NULL);\n\n// I have tried setting the following properties, but none helped\n// g_object_set (data.source, \"do-timestamp\", true, NULL);\n// g_object_set( data.video_sink, \"sync\", false, NULL);\n// g_object_set( data.video_sink, \"max-lateness\", max_lateness, NULL);\nqDebug() &lt;&lt; &amp;c_filePath;\n\n// Link video_sink with playingWidget-&gt;winId()\ngst_video_overlay_set_window_handle (GST_VIDEO_OVERLAY (data.video_sink), xwinid);\n\n\n// Connect to the pad-added signal\n   g_signal_connect (data.source, \"pad-added\", G_CALLBACK (pad_added_handler), &amp;data) ;\n\n// Start playing\nret = gst_element_set_state (data.pipeline, GST_STATE_PLAYING);\nif (ret == GST_STATE_CHANGE_FAILURE) {\n       gst_element_set_state (data.pipeline, GST_STATE_NULL);\n       gst_object_unref (data.pipeline);\n         // Exit application\n         QTimer::singleShot(0, QApplication::activeWindow(), SLOT(quit()));}\n\ndata.playing = TRUE;\ndata.rate    = 1.0;\n\n// Iterate - gets the position and length every 200 msec\ng_print (\"Running...\\n\");\nemit setMsg( \"Running...\\n\" );\ncurrFileName = filename;\ntimer-&gt;start(500);\n</code></pre>\n\n<p>Pad_added_handler:</p>\n\n<pre><code>void gst_pipeline::pad_added_handler(GstElement *src, GstPad *new_pad, CustomData *data)\n{\n    GstPadLinkReturn ret;\n    GstCaps *new_pad_caps = NULL;\n    GstStructure *new_pad_struct = NULL;\n    const gchar *new_pad_type = NULL;\n\n     GstPad *sink_pad_audio = gst_element_get_static_pad (data-&gt;audio_queue, \"sink\");\n     GstPad *sink_pad_video = gst_element_get_static_pad (data-&gt;video_queue, \"sink\");\n\n\n  g_print (\"Received new pad '%s' from '%s':\\n\", GST_PAD_NAME (new_pad), GST_ELEMENT_NAME (src));\n\n    // If our audio converter is already linked, we have nothing to do here\n    if (gst_pad_is_linked (sink_pad_audio))\n    {\n         g_print (\" We have already linked sink_pad_audio. Ignoring.\\n\"); \n         // goto exit;\n    }\n\n    // If our video converter is already linked, we have nothing to do here\n    if (gst_pad_is_linked (sink_pad_video))\n    {\n         g_print (\" We have already linked sink_pad_video. Ignoring.\\n\");\n         // goto exit;\n    }\n\n    // Check the new pad's type\n    new_pad_caps = gst_pad_get_current_caps (new_pad); //gst_pad_get_caps\n    new_pad_struct = gst_caps_get_structure (new_pad_caps, 0);\n    new_pad_type = gst_structure_get_name (new_pad_struct);\n\n\n   if (g_str_has_prefix (new_pad_type, \"audio/x-raw\"))\n  {\n    // Attempt the link\n    ret = gst_pad_link (new_pad, sink_pad_audio);\n\n\n     if (GST_PAD_LINK_FAILED (ret))\n       {  g_print (\" Type is '%s' but link failed.\\n\", new_pad_type); }\n     else\n       {  g_print (\" Link succeeded (type '%s').\\n\", new_pad_type);   }\n  }\n   else if (g_str_has_prefix (new_pad_type, \"video/x-raw\"))\n  {\n    // Attempt the link\n    ret = gst_pad_link (new_pad, sink_pad_video);\n\n     if (GST_PAD_LINK_FAILED (ret))\n       {  g_print (\" Type is '%s' but link failed.\\n\", new_pad_type);   }\n     else\n       {  g_print (\" Link succeeded (type '%s').\\n\", new_pad_type);     }\n  }\n      else\n    {\n      g_print (\" It has type '%s' which is not audio/x-raw OR video/x-raw. Ignoring.\\n\", new_pad_type);\n      goto exit;\n    }\n\n   exit:\n    // Unreference the new pad's caps, if we got them\n    if (new_pad_caps != NULL)\n    { gst_caps_unref (new_pad_caps); g_print(\"EXIT\"); msg_STRING2 += \"EXIT\\n\" ;     }\n\n    // Unreference the sink pad\n    gst_object_unref (sink_pad_audio);\n    gst_object_unref (sink_pad_video);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pthreads", "parameter-passing", "void-pointers"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1441826767, "post_id": 32487579, "comment_id": 52835947, "body": "You can trivially write a wrapper: <code>void* ThreadMethod (void*) { SomeMethod(); return NULL; }</code>"}, {"owner": {"reputation": 133677, "user_id": 44389, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eed60bdfc964ec62cc48aa6020a03d7b?s=128&d=identicon&r=PG", "display_name": "Noldorin", "link": "https://stackoverflow.com/users/44389/noldorin"}, "edited": false, "score": 0, "creation_date": 1441827674, "post_id": 32487579, "comment_id": 52836386, "body": "Actually <code>void * foo()</code> is valid C, albeit deprecated, since it doesn&#39;t specify its parameter list."}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1441826946, "last_edit_date": 1441826946, "creation_date": 1441826580, "answer_id": 32487624, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487624#32487624", "title": "Why does a function accept a void pointer?", "body": "<p>Because the <code>pthread_create</code> function takes an argument of type <code>void* (*)(void*)</code> which is a function taking a <code>void*</code> and  returning a <code>void*</code>, so to create a thread using <code>pthread_create</code> that's what you need to use.</p>\n\n<p>The <code>pthread_create</code> API takes that to allow you to pass data to the new thread and get data back again. If you don't want to pass anything in you still have to meet that interface, but just pass it NULL.</p>\n\n<p>Just because <em>you</em> don't want to pass any arguments to your new thread right now doesn't mean the API should be designed to only support your current use case. It's much better to have an API written in terms of a function taking <code>void*</code> (which can optionally be passed NULL) than to have an API in terms of a function taking no arguments and requiring users to come up with their own solutions for passing data to the new thread.</p>\n\n<p>In C++ you can use any type of function for the new thread and pass it whatever arguments you need to:</p>\n\n<pre><code>std::thread t(&amp;SomeMethod);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 3, "last_activity_date": 1441826588, "creation_date": 1441826588, "answer_id": 32487628, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487628#32487628", "title": "Why does a function accept a void pointer?", "body": "<p>Because they wanted to write just the one function for creating threads - to take and return data.</p>\n\n<p>Otherwise they would have to write at least four possibilities.</p>\n\n<p>You are free you ignore the input parameter and the return value.</p>\n\n<p>Just a matter of simplicity</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1441827837, "last_edit_date": 1441827837, "creation_date": 1441826603, "answer_id": 32487636, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487636#32487636", "title": "Why does a function accept a void pointer?", "body": "<p>As per the <a href=\"http://linux.die.net/man/3/pthread_create\" rel=\"nofollow\">man page</a> of <code>pthread_create()</code>, we can see, the signature of the function is</p>\n\n<pre><code> int pthread_create(pthread_t *thread, const pthread_attr_t *attr,\n               void *(*start_routine) (void *), void *arg);\n</code></pre>\n\n<p>where the third argument is of type</p>\n\n<pre><code>void *(*start_routine) (void *)\n</code></pre>\n\n<p>which means, it expects a pointer to a function with return type <code>void *</code> and accepting a <code>void *</code> argument. So, we need to define the thread function accordingly.</p>\n\n<p>That said, regarding the usage of <code>void</code> pointer for argument passing, quoting <code>C11</code>, chapter \u00a76.3.2.3</p>\n\n<blockquote>\n  <p>A pointer to <code>void</code> may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to <code>void</code> and back again; the result shall compare equal to the original pointer.</p>\n</blockquote>\n\n<p>As we can see, the <code>void</code> pointer is used to pass <em>any</em> type of data to the thread function , provided, it is converted back to the actual type inside the function.</p>\n\n<p>Also, FWIW, do not try to deviate from the required signature of a function pointer, as the standard clearly mandates</p>\n\n<blockquote>\n  <p>[....] If a converted pointer is used to call a function whose type is not  compatible with the referenced type, the behavior is undefined. In case you don't want (need) to pass any valid argument value, you can always pass <code>NULL</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 3, "last_activity_date": 1441826722, "creation_date": 1441826722, "answer_id": 32487668, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487668#32487668", "title": "Why does a function accept a void pointer?", "body": "<p>Because quite often, we want to give the thread something to work on (or with, or off, or whatever). A very typical example is to pass in an instance of a class, so you can make calls to the class member functions.</p>\n\n<p>But it could be all sorts of other things - a struct, or a pointer to some simple data.</p>\n\n<p>Of course, using <code>std::thread</code> will hide most such things anyway, and you don't need to worry about it. I would strongly suggest using <code>std::thread</code> instead of <code>pthread</code> in general.</p>\n"}, {"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 2, "last_activity_date": 1441826768, "creation_date": 1441826768, "answer_id": 32487682, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487682#32487682", "title": "Why does a function accept a void pointer?", "body": "<p><code>void *SomeMethod(void* x)</code> is used as an entry point for the new thread.\nHow should you act if you want to pass to the new thread some data (struct, buffer, a regular integer, etc.)? Specially for this <em>entry point</em> method receives <code>void*</code> argument which can point to anything you want. Then inside the function body you can cast it back to the proper type and use it by the worker thread.</p>\n\n<p>In case your thread doesn't need any additional data you can pass <code>NULL</code> or <code>nullptr</code> (for C++11) to it.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1441827152, "last_edit_date": 1441827152, "creation_date": 1441826810, "answer_id": 32487696, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487696#32487696", "title": "Why does a function accept a void pointer?", "body": "<p>No, the method signature you propose will not work as the start function for a pthreads thread.  If you  pass a pointer to such a function to <code>pthread_create()</code> then the compiler should warn.  If you run the resulting program then you invoke undefined behavior, because the pointer does not have the correct type.  As a practical matter, the pthreads library will try to pass an argument to to the start function, and will expect a return value from it; if you provide a pointer to a function that does not both consume an argument and return a value (both of appropriate type) then very likely the program will crash. </p>\n\n<p>As for <em>why</em> the start function is required to have the signature it does, a <code>void *</code> argument can be used to convey an actual argument of any type, including a composite type encompassing multiple distinct values, and similarly, a <code>void *</code> return type can be used to convey a return value of any type.  This is pretty much the most general function type possible.</p>\n"}], "owner": {"reputation": 2129, "user_id": 5208889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/45b68fcd5396fff95dc0c02e37efb276?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/5208889/ozgur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1893, "favorite_count": 0, "accepted_answer_id": 32487624, "answer_count": 6, "score": 1, "last_activity_date": 1538505261, "creation_date": 1441826405, "last_edit_date": 1538505261, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer", "title": "Why does a function accept a void pointer?", "body": "<p>I am trying to understand pthread.</p>\n\n<p>However It is required to create thread methods as follows:</p>\n\n<pre><code>void *SomeMethod(void* x)\n{\n    //Do Something\n}\n</code></pre>\n\n<p>Why is it necessary to create a function that accepts a <code>void</code> pointer? Can't we use pthread with a function like this?</p>\n\n<pre><code>void SomeMethod()\n{\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "language-lawyer", "self-reference"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1441827301, "post_id": 32487575, "comment_id": 52836208, "body": "Possible dupliucate: <a href=\"http://stackoverflow.com/questions/31345193/how-can-an-incomplete-type-be-used-as-a-template-parameter-to-vector-here\" title=\"how can an incomplete type be used as a template parameter to vector here\">stackoverflow.com/questions/31345193/&hellip;</a>"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499978945, "post_id": 32487575, "comment_id": 77153809, "body": "The &quot;exception for shared_ptr&quot; cracks me up: <a href=\"https://stackoverflow.com/a/31347287/86967\">stackoverflow.com/a/31347287/86967</a>"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1504309797, "post_id": 32487575, "comment_id": 78979370, "body": "Worst-case scenario, you could use <code>shared_ptr&lt;tree_node&gt;</code> instead of just <code>tree_node</code>."}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1504309864, "post_id": 32487575, "comment_id": 78979386, "body": "...or maybe <code>shared_ptr&lt;vector&lt;tree_node&gt;&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 0, "creation_date": 1557386229, "post_id": 32487756, "comment_id": 98748921, "body": "that&#39;s incredible. how do you do small object optimization with such a loose requirement ?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 0, "creation_date": 1557403909, "post_id": 32487756, "comment_id": 98758707, "body": "@v.oddou <code>std::vector</code> doesn&#39;t do a small buffer optimization."}, {"owner": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 0, "creation_date": 1557463939, "post_id": 32487756, "comment_id": 98780745, "body": "It&#39;s not something we can tell for sure, &quot;this implementation of std::vector&quot; doesn&#39;t do it, sure. but implementation is not specified. if we start to put these weird phrasings in the spec, now the implementation becomes constrained to not do it, but by mistake rather than by explicit design."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 0, "creation_date": 1557490746, "post_id": 32487756, "comment_id": 98793022, "body": "@v.oddou Sure we can. <code>std::vector</code> has to support incomplete types and <code>swap</code> can&#39;t invalidate iterators."}, {"owner": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 0, "creation_date": 1557714988, "post_id": 32487756, "comment_id": 98844332, "body": "yes but that&#39;s what I mean. It&#39;s not specifically said &quot;small object optimization is prohibited&quot; in the standard. It&#39;s implied from constraints set by unrelated phrasings. This seems like a bug."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 12, "last_activity_date": 1441827081, "creation_date": 1441827081, "answer_id": 32487756, "question_id": 32487575, "link": "https://stackoverflow.com/questions/32487575/class-or-struct-self-reference-by-template/32487756#32487756", "title": "class (or struct) self-reference by template", "body": "<p>Actually, as a result of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4371.html\">N4371</a> we have (from N4527, [vector.overview], will be in C++17):</p>\n\n<blockquote>\n  <p>An incomplete type <code>T</code> may be used when instantiating vector if the allocator satisfies the allocator completeness\n  requirements 17.6.3.5.1. <code>T</code> shall be complete before any member of the resulting specialization of\n  vector is referenced.</p>\n</blockquote>\n\n<p>Prior to this, <code>vector</code> could not be constructed with an incomplete type (which <code>tree_node</code> is at that point), and that would be undefined behavior. </p>\n"}], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 1, "answer_count": 1, "score": 11, "last_activity_date": 1442169647, "creation_date": 1441826400, "last_edit_date": 1495542170, "question_id": 32487575, "link": "https://stackoverflow.com/questions/32487575/class-or-struct-self-reference-by-template", "title": "class (or struct) self-reference by template", "body": "<p>Is the following legal?</p>\n\n<pre><code>template&lt; typename T &gt;\nstruct tree_node\n   {\n   T t;\n   std::vector&lt;tree_node&gt; children;\n   };\n</code></pre>\n\n<p>A comment to <a href=\"https://stackoverflow.com/a/15473485/86967\">this post</a> seems to suggest that it is not.</p>\n\n<hr>\n\n<p>EDIT: This doesn't strike me as an \"undefined behavior\" type of scenario.  The intended semantics are unambiguous.  If it is an invalid usage of an incomplete type then it should be a compile-time error.</p>\n\n<p><a href=\"https://ideone.com/JPO782\" rel=\"nofollow noreferrer\">In my tests</a> this seems to work fine (I have used both <a href=\"https://en.wikipedia.org/wiki/GNU_Compiler_Collection\" rel=\"nofollow noreferrer\">GCC</a> and <a href=\"https://en.wikipedia.org/wiki/Clang\" rel=\"nofollow noreferrer\">Clang</a> -- both with <code>-Wall -Werror -std=c++11</code>).</p>\n\n<p>Is there something in the language definition (prior to C++17) that directly or indirectly specifies this as undefined behavior, or is it just <em>under-specified</em>?</p>\n\n<hr>\n\n<p>Keep in mind that this is very similar, structurally, to something like the following:</p>\n\n<pre><code>typedef int T;\nstruct tree_node;\n\nstruct tree_node\n   {\n   T t;\n   tree_node * children;\n   }\n</code></pre>\n"}, {"tags": ["c++", "function", "iterator"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 4, "creation_date": 1441826433, "post_id": 32487553, "comment_id": 52835780, "body": "Creates a string from the &quot;reverse beginning&quot; to the &quot;reverse end&quot;. In other words the string backwards."}, {"owner": {"reputation": 141, "user_id": 5318475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd00d8be85c1b6fa7f5874cee5add1a?s=128&d=identicon&r=PG&f=1", "display_name": "Boojum", "link": "https://stackoverflow.com/users/5318475/boojum"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1441826549, "post_id": 32487553, "comment_id": 52835842, "body": "Thank you. Still learning the basics of C++."}, {"owner": {"reputation": 141, "user_id": 5318475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd00d8be85c1b6fa7f5874cee5add1a?s=128&d=identicon&r=PG&f=1", "display_name": "Boojum", "link": "https://stackoverflow.com/users/5318475/boojum"}, "edited": false, "score": 1, "creation_date": 1441827305, "post_id": 32487553, "comment_id": 52836211, "body": "Apparently. But I wanted a clearer explanation, such as below."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441827535, "post_id": 32487553, "comment_id": 52836315, "body": "That is not an efficient function because it makes two copies of the string."}], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 3229983, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc0eaa0499c55fb64131f77665af6574?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Calandra", "link": "https://stackoverflow.com/users/3229983/anthony-calandra"}, "is_accepted": false, "score": 0, "last_activity_date": 1441826591, "creation_date": 1441826591, "answer_id": 32487630, "question_id": 32487553, "link": "https://stackoverflow.com/questions/32487553/what-does-rbegin-and-rend-do-in-this-function/32487630#32487630", "title": "What does rbegin and rend() do in this function?", "body": "<p><code>rbegin</code> returns an iterator at the end of the string, <code>input</code>. In other words it is a reverse-iterator. <code>rend</code> returns an iterator that points <em>before</em> the first character in the string.</p>\n\n<p>See: <a href=\"http://www.cplusplus.com/reference/string/string/rbegin/\" rel=\"nofollow\">here</a> and <a href=\"http://www.cplusplus.com/reference/string/string/rend/\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 5318475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd00d8be85c1b6fa7f5874cee5add1a?s=128&d=identicon&r=PG&f=1", "display_name": "Boojum", "link": "https://stackoverflow.com/users/5318475/boojum"}, "edited": false, "score": 0, "creation_date": 1441826910, "post_id": 32487684, "comment_id": 52836013, "body": "That makes sense. Thank you so much."}], "tags": [], "owner": {"reputation": 1916, "user_id": 3964927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e623e3d178746197d3de47e02f2be97?s=128&d=identicon&r=PG", "display_name": "Null", "link": "https://stackoverflow.com/users/3964927/null"}, "is_accepted": true, "score": 5, "last_activity_date": 1441826776, "creation_date": 1441826776, "answer_id": 32487684, "question_id": 32487553, "link": "https://stackoverflow.com/questions/32487553/what-does-rbegin-and-rend-do-in-this-function/32487684#32487684", "title": "What does rbegin and rend() do in this function?", "body": "<p>One of the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"noreferrer\">constructors for <code>std::string</code></a> takes a pair of iterators as inputs. <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/rbegin\" rel=\"noreferrer\"><code>rbegin()</code></a> returns a reverse iterator to the last character of the original <code>input</code> string, and <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/rend\" rel=\"noreferrer\"><code>rend()</code></a> returns a reverse iterator to the character preceding the first character of the original <code>input</code> string (i.e. one past the \"end\" of the string).</p>\n\n<p>The result is that a new string that is the reversed version of the original is constructed, and if that new string is equal to the original then it's a palindrome and the function returns true.</p>\n"}], "owner": {"reputation": 141, "user_id": 5318475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd00d8be85c1b6fa7f5874cee5add1a?s=128&d=identicon&r=PG&f=1", "display_name": "Boojum", "link": "https://stackoverflow.com/users/5318475/boojum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3324, "favorite_count": 1, "accepted_answer_id": 32487684, "answer_count": 2, "score": 3, "last_activity_date": 1441826776, "creation_date": 1441826309, "question_id": 32487553, "link": "https://stackoverflow.com/questions/32487553/what-does-rbegin-and-rend-do-in-this-function", "title": "What does rbegin and rend() do in this function?", "body": "<p>What exactly does rbegin() and rend() do in the following function to determine whether input is a palindrome or not?</p>\n\n<pre><code>bool palindromeCheck(string input) {\n    if (input == string(input.rbegin(), input.rend())) {\n        return true;\n    } \n    else {\n        return false;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "vector"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 4, "creation_date": 1441827700, "post_id": 32487543, "comment_id": 52836396, "body": "Do not do that. Use <code>vector&lt;int&gt; integerVectors[2]; integerVectors[0].push_back(1);</code> Simple, yes?"}], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441827430, "post_id": 32487665, "comment_id": 52836272, "body": "You are right I am sorry I forgot that it is array of pointers. I corrected the answer."}], "tags": [], "owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "is_accepted": false, "score": 2, "last_activity_date": 1441827376, "last_edit_date": 1441827376, "creation_date": 1441826709, "answer_id": 32487665, "question_id": 32487543, "link": "https://stackoverflow.com/questions/32487543/pointer-to-array-holding-two-vectors/32487665#32487665", "title": "Pointer to Array holding two Vectors", "body": "<p>This line is the problem</p>\n\n<pre><code>(*integerVectors)[1].push_back(1);\n</code></pre>\n\n<p>Dereferencing <code>*integerVectors</code> gives you the first vector pointer (equivalent of <code>integerVectors[0]</code>. Then you call you call operator[] with <code>1</code> as arguent on this pointer which will give reference to vector with address shifted with one vector size forward (equivalent to <code>*(integerVectors[0]+1)</code> ) which is not valid.\nThe right syntax is </p>\n\n<pre><code> integerVectors[1]-&gt;push_back(1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441828157, "post_id": 32487960, "comment_id": 52836614, "body": "The final pointer-less example has an initialization with wrong types. You want <code>vector&lt;vector&lt;int&gt;&gt; integerVectors{ 2 }</code> to get two default-constructed <code>vector&lt;int&gt;</code>s."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441828309, "post_id": 32487960, "comment_id": 52836681, "body": "@NeilKirk Fixed. Thanks. Alas, for I am betrayed by copy-paste! /s"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441828432, "post_id": 32487960, "comment_id": 52836740, "body": "Why not <code>vector&lt;vector&lt;int&gt;&gt; integerVectors(2);</code>"}, {"owner": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "edited": false, "score": 0, "creation_date": 1441835880, "post_id": 32487960, "comment_id": 52840169, "body": "This is incredible! This was extremly helpful!"}], "tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 3, "last_activity_date": 1441828902, "last_edit_date": 1441828902, "creation_date": 1441827925, "answer_id": 32487960, "question_id": 32487543, "link": "https://stackoverflow.com/questions/32487543/pointer-to-array-holding-two-vectors/32487960#32487960", "title": "Pointer to Array holding two Vectors", "body": "<p>this syntax:</p>\n\n<pre><code>MyType *var[size];\n</code></pre>\n\n<p>creates an array of pointers to <code>MyType</code> of size <code>size</code>, which means that this:</p>\n\n<pre><code>vector&lt;int&gt; *integerVectors[2];\n</code></pre>\n\n<p>produces a size 2 array of pointers to integer vectors, a fact which is backed up by your ability to initialize <code>integerVectors</code> with an initializer-list of pointers to integer vectors produced by calls to <code>new</code>.</p>\n\n<p>this:</p>\n\n<pre><code>(*integerVectors)\n</code></pre>\n\n<p>produces a pointer to your first vector pointer. You then call operator[] on it, which offsets the pointer by the size of a vector. But this is no longer a pointer to your array--if you call it with an argument of greater than 0, you'll be referencing an imaginary vector next to the one pointed by your first vector element.</p>\n\n<p>Then you call <code>push_back</code> on the imaginary vector, naturally leading to massive problems at run time.</p>\n\n<p>You either want to offset before dereferencing, as in @Abstraction's suggestion of </p>\n\n<pre><code>integerVectors[i]-&gt;push_back(1);\n</code></pre>\n\n<p>or you want to avoid C-style arrays. You're already using one vector, and nesting them rather than making arrays of them will avoid much confusion of this type in the future, while preserving the correct syntax:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;*&gt; integerVectors = {new vector&lt;int&gt;, new vector&lt;int&gt;};\nintegerVectors[1]-&gt;push_back(1);\n</code></pre>\n\n<p>Without the c-style array, your needed syntax is vastly clearer.</p>\n\n<p>Even better, you could just avoid the pointers altogether and use </p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; integerVectors = {vector&lt;int&gt;{}, vector&lt;int&gt;{}};\nintegerVectors[1].push_back(1);\n</code></pre>\n\n<p>The first line of which has a few equivalent syntaxes, as pointed out by @NeilKirk:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; integerVectors(2);\nvector&lt;vector&lt;int&gt;&gt; integerVectors{{},{}};\nvector&lt;vector&lt;int&gt;&gt; integerVectors(2, vector&lt;int&gt;{});\nvector&lt;vector&lt;int&gt;&gt; integerVectors(2, {});\n</code></pre>\n\n<p>The curly braces I'm using in initialization are another way to initialize an object, without the possibility of the compiler confusing it for a function in the most vexing parse. (However, you have to be careful with it around things which can be initialized with initializer lists like here, which is why some of these initializations use parentheses, instead) The first syntax default-initializes two vectors, and so does the second, though it explicitly states the same thing. It can also be modified to produce more complex structures: two vectors both with the elements {1,2,3} could be one of the below: </p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; integerVectors = {{1,2,3},{1,2,3}};\nvector&lt;vector&lt;int&gt;&gt; integerVectors{{1,2,3},{1,2,3}};\nvector&lt;vector&lt;int&gt;&gt; integerVectors(2, vector&lt;int&gt;{1,2,3});\nvector&lt;vector&lt;int&gt;&gt; integerVectors(2, {1,2,3});\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 32487960, "answer_count": 2, "score": 0, "last_activity_date": 1441828902, "creation_date": 1441826268, "question_id": 32487543, "link": "https://stackoverflow.com/questions/32487543/pointer-to-array-holding-two-vectors", "title": "Pointer to Array holding two Vectors", "body": "<p>I am having something i can't seem to figure out myself again. I don't know how to call this problem.</p>\n\n<pre><code>vector&lt;int&gt; *integerVectors[2] = { new vector&lt;int&gt;, new vector&lt;int&gt;};\n(*integerVectors)[0].push_back(1);\n(*integerVectors)[1].push_back(1);\n</code></pre>\n\n<p>When i run this i get an unhandled exeption. What I want is an Array with 2 indexes and each of them holding a vector.</p>\n\n<p>EDIT: The Problem seems to appear when i start pushing back.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1441826353, "post_id": 32487536, "comment_id": 52835746, "body": "That&#39;s not the correct way to add a library dependency in visual studio."}, {"owner": {"reputation": 625, "user_id": 3970193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8603ff901556ada8180282750eda599?s=128&d=identicon&r=PG", "display_name": "Gaara", "link": "https://stackoverflow.com/users/3970193/gaara"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1441826525, "post_id": 32487536, "comment_id": 52835824, "body": "Thanks for the comment. Could you please tell me the correct way to do it in msvs2013."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1441826647, "post_id": 32487536, "comment_id": 52835884, "body": "I think if you try a search such as &quot;stackoverflow how to add a library in visual studio cuda&quot; you will figure it out.  You would add the library in question in the same place and way that cudart.lib, for example, is added to any CUDA project."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1441827354, "post_id": 32487536, "comment_id": 52836237, "body": "<a href=\"http://stackoverflow.com/questions/20058864/how-to-include-libraries-in-visual-studio-2012\">This</a> and/or <a href=\"http://stackoverflow.com/questions/29736089/how-to-add-cuda-7-0-acceleration-to-existing-project\">this</a> and/or <a href=\"http://stackoverflow.com/questions/3778799/how-do-i-start-a-cuda-app-in-visual-studio-2010\">this</a>  should have the information you need.  This question is arguably a duplicate of the first one I linked."}, {"owner": {"reputation": 625, "user_id": 3970193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8603ff901556ada8180282750eda599?s=128&d=identicon&r=PG", "display_name": "Gaara", "link": "https://stackoverflow.com/users/3970193/gaara"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1441828194, "post_id": 32487536, "comment_id": 52836626, "body": "Thanks @RobertCrovella. It works."}], "answers": [{"comments": [{"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1441876543, "post_id": 32488198, "comment_id": 52855226, "body": "This reads more like a comment, maybe expand it to include the salient points of the duplicate that are applicable."}], "tags": [], "owner": {"reputation": 625, "user_id": 3970193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8603ff901556ada8180282750eda599?s=128&d=identicon&r=PG", "display_name": "Gaara", "link": "https://stackoverflow.com/users/3970193/gaara"}, "is_accepted": false, "score": -1, "last_activity_date": 1441828936, "last_edit_date": 1495535194, "creation_date": 1441828936, "answer_id": 32488198, "question_id": 32487536, "link": "https://stackoverflow.com/questions/32487536/error-when-using-nvtx-library-in-visual-studio-2013/32488198#32488198", "title": "Error when using NVTX library in Visual Studio 2013", "body": "<p>This is a possible duplicate of <a href=\"https://stackoverflow.com/questions/20058864/how-to-include-libraries-in-visual-studio-2012\">this</a> . Credits to @Robert Crovella for pointing it out. </p>\n"}], "owner": {"reputation": 625, "user_id": 3970193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8603ff901556ada8180282750eda599?s=128&d=identicon&r=PG", "display_name": "Gaara", "link": "https://stackoverflow.com/users/3970193/gaara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "closed_date": 1441832618, "answer_count": 1, "score": 0, "last_activity_date": 1441828936, "creation_date": 1441826252, "question_id": 32487536, "link": "https://stackoverflow.com/questions/32487536/error-when-using-nvtx-library-in-visual-studio-2013", "closed_reason": "Duplicate", "title": "Error when using NVTX library in Visual Studio 2013", "body": "<p>The following error I am getting when I attempt to use CUDA NVTX library in Visual studio 2013.</p>\n\n<pre><code>Command line warning D9002: ignoring unknown option '-lnvToolsEx'\n</code></pre>\n\n<p>Steps:</p>\n\n<ol>\n<li>PATH variable in the host windows machine has been set correctly to the location of the library.</li>\n<li>The library options has been added at Property_Pages -> Confuguration Properties -> Cuda C/C++ -> Host -> Additional compiler options -> \"-lnvToolsExt\".</li>\n</ol>\n\n<p>I suspect the issue is mostly due to Adding the library to the project. Could someone please point me at the right direction.</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441826373, "post_id": 32487493, "comment_id": 52835755, "body": "real distribution should be some sort of floating point, not an integer. Getting up 9.99999 and never 10.0000 is a distinct possibility which will be truncated to 9 when stuffed into <code>int t</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1441827269, "post_id": 32487493, "comment_id": 52836188, "body": "Do you actually want <code>uniform_int_distribution</code>? The chance that a <code>uniform_real_distribution</code> on <code>[0, 10]</code> produces 10 is...very small."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441830151, "post_id": 32487493, "comment_id": 52837558, "body": "in other words: The thing you say you want is statistically indistinguishable from the thing you already have."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 5236767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83cf443f7264b8ff635bfe69cf8027bd?s=128&d=identicon&r=PG&f=1", "display_name": "pistachiobk", "link": "https://stackoverflow.com/users/5236767/pistachiobk"}, "edited": false, "score": 0, "creation_date": 1441831737, "post_id": 32487795, "comment_id": 52838338, "body": "I tried solution number one by storing my return value as a double but that didn&#39;t work. Solution number two works great. Thank you!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441832283, "post_id": 32487795, "comment_id": 52838612, "body": "I don&#39;t think FP inaccuracy turns 10.0 into 9.9999x as it&#39;s perfectly representable. Turning 10.0/3 into 3.33333 is the real problem, as 10.0/3 is not perfectly representable."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441838763, "post_id": 32487795, "comment_id": 52841226, "body": "@MSalters That&#39;s an interesting point. Have to check the math, but 10 is not being calculated and is a nice multiple of 2 so it sounds reasonable."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441842021, "post_id": 32487795, "comment_id": 52842102, "body": "@user4581301: It&#39;s just 1.01 &lt;&lt;3. You need a 2 bits mantissa (leading 1 isn&#39;t stored)."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1441827258, "last_edit_date": 1495540331, "creation_date": 1441827258, "answer_id": 32487795, "question_id": 32487493, "link": "https://stackoverflow.com/questions/32487493/inclusive-range-uniform-real-distribution/32487795#32487795", "title": "Inclusive range uniform_real_distribution", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution\" rel=\"nofollow noreferrer\">std::uniform_real_distribution</a> works in Real numbers, not Integers. As a result is is very likely that the Real result of <code>dis(gen);</code> is getting truncated when it is stored in Integer <code>int t</code>. Because there are an infinite number of possible values available in the Real domain it is unlikely that exactly 10.0 with be returned in ten tries, and even if it did, <a href=\"https://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">floating point inaccuracy</a> is likely to turn it into 9.999999 or similar.</p>\n\n<p>This will show up as a float to int precision loss warning, if the compiler's warnings are turned on.</p>\n\n<p>Quick solutions are </p>\n\n<ol>\n<li>Don't use int to store the returned value</li>\n<li>Use <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">std::uniform_int_distribution</a> instead of uniform_real_distribution.</li>\n</ol>\n"}], "owner": {"reputation": 304, "user_id": 5236767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83cf443f7264b8ff635bfe69cf8027bd?s=128&d=identicon&r=PG&f=1", "display_name": "pistachiobk", "link": "https://stackoverflow.com/users/5236767/pistachiobk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 32487795, "answer_count": 1, "score": 0, "last_activity_date": 1441829906, "creation_date": 1441826087, "last_edit_date": 1495541680, "question_id": 32487493, "link": "https://stackoverflow.com/questions/32487493/inclusive-range-uniform-real-distribution", "title": "Inclusive range uniform_real_distribution", "body": "<p>I'm trying to use the random library. I know there's a similar question to this here: <a href=\"https://stackoverflow.com/questions/16224446/stduniform-real-distribution-inclusive-range\">std::uniform_real_distribution inclusive range</a>. From what I've read it should be [0, 10). I try to have [0, 10] but I've tried the solution and it doesn't work for me. I can't figure out why. Here's a bit of code.</p>\n\n<pre><code>std::vector&lt;int&gt; vec;\n\nint main()\n{   \n    const int min = 0;\n    const int max = 10;\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::uniform_real_distribution&lt;&gt; dis(min, std::nextafter(max, INT_MAX));\n    const int MAX = 10; \n    for (int i = 0; i &lt; MAX; i++)\n    {\n        int t = dis(gen);\n        vec.push_back(t);\n    }\n    for (auto&amp; i : vec)\n        std::cout &lt;&lt; i &lt;&lt; std::endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I've tried:</p>\n\n<pre><code>std::uniform_real_distribution&lt;&gt; dis(min, std::nextafter(max, INT_MAX));\nstd::uniform_real_distribution&lt;&gt; dis{ 0, 10 };\nstd::uniform_real_distribution&lt;&gt; dis(min, max);\n</code></pre>\n\n<p>It only produces 0 through 9 as random and doesn't include 10 like I want it to. I'm working on VS2013.   </p>\n"}, {"tags": ["c++", "class", "enums", "operator-overloading"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441826252, "post_id": 32487489, "comment_id": 52835689, "body": "I don&#39;t think there&#39;s any way to do this. If it returns the same class, then you can use all its operators on it. You need to make the addition operator return a DIFFERENT class."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1441826300, "post_id": 32487489, "comment_id": 52835714, "body": "You don&#39;t need to change it to a class, just place the operators at namespace scope."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441826484, "post_id": 32487489, "comment_id": 52835809, "body": "This doesn&#39;t even make sense to me. Why should the operators on a value depend on how you got the value? <code>Color blue = Color::Blue</code> -- you can add to it. But <code>Color blue = Color::Red + Color::Green</code> -- you can&#39;t add to it. Even though it&#39;s the same value in the <code>blue</code> variable."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1441826701, "post_id": 32487489, "comment_id": 52835910, "body": "Do you want the error at compile time or run time?"}, {"owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1441826755, "post_id": 32487489, "comment_id": 52835935, "body": "@ChrisDrew Compile time error"}, {"owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441827269, "post_id": 32487489, "comment_id": 52836189, "body": "@Barmar If I use different classes, would there be a way to keep all the values in the same namespace? I would like to be able to access the values like <code>Color::Red</code> and <code>Color::Yellow</code> rather than <code>BaseColor::Red</code> and <code>CombinedColor::Yellow</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441827343, "post_id": 32487489, "comment_id": 52836228, "body": "I still don&#39;t understand the point. A variable doesn&#39;t have any memory of how it got its value. So either they&#39;re the same value, in which case you can use any of the operators, or they&#39;re different values, and they have to have different names."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1441827371, "post_id": 32487489, "comment_id": 52836245, "body": "It&#39;s like saying you want there to be a difference between <code>x = 5</code> and <code>x = 2 + 3</code>."}, {"owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441827705, "post_id": 32487489, "comment_id": 52836398, "body": "@Barmar Perhaps the color example wasn&#39;t the best, but I&#39;m actually using this for an RPG class system where the player can create hybrid classes, such as a warrior and a mage combined. But the player can&#39;t create a hybrid of 3 different classes. I would like to enforce this on the programming side of it as well."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441828025, "post_id": 32487489, "comment_id": 52836551, "body": "Then I suggest you have two classes: <code>BaseClass</code> and <code>HybridClass</code>. Adding two <code>BaseClass</code> returns <code>HybridClass</code>, and there&#39;s no overlap between them."}, {"owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441828286, "post_id": 32487489, "comment_id": 52836667, "body": "@Barmar Alright I&#39;ll do that, so is there a way I could somehow make a third class that can contain either a <code>BaseClass</code> or a <code>HybridClass</code>? Such as <code>PlayerClass playerClass = BaseClass::Warrior</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441828325, "post_id": 32487489, "comment_id": 52836684, "body": "Make both these classes subclasses of a general class."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441828351, "post_id": 32487489, "comment_id": 52836695, "body": "Create an array of flags for each primary color and based on which flags are set, calculate the current color."}, {"owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441828852, "post_id": 32487489, "comment_id": 52836960, "body": "@Barmar Could you post an example answer so I can mark it as accepted?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441829044, "post_id": 32487489, "comment_id": 52837048, "body": "I&#39;m not really good enough at C++ to create a complete answer. I know the ideas, but I&#39;m not sure I&#39;d get all the syntax right."}], "answers": [{"tags": [], "owner": {"reputation": 671, "user_id": 5298959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdb0a2b0364de45e4108bdfa18d44002?s=128&d=identicon&r=PG&f=1", "display_name": "fuzzything44", "link": "https://stackoverflow.com/users/5298959/fuzzything44"}, "is_accepted": false, "score": 0, "last_activity_date": 1442190085, "last_edit_date": 1442190085, "creation_date": 1441828190, "answer_id": 32488009, "question_id": 32487489, "link": "https://stackoverflow.com/questions/32487489/how-can-i-create-a-class-that-can-be-added-to-itself-only-once/32488009#32488009", "title": "How can I create a class that can be added to itself only once?", "body": "<p>First of all, this will take operator overloading. Then, you add a private bool to your class. When you return an added value, the bool gets set to true, signifying that it was previously added.\nEx.</p>\n\n<pre><code>class oneAdd\n{\nprivate:\n    bool hasAdded;\npublic:\n    int member;\n    void setAdded() { hasAdded = true; }\n    oneAdd operator+(const oneAdd&amp; toAdd)\n    { \n        if (!hasAdded) {\n            oneAdd ret;\n            ret.member = member + toAdd.member;\n            ret.setAdded();\n            return ret;\n        } else {\n            // Throw some error. This operator shouldn't have been called.\n        }\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "edited": false, "score": 0, "creation_date": 1441837497, "post_id": 32489494, "comment_id": 52840785, "body": "Thanks, the second example is pretty close to what I want."}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": true, "score": 1, "last_activity_date": 1441836753, "last_edit_date": 1441836753, "creation_date": 1441834290, "answer_id": 32489494, "question_id": 32487489, "link": "https://stackoverflow.com/questions/32487489/how-can-i-create-a-class-that-can-be-added-to-itself-only-once/32489494#32489494", "title": "How can I create a class that can be added to itself only once?", "body": "<p>I don't think it is possible to do exactly what you ask.</p>\n\n<p>I think you need two separate classes <code>Color</code> and <code>PrimaryColor</code>. Where <code>PrimaryColor</code> has an overloaded <code>operator+</code> allowing you to combine two <code>PrimaryColor</code>s and return a <code>Color</code>.</p>\n\n<p><code>PrimaryColor</code> could derive from <code>Color</code> so that functions that don't need to combine them can treat them one and the same.</p>\n\n<p>You probably want to protect the constructors otherwise your restrictions can easily be circumvented.</p>\n\n<pre><code>class PrimaryColor;\n\nclass Color {\n  int r, g, b;\n  explicit Color(int r, int g, int b) : r(r), g(g), b(b) {}\npublic:\n  friend bool operator==(const Color&amp; lhs, const Color&amp; rhs) {\n    return lhs.r == rhs.r &amp;&amp; lhs.g == rhs.g &amp;&amp; lhs.b == rhs.b;\n  }\n\n  static Color createYellow() { return Color{1, 1, 0}; }\n  static Color createMagenta() { return Color{1, 0, 1}; }\n  static Color createCyan() { return Color{0, 1, 1}; }    \n\n  friend class PrimaryColor;    \n  const static PrimaryColor Red;\n  const static PrimaryColor Green;\n  const static PrimaryColor Blue;\n  const static Color Yellow;\n  const static Color Magenta;\n  const static Color Cyan;    \n};\n\nclass PrimaryColor : public Color {\n  explicit PrimaryColor(int r, int g, int b) : Color(r, g, b) {}    \npublic:\n  Color operator+(const PrimaryColor&amp; rhs) const {\n    return Color(r+rhs.r, g+rhs.g, b+rhs.b);\n  }\n\n  static PrimaryColor createRed() { return PrimaryColor{1, 0, 0}; }\n  static PrimaryColor createGreen() { return PrimaryColor{0, 1, 0}; }\n  static PrimaryColor createBlue() { return PrimaryColor{0, 0, 1}; }\n};\n\nconst PrimaryColor Color::Red = PrimaryColor::createRed();\nconst PrimaryColor Color::Green = PrimaryColor::createGreen();\nconst PrimaryColor Color::Blue = PrimaryColor::createBlue();\n\nconst Color Color::Yellow = Color::createYellow();\nconst Color Color::Magenta = Color::createMagenta();\nconst Color Color::Cyan = Color::createCyan();\n</code></pre>\n\n<p>By declaring the static <code>PrimaryColor</code> and <code>Color</code> variables inside the <code>Color</code> class you get something approaching the syntax you asked for:</p>\n\n<pre><code>void func(const Color&amp; c1, const Color&amp; c2);\n\nint main() {\n  auto red = Color::Red;\n  auto green = Color::Green;\n  auto yellow = red + green; // Ok\n  assert(yellow == Color::Yellow);\n\n  //auto orange = yellow + red; // Error; can't add to a combined value\n\n  auto redred = Color::Red + Color::Red;\n\n  func(red, yellow);  // Pass a PrimaryColor to a function taking a Color\n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/xyKQHKTTlCaGbKen\" rel=\"nofollow\">Live demo</a>.</p>\n\n<p><strong>Edit:</strong>\nAlternatively, you could have <code>PrimaryColor</code> and <code>HybridColor</code> which both derive from a common base class <code>Color</code>:</p>\n\n<pre><code>class PrimaryColor;\nclass HybridColor;\n\nclass Color {\nprotected:\n  int r, g, b;\n  explicit Color(int r, int g, int b) : r(r), g(g), b(b) {}\npublic:\n  friend bool operator==(const Color&amp; lhs, const Color&amp; rhs) {\n    return lhs.r == rhs.r &amp;&amp; lhs.g == rhs.g &amp;&amp; lhs.b == rhs.b;\n  }  \n  const static PrimaryColor Red;\n  const static PrimaryColor Green;\n  const static PrimaryColor Blue;\n  const static HybridColor Yellow;\n  const static HybridColor Magenta;\n  const static HybridColor Cyan;    \n};\n\nclass HybridColor : public Color {\n  explicit HybridColor(int r, int g, int b) : Color(r, g, b) {}\npublic:   \n  friend class PrimaryColor;\n  static HybridColor createYellow() { return HybridColor{1, 1, 0}; }\n  static HybridColor createMagenta() { return HybridColor{1, 0, 1}; }\n  static HybridColor createCyan() { return HybridColor{0, 1, 1}; }  \n};\n\nclass PrimaryColor : public Color {\n  explicit PrimaryColor(int r, int g, int b) : Color(r, g, b) {}    \npublic:\n  HybridColor operator+(const PrimaryColor&amp; rhs) const {\n    return HybridColor(r+rhs.r, g+rhs.g, b+rhs.b);\n  }\n  static PrimaryColor createRed() { return PrimaryColor{1, 0, 0}; }\n  static PrimaryColor createGreen() { return PrimaryColor{0, 1, 0}; }\n  static PrimaryColor createBlue() { return PrimaryColor{0, 0, 1}; }\n};\n\nconst PrimaryColor Color::Red = PrimaryColor::createRed();\nconst PrimaryColor Color::Green = PrimaryColor::createGreen();\nconst PrimaryColor Color::Blue = PrimaryColor::createBlue();\n\nconst HybridColor Color::Yellow = HybridColor::createYellow();\nconst HybridColor Color::Magenta = HybridColor::createMagenta();\nconst HybridColor Color::Cyan = HybridColor::createCyan();\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/Sud43LBiVtWtDjja\" rel=\"nofollow\">Live demo</a>.</p>\n"}], "owner": {"reputation": 181, "user_id": 3537800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba1378d6cce4c9aceca9ae8523fcfa94?s=128&d=identicon&r=PG&f=1", "display_name": "TriforceOfKirby", "link": "https://stackoverflow.com/users/3537800/triforceofkirby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 2, "accepted_answer_id": 32489494, "answer_count": 2, "score": 1, "last_activity_date": 1442190085, "creation_date": 1441826065, "question_id": 32487489, "link": "https://stackoverflow.com/questions/32487489/how-can-i-create-a-class-that-can-be-added-to-itself-only-once", "title": "How can I create a class that can be added to itself only once?", "body": "<p>Right now I have an enum with 5 base values that I want to be able to combine any of the 5 base values with each other to make a combined value, but I don't want a combined value able to be added to another base value.</p>\n\n<p>For example:</p>\n\n<pre><code>enum class Color {\n    Red,\n    Green,\n    Blue,\n    White,\n    Black\n}\n\nColor red = Color::Red;\nColor green = Color::Green;\nColor yellow = red + green; // Ok; yellow = Color::Yellow (Not sure how I would define this value)\nColor orange = yellow + red; // Error; can't add to a combined value\n\n// Note: It would be possible to add the same value to itself\n// for example: Color::Red + Color::Red = Color::RedRed\n</code></pre>\n\n<p>I'm thinking this will probably have to be changed to a class with operator overloading rather than an enum, but I'm not sure how to prevent adding a combined value to another value.</p>\n\n<p>What would be an elegant way of doing this?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 5358, "user_id": 1932452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dfca62a1e4eb69f39ce00152862c70e?s=128&d=identicon&r=PG", "display_name": "wyer33", "link": "https://stackoverflow.com/users/1932452/wyer33"}, "edited": false, "score": 0, "creation_date": 1441826529, "post_id": 32487567, "comment_id": 52835827, "body": "Thanks!  By the way, is there a way to print out the cv qualifier without using is_same?  Basically, a version of <code>typeid</code> that keeps all the qualifiers."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 5358, "user_id": 1932452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dfca62a1e4eb69f39ce00152862c70e?s=128&d=identicon&r=PG", "display_name": "wyer33", "link": "https://stackoverflow.com/users/1932452/wyer33"}, "edited": false, "score": 1, "creation_date": 1441826670, "post_id": 32487567, "comment_id": 52835893, "body": "One quick way is to <code>typeid(wrap&lt;T&gt;)</code> and just ignore the <code>wrap</code> part in the output."}, {"owner": {"reputation": 5358, "user_id": 1932452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dfca62a1e4eb69f39ce00152862c70e?s=128&d=identicon&r=PG", "display_name": "wyer33", "link": "https://stackoverflow.com/users/1932452/wyer33"}, "edited": false, "score": 0, "creation_date": 1441827067, "post_id": 32487567, "comment_id": 52836096, "body": "Thanks for the tip.  Unless I&#39;m missing something and in case anyone else is trying this, this trick requires the definition, <code>template &lt;typename T&gt; struct wrap{};</code>.  Then, we see something like: <code>wrap&lt;double const&amp;&gt;</code> out of c++filt."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 5, "last_activity_date": 1441826344, "creation_date": 1441826344, "answer_id": 32487567, "question_id": 32487406, "link": "https://stackoverflow.com/questions/32487406/how-to-grab-the-argument-and-return-types-from-a-stdfunction-with-cv-and-refer/32487567#32487567", "title": "How to grab the argument and return types from a std::function with cv and reference qualifiers?", "body": "<p>The <code>const</code> and reference are stripped off by <code>typeid</code>, not by <code>function_traits</code>.  Try adding</p>\n\n<pre><code>std::cout &lt;&lt; std::boolalpha &lt;&lt; std::is_same&lt;double,\n    typename function_traits&lt;T&gt;::template arg&lt;0&gt;::type&gt;::value  &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::boolalpha &lt;&lt; std::is_same&lt;const double&amp;,\n    typename function_traits&lt;T&gt;::template arg&lt;0&gt;::type&gt;::value &lt;&lt; std::endl;\n</code></pre>\n\n<p>to your <code>foo</code> and you'll see the expected values.</p>\n"}], "owner": {"reputation": 5358, "user_id": 1932452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dfca62a1e4eb69f39ce00152862c70e?s=128&d=identicon&r=PG", "display_name": "wyer33", "link": "https://stackoverflow.com/users/1932452/wyer33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 32487567, "answer_count": 1, "score": 1, "last_activity_date": 1441826344, "creation_date": 1441825735, "question_id": 32487406, "link": "https://stackoverflow.com/questions/32487406/how-to-grab-the-argument-and-return-types-from-a-stdfunction-with-cv-and-refer", "title": "How to grab the argument and return types from a std::function with cv and reference qualifiers?", "body": "<p>Is there a good way to grab the argument and return types from a <code>std::function</code> such that we also return the cv and reference qualifiers?  This partially relates to a previous question <a href=\"https://stackoverflow.com/questions/9044866/how-to-get-the-number-of-arguments-of-stdfunction\">here</a>.  In any case, using the code in the answer, we have the following example:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt; \nstruct function_traits;\n\ntemplate&lt;typename R, typename ...Args&gt; \nstruct function_traits&lt;std::function&lt;R(Args...)&gt;&gt; {\n    static const size_t nargs = sizeof...(Args);\n\n    typedef R result_type;\n\n    template &lt;size_t i&gt;\n    struct arg {\n        typedef typename std::tuple_element&lt;i, std::tuple&lt;Args...&gt;&gt;::type\n            type;\n    };\n};\n\ntemplate &lt;typename T&gt;\nvoid foo(T const &amp; f) {\n    typedef function_traits &lt;T&gt; stuff;\n    std::cout &lt;&lt;\n        typeid(typename function_traits &lt;T&gt;::result_type).name()\n        &lt;&lt; std::endl;\n    std::cout &lt;&lt;\n        typeid(typename function_traits &lt;T&gt;::template arg&lt;0&gt;::type).name()\n        &lt;&lt; std::endl;\n    std::cout &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n}\n\nint main() {\n    std::cout &lt;&lt; \"Function: f\" &lt;&lt; std::endl;\n    auto f = [](double x) { return x+1.;};\n    foo &lt;std::function&lt;double(double)&gt;&gt; (f);\n\n    std::cout &lt;&lt; std::endl &lt;&lt; \"Function: g\" &lt;&lt; std::endl;\n    auto g = [](double const &amp; x) { return x+1.;};\n    foo &lt;std::function&lt;double(double const &amp;)&gt;&gt; (g);\n}\n</code></pre>\n\n<p>Now, using c++filt, we see the type of <code>f</code> is <code>std::function&lt;double (double)&gt;</code> and the type of <code>g</code> is <code>std::function&lt;double (double const&amp;)&gt;</code>.  However, the structure <code>function_traits</code> reports the argument types to be the same, which they are not.  Basically, the <code>const&amp;</code> was stripped off the argument type for <code>g</code>.  Is there a way to fix this so that <code>const&amp;</code> is retained?</p>\n"}, {"tags": ["c++", "macos", "quantlib", "quantlib-swig"], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 1478110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081ebe6446ad69f5867876eba60f3b36?s=128&d=identicon&r=PG", "display_name": "mmizutani", "link": "https://stackoverflow.com/users/1478110/mmizutani"}, "is_accepted": false, "score": 0, "last_activity_date": 1442755652, "last_edit_date": 1442755652, "creation_date": 1442724858, "answer_id": 32675941, "question_id": 32487283, "link": "https://stackoverflow.com/questions/32487283/osx-10-10-5-c-library-how-to-change-link-or-add-environment-flags-to-brew-i/32675941#32675941", "title": "OSX 10.10.5 - C++ library, how to change link or add environment flags to brew installed version", "body": "<p>Regarding the latter part of your question, how to build the brew version with the flags, you can build the quantlib homebrew recipe on OSX using <code>ENV.append</code> in the install function:</p>\n\n<pre><code>def install\n  ...\n  if MacOS.version &gt;= :mavericks &amp;&amp; ENV.compiler == :clang\n    ENV.append \"CXXFLAGS\", \"-stdlib=libstdc++ -mmacosx-version-min=10.6\"\n    ENV.append \"LDFLAGS\", \"-stdlib=libstdc++ -mmacosx-version-min=10.6\"\n  end\n  ...\n  system \"make\", \"install\"\nend\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 2069274, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a33c7e7c12dc6d2e6795dae390c48d28?s=128&d=identicon&r=PG", "display_name": "Curt", "link": "https://stackoverflow.com/users/2069274/curt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442755652, "creation_date": 1441825193, "last_edit_date": 1441826385, "question_id": 32487283, "link": "https://stackoverflow.com/questions/32487283/osx-10-10-5-c-library-how-to-change-link-or-add-environment-flags-to-brew-i", "title": "OSX 10.10.5 - C++ library, how to change link or add environment flags to brew installed version", "body": "<p>I'm having an issue with a linked library. </p>\n\n<p>I installed a version of it via brew but I later found out that I needed to add environmental flags to the build:</p>\n\n<pre><code>CXXFLAGS=\"-stdlib=libstdc++ -mmacosx-version-min=10.6\" \\\n            LDFLAGS=\"-stdlib=libstdc++ -mmacosx-version-min=10.6\"\n</code></pre>\n\n<p>so I installed another version at opt/local/lib that was built using the flags. My issue is that the os is still using the brew installed version. I've searched but can't find out how to have the os link to the properly built library or build the brew version with the flags.</p>\n\n<p>The reason I believe this is the issue, is that when building quantlib-swig for ruby I'm getting the following errors which a couple forums said are related to the environmental flags:</p>\n\n<pre><code>creating Makefile\ncompiling quantlib_wrap.cpp\nIn file included from quantlib_wrap.cpp:2647:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/quantlib.hpp:47:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/math/all.hpp:35:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/math/matrixutilities/all.hpp:4:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/math/matrixutilities/basisincompleteordered.hpp:25:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/valarray:4035:59: error: \n      'value_type' is a private member of\n      'boost::iterators::detail::operator_brackets_proxy&lt;QuantLib::step_iterator&lt;double\n      *&gt; &gt;'\n    __val_expr&lt;_BinaryOp&lt;__bit_shift_left&lt;typename _Expr::value_type&gt;,\n                                                          ^\nquantlib_wrap.cpp:8228:23: note: while substituting deduced template arguments\n      into function template 'operator&lt;&lt;' [with _Expr =\n      boost::iterators::detail::operator_brackets_proxy&lt;QuantLib::step_iterator&lt;double\n      *&gt; &gt;]\n                    s &lt;&lt; (*self)[i][j];\n                      ^\nIn file included from quantlib_wrap.cpp:2647:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/quantlib.hpp:47:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/math/all.hpp:35:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/math/matrixutilities/all.hpp:4:\nIn file included from /usr/local/Cellar/quantlib/1.6.1/include/ql/math/matrixutilities/basisincompleteordered.hpp:25:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/valarray:4036:46: error: \n      'value_type' is a private member of\n      'boost::iterators::detail::operator_brackets_proxy&lt;QuantLib::step_iterator&lt;double\n      *&gt; &gt;'\n               __scalar_expr&lt;typename _Expr::value_type&gt;, _Expr&gt; &gt;\n                                             ^\n2 errors generated.\nmake: *** [quantlib_wrap.o] Error 1\n</code></pre>\n"}, {"tags": ["c++", "c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 1, "creation_date": 1441825448, "post_id": 32487278, "comment_id": 52835312, "body": "Because 1) the disassembly-flavour is <i>not</i> saved across GDB invocations (<a href=\"http://stackoverflow.com/questions/2045509/how-to-save-settings-in-gdb?rq=1\">you need to set it in a <code>gdbinit</code> script run by GDB when it starts</a>) and 2) The correct name in GDB for the <code>eip</code> register is <code>pc</code> or <code>$pc</code>."}, {"owner": {"reputation": 215, "user_id": 3698624, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2875386f2772c39fbfc6149282c86748?s=128&d=identicon&r=PG&f=1", "display_name": "user3698624", "link": "https://stackoverflow.com/users/3698624/user3698624"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1441825867, "post_id": 32487278, "comment_id": 52835505, "body": "@IwillnotexistIdonotexist I know, and I set the flavor by doing this. <code>patrick@localhost:~&#47;Dokumente&#47;Projekte$ cat ~&#47;.gdbinit </code>  <code>set disassembly-flavor intel </code>  And for root: <code>patrick@localhost:~&#47;Dokumente&#47;Projekte$ su</code>  <code>Passwort: </code>  <code>root@localhost:&#47;home&#47;patrick&#47;Dokumente&#47;Projekte# cat ~&#47;.gdbinit</code>  <code>set disassembly intel</code>"}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1441826113, "creation_date": 1441826113, "answer_id": 32487503, "question_id": 32487278, "link": "https://stackoverflow.com/questions/32487278/gdb-dis-flavor-set-to-intel-but-showing-att-style/32487503#32487503", "title": "GDB Dis-Flavor set to Intel, but showing AT&amp;T-style", "body": "<p>You are misunderstanding what disassembly flavour means. It means exactly that: what the disassembly looks like when you view machine code in a human-readable(ish) form. </p>\n\n<p>To print registers (or use registers in any other context), you need to use <code>$reg</code>, such as <code>$rip</code> or <code>$pc</code>, <code>$eax</code>, etc. </p>\n\n<p>If I disassemble one of my programs with at&amp;t syntax, gdb shows this:</p>\n\n<pre><code>   0x00000000007378f0 &lt;+0&gt;: push   %rbp\n   0x00000000007378f1 &lt;+1&gt;: mov    %rsp,%rbp\n   0x00000000007378f4 &lt;+4&gt;: sub    $0x20,%rsp\n   0x00000000007378f8 &lt;+8&gt;: movl   $0x0,-0x4(%rbp)\n   0x00000000007378ff &lt;+15&gt;:    mov    %edi,-0x8(%rbp)\n   0x0000000000737902 &lt;+18&gt;:    mov    %rsi,-0x10(%rbp)\n=&gt; 0x0000000000737906 &lt;+22&gt;:    mov    -0x10(%rbp),%rsi\n   0x000000000073790a &lt;+26&gt;:    mov    (%rsi),%rdi\n   0x000000000073790d &lt;+29&gt;:    callq  0x737950 &lt;FindLibPath(char const*)&gt;\n   0x0000000000737912 &lt;+34&gt;:    xor    %eax,%eax\n</code></pre>\n\n<p>Then do this:</p>\n\n<pre><code>(gdb) set disassembly-flavor intel \n(gdb) disass main\nDump of assembler code for function main(int, char**):\n   0x00000000007378f0 &lt;+0&gt;: push   rbp\n   0x00000000007378f1 &lt;+1&gt;: mov    rbp,rsp\n   0x00000000007378f4 &lt;+4&gt;: sub    rsp,0x20\n   0x00000000007378f8 &lt;+8&gt;: mov    DWORD PTR [rbp-0x4],0x0\n   0x00000000007378ff &lt;+15&gt;:    mov    DWORD PTR [rbp-0x8],edi\n   0x0000000000737902 &lt;+18&gt;:    mov    QWORD PTR [rbp-0x10],rsi\n=&gt; 0x0000000000737906 &lt;+22&gt;:    mov    rsi,QWORD PTR [rbp-0x10]\n   0x000000000073790a &lt;+26&gt;:    mov    rdi,QWORD PTR [rsi]\n   0x000000000073790d &lt;+29&gt;:    call   0x737950 &lt;FindLibPath(char const*)&gt;\n   0x0000000000737912 &lt;+34&gt;:    xor    eax,eax\n</code></pre>\n\n<p>and you can see the difference. But the names of registers and how you use registers on the gdb command-line isn't changing, you need a <code>$reg</code> in both cases.</p>\n"}], "owner": {"reputation": 215, "user_id": 3698624, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2875386f2772c39fbfc6149282c86748?s=128&d=identicon&r=PG&f=1", "display_name": "user3698624", "link": "https://stackoverflow.com/users/3698624/user3698624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 32487503, "answer_count": 1, "score": 0, "last_activity_date": 1441826113, "creation_date": 1441825161, "last_edit_date": 1441825463, "question_id": 32487278, "link": "https://stackoverflow.com/questions/32487278/gdb-dis-flavor-set-to-intel-but-showing-att-style", "title": "GDB Dis-Flavor set to Intel, but showing AT&amp;T-style", "body": "<p>I've set the <code>disassembly-flavor</code> of the <strong>gdb-debugger</strong> to <code>Intel</code> (both: su &amp; normal user), but anyway it's still showing the assembly-code in <code>AT&amp;T</code> notation:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>patrick@localhost:~/Dokumente/Projekte$ gdb -q ./a.out\nReading symbols from ./a.out...done.\n(gdb) break main\nBreakpoint 1 at 0x40050e: file firstprog.c, line 5.\n(gdb) run\nStarting program: /home/patrick/Dokumente/Projekte/a.out \n\nBreakpoint 1, main () at firstprog.c:5\n5   for(i=0; i &lt; 10; i++)\n(gdb) show disassembly\nThe disassembly flavor is \"intel\".\n(gdb) info registers\nrax            0x400506 4195590\nrbx            0x0  0\nrcx            0x0  0\nrdx            0x7fffffffe2d8   140737488347864\nrsi            0x7fffffffe2c8   140737488347848\nrdi            0x1  1\nrbp            0x7fffffffe1e0   0x7fffffffe1e0\n(gdb) info register eip\nInvalid register `eip'\n</code></pre>\n\n<p>I <strong>did</strong> restart the computer. My OS is Kali Linux <strong>amd64</strong>.\nI have the following questions:</p>\n\n<ul>\n<li>Why is <strong>gdb</strong> still showing the <code>AT&amp;T</code> notation?</li>\n<li>Why is the register <code>EIP</code> (<strong>instruction pointer)</strong> shown as <em>invalid register</em>?</li>\n</ul>\n"}, {"tags": ["c++", "arrays", "debugging", "codeblocks"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1441823972, "post_id": 32486814, "comment_id": 52834588, "body": "<code>int arr[arrSize];</code> is a variable length array and are not standard.  I would suggest you use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> change it to <code>std::vector&lt;int&gt; arr(arrSize);</code>"}], "owner": {"reputation": 79, "user_id": 2955015, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e70f701b78bc6ebc42d9230c1d0c2b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Shabrido", "link": "https://stackoverflow.com/users/2955015/shabrido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441823461, "creation_date": 1441823461, "question_id": 32486814, "link": "https://stackoverflow.com/questions/32486814/debugging-errors-in-codeblocks-while-stepping-into-varibale-size-array-decla", "title": "Debugging errors in Code::Blocks while &quot;stepping into&quot; varibale size array declaration", "body": "<p>I'm getting strange errors while debugging in Code::Blocks, and they are showing as I declare array of a non constant size. The problem involves displaying error 10 times one by one in a debugger console, and then 7 additional errors before exiting program. And they will only show when using \"step into\" command from debugger.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int arrSize = 3; // can be anything, any value will display the same error message exactly 10 times!\n\n    int arr[arrSize];\n\n    // here I get exactly 10 errors from debugger console while doing \"step into\" command\n    // and it is showing me those errors until display it 10 times (one by one), then goes further..\n\n    cout &lt;&lt; \"program finished\";\n    return 0; // and seven different errors here before exiting the program\n}\n</code></pre>\n\n<p>Error message from top line (when declaring array), about 10 similar error goes here..</p>\n\n<pre><code>Cannot open file: ../../../../../src/gcc-4.8.1/libgcc/config/i386/cygwin.S\nAt ../../../../../src/gcc-4.8.1/libgcc/config/i386/cygwin.S:168 (here it changes S value while displaying similar errors)\n\n[debug]&gt; info locals\n[debug]No locals.\n[debug]&gt;&gt;&gt;&gt;&gt;&gt;cb_gdb:\n[debug]&gt; info args\n[debug]No symbol table info available.\n[debug]&gt;&gt;&gt;&gt;&gt;&gt;cb_gdb:\n[debug]&gt; bt 30\n[debug]#0  __chkstk_ms () at ../../../../../src/gcc-4.8.1/libgcc/config/i386/cygwin.S:168\n[debug]#1  0x004013c1 in main () at C:\\Users\\******\\Desktop\\seepp\\aaa\\main.cpp:8\n[debug]&gt;&gt;&gt;&gt;&gt;&gt;cb_gdb:\n</code></pre>\n"}, {"tags": ["c++", "dll", "linker", "implicit", "explicit"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 4, "creation_date": 1441825770, "post_id": 32486699, "comment_id": 52835473, "body": "In implicit linking, the DLL is loaded at app startup, but it might not be fully committed into memory until the DLL is called into for the first time. DLL function calls go directly to the DLL. Explicit linking is managed by the user&#39;s own code.  Delay loading is a mix of the two.  The linker creates a special table in the app&#39;s PE header containing information about delay-loaded DLL functions, and the runtime library has stub code that each delay-loaded function is initially pointed at..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 4, "creation_date": 1441825885, "post_id": 32486699, "comment_id": 52835522, "body": "... When a delay-loaded function is called for the first time, the stub code looks in the delay-load PE table, explicitly loads the specified DLL function pointer, replaces the function&#39;s stub pointer with the loaded DLL pointer so subsequent calls will go directly to the DLL, then the stub finishes by calling the loaded function.  The app never knows the difference between static-linked function calls and delay-loaded function calls (unless a runtime error occurs trying to load the DLL)."}, {"owner": {"reputation": 2641, "user_id": 4397753, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2cf1a782244585a33dc35fd6f0070eb5?s=128&d=identicon&r=PG&f=1", "display_name": "Jenix", "link": "https://stackoverflow.com/users/4397753/jenix"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1441886601, "post_id": 32486699, "comment_id": 52862062, "body": "@Remy Lebeau Thank you!"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476007700, "post_id": 32486699, "comment_id": 67165294, "body": "@RemyLebeau - Why did you avoid answering? Its a very good explanation, and I think its upvote worthy. My apologies for probing you ..."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1476008143, "post_id": 32486699, "comment_id": 67165408, "body": "@Jenix - Also see <a href=\"http://stackoverflow.com/q/3809767\">LoadLibrary Reference Counting</a> and the discussion of NTDLL.dll&#39;s <code>LdrLoadDll</code>."}], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 4754812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-strdovvZkRY/AAAAAAAAAAI/AAAAAAAAJIk/AFJ3fLXQpG4/photo.jpg?sz=128", "display_name": "Yosef Arbiv", "link": "https://stackoverflow.com/users/4754812/yosef-arbiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1567165124, "last_edit_date": 1567165124, "creation_date": 1567164684, "answer_id": 57725945, "question_id": 32486699, "link": "https://stackoverflow.com/questions/32486699/when-do-these-load-dlls-implicit-linking-vs-explicit-linking/57725945#57725945", "title": "When do these load DLLs : Implicit Linking VS Explicit Linking", "body": "<p>@remy-lebeau provided a good explanation in his comment. I'll try to elaborate here as an answer.</p>\n\n<p>The difference between implicit and explicit dll loading is explained <a href=\"https://docs.microsoft.com/en-us/cpp/build/linking-an-executable-to-a-dll?view=vs-2019\" rel=\"nofollow noreferrer\">here</a>.\nIn short: </p>\n\n<ul>\n<li>In <strong>explicit loading</strong>, the application loads the dll by calling LoadLibrary explicitly.</li>\n<li>In <strong>implicit loading</strong>, the application specifies the dll in compile time, and Windows loader loads it in run time.</li>\n</ul>\n\n<p>Implicit loading has many advantages, but it slows the application loading time because all of the dlls are loaded during this stage.</p>\n\n<p>To solve this issue, Microsoft supports <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/linker-support-for-delay-loaded-dlls?view=vs-2019\" rel=\"nofollow noreferrer\">Delayed Loaded Dlls</a>, which is a <strong>type of implicit loading</strong>.</p>\n\n<p>By using it you can enjoy all of the benefits of implicit loading, but the dll will be loaded only when your application will call one of its functions.</p>\n\n<p>To your questions: </p>\n\n<ol>\n<li>In implicit loading, the dll will be loaded on application startup if you didn't specify it as delayed loaded. If you did, it will be loaded on the first usage.</li>\n<li>Yes. In all of the scenarios the dll is loaded and mapped to the application memory.</li>\n</ol>\n"}], "owner": {"reputation": 2641, "user_id": 4397753, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2cf1a782244585a33dc35fd6f0070eb5?s=128&d=identicon&r=PG&f=1", "display_name": "Jenix", "link": "https://stackoverflow.com/users/4397753/jenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4747, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1567165124, "creation_date": 1441822992, "last_edit_date": 1441823550, "question_id": 32486699, "link": "https://stackoverflow.com/questions/32486699/when-do-these-load-dlls-implicit-linking-vs-explicit-linking", "title": "When do these load DLLs : Implicit Linking VS Explicit Linking", "body": "<p>I thought Implicit linking loads a DLL as soon as the application starts because it is also called \"load-time dynamic linking\". But I found some strange explanations below from the link here(<a href=\"https://msdn.microsoft.com/en-us/library/253b8k2c(VS.80).aspx\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/253b8k2c(VS.80).aspx</a>).</p>\n\n<p><strong>Implicit Linking</strong></p>\n\n<blockquote>\n  <p>Like the rest of a program's code, DLL code is mapped into the address\n  space of the process when the process starts up and it is loaded into\n  memory only when needed. As a result, the PRELOAD and LOADONCALL code\n  attributes used by .def files to control loading in previous versions\n  of Windows no longer have meaning.</p>\n</blockquote>\n\n<p><strong>Explicit Linking</strong></p>\n\n<blockquote>\n  <p>An application that implicitly links to many DLLs can be slow to\n  start because Windows loads all the DLLs when the application loads.\n  To improve startup performance, an application can implicitly link to\n  those DLLs needed immediately after loading and wait to explicitly\n  link to the other DLLs when they are needed.</p>\n</blockquote>\n\n<p>And another explanation for implicit linking from here(<a href=\"https://msdn.microsoft.com/en-us/library/151kt790.aspx\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/151kt790.aspx</a>).</p>\n\n<p><strong>Implicit Linking</strong></p>\n\n<blockquote>\n  <p>The Visual C++ linker now supports the delayed loading of DLLs. This\n  relieves you of the need to use the Windows SDK functions LoadLibrary\n  and GetProcAddress to implement DLL delayed loading.</p>\n  \n  <p>Before Visual C++ 6.0, the only way to load a DLL at run time was by\n  using LoadLibrary and GetProcAddress; the operating system would load\n  the DLL when the executable or DLL using it was loaded.</p>\n  \n  <p>Beginning with Visual C++ 6.0, when statically linking with a DLL, the\n  linker provides options to delay load the DLL until the program calls\n  a function in that DLL.</p>\n  \n  <p>An application can delay load a DLL using the /DELAYLOAD (Delay Load\n  Import) linker option with a helper function (default implementation\n  provided by Visual C++). The helper function will load the DLL at run\n  time by calling <strong>LoadLibrary</strong> and <strong>GetProcAddress</strong> for you.</p>\n</blockquote>\n\n<p>I'm really confused and don't know how to understand these.</p>\n\n<p><strong>1. Does implicit linking load a DLL on startup or only when a function in DLL is called?</strong></p>\n\n<p><strong>2. It means both are similiar in the end because LoadLibrary() is called under the hood?</strong></p>\n"}, {"tags": ["c++", "lambda", "move", "c++14"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1441823402, "post_id": 32486623, "comment_id": 52834313, "body": "I think setCallback should get parameter by value rather than rvalue reference, am I wrong?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1441823476, "post_id": 32486623, "comment_id": 52834357, "body": "@Slava That&#39;s what I originally had, but it gave the same error. I thought taking the rvalue reference would permit (/force) the lambda to be move-constructed, but that doesn&#39;t seem to be the case."}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441823730, "post_id": 32486854, "comment_id": 52834483, "body": "....huh. Thank you-- I was having a very difficult time parsing those error messages even for this simple case. Is there any way to change the signature to work, short of using a universal-ref-qualified template parameter instead of <code>std::function</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441823815, "post_id": 32486854, "comment_id": 52834531, "body": "@KyleStrand It doesn&#39;t matter what the parameter is, you just can&#39;t construct the <code>function</code>. If you need something type-erased, you&#39;d have to write a movable <code>function</code> equivalent."}, {"owner": {"reputation": 1261, "user_id": 2303378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff8bb3b43552420897498876c08527d?s=128&d=identicon&r=PG", "display_name": "Denis Blank", "link": "https://stackoverflow.com/users/2303378/denis-blank"}, "edited": false, "score": 0, "creation_date": 1441824281, "post_id": 32486854, "comment_id": 52834749, "body": "@Barry there are move only std::functions alternatives already out there just to mention two: <a href=\"https://github.com/Naios/Function2\" rel=\"nofollow noreferrer\">github.com/Naios/Function2</a> and <a href=\"https://github.com/potswa/cxx_function\" rel=\"nofollow noreferrer\">github.com/potswa/cxx_function</a>"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441825142, "post_id": 32486854, "comment_id": 52835146, "body": "@Barry I meant using the lambda directly (without converting it to <code>function</code> or any other similar type) by writing a template function that would use the lambda itself as the template type."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1441825885, "post_id": 32486854, "comment_id": 52835519, "body": "@KyleStrand Oh sure, that&#39;s fine. Moving the lambda around is perfectly fine."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 21, "last_activity_date": 1441823636, "creation_date": 1441823636, "answer_id": 32486854, "question_id": 32486623, "link": "https://stackoverflow.com/questions/32486623/moving-a-lambda-once-youve-move-captured-a-move-only-type-how-can-the-lambda/32486854#32486854", "title": "Moving a lambda: once you&#39;ve move-captured a move-only type, how can the lambda be used?", "body": "<p>You can move <strong>the lambda</strong>, that's fine. That's not what your problem is though, you're trying to instantiate a <code>std::function</code> with a noncopyable lambda. And the:</p>\n\n<pre><code>template&lt; class F &gt; \nfunction( F f );\n</code></pre>\n\n<p>constructor of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/function\"><code>function</code></a> does:</p>\n\n<blockquote>\n  <p>5) Initializes the target with a <strong>copy</strong> of <code>f</code>. </p>\n</blockquote>\n\n<p>This is because <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\"><code>std::function</code></a>:</p>\n\n<blockquote>\n  <p>satisfies the requirements of CopyConstructible and CopyAssignable.</p>\n</blockquote>\n\n<p>Since <code>function</code> has to be copyable, everything you put into it must also be copyable. And a move-only lambda does not meet that requirement. </p>\n"}, {"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441823903, "post_id": 32486861, "comment_id": 52834564, "body": "Ack. I knew <code>std::function</code> is not a lambda, but since lambda is convertible to <code>std::function</code> I wasn&#39;t keeping the distinction clear in my mind."}, {"owner": {"reputation": 1036, "user_id": 3480968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3262dde3cb10606369f76f1498bf15e9?s=128&d=identicon&r=PG&f=1", "display_name": "alpha", "link": "https://stackoverflow.com/users/3480968/alpha"}, "edited": false, "score": 0, "creation_date": 1443587109, "post_id": 32486861, "comment_id": 53548890, "body": "So how to implement the HasCallback in original code? What I mean is, how to save the move-only lambda into a move only container or move only data struct?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 1036, "user_id": 3480968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3262dde3cb10606369f76f1498bf15e9?s=128&d=identicon&r=PG&f=1", "display_name": "alpha", "link": "https://stackoverflow.com/users/3480968/alpha"}, "edited": false, "score": 0, "creation_date": 1472061505, "post_id": 32486861, "comment_id": 65605545, "body": "@alpha You would either need to use the lambda directly without converting it to another type (i.e. the function that calls a lambda would need to take the lambda as a template-type argument), or use a different function-class (there are various alternatives to <code>std::function</code> in the wild, or you could design your own)."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": false, "score": 16, "last_activity_date": 1441823669, "last_edit_date": 1495540962, "creation_date": 1441823669, "answer_id": 32486861, "question_id": 32486623, "link": "https://stackoverflow.com/questions/32486623/moving-a-lambda-once-youve-move-captured-a-move-only-type-how-can-the-lambda/32486861#32486861", "title": "Moving a lambda: once you&#39;ve move-captured a move-only type, how can the lambda be used?", "body": "<p><code>std::function</code> is not a lambda! It's a wrapper that can be constructed from any type of callable, including a lambda. <code>std::function</code> requires that the <a href=\"https://stackoverflow.com/q/25330716/241631\">callable be copy-constructible</a>, which is why your example fails.</p>\n\n<p>A move-only lambda can be moved again as shown below.</p>\n\n<pre><code>template&lt;typename F&gt;\nvoid call(F&amp;&amp; f)\n{\n    auto f1 = std::forward&lt;F&gt;(f);  // construct a local copy\n    f1();\n}\n\nint main()\n{\n  auto uniq = make_unique&lt;std::string&gt;(\"Blah blah blah\");\n  auto lambda = [uniq = move(uniq)]() {\n        std::cout &lt;&lt; *uniq &lt;&lt; std::endl;\n      };\n//  call(lambda);   // doesn't compile because the lambda cannot be copied\n  call(std::move(lambda));\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f8f276c0060819f1\" rel=\"noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8583, "favorite_count": 6, "closed_date": 1441833287, "accepted_answer_id": 32486854, "answer_count": 2, "score": 22, "last_activity_date": 1441841103, "creation_date": 1441822650, "last_edit_date": 1495542871, "question_id": 32486623, "link": "https://stackoverflow.com/questions/32486623/moving-a-lambda-once-youve-move-captured-a-move-only-type-how-can-the-lambda", "closed_reason": "Duplicate", "title": "Moving a lambda: once you&#39;ve move-captured a move-only type, how can the lambda be used?", "body": "<p><a href=\"https://stackoverflow.com/a/20669290/1858225\">This answer</a> explains how to move-capture a variable within a lambda in C++14.</p>\n\n<p>But once you've move-captured an un-copyable object (such as a <code>std::unique_ptr</code>) within a lambda, you cannot copy the lambda itself.</p>\n\n<p>This would be fine if you could <em>move</em> the lambda, but I get a compile error when trying to do so:</p>\n\n<pre><code>using namespace std;\n\nclass HasCallback\n{\n  public:\n    void setCallback(std::function&lt;void(void)&gt;&amp;&amp; f)\n    {\n      callback = move(f);\n    }\n\n    std::function&lt;void(void)&gt; callback;\n};\n\nint main()\n{\n  auto uniq = make_unique&lt;std::string&gt;(\"Blah blah blah\");\n  HasCallback hc;\n  hc.setCallback(\n      [uniq = move(uniq)](void)\n      {\n        std::cout &lt;&lt; *uniq &lt;&lt; std::endl;\n      });\n\n  hc.callback();\n}\n</code></pre>\n\n<p>This produces the following error with <code>g++</code> (I've attempted to copy only the relevant line):</p>\n\n<pre><code>error: use of deleted function \u2018main()::&lt;lambda()&gt;::&lt;lambda&gt;(const main()::&lt;lambda()&gt;&amp;\u2019\n</code></pre>\n\n<p>...implying, I think, that my attempt to move the lambda has failed.</p>\n\n<p><code>clang++</code> gives a similar error.</p>\n\n<p>I tried explicitly <code>move</code>ing the lambda (even though it's a temporary value), but that did not help.</p>\n\n<p><strong>EDIT:</strong> The answers below adequately address the compile errors produced by the above code. For an alternate approach, simply <code>release</code> the unique pointer's target value into a <code>std::shared_ptr</code>, which <em>can</em> be copied. (I'm not writing this as an answer, because that would assume that this is an XY problem, but the underlying reason why <code>unique_ptr</code> can't be used in a lambda that gets converted to a <code>std::function</code> is important to understand.)</p>\n\n<p><strong>EDIT 2:</strong> Hilariously enough, I just realized <code>auto_ptr</code> would actually do the right thing here (!), as far as I can tell. It acts essentially like <code>unique_ptr</code>, but allows copy-construction in place of move-construction.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1441823542, "post_id": 32486578, "comment_id": 52834393, "body": "Why would you expect <code>5.0</code>? <code>float</code> and <code>short</code> aren&#39;t even the same size."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 10, "creation_date": 1441823590, "post_id": 32486578, "comment_id": 52834414, "body": "It&#39;s trying to interpret the bits in <code>s</code>, along with some of the surrounding stack contents, as a <code>float</code>. There is no reason for that to result in <i>anything</i> sensible, or even predictable."}, {"owner": {"reputation": 412, "user_id": 5318252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e7bc120df1c2a2ebd92d9b3bd7e4f6?s=128&d=identicon&r=PG&f=1", "display_name": "does_it_matter", "link": "https://stackoverflow.com/users/5318252/does-it-matter"}, "edited": false, "score": 0, "creation_date": 1441823650, "post_id": 32486578, "comment_id": 52834440, "body": "Sorry,I wasn&#39;t expecting exactly 5.0 actually I was thinking of something with zeros after a decimal."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 5, "creation_date": 1441823729, "post_id": 32486578, "comment_id": 52834481, "body": "There&#39;s no particular reason you should have any particular expectations about what output this code will produce."}], "answers": [{"comments": [{"owner": {"reputation": 412, "user_id": 5318252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e7bc120df1c2a2ebd92d9b3bd7e4f6?s=128&d=identicon&r=PG&f=1", "display_name": "does_it_matter", "link": "https://stackoverflow.com/users/5318252/does-it-matter"}, "edited": false, "score": 0, "creation_date": 1441824613, "post_id": 32486876, "comment_id": 52834921, "body": "Thank you for your answer but if it is a garbage value then it should give me different values on different compilers,I checked it even with some online compilers it is giving me the same value everywhere."}, {"owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "reply_to_user": {"reputation": 412, "user_id": 5318252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e7bc120df1c2a2ebd92d9b3bd7e4f6?s=128&d=identicon&r=PG&f=1", "display_name": "does_it_matter", "link": "https://stackoverflow.com/users/5318252/does-it-matter"}, "edited": false, "score": 1, "creation_date": 1441824784, "post_id": 32486876, "comment_id": 52835000, "body": "Garbage value does not mean random value. If the stack space following the short is set to zero (which it is likely to be if the program has just started), and the short always has the same value, then the bit pattern being copied into the float will always be the same bit pattern. This will always result in the <i>same</i> garbage pattern, but it is garbage nonetheless."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1441856503, "post_id": 32486876, "comment_id": 52845541, "body": "Garbage values are so unpredictable that they&#39;re sometimes predictable!"}], "tags": [], "owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "is_accepted": true, "score": 4, "last_activity_date": 1441826517, "last_edit_date": 1441826517, "creation_date": 1441823718, "answer_id": 32486876, "question_id": 32486578, "link": "https://stackoverflow.com/questions/32486578/why-the-output-of-the-following-code-is-7-00649e-45/32486876#32486876", "title": "Why the output of the following code is 7.00649e-45?", "body": "<p>This code coerces an integer value into a floating point value by moving the raw bit representation into a float; this happens because you cast the <em>pointer</em> from <code>short*</code> to <code>float*</code> -- this does not in any way cast the underlying <em>value</em> being pointed to. Floating point representation is not compatible with integer representation, so basically, yes, you are getting a garbage value.</p>\n\n<p>Additionally, on typical x86/x86_64 machines short is 2 bytes, while float is 4 bytes, so the number being read out as a floating point value is not just the contents of the short value you added, but also the stack space immediately after it in memory.</p>\n\n<h2>More Detail (about floating point representation)</h2>\n\n<p>I am assuming you are using a little-endian machine, e.g. x86/x86_64.</p>\n\n<p>A short value is two bytes. In little-endian encoding, the lower byte comes first, so the decimal value <code>5</code> looks like this in memory:</p>\n\n<pre><code>05 00\n</code></pre>\n\n<p>A floating point value is four bytes. So when the system tries to load your two bytes as a float, it also has to look at the next two bytes. If your stack ha not yet reached this far down, then the next two bytes are probably zero, so this is what our floating point number looks like, as a raw hex value in memory:</p>\n\n<pre><code>05 00 00 00\n</code></pre>\n\n<p>However, since your system is little-endian, when you actually want to interpret this value, the way it is read in order is like this:</p>\n\n<pre><code>00 00 00 05\n</code></pre>\n\n<p>So this is the raw binary representation of the floating point value. But what value do these bits represent? For this we have to know how they are interpreted. This will be according to the IEEE 754 standard for single-precision floating point numbers, which you can read more about <a href=\"http://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow\">on wikipedia</a>.</p>\n\n<p>The summary of this interpretation is here:</p>\n\n<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Float_example.svg/590px-Float_example.svg.png\"></p>\n\n<p>So if you interpret the given bit string according to the rules for interpreting floating point numbers, the resulting value is 7.006492321624085e-45, exactly the answer you got.</p>\n\n<p>An easy way to see this is with python's \"struct\" module:</p>\n\n<pre><code>&gt;&gt;&gt; import struct\n&gt;&gt;&gt; struct.unpack('&lt;f', b'\\x05\\x00\\x00\\x00')\n(7.006492321624085e-45,)\n</code></pre>\n\n<p><code>&lt;</code> means interpret the following bytes as little endian, <code>f</code> means interpret the following bytes as a float.</p>\n\n<p>Note that if you were on a big-endian machine, the short representation would be <code>00 05 00 00</code>, but the float representation would then be <code>00 05 00 00</code>. Again we can find out what value this represents by interpreting the bit pattern using python's struct module:</p>\n\n<pre><code>&gt;&gt;&gt; struct.unpack('&gt;f', b'\\x00\\x05\\x00\\x00')\n(4.5917748078995606e-40,)\n</code></pre>\n\n<p>(<code>&gt;</code> means that we are interpreting it as big-endian this time)</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1441824828, "last_edit_date": 1441824828, "creation_date": 1441823751, "answer_id": 32486884, "question_id": 32486578, "link": "https://stackoverflow.com/questions/32486578/why-the-output-of-the-following-code-is-7-00649e-45/32486884#32486884", "title": "Why the output of the following code is 7.00649e-45?", "body": "<p>You want <code>float f = (float)s</code>, since you expected to get 5.0, or if you really want to reinterpret the bits (which might make sense with a <code>uint32_t</code> and a <code>float</code>, which are the same size), <code>reinterpret_cast</code>. The C-style way of doing this kind of type-punning would be to make a union with a member of each type, store to it using one type, and read from it using the other type.</p>\n\n<p>What you did isn\u2019t legal, and on some systems, it would crash the program with a bus error because, on that CPU, the types have different memory-alignment requirements.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1441823980, "creation_date": 1441823980, "answer_id": 32486952, "question_id": 32486578, "link": "https://stackoverflow.com/questions/32486578/why-the-output-of-the-following-code-is-7-00649e-45/32486952#32486952", "title": "Why the output of the following code is 7.00649e-45?", "body": "<p>Likely your platform happened to allocate four bytes and filled them with zeroes except for the 5. The 5 was interpreted as the least significant binary digits. 5/(2^149) is 7.00649232e-45.</p>\n"}], "owner": {"reputation": 412, "user_id": 5318252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e7bc120df1c2a2ebd92d9b3bd7e4f6?s=128&d=identicon&r=PG&f=1", "display_name": "does_it_matter", "link": "https://stackoverflow.com/users/5318252/does-it-matter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 32486876, "answer_count": 3, "score": -3, "last_activity_date": 1445190814, "creation_date": 1441822513, "last_edit_date": 1445190814, "question_id": 32486578, "link": "https://stackoverflow.com/questions/32486578/why-the-output-of-the-following-code-is-7-00649e-45", "title": "Why the output of the following code is 7.00649e-45?", "body": "<p>Is it a garbage value?\nEven in garbage values I have never seen exponents before.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    short s=5;\n    float f= * (float*)&amp;s;\n    cout&lt;&lt; f &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>Edit:Now I understood that it's one of those few cases where you must know Computer architecture i.e. what's actually happening at memory level.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1441821827, "post_id": 32486346, "comment_id": 52833522, "body": "When posting questions about errors, please include (in the question body) the <i>complete</i> and <i>unedited</i> error output, also indicate where in the in the included source the error(s) are, e.g. by a comment, I suggest you  please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 3, "creation_date": 1441822432, "post_id": 32486346, "comment_id": 52833820, "body": "amazing how many books with poor C++ programs are around <i>and</i> still read."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441824499, "post_id": 32486346, "comment_id": 52834866, "body": "What edition is your book and what page/chapter is the code in?"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 6, "last_activity_date": 1441823734, "last_edit_date": 1441823734, "creation_date": 1441821704, "answer_id": 32486370, "question_id": 32486346, "link": "https://stackoverflow.com/questions/32486346/getting-undeclared-identifier-in-code-copied-from-a-book/32486370#32486370", "title": "getting undeclared identifier in code copied from a book", "body": "<p>The scope of variables declared in for loops is limited to the for loop.  In order to use <code>op</code> outside the for loop you need to change it to</p>\n\n<pre><code>char op;\nfor (; cin &gt;&gt; op;)\n</code></pre>\n\n<p>But while we are changing things lets just make this a while loop</p>\n\n<pre><code>char op;\nwhile (cin &gt;&gt; op)\n</code></pre>\n\n<p>Some compilers allowed using variables declared in a for loop outside the for loop but that is not standard and it should not be relied on.  An easy way to tell if you have a non conforming compiler is to run</p>\n\n<pre><code>int main()\n{\n    for(int i = 0; i &lt; 0; i++) {}\n    i++;\n}\n</code></pre>\n\n<p>The <code>i++</code> should cause an error(<a href=\"http://coliru.stacked-crooked.com/a/cbaf94b3d793f7fb\" rel=\"nofollow\">example</a>).</p>\n"}], "owner": {"reputation": 31, "user_id": 5285394, "user_type": "registered", "profile_image": "https://graph.facebook.com/891849317571504/picture?type=large", "display_name": "Ali Khurram", "link": "https://stackoverflow.com/users/5285394/ali-khurram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1441823734, "creation_date": 1441821600, "last_edit_date": 1441822219, "question_id": 32486346, "link": "https://stackoverflow.com/questions/32486346/getting-undeclared-identifier-in-code-copied-from-a-book", "title": "getting undeclared identifier in code copied from a book", "body": "<p>Well I think the below program is okay but it is giving following error </p>\n\n<blockquote>\n  <p>op: undeclared identifier </p>\n</blockquote>\n\n<p>I just cant understand why this is happening because it is the same exact code I copied it from \"programming principles and practice using c++\".</p>\n\n<pre><code>#include \"../../std_lib_facilities.h\"\n\nusing namespace std;\n\nint main()\n\n{\n    cout &lt;&lt; \"Please enter an expression. We can handle +,-,* and /\" &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Add an x to end expression\" &lt;&lt; \"\\n\";\n\n    int lval = 0;\n    int rval;\n\n    cin &gt;&gt; lval;\n    if (!cin) error(\"No first operand\");\n    for (char op; cin &gt;&gt; op;)\n        if (op != 'x') cin &gt;&gt; rval;\n    if (!cin) error(\"No second operand\");\n\n    switch (op) {\n\n    case'+':\n        lval += rval;\n        break;\n\n    case'-':\n        lval -= rval;\n        break;\n\n    case'*':\n        lval *= rval;\n        break;\n\n    case'/':\n        lval /= rval;\n        break;\n\n    default:\n\n        cout &lt;&lt; \"Result: \" &lt;&lt; lval &lt;&lt; '\\n';\n        keep_window_open();\n        return 0;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "serial-port", "blocking"], "comments": [{"owner": {"reputation": 329, "user_id": 1542938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca16532fc154a479c70dada5415fabb?s=128&d=identicon&r=PG", "display_name": "MuchToLearn", "link": "https://stackoverflow.com/users/1542938/muchtolearn"}, "edited": false, "score": 0, "creation_date": 1506987380, "post_id": 32486198, "comment_id": 80024960, "body": "Without knowing what the Serial class is, your original question of why it was ignoring the rest of the file cannot be answered. However, note that in linux serial port devices do not behave like sockets with regard to non-blocking IO, so this might be why. (You basically can&#39;t use non-blocking I/O with serial ports, that&#39;s why the official QSerialPort class, which was added in Qt 5.1, simulates async communication with a thread.)"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 2611661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492b8a19d01b817e871b87783a81b88?s=128&d=identicon&r=PG", "display_name": "silversircel", "link": "https://stackoverflow.com/users/2611661/silversircel"}, "edited": false, "score": 0, "creation_date": 1441827011, "post_id": 32487341, "comment_id": 52836071, "body": "While testing the program I use two virtual com ports. One connected to the app and the other one to realterm. I send files via realterm to and check what the app does. If I connect the readLine code directly to the readyRead() signal the eventloop has no chance to update events, since I only rotate inside waitForKeyword(). Is there a way to force the eventloop to update? If so how do I implement that in my functions?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 135, "user_id": 2611661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492b8a19d01b817e871b87783a81b88?s=128&d=identicon&r=PG", "display_name": "silversircel", "link": "https://stackoverflow.com/users/2611661/silversircel"}, "edited": false, "score": 1, "creation_date": 1441829572, "post_id": 32487341, "comment_id": 52837303, "body": "@silversircel Do not write pseudo-synchronous code. You should not be using any <code>waitForXxxx</code> methods at all. None. Forget that they exist, and think of how to solve it then. All you can do and need to do then is to connect to the <code>readyRead</code> signal. And it will all work, since you don&#39;t block anymore with <code>wait</code> method calls."}, {"owner": {"reputation": 135, "user_id": 2611661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492b8a19d01b817e871b87783a81b88?s=128&d=identicon&r=PG", "display_name": "silversircel", "link": "https://stackoverflow.com/users/2611661/silversircel"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441830634, "post_id": 32487341, "comment_id": 52837797, "body": "@KubaOber But how do i wait if everything is asynchronous? Thats exactly the the point I\u2019m having trouble with. If I send a command and receive an response, which leads to an slot. Should I check for each possible keyword in a big switch case and decide what to do next? There has to be some kind of design pattern. I need something like a state machine \u2026 do step1 then do step 2 then \u2026 How do I implement something like that with signals and slots?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 135, "user_id": 2611661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492b8a19d01b817e871b87783a81b88?s=128&d=identicon&r=PG", "display_name": "silversircel", "link": "https://stackoverflow.com/users/2611661/silversircel"}, "edited": false, "score": 0, "creation_date": 1441835501, "post_id": 32487341, "comment_id": 52840039, "body": "@silversircel Bingo. <code>QStateMachine</code>. I wanted you to realize that that&#39;s what you need :)"}], "tags": [], "owner": {"reputation": 2689, "user_id": 5257515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e1VeT.png?s=128&g=1", "display_name": "jbm", "link": "https://stackoverflow.com/users/5257515/jbm"}, "is_accepted": false, "score": 1, "last_activity_date": 1441825456, "creation_date": 1441825456, "answer_id": 32487341, "question_id": 32486198, "link": "https://stackoverflow.com/questions/32486198/sending-a-sequence-of-commands-and-wait-for-response/32487341#32487341", "title": "Sending a sequence of commands and wait for response", "body": "<p>I'm not sure indeed this is the right approach.</p>\n\n<p>You're polling with <code>waitForReadyRead()</code>. But since the serial port is a <code>QIODevice</code>, it will emit a void <code>QIODevice::readyRead()</code> signal when something will arrive on the serial port. Why not connect this signal to your input parsing code? No need for <code>waitForReadyRead()</code>.</p>\n\n<p>Also/on the other hand: \"...this time it doesn't wait for timeout, readLines just return false immediately. Whats wrong ?\"</p>\n\n<p>Quoting the documentation:</p>\n\n<blockquote>\n  <p>If waitForReadyRead() returns false, <strong>the connection has been\n  closed</strong> or an error has occurred.</p>\n</blockquote>\n\n<p>(emphasis mine)\nFrom my experience as an embedded developer, it is not impossible that you put the device into kind of a \"firmware upgrade\" mode, and that by doing so the device rebooted into a special boot mode (not running the firmware you're about to update) and thus closed the connection. No way to tell unless it's documented/you have contact with the device developers. Not so obvious to check using a serial terminal to type your commands and witness that, I use <code>minicom</code> daily connected to my devices and it's pretty resilient across reboot - good for me.</p>\n"}, {"comments": [{"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 2, "creation_date": 1472249902, "post_id": 32595398, "comment_id": 65692924, "body": "This should be 100+ answer, I couldn&#39;t stop myself from commenting :)"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 19, "last_activity_date": 1484056818, "last_edit_date": 1484056818, "creation_date": 1442350333, "answer_id": 32595398, "question_id": 32486198, "link": "https://stackoverflow.com/questions/32486198/sending-a-sequence-of-commands-and-wait-for-response/32595398#32595398", "title": "Sending a sequence of commands and wait for response", "body": "<p>Let's use <code>QStateMachine</code> to make this simple. Let's recall how you wished such code would look:</p>\n\n<pre><code>Serial-&gt;write(\u201cboot\u201d, 1000);\nSerial-&gt;waitForKeyword(\u201cboot successful\u201d);\nSerial-&gt;sendFile(\u201cimage.dat\u201d);\n</code></pre>\n\n<p>Let's put it in a class that has explicit state members for each state the programmer could be in. We'll also have action generators <code>send</code>, <code>expect</code>, etc. that attach given actions to states.</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/comm-commands-32486198\n#include &lt;QtWidgets&gt;\n#include &lt;private/qringbuffer_p.h&gt;\n#include &lt;type_traits&gt;\n\n[...]\n\nclass Programmer : public StatefulObject {\n   Q_OBJECT\n   AppPipe m_port { nullptr, QIODevice::ReadWrite, this };\n   State      s_boot   { &amp;m_mach, \"s_boot\" },\n              s_send   { &amp;m_mach, \"s_send\" };\n   FinalState s_ok     { &amp;m_mach, \"s_ok\" },\n              s_failed { &amp;m_mach, \"s_failed\" };\npublic:\n   Programmer(QObject * parent = 0) : StatefulObject(parent) {\n      connectSignals();\n      m_mach.setInitialState(&amp;s_boot);\n      send  (&amp;s_boot, &amp;m_port, \"boot\\n\");\n      expect(&amp;s_boot, &amp;m_port, \"boot successful\", &amp;s_send, 1000, &amp;s_failed);\n      send  (&amp;s_send, &amp;m_port, \":HULLOTHERE\\n:00000001FF\\n\");\n      expect(&amp;s_send, &amp;m_port, \"load successful\", &amp;s_ok, 1000, &amp;s_failed);\n   }\n   AppPipe &amp; pipe() { return m_port; }\n};\n</code></pre>\n\n<p>This is fully functional, complete code for the programmer! Completely asynchronous, non-blocking, and it handles timeouts, too.</p>\n\n<p>It's possible to have infrastructure that generates the states on-the-fly, so that you don't have to manually create all the states. The code is much smaller and IMHO easier to comperehend if you have explicit states. Only for complex communication protocols with 50-100+ states would it make sense to get rid of explicit named states.</p>\n\n<p>The <code>AppPipe</code> is a simple intra-process bidirectional pipe that can be used as a stand-in for a real serial port:</p>\n\n<pre><code>// See http://stackoverflow.com/a/32317276/1329652\n/// A simple point-to-point intra-process pipe. The other endpoint can live in any\n/// thread.\nclass AppPipe : public QIODevice {\n  [...]\n};\n</code></pre>\n\n<p>The <code>StatefulObject</code> holds a state machine, some basic signals useful for monitoring the state machine's progress, and the <code>connectSignals</code> method used to connect the signals with the states:</p>\n\n<pre><code>class StatefulObject : public QObject {\n   Q_OBJECT\n   Q_PROPERTY (bool running READ isRunning NOTIFY runningChanged)\nprotected:\n   QStateMachine m_mach  { this };\n   StatefulObject(QObject * parent = 0) : QObject(parent) {}\n   void connectSignals() {\n      connect(&amp;m_mach, &amp;QStateMachine::runningChanged, this, &amp;StatefulObject::runningChanged);\n      for (auto state : m_mach.findChildren&lt;QAbstractState*&gt;())\n         QObject::connect(state, &amp;QState::entered, this, [this, state]{\n            emit stateChanged(state-&gt;objectName());\n         });\n   }\npublic:\n   Q_SLOT void start() { m_mach.start(); }\n   Q_SIGNAL void runningChanged(bool);\n   Q_SIGNAL void stateChanged(const QString &amp;);\n   bool isRunning() const { return m_mach.isRunning(); }\n};\n</code></pre>\n\n<p>The <code>State</code> and <code>FinalState</code> are simple named state wrappers in the style of Qt 3. They allow us to declare the state and give it a name in one go.</p>\n\n<pre><code>template &lt;class S&gt; struct NamedState : S {\n   NamedState(QState * parent, const char * name) : S(parent) {\n      this-&gt;setObjectName(QLatin1String(name));\n   }\n};\ntypedef NamedState&lt;QState&gt; State;\ntypedef NamedState&lt;QFinalState&gt; FinalState;\n</code></pre>\n\n<p>The action generators are quite simple, too. The meaning of an action generator is \"do something when a given state is entered\". The state to act on is always given as the first argument. The second and subsequent arguments are specific to the given action. Sometimes, an action might need a target state as well, e.g. if it succeeds or fails.</p>\n\n<pre><code>void send(QAbstractState * src, QIODevice * dev, const QByteArray &amp; data) {\n   QObject::connect(src, &amp;QState::entered, dev, [dev, data]{\n      dev-&gt;write(data);\n   });\n}\n\nQTimer * delay(QState * src, int ms, QAbstractState * dst) {\n   auto timer = new QTimer(src);\n   timer-&gt;setSingleShot(true);\n   timer-&gt;setInterval(ms);\n   QObject::connect(src, &amp;QState::entered, timer, static_cast&lt;void (QTimer::*)()&gt;(&amp;QTimer::start));\n   QObject::connect(src, &amp;QState::exited,  timer, &amp;QTimer::stop);\n   src-&gt;addTransition(timer, SIGNAL(timeout()), dst);\n   return timer;\n}\n\nvoid expect(QState * src, QIODevice * dev, const QByteArray &amp; data, QAbstractState * dst,\n            int timeout = 0, QAbstractState * dstTimeout = nullptr)\n{\n   addTransition(src, dst, dev, SIGNAL(readyRead()), [dev, data]{\n      return hasLine(dev, data);\n   });\n   if (timeout) delay(src, timeout, dstTimeout);\n}\n</code></pre>\n\n<p>The <code>hasLine</code> test simply checks all lines that can be read from the device for a given needle. This works fine for this simple communications protocol. You'd need more complex machinery if your communications were more involved. It is necessary to read all the lines, even if you find your needle. That's because this test is invoked from the <code>readyRead</code> signal, and in that signal you must read all the data that fulfills a chosen criterion. Here, the criterion is that the data forms a full line.</p>\n\n<pre><code>static bool hasLine(QIODevice * dev, const QByteArray &amp; needle) {\n   auto result = false;\n   while (dev-&gt;canReadLine()) {\n      auto line = dev-&gt;readLine();\n      if (line.contains(needle)) result = true;\n   }\n   return result;\n}\n</code></pre>\n\n<p>Adding guarded transitions to states is a bit cumbersome with the default API, so we will wrap it to make it easier to use, and to keep the action generators above readable:</p>\n\n<pre><code>template &lt;typename F&gt;\nclass GuardedSignalTransition : public QSignalTransition {\n   F m_guard;\nprotected:\n   bool eventTest(QEvent * ev) Q_DECL_OVERRIDE {\n      return QSignalTransition::eventTest(ev) &amp;&amp; m_guard();\n   }\npublic:\n   GuardedSignalTransition(const QObject * sender, const char * signal, F &amp;&amp; guard) :\n      QSignalTransition(sender, signal), m_guard(std::move(guard)) {}\n   GuardedSignalTransition(const QObject * sender, const char * signal, const F &amp; guard) :\n      QSignalTransition(sender, signal), m_guard(guard) {}\n};\n\ntemplate &lt;typename F&gt; static GuardedSignalTransition&lt;F&gt; *\naddTransition(QState * src, QAbstractState *target,\n              const QObject * sender, const char * signal, F &amp;&amp; guard) {\n   auto t = new GuardedSignalTransition&lt;typename std::decay&lt;F&gt;::type&gt;\n         (sender, signal, std::forward&lt;F&gt;(guard));\n   t-&gt;setTargetState(target);\n   src-&gt;addTransition(t);\n   return t;\n}\n</code></pre>\n\n<p>That's about it - if you had a real device, that's all you need. Since I don't have your device, I'll create another <code>StatefulObject</code> to emulate the presumed device behavior:</p>\n\n<pre><code>class Device : public StatefulObject {\n   Q_OBJECT\n   AppPipe m_dev { nullptr, QIODevice::ReadWrite, this };\n   State      s_init     { &amp;m_mach, \"s_init\" },\n              s_booting  { &amp;m_mach, \"s_booting\" },\n              s_firmware { &amp;m_mach, \"s_firmware\" };\n   FinalState s_loaded   { &amp;m_mach, \"s_loaded\" };\npublic:\n   Device(QObject * parent = 0) : StatefulObject(parent) {\n      connectSignals();\n      m_mach.setInitialState(&amp;s_init);\n      expect(&amp;s_init, &amp;m_dev, \"boot\", &amp;s_booting);\n      delay (&amp;s_booting, 500, &amp;s_firmware);\n      send  (&amp;s_firmware, &amp;m_dev, \"boot successful\\n\");\n      expect(&amp;s_firmware, &amp;m_dev, \":00000001FF\", &amp;s_loaded);\n      send  (&amp;s_loaded,   &amp;m_dev, \"load successful\\n\");\n   }\n   Q_SLOT void stop() { m_mach.stop(); }\n   AppPipe &amp; pipe() { return m_dev; }\n};\n</code></pre>\n\n<p>Now let's make it all nicely visualized. We'll have a window with a text browser showing the contents of the communications. Below it will be buttons to start/stop the programmer or the device, and labels indicating the state of the emulated device and the programmer:</p>\n\n<p><img src=\"https://i.stack.imgur.com/S4l9U.png\" alt=\"screenshot\"></p>\n\n<pre><code>int main(int argc, char ** argv) {\n   using Q = QObject;\n   QApplication app{argc, argv};\n   Device dev;\n   Programmer prog;\n\n   QWidget w;\n   QGridLayout grid{&amp;w};\n   QTextBrowser comms;\n   QPushButton devStart{\"Start Device\"}, devStop{\"Stop Device\"},\n               progStart{\"Start Programmer\"};\n   QLabel devState, progState;\n   grid.addWidget(&amp;comms, 0, 0, 1, 3);\n   grid.addWidget(&amp;devState, 1, 0, 1, 2);\n   grid.addWidget(&amp;progState, 1, 2);\n   grid.addWidget(&amp;devStart, 2, 0);\n   grid.addWidget(&amp;devStop, 2, 1);\n   grid.addWidget(&amp;progStart, 2, 2);\n   devStop.setDisabled(true);\n   w.show();\n</code></pre>\n\n<p>We'll connect the device's and programmer's <code>AppPipe</code>s. We'll also visualize what the programmer is sending and receiving:</p>\n\n<pre><code>   dev.pipe().addOther(&amp;prog.pipe());\n   prog.pipe().addOther(&amp;dev.pipe());\n   Q::connect(&amp;prog.pipe(), &amp;AppPipe::hasOutgoing, &amp;comms, [&amp;](const QByteArray &amp; data){\n      comms.append(formatData(\"&amp;gt;\", \"blue\", data));\n   });\n   Q::connect(&amp;prog.pipe(), &amp;AppPipe::hasIncoming, &amp;comms, [&amp;](const QByteArray &amp; data){\n      comms.append(formatData(\"&amp;lt;\", \"green\", data));\n   });\n</code></pre>\n\n<p>Finally, we'll connect the buttons and labels:</p>\n\n<pre><code>   Q::connect(&amp;devStart, &amp;QPushButton::clicked, &amp;dev, &amp;Device::start);\n   Q::connect(&amp;devStop, &amp;QPushButton::clicked, &amp;dev, &amp;Device::stop);\n   Q::connect(&amp;dev, &amp;Device::runningChanged, &amp;devStart, &amp;QPushButton::setDisabled);\n   Q::connect(&amp;dev, &amp;Device::runningChanged, &amp;devStop, &amp;QPushButton::setEnabled);\n   Q::connect(&amp;dev, &amp;Device::stateChanged, &amp;devState, &amp;QLabel::setText);\n   Q::connect(&amp;progStart, &amp;QPushButton::clicked, &amp;prog, &amp;Programmer::start);\n   Q::connect(&amp;prog, &amp;Programmer::runningChanged, &amp;progStart, &amp;QPushButton::setDisabled);\n   Q::connect(&amp;prog, &amp;Programmer::stateChanged, &amp;progState, &amp;QLabel::setText);\n   return app.exec();\n}\n\n#include \"main.moc\"\n</code></pre>\n\n<p>The <code>Programmer</code> and <code>Device</code> could live in any thread. I've left them in the main thread since there's no reason to move them out, but you could put both into a dedicated thread, or each into its own thread, or into threads shared with other objects, etc. It's completely transparent since <code>AppPipe</code> supports communications across the threads. This would also be the case if <code>QSerialPort</code> was used instead of <code>AppPipe</code>. All that matters is that each instance of a <code>QIODevice</code> is used from one thread only. Everything else happens via signal/slot connections.</p>\n\n<p>E.g. if you wanted the <code>Programmer</code> to live in a dedicated thread, you'd add the following somewhere in <code>main</code>:</p>\n\n<pre><code>  // fix QThread brokenness\n  struct Thread : QThread { ~Thread() { quit(); wait(); } };\n\n  Thread progThread;\n  prog.moveToThread(&amp;progThread);\n  progThread.start();\n</code></pre>\n\n<p>A little helper formats the data to make it easier to read:</p>\n\n<pre><code>static QString formatData(const char * prefix, const char * color, const QByteArray &amp; data) {\n   auto text = QString::fromLatin1(data).toHtmlEscaped();\n   if (text.endsWith('\\n')) text.truncate(text.size() - 1);\n   text.replace(QLatin1Char('\\n'), QString::fromLatin1(\"&lt;br/&gt;%1 \").arg(QLatin1String(prefix)));\n   return QString::fromLatin1(\"&lt;font color=\\\"%1\\\"&gt;%2 %3&lt;/font&gt;&lt;br/&gt;\")\n         .arg(QLatin1String(color)).arg(QLatin1String(prefix)).arg(text);\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 2611661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1492b8a19d01b817e871b87783a81b88?s=128&d=identicon&r=PG", "display_name": "silversircel", "link": "https://stackoverflow.com/users/2611661/silversircel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4832, "favorite_count": 9, "accepted_answer_id": 32595398, "answer_count": 2, "score": 8, "last_activity_date": 1484056818, "creation_date": 1441821046, "last_edit_date": 1441831047, "question_id": 32486198, "link": "https://stackoverflow.com/questions/32486198/sending-a-sequence-of-commands-and-wait-for-response", "title": "Sending a sequence of commands and wait for response", "body": "<p>I have to update firmware and settings on a device connected to a serial port.\nSince this is done by a sequence of commands, I send a command and wait until I recive an answer. Inside the answere (many lines) I search for a string that indicates if the operation is finished successfully.</p>\n\n<pre><code>Serial-&gt;write(\u201cboot\u201d, 1000);\nSerial-&gt;waitForKeyword(\u201cboot successful\u201d);\nSerial-&gt;sendFile(\u201cimage.dat\u201d);\n\u2026\n</code></pre>\n\n<p>So I\u2019ve created a new Thread for this blocking read/write method. Inside the thread I make use of the waitForX() functions.\nIf I call watiForKeyword() it will call readLines() until it detects the keyword or timesout</p>\n\n<pre><code>bool waitForKeyword(const QString &amp;keyword)\n{\n    QString str;\n\n    // read all lines\n    while(serial-&gt;readLines(10000))\n    {\n        // check each line\n        while((str = serial-&gt;getLine()) != \"\")\n        {\n            // found!\n            if(str.contains(keyword))\n                return true;\n        }\n    }\n    // timeout\n    return false;\n}\n</code></pre>\n\n<p>readLines() reads everything available and separates it into lines , each line is placed inside a QStringList and to get a string I call getLine() which returns the first string in the list and deletes it.</p>\n\n<pre><code>bool SerialPort::readLines(int waitTimeout)\n{\nif(!waitForReadyRead(waitTimeout))\n{\n    qDebug() &lt;&lt; \"Timeout reading\" &lt;&lt; endl;\n    return false;\n}\n\nQByteArray data = readAll();\nwhile (waitForReadyRead(100))\n    data += readAll();\n\nchar* begin = data.data();\nchar* ptr = strstr(data, \"\\r\\n\");\n\nwhile(ptr != NULL)\n{\n    ptr+=2;\n    buffer.append(begin, ptr - begin);\n    emit readyReadLine(buffer);\n    lineBuffer.append(QString(buffer)); // store line in Qstringlist\n    buffer.clear();\n\n    begin = ptr;\n    ptr = strstr(begin, \"\\r\\n\");\n}\n// rest\nbuffer.append(begin, -1);\nreturn true;\n}\n</code></pre>\n\n<p>The problem is if I send a file via terminal to test the app readLines() will only read a smale part of the file ( 5 Lines or so). Since these lines do not contain the keyword. the function will run once again, but this time it dosnt wait for timeout, readLines just return false immediately.\nWhats wrong ? \nAlso I'm not shure if this is the right approach... Does anyone know how to send a sequenze of commands and wait for a response each time?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1441821123, "post_id": 32486171, "comment_id": 52833158, "body": "<code>while( getline(inFile, line) )</code> ate the entire file. Either rewind or close and reopen before <code>while (inFile &gt;&gt; words)</code>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1441821126, "post_id": 32486171, "comment_id": 52833161, "body": "You would need to either 1. close and re-open the file 2. use <code>stringstream</code> to find how many words in each line."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1441821299, "post_id": 32486171, "comment_id": 52833247, "body": "Using <code>stringstream</code> to get the words per line is probably more useful in the long run."}, {"owner": {"reputation": 87, "user_id": 5290271, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9d178b0ea4fa70d55144572c56b1e4e?s=128&d=identicon&r=PG&f=1", "display_name": "BMG", "link": "https://stackoverflow.com/users/5290271/bmg"}, "edited": false, "score": 0, "creation_date": 1441821439, "post_id": 32486171, "comment_id": 52833326, "body": "Thank you, and especially for the fast answer!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441821449, "post_id": 32486171, "comment_id": 52833334, "body": "@BMG <i>&quot;May I ask, which one is &quot;prettier&quot;?&quot;</i> You may not, because of <i>&quot;<b>Primarily opinion-based</b> Many good questions generate some degree of opinion based on expert experience, but answers to this question will tend to be almost entirely based on opinions, rather than facts, references, or specific expertise.&quot;</i>"}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 2, "creation_date": 1441821552, "post_id": 32486171, "comment_id": 52833396, "body": "An instructor that actually teaches modern and correct C++?! Blasphemy!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1441822105, "post_id": 32486171, "comment_id": 52833660, "body": "@Casey Agreed:  <a href=\"http://dev-jungle.blogspot.de/2015/02/software-development-in-wild-i-have.html\" rel=\"nofollow noreferrer\">dev-jungle.blogspot.de/2015/02/&hellip;</a>"}, {"owner": {"reputation": 87, "user_id": 5290271, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9d178b0ea4fa70d55144572c56b1e4e?s=128&d=identicon&r=PG&f=1", "display_name": "BMG", "link": "https://stackoverflow.com/users/5290271/bmg"}, "edited": false, "score": 0, "creation_date": 1441822153, "post_id": 32486171, "comment_id": 52833683, "body": "I&#39;m sorry, I don&#39;t know if you are mocking me or not, but I used the inFile.seekg and it worked so thanks again :)"}, {"owner": {"reputation": 87, "user_id": 5290271, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9d178b0ea4fa70d55144572c56b1e4e?s=128&d=identicon&r=PG&f=1", "display_name": "BMG", "link": "https://stackoverflow.com/users/5290271/bmg"}, "edited": false, "score": 0, "creation_date": 1441823118, "post_id": 32486171, "comment_id": 52834167, "body": "Ok thank you for clearing that up. I am totally new to this and I&#39;m trying my best to learn and I use stackoverflow a lot to learn. Though its sometimes difficult since english is not my first language and I don&#39;t understand some technical words."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1441823132, "post_id": 32486171, "comment_id": 52834172, "body": "@BMG I&#39;m not really sexist or gender biased, but asking for <i>&quot;which one is &quot;prettier&quot;?&quot;&quot;</i> is typically female behavior, and just obfuscated your primary problem. Sorry for saying that."}, {"owner": {"reputation": 87, "user_id": 5290271, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9d178b0ea4fa70d55144572c56b1e4e?s=128&d=identicon&r=PG&f=1", "display_name": "BMG", "link": "https://stackoverflow.com/users/5290271/bmg"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1441824013, "post_id": 32486171, "comment_id": 52834603, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 yes I realized that as soon as I pressed enter. I didn&#39;t know how to word it more eloquently."}], "answers": [{"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 1, "last_activity_date": 1441826082, "last_edit_date": 1441826082, "creation_date": 1441822939, "answer_id": 32486683, "question_id": 32486171, "link": "https://stackoverflow.com/questions/32486171/counting-lines-from-a-file-input/32486683#32486683", "title": "Counting lines from a file input?", "body": "<p>Here is one possible implementation (not tested) to use as a benchmark:</p>\n\n<pre><code>int main(){\n\n// print prompt message and read input\ncout &lt;&lt; \"Please enter the file name \" &lt;&lt; endl;\nstring fileName;\ngetline(cin,fileName);\n\n// create an input stream and attach it to the file to read\nifstream inFile;\ninFile.open(fileName.c_str());\n\n// define counters\nstring line;\nstring chars;\nint number_of_lines = 0;\nint number_of_chars = 0;\nvector&lt;string&gt; all_words;\n\ndo{\n    getline(inFile, line);\n    // count lines\n    number_of_lines++;\n    // count words\n    // separates the line into individual words, uses white space as separator\n    stringstream ss(line);\n    string word;\n    while(ss &gt;&gt; word){\n        all_words.push_back(word);\n    }\n}while(!inFile.eof())\n// count chars\n// length of each word\nfor (int i = 0; i &lt; all_words.size(); ++i){\n    number_of_chars += all_words[i].length(); \n}\n\n// print result\ncout &lt;&lt; \"Words: \" &lt;&lt; all_words.size() &lt;&lt;\"\" &lt;&lt; endl;\ncout &lt;&lt; \"Chars: \" &lt;&lt; number_of_chars &lt;&lt;\"\" &lt;&lt; endl;\ncout &lt;&lt; \"Lines: \" &lt;&lt; number_of_lines &lt;&lt;\"\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 2, "creation_date": 1441825942, "post_id": 32487411, "comment_id": 52835546, "body": "@simplicisveritatis Agreed. Ergo this answer."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1441825750, "creation_date": 1441825750, "answer_id": 32487411, "question_id": 32486171, "link": "https://stackoverflow.com/questions/32486171/counting-lines-from-a-file-input/32487411#32487411", "title": "Counting lines from a file input?", "body": "<p>And because Comments are often unread by answer seekers...</p>\n\n<pre><code>while( getline(inFile, line) ) \n</code></pre>\n\n<p>Reads through the entire file. When it's done <code>inFile</code>'s read location is set to the end of the file so the word counting loop</p>\n\n<pre><code>while (inFile &gt;&gt; words)\n</code></pre>\n\n<p>starts reading at the end of the file and finds nothing. The smallest change to the code to make it perform correctly is to use <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/seekg\" rel=\"nofollow\">seekg</a> rewind the file before counting the words.</p>\n\n<pre><code>inFile.seekg (0, inFile.beg);\nwhile (inFile &gt;&gt; words)\n</code></pre>\n\n<p>Positions the reading location to file offset 0 relative to the beginning of the file (specified by <code>inFile.beg</code>) and then reads through the file to count the words.</p>\n\n<p>While this works, it requires two complete reads through the file, which can be quite slow. A better option suggested by crashmstr in the comments and  implemented by simplicis veritatis as another answer requires one read of the file to get and count lines, and then an iteration through each line in RAM to count the number of words. </p>\n\n<p>This has the same number of total iterations, everything must be counted one by one, but reading from a buffer in memory is preferable to reading from disk due to significantly faster, orders of magnitude, access and response times.</p>\n"}], "owner": {"reputation": 87, "user_id": 5290271, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9d178b0ea4fa70d55144572c56b1e4e?s=128&d=identicon&r=PG&f=1", "display_name": "BMG", "link": "https://stackoverflow.com/users/5290271/bmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1700, "favorite_count": 0, "accepted_answer_id": 32487411, "answer_count": 2, "score": 2, "last_activity_date": 1441826082, "creation_date": 1441820952, "last_edit_date": 1441822646, "question_id": 32486171, "link": "https://stackoverflow.com/questions/32486171/counting-lines-from-a-file-input", "title": "Counting lines from a file input?", "body": "<p>The following code is supposed to count: the lines, the characters and the words read from a text file.</p>\n\n<p>Input text file:</p>\n\n<pre><code>This is a line.\n\nThis is another one.\n</code></pre>\n\n<p>The desired output is:</p>\n\n<pre><code>Words: 8\n\nChars: 36\n\nLines: 2\n</code></pre>\n\n<p>However, the word count comes out to 0 and if I change it then lines and characters come out to 0 and the word count is correct. I am getting this:</p>\n\n<pre><code>Words: 0\n\nChars: 36\n\nLines: 2\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\n\nint main()\n{\n    ifstream inFile;\n    string fileName;\n\n\n    cout &lt;&lt; \"Please enter the file name \" &lt;&lt; endl;\n    getline(cin,fileName);\n    inFile.open(fileName.c_str());\n\n    string line;\n    string chars;\n    int number_of_lines = 0;\n    int number_of_chars = 0;\n\nwhile( getline(inFile, line) )\n    {\n        number_of_lines++;\n        number_of_chars += line.length();\n    }\n\n    string words;\n    int number_of_words = 0;\n\nwhile (inFile &gt;&gt; words)\n    {\n        number_of_words++;\n    }\n\n    cout &lt;&lt; \"Words: \" &lt;&lt; number_of_words &lt;&lt;\"\" &lt;&lt; endl;\n    cout &lt;&lt; \"Chars: \" &lt;&lt; number_of_chars &lt;&lt;\"\" &lt;&lt; endl;\n    cout &lt;&lt; \"Lines: \" &lt;&lt; number_of_lines &lt;&lt;\"\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Any guidance would be greatly appreciated.</p>\n"}, {"tags": ["c++", "shared-libraries", "undefined-reference"], "comments": [{"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1442604833, "post_id": 32486060, "comment_id": 53165917, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 2406949, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/k7bdN.png?s=128&g=1", "display_name": "PookyFan", "link": "https://stackoverflow.com/users/2406949/pookyfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1441821465, "last_edit_date": 1495540342, "creation_date": 1441821465, "answer_id": 32486312, "question_id": 32486060, "link": "https://stackoverflow.com/questions/32486060/undefined-reference-in-c/32486312#32486312", "title": "undefined reference in c++", "body": "<p>What is that 'using' in libc-.h for?\nAnyway, it looks to me that you need to include this header in libc.cpp too. See <a href=\"https://stackoverflow.com/a/1380926/2406949\">https://stackoverflow.com/a/1380926/2406949</a></p>\n"}, {"tags": [], "owner": {"reputation": 14813, "user_id": 717898, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fca765c2ca8ea02f1897879ec60c4ab0?s=128&d=identicon&r=PG", "display_name": "Andrew Lazarus", "link": "https://stackoverflow.com/users/717898/andrew-lazarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1441821696, "creation_date": 1441821696, "answer_id": 32486368, "question_id": 32486060, "link": "https://stackoverflow.com/questions/32486060/undefined-reference-in-c/32486368#32486368", "title": "undefined reference in c++", "body": "<p>Don't you need <code>extern C</code> around the function definition? I bet the linker is trying to match the mangled c++ name with the unmangled C name.</p>\n\n<p>And note that you are using C++ features (<code>using</code>), so the check for <code>#ifdef cplusplus</code> is redundant. If it's false your compiles will be failing.</p>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 0, "last_activity_date": 1449718175, "last_edit_date": 1449718175, "creation_date": 1441822696, "answer_id": 32486632, "question_id": 32486060, "link": "https://stackoverflow.com/questions/32486060/undefined-reference-in-c/32486632#32486632", "title": "undefined reference in c++", "body": "<p>The reference to <code>plusplus()</code> is missing, because it's not provided. You are promising</p>\n\n<pre><code>`int plusplus(int a, int b);`\n</code></pre>\n\n<p>with <code>C</code> linkage in <code>libc-.h</code>, but are not keeping your promise in <code>libc.cpp</code>.\nTo fix the problem, change the latter file to</p>\n\n<pre><code>// libc.cpp\n#include &lt;iostream&gt;\n#include \"libc-.h\"   // include proto-type which has C linkage\n\nint plusplus(int a, int b)\n{\n  return a + b;\n}\n</code></pre>\n\n<p>Also, you should <strong>never</strong> do <code>using namespace std;</code> in a header file.</p>\n"}], "owner": {"reputation": 1, "user_id": 5318167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Ef4EHcKwWo/AAAAAAAAAAI/AAAAAAAACcU/-W1mo-oWx10/photo.jpg?sz=128", "display_name": "David K.", "link": "https://stackoverflow.com/users/5318167/david-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1449718175, "creation_date": 1441820508, "last_edit_date": 1441822110, "question_id": 32486060, "link": "https://stackoverflow.com/questions/32486060/undefined-reference-in-c", "title": "undefined reference in c++", "body": "<p>This is the error I have been getting.</p>\n\n<pre><code>-bash-4.1$ g++ strl.cpp -o -lc-\n/tmp/ccRpiglh.o: In function `main':\nstrl.cpp:(.text+0xf): undefined reference to `plusplus'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>Hear is the source code for strl.cpp. This is a simple example that duplicates my problem.</p>\n\n<pre><code>strl.cpp\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include \"libc-.h\"\n\nusing namespace std;\n\nint main()\n{\n  cout&lt;&lt;plusplus(5,2)&lt;&lt;'\\n';\n}\n</code></pre>\n\n<p>Here is the source for libc.cpp</p>\n\n<pre><code>libc.cpp\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint plusplus(int a, int b)\n{\n  return a + b;\n}\n</code></pre>\n\n<p>Source for libc-.h</p>\n\n<pre><code>libc-.h \n#ifndef _SCANTYPE_H_\n#define _SCANTYPE_H_\n\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\n#ifdef __cplusplus\nextern \"C\"\n{\n#endif\n\n  using namespace std;\n\n  int plusplus(int a, int b);\n\n#ifdef __cplusplus\n}\n#endif \n\n#endif\n</code></pre>\n\n<p>I am compiling with the following:</p>\n\n<pre><code>g++ -Wall -shared -fPIC -o libc-.so libc-.cpp\ng++ strl.cpp -o -lc-\n</code></pre>\n\n<p><code>g++ -Wall -shared -fPIC -o libc-.so libc-.cpp</code> compiles without error.</p>\n\n<p>Why is function <code>plusplus</code> an undefined reference?</p>\n\n<p>Thanks for any insight as to what I am doing wrong. </p>\n"}, {"tags": ["c++", "math", "modular-arithmetic"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1441819666, "post_id": 32485750, "comment_id": 52832479, "body": "<a href=\"https://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"nofollow noreferrer\">Exponentiation by squaring</a> might be a useful starting point. It&#39;s not too hard to add modulus to the formula, if you observe that <code>(a**b)%c == ((a%c)**b)%c)</code>."}, {"owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 0, "creation_date": 1441819811, "post_id": 32485750, "comment_id": 52832546, "body": "Possible duplicate of <a href=\"http://math.stackexchange.com/questions/26722/calculating-ab-mod-c\">calculating a^b mod c</a>."}, {"owner": {"reputation": 2165, "user_id": 3427852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1390962419/picture?type=large", "display_name": "Abu Hanifa", "link": "https://stackoverflow.com/users/3427852/abu-hanifa"}, "edited": false, "score": 0, "creation_date": 1441819905, "post_id": 32485750, "comment_id": 52832598, "body": "I was trying ((a%m)*(b%m))%m but may be my approach is not right."}, {"owner": {"reputation": 2165, "user_id": 3427852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1390962419/picture?type=large", "display_name": "Abu Hanifa", "link": "https://stackoverflow.com/users/3427852/abu-hanifa"}, "reply_to_user": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 0, "creation_date": 1441820011, "post_id": 32485750, "comment_id": 52832646, "body": "@AndrewMorton may be I tried that approach isn&#39;t correct for this limit"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1441820241, "post_id": 32485750, "comment_id": 52832748, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/8496182/calculating-powa-b-mod-n\">Calculating pow(a,b) mod n</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1441820525, "post_id": 32485750, "comment_id": 52832882, "body": "<a href=\"http://stackoverflow.com/q/11272437/995714\">Calculating (a^b)%MOD</a>. For a and b that are 64 bits, use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/_005f_005fint128.html\" rel=\"nofollow noreferrer\"><code>__int128</code></a> for the intermediate multiplication. If it&#39;s not available, write your own 128-bit multiplication. Reference: <a href=\"http://stackoverflow.com/q/2566010/995714\">Fastest way to calculate a 128-bit integer modulo a 64-bit integer</a>, <a href=\"http://stackoverflow.com/q/8733178/995714\">Most accurate way to do a combined multiply-and-divide operation in 64-bit?</a>"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 1, "creation_date": 1441827711, "post_id": 32485750, "comment_id": 52836400, "body": "@AbuHanifa The approach ((a%m)^(b%m)%m fails because the exponent must be modulo&#39;ed by phi(m), where phi is Euler&#39;s totient function. If m is prime, then phi(m)=m-1 and you could reduce as ((a%m)^(b%(m-1)))%m."}, {"owner": {"reputation": 2165, "user_id": 3427852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1390962419/picture?type=large", "display_name": "Abu Hanifa", "link": "https://stackoverflow.com/users/3427852/abu-hanifa"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1441828071, "post_id": 32485750, "comment_id": 52836569, "body": "@NicoSchertler thanks for tips. very helpful"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505906785, "post_id": 32485750, "comment_id": 79602266, "body": "&quot;0 &lt;= a, b, c &lt;= 10^18&quot; certainly also needs <code>c &gt; 0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1441820370, "post_id": 32486007, "comment_id": 52832817, "body": "it doesn&#39;t work if a and b are both 64 bits, as <code>w*w</code> needs a 128-bit type to store"}], "tags": [], "owner": {"reputation": 170, "user_id": 3625245, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002491760564/picture?type=large", "display_name": "Kamil", "link": "https://stackoverflow.com/users/3625245/kamil"}, "is_accepted": false, "score": 0, "last_activity_date": 1441820661, "last_edit_date": 1441820661, "creation_date": 1441820320, "answer_id": 32486007, "question_id": 32485750, "link": "https://stackoverflow.com/questions/32485750/calculate-abc-where-0-a-b-c-1018/32486007#32486007", "title": "Calculate (a^b)%c where 0&lt;=a,b,c&lt;=10^18", "body": "<p>I use this code in c++:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>long long power(long long a, long long b, long long c)\n{\n    if (b==0)\n    {\n        return 1;\n    }\n\n    if (b % 2 == 0)\n    {\n        long long w = power(a, b/2, c);\n        return (w*w) % c;\n    }\n    else\n    {\n        int w = power(a, b-1, c);\n        return (a*w) % c;\n    }\n}\n</code></pre>\n\n<p>It has logarithmic complexity.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505907488, "post_id": 32487270, "comment_id": 79602776, "body": "Trouble with some corner cases: <code>bigMod(1, p, 1)</code> is 1 and should be 0.  Suggest <code>if(b == 1) return b%m;</code>  Similar for <code>if(p == 0 )return 1;</code> --&gt; <code>if(p == 0 )return 1%m;</code> to handle <code>m==1</code> and <code>if( p == 1)return b;</code> --&gt; <code>if( p == 1)return b%m;</code> to handle <code>b &gt;= m</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505908118, "post_id": 32487270, "comment_id": 79603151, "body": "I am quite certain <code>b  *  bigMod(b,p-1,m)</code> can readily overflow.  That aside, this code is very nice yet has some limitations: <code>(temp)+(temp)</code> can still overflow when <code>m &gt; ULLONG_MAX&#47;2</code>, yet that is beyond OP&#39;s <code>c &lt;= 10^18</code>."}], "tags": [], "owner": {"reputation": 170, "user_id": 3625245, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002491760564/picture?type=large", "display_name": "Kamil", "link": "https://stackoverflow.com/users/3625245/kamil"}, "is_accepted": false, "score": 2, "last_activity_date": 1441825143, "creation_date": 1441825143, "answer_id": 32487270, "question_id": 32485750, "link": "https://stackoverflow.com/questions/32485750/calculate-abc-where-0-a-b-c-1018/32487270#32487270", "title": "Calculate (a^b)%c where 0&lt;=a,b,c&lt;=10^18", "body": "<p>You have a problem with temp*temp (long long overflow). You can omit this problem using algorithm of fast mod power to multiply them mod m. Here You have working code:</p>\n\n<pre><code>unsigned long long bigMultiply(unsigned long long b,unsigned long long p, unsigned long long m)\n{\n  if(p == 0 )return b;\n  if(p%2 == 0)\n  {  \n     unsigned long long temp = bigMultiply(b,p/2ll,m);\n     return ((temp)+(temp))%m;\n  }\n  else\n    return (b  +  bigMultiply(b,p-1,m))%m;\n}    \nunsigned long long bigMod(unsigned long long b,unsigned long long p, unsigned long long m)\n{\n\n  if(b == 1)\n    return b;\n  if(p == 0 )return 1;\n  if( p == 1)return b;\n  if(p%2 == 0)\n  {  \n     unsigned ll temp = bigMod(b,p/2ll,m);\n     return bigMultiply(temp,temp,m);\n  }\n  else\n    return (b  *  bigMod(b,p-1,m))%m;\n}\n</code></pre>\n"}], "owner": {"reputation": 2165, "user_id": 3427852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1390962419/picture?type=large", "display_name": "Abu Hanifa", "link": "https://stackoverflow.com/users/3427852/abu-hanifa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1460919859, "creation_date": 1441819296, "last_edit_date": 1441826499, "question_id": 32485750, "link": "https://stackoverflow.com/questions/32485750/calculate-abc-where-0-a-b-c-1018", "title": "Calculate (a^b)%c where 0&lt;=a,b,c&lt;=10^18", "body": "<p>How can I calculate <code>(a ^ b) % c</code>, where <code>0 &lt;= a, b, c &lt;= 10^18</code>.\nHere, <code>(a ^ b)</code> means <code>a</code> to the power <code>b</code>, not <code>a xor b</code>.</p>\n\n<p>My current code for the problem is:</p>\n\n<pre><code>unsigned long long bigMod(unsigned long long b,\n                          unsigned long long p,\n                          unsigned long long m){\n    if(b == 1) return b;\n    if(p == 0) return 1;\n    if(p == 1) return b;\n\n    if(p % 2 == 0){  \n        unsigned long long temp = bigMod(b, p / 2ll, m);\n        return ((temp) * (temp) )% m;\n    }else return (b  *  bigMod(b, p-1, m)) % m;\n}\n</code></pre>\n\n<p>For this input:</p>\n\n<pre><code>a = 12345 b = 123456789 and c = 123456789012345\n</code></pre>\n\n<p>the expected output should be:</p>\n\n<pre><code>59212459031520\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441819386, "post_id": 32485734, "comment_id": 52832334, "body": "<i>&quot;What could be a possible reason for this ?&quot;</i>  Undefined behavior most probably. Wasn&#39;t able to spot it from your code sample."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441819495, "post_id": 32485734, "comment_id": 52832379, "body": "Why use C++ strings and then fixed size C arrays and macros? Use vectors which can be the required size and won&#39;t break for large inputs."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441819506, "post_id": 32485734, "comment_id": 52832387, "body": "Also seriously: <a href=\"http://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>!"}, {"owner": {"reputation": 5536, "user_id": 2790036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ecebc7804ecef8d6432d7cc056d99ea?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Singhal", "link": "https://stackoverflow.com/users/2790036/pratik-singhal"}, "edited": false, "score": 0, "creation_date": 1441819610, "post_id": 32485734, "comment_id": 52832447, "body": "Thanks for suggestion, but I mostly use bits/stdc++.h only in programming competitions where speed matters, not in actual programming projects."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441819830, "post_id": 32485734, "comment_id": 52832555, "body": "@ps06756 How does that improve speed actually?? It shouldn&#39;t matter, even not for compilation time needed. That&#39;s a myth, if it was stated somewhere."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 3, "creation_date": 1441819937, "post_id": 32485734, "comment_id": 52832609, "body": "...isn&#39;t <code>&amp;dp[MAX][MAX]</code> quite a bit farther than one past the end of the array? Isn&#39;t it a past-the-end pointer for the past-the-end array, not the past-the-end of the last array?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441819966, "post_id": 32485734, "comment_id": 52832625, "body": "@jaggedSpire That may indeed be the answer."}, {"owner": {"reputation": 5536, "user_id": 2790036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ecebc7804ecef8d6432d7cc056d99ea?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Singhal", "link": "https://stackoverflow.com/users/2790036/pratik-singhal"}, "edited": false, "score": 0, "creation_date": 1441819985, "post_id": 32485734, "comment_id": 52832633, "body": "No, recursion is not causing the stack to overflow, I have confirmed it by passing very small inputs to the function and I was not talking about compilation speed but typing speed, and not having to bother about which class is in which header file."}, {"owner": {"reputation": 24558, "user_id": 457237, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34f7425ea0a472d1493230c28204010a?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan Manjunath", "link": "https://stackoverflow.com/users/457237/pavan-manjunath"}, "edited": false, "score": 0, "creation_date": 1441820114, "post_id": 32485734, "comment_id": 52832692, "body": "Your program doesnt crash for me. Where are you running this? Environment? compiler?"}, {"owner": {"reputation": 5536, "user_id": 2790036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ecebc7804ecef8d6432d7cc056d99ea?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Singhal", "link": "https://stackoverflow.com/users/2790036/pratik-singhal"}, "edited": false, "score": 0, "creation_date": 1441820155, "post_id": 32485734, "comment_id": 52832710, "body": "I am running this using g++ 4.9.2 with flags -Wall and -g for debugging information"}, {"owner": {"reputation": 24558, "user_id": 457237, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34f7425ea0a472d1493230c28204010a?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan Manjunath", "link": "https://stackoverflow.com/users/457237/pavan-manjunath"}, "edited": false, "score": 0, "creation_date": 1441820263, "post_id": 32485734, "comment_id": 52832755, "body": "I am running on g++ 4.8.2 with/without -g3 flag. And it doesnt crash in both cases"}, {"owner": {"reputation": 5536, "user_id": 2790036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ecebc7804ecef8d6432d7cc056d99ea?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Singhal", "link": "https://stackoverflow.com/users/2790036/pratik-singhal"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441820264, "post_id": 32485734, "comment_id": 52832756, "body": "@jaggedSpire Indeed that is the problem, I should have used <code>&amp;dp[MAX-1][MAX]</code> . Please post it as an answer, so that I can accept it ."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441820461, "post_id": 32485734, "comment_id": 52832849, "body": "Technically I&#39;m not sure if it&#39;s correct to use <code>[]</code> with one past the last element. You may need to use a pointer instead."}], "answers": [{"tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 9, "last_activity_date": 1441820230, "creation_date": 1441820230, "answer_id": 32485982, "question_id": 32485734, "link": "https://stackoverflow.com/questions/32485734/segmentation-fault-when-using-stdfill/32485982#32485982", "title": "Segmentation fault when using std::fill", "body": "<pre><code>&amp;dp[MAX][MAX]\n</code></pre>\n\n<p>This references the past-the-end pointer of the past-the-end array. You want the past-the-end pointer of the last array, instead:</p>\n\n<pre><code>&amp;dp[MAX-1][MAX]\n</code></pre>\n\n<p>otherwise it's going to iterate over the past-the-end array, causing a segfault.</p>\n"}], "owner": {"reputation": 5536, "user_id": 2790036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ecebc7804ecef8d6432d7cc056d99ea?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Singhal", "link": "https://stackoverflow.com/users/2790036/pratik-singhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 32485982, "answer_count": 1, "score": 0, "last_activity_date": 1441820230, "creation_date": 1441819227, "last_edit_date": 1441820036, "question_id": 32485734, "link": "https://stackoverflow.com/questions/32485734/segmentation-fault-when-using-stdfill", "title": "Segmentation fault when using std::fill", "body": "<p>I am trying to run the following code, but it is giving me segmentation fault :- </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n#define MAX 1000\nint dp[MAX][MAX];\n\nstring s1, s2;\n\nint lcs(int i, int j)\n{\n    int val;\n    if ( i &lt; 0 || j &lt; 0)\n        return 0;\n    else if (dp[i][j] != -1)\n    {\n        return dp[i][j];\n    }\n    else\n    {\n        val =  max(lcs(i-1,j), lcs(i, j-1));\n        if ( s1[i] == s2[j])\n            val = max(lcs(i-1,j-1) + 1, val);\n    }\n    dp[i][j] = val;\n    return val;\n}\n\nint main()\n{\n    int tc;\n    scanf(\"%d\", &amp;tc);\n    while (tc--)\n    {\n        fill(&amp;dp[0][0], &amp;dp[MAX][MAX], 0);\n        cin&gt;&gt;s1;\n        cin&gt;&gt;s2;\n        printf(\"LCS = %d\\n\", lcs(s1.size()-1, s2.size()-1));\n    }\n    return (0);\n}\n</code></pre>\n\n<p>Now, it is giving me a segmentation fault, at the <code>printf</code> line in while loop. However, if I comment out the fill statement, then there is no segmentation error.<br>\nWhat could be a possible reason for this ? </p>\n"}, {"tags": ["c++", "macos", "opengl"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1441821812, "post_id": 32485608, "comment_id": 52833516, "body": "Since the actual texture storage is created via <code>glTexImage()</code>, it is unclear if your code creates a valid texture. The stoarge of <code>framebufferTextureID</code> is created in <code>setWindowSize()</code>, which is called during <code>Initialize()</code>, but the storage <code>imageTextureID</code> will only be created if <code>Frambuffer::resize()</code> is guaranteed to be called before you try to render, which might just not be the case. Also note that you are <i>not</i> using floating point textures. You use the internal format <code>GL_RGBA</code>, which is an normalized integer format with 8 bit per channel."}, {"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1441822485, "post_id": 32485608, "comment_id": 52833844, "body": "Is the text in the top-left corner part of the texture, or are you rendering that on top after drawing the textured quad?"}, {"owner": {"reputation": 219, "user_id": 288282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5809b4d4459ea4db869a49e1f754dcc?s=128&d=identicon&r=PG", "display_name": "mikoro", "link": "https://stackoverflow.com/users/288282/mikoro"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1441827225, "post_id": 32485608, "comment_id": 52836175, "body": "@derhass <code>resize</code> is quaranteed to be called. That internal format thing was a good catch, I&#39;ll try changing that. @reto yes the text is rendered after as another textured quad with freetype-gl. -- I was just wondering if this kind of rendering error is some known problem."}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 288282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5809b4d4459ea4db869a49e1f754dcc?s=128&d=identicon&r=PG", "display_name": "mikoro", "link": "https://stackoverflow.com/users/288282/mikoro"}, "edited": false, "score": 0, "creation_date": 1441895172, "post_id": 32492792, "comment_id": 52868440, "body": "I&#39;ve edited my question after testing this and many other things. Unfortunately nothing has fixed it yet."}], "tags": [], "owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "is_accepted": false, "score": 0, "last_activity_date": 1441856650, "creation_date": 1441856650, "answer_id": 32492792, "question_id": 32485608, "link": "https://stackoverflow.com/questions/32485608/opengl-texture-corruption-on-mac-os-x/32492792#32492792", "title": "OpenGL texture corruption on Mac OS X", "body": "<p>I'm not sure if this is the only problem in your code (if the problem is in your code at all), but there is definitely a problem with your mipmap generation. You have this sequence of calls:</p>\n\n<pre><code>glBindTexture(GL_TEXTURE_2D, framebufferTextureId);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (GLsizei)windowWidth, (GLsizei)windowHeight, 0, GL_RGBA, GL_FLOAT, 0);\nglGenerateMipmap(GL_TEXTURE_2D);\n</code></pre>\n\n<p><code>glGenerateMipmap()</code> is <strong>not</strong> a state setting call that specifies that you will want to have mipmaps generated once the texture is filled with data. What it does is generate mipmaps from the data in the texture <strong>at the time of the call</strong>. Since you just allocated the texture data in the previous call, and do not have data in the texture yet, <code>glGenerateMipmap()</code> will do nothing.</p>\n\n<p>Later, you use this texture:</p>\n\n<pre><code>glActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, framebufferTextureId);\n</code></pre>\n\n<p>At this point, the texture does not have mipmaps, even though the sampling mode is set to use mipmaps.</p>\n\n<p>What you need to do is generate mipmaps after the texture has been filled with data. You can remove the <code>glGenerateMipmap()</code> call from its current place in <code>setWindowSize()</code>, and for example move it just below the second coder fragment above:</p>\n\n<pre><code>glActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, framebufferTextureId);\n\nglGenerateMipmap(GL_TEXTURE_2D);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219, "user_id": 288282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5809b4d4459ea4db869a49e1f754dcc?s=128&d=identicon&r=PG", "display_name": "mikoro", "link": "https://stackoverflow.com/users/288282/mikoro"}, "is_accepted": true, "score": 0, "last_activity_date": 1442524697, "creation_date": 1442524697, "answer_id": 32640132, "question_id": 32485608, "link": "https://stackoverflow.com/questions/32485608/opengl-texture-corruption-on-mac-os-x/32640132#32640132", "title": "OpenGL texture corruption on Mac OS X", "body": "<p>Ok, I finally figured it out. The attribute locations inside the vertex shader were switched on Mac OS X. By just good luck it rendered something on the screen with texcoords as vertex positions and vice versa.</p>\n\n<p>I could have used <code>glBindAttribLocation</code> to fix it, but I updated the shaders to version 330 and used the <code>layout(location = 0)</code> attribute. That worked fine too.</p>\n"}], "owner": {"reputation": 219, "user_id": 288282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5809b4d4459ea4db869a49e1f754dcc?s=128&d=identicon&r=PG", "display_name": "mikoro", "link": "https://stackoverflow.com/users/288282/mikoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 2, "accepted_answer_id": 32640132, "answer_count": 2, "score": 0, "last_activity_date": 1442524697, "creation_date": 1441818766, "last_edit_date": 1441894881, "question_id": 32485608, "link": "https://stackoverflow.com/questions/32485608/opengl-texture-corruption-on-mac-os-x", "title": "OpenGL texture corruption on Mac OS X", "body": "<p>I have a program that runs fine on both Windows and Linux on many different machines. It doesn't work correctly on any mac I've tried (few different machines with OS X 10.9 and 10.10). The program basically just renders a textured quad on the screen. The texture format is floating point.</p>\n\n<p>It looks like this on Windows and Linux:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xzb0Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xzb0Z.png\" alt=\"windows\"></a></p>\n\n<p>This is what it looks like on Mac:</p>\n\n<p><a href=\"https://i.stack.imgur.com/b1kbg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b1kbg.png\" alt=\"mac\"></a></p>\n\n<p>So the texture data gets to the GPU but gets weirdly distorted. Texture wrap mode is set to clamp and you can see how it behaves from the picture. </p>\n\n<p>Here's the minimal drawing code:</p>\n\n<pre><code>void Framebuffer::initialize()\n{\n    Settings&amp; settings = App::getSettings();\n\n    glGenTextures(1, &amp;imageTextureId);\n    glBindTexture(GL_TEXTURE_2D, imageTextureId);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n\n    resampleProgramId = GLHelper::buildProgram(settings.framebuffer.resampleVertexShader, settings.framebuffer.resampleFragmentShader);\n\n    resampleTextureUniformId = glGetUniformLocation(resampleProgramId, \"texture0\");\n    resampleTextureWidthUniformId = glGetUniformLocation(resampleProgramId, \"textureWidth\");\n    resampleTextureHeightUniformId = glGetUniformLocation(resampleProgramId, \"textureHeight\");\n    resampleTexelWidthUniformId = glGetUniformLocation(resampleProgramId, \"texelWidth\");\n    resampleTexelHeightUniformId = glGetUniformLocation(resampleProgramId, \"texelHeight\");\n\n    const GLfloat vertexData[] = {\n        -1.0f, -1.0f, 0.0f, 0.0f,\n        1.0f, -1.0f, 1.0f, 0.0f,\n        1.0f, 1.0f, 1.0f, 1.0f,\n        -1.0f, -1.0f, 0.0f, 0.0f,\n        1.0f, 1.0f, 1.0f, 1.0f,\n        -1.0f, 1.0f, 0.0f, 1.0f,\n    };\n\n    glGenBuffers(1, &amp;vertexBufferId);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBufferId);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexData), vertexData, GL_STATIC_DRAW);\n\n    glGenVertexArrays(1, &amp;vaoId);\n    glBindVertexArray(vaoId);\n    glEnableVertexAttribArray(0);\n    glEnableVertexAttribArray(1);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 4 * sizeof(GLfloat), 0);\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 4 * sizeof(GLfloat), (void*)(2 * sizeof(GLfloat)));\n    glBindVertexArray(0);\n\n    resize(settings.window.width, settings.window.height);\n}\n\nvoid Framebuffer::resize(int width, int height)\n{\n    image.resize(width, height);\n    floatPixelData.resize(width * height * sizeof(float) * 4);\n\n    // reserve the texture memory on the device\n    glBindTexture(GL_TEXTURE_2D, imageTextureId);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, (GLsizei)width, (GLsizei)height, 0, GL_RGBA, GL_FLOAT, 0);\n    glGenerateMipmap(GL_TEXTURE_2D);\n    glBindTexture(GL_TEXTURE_2D, 0);\n}\n\nvoid Framebuffer::render()\n{\n    int imageWidth = image.getWidth();\n    int imageHeight = image.getHeight();\n\n    glUseProgram(resampleProgramId);\n    glUniform1i(resampleTextureUniformId, 0);\n\n    std::vector&lt;Color&gt;&amp; imagePixelData = image.getPixelData();\n\n    // convert image data from Color to float array\n    for (int i = 0; i &lt; (int)imagePixelData.size(); ++i)\n    {\n        int pixelIndex = i * 4;\n\n        floatPixelData[pixelIndex] = (float)imagePixelData[i].r;\n        floatPixelData[pixelIndex + 1] = (float)imagePixelData[i].g;\n        floatPixelData[pixelIndex + 2] = (float)imagePixelData[i].b;\n        floatPixelData[pixelIndex + 3] = (float)imagePixelData[i].a;\n    }\n\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, imageTextureId);\n    glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, (GLsizei)imageWidth, (GLsizei)imageHeight, GL_RGBA, GL_FLOAT, &amp;floatPixelData[0]);\n    glGenerateMipmap(GL_TEXTURE_2D);\n\n    glBindVertexArray(vaoId);\n    glDrawArrays(GL_TRIANGLES, 0, 6);\n    glBindVertexArray(0);\n\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glUseProgram(0);\n\n    GLHelper::checkError(\"Could not render the framebuffer\");\n}\n</code></pre>\n\n<p>For the sake of testing all shaders were replaced with minimal color pass-through versions.</p>\n\n<p>Here's what I've tried with no luck:</p>\n\n<ul>\n<li>different internal texture formats</li>\n<li>different combinations of calling <code>glGenerateMipmap</code></li>\n<li>different vertex and texcoord values</li>\n<li>different texture clamp and min/max filter settings (mipmap on/off)</li>\n<li>different viewport values</li>\n</ul>\n\n<p>The same code works fine on Windows and Linux.</p>\n\n<p>What could cause such corruption only Mac?</p>\n"}, {"tags": ["c++", "linux", "cross-compiling", "yocto"], "comments": [{"owner": {"reputation": 7633, "user_id": 4093778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j10KcVcKn4A/AAAAAAAAAAI/AAAAAAAAAdE/AgrehO6_eJo/photo.jpg?sz=128", "display_name": "Anders", "link": "https://stackoverflow.com/users/4093778/anders"}, "edited": false, "score": 0, "creation_date": 1441821369, "post_id": 32485552, "comment_id": 52833282, "body": "No, you need to supply more info. Eg the exact error message. You could also run <code>file</code> in that file to show us what it is."}, {"owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "reply_to_user": {"reputation": 7633, "user_id": 4093778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j10KcVcKn4A/AAAAAAAAAAI/AAAAAAAAAdE/AgrehO6_eJo/photo.jpg?sz=128", "display_name": "Anders", "link": "https://stackoverflow.com/users/4093778/anders"}, "edited": false, "score": 0, "creation_date": 1441821610, "post_id": 32485552, "comment_id": 52833425, "body": "The question was updated."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1441822182, "post_id": 32485552, "comment_id": 52833697, "body": "How about <code>file libz.so.1.2.7</code>?"}, {"owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "edited": false, "score": 0, "creation_date": 1441822351, "post_id": 32485552, "comment_id": 52833771, "body": "Updated running above libz.so.1.2.7"}, {"owner": {"reputation": 7633, "user_id": 4093778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j10KcVcKn4A/AAAAAAAAAAI/AAAAAAAAAdE/AgrehO6_eJo/photo.jpg?sz=128", "display_name": "Anders", "link": "https://stackoverflow.com/users/4093778/anders"}, "edited": false, "score": 0, "creation_date": 1441822360, "post_id": 32485552, "comment_id": 52833779, "body": "And the full error, as well as the command that gives the error (can to compiler, linker, etc). more that you say that you&#39;re cross-compiling, but the libz.so that isn&#39;t recognised is on the x86_64 sysroot... Which your second run of <code>file</code> tells us. It&#39;s not for your arm platform, but for your host."}, {"owner": {"reputation": 7633, "user_id": 4093778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j10KcVcKn4A/AAAAAAAAAAI/AAAAAAAAAdE/AgrehO6_eJo/photo.jpg?sz=128", "display_name": "Anders", "link": "https://stackoverflow.com/users/4093778/anders"}, "edited": false, "score": 0, "creation_date": 1441823732, "post_id": 32485552, "comment_id": 52834485, "body": "Why are your makefile / recipe mixing library paths from birth the target sysroot and your host sysroot? If you can&#39;t find out why, you need to die is your recipe and makefile"}], "owner": {"reputation": 716, "user_id": 5117173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5O4AA.png?s=128&g=1", "display_name": "Juliano Oliveira", "link": "https://stackoverflow.com/users/5117173/juliano-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1261, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441823567, "creation_date": 1441818559, "last_edit_date": 1441823567, "question_id": 32485552, "link": "https://stackoverflow.com/questions/32485552/cross-compilation-project-yocto-libz-so-file-not-recognized", "title": "Cross compilation project Yocto libz.so file not recognized", "body": "<p>I encountered a problem when trying make a cross compilation using arm-poky-linux-gnueabi-g++ , the problem is the follow:</p>\n\n<p>Log error</p>\n\n<pre><code>/home/.../libz.so: file not recognized: File format not recognized\n</code></pre>\n\n<p>My makefile contains the path to the correct directory that contains the cited file, anybody have an suggestion that how can i fix it?</p>\n\n<p><strong>EDIT1</strong></p>\n\n<p>Running the command \"file\" on the file, the system return the follow result:</p>\n\n<pre><code>-&gt;file libz.so\n-&gt;libz.so: symbolic link to `libz.so.1.2.7'\n</code></pre>\n\n<p><strong>EDIT2</strong></p>\n\n<p>And executing on libz.so.1.2.7</p>\n\n<pre><code>-&gt;file libz.so.1.2.7\n-&gt;libz.so.1.2.7: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xc8ddf1808db4d41de52cea35bf10f6a8416ac42d, not stripped\n</code></pre>\n\n<p><strong>EDIT3</strong></p>\n\n<p>The full error:</p>\n\n<pre><code>Building target: SAT\nInvoking: Cross GCC Linker\narm-poky-linux-gnueabi-gcc -L/home/.../build/tmp/sysroots/x86_64-linux/usr/lib -L/home/prjs/.../build/tmp/sysroots/imx28evk/usr/lib/ -L/home/prjs/.../build/tmp/sysroots/x86_64-linux/usr/include -L/usr/lib/x86_64-linux-gnu -lcurl -o \"SAT\"  ./src/prj/appSat.o ./src/prj/srvAc.o ./src/prj/srvFisco.o ./src/prj/srvLeds.o  ./src/api/soapFiles/soapC.o ./src/api/soapFiles/soapClient.o ./src/api/soapFiles/stdsoap2.o  ./src/api/apiAcParse.o ./src/api/apiAddTagsSATToCF.o ./src/api/apiAtivaSat.o ./src/api/apiBloqueio.o ./src/api/apiCallBack.o ./src/api/apiCfeComandos.o ./src/api/apiConfiguracoes.o ./src/api/apiEvent.o ./src/api/apiFiscoRequests.o ./src/api/apiFiscoUtils.o ./src/api/apiGPIO.o ./src/api/apiGeraComandosXML.o ./src/api/apiLanConfig.o ./src/api/apiMsg.o ./src/api/apiNvRam.o ./src/api/apiOutrosSat.o ./src/api/apiParametrizacao.o ./src/api/apiSeguranca.o ./src/api/apiSerial.o ./src/api/apiSignature.o ./src/api/apiThread.o ./src/api/apiTimer.o ./src/api/apiUtils.o ./src/api/apiValidaCF.o ./src/api/apiValidaUtils.o ./src/api/apiVendasSat.o ./src/api/apiWatchDog.o ./src/api/apiXSDValidation.o ./src/api/apiXmlUtils.o ./src/api/sha2.o ./src/api/strptime.o  ./src/SAT.o   -lpthread -lz -lgnutls -lgpg-error -lcap -ltasn1 -lcrypto -lssl -lgcrypt -lcurl -lxml2\n/home/.../sysroots/x86_64-linux/usr/libexec/armv5te-poky-linux-gnueabi/gcc/arm-poky-linux-gnueabi/4.7.2/ld: warning: library search path \"/usr/lib/x86_64-linux-gnu\" is unsafe for cross-compilation\n/home/prjs/.../build/tmp/sysroots/x86_64-linux/usr/lib/libz.so: file not recognized: File format not recognized\ncollect2: error: ld returned 1 exit status\nmake: *** [SAT] Error 1\n</code></pre>\n"}, {"tags": ["c++", "templates", "gcc", "c++14", "gcc5.2"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441819585, "post_id": 32485530, "comment_id": 52832431, "body": "clang++ and g++6 compile your code"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441820467, "post_id": 32485530, "comment_id": 52832852, "body": "@PiotrSkotnicki <a href=\"http://coliru.stacked-crooked.com/a/7c991cbc59cc1455\" rel=\"nofollow noreferrer\">coliru doesn&#39;t</a>"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441820919, "post_id": 32485530, "comment_id": 52833056, "body": "@PiotrSkotnicki coliru&#39;s version of g++ reports 5.2.0, so it must be a compiler bug"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1441821063, "post_id": 32485530, "comment_id": 52833124, "body": "@CoffeeandCode: I confirm, it compiles with clang 3.7.0, see <a href=\"http://coliru.stacked-crooked.com/a/dc89de32dd59ef90\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/dc89de32dd59ef90</a>"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 1, "creation_date": 1441821136, "post_id": 32485530, "comment_id": 52833170, "body": "I&#39;m voting to close this question as off-topic because it appears to be a bug in the development version of gcc. It would make an interesting test for their test suite, but is unlikely to help anyone else."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441821251, "post_id": 32485530, "comment_id": 52833226, "body": "No, you cannot conclude that yet.  Please provide the exact compiler and version, together with the compiler error messages, and the lines they refer to.  There are a few errors above (your type deduction of <code>F&amp;&amp;f</code>&#39;s call is wrong), and your use of <code>std::bind</code> is usually a bad sign (it has quirky self-interaction).  I also see what could be some rvalue category errors, which depending on how rvalue aware <code>bind</code> is could give you some issues.  <code>bind_empty_f</code> only accepts an rvalue as the 3rd argument, which should only be passed if invoked in an rvalue context."}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1441821314, "post_id": 32485530, "comment_id": 52833257, "body": "@MatthieuM. fair enough vote"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441821445, "post_id": 32485530, "comment_id": 52833331, "body": "@Yakk those aren&#39;t rvalue references, they&#39;re universal references. Though they could be deduced as rvalue references (they aren&#39;t in this case). It is definitely a compiler error. P.S. why do you say my type deduction of <code>f</code>s call is wrong?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1441821575, "post_id": 32485530, "comment_id": 52833410, "body": "@CoffeeandCode You may intend them to be universal references, but you are incorrect.  <code>empty_func&lt;T, U, F&lt;T, U&gt;&gt;</code> passes <code>F&lt;T,U&gt;</code> as the 3rd type argument, which forces the 3rd function argument to be <code>F&lt;T,U&gt; &amp;&amp;f</code> exactly.  Forwarding references (aka universal references) only work &quot;simply&quot; in a type deduction context; you are not doing such type deduction."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441821625, "post_id": 32485530, "comment_id": 52833430, "body": "@Yakk: I have not concluded anything; I believe it is a bug, based on the fact that other versions of gcc compile the code as intended and clang also does. Of course, those other compilers/versions could be wrong and only the newest gcc be correct; I find it unlikely, but hey, I&#39;m wrong often enough."}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441821632, "post_id": 32485530, "comment_id": 52833434, "body": "@Yakk ah, yes. I didn&#39;t think about the fact it was explicitly declared, I&#39;ll change it to an lvalue (as to not arise a different error). It still wouldn&#39;t cause the error I am getting though."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1441821763, "post_id": 32485530, "comment_id": 52833488, "body": "@MatthieuM. I&#39;m just saying that &quot;one compiler builds something, others do not&quot; is weak evidence that one of those compilers has a bug.  (The code may also be ill formed with no diagnostic required, in which case no compiler has a bug).  Closing it simply because it works in some compilers is premature; especially when messing around with tangled code <code>std::bind</code>s.  I will admit the question is far from a simple, minimal example, but there is some hope we can clean it up and find out what is actually going on."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1441822184, "post_id": 32485530, "comment_id": 52833699, "body": "@Yakk: You might think of it as a gut feeling; g++-5.1 also accepts the code (<a href=\"http://coliru.stacked-crooked.com/a/bac7fd419b6d6332\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/bac7fd419b6d6332</a>), which makes me think that the latest release broke something. As I said I may be wrong, of course, in which case I&#39;ll be happy to retract my vote or vote to re-open as appropriate."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1441867144, "last_edit_date": 1441867144, "creation_date": 1441823429, "answer_id": 32486800, "question_id": 32485530, "link": "https://stackoverflow.com/questions/32485530/template-being-deduced-as-wrong-type-with-template-variable/32486800#32486800", "title": "template being deduced as wrong type with template variable", "body": "<p>Here is a minimal example of your problem:</p>\n\n<pre><code>template&lt;class T&gt; struct tag {};\n\ntemplate&lt;typename T&gt;\nstatic auto bind_empty_f = tag&lt;T&gt;{};\n\ntemplate&lt;typename T&gt;\ndecltype(bind_empty_f&lt;T&gt;) test_func(){\n  return 3.14f;\n}\n</code></pre>\n\n<p>then we simply <code>test_func&lt;float&gt;()</code> and it returns <code>3.14f</code>.  If we <code>test_func&lt;int&gt;()</code> it returns <code>3</code>.</p>\n\n<p>If we first do a <code>bind_empty_f&lt;float&gt;</code>, instead <code>test_func&lt;float&gt;</code> generates an error.</p>\n\n<p>The type deduced for <code>bind_empty_f&lt;T&gt;</code> when it is called within another template is set to <code>T</code> and not to the type of the right hand side of the expression.</p>\n\n<p>If you call it directly, <em>and</em> the type hasn't already been calculated (there seems to be a cache), then the correct type is deduced, and my <code>test_func</code> fails to build (as it tries to convert <code>3.14f</code> to a <code>bind</code> expression type and fails).</p>\n\n<p>This is definitely a problem with the compiler.  You can work around it by replacing the <code>auto</code> in <code>bind_empty_f</code> with a <code>std::decay_t&lt;decltype(stuff_on_rhs)&gt;</code>.</p>\n\n<p>Note that there are other problems with some of your bind expressions, but they are not central to this issue.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1e05a1baa4be08a9\" rel=\"nofollow\">live example compiling (wrongly)</a>, <a href=\"http://coliru.stacked-crooked.com/a/97794ff7132be4c2\" rel=\"nofollow\">live example not compiling (correctly)</a>.</p>\n"}], "owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 32486800, "answer_count": 1, "score": 3, "last_activity_date": 1441867144, "creation_date": 1441818464, "last_edit_date": 1592644375, "question_id": 32485530, "link": "https://stackoverflow.com/questions/32485530/template-being-deduced-as-wrong-type-with-template-variable", "title": "template being deduced as wrong type with template variable", "body": "<p>So I have the following test code:</p>\n<pre><code>struct empty_value{\n    template&lt;typename T&gt;\n    T as(){ return T(0); }\n};\n\ntemplate&lt;typename T, typename U, typename F&gt;\nauto empty_func(empty_value lhs, empty_value rhs, F f) -&gt; decltype(f(lhs.as&lt;T&gt;(), rhs.as&lt;U&gt;())){\n    return f(lhs.as&lt;T&gt;(), rhs.as&lt;U&gt;());\n}\n\ntemplate&lt;typename T, typename U, template&lt;typename, typename&gt; class F&gt;\nstatic auto bind_empty_f = std::bind(empty_func&lt;T, U, F&lt;T, U&gt;&gt;, std::placeholders::_1, std::placeholders::_2, F&lt;T, U&gt;{});\n\ntemplate&lt;typename F&gt;\nvoid other_test_func(F&amp;&amp;){}\n\ntemplate&lt;typename T, typename U, template&lt;typename, typename&gt; class F&gt;\nvoid test_func(){\n    other_test_func(bind_empty_f&lt;T, U, F&gt;);\n}\n\ntemplate&lt;typename T, typename U&gt;\nstruct my_add{\n    decltype(auto) operator()(T lhs, U rhs){ return lhs + rhs; }\n};\n\nint main(){\n    test_func&lt;float, int, my_add&gt;();\n}\n</code></pre>\n<p>Which is derived from something I was actually working on. The problem arises on the line of <code>bind_empty_f</code>. But only when it is passed to <code>other_test_func</code>. When I try to assign it to a regular variable like this:</p>\n<pre><code>int main(){\n    auto var = bind_empty_f&lt;float, int, my_add&gt;;\n}\n</code></pre>\n<p>Everything is all cheery. But if I call <code>test_func</code> which tries to pass it to <code>other_test_func</code> I get an error that the underlying type returned by <code>std::bind</code> can't be converted to <code>float</code>. So it is trying to convert it to the return value of the actual function. I can't understand why. Where am I passing the function's return value?</p>\n<hr />\n<h2>EDIT</h2>\n<p>if I call the function after setting a local variable to the value of <code>bind_empty_f</code> first it compiles:</p>\n<pre><code>int main(){\n    auto var = bind_empty_f&lt;float, int, my_add&gt;;\n    test_func&lt;float, int, my_add&gt;;\n}\n</code></pre>\n<p>So the issue must be <s>to do with static initialization</s> a compiler bug.</p>\n<h3>EDIT2</h3>\n<p>As stated in the comments, this exact example compiles with other compilers but does not with the original tested compiler (GCC 5.2.0).</p>\n<p>This is a bug in either GCC 5.2 or every other compiler tested.</p>\n<p>So I guess the question becomes, is this standard conforming code?</p>\n"}, {"tags": ["c++", "sorting", "pointers", "mergesort"], "answers": [{"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": false, "score": 0, "last_activity_date": 1441820349, "last_edit_date": 1441820349, "creation_date": 1441819945, "answer_id": 32485908, "question_id": 32485423, "link": "https://stackoverflow.com/questions/32485423/mergsort-using-pointers-rather-than-indices/32485908#32485908", "title": "Mergsort using pointers rather than indices?", "body": "<p>Since an array is a contiguous block of memory, you can use pointers to access array members much the same as with an index:</p>\n\n<pre><code>int array[] = {1, 2, 3, 4, 5};\nint *pointer = array;\nint x = *(pointer + 1);\n// x = 2\n</code></pre>\n\n<p>The compiler automatically calculates the offset based on the size of the data:  <code>sizeof(int)</code>.</p>\n\n<p>So for your project, if you are given a pointer to the first and last elements of the array, You can split the array in the middle:</p>\n\n<pre><code>int *middle = firstPointer + ((lastPointer - firstPointer) / 2);\n</code></pre>\n\n<p>Then you can keep doing this recursively</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1441844742, "creation_date": 1441844742, "answer_id": 32491147, "question_id": 32485423, "link": "https://stackoverflow.com/questions/32485423/mergsort-using-pointers-rather-than-indices/32491147#32491147", "title": "Mergsort using pointers rather than indices?", "body": "<p>Merge sort use sequential access for input from each of two runs (part of an array) and output to a single run (part of the output array). You can use local pointers that you advance by 1 instead of indexing from base pointers. So the main merge process would look something like this:</p>\n\n<pre><code>    int * plft = left;           // ptr to left run\n    int * prgt = right;          // ptr to right run\n    int * pdst = destination;    // ptr to output\n    // loop with checks for reaching end of either left or right run\n        if(*plft &lt;= *prgt)       // at some point in the merge function\n            *pdst++ = *plft++;\n        else\n            *pdst++ = *prgt++;\n</code></pre>\n\n<p>The question doesn't mention if the goal is to implement a top down (use recursion to fill stack with pointers to runs until run size == 1, then start merging and returning) or a bottom up merge sort (skip the recursion step, initialized run size to 1, merge pairs of runs across array until all pairs merged, then run size *= 2, and repeat until run size >= array size).</p>\n\n<p>The wiki article shows simple examples of both top down and bottom up merge sort.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Merge_sort\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Merge_sort</a></p>\n"}], "owner": {"reputation": 17, "user_id": 4969938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac8f41eef8ed1808282bbbcbde72d8d?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4969938/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1441844742, "creation_date": 1441818051, "last_edit_date": 1441833949, "question_id": 32485423, "link": "https://stackoverflow.com/questions/32485423/mergsort-using-pointers-rather-than-indices", "title": "Mergsort using pointers rather than indices?", "body": "<p>So I need to write a <em>Merge Sort</em> algorithm where,</p>\n\n<blockquote>\n  <p>pointers should be used rather than array indexes to access array elements during the sort, so the method takes 2 <code>int</code> pointers, <code>high</code> and <code>low</code>, and works from there. </p>\n</blockquote>\n\n<h2>Question:</h2>\n\n<p>Is it possible to sort the array without indexing it, or does the args should be pointers as opposed to values? </p>\n\n<p>P.S.: Very unfamiliar with pointer operation so thanks for the help!   </p>\n"}, {"tags": ["c++", "windbg", "symbols", "dbghelp"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1441827387, "post_id": 32485346, "comment_id": 52836253, "body": "That&#39;s a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb540468%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">Type</a>, isn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1441868043, "post_id": 32493530, "comment_id": 52849854, "body": "Could that be summarized as &quot;You used <code>MSVCP120!_RTL_CRITICAL_SECTION</code> but it should have been <code>ntdll!_RTL_CRITICAL_SECTION</code>&quot;?"}, {"owner": {"reputation": 137, "user_id": 3590586, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jvjs7.png?s=128&g=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/3590586/guy"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1441869686, "post_id": 32493530, "comment_id": 52850797, "body": "@Thomas It was a good example (msvcp120.dll does include it). But, it could be summarized as &quot;You used <code>SymEnumSymbols</code> but it should have been <code>SymEnumTypesByName</code>&quot;. Stupid me :)"}, {"owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "edited": false, "score": 0, "creation_date": 1441905471, "post_id": 32493530, "comment_id": 52875041, "body": "msvcp120 may hold the symbol i dont know rtl_critical_section symbol type info is held by many modules one of them is ntdll  others being various flavors of ntos as well as mssmbios.sys lkd&gt; dt *!_RTL_CRITICAL_SECTION           ntkrnlpa!_RTL_CRITICAL_SECTION           mssmbios!_RTL_CRITICAL_SECTION           ntdll!_RTL_CRITICAL_SECTION"}], "tags": [], "owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "is_accepted": true, "score": 1, "last_activity_date": 1441861462, "creation_date": 1441861462, "answer_id": 32493530, "question_id": 32485346, "link": "https://stackoverflow.com/questions/32485346/dbghelp-get-struct-symbol-by-name/32493530#32493530", "title": "dbghelp - Get struct symbol by name", "body": "<p>contents of folder prior to compileing</p>\n\n<pre><code>:\\&gt;ls -l\n-rw-rw-rw-  1 Admin 0 459 2015-09-10 10:23 structshow.cpp\n</code></pre>\n\n<p>source</p>\n\n<pre><code>:\\&gt;cat structshow.cpp\n#include &lt;windows.h&gt;\n#include &lt;dbghelp.h&gt;\n#include &lt;stdio.h&gt;\n#pragma comment (lib,\"dbghelp.lib\")\nBOOL CALLBACK mycallback(PSYMBOL_INFO pSymInfo,ULONG,PVOID){\n  printf(\"%s\\n\",pSymInfo-&gt;Name);\n  return true;\n}\nint main(){\n  HMODULE hmod = LoadLibraryA(\"c:\\\\windows\\\\system32\\\\ntdll.dll\");\n  HANDLE hproc = GetCurrentProcess();\n  SymInitialize(hproc,\"F:\\\\symbols\",TRUE);\n  SymEnumTypesByName(hproc,(ULONG64)hmod,\"*!_R*\",mycallback,0);\n  return 0;\n}\n</code></pre>\n\n<p>compile using</p>\n\n<pre><code>:\\&gt;..\\compile.bat\n\n:\\&gt;if \"C:\\Program Files\\Microsoft Visual Studio 10.0\\VC\\\" == \"\" ()\n\n:\\&gt;cl /Zi /EHsc /nologo /W4 /analyze *.cpp /link /RELEASE structshow.cpp\n\n:\\&gt;ls -l\n</code></pre>\n\n<p>contents of folder post compiling</p>\n\n<pre><code>-rw-rw-rw-  1 Admin 0     459 2015-09-10 10:23 structshow.cpp\n-rwxrwxrwx  1 Admin 0   89088 2015-09-10 10:29 structshow.exe\n-rw-rw-rw-  1 Admin 0   21081 2015-09-10 10:29 structshow.obj\n-rw-rw-rw-  1 Admin 0 1002496 2015-09-10 10:29 structshow.pdb\n-rw-rw-rw-  1 Admin 0   94208 2015-09-10 10:29 vc100.pdb\n</code></pre>\n\n<p>use latest dbghelp.dll</p>\n\n<pre><code>:\\&gt;copy xxxx\\dbghelp.dll .\n        1 file(s) copied.\n\n:\\&gt;echo \"do not use system dbghelp.dll it is \noutdated SymbolEnumTypesbyName is available in \ndbghelp version 6.8 and above only \"\n</code></pre>\n\n<p>execute compiled binary</p>\n\n<pre><code>:\\&gt;structshow.exe\n_RTL_USER_PROCESS_PARAMETERS\n_RTL_CRITICAL_SECTION &lt;----------------------\n_RTL_STACK_TRACE_ENTRY\n_RTL_TRACE_BLOCK\n_RTL_CRITICAL_SECTION_DEBUG\n_RTL_DRIVE_LETTER_CURDIR\n_RTL_TRACE_DATABASE\n_RTL_TRACE_SEGMENT\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 3590586, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jvjs7.png?s=128&g=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/3590586/guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 32493530, "answer_count": 1, "score": 0, "last_activity_date": 1441861462, "creation_date": 1441817769, "question_id": 32485346, "link": "https://stackoverflow.com/questions/32485346/dbghelp-get-struct-symbol-by-name", "title": "dbghelp - Get struct symbol by name", "body": "<p>I am building a Symbols service, and I want to be able to print the struct variables and their offsets. I am loading the needed pdb, and trying to find a struct that fits the given mask. For example, I want to get details about the struct <code>_RTL_CRITICAL_SECTION</code>.</p>\n\n<p>While using <code>windbg</code>, I use the command <code>dt MSVCP120!_RTL_CRITICAL_SECTION</code> and I get the struct information (exactly what I want). But, when I search the symbol using my code:</p>\n\n<pre><code>SymEnumSymbols(GetCurrentProcess(), base_addr,\"MSVCP120!_RTL_CRITICAL_SECTION\", enum_symbols_callback, NULL);\n\nBOOL CALLBACK symbol_processor::enum_symbols_callback(PSYMBOL_INFO pSymInfo, ULONG SymbolSize, PVOID UserContext)\n{\n    printf(\"Name = %s\\n\", pSymInfo-&gt;Name);\n    return TRUE;\n}\n</code></pre>\n\n<p>Nothing is printed.. Meaning, there is no match for the mask..\nThis does work when the mask is a function (for example <code>\"MSVCP120!std::tr2::sys::_Open_dir\"</code>)</p>\n\n<p>So, how do I get the symbol of a struct..?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "stdstring", "c++03"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1441817857, "post_id": 32485309, "comment_id": 52831563, "body": "You might use the POSIX strnlen to determine the size. (You should do something like that, otherwise the string::size() is always array size)"}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "edited": false, "score": 0, "creation_date": 1441818060, "post_id": 32485309, "comment_id": 52831677, "body": "True, definitely an optimization. I will use this if no one comes up how to do this without a second loop for determining the size (which was what I thought about...)."}], "answers": [{"comments": [{"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "edited": false, "score": 0, "creation_date": 1441821950, "post_id": 32485529, "comment_id": 52833589, "body": "At least in Visual Studio, the string construction from a known size uses memcpy and is way faster than anything else, so I&#39;ll go with Dieter&#39;s method."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 2, "last_activity_date": 1441818463, "creation_date": 1441818463, "answer_id": 32485529, "question_id": 32485309, "link": "https://stackoverflow.com/questions/32485309/construct-stdstring-from-up-to-x-characters-stopping-at-null-char/32485529#32485529", "title": "Construct std::string from up to X characters, stopping at null char", "body": "<p>Simple solutions are:</p>\n\n<ol>\n<li><p>Just calculate the correct length first</p>\n\n<ul>\n<li>either use <code>strnlen</code> as Dieter suggested</li>\n<li>or <code>std::find(MyString,MyString+ARRAYSIZE(MyString),'\\0')</code> which IME isn't any slower</li>\n</ul>\n\n<p>note that if your string fits in cache, that will likely dominate the extra loop cost</p></li>\n<li><p>reserve the max string size (you did say space was less important), and write a loop appending characters until you exhaust the width or hit a nul (like <code>copy_until</code>)</p></li>\n<li><p>actually create a max-size string initialized with nuls, <code>strncpy</code> into it, and optionally erase <code>unused</code> nuls if you want the size to be correct</p></li>\n</ol>\n\n<p>The second option uses only a single loop, while the third notionally uses two (it in the string ctor, and then in the copy). However, the <code>push_back</code> of each character seems more expensive than the simple character assignment, so I wouldn't be surprised if #3 were faster in reality. Profile and see!</p>\n"}, {"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441821779, "post_id": 32485585, "comment_id": 52833498, "body": "I&#39;ll have to look into some <code>std::string</code> implementations later, but I think it is possible that <code>reserve</code> is a pessimisation here: It might prevent the Small String Optimization, which might be important for the OP&#39;s case, depending on the average and string length."}, {"owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441823063, "post_id": 32485585, "comment_id": 52834140, "body": "Yes this is true but it depends on the situation. The short string has to fit on the space used for size, capacity and pointer for the long string together with its respective size and some flag bit/bits to tell between short and long string. Usually the short string capacity is just a little shorter than 3 machine words. If the average string size can fit into that reserve() will  indeed be bad for performance but if there are a lot of long enough strings not reserving first can be even worse because of the multiple allocations and copying."}], "tags": [], "owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "is_accepted": false, "score": 2, "last_activity_date": 1441819123, "last_edit_date": 1441819123, "creation_date": 1441818678, "answer_id": 32485585, "question_id": 32485309, "link": "https://stackoverflow.com/questions/32485309/construct-stdstring-from-up-to-x-characters-stopping-at-null-char/32485585#32485585", "title": "Construct std::string from up to X characters, stopping at null char", "body": "<p>Well If size is not a problem one potential way to do it is to create an empty <code>std::string</code> then use <code>reserve()</code> to pre-allocate the space potentially needed and then add each char until you come across <code>'\\0'</code>.</p>\n\n<pre><code>std::string stdmystring;\nstdmystring.reserve(MyString_MAX_SIZE) ;\nfor(size_t i=0;i&lt;MyString_MAX_SIZE &amp;&amp; MyString[i]!='\\0';++i);\nstdmystring+=MyString[i];\n</code></pre>\n\n<p><code>reserve()</code> garanties you one memory allocation since you know the max_size and the string will never get larger than that.</p>\n\n<p>The calls to += operator function will probably be inlined but it still has to check that the string has the needed capacity which is wasteful in your case. Infact this could be the same or worse than simply using strlen to find the exact length of the string first so you have to test it.</p>\n"}, {"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1441821500, "creation_date": 1441821500, "answer_id": 32486318, "question_id": 32485309, "link": "https://stackoverflow.com/questions/32485309/construct-stdstring-from-up-to-x-characters-stopping-at-null-char/32486318#32486318", "title": "Construct std::string from up to X characters, stopping at null char", "body": "<p>I think the most straightforward way is to overallocate your internal <code>MyString</code> array by one byte, always null terminate that final byte, and use the C-string constructor of <code>std::string</code>. (Keep in mind that most likely your process will be I/O bound on the file so whatever algorithm the C-string constructor uses should be fine).</p>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "accepted_answer_id": 32485529, "answer_count": 3, "score": 6, "last_activity_date": 1441821500, "creation_date": 1441817644, "question_id": 32485309, "link": "https://stackoverflow.com/questions/32485309/construct-stdstring-from-up-to-x-characters-stopping-at-null-char", "title": "Construct std::string from up to X characters, stopping at null char", "body": "<p>I am reading strings from a structure in a file where each string has a fixed length, with <code>'\\0'</code> padding. They are not zero-terminated if the stored string needs the whole length.</p>\n\n<p>I'm currently constructing <code>std::string</code>s out of those like this:</p>\n\n<pre><code>// char MyString[1000];\nstd::string stdmystring(MyString, ARRAYSIZE(MyString));\n</code></pre>\n\n<p>However, this copies the padding, too. I could trim the string now, but is there an elegant and quick way to prevent the copying in the first place?</p>\n\n<p>Speed is more important than space, because this runs in a loop.</p>\n"}, {"tags": ["c++", "stl", "priority-queue", "mergesort"], "comments": [{"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1441817539, "post_id": 32485202, "comment_id": 52831411, "body": "How exactly are you doing the merging? If you just want to sort them, it will almost certainly be faster to put the results in a <code>vector</code> and sort it once."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1441819734, "post_id": 32485202, "comment_id": 52832511, "body": "If this is part of an external sort it will surely be I/O bound anyway. A PQ is not difficult to write by hand. See Knuth or Sedgewick. @rlbond You don&#39;t appear to know what &#39;sorted runs&#39; means."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1441820056, "post_id": 32485202, "comment_id": 52832670, "body": "Yeah I think I misread the question, chalk it up to answering SO questions in the morning. As for merging I&#39;d agree to hand-roll the implementation only after profiling."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441822025, "post_id": 32485202, "comment_id": 52833627, "body": "It&#39;s not clear from your question what the performance issue you are trying to solve is.  An interval tree may be more efficient, but your question is too vague to give an accurate answer."}], "owner": {"reputation": 31, "user_id": 5226272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9186acd94235dc74588973f8cf3c6b22?s=128&d=identicon&r=PG&f=1", "display_name": "Jun Li", "link": "https://stackoverflow.com/users/5226272/jun-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441817295, "creation_date": 1441817295, "question_id": 32485202, "link": "https://stackoverflow.com/questions/32485202/high-performance-priority-queue-to-merge-many-sorted-runs", "title": "High-performance priority queue to merge many sorted runs", "body": "<p>I have an application to do merging of > 10,000 sorted runs on a single thread and I am currently using the C++ 11 STL::priority_queue to do the work. I wonder whether there exists some open-source priority queue code (or some other  data structure/implementation that can do merging of sorted  runs) that can outperform STL::priority_queue in a single-threaded environment (for example, designed with better cache aware). Or some report on benchmarking different priority queue implementations. </p>\n"}, {"tags": ["c++", "variables", "initialization"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 4, "creation_date": 1441817132, "post_id": 32485095, "comment_id": 52831178, "body": "Undefined behavior is undefined behavior is undefined behavior. Some compilers use special values for uninitialized variables when building in debug, this is why you see the same value for all of them."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 1, "creation_date": 1441817155, "post_id": 32485095, "comment_id": 52831194, "body": "Compiling with different options might give a different value. It&#39;s undefined, so the compiler is free to do <i>anything</i> (or nothing) with that space. It may be that it&#39;s filling all memory with this value (hex: CCCCCCCC) for debugging purposes."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441817264, "post_id": 32485095, "comment_id": 52831247, "body": "Run in release mode and it will probably be different."}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1441817430, "post_id": 32485095, "comment_id": 52831341, "body": "The reason that it&#39;s filled that way? <code>0xCC</code> is the <code>INT 3</code> opcode, aka the debugger break instruction. AFAIK the compiler only does this for debug builds."}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 2097395, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3591e707767a7a3cd249a1462fc7df0e?s=128&d=identicon&r=PG", "display_name": "Akash Rupela", "link": "https://stackoverflow.com/users/2097395/akash-rupela"}, "is_accepted": false, "score": 7, "last_activity_date": 1441817133, "creation_date": 1441817133, "answer_id": 32485167, "question_id": 32485095, "link": "https://stackoverflow.com/questions/32485095/858993460-being-output-for-an-uninitalized-variable/32485167#32485167", "title": "-858993460 being output for an uninitalized variable", "body": "<p>-858993460 == 0xcccccccc in hex.\nThis bit pattern is often used by microsoft compilers to detect buffer overruns and such. </p>\n"}, {"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 8, "last_activity_date": 1441817170, "creation_date": 1441817170, "answer_id": 32485177, "question_id": 32485095, "link": "https://stackoverflow.com/questions/32485095/858993460-being-output-for-an-uninitalized-variable/32485177#32485177", "title": "-858993460 being output for an uninitalized variable", "body": "<p>Reading an uninitialized variable isn't guaranteed to return a random value or even a value that previously existed at that location.</p>\n\n<p>-858993460 is <code>0xcccccccc</code>. It's the bit pattern that MSVC uses to fill uninitialized values in debug builds. This helps you identify cases of uninitialized variables.</p>\n"}], "owner": {"reputation": 17, "user_id": 5318023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ae1167ec9520d0432daf460281e0f9?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5318023/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "closed_date": 1441826288, "answer_count": 2, "score": 0, "last_activity_date": 1441820663, "creation_date": 1441816961, "last_edit_date": 1441820663, "question_id": 32485095, "link": "https://stackoverflow.com/questions/32485095/858993460-being-output-for-an-uninitalized-variable", "closed_reason": "Duplicate", "title": "-858993460 being output for an uninitalized variable", "body": "<p>The value -858993460 is being displayed by <code>cout</code> for an uninitialized variable (presumably because there is junk in memory), but it will output -858993460 for every uninitialized variable in the program no matter how many I have or where they are in the program in relation to each other.</p>\n\n<p>It will also output this same value, -858993460, when I run a completely different program with an uninitialized variable on a completely different computer, from Windows 7 to Windows 10 running on a VM on a Mac. Why is it doing this? The likelihood of -858993460 randomly being in each uninitialized memory location on different computers is astronomically unlikely.</p>\n"}, {"tags": ["c++", "arrays", "c++11", "associative-array", "rapidjson"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1441816604, "post_id": 32484907, "comment_id": 52830894, "body": "I don&#39;t see any contradiction here. It&#39;s just a syntactic thing. If in a language, collections are objects (as in C++), why shouldn&#39;t you be able to use both subscripting syntax and method calls to use them?"}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1441817136, "post_id": 32484907, "comment_id": 52831181, "body": "C++ has associative arrays in the standard library (<code>std::map</code> and <code>std::unordered_map</code>), so this shouldn&#39;t be surprising..."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1441817200, "post_id": 32484907, "comment_id": 52831215, "body": "<a href=\"http://stackoverflow.com/questions/4294100/creating-a-class-indexer-operator-allowing-string-parameter-string-index\" title=\"creating a class indexer operator allowing string parameter string index\">stackoverflow.com/questions/4294100/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 3, "last_activity_date": 1441817010, "creation_date": 1441817010, "answer_id": 32485117, "question_id": 32484907, "link": "https://stackoverflow.com/questions/32484907/is-this-code-accessing-an-associative-array-in-a-class-in-c/32485117#32485117", "title": "Is this code accessing an associative array in a class in C++?", "body": "<p>In C++, <code>operator[]</code> can be overloaded by a class. <code>Document</code> must either have implemented an overload or derived from one that has.</p>\n\n<p>The syntax is roughly:</p>\n\n<pre><code>class Foo {\npublic:\n    AssociatedType operator [] (IndexingType i) {\n        //...\n    }\n};\n</code></pre>\n\n<p>The <code>AssociatedType</code> may be a reference. The method may be <code>const</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4462, "user_id": 1018640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d63b0bd537a54f53eb85c1471418ad?s=128&d=identicon&r=PG", "display_name": "Milo Yip", "link": "https://stackoverflow.com/users/1018640/milo-yip"}, "is_accepted": false, "score": 0, "last_activity_date": 1443065800, "creation_date": 1443065800, "answer_id": 32752903, "question_id": 32484907, "link": "https://stackoverflow.com/questions/32484907/is-this-code-accessing-an-associative-array-in-a-class-in-c/32752903#32752903", "title": "Is this code accessing an associative array in a class in C++?", "body": "<p>Operator overloading is available since early days of C++.</p>\n\n<p>In RapidJSON, there are several overloaded <code>operator[]</code> defined in <a href=\"http://rapidjson.org/classrapidjson_1_1_generic_value.html#a8ec7fc7f221306925c7674dccbe02b07\" rel=\"nofollow\"><code>GenericValue</code></a>, like:</p>\n\n<pre><code>template&lt;typename Encoding, typename Allocator&gt;\ntemplate&lt;typename T &gt;\nGenericValue&amp; rapidjson::GenericValue&lt; Encoding, Allocator &gt;::operator[](T* name)   \n</code></pre>\n\n<p>And <code>GenericDocument</code> is derived from <code>GenericValue</code>.</p>\n"}], "owner": {"reputation": 2166, "user_id": 3282410, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b979985fbfcd3c12f6397bf5a6e480b4?s=128&d=identicon&r=PG", "display_name": "Mikey A. Leonetti", "link": "https://stackoverflow.com/users/3282410/mikey-a-leonetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 32485117, "answer_count": 2, "score": 2, "last_activity_date": 1443065800, "creation_date": 1441816299, "question_id": 32484907, "link": "https://stackoverflow.com/questions/32484907/is-this-code-accessing-an-associative-array-in-a-class-in-c", "title": "Is this code accessing an associative array in a class in C++?", "body": "<p>I'm looking at the <em>rapidjson</em> code for possible integration. I can see that thanks to the new C++11 you can in fact do associative arrays in C++, although I'm not sure the speed advantages. However, in their example code I'm seeing this:</p>\n\n<pre><code> Document document; // Default template parameter uses UTF8 and MemoryPoolAllocator.\n\n    char buffer[sizeof(json)];\n    memcpy(buffer, json, sizeof(json));\n    if (document.ParseInsitu(buffer).HasParseError())\n        return 1;\n\n    printf(\"\\nAccess values in document:\\n\");\n    assert(document.IsObject());    // Document is a JSON value represents the root of DOM. Root can be either an object or array.\n\n    assert(document.HasMember(\"hello\"));\n    assert(document[\"hello\"].IsString());\n    printf(\"hello = %s\\n\", document[\"hello\"].GetString());\n</code></pre>\n\n<p>It looks like Document is a class that has methods being called, but at the same time he's able to access it using <em>document[\"hello\"]</em> as an associative array? Is that what's going on here?</p>\n"}, {"tags": ["c++", "c", "gcc", "clang"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1441816572, "post_id": 32484819, "comment_id": 52830873, "body": "If gcc had a way I suspect you would find it in the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Standards.html#Standards\" rel=\"nofollow noreferrer\">Language Standards Supported by GCC</a> document."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1441816598, "post_id": 32484819, "comment_id": 52830891, "body": "@KyleStrand I didn&#39;t mean to sound judgemental, but I simply can&#39;t really conceive of any situation in which this is necessary or even meaningful. Hence I doubt it is possible at all."}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441819185, "post_id": 32485029, "comment_id": 52832236, "body": "Interesting--I didn&#39;t realize that <code>make</code> would auto-define targets like this (i.e., I thought this would require explicitly specifying <code>foo</code> asa target)."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441820024, "post_id": 32485029, "comment_id": 52832655, "body": "This doesn&#39;t really address the issue of updating the standard-version as it changes, though."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1441820274, "post_id": 32485029, "comment_id": 52832763, "body": "@kyle: that is true. When you upgrade your compiler, you need to upgrade the makefile. (I just use one makefile and a bunch of symlinks, to simplify upgrades.)"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1441817190, "last_edit_date": 1441817190, "creation_date": 1441816724, "answer_id": 32485029, "question_id": 32484819, "link": "https://stackoverflow.com/questions/32484819/are-there-any-moving-target-alias-values-for-gcc-or-clang-std-implying-u/32485029#32485029", "title": "Are there any &quot;moving target&quot; alias-values for GCC or Clang `-std=`, implying &quot;use the latest standard&quot;?", "body": "<p>There is no such option in any of the compilers you mention.</p>\n\n<p>However, it is easy enough to create a simple Makefile for a sandbox which includes appropriate settings. I use something like this:</p>\n\n<pre><code>CFLAGS = -Wall -std=c11 -D_XOPEN_SOURCE_=700\nCXXFLAGS = -Wall -std=c++14 -D_XOPEN_SOURCE_=700\n</code></pre>\n\n<p>The default build rules accomplish the rest of my needs, so there is no need to fill in the makefile with the names and dependencies of all the source files, providing that I'm always sandboxing a single-file executable.</p>\n\n<p>With that, I can just type <code>make foo</code> to compile either <code>foo.c</code> or <code>foo.cc</code>. (Or <code>make foo.o</code> if I don't want a link.) The feature test macro setting saves me having to remember to do that in my source files as well.</p>\n\n<p>And to compile with the non-default compiler: <code>make foo CXX=clang++</code>. That's still less typing than <code>clang++ -Wall -o foo foo.cc</code></p>\n\n<p>(Actually the one I use is a bit more sophisticated than that. It includes a suffix rule for <code>.S</code> and some variables to simplify setting optimization and debugging options. But the principle is the same.)</p>\n"}, {"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 2, "creation_date": 1441821946, "post_id": 32486392, "comment_id": 52833587, "body": "It is indeed a &quot;moving target&quot;, but it&#39;s pretty far from what I want, I think; it appears that even in GCC 5.1, the default C++ dialect is <code>gnu++98</code>, which is...well, ancient <i>and</i> nonstandard."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441872881, "post_id": 32486392, "comment_id": 52852829, "body": "@KyleStrand: I agree, it&#39;s also the only automatic moving target that I know of unfortunately (the situation is better for Clang than for gcc)."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441890206, "post_id": 32486392, "comment_id": 52864526, "body": "@KyleStrand Interestingly it is for C code but not for C++. Currently default standard for C is <code>-std=gnu11</code> but for C++ it&#39;s <code>-std=gnu++98</code>"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1441890562, "post_id": 32486392, "comment_id": 52864812, "body": "@user3528438: It might be because C++11 introduced reused a keyword (<code>auto</code>) and introduced several others (<code>decltype</code>, <code>nullptr</code>) so the chances of conflict were greater..."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1442343604, "post_id": 32486392, "comment_id": 53040872, "body": "I&#39;m not so sure the situation is better for Clang, which <i>also</i> uses the C++98 standard by default--albeit <a href=\"http://clang.llvm.org/cxx_status.html\" rel=\"nofollow noreferrer\">&quot;with many C++11 features accepted as extensions&quot;</a>. I&#39;m not entirely sure what that even means, honestly."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 2, "creation_date": 1456247656, "post_id": 32486392, "comment_id": 58854450, "body": "Looks like GCC 6 will use GNU-14 by default. That&#39;s an improvement! I guess!"}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1441821773, "creation_date": 1441821773, "answer_id": 32486392, "question_id": 32484819, "link": "https://stackoverflow.com/questions/32484819/are-there-any-moving-target-alias-values-for-gcc-or-clang-std-implying-u/32486392#32486392", "title": "Are there any &quot;moving target&quot; alias-values for GCC or Clang `-std=`, implying &quot;use the latest standard&quot;?", "body": "<p>The most simple solution is to do nothing, or more specifically to avoid using <code>-std=</code>.</p>\n\n<p>The compilers themselves raise their default mode as releases pass, in general once their developer are confident with their implementation of the Standard version. This is close to your criteria:</p>\n\n<blockquote>\n  <p>The latest standard fully implemented by the compiler (e.g. C++11 for GCC 4.9, C++14 for GCC 5+)</p>\n</blockquote>\n\n<p>Although it also adds maturity.</p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 32485029, "answer_count": 2, "score": 1, "last_activity_date": 1441821773, "creation_date": 1441816004, "last_edit_date": 1441819017, "question_id": 32484819, "link": "https://stackoverflow.com/questions/32484819/are-there-any-moving-target-alias-values-for-gcc-or-clang-std-implying-u", "title": "Are there any &quot;moving target&quot; alias-values for GCC or Clang `-std=`, implying &quot;use the latest standard&quot;?", "body": "<p>I'd like to create shell aliases that will always use the \"latest\" version of the C/C++ standards supported by <code>gcc</code>/<code>g++</code>/<code>clang</code>/<code>clang++</code> (one alias for C, one alias for C++). I realize that this could have multiple interpretations:</p>\n\n<ul>\n<li>The latest GNU-extended standard</li>\n<li>The latest released standard (e.g. C++14)</li>\n<li>The latest unreleased standard (e.g. C++1z)</li>\n<li>The latest standard fully implemented by the compiler (e.g. C++11 for GCC 4.9, C++14 for GCC 5+)</li>\n<li>... possibly other options I haven't thought of</li>\n</ul>\n\n<p>....but for the purpose of these shell aliases, I don't care that much <em>which</em> \"moving\" value is used as long as I know which of the above rules is used to determine which standard-mode is used.</p>\n\n<p>Does either compiler include an argument-alias that tracks a moving \"latest standard\"? I don't see any mention of alias-options in the GCC docs (though my google-fu may simply be failing me); meanwhile, the Clang user manual mentions that \"The supported modes for C are [explicit std modes...] and various aliases for those modes\", but I don't see where the aliases themselves are documented.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441816215, "post_id": 32484688, "comment_id": 52830677, "body": "Possibly related:  <a href=\"http://stackoverflow.com/questions/24821800/extract-some-command-line-args-before-passing-remainder-to-legacy-code/24822073#24822073\" title=\"extract some command line args before passing remainder to legacy code\">stackoverflow.com/questions/24821800/&hellip;</a>"}, {"owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "edited": false, "score": 0, "creation_date": 1441816322, "post_id": 32484688, "comment_id": 52830738, "body": "did you try to const_cast, when calling function, or reinterpret_cast it?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1441816756, "post_id": 32484688, "comment_id": 52830963, "body": "Submit a patch to GS maintainers."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441816317, "post_id": 32484843, "comment_id": 52830732, "body": "You should add a notice, that <code>strdup()</code> leaves the caller to care about freeing memory after use."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1441817619, "post_id": 32484843, "comment_id": 52831449, "body": "<code>char* gs_argv0[nargs];</code> is not standard C++ when <code>nargs</code> is not a <a href=\"http://en.cppreference.com/w/cpp/language/constant_expression\" rel=\"nofollow noreferrer\">constant expression</a>."}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": false, "score": 1, "last_activity_date": 1441817649, "last_edit_date": 1441817649, "creation_date": 1441816116, "answer_id": 32484843, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32484843#32484843", "title": "Array of C strings, initialized with string literals", "body": "<p>Create copies of the string literals using <code>strdup</code>. This is more verbose, but fixes the warning.</p>\n\n<pre><code>char* gs_argv0[NARGS];\ngs_argv0[0] = strdup(\"\");\ngs_argv0[1] = strdup(\"-dNOPAUSE\");\n// ...\n</code></pre>\n\n<p>Note that you will also need to free the memory allocated by <code>strdup</code> if you want to prevent leaks.</p>\n\n<p>You might also want to add a comment to your code saying why you are doing this, to make it clear for future readers.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441826381, "post_id": 32484844, "comment_id": 52835761, "body": "I didn&#39;t know that <i><code>argv[argc]</code></i> should be NULL. I fixed my answer accordingly."}, {"owner": {"reputation": 153, "user_id": 4166379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a66210e4f1b46e5db1d23238735fc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Powell", "link": "https://stackoverflow.com/users/4166379/stephen-powell"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441955694, "post_id": 32484844, "comment_id": 52893346, "body": "@KubaOber I didn&#39;t specify this in the question and it&#39;s not explicitly mentioned in the API docs. But it does say &#39;The arguments are the same as the &quot;C&quot; main function&#39;, which I guess implies <code>argv[argc]</code> should be a null pointer."}, {"owner": {"reputation": 153, "user_id": 4166379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a66210e4f1b46e5db1d23238735fc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Powell", "link": "https://stackoverflow.com/users/4166379/stephen-powell"}, "edited": false, "score": 0, "creation_date": 1442214010, "post_id": 32484844, "comment_id": 52973612, "body": "As much as I like some of the other answers, this seems like the most sensible minimal modification."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1441816964, "last_edit_date": 1441816964, "creation_date": 1441816122, "answer_id": 32484844, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32484844#32484844", "title": "Array of C strings, initialized with string literals", "body": "<p>You can use:</p>\n\n<pre><code>char arg1[] = \"\";\nchar arg2[] = \"-dNOPAUSE\";\nchar arg3[] = \"-dBATCH\";\n\nchar* gs_argv0[] = {arg1, arg2, arg3, NULL};\nint argc = sizeof(gs_argv0)/sizeof(gs_argv0[0]) - 1;\ngsapi_init_with_args(instance, argc, gs_argv0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "is_accepted": false, "score": 0, "last_activity_date": 1441816461, "creation_date": 1441816461, "answer_id": 32484951, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32484951#32484951", "title": "Array of C strings, initialized with string literals", "body": "<p>Try to const_cast it:</p>\n\n<pre><code>gsapi_init_with_args(instance, argc, const_cast&lt;char**&gt;(argv));\n</code></pre>\n\n<p>Maybe it will help with fixing warning.</p>\n"}, {"tags": [], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "is_accepted": false, "score": 1, "last_activity_date": 1441819816, "creation_date": 1441819816, "answer_id": 32485873, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32485873#32485873", "title": "Array of C strings, initialized with string literals", "body": "<p>If you can <em>guarantee</em> that the function will not modify the non-const parameter, then it is acceptable to use <code>const_cast</code> in this situation.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 4166379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a66210e4f1b46e5db1d23238735fc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Powell", "link": "https://stackoverflow.com/users/4166379/stephen-powell"}, "edited": false, "score": 0, "creation_date": 1441961589, "post_id": 32486831, "comment_id": 52896480, "body": "Thanks for this comprehensive solution to the problem. What&#39;s the reason for the member class derived from <code>std::vector&lt;char*&gt;</code>? I would have used a <code>std::vector&lt;char*&gt;</code> member of <code>Args</code> and <code>free</code>d the memory in <code>Args::~Args</code>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 153, "user_id": 4166379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a66210e4f1b46e5db1d23238735fc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Powell", "link": "https://stackoverflow.com/users/4166379/stephen-powell"}, "edited": false, "score": 0, "creation_date": 1441974852, "post_id": 32486831, "comment_id": 52904842, "body": "@StephenPowell The container itself should be a resource handle and must free the resources. <code>str_vector</code> is such a container. It&#39;s not <code>Args</code> job to manage the memory of such a container. That&#39;s proper C++ design. Moreover, that&#39;s the only way to exception safety. If <code>Args</code> constructor would throw, its destructor will never run, but the <code>m_data</code>&#39;s will. Generally speaking, if you have to manage a resource manually in C++, outside of a container, you&#39;re probably doing something very wrong."}, {"owner": {"reputation": 153, "user_id": 4166379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a66210e4f1b46e5db1d23238735fc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Powell", "link": "https://stackoverflow.com/users/4166379/stephen-powell"}, "edited": false, "score": 0, "creation_date": 1442214174, "post_id": 32486831, "comment_id": 52973678, "body": "As written, this requires C++14, no? (<code>Args(Args &amp;&amp; o) = default;</code>, etc.) But it&#39;s easy enough to implement the same idea without any fancy modern stuff."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1441978858, "last_edit_date": 1441978858, "creation_date": 1441823524, "answer_id": 32486831, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32486831#32486831", "title": "Array of C strings, initialized with string literals", "body": "<p><strong>Since this code requires C++11, there's a lower cost C++11 solution in another answer below.</strong> I'm leaving this one for posterity.</p>\n\n<p>There are pretty much two choices: ignore it and <code>const_cast</code>, or do the right thing. Since this is modern C++, you're supposed to have nice, RAII classes. Thus, the simplest, safest thing to do is to safely wrap such an array. </p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/args-cstrings-32484688\n#include &lt;initializer_list&gt;\n#include &lt;type_traits&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cassert&gt;\n#include &lt;vector&gt;\n\nclass Args {\n   struct str_vector : std::vector&lt;char*&gt; {\n      ~str_vector() { for (auto str : *this) free(str); }\n   } m_data;\n   void append_copy(const char * s) {\n      assert(s);\n      auto copy = strdup(s);\n      if (copy) m_data.push_back(copy); else throw std::bad_alloc();\n   }\npublic:\n   Args(std::initializer_list&lt;const char*&gt; l) {\n      for (auto str : l) append_copy(str);\n      m_data.push_back(nullptr);\n   }\n   template &lt;std::size_t N&gt;\n   Args(const char * const (&amp;l)[N]) {\n      for (auto str : l) append_copy(str);\n      m_data.push_back(nullptr);\n   }\n   /// Initializes the arguments with a null-terminated array of strings.\n   template&lt;class C, typename = typename std::enable_if&lt;std::is_same&lt;C, char const**&gt;::value&gt;::type&gt;\n   Args(C l) {\n      while (*l) append_copy(*l++);\n      m_data.push_back(nullptr);\n   }\n   /// Initializes the arguments with an array of strings with given number of elements.\n   Args(const char ** l, size_t count) {\n      while (count--) append_copy(*l++);\n      m_data.push_back(nullptr);\n   }\n   Args(Args &amp;&amp; o) = default;\n   Args(const Args &amp;) = delete;\n   size_t size() const { return m_data.size() - 1; }\n   char ** data() { return m_data.data(); }\n   bool operator==(const Args &amp; o) const {\n      if (size() != o.size()) return false;\n      for (size_t i = 0; i &lt; size(); ++i)\n         if (strcmp(m_data[i], o.m_data[i]) != 0) return false;\n      return true;\n   }\n};\n</code></pre>\n\n<p>Let's see how it works:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern \"C\" int gsapi_init_with_args(void*, int argc, char** argv) {\n   for (int i = 0; i &lt; argc; ++i)\n      std::cout &lt;&lt; \"arg \" &lt;&lt; i &lt;&lt; \"=\" &lt;&lt; argv[i] &lt;&lt; std::endl;\n   return 0;\n}\n\nint main()\n{\n   Args args1 { \"foo\", \"bar\", \"baz\" };\n   const char * args2i[] { \"foo\", \"bar\", \"baz\", nullptr };\n   Args args2 { (const char **)args2i };\n   const char * args3i[] { \"foo\", \"bar\", \"baz\" };\n   Args args3 { args3i };\n   const char * const args4i[] { \"foo\", \"bar\", \"baz\" };\n   Args args4 { args4i };\n   const char * args5i[] { \"foo\", \"bar\", \"baz\" };\n   Args args5 { args5i, sizeof(args5i)/sizeof(args5i[0]) };\n\n   assert(args1 == args2);\n   assert(args2 == args3);\n   assert(args3 == args4);\n   assert(args4 == args5);\n\n   gsapi_init_with_args(nullptr, args1.size(), args1.data());\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>arg 0=foo\narg 1=bar\narg 2=baz\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1441863033, "last_edit_date": 1441863033, "creation_date": 1441862630, "answer_id": 32493759, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32493759#32493759", "title": "Array of C strings, initialized with string literals", "body": "<p>A C++14 solution.</p>\n\n<pre><code>#define W(x) \\\n  (([](auto&amp; s)-&gt;char* \\\n   { \\\n     static char r[sizeof(s)]; \\\n     strcpy (r, s); \\\n     return r; \\\n   })(x))\n\nchar* argv[] = \n  { W(\"--foo=bar\", \n    W(\"baz\"),\n    nullptr\n  };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1441978754, "last_edit_date": 1441978754, "creation_date": 1441978278, "answer_id": 32524731, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals/32524731#32524731", "title": "Array of C strings, initialized with string literals", "body": "<p>Inspired by n.m.'s C++14 version, here's a C++11 version. The trick is to use an evaluated empty lambda expression to generate a fresh type, so that each instantiation of <code>W__</code> is unique.</p>\n\n<pre><code>template &lt;typename T, int N&gt; static char * W__(const char (&amp;src)[N], T) {\n   static char storage[N];\n   strcpy(storage, src);\n   return storage;\n}\n\n#define W(x) W__(x, []{})\n\nchar * argv[] = {\n   W(\"foo\"),\n   W(\"bar\")\n};\n</code></pre>\n\n<p>The <code>static</code> in front of <code>W__</code>'s return type means that <code>W__</code> has internal linkage and won't bloat the object file with extra symbols. It has nothing to do with the <code>static</code> in front  of <code>storage</code>, as the latter indicates the static storage duration for the local variable. The code below would be perfectly valid, but of course doing the wrong thing and having undefined behavior:</p>\n\n<pre><code>template &lt;typename T, int N&gt; static char * BAD(const char (&amp;src)[N], T) {\n   char storage[N];\n   strcpy(storage, src);\n   return storage;\n}\n</code></pre>\n\n<p>Since a lambda has to be evaluated, you can't simply make its type a template argument:</p>\n\n<pre><code>template&lt;typename&gt; void G();\nG&lt;decltype([]{})&gt;(); // doesn't work\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4166379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a66210e4f1b46e5db1d23238735fc5aa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Powell", "link": "https://stackoverflow.com/users/4166379/stephen-powell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 32484844, "answer_count": 7, "score": 1, "last_activity_date": 1441978858, "creation_date": 1441815637, "last_edit_date": 1495535202, "question_id": 32484688, "link": "https://stackoverflow.com/questions/32484688/array-of-c-strings-initialized-with-string-literals", "title": "Array of C strings, initialized with string literals", "body": "<p>The <a href=\"http://www.ghostscript.com/doc/current/API.htm\" rel=\"nofollow noreferrer\">Ghostscript interpreter API</a> has a function</p>\n\n<pre><code>GSDLLEXPORT int GSDLLAPI gsapi_init_with_args(void *instance, int argc, char **argv)\n</code></pre>\n\n<p>The final argument <code>argv</code> is a pointer to an array of C strings, which are interpreted as command-line arguments. I obviously cannot change the signature of the function <code>gsapi_init_with_args</code> to take a <code>const char **</code> argument instead.</p>\n\n<p>If I were willing to ignore (or silence) the <code>deprecated conversion from string constant to 'char*'</code> warning, then I would write simply</p>\n\n<pre><code>char *gs_argv[] = {\"\", \"-dNOPAUSE\", \"-dBATCH\", ...};\n</code></pre>\n\n<p>and pass <code>gs_argv</code> as the final argument. But I would prefer to fix my code so that I am not relying on an external function to behave in the way I expect it to (and effectively treat <code>gs_argv</code> as <code>const char**</code>).</p>\n\n<p>Is there any simple way to declare <code>gs_argv</code> as an array of pointers to (non-<code>const</code>) C strings, and initialize its elements with string literals? (That is, using a similar approach to how I can initialize a single C string: using <code>char c_str[] = \"abc\"</code>.) The best I can think of is to use</p>\n\n<pre><code>const char *gs_argv0[] = {\"\", \"-dNOPAUSE\", \"-dBATCH\", ...};\n</code></pre>\n\n<p>and then copy the contents, element by element, into <code>gs_argv</code>.</p>\n\n<hr>\n\n<p>Please note that I understand why the compiler gives this warning (and have read the answers to, among others, <a href=\"https://stackoverflow.com/questions/14896329/warning-converting-from-string-const-to-char-in-initalizing-array-of-c-strings\">this question</a>). I am asking for a solution, rather than an explanation.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441817127, "post_id": 32484673, "comment_id": 52831174, "body": "Are there are only 256 chars, you could just use an array for this."}], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "is_accepted": false, "score": 2, "last_activity_date": 1441816233, "creation_date": 1441816233, "answer_id": 32484882, "question_id": 32484673, "link": "https://stackoverflow.com/questions/32484673/c-find-the-most-occurrence-of-a-char-using-maps/32484882#32484882", "title": "C++ Find the most occurrence of a char using maps", "body": "<p><code>std::max_element</code> will return ForwardIterator which in your case will be <code>map&lt;char,int&gt;::iterator</code> pointing to <code>pair&lt;char,int&gt;</code>. You have to change the last line to </p>\n\n<pre><code> int max = max_element(count.begin(), count.end(),count.value_comp())-&gt;second;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1441816282, "creation_date": 1441816282, "answer_id": 32484899, "question_id": 32484673, "link": "https://stackoverflow.com/questions/32484673/c-find-the-most-occurrence-of-a-char-using-maps/32484899#32484899", "title": "C++ Find the most occurrence of a char using maps", "body": "<p>When you dereference <code>std::map::iterator</code> you get <code>std::pair</code> and you try to assign it to <code>int</code>. Correct syntax would be:</p>\n\n<pre><code>int max = max_element(count.begin(), count.end(), count.value_comp())-&gt;second;\n</code></pre>\n\n<p>but you should check if there are elements in that map, otherwise you may dereference <code>count.end()</code> with UB. That would happen if file is empty for example.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 4130393, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f872bf73b709d248b0417042ceafb641?s=128&d=identicon&r=PG&f=1", "display_name": "SaladSnake", "link": "https://stackoverflow.com/users/4130393/saladsnake"}, "edited": false, "score": 0, "creation_date": 1441816881, "post_id": 32485009, "comment_id": 52831038, "body": "Thanks for the help. The most frequent it now returning as a smiley face lol?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": true, "score": 2, "last_activity_date": 1441817322, "last_edit_date": 1441817322, "creation_date": 1441816644, "answer_id": 32485009, "question_id": 32484673, "link": "https://stackoverflow.com/questions/32484673/c-find-the-most-occurrence-of-a-char-using-maps/32485009#32485009", "title": "C++ Find the most occurrence of a char using maps", "body": "<p>You have two issues</p>\n\n<ul>\n<li>count.value_comp() compares the keys of map::value_type(s), which are pairs</li>\n<li>max_element returns an iterator to a pair</li>\n</ul>\n\n<p>You might change the code to:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;map&gt;\n\nint main() {\n    std::ifstream infile(\"filename\");\n    if (!infile.is_open())\n        return 1;    // Check if file opened correctly\n    char x;\n    typedef std::map&lt;char, int&gt; map_type;\n    map_type count;\n    while (infile &gt;&gt; x) count[x]++;\n    for (auto it : count)    // Pull this out of the while loop\n        std::cout &lt;&lt; it.first &lt;&lt; \" \" &lt;&lt; it.second &lt;&lt; std::endl;\n    auto less_count = [] (const map_type::value_type&amp; a, const map_type::value_type&amp; b) {\n        return a.second &lt; b.second;\n    };\n    auto max_pair = std::max_element(count.begin(), count.end(), less_count);\n    int  max = max_pair-&gt;second;\n    std::cout &lt;&lt; max &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 4130393, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f872bf73b709d248b0417042ceafb641?s=128&d=identicon&r=PG&f=1", "display_name": "SaladSnake", "link": "https://stackoverflow.com/users/4130393/saladsnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 32485009, "answer_count": 3, "score": 1, "last_activity_date": 1441817322, "creation_date": 1441815587, "last_edit_date": 1441816039, "question_id": 32484673, "link": "https://stackoverflow.com/questions/32484673/c-find-the-most-occurrence-of-a-char-using-maps", "title": "C++ Find the most occurrence of a char using maps", "body": "<p>I'm trying to find the most occurrence of  char in a dat file. so if there are 24 e's in the file and 8 c's id like it to print out 'e'. I'm getting an error on the \" * \" of the int max var. The is the error: </p>\n\n<p>Error   3   error C2440: 'initializing' : cannot convert from 'std::pair' to 'int'  </p>\n\n<pre><code>ifstream infile(filename);\n    if (!infile.is_open()) return;    \n    char x;\n    map&lt;char, int&gt; count;\n    while (infile &gt;&gt; x) count[x]++;\n    for (auto it : count)    \n        cout &lt;&lt; it.first &lt;&lt; \" \" &lt;&lt; it.second &lt;&lt; endl;\n    int max = *max_element(count.begin(), count.end(), count.value_comp());\n    cout &lt;&lt; max &lt;&lt; endl;\n    return ' ';\n</code></pre>\n\n<p>as always any help is appreciated!</p>\n"}, {"tags": ["c++", "visual-studio-2010", "inheritance", "g++", "virtual-destructor"], "comments": [{"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 1, "creation_date": 1441815112, "post_id": 32484385, "comment_id": 52829963, "body": "Who voted to close? give the reason why you voted to close?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1441815432, "post_id": 32484385, "comment_id": 52830202, "body": "I think this is a good question."}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1441817685, "post_id": 32484385, "comment_id": 52831474, "body": "Presumably just differences in how the compilers handle unused code at various stages of the compiling process.  Note that in VS2015 there&#39;s a highlighted error in the editor saying it&#39;s inaccessible before you even attempt to compile it."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1441818152, "post_id": 32484385, "comment_id": 52831727, "body": "Who downvoted it? Why? Give the reason for downvote."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441861711, "post_id": 32484385, "comment_id": 52847059, "body": "@NeilKirk: Still not get any useful answer. Why so much delay to answer this question.?"}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1457325393, "post_id": 32484385, "comment_id": 59339206, "body": "@Downvoters: dare to write the reason for downvotes."}], "answers": [{"tags": [], "owner": {"reputation": 667, "user_id": 3602281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5yMLT.jpg?s=128&g=1", "display_name": "Don Larynx", "link": "https://stackoverflow.com/users/3602281/don-larynx"}, "is_accepted": false, "score": -2, "last_activity_date": 1441818234, "creation_date": 1441818234, "answer_id": 32485472, "question_id": 32484385, "link": "https://stackoverflow.com/questions/32484385/same-program-behavior-is-different-in-g-msvs-2010/32485472#32485472", "title": "Same program behavior is different in g++ &amp; MSVS 2010", "body": "<p>If the base destructor is private, it won't be able to delete inherited instances. Simple as that. This isn't standardized, however.</p>\n"}, {"comments": [{"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1441823284, "post_id": 32485605, "comment_id": 52834263, "body": "You&#39;ve created object of Derived. That&#39;s why it fails in compilation because derived destructor is private. Have you tried this program keeping main() function empty in VS 2012 or later?"}, {"owner": {"reputation": 3390, "user_id": 4279361, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NTTs1qey-Oc/AAAAAAAAAAI/AAAAAAAAAJs/7XKsUkppAs4/photo.jpg?sz=128", "display_name": "Joerg S", "link": "https://stackoverflow.com/users/4279361/joerg-s"}, "reply_to_user": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1441826066, "post_id": 32485605, "comment_id": 52835598, "body": "Yes, this is what I tried first. Compilation works in that case. I only made use of that class because I was quite sure that it only compiles because it&#39;s not used and so VS compiler doesn&#39;t care."}, {"owner": {"reputation": 3390, "user_id": 4279361, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NTTs1qey-Oc/AAAAAAAAAAI/AAAAAAAAAJs/7XKsUkppAs4/photo.jpg?sz=128", "display_name": "Joerg S", "link": "https://stackoverflow.com/users/4279361/joerg-s"}, "reply_to_user": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1447748962, "post_id": 32485605, "comment_id": 55272032, "body": "Looks like the question is not yet ansered for you. Anser is: The code has an error which happily compiles in Visual Studio because the errorneous code is not used. GCC does some extra error checking and therefore can tell you about that error."}], "tags": [], "owner": {"reputation": 3390, "user_id": 4279361, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NTTs1qey-Oc/AAAAAAAAAAI/AAAAAAAAAJs/7XKsUkppAs4/photo.jpg?sz=128", "display_name": "Joerg S", "link": "https://stackoverflow.com/users/4279361/joerg-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1441818752, "creation_date": 1441818752, "answer_id": 32485605, "question_id": 32484385, "link": "https://stackoverflow.com/questions/32484385/same-program-behavior-is-different-in-g-msvs-2010/32485605#32485605", "title": "Same program behavior is different in g++ &amp; MSVS 2010", "body": "<p>To me it looks like this compiles in VS2010 just because the class 'Derived' is never used. I tried the same in VS2012. If you're going to use that class in VS2012 compilation fails as well:</p>\n\n<pre><code>class Base\n{\n    virtual ~Base()=0;      /* A */\n};\nBase::~Base() { }\n\nclass Derived : protected virtual Base\n{\n  ~Derived()                    /* B */\n  { }\n};\n\nint main() \n{\n  Derived derived;\n}   \n</code></pre>\n\n<p>Error Message was:</p>\n\n<pre><code>1&gt;c:\\repositories\\teststrongvirtualdestructor\\teststrongvirtualdestructor\\teststrongvirtualdestructor.cpp(20): error C2248: 'Derived::__vbaseDtor' : cannot access private member declared in class 'Derived'\n1&gt;          c:\\repositories\\teststrongvirtualdestructor\\teststrongvirtualdestructor\\teststrongvirtualdestructor.cpp(14) : compiler has generated 'Derived::__vbaseDtor' here\n1&gt;          c:\\repositories\\teststrongvirtualdestructor\\teststrongvirtualdestructor\\teststrongvirtualdestructor.cpp(12) : see declaration of 'Derived'\n1&gt;\n1&gt;Build FAILED.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 1, "last_activity_date": 1457189346, "creation_date": 1457189346, "answer_id": 35815491, "question_id": 32484385, "link": "https://stackoverflow.com/questions/32484385/same-program-behavior-is-different-in-g-msvs-2010/35815491#35815491", "title": "Same program behavior is different in g++ &amp; MSVS 2010", "body": "<p>I would argue that g++ and clang (and VS2012) are correct.  And that VS2010 is incorrect.</p>\n\n<p>Essentially, to destruct an instance of <code>Derived</code>, the compiler must determine if the destructor of <code>Base</code> is accessible.   A <code>private</code> destructor of a base class is not accessible to the derived class, so <code>Derived</code> cannot be destructed.</p>\n\n<p>I would suggest this does not require that the class be instantiated.   Under the \"separate compilation\" model, a compiler must assume that some other compilation unit (invisible to the compiler when compiling <em>this</em> compilation unit) will instantiate and/or destroy an instance of the class.   Which means it should check/compile/emit code for the destructor in every compilation unit which has visibility of the definition of that destructor.</p>\n\n<p>Rules related to the \"separate compilation\" model are among those known informally as \"as if\" rules - an implementation must act <em>as if</em> it follows each rule, even if it does things differently under the hood.</p>\n\n<p>The thing is, the various \"as if\" rules are where compiler vendors often take shortcuts - in the interests of speed of compilation, or other things.</p>\n\n<p>This is only one possible explanation of why VS2010 is getting it wrong.</p>\n\n<p>The upshot is that VS2010 is not properly checking accessibility of destructors in such cases.   Older Microsoft C++ compilers were quite notorious for being less than fully standard compliant.  In recent years, Microsoft has strategically sought to improve their conformance with the standard, but it takes time for such things to flush out.    This would be consistent with the observation that VS2010 does not complain, but VS2012 (like other compilers) does.</p>\n\n<p>One possible explanation of this is that VS2010 does not fully comply with requirements of \"separate compilation\".   Another is that is simply takes shortcuts when checking accessibility of private members in base classes.   To determine if either of these - or something else - is the explanation, it would probably be necessary to dig into details of how VS2010 is implemented.</p>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "accepted_answer_id": 35815491, "answer_count": 3, "score": -4, "last_activity_date": 1457200675, "creation_date": 1441814690, "last_edit_date": 1495540417, "question_id": 32484385, "link": "https://stackoverflow.com/questions/32484385/same-program-behavior-is-different-in-g-msvs-2010", "title": "Same program behavior is different in g++ &amp; MSVS 2010", "body": "<p>I was reading <a href=\"https://stackoverflow.com/questions/3618760/c-protected-abstract-virtual-base-pure-virtual-private-destructor\">this</a>. The accepted answer of the linked question contains following code:</p>\n\n<pre><code>class Base\n {\n    private:\n        virtual ~Base() = 0;   /* A */\n };\n\n class Derived : protected virtual Base\n {\n    private:\n     ~Derived () {.......}    /* B */\n };\n</code></pre>\n\n<p>I tried this program in g++ 4.8.1, 4.9.2 &amp; MSVS 2010 compiler (see live demo <a href=\"http://ideone.com/pGUgzR\" rel=\"nofollow noreferrer\">here.</a>). But g++ 4.8.1 &amp; 4.9.2 gives me an compiler error while MSVS 2010 compile it without any error.\nClang also gives an error see <a href=\"https://goo.gl/RWRtB1\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So, why g++ shows error message? I haven't created an object of derived class. So, I think it shouldn't give compilation error &amp; MSVS 2010 is correct.</p>\n\n<p>But why both this compiler behaves differently?</p>\n\n<p>Which compiler is right regarding behavior of this program? Is this bug in any of these compilers or something other?</p>\n\n<p>I am indeed getting confused.</p>\n\n<p>Your help will be highly appreciated.</p>\n"}, {"tags": ["c++", "pointers", "destructor"], "comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 1, "creation_date": 1441815594, "post_id": 32484307, "comment_id": 52830300, "body": "I expect the missing word (you forgot to type) when you said &quot;making <code>a</code> a pointer&quot; was &quot;not&quot; but the missing word should have been &quot;smart&quot;.  The clean answer was that <code>a</code> should have been a smart pointer, so it is deleted in correct sequence."}, {"owner": {"reputation": 22053, "user_id": 19404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/180eea9fb31f162096da95e7a8c744cf?s=128&d=identicon&r=PG", "display_name": "Gerald", "link": "https://stackoverflow.com/users/19404/gerald"}, "edited": false, "score": 1, "creation_date": 1441815896, "post_id": 32484307, "comment_id": 52830491, "body": "This doesn&#39;t really answer your question, but I would suggest just making B a pointer. You can do what you are asking by using a smart pointer, but I think it is a dangerous practice to rely on the order of destruction based on member order unless you have a really good reason, and I don&#39;t think this is one. It&#39;s better to just make them both pointers and destruct them in the correct order, with a comment explaining why they must be destructed in that order."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "reply_to_user": {"reputation": 22053, "user_id": 19404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/180eea9fb31f162096da95e7a8c744cf?s=128&d=identicon&r=PG", "display_name": "Gerald", "link": "https://stackoverflow.com/users/19404/gerald"}, "edited": false, "score": 0, "creation_date": 1441891720, "post_id": 32484307, "comment_id": 52865705, "body": "@Gerald, the design clearly must depend on the sequence of construction.  Use of a smart pointer would not create a new dependence on sequence.  It would just depend on destruction sequence being the reverse of construction sequence, which is a rule built into the language (except when you force things otherwise, as the OP did by using a non smart pointer)."}, {"owner": {"reputation": 22053, "user_id": 19404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/180eea9fb31f162096da95e7a8c744cf?s=128&d=identicon&r=PG", "display_name": "Gerald", "link": "https://stackoverflow.com/users/19404/gerald"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1441910161, "post_id": 32484307, "comment_id": 52877582, "body": "@JSF - If the order of ctor/dtor matters like this, I would prefer to make it explicit, rather than relying on the member order. Yes the rule is built into the language, but that doesn&#39;t mean you want to rely on it for convenience. In a team environment especially you are just asking for trouble with this design.  i.e. one day there may come a coding standard that members should be declared in alphabetical order, and maybe they even use a tool to bring the code up to standard, and this is going to break and who knows how long it will take to figure out what happened. (Been there.)"}, {"owner": {"reputation": 22053, "user_id": 19404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/180eea9fb31f162096da95e7a8c744cf?s=128&d=identicon&r=PG", "display_name": "Gerald", "link": "https://stackoverflow.com/users/19404/gerald"}, "edited": false, "score": 0, "creation_date": 1441910315, "post_id": 32484307, "comment_id": 52877680, "body": "If they&#39;re actually named A and B he will be okay, but somehow I doubt that :)"}], "answers": [{"comments": [{"owner": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "edited": false, "score": 0, "creation_date": 1441814837, "post_id": 32484362, "comment_id": 52829757, "body": "As I stated in the question, that I know this, but want to know if it&#39;s possible without doing this. (I edited the question to make this restriction clearer, in case it wasn&#39;t clear enough)"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "edited": false, "score": 0, "creation_date": 1441815110, "post_id": 32484362, "comment_id": 52829962, "body": "@Kritzefitz You have to make some modification to <code>Foo</code>, the only matter is what.."}, {"owner": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "edited": false, "score": 0, "creation_date": 1441815332, "post_id": 32484362, "comment_id": 52830136, "body": "Sure I have to change something. But I don&#39;t know what options there are, besides the two I excluded. Maybe there is some more elegant solution, I didn&#39;t know about."}], "tags": [], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "is_accepted": false, "score": -2, "last_activity_date": 1441815174, "last_edit_date": 1441815174, "creation_date": 1441814609, "answer_id": 32484362, "question_id": 32484307, "link": "https://stackoverflow.com/questions/32484307/calling-destructor-of-non-pointer-member-before-pointer-member/32484362#32484362", "title": "Calling destructor of non-pointer member before pointer member", "body": "<p>Edit: corrected mistake (thanks @Yakk)</p>\n\n<p>You need to make <code>B</code> a pointer in <code>Foo</code> so you can control the order of deletion in the destructor OR make <code>A</code> a non-pointer and position it before <code>B</code> in the member order of <code>Foo</code>, so that it is destroyed after <code>B</code>, but this makes the code brittle as the order of member declaration is now important. Comment this in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1441815258, "post_id": 32484455, "comment_id": 52830084, "body": "You need to make <code>a</code> protected or public and I would suggest private inheritance to match the original design."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1441814909, "creation_date": 1441814909, "answer_id": 32484455, "question_id": 32484307, "link": "https://stackoverflow.com/questions/32484307/calling-destructor-of-non-pointer-member-before-pointer-member/32484455#32484455", "title": "Calling destructor of non-pointer member before pointer member", "body": "<p>Create an intermediate class.</p>\n\n<pre><code> class PreFoo \n {\n   A* a:\n    ...\n };\n\n class Foo : public PreFoo\n {\n   B b;\n   ...\n };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1441815105, "creation_date": 1441815105, "answer_id": 32484517, "question_id": 32484307, "link": "https://stackoverflow.com/questions/32484307/calling-destructor-of-non-pointer-member-before-pointer-member/32484517#32484517", "title": "Calling destructor of non-pointer member before pointer member", "body": "<p>Follow RAII principles.</p>\n\n<p>Change <code>Foo::a</code> to <code>std::unique_ptr&lt;A&gt;</code>.  Remove the <code>delete</code> from <code>~Foo</code>.</p>\n\n<p>It will now be destroyed after the end of <code>~Foo</code> and after <code>b.~Bar()</code>.</p>\n\n<p>Note that members are created in the order of declaration, and destroyed in the opposite order.  (The order in initialization lists does not change order of creation, surprisingly).  So if you want <code>a</code> to outlive <code>b</code>, simply declare it first.</p>\n"}], "owner": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 32484517, "answer_count": 3, "score": 3, "last_activity_date": 1463569604, "creation_date": 1441814405, "last_edit_date": 1463569604, "question_id": 32484307, "link": "https://stackoverflow.com/questions/32484307/calling-destructor-of-non-pointer-member-before-pointer-member", "title": "Calling destructor of non-pointer member before pointer member", "body": "<p>Consider three classes like this:</p>\n\n<pre><code>class A {\n    int bar;\n};\n\nclass B {\n    A* a;\npublic:\n    B(*A na)\n    : a(na)\n    {}\n\n    ~B() {\n        a-&gt;bar = 0;\n    }\n};\n\nclass Foo {\n    A* a;\n    B b;\npublic:\n    Foo()\n    : a(new A)\n    , b(a)\n    {}\n\n    ~Foo() {\n        delete a;\n    }\n};\n</code></pre>\n\n<p>Creating an instance of <code>Foo</code>, results in a <code>Foo</code> with a pointer to an <code>A</code> and a <code>B</code> with the same pointer.</p>\n\n<p>When the instance of <code>Foo</code> is deleted, The pointer <code>a</code> is deleted and then the destructor of <code>b</code> is called, but <code>~B</code> tries to access <code>a</code>, which was freed in <code>~Foo</code>, which results in a segmentation fault.</p>\n\n<p>Is there a way to call the destructor of <code>b</code> before running the body of <code>~Foo</code>?</p>\n\n<p>I know I could solve this, by making either <code>b</code> a pointer or making <code>a</code> a non-pointer. The latter doesn't work if <code>A</code> is abstract and I would like to know if it's possible without making <code>b</code> a pointer.</p>\n\n<p>PS: <code>A</code> and <code>B</code> are both from a library, so I can't change their implementation.</p>\n"}, {"tags": ["c++", "inheritance", "move-semantics"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1441815116, "post_id": 32484231, "comment_id": 52829967, "body": "A good guideline is <a href=\"http://flamingdangerzone.com/cxx11/rule-of-zero/\" rel=\"nofollow noreferrer\">the rule of zero</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1441815208, "post_id": 32484231, "comment_id": 52830041, "body": "@JonathanWakely Although I still prefer writing <code>=default</code> and <code>=delete</code> everywhere."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441815306, "post_id": 32484231, "comment_id": 52830111, "body": "@Barry, yes me too, but I consider that to still follow the rule, just being more explicit about the fact you are consciously not defining the members yourself."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1858, "user_id": 3699691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bb27331e7d100014ae30427ff7950a1?s=128&d=identicon&r=PG&f=1", "display_name": "downhillFromHere", "link": "https://stackoverflow.com/users/3699691/downhillfromhere"}, "edited": false, "score": 1, "creation_date": 1441816976, "post_id": 32484462, "comment_id": 52831088, "body": "@downhillFromHere <code>default</code> explicitly does the default version of whatever the function is. If you have member variables, a <code>default</code> assignment operator will be a member-wise assignment. If you need to do resource management, you should encapsulate that so you can take advantage of Rule of Zero."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1441814929, "creation_date": 1441814929, "answer_id": 32484462, "question_id": 32484231, "link": "https://stackoverflow.com/questions/32484231/inherit-move-operations-without-access-to-base-class-member-variables/32484462#32484462", "title": "&quot;Inherit&quot; move operations without access to base-class member variables", "body": "<blockquote>\n  <p>which seems trustworthy ...</p>\n</blockquote>\n\n<p>It <em>seems</em> trustworthy. But it isn't. You see, this:</p>\n\n<pre><code>Vec(Vec&amp;&amp; v)\n</code></pre>\n\n<p>is a move constructor. So it would get called with an rvalue. But once we're inside here, <code>v</code> is an lvalue! Rule of thumb: if it has a name, it's an lvalue. So this part:</p>\n\n<pre><code>: std::vector&lt;T&gt;(v)\n</code></pre>\n\n<p>doesn't call the <em>move</em> constructor of <code>std::vector</code>. It calls the <em>copy</em> constructor. You need to explicitly cast <code>v</code> to an rvalue to do the right thing:</p>\n\n<pre><code>Vec(Vec&amp;&amp; v) : std::vector&lt;T&gt;(std::move(v)) { }\nexplicit Vec(std::vector&lt;T&gt;&amp;&amp; v): std::vector&lt;T&gt;(std::move(v)) { }\n</code></pre>\n\n<p>Or, better yet:</p>\n\n<pre><code>Vec(Vec&amp;&amp; ) = default;\n</code></pre>\n\n<p>Similarly, the foolproof way of writing the assignment operators is just <code>default</code>-ing them:</p>\n\n<pre><code>Vec&amp; operator=(Vec const&amp; ) = default;\nVec&amp; operator=(Vec&amp;&amp; ) = default;\n</code></pre>\n\n<p>But if you really have special logic, make sure you remember to cast to rvalue there too:</p>\n\n<pre><code>Vec&amp; operator=(Vec&amp;&amp; v) {\n    std::vector&lt;T&gt;::operator=(std::move(v));\n    // stuff\n    return *this;\n}\n</code></pre>\n\n<p>Or even better, move your special logic into a self-contained unit so that <code>default</code>-ing is still right. </p>\n"}], "owner": {"reputation": 1858, "user_id": 3699691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bb27331e7d100014ae30427ff7950a1?s=128&d=identicon&r=PG&f=1", "display_name": "downhillFromHere", "link": "https://stackoverflow.com/users/3699691/downhillfromhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "accepted_answer_id": 32484462, "answer_count": 1, "score": 3, "last_activity_date": 1441814929, "creation_date": 1441814184, "question_id": 32484231, "link": "https://stackoverflow.com/questions/32484231/inherit-move-operations-without-access-to-base-class-member-variables", "title": "&quot;Inherit&quot; move operations without access to base-class member variables", "body": "<p>Being new to rvalue references and move semantics, I'm trying to derive a simple template class from <code>std::vector</code> (I promise I'll be careful with the lack of virtual destructor). To \"inherit\" the move constructors, I simply call the base class counterparts and <code>std::move</code>,</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Vec: public std::vector&lt;T&gt; {\n  public:\n    ...\n    //move ctors\n    Vec(Vec&amp;&amp; v): std::vector&lt;T&gt;(v) { //move extra members with std::move }\n    explicit Vec(std::vector&lt;T&gt;&amp;&amp; v): std::vector&lt;T&gt;(v) { //same as above }\n    ...\n};\n</code></pre>\n\n<p>which seems trustworthy based on my understanding of C++. However, I have a lot less confidence in my approach for the move assignment operators,</p>\n\n<pre><code>    //assignment\n    Vec&amp; operator=(const Vec&amp; v) {\n        std::vector&lt;T&gt;::operator=(v);\n        if (&amp;v != this)\n          //copy extra members\n        return *this;\n    }\n    //move assignment\n    Vec&amp; operator=(Vec&amp;&amp; v) {\n        std::vector&lt;T&gt;::operator=(v);\n        //move extra members with std::move\n        return *this;\n    }\n</code></pre>\n\n<p>Is this a foolproof way of achieving what I want? Are there better alternatives in terms of good practices?</p>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1441814084, "post_id": 32484175, "comment_id": 52829213, "body": "Is it because I insert <code>str.begin()-&gt;first.c_str()</code>, which may be a temp variable?"}], "answers": [{"tags": [], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "is_accepted": true, "score": 0, "last_activity_date": 1441814282, "creation_date": 1441814282, "answer_id": 32484263, "question_id": 32484175, "link": "https://stackoverflow.com/questions/32484175/c-map-set-iterator-not-dereferencable-mapconst-char-string/32484263#32484263", "title": "c++ map/set iterator not dereferencable --- map&lt;const char *, string&gt;", "body": "<p>A map with <code>const char *</code> as they key does NOT compare the strings, only the pointer addresses. Two strings <code>\"a\"</code> at different addresses will not compare equal. You must use <code>std::string</code> or a custom compare function. Do not make assumptions about the addresses of string literals.</p>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 32484263, "answer_count": 1, "score": -2, "last_activity_date": 1441814282, "creation_date": 1441814025, "question_id": 32484175, "link": "https://stackoverflow.com/questions/32484175/c-map-set-iterator-not-dereferencable-mapconst-char-string", "title": "c++ map/set iterator not dereferencable --- map&lt;const char *, string&gt;", "body": "<pre><code>class A\n{\npublic:\n    map&lt;string, string&gt; strs; // it's initialized in a function\n    map&lt;const char *, string&gt; myMap;\n    virtual void setMyMap()\n    {\n        myMap.insert({str.begin()-&gt;first.c_str(), \"aaa\"});\n    }\n};\n\nclass B : public class A\n{};\n\nclass C : public class B\n{\n    virtual void setMyMap()\n    {\n        B::setMyMap();\n        for (auto it = myMap.begin(); it != myMap.end(); ++it)\n        {\n            cout &lt;&lt; it-&gt;first &lt;&lt; std::endl; // \"a\"\n        }\n        cout&lt;&lt;(myMap.find(\"a\") == myMap.end()); // 1\n        myMap.find(\"a\")-&gt;first; // get the error\n    }\n};\n</code></pre>\n\n<p>Here is my code.<br>\nI get the error <code>map/set iterator not dereferencable</code> in the function <code>setMyMap</code> in the class <code>C</code>.<br>\nI get this error because <code>myMap.find(\"a\") == myMap.end()</code> is <code>true</code>.<br>\nBut I don't know why. To my surprise, I just print this map in the same function and I can see all of the <code>first</code> of this map. Here I can see <code>a</code>. I really don't know why I try to find the same <code>first</code> but failed. <code>a</code> is definitely in the map. Otherwise I can't print it with that <code>for</code>.</p>\n"}, {"tags": ["c++", "pascal"], "comments": [{"owner": {"reputation": 59, "user_id": 4668948, "user_type": "registered", "profile_image": "https://graph.facebook.com/678864505576112/picture?type=large", "display_name": "Calin Chaly", "link": "https://stackoverflow.com/users/4668948/calin-chaly"}, "edited": false, "score": 0, "creation_date": 1441813842, "post_id": 32484059, "comment_id": 52829031, "body": "Line 12 is &quot;if(x%5=0){&quot;"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1441813931, "post_id": 32484059, "comment_id": 52829109, "body": "while we are at it: <code>if (n=0)</code> should probably be <code>if (n == 0)</code> as well. but you should really <b>turn on compiler warnings</b> and <b>learn the basics of the language</b> before wasting our time by asking trivially-answerable questions."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1441814081, "post_id": 32484059, "comment_id": 52829209, "body": "Also, indent your code and remove extra consecutive blank lines for readability,"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4668948, "user_type": "registered", "profile_image": "https://graph.facebook.com/678864505576112/picture?type=large", "display_name": "Calin Chaly", "link": "https://stackoverflow.com/users/4668948/calin-chaly"}, "edited": false, "score": 0, "creation_date": 1441813944, "post_id": 32484127, "comment_id": 52829118, "body": "Thank you. Such a small problem"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1441814121, "post_id": 32484127, "comment_id": 52829232, "body": "&quot;egality&quot; -&gt; &quot;equality&quot;"}], "tags": [], "owner": {"reputation": 294, "user_id": 1448577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001bebfc917a3ad6a951d71ec04fbc95?s=128&d=identicon&r=PG", "display_name": "Cl&#233;ment", "link": "https://stackoverflow.com/users/1448577/cl%c3%a9ment"}, "is_accepted": false, "score": 0, "last_activity_date": 1441814336, "last_edit_date": 1441814336, "creation_date": 1441813891, "answer_id": 32484127, "question_id": 32484059, "link": "https://stackoverflow.com/questions/32484059/c-error-lvalue-required-as-left-operand-of-assignment/32484127#32484127", "title": "C++ Error &quot;lvalue required as left operand of assignment&quot;", "body": "<p>You need to use == in conditions (while, if, ...) for equality check  in C++.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1441885875, "last_edit_date": 1441885875, "creation_date": 1441814009, "answer_id": 32484170, "question_id": 32484059, "link": "https://stackoverflow.com/questions/32484059/c-error-lvalue-required-as-left-operand-of-assignment/32484170#32484170", "title": "C++ Error &quot;lvalue required as left operand of assignment&quot;", "body": "<p>You have a simple typo: <code>if(x%5=0){</code> is an attempt to <em>assign</em> 0 to <code>x % 5</code> (due to operator precedence modulus is computed before assignment). <code>x % 5</code> cannot be assigned to (it's not an lvalue) and the compiler is telling you that.</p>\n\n<p>The fix, of course, is to write <code>x % 5 == 0</code>.</p>\n\n<p>You're lucky in this case that the error is picked up at <em>compile-time</em>. Something like <code>if (n = 0)</code> (on line 18) might not be, since <code>x = 0</code> is an <em>expression</em> with value 0.</p>\n\n<p>Two ways to guard against that:</p>\n\n<ul>\n<li>Ensure that your compiler warnings are as aggressive as you can bear.  With gcc, I use <code>-Wall -Wextra</code>, and that combination is enough to catch this common problem.</li>\n<li>Some developers will write <code>if (0 == x)</code> since an errant <code>if (0 = x)</code> would be picked up at compile time as an attempt to assign to <code>0</code>. Personally, I find that obfuscating.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3128, "user_id": 2899520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d046c85ed155fb3e964d9dd4c43842a?s=128&d=identicon&r=PG&f=1", "display_name": "LearningC", "link": "https://stackoverflow.com/users/2899520/learningc"}, "is_accepted": false, "score": 0, "last_activity_date": 1441814221, "creation_date": 1441814221, "answer_id": 32484245, "question_id": 32484059, "link": "https://stackoverflow.com/questions/32484059/c-error-lvalue-required-as-left-operand-of-assignment/32484245#32484245", "title": "C++ Error &quot;lvalue required as left operand of assignment&quot;", "body": "<p>Assignment operator requires lvalue means the left side operand need to be a variable/location that can hold a value.\nThis is what is meant by the error.<br>\nWhat you need in your if statement is == likely not assignment as mentioned by other answers</p>\n"}, {"tags": [], "owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "is_accepted": false, "score": 0, "last_activity_date": 1441814528, "creation_date": 1441814528, "answer_id": 32484346, "question_id": 32484059, "link": "https://stackoverflow.com/questions/32484059/c-error-lvalue-required-as-left-operand-of-assignment/32484346#32484346", "title": "C++ Error &quot;lvalue required as left operand of assignment&quot;", "body": "<blockquote>\n  <p>if(x%5 = 0)</p>\n</blockquote>\n\n<p>should be </p>\n\n<blockquote>\n  <p>if(x%5 == 0)</p>\n</blockquote>\n\n<p>\"x%5\" is not an lvalue in that you can not assign a value to it, hence the error.</p>\n"}], "owner": {"reputation": 59, "user_id": 4668948, "user_type": "registered", "profile_image": "https://graph.facebook.com/678864505576112/picture?type=large", "display_name": "Calin Chaly", "link": "https://stackoverflow.com/users/4668948/calin-chaly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1870, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1441885875, "creation_date": 1441813703, "last_edit_date": 1441885541, "question_id": 32484059, "link": "https://stackoverflow.com/questions/32484059/c-error-lvalue-required-as-left-operand-of-assignment", "title": "C++ Error &quot;lvalue required as left operand of assignment&quot;", "body": "<p>I am new to C++ and I have a problem where i have to transform a pseudocode in C++ / C / Pascal language. The answer at the end of the book written in Pascal.</p>\n\n<p>The problem in my C++ code is that at the line 12, I get the error which can be found in the title. Any idea?</p>\n\n<p>Pascal Code: </p>\n\n<pre><code>var n,x:integer;\nbegin\n  n:=0;\nrepeat\n  write('x=');read(X);\n  if x&lt;&gt;0 then\n    if x mod 5 = 0 then \n      n:=n+1\n    else \n      n:=n-1;\nuntil x=0;\nif n=0 then \n  write('yes')\nelse \n  write('no')\nend;\n</code></pre>\n\n<p>My C++ Code:</p>\n\n<pre><code>int main()\n{\n    int x,n;\n    cin&gt;&gt;x;\n    while(x&gt;0)\n    {\n        if(x&gt;0)\n        {\n            if(x%5=0){\n                n=n+1; \n            } else {\n                n=n-1;\n            }\n        }\n        if(n=0){\n            cout&lt;&lt;\"Yes\"&lt;&lt;;\n        } else {\n            cout&lt;&lt;\"No\"&lt;&lt;; \n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "compilation"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 1, "creation_date": 1441813695, "post_id": 32484035, "comment_id": 52828915, "body": "which compiler/platform do you use?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 6, "creation_date": 1441813934, "post_id": 32484035, "comment_id": 52829112, "body": "If your compiler supports precompiled headers using this feature can help reduce the need to recompile the headers every time you build your code."}, {"owner": {"reputation": 970, "user_id": 894755, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f325fff28c15c9666beeea9f19f165a?s=128&d=identicon&r=PG", "display_name": "Tarek", "link": "https://stackoverflow.com/users/894755/tarek"}, "edited": false, "score": 0, "creation_date": 1441814301, "post_id": 32484035, "comment_id": 52829384, "body": "I use intel compiler on linux machine, does it support precompiling? I also can&#39;t install ccache utility since I don&#39;t have root access."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441827995, "post_id": 32484035, "comment_id": 52836542, "body": "Do you need to compile the file every time?  Did one of the dependent header files change?  At my shop, we only rebuild at night by an automated server.  The developers usually only compile files that changed or one of their dependencies changed."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1441899048, "post_id": 32484035, "comment_id": 52871187, "body": "@tarek: you don&#39;t need root access to install <code>ccache</code>; you could compile it and configure it to run in your `$HOME"}], "answers": [{"comments": [{"owner": {"reputation": 970, "user_id": 894755, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f325fff28c15c9666beeea9f19f165a?s=128&d=identicon&r=PG", "display_name": "Tarek", "link": "https://stackoverflow.com/users/894755/tarek"}, "edited": false, "score": 0, "creation_date": 1441893368, "post_id": 32493706, "comment_id": 52867071, "body": "Thank you! Precompiled headers (-pch option) indeed made a difference. I installed ccache and did not notice that it makes any improvement in the compilation time with or without pch."}], "tags": [], "owner": {"reputation": 3458, "user_id": 2050788, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/uIU2Z.jpg?s=128&g=1", "display_name": "Spacemoose", "link": "https://stackoverflow.com/users/2050788/spacemoose"}, "is_accepted": true, "score": 5, "last_activity_date": 1441880819, "last_edit_date": 1492086991, "creation_date": 1441862373, "answer_id": 32493706, "question_id": 32484035, "link": "https://stackoverflow.com/questions/32484035/how-to-avoid-recompiling-header-files/32493706#32493706", "title": "How to avoid recompiling header files", "body": "<p><strong>Precompiled headers:</strong></p>\n\n<p>What you are doing does sound like it would benefit heavily from precompiled headers (pch's).  The intel compiler does support pch's, as you can see here:</p>\n\n<p><a href=\"https://software.intel.com/en-us/node/522754\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/node/522754</a>.</p>\n\n<p><strong>Installing tools without root permissions</strong> </p>\n\n<p>You can still experiment with ccache to see if that will help your situation -- it can make a huge difference in cases where units do not need to be recompiled, which happens surprisingly often.  The path to doing this is to install ccache locally.  Generally this can be done by downloading sources to a directory where you have write access (I keep an install folder in my home directory) , and then following the build directions for that project.  Once the executable are built, you'll have to add the path for the executable to your path -- by doing</p>\n\n<pre><code>export PATH=$PATH:the-path-to-your-compiled-executables.\n</code></pre>\n\n<p>in BASH.  At that point ccache will be available to your user.</p>\n\n<p>A better explanation is available here: <a href=\"https://unix.stackexchange.com/questions/42567/how-to-install-program-locally-without-sudo-privileges\">https://unix.stackexchange.com/questions/42567/how-to-install-program-locally-without-sudo-privileges</a></p>\n\n<p><strong>CMAKE, cotire, etc</strong> </p>\n\n<p>One final point -- I haven't read the docu for the intel compiler's pch support, but pch support generally involves some manual code manipulation to instruct the compile which header to precompile and so on.  I recommend looking in to managing your build with CMAKE, and using the cotire plugin to experiment with pch. </p>\n\n<p>While I have gripes about CMAKE from a software engineering perspective, it does make managing your build, and especially experimenting with various ways to speed up your build, much much easier.  After experimenting with pch's, and ccache, you could also try out ninja instead of make and see if that gets you any improvement.</p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 970, "user_id": 894755, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0f325fff28c15c9666beeea9f19f165a?s=128&d=identicon&r=PG", "display_name": "Tarek", "link": "https://stackoverflow.com/users/894755/tarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 1, "accepted_answer_id": 32493706, "answer_count": 1, "score": 1, "last_activity_date": 1441880819, "creation_date": 1441813632, "last_edit_date": 1441818627, "question_id": 32484035, "link": "https://stackoverflow.com/questions/32484035/how-to-avoid-recompiling-header-files", "title": "How to avoid recompiling header files", "body": "<p>My single C++ file includes many header files from various libraries such as MKL and template libraries. Compiling this single file every time takes a long time due to the many include statements. I tried separating the include statements in a single file, making an object file out of it, and linking it during  the compilation of the main file, but it seems the compiler doesn't recognize the definitions of the objects and functions that are defined in the header files.\nSo, how can I save the compilation time of these header files?</p>\n"}, {"tags": ["c++", "memory-address", "unreal-engine4"], "comments": [{"owner": {"reputation": 1213, "user_id": 612003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuUtm.jpg?s=128&g=1", "display_name": "Matthew Moss", "link": "https://stackoverflow.com/users/612003/matthew-moss"}, "edited": false, "score": 0, "creation_date": 1441823524, "post_id": 32484031, "comment_id": 52834381, "body": "Note: I do not know any specifics of UE4. Based on the code above (which I&#39;m guessing is boilerplate from elsewhere), the world (from <code>GetWorld()</code>) keeps a reference to the spawned Actor, so the <code>NewBlock</code> pointer is there just so the <code>OwningGrid</code> field can be set. Any further access to Actors in the world would have to find that reference by another means. (See, for example: <a href=\"https://answers.unrealengine.com/questions/16805/c-find-specific-actor-in-scene.html\" rel=\"nofollow noreferrer\" title=\"c find specific actor in scene.html\">answers.unrealengine.com/questions/16805/&hellip;</a>).  Note that keeping an array of pointers is not inefficient, though I don&#39;t know UE4&#39;s policy on keeping Actor pointers."}], "answers": [{"tags": [], "owner": {"reputation": 2632, "user_id": 958004, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FYE4C.png?s=128&g=1", "display_name": "T. Kiley", "link": "https://stackoverflow.com/users/958004/t-kiley"}, "is_accepted": false, "score": 0, "last_activity_date": 1442999526, "last_edit_date": 1442999526, "creation_date": 1442351049, "answer_id": 32595599, "question_id": 32484031, "link": "https://stackoverflow.com/questions/32484031/ue4-9-c-puzzle-block-addressing/32595599#32595599", "title": "UE4.9 C++ Puzzle Block Addressing", "body": "<p>@Mathew's comment has the right idea, when you use <code>SpawnActor</code>, Unreal does a whole bunch of behind the scenes stuff but essentially creates your actor inside the world and manages its lifetime.  (For example, to remove your actor from the level, you would need to use:</p>\n\n<pre><code>MyActor-&gt;Destroy();\n</code></pre>\n\n<p>Rather than the C++ method:</p>\n\n<pre><code>delete PtrToActor;\n</code></pre>\n\n<p>This handles removing it from the scene, updating collision volumes etc. before actually deleting the actor. </p>\n\n<p>To your code, you are of course overwriting the pointer to your block, so the block itself is left untouched. You can use the <a href=\"https://wiki.unrealengine.com/Iterators:_Object_%26_Actor_Iterators,_Optional_Class_Scope_For_Faster_Search#Actor_Iterator\" rel=\"nofollow\"><code>TActorIterator&lt;T&gt;</code> iterable</a> to loop through all actors of a type which would save you having to store an array yourself. You would do something like this:</p>\n\n<pre><code>for (TActorIterator&lt;AMyProject2Block&gt; ActorItr(GetWorld()); ActorItr; ++ActorItr )\n{\n     AMyProject2Block* PtrToActor = *ActorItr;\n}\n</code></pre>\n\n<p>Where here the <code>PtrToActor</code> will point to each instance in turn as the loop advances. </p>\n\n<p>However, it isn't really inefficient (and in many cases, is efficient) to store your own separate array of pointers. It is only a small memory cost (since it is just pointers) and might be faster as you don't have to filter the actors to find the one you want. In either case, it is a much of a muchness so you should choose whichever one feels more logical. </p>\n\n<p>In your example, I'd keep them in 2D data structure so you can access them via their position rather than just getting an un-ordered list of them from the engine. </p>\n"}], "owner": {"reputation": 51, "user_id": 5317821, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d6c365d3993a70bbfb2d8ca22ddc16ec?s=128&d=identicon&r=PG&f=1", "display_name": "xTaylorFerg", "link": "https://stackoverflow.com/users/5317821/xtaylorferg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1442999526, "creation_date": 1441813619, "question_id": 32484031, "link": "https://stackoverflow.com/questions/32484031/ue4-9-c-puzzle-block-addressing", "title": "UE4.9 C++ Puzzle Block Addressing", "body": "<p>In UE4 I am working on a Puzzle Block game in my Graphics 2 class. Our professor and our class is learning about UE4 together. Our class as a whole is a little confused about one thing in the C++ code and my professor said he would try to figure the answer out himself, but I figured I would jump start our next class with information that I find here.</p>\n\n<p>Okay so in the BlockGrid.cpp file this section of code is used to create the blocks.</p>\n\n<pre><code>void AMyProject2BlockGrid::BeginPlay()\n{\n   Super::BeginPlay();\n\n   // Number of blocks\n   const int32 NumBlocks = Size * Size;\n\n   // Loop to spawn each block\n   for(int32 BlockIndex=0; BlockIndex&lt;NumBlocks; BlockIndex++)\n   {\n      const float XOffset = (BlockIndex/Size) * BlockSpacing; // Divide by dimension\n      const float YOffset = (BlockIndex%Size) * BlockSpacing; // Modulo gives remainder\n\n      // Make postion vector, offset from Grid location\n      const FVector BlockLocation = FVector(XOffset, YOffset, 0.f) + GetActorLocation();\n\n      // Spawn a block\n      AMyProject2Block* NewBlock = GetWorld()-&gt;SpawnActor&lt;AMyProject2Block&gt;(BlockLocation, FRotator(0,0,0));\n\n      // Tell the block about its owner\n      if(NewBlock != NULL)\n      {\n          NewBlock-&gt;OwningGrid = this;\n      }\n   }\n}\n</code></pre>\n\n<p>The confusion starts with the following line in this function:</p>\n\n<pre><code>AMyProject2Block* NewBlock = GetWorld()-&gt;SpawnActor&lt;AMyProject2Block&gt;(BlockLocation, FRotator(0,0,0));\n</code></pre>\n\n<p>Each time it looks like it is rewriting NewBlock for each new block in the puzzle. Our problem is for the game we are creating, which is a <a href=\"https://en.wikipedia.org/wiki/Lights_Out_%28game%29\" rel=\"nofollow\">Lights Out game</a>, is if NewBlock is being continually being rewritten, then how is it keeping track of the addresses for the information to the blocks that are being displayed on the screen? This could be fixed by simply creating an array to store the information, but if the information is still being kept somewhere this would be inefficient. So how can we access the information for the blocks if NewBlock is being overwritten with each loop without making an array to inefficiently store the data? </p>\n\n<p>THANKS!!!! :)</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 2840, "user_id": 709010, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7550d19d9a0b58c9d4b8a16eb1ebb523?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/709010/jared"}, "edited": false, "score": 0, "creation_date": 1441813859, "post_id": 32484060, "comment_id": 52829042, "body": "I&#39;ve tried both already, and they both result in <code>error: no viable overloaded &#39;=&#39;</code>. I was actually in the middle of making an edit to express that."}, {"owner": {"reputation": 2840, "user_id": 709010, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7550d19d9a0b58c9d4b8a16eb1ebb523?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/709010/jared"}, "edited": false, "score": 0, "creation_date": 1441814375, "post_id": 32484060, "comment_id": 52829435, "body": "Worked beautifully. I wasn&#39;t aware <code>.reset()</code> could be used like that. This project is my first serious usage of C++11 pointers, so I&#39;m still learning the idiosyncrasies of them."}], "tags": [], "owner": {"reputation": 33588, "user_id": 402169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2ec8fa642572c1d90a0dadf374811e4d?s=128&d=identicon&r=PG", "display_name": "tenfour", "link": "https://stackoverflow.com/users/402169/tenfour"}, "is_accepted": true, "score": 1, "last_activity_date": 1441813974, "last_edit_date": 1441813974, "creation_date": 1441813704, "answer_id": 32484060, "question_id": 32484026, "link": "https://stackoverflow.com/questions/32484026/how-do-i-properly-dereference-an-object-to-set-its-member-variable-in-the-follo/32484060#32484060", "title": "How do I properly dereference an object to set it&#39;s member variable in the following case?", "body": "<p>Your line of code: <code>*node._parent = this;</code> has two issues:</p>\n\n<ol>\n<li>operator precedence</li>\n<li>assignment to <code>shared_ptr</code></li>\n</ol>\n\n<p>First operator precedence. Operator <code>.</code> is evaluated before operator <code>*</code>. So  currently your code is similar to doing this:</p>\n\n<pre><code>*(node._parent)\n</code></pre>\n\n<p><code>node</code> doesn't have a <code>_parent</code> member, but <code>*node</code> does. So, fix it by either:</p>\n\n<pre><code>(*node)._parent\n</code></pre>\n\n<p>Or even better:</p>\n\n<pre><code>node-&gt;_parent\n</code></pre>\n\n<p>Then, you have another issue that you can't just assign to <code>shared_ptr</code> with <code>operator =()</code> like this. You need to change</p>\n\n<pre><code>= this;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>.reset(this);\n</code></pre>\n\n<p>So in total,</p>\n\n<pre><code>node-&gt;_parent.reset(this);\n</code></pre>\n"}], "owner": {"reputation": 2840, "user_id": 709010, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7550d19d9a0b58c9d4b8a16eb1ebb523?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/709010/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 32484060, "answer_count": 1, "score": 1, "last_activity_date": 1441814058, "creation_date": 1441813598, "last_edit_date": 1441814058, "question_id": 32484026, "link": "https://stackoverflow.com/questions/32484026/how-do-i-properly-dereference-an-object-to-set-its-member-variable-in-the-follo", "title": "How do I properly dereference an object to set it&#39;s member variable in the following case?", "body": "<p>I'm implementing a tree by writing a class called <code>Node</code>, and I'm having issues concerning the following method and member variables:</p>\n\n<pre><code>class Node {\npublic:\n    // ...\n    void addChild(const std::shared_ptr&lt;Node&gt; node);\nprivate:\n    // ...\n    std::vector&lt; std::shared_ptr&lt;Node&gt; &gt; _children;\n    std::shared_ptr&lt;Node&gt; _parent;\n};\n</code></pre>\n\n<p>When <code>addChild</code> is called by a <code>Node</code> object, it's simply supposed to set the argument's <code>_parent</code> member to point to the caller, then add the argument to the caller's vector of children. My implementation currently looks like this:</p>\n\n<pre><code>void Node::addChild(const std::shared_ptr&lt;Node&gt; node) {\n    if (!node) {\n        std::invalid_argument(\"Argument node must be nonnull.\");\n    }\n\n    *node._parent = this;\n    _children.push_back(node);\n}\n</code></pre>\n\n<p>The troublesome line is <code>*node._parent = this;</code>, which causes this error:</p>\n\n<pre><code>src/Node.cpp:89:10: error: no member named '_parent' in\n'std::__1::shared_ptr&lt;Node&gt;'; did you mean to use '-&gt;' instead of '.'?\n</code></pre>\n\n<p>My train of thinking is telling me that I'm dereferencing <code>node</code> to gain access to the actual <code>Node</code> object, then using <code>._parent</code> to gain access to the <code>_parent</code> member. Since <code>_parent</code> is a <code>std::shared_ptr&lt;Node&gt;</code>, it would then make sense to set it to equal <code>this</code>, which is a pointer to the calling object. But why is my compiler telling me that <code>_parent</code> doesn't exist when it definitely does exist?</p>\n\n<p>Edit: I've also already attempted <code>(*node)._parent</code>, <code>node-&gt;_parent</code>, <code>(*node)-&gt;_parent</code>, and <code>*(*node)._parent</code>, all to no avail. They all result in <code>error: no viable overloaded '='</code>.</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1441813439, "post_id": 32483925, "comment_id": 52828729, "body": "At which line in the source code do you get the error message <code>error C2653: &#39;SIFFTypes&#39;: is not a class or namespace name</code>?"}, {"owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "reply_to_user": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1441813809, "post_id": 32483925, "comment_id": 52829007, "body": "Sorry, typo in my questions there- fixed now. It&#39;s the line just above <code>Types::ModeRecord;</code> in the <code>.h</code> file. That particular line is actually just a comment- there is no executable code on it."}], "answers": [{"comments": [{"owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "edited": false, "score": 0, "creation_date": 1441813905, "post_id": 32484054, "comment_id": 52829082, "body": "Sorry- that was a typo, must have missed it when copying &amp; pasting the code. Amended now."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441815276, "post_id": 32484054, "comment_id": 52830098, "body": "It looks almost like he&#39;s trying for a <code>using</code> statement, which would explain the two uses of <code>ModeRecord</code> directly below..."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 3, "last_activity_date": 1441814067, "last_edit_date": 1441814067, "creation_date": 1441813689, "answer_id": 32484054, "question_id": 32483925, "link": "https://stackoverflow.com/questions/32483925/c-compile-error-c4430-c2653-c2146-c2143/32484054#32484054", "title": "c++ compile error C4430, C2653, C2146, C2143", "body": "<p>Here is an abbreviated version of the code you posted, with my observation:</p>\n\n<pre><code>class PublisherModule [... bunch of base classes...]\n{\n\npublic:\n    Types::ModeRecord;\n};\n</code></pre>\n\n<p>What do you think this line does?? <br>\n<code>Types::ModeRecord;</code></p>\n\n<p>It is not of the form <code>[TypeName] [VariableName];</code> (eg <code>int i;</code>)<br>\nIt does not look like a method prototype (eg <code>void foo(int i);</code>)<br>\nIt is not a typedef.<br>\nIt doesn't look like any normal C++.<br></p>\n\n<p>What do you <strong><em>think</em></strong> it is doing?</p>\n"}], "owner": {"reputation": 2502, "user_id": 1841758, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d05c3e8d784bf227afbf0a4e197593c6?s=128&d=identicon&r=PG", "display_name": "Noble-Surfer", "link": "https://stackoverflow.com/users/1841758/noble-surfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441814067, "creation_date": 1441813333, "last_edit_date": 1592644375, "question_id": 32483925, "link": "https://stackoverflow.com/questions/32483925/c-compile-error-c4430-c2653-c2146-c2143", "title": "c++ compile error C4430, C2653, C2146, C2143", "body": "<p>I am working on some simulation software, written in C++. Currently, when trying to build my code, I get 9 compile errors, all complaining about the three lines of code that I've just added. Those lines are the declarations in <code>PublisherModule.h</code>:</p>\n<pre><code>class PublisherModule :\n    public s::Module,\n    public s::Singleton&lt;PublisherModule&gt;,\n    public s::Interface,\n    public s::htmlPage{\n    \n    public:\n        ...\n        Types::ModeRecord;\n        ModeRecord modeData;\n        ModeRecord *modeDataPtr;\n    ...\n};\n</code></pre>\n<p>The reason for adding these declarations into the <code>PublisherModule.h</code> was so that I could add the following code into the <code>publish()</code> function of the <code>PublisherModule.cpp</code> file:</p>\n<pre><code>Types::ModeRecord ModeData;\nTypes::ModeStatusRecord *ModeDataPtr = &amp;ModeData;\nDataStore-&gt;getModeData(*ModeDataPtr);\n</code></pre>\n<p>The <code>publish()</code> function now looks like this:</p>\n<pre><code>void PublisherModule::publishData(void){\n    ...\n    Types::ModeRecord ModeData;\n    Types::ModeStatusRecord *ModeDataPtr = &amp;ModeData;\n    DataStore-&gt;getModeData(*ModeDataPtr);\n    ...\n}\n</code></pre>\n<p>The errors that the compiler is giving me are:</p>\n<blockquote>\n<p>error C2653: 'Types': is not a class or namespace name</p>\n<p>error C4430: missing type specifier - int assumed. Note: C++ does not support default-int</p>\n<p>error C2146: syntax error : missing ';' before identifier 'ModeData'</p>\n<p>error C2143: syntax error : missing ';' before '*'</p>\n</blockquote>\n<p>I get <code>error C4430</code> 4 times in total, and the other errors all once each. They are all complaining about the lines that I added into the <code>.h</code> file. Having Google'd the first error, and come across this answer on SO: <a href=\"https://stackoverflow.com/questions/15740952/compiler-error-c2653-not-a-class-or-namespace-name\">Compiler error C2653: not a class or namespace name</a> , it would appear that the cause is a circular dependency in the header files...</p>\n<p>But that is not happening here as far as I can tell... Are there any other reasons why I might get this compile error, and what's preventing my code from building?</p>\n<p>The message displayed when I hover my cursor over the first line that I've added in the <code>.h</code> file, <code>Types::ModeRecord</code> is:</p>\n<blockquote>\n<p>Error: a class-qualified name is required</p>\n</blockquote>\n"}, {"tags": ["c++", "gurobi"], "comments": [{"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441813306, "post_id": 32483836, "comment_id": 52828631, "body": "Have you checked in your current working directory ? The directory from which your program is executed ?"}, {"owner": {"reputation": 21, "user_id": 5246803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a40f5fd8482421ad6620bd83d607d7?s=128&d=identicon&r=PG&f=1", "display_name": "Akay", "link": "https://stackoverflow.com/users/5246803/akay"}, "reply_to_user": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441866037, "post_id": 32483836, "comment_id": 52848818, "body": "Yes, it was probably also included when I searched my hole computer. But to be sure, I just checked it again and nothing there :("}, {"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441873515, "post_id": 32483836, "comment_id": 52853215, "body": "I only see two options left : check that your working directory is not in read only mode; set an absolute path for writing your file."}, {"owner": {"reputation": 21, "user_id": 5246803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a40f5fd8482421ad6620bd83d607d7?s=128&d=identicon&r=PG&f=1", "display_name": "Akay", "link": "https://stackoverflow.com/users/5246803/akay"}, "reply_to_user": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441877933, "post_id": 32483836, "comment_id": 52856214, "body": "thanks, for you help. But it still isn&#39;t working. My working directory is not on read only and I tried to save it like this: model.write(&quot;user\\ClionProjects\\modeltest.lp&quot;); but still does not work."}, {"owner": {"reputation": 21, "user_id": 5246803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a40f5fd8482421ad6620bd83d607d7?s=128&d=identicon&r=PG&f=1", "display_name": "Akay", "link": "https://stackoverflow.com/users/5246803/akay"}, "reply_to_user": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441879587, "post_id": 32483836, "comment_id": 52857393, "body": "I just noticed that I not even can write any output file in c++. I tried: ofstream myfile; myfile.open (&quot;user\\desktop\\example203.txt&quot;);                                           myfile &lt;&lt; &quot;Writing this to a file.\\n&quot;; myfile.close(); And this also does not work. I am using a mac if this is important"}, {"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441880724, "post_id": 32483836, "comment_id": 52858100, "body": "Hum, on mac you should use slash <code>&#47;</code> and not backslash <code>\\ </code> to separate directories, then your path should be <code>&#47;Users&#47;{your-username}&#47;desktop&#47;example203.txt</code>"}, {"owner": {"reputation": 21, "user_id": 5246803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a40f5fd8482421ad6620bd83d607d7?s=128&d=identicon&r=PG&f=1", "display_name": "Akay", "link": "https://stackoverflow.com/users/5246803/akay"}, "reply_to_user": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441881891, "post_id": 32483836, "comment_id": 52858843, "body": "I am not sure about the slash thing. I used slash on myfile.open and I include an additional check myfile.is_open(), which turns out to be false. When I used backslash this was true.  When I used it on model.write (my original problem) I get an error: SIGABRT (Aborted) But there is no real error message as I am used to. You might notice that I am quite new to C++."}, {"owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441885734, "post_id": 32483836, "comment_id": 52861468, "body": "You should check this about filepath : <a href=\"https://en.wikipedia.org/wiki/Path_%28computing%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Path_%28computing%29</a> and note that mac uses unix&#39;s style filepath. With <code>std::fstream</code> c++ will try to create the file in the specified directory, but if the directory doesn&#39;t exists, it will not create it for you. You should open a console and check that your path exists by typing <code>cd &#47;my&#47;path&#47;to&#47;my&#47;doc</code>"}, {"owner": {"reputation": 21, "user_id": 5246803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a40f5fd8482421ad6620bd83d607d7?s=128&d=identicon&r=PG&f=1", "display_name": "Akay", "link": "https://stackoverflow.com/users/5246803/akay"}, "reply_to_user": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "edited": false, "score": 0, "creation_date": 1441885991, "post_id": 32483836, "comment_id": 52861652, "body": "Hey I finally got it. You were right!!!. I used slash again and I noticed that I ignored the case sensitivity. So Desktop was written big :/. Thanks a lot"}], "owner": {"reputation": 21, "user_id": 5246803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a40f5fd8482421ad6620bd83d607d7?s=128&d=identicon&r=PG&f=1", "display_name": "Akay", "link": "https://stackoverflow.com/users/5246803/akay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441813094, "creation_date": 1441813094, "question_id": 32483836, "link": "https://stackoverflow.com/questions/32483836/gruobi-used-model-write-but-cannot-find-the-file", "title": "gruobi: used model.write but cannot find the file", "body": "<p>I am using Gurobi with C++ and want to save the Lp as a file.lp. Therefore, I used </p>\n\n<pre><code>model.write(\"model.lp\");\nmodel.optimize();\n</code></pre>\n\n<p>This is my output and nor error occurs:</p>\n\n<pre><code>Optimize a model with 105 rows, 58 columns and 186 nonzeros\nCoefficient statistics:\n  Matrix range    [1e+00, 1e+00]\n  Objective range [1e+00, 1e+00]\n  Bounds range    [0e+00, 0e+00]\n  RHS range       [1e+00, 6e+00]\nPresolve removed 105 rows and 58 columns\nPresolve time: 0.00s\nPresolve: All rows and columns removed\nIteration    Objective       Primal Inf.    Dual Inf.      Time\n       0   -0.0000000e+00   0.000000e+00   0.000000e+00      0s\n\nSolved in 0 iterations and 0.00 seconds\nOptimal objective -0.000000000e+00\nobj: -0\nStatus2\nProcess finished with exit code 0\n</code></pre>\n\n<p>So there is probably a mistake in my LP, since the optimal solution should not be 0. This is why I want to have a look at the model.lp file. However, I cannot find it. I searched my whole computer. Am I missing anything?</p>\n"}, {"tags": ["c++", "gcc", "file-io"], "comments": [{"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 2, "creation_date": 1441813139, "post_id": 32483787, "comment_id": 52828509, "body": "why not just <code>std::ifstream file(input)</code>?"}, {"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "edited": false, "score": 1, "creation_date": 1441813142, "post_id": 32483787, "comment_id": 52828510, "body": "What is the command you are using to compile?"}, {"owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "edited": false, "score": 1, "creation_date": 1441813232, "post_id": 32483787, "comment_id": 52828585, "body": "Are you using <code>gcc</code> or <code>g++</code>? This is C++ code, so the correct compiler is <code>g++</code>."}, {"owner": {"reputation": 31, "user_id": 5315130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d47af0eb0ea60213c3b3a316fa076ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jsosa6", "link": "https://stackoverflow.com/users/5315130/jsosa6"}, "edited": false, "score": 0, "creation_date": 1441813437, "post_id": 32483787, "comment_id": 52828727, "body": "I tried compilining on g++ as well, and I recieved the same error. The command I am using is g++ projectname.cpp -o test.out"}], "answers": [{"comments": [{"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "reply_to_user": {"reputation": 3553, "user_id": 2863154, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e451732f6ff8efd541922b6075a47198?s=128&d=identicon&r=PG", "display_name": "\u042fois", "link": "https://stackoverflow.com/users/2863154/%d0%afois"}, "edited": false, "score": 2, "creation_date": 1441813453, "post_id": 32483903, "comment_id": 52828737, "body": "@Keill\u042fandor ??  In C++11 you can use a string but otherwise you need a <code>char*</code>."}, {"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "reply_to_user": {"reputation": 3553, "user_id": 2863154, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e451732f6ff8efd541922b6075a47198?s=128&d=identicon&r=PG", "display_name": "\u042fois", "link": "https://stackoverflow.com/users/2863154/%d0%afois"}, "edited": false, "score": 0, "creation_date": 1441813537, "post_id": 32483903, "comment_id": 52828796, "body": "@Keill\u042fandor I had a typo a few seconds ago, if you comment was before my edit I understand, but otherwise I don&#39;t see what&#39;s wrong?"}, {"owner": {"reputation": 3553, "user_id": 2863154, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e451732f6ff8efd541922b6075a47198?s=128&d=identicon&r=PG", "display_name": "\u042fois", "link": "https://stackoverflow.com/users/2863154/%d0%afois"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1441813782, "post_id": 32483903, "comment_id": 52828982, "body": "@nos my comment was referred to the answer &quot;You could try using inFile.open(input.c_str())&quot;, before the edit. It wasn&#39;t accurate according to the standard, was it? I ended upvoting, but the edit was necessary."}], "tags": [], "owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "is_accepted": false, "score": 2, "last_activity_date": 1441814340, "last_edit_date": 1441814340, "creation_date": 1441813279, "answer_id": 32483903, "question_id": 32483787, "link": "https://stackoverflow.com/questions/32483787/compiling-in-gcc/32483903#32483903", "title": "Compiling in gcc", "body": "<p>Prior to C++11 you needed to pass a C style string to <code>std::ifstream::open</code>.  You can get a C style string from a C++ string using the <code>std::string::c_str</code> function, consider using <code>inFile.open(input.c_str())</code>.  However, if you are using C++11 this shouldn't matter.</p>\n\n<p>You may also be getting an error about not declaring the function <code>exit</code>, you might want to add <code>#include &lt;cstdlib&gt;</code> with the other includes at the top of your file, otherwise consider just using <code>return 1</code> in this instance.</p>\n\n<p>You also need to make sure you are using the C++ compiler from the GCC compiler collection, typically you would use something like <code>g++ input.cpp -o output</code> or <code>g++ --std=c++11 input.cpp -o output</code> to enable C++11.</p>\n"}], "owner": {"reputation": 31, "user_id": 5315130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d47af0eb0ea60213c3b3a316fa076ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jsosa6", "link": "https://stackoverflow.com/users/5315130/jsosa6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441814340, "creation_date": 1441812936, "last_edit_date": 1441813096, "question_id": 32483787, "link": "https://stackoverflow.com/questions/32483787/compiling-in-gcc", "title": "Compiling in gcc", "body": "<p>I have a program i am trying to compile on GCC, though this error appears:\nerror: no matching function for call to \u2018std::basic_ifstream >::open(std::string&amp;)\u2019</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\nint main() {\n\n    int column, row, total, counter;\n    column = 1;\n    row = 1;\n\n\n    cout &lt;&lt; \"x-dimensions of array: \";\n    cin &gt;&gt; row;\n    cout &lt;&lt; \"y-dimensions of array: \";\n    cin &gt;&gt; column;\n    total = row*column;\n    double myArray[row][column];\n    double *myPtr;\n    myPtr = *myArray;\n\n\n\n    string input;\n    cout &lt;&lt; \"Enter text file name: \";\n    cin &gt;&gt; input;\n\n    ifstream inFile;\n    inFile.open(input);\n\n    //Check for Error\n    if (inFile.fail()){\n        cerr &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n        exit(1);\n    }\n\n    for (int i = 0; i &lt; total; i++){\n\n        inFile &gt;&gt; *(myPtr+i);\n}\n</code></pre>\n\n<p>i believe the error has to do with the infile string being used, but i declared the proper headers</p>\n"}, {"tags": ["c++", "templates", "c++11", "lambda"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1441813902, "post_id": 32483743, "comment_id": 52829077, "body": "@CoffeeandCode: <code>enum Type : u8</code>, that&#39;s not a problem since I can use <code>std::conditional</code> to choose the correct one according to the two operator types."}], "answers": [{"comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1441813468, "post_id": 32483918, "comment_id": 52828752, "body": "This parametrizes over the type of a specific lambda which is not what I&#39;m looking for, not a generic lambda. The problem is that I have many operators (+, -, *, /, &lt;, &gt;, &lt;=, == and so on) and I&#39;d like to register each operator once but implicitly define it for all the combinations. Basically something like <code>registerTemplate&lt;typename T1, typename T2, typename LAMBDA&gt;</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1441813879, "post_id": 32483918, "comment_id": 52829059, "body": "@Jack So pass like <code>std::plus&lt;&gt;</code> in as another argument. I really don&#39;t understand what it is you&#39;re asking."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1441814204, "post_id": 32483918, "comment_id": 52829298, "body": "indeed I didn&#39;t know about <code>std::plus&lt;&gt;</code> and its friends existence, this definitely solves the problem."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1441814061, "last_edit_date": 1441814061, "creation_date": 1441813312, "answer_id": 32483918, "question_id": 32483743, "link": "https://stackoverflow.com/questions/32483743/using-template-arguments-inside-a-lambda/32483918#32483918", "title": "Using template arguments inside a lambda", "body": "<p>Do you mean something like this?</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nvoid registerTemplate() {\n    registerFunction(\"+\", Type::FLOAT, {Type::FLOAT, Type::FLOAT},\n                     BinaryFunction([](StackValue v1, StackValue v2) {\n                         return StackValue(v1.as&lt;T1&gt;() + v2.as&lt;T2&gt;());\n                     }));\n}\n\nregisterTemplate&lt;float, float&gt;();\nregisterTemplate&lt;s32, float&gt;();\n</code></pre>\n\n<hr />\n\n<p>Or this?</p>\n\n<pre><code>template &lt;typename T1, typename T2, typename Op&gt;\nBinaryFunction makeFunction(Op op) {\n    return [op](StackValue v1, StackValue v2) {\n        return StackValue(op(v1.as&lt;T1&gt;(), v1.as&lt;T2&gt;()));\n    };\n}\n</code></pre>\n\n<p>To be used as:</p>\n\n<pre><code>registerFunction(\"+\", ..., makeFunction&lt;float, float&gt;(std::plus&lt;&gt;{}));\nregisterFunction(\"+\", ..., makeFunction&lt;s32, float&gt;(std::plus&lt;&gt;{}));\n</code></pre>\n\n<p>It would really help if you actually make it clear in your question what it is you wanted to accomplish. </p>\n"}], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 32483918, "answer_count": 1, "score": 0, "last_activity_date": 1441814061, "creation_date": 1441812797, "last_edit_date": 1441813135, "question_id": 32483743, "link": "https://stackoverflow.com/questions/32483743/using-template-arguments-inside-a-lambda", "title": "Using template arguments inside a lambda", "body": "<p>I'm working with a map of functions for a simple language I'm developing, everything works fine but I'd like to provide a better way to define the numerical operators which works on numerical values in a more concise way.</p>\n\n<p>The main problem is that I have something like:</p>\n\n<pre><code>using BinaryFunction = std::function&lt;StackValue(StackValue,StackValue)&gt;;\n\nregisterFunction(\"+\", Type::FLOAT, {Type::FLOAT, Type::FLOAT}, BinaryFunction([](StackValue v1, StackValue v2) { return StackValue(v1.as&lt;float&gt;() + v2.as&lt;float&gt;()); }));\nregisterFunction(\"+\", Type::FLOAT, {Type::FLOAT, Type::INT}, BinaryFunction([](StackValue v1, StackValue v2) { return StackValue(v1.as&lt;float&gt;() + v2.as&lt;s32&gt;()); }));\n..\n</code></pre>\n\n<p>So basically for each operator that supports both <code>float</code> and <code>int</code> data types I must provide 4 functions which works with the possible combinations</p>\n\n<pre><code>int, int -&gt; int\nint, float -&gt; float\nfloat, int -&gt; float\nfloat, float -&gt; float\n</code></pre>\n\n<p>Now I don't want to provide implicit type conversion so I'm fine in having 4 different functions for each combination but I'd like a way to define them all at once without having to repeat the code.</p>\n\n<p>The problem is how I could do it, the main problem resides in the lambda:</p>\n\n<pre><code>[](StackValue v1, StackValue v2) { return StackValue(v1.as&lt;float&gt;() + v2.as&lt;float&gt;()); };\n</code></pre>\n\n<p>To be able to do what I need I'd need a way to parametrize the code with a template, something like</p>\n\n<pre><code>return StackValue(v1.as&lt;T1&gt;() + v2.as&lt;T2&gt;())\n</code></pre>\n\n<p>Then the correct specialization of <code>StackValue&lt;T&gt;(T)</code> takes care of the rest.</p>\n\n<p>so that I can then do something like</p>\n\n<pre><code>registerNumericFunction(...)\n{\n  registerTemplate&lt;float, float&gt;(...);\n  registerTemplate&lt;s32, float&gt;(...);\n  ..\n}\n</code></pre>\n\n<p>But I'm not finding a clever way to do it because I need to pass a lambda to the method which should be parametric. I don't know if it is possible at all.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "edited": false, "score": 4, "creation_date": 1441812853, "post_id": 32483671, "comment_id": 52828323, "body": "Try putting together a minimal example that reproduces the problem.  This is a good idea for two reasons: 1) you will probably get more help from people here if you have a minimal example, and 2) often in the process of producing a minimal example you might find the problem you are seeking help for."}, {"owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "edited": false, "score": 2, "creation_date": 1441812898, "post_id": 32483671, "comment_id": 52828355, "body": "What is atlas holder, and where is it defined? If you are accessing invalid elements in some other object in the call, it is possible that that breaks your program."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441812927, "post_id": 32483671, "comment_id": 52828378, "body": "I suggest you deal with offenses by making the <code>switch</code> statement into a table.  The code that accesses the table, the engine, would remain the same and all you need to do is modify the table (add, remove entries).  This is called &quot;data driven software&quot;. Yep, tables would simplify your program."}, {"owner": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 0, "creation_date": 1441813246, "post_id": 32483671, "comment_id": 52828594, "body": "Try calling <code>createCollectable(manager, atlasHolder[&quot;bullets&quot;], unsigned int(0);</code> and <code>createCollectable(manager, atlasHolder[&quot;player&quot;], unsigned int(0);</code> instead (for debugging purposes only).  I suspect there is an issue with using <code>atlasHolder[&quot;bullets&quot;]</code>"}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 1, "creation_date": 1441813998, "post_id": 32483671, "comment_id": 52829158, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 45, "user_id": 3195348, "user_type": "registered", "profile_image": "https://graph.facebook.com/1409794116/picture?type=large", "display_name": "Magnaillusion", "link": "https://stackoverflow.com/users/3195348/magnaillusion"}, "reply_to_user": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 1, "creation_date": 1441814462, "post_id": 32483671, "comment_id": 52829507, "body": "@rasteve Both calls result in an access violation. The <code>loadResources</code> method call at the start should take care of initializing both atlases. Just for reference, the atlas holder is of type <code>thor::ResourceHolder</code>, and its operator[] method looks like this:  <code>thor::ResourceHolder&lt; R, I, O &gt;::operator[] (const I &amp; id);</code>  Where I is the type of element the resource holder is currently holding."}, {"owner": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 0, "creation_date": 1441815310, "post_id": 32483671, "comment_id": 52830116, "body": "Well that rules that out.  You&#39;ll have to narrow the code down to find the problem.  I would start by looking at how createPlayer is using the playerAtlas argument perhaps..."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3195348, "user_type": "registered", "profile_image": "https://graph.facebook.com/1409794116/picture?type=large", "display_name": "Magnaillusion", "link": "https://stackoverflow.com/users/3195348/magnaillusion"}, "edited": false, "score": 0, "creation_date": 1441821440, "post_id": 32485090, "comment_id": 52833327, "body": "Yup, that seemed to be the problem. I changed the free functions to something more object oriented and made sure to unset the listener after I was done with the world. That seems to have alleviated the problem as the process is now returning 0. Many thanks for your answer."}], "tags": [], "owner": {"reputation": 3377, "user_id": 2013747, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/666a95f5725d92e6bf6ccc0c2c60db59?s=128&d=identicon&r=PG", "display_name": "Ross Bencina", "link": "https://stackoverflow.com/users/2013747/ross-bencina"}, "is_accepted": true, "score": 3, "last_activity_date": 1441869891, "last_edit_date": 1441869891, "creation_date": 1441816949, "answer_id": 32485090, "question_id": 32483671, "link": "https://stackoverflow.com/questions/32483671/process-returned-0xc0000005-upon-program-end/32485090#32485090", "title": "Process returned 0xC0000005 upon program end", "body": "<p>It appears that <code>collisionWorld</code> has longer lifetime duration than <code>contactListener</code>:</p>\n\n<pre><code>ContactListener contactListener;\ncollisionWorld.SetContactListener(&amp;contactListener);\n</code></pre>\n\n<p>Are you sure that <code>collisionWorld</code> is not accessing <code>contactListener</code> after it goes out of scope? (e.g. in <code>CollisionWorld</code> dtor).</p>\n\n<p>Try adding this at the end of the <code>run()</code> function:</p>\n\n<pre><code>collisionWorld.SetContactListener(0);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3195348, "user_type": "registered", "profile_image": "https://graph.facebook.com/1409794116/picture?type=large", "display_name": "Magnaillusion", "link": "https://stackoverflow.com/users/3195348/magnaillusion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7488, "favorite_count": 0, "accepted_answer_id": 32485090, "answer_count": 1, "score": 2, "last_activity_date": 1441869891, "creation_date": 1441812581, "question_id": 32483671, "link": "https://stackoverflow.com/questions/32483671/process-returned-0xc0000005-upon-program-end", "title": "Process returned 0xC0000005 upon program end", "body": "<p>While working on a quick prototype on C++, I stumbled over this error. Now, I have read that the code means \"access violation\", but the origin or reason why is this happening completely eludes me. After narrowing down the cause, I noticed it's linked to me calling a particular function. However, the funny thing is that the code doesn't crash immediately after calling the function, but <em>after</em> the execution ends. In other words, the program starts, executes correctly (even the function that arises the error appears to work as intended), <em>and then</em>, after the main finishes, it crashes with that error code.</p>\n\n<p>Whilst trying to debug my code, I went through the offending function line by line, commenting each instruction in order to see if anything that's done within makes the program crash. Surprisingly, the code crashes regardless of which instruction I comment out. Actually, I've come to comment out every single instruction within the function, leaving me with a stub that does nothing when called, and the program still fails upon finishing. However, if I comment out the call <em>itself</em>, the program stops issuing the error code. Therefore, the only reasonable solution to the problem has been not calling it at all, since even calling it and make it do nothing doesn't work.</p>\n\n<p>I've literally got nothing on this. I don't know what's going on or why does my code behave like it does.</p>\n\n<p>Just for reference, I'll include some snippets that may or may not be of particular importance.</p>\n\n<p>a. The following is the offending function. Note that, in its current state, it does nothing, but the code still crashes when called. Please do also take into consideration this is a free function.</p>\n\n<pre><code>void createCollectable(entityx::EntityX&amp; manager, TextureAtlas&amp; atlas, unsigned int type)\n{\n    /*\n    entityx::Entity collectable = manager.entities.create();\n\n    collectable.assign&lt;CollectableComponent&gt;(type);\n    collectable.assign&lt;Scriptable&gt;(std::bind(&amp;collectableCallback, collectable));\n    collectable.assign&lt;Positionable&gt;(sf::Vector2f(250.0f, 250.0f), sf::Vector2f(1.0f, 1.0f), sf::Vector2f(1.0f, 0.0f));\n    collectable.assign&lt;Movable&gt;(0.0f, sf::Vector2f(0.0f, -220.0f));\n\n    switch(type)\n    {\n    case CollectableIDs::EXTRA_BOMB:\n        collectable.assign&lt;Collidable&gt;(createBoxCollisionShape(Game::collisionWorld, 10.0f, 10.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"EXTRA_BOMB\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::EXTRA_LIFE:\n        collectable.assign&lt;Collidable&gt;(createBoxCollisionShape(Game::collisionWorld, 10.0f, 10.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"EXTRA_LIFE\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::POWER_LARGE:\n        collectable.assign&lt;Collidable&gt;(createBoxCollisionShape(Game::collisionWorld, 10.0f, 10.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"POWER_LARGE\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::SUPER_POWER:\n        collectable.assign&lt;Collidable&gt;(createBoxCollisionShape(Game::collisionWorld, 10.0f, 10.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"SUPER_POWER\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::POWER_MEDIUM:\n        collectable.assign&lt;Collidable&gt;(createBoxCollisionShape(Game::collisionWorld, 7.5f, 7.5f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"POWER_MEDIUM\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::POWER_SMALL:\n        collectable.assign&lt;Collidable&gt;(createBoxCollisionShape(Game::collisionWorld, 5.0f, 5.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"POWER_SMALL\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::MIASMA_LARGE:\n        collectable.assign&lt;Collidable&gt;(createCircleCollisionShape(Game::collisionWorld, 5.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"POINT_LARGE\"), 201, sf::BlendAlpha);\n        break;\n\n    case CollectableIDs::MIASMA_SMALL:\n        collectable.assign&lt;Collidable&gt;(createCircleCollisionShape(Game::collisionWorld, 5.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"POINT_SMALL\"), 201, sf::BlendAlpha);\n        break;\n\n    default:\n        collectable.assign&lt;Collidable&gt;(createCircleCollisionShape(Game::collisionWorld, 5.0f, collectable));\n        collectable.assign&lt;Drawable&gt;(atlas.getFrameAsSprite(\"POINT_SMALL\"), 201, sf::BlendAlpha);\n    }\n\n    return collectable;\n    */\n }\n</code></pre>\n\n<p>b. The following here is the code where the function is being called. Note that if I comment out the call to <code>createCollectable</code> here, the code ends successfully and doesn't crash at all.</p>\n\n<pre><code>void Game::run()\n{\n    loadResources();\n    prepareActionMap(actionMap);\n    ContactListener contactListener;\n    collisionWorld.SetContactListener(&amp;contactListener);\n    collisionWorld.SetAllowSleeping(false);\n\n    sf::Time timeSinceLastUpdate = sf::Time::Zero;\n\n    /*These elements are for testing only, remove them after they're not used*/\n    createPlayer(manager, actionMap, atlasHolder[\"player\"]);\n    createCollectable(manager, atlasHolder[\"bullets\"], CollectableIDs::SUPER_POWER);\n    createAdminEntity(manager);\n\n    /*-----------------------------------------------------------------*/\n\n    gameClock.restart();\n    while(window.isOpen())\n    {\n        timeSinceLastUpdate += gameClock.restart();\n        while(timeSinceLastUpdate &gt; FPS)\n        {\n            timeSinceLastUpdate -= FPS;\n            processEvents();\n            update(FPS);\n        }\n\n        render(FPS);\n    }\n}\n</code></pre>\n\n<p>c. Just for the sake of completeness, here is how I'm declaring the free function in my .hpp file.</p>\n\n<pre><code>void createCollectable(entityx::EntityX&amp; manager, TextureAtlas&amp; atlas, unsigned int type);\n</code></pre>\n\n<p>d. The following free function, declared almost identically to the previous one, does work as expected and doesn't make the process return abnormally when called. Again, this one's for reference. Please do note that making the function return a value or not has had no bearing on whether calling the function throws or not (as you can see from the commented out return the first function had, which suggests it originally returned something, just like this function):</p>\n\n<pre><code>entityx::Entity createPlayer(entityx::EntityX&amp; manager, thor::ActionMap&lt;unsigned int&gt;&amp; actionMap, TextureAtlas&amp; playerAtlas)\n{\n    entityx::Entity player = manager.entities.create();\n\n    player.assign&lt;Drawable&gt;(playerAtlas.getFrameAsSprite(\"IDLE_1\", true), 101, sf::BlendAlpha);\n    player.assign&lt;Positionable&gt;(sf::Vector2f(100.0f, 100.0f), sf::Vector2f(1.0f, 1.0f), sf::Vector2f(1.0f, 0.0f));\n    player.assign&lt;Movable&gt;(0.0f, sf::Vector2f(0.0f, 0.0f));\n    player.assign&lt;Controllable&gt;();\n\n    thor::ActionMap&lt;unsigned int&gt;::CallbackSystem&amp; callbackSystem = (player.component&lt;Controllable&gt;())-&gt;callbackSystem;\n\n    callbackSystem.connect(ActionIDs::LEFT_BUTTON_HELD, std::bind(&amp;moveLeftCallback, player));\n    callbackSystem.connect(ActionIDs::RIGHT_BUTTON_HELD, std::bind(&amp;moveRightCallback, player));\n    callbackSystem.connect(ActionIDs::UP_BUTTON_HELD, std::bind(&amp;moveUpCallback, player));\n    callbackSystem.connect(ActionIDs::DOWN_BUTTON_HELD, std::bind(&amp;moveDownCallback, player));\n    callbackSystem.connect(ActionIDs::HORIZONTAL_BUTTONS_UNPRESSED, std::bind(&amp;stopHorizontalMovementCallback, player));\n    callbackSystem.connect(ActionIDs::VERTICAL_BUTTONS_UNPRESSED, std::bind(&amp;stopVerticalMovementCallback, player));\n    callbackSystem.connect(ActionIDs::FOCUS_BUTTON_PRESSED, std::bind(&amp;focusPlayerCallback, player));\n    callbackSystem.connect(ActionIDs::FOCUS_BUTTON_UNPRESSED, std::bind(&amp;unfocusPlayerCallback, player));\n\n    thor::FrameAnimation playerIdleAnimation;\n    playerIdleAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"IDLE_1\"));\n    playerIdleAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"IDLE_2\"));\n    playerIdleAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"IDLE_3\"));\n    playerIdleAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"IDLE_4\"));\n\n    thor::FrameAnimation playerMoveLeftAnimation;\n    playerMoveLeftAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"LEFT_1\"));\n    playerMoveLeftAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"LEFT_2\"));\n    playerMoveLeftAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"LEFT_3\"));\n    playerMoveLeftAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"LEFT_4\"));\n\n    thor::FrameAnimation playerMoveRightAnimation;\n    playerMoveRightAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"RIGHT_1\"));\n    playerMoveRightAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"RIGHT_2\"));\n    playerMoveRightAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"RIGHT_3\"));\n    playerMoveRightAnimation.addFrame(0.25f, playerAtlas.getFrameAsRect(\"RIGHT_4\"));\n\n    thor::Animator&lt;DrawableAsset, unsigned int&gt; playerAnimator;\n    playerAnimator.addAnimation(AnimationIDs::PLAYER_IDLE, playerIdleAnimation, sf::seconds(0.3f));\n    playerAnimator.addAnimation(AnimationIDs::PLAYER_MOVE_LEFT, playerMoveLeftAnimation, sf::seconds(0.3f));\n    playerAnimator.addAnimation(AnimationIDs::PLAYER_MOVE_RIGHT, playerMoveRightAnimation, sf::seconds(0.3f));\n    playerAnimator.playAnimation(AnimationIDs::PLAYER_IDLE, true);\n\n    player.assign&lt;Animatable&gt;(playerAnimator);\n    player.assign&lt;Collidable&gt;(createCircleCollisionShape(Game::collisionWorld, 2.5f, player), &amp;onPlayerCollisionCallback);\n    player.assign&lt;Grazeable&gt;(createCircleCollisionShape(Game::collisionWorld, 25.0f, player), &amp;onPlayerGrazeCallback);\n    player.assign&lt;PlayerComponent&gt;\n    (\n        3,\n        3,\n        5.0f,\n        3.0f,\n        150.0f,\n        0,\n        0,\n        0.0f,\n        false\n    );\n\n    return player;\n}\n</code></pre>\n\n<p>Any help over this issue would be much appreciated. I don't believe giving out a list of used libraries would be of any interest since the problem seems not to be related to any of them, but just for completeness, the main libraries at work here are SFML, entityx and Box2D.</p>\n"}, {"tags": ["c++", "arrays", "class", "static"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 2, "creation_date": 1442120377, "post_id": 32483516, "comment_id": 52949524, "body": "You preferably don&#39;t. This is a symptom of too tightly coupled classes."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "edited": false, "score": 1, "creation_date": 1442120392, "post_id": 32483516, "comment_id": 52949525, "body": "If you want to reserve zones for each class that uses the array, why not have each class have their own array?"}, {"owner": {"reputation": 1444, "user_id": 3421814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LNW3T.jpg?s=128&g=1", "display_name": "Andrej Adamenko", "link": "https://stackoverflow.com/users/3421814/andrej-adamenko"}, "edited": false, "score": 1, "creation_date": 1442120448, "post_id": 32483516, "comment_id": 52949538, "body": "Why can&#39;t you have a separate private array in each class? It is better design than having a shared array with zones reserved for each class"}], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 2, "last_activity_date": 1442121876, "last_edit_date": 1442121876, "creation_date": 1442121564, "answer_id": 32546572, "question_id": 32483516, "link": "https://stackoverflow.com/questions/32483516/how-to-share-a-array-between-different-classes-using-static-variable-in-c/32546572#32546572", "title": "How to share a array between different classes using static variable in c++?", "body": "<p>It sounds like what you are asking for is a global variable -- which, as mentioned in the comments, is usually a bad idea, because when every class has read and write access to the same shared data, it becomes increasingly difficult to reason about the program's behavior (because it becomes hard to keep track of what parts of the codebase might be modifying or depending on the shared data, or how the different parts will interact with each other when accessing it).</p>\n\n<p>That said, if you really want to do it (and it can work okay for very small/simple programs, if only because just about any approach can be made to work okay for very small/simple programs), you can do something like this:</p>\n\n<pre><code>// in my_shared_data.h (or some other header file than anyone can #include)\nstruct MyGloballySharedData\n{\n   int myArray[100];\n   char myString[100];\n   // ... and whatever the data you care to add here\n};\n\n// tell all the #include-ers that (mySharedDataObject) exists, somewhere\nextern MyGloballySharedData mySharedDataObject;  \n</code></pre>\n\n<p>and</p>\n\n<pre><code>// in my_shared_data.cpp (or some other .cpp file, it doesn't matter which one)\nMyGloballySharedData mySharedDataObject;\n</code></pre>\n\n<p>Note that you don't want to declare mySharedDataObject to be static, as that would make it accessible only to code that is located in the same .cpp file that the mySharedDataObject global is stored in, which would make it not-globally-usable.</p>\n"}], "owner": {"reputation": 93, "user_id": 5279890, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8d3c789ac105fed98068ecdfd0356cc?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shekhawat", "link": "https://stackoverflow.com/users/5279890/aditya-shekhawat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442121876, "creation_date": 1441812124, "last_edit_date": 1442120109, "question_id": 32483516, "link": "https://stackoverflow.com/questions/32483516/how-to-share-a-array-between-different-classes-using-static-variable-in-c", "title": "How to share a array between different classes using static variable in c++?", "body": "<p>How can we maintain a shared array for storing data using a static variable? There should be zones reserved for each class in the array. We should be able to access the array from all the classes to store and retrieve data.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1441812416, "post_id": 32483375, "comment_id": 52828029, "body": "Re-opened because <a href=\"http://stackoverflow.com/q/30495941/981959\">stackoverflow.com/q/30495941/981959</a> only talks about the first question, not upcasting to <code>shared_ptr&lt;B&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1441812814, "last_edit_date": 1495540433, "creation_date": 1441812342, "answer_id": 32483584, "question_id": 32483375, "link": "https://stackoverflow.com/questions/32483375/shared-ptr-from-unique-ptr-to-an-array/32483584#32483584", "title": "shared_ptr from unique_ptr to an array", "body": "<blockquote>\n  <p>Is the above code potentially dangerous?</p>\n</blockquote>\n\n<p>It depends what you do with it.</p>\n\n<p>It won't leak resources because the <code>default_delete&lt;D[]&gt;</code> that uses <code>delete[]</code> will be copied from the <code>unique_ptr</code> and stored in the <code>shared_ptr</code> (as described at <a href=\"https://stackoverflow.com/q/30495941/981959\">Initialization of shared_ptr&lt;T&gt; from unique_ptr&lt;T[]&gt;</a>).</p>\n\n<blockquote>\n  <p>Are there pitfalls if <code>pDerived</code> is later copied into a <code>pBase</code>?</p>\n</blockquote>\n\n<p>Yes, if you do something like <code>pBase.get()[1]</code> then that is not a valid pointer to the second element if <code>sizeof(B) != sizeof(D)</code></p>\n\n<p><code>std::experimental::shared_ptr</code> from the <a href=\"https://rawgit.com/cplusplus/fundamentals-ts/v2/fundamentals-ts.html#memory.smartptr\" rel=\"nofollow noreferrer\">Library Fundamentals TS</a> supports arrays properly (as proposed by <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3939.html\" rel=\"nofollow noreferrer\">N3939</a>).</p>\n\n<p>With the version in the TS, <code>shared_ptr&lt;D&gt;</code> does not allow construction from a <code>unique_ptr&lt;D[]&gt;</code>, but <code>shared_ptr&lt;D[]&gt;</code> does. A <code>shared_ptr&lt;D[]&gt;</code> cannot be converted to <code>shared_ptr&lt;B[]&gt;</code>, to avoid the safety problem you refer to.</p>\n\n<p>The support for arrays might make it into <code>std::shared_ptr</code> in a future C++ standard, but is only in the TS for now.</p>\n"}], "owner": {"reputation": 3552, "user_id": 2930499, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb073563dbdc5b538877f229e9d32968?s=128&d=identicon&r=PG&f=1", "display_name": "tcb", "link": "https://stackoverflow.com/users/2930499/tcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 32483584, "answer_count": 1, "score": 2, "last_activity_date": 1441812814, "creation_date": 1441811700, "question_id": 32483375, "link": "https://stackoverflow.com/questions/32483375/shared-ptr-from-unique-ptr-to-an-array", "title": "shared_ptr from unique_ptr to an array", "body": "<p>Scott Meyers mentions in his book, <em>Effective Modern C++</em>, that using <code>shared_ptr</code> to arrays is discouraged because when converted to Base class pointers it creates \"holes\" in the type system.</p>\n\n<p>However, it is possible to create <code>shared_ptr&lt;T&gt;</code> from <code>unique_ptr&lt;T[]&gt;</code> in the following way</p>\n\n<pre><code>std::shared_ptr&lt;D&gt; pDerived = std::shared_ptr&lt;D&gt;(std::make_unique&lt;D[]&gt;(3)); // Create an array of 3 D's\n</code></pre>\n\n<p>Is the above code potentially dangerous? Are there pitfalls if <code>pDerived</code> is later copied into a <code>pBase</code>?</p>\n\n<pre><code>std::shared_ptr&lt;B&gt; pBase = pDerived; // B is the base class for D\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "winapi"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 4, "creation_date": 1441811668, "post_id": 32483291, "comment_id": 52827493, "body": "GetThreadUILanguage(), probably."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1441811773, "post_id": 32483291, "comment_id": 52827572, "body": "Considering that no Microsoft program, not even Windows itself, manages to correctly identify which language the user has chosen (I always get an annoying mixture of Norwegian and English), and considering that they, maybe for that reason, tie a lot of functionality to the incorrectly identified chosen language, I recommend making <b>your own scheme</b>, not relying on Windows&#39; settings  --  because you can&#39;t do a better job than Microsoft about that, and what they do sucks. Once they even had the MFC class wizard functionality tied to that. It&#39;s incredible, and very sad."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1441811793, "post_id": 32483291, "comment_id": 52827585, "body": "<a href=\"https://msdn.microsoft.com/it-it/library/windows/desktop/Dd318123(v=VS.85).aspx\" rel=\"nofollow noreferrer\">GetSystemDefaultUILanguage</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1441812424, "post_id": 32483291, "comment_id": 52828037, "body": "There is no such thing as <i>the</i> language, selected by a user. There&#39;s a default GUI language, an input language, regional settings for date and currency formatting, etc. What are you looking for?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1441816141, "post_id": 32483291, "comment_id": 52830636, "body": "see also <a href=\"http://stackoverflow.com/a/30229657/4603670\">stackoverflow.com/a/30229657/4603670</a>"}], "owner": {"reputation": 245, "user_id": 4555670, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5dc55a1c06c2816060f034afe52460c?s=128&d=identicon&r=PG&f=1", "display_name": "hakeris1010", "link": "https://stackoverflow.com/users/4555670/hakeris1010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2162, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1441811442, "creation_date": 1441811442, "question_id": 32483291, "link": "https://stackoverflow.com/questions/32483291/get-current-windows-language", "title": "Get current Windows language", "body": "<p>I want to get the name of the language selected by user now, not the default language.</p>\n\n<p>However, this code:</p>\n\n<pre><code>TCHAR loc[80];\nGetLocaleInfoA(LOCALE_USER_DEFAULT, LOCALE_SENGLANGUAGE, loc, 80*sizeof(TCHAR));\n</code></pre>\n\n<p>returns only default language. </p>\n\n<p>I have searched what first parameter should i use to get current lang, but failed to find it.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1441810847, "post_id": 32482950, "comment_id": 52826931, "body": "What is the error you got? Please <b><a href=\"https://stackoverflow.com/posts/32482950/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1441810914, "post_id": 32482950, "comment_id": 52826995, "body": "I can&#39;t spot any <code>std::string</code> or similar from your code??"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441811454, "post_id": 32482950, "comment_id": 52827348, "body": "Here&#39;s an easier way. Make a temp string large enough to hold st and st / 5  &#39;+&#39;s. Copy up to 5 chars from st. to temp, stopping when out of chars in st. Add a &#39;+&#39; to temp. Rinse. repeat. Then return temp."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1441811509, "post_id": 32483279, "comment_id": 52827390, "body": "Since you start with <code>i=1</code>, you need to use <code>i &lt;= st.size()</code>. Otherwise, you will miss the last character."}, {"owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "edited": false, "score": 0, "creation_date": 1441813298, "post_id": 32483279, "comment_id": 52828625, "body": "You might get a signed-unsigned comparison warning from <code>i &lt;= st.size()</code>."}, {"owner": {"reputation": 135, "user_id": 4307022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32c4c78d5d5d7a38e5f6807725bcf111?s=128&d=identicon&r=PG&f=1", "display_name": "dark_matter88", "link": "https://stackoverflow.com/users/4307022/dark-matter88"}, "edited": false, "score": 0, "creation_date": 1441814267, "post_id": 32483279, "comment_id": 52829355, "body": "Yes, you understood me correctly. Thanks for your advice."}], "tags": [], "owner": {"reputation": 91, "user_id": 3216215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258a59972af1d773ac014d9849290a3c?s=128&d=identicon&r=PG&f=1", "display_name": "AlexB", "link": "https://stackoverflow.com/users/3216215/alexb"}, "is_accepted": false, "score": 3, "last_activity_date": 1441811703, "last_edit_date": 1441811703, "creation_date": 1441811424, "answer_id": 32483279, "question_id": 32482950, "link": "https://stackoverflow.com/questions/32482950/insert-symbol-into-string-c/32483279#32483279", "title": "Insert symbol into string C++", "body": "<p>If I've understood you correctly then you want to insert a '+' character every 5 chars in the original string. One way to do this would be to create a temporary string and then reassign the original string:</p>\n\n<pre><code>std::string st(\"A test string with some chars\");\nstd::string temp;\n\nfor (int i = 1; i &lt;= st.size(); ++i)\n{\n    temp += st[i - 1];\n    if (i % 5 == 0)\n    {\n        temp += '+';\n    }\n}\nst = temp;\n</code></pre>\n\n<p>You'll notice I've started the loop at 1, this is to avoid the '+' being inserted on the first iteration (0%5==0).</p>\n"}, {"tags": [], "owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "is_accepted": false, "score": 0, "last_activity_date": 1441812713, "creation_date": 1441812713, "answer_id": 32483715, "question_id": 32482950, "link": "https://stackoverflow.com/questions/32482950/insert-symbol-into-string-c/32483715#32483715", "title": "Insert symbol into string C++", "body": "<pre><code>std::string InsertEveryNSymbols(const std::string &amp; st, size_t n, char c)\n{\n    const size_t size(st.size());\n\n    std::string result;\n    result.reserve(size + size / n);\n    for (size_t i(0); i != size; ++i)\n    {\n        result.push_back(st[i]);\n        if (i % n == n - 1)\n            result.push_back(c);\n    }\n    return result;\n}\n</code></pre>\n\n<p>You don't need a loop to calculate the length of the resulting string. It's going to be simply <code>size + size / 5</code>. And doing multiple inserts makes it a quadratic-complexity algorithm when you can just as easily keep it linear.</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 4307022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32c4c78d5d5d7a38e5f6807725bcf111?s=128&d=identicon&r=PG&f=1", "display_name": "dark_matter88", "link": "https://stackoverflow.com/users/4307022/dark-matter88"}, "edited": false, "score": 0, "creation_date": 1441816936, "post_id": 32483727, "comment_id": 52831067, "body": "Actually, my teacher told me it`s better to perform in-place insertions than to create another string and return this new string as a result. Thank you for your solution"}], "tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": true, "score": 0, "last_activity_date": 1441812761, "creation_date": 1441812761, "answer_id": 32483727, "question_id": 32482950, "link": "https://stackoverflow.com/questions/32482950/insert-symbol-into-string-c/32483727#32483727", "title": "Insert symbol into string C++", "body": "<p>@AlexB's answer shows how to generate a new string with the resulting text.</p>\n\n<p>That said, if your problem is to perform in-place insertions your code should look similar to this:</p>\n\n<pre><code>std::string st{ \"abcdefghijk\" };\n\nfor(auto i = 4; i != st.size(); i += 5) \n    st.insert(i+1, 1, '+'); // insert 1 character = '+' at position i\n\nassert(st == \"abcde+fghij+k\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1441814437, "creation_date": 1441814437, "answer_id": 32484318, "question_id": 32482950, "link": "https://stackoverflow.com/questions/32482950/insert-symbol-into-string-c/32484318#32484318", "title": "Insert symbol into string C++", "body": "<p>Nothing no one else has done, but eliminates the string resizing and the modulus and takes advantage of a few new and fun language features.</p>\n\n<pre><code>    std::string temp(st.length() + st.length()/5, '\\0');\n        // preallocate string to eliminate need for resizing.\n\n    auto loc = temp.begin(); // iterator for temp string\n    size_t count = 0;\n    for (char ch: st) // iterate through source string\n    {\n        *loc++ = ch;\n        if (--count == 0) // decrement and test for zero much faster than \n                          // modulus and test for zero\n        {\n            *loc++ = '+';\n            count = 5; // even with this assignment\n        }\n    }\n    st = temp;\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 4307022, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32c4c78d5d5d7a38e5f6807725bcf111?s=128&d=identicon&r=PG&f=1", "display_name": "dark_matter88", "link": "https://stackoverflow.com/users/4307022/dark-matter88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 32483727, "answer_count": 4, "score": 0, "last_activity_date": 1441814437, "creation_date": 1441810570, "question_id": 32482950, "link": "https://stackoverflow.com/questions/32482950/insert-symbol-into-string-c", "title": "Insert symbol into string C++", "body": "<p>I need to insert symbol '+' into string after its each five symbol.\nst - the member of class String of type string</p>\n\n<pre><code>int i = 1;\nint original_size = st.size;\n\nint count = 0;\nint j;\nfor (j = 0; j &lt; st.size; j++)\n{\n    if (i % 5)\n        count++;\n}\n\nwhile (st.size &lt; original_size + count)\n{\n    if (i % 5)\n    {   \n        st.insert(i + 1, 1, '+');\n        st.size++;\n    }\n    i++;\n}\n\nreturn st;\n</code></pre>\n\n<p>I got an error in this part of code. I think it is connected with conditions of of the while-cycle. Can you help me please how to do this right?</p>\n"}, {"tags": ["c++", "linux", "vim", "clang", "youcompleteme"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 4, "creation_date": 1441810450, "post_id": 32482817, "comment_id": 52826623, "body": "First of all, you can install clang from the ubuntu repositories, using e.g. <code>sudo apt-get install clang</code>, or <code>sudo apt-get install clang-3.6</code>. If you want to modify clang or link with libclang or something, you probably want to build clang from source, which you can also do, although the build takes a while."}, {"owner": {"reputation": 196, "user_id": 4324624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-osZYcvERWNM/AAAAAAAAAAI/AAAAAAAAAKs/zFetyR1E67M/photo.jpg?sz=128", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/4324624/vladislav"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441811502, "post_id": 32482817, "comment_id": 52827384, "body": "apt-get do that for me! thank you so much! =)"}], "owner": {"reputation": 196, "user_id": 4324624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-osZYcvERWNM/AAAAAAAAAAI/AAAAAAAAAKs/zFetyR1E67M/photo.jpg?sz=128", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/4324624/vladislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 843, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441810233, "creation_date": 1441810233, "question_id": 32482817, "link": "https://stackoverflow.com/questions/32482817/clang-binaries-for-32-bit-ubuntu-linux", "title": "Clang binaries for 32-bit Ubuntu Linux", "body": "<p>I need the llvm Clang binaries for 32bit Ubuntu. On official website i found only x32-64 latest versions of Clang. My question is why? I'm newbie in this, but i want to make my vim plugin \"YouCompleteMe\" to work with C-family Semantic Completion. </p>\n\n<p>P.S. Sorry for my bad English.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441810526, "post_id": 32482799, "comment_id": 52826670, "body": "<i>&quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\"><b>How to create a Minimal, Complete, and Verifiable example</b></a>. &quot;</i>"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 2, "creation_date": 1441810732, "post_id": 32482799, "comment_id": 52826841, "body": "Your example <a href=\"https://ideone.com/JJq17I\" rel=\"nofollow noreferrer\">works correctly</a>."}, {"owner": {"reputation": 119, "user_id": 5289220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lFkB5DxLkl4/AAAAAAAAAAI/AAAAAAAAABQ/TTLB2D-zF98/photo.jpg?sz=128", "display_name": "Sukces Elektroniki", "link": "https://stackoverflow.com/users/5289220/sukces-elektroniki"}, "edited": false, "score": 0, "creation_date": 1441810937, "post_id": 32482799, "comment_id": 52827015, "body": "These two lines compile fine. The error must be somewhere else. Can you show us larger part of your code?"}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1441811972, "post_id": 32482799, "comment_id": 52827712, "body": "This code seems to work fine. Are you sure this is the line with the error?"}, {"owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "edited": false, "score": 0, "creation_date": 1441838882, "post_id": 32482799, "comment_id": 52841266, "body": "Sorry! I added my &quot;full&quot; code above in an edit.  I&#39;ve tried compiling this on multiple machines and I still always get the same error every time I try to call any specific element in the array."}, {"owner": {"reputation": 119, "user_id": 5289220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lFkB5DxLkl4/AAAAAAAAAAI/AAAAAAAAABQ/TTLB2D-zF98/photo.jpg?sz=128", "display_name": "Sukces Elektroniki", "link": "https://stackoverflow.com/users/5289220/sukces-elektroniki"}, "edited": false, "score": 1, "creation_date": 1441872551, "post_id": 32482799, "comment_id": 52852617, "body": "Now, there are two errors in your code: <code>,</code> instead of <code>;</code> at the end of trap initialization and usage of undeclared variable <code>gaus2_old</code>. I fixed the first error and replaced <code>gaus2_old</code> with <code>trap</code>. It compiled with no error. Yet, even with the mistakes I mentioned, I haven&#39;t got invalid types error, only syntax error and undeclared identifier. I even tried to add more calls to <code>Xmax</code> and <code>trap</code> but it still compiles. Is it minimal portion of code that causes the problem? Also, what compiler do you use?"}], "answers": [{"comments": [{"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1441811462, "post_id": 32483014, "comment_id": 52827354, "body": "Once the question is clarified, this answer might be &quot;stale&quot;"}, {"owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "edited": false, "score": 0, "creation_date": 1441838905, "post_id": 32483014, "comment_id": 52841270, "body": "Sorry! I added my &quot;full&quot; code above in an edit. I&#39;ve tried compiling this on multiple machines and I still always get the same error every time I try to call any specific element in the array."}], "tags": [], "owner": {"reputation": 1356, "user_id": 4358137, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bfsy9.jpg?s=128&g=1", "display_name": "Seth Kitchen", "link": "https://stackoverflow.com/users/4358137/seth-kitchen"}, "is_accepted": false, "score": 1, "last_activity_date": 1441895738, "last_edit_date": 1495542144, "creation_date": 1441810714, "answer_id": 32483014, "question_id": 32482799, "link": "https://stackoverflow.com/questions/32482799/invalid-types-for-array-subscript/32483014#32483014", "title": "Invalid Types for array subscript", "body": "<p>I run this code in VS and it prints 0 to the console.</p>\n\n<pre><code>// testcpp.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\nint _tmain(int argc, _TCHAR* argv[])\n{\n    double trap[] = { 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 };\n    cout &lt;&lt; trap[3] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>On Update: I agree with <a href=\"https://stackoverflow.com/users/5289220/sukces-elektroniki\">https://stackoverflow.com/users/5289220/sukces-elektroniki</a> , Change </p>\n\n<pre><code>double trap[]={0.0,0.0,0.0,0.0,0.0,0.0},\n</code></pre>\n\n<p>to</p>\n\n<pre><code>double trap[]={0.0,0.0,0.0,0.0,0.0,0.0}; \n</code></pre>\n\n<p>AND</p>\n\n<p>change </p>\n\n<pre><code>cout &lt;&lt; gaus2_old[3] &lt;&lt; endl;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>cout &lt;&lt; trap[3] &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1441895738, "creation_date": 1441810184, "last_edit_date": 1441838833, "question_id": 32482799, "link": "https://stackoverflow.com/questions/32482799/invalid-types-for-array-subscript", "title": "Invalid Types for array subscript", "body": "<p>I'm having a very strange error with C++ that I can't quite make out. I've initialized hundreds of arrays before, but for some reason when I make an array of doubles:</p>\n\n<pre><code>double trap[]={0.0,0.0,0.0,0.0,0.0,0.0};\n</code></pre>\n\n<p>And then try to do ANYTHING with specific elements of this array, i.e.:</p>\n\n<pre><code>cout &lt;&lt; trap[3] &lt;&lt; endl;\n</code></pre>\n\n<p>I get the strange error:</p>\n\n<pre><code>compare.cpp:43:20: error: invalid types \u2018double[int]\u2019 for array subscript\n cout &lt;&lt; trap[3] &lt;&lt; endl;\n</code></pre>\n\n<p>Which I don't understand at all.  Why would the subscript(integer) have anything to do with the type of value contained in that element(double)?</p>\n\n<p>EDIT: Here is my full code that is giving the error:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt; \n#include &lt;cmath&gt;   \n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nconst double Xmax[]={2.0,10.0,20.0,40.0, 80.0, 160.0};\n\ndouble f (double x) { \n  return (exp(-x));               \n}\n\nint main() {\n  FILE *Trap = fopen(\"trap.dat\",\"w\"); \n\n  double trap[]={0.0,0.0,0.0,0.0,0.0,0.0}, \n\ncout &lt;&lt; gaus2_old[3] &lt;&lt; endl;\n//...do other stuff with trap[] and Xmax[]...\n}\n</code></pre>\n\n<p>Where everything in the line \"do other stuff with trap[] and Xmax[]\" is just the rest of my code, where every instance of trap[] and Xmax[] gives the same error:</p>\n\n<pre><code>compare.cpp:43:20: error: invalid types \u2018double[int]\u2019 for array\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2015", "visual-studio-debugging"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1441891934, "post_id": 32482699, "comment_id": 52865863, "body": "Do &quot;normal&quot; projects work and is it only related to CMake?"}, {"owner": {"reputation": 14960, "user_id": 135862, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5a2dd5f01a60b5953b09002ae6a344b?s=128&d=identicon&r=PG", "display_name": "Adi Shavit", "link": "https://stackoverflow.com/users/135862/adi-shavit"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1441906141, "post_id": 32482699, "comment_id": 52875358, "body": "@Thomas: good question. As I said a fresh install. I&#39;ll check..."}, {"owner": {"reputation": 14960, "user_id": 135862, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5a2dd5f01a60b5953b09002ae6a344b?s=128&d=identicon&r=PG", "display_name": "Adi Shavit", "link": "https://stackoverflow.com/users/135862/adi-shavit"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1442130165, "post_id": 32482699, "comment_id": 52951126, "body": "@Thomas: A normal project does not work either. I don&#39;t think this is CMake related."}, {"owner": {"reputation": 584, "user_id": 2639398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2af0cf25bed0d359dce19de12cfcd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Curve25519", "link": "https://stackoverflow.com/users/2639398/curve25519"}, "edited": false, "score": 0, "creation_date": 1444769267, "post_id": 32482699, "comment_id": 54038926, "body": "Have you tried changing your debug engine?"}, {"owner": {"reputation": 14960, "user_id": 135862, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5a2dd5f01a60b5953b09002ae6a344b?s=128&d=identicon&r=PG", "display_name": "Adi Shavit", "link": "https://stackoverflow.com/users/135862/adi-shavit"}, "edited": false, "score": 0, "creation_date": 1444769544, "post_id": 32482699, "comment_id": 54039066, "body": "How do I  do that? This is a new vanilla installation."}], "owner": {"reputation": 14960, "user_id": 135862, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5a2dd5f01a60b5953b09002ae6a344b?s=128&d=identicon&r=PG", "display_name": "Adi Shavit", "link": "https://stackoverflow.com/users/135862/adi-shavit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 665, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1442133432, "creation_date": 1441809896, "last_edit_date": 1442133432, "question_id": 32482699, "link": "https://stackoverflow.com/questions/32482699/debugging-not-working-in-vs2015-on-windows-10", "title": "Debugging Not Working in VS2015 on Windows 10", "body": "<p>I have a fresh VS2015 installation on a recently (auto-)upgraded Windows 10 machine. I generated my solution files using CMake.  </p>\n\n<p>Whenever I try to debug my native C++ code, I get the \"Break Mode\" saying \"The application is in break mode\", <em>\"Your app has entered a break state, but no code is currently executing that is supported by the selected debug engine (e.g. only native runtime code is executing).\"</em>:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/1QWCK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1QWCK.png\" alt=\"enter image description here\"></a> </p>\n\n<p>When I click \"Continue execution\" the debug session just closes.  </p>\n\n<p>What can I do to start debugging?</p>\n\n<p>Another problem that I noticed, which may or may not be related, is that every time, after opening VS2015, and trying to run or debug a program for the first time since opening, I get the following error dialog:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VQEdU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VQEdU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Once I click OK it does not com back until I restart VS2015.\nReinstallation did not remove the problem.</p>\n"}, {"tags": ["c++", "printf", "bstr"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1441809598, "post_id": 32482520, "comment_id": 52825938, "body": "Did you search?  <a href=\"http://stackoverflow.com/questions/13725519/how-to-convert-bstr-to-stdstring-in-visual-studio-c-2010\">This</a> will get you most of the way there..."}, {"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 2, "creation_date": 1441809601, "post_id": 32482520, "comment_id": 52825940, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3648848/convert-bstr-to-char\">Convert BSTR to char*</a>."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1441809730, "post_id": 32482520, "comment_id": 52826053, "body": "Not a duplicate. <code>printf</code> can print <code>wchar_t</code> so there&#39;s no point in the conversion."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1441809788, "post_id": 32482520, "comment_id": 52826112, "body": "Just use the %ls format specifier."}, {"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1441809819, "post_id": 32482520, "comment_id": 52826138, "body": "I did search and found no direct duplicate, or direct answer on other sites - which I found very surprising. I wondered if <code>_bstr_t</code> is the answer, as it so often is with BSTR?"}], "answers": [{"tags": [], "owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "is_accepted": false, "score": 1, "last_activity_date": 1441810752, "last_edit_date": 1495540402, "creation_date": 1441809840, "answer_id": 32482684, "question_id": 32482520, "link": "https://stackoverflow.com/questions/32482520/how-to-pass-bstr-to-printf/32482684#32482684", "title": "How to pass BSTR to printf?", "body": "<p>A <code>BSTR</code> is a pointer to a length-prefixed (at offset -4) and <code>0</code>-terminated wide-character string. You can pass it to any function that is capable of handling a <code>0</code>-terminated wide-character string. (The actual string starts at offset <code>0</code>.)</p>\n\n<p>If the target function cannot handle wide characters, then you need to convert the string to multibyte characters (this is the case if you want to use standard <code>printf</code> where the <code>S</code> type field character is not available). This (already commented) link provides information about that: <a href=\"https://stackoverflow.com/questions/3648848/convert-bstr-to-char\">Convert BSTR to char*</a></p>\n\n<p>@MSalters' answer has the code example (don't want to duplicate 2 trivial lines): <a href=\"https://stackoverflow.com/a/32482688/682404\">https://stackoverflow.com/a/32482688/682404</a></p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1441810145, "post_id": 32482688, "comment_id": 52826373, "body": "Can you point out the documentation for the capital S printf specifier? It doesn&#39;t appear to be standard C."}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1441810611, "post_id": 32482688, "comment_id": 52826742, "body": "@user2079303 <a href=\"https://msdn.microsoft.com/en-us/library/hf4y5e3w.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hf4y5e3w.aspx</a> - this is MSDN so it <i>is</i> Microsoft-specific - the link says so."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441810857, "post_id": 32482688, "comment_id": 52826943, "body": "I figured that with <code>BSTR</code> being Microsoft-specific this isn&#39;t an issue. <code>%ls</code> is portable."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 9, "last_activity_date": 1441809852, "creation_date": 1441809852, "answer_id": 32482688, "question_id": 32482520, "link": "https://stackoverflow.com/questions/32482520/how-to-pass-bstr-to-printf/32482688#32482688", "title": "How to pass BSTR to printf?", "body": "<p>A <code>BSTR</code> really is a <code>WCHAR*</code> with preceding length information. You can ignore that length part for printing purposes. So:</p>\n\n<pre><code>BSTR str = foo();\nprintf(\"%S\", str); // Capital S\n</code></pre>\n"}], "owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9701, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1441810752, "creation_date": 1441809416, "question_id": 32482520, "link": "https://stackoverflow.com/questions/32482520/how-to-pass-bstr-to-printf", "title": "How to pass BSTR to printf?", "body": "<p>I have a non-unicode (MBCS) C++ project building with VS2013.</p>\n\n<p>Given a <code>BSTR</code> value, how should I pass this to printf safely?</p>\n"}]