[{"tags": ["c++", "qt", "zeromq"], "answers": [{"tags": [], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": false, "score": 1, "last_activity_date": 1437007177, "creation_date": 1437007177, "answer_id": 31443561, "question_id": 31443017, "link": "https://stackoverflow.com/questions/31443017/qt-with-zeromq-publish-subscribe-pattern/31443561#31443561", "title": "Qt with ZeroMQ publish subscribe pattern", "body": "<p>The socket notifier looks like it should work.  Have you read the docs on handling it properly?  Especially if you are on Windows, it looks like there are special ways to handle it when doing the read... disabling, reading, etc.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qsocketnotifier.html#details\" rel=\"nofollow\">http://doc.qt.io/qt-5/qsocketnotifier.html#details</a></p>\n\n<p>Hope that helps.</p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 581513, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/20f805a9f4c5c4350249313344d2802b?s=128&d=identicon&r=PG", "display_name": "dlewin", "link": "https://stackoverflow.com/users/581513/dlewin"}, "edited": false, "score": 0, "creation_date": 1477328860, "post_id": 31443608, "comment_id": 67711081, "body": "Could you provide the complete working example please"}], "tags": [], "owner": {"reputation": 920, "user_id": 505160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32277e55dc35525ac843a73e31aa7f42?s=128&d=identicon&r=PG", "display_name": "user505160", "link": "https://stackoverflow.com/users/505160/user505160"}, "is_accepted": false, "score": 3, "last_activity_date": 1437007546, "creation_date": 1437007546, "answer_id": 31443608, "question_id": 31443017, "link": "https://stackoverflow.com/questions/31443017/qt-with-zeromq-publish-subscribe-pattern/31443608#31443608", "title": "Qt with ZeroMQ publish subscribe pattern", "body": "<p>First tnx for helping out,</p>\n\n<p>I've found the issue, when ZeroMQ notifies that there is message to read you need to read them all, not just first one.</p>\n\n<pre><code>    void MainWindow::readZMQData(int fd)\n{\n    qsn-&gt;setEnabled(false);\n\n    int events = 0;\n    std::size_t eventsSize = sizeof(events);\n    zmq_getsockopt(subscriber,ZMQ_EVENTS, &amp;events, &amp;eventsSize);\n    if(events &amp; ZMQ_POLLIN){\n        qDebug() &lt;&lt; \" ======  Data to read ======\";\n\n        char *string;\n        // THIS IS THE TRICK! READ UNTIL THERE IS MSG\n        while((string = s_recv_nb(subscriber)) != NULL){\n            qDebug() &lt;&lt; \"DATA: \" &lt;&lt; string;\n            free(string);\n        }\n    }\n\n    qsn-&gt;setEnabled(true);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 4599792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61088b54ff4323076d64d3a517dc9655?s=128&d=identicon&r=PG&f=1", "display_name": "sirop", "link": "https://stackoverflow.com/users/4599792/sirop"}, "is_accepted": false, "score": 0, "last_activity_date": 1492426300, "last_edit_date": 1495535466, "creation_date": 1492426300, "answer_id": 43450030, "question_id": 31443017, "link": "https://stackoverflow.com/questions/31443017/qt-with-zeromq-publish-subscribe-pattern/43450030#43450030", "title": "Qt with ZeroMQ publish subscribe pattern", "body": "<p>As it is not clear what <code>s_recv_nb(zmq::socket_t &amp; socket)</code> is, I'll provide my - slightly more detailed - implemetation of:</p>\n\n<pre><code>      void MainWindow::readZMQData()\n      {\n       qsn-&gt;setEnabled(false);\n\n       int events = 0;\n       std::size_t eventsSize = sizeof(events);\n       zmq_getsockopt(subscriber,ZMQ_EVENTS, &amp;events, &amp;eventsSize);\n       if(events &amp; ZMQ_POLLIN){\n       qDebug() &lt;&lt; \" ======  Data to read ======\";\n\n       char *string;\n       int64_t more;\n       size_t more_size = sizeof (more);\n\n       do {\n           /* Create an empty \u00d8MQ message to hold the message part */\n           zmq_msg_t part;\n           int rc = zmq_msg_init (&amp;part);\n           assert (rc == 0);\n           rc = zmq_msg_recv (&amp;part, subscriber, 0);\n           assert (rc != -1);\n           /* Determine if more message parts are to follow */\n           rc = zmq_getsockopt (subscriber, ZMQ_RCVMORE, &amp;more, &amp;more_size);\n           assert (rc == 0);\n           string = (char*) zmq_msg_data(&amp;part);\n           qDebug() &lt;&lt; QString(string) ; // &lt;&lt; \"more\" &lt;&lt; more;\n\n           zmq_msg_close (&amp;part); \n          } while (more);\n       }\n\n       qsn-&gt;setEnabled(true);\n     }\n</code></pre>\n\n<p>And one more remark: in case of Windows 64 the filedescriptor <code>fd</code>should be <code>uint64_t</code> as in <a href=\"https://stackoverflow.com/q/18607915/4599792\">zmq_getsockopt returns EINVAL on windows x64 when local address of ZMQ_FD option_val passed</a></p>\n"}], "owner": {"reputation": 920, "user_id": 505160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32277e55dc35525ac843a73e31aa7f42?s=128&d=identicon&r=PG", "display_name": "user505160", "link": "https://stackoverflow.com/users/505160/user505160"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4266, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1492426300, "creation_date": 1437003259, "question_id": 31443017, "link": "https://stackoverflow.com/questions/31443017/qt-with-zeromq-publish-subscribe-pattern", "title": "Qt with ZeroMQ publish subscribe pattern", "body": "<p>I would like to use ZeroMQ(4.1.2) with Qt (5.2.1).\nIdea is to have zmq pub/sub (where server is outside) and sub is qt app.\nCurrently receive in Qt app runs once, could someone drop hint? \nShould ZeroMQ receiver be implemented in some other way?</p>\n\n<p>Currently my code looks like:</p>\n\n<p><strong>mainwindow.h</strong></p>\n\n<pre><code>namespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\nQ_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\nprivate slots:\n    void on_pushButton_clicked();\n\n    void readZMQData();\n\nprivate:\n    Ui::MainWindow *ui;\n    QSocketNotifier *qsn;\n    void *context;\n    void *subscriber;\n\n};\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    /***** ZMQ *****/\n\n    context = zmq_ctx_new ();\n    subscriber = zmq_socket (context, ZMQ_SUB);\n    int rc = zmq_connect (subscriber, \"tcp://localhost:5556\");\n\n    char *filter = \"\";\n    rc = zmq_setsockopt (subscriber, ZMQ_SUBSCRIBE,filter, strlen (filter));\n    unsigned int fd=0;\n    size_t fd_size = sizeof(fd);\n    rc = zmq_getsockopt(subscriber,ZMQ_FD,&amp;fd,&amp;fd_size);\n\n    qsn = new QSocketNotifier(fd, QSocketNotifier::Read, this);\n    connect(qsn, SIGNAL(activated(int)), this, SLOT(readZMQData()), Qt::DirectConnection);\n\n}\n\nMainWindow::~MainWindow()\n{\n    zmq_close (this-&gt;subscriber);\n    zmq_ctx_destroy (this-&gt;context);\n    delete ui;\n}\n\n\nvoid MainWindow::readZMQData()\n{\n    qsn-&gt;setEnabled(false);\n    qDebug() &lt;&lt; \"Got data!\";\n\n    int events = 0;\n    std::size_t eventsSize = sizeof(events);\n    zmq_getsockopt(subscriber,ZMQ_EVENTS, &amp;events, &amp;eventsSize);\n    if(events &amp; ZMQ_POLLIN){\n        qDebug() &lt;&lt; \" ======  Data to read ======\";\n\n        char *string = s_recv(subscriber);\n        qDebug() &lt;&lt; \"DATA: \" &lt;&lt; string;\n        free(string);\n    }\n\n    qsn-&gt;setEnabled(true);\n}\n</code></pre>\n\n<p><strong>And server app is (from ZeroMQ examples):</strong></p>\n\n<pre><code>#include \"zhelpers.h\"\n\nint main (void)\n{\n    //  Prepare our context and publisher\n    void *context = zmq_ctx_new ();\n    void *publisher = zmq_socket (context, ZMQ_PUB);\n    int rc = zmq_bind (publisher, \"tcp://*:5556\");\n    assert (rc == 0);\n\n    //  Initialize random number generator\n    srandom ((unsigned) time (NULL));\n    while (1) {\n        //  Get values that will fool the boss\n        int zipcode, temperature, relhumidity;\n        zipcode     = randof (100000);\n        temperature = randof (215) - 80;\n        relhumidity = randof (50) + 10;\n\n        //  Send message to all subscribers\n        char update [20];\n        sprintf (update, \"%05d %d %d\", zipcode, temperature, relhumidity);\n        s_send (publisher, update);\n    }\n    zmq_close (publisher);\n    zmq_ctx_destroy (context);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++98"], "answers": [{"comments": [{"owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 1, "creation_date": 1437004118, "post_id": 31443102, "comment_id": 50855325, "body": "He marked it c++11, in which lambada are usually preferred to bind, and more readable."}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "reply_to_user": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 0, "creation_date": 1437004201, "post_id": 31443102, "comment_id": 50855359, "body": "True indeed, but I wasn&#39;t thinking about a lambda solution which would arguably be better. My thinking as he just didn&#39;t want to &quot;wrap&quot; it in anything at all. No doubt there are better solutions out there and lambda is one of them."}, {"owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 0, "creation_date": 1437004224, "post_id": 31443102, "comment_id": 50855367, "body": "Bind creates a function wrapper."}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "reply_to_user": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 0, "creation_date": 1437004834, "post_id": 31443102, "comment_id": 50855521, "body": "I&#39;ll upvote you. Same code, different thought process."}, {"owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 0, "creation_date": 1437004935, "post_id": 31443102, "comment_id": 50855548, "body": "Good question though."}, {"owner": {"reputation": 8221, "user_id": 237285, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9c6f5c78dece456732470626d552b16c?s=128&d=identicon&r=PG", "display_name": "Andres Riofrio", "link": "https://stackoverflow.com/users/237285/andres-riofrio"}, "edited": false, "score": 0, "creation_date": 1437005353, "post_id": 31443102, "comment_id": 50855659, "body": "Wow, <code>std::bind</code> has a lot of uses. Any idea if this is possible to do in C++98, where there is no <code>std::bind</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 8221, "user_id": 237285, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9c6f5c78dece456732470626d552b16c?s=128&d=identicon&r=PG", "display_name": "Andres Riofrio", "link": "https://stackoverflow.com/users/237285/andres-riofrio"}, "edited": false, "score": 1, "creation_date": 1437005626, "post_id": 31443102, "comment_id": 50855729, "body": "@AndresRiofrio, <code>boost::bind</code>"}, {"owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "reply_to_user": {"reputation": 8221, "user_id": 237285, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9c6f5c78dece456732470626d552b16c?s=128&d=identicon&r=PG", "display_name": "Andres Riofrio", "link": "https://stackoverflow.com/users/237285/andres-riofrio"}, "edited": false, "score": 0, "creation_date": 1437005951, "post_id": 31443102, "comment_id": 50855810, "body": "@AndresRiofrio if you don&#39;t want c++11 answers, then don&#39;t tag your question c++11"}, {"owner": {"reputation": 8221, "user_id": 237285, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9c6f5c78dece456732470626d552b16c?s=128&d=identicon&r=PG", "display_name": "Andres Riofrio", "link": "https://stackoverflow.com/users/237285/andres-riofrio"}, "reply_to_user": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 0, "creation_date": 1437011998, "post_id": 31443102, "comment_id": 50857304, "body": "@RussellGreene I thought it was unlikely to be doable in C++98 without Boost, so C++11 answers are fine. I forgot to tag it also with C++98 at first, even though it&#39;s in the title. :)"}, {"owner": {"reputation": 1501, "user_id": 1502810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2785f67e7be660cffe1c9d321e0bad69?s=128&d=identicon&r=PG", "display_name": "celticminstrel", "link": "https://stackoverflow.com/users/1502810/celticminstrel"}, "edited": false, "score": 1, "creation_date": 1437013105, "post_id": 31443102, "comment_id": 50857591, "body": "I would also prefer bind to a lambda in such a simple forwarding case."}], "tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": false, "score": 5, "last_activity_date": 1437004673, "last_edit_date": 1437004673, "creation_date": 1437003827, "answer_id": 31443102, "question_id": 31442984, "link": "https://stackoverflow.com/questions/31442984/how-to-skip-an-argument-using-functional-in-c11-98/31443102#31443102", "title": "How to skip an argument using &lt;functional&gt; in C++11/98", "body": "<p>This seems to work: <a href=\"http://ideone.com/6DgbA6\" rel=\"nofollow\">http://ideone.com/6DgbA6</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\n\nvoid func() {\n    cout &lt;&lt; \"Hello!\" &lt;&lt; endl;\n}\n\ntemplate&lt;class F&gt;\nvoid my_algorithm(F f) {\n    int x = 100;\n    int y = 200;\n\n    f(x, y);\n}\n\n\nint main() {\n\n    my_algorithm(std::bind(func));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "is_accepted": false, "score": 3, "last_activity_date": 1437004530, "last_edit_date": 1437004530, "creation_date": 1437004062, "answer_id": 31443132, "question_id": 31442984, "link": "https://stackoverflow.com/questions/31442984/how-to-skip-an-argument-using-functional-in-c11-98/31443132#31443132", "title": "How to skip an argument using &lt;functional&gt; in C++11/98", "body": "<p>In c++11, which your question is tagged, Use a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">lambda</a>.\nHere's the code:</p>\n\n<pre><code>my_algorithm([](A, B) \n{ \n    return function();\n});\n</code></pre>\n\n<p>What a lambda does for you is it creates that wrapper for your. </p>\n\n<p>If you want for that to be generic (templated) and you have c++14, then your can use auto:</p>\n\n<pre><code>my_algorithm([](auto, auto) \n{ \n    return function();\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 1, "creation_date": 1437013302, "post_id": 31443572, "comment_id": 50857650, "body": "This adds the extra complexity of std::function"}], "tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1437007276, "creation_date": 1437007276, "answer_id": 31443572, "question_id": 31442984, "link": "https://stackoverflow.com/questions/31442984/how-to-skip-an-argument-using-functional-in-c11-98/31443572#31443572", "title": "How to skip an argument using &lt;functional&gt; in C++11/98", "body": "<p>Solution using <code>std::function</code> and lambda:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;functional&gt;\n\nvoid function() {\n    std::cout &lt;&lt; \"Hello!\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename F&gt;\nvoid my_algorithm(F f) {    \n    int x=0;\n    int y=10;\n    f(x, y);    \n}\n\nint main()\n{  \n    std::function&lt;void(int,int)&gt; fun= [](int x, int y){  function();};        \n    my_algorithm(fun);\n}\n</code></pre>\n"}], "owner": {"reputation": 8221, "user_id": 237285, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9c6f5c78dece456732470626d552b16c?s=128&d=identicon&r=PG", "display_name": "Andres Riofrio", "link": "https://stackoverflow.com/users/237285/andres-riofrio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1437007276, "creation_date": 1437003072, "last_edit_date": 1437005235, "question_id": 31442984, "link": "https://stackoverflow.com/questions/31442984/how-to-skip-an-argument-using-functional-in-c11-98", "title": "How to skip an argument using &lt;functional&gt; in C++11/98", "body": "<p>Say I have a function:</p>\n\n<pre><code>void function() {\n    cout &lt;&lt; \"Hello!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And I have an algorithm that calls a function and passes it two arguments:</p>\n\n<pre><code>template &lt;class F&gt;\nvoid my_algorithm(F f) {\n    // ...\n    f(x, y);\n    // ...\n}\n</code></pre>\n\n<p>How can I pass <code>function</code> to <code>my_algorithm</code> by manipulating the function or function object, without manually creating a wrapper? For reference, the wrapper I don't want to create would look like this:</p>\n\n<pre><code>void functionSkipArgs(A a, B b) {\n    function();\n}\n</code></pre>\n\n<p>In other words, I'd like to find the function or series of functions that correspond to <code>some_operations</code> in the following code:</p>\n\n<pre><code>my_algorithm(some_operations(&amp;function));\n</code></pre>\n"}, {"tags": ["c++", "ios", "xcode", "boost", "linker-warning"], "answers": [{"comments": [{"owner": {"reputation": 5741, "user_id": 254638, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0da25866cffc79d7427beb50d984185a?s=128&d=identicon&r=PG", "display_name": "dnkoutso", "link": "https://stackoverflow.com/users/254638/dnkoutso"}, "edited": false, "score": 0, "creation_date": 1457421533, "post_id": 31733368, "comment_id": 59386862, "body": "Does this work for debug builds? I find it that the compiler for me doesnt pass <code>-fvisibility=hidden</code> unless I build for Release configuration...any ideas/thoughts?"}], "tags": [], "owner": {"reputation": 741, "user_id": 4634240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1626bef9d073981502d529892e739738?s=128&d=identicon&r=PG&f=1", "display_name": "adsun", "link": "https://stackoverflow.com/users/4634240/adsun"}, "is_accepted": true, "score": 2, "last_activity_date": 1438287871, "creation_date": 1438287871, "answer_id": 31733368, "question_id": 31442968, "link": "https://stackoverflow.com/questions/31442968/linker-warnings-in-xcode-6-4/31733368#31733368", "title": "Linker warnings in xcode 6.4", "body": "<p>I got rid of these linker warnings by changing \"Symbols hidden by default\" to \"YES\" and \"Inline Methods Hidden\" to \"YES\" in xcode build settings. </p>\n\n<p>The boost library for iOS was built with -fvisibility=hidden -fvisibility-inlines-hidden flags and xcode build settings had symbols visibility set to YES. Hence there was a mismatch and linker warnings. </p>\n"}], "owner": {"reputation": 741, "user_id": 4634240, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1626bef9d073981502d529892e739738?s=128&d=identicon&r=PG&f=1", "display_name": "adsun", "link": "https://stackoverflow.com/users/4634240/adsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 31733368, "answer_count": 1, "score": 1, "last_activity_date": 1535026673, "creation_date": 1437003004, "question_id": 31442968, "link": "https://stackoverflow.com/questions/31442968/linker-warnings-in-xcode-6-4", "title": "Linker warnings in xcode 6.4", "body": "<p>I use c++ library projects (that uses boost 1.57 library) for my ios app and when I build my app i get hundreds of linker warnings. The app runs totally fine.</p>\n\n<p>The prominent warning is </p>\n\n<pre><code>ld: warning: direct access in boost::exception_ptr boost::exception_detail::get_static_exception_object&lt;boost::exception_detail::bad_exception_&gt;() to global weak symbol boost::exception_ptr boost::exception_detail::get_static_exception_object&lt;boost::exception_detail::bad_exception_&gt;()::ep means the weak symbol cannot be overridden at runtime. This was likely caused by different translation units being compiled with different visibility settings.\n</code></pre>\n\n<p>How do i get rid of these linker warnings? Any possible way other than suppression?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "delphi", "activex", "internet-explorer-11"], "comments": [{"owner": {"reputation": 25610, "user_id": 988445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3386452e85998665dc0f1dd0ec2f064b?s=128&d=identicon&r=PG", "display_name": "Jerry Dodge", "link": "https://stackoverflow.com/users/988445/jerry-dodge"}, "edited": false, "score": 1, "creation_date": 1437002112, "post_id": 31442765, "comment_id": 50854657, "body": "I don&#39;t think any browser should allow modal dialogs. If it&#39;s worked in the past, it was probably by luck, or something overlooked (and later patched). The last thing anybody wants is some window popping up preventing them from using their entire browser. &quot;modal&quot; dialogs should be self-contained within the HTML page."}, {"owner": {"reputation": 253, "user_id": 40459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8092e78a8b829899d2a385b6c9156f0?s=128&d=identicon&r=PG", "display_name": "Zeroth", "link": "https://stackoverflow.com/users/40459/zeroth"}, "reply_to_user": {"reputation": 25610, "user_id": 988445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3386452e85998665dc0f1dd0ec2f064b?s=128&d=identicon&r=PG", "display_name": "Jerry Dodge", "link": "https://stackoverflow.com/users/988445/jerry-dodge"}, "edited": false, "score": 0, "creation_date": 1437002373, "post_id": 31442765, "comment_id": 50854739, "body": "Oh I agree with you. The degree of power an active x control has is terrifying. Its a business need because long ago &quot;someone&quot; wrote an active-x wrapper for our program so we didn&#39;t have to rewrite the whole thing for the web."}, {"owner": {"reputation": 25610, "user_id": 988445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3386452e85998665dc0f1dd0ec2f064b?s=128&d=identicon&r=PG", "display_name": "Jerry Dodge", "link": "https://stackoverflow.com/users/988445/jerry-dodge"}, "edited": false, "score": 0, "creation_date": 1437002441, "post_id": 31442765, "comment_id": 50854763, "body": "Well, like I said, unfortunately it seems as if Microsoft has patched a long time vulnerability which your ActiveX control was taking advantage of. Also, ActiveX isn&#39;t going anywhere, Windows still widely relies on it. It&#39;s the support within IE which is going away. You may ask your users to downgrade their version of IE. Also, have you tested in the new browser in Windows 10? I&#39;m willing to bet that&#39;s the point they cut ActiveX support."}, {"owner": {"reputation": 3255, "user_id": 3538158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qaXa.jpg?s=128&g=1", "display_name": "Lance Leonard", "link": "https://stackoverflow.com/users/3538158/lance-leonard"}, "edited": false, "score": 0, "creation_date": 1437169857, "post_id": 31442765, "comment_id": 50935279, "body": "Have you considered re-engineering your shut down process to check the status of a flag during formerly modal situations?  As long as the flag is set, you wait for input from the user and provide some little UI event to indicate the state of things (like flashing the title bar or something.)  It&#39;s a balancing act because there may be multiple triggers for the shutdown process.  (You don&#39;t want to get into an endless loop preventing a legitimate use case.)"}], "owner": {"reputation": 253, "user_id": 40459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8092e78a8b829899d2a385b6c9156f0?s=128&d=identicon&r=PG", "display_name": "Zeroth", "link": "https://stackoverflow.com/users/40459/zeroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1437001775, "creation_date": 1437001775, "question_id": 31442765, "link": "https://stackoverflow.com/questions/31442765/ie11-activex-control-modal-dialog", "title": "IE11 ActiveX control Modal dialog", "body": "<p>I work on an active x control(C++/Delphi) (and yes, I know, ActiveX will eventually be retired by MS), and an issue we're having is that in IE11 dialogs spawned by active x controls can no longer be modal. This creates a problem when the dialog absolutely needs to be modal(such as \"save your work now\" dialogs). </p>\n\n<p>Any ideas? I've already tried EnableModeless in the OLE interfaces to no effect(true or false). </p>\n"}, {"tags": ["c#", "c++", "azure", "dll", "azure-webjobs"], "comments": [{"owner": {"reputation": 573, "user_id": 4817023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0998cae8b5b0a62dfd814b3c9e0a81?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/4817023/steve"}, "edited": false, "score": 0, "creation_date": 1437001243, "post_id": 31442593, "comment_id": 50854357, "body": "Check to see if you are using an absolute path or a relative path to reference the DLL."}, {"owner": {"reputation": 307, "user_id": 4358474, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/190e867a0c4e3baa302bb88d509501bc?s=128&d=identicon&r=PG&f=1", "display_name": "porente", "link": "https://stackoverflow.com/users/4358474/porente"}, "reply_to_user": {"reputation": 573, "user_id": 4817023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0998cae8b5b0a62dfd814b3c9e0a81?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/4817023/steve"}, "edited": false, "score": 0, "creation_date": 1437002697, "post_id": 31442593, "comment_id": 50854847, "body": "I use [DllImport(&quot;ConsoleApplication2.dll&quot;, CallingConvention = CallingConvention.Cdecl)], is this the correct way?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5075931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DxEF1.jpg?s=128&g=1", "display_name": "J P", "link": "https://stackoverflow.com/users/5075931/j-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1437004842, "creation_date": 1437004842, "answer_id": 31443248, "question_id": 31442593, "link": "https://stackoverflow.com/questions/31442593/azure-webjob-cant-find-dll/31443248#31443248", "title": "azure webjob can&#39;t find dll", "body": "<p>First I would make sure you have a reference to your dll in the project references. To do this right click on the references tab in the solution tree and click add reference. Then under browse find your dll and check it into your project. If its already there checked then you have referenced your dll. Then I would check your dll and make sure its not read-only. </p>\n\n<p>Hope this helps;)</p>\n"}, {"tags": [], "owner": {"reputation": 1131, "user_id": 416192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81780fdfb13791b7e8715b851662c63e?s=128&d=identicon&r=PG", "display_name": "tripdubroot", "link": "https://stackoverflow.com/users/416192/tripdubroot"}, "is_accepted": false, "score": 0, "last_activity_date": 1439176395, "creation_date": 1439176395, "answer_id": 31911137, "question_id": 31442593, "link": "https://stackoverflow.com/questions/31442593/azure-webjob-cant-find-dll/31911137#31911137", "title": "azure webjob can&#39;t find dll", "body": "<p>I would first try setting the environment to the current directory:</p>\n\n<pre><code>Environment.CurrentDirectory\n</code></pre>\n\n<p>If this doesn't work I'd fall back on the probing element in your app.config.</p>\n\n<pre><code>&lt;configuration&gt;\n   &lt;runtime&gt;\n      &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n         &lt;probing privatePath=\"bin;bin2\\subbin;bin3\"/&gt;\n      &lt;/assemblyBinding&gt;\n   &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>ref: <a href=\"https://msdn.microsoft.com/en-us/library/823z9h8w.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/823z9h8w.aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 4358474, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/190e867a0c4e3baa302bb88d509501bc?s=128&d=identicon&r=PG&f=1", "display_name": "porente", "link": "https://stackoverflow.com/users/4358474/porente"}, "is_accepted": true, "score": 0, "last_activity_date": 1448726908, "creation_date": 1448726908, "answer_id": 33973428, "question_id": 31442593, "link": "https://stackoverflow.com/questions/31442593/azure-webjob-cant-find-dll/33973428#33973428", "title": "azure webjob can&#39;t find dll", "body": "<p>I solved this by changing in visual studio this option: project propertires->C/C++->Code Generation->Runtime Library-> change this option to Multi-threaded(/MT). Rebuilding ConsoleApplication2.dll again then passed it to azure and it worked.</p>\n"}], "owner": {"reputation": 307, "user_id": 4358474, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/190e867a0c4e3baa302bb88d509501bc?s=128&d=identicon&r=PG&f=1", "display_name": "porente", "link": "https://stackoverflow.com/users/4358474/porente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1844, "favorite_count": 0, "accepted_answer_id": 33973428, "answer_count": 3, "score": 2, "last_activity_date": 1448726908, "creation_date": 1437000685, "last_edit_date": 1439175279, "question_id": 31442593, "link": "https://stackoverflow.com/questions/31442593/azure-webjob-cant-find-dll", "title": "azure webjob can&#39;t find dll", "body": "<p>I have a simple c# console application that uses a c++ dll, it works perfectly in my PC.</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.InteropServices;\nusing System.Text;\nusing System.Threading.Tasks;\n\nnamespace ConsoleApplication1\n{\n    class Program\n    {\n        [DllImport(\"ConsoleApplication2.dll\", CallingConvention = CallingConvention.Cdecl)]\n        public static extern int mainn();\n\n        static void Main(string[] args)\n        {\n            int num = mainn();\n        }\n    }\n}\n</code></pre>\n\n<p>I zipped this console application with its dll and all debug files and upload it to a continuous webjob, so it looks like this: <a href=\"http://i.imgur.com/wWfE6lG.png\" rel=\"nofollow\">http://i.imgur.com/wWfE6lG.png</a> \nwhen running inside azure this error happens:</p>\n\n<pre><code>[07/15/2015 22:10:49 &gt; 223c43: SYS INFO] Run script 'ConsoleApplication1.exe' with script host - 'WindowsScriptHost'\n[07/15/2015 22:10:49 &gt; 223c43: SYS INFO] Status changed to Running\n[07/15/2015 22:10:49 &gt; 223c43: ERR ] \n[07/15/2015 22:10:49 &gt; 223c43: ERR ] Unhandled Exception: System.DllNotFoundException: Unable to load DLL 'ConsoleApplication2.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)\n[07/15/2015 22:10:49 &gt; 223c43: ERR ]    at ConsoleApplication1.Program.mainn()\n[07/15/2015 22:10:49 &gt; 223c43: ERR ]    at ConsoleApplication1.Program.Main(String[] args) in c:\\Users\\Juan Jose\\Desktop\\NAT middleman\\ConsoleApplication1\\Program.cs:line 17\n[07/15/2015 22:10:49 &gt; 223c43: SYS ERR ] Job failed due to exit code -532462766\n[07/15/2015 22:10:49 &gt; 223c43: SYS INFO] Process went down, waiting for 60 seconds\n</code></pre>\n\n<p>which means it can't find ConsoleApplication2.dll but in the image you can see it is right there, how do I fix this?</p>\n"}, {"tags": ["c++", "windows", "winapi", "visual-c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1437000713, "post_id": 31442545, "comment_id": 50854169, "body": "I can&#39;t reproduce this code because <code>file</code> is not defined."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3341267, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9faa55355d9cfedb0be7a4a31dd3a1cb?s=128&d=identicon&r=PG&f=1", "display_name": "noaaah", "link": "https://stackoverflow.com/users/3341267/noaaah"}, "edited": false, "score": 0, "creation_date": 1437000909, "post_id": 31442583, "comment_id": 50854237, "body": "file is a char array"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 35, "user_id": 3341267, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9faa55355d9cfedb0be7a4a31dd3a1cb?s=128&d=identicon&r=PG&f=1", "display_name": "noaaah", "link": "https://stackoverflow.com/users/3341267/noaaah"}, "edited": false, "score": 0, "creation_date": 1437001183, "post_id": 31442583, "comment_id": 50854333, "body": "@noaaah an <i>array</i> or a <i>pointer to an array</i>?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 35, "user_id": 3341267, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9faa55355d9cfedb0be7a4a31dd3a1cb?s=128&d=identicon&r=PG&f=1", "display_name": "noaaah", "link": "https://stackoverflow.com/users/3341267/noaaah"}, "edited": false, "score": 0, "creation_date": 1437004273, "post_id": 31442583, "comment_id": 50855381, "body": "@noaaah: Unlikely. Apparently <code>file</code> is a <code>char *</code> pointer."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 1, "last_activity_date": 1437000641, "creation_date": 1437000641, "answer_id": 31442583, "question_id": 31442545, "link": "https://stackoverflow.com/questions/31442545/registry-writes-only-4-chars/31442583#31442583", "title": "Registry writes only 4 Chars", "body": "<p>Apparently your <code>file</code> is a pointer. <code>sizeof(file)</code> is size of pointer in bytes, which is 4 on your platform.</p>\n\n<p>What is <code>file</code>? How is it declared? What does it point to? Why are you using <code>sizeof</code> on it in order to determine how many bytes to write? If <code>file</code> is a pointer to a C-style string, then <code>sizeof</code> will not help you to determine the length of that string. You need <code>strlen</code> for that.</p>\n"}, {"tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": true, "score": 2, "last_activity_date": 1437059683, "last_edit_date": 1437059683, "creation_date": 1437000664, "answer_id": 31442590, "question_id": 31442545, "link": "https://stackoverflow.com/questions/31442545/registry-writes-only-4-chars/31442590#31442590", "title": "Registry writes only 4 Chars", "body": "<p><code>sizeof(pointer)</code> gives 4 on 32 bit systems. Try <code>string::size</code> <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/size\" rel=\"nofollow\">(online documentation)</a> instead.</p>\n\n<pre><code>std::string filename (\"file.exe\");\nRegSetValueEx( ..., filename.size());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": false, "score": 1, "last_activity_date": 1437001376, "creation_date": 1437001376, "answer_id": 31442705, "question_id": 31442545, "link": "https://stackoverflow.com/questions/31442545/registry-writes-only-4-chars/31442705#31442705", "title": "Registry writes only 4 Chars", "body": "<p>If file is a char array, then...</p>\n\n<pre><code>RegSetValueEx(hKey, \"Test\", 0, REG_SZ, (BYTE*)file, strlen(file) + 1); // API says to include terminating NULL.\n</code></pre>\n\n<p>\"The size of the information pointed to by the lpData parameter, in bytes. If the data is of type REG_SZ, REG_EXPAND_SZ, or REG_MULTI_SZ, cbData must include the size of the terminating null character or characters.\"</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724923(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms724923(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 35, "user_id": 3341267, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9faa55355d9cfedb0be7a4a31dd3a1cb?s=128&d=identicon&r=PG&f=1", "display_name": "noaaah", "link": "https://stackoverflow.com/users/3341267/noaaah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1437027102, "accepted_answer_id": 31442590, "answer_count": 3, "score": -2, "last_activity_date": 1437059683, "creation_date": 1437000424, "question_id": 31442545, "link": "https://stackoverflow.com/questions/31442545/registry-writes-only-4-chars", "closed_reason": "Duplicate", "title": "Registry writes only 4 Chars", "body": "<p>When im try to write a RegEdit Key, he only writes only the first 4 Charaters of the file path.</p>\n\n<pre><code>HKEY hKey;\nRegOpenKeyEx(HKEY_CURRENT_USER, \"Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\", 0, KEY_SET_VALUE, &amp;hKey);\nRegSetValueEx(hKey, \"Test\", 0, REG_SZ, (BYTE*)file, sizeof(file));\nRegCloseKey(hKey);\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "multicore", "cpu-cores", "parallelism-amdahl"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1437000543, "post_id": 31442540, "comment_id": 50854127, "body": "Do you <i>really</i> have four cores? Or just two cores with four hyperthreads? (As e.g. the Intel i3)."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1437000692, "post_id": 31442540, "comment_id": 50854165, "body": "Also: Did you check that the 4 function calls in the sequential test aren&#39;t inlined?"}, {"owner": {"reputation": 1538, "user_id": 4834831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/25e6f1afaca8d7ac7f4081aa986563ad?s=128&d=identicon&r=PG&f=1", "display_name": "krispet krispet", "link": "https://stackoverflow.com/users/4834831/krispet-krispet"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1437000698, "post_id": 31442540, "comment_id": 50854168, "body": "@BaummitAugen Yes. I&#39;ve tested it on an i7-4700MQ. 4 cores, 8 hyperthreads."}, {"owner": {"reputation": 8867, "user_id": 119540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b416b34eaf6b53e6dad8eab420300ce7?s=128&d=identicon&r=PG", "display_name": "Synetech", "link": "https://stackoverflow.com/users/119540/synetech"}, "edited": false, "score": 2, "creation_date": 1437000872, "post_id": 31442540, "comment_id": 50854221, "body": "It depends on the efficiency of the operating-system\u2019s scheduler. Other programs and background tasks will be assigned to the cores and get quanta from some but not all of the cores that the threads are using and users have very little control over that; it\u2019s difficult to force the OS to dedicate a core entirely to a thread from a program (setting affinities only locks a thread to a core, it doesn&#39;t block other processes from using it)."}, {"owner": {"reputation": 1538, "user_id": 4834831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/25e6f1afaca8d7ac7f4081aa986563ad?s=128&d=identicon&r=PG&f=1", "display_name": "krispet krispet", "link": "https://stackoverflow.com/users/4834831/krispet-krispet"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1437000917, "post_id": 31442540, "comment_id": 50854241, "body": "@DanielJour I didn&#39;t. How can I explicitly forbid inlining? Haven&#39;t really thought about that, these numbers get huge quickly, like 5 MB-s of memory. But still, copying 5 MB-s in a DDR3 RAM isn&#39;t really comparable to calculating it IMO."}, {"owner": {"reputation": 1538, "user_id": 4834831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/25e6f1afaca8d7ac7f4081aa986563ad?s=128&d=identicon&r=PG&f=1", "display_name": "krispet krispet", "link": "https://stackoverflow.com/users/4834831/krispet-krispet"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1437001378, "post_id": 31442540, "comment_id": 50854410, "body": "@DanielJour I mean this whole thing takes like 2 minutes. Thats not comparable to copying roughly 5 MB-s in memory."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1437001404, "post_id": 31442540, "comment_id": 50854422, "body": "Even if you have 4 cores, you only have 1 RAM. If the algorithm isn&#39;t running from L1 cache you may be getting contention that limits the total throughput."}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1437001466, "post_id": 31442540, "comment_id": 50854438, "body": "Do you see it using 4 different cores?  <a href=\"http://stackoverflow.com/questions/28678771/c11-async-is-using-only-one-core\">This question</a> was saying he only say the threads running on one core..."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1437002072, "post_id": 31442540, "comment_id": 50854647, "body": "Use a function pointer and assign it in a volatile environment: bool volatile yes = true; if (yes) { fnptr = mp_factorial; } else { fnptr = dummyfn; } fnptr(num); // 3 more times. Though I&#39;d be surprised if that were the only cause."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1437002214, "post_id": 31442540, "comment_id": 50854690, "body": "Is <code>mp_factorial</code> doing dynamic allocation? If so, the threads are not really acting independently."}], "answers": [{"comments": [{"owner": {"reputation": 1538, "user_id": 4834831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/25e6f1afaca8d7ac7f4081aa986563ad?s=128&d=identicon&r=PG&f=1", "display_name": "krispet krispet", "link": "https://stackoverflow.com/users/4834831/krispet-krispet"}, "edited": false, "score": 0, "creation_date": 1437002369, "post_id": 31442784, "comment_id": 50854740, "body": "Yup, thats it. I am developing a thread pool class and I met this issue during that. I&#39;ve tried adding less memory intensive tasks to the pool and the scaling increased a lot ( near N times ). Thanks."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 16, "last_activity_date": 1437035617, "last_edit_date": 1437035617, "creation_date": 1437001871, "answer_id": 31442784, "question_id": 31442540, "link": "https://stackoverflow.com/questions/31442540/why-isnt-n-independent-calculations-n-times-faster-on-n-threads/31442784#31442784", "title": "Why isn&#39;t N independent calculations N times faster on N threads?", "body": "<p>The problem here is that you certainly have some large lumpy numbers, which do not fit in the L1 and L2 caches of your processor, meaning that the processor sits and twiddles its little ALU fingers whilst the memory controller is jumping all over the place trying to read a little bit of memory for each processor. </p>\n\n<p>When you run in ONE thread, that one thread is will at least largely only work on three different memory regions (<code>a = b * c</code>, reading from <code>b</code> and <code>c</code>, writing to <code>a</code>). </p>\n\n<p>When you do 4 threads, you have four different <code>a = b * c;</code> with three different streams of data each, leading to both more thrashing of caches, the memory controller and the \"open pages\" [pages here are a DRAM term, nothing to do with MMU pages, but you may also find that TLB misses are a factor as well]. </p>\n\n<p>So you get better performance from running more threads, but not 4x because of the large amount of data being consumed and produced by each thread, the memory interface is the bottle-neck. Other than getting a machine with a more efficient memory interface [and that may not be so easy], there's nothing much you can do about this - just accept that for this particular case, memory is more of a limiting factor than the calculation.</p>\n\n<p>The ideal example for solving with multithreading are those that require a lot of calculation, but doesn't use very much memory. I have a simple prime number calculator and one that calculates \"weird numbers\", both give almost exactly Nx performance improvement when run on N cores [but would I start using these for numbers that are many times larger than 64-bits, it would stop giving the same benefit]</p>\n\n<p>Edit: There's also the possibility of: </p>\n\n<ul>\n<li>some function(s) that your code calls a lot are locking/blocking the other threads [possibly in a busy-wait fashion, if the implementation expects short wait-times, as calling the OS to wait a few dozen clock-cycles is pointless] - things like <code>new</code> and <code>malloc</code> and their freeing counterparts are plausible candidates.</li>\n<li>True of false sharing - data is being shared between CPU-cores causing cache-content being sent back and forth between processors. Particularly small shared arrays that are accessed [and updated] from each thread can cause this to go wrong, even if the updates are done locklessly and with atomic operations. </li>\n</ul>\n\n<p>The term \"false\" sharing is used when you have something like this</p>\n\n<pre><code> // Some global array. \n int array[MAX_THREADS];\n ....\n // some function that updates the global array\n int my_id = thread_id();\n array[my_id]++;\n</code></pre>\n\n<p>Although each thread has it's own array entry, the same cache-line is bounced from one CPU to the other. I once had a SMP (before multi-core) dhrystone benchmark that ran at 0.7x the performance of one processor when running on 2 processors - because ONE of the commonly accessed data-items was stored as an <code>int array[MAX_THREADS]</code>. This is of course a rather extreme example... </p>\n"}, {"comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1437002124, "post_id": 31442806, "comment_id": 50854658, "body": "I doubt very much the first paragraph applies, given the graph in the question. For a benchmark that takes more than a few milliseconds on a modern desktop computer OS / processor combination, I&#39;d say the thread creation and destruction is also insignificant."}, {"owner": {"reputation": 2772, "user_id": 2256010, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/09ff15ec3ceea6fbceac3c50ea2daa9b?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2256010/matt"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1437002295, "post_id": 31442806, "comment_id": 50854713, "body": "@MatsPetersson I&#39;m not familiar with any system that has 5 threads on a CPU so I was wondering where he got the graph in the first place."}, {"owner": {"reputation": 1538, "user_id": 4834831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/25e6f1afaca8d7ac7f4081aa986563ad?s=128&d=identicon&r=PG&f=1", "display_name": "krispet krispet", "link": "https://stackoverflow.com/users/4834831/krispet-krispet"}, "edited": false, "score": 0, "creation_date": 1437002583, "post_id": 31442806, "comment_id": 50854813, "body": "@Matt The main function runs in a thread. Thats thread 1. The 4 <code>std::async</code>s create 4 other threads, those are working ( at least in the parallel part ). BTW I got the graph from my IDE ( Xcode )."}], "tags": [], "owner": {"reputation": 2772, "user_id": 2256010, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/09ff15ec3ceea6fbceac3c50ea2daa9b?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2256010/matt"}, "is_accepted": false, "score": -2, "last_activity_date": 1437001971, "creation_date": 1437001971, "answer_id": 31442806, "question_id": 31442540, "link": "https://stackoverflow.com/questions/31442540/why-isnt-n-independent-calculations-n-times-faster-on-n-threads/31442806#31442806", "title": "Why isn&#39;t N independent calculations N times faster on N threads?", "body": "<p>Your answer sort of depends on User threads or Kernel threads.  If the threads you are using are implemented in user space the kernel is not aware of them therefore they cannot execute in a true \"parallel\" fashion across multiple physical cpu cores.</p>\n\n<p>If the threads are implemented in Kernel space then the kernel is aware of the threads and can possibly handle them in a parallel fashion across multiple physical cpu cores.</p>\n\n<p>There is also overhead for thread creation, destruction and context switching.  Every time a thread context switches the thread library needs to store values and load values etc.</p>\n"}], "owner": {"reputation": 1538, "user_id": 4834831, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/25e6f1afaca8d7ac7f4081aa986563ad?s=128&d=identicon&r=PG&f=1", "display_name": "krispet krispet", "link": "https://stackoverflow.com/users/4834831/krispet-krispet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 31442784, "answer_count": 2, "score": 9, "last_activity_date": 1437035617, "creation_date": 1437000384, "last_edit_date": 1437001739, "question_id": 31442540, "link": "https://stackoverflow.com/questions/31442540/why-isnt-n-independent-calculations-n-times-faster-on-n-threads", "title": "Why isn&#39;t N independent calculations N times faster on N threads?", "body": "<p>I have an N core processor ( 4 in my case ). Why isn't N totally independent function calls on N threads roughly N times faster ( of course there is an overhead of creating threads, but read further )?</p>\n\n<p>Look at the the following code:</p>\n\n<pre><code>namespace ch = std::chrono;\nnamespace mp = boost::multiprecision;\nconstexpr static unsigned long long int num = 3555;\n\n// mp_factorial uses boost/multiprecision/cpp_int, so I get legit results\n\n    ch::steady_clock::time_point s1 = ch::steady_clock::now();\n    auto fu1 = std::async(std::launch::async, mp_factorial, num);\n    auto fu2 = std::async(std::launch::async, mp_factorial, num);\n    auto fu3 = std::async(std::launch::async, mp_factorial, num);\n    auto fu4 = std::async(std::launch::async, mp_factorial, num);\n    fu1.get(); fu2.get(); fu3.get(); fu4.get();\n    ch::steady_clock::time_point e1 = ch::steady_clock::now();\n\n    ch::steady_clock::time_point s2 = ch::steady_clock::now();\n    mp_factorial(num);\n    mp_factorial(num);\n    mp_factorial(num);\n    mp_factorial(num);\n    ch::steady_clock::time_point e2 = ch::steady_clock::now();\n\n    auto t1 = ch::duration_cast&lt;ch::microseconds&gt;(e1 - s1).count();\n    auto t2 = ch::duration_cast&lt;ch::microseconds&gt;(e2 - s2).count();\n\n    cout &lt;&lt; t1 &lt;&lt; \" \" &lt;&lt; t2 &lt;&lt; endl;\n</code></pre>\n\n<p>I get results like:</p>\n\n<blockquote>\n  <p>11756 20317</p>\n</blockquote>\n\n<p>Thats roughly 2 times faster. I've also tried this with huge numbers, like <code>num = 355555</code>. I got really similar results:</p>\n\n<blockquote>\n  <p>177462588 346575062</p>\n</blockquote>\n\n<p><strong>Why is this the case?</strong> I'm perfectly aware of Amdahl's law, and that a  multicored processor isn't always <code>number_of_cores</code> times faster, but when I have <strong>independent</strong> operations, I'd expect better results. At least something near <code>number_of_cores</code>.</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>As you can see, all threads are working as expected, so this is not the issue:</p>\n\n<p><img src=\"https://i.stack.imgur.com/pEzja.png\" alt=\"Workload of threads\"></p>\n"}, {"tags": ["c++", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "is_accepted": true, "score": 4, "last_activity_date": 1437004898, "last_edit_date": 1495540449, "creation_date": 1437004898, "answer_id": 31443262, "question_id": 31442407, "link": "https://stackoverflow.com/questions/31442407/formatting-on-gdb-examine-memory/31443262#31443262", "title": "Formatting on gdb examine memory", "body": "<p>You can do this with a macro. (This is adapted from my answer to <a href=\"https://stackoverflow.com/a/25813099/2554472\">a similar question</a>).</p>\n\n<pre><code>define xb16\n    dont-repeat\n    set $addr = (char *)($arg0)\n    set $endaddr = $addr + $arg1\n    while $addr &lt; $endaddr\n        printf \"%p: \", $addr\n        set $lineendaddr = $addr + 16\n        if $lineendaddr &gt; $endaddr\n            set $lineendaddr = $endaddr\n        end\n        set $a = $addr\n        while $a &lt; $lineendaddr\n            printf \"0x%02x \", *(unsigned char *)$a\n            set $a++\n        end\n        printf \"\\n\"\n        set $addr = $addr + 16\n    end\nend\n\ndocument xb16\nusage: xb16 address count\noutputs bytes in hex, 16 per row\nend\n</code></pre>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 31443262, "answer_count": 1, "score": 1, "last_activity_date": 1518526916, "creation_date": 1436999674, "last_edit_date": 1518526916, "question_id": 31442407, "link": "https://stackoverflow.com/questions/31442407/formatting-on-gdb-examine-memory", "title": "Formatting on gdb examine memory", "body": "<p>When debugging a C/C++ code, I examine memory using the following command</p>\n\n<pre><code>(gdb)x/32xub data\n0x7fef824b2c6a: 8   0   39  235 101 169 0   30\n0x7fef824b2c72: 73  219 25  195 8   0   69  0\n0x7fef824b2c7a: 0   60  17  223 64  0   54  6\n0x7fef824b2c82: 245 43  85  190 0   3   147 32\n</code></pre>\n\n<p>I would like have 16 bytes in a row and each byte shows in 2 hex digits.\nNot sure what to do. Don't see any help from <a href=\"http://www.delorie.com/gnu/docs/gdb/gdb_56.html\" rel=\"nofollow\">reference manual</a>.\nAny ideas? Thanks.</p>\n\n<p><strong>UPDATE1</strong></p>\n\n<p>Just realized that when doing it again, it shows every bytes in hexdigits. However, it's 8 bytes per row, not 16. </p>\n\n<pre><code>(gdb) x/32x prevPkt\n0x7fef824b2c6a: 0x08    0x00    0x27    0xeb    0x65    0xa9    0x00    0x1e\n0x7fef824b2c72: 0x49    0xdb    0x19    0xc3    0x08    0x00    0x45    0x00\n0x7fef824b2c7a: 0x00    0x3c    0x11    0xdf    0x40    0x00    0x36    0x06\n0x7fef824b2c82: 0xf5    0x2b    0x55    0xbe    0x00    0x03    0x93    0x20\n</code></pre>\n"}, {"tags": ["c++", "chess"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1436999431, "post_id": 31442338, "comment_id": 50853735, "body": "You define <code>operator==</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1436999875, "post_id": 31442441, "comment_id": 50853896, "body": "<a href=\"https://ideone.com/DwluGM\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 19, "user_id": 4883767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be13486604efe5d5b03b5fc23c54c57a?s=128&d=identicon&r=PG&f=1", "display_name": "Zuve", "link": "https://stackoverflow.com/users/4883767/zuve"}, "edited": false, "score": 0, "creation_date": 1437017896, "post_id": 31442441, "comment_id": 50858754, "body": "Would I place this within the class? Within the cpp file or header file? In the constructor?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 19, "user_id": 4883767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be13486604efe5d5b03b5fc23c54c57a?s=128&d=identicon&r=PG&f=1", "display_name": "Zuve", "link": "https://stackoverflow.com/users/4883767/zuve"}, "edited": false, "score": 0, "creation_date": 1437036032, "post_id": 31442441, "comment_id": 50866528, "body": "@Zuve: Whichever you like. It&#39;s just like an ordinary class member function. You have to define an override in every derived class."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 1, "last_activity_date": 1436999864, "creation_date": 1436999864, "answer_id": 31442441, "question_id": 31442338, "link": "https://stackoverflow.com/questions/31442338/operator-not-applying-to-custom-type-c/31442441#31442441", "title": "Operator &#39;==&#39; not applying to custom type C++", "body": "<p>The comparison operator can be virtual:</p>\n\n<pre><code>struct Base { virtual bool operator==(const Base &amp;) const = 0; };\n</code></pre>\n\n<p>A typical implementation would check for type identity first, and then for object identity:</p>\n\n<pre><code>struct A : Base\n{\n    bool operator==(const Base &amp; rhs) const override\n    {\n        if (auto * p = dynamic_cast&lt;const A *&gt;(&amp;rhs))\n        {\n            return typeid(*p) == typeid(A) &amp;&amp; /* compare value */;\n        }\n        return false;\n    }\n\n    // state\n};\n</code></pre>\n\n<p>The inner type check is necessary to exclude the case where <code>rhs</code> is contained in an object <em>derived from</em> <code>A</code> rather than of type <code>A</code> exactly. You could spare yourself this extra check if <code>A</code> was <code>final</code>. You could alternatively start with the <code>typeid</code> check, but you generally still need the dynamic cast (rather than a static cast) in case the base is virtual.</p>\n"}], "owner": {"reputation": 19, "user_id": 4883767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be13486604efe5d5b03b5fc23c54c57a?s=128&d=identicon&r=PG&f=1", "display_name": "Zuve", "link": "https://stackoverflow.com/users/4883767/zuve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1436999463, "answer_count": 1, "score": 0, "last_activity_date": 1436999864, "creation_date": 1436999342, "last_edit_date": 1436999562, "question_id": 31442338, "link": "https://stackoverflow.com/questions/31442338/operator-not-applying-to-custom-type-c", "closed_reason": "Duplicate", "title": "Operator &#39;==&#39; not applying to custom type C++", "body": "<p>I am working on a chess game in C++, and each type of piece has its own class, which all inherit the \"Space\" class. For the board, I have an two dimensional 8x8 array of Space, declared as <code>Space board[8][8] {}</code> the brackets being filled with different instances of the piece classes. </p>\n\n<p>I need to make an <code>if</code> statement to check if a space is empty. This means, I need to check a location on the array if it is empty. The current code for the if statement is </p>\n\n<pre><code>if(board[0][0] == wRook1 {}\n</code></pre>\n\n<p>Please note: <code>wRook1</code> is an instance of the Rook class, which inherits the Space class. However, I get an error saying that the </p>\n\n<blockquote>\n  <p>operator == is not valid for the operands Space == Space.</p>\n</blockquote>\n\n<p>How do I make the custom class <code>Space</code> work with the == operator? </p>\n\n<p>Currently the Space class simply has a constructor, as it is only used to be an overarching type for the pieces.</p>\n"}, {"tags": ["c++", "linux", "sockets"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1437004291, "post_id": 31442163, "comment_id": 50855385, "body": "You throw away the return value of <code>recv</code>, so you have no idea how many bytes you received! How is <code>cou &lt;&lt; buffer &lt;&lt; &quot; &quot;;</code> supposed to know how many bytes to output?"}, {"owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1437023581, "post_id": 31442163, "comment_id": 50860316, "body": "@DavidSchwartz When it sees the null character (\\0) at the end of the char pointer, it will output it?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1437026000, "post_id": 31442163, "comment_id": 50861169, "body": "You&#39;re inside <code>do</code>/<code>while</code> loop, and no code inside that loop puts a null character anywhere."}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "edited": false, "score": 0, "creation_date": 1437023493, "post_id": 31443000, "comment_id": 50860287, "body": "So I have to get the ASCII value of &quot;\\&quot; and &quot;n&quot; as well?? How do I scan the &quot;entire buffer&quot;. cin.getline(buffer, 1024); ?"}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 1, "last_activity_date": 1437003196, "creation_date": 1437003196, "answer_id": 31443000, "question_id": 31442163, "link": "https://stackoverflow.com/questions/31442163/c-sockets-sending-messages-with-new-line-linux/31443000#31443000", "title": "C++ Sockets - Sending messages with new line (linux)", "body": "<p>You're only examining the first character of the buffer. You need to either read one byte at a time (yuck) or scan the entire buffer for the delimiter.</p>\n\n<p>Note that it might be in the middle, before part or all of another message.</p>\n"}], "owner": {"reputation": 647, "user_id": 4646416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DtzE8.png?s=128&g=1", "display_name": "Hassan Yousuf", "link": "https://stackoverflow.com/users/4646416/hassan-yousuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "accepted_answer_id": 31443000, "answer_count": 1, "score": 0, "last_activity_date": 1437003196, "creation_date": 1436998620, "question_id": 31442163, "link": "https://stackoverflow.com/questions/31442163/c-sockets-sending-messages-with-new-line-linux", "title": "C++ Sockets - Sending messages with new line (linux)", "body": "<p>I am trying to send messages from client to server and vice versa. The messages are receiving correctly but I have to put an <code>*</code> at the end of every message.</p>\n\n<p>The control loop I am using is <code>*buffer != '*'</code>. I tried to replace with <code>\\n</code> or checking with via ASCII value which is 10 through <code>static_cast</code> but the message is not going.</p>\n\n<p>How do I transfer messages when the user enters a new line (\\n). I am thinking of <code>cin.getline</code>. is it okay to use it with a pointer?</p>\n\n<p>server.cpp</p>\n\n<pre><code>     do {\n            recv(server, buffer, bufsize, 0);\n            cout &lt;&lt; buffer &lt;&lt; \" \";\n            if (*buffer == '#') {\n                *buffer = '*';\n                isExit = true;\n            }\n        } while (*buffer != '*');\n\n        do {\n            cout &lt;&lt; \"\\nServer: \";\n            do {\n                cin &gt;&gt; buffer;\n                send(server, buffer, bufsize, 0);\n                if (*buffer == '#') {\n                    send(server, buffer, bufsize, 0);\n                    *buffer = '*';\n                    isExit = true;\n                }\n            } while (*buffer != '*');\n\n            cout &lt;&lt; \"Client: \";\n            do {\n                recv(server, buffer, bufsize, 0);\n                cout &lt;&lt; buffer &lt;&lt; \" \";\n                if (*buffer == '#') {\n                    *buffer == '*';\n                    isExit = true;\n                }\n            } while (*buffer != '*');\n        } while (!isExit);\n</code></pre>\n\n<p>client.cpp </p>\n\n<pre><code>     do {\n        cout &lt;&lt; \"Client: \";\n        do {\n            cin &gt;&gt; buffer;\n            send(client, buffer, bufsize, 0);\n            if (*buffer == '#') {\n                send(client, buffer, bufsize, 0);\n                *buffer = '*';\n                isExit = true;\n            }\n        } while (*buffer != 42);\n\n        cout &lt;&lt; \"Server: \";\n        do {\n            recv(client, buffer, bufsize, 0);\n            cout &lt;&lt; buffer &lt;&lt; \" \";\n            if (*buffer == '#') {\n                *buffer = '*';\n                isExit = true;\n            }\n\n        } while (*buffer != 42);\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "templates", "c++11", "hashtable", "hashset"], "comments": [{"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1436998682, "post_id": 31442152, "comment_id": 50853446, "body": "people who think that it is a good idea to teach programming using C++ need to be isolated."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1436998745, "post_id": 31442152, "comment_id": 50853468, "body": "Your include guards are illegal. <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\" title=\"what are the rules about using an underscore in a c identifier\">stackoverflow.com/questions/228783/&hellip;</a>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436999080, "post_id": 31442152, "comment_id": 50853597, "body": "The <b>complete error</b> (including the line of code in question) would be helpful.  Also, rename your include guards so they don&#39;t begin with underscores."}, {"owner": {"reputation": 45, "user_id": 3216836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fb488355f7d91922c827a6d77ef4df?s=128&d=identicon&r=PG&f=1", "display_name": "user3216836", "link": "https://stackoverflow.com/users/3216836/user3216836"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436999092, "post_id": 31442152, "comment_id": 50853600, "body": "That is....extremely vague, especially given the massive amount of standards included in that entire article. Nowhere did I find anything about why the include guards in the OP are &quot;illegal&quot;.  @DrewDormann I added it to the end of the OP, sorry for missing it"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436999373, "post_id": 31442152, "comment_id": 50853713, "body": "@user3216836 I took a wild guess at what code here represents the file &quot;WSUHashSet.h&quot;.  Then I counted by hand down to &quot;line 19&quot;.  It&#39;s a blank line.  Something&#39;s fishy here."}, {"owner": {"reputation": 45, "user_id": 3216836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fb488355f7d91922c827a6d77ef4df?s=128&d=identicon&r=PG&f=1", "display_name": "user3216836", "link": "https://stackoverflow.com/users/3216836/user3216836"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436999892, "post_id": 31442152, "comment_id": 50853903, "body": "@DrewDormann Probably just an issue with pasting here from the compiler. I edited again"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1437001384, "post_id": 31442152, "comment_id": 50854414, "body": "I haven&#39;t seen a constructor with class qualified name inside class scope yet, so that looks weird for me, though I&#39;m unsure whether this is causing the error."}, {"owner": {"reputation": 45, "user_id": 3216836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fb488355f7d91922c827a6d77ef4df?s=128&d=identicon&r=PG&f=1", "display_name": "user3216836", "link": "https://stackoverflow.com/users/3216836/user3216836"}, "edited": false, "score": 0, "creation_date": 1437002644, "post_id": 31442152, "comment_id": 50854831, "body": "I know it&#39;s a lot to ask for you guys to look through all that crap, but the professor said it&#39;s doable in an hour with 40 lines of code. There&#39;s got to be some key element that just &quot;clicks&quot;, you know?"}], "answers": [{"tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 0, "last_activity_date": 1437474422, "creation_date": 1437474422, "answer_id": 31536510, "question_id": 31442152, "link": "https://stackoverflow.com/questions/31442152/c-how-can-i-implement-a-hash-set-from-a-hash-table-using-a-template-class-chil/31536510#31536510", "title": "C++ how can I implement a hash set from a hash table using a template class child of a template class?", "body": "<p>If you look at the test code, you can see the the types you create must be templates, as they're instantiated for specific element types:</p>\n\n<pre><code>WSUHashTable&lt;int&gt; example = {1, 2, 3, 4, 1};\n\nWSUHashSet&lt;double&gt; doubleSet = { ...\n</code></pre>\n\n<p>You show your attempt to make a template:</p>\n\n<pre><code>template&lt;\n    typename elementT,\n    typename Hash = std::hash&lt;elementT&gt;\n&gt;\nclass WSUHashSet&lt;elementT&gt; : public WSUHashTable&lt;std::string&gt; {\n  public:\n    WSUHashSet&lt;elementT&gt;::WSUHashSet(std::initializer_list&lt;std::string&gt; init) :  WSUHashTable(init)\n    {\n        insert(init);\n    }\n    ...\n</code></pre>\n\n<p>That's not so far off... try:</p>\n\n<pre><code>template &lt;typename elementT&gt;\nclass WSUHashSet&lt;elementT&gt; : public WSUHashTable&lt;elementT&gt;\n{\n  public:\n    WSUHashSet(std::initializer_list&lt;std::string&gt; init)\n      :  WSUHashTable&lt;elementT&gt;(init)\n    { }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3216836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fb488355f7d91922c827a6d77ef4df?s=128&d=identicon&r=PG&f=1", "display_name": "user3216836", "link": "https://stackoverflow.com/users/3216836/user3216836"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1783, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1437474422, "creation_date": 1436998587, "last_edit_date": 1436999862, "question_id": 31442152, "link": "https://stackoverflow.com/questions/31442152/c-how-can-i-implement-a-hash-set-from-a-hash-table-using-a-template-class-chil", "title": "C++ how can I implement a hash set from a hash table using a template class child of a template class?", "body": "<p>I have a school assignment to implement a hash_set and a hash_map, I am given a main.cpp that has code to test these classes (inserts, deletes, searches, prints, etc). I am also given a base hash_table class that is a templated class, and just told to \"make the hash_set and hash_map work based on the testing code with new classes of their own\". </p>\n\n<p>Without more specific details, I assume I am supposed to implement the set and map based on the hash_table, which the teacher said the project could be completed in 40 lines of code (wat??) between the two new classes...but I can't even get the hash_set class to inherit the hash_table since it's a template. I can get it compiling ok without making the hash_set class a template, until I instantiate it, since the testing code is passing it a template type in the declaration. But if I try to make the class a template type itself to compensate for this, everything breaks and I can't track down the source of the error. I'm about 8 hours into this project which should supposedly be a 1 hour project, so I'm at wits end here.</p>\n\n<p>Here is the original main.cpp with the testing code (hash_map is commented out because I haven't even started that yet :/ )</p>\n\n<pre><code>//\n//  main.cpp\n//  CS3100Project05_HashCollections\n#include \"WSUHashTable.h\"\n//#include \"WSUHashMap.h\"  // Uncomment to test WSUHashMap\n#include \"WSUHashSet.h\"  // Uncomment to test WSUHashSet\n#include &lt;iostream&gt;\n\nint main(int argc, const char * argv[])\n{\n   ///////////////////////////////////////////////////////////////////\n   /// Part 1 :TEST HASH TABLE                                     ///\n   ///////////////////////////////////////////////////////////////////\n   {\n      WSUHashTable&lt;int&gt; example = {1, 2, 3, 4, 1};\n\n      std::cout &lt;&lt; \"Part 1a: Expected output is in any order \" &lt;&lt;\n         \"\\\"1 2 3 4\\\"\\n\";\n\n      for(int n : example)\n      {\n         std::cout &lt;&lt; n &lt;&lt; ' ';\n      }\n      std::cout &lt;&lt; std::endl;\n      std::cout &lt;&lt; std::endl;\n\n      std::cout &lt;&lt; \"Part 1b: Expected output is \\\"Found 2\\\"\\n\";\n      {\n         auto search = example.find(2);\n         if(search != example.end())\n         {\n            std::cout &lt;&lt; \"Found \" &lt;&lt; (*search) &lt;&lt; '\\n';\n         }\n         else\n         {\n            std::cout &lt;&lt; \"Not found\\n\";\n         }\n      }\n      std::cout &lt;&lt; std::endl;\n\n      std::cout &lt;&lt; \"Part 1c: Expected output is \\\"Not found\\\"\\n\";\n      example.erase(2);\n      {\n         auto search = example.find(2);\n         if(search != example.end()) {\n            std::cout &lt;&lt; \"Found \" &lt;&lt; (*search) &lt;&lt; '\\n';\n         }\n         else {\n            std::cout &lt;&lt; \"Not found\\n\";\n         }\n      }\n      std::cout &lt;&lt; std::endl;\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   /// Part 2: TEST HASH SET                                       ///\n   ///////////////////////////////////////////////////////////////////\n   /***** Uncomment to test WSUHashSet */\n\n   {\n      WSUHashSet&lt;std::string&gt; stringSet = {\"1\", \"2\", \"3\", \"4\"};\n\n      std::cout &lt;&lt; \"Part 2a: Expected output is \\\"Found \\\"2\\\"\\\"\\n\";\n      {  // Test find() that succeeds\n         auto search = stringSet.find(\"2\");\n         if(search != stringSet.end()) {\n            std::cout &lt;&lt; \"Found \\\"\" &lt;&lt; (*search) &lt;&lt; \"\\\"\\n\";\n         }\n         else {\n            std::cout &lt;&lt; \"Not found\\n\";\n         }\n      }\n      std::cout &lt;&lt; std::endl;\n\n      std::cout &lt;&lt; \"Part 2b: Expected output is \\\"Not found\\\"\\n\";\n      stringSet.erase(\"2\");\n      {  // Test find() that fails\n         auto search = stringSet.find(\"2\");\n         if(search != stringSet.end())\n         {\n            std::cout &lt;&lt; \"Found \\\"\" &lt;&lt; (*search) &lt;&lt; \"\\\"\\n\";\n         }\n         else\n         {\n            std::cout &lt;&lt; \"Not found\\n\";\n         }\n      }\n      std::cout &lt;&lt; std::endl;\n\n      WSUHashSet&lt;double&gt; doubleSet = {\n         1.1, 2.2, 3.2, 4.4, 5.5, 6.1, 7.2, 8.4, 9.9\n      };\n\n      std::cout &lt;&lt; \"Part 2c: Expected output is in any order \" &lt;&lt;\n         \"\\\"5.5 7.2 8.4 9.9 1.1 2.2 3.2 4.4 6.1\\\"\\n\";\n      for(auto n : doubleSet )\n      {  // Test using implicit iterators\n         std::cout &lt;&lt; n &lt;&lt; ' ';\n      }\n      std::cout &lt;&lt; std::endl;\n      std::cout &lt;&lt; std::endl;\n\n      std::cout &lt;&lt; \"Part 2d: Expected output is in any order \" &lt;&lt;\n         \"\\\"5.5 7.2 8.4 9.9 4.4 6.1\\\"\\n\";\n      // Part 7: Using explicit iterators while mutating set\n      for(auto it = doubleSet.begin(); it != doubleSet.end(); )\n      {  // erase every number less than 4.0\n         if(*it &lt; 4.0)\n         {\n            it = doubleSet.erase(it);\n         }\n         else\n         {\n            ++it;\n         }\n      }\n\n      for(auto n : doubleSet)\n      {\n         std::cout &lt;&lt; n &lt;&lt; ' ';\n      }\n      std::cout &lt;&lt; std::endl;\n      std::cout &lt;&lt; std::endl;\n\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   /// Part 3: TEST HASH MAP                                       ///\n   ///////////////////////////////////////////////////////////////////\n   /***** Uncomment to test WSUHashMap *\n   {\n      WSUHashMap&lt;int, std::string&gt; dict = {{1, \"one\"}, {2, \"two\"}};\n      dict.insert({3, \"three\"});\n      dict.insert(std::make_pair(4, \"four\"));\n      dict.insert({{4, \"another four\"}, {5, \"five\"}});\n\n      std::cout &lt;&lt; \"Part 3a: Expected output is \" &lt;&lt;\n         \"\\\"inserting 1 -&gt; \\\"another one\\\" failed\\\"\\n\";\n      bool ok = dict.insert({1, \"another one\"}).second;\n      std::cout &lt;&lt; \"inserting 1 -&gt; \\\"another one\\\" \"\n         &lt;&lt; (ok ? \"succeeded\" : \"failed\") &lt;&lt; '\\n';\n      std::cout &lt;&lt; std::endl;\n\n      std::cout &lt;&lt; \"Part 3b: Expected output is \" &lt;&lt;\n         \"\\\"contents: \" &lt;&lt;\n         \"1 =&gt; one \" &lt;&lt;\n         \"2 =&gt; two \" &lt;&lt;\n         \"3 =&gt; three \" &lt;&lt;\n         \"4 =&gt; four \" &lt;&lt;\n         \"5 =&gt; five\\\"\\n\";\n      std::cout &lt;&lt; \"contents: \";\n      for(auto&amp; p : dict)\n      {\n         std::cout &lt;&lt; \" \" &lt;&lt; p.first &lt;&lt; \" =&gt; \" &lt;&lt; p.second &lt;&lt; ' ';\n      }\n      std::cout &lt;&lt; std::endl;\n   }\n   *****/\n\n   return 0;\n}\n</code></pre>\n\n<p>And this is the original hash_table class file:</p>\n\n<pre><code>//\n//  WSUHashTable.h\n//  CS3100Project05_HashCollections\n\n#ifndef __CS3100Project05_HashCollections__WSUHashTable_H\n#define __CS3100Project05_HashCollections__WSUHashTable_H\n\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;cassert&gt;\n\n\n//////////////////////////////////////////////////////////////////////\n//////////////////////////////////////////////////////////////////////\ntemplate &lt;\n   typename elementT,\n   typename Hash = std::hash&lt;elementT&gt;\n&gt;\nclass WSUHashTable\n{\nprivate:\n   ///////////////////////////////////////////////////////////////////\n   typedef elementT bucket_t;\n\n   ///////////////////////////////////////////////////////////////////\n   static const std::size_t initialCapacity = (1 &lt;&lt; 2);\n   constexpr static float maxLoadFactor = 0.73f;\n\n   ///////////////////////////////////////////////////////////////////\n   std::size_t mSize;               // Number of elements in table\n   std::vector&lt;bucket_t&gt; mStorage;  // Storage for elements\n   std::vector&lt;bool&gt; mIsValidFlags;\n\npublic:\n\n   ///////////////////////////////////////////////////////////////////\n   class iterator : public std::iterator&lt;\n   std::input_iterator_tag, elementT&gt;\n   {\n      friend class WSUHashTable&lt;elementT, Hash&gt;;\n\n      const WSUHashTable&lt;elementT, Hash&gt; *mHashTablePtr;\n      std::size_t mIndex;\n\n      ////////////////////////////////////////////////////////////////\n      iterator(\n         const WSUHashTable&lt;elementT, Hash&gt; &amp;hashTable,\n         std::size_t index = 0\n      ) :\n      mHashTablePtr(&amp;hashTable),\n      mIndex(index)\n      {\n      }\n\n      ////////////////////////////////////////////////////////////////\n      std::size_t getIndex() const\n      {\n         return mIndex;\n      }\n\n   public:\n\n      ////////////////////////////////////////////////////////////////\n      iterator(const iterator &amp;other) :\n      mHashTablePtr(other.mHashTablePtr),\n      mIndex(other.mIndex)\n      {\n      }\n\n      ////////////////////////////////////////////////////////////////\n      iterator&amp; operator++()\n      {\n         ++mIndex;\n         while(mIndex &lt; mHashTablePtr-&gt;mIsValidFlags.size() &amp;&amp;\n               !mHashTablePtr-&gt;mIsValidFlags[mIndex])\n         {  // Skip over empty buckets\n            ++mIndex;\n         }\n         return *this;\n      }\n\n      ////////////////////////////////////////////////////////////////\n      iterator operator++(int)\n      {\n         const_iterator tmp(*this);\n         operator++();\n         return tmp;\n      }\n\n      ////////////////////////////////////////////////////////////////\n      bool operator==(const iterator&amp; rhs)\n      {\n         return mIndex == rhs.mIndex;\n      }\n\n      ////////////////////////////////////////////////////////////////\n      bool operator!=(const iterator&amp; rhs)\n      {\n         return mIndex != rhs.mIndex;\n      }\n\n      ////////////////////////////////////////////////////////////////\n      const elementT &amp;operator*()\n      {\n         return mHashTablePtr-&gt;mStorage[mIndex];\n      }\n   };\n\n   ///////////////////////////////////////////////////////////////////\n   typedef const iterator const_iterator;\n\nprivate:\n   typedef std::pair&lt;const_iterator, bool&gt; _findResult;\n\n   ///////////////////////////////////////////////////////////////////\n   std::size_t _calculatedIndex(const elementT &amp;element) const\n   {\n      return (Hash()(element) % mStorage.size());\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   // Returns a pair containing iterator to bucket where element\n   // should be and flag indicating whether it is there.\n   _findResult _find( const elementT &amp;element ) const\n   {\n      std::size_t index = _calculatedIndex(element);\n      while(mIsValidFlags[index] &amp;&amp;\n         ((mStorage[index] &lt; element) || (element &lt; mStorage[index])))\n      {  // Loop until element is found or an empty bucket is found\n         ++index;\n         index %= mStorage.size();\n      }\n\n      return _findResult(\n         const_iterator(*this, index), mIsValidFlags[index]);\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   void _doubleCapacityAndRehash()\n   {\n      const std::size_t oldSize = mIsValidFlags.size();\n\n      // Save off mStorage by moving contents instead of copying\n      std::vector&lt;bucket_t&gt; oldStorage = std::move(mStorage);\n      std::vector&lt;bool&gt; oldIsValidFlags = std::move(mIsValidFlags);\n\n      // Replace mStorage and mIsValidFlags with empty storage with\n      // twice the size/capacity.\n      mStorage = std::move(std::vector&lt;bucket_t&gt;(oldSize * 2));\n      mIsValidFlags = std::move(std::vector&lt;bool&gt;(oldSize * 2));\n\n      // We are going to re-insert everything, so strat with size 0\n      mSize = 0;\n\n      for(std::size_t i = 0; i &lt; oldSize; ++i)\n      {  // Insert values from all valid buckets in old storage\n         if(oldIsValidFlags[i])\n         {\n            insert(oldStorage[i]);\n         }\n      }\n   }\n\npublic:\n\n   ///////////////////////////////////////////////////////////////////\n   WSUHashTable() :\n   mSize(0),\n   mStorage(initialCapacity),\n   mIsValidFlags(initialCapacity)\n   {\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   WSUHashTable(const WSUHashTable &amp;other) :\n   mSize(other.mSize),\n   mStorage(other.mStorage),\n   mIsValidFlags(other.mIsValidFlags)\n   {\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   template&lt; class InputIt &gt;\n   WSUHashTable(InputIt first, InputIt last)  :\n   mSize(0),\n   mStorage(initialCapacity),\n   mIsValidFlags(initialCapacity)\n   {\n      while(first != last)\n      {\n         insert(*first);\n         ++first;\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   WSUHashTable(std::initializer_list&lt;elementT&gt; init)  :\n   mSize(0),\n   mStorage(initialCapacity),\n   mIsValidFlags(initialCapacity)\n   {\n      insert(init);\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   std::size_t size() const\n   {\n      return mSize;\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   /// Inserts element(s) into the container, if the container doesn't\n   /// already contain an an equivalent element.\n   /// Returns a pair consisting of an iterator to the inserted\n   /// element (or to the element that prevented the insertion) and a\n   /// bool denoting whether the insertion took place.\n   std::pair&lt;const_iterator, bool&gt; insert( const elementT &amp;element )\n   {\n      if(mSize &gt; (maxLoadFactor * mStorage.size()))\n      {  // resize to make room for insertion\n         _doubleCapacityAndRehash();\n      }\n\n      _findResult result = _find(element);\n\n      if(result.second)\n      {  // element is present\n         return std::pair&lt;const_iterator, bool&gt;(result.first, false);\n      }\n\n      const std::size_t index = result.first.getIndex();\n      mStorage[index] = element;\n      mIsValidFlags[index] = true;\n      ++mSize;\n\n      return std::pair&lt;const_iterator, bool&gt;(result.first, true);\n   }\n\n\n   ///////////////////////////////////////////////////////////////////\n   /// Inserts element(s) into the container, if the container doesn't\n   /// already contain an an equivalent element.\n   /// Returns a pair consisting of an iterator to the inserted\n   /// element (or to the element that prevented the insertion) and a\n   /// bool denoting whether the insertion took place.\n   ///\n   /// An &amp;&amp; argumnet signals an \"emplace\" operation in C++11. The\n   /// value will be moved via std::move() instead of copied.\n   std::pair&lt;const_iterator, bool&gt; insert( elementT &amp;&amp;element )\n   {\n      if(mSize &gt; (maxLoadFactor * mStorage.size()))\n      {  // resize to make room for insertion\n         _doubleCapacityAndRehash();\n      }\n\n      _findResult result = _find(element);\n\n      if(result.second)\n      {  // element is present\n         return std::pair&lt;const_iterator, bool&gt;(\n            result.first, false);\n      }\n\n      const std::size_t index = result.first.getIndex();\n      mStorage[index] = std::move(element);\n      mIsValidFlags[index] = true;\n      ++mSize;\n\n      return std::pair&lt;const_iterator, bool&gt;(result.first, true);\n   }\n\n\n   ///////////////////////////////////////////////////////////////////\n   void insert( std::initializer_list&lt;elementT&gt; ilist )\n   {\n      for(const elementT &amp;element : ilist)\n      {\n         insert(element);\n      }\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   /// Returns iterator following the last removed element.\n   const_iterator erase( const_iterator pos )\n   {\n      const std::size_t index = pos.getIndex();\n\n      if(mIsValidFlags[index])\n      {  // element is present\n         mIsValidFlags[index] = false;\n         --mSize;\n      }\n\n      return ++iterator(pos);\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   // Returns the number of elements erased (it will be zero or one).\n   std::size_t erase(const elementT &amp;element)\n   {\n      _findResult result = _find(element);\n\n      if(result.second)\n      {  // element is present\n         mIsValidFlags[result.first.getIndex()] = false;\n         --mSize;\n         return 1;\n      }\n\n      return 0;\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   const_iterator find( const elementT &amp;element ) const\n   {\n      _findResult result = _find(element);\n\n      if(result.second)\n      {  // element was found\n         return result.first;\n      }\n\n      return end();\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   const_iterator begin() const\n   {\n      std::size_t index = 0;\n      while(index &lt; mIsValidFlags.size() &amp;&amp; !mIsValidFlags[index])\n      {  // Skip over empty buckets\n         ++index;\n      }\n      return const_iterator(*this, index);\n   }\n\n   ///////////////////////////////////////////////////////////////////\n   const_iterator end() const\n   {\n      return const_iterator(*this, mStorage.size());\n   }\n};\n\n#endif /* defined(__CS3100Project05_HashCollections__WSUHashTable_H) */\n</code></pre>\n\n<p>I know the hash_table file is long, and I have a decent idea on how to proceed, since a hash_set really only needs to implement a search function within the insert to make sure the list is unique, but doesn't really mess with hash order or anything (I'm not really sure how to implement the hash itself, but I assume the inheritance will sort that out nicely), and the hash_map will allow a null key and any null values....but first something has to compile.</p>\n\n<p>This is what I have currently as my hash_set class, just trying to get a simple constructor that uses the parent class's constructor with the correct type (std::string):</p>\n\n<pre><code>#ifndef __WSUHashSet__\n#define __WSUHashSet__\n\n\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include \"WSUHashTable.h\"\n\n\n/*template&lt;\n    typename elementT,\n    typename Hash = std::hash&lt;elementT&gt;\n    &gt;*/\nclass WSUHashSet : public WSUHashTable&lt;std::string&gt; {\n\nprivate:\n\npublic:\n\n    WSUHashSet(std::initializer_list&lt;std::string&gt; init) :  WSUHashTable(init)\n    {\n        insert(init);\n    }\n\n\n\n};\n\n\n\n\n#endif  //__WSUHashSet__\n</code></pre>\n\n<p>Currently I get the same error: with this exact code it tells me that \"WSUHashSet is not a template\", which is good because my class is fine, but bad because I can't just edit the main.cpp to not treat it as a template.</p>\n\n<p>When I try to make it a template, like this:</p>\n\n<pre><code>#ifndef __WSUHashSet__\n#define __WSUHashSet__\n\n\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include \"WSUHashTable.h\"\n\n\ntemplate&lt;\n    typename elementT,\n    typename Hash = std::hash&lt;elementT&gt;\n    &gt;\nclass WSUHashSet&lt;elementT&gt; : public WSUHashTable&lt;std::string&gt; {\n\nprivate:\n\npublic:\n\n    WSUHashSet&lt;elementT&gt;::WSUHashSet(std::initializer_list&lt;std::string&gt; init) :  WSUHashTable(init)\n    {\n        insert(init);\n    }\n\n\n\n};\n\n\n\n\n#endif  //__WSUHashSet__\n</code></pre>\n\n<p>I really need some direction here. I can't afford to spend a lot more time on this as it's not my only class, and I feel like this should be fairly simple. The theory makes sense, but the implementation makes me feel like I'm blindly wandering in circles.</p>\n\n<p>Thanks</p>\n\n<p>EDIT: the actual compliler error is </p>\n\n<p>WSUHashSet.h line 19: error: WSUHashSet is not a template</p>\n\n<p>Apparently the pasting into the code block here caused confusion. Here's the actual line (19 in codeblocks) that is breaking the compilation:</p>\n\n<pre><code>WSUHashSet(std::initializer_list&lt;std::string&gt; init) :  WSUHashTable(init)\n    {\n        insert(init);\n    }\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "qt"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1436998618, "post_id": 31442006, "comment_id": 50853420, "body": "Have a look at <a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">QThread</a> in Qt docs. The worker is not connected to <code>deleteLater</code>, and the worker <code>resultReady</code>, which I assume is the same as your Reader::finished, is connected to the slot <code>handleResults</code>, which I assume is the same as your  <code>threadFinished</code>. Have a look there and adjust consequently."}, {"owner": {"reputation": 1438, "user_id": 3449811, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/fc547f81ed58be06d2f08450ee68cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Androidicus", "link": "https://stackoverflow.com/users/3449811/androidicus"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1436999330, "post_id": 31442006, "comment_id": 50853693, "body": "I&#39;ve tried that but this doesn&#39;t delete my thread. In this example thread-&gt;quit() and thread-&gt;wait() is called within the destructor of main class. I cannot do that because I want to open and close the thread multiple times without ever calling the destructor of the main class."}], "answers": [{"comments": [{"owner": {"reputation": 1438, "user_id": 3449811, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/fc547f81ed58be06d2f08450ee68cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Androidicus", "link": "https://stackoverflow.com/users/3449811/androidicus"}, "edited": false, "score": 0, "creation_date": 1437000486, "post_id": 31442217, "comment_id": 50854102, "body": "Thanks for your response. I tried that but now the execution gets stuck at thread-&gt;wait(); any ideas?"}, {"owner": {"reputation": 1438, "user_id": 3449811, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/fc547f81ed58be06d2f08450ee68cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Androidicus", "link": "https://stackoverflow.com/users/3449811/androidicus"}, "edited": false, "score": 0, "creation_date": 1437000877, "post_id": 31442217, "comment_id": 50854223, "body": "And if I omit the thread-&gt;wait() I get the memory exception again."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 1438, "user_id": 3449811, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/fc547f81ed58be06d2f08450ee68cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Androidicus", "link": "https://stackoverflow.com/users/3449811/androidicus"}, "edited": false, "score": 0, "creation_date": 1437036099, "post_id": 31442217, "comment_id": 50866583, "body": "There is still an object being executed in that thread. Is <code>reader</code> the only one? can you make sure <code>read()</code> terminate? It seems it doesnt"}, {"owner": {"reputation": 1438, "user_id": 3449811, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/fc547f81ed58be06d2f08450ee68cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Androidicus", "link": "https://stackoverflow.com/users/3449811/androidicus"}, "edited": false, "score": 0, "creation_date": 1437070966, "post_id": 31442217, "comment_id": 50890111, "body": "I think the error lies somewhere else. If I remove all code from the while loop, the method proposed by you works well. thanks"}], "tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": true, "score": 1, "last_activity_date": 1436999676, "last_edit_date": 1436999676, "creation_date": 1436998823, "answer_id": 31442217, "question_id": 31442006, "link": "https://stackoverflow.com/questions/31442006/properly-delete-qthread/31442217#31442217", "title": "Properly delete QThread", "body": "<p>The main issue is that you are deleting the thread object (ie the QThread) while the <em>thread of execution</em> is running. In your <code>threadFinished()</code>, which is actually task finished, you need to do :</p>\n\n<pre><code> thread-&gt;quit();\n thread-&gt;wait();\n thread-&gt;deleteLater();\n reader-&gt;deleteLater();\n</code></pre>\n\n<p>and remove the <code>finished -&gt; deleteLater</code> connections.</p>\n"}, {"tags": [], "owner": {"reputation": 1234, "user_id": 4780422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9596b4921462c9b3cde54012e8c15826?s=128&d=identicon&r=PG&f=1", "display_name": "t3ft3l--i", "link": "https://stackoverflow.com/users/4780422/t3ft3l-i"}, "is_accepted": false, "score": 0, "last_activity_date": 1437050725, "creation_date": 1437050725, "answer_id": 31454563, "question_id": 31442006, "link": "https://stackoverflow.com/questions/31442006/properly-delete-qthread/31454563#31454563", "title": "Properly delete QThread", "body": "<p>Try to add connection like this one for <a href=\"http://doc.qt.io/qt-5/qthread.html#quit\" rel=\"nofollow\">leaving thread</a> event loop.</p>\n\n<pre><code>connect(reader, SIGNAL(finished()), thread, SLOT(quit()));\n</code></pre>\n"}], "owner": {"reputation": 1438, "user_id": 3449811, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/fc547f81ed58be06d2f08450ee68cca6?s=128&d=identicon&r=PG&f=1", "display_name": "Androidicus", "link": "https://stackoverflow.com/users/3449811/androidicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2489, "favorite_count": 2, "accepted_answer_id": 31442217, "answer_count": 2, "score": 1, "last_activity_date": 1437050725, "creation_date": 1436997955, "question_id": 31442006, "link": "https://stackoverflow.com/questions/31442006/properly-delete-qthread", "title": "Properly delete QThread", "body": "<p>I'm new to QT and I'm trying to create and destroy a QThread upon button click (potentially multiple times). I've read through a lot of posts but my Thread either didn't get destroyed or caused a untraceable heap exception within the QMain.dll. </p>\n\n<p>I create my Thread like this: </p>\n\n<pre><code>thread = new QThread;\nreader = new Reader(); //a QObject subclass\nreader-&gt;moveToThread(thread);\nconnect(thread, SIGNAL(started()), reader, SLOT(read()));\nconnect(reader, SIGNAL(timeout()), this, SLOT(threadTimeout()));\n\nconnect(reader, SIGNAL(finished()), reader, SLOT(deleteLater()));\nconnect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));\nconnect(thread, SIGNAL(finished()), this, SLOT(threadFinished()));\n</code></pre>\n\n<p>The Thread then runs in a loop and sends data. The read() function looks like this: </p>\n\n<pre><code>void Reader::read() { \n  while(!stop) {\n    //... do something ...\n  }\n  emit finished();\n}\n</code></pre>\n\n<p>On Button click I call</p>\n\n<pre><code>reader-&gt;setStop(true);\n</code></pre>\n\n<p>which breaks the Thread's while-loop. The finished signal is emitted but then a memory exception is triggered. If I remove the two deleteLater() slots no exception is raised but the thread is (obviously) not deleted. </p>\n\n<p>Am I doing something wrong here? Thanks in advance. </p>\n"}, {"tags": ["c++", "c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1436997806, "post_id": 31441866, "comment_id": 50853104, "body": "I think it&#39;s worse than that. A mutex won&#39;t ensure that the thread reads the value before the creator increments it, or that two threads don&#39;t read it between increments (they&#39;d end up with the same <code>myid</code>)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1436997908, "post_id": 31441866, "comment_id": 50853148, "body": "This seems to be a fundamentally flawed design. Instead of passing a pointer to the pool to each thread, it should pass a unique structure that contains thread-specific information like its unique ID number, as well as a pointer to the common pool."}, {"owner": {"reputation": 3584, "user_id": 743761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/abe8647a64a9d4220d601a4a32499493?s=128&d=identicon&r=PG&f=1", "display_name": "Keeto", "link": "https://stackoverflow.com/users/743761/keeto"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998231, "post_id": 31441866, "comment_id": 50853286, "body": "Yeah. I agree with you. I just needed confirmation because I am not very experienced with pthreads and C but I guess the args that are passed to the pthread_create should be unique"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998297, "post_id": 31441866, "comment_id": 50853310, "body": "The code you&#39;re reading appears to be a student project. Any idea what grade he got?"}, {"owner": {"reputation": 3584, "user_id": 743761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/abe8647a64a9d4220d601a4a32499493?s=128&d=identicon&r=PG&f=1", "display_name": "Keeto", "link": "https://stackoverflow.com/users/743761/keeto"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998363, "post_id": 31441866, "comment_id": 50853332, "body": "haha no. Are you aware of any thread pool C implementation that I can reuse?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1436998402, "post_id": 31441866, "comment_id": 50853344, "body": "I&#39;m sure there are plenty, but I don&#39;t know them offhand. Maybe search github."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1437232217, "post_id": 31441866, "comment_id": 50948442, "body": "<code>pool-&gt;arrest</code> nice typo ... ;-)"}], "owner": {"reputation": 3584, "user_id": 743761, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/abe8647a64a9d4220d601a4a32499493?s=128&d=identicon&r=PG&f=1", "display_name": "Keeto", "link": "https://stackoverflow.com/users/743761/keeto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436997408, "creation_date": 1436997408, "question_id": 31441866, "link": "https://stackoverflow.com/questions/31441866/pthread-function-arguments", "title": "pthread function arguments", "body": "<p>I am reading the source code of a generic C implementation of a threadpool.</p>\n\n<p>The thread pool data structure is defined as:</p>\n\n<pre><code>typedef struct _threadpool_st{\n    pthread_t *array;\n    pthread_mutex_t mutex;\n    pthread_cond_t job_posted;\n    pthread_cond_t job_taken;\n    int arrsz;\n    int live; //number of live threads in the pool\n    queueHead *theQueue; //queue of work orders\n} _thread_pool;\n</code></pre>\n\n<p>Then there is a function that is responsible for creating the threadpool</p>\n\n<pre><code>thread pool create_threadpool(int num_threads_in_pool) {\n    _threadpool *pool;\n    /* irrelevant initializations */\n    for(i = 0; i &lt; pool-&gt;arrest; i++){\n        pthread_create(pool-&gt;array + i; NULL, do_work; (void *) pool);\n        pool-&gt;live = i + 1;\n        /* other stuff */\n    }\n    /* other stuff */\n}\n</code></pre>\n\n<p>the do_work function is as follows:</p>\n\n<pre><code>void * do_work(void * owning_pool) {\n    _threadpool *pool = (_threadpool *)owning_pool;\n    int myid = pool-&gt;live;\n    /* some stuff */\n}\n</code></pre>\n\n<p>My understanding is that each thread in the thread pool should have its own \"myid\"\nHowever, I think a race condition can happen with the way this is implemented. When a pool is created, a pthread is created that does do_work and passed a pointer to the pool data structure. All threads created are passed the same pointer to the arguments data structure. Each thread is supposed to read the value of live from that data structure. however, the main thread (the one creating the pthreads) is writing to this live variable. Is there anything I am missing here? shouldn't the live variable be protected by the pool mutex?</p>\n\n<p>The full source code is here\n<a href=\"http://people.clarkson.edu/~jmatthew/cs644.archive/cs644.fa2001/proj/pthreadsPool/\" rel=\"nofollow\">http://people.clarkson.edu/~jmatthew/cs644.archive/cs644.fa2001/proj/pthreadsPool/</a> </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "edited": false, "score": 0, "creation_date": 1437005459, "post_id": 31441741, "comment_id": 50855690, "body": "You should create another topic for the second question, the simplicity will make it better to understand."}, {"owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "reply_to_user": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "edited": false, "score": 0, "creation_date": 1437042672, "post_id": 31441741, "comment_id": 50870932, "body": "Okay, I&#39;m going to change this."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437053024, "post_id": 31453527, "comment_id": 50877896, "body": "Thank you for you response. Well, I was thinking I was getting the values x and y of my vector. When I add what it was missing in my code, there is a crash, telling me: ASSERT failure in QVector&lt;T&gt;::operator[]: &quot;index out of range&quot;, file c:\\work\\build\\qt5_workdir\\w\\s\\qtbase\\include\\qtcore\\../../sr&zwnj;&#8203;c/corelib/tools/qvec&zwnj;&#8203;tor.h, line 385                                                                                                            &quot;index out of range&quot;, means as you told me, that my res.dat file is bit out of format? How could I manage this to have the good format?"}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "reply_to_user": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437058069, "post_id": 31453527, "comment_id": 50882033, "body": "I have updated the code changed the for loop int a foreach see if now it works"}, {"owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437062706, "post_id": 31453527, "comment_id": 50885347, "body": "Yes, it&#39;s working well! I will have a look at foreach to understand it correctly! And now I can see that my algorithm at the end is not good, so that is cool I can have a graphic result, as the data was not meaning a lot in results. Thank you a lot."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "reply_to_user": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437118306, "post_id": 31453527, "comment_id": 50906730, "body": "You are welcome but please set also the asnwer as the correct one, that will help others in future and raise my points"}, {"owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437123461, "post_id": 31453527, "comment_id": 50909332, "body": "Where can I set the topic as resolved please? I didn&#39;t find it on this website."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "reply_to_user": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437124669, "post_id": 31453527, "comment_id": 50910045, "body": "Near the answer, on the left side there should be something like a green check which I believe it can be turned on. stackoverflow.com/faq#howtoask"}, {"owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "edited": false, "score": 0, "creation_date": 1437919058, "post_id": 31453527, "comment_id": 51221922, "body": "Hello again, I&#39;ve added a new question related to the display of the vector of points below. Do you have an idea why it is not working, or how to manage to resolve it?"}], "tags": [], "owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "is_accepted": true, "score": 0, "last_activity_date": 1437058010, "last_edit_date": 1437058010, "creation_date": 1437047917, "answer_id": 31453527, "question_id": 31441741, "link": "https://stackoverflow.com/questions/31441741/draw-points-from-data-file-on-qgraphicsview/31453527#31453527", "title": "Draw points from data file on QGraphicsView", "body": "<p>From your code it's completely missing the part where you read the actual coordinates of the points.\nI have changed slightly your code to read the points into the vector but please remember:</p>\n\n<p>a) This code is all but \"solid\" for example if your res.dat file is just a bit out of format it crashes.</p>\n\n<p>b) With this loop you really do not need to know how many points you have in the file, right now it keeps reading until the end of file. </p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    int n;\n    std::ifstream ifs1(\"res.dat\");\n    ifs1 &gt;&gt; n;\n    QVector &lt;QPointF&gt; points;\n    qreal px,py;\n    while (ifs1 &gt;&gt; px) {\n        ifs1 &gt;&gt; py;\n        points.append(QPointF(px,py));\n    }\n    // Create a view, put a scene in it and add tiny circles\n    // in the scene\n    QGraphicsView * view = new QGraphicsView();\n    QGraphicsScene * scene = new QGraphicsScene();\n\n    view-&gt;setScene(scene);\n    foreach (QPointF point, points)\n        scene-&gt;addEllipse(point.x(), point.y(), 51, 51);\n\n\n    // Show the view\n    view-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "is_accepted": false, "score": 0, "last_activity_date": 1437739882, "creation_date": 1437739882, "answer_id": 31610236, "question_id": 31441741, "link": "https://stackoverflow.com/questions/31441741/draw-points-from-data-file-on-qgraphicsview/31610236#31610236", "title": "Draw points from data file on QGraphicsView", "body": "<p>After you helped me, I've gone further in my code, and I have a problem I don't understand.</p>\n\n<p>in the header file</p>\n\n<pre><code>//All includes\n\nclass ProjectWindow;\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\nprivate:\n    // GraphicsView 1\n    QGraphicsView view1;\n    QGraphicsScene scene1;\n    QGraphicsPixmapItem item1;\n    QGraphicsPixmapItem item2;\n    QString fileName;\n\n    // GraphicsView 2\n    QGraphicsScene scene2;\n    QGraphicsView view2;\n    QVector &lt;QPointF&gt; points;\n    qreal px,py;\n    QPointF point;\n    QPainter painter;\n\n\n    QGraphicsEllipseItem *ellipse;\n\npublic slots:\n    void openBrowser();\n    void drawcirc();\n    void drawCircle();\n    void runSnakes();\n    void displayResult();\n\n\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>in the .cpp file</p>\n\n<pre><code>void MainWindow::displayResult()\n{\n\n    scene2.removeItem(&amp;item2); //removing a picture\n    scene2.addItem(&amp;item2);  // adding a picture\n    scene2.setSceneRect(scene2.itemsBoundingRect());\n    // Reading res.dat file and plot the contour\n    int m;\n    std::ifstream ifs2(\"final_contour.dat\");\n    ifs2 &gt;&gt; m;\n    std::cout &lt;&lt; m;\n\n    while (ifs2 &gt;&gt; px)\n    {\n        ifs2 &gt;&gt; py;\n        points.append(QPointF(py,px));\n    }\n\n    foreach(point, points)\n\n    ellipse = scene2.addEllipse(QRectF(point.y(), width-point.x(),1,1),QPen(Qt::red));\n\n\n    // Saving the final contour into a picture\n    QImage pixmap(width, width, QImage::Format_ARGB32_Premultiplied);\n    painter.begin(&amp;pixmap);\n    painter.setRenderHint(QPainter::Antialiasing, false);\n    scene2.render(&amp;painter);\n    painter.end();\n    pixmap.save(\"finalcontour.bmp\", \"BMP\");\n\n}\n</code></pre>\n\n<p>I want to remove the ellipse I add to the scene with removeItem() (in order to see the differents results with changing parameters), so I need to create a QGraphicsEllipseItem and to tell to the scene, addItem() that I can remove later the item with removeItem().</p>\n\n<p>the header file</p>\n\n<pre><code>//All includes\n\nclass ProjectWindow;\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\nprivate:\n    // GraphicsView 1\n    QGraphicsView view1;\n    QGraphicsScene scene1;\n    QGraphicsPixmapItem item1;\n    QGraphicsPixmapItem item2;\n    QString fileName;\n\n    // GraphicsView 2\n    QGraphicsScene scene2;\n    QGraphicsView view2;\n    QVector &lt;QPointF&gt; points;\n    qreal px,py;\n    QPointF point;\n    QPainter painter;\n\n\n    QGraphicsEllipseItem ellipse; // The only line changed\n\npublic slots:\n    void openBrowser();\n    void drawcirc();\n    void drawCircle();\n    void runSnakes();\n    void displayResult();\n\n\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>the cpp file</p>\n\n<p>void MainWindow::displayResult()\n    {</p>\n\n<pre><code>    scene2.removeItem(&amp;item2); //removing a picture\n    scene2.addItem(&amp;item2);  // adding a picture\n    scene2.setSceneRect(scene2.itemsBoundingRect());\n    // Reading res.dat file and plot the contour\n    int m;\n    std::ifstream ifs2(\"final_contour.dat\");\n    ifs2 &gt;&gt; m;\n    std::cout &lt;&lt; m;\n\n    while (ifs2 &gt;&gt; px)\n    {\n        ifs2 &gt;&gt; py;\n        points.append(QPointF(py,px));\n    }\n\n    foreach(point, points)\n\n    ellipse.setRect(QRectF(point.y(), width-point.x(),1,1));\n    ellipse.setPen(QPen(Qt::red));\n    scene2.addItem(&amp;ellipse);\n\n\n    // Saving the final contour into a picture\n    QImage pixmap(width, width, QImage::Format_ARGB32_Premultiplied);\n    painter.begin(&amp;pixmap);\n    painter.setRenderHint(QPainter::Antialiasing, false);\n    scene2.render(&amp;painter);\n    painter.end();\n    pixmap.save(\"finalcontour.bmp\", \"BMP\");\n\n}\n</code></pre>\n\n<p>But changing the way I want to add the ellipse, it is not displaying the whole points like this with the first way I define the ellipse: <a href=\"https://i.stack.imgur.com/AkhwX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AkhwX.png\" alt=\"enter image description here\"></a></p>\n\n<p>But just one point and not the vector of points, like this:<a href=\"https://i.stack.imgur.com/BJVqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BJVqV.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 23, "user_id": 5116369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9eaf4f02b71d2d54ab3a6c34b035697?s=128&d=identicon&r=PG&f=1", "display_name": "alexandreMepage", "link": "https://stackoverflow.com/users/5116369/alexandremepage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2146, "favorite_count": 0, "accepted_answer_id": 31453527, "answer_count": 2, "score": 1, "last_activity_date": 1437739882, "creation_date": 1436996863, "last_edit_date": 1437045531, "question_id": 31441741, "link": "https://stackoverflow.com/questions/31441741/draw-points-from-data-file-on-qgraphicsview", "title": "Draw points from data file on QGraphicsView", "body": "<p>As my work are going well on my long project of QT, I've tried to resolve my actual steps, but I think it is not working, so I have one question:</p>\n\n<p>Draw points from data file on QGraphicsView</p>\n\n<p>My code is writting actually at the end of the process a data file where the first line is the number of elements (size of the vector) and the other lines the values of the point with x and y separated by a blank.</p>\n\n<p>res.dat</p>\n\n<pre><code>250\n12 23\n30 40\n25 67\n...\n</code></pre>\n\n<p>I would like to read this file (with the fstream) and to display each points of my vector on a QGraphicsView in order to have a graphic result, and ideally but not the most important result, to lie this point to have the desired form.</p>\n\n<p>I have already tried this part of code on a main source file to test, but it is just doing a circle and I think it is not reading my file.</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;QGraphicsView&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QPointF&gt;\n#include &lt;QVector&gt;\n#include &lt;QApplication&gt;\n#include &lt;fstream&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    int n;\n    std::ifstream ifs1(\"res.dat\");\n    ifs1 &gt;&gt; n;\n    QVector &lt;QPointF&gt; points(n);\n\n    // Create a view, put a scene in it and add tiny circles\n    // in the scene\n    QGraphicsView * view = new QGraphicsView();\n    QGraphicsScene * scene = new QGraphicsScene();\n\n    view-&gt;setScene(scene);\n    for(int i = 1; i&lt; n; i++)\n        scene-&gt;addEllipse(points[i].x(), points[i].y(), 512, 512);\n\n    // Show the view\n    view-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>Thank you in advance for reading, and for your response.</p>\n"}, {"tags": ["java", "android", "c++", "android-ndk", "libvlc"], "comments": [{"owner": {"reputation": 4603, "user_id": 2125612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/imL5S.jpg?s=128&g=1", "display_name": "Jickson", "link": "https://stackoverflow.com/users/2125612/jickson"}, "edited": false, "score": 0, "creation_date": 1446015723, "post_id": 31441692, "comment_id": 54562372, "body": "Have you tried to play rtsp streaming in VLC Android Application??"}, {"owner": {"reputation": 2915, "user_id": 628694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kbyyB.jpg?s=128&g=1", "display_name": "Khai Nguyen", "link": "https://stackoverflow.com/users/628694/khai-nguyen"}, "edited": false, "score": 0, "creation_date": 1485370153, "post_id": 31441692, "comment_id": 70902489, "body": "I found same issue. Trying to play rtmp but no luck. Compile by virtual linux machine."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5121011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7f594036180e6b8cd7cf6d9c56d2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/5121011/boris"}, "edited": false, "score": 0, "creation_date": 1437049821, "post_id": 31442578, "comment_id": 50875477, "body": "the code can be found at git clone git://git.videolan.org/vlc-ports/android.git , I didn&#39;t make any changes to it."}, {"owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "reply_to_user": {"reputation": 1, "user_id": 5121011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7f594036180e6b8cd7cf6d9c56d2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/5121011/boris"}, "edited": false, "score": 0, "creation_date": 1437053242, "post_id": 31442578, "comment_id": 50878069, "body": "So this is really not a programming question?"}, {"owner": {"reputation": 1, "user_id": 5121011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7f594036180e6b8cd7cf6d9c56d2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/5121011/boris"}, "edited": false, "score": 0, "creation_date": 1437515422, "post_id": 31442578, "comment_id": 51058996, "body": "Turns out the unable to decode stream: java.lang.NullPointerException is generated when vlc attempts to load an album cover for the audio stream, however the stream I&#39;m trying to play doesn&#39;t have audio, is video only. therefore these null pointer exceptions are not related to playing h264"}], "tags": [], "owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1437000606, "creation_date": 1437000606, "answer_id": 31442578, "question_id": 31441692, "link": "https://stackoverflow.com/questions/31441692/lib-vlc-android-wont-play-raw-h264/31442578#31442578", "title": "lib vlc android won&#39;t play raw h264?", "body": "<p>I noticed this in a number of places:</p>\n\n<pre><code>    Unable to decode stream: java.lang.NullPointerException\n</code></pre>\n\n<p>You need to figure out what is causing the NPE.  </p>\n\n<p>Without seeing your code, my initial guess would be that it is passing a <code>null</code> to the bitmap factory, and saying \"decode that\".  </p>\n"}], "owner": {"reputation": 1, "user_id": 5121011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7f594036180e6b8cd7cf6d9c56d2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/5121011/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437002423, "creation_date": 1436996601, "last_edit_date": 1437002423, "question_id": 31441692, "link": "https://stackoverflow.com/questions/31441692/lib-vlc-android-wont-play-raw-h264", "title": "lib vlc android won&#39;t play raw h264?", "body": "<p>I need to develop an android app that uses the vlc media player to pick rtsp stream and play raw h264.  I compiled the lib vlc android following the instructions in <a href=\"https://wiki.videolan.org/AndroidCompile\" rel=\"nofollow\">AndroidCompile</a> using <code>Mac OSx</code>. The project compiled with some warnings(shown below) and I was able to run the vlc app on an <code>Android</code> tablet.  vlc app plays rtsp stream of a h264 container fine, but it won't play raw h264 from a live cam. The logcat below shows several <code>unable to decode stream: java.lang.NullPointerException</code> but I have seen these at the beginning of playing any stream, I suppose is vlc trying to figure out which decoder to use. and as the log cat shows, it determines h264. shortly after playbackservice announces start playing, it announces end of playback services. </p>\n\n<p>The vlc android app found at the google playstore is able to play the same feed just fine, so there is nothing wrong with the feed, and the release version has the codec and capability to play raw h264. Could there be a problem with how the <code>C/C++</code> libraries compiled? or does the libvlc(compiled) not play raw h264 by default? I have not modified any source code from the <a href=\"https://wiki.videolan.org/Androidcompile\" rel=\"nofollow\">AndroidCompile</a> project. Is there anyone that has compiled libvlc and has been able to play a rtsp stream of raw h264? or should I look into piping the stream into a container and playing from the container, how could i do so?</p>\n\n<p>my machine runs Mac OS X,prior to running compile.sh script I installed the build tools recommended, and the project runs from <code>Android Studio</code>.\nbelow the logcat, and a snippet of the warnings when the project compiled.</p>\n\n<pre><code>&gt;07-15 14:38:26.139    9037-9037/? D/PlaybackService.Client\ufe55 Service Connected\n&gt;07-15 14:38:26.139    9037-9037/? V/VLC/PlaybackService\ufe55 Creating on-the-fly Media object for rtsp://root:****@10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720\n&gt;07-15 14:38:26.139    9037-9037/? V/VLC/PlaybackService\ufe55 Loading position 0 in [org.videolan.vlc.MediaWrapper@42001178]\n&gt;07-15 14:38:26.149      439-744/? I/MediaFocusControl\ufe55 AudioFocus  requestAudioFocus() from android.media.AudioManager@41f316d0org.videolan.vlc.PlaybackService$1@41e62750\n&gt;07-15 14:38:26.149      439-727/? I/MediaFocusControl\ufe55 Remote Control   registerMediaButtonIntent() for PendingIntent{4220baf0: PendingIntentRecord{41fd9ab0 org.videolan.vlc.debug broadcastIntent}}\n&gt;07-15 14:38:26.149    9037-9037/? D/VLC\ufe55 [72210838] core generic: creating audio output\n&gt;07-15 14:38:26.149    9037-9037/? D/VLC\ufe55 [73a56e28] core audio output: looking for audio output module matching \"android_audiotrack,none\": 4 candidates\n&gt;07-15 14:38:26.149    9037-9037/? D/VLC\ufe55 [73a56e28] core audio output: using audio output module \"android_audiotrack\"\n&gt;07-15 14:38:26.149    9037-9037/? D/VLC\ufe55 [72210838] core generic: keeping audio output\n&gt;07-15 14:38:26.149    9037-9037/? D/VLC\ufe55 [73acc248] core input: Creating an input for 'rtsp://10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720'\n&gt;07-15 14:38:26.149    9037-9412/? D/VLC\ufe55 [73acc248] core input: using timeshift granularity of 50 MiB, in path '/tmp'\n&gt;07-15 14:38:26.159    9037-9412/? D/VLC\ufe55 [73acc248] core input: `rtsp://root:****@10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720' gives access `rtsp' demux `' path `root:****@10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720'\n&gt;07-15 14:38:26.159    9037-9412/? D/VLC\ufe55 [73acc248] core input: specified demux `any'\n&gt;07-15 14:38:26.159    9037-9412/? D/VLC\ufe55 [73acc248] core input: creating demux: access='rtsp' demux='any' location='root:****@10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720' file='(null)'\n&gt;07-15 14:38:26.159    9037-9412/? D/VLC\ufe55 [73890268] core demux: looking for access_demux module matching \"rtsp\": 6 candidates\n&gt;07-15 14:38:26.159    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: version 2015.06.24\n&gt;07-15 14:38:26.159    9037-9052/? E/VLC-std\ufe55 Opening connection to\n&gt;07-15 14:38:26.159    9037-9052/? E/VLC-std\ufe55 10.168.1.45\n&gt;07-15 14:38:26.159    9037-9052/? E/VLC-std\ufe55 , port\n&gt;07-15 14:38:26.159    9037-9052/? E/VLC-std\ufe55 554\n&gt;07-15 14:38:26.159    9037-9052/? E/VLC-std\ufe55 ...\n&gt;07-15 14:38:26.159    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.179    9037-9052/? E/VLC-std\ufe55 ...remote connection opened\n&gt;    Sending request: OPTIONS rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 2\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;07-15 14:38:26.179    9037-9052/? E/VLC-std\ufe55 Received 143\n&gt;07-15 14:38:26.179    9037-9052/? E/VLC-std\ufe55 new bytes of response data.\n&gt;    Received a complete OPTIONS response:\n&gt;    RTSP/1.0 200 OK\n&gt;    CSeq: 2\n&gt;    Public: DESCRIBE, GET_PARAMETER, PAUSE, PLAY, SETUP, SET_PARAMETER, &gt;TEARDOWN\n&gt;    Date: Wed, 15 Jul 2015 20:32:31 GMT\n&gt;    Sending request:\n&gt;07-15 14:38:26.179    9037-9052/? E/VLC-std\ufe55 DESCRIBE rtsp://10.168.1.45:554/axis-media/media.amp?&gt;videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 3\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Accept: application/sdp\n&gt;07-15 14:38:26.189    9037-9037/? E/BitmapFactory\ufe55 Unable to decode &gt;stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.189    9037-9052/? E/VLC-std\ufe55 Received 247 new bytes of &gt;response data.\n&gt;    Received a complete DESCRIBE response:\n&gt;    RTSP/1.0 401 Unauthorized\n&gt;    CSeq: 3\n&gt;    WWW-Authenticate: Digest realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", stale=FALSE\n&gt;    WWW-Authenticate: Basic realm=\"AXIS_00408CE6D77E\"\n&gt;    Date: Wed, 15 Jul 2015 20:32:31 GMT\n&gt;    Resending...\n&gt;    Sending request: DESCRIBE rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 4\n&gt;    Authorization: Digest username=\"root\", realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", uri=\"rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720\", &gt;response=\"23cc09ed9e29fc64404cddae9c8b44cc\"\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Accept: application/sdp\n&gt;07-15 14:38:26.199    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.199    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.209    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: RTP &gt;subsession 'video/H264'\n&gt;07-15 14:38:26.209    9037-9052/? E/VLC-std\ufe55 Received 809 new bytes of &gt;response data.\n&gt;    Received a complete DESCRIBE response:\n&gt;    RTSP/1.0 200 OK\n&gt;    CSeq: 4\n&gt;    Content-Type: application/sdp\n&gt;    Content-Base: rtsp://10.168.1.45:554/axis-media/media.amp/\n&gt;    Date: Wed, 15 Jul 2015 20:32:31 GMT\n&gt;    Content-Length: 632\n&gt;    v=0\n&gt;    o=- 1436992351621972 1436992351621972 IN IP4 10.168.1.45\n&gt;    s=Media Presentation\n&gt;    e=NONE\n&gt;    b=AS:50000\n&gt;    t=0 0\n&gt;    a=control:rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720\n&gt;    a=range:npt=0.000000-\n&gt;    m=video 0 RTP/AVP 96\n&gt;    c=IN IP4 0.0.0.0\n&gt;    b=AS:50000\n&gt;    a=framerate:25.0\n&gt;    &gt;a=transform:1.000000,0.000000,0.000000;0.000000,0.900000,0.000000;0.000000,0.000000,1.000000\n&gt;    a=control:rtsp://10.168.1.45:554/axis-media/media.amp/trackID=1?videocodec=h264&amp;resolution=1280x720\n&gt;    a=rtpmap:96 H264/90000\n&gt;    a=fmtp:96 packetization-mode=1; profile-level-id=420029; sprop-&gt;parameter-sets=Z0IAKeKQCgC3YC3AQEBpB4kRUA==,aM48gA==\n    Sending request:\n&gt;07-15 14:38:26.209    9037-9052/? E/VLC-std\ufe55 SETUP rtsp://10.168.1.45:554/axis-media/media.amp/trackID=1?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 5\n&gt;    Authorization: Digest username=\"root\", realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", uri=\"rtsp://10.168.1.45:554/axis-media/media.amp/\", response=\"8c5fc662991d144c3d2d319abdb09802\"\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Transport: RTP/AVP;unicast;client_port=53078-53079\n&gt;07-15 14:38:26.219      576-588/? D/dalvikvm\ufe55 GC_FOR_ALLOC freed 2420K, 79% free 8246K/38240K, paused 30ms, total 31ms\n&gt;07-15 14:38:26.229    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.239    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.259    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.259    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.269      439-722/? W/InputMethodManagerService\ufe55 Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41c773b8 attribute=null, token = android.os.BinderProxy@4225d8a0\n&gt;07-15 14:38:26.289    9037-9052/? E/VLC-std\ufe55 Received 198 new bytes of response data.\n&gt;07-15 14:38:26.289    9037-9052/? E/VLC-std\ufe55 Received a complete SETUP &gt;response:\n&gt;    RTSP/1.0 200 OK\n&gt;    CSeq: 5\n&gt;    Session: 1EB7CD91; timeout=60\n&gt;    Transport: RTP/AVP;unicast;client_port=53078-&gt;53079;server_port=50124-50125;ssrc=57E15CB7;mode=\"PLAY\"\n&gt;    Date: Wed, 15 Jul 2015 20:32:31 GMT\n&gt;07-15 14:38:26.289    9037-9412/? D/VLC\ufe55 [73acc248] core input: selecting program id=0\n&gt;07-15 14:38:26.289    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: setup start: 0.000000 stop:0.000000\n&gt;07-15 14:38:26.289    9037-9052/? E/VLC-std\ufe55 Sending request: PLAY rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 6\n&gt;    Authorization: Digest username=\"root\", realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", uri=\"rtsp://10.168.1.45:554/axis-media/media.amp/\", response=\"20a147ef13ac0dd25e485b077f24d072\"\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Session: 1EB7CD91\n&gt;    Range: npt=0.000-\n&gt;07-15 14:38:26.299    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.339    9037-9037/? D/dalvikvm\ufe55 GC_FOR_ALLOC freed 732K, 15% free 6659K/7816K, paused 24ms, total 25ms\n&gt;07-15 14:38:26.359      439-729/? I/ActivityManager\ufe55 START u0 {act=org.videolan.vlc.gui.video.PLAY_FROM_VIDEOGRID flg=0x18000000 cmp=org.videolan.vlc.debug/org.videolan.vlc.gui.video.VideoPlayerActivity (has extras)} from pid 9037\n&gt;07-15 14:38:26.409    9037-9052/? E/VLC-std\ufe55 Received 233 new bytes of response data.\n&gt;07-15 14:38:26.409    9037-9052/? E/VLC-std\ufe55 Received a complete PLAY response:\n&gt;    RTSP/1.0 200 OK\n&gt;    CSeq: 6\n&gt;    Session: 1EB7CD91\n&gt;    Range: npt=0-\n&gt;    RTP-Info: url=rtsp://10.168.1.45:554/axis-media/media.amp/trackID=1?videocodec=h264&amp;resolution=1280x720;seq=31479;rtptime=1375710016\n    Date: Wed, 15 Jul 2015 20:32:31 GMT\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: We have a timeout of 60 seconds\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: spawned timeout thread\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: play start: 0.000000 stop:0.000000\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73890268] core demux: using access_demux module \"live555\"\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73acc248] core input: video is disabled, not selecting ES 0x0\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73c1aea0] core demux meta: looking for meta reader module matching \"any\": 1 candidates\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73c1aea0] core demux meta: no meta reader modules matched\n&gt;07-15 14:38:26.409    9037-9412/? D/VLC\ufe55 [73acc248] core input: `rtsp://root:****@10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720' successfully opened\n&gt;07-15 14:38:26.409    9037-9052/? E/VLC-std\ufe55 Sending request: TEARDOWN rtsp://10.168.1.45:554/axis-media/media.amp/trackID=1?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 7\n&gt;    Authorization: Digest username=\"root\", realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", uri=\"rtsp://10.168.1.45:554/axis-media/media.amp/\", response=\"c03b9bbe9546d7c65fdc193c8cee8c8f\"\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Session: 1EB7CD91\n&gt;07-15 14:38:26.439    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.439      116-336/? W/AudioFlinger\ufe55 write blocked for 374 msecs, 150 delayed writes, thread 0x40c51008\n&gt;07-15 14:38:26.469    9037-9037/? I/VLC/PlaybackService\ufe55 Media.Event.ParsedChanged\n&gt;07-15 14:38:26.469    9037-9037/? D/VLC/MediaWrapper\ufe55 Title rtsp://10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720\n&gt;07-15 14:38:26.469    9037-9037/? D/VLC/MediaWrapper\ufe55 Artist null\n&gt;07-15 14:38:26.469    9037-9037/? D/VLC/MediaWrapper\ufe55 Genre null\n&gt;07-15 14:38:26.469    9037-9037/? D/VLC/MediaWrapper\ufe55 Album null\n&gt;07-15 14:38:26.479    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.489    9037-9412/? D/VLC\ufe55 [73890268] live555 demux: tk-rtpSource-&gt;hasBeenSynchronizedUsingRTCP()\n&gt;07-15 14:38:26.489    9037-9412/? E/VLC\ufe55 [73acc248] core input: ES_OUT_RESET_PCR called\n&gt;07-15 14:38:26.489    9037-9052/? E/VLC-std\ufe55 Sending request:\n&gt;07-15 14:38:26.489    9037-9052/? E/VLC-std\ufe55 GET_PARAMETER rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 8\n&gt;    Authorization: Digest username=\"root\", realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", uri=\"rtsp://10.168.1.45:554/axis-media/media.amp/\", response=\"eef50526f953157a541671aac10b7d99\"\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Session: 1EB7CD91\n&gt;07-15 14:38:26.489    9037-9052/? E/VLC-std\ufe55 [ 07-15 14:38:26.489  9037: 9412 D/VLC      ]\n    [73890268] live555 demux: RTSP track Close, 0 track remaining\n&gt;07-15 14:38:26.489    9037-9412/? D/VLC\ufe55 [73acc248] core input: EOF reached\n&gt;07-15 14:38:26.489    9037-9412/? D/VLC\ufe55 [73890268] core demux: removing module \"live555\"\n&gt;07-15 14:38:26.499    9037-9052/? E/VLC-std\ufe55 Sending request:\n&gt;07-15 14:38:26.499    9037-9052/? E/VLC-std\ufe55 TEARDOWN rtsp://10.168.1.45:554/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720 RTSP/1.0\n&gt;    CSeq: 9\n&gt;    Authorization: Digest username=\"root\", realm=\"AXIS_00408CE6D77E\", nonce=\"00478005Y607330b149b17a0889d51cdbe1476bcbc90d0\", uri=\"rtsp://10.168.1.45:554/axis-media/media.amp/\", response=\"c03b9bbe9546d7c65fdc193c8cee8c8f\"\n&gt;    User-Agent: LibVLC/3.0.0-git (LIVE555 Streaming Media v2015.06.24)\n&gt;    Session: 1EB7CD91\n&gt;07-15 14:38:26.499    9037-9052/? E/VLC-std\ufe55 [ 07-15 14:38:26.499  9037: 9412 D/VLC      ]\n    [73acc248] core input: Program doesn't contain anymore ES\n&gt;07-15 14:38:26.499    9037-9412/? D/dalvikvm\ufe55 threadid=15: thread exiting, not yet detached (count=0)\n&gt;07-15 14:38:26.499    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.519    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.529    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.709      439-729/? D/dalvikvm\ufe55 GC_FOR_ALLOC freed 1741K, 32% free 10561K/15308K, paused 142ms, total 142ms\n&gt;07-15 14:38:26.729    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.749    9037-9037/? I/VLC/PlaybackService\ufe55 MediaPlayer.Event.Playing\n&gt;07-15 14:38:26.759    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.769    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.789    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.799    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:26.829    9037-9037/? D/VLC/VideoPlayerActivity\ufe55 MediaRouter information : android.media.MediaRouter@41e6f950\n&gt;07-15 14:38:26.829    9037-9037/? I/VLC/VideoPlayerActivity\ufe55 No secondary display detected\n&gt;07-15 14:38:26.959    9037-9037/? D/dalvikvm\ufe55 GC_FOR_ALLOC freed 1372K, 22% free 6328K/8044K, paused 24ms, total 26ms\n&gt;07-15 14:38:27.029    9037-9037/? I/Choreographer\ufe55 Skipped 30 frames!  The application may be doing too much work on its main thread.\n&gt;07-15 14:38:27.309    9037-9037/? I/VLC/PlaybackService\ufe55 MediaPlayerEndReached\n&gt;07-15 14:38:27.339    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:27.349    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:27.359    9037-9037/? E/BitmapFactory\ufe55 Unable to decode stream: java.lang.NullPointerException\n&gt;07-15 14:38:27.359    9037-9037/? W/VLC/PlaybackService\ufe55 Warning: invalid next index, aborted !\n&gt;07-15 14:38:27.359    9037-9037/? D/VLC\ufe55 [73acc248] core input: Destroying the input for 'rtsp://10.168.1.45/axis-media/media.amp?videocodec=h264&amp;resolution=1280x720'\n&gt;07-15 14:38:27.359    9037-9037/? D/VLC\ufe55 [73a56e28] core audio output: removing module \"android_audiotrack\"\n&gt;07-15 14:38:27.379      439-744/? I/MediaFocusControl\ufe55 AudioFocus  abandonAudioFocus() from android.media.AudioManager@41f316d0org.videolan.vlc.PlaybackService$1@41e62750\n&gt;07-15 14:38:27.379     439-1293/? I/MediaFocusControl\ufe55 Remote Control   unregisterMediaButtonIntent() for PendingIntent{42033a48: PendingIntentRecord{41fd9ab0 org.videolan.vlc.debug broadcastIntent}}\n&gt;07-15 14:38:27.399    9037-9037/? D/PlaybackService.Client\ufe55 Service Connected\n&gt;07-15 14:38:27.479    9037-9037/? E/VLC/VideoPlayerActivity\ufe55 Invalid surface size\n&gt;07-15 14:38:27.489    9037-9037/? D/VLC/VideoPlayerActivity\ufe55 Continuing playback from AudioService at index 0\n&gt;07-15 14:38:27.489      439-453/? I/ActivityManager\ufe55 Displayed org.videolan.vlc.debug/org.videolan.vlc.gui.video.VideoPlayerActivity: +1s48ms\n&gt;07-15 14:38:27.499    9037-9037/? I/AppCompatDelegate\ufe55 The Activity's LayoutInflater already has a Factory installed so we can not install AppCompat's\n&gt;07-15 14:38:30.069      116-336/? D/AudioHardware\ufe55 AudioHardware pcm playback is going to standby.\n&gt; ## Quoted Heading ##\n\n\nAndroid NDK: WARNING:jni/Android.mk:iomx.13: non-system libraries in linker flags: -lgcc -lstagefright -lmedia -lbinder    \nAndroid NDK:     This is likely to result in incorrect builds. Try using LOCAL_STATIC_LIBRARIES    \nAndroid NDK:     or LOCAL_SHARED_LIBRARIES instead to list the library dependencies of the    \nAndroid NDK:     current module    \nAndroid NDK: WARNING:jni/Android.mk:iomx.14: non-system libraries in linker flags: -lgcc -lstagefright -lmedia -lbinder    \nAndroid NDK:     This is likely to result in incorrect builds. Try using LOCAL_STATIC_LIBRARIES    \nAndroid NDK:     or LOCAL_SHARED_LIBRARIES instead to list the library dependencies of the    \nAndroid NDK:     current module    \nAndroid NDK: WARNING:jni/Android.mk:vlcjni: non-system libraries in linker flags: /Users/breinosa/Library/Android/android/.modules/build-android-arm-linux-androideabi/liba52_plugin.a \n</code></pre>\n"}, {"tags": ["c++", "recursion", "data-structures", "quadtree", "recursive-datastructures"], "comments": [{"owner": {"reputation": 167, "user_id": 5032146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a49c71710697f57160060e3e203bb29?s=128&d=identicon&r=PG&f=1", "display_name": "Satish Chalasani", "link": "https://stackoverflow.com/users/5032146/satish-chalasani"}, "edited": false, "score": 0, "creation_date": 1436996577, "post_id": 31441570, "comment_id": 50852549, "body": "This may be too much to go through &amp; ask for. If you any specific code and it is not working, you may  put it here.."}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 1, "creation_date": 1436997549, "post_id": 31441570, "comment_id": 50852978, "body": "The easiest way is to just remove and then re-add the object.  If you want a better spatial partitioning scheme for objects that move, take a look at &quot;loose quadtrees&quot;"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2557234"}, "is_accepted": false, "score": 0, "last_activity_date": 1438285030, "creation_date": 1438285030, "answer_id": 31732587, "question_id": 31441570, "link": "https://stackoverflow.com/questions/31441570/how-do-you-update-a-quadtree-after-an-object-has-moved-in-c/31732587#31732587", "title": "How do you update a QuadTree after an object has moved in C++?", "body": "<p>There are few solutions for that:\nYou can recreate whole tree each update. You can also simple remove and insert object when it moves.</p>\n\n<p>Another solution (in my case it gives me the best performance) is to store only static objects in quad tree. I stored dynamic objcts in list (in my game there is much less dynamic objects than static).</p>\n\n<p>Also you can read about other spatial data structures like grid, it is much simplier to move objects between cells.</p>\n"}, {"tags": [], "owner": {"reputation": 6647, "user_id": 600591, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef7d25f8a1dc499c1bf802be93f4007c?s=128&d=identicon&r=PG", "display_name": "anthonyvd", "link": "https://stackoverflow.com/users/600591/anthonyvd"}, "is_accepted": false, "score": 2, "last_activity_date": 1438286129, "creation_date": 1438286129, "answer_id": 31732875, "question_id": 31441570, "link": "https://stackoverflow.com/questions/31441570/how-do-you-update-a-quadtree-after-an-object-has-moved-in-c/31732875#31732875", "title": "How do you update a QuadTree after an object has moved in C++?", "body": "<p>It'll be really hard to do better than remove and re-insert, especially in your case, since:</p>\n\n<ul>\n<li>Removing seems super cheap (remove the pointer from the corresponding node's vector)</li>\n<li>When looking for which node to move the object to, you need to traverse the tree the exact same way as when inserting, after which:</li>\n<li>Insertion is pretty cheap</li>\n</ul>\n\n<p>The only thing I would try if performance is really an issue is some sort of insertion from the leaves. Let's say your tree is pretty large and that objects usually move to immediately adjacent nodes, you could request insertion in the parent node, which would pass it to its parent if needed. Something like:</p>\n\n<pre><code>void insert_from_leaf(object* o) {\n  if (!is_in_this_subtree(o)) {\n    parent-&gt;insert_from_leaf(o);\n    return;\n  }\n  find_child_node_for_object(o)-&gt;insert(0);\n}\n</code></pre>\n\n<p>Basically, it might be more efficient to walk the tree from the leaf the object is coming from than always starting from the root since adjacent nodes tend to share a close ancestor. </p>\n\n<p>In the worse case, you'll end up doing twice the work because you'll go back all the way to the root. In the best case, both source and destination share an immediate parent.</p>\n\n<p>How good a gain this would be entirely depends on the layout of your particular tree, its size, and a bunch of other factors so you should measure the performance of your code before and after implementing something like this.</p>\n"}], "owner": {"reputation": 63, "user_id": 4930947, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6118fd3d948386b6196a09ed526fbd80?s=128&d=identicon&r=PG&f=1", "display_name": "epitaque", "link": "https://stackoverflow.com/users/4930947/epitaque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3160, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1438286129, "creation_date": 1436996138, "last_edit_date": 1437102173, "question_id": 31441570, "link": "https://stackoverflow.com/questions/31441570/how-do-you-update-a-quadtree-after-an-object-has-moved-in-c", "title": "How do you update a QuadTree after an object has moved in C++?", "body": "<p>The easiest method is removing and inserting the object, but there are probably faster methods. (If I'm overthinking this and I should just do it the simple way, let me know)</p>\n\n<p>Here are some notes about my QuadTree</p>\n\n<ul>\n<li>The objects that are moving are AABBs and may be bigger than the\nsmallest QuadTree node.</li>\n<li>The objects are not removed when creating children QuadTrees. That\nmeans the root QuadTree has a pointer to every object inside the\nQuadTree.</li>\n<li>The objects are stored as pointers in a vector outside of the QuadTree.</li>\n</ul>\n\n<p>So far, each time an object moves it calls a function called Update() on the root QuadTree. It includes itself and its past bounding box before it moved in the parameters. I'm  not sure how to make the function though.</p>\n\n<p>Posting the entire code to my QuadTree here would make my post quite long, so I've created a <a href=\"https://github.com/epitaque/QuadTree\" rel=\"nofollow\">GitHub repository</a> for easier reading.</p>\n\n<p>Edit: For anyone looking for an answer <a href=\"http://zenpandainteractive.blogspot.com/\" rel=\"nofollow\">this</a> seems to update objects by removing and deleting them and is pretty efficient judging by the test he did in the comments. </p>\n"}, {"tags": ["c++", "templates", "gcc"], "comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1436998497, "post_id": 31441543, "comment_id": 50853378, "body": "Your function template is ill-formed NDR because it&#39;ll never be usable in a constant expression (&#167;7.1.5/6). Remove the <code>constexpr</code>."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1436998661, "post_id": 31441543, "comment_id": 50853437, "body": "Wait... that thing is full of filthy UB anyway."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1437001701, "post_id": 31441543, "comment_id": 50854525, "body": "Why would you want to use something like <code>offsetof()</code> in C++ anyway? You are much better off using pointers to members."}, {"owner": {"reputation": 11, "user_id": 3423309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f45dd00920096f95404038385d28f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3423309", "link": "https://stackoverflow.com/users/3423309/user3423309"}, "edited": false, "score": 0, "creation_date": 1437021387, "post_id": 31441543, "comment_id": 50859646, "body": "Why do you think that its UB? I want to calc address of any member of struct at compile time, so pointers is not a solution."}], "owner": {"reputation": 11, "user_id": 3423309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f45dd00920096f95404038385d28f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3423309", "link": "https://stackoverflow.com/users/3423309/user3423309"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1437022002, "creation_date": 1436996040, "last_edit_date": 1437022002, "question_id": 31441543, "link": "https://stackoverflow.com/questions/31441543/how-to-pass-inner-struct-type-as-argument-of-template", "title": "How to pass inner struct type as argument of template?", "body": "<p>There is a macro <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow\"><code>offsetof(type, member)</code></a> which calculates the offset of member of a class or struct.</p>\n\n<p>I am trying to implement the equivalent functionality as a function template:</p>\n\n<pre><code>template&lt;class T,typename U&gt;\nstatic constexpr size_t addressOf(U T::*member) {\n    return (char*)&amp;((T*)nullptr-&gt;*(member)) - (char*)nullptr;\n}\n</code></pre>\n\n<p>But the <code>offsetof</code> macro additionally allows me to do something like:</p>\n\n<pre><code>struct A {\n\n    struct B {\n        int x;\n    };\n\n    int y;\n    B b;\n};\n\nstd::cout &lt;&lt; offsetof(A, y) &lt;&lt; std::endl;   // prints 0\nstd::cout &lt;&lt; offsetof(A, b.x) &lt;&lt; std::endl; // prints 4\n</code></pre>\n\n<p>How can I write the same thing in my <code>addressOf</code> function?</p>\n\n<p>PS: Little more info: I have an array of raw data at external EEPROM Chip, which located at defined address. So i want to \"map\" structure to this data. Instead of \"read\" all struct from EERPOM to RAM, i want to get access to specific member of struct and \"read\" it only. In this case i calculate address of struct member in compile time and use function like: <code>ReadFromEEPROM(StartAddress+offsetof(A,b.x),&amp;x);</code>\nAnd i want to find a way to replace macro with template.</p>\n"}, {"tags": ["c++", "switch-statement"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 1, "creation_date": 1436996157, "post_id": 31441541, "comment_id": 50852357, "body": "It is the rule of langauge"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436996158, "post_id": 31441541, "comment_id": 50852360, "body": "Because the language does not allow it."}, {"owner": {"reputation": 673, "user_id": 5008381, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2395a2ebca93cd49b689c3d9245f491f?s=128&d=identicon&r=PG&f=1", "display_name": "vlad4378", "link": "https://stackoverflow.com/users/5008381/vlad4378"}, "edited": false, "score": 0, "creation_date": 1436996242, "post_id": 31441541, "comment_id": 50852396, "body": "I relize it. But which is a reason?"}], "answers": [{"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 5, "last_activity_date": 1437012425, "last_edit_date": 1437012425, "creation_date": 1436997247, "answer_id": 31441831, "question_id": 31441541, "link": "https://stackoverflow.com/questions/31441541/why-cant-i-use-non-integral-types-with-switch/31441831#31441831", "title": "Why can&#39;t I use non-integral types with switch", "body": "<p>The BCPL and C languages implemented <code>switch</code> (<code>switchon</code> in BCPL) as a higher-level implementation of an <a href=\"https://en.wikipedia.org/wiki/Branch_table\" rel=\"nofollow\">assembly branch table</a>.</p>\n\n<p>A branch table is a very efficient implementation of an if/else chain that uses a single integer to index into an array of addresses (or address offsets).  Program control <em>jumps</em> to the address at the specified index of the table.</p>\n\n<p><strong><code>switch</code> requires an integer type (or a type implicitly convertible to an integer) because array-indexing requires an integer type.</strong></p>\n\n<p>C++ inherited the same language properties of <code>switch</code> without making significant changes.</p>\n\n<p>It would be <em>possible</em> to redefine the language to implement <code>switch</code> using <code>operator ==</code>, but that same behavior can already be implemented as an if/else chain.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1436998193, "last_edit_date": 1436998193, "creation_date": 1436997910, "answer_id": 31441994, "question_id": 31441541, "link": "https://stackoverflow.com/questions/31441541/why-cant-i-use-non-integral-types-with-switch/31441994#31441994", "title": "Why can&#39;t I use non-integral types with switch", "body": "<p>You can use classes in the switch statement. </p>\n\n<p>According to the C++ Standard (6.4.2 The switch statement):</p>\n\n<blockquote>\n  <p>2 The condition shall be of integral type, enumeration type, or class\n  type. If of class type, the condition is contextually implicitly\n  converted (Clause 4) to an integral or enumeration type.</p>\n</blockquote>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\n    int x;\n\npublic:\n    A( int x ) : x( x ) {}\n\n    operator int() const { return x; }\n};\n\nint main()\n{\n    A a( 2 );\n\n    switch ( a )\n    {\n        case 1:\n            std::cout &lt;&lt; \"past by\" &lt;&lt; std::endl;\n            break;\n        case 2:\n            std::cout &lt;&lt; \"Bingo!\" &lt;&lt; std::endl;\n            break;\n    }            \n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Bingo!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1436998225, "creation_date": 1436998225, "answer_id": 31442065, "question_id": 31441541, "link": "https://stackoverflow.com/questions/31441541/why-cant-i-use-non-integral-types-with-switch/31442065#31442065", "title": "Why can&#39;t I use non-integral types with switch", "body": "<p>You can add an <a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow\">implicit <em>conversion operator</em></a> to your class to make this possible:</p>\n\n<pre><code>operator int() const { return x; }\n</code></pre>\n"}], "owner": {"reputation": 673, "user_id": 5008381, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2395a2ebca93cd49b689c3d9245f491f?s=128&d=identicon&r=PG&f=1", "display_name": "vlad4378", "link": "https://stackoverflow.com/users/5008381/vlad4378"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 1, "closed_date": 1437029861, "accepted_answer_id": 31441831, "answer_count": 3, "score": 3, "last_activity_date": 1437012425, "creation_date": 1436996037, "last_edit_date": 1436997677, "question_id": 31441541, "link": "https://stackoverflow.com/questions/31441541/why-cant-i-use-non-integral-types-with-switch", "closed_reason": "Duplicate", "title": "Why can&#39;t I use non-integral types with switch", "body": "<p>Cause if I define the <code>operator==</code> then comparison will be possible:</p>\n\n<pre><code>class My\n{\n    int x;\n    // ...\npublic:\n    My(int);\n\n    bool operator==(const My &amp; y);\n        // ...\n};\n\n//...\n\nMy one = 1;\nswitch (one)\n{\n    case 1 : // anything\n\n    default : // ...\n}\n</code></pre>\n\n<p>But it's possible only for integer types. Why?</p>\n"}, {"tags": ["c++", "winapi", "c++11", "int", "declaration"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1436996302, "post_id": 31441429, "comment_id": 50852424, "body": "What platform are you building this with?  What OS version?  Have you run in Windbg?"}, {"owner": {"reputation": 37, "user_id": 5121225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612a3fc307093989dafb8ee9c194084?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Novotn&#253;", "link": "https://stackoverflow.com/users/5121225/michael-novotn%c3%bd"}, "reply_to_user": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1436996510, "post_id": 31441429, "comment_id": 50852516, "body": "I use opensource Code::blocks 13.12 (compiler: GNU GCC Compiler) and trying this on Windows 10 build 10166"}], "answers": [{"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1437003323, "post_id": 31441839, "comment_id": 50855077, "body": "<code>PROCESSENTRY32 pe32 = {sizeof(PROCESSENTRY32)};</code> is a more concise way of doing the initialization."}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1437004556, "post_id": 31441839, "comment_id": 50855453, "body": "and less intuitive to a beginner."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1561320137, "post_id": 31441839, "comment_id": 100014525, "body": "Even as a non-beginner, I&#39;d much prefer the code shown in this answer. It&#39;s self-documenting in a way that Harry&#39;s certainly is not."}], "tags": [], "owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "is_accepted": true, "score": 4, "last_activity_date": 1436997292, "creation_date": 1436997292, "answer_id": 31441839, "question_id": 31441429, "link": "https://stackoverflow.com/questions/31441429/imposible-declaration-int-variable-in-my-program/31441839#31441839", "title": "Imposible declaration INT variable in my program", "body": "<p>You have a lot of issues going on here.  I tried this on VS 2008 Win7.\nThe \"i\" declaration has nothing to do with the problem, but may just be moving the stack a bit to hide the real problems.  See my comments in the corrected code below.</p>\n\n<pre><code>  bool getAllProcesses(){\n        int i;\n        i=0;\n        HANDLE WINAPI snapshot = CreateToolhelp32Snapshot( TH32CS_SNAPPROCESS, 0 );\n       /* replace LPPROCESSENTRY32 with PROCESSENTRY32. LP is just a define as\n a pointer to a structure, so you did not actually allocate any memory for the\n return of Process32First() to return the result into.\n So you were probably overwriting stuff in the stack. */\n\n        PROCESSENTRY32 pe32;\n\n       /* need to initialize the structure properly. Memset may be overkill,\n         but better to see all zeros than garbage.  dwSize must be\n         initialized as per the SDK documentation. */\n        memset(&amp;pe32,0,sizeof(pe32) );\n        pe32.dwSize = sizeof(pe32);\n        BOOL result;\n\n        /* did not check the result from the call if TRUE/FALSE */\n        result = Process32First(snapshot, &amp;pe32);\n\n        std::cout &lt;&lt; \"result =\"  &lt;&lt; result &lt;&lt; \"\\n\";\n        while(Process32Next(snapshot, &amp;pe32)){\n            std::cout &lt;&lt; pe32.szExeFile &lt;&lt; \"\\n\";\n        }\n        std::cout &lt;&lt; \"End of list\";\n        CloseHandle( snapshot );\n        return true;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1436997752, "post_id": 31441854, "comment_id": 50853073, "body": "There is a 3rd mistake in the original code (and yours).  The data returned by <code>Process32First()</code> is being ignored.  The code should be using a <code>do&#47;while</code> loop so the first set of <code>pe32</code> data is processed."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1436997849, "post_id": 31441854, "comment_id": 50853127, "body": "True, I was so focused on the error itself that i ignored return values."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1436998009, "post_id": 31441854, "comment_id": 50853189, "body": "Skipping the first set of returned data is not an issue of ignoring return values, it is an issue in the code logic itself."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1436998535, "post_id": 31441854, "comment_id": 50853389, "body": "Thank you for improving the post. That was not my solution, the flaw that you spotted is visible from comments, I&#39;m just saying, I feel that I&#39;m taking credit for your work :)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1436999739, "post_id": 31441854, "comment_id": 50853843, "body": "I think I have enough reputation to spare a few points :)  Besides, you spotted the real errors that were crashing the code, I merely spotted an error that was losing data."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 4, "last_activity_date": 1561342754, "last_edit_date": 1561342754, "creation_date": 1436997356, "answer_id": 31441854, "question_id": 31441429, "link": "https://stackoverflow.com/questions/31441429/imposible-declaration-int-variable-in-my-program/31441854#31441854", "title": "Imposible declaration INT variable in my program", "body": "<p>The addition of those 2 lines making the program not able to run is just a coincidence. The program should not be running at all, since there are 2 major mistakes:</p>\n\n<ul>\n<li><p><em>pe32</em> is an uninitialized pointer</p></li>\n<li><p><em>dwSize</em> member of <em>PROCESSENTRY32</em> structure is not initialized as described in the <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/api/tlhelp32/nf-tlhelp32-process32first\" rel=\"nofollow noreferrer\">[MS.Docs]: Process32First function</a>:</p>\n\n<blockquote>\n  <p>The calling application must set the <strong>dwSize</strong> member of <a href=\"https://docs.microsoft.com/windows/desktop/api/tlhelp32/ns-tlhelp32-tagprocessentry32\" rel=\"nofollow noreferrer\">PROCESSENTRY32</a> to the size, in bytes, of the structure.</p>\n</blockquote></li>\n</ul>\n\n<p>And a third, smaller mistake is that you are ignoring the process data returned by <em>Process32First</em>.</p>\n\n<p>In order to make things work correctly, replace the following lines of your code:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>LPPROCESSENTRY32 pe32;\n\nProcess32First(snapshot, pe32);\nwhile(Process32Next(snapshot, pe32)){\n    std::cout &lt;&lt; pe32-&gt;szExeFile &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>, with:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>PROCESSENTRY32 pe32;\npe32.dwSize = sizeof(PROCESSENTRY32);\n\nif (Process32First(snapshot, &amp;pe32))\n{\n    do {\n        std::cout &lt;&lt; pe32.szExeFile &lt;&lt; \"\\n\";\n    }\n    while (Process32Next(snapshot, &amp;pe32));\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5121225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1612a3fc307093989dafb8ee9c194084?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Novotn&#253;", "link": "https://stackoverflow.com/users/5121225/michael-novotn%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 31441839, "answer_count": 2, "score": 3, "last_activity_date": 1561342754, "creation_date": 1436995560, "last_edit_date": 1436997417, "question_id": 31441429, "link": "https://stackoverflow.com/questions/31441429/imposible-declaration-int-variable-in-my-program", "title": "Imposible declaration INT variable in my program", "body": "<p>I tried to create a little project in C++ . My program should be able to read the currently running processes in Windows and send information about the processes to my private MySQL database every 5 minutes. In this amount of time I can read the processes. </p>\n\n<p>See code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;tlhelp32.h&gt;\n\nbool getAllProcesses(void);\n\nint main(void){\n    getAllProcesses();\n}\n\nbool getAllProcesses(){\n    HANDLE WINAPI snapshot = CreateToolhelp32Snapshot( TH32CS_SNAPPROCESS, 0 );\n    LPPROCESSENTRY32 pe32;\n\n    Process32First(snapshot, pe32);\n    while(Process32Next(snapshot, pe32)){\n        std::cout &lt;&lt; pe32-&gt;szExeFile &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"End of list\";\n    CloseHandle( snapshot );\n    return true;\n}\n</code></pre>\n\n<p>The code above is working fine. </p>\n\n<p>But if I add the code \"int i;i=1;\" like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;tlhelp32.h&gt;\n\nbool getAllProcesses(void);\n\nint main(void){\n    getAllProcesses();\n}\n\nbool getAllProcesses(){\n    int i;\n    i=0;\n    HANDLE WINAPI snapshot = CreateToolhelp32Snapshot( TH32CS_SNAPPROCESS, 0 );\n    LPPROCESSENTRY32 pe32;\n\n    Process32First(snapshot, pe32);\n    while(Process32Next(snapshot, pe32)){\n        std::cout &lt;&lt; pe32-&gt;szExeFile &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"End of list\";\n    CloseHandle( snapshot );\n    return true;\n}\n</code></pre>\n\n<p>With this change the program will crash, showing the alert \"Program stop the work\". </p>\n\n<p>I tried to find the problem and I've  determined the following :</p>\n\n<p>If I use the function Process32First() OR Process32Next() I can't declare the same int in all of the program. </p>\n\n<p>What is the problem? </p>\n"}, {"tags": ["c++", "inheritance", "boost", "struct"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1436995704, "post_id": 31441428, "comment_id": 50852169, "body": "Read about the <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">Curiously recurring template pattern</a>."}], "answers": [{"tags": [], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "is_accepted": false, "score": 1, "last_activity_date": 1436995746, "last_edit_date": 1495542586, "creation_date": 1436995746, "answer_id": 31441474, "question_id": 31441428, "link": "https://stackoverflow.com/questions/31441428/c-confusion-about-embedding-a-struct-name-in-itself/31441474#31441474", "title": "c++ confusion about embedding a struct name in itself", "body": "<p>This is called mix-in. See <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a> and <a href=\"https://stackoverflow.com/questions/18773367/what-are-mixins-as-a-concept\">this post on mixins</a>.</p>\n"}], "owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1436995746, "creation_date": 1436995558, "question_id": 31441428, "link": "https://stackoverflow.com/questions/31441428/c-confusion-about-embedding-a-struct-name-in-itself", "title": "c++ confusion about embedding a struct name in itself", "body": "<p>I am learning boost and here is a piece of code from :<a href=\"http://www.boost.org/doc/libs/1_55_0/libs/graph/example/visitor.cpp\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_55_0/libs/graph/example/visitor.cpp</a>\nI am really confused in the definition of <code>struct edge_printer</code>, it uses a inheritance of <code>base_visitor</code>, but the type name of <code>base_visitor</code> templates is specified as <code>edge_printer</code> itself. Can I ask what this is called in C++? </p>\n\n<pre><code>template &lt;class Tag&gt;\nstruct edge_printer : public base_visitor&lt;edge_printer&lt;Tag&gt; &gt; {\n  typedef Tag event_filter;\n  edge_printer(std::string edge_t) : m_edge_type(edge_t) { }\n  template &lt;class Edge, class Graph&gt;\n  void operator()(Edge e, Graph&amp; G) {\n    std::cout &lt;&lt; m_edge_type &lt;&lt; \": \" &lt;&lt; source(e, G) \n              &lt;&lt; \" --&gt; \" &lt;&lt;  target(e, G) &lt;&lt; std::endl;\n  }\n  std::string m_edge_type;\n};\ntemplate &lt;class Tag&gt;\nedge_printer&lt;Tag&gt; print_edge(std::string type, Tag) { \n  return edge_printer&lt;Tag&gt;(type);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1436995108, "post_id": 31441271, "comment_id": 50851889, "body": "Check the condition of your second loop, if you pass any argument to the program it will never run. On the other hand, it will run for a very long time if you <i>don&#39;t</i> pass any arguments, or until the program crashes due to undefined behavior. And while checking conditions, check the one in the first loop as well. The &quot;simplest&quot; solution is much simpler than you think, and you don&#39;t need any extra variables and only a single <code>while</code> loop."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1436995456, "post_id": 31441271, "comment_id": 50852050, "body": "Shorter answer - your first loop prints <code>third_second_first_</code>.  Your second loop prints nothing."}], "answers": [{"comments": [{"owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 1, "creation_date": 1436995676, "post_id": 31441407, "comment_id": 50852156, "body": "Wanna explain yourself?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "edited": false, "score": 0, "creation_date": 1436995715, "post_id": 31441407, "comment_id": 50852173, "body": "@RussellGreene  Working on it. Posted way too soon."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436995787, "post_id": 31441407, "comment_id": 50852213, "body": "This code exhibits undefined behavior when no parameters are supplied."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436996097, "post_id": 31441407, "comment_id": 50852334, "body": "@DrewDormann Yeah, not sure what OP wants with the second loop, so I left it alone. Doesn&#39;t add anything to the removal of the training pace so I&#39;m going to clip it."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436996175, "post_id": 31441407, "comment_id": 50852371, "body": "@user4581301 I&#39;m pretty sure it was an attempt to handle the printing of the final parameter in a different way (without the space)"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1436997412, "last_edit_date": 1436997412, "creation_date": 1436995453, "answer_id": 31441407, "question_id": 31441271, "link": "https://stackoverflow.com/questions/31441271/getting-rid-of-extra-blank-at-the-end/31441407#31441407", "title": "Getting Rid of Extra Blank at the End", "body": "<p>Best way to delete it is by not printing it in the first place.</p>\n\n<p>Test to make sure you have at least one printable input and print it. Then for all remaining inputs print out the delimiter followed by the input.</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nint main(int argc, char *argv[]) {\n    if (argc &gt; 1)\n    {  // Ensure that where is at least one argument to print\n        std::cout &lt;&lt; argv[argc - 1]; // print last argument without adornment\n        for(int num = argc - 2; num &gt; 0; num--)\n        { // Print a space and all remaining arguments. \n          // For visibility, I've replaced the space with an underscore \n            std::cout &lt;&lt; \"_\" &lt;&lt; argv[num] ;\n        }\n    }\n/* unsure what this loop is supposed to do. Doesn't do anything in it's current state, \n   so I've commented it out.\n    for(int num = argc; num &lt; 2; num--) \n    {\n        std::cout &lt;&lt; argv[num - 1];\n    }\n*/\n    return 0;\n}\n</code></pre>\n\n<p>Input: </p>\n\n<pre><code>first second third\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>third_second_first\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": -1, "last_activity_date": 1437124449, "creation_date": 1437124449, "answer_id": 31472255, "question_id": 31441271, "link": "https://stackoverflow.com/questions/31441271/getting-rid-of-extra-blank-at-the-end/31472255#31472255", "title": "Getting Rid of Extra Blank at the End", "body": "<p>For the \"simple\" solution, I would do something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char* argv[])\n{\n    while (--argc &gt; 0)\n        std::cout &lt;&lt; argv[argc] &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n':\n}\n</code></pre>\n\n<p>Do note that it will print the trailing space after the last (first) argument, but unless your professor has a requirement to not have it, or you have an online judge or something similar that disallows it I don't see how it really matters. It's easy to fix though:</p>\n\n<pre><code>while (--argc &gt; 1)\n    std::cout &lt;&lt; argv[argc] &lt;&lt; ' ';\nstd::cout &lt;&lt; argv[argc] &lt;&lt; '\\n':\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4935089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9641ccc94c5f72a9d7b571464866c16?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth", "link": "https://stackoverflow.com/users/4935089/kenneth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1437124449, "creation_date": 1436994920, "question_id": 31441271, "link": "https://stackoverflow.com/questions/31441271/getting-rid-of-extra-blank-at-the-end", "title": "Getting Rid of Extra Blank at the End", "body": "<p>I'm supposed to take command line inputs and output them in reverse order. The code I have so far is </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint main(int argc, char *argv[]) {\n    for(int num = argc; num &gt;= 2; num--)\n        cout &lt;&lt; argv[num - 1] &lt;&lt; \" \";\n    for(int num = argc; num &lt; 2; num--)\n        cout &lt;&lt; argv[num - 1];\n    return 0\n}\n</code></pre>\n\n<p>It does its job, but I'm getting an unwanted white space the end of the very last output so for example if I did</p>\n\n<p>./reverse first second third</p>\n\n<p>It would output</p>\n\n<p>third_second_first_</p>\n\n<p>The space after the first is unwanted and I'm having trouble getting rid of it. It's supposed to take as many arguments as I'd like. Is there a simple way to delete the last space?</p>\n"}, {"tags": ["c++", "opencv", "camera-calibration"], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 2224801, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/r1Rfe.jpg?s=128&g=1", "display_name": "Fadwa", "link": "https://stackoverflow.com/users/2224801/fadwa"}, "edited": false, "score": 0, "creation_date": 1481654712, "post_id": 31464060, "comment_id": 69460577, "body": "I used you solution and still have assertion failed problem with <code>cornerSubPix</code>. Did you have this problem?"}], "tags": [], "owner": {"reputation": 63, "user_id": 5121162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b77951809d15f8b1a3b25d6278b42e8b?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5121162/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1437079014, "creation_date": 1437079014, "answer_id": 31464060, "question_id": 31441204, "link": "https://stackoverflow.com/questions/31441204/opencv-issue-with-findchessboardcorners/31464060#31464060", "title": "OpenCV Issue with findChessboardCorners", "body": "<p>Figured it out.  Problem was a bug in findChessboardCorners-- corners was being improperly resized within the function itself, causing it to blow up.  Found the issue and got the fix from <a href=\"http://code.opencv.org/issues/648\" rel=\"nofollow\">here</a>, although I had to convert corners back to a vector once I ran the corrected function.</p>\n\n<p>Updated code:</p>\n\n<pre><code>Mat pointBuf;\n\nfound = actually_findChessboardCorners(image, board_sz, pointBuf,\n            CALIB_CB_ADAPTIVE_THRESH | CALIB_CB_FAST_CHECK | CALIB_CB_NORMALIZE_IMAGE); \n\ncorners.assign((Point2f*)pointBuf.datastart, (Point2f*)pointBuf.dataend);\n</code></pre>\n\n<p>using this function:</p>\n\n<pre><code>bool actually_findChessboardCorners(Mat&amp; frame, Size&amp; size, Mat&amp; corners, int flags) {\nint count = size.area() * 2;\ncorners.create(count, 1, CV_32FC2);\nCvMat _image = frame;\nbool ok = cvFindChessboardCorners(&amp;_image, size,\n    reinterpret_cast&lt;CvPoint2D32f*&gt;(corners.data),\n    &amp;count, flags) &gt; 0;\nreturn ok;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 63, "user_id": 5121162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b77951809d15f8b1a3b25d6278b42e8b?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5121162/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1486, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1437079014, "creation_date": 1436994741, "question_id": 31441204, "link": "https://stackoverflow.com/questions/31441204/opencv-issue-with-findchessboardcorners", "title": "OpenCV Issue with findChessboardCorners", "body": "<p>I also asked this on the OpenCV forum, am trying my luck elsewhere.  I'm using OpenCV 3.0 in Visual Studio Professional 2013.</p>\n\n<p>So I'm trying to calibrate a camera using the tutorial code in calib3d and <a href=\"http://www.aishack.in/tutorials/calibrating-undistorting-with-opencv-in-c-oh-yeah/\" rel=\"noreferrer\">this</a> tutorial. I keep getting the same error over and over (std::length_error at memory location) and I've traced it to where I try and add the corner vector given from findChessboardCorners to the image_points vector in the last line of my code.</p>\n\n<pre><code>image_points.push_back(corners);\n</code></pre>\n\n<p>In the debug window, the size of corners is listed as: corners  { size=2305843009213050645 }, which is obviously way too big (there are only 35 corners in the calibration image I'm using).</p>\n\n<p>Stripped down tutorial code is below, though again I've isolated the problem to findChessboardCorners giving a seemingly nonsensical corner vector. The strange part is that there's no problem drawing the corners on the calibration image I'm using-- it appears as though the corners were calibrated perfectly. So what is the problem here? I really don't know why findChessboardCorners would be giving me such a large corner vector that I can't even add it to a list of vectors.</p>\n\n<pre><code>using namespace cv;\nusing namespace std;\n\nint main(int argc, char** argv){\n\nint numBoards = 1;\nint numCornersHor=7;\nint numCornersVer=5;\n\nint numSquares = numCornersHor * numCornersVer;\nSize board_sz = Size(numCornersHor, numCornersVer);\n\nvector&lt;vector&lt;Point3f&gt;&gt; object_points;\nvector&lt;vector&lt;Point2f&gt;&gt; image_points;   \n\nvector&lt;Point2f&gt; corners;\n\nint successes = 0;\n\nMat large_image;\nMat image;\nMat gray_image;\nlarge_image = imread(argv[1], IMREAD_COLOR);\nresize(large_image, image, Size(), .5, .5);\n\nvector&lt;Point3f&gt; obj;\nfor (int j = 0; j&lt;numSquares; j++)\n    obj.push_back(Point3f((j / numCornersHor)*29, (j%numCornersHor)*29, 0.0f));\n\nif (image.empty())\n        return(0);\nelse if (image.channels()&gt;1)\n    cvtColor(image, gray_image, CV_BGR2GRAY);\nelse gray_image = image;\n\nbool found = findChessboardCorners(image, board_sz, corners, CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FAST_CHECK | CV_CALIB_CB_NORMALIZE_IMAGE);\n\n\nif (found)\n{\n    cornerSubPix(gray_image, corners, Size(11, 11), Size(-1, -1), TermCriteria(CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 30, 0.1));\n\n    drawChessboardCorners(gray_image, board_sz, corners, found);\n\n}\n\nimshow(\"win1\", image);      \nimshow(\"win2\", gray_image);\n\nint key = waitKey(1);\nif (key == 27)\n    return 0;\n\nimage_points.push_back(corners);\n} \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1436994760, "post_id": 31441179, "comment_id": 50851714, "body": "Imagine <code>T</code> has the value of 11."}], "answers": [{"tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": false, "score": 1, "last_activity_date": 1436995026, "creation_date": 1436995026, "answer_id": 31441294, "question_id": 31441179, "link": "https://stackoverflow.com/questions/31441179/run-time-error-for-a-simple-code/31441294#31441294", "title": "Run-time error for a simple code", "body": "<pre><code>cin&gt;&gt;sol_arr[i-1];\n</code></pre>\n\n<p>can cause <em>buffer overflow</em> as you declared </p>\n\n<pre><code>int sol_arr[10];\n</code></pre>\n\n<p>and <code>i</code> can be <code>1</code> to <code>1000</code>.</p>\n\n<p>Create <code>sol_arr</code> such way so that it can contain at least <code>1000</code> value, e.g.</p>\n\n<pre><code>int sol_arr[1000];\n</code></pre>\n\n<p>but don't forget, C++ arrays are zero indexed. </p>\n"}], "owner": {"reputation": 11, "user_id": 5121168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6a97f3d2f13dcda3661adeb8c85472?s=128&d=identicon&r=PG&f=1", "display_name": "yeshwanth", "link": "https://stackoverflow.com/users/5121168/yeshwanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1436995026, "creation_date": 1436994655, "last_edit_date": 1436994987, "question_id": 31441179, "link": "https://stackoverflow.com/questions/31441179/run-time-error-for-a-simple-code", "title": "Run-time error for a simple code", "body": "<p>I am new to coding and this is a simple program I wrote to accept no of test cases and for each case display a text if it satisfies conditions or a -1 if it doesn't.However, I keep encountering run-time ever when I try to upload it in the CodeChef Website. Please do advise.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int T,sol_arr[10],i;\n\n      //  cout&lt;&lt;\"Enter the number of test cases\\n\";\n        cin&gt;&gt;T;\n\n    if(T&gt;=1||T&lt;=1000)\n    {\n        for(i=1;i&lt;=T;i++)\n        {\n           // cout&lt;&lt;\"\\nEnter value for test case number -\\t\"&lt;&lt;i&lt;&lt;\"\\n\";\n           cin&gt;&gt;sol_arr[i-1];\n        }\n\n        for(i=1;i&lt;=T;i++)\n        {\n            if(sol_arr[i-1]&gt;=-20 &amp;&amp; sol_arr[i-1]&lt;=20)\n                cout&lt;&lt;\"What an obedient Servant you are !\\n\";\n            else\n                cout&lt;&lt;\"-1\\n\";\n        }\n    }\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436994956, "post_id": 31441149, "comment_id": 50851824, "body": "I didn&#39;t think you had to free the sid (your line prior to the offender). According to the documentation you linked, those pointers refer to data held in the very SD you&#39;re already getting back. Short version: remove the <code>FreeSid</code> call."}, {"owner": {"reputation": 63413, "user_id": 193619, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/11e74c6cb64be4d24fdee076ddb374b0?s=128&d=identicon&r=PG", "display_name": "Nathan Osman", "link": "https://stackoverflow.com/users/193619/nathan-osman"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436995882, "post_id": 31441149, "comment_id": 50852253, "body": "@WhozCraig: aha! That did the trick. If you post that as an answer, I&#39;d be happy to accept it."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436996131, "post_id": 31441149, "comment_id": 50852348, "body": "Glad it helped. I only remembered because I was bit by the same thing a few years ago (Different SID, same result). Best of luck."}], "answers": [{"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 5, "last_activity_date": 1436996101, "creation_date": 1436996101, "answer_id": 31441558, "question_id": 31441149, "link": "https://stackoverflow.com/questions/31441149/why-is-this-call-to-localfree-causing-an-error/31441558#31441558", "title": "Why is this call to LocalFree() causing an error?", "body": "<p>The SID referenced by your <code>pSID</code> local var is referring to data already held within the security descriptor referenced by <code>pSD</code>. It \"owns\" that SID, and you own the descriptor reference. You only need to free the latter.</p>\n\n<p>Short version: Remove the <code>FreeSid(pSID)</code> call.</p>\n"}], "owner": {"reputation": 63413, "user_id": 193619, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/11e74c6cb64be4d24fdee076ddb374b0?s=128&d=identicon&r=PG", "display_name": "Nathan Osman", "link": "https://stackoverflow.com/users/193619/nathan-osman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "accepted_answer_id": 31441558, "answer_count": 1, "score": 3, "last_activity_date": 1436996101, "creation_date": 1436994545, "question_id": 31441149, "link": "https://stackoverflow.com/questions/31441149/why-is-this-call-to-localfree-causing-an-error", "title": "Why is this call to LocalFree() causing an error?", "body": "<p>I am invoking <a href=\"https://msdn.microsoft.com/en-ca/library/windows/desktop/aa446645%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>GetNamedSecurityInfo()</code></a> as follows:</p>\n\n<pre><code>PSID pSID = NULL;\nPSECURITY_DESCRIPTOR pSD = NULL;\n\n// Retrieve the owner SID for the file\nif(GetNamedSecurityInfo(TEXT(\"myfile.txt\"),\n                        SE_FILE_OBJECT,\n                        OWNER_SECURITY_INFORMATION,\n                        &amp;pSID,\n                        NULL, NULL, NULL,\n                        &amp;pSD) != ERROR_SUCCESS) {\n    /* error handling */\n}\n\nFreeSid(pSID);\nLocalFree(pSD);\n</code></pre>\n\n<p>However, when I run the application, it crashes. The debugger reports: <code>Critical error detected c0000374</code> and points to the <code>LocalFree()</code> line at the end of the snippet above.</p>\n\n<p>Why is this line causing a problem? According to the documentation for the <code>ppSecurityDescriptor</code> parameter:</p>\n\n<blockquote>\n  <p>\"A pointer to a variable that receives a pointer to the security descriptor of the object. When you have finished using the pointer, free the returned buffer by calling the LocalFree function.\"</p>\n</blockquote>\n\n<p>...which is exactly what I have done.</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "edited": false, "score": 0, "creation_date": 1436995016, "post_id": 31441190, "comment_id": 50851853, "body": "I didn&#39;t know the parsing syntax!"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "edited": false, "score": 0, "creation_date": 1436995107, "post_id": 31441190, "comment_id": 50851888, "body": "@styko It is not really <i>the</i> parsing syntax (there are also other ways to do this), but the stream iterators are often a good tool for parsing a stream without having to write much code."}, {"owner": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "edited": false, "score": 0, "creation_date": 1436996241, "post_id": 31441190, "comment_id": 50852395, "body": "I still have a compilation error: <code>no matching function for call to \u2018std::vector&lt;std::list&lt;int&gt; &gt;::emplace_back(std::istream_iterator&lt;int&gt;, &lt;brace-enclosed initializer list&gt;)\u2019</code>"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 3, "last_activity_date": 1436996404, "last_edit_date": 1436996404, "creation_date": 1436994701, "answer_id": 31441190, "question_id": 31441110, "link": "https://stackoverflow.com/questions/31441110/c-simplest-way-of-loading-irregular-data-from-file/31441190#31441190", "title": "C++ simplest way of loading &quot;irregular&quot; data from file", "body": "<p>Just read line by line and parse that into lists:</p>\n\n<pre><code>for (std::string line; std::getline(file, line);) {\n    std::istringstream str(line);\n    data.emplace_back(std::istream_iterator&lt;int&gt;(str), std::istream_iterator&lt;int&gt;{});\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1846, "user_id": 1601448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7d6abd2bfe7848e0693972db9f82c2e7?s=128&d=identicon&r=PG", "display_name": "Russell Greene", "link": "https://stackoverflow.com/users/1601448/russell-greene"}, "is_accepted": false, "score": 0, "last_activity_date": 1436994947, "creation_date": 1436994947, "answer_id": 31441281, "question_id": 31441110, "link": "https://stackoverflow.com/questions/31441110/c-simplest-way-of-loading-irregular-data-from-file/31441281#31441281", "title": "C++ simplest way of loading &quot;irregular&quot; data from file", "body": "<p>Here's an idea: use getline:</p>\n\n<pre><code>std::string line\nstd::getline(file, line);\n</code></pre>\n\n<p>Then you could put this into a stringstream </p>\n\n<pre><code>std::stringstream s;\ns.str(line);\n</code></pre>\n\n<p>Then insert them into the list</p>\n\n<pre><code>std::list&lt;int&gt;&amp; list = data[lineNumber];\nint num = 0;\nwhile (s &gt;&gt; num)\n    list.emplace_back(num);\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 31441190, "answer_count": 2, "score": 0, "last_activity_date": 1436998274, "creation_date": 1436994401, "last_edit_date": 1436998274, "question_id": 31441110, "link": "https://stackoverflow.com/questions/31441110/c-simplest-way-of-loading-irregular-data-from-file", "title": "C++ simplest way of loading &quot;irregular&quot; data from file", "body": "<p>I have a data file (representing an adjacency lists) that I would like to load as a <code>std::vector&lt; std::list&lt;int&gt; &gt;</code>.</p>\n\n<pre><code>1 2 4\n0 2\n0 1\n\n0\n</code></pre>\n\n<p>What is the cleanest way to do that in C++ / C++11?</p>\n\n<hr>\n\n<p>Here is a crappy try, that doesn't work for blank lines\u2026</p>\n\n<pre><code>vector&lt; list&lt;int&gt; &gt; data;\nifstream file(\"data.dat\");\nchar foo;\n\nwhile(file &gt;&gt; foo){\n    file.unget();\n    list&lt;int&gt; mylist;\n    while( file.get() != '\\n'){\n        file.unget();\n        int n;\n        file &gt;&gt; n;\n        mylist.push_back(n);\n        cout &lt;&lt; n;\n    }\n    data.push_back(mylist);\n}\n\nfile.close();\n</code></pre>\n"}, {"tags": ["c++", "makefile", "g++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1436994986, "post_id": 31441097, "comment_id": 50851838, "body": "Have you tried running <a href=\"http://linux.die.net/man/1/g++\" rel=\"nofollow noreferrer\"><code>man g++</code></a>??"}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1436995181, "last_edit_date": 1592644375, "creation_date": 1436995181, "answer_id": 31441338, "question_id": 31441097, "link": "https://stackoverflow.com/questions/31441097/commas-after-g-arguments/31441338#31441338", "title": "Commas after g++ arguments", "body": "<p>From the <a href=\"http://linux.die.net/man/1/g++\" rel=\"nofollow noreferrer\">g++ man page</a>,</p>\n<blockquote>\n<p><strong>-Wl,option</strong></p>\n<p>Pass option as an option to the linker. If option contains commas, it is split into multiple options at the commas. You can use this syntax to pass an argument to the option. For example, -Wl,-Map,output.map passes -Map output.map to the linker. When using the GNU linker, you can also get the same effect with -Wl,-Map=output.map.</p>\n</blockquote>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "closed_date": 1436995565, "answer_count": 1, "score": 1, "last_activity_date": 1436995181, "creation_date": 1436994381, "question_id": 31441097, "link": "https://stackoverflow.com/questions/31441097/commas-after-g-arguments", "closed_reason": "Duplicate", "title": "Commas after g++ arguments", "body": "<p>When using g++, I have been given the following commands to run:</p>\n\n<pre><code>g++ main.cpp libShared.so -Wl,-rpath, -lboost_system -lboost_filesystem\n</code></pre>\n\n<p>Now, <code>libShared.so</code> is in the same directory as my makefile, and I have been told that the <code>-Wl</code> and <code>-rpath</code> commands are used to tell my executable to look in the same directory when searching for this shared library.</p>\n\n<p>My question is: What is the purpose of the commas after <code>-Wl</code> and <code>-rpath</code>?</p>\n"}, {"tags": ["c++", "sockets", "udp", "winsock"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 1253831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb307ef14bed1c9e6655387458aa6de?s=128&d=identicon&r=PG", "display_name": "Nick Blakely", "link": "https://stackoverflow.com/users/1253831/nick-blakely"}, "edited": false, "score": 0, "creation_date": 1437010087, "post_id": 31441569, "comment_id": 50856821, "body": "Thanks. If I&#39;m understanding this correctly, I should have multiple threads (likely based on the number of processors) calling GetQueuedCompletionStatus in a loop? Would these threads also call WSARecvFrom, or would that be handled by a different worker procedure?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437018030, "post_id": 31441569, "comment_id": 50858772, "body": "Yes, use a pool of threads that loop on GetQueuedCompletionStatus(). When you start your server, call WSARecvFrom() to get things rolling. When any of the worker threads receives a completed packet, process the data as needed and then call WSARecvFrom() to queue the next packet."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 33, "user_id": 1253831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb307ef14bed1c9e6655387458aa6de?s=128&d=identicon&r=PG", "display_name": "Nick Blakely", "link": "https://stackoverflow.com/users/1253831/nick-blakely"}, "edited": false, "score": 0, "creation_date": 1437030746, "post_id": 31441569, "comment_id": 50863495, "body": "@NickBlakely well if your case is trivial you may as well be good off with the example you have. What I&#39;m saying is, that the common approach is to have some kind of class/struct that represents a single connection, and use that either in the overlapped structure or as the completion key (depends on the I/O flow) so then you can call lets say a function <code>OnBytesWritten</code>/<code>OnBytesRead</code> for that object when <code>GetQueuedCompletionStatus</code> returns. These methods then will either continue reading/writing or do smth else. That way you have the logic seperate from the mechanism that does the I/O."}, {"owner": {"reputation": 33, "user_id": 1253831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb307ef14bed1c9e6655387458aa6de?s=128&d=identicon&r=PG", "display_name": "Nick Blakely", "link": "https://stackoverflow.com/users/1253831/nick-blakely"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1437055737, "post_id": 31441569, "comment_id": 50880173, "body": "Thanks Rudolfs Bundulis and @RemyLebeau. Working perfectly now with your help."}], "tags": [], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "is_accepted": true, "score": 1, "last_activity_date": 1436996136, "creation_date": 1436996136, "answer_id": 31441569, "question_id": 31440978, "link": "https://stackoverflow.com/questions/31440978/getqueuedcompletionstatus-blocking-indefinitely-on-udp-socket/31441569#31441569", "title": "GetQueuedCompletionStatus blocking indefinitely on UDP socket", "body": "<p>You need to check the result code from <code>WSARecvFrom</code> and call <code>GetQueuedCompletionStatus</code> only if the return code is <code>ERROR_IO_PENDING</code>- if it is not either the operation completed without blocking and you have the data, or there was an error, but in any of these cases it was not posted to the I/O completion port and thus it will never be picked up by <code>GetQueuedCompletionStatus</code>and the call will block. </p>\n\n<p>And you should not do this in one thread. The common approach is to have a thread that only polls the I/O completion port and calls some callbacks on context objects to notify about incoming/outgoing data, and the sending receiving calls are called wherever needed.</p>\n"}], "owner": {"reputation": 33, "user_id": 1253831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb307ef14bed1c9e6655387458aa6de?s=128&d=identicon&r=PG", "display_name": "Nick Blakely", "link": "https://stackoverflow.com/users/1253831/nick-blakely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 1, "accepted_answer_id": 31441569, "answer_count": 1, "score": 0, "last_activity_date": 1436996136, "creation_date": 1436993973, "last_edit_date": 1495542586, "question_id": 31440978, "link": "https://stackoverflow.com/questions/31440978/getqueuedcompletionstatus-blocking-indefinitely-on-udp-socket", "title": "GetQueuedCompletionStatus blocking indefinitely on UDP socket", "body": "<p>I'm attempting to create a UDP client/server class that relies on IO completion ports using Winsock, but I haven't been able to get the GetQueuedCompletionStatus() function to return when new data is available. This is likely due to some misunderstanding on my part, but examples/documentation on IOCP with UDP instead of TCP are few and far between.</p>\n\n<p>Here's the relevant bits of my server class, with error checking removed for brevity:</p>\n\n<pre><code>Server::Server()\n{\n    m_iocp = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);\n}\n\nvoid Server::StartReceiving()\n{\n    StopReceiving();\n\n    m_iocp = CreateIoCompletionPort((HANDLE)m_receiveSocket, m_iocp, (DWORD)this, 0);\n\n    //WSAEVENT event = WSACreateEvent();\n    //WSAEventSelect(m_receiveSocket, event, FD_ACCEPT | FD_CLOSE);\n\n    // Start up worker thread for receiving data\n    m_receiveThread.reset(new std::thread(&amp;Server::ReceiveWorkerThread, this));\n}\n\nvoid Server::Host(const std::string&amp; port)\n{\n    if (!m_initialized)\n        Initialize();\n\n    addrinfo hints = {};\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_DGRAM;\n    hints.ai_protocol = IPPROTO_UDP;\n    hints.ai_flags = AI_PASSIVE;\n\n    // Resolve the server address and port\n    const char* portStr = port.empty() ? kDefaultPort.c_str() : port.c_str();\n    int result;\n    AddressInfo addressInfo = AddressInfo::Create(nullptr, portStr, &amp;hints, result); // Calls getaddrinfo()\n\n    m_receiveSocket = WSASocket(addressInfo.GetFamily(), addressInfo.GetSocketType(), addressInfo.GetProtocol(), nullptr, 0, WSA_FLAG_OVERLAPPED);\n\n    // Bind receiving socket\n    result = bind(m_receiveSocket, addressInfo.GetSocketAddress(), addressInfo.GetAddressLength());\n\n    StartReceiving();\n}\n\nvoid Server::ReceiveWorkerThread()\n{\n    SOCKADDR_IN senderAddr;\n    int senderAddrSize = sizeof(senderAddr);\n    DWORD bytesTransferred = 0;\n    OVERLAPPED* pOverlapped = nullptr;\n    WSABUF wsaBuf = { (ULONG)m_buffer.GetWriteBufferSize(), m_buffer.GetWriteBufferPointer() };\n\n    DWORD flags = 0;\n    DWORD bytesReceived;\n    int result = WSARecvFrom(m_receiveSocket, &amp;wsaBuf, 1, &amp;bytesReceived, &amp;flags, (sockaddr*)&amp;senderAddr, &amp;senderAddrSize, pOverlapped, nullptr);\n\n    // Process packets until signaled to exit\n    while (true)\n    {\n        DWORD context = 0;\n        BOOL success = GetQueuedCompletionStatus(\n            m_iocp,\n            &amp;bytesTransferred,\n            &amp;context,\n            &amp;pOverlapped,\n            INFINITE);\n\n        wsaBuf.len = (ULONG)m_buffer.GetWriteBufferSize();\n        wsaBuf.buf = m_buffer.GetWriteBufferPointer();\n        flags = 0;\n\n        result = WSARecvFrom(m_receiveSocket, &amp;wsaBuf, 1, &amp;bytesReceived, &amp;flags, (sockaddr*)&amp;senderAddr, &amp;senderAddrSize, pOverlapped, nullptr);\n\n        // Code to process packet would go here\n\n        if (m_exiting.load() == true)\n            break; // Kill worker thread\n    }\n}\n</code></pre>\n\n<p>When my client sends data to the server, the first WSARecvFrom picks up the data correctly but the server blocks on the call to GetQueuedCompletionStatus and never returns, even if more datagrams are sent. I've also tried putting the socket into non-blocking mode with WSAEventSelect (code for that is commented above), but it made no difference.</p>\n\n<p>From reading <a href=\"https://stackoverflow.com/questions/7813549/getqueuedcompletionstatus-blocks-forever\">this</a> similar post it sounds like there needs to be at least one read on the socket to trigger IOCP, which is why I added the first call to WSARecvFrom outside the main loop. Hopefully I'm correct in assuming that the client code is irrelevant if the server receives the data without IOCP, so I haven't posted it.</p>\n\n<p>I'm sure I'm doing something wrong, but I'm just not seeing it.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1436994350, "post_id": 31440940, "comment_id": 50851494, "body": "How do you expect anyone to provide you a solution when you haven&#39;t provided us with <i>any</i> tangible information or relevant code?"}, {"owner": {"reputation": 39, "user_id": 3251710, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hPXGh.png?s=128&g=1", "display_name": "Diame", "link": "https://stackoverflow.com/users/3251710/diame"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436995122, "post_id": 31440940, "comment_id": 50851898, "body": "@CaptainObvlious sorry about that, I just modified my question."}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 3, "last_activity_date": 1436997718, "last_edit_date": 1436997718, "creation_date": 1436995841, "answer_id": 31441497, "question_id": 31440940, "link": "https://stackoverflow.com/questions/31440940/why-i-can-not-get-zoom-in-and-out-effect-immediately-but-have-to-resize-window-f/31441497#31441497", "title": "Why I can not get zoom in and out effect immediately but have to resize window first", "body": "<p>Right now you can change <code>zoomFactor</code> all you want but it won't get applied to the OpenGL state (via the code in <code>resize()</code>) until you resize the window.</p>\n\n<p>The <code>glutPostRedisplay()</code> at the end of <code>glutMouseWheel()</code> <strong><em>will not</em></strong> cause the <code>glutReshapeFunc()</code> callback to run.  It only schedules a <code>glutDisplayFunc()</code> call.</p>\n\n<p>Move everything except the <code>glViewport()</code> call from <code>reshape()</code> to your <code>glutDisplayFunc()</code> callback:</p>\n\n<pre><code>void reshape(int w, int h)\n{\n    glViewport(0, 0, (GLsizei)w, (GLsizei)h);\n}\n\nvoid display()\n{\n    // clear framebuffer\n    ...\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(-0.001*zoomFactor, 0.001*zoomFactor, -0.001*zoomFactor, 0.001*zoomFactor, -100, 100);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    // draw stuff\n    ...\n\n    glutSwapBuffers();\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3251710, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/hPXGh.png?s=128&g=1", "display_name": "Diame", "link": "https://stackoverflow.com/users/3251710/diame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 31441497, "answer_count": 1, "score": -1, "last_activity_date": 1436997718, "creation_date": 1436993868, "last_edit_date": 1436995026, "question_id": 31440940, "link": "https://stackoverflow.com/questions/31440940/why-i-can-not-get-zoom-in-and-out-effect-immediately-but-have-to-resize-window-f", "title": "Why I can not get zoom in and out effect immediately but have to resize window first", "body": "<p>I am new to OpenGL. I encounter a problem. Why I can not get zoom in and out effect in OpenGL immediately but have to resize window first and then I can see the image plotted become smaller or larger.</p>\n\n<p>I am so sorry that I do not which part of program should I provide to clarify this problem. </p>\n\n<p>I think the problem may be caused by mouse function?</p>\n\n<pre><code>void glutMouseWheel(int wheel_number, int direction, int x, int y)\n{\nif (direction == 1)\n    zoomFactor = 0.5*zoomFactor;\n else\n     zoomFactor = 2* zoomFactor;\n     glutPostRedisplay();\n}\n\n\n\nvoid reshape(int w, int h)\n{\n\nglViewport(0, 0, (GLsizei)w, (GLsizei)h);\nglMatrixMode(GL_PROJECTION);\nglLoadIdentity();\nglOrtho(-0.001*zoomFactor, 0.001*zoomFactor, -0.001*zoomFactor, 0.001*zoomFactor, -100, 100);\nglMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\n }\n</code></pre>\n\n<p>As you see I define a double zoomFactor to adjust the orthogonal volume to zoom the image. It should be fine, but I do not know why I still encounter this problem.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1458219435, "post_id": 31440790, "comment_id": 59768997, "body": "There are names that are not identifiers."}], "answers": [{"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 3, "last_activity_date": 1458225567, "last_edit_date": 1458225567, "creation_date": 1458217497, "answer_id": 36060509, "question_id": 31440790, "link": "https://stackoverflow.com/questions/31440790/what-exactly-is-an-id-expression/36060509#36060509", "title": "What exactly is an id-expression?", "body": "<p>You're misinterpreting <a href=\"http://eel.is/c++draft/expr.prim.general#8\" rel=\"nofollow\">[expr.prim.general]/8</a>:</p>\n\n<blockquote>\n  <p>An <em>identifier</em> is an <em>id-expression</em> provided it has been suitably declared (Clause 7).</p>\n</blockquote>\n\n<p>The phrase's intention is to disallow the usage of undeclared identifiers in expressions. I.e. this paragraph talks about <strong><em>id-expression</em>s occurring as <em>primary-expression</em>s</strong>, not <em>id-expression</em>s occurring in declarators. I agree that the phrase is misleading and should be fixed. I filed a core issue.</p>\n\n<blockquote>\n  <p>So why not just call it a <em>name-expression</em> instead?</p>\n</blockquote>\n\n<p>Historical reasons; the subtle distinction between identifiers and names was made after the very fundamental grammatical constructs (<em>id-expression</em>, <em>unqualified-id</em>, etc.) were named, and from there onwards, renaming those wasn't an option. </p>\n"}], "owner": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3063, "favorite_count": 3, "answer_count": 1, "score": 17, "last_activity_date": 1458225567, "creation_date": 1436993388, "last_edit_date": 1436993564, "question_id": 31440790, "link": "https://stackoverflow.com/questions/31440790/what-exactly-is-an-id-expression", "title": "What exactly is an id-expression?", "body": "<p>I'm having a problem clearly understanding exactly what an <code>id-expression</code> is. I'll start off by following what I found in the most recent working draft of the C++ standard starting off with:</p>\n\n<p><img src=\"https://i.stack.imgur.com/FDJZw.jpg\" alt=\"enter image description here\"></p>\n\n<p>Venturing to the definition of an <code>identifier</code>:</p>\n\n<blockquote>\n  <p>An identifier is an arbitrarily long sequence of letters and digits.</p>\n</blockquote>\n\n<p>So it seems like any arbitrary long sequence of letters and digits can be an <code>id-expression</code>, but wait:</p>\n\n<p><img src=\"https://i.stack.imgur.com/crTxW.jpg\" alt=\"enter image description here\"></p>\n\n<p>So the <code>identifier</code> must be declared first in order for it to be an <code>id-expression</code>? Well lets head over to clause 7:</p>\n\n<p><img src=\"https://i.stack.imgur.com/pBQFx.jpg\" alt=\"enter image description here\"></p>\n\n<p>Continuing...</p>\n\n<p><img src=\"https://i.stack.imgur.com/5SpbN.jpg\" alt=\"enter image description here\"></p>\n\n<p>Continuing again...</p>\n\n<p><img src=\"https://i.stack.imgur.com/UJQd5.jpg\" alt=\"enter image description here\"></p>\n\n<p>We arrive here:</p>\n\n<p><img src=\"https://i.stack.imgur.com/oRp79.jpg\" alt=\"enter image description here\"></p>\n\n<p>I interpret this to mean an <code>id-expression</code> requires an <code>identifier</code> to be declared which requires an <code>id-expression</code>. This seems like a circular definition. Can someone tell me where I went wrong?</p>\n\n<p>Anyway, my interpretation is that the identifier must be declared first in order for it to be considered an <code>id-expression</code>, but isn't that really just a <code>name</code>? The standard states that:</p>\n\n<blockquote>\n  <p>Every name that denotes an entity is introduced by a declaration.</p>\n</blockquote>\n\n<p>So why not just call it a <code>name-expression</code> instead?</p>\n"}, {"tags": ["c++", "makefile", "manpage"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1436993808, "post_id": 31440663, "comment_id": 50851208, "body": "short answer: use cmake"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436993924, "post_id": 31440663, "comment_id": 50851270, "body": "It says &quot;all-am&quot;, not &quot;all-em&quot;. Perhaps you&#39;ve been searching for the wrong phrase."}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436995320, "post_id": 31440663, "comment_id": 50851986, "body": "@LightnessRacesinOrbit Sorry, it was typo in title. Thanks for that."}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1436995372, "post_id": 31440663, "comment_id": 50852012, "body": "@Slava I wanted to use cmake but I must use automake :/"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1436996725, "post_id": 31440663, "comment_id": 50852617, "body": "You have a <code>my_program.1</code> file in your sources? In what directory?"}, {"owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "edited": false, "score": 0, "creation_date": 1437001605, "post_id": 31440663, "comment_id": 50854488, "body": "I don&#39;t have it in directory. It&#39;s in root folder of my project with al source and header files."}], "owner": {"reputation": 1195, "user_id": 1413903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ZUsJ.jpg?s=128&g=1", "display_name": "golobitch", "link": "https://stackoverflow.com/users/1413903/golobitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2352, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1436995184, "creation_date": 1436992974, "last_edit_date": 1436995184, "question_id": 31440663, "link": "https://stackoverflow.com/questions/31440663/no-rule-to-make-target-needed-by-all-am", "title": "No rule to make target needed by all-am", "body": "<p>I wrote a program in C++ and I'm using autoconf and automake. Also, I've made man page (<code>my_program.1</code>) in the same folder that has all source files, header files and so on.\nIn my <code>Makefile.am</code> I have this line</p>\n\n<pre><code>man1_MANS = my_program.1\n</code></pre>\n\n<p>When I say <code>./configure</code> it's all ok, but when I run <code>make</code> I get this error:</p>\n\n<pre><code>make: *** No rule to make target `my_program.1`, needed by `all-am`.  Stop.\n</code></pre>\n\n<p>Any idea how to fix this?</p>\n"}, {"tags": ["c++", "templates", "c++11", "template-argument-deduction"], "comments": [{"owner": {"reputation": 2014, "user_id": 1738399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83340c7acfd1a5045445e184b3931398?s=128&d=identicon&r=PG", "display_name": "Jay Miller", "link": "https://stackoverflow.com/users/1738399/jay-miller"}, "edited": false, "score": 0, "creation_date": 1436994966, "post_id": 31440593, "comment_id": 50851828, "body": "I see a failure even if I supply arguments: <a href=\"http://coliru.stacked-crooked.com/a/7d2e89a69f8d738d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/7d2e89a69f8d738d</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2014, "user_id": 1738399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83340c7acfd1a5045445e184b3931398?s=128&d=identicon&r=PG", "display_name": "Jay Miller", "link": "https://stackoverflow.com/users/1738399/jay-miller"}, "edited": false, "score": 1, "creation_date": 1436995539, "post_id": 31440593, "comment_id": 50852089, "body": "@JayMiller Right, same idea. Although if we rewrote <code>call_with</code> to always take a single argument (<code>template &lt;typename R, typename A&gt; R call_with(std::function&lt;R(A)&gt;, A );</code>) then explicitly providing template arguments works fine (<code>call_with&lt;void, int&gt;([](int ){}, 42);</code>). It&#39;s just the parameter pack case that&#39;s stubborn."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1436998663, "post_id": 31440593, "comment_id": 50853439, "body": "I should not have deleted my earlier comment, which allowed @Barry to clarify that this is not a question about <i>how to get around this issue</i> and the question being asked is exactly as written.  <i>&quot;Is there a way to explicitly specify...&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1437060272, "post_id": 31442079, "comment_id": 50883582, "body": "Clever, and definitely lets me avoid deduction (+1). Although requires mucking with the signature, which is unfortunate."}, {"owner": {"reputation": 1958, "user_id": 1150249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22ba9a5573439e1f850203c465467c3?s=128&d=identicon&r=PG", "display_name": "dhavenith", "link": "https://stackoverflow.com/users/1150249/dhavenith"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437086125, "post_id": 31442079, "comment_id": 50897550, "body": "Yes, I&#39;m afraid that with the given signature, the compiler will always try to deduce template arguments--and fail unless the first argument is of type std::function&lt; some args..&gt;."}], "tags": [], "owner": {"reputation": 1958, "user_id": 1150249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22ba9a5573439e1f850203c465467c3?s=128&d=identicon&r=PG", "display_name": "dhavenith", "link": "https://stackoverflow.com/users/1150249/dhavenith"}, "is_accepted": false, "score": 5, "last_activity_date": 1437057030, "last_edit_date": 1437057030, "creation_date": 1436998289, "answer_id": 31442079, "question_id": 31440593, "link": "https://stackoverflow.com/questions/31440593/explicit-call-to-variadic-function-template-with-empty-parameter-pack/31442079#31442079", "title": "explicit call to variadic function template with empty parameter pack", "body": "<p>The short answer to your--edited--question is: if you cannot change the declaration of <code>call_with()</code>, then either use the type casts demonstrated by @CoffeeandCode, or use the technique described below to create a wrapper for <code>call_with()</code>.</p>\n\n<p>The problem is in the fact that the compiler is trying to deduce the template arguments from the first function argument. You can prevent this if you write your code like <a href=\"http://coliru.stacked-crooked.com/a/fb32036ce05848a5\" rel=\"nofollow\">this</a>:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\n// identity is a useful meta-function to have around.\n// There is no std::identity, alas.\ntemplate&lt; typename T&gt;\nstruct identity\n{\n    using type = T;\n};\n\ntemplate &lt;typename R, typename... Args&gt;\nR call_with( typename identity&lt;std::function&lt;R(Args...)&gt;&gt;::type f,\n            Args... args)\n{\n    return f(args...);\n}\n\nint main()\n{\n    call_with&lt;void&gt;([](int){ std::cout &lt;&lt; \"called\" &lt;&lt; std::endl; }, 2);\n}\n</code></pre>\n\n<p>Using a template meta-function to \"generate\" the std::function type means that the compiler cannot even try to deduce the function type from the first argument and it will only use the other arguments. </p>\n\n<p>You would still need to explicitly provide the return type of course, but for the other arguments you can now choose whether to explicitly specify them or leave it up to the compiler to deduce them from the arguments given.</p>\n\n<p>If you really want to enforce that all template arguments are provided and not deduced, you can also wrap the argument pack in an invocation of <code>identity</code> this way:</p>\n\n<pre><code>template &lt;typename R, typename... Args&gt;\nR call_with( typename identity&lt;std::function&lt;R(Args...)&gt;&gt;::type f,\n            typename identity&lt;Args&gt;::type... args)\n</code></pre>\n\n<p>In summary, if you want to prevent the compiler from deducing function template argument types that also appear as function parameters, wrap them in a meta function such as <code>identity</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437043126, "post_id": 31444934, "comment_id": 50871222, "body": "While all true, this does not at all answer the question. The question is strictly about explicitly providing all types to <code>call_with</code>, not about how to write that function correctly."}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437043229, "post_id": 31444934, "comment_id": 50871286, "body": "@Barry I gave a way to specify your call to <code>call_with</code> in the first part of my answer. Using a <code>static_cast</code> is just telling the compiler what to put for those template arguments."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437043297, "post_id": 31444934, "comment_id": 50871333, "body": "No it&#39;s not. It&#39;s changing the argument types so that template deduction can succeed. I am looking for a solution that does not involve template deduction <i>at all</i>."}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437043379, "post_id": 31444934, "comment_id": 50871391, "body": "How is it changing a <code>std::function</code> from a <code>std::function</code>? You explicitly write <code>std::function</code> in your signature, this is simply explicitly casting the lambda."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437043487, "post_id": 31444934, "comment_id": 50871475, "body": "Of course you can. <code>template &lt;typename T&gt; void foo(T ) { }; foo&lt;char&gt;(42);</code> calls <code>foo&lt;char&gt;</code> and doesn&#39;t do template deduction (which would have instantiated <code>foo&lt;int&gt;</code>)"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1437043541, "post_id": 31444934, "comment_id": 50871511, "body": "@Barry you&#39;re absolutely right, that was just me being too quick on the trigger haha."}], "tags": [], "owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1437018524, "last_edit_date": 1437018524, "creation_date": 1437017615, "answer_id": 31444934, "question_id": 31440593, "link": "https://stackoverflow.com/questions/31440593/explicit-call-to-variadic-function-template-with-empty-parameter-pack/31444934#31444934", "title": "explicit call to variadic function template with empty parameter pack", "body": "<p>You could specify the function type beforehand, like this:</p>\n\n<pre><code>int main(){\n    std::function&lt;void()&gt; f = []{};\n    call_with(f);\n}\n</code></pre>\n\n<p>or, in a little more messy but more compact way:</p>\n\n<pre><code>int main(){\n    call_with(static_cast&lt;std::function&lt;void()&gt;&gt;([]{}));\n}\n</code></pre>\n\n<p>This is because the compiler doesn't know what return type and arguments to deduce for your template parameters before you ask it to implicitly convert a lambda, which is an unspecified function object defined by the compiler, to a <code>std::function</code> with those template parameters.</p>\n\n<p>Really, you should just change your function warpper to be more generic:</p>\n\n<pre><code>template&lt;typename Functor, typename ... Args&gt;\nauto wrapper(Functor &amp;&amp;f, Args &amp;&amp;... args) -&gt; decltype(f(std::forward&lt;Args&gt;(args)...)){\n    return f(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>This should work for any function or functor type. It's also a really good example of the use of trailing return types.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a09ffcf9979f7883\" rel=\"nofollow\">Here's a live example</a></p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 2, "answer_count": 2, "score": 10, "last_activity_date": 1437057030, "creation_date": 1436992739, "last_edit_date": 1437043337, "question_id": 31440593, "link": "https://stackoverflow.com/questions/31440593/explicit-call-to-variadic-function-template-with-empty-parameter-pack", "title": "explicit call to variadic function template with empty parameter pack", "body": "<p>Consider this simple (bad) function template for which lots of variations exist on this site:</p>\n\n<pre><code>template &lt;typename R, typename... Args&gt;\nR call_with(std::function&lt;R(Args...)&gt; f,\n            Args... args)\n{\n    return f(args...);\n}\n</code></pre>\n\n<p>And two attempts at calling it:</p>\n\n<pre><code>call_with([]{});        // (a)\ncall_with&lt;void&gt;([]{});  // (b)\n</code></pre>\n\n<p>I cannot call <code>(a)</code> because a lambda is not a <code>std::function&lt;R(Args...)&gt;</code> so template deduction fails. Straightforward. </p>\n\n<p>However, <code>(b)</code> also fails. I suspect this is because the compiler cannot determine that I mean to provide <em>all</em> the type arguments and reasons that I am simply providing <code>R</code> - so it is trying (and failing) to deduce <code>Args...</code> for the same reason that the initial call failed.</p>\n\n<p>Is there a way to explicitly specify that I am providing <strong>all</strong> the template arguments? To clarify, I am interested <strong>only</strong> in how to explicitly provide the template arguments so that there is no template deduction - I am not looking for the correct way to write <code>call_with</code> or for a way to make template deduction succeed when called with a lambda. </p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436992738, "post_id": 31440563, "comment_id": 50850581, "body": "Make sure the value in <code>hInstance</code> refers to the correct module."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1436992810, "post_id": 31440563, "comment_id": 50850618, "body": "You have to add the RC file to the project. The header file merely says that resources exist. You also need to add the resources."}, {"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "edited": false, "score": 0, "creation_date": 1436993070, "post_id": 31440563, "comment_id": 50850778, "body": "The dialog func (4th parameter to CreateDialog) must be a static function. Are you trying to use a non-static member function?"}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436994301, "post_id": 31440563, "comment_id": 50851465, "body": "thank you for all those responses: The RC file is included in the project and solution. To ScottMcP: the DXCore::statusWindProc is declared like so:  static BOOL CALLBACK statusWindProc( ... ) and it captures the application pointer, sending it to a class pointer running the application.  @Captain Obvlious: Please tell me what you mean. Of this I know nothing. is hInstance not supposed to be the application instance handle? it is forwarded all the way from WinMain."}], "answers": [{"comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1436995062, "post_id": 31441239, "comment_id": 50851869, "body": "Better than passing <code>NULL</code> is to pass the instance handle of the executable. It is passed to your <code>WinMain</code> function. Passing <code>NULL</code> means that this code can never be moved into a DLL."}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1436996663, "post_id": 31441239, "comment_id": 50852597, "body": "I thought so too - but this does not work - unfortunately. The createDialog function fails if I try to.."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1436997505, "post_id": 31441239, "comment_id": 50852949, "body": "Then something else is wrong. What is the value of <code>hInstance</code> when your <code>WinMain</code> receives it? What is the value of <code>hInstance</code> when you call <code>CreateDialog</code>? The two should be equal. If not, then something got lost in the chain of custody."}, {"owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1437000426, "post_id": 31441239, "comment_id": 50854078, "body": "I Just checked. They are both 0x7efde000 every time I run the application."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1437004976, "post_id": 31441239, "comment_id": 50855564, "body": "<code>0x7efde000</code> doesn&#39;t look right. Maybe you declared <code>WinMain</code> incorrectly. What does <code>GetModuleHandle(NULL)</code> return?"}], "tags": [], "owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "is_accepted": false, "score": 0, "last_activity_date": 1436994840, "creation_date": 1436994840, "answer_id": 31441239, "question_id": 31440563, "link": "https://stackoverflow.com/questions/31440563/winapi-error-1812/31441239#31441239", "title": "Winapi error 1812", "body": "<p>The solution was inspired by @Captain Obvlious. Instead of hInstance in the first parameter of CreateDialog, I passed NULL and the function succeeded - the window showed like supposed to. </p>\n\n<pre><code>m_StatusHwnd = CreateDialog( NULL,\n                             MAKEINTRESOURCE( IDD_STATUSWND ),\n                             0,\n                             DXCore::statusWindProc );\n</code></pre>\n\n<p>from msdn.microsoft.com: \"hInstance: A handle to the module which contains the dialog box template. If this parameter is NULL, then the current executable is used.\"</p>\n"}], "owner": {"reputation": 39, "user_id": 3224205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jCIUQ.jpg?s=128&g=1", "display_name": "Silverback", "link": "https://stackoverflow.com/users/3224205/silverback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436994840, "creation_date": 1436992612, "last_edit_date": 1436992669, "question_id": 31440563, "link": "https://stackoverflow.com/questions/31440563/winapi-error-1812", "title": "Winapi error 1812", "body": "<p>I am trying to create a modeless dialog box, but the CreateDialog function fails with an error <strong>0x714</strong> or <strong>1812</strong> base10. </p>\n\n<pre><code>m_StatusHwnd = CreateDialog( hInstance,\n                            MAKEINTRESOURCE( IDD_STATUSWND ),\n                            0,\n                            DXCore::statusWindProc );\n\n// Check:\nif ( m_StatusHwnd == NULL )\n{\n    string s = std::to_string( GetLastError( ) );\n    MessageBox( 0, s.c_str( ), \"Status Window init FAILED\", MB_OK );\n    return false;\n}\n</code></pre>\n\n<p>I created the resource in VS2013. I made sure to include the resource header file. But the error code implies that the resource is not found or compiled : I found this on microsofts developer site :</p>\n\n<pre><code>ERROR_RESOURCE_DATA_NOT_FOUND \n1812 (0x714)\nThe specified image file did not contain a resource section.\n</code></pre>\n\n<p>on further research I discovered that it might be required to create a modeless class for this to work, but I ca't find any tutorials or descriptions of how.</p>\n\n<p>Can you please point me in a direction?</p>\n"}, {"tags": ["c++", "qt", "qt-creator", "qt-designer"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437000747, "post_id": 31440487, "comment_id": 50854184, "body": "Have a look at QtDocs and related examples: <a href=\"http://doc.qt.io/qt-5/qtableview.html\" rel=\"nofollow noreferrer\">QTableView</a> and <a href=\"http://doc.qt.io/qt-5/qtablewidget.html\" rel=\"nofollow noreferrer\">QTableWidget</a>"}, {"owner": {"reputation": 95, "user_id": 3760436, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5455f5dc55e47e955b3bdf74468016e1?s=128&d=identicon&r=PG&f=1", "display_name": "mama23n", "link": "https://stackoverflow.com/users/3760436/mama23n"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437025563, "post_id": 31440487, "comment_id": 50861006, "body": "I saw that before. they don&#39;t tell any thing about Qt creator and design mood and only tell about codes.@Miki"}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 3760436, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5455f5dc55e47e955b3bdf74468016e1?s=128&d=identicon&r=PG&f=1", "display_name": "mama23n", "link": "https://stackoverflow.com/users/3760436/mama23n"}, "is_accepted": true, "score": 0, "last_activity_date": 1437149065, "creation_date": 1437149065, "answer_id": 31480049, "question_id": 31440487, "link": "https://stackoverflow.com/questions/31440487/add-only-readable-row-to-table-view-in-qt-creator/31480049#31480049", "title": "add only readable row to Table View in Qt creator", "body": "<p>I could not relate the design mode to my <code>.h</code> and <code>.cpp</code> source codes and I found the answer.</p>\n\n<p>we need to use <code>ui-&gt;</code> before any QWidget(like Label and QTableWidget) name that we make it in design mode and we want to work with it in our source files.</p>\n\n<p>an example:</p>\n\n<pre><code>ui-&gt;label-&gt;setFixedWidth(50);\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 3760436, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5455f5dc55e47e955b3bdf74468016e1?s=128&d=identicon&r=PG&f=1", "display_name": "mama23n", "link": "https://stackoverflow.com/users/3760436/mama23n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 31480049, "answer_count": 1, "score": -2, "last_activity_date": 1437149065, "creation_date": 1436992344, "question_id": 31440487, "link": "https://stackoverflow.com/questions/31440487/add-only-readable-row-to-table-view-in-qt-creator", "title": "add only readable row to Table View in Qt creator", "body": "<p>I am very new in Qt and Qt designer and I am trying to make a table that it have 3 columns and so many rows. I made a \"<strong>Table View</strong>\" in design mood of Qt creator and a \"<strong>Push Button</strong>\" for adding only readable rows to my table when I click on it.</p>\n\n<ol>\n<li>how can I do it? </li>\n<li>how to have a numbered table (table rows have number 1, 2, 3, ...) at last?</li>\n<li>how to change width of my columns?</li>\n</ol>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "oop", "modularity", "voxel"], "comments": [{"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1436992408, "post_id": 31440372, "comment_id": 50850372, "body": "Possibly something for <a href=\"http://programmers.stackexchange.com\">SE: programmers</a>."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436992428, "post_id": 31440372, "comment_id": 50850385, "body": "Your question is too broad for Stack Overflow."}, {"owner": {"reputation": 1147, "user_id": 813009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zaGq8.png?s=128&g=1", "display_name": "tp1", "link": "https://stackoverflow.com/users/813009/tp1"}, "edited": false, "score": 0, "creation_date": 1436993639, "post_id": 31440372, "comment_id": 50851095, "body": "i solved this same problem by keeping the data structures separate, and then building functions that will convert from voxel data to mesh data. But I use functional programming, so no modifications to the data structure are happening. see <a href=\"http://sivut.koti.soon.fi/~terop/GameApi.html\" rel=\"nofollow noreferrer\">sivut.koti.soon.fi/~terop/GameApi.html</a>"}, {"owner": {"reputation": 271, "user_id": 1978605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KG3KB.png?s=128&g=1", "display_name": "Barry Smith", "link": "https://stackoverflow.com/users/1978605/barry-smith"}, "reply_to_user": {"reputation": 1147, "user_id": 813009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zaGq8.png?s=128&g=1", "display_name": "tp1", "link": "https://stackoverflow.com/users/813009/tp1"}, "edited": false, "score": 0, "creation_date": 1436993830, "post_id": 31440372, "comment_id": 50851223, "body": "@tp1 I would do that, but the problem is this voxel data can&#39;t be converted to mesh data in real-time so I need a method by which I can store it in a data structure."}, {"owner": {"reputation": 1147, "user_id": 813009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zaGq8.png?s=128&g=1", "display_name": "tp1", "link": "https://stackoverflow.com/users/813009/tp1"}, "edited": false, "score": 0, "creation_date": 1436994683, "post_id": 31440372, "comment_id": 50851663, "body": "there&#39;s thing called &quot;flyweight pattern&quot; which is used to draw fonts etc, but also suitable for voxel-like things."}, {"owner": {"reputation": 271, "user_id": 1978605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KG3KB.png?s=128&g=1", "display_name": "Barry Smith", "link": "https://stackoverflow.com/users/1978605/barry-smith"}, "reply_to_user": {"reputation": 1147, "user_id": 813009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zaGq8.png?s=128&g=1", "display_name": "tp1", "link": "https://stackoverflow.com/users/813009/tp1"}, "edited": false, "score": 0, "creation_date": 1436995762, "post_id": 31440372, "comment_id": 50852201, "body": "@tp1 I looked up the flyweight pattern. Very useful, but I&#39;m not sure it would help me with my problem. Thanks for the suggestion though."}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1436996318, "post_id": 31440372, "comment_id": 50852436, "body": "@Pixelchemist when referring other sites, it is often helpful to point that <a href=\"http://meta.stackexchange.com/tags/cross-posting/info\">cross-posting is frowned upon</a>"}], "owner": {"reputation": 271, "user_id": 1978605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KG3KB.png?s=128&g=1", "display_name": "Barry Smith", "link": "https://stackoverflow.com/users/1978605/barry-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436992038, "creation_date": 1436992038, "question_id": 31440372, "link": "https://stackoverflow.com/questions/31440372/oop-c-synchronizing-data-structures-in-a-modular-program", "title": "(OOP) (C++) Synchronizing data structures in a modular program", "body": "<p>Please bear with me in this rather long question.</p>\n\n<p>I am currently building a voxel engine (nothing like Minecraft, don't worry). I want the engine to be modular. For example, I want the voxel 'engine' to be a seperate component to the 'renderer'.</p>\n\n<p>The engine currently builds up a database of voxel objects that are each composed of a 3-dimensional array. However, the renderer makes use of meshes extracted from this data using the marching cubes algorithm. I need to store both the voxel data and the mesh data for each voxel object. However, since both components are modular they cannot be stored in the same place.</p>\n\n<p>My current solution has been to build a secondary data structure inside the renderer that attempts to mirror the engine. It does this by duplicating the objects in the engine structure, giving each object a pointer to the object they mirror. However, this quickly becomes complex, since modifications to the original data structure have to be updated by the mirrored version.</p>\n\n<p>As you can see, the problem is more theoretical than technical. Could anyone help me in suggesting an OOP structure that my program may take to solve this issue better? I'm open to all suggestions, however radical.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "mpi", "distributed-computing", "intel-mkl", "scalapack"], "comments": [{"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1437055132, "post_id": 31440351, "comment_id": 50879640, "body": "Because pdpotri() must always come after pdpotrf(), if a barrier is needed, it would make the most sense for ScaLapack to have implemented it implicitly in the beginning of the function call for pdpotri(). I&#39;m pretty sure that no explicit barrier is needed."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1437124205, "post_id": 31440351, "comment_id": 50909738, "body": "Explicit barrier synchronisation is almost never needed in <b>correct</b> MPI applications that perform pure message passing as the synchronisation occurs naturally through the data dependency between the send and receive calls. Barriers are usually needed in order to synchronise with the completion of external events, e.g. concurrent data I/O, or when benchmarking in order to get the processes in sync."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1437130604, "post_id": 31440351, "comment_id": 50913529, "body": "I see @HristoIliev, thanks for your comment."}], "answers": [{"tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": true, "score": 2, "last_activity_date": 1437147105, "last_edit_date": 1437147105, "creation_date": 1437060061, "answer_id": 31458319, "question_id": 31440351, "link": "https://stackoverflow.com/questions/31440351/should-i-place-a-barrier-before-calling-pdpotri/31458319#31458319", "title": "Should I place a barrier before calling pdpotri()?", "body": "<p>While I have not looked into the details of <code>pdpotri()</code> and <code>pdpotrf()</code>, I see two cases:</p>\n\n<p>1) There needs to be a barrier between the two functions. In this case, however, because <code>pdpotri()</code> must always come after <code>pdpotrf()</code>, it would make the most sense for there to be an implicit boundary built-in to the beginning of <code>pdpotri()</code>.</p>\n\n<p>2) There does not need to be a barrier between the two functions.</p>\n\n<p>In either case, it should not be necessary for you to write your own explicit barrier using <code>MPI_Barrier()</code>.</p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 31458319, "answer_count": 1, "score": 2, "last_activity_date": 1437147105, "creation_date": 1436991966, "last_edit_date": 1437055631, "question_id": 31440351, "link": "https://stackoverflow.com/questions/31440351/should-i-place-a-barrier-before-calling-pdpotri", "title": "Should I place a barrier before calling pdpotri()?", "body": "<p>I am using <a href=\"https://software.intel.com/en-us/node/521465\" rel=\"nofollow\">pdpotrf()</a> in order to perform the Cholesky decomposition. Then I want to call <a href=\"https://software.intel.com/en-us/node/521487\" rel=\"nofollow\">pdpotri()</a>, in order to invert the matrix. The function is called from every process, just after <code>pdpotrf()</code>. Should I put a barrier there, so that I am sure that all the processes are done with the Cholesky factorization, and then move on to the inversion part, or it's not needed?</p>\n\n<p>I wrote some examples with tiny inputs, which show that it's not needed, but I want to be sure that I am not just (un)lucky and face a problem with larger inputs.</p>\n\n<p>Note that by a barrier I mean this: <code>MPI_Barrier(MPI_COMM_WORLD);</code></p>\n\n<hr>\n\n<p><em>EDIT</em></p>\n\n<p>I just worry that inverting may start, before some other process has terminated the Cholesky decomposition. Does <code>pdpotri()</code> take care of this? I mean, it checks and waits if needed. Or does <code>pdpotri()</code> work only in the submatrix of its calling process? If so, then no barrier is needed.</p>\n"}, {"tags": ["c++", "makefile", "g++"], "comments": [{"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992019, "post_id": 31440309, "comment_id": 50850146, "body": "Partially -- it compiles and links ok, but it cannot load the shared library at runtime..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992060, "post_id": 31440309, "comment_id": 50850168, "body": "Then I&#39;d say the answer is &quot;no, it&#39;s not correct&quot;."}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992174, "post_id": 31440309, "comment_id": 50850238, "body": "Ok...any idea what I should be doing instead?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992277, "post_id": 31440309, "comment_id": 50850307, "body": "The likelihood is that this has nothing to do with the static library. Why don&#39;t you try one at a time before you try using both at once?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1436992374, "post_id": 31440309, "comment_id": 50850353, "body": "Use <code>g++ main.cpp libStatic.a libShared.so -Wl,-rpath,.</code>"}, {"owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "edited": false, "score": 0, "creation_date": 1436992454, "post_id": 31440309, "comment_id": 50850399, "body": "@skwllsp feel free to edit that into my answer :-)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992473, "post_id": 31440309, "comment_id": 50850411, "body": "Ew no don&#39;t do that either"}, {"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1436992681, "post_id": 31440309, "comment_id": 50850539, "body": "OK, The better way is <code>g++ main.cpp libStatic.a libShared.so -Wl,-rpath,$ORIGIN</code>. It is much better. It make ld.so looks for a shared library in the same dir where myExe is. It is about &quot;turn-key&quot; applications <a href=\"http://man7.org/linux/man-pages/man8/ld.so.8.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man8/ld.so.8.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 0, "creation_date": 1436992281, "post_id": 31440432, "comment_id": 50850308, "body": "I thought that the operating system automatically looks in the directory of the executable, to see if the shared library is in there?"}, {"owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "reply_to_user": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 0, "creation_date": 1436992328, "post_id": 31440432, "comment_id": 50850329, "body": "Nope. Not on Linux, never."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992358, "post_id": 31440432, "comment_id": 50850346, "body": "But only do this for testing. Not in deployment."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 0, "creation_date": 1436992376, "post_id": 31440432, "comment_id": 50850355, "body": "@Karnivaurus: No. On Linux there are standard library search paths, but the directory of the executable is not one of them. Not for dynamic linking. (I think it does on Windows)"}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 0, "creation_date": 1436992420, "post_id": 31440432, "comment_id": 50850378, "body": "Ah, ok thanks. I think I&#39;m used to Windows where I seem to remember it does search the executable directory..."}], "tags": [], "owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "is_accepted": true, "score": 1, "last_activity_date": 1436992350, "last_edit_date": 1436992350, "creation_date": 1436992180, "answer_id": 31440432, "question_id": 31440309, "link": "https://stackoverflow.com/questions/31440309/linking-to-a-static-library-with-a-makefile-and-g/31440432#31440432", "title": "Linking to a static library with a makefile and g++", "body": "<p>You need to set <code>LD_LIBARY_PATH</code> to this directory where the shared object is sitting before you run your program.</p>\n\n<p>You can read up on 'rpath' in <code>man ld</code> for other possibilities.</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "accepted_answer_id": 31440432, "answer_count": 1, "score": 0, "last_activity_date": 1436992350, "creation_date": 1436991774, "last_edit_date": 1436992211, "question_id": 31440309, "link": "https://stackoverflow.com/questions/31440309/linking-to-a-static-library-with-a-makefile-and-g", "title": "Linking to a static library with a makefile and g++", "body": "<p>I want to link my C++ executable to both a static (<code>libStatic.a</code>) and a shared (<code>libShared.so</code>) library, using a makefile.</p>\n\n<p>The makefile so far has the following content:</p>\n\n<pre><code>myExe: main.cpp libStatic.a libShared.so\n    g++ main.cpp libStatic.a libShared.so\n</code></pre>\n\n<p>I'm fairly sure that the static linking is correct, as I have seen similar things elsewhere. What I am unsure of is the shared linking part. Is this correct? Or is linking to a static library done differently?</p>\n\n<p>If I run make, then it seems to be ok, and creates the executable. However, when I execute this, I reveive the error:</p>\n\n<pre><code>/usr/bin/ld: cannot find -lShared\n</code></pre>\n\n<p>However, my executable and <code>libShared.so</code> are in the same directory.</p>\n"}, {"tags": ["c++", "objective-c", "c", "xcode", "macos"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1436991840, "post_id": 31440170, "comment_id": 50850042, "body": "Where is <code>jsapi.h</code> located? Also, it should be <code>#include &quot;jsapi.h&quot;</code> not <code>#include &lt;jsapi.h&gt;</code>"}, {"owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "edited": false, "score": 0, "creation_date": 1436992088, "post_id": 31440170, "comment_id": 50850188, "body": "Why don&#39;t you go to the compile &quot;tab&quot; and look at the generated command line? You will see whether Xcode has correctly generated the -I options.  (it always does for me). Doing mdfind jsapi.h  at the command line to confirm where the header file is located could help as well."}, {"owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "edited": false, "score": 0, "creation_date": 1436992442, "post_id": 31440170, "comment_id": 50850393, "body": "#I&#39;L&#39;I nope it shouldn&#39;t (I&#39;m migrating the project from Linux system and you use &lt; and &gt; braces for library based includes and just add -I... include folder path). Unless Mac has different standards for these."}, {"owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "edited": false, "score": 0, "creation_date": 1436992570, "post_id": 31440170, "comment_id": 50850464, "body": "#Laurent Michel - For <code>mdfind jsapi.h</code> the result is correct (it is where I&#39;m searching for it). I&#39;m having minor problems orienting inside Xcode - could you give me hint or two navigating into compile &quot;tab&quot;"}, {"owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "edited": false, "score": 0, "creation_date": 1436994503, "post_id": 31440170, "comment_id": 50851560, "body": "I just realised that the <code>-I...</code> is not even added into the compiler flags. How is that even possible?!"}, {"owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "edited": false, "score": 0, "creation_date": 1437011705, "post_id": 31440170, "comment_id": 50857239, "body": "The main window is split in 3 panes (left / center / right). The top of the left pane has a row of buttons [Projects, Hierarchical, Search, Errors, Tests,Debug, Breakpoint, Build]. The last button of that row select &quot;build view&quot; for the middle pane. Once you see a build, pick a line that compiles a .m file. On the far <i>right</i> there is a small icon that looks like a page of text. Click on it. It will show the build command for that file. [Wish I could figure out how to put screenshots in Stack Overflow comments ;-)]."}, {"owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "edited": false, "score": 0, "creation_date": 1437011983, "post_id": 31440170, "comment_id": 50857303, "body": "The setting you are looking for is &quot;Header Search Paths&quot; It is under the &quot;Search Path&quot; section of your settings. I use it regularly, so I know it is supposed to work. Keep in mind that Xcode applies the settings hierarchically. If the setting is overriden &quot;deeper&quot; in the tree, the setting you give at the root will be ignored. I&#39;ve been burned by this before."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 544236, "user_type": "registered", "profile_image": "https://graph.facebook.com/208729/picture?type=large", "display_name": "Ryan Williams", "link": "https://stackoverflow.com/users/544236/ryan-williams"}, "edited": false, "score": 0, "creation_date": 1453594394, "post_id": 31444270, "comment_id": 57671217, "body": "Thanks, this seems close to what I need, but what do you mean &quot;in the option&quot;? Where did you find this &quot;Search Paths&quot; dropdown?"}], "tags": [], "owner": {"reputation": 385, "user_id": 5057025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153420539154025/picture?type=large", "display_name": "Laurent Michel", "link": "https://stackoverflow.com/users/5057025/laurent-michel"}, "is_accepted": true, "score": 1, "last_activity_date": 1437012635, "creation_date": 1437012635, "answer_id": 31444270, "question_id": 31440170, "link": "https://stackoverflow.com/questions/31440170/mac-xcode-6-4-header-include-path/31444270#31444270", "title": "Mac + xcode 6.4 - header include path", "body": "<p>Just to show....</p>\n\n<p>The \"build tab\" is called \"Report Navigator\". I circled it...</p>\n\n<p><img src=\"https://i.stack.imgur.com/mEznp.png\" alt=\"enter image description here\"></p>\n\n<p>Then you can see the icon to the far right of:\n<img src=\"https://i.stack.imgur.com/oHrMR.png\" alt=\"enter image description here\"></p>\n\n<p>Click that button and you will see the text of the build command in its full glory. </p>\n\n<p>Finally, in the option, you can see below that I have the setting defined for a 3rd party library:</p>\n\n<p><img src=\"https://i.stack.imgur.com/UkqE4.png\" alt=\"enter image description here\"></p>\n\n<p>You can even see that I used the \"User Header Search Paths\" in this case. BTW, I also added the library search path (just above). </p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 19, "user_id": 5121006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FEkFw_dUfoU/AAAAAAAAAAI/AAAAAAAAAP8/bUdjkalzFSA/photo.jpg?sz=128", "display_name": "Zgragselus", "link": "https://stackoverflow.com/users/5121006/zgragselus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6975, "favorite_count": 2, "accepted_answer_id": 31444270, "answer_count": 1, "score": 1, "last_activity_date": 1437012635, "creation_date": 1436991311, "question_id": 31440170, "link": "https://stackoverflow.com/questions/31440170/mac-xcode-6-4-header-include-path", "title": "Mac + xcode 6.4 - header include path", "body": "<p>So, I have an Xcode project that contains sources which include headers from external library (static one)</p>\n\n<p>The include is done in common way:</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;string&gt;\n #include &lt;jsapi.h&gt;\n</code></pre>\n\n<p>The third line causes compiler error: <code>'jsapi.h' file not found</code></p>\n\n<p>E.g.: <code>Lexical or Preprocessor issue 'jsapi.h' file not found</code></p>\n\n<p>Now I got that I should add include folder into the project settings. So I opened the projects and into <code>Search Paths</code> category under <code>Header Search Paths</code> I've added <code>/usr/local/include/</code> where the headers really are. Still same error. I tried copying them under <code>/Users/.../include/</code> and pointing there - still same error.</p>\n\n<p>So I tried going through SO and people suggested using <code>User Header Search Paths</code>, did that - still same error.</p>\n\n<p>Now I know this will be something really dumb, but why Xcode does not search those paths on default (assuming that <code>/</code> means root folder - as for some reason my C headers are under <code>./Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/</code>). I could try copying those header files in there, but well ... that just makes more harm than good.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1436991227, "post_id": 31440013, "comment_id": 50849658, "body": "The task is pretty stupid as it entirely forgets that you shouldn&#39;t compare floating-point values for equality unless it&#39;s bit-equality you&#39;re interested in (which it&#39;s not)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436992617, "post_id": 31440013, "comment_id": 50850495, "body": "@LightnessRacesinOrbit I would concur if there were invokes of <code>operator ==</code>. But if there is an equivalence comparison in this code, I don&#39;t see it. I see only <code>operator &lt;</code> and <code>operator &gt;</code> (which I would not do anyway; I would use two <code>operator &lt;</code>, the second surrounded by logical-not)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436993276, "post_id": 31440013, "comment_id": 50850880, "body": "@WhozCraig: If the failure cases are <code>operator&lt;</code> and <code>operator&gt;</code> (which they are), then what is left to count as success, other than an implicit <code>operator==</code>.....? We tend to use the algebraic system in which <code>!(a&lt;b) &amp;&amp; !(a&gt;b) == (a==b)</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436993402, "post_id": 31440013, "comment_id": 50850960, "body": "@LightnessRacesinOrbit when <i>neither</i> are true. I.e. the standard swo: <code>!((a&lt;b) || (b&lt;a))</code> implies <code>a == b</code>. Or did I utterly misunderstand your question? edit: you finished that as I was typing mine. And yes, that is exactly what I was referring two. I see nothing in the OP&#39;s code that directly compares two floating point values for equality, which is why I don&#39;t understand your first comment saying, &quot;.. you shouldn&#39;t compare floating-point values for equality..&quot;, as I see no such comparison."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436993413, "post_id": 31440013, "comment_id": 50850969, "body": "@WhozCraig: Yes, that&#39;s the same equivalence I just wrote, with the <code>!</code> moved to the outside and one of the <code>&lt;</code> flipped around to be <code>&gt;</code>. <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/De_Morgan%27s_laws</a> And I suspect you&#39;re misunderstanding the code o.O"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436993624, "post_id": 31440013, "comment_id": 50851090, "body": "@WhozCraig: So what if there&#39;s no direct call to <code>operator==</code>? The algorithm continues for as long as <code>a&lt;b</code> or <code>b&lt;a</code>. It returns <code>true</code> in the <code>else</code> clause, i.e. when neither of those things are true. And, as we&#39;ve just discussed, that&#39;s <code>a==b</code>. That&#39;s <i>literally equivalent to performing a check for <code>operator==</code></i>. What else would a binary search do? The point is that there is no consideration here for the inherent imprecision of many floating-point values. I expect it to return <code>false</code> for a whole range of inputs for which it should not."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436993975, "post_id": 31440013, "comment_id": 50851293, "body": "Outside of NaN (which I concur should be accounted for) I&#39;m pressed to fathom where a swo comparison chain would <i>break</i>, but I&#39;m truly interested if such a thing exists. If you can proffer up an example, that would be stellar (or link). My whole point was <i>I completely agree with your statement</i>, I just don&#39;t see it actually be <i>done</i> in the posted code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1436994467, "post_id": 31440013, "comment_id": 50851547, "body": "For anyone that cares, <a href=\"http://stackoverflow.com/questions/4816156/are-ieee-floats-valid-key-types-for-stdmap-and-stdset\">link to topic of SWO for floating point and fairly stellar set of responses</a>."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 2662093, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9424a4c40324fa07a8d2bd0d50af1dd9?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/2662093/jake-smith"}, "edited": false, "score": 0, "creation_date": 1436991581, "post_id": 31440161, "comment_id": 50849880, "body": "So, would T* begin be the array {5.3, 6.62, 7.74, 10.22, 13.22}? What would T* end be?"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 189, "user_id": 2662093, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9424a4c40324fa07a8d2bd0d50af1dd9?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/2662093/jake-smith"}, "edited": false, "score": 0, "creation_date": 1436991660, "post_id": 31440161, "comment_id": 50849922, "body": "begin would be <code>arr</code> end would be <code>arr + size</code>."}, {"owner": {"reputation": 189, "user_id": 2662093, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9424a4c40324fa07a8d2bd0d50af1dd9?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/2662093/jake-smith"}, "edited": false, "score": 0, "creation_date": 1436991931, "post_id": 31440161, "comment_id": 50850089, "body": "I&#39;m confused by how I would implement this in my bsearch. Could you update your post with how the code would look inside the function bsearch?"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 189, "user_id": 2662093, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9424a4c40324fa07a8d2bd0d50af1dd9?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/2662093/jake-smith"}, "edited": false, "score": 0, "creation_date": 1436992480, "post_id": 31440161, "comment_id": 50850414, "body": "@JakeSmith Have a look."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 189, "user_id": 2662093, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9424a4c40324fa07a8d2bd0d50af1dd9?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/2662093/jake-smith"}, "edited": false, "score": 1, "creation_date": 1436992977, "post_id": 31440161, "comment_id": 50850710, "body": "The wording of @JakeSmith &#39;s request puts Captain Giraffe in an interesting position as the bulk of his recommendations go <i>outside</i> of the function. Let&#39;s see how the willy captain of the savannah escapes from this predicament... (This comment sounds best when read by David Attenborough)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436993395, "post_id": 31440161, "comment_id": 50850955, "body": "You&#39;re confused because Captain Giraffe said &quot;accept the array&quot;, when in fact it accepts two pointers, one to the first element and another to the last element."}], "tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1436993750, "last_edit_date": 1436993750, "creation_date": 1436991272, "answer_id": 31440161, "question_id": 31440013, "link": "https://stackoverflow.com/questions/31440013/binary-search-on-template-floats-c/31440161#31440161", "title": "Binary Search on template floats C++", "body": "<p>No, the function should accept the array as well as the searched value. </p>\n\n<pre><code>template&lt;typename T&gt;\nbool bsearch(T* begin, T* end, T num){\n    auto len = end - begin;\n</code></pre>\n\n<p>for example. </p>\n\n<p>Read this in the voice of David Attenborough:</p>\n\n<pre><code>int main()\n{\n    float num;\n    cout &lt;&lt;\"Number to search: \";\n    cin &gt;&gt;num;\n    float array_to_search_in[] = {5.3, 6.62, 7.74, 10.22, 13.22};\n    bool search_result = bsearch(array_to_search_in, array_to_search_in +5, num);\n    if (search_result == true)...\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 2662093, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9424a4c40324fa07a8d2bd0d50af1dd9?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/2662093/jake-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436993750, "creation_date": 1436990790, "question_id": 31440013, "link": "https://stackoverflow.com/questions/31440013/binary-search-on-template-floats-c", "title": "Binary Search on template floats C++", "body": "<p>I have been tasked to write a binary search for an array of floating point values that will report the same answer even when run on various hardware platforms or with different compilers. Also, provide a template which provides the binary search algorithm for any provided data type.</p>\n\n<p>So, I wrote this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\ntemplate&lt;typename T&gt;\n\nbool bsearch(T num)\n{\n    T arr[] = {5.3, 6.62, 7.74, 10.22, 13.22};\n    int len = (sizeof(arr)/sizeof(*arr));\n    int mid, l_bound=0, u_bound = len-1;\n    while (l_bound &lt;= u_bound)\n    {\n        mid =(l_bound+u_bound)/2;\n        if (num &gt; arr[mid])\n            l_bound = mid+1;\n        else if (num &lt; arr[mid])\n            u_bound = mid -1;\n        else\n            return true;\n    }\n    return false;\n}\n\nint main()\n{\n    float num;\n    cout &lt;&lt;\"Number to search: \";\n    cin &gt;&gt;num;\n    if (bsearch(num) == true)\n        cout &lt;&lt;\"Number found!\\n\";\n    else\n        cout &lt;&lt;\"Nubmer not found!\\n\";\n\n}\n</code></pre>\n\n<p>This works on my machine for finding the floats in the array.\nMy question: Does this look like it would satisfy the requirements? How do I know that this will work on other hardware platforms? Did I correctly provide the templating for this problem right?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1436991153, "post_id": 31439909, "comment_id": 50849616, "body": "<a href=\"http://stackoverflow.com/q/17183761/560648\">stackoverflow.com/q/17183761/560648</a>"}, {"owner": {"reputation": 584, "user_id": 2639398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2af0cf25bed0d359dce19de12cfcd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Curve25519", "link": "https://stackoverflow.com/users/2639398/curve25519"}, "edited": false, "score": 0, "creation_date": 1436991407, "post_id": 31439909, "comment_id": 50849764, "body": "You can try to use <code>make_function</code> on <code>h</code>: <a href=\"http://stackoverflow.com/a/8670836/2639398\">stackoverflow.com/a/8670836/2639398</a>"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3900460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff3845530cf27bcb53023a36b7bc59c9?s=128&d=identicon&r=PG&f=1", "display_name": "user3900460", "link": "https://stackoverflow.com/users/3900460/user3900460"}, "edited": false, "score": 1, "creation_date": 1437039545, "post_id": 31440180, "comment_id": 50868862, "body": "Since C++14, specifying trailing return type is unnecessary, thanks to return type deduction, so <code>auto q(F f, Arg&amp;&amp;... arg)</code> is enough."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1436991361, "creation_date": 1436991361, "answer_id": 31440180, "question_id": 31439909, "link": "https://stackoverflow.com/questions/31439909/function-calling-any-specified-function/31440180#31440180", "title": "Function calling any specified function", "body": "<p>Since it's a template anyway, you don't need <code>std::function</code> at all. Just do this:</p>\n\n<pre><code>template &lt;class F, class... Arg&gt;\nauto q(F f, Arg... arg) -&gt; decltype(f(arg...))\n{\n  return f(arg...);\n}\n</code></pre>\n\n<p>Even better, use perfect forwarding:</p>\n\n<pre><code>template &lt;class F, class... Arg&gt;\nauto q(F f, Arg&amp;&amp;... arg) -&gt; decltype(f(std::forward&lt;Arg&gt;(arg)...))\n{\n  return f(std::forward&lt;Arg&gt;(arg)...);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 0, "last_activity_date": 1436991979, "creation_date": 1436991979, "answer_id": 31440356, "question_id": 31439909, "link": "https://stackoverflow.com/questions/31439909/function-calling-any-specified-function/31440356#31440356", "title": "Function calling any specified function", "body": "<p>You're probably taking a difficult path for a simple problem...\nYou can just use closures taking no parameters for that...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nint h(int a, int b, int c) { return a + b + c; }\n\nint main()\n{\n    auto clsr = [](){ return h(1, 2, 3); };\n\n    auto r = clsr();\n    cout &lt;&lt; \"called, result = \" &lt;&lt; r;\n    return 0;\n}\n</code></pre>\n\n<p>with the advantage that the IDE will even suggest arguments for <code>h</code> when writing/editing this kind of code.</p>\n"}], "owner": {"reputation": 93, "user_id": 3900460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff3845530cf27bcb53023a36b7bc59c9?s=128&d=identicon&r=PG&f=1", "display_name": "user3900460", "link": "https://stackoverflow.com/users/3900460/user3900460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "accepted_answer_id": 31440180, "answer_count": 2, "score": 5, "last_activity_date": 1436991979, "creation_date": 1436990408, "last_edit_date": 1436990709, "question_id": 31439909, "link": "https://stackoverflow.com/questions/31439909/function-calling-any-specified-function", "title": "Function calling any specified function", "body": "<p>How to write a function calling any specified function (or function object) with specified arguments?</p>\n\n<p>Here's what I tried:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\ntemplate &lt;typename RetType, typename... ArgTypes&gt;\nRetType q(function&lt;RetType(ArgTypes...)&gt; f, ArgTypes... args)\n{\n    return f(args...);\n}\n\nint h(int a, int b, int c) { return a + b + c; }\n\nint main()\n{\n    auto r = q(h, 1, 2, 3);\n\n    cout &lt;&lt; \"called, result = \" &lt;&lt; r;\n\n    return 0;\n}\n</code></pre>\n\n<p>The compiler says, that template argument deduction/substitution failed due to mismatched types 'std::function&lt;_Res(_ArgTypes ...)>' and 'int (*)(int, int, int)'.</p>\n\n<p>I'm not sure why template arguments can't be deduced in my code.</p>\n"}, {"tags": ["c++", "boost", "boost-spirit-qi"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437001634, "post_id": 31439886, "comment_id": 50854498, "body": "SO is well suited for focused questions. You combine many questions (in fact, more unbased assertions) and only hide your true goal in the last paragraph. That&#39;s not useful for future user of the site. (I suggest removing the unneeded noise from the question and expanding on the thing you want to achieve)"}, {"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1437077785, "post_id": 31439886, "comment_id": 50893743, "body": "I think that <a href=\"http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/directive/hold.html\" rel=\"nofollow noreferrer\"><code>qi::hold</code></a> may help you with the problem in your update (<code>qi::hold[A &gt;&gt; B] | C</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437001572, "post_id": 31442184, "comment_id": 50854477, "body": "Expanded my answer to address all the questions and use-cases you had in the question."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1437001549, "last_edit_date": 1495535196, "creation_date": 1436998681, "answer_id": 31442184, "question_id": 31439886, "link": "https://stackoverflow.com/questions/31439886/how-to-make-the-rule-fail-if-the-right-side-of-operator-fails-in-boost-spi/31442184#31442184", "title": "How to make the rule fail if the right side of operator &quot;&gt;&gt;&quot; fails, in boost spirit qi", "body": "<p>Q. <em>Problem is that if B fails, rule doesn't fail, I get A</em></p>\n\n<p>A. That's not true, see extensive demo below</p>\n\n<hr>\n\n<p>Q.  it could be followed by E, but I don't want to get CE</p>\n\n<p>A. In the test cases below look for <em>positive assertion</em> (<code>C &gt;&gt; &amp;E</code> would do here)</p>\n\n<hr>\n\n<p>This is because I'm trying to parse keywords and identifiers, so int is a keyword, int4 is identifier. Therefore keyword is a string I define that is not followed by digits or letters. Any idea?</p>\n\n<p>Yes, see:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27463338/boostspiritqi-keywords-and-identifiers/27464697#27464697\">boost::spirit::qi keywords and identifiers</a></li>\n<li><a href=\"http://www.boost.org/doc/libs/1_58_0/libs/spirit/repository/doc/html/spirit_repository/qi_components/directives/distinct.html\" rel=\"nofollow noreferrer\"><code>distinct</code></a> in the Spirit Repository</li>\n</ul>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/3f74889517c6d71a\" rel=\"nofollow noreferrer\">Live Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n\nnamespace qi = boost::spirit::qi;\n\ntemplate &lt;typename Grammar&gt;\nbool check(Grammar const&amp; g, std::string const&amp; input, qi::unused_type) {\n    auto f = input.begin(), l = input.end();\n    try {\n        return qi::parse(f, l, g);\n    } catch(...) {\n        return false;\n    }\n}\n\ntemplate &lt;typename Grammar, typename Skipper&gt;\nbool check(Grammar const&amp; g, std::string const&amp; input, Skipper const&amp; s) {\n    auto f = input.begin(), l = input.end();\n    try {\n        return qi::phrase_parse(f, l, g, s);\n    } catch(...) {\n        return false;\n    }\n}\n\n#define REPORT(g, i, s, expect) do { assert(expect == check(g, i, s)); } while(0)\n#define SHOULD_WORK(g, i, s) REPORT(g, i, s, true)\n#define SHOULD_FAIL(g, i, s) REPORT(g, i, s, false)\n\ntemplate &lt;typename Skipper = qi::unused_type&gt;\nvoid do_all_tests(Skipper const&amp; s = Skipper()) {\n\n    auto A = qi::copy(qi::char_(\"$_\") | qi::alpha);\n    auto B = qi::copy(qi::char_(\"z\"));\n\n    // using skipper:\n    SHOULD_WORK(A &gt;&gt; B , \"$z\", s);\n    SHOULD_FAIL(A &gt;&gt; B , \"$.\", s);\n    SHOULD_FAIL(A &gt;&gt; B , \"$\" , s);\n\n    SHOULD_WORK(A  &gt; B , \"$z\", s);\n    SHOULD_FAIL(A  &gt; B , \"$.\", s);\n    SHOULD_FAIL(A  &gt; B , \"$\" , s);\n\n    // positive assertion (does not consume B)\n    SHOULD_WORK(A &gt;&gt; &amp;B, \"$z\", s);\n    SHOULD_FAIL(A &gt;&gt; &amp;B, \"$.\", s);\n    SHOULD_FAIL(A &gt;&gt; &amp;B, \"$\" , s);\n\n    SHOULD_WORK(A  &gt; &amp;B, \"$z\", s);\n    SHOULD_FAIL(A  &gt; &amp;B, \"$.\", s);\n    SHOULD_FAIL(A  &gt; &amp;B, \"$\" , s);\n\n    // negative assertion:\n    SHOULD_FAIL(A &gt;&gt; !B, \"$z\", s);\n    SHOULD_WORK(A &gt;&gt; !B, \"$.\", s);\n    SHOULD_WORK(A &gt;&gt; !B, \"$\" , s);\n\n    SHOULD_FAIL(A  &gt; !B, \"$z\", s);\n    SHOULD_WORK(A  &gt; !B, \"$.\", s);\n    SHOULD_WORK(A  &gt; !B, \"$\" , s);\n\n}\n\nint main() {\n    do_all_tests(qi::unused); // no skipper\n    do_all_tests(qi::space);\n    std::cout &lt;&lt; \"All tests succeeded\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>All tests succeeded\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5120794, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf97b2fd3da3a6ed584c2b9d3ede21cd?s=128&d=identicon&r=PG&f=1", "display_name": "kaladin", "link": "https://stackoverflow.com/users/5120794/kaladin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31442184, "answer_count": 1, "score": 2, "last_activity_date": 1437071852, "creation_date": 1436990321, "last_edit_date": 1437071852, "question_id": 31439886, "link": "https://stackoverflow.com/questions/31439886/how-to-make-the-rule-fail-if-the-right-side-of-operator-fails-in-boost-spi", "title": "How to make the rule fail if the right side of operator &quot;&gt;&gt;&quot; fails, in boost spirit qi", "body": "<p>To keep it simple let's say I need to parse <em><code>A</code> followed by <code>B</code></em></p>\n\n<p>I don't mean the letter, of course, <code>A</code> and <code>B</code> could be <code>(qi::char_)</code>, or  <code>(qi::char_('$') | qi::char_('_') | ascii::alpha)</code>, or whatever.</p>\n\n<p>so:</p>\n\n<pre><code>rule = A &gt;&gt; B;\n</code></pre>\n\n<p>Problem is that if <code>B</code> fails, rule doesn't fail, I get <code>A</code>. I tried with <code>+B</code> but the result was the same. And:</p>\n\n<pre><code>rule = A &gt; B;\n</code></pre>\n\n<p>Throws and exception if it fails.</p>\n\n<p><strong>UPDATE</strong>: I edited this question to explain that the above statements are false (as user sehe proved), I believed that the rule wasn't failing because when I tried to:</p>\n\n<pre><code>auto A = qi::copy(qi::char_(\"$\") | qi::alpha);\nauto B = qi::copy(qi::char_(\"z\"));\nauto C = qi::copy(qi::string(\"$x\"));\nstd::string s1 = \"$x\";\nstd::string s2 = \"\";\nqi::parse(s1.begin(), s1.end(), (A &gt;&gt; B) | C, s2);\n</code></pre>\n\n<p>I would get that <code>s2=\"$$x\"</code> , so I thought that <code>A</code> was not failing. Now I know that this is a different problem. But the rule <em>does</em> fail.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1436990392, "post_id": 31439872, "comment_id": 50849167, "body": "Probable dupe:  <a href=\"http://stackoverflow.com/questions/13797926/what-does-new-int100-do\" title=\"what does new int100 do\">stackoverflow.com/questions/13797926/what-does-new-int100-do</a>"}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 4743248, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1414548292193903/picture?type=large", "display_name": "Missy Zewdie", "link": "https://stackoverflow.com/users/4743248/missy-zewdie"}, "edited": false, "score": 0, "creation_date": 1436990663, "post_id": 31439915, "comment_id": 50849344, "body": ":- Thanks for correcting my mistake. Also, i got to learn a new word called &quot;Obfuscated&quot; ....Thanks for that."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 201, "user_id": 4743248, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1414548292193903/picture?type=large", "display_name": "Missy Zewdie", "link": "https://stackoverflow.com/users/4743248/missy-zewdie"}, "edited": false, "score": 0, "creation_date": 1436990791, "post_id": 31439915, "comment_id": 50849421, "body": "I&#39;m glad then that my sentence is no longer obfuscating!"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1436990432, "creation_date": 1436990432, "answer_id": 31439915, "question_id": 31439872, "link": "https://stackoverflow.com/questions/31439872/heap-corruption-detected-in-dynamic-array-c/31439915#31439915", "title": "Heap Corruption Detected in Dynamic Array c++?", "body": "<p>First case: you are only creating one int and assigning it the value of 2.</p>\n\n<p>Then you treat it as an array with two elements. That's undefined behaviour. You need to use new int[2]. Your delete[] syntax is correct.</p>\n\n<p>Your second example is far too obfuscated.</p>\n"}, {"tags": [], "owner": {"reputation": 18613, "user_id": 818182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89b420763192c3b763f4cffa789fe39f?s=128&d=identicon&r=PG", "display_name": "Austin Brunkhorst", "link": "https://stackoverflow.com/users/818182/austin-brunkhorst"}, "is_accepted": false, "score": 2, "last_activity_date": 1436990464, "creation_date": 1436990464, "answer_id": 31439927, "question_id": 31439872, "link": "https://stackoverflow.com/questions/31439872/heap-corruption-detected-in-dynamic-array-c/31439927#31439927", "title": "Heap Corruption Detected in Dynamic Array c++?", "body": "<p>You're calling the constructor of <em>one</em> int with the value of <code>2</code> not <strong>allocating</strong> <em>two</em> ints.</p>\n\n<p>Use square brackets instead.</p>\n\n<pre><code>int *p = new int[ 2 ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 5121010, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c2319f826a4e53b5d33ba3835be30927?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5121010/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1436990545, "creation_date": 1436990545, "answer_id": 31439946, "question_id": 31439872, "link": "https://stackoverflow.com/questions/31439872/heap-corruption-detected-in-dynamic-array-c/31439946#31439946", "title": "Heap Corruption Detected in Dynamic Array c++?", "body": "<p>in your first example you have:</p>\n\n<pre><code>int *p = new int(2);\n</code></pre>\n\n<p>which is initializing 1 pointer to the value of 2 rather than in your second example when you have a</p>\n\n<pre><code>new int[2];\n</code></pre>\n\n<p>where you're actually making 2 pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 2, "last_activity_date": 1436990693, "creation_date": 1436990693, "answer_id": 31439989, "question_id": 31439872, "link": "https://stackoverflow.com/questions/31439872/heap-corruption-detected-in-dynamic-array-c/31439989#31439989", "title": "Heap Corruption Detected in Dynamic Array c++?", "body": "<p><code>new int(2)</code> allocates <strong>one</strong> <code>int</code> that has the value <code>2</code>.</p>\n\n<p><code>new int[2]</code> allocates an array of <strong>two</strong> <code>int</code>s, with indeterminate values.</p>\n"}], "owner": {"reputation": 201, "user_id": 4743248, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1414548292193903/picture?type=large", "display_name": "Missy Zewdie", "link": "https://stackoverflow.com/users/4743248/missy-zewdie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 31439946, "answer_count": 4, "score": 0, "last_activity_date": 1436990693, "creation_date": 1436990267, "question_id": 31439872, "link": "https://stackoverflow.com/questions/31439872/heap-corruption-detected-in-dynamic-array-c", "title": "Heap Corruption Detected in Dynamic Array c++?", "body": "<p>I was learning how to use the delete operator for dynamic arrays and i ran into some really strange problem. I tried two approach to write the same code - one worked but the other dint work. So, here is the code i tried</p>\n\n<p>Method 1:- </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n\n  int *p = new int(2);\n\n   for(int i =0; i&lt;2;i++)\n   {\n       cin&gt;&gt;p[i];\n\n   }\n\n   for(int i=0; i&lt;2;i++)\n   {\n       cout&lt;&lt;p[i];\n\n   }\n\n      delete[] p;\n\n     system(\"pause\");\n}\n</code></pre>\n\n<p>//Error message - Heap Corruption detected. Can someone please explain me the reason of the error?</p>\n\n<p>Method 2:- Using TypeDef </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntypedef int arr[2];\n\nint main()\n{\n\n  int *p = new arr;\n\n   for(int i =0; i&lt;2;i++)\n   {\n       cin&gt;&gt;p[i];\n\n   }\n\n   for(int i=0; i&lt;2;i++)\n   {\n       cout&lt;&lt;p[i];\n\n   }\n\n      delete[] p;\n\n     system(\"pause\");\n}\n</code></pre>\n\n<p>//The above method works perfectly with no error. I am totally confused!!</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1436989946, "post_id": 31439727, "comment_id": 50848925, "body": "How are you unable? What is the error? And is it Juhas you&#39;re not using std::string?"}, {"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1436990019, "post_id": 31439727, "comment_id": 50848960, "body": "I&#39;ve tried including the using namespace std; line also and i still recieve this error?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1436990075, "post_id": 31439727, "comment_id": 50848992, "body": "Please paste the text of your programs, not the graphics."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1436990089, "post_id": 31439727, "comment_id": 50848998, "body": "You haven&#39;t shown any error messages, a red line means nothing to us"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436990150, "post_id": 31439727, "comment_id": 50849030, "body": "Please edit your post and paste the code directly instead of using an image. images are not searchable."}, {"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 0, "creation_date": 1436990560, "post_id": 31439727, "comment_id": 50849268, "body": "I&#39;ve gotten it working, but thanks anyways."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1436990649, "post_id": 31439727, "comment_id": 50849335, "body": "@Pamal Mangat Ask more questions. I like your pictures.:)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1436990903, "post_id": 31439727, "comment_id": 50849484, "body": "You forgot to read your C++ book. Quite the oversight if you ask me..."}, {"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1436993302, "post_id": 31439727, "comment_id": 50850898, "body": "<b>I&#39;ve already mentioned that im still a new c++ programmer so cut me some slack</b> @LightnessRacesinOrbit"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1436993811, "post_id": 31439727, "comment_id": 50851213, "body": "@PamalMangat: Being a beginner does not magically absolve you of the responsibility for reading and paying attention to what you are told. If anything, it&#39;s <i>more important</i> at this stage than at any other! I strongly recommend getting into the habit of that now. I&#39;m trying to help you."}, {"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 0, "creation_date": 1437067578, "post_id": 31439727, "comment_id": 50888144, "body": "Getting into the habbit of what? Reading and paying close attention to what im told to do?"}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 3, "last_activity_date": 1436990008, "creation_date": 1436990008, "answer_id": 31439796, "question_id": 31439727, "link": "https://stackoverflow.com/questions/31439727/cant-define-a-variable-as-a-string-type-in-c/31439796#31439796", "title": "Can&#39;t define a variable as a string type in C++", "body": "<p>You need to add the namespace</p>\n\n<pre><code>std::string str0\n</code></pre>\n\n<p>The alternative is to use a <code>using</code> directive to import the namespace, but <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\"><em>avoid</em> doing that</a>.</p>\n\n<pre><code>using namespace std;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 0, "creation_date": 1436990300, "post_id": 31439814, "comment_id": 50849109, "body": "Why would i want to avoid using namespace std; ??"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 2, "creation_date": 1436990310, "post_id": 31439814, "comment_id": 50849118, "body": "@PamalMangat <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}, {"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1436990709, "post_id": 31439814, "comment_id": 50849379, "body": "@CoryKramer So you guys are saying i should write std:: before every single line then?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 0, "creation_date": 1436990906, "post_id": 31439814, "comment_id": 50849488, "body": "@PamalMangat I either write <code>std::</code> before everything or if it is going to be a lot then I&#39;ll use <code>using std::whater_type_it_is</code> in the function I am using the type in.  with <code>auto</code> now it really isn&#39;t that big of a deal."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 1, "creation_date": 1436990952, "post_id": 31439814, "comment_id": 50849517, "body": "@PamalMangat: Why would you need it &quot;before every single line&quot;????"}, {"owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "edited": false, "score": 0, "creation_date": 1436991047, "post_id": 31439814, "comment_id": 50849568, "body": "Because if i don&#39;t import std:: infront of for example cout or cin than they wont work. (Still a new c++ programmer sorry for lack of knowledge)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1436990503, "last_edit_date": 1436990503, "creation_date": 1436990048, "answer_id": 31439814, "question_id": 31439727, "link": "https://stackoverflow.com/questions/31439727/cant-define-a-variable-as-a-string-type-in-c/31439814#31439814", "title": "Can&#39;t define a variable as a string type in C++", "body": "<p>You forgot that <code>string</code> resides in the namespace <code>std</code>.  You either need to use <code>std::string</code>, <code>using std::string</code> or <code>using namespace std &lt;-</code><a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">avoid this one if at all possible</a>.</p>\n"}], "owner": {"reputation": 247, "user_id": 4610150, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1lvLO.jpg?s=128&g=1", "display_name": "Pamal Mangat", "link": "https://stackoverflow.com/users/4610150/pamal-mangat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1437005991, "accepted_answer_id": 31439796, "answer_count": 2, "score": -4, "last_activity_date": 1436992310, "creation_date": 1436989749, "last_edit_date": 1436992310, "question_id": 31439727, "link": "https://stackoverflow.com/questions/31439727/cant-define-a-variable-as-a-string-type-in-c", "closed_reason": "Not suitable for this site", "title": "Can&#39;t define a variable as a string type in C++", "body": "<p>I am trying to add a variable into my c++ project that is a string type. All though i am unable to do this and i don't know why, can someone please explain or guide me on how to resolve this issue. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    string str0 = \"Hello World\";\n    cout &lt;&lt; str0 &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>I am currently running on DEV C++ 5.7.1.</p>\n"}, {"tags": ["c++", "fsm"], "comments": [{"owner": {"reputation": 5779, "user_id": 876686, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0dc9f06a29ef13328a46d31db59634ea?s=128&d=identicon&r=PG", "display_name": "tier1", "link": "https://stackoverflow.com/users/876686/tier1"}, "edited": false, "score": 5, "creation_date": 1436989178, "post_id": 31439551, "comment_id": 50848539, "body": "Can you use your debugger and tell us what line it crashes on?"}], "answers": [{"comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1436989693, "post_id": 31439612, "comment_id": 50848797, "body": "*Since you are new to C++, it should be mentioned that you must learn to use a debugger.  Then problems like this will stop being so mysterious."}], "tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 5, "last_activity_date": 1436989292, "creation_date": 1436989292, "answer_id": 31439612, "question_id": 31439551, "link": "https://stackoverflow.com/questions/31439551/simple-program-crash/31439612#31439612", "title": "Simple program crash", "body": "<p><code>Hey_state *h</code> is a pointer.</p>\n\n<p>Where does it point?  <strong>You don't know.</strong></p>\n\n<p>Its value is <em>uninitialized</em>.</p>\n\n<p>Later, you <em>dereference</em> the same pointer, now copied to <code>currState</code>.</p>\n\n<pre><code>        currState-&gt;update();\n</code></pre>\n\n<p>What is there?  <strong>You don't know.</strong> </p>\n\n<p>You are dereferencing an uninitialized pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": true, "score": 3, "last_activity_date": 1436989356, "creation_date": 1436989356, "answer_id": 31439629, "question_id": 31439551, "link": "https://stackoverflow.com/questions/31439551/simple-program-crash/31439629#31439629", "title": "Simple program crash", "body": "<p><code>Hey_state *h;</code></p>\n\n<p>This creates a pointer to a <code>Hey_state</code> which could point anywhere randomly in memory. No object is actually created.</p>\n\n<pre><code>Stranger s(h);\ns.greet();\n</code></pre>\n\n<p>This attempts to use the Hey_state that was never created, giving an error.</p>\n\n<p>Try:</p>\n\n<pre><code>Hey_state h;\nStranger s(&amp;h);\ns.greet();\n</code></pre>\n\n<p>That creates an object of <code>Hey_state</code>, and passes a pointer to that object to <code>Stranger s</code></p>\n"}], "owner": {"reputation": 83, "user_id": 4236586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3c8025a06087ca191d2f59cb941fc485?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/4236586/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 31439629, "answer_count": 2, "score": -1, "last_activity_date": 1436989356, "creation_date": 1436989065, "question_id": 31439551, "link": "https://stackoverflow.com/questions/31439551/simple-program-crash", "title": "Simple program crash", "body": "<p>I tried to implement a very simple FSM in C++. Problem is, that this program will crash immediately, after executing. I am new to C++ so I can't find any bug here. Can anyone help? Thanks in advance!</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass State {\n    public:\n        virtual ~State() {}\n        virtual void update();\n};\n\nclass Hey_state : public State {\n    public:\n        virtual void update() { cout &lt;&lt; \"Hey!\\n\";}\n};\n\nclass How_state : public State {\n    public:\n        virtual void update() { cout &lt;&lt; \"How are you?\\n\";}\n};\n\nclass Stranger {\n    public:\n        Stranger(State *startState)\n        : currState(startState) {}\n        void greet() {\n            currState-&gt;update();\n        }\n        void setState(State *s) {currState = s;}\n    private:\n        State *currState;\n};\n\nint main() {\n    Hey_state *h;\n    Stranger s(h);\n    s.greet();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5469, "user_id": 350713, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2b37134235e21817f74cd8c47eb0538d?s=128&d=identicon&r=PG", "display_name": "Faheem Mitha", "link": "https://stackoverflow.com/users/350713/faheem-mitha"}, "edited": false, "score": 3, "creation_date": 1436989858, "post_id": 31440992, "comment_id": 50851308, "body": "For those of us who don&#39;t know what a lotto ticket is (yes, such people do exist) could you offer some explanation and context? Also, always prefer text to a screenshot - it can be searched for, occupies less space, and can be cut and pasted. Also, if you are using C++ for such a question (a) it&#39;s off topic here (b) it&#39;s probably the wrong tool. You&#39;re better off using Python, Perl, or R (or something similar)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5469, "user_id": 350713, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2b37134235e21817f74cd8c47eb0538d?s=128&d=identicon&r=PG", "display_name": "Faheem Mitha", "link": "https://stackoverflow.com/users/350713/faheem-mitha"}, "edited": false, "score": 0, "creation_date": 1437039049, "post_id": 31440992, "comment_id": 50868518, "body": "@FaheemMitha: &quot;Lotto ticket&quot; is a pretty generic English phrase. I think it&#39;s beyond the threshold at which a Google search is expected if you aren&#39;t familiar with it."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "Zach Stow"}, "edited": false, "score": 0, "creation_date": 1436989567, "post_id": 31440993, "comment_id": 50851309, "body": "That just ends up tabing everything over."}, {"owner": {"user_type": "does_not_exist", "display_name": "user123576"}, "edited": false, "score": 0, "creation_date": 1436990009, "post_id": 31440993, "comment_id": 50851310, "body": "focus on this line cout &lt;&lt;&quot;                  Mega&quot; &lt;&lt; endl;"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user123576"}, "is_accepted": false, "score": -1, "last_activity_date": 1436989430, "creation_date": 1436989430, "answer_id": 31440993, "question_id": 31440992, "link": "https://stackoverflow.com/questions/31440992/problems-with-creating-lotto-ticket/31440993#31440993", "title": "Problems with creating lotto ticket", "body": "<p>string formatting using the \\t ( tab ) to place  where it needs to be. </p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 4778290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05ca8dea8edd79497d5b0bbcaef61cc?s=128&d=identicon&r=PG&f=1", "display_name": "Ramiro Balado Ordax", "link": "https://stackoverflow.com/users/4778290/ramiro-balado-ordax"}, "is_accepted": true, "score": 1, "last_activity_date": 1436998676, "creation_date": 1436998676, "answer_id": 31442182, "question_id": 31440992, "link": "https://stackoverflow.com/questions/31440992/problems-with-creating-lotto-ticket/31442182#31442182", "title": "Problems with creating lotto ticket", "body": "<p>Move the last two lines from the fillup function to the end of the print function.\n As it is now, you're printing the mega after GENERATING the numbers, not after printing them.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1436993989, "question_id": 216263}, "owner": {"reputation": 157, "user_id": 5121696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/958969344121287/picture?type=large", "display_name": "Zach Stow", "link": "https://stackoverflow.com/users/5121696/zach-stow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 31442182, "answer_count": 2, "score": -1, "last_activity_date": 1436998676, "creation_date": 1436989016, "question_id": 31440992, "link": "https://stackoverflow.com/questions/31440992/problems-with-creating-lotto-ticket", "title": "Problems with creating lotto ticket", "body": "<p>I have to create a program that looks like the printout of a lotto ticket.\nYet I can't seem to get the \"mega\" number in the right place. We have to generate 5 random numbers between 1 and 56, then one more number between 1 and 44 (the mega number). So its supposed to look like this:\n<img src=\"https://i.stack.imgur.com/h7rPR.png\" alt=\"enter image description here\"></p>\n\n<p>Yet for some reason the mega number always prints before the 5 random numbers generated between 1 and 56.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include \"cs110a2.h\"\nusing namespace std;\n\nvoid fillup(int x[], int n, int from, int to)\n{\n    for(int i = 0; i &lt; n; i++)\n    {\n        x[i] = RAND(from,to);\n    }\n\n    cout &lt;&lt;\" \";\n    cout &lt;&lt; RAND(1,44); \n}\n\nint bubble_sort(int x[], int n)   \n{\n    for(int i = 0; i &lt; n-1; i++)\n    {\n        int temp;\n\n        for(int j=i+1; j&lt;n ; j++)\n        {\n            if(x[i] &gt; x[j])\n            {\n                temp = x[i];\n                x[i] = x[j];\n                x[j] = temp;\n            }\n        }\n    }\n    return(0);        //What! why?\n}\n\n\nvoid print(int x[], int n)\n{\n    for(int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; x[i] &lt;&lt;\" \";\n    }\n    cout &lt;&lt; endl;\n}\n\n\nint main(int argc, char **argv)\n{\n    srand(time(NULL)); \n\n    cout &lt;&lt;\"                  Mega\" &lt;&lt; endl;\n\n    for(int i = 0; i &lt; atoi(argv[1]); i++)\n    {\n        int lotto[5];\n\n        fillup(lotto,5,1,56);                    \n\n        bubble_sort(lotto,5);\n\n        print(lotto,5);\n    }\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencl", "gpu"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1436989648, "post_id": 31439512, "comment_id": 50848777, "body": "Whilst OpenCL is quite portable, it&#39;s not always &quot;performance portable&quot;, so you probably should tell us what hardware you are running on. Also doing ONE multiplication per kernel thread is likely quite slow on most architectures. I&#39;d do something like a 16 x 16,  4 x 32 or 256 x 256. How big is &quot;right&quot; will depend on your hardware, but it&#39;s PROBABLY better to have slightly less threads and more in each thread. Check if the documentation for your OpenCL implementation is saying something on the subject of &quot;tuning your kernels&quot;, etc."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 2, "creation_date": 1436991042, "post_id": 31439512, "comment_id": 50849565, "body": "So if you have 2GB of dedicated graphics memory, storing 3 x sizeof(float) x 16384 x 16384 will not happen, as that takes up 3GB. That could explain why it&#39;s very slow - I&#39;m not sure what the AMD/ATI OpenCL driver does in such a situation, but in one way or another it will have to store at least SOME of your allocations in main memory, and either use GPU paging to swap it back and forth in lumps, or use some kind of bus to access the data in CPU-memory space. Either of those are going to make it quite slow, I expect [I don&#39;t have ANY knowledge of what ATI/AMD are doing in their products]"}, {"owner": {"reputation": 865, "user_id": 2539126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AFbXK.png?s=128&g=1", "display_name": "Arkoudinos", "link": "https://stackoverflow.com/users/2539126/arkoudinos"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1436994465, "post_id": 31439512, "comment_id": 50851545, "body": "@MatsPetersson Thank you for your suggestions. I&#39;m curious to find out if this is happening due to memory issues or because of the few calculations per thread. But what should I do in order to change the calculations per thread?"}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1437055568, "post_id": 31439512, "comment_id": 50880035, "body": "Your host code is also timing the data transfer back from the device, which is probably dominating the runtime you are measuring. For benchmarking this sort of thing, I would usually run the kernel many times in a loop and take the average, which gives the device a chance to warm up."}, {"owner": {"reputation": 865, "user_id": 2539126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AFbXK.png?s=128&g=1", "display_name": "Arkoudinos", "link": "https://stackoverflow.com/users/2539126/arkoudinos"}, "edited": false, "score": 0, "creation_date": 1437056088, "post_id": 31439512, "comment_id": 50880461, "body": "Yes, I&#39;ve already seen and corrected that - I should have corrected that here also. The whole deal was about a few milliseconds faster for a 8192x8192 (~50ms kernel execution time) and about 0.5sec for a larger one 16384x16384 (about 7 seconds kernel execution time). Now, about your suggestion, I&#39;m going to test it and see what happens."}, {"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1556856172, "post_id": 31439512, "comment_id": 98577293, "body": "Lol, this is just a hadamard product, I cant believe I actually copied this"}], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 2539126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AFbXK.png?s=128&g=1", "display_name": "Arkoudinos", "link": "https://stackoverflow.com/users/2539126/arkoudinos"}, "edited": false, "score": 0, "creation_date": 1437054997, "post_id": 31441639, "comment_id": 50879517, "body": "Interestingly enough, I didn&#39;t see any performance increase. I&#39;ve experimented with many &quot;formations&quot; like different global and local work sizes, different number of threads and element calculations per thread, without any significant result. So I think that as you pointed out, possibly it&#39;s a lack of memory problem."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 865, "user_id": 2539126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AFbXK.png?s=128&g=1", "display_name": "Arkoudinos", "link": "https://stackoverflow.com/users/2539126/arkoudinos"}, "edited": false, "score": 0, "creation_date": 1437078163, "post_id": 31441639, "comment_id": 50893957, "body": "Yes, almost certainly, the &quot;not enough GPU memory&quot; is the issue, and of course, if you have 2GB of GPU memory and using that GPU to also draw the screen on your computer, it will probably use a bit of the GPU memory as screen frame buffer and various other things that are needed to draw onto your computer screen - fonts, icon bitmaps, etc"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1436996427, "creation_date": 1436996427, "answer_id": 31441639, "question_id": 31439512, "link": "https://stackoverflow.com/questions/31439512/opencl-matrix-multiplication-speed/31441639#31441639", "title": "OpenCL Matrix Multiplication Speed", "body": "<p>Writing an answer about \"how to do more calculations per thread\" because code-formatting is non-existent in comments, and also covering a little on memory usage... </p>\n\n<p>So, most OpenCL implementatins will need to run more than a couple of instructions per thread (and the right number of threads) for efficient performance. But like I said in comments, this is HIGHLY dependent on the actual architecture of the processing unit (GPU, CPU, or OpenCL-capable magical unit weaved from unicorn hair, whatever it may be) - each manufacturer of GPUs, CPUs and unicorn weavers have their own ideas of how to make a very efficient unit, and they all tend to change their mind as time flows too... ;)</p>\n\n<p>To do a little more work in one thread you could simply do:</p>\n\n<pre><code>#define NUM_PER_THREAD 16\n__kernel void kernel simple_add(\n __global float* X, \n __global float* Y, \n __global float* S, \n __global int *A)\n{\n\n   for(i = 0; i &lt; NUM_PER_THREAD; i++)\n   {\n      size_t index = get_global_id(0)*NUM_PER_THREAD + i;\n      S[index] = X[index] * Y[index];\n   }\n}\n</code></pre>\n\n<p>[This will do 1 x 16 blocks. It gets a bit more fun to try to do 16 x 16 or something like that, but can be done if you know the size (width) of the matrix]</p>\n\n<p>Regarding memory: GPU's that have dedicated local memory (in other words most graphics cards) will work MUCH faster if all the data fits in the graphics memory. Accessing \"main\" memory involves one of two approaches:</p>\n\n<ol>\n<li>long access times for each cache-line when the GPU is reading over the PCI-express bus [or whatever infrastructure is used] - this can be 100 or 1000x  slower than \"local\" memory. And the GPU also (most likely) has to ask the CPU if the memory content is in cache, and if so, wait further for the CPU to copy the data out to main memory... </li>\n<li>\"page in/out\" where the GPU stops, sends an interrupt to the CPU,\nthe CPU finds some suitable lump [lump in this context is the technical term for \"some amount of memory most likely around 4K or multiple thereof\"] of memory to \"remove\" from the GPU\nmemory, and copies that out to main memory, then copies in the\nrequired other lump of memory to the GPU memory - similar to when the OS is swapping memory to/from the hard-disk. And if you are unlucky, the GPU also has to do some interesting cache or TLB flushing to ensure that the correct data is being used.</li>\n</ol>\n\n<p>Note that I still (in the last hour or so) haven't got any particular insight in how the AMD/ATI GPU's work, or how their OpenCL driver works. The above is a mixture of guessing/knowing how GPUs work in general, understanding of how OpenCL works in general, and calculating the memory needed to store the three different arrays of 16K x 16K using <code>float</code>.</p>\n"}], "owner": {"reputation": 865, "user_id": 2539126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AFbXK.png?s=128&g=1", "display_name": "Arkoudinos", "link": "https://stackoverflow.com/users/2539126/arkoudinos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2466, "favorite_count": 0, "accepted_answer_id": 31441639, "answer_count": 1, "score": 1, "last_activity_date": 1437056219, "creation_date": 1436988953, "last_edit_date": 1437056219, "question_id": 31439512, "link": "https://stackoverflow.com/questions/31439512/opencl-matrix-multiplication-speed", "title": "OpenCL Matrix Multiplication Speed", "body": "<p>I wrote a small OpenCL application which calculates the product of two matrices. Now I've noticed that if the size of the matrix exceeds 8192 x 8192 there is a significant performance drop (calculation for a 16384 x 16384 is ~80 times slower) and even the serial implementation is over 5 times faster. Here is the host code:</p>\n\n<pre><code>/*Make some includes and definitions here*/\n#include \"stdafx.h\"\n#include &lt;CL/cl.hpp&gt;\n\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n#include \"util.hpp\" // utility library\n\n#define __CL_ENABLE_EXCEPTIONS\n#define ROWS (16384)    // ROWS of vectors a, b, and c\n#define COLUMNS (16384)\n\n/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\n#include \"metrics.h\"\n\n/*Start main()*/\n\nint main(void)\n{\n    int A;\n\n    // Fill vectors X and Y with random float values\n\n    float* h_x = new float[ROWS*COLUMNS];\n    for (int i = 0; i &lt; ROWS; ++i){\n        for (int j = 0; j &lt; COLUMNS; ++j){\n            h_x[j + i*COLUMNS] = rand() / (float)RAND_MAX;;\n        }\n    }\n    float* h_y = new float[ROWS*COLUMNS];\n    for (int i = 0; i &lt; ROWS; ++i){\n        for (int j = 0; j &lt; COLUMNS; ++j){\n            h_y[j + i*COLUMNS] = rand() / (float)RAND_MAX;;\n        }\n    }\n    float* h_s = new float[ROWS*COLUMNS];\n    for (int i = 0; i &lt; ROWS; ++i){\n        for (int j = 0; j &lt; COLUMNS; ++j){\n            h_s[j + i*COLUMNS] = 0.0;\n        }\n    }\n\n    /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\n\n    // Get all platforms (drivers)\n\n    std::vector&lt;cl::Platform&gt; all_platforms;\n    cl::Platform::get(&amp;all_platforms);\n\n\n    if (all_platforms.size() == 0){ // Check for issues\n        std::cout &lt;&lt; \" No platforms found. Check OpenCL installation!\\n\";\n        exit(1);\n    }\n\n    cl::Platform default_platform = all_platforms[0];\n    std::cout &lt;&lt; \"Using platform: \" &lt;&lt; default_platform.getInfo&lt;CL_PLATFORM_NAME&gt;() &lt;&lt; \"\\n\";\n\n    // Get default device of the default platform\n\n    std::vector&lt;cl::Device&gt; all_devices;\n    default_platform.getDevices(CL_DEVICE_TYPE_ALL, &amp;all_devices);\n\n    if (all_devices.size() == 0){ // Check for issues\n        std::cout &lt;&lt; \" No devices found. Check OpenCL installation!\\n\";\n        exit(1);\n    }\n\n    cl::Device default_device = all_devices[0];\n    std::cout &lt;&lt; \"Using device: \" &lt;&lt; default_device.getInfo&lt;CL_DEVICE_NAME&gt;() &lt;&lt; \"\\n\";\n\n    // Create an OpenCL context\n\n    cl::Context context({ default_device });\n\n    cl::Program program(context, util::loadProgram(\"saxy_kernel.cl\"), true);\n\n    if (program.build({ default_device }) != CL_SUCCESS){\n        std::cout &lt;&lt; \" Error building: \" &lt;&lt; program.getBuildInfo&lt;CL_PROGRAM_BUILD_LOG&gt;(default_device) &lt;&lt; \"\\n\";\n        getchar();\n        exit(1);\n    }\n\n    // create buffers on the device\n    cl::Buffer buffer_X(context, CL_MEM_READ_WRITE, sizeof(float)* ROWS*COLUMNS);\n    cl::Buffer buffer_Y(context, CL_MEM_READ_WRITE, sizeof(float)* ROWS*COLUMNS);\n    cl::Buffer buffer_S(context, CL_MEM_READ_WRITE, sizeof(float)* ROWS*COLUMNS);\n    cl::Buffer buffer_A(context, CL_MEM_READ_WRITE, sizeof(int));\n\n    //create queue to which we will push commands for the device.\n    cl::CommandQueue queue(context, default_device);\n\n    //write arrays A and B to the device\n    queue.enqueueWriteBuffer(buffer_X, CL_TRUE, 0, sizeof(float)* ROWS*COLUMNS, &amp;h_x[0]);\n    queue.enqueueWriteBuffer(buffer_Y, CL_TRUE, 0, sizeof(float)* ROWS*COLUMNS, &amp;h_y[0]);\n    queue.enqueueWriteBuffer(buffer_A, CL_TRUE, 0, sizeof(int), &amp;A);\n\n    StartCounter();\n    //run the kernel\n    cl::Kernel kernel_add = cl::Kernel(program, \"simple_add\");\n    kernel_add.setArg(0, buffer_X);\n    kernel_add.setArg(1, buffer_Y);\n    kernel_add.setArg(2, buffer_S);\n    kernel_add.setArg(3, buffer_A);\n\n    cl::NDRange global(ROWS*COLUMNS);\n    queue.enqueueNDRangeKernel(kernel_add, cl::NullRange, global, cl::NullRange);\n    queue.finish();\n\n    std::cout &lt;&lt; \"Kernel execution time: \" &lt;&lt; GetCounter() &lt;&lt; \"ms \\n\";\n\n    //read result C from the device to array C\n    queue.enqueueReadBuffer(buffer_S, CL_TRUE, 0, sizeof(float)*ROWS*COLUMNS, &amp;h_s[0]);\n\n\n\n    /*Print vectors\n    std::cout &lt;&lt; \"\\nMatrix #1: \\n\";\n    for (int i = 0; i&lt;ROWS*COLUMNS; i++){\n\n\n            std::cout &lt;&lt; \"\" &lt;&lt; h_x[i] &lt;&lt; \"\\t \";\n\n    }\n\n    std::cout &lt;&lt; \"\\n\\nMatrix #2: \\n\";\n    for (int i = 0; i&lt;ROWS*COLUMNS; i++){\n\n\n            std::cout &lt;&lt; \"\" &lt;&lt; h_y[i] &lt;&lt; \"\\t \";\n\n    }\n\n    std::cout &lt;&lt; \"\\n\\nResult: \\n\";\n    for (int i = 0; i&lt;ROWS*COLUMNS; i++){\n\n\n            std::cout &lt;&lt; \"\" &lt;&lt; h_s[i] &lt;&lt; \"\\t \";\n\n    }*/\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>and here is the kernel:</p>\n\n<pre><code>__kernel void kernel simple_add(\n   __global float* X, \n   __global float* Y, \n   __global float* S, \n   __global int *A){\n\n   S[get_global_id(0)] = X[get_global_id(0)] * Y[get_global_id(0)];\n\n}\n</code></pre>\n\n<p>Could you please explain me the reason? I know that I can achieve much better performance if I perform some algorithm optimizations, but I'm trying to figure out if this is the threshold of the \"naive\" implementation, or I'm doing something wrong (incorrect assignment of the work to groups).</p>\n\n<p><strong>EDIT:</strong> Because I was asked for in comments, the GPU I'm running the kernel is an AMD R9 270/2GB RAM. The CPU is an i7-4771 and the system has 8GB RAM.</p>\n"}, {"tags": ["c++", "algorithm", "opencv", "k-means"], "comments": [{"owner": {"reputation": 638, "user_id": 1576412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0Bg.jpg?s=128&g=1", "display_name": "Mark Miller", "link": "https://stackoverflow.com/users/1576412/mark-miller"}, "edited": false, "score": 0, "creation_date": 1436989702, "post_id": 31439355, "comment_id": 50848802, "body": "Are you clustering on one image or among many? Do you want the distance between two pixels to affect the clustering, or just the color values?"}, {"owner": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "reply_to_user": {"reputation": 638, "user_id": 1576412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0Bg.jpg?s=128&g=1", "display_name": "Mark Miller", "link": "https://stackoverflow.com/users/1576412/mark-miller"}, "edited": false, "score": 0, "creation_date": 1437050635, "post_id": 31439355, "comment_id": 50876058, "body": "Sorry for the silence.Yes I am clustering one image. I am not sure about the distance but as long as it allows me to discriminate between the clusters i.e to access all the pixels of a label that I choose (for example the largest one) it works for me. Thanks!"}, {"owner": {"reputation": 638, "user_id": 1576412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0Bg.jpg?s=128&g=1", "display_name": "Mark Miller", "link": "https://stackoverflow.com/users/1576412/mark-miller"}, "edited": false, "score": 0, "creation_date": 1437054287, "post_id": 31439355, "comment_id": 50878914, "body": "I can&#39;t tell if you&#39;re looking for all the pixels of the same color or all the pixels of the same color that are nearby each other in the input image (i.e, looking for a specific object). If you want pixels similar in color and nearby in the original image, then k-means isn&#39;t likely to work, because it doesn&#39;t take into account pixel location, just color. Also, another thing I&#39;d watch out for is a significantly different &quot;largest&quot; color each time k-means is run. If you run into these problems, let me know. If not, then it looks like Miki has you good to go!"}, {"owner": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "reply_to_user": {"reputation": 638, "user_id": 1576412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0Bg.jpg?s=128&g=1", "display_name": "Mark Miller", "link": "https://stackoverflow.com/users/1576412/mark-miller"}, "edited": false, "score": 0, "creation_date": 1437088762, "post_id": 31439355, "comment_id": 50898344, "body": "Thanks you as well !!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "edited": false, "score": 0, "creation_date": 1437052826, "post_id": 31442034, "comment_id": 50877735, "body": "Hey Miki ! sorry for the silence. I really appreciate your answer. In fact, I do not know the size of shapes in advance; I also kept &#39;imgRGB&#39; so the code I borrowed is easily identified. I&#39;ll give it a try and let you know. Thanks!!"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "edited": false, "score": 0, "creation_date": 1437052968, "post_id": 31442034, "comment_id": 50877851, "body": "@Gene let me know if something doesn&#39;t work as expected"}, {"owner": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "edited": false, "score": 0, "creation_date": 1437073020, "post_id": 31442034, "comment_id": 50891214, "body": "Wow! it worked. I used <code>max</code> to reserve space for <code>shape</code>. However, I had to revert back to using <code>Mat</code> because after converting the original image <code>img</code> to <code>Lab</code>, I am splitting it to eliminate the <code>L channel</code> before clustering (filling it with 0), and I couldn&#39;t figure out how to make the L zero. I liked the use of <code>Mat3b</code> so I was wondering how to zero the L channel. I am getting another error when splitting <code>imlab</code> to <code>imRGB</code> but I suspect it is tied to the L elimination issue."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "edited": false, "score": 0, "creation_date": 1437080082, "post_id": 31442034, "comment_id": 50894957, "body": "If you don&#39;t need L channel, just don&#39;t insert it ( in the for after the split).  I didn&#39;t get what you mean with the second part of your comment. But probably using split and setTo(0) should work for you."}, {"owner": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "edited": false, "score": 0, "creation_date": 1437088641, "post_id": 31442034, "comment_id": 50898305, "body": "Everything worked out great. Thanks again for your assistance!!"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 3, "last_activity_date": 1437000366, "last_edit_date": 1437000366, "creation_date": 1436998061, "answer_id": 31442034, "question_id": 31439355, "link": "https://stackoverflow.com/questions/31439355/how-to-access-a-particular-kmeans-cluster-in-opencv/31442034#31442034", "title": "How to access a particular kmeans cluster in opencv", "body": "<p>You are pretty close, but there are a few errors. The code below should work as expected. I also added a small piece of code to show the classification result, where pixels of the larger cluster are red, the other with shades of green.</p>\n\n<ol>\n<li>You never initialized <code>int clusters[5];</code>, so it will contains random numbers at the beginning, compromising it as an accumulator. I recommend to use <code>vector&lt;int&gt;</code> instead.</li>\n<li>You access <code>bestLabels</code> with wrong indices. Instead of <code>bestLables.data[y + x*imlab.cols]</code>, it should be <code>bestLables.data[y*imlab.cols + x]</code>. That caused your <code>inc &lt; max</code> issue. In the code below I used a <code>vector&lt;int&gt;</code> to contain indices, since it's easier to see the content of the vector. So I access <code>bestLabels</code> a little differently, i.e. <code>bestLables[y*imlab.cols + x]</code> instead of <code>bestLables.data[y*imlab.cols + x]</code>, but the result is the same. </li>\n<li>You had <code>Point2i shape[2000];</code>. I used a <code>vector&lt;Point&gt;</code>. Note that <code>Point</code> is just a typedef of <code>Point2i</code>. Since you don't know how many points will be there, better use a dynamic array. If you know that there will be, say, 2000 points, you'd better call <code>reserve</code> to avoid reallocations, but that's not mandatory. With <code>Point2i shape[2000];</code> if you have more than 2000 points you'll go out of bounds, with a <code>vector</code> you're safe. I used <code>emplace_back</code> to avoid a copy when appending the point (just like you did with the initializer list). Note that the contructor of <code>Point</code> is <code>(x,y)</code>, not <code>(y,x)</code>.</li>\n<li>Using <code>vector&lt;Point&gt;</code> you don't need <code>inc</code>, since you append the value at the end. If you need <code>inc</code> to store the number of points in the largest cluster, simply call <code>int inc = shape.size();</code></li>\n<li>You initialized <code>int cluster = 1</code>. That's an error, you should initialize it with the index of the largest cluster, i.e. <code>int cluster = indx;</code>.</li>\n<li>You are calling the vector of planes <code>imgRGB</code>, but you're working on Lab. You'd better change the name, but it's not an issue per se. Also, remember that RGB values are stored in OpenCV as BGR, not RGB (reversed order).</li>\n<li>I prefer <code>Mat1b</code>, <code>Mat3b</code>, etc... where possible over <code>Mat</code>. It allows easier access and is more readable (in my opinion). That's not an issue, but you'll see that in my code.</li>\n</ol>\n\n<p>Here we go:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;iostream&gt;\nusing namespace cv;\n\nint main(int argc, char** argv)\n{\n     Mat3b img = imread(\"path_to_image\");   \n\n    if (!img.data) \n    {\n        std::cout &lt;&lt; \"Could not open or find the image\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    Mat3b imlab;\n    cvtColor(img, imlab, CV_BGR2Lab);\n\n    /* Cluster image */\n    vector&lt;cv::Mat3b&gt; imgRGB;\n    int k = 5;\n    int n = img.rows * img.cols;\n    Mat img3xN(n, 3, CV_8U);\n\n    split(imlab, imgRGB);\n\n    for (int i = 0; i != 3; ++i)\n        imgRGB[i].reshape(1, n).copyTo(img3xN.col(i));\n\n    img3xN.convertTo(img3xN, CV_32F);\n\n    vector&lt;int&gt; bestLables;\n    kmeans(img3xN, k, bestLables, cv::TermCriteria(), 10, cv::KMEANS_RANDOM_CENTERS);\n\n    /* Find the largest cluster*/\n    int max = 0, indx= 0, id = 0;\n    vector&lt;int&gt; clusters(k,0);\n\n    for (size_t i = 0; i &lt; bestLables.size(); i++)\n    {\n        id = bestLables[i];\n        clusters[id]++;\n\n        if (clusters[id] &gt; max)\n        {\n            max = clusters[id];\n            indx = id;\n        }\n    }\n\n    /* save largest cluster */\n    int cluster = indx;\n\n    vector&lt;Point&gt; shape; \n    shape.reserve(2000);\n\n    for (int y = 0; y &lt; imlab.rows; y++)\n    {\n        for (int x = 0; x &lt; imlab.cols; x++)\n        {\n            if (bestLables[y*imlab.cols + x] == cluster) \n            {\n                shape.emplace_back(x, y);\n            }\n        }\n    }\n\n    int inc = shape.size();\n\n    // Show results\n    Mat3b res(img.size(), Vec3b(0,0,0));\n    vector&lt;Vec3b&gt; colors;\n    for(int i=0; i&lt;k; ++i)\n    {\n        if(i == indx) {\n            colors.push_back(Vec3b(0, 0, 255));\n        } else {\n            colors.push_back(Vec3b(0, 255 / (i+1), 0));\n        }\n    }\n\n    for(int r=0; r&lt;img.rows; ++r)\n    {\n        for(int c=0; c&lt;img.cols; ++c)\n        {\n            res(r,c) = colors[bestLables[r*imlab.cols + c]];\n        }\n    }\n\n    imshow(\"Clustering\", res);\n    waitKey(0);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5056703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f5da65882b41123d9b490eb6275bda?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/5056703/gene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2752, "favorite_count": 0, "accepted_answer_id": 31442034, "answer_count": 1, "score": 2, "last_activity_date": 1437000366, "creation_date": 1436988442, "last_edit_date": 1495540271, "question_id": 31439355, "link": "https://stackoverflow.com/questions/31439355/how-to-access-a-particular-kmeans-cluster-in-opencv", "title": "How to access a particular kmeans cluster in opencv", "body": "<p>I am new to opencv, and I am trying to find and save the largest cluster of a kmeaned clustered image. I have: </p>\n\n<ul>\n<li><p>clustered the image following the method provided by Mercury and Bill the Lizard in the following post (<a href=\"https://stackoverflow.com/questions/11411889/color-classification-with-k-means-in-opencv\">Color classification with k-means in OpenCV</a>), </p></li>\n<li><p>determined the largest cluster by finding the largest label count from the kmeans output (bestLables) </p></li>\n<li><p>tried to store the position of the pixels that constitute the largest cluster in an array of Point2i</p></li>\n</ul>\n\n<p>However, the mystery is that I found myself with a number of stored points that is significantly less than the count\nobtained when trying to find the largest cluster. In other words: inc &lt; max. Plus the number given by inc does not even correspond to any other clusters' number of points.</p>\n\n<p>What did I do wrong? or is there a better way to do what I'm trying to do?, any input will be much appreciated.\nThanks in advance for your precious help!!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"opencv2/opencv.hpp\"\n#include&lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nusing namespace cv;\nusing namespace std;\n\n\n\nint main(int argc, char** argv)\n{\n\n    Mat img = imread(\"pic.jpg\", CV_LOAD_IMAGE_COLOR);   \n\n    if (!img.data) \n    {\n        cout &lt;&lt; \"Could not open or find the image\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n\n    //imshow(\"img\", img);\n\n    Mat imlab;\n    cvtColor(img, imlab, CV_BGR2Lab);\n\n    /* Cluster image */\n    vector&lt;cv::Mat&gt; imgRGB;\n    int k = 5;\n    int n = img.rows *img.cols;\n    Mat img3xN(n, 3, CV_8U);\n\n    split(imlab, imgRGB);\n\n    for (int i = 0; i != 3; ++i)\n        imgRGB[i].reshape(1, n).copyTo(img3xN.col(i));\n\n    img3xN.convertTo(img3xN, CV_32F);\n\n    Mat bestLables;\n    kmeans(img3xN, k, bestLables, cv::TermCriteria(), 10, cv::KMEANS_RANDOM_CENTERS);\n\n    /*bestLables= bestLables.reshape(0,img.rows);\n    cv::convertScaleAbs(bestLables,bestLables,int(255/k));\n    cv::imshow(\"result\",bestLables);*/\n\n    /* Find the largest cluster*/\n    int max = 0, indx= 0, id = 0;\n    int clusters[5];\n\n    for (int i = 0; i &lt; bestLables.rows; i++)\n    {\n        id = bestLables.at&lt;int&gt;(i, 0);\n        clusters[id]++;\n\n        if (clusters[id] &gt; max)\n        {\n            max = clusters[id];\n            indx = id;\n        }\n    }\n\n    /* save largest cluster */\n    int cluster = 1, inc = 0;\n    Point2i shape[2000]; \n\n    for (int y = 0; y &lt; imlab.rows; y++)\n    {\n        for (int x = 0; x &lt; imlab.cols; x++)\n        {\n            if (bestLables.data[y + x*imlab.cols] == cluster) shape[inc++] = { y, x };\n        }\n    }\n\n\n    waitKey(0);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "draw"], "comments": [{"owner": {"reputation": 638, "user_id": 1576412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0Bg.jpg?s=128&g=1", "display_name": "Mark Miller", "link": "https://stackoverflow.com/users/1576412/mark-miller"}, "edited": false, "score": 0, "creation_date": 1436991734, "post_id": 31439318, "comment_id": 50849969, "body": "What specifically is not working?"}, {"owner": {"reputation": 1, "user_id": 4330079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7566dba28ada219cb8273926f1e7293?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/4330079/arya"}, "reply_to_user": {"reputation": 638, "user_id": 1576412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0Bg.jpg?s=128&g=1", "display_name": "Mark Miller", "link": "https://stackoverflow.com/users/1576412/mark-miller"}, "edited": false, "score": 0, "creation_date": 1436995547, "post_id": 31439318, "comment_id": 50852094, "body": "code can&#39;t draw circle  when I click on image"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437001239, "post_id": 31439318, "comment_id": 50854355, "body": "Your code, and you answer have many things wrong. Take a look at <a href=\"http://stackoverflow.com/a/31376558/5008845\">this</a> answer. It&#39;s for drawing rectangles, but you can easily modifiy it to draw a circle. In particular try to understand how to interact with the mouse and draw stuff on output image."}, {"owner": {"reputation": 1, "user_id": 4330079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7566dba28ada219cb8273926f1e7293?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/4330079/arya"}, "edited": false, "score": 0, "creation_date": 1437002017, "post_id": 31439318, "comment_id": 50854631, "body": "ok I take a look this answer and I try rewite my code and I will go back you"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1437002819, "post_id": 31439318, "comment_id": 50854894, "body": "review your function to get the circle parameters from 3 points. It seems wrong."}, {"owner": {"reputation": 1, "user_id": 4330079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7566dba28ada219cb8273926f1e7293?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/4330079/arya"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1438284797, "post_id": 31439318, "comment_id": 51400516, "body": "@Miki you are right! my circle function is wrong How can I make this function correctly"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1438292551, "post_id": 31439318, "comment_id": 51404520, "body": "@arya <a href=\"http://docs.opencv.org/3.0-beta/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#minenclosingcircle\" rel=\"nofollow noreferrer\">this</a> seems appropriate"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4330079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7566dba28ada219cb8273926f1e7293?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/4330079/arya"}, "is_accepted": false, "score": -1, "last_activity_date": 1436992885, "creation_date": 1436992885, "answer_id": 31440641, "question_id": 31439318, "link": "https://stackoverflow.com/questions/31439318/how-to-draw-a-circle-from-three-mouse-clicks-in-opencv/31440641#31440641", "title": "How to draw a circle from three mouse clicks in OpenCV?", "body": "<p>I can't combine these cods; but I hve done it </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nusing namespace cv;\nstatic int mouse_x = -1;\nstatic int mouse_y = -1;\nMat circle_eq(Point2f A,Point2f B,Point2f C)\n{\n    double W[3][3]={{A.x,A.y,1},\n                    {B.x,B.y,1},\n                    {C.x,C.y,1}};\n\n    double T[3][1]={-(A.x*A.x+A.y*A.y),\n                    -(B.x*B.x+B.y*B.y),\n                    -(C.x*C.x+C.y*C.y)};\n    Mat M=Mat(3,3,CV_64F,W);\n    Mat N=Mat(3,1,CV_64F,T);\n    Mat L=M.inv()*N;\n\n    return L;\n}\nvoid mouseKordinat(int evt, int x, int y, int flags, void* ptr)\n{\n\nif(evt == CV_EVENT_MOUSEMOVE)\n  {\n    mouse_x = x;\n    mouse_y = y;\n  }\nint tik;\n  tik = tik + 1;\n}\n\nvoid getPixelValue(Mat img, int x, int y);\nMat image;\n\nint main()\n{\n image = imread(\"c:/qwz/1q.jpg\");\n imshow(\"MyWindow\", image);\n setMouseCallback(\"MyWindow\", mouseKordinat, 0 );\ntik = tik%=3;\n\nif(tik==0)\n{   \nint merkez=circle_eq(nokta(0), nokta(1), nokta(2));\ncircle(image,merkez,3, Scalar(255,255,255),-1,8, nokta(0));\n}\nif(tik&gt;3)\n{\n    int nokta[0][0]=0;\n\n\n}\n  waitKey(0);\n return 0;\n}\n\nvoid mouseKordinat(int evt, int c, int r, int flags, void* ptr)\n{\n if(evt==CV_EVENT_LBUTTONDOWN)\n {\n getPixelValue(image,r,c);\n\n }\n}\n\nvoid getPixelValue(Mat img, int r, int c)\n{\n Vec3b pix=img.at&lt;Vec3b&gt;(r,c);\n int B = pix.val[0];\n int G = pix.val[1];\n int R = pix.val[2];\n cout&lt;&lt;\"Row:\"&lt;&lt;r&lt;&lt;\" \"&lt;&lt;\"Column:\"&lt;&lt;c&lt;&lt;\" - \"; \n cout&lt;&lt;\"B:\"&lt;&lt;B&lt;&lt;\" \"&lt;&lt;\"G:\"&lt;&lt;G&lt;&lt;\" \"&lt;&lt;\"R:\"&lt;&lt;R&lt;&lt;\"\\n\"; \n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4330079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7566dba28ada219cb8273926f1e7293?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/4330079/arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1437003804, "creation_date": 1436988347, "last_edit_date": 1437003804, "question_id": 31439318, "link": "https://stackoverflow.com/questions/31439318/how-to-draw-a-circle-from-three-mouse-clicks-in-opencv", "title": "How to draw a circle from three mouse clicks in OpenCV?", "body": "<p>I want to draw a circle on an image given 3 mouse clicks. \nWhat I mean is that I have an image and when I click 3 times on this image the  circle is drawn. In addition I already have the code to find the parameters of the circle given 3 points. </p>\n\n<pre><code>Mat cember_denklemi(Point2f A,Point2f B,Point2f C) {\n    double W[3][3]={{A.x,A.y,1},\n                    {B.x,B.y,1},\n                    {C.x,C.y,1}};\n\n    double T[3][1]={-(A.x*A.x+A.y*A.y),\n                    -(B.x*B.x+B.y*B.y),\n                    -(C.x*C.x+C.y*C.y)};\n    Mat M=Mat(3,3,CV_64F,W);\n    Mat N=Mat(3,1,CV_64F,T);\n    Mat L=M.inv()*N;\n\n    return L;\n}\n</code></pre>\n\n<p>And this my main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nusing namespace cv;\n\nvoid mouseKordinat(int evt, int x, int y, int flags, void* ptr);\nvoid getPixelValue(Mat img, int x, int y);\nMat image;\n\nint main() {\n    image = imread(\"c:/opencv2.4.6./atlas15.jpg\");\n    imshow(\"MyWindow\", image);\n    setMouseCallback(\"MyWindow\", mouseKordinat, 0 );\n    waitKey(0);\n    return 0;\n}\n\nvoid mouseKordinat(int evt, int c, int r, int flags, void* ptr) {\n    if(evt==CV_EVENT_LBUTTONDOWN) {\n        getPixelValue(image,r,c);\n    }\n} \nvoid getPixelValue(Mat img, int r, int c) {\n    Vec3b pix=img.at&lt;Vec3b&gt;(r,c);\n    int B = pix.val[0];\n    int G = pix.val[1];\n    int R = pix.val[2];\n    cout&lt;&lt;\"Row:\"&lt;&lt;r&lt;&lt;\" \"&lt;&lt;\"Column:\"&lt;&lt;c&lt;&lt;\" - \"; // mouse kordinatlari\n    cout&lt;&lt;\"B:\"&lt;&lt;B&lt;&lt;\" \"&lt;&lt;\"G:\"&lt;&lt;G&lt;&lt;\" \"&lt;&lt;\"R:\"&lt;&lt;R&lt;&lt;\"\\n\"; // kordinat\u0131n pixel de\u011ferleri\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "makefile"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436989407, "post_id": 31439291, "comment_id": 50848653, "body": "Why use cmake if you have a good enough <code>Makefile</code> ?"}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1436989549, "post_id": 31439291, "comment_id": 50848721, "body": "Because I&#39;m just trying to learn cmake and make, not create a real project..."}, {"owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 2, "creation_date": 1436990686, "post_id": 31439291, "comment_id": 50849362, "body": "Makefile and CMake has different concepts. I don&#39;t think your approach is a good way to learn CMake. It&#39;s like learning C by converting an assembly program to C to a series of inline asm calls then &quot;slowly changing&quot; groups asm calls to C statements. Instead, convert logical units of your makefile to CMake. For example: <code>add_executable(maintarget main.cpp)</code>, <code>target_link_libraries(maintarget &#47;usr&#47;lib&#47;alpha&#47;libbeta.so)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 0, "creation_date": 1436988807, "post_id": 31439448, "comment_id": 50848333, "body": "Yes, but it is exactly those commands which do not seem to be working for me. They do not seem to be able to find the libraries which the makefile is able to find. Therefore, I want to pass the exact same commands that the make file is using, and work from there."}, {"owner": {"reputation": 543, "user_id": 5112690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa89dde786bb4ecb01a90ff5f946cfc?s=128&d=identicon&r=PG&f=1", "display_name": "MrAnno", "link": "https://stackoverflow.com/users/5112690/mranno"}, "reply_to_user": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "edited": false, "score": 1, "creation_date": 1436989640, "post_id": 31439448, "comment_id": 50848773, "body": "I think you can achieve this by setting the CMAKE_EXE_LINKER_FLAG and CMAKE_CXX_FLAGS."}], "tags": [], "owner": {"reputation": 543, "user_id": 5112690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa89dde786bb4ecb01a90ff5f946cfc?s=128&d=identicon&r=PG&f=1", "display_name": "MrAnno", "link": "https://stackoverflow.com/users/5112690/mranno"}, "is_accepted": false, "score": 0, "last_activity_date": 1436989090, "last_edit_date": 1436989090, "creation_date": 1436988738, "answer_id": 31439448, "question_id": 31439291, "link": "https://stackoverflow.com/questions/31439291/how-to-add-compiler-commands-explicitly-with-cmake/31439448#31439448", "title": "How to add compiler commands explicitly with cmake", "body": "<p>You can use the <code>find_library</code>, <code>find_package</code>, <code>link_directories</code> and <code>target_link_libraries</code> commands.</p>\n\n<p>If you want to add compiler flags explicitly: <code>target_compile_options</code></p>\n\n<p><a href=\"http://www.cmake.org/cmake/help/v3.0/manual/cmake-commands.7.html\" rel=\"nofollow\">cmake-commands</a></p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436989090, "creation_date": 1436988256, "question_id": 31439291, "link": "https://stackoverflow.com/questions/31439291/how-to-add-compiler-commands-explicitly-with-cmake", "title": "How to add compiler commands explicitly with cmake", "body": "<p>I am trying to debug the linking of my C++ program in Ubuntu. I have a \"Makefile\", and if I run \"make\" on this, then the program compiles and links fine. However, I want to create a \"CMakeLists.txt\" file, and run \"cmake\", to get the equivalent result.</p>\n\n<p>The problem is, the \"CMakeLists.txt\" file I have written is not working as expected. So, what I would like to do is to add parts of the \"Makefile\" that does work, to my \"CMakeLists.txt\" file, and slowly change the \"CMakeLists.txt\" file until it breaks.</p>\n\n<p>So my questions is: In my \"CMakeLists.txt\" file, how can I explicitly add commands that are sent to the comiler?</p>\n\n<p>For example, if my \"Makefile\" has the following:</p>\n\n<pre><code>g++ main.cpp -L/usr/lib/alpha -lbeta\n</code></pre>\n\n<p>How can I pass the same arguments to the compiler, via cmake?</p>\n"}, {"tags": ["c++", "indexing", "logarithm"], "comments": [{"owner": {"reputation": 4258, "user_id": 2532275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFBUh.png?s=128&g=1", "display_name": "innoSPG", "link": "https://stackoverflow.com/users/2532275/innospg"}, "edited": false, "score": 1, "creation_date": 1436988545, "post_id": 31439271, "comment_id": 50848185, "body": "What do you want to convert to what? What did you try?"}], "answers": [{"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 0, "last_activity_date": 1436993033, "creation_date": 1436993033, "answer_id": 31440685, "question_id": 31439271, "link": "https://stackoverflow.com/questions/31439271/index-arithmetic-fast-converting-index-to-3d-coordinates/31440685#31440685", "title": "Index arithmetic - Fast converting index to 3D coordinates", "body": "<p>To:</p>\n\n<pre><code>x = index % 3;\ny = index / 3  % 3;\nz = index / 9;\n</code></pre>\n\n<p>Back:</p>\n\n<pre><code>index = ((z) * 3 + y) * 3 + x;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4820050, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3evbHm9l43I/AAAAAAAAAAI/AAAAAAAAAB0/HyxEjdx6jjU/photo.jpg?sz=128", "display_name": "Michael Buschmann", "link": "https://stackoverflow.com/users/4820050/michael-buschmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 31440685, "answer_count": 1, "score": -4, "last_activity_date": 1436993033, "creation_date": 1436988182, "last_edit_date": 1436990007, "question_id": 31439271, "link": "https://stackoverflow.com/questions/31439271/index-arithmetic-fast-converting-index-to-3d-coordinates", "title": "Index arithmetic - Fast converting index to 3D coordinates", "body": "<p>What is the fastes way in C++ to convert an index with such a formation to X, Y and Z coordinates and back ?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I want for example get for the index 15 the numbers X=0, Y=1, Z=2, for the index 17 the numbers X=2, Y=1, Z=2, and for the index 22 the numbers X=1, Y=2, Z=1.</p>\n\n<p>I need this to emulate a multidimensional array.</p>\n\n<p><img src=\"https://i.stack.imgur.com/zNGWZ.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "r", "memory", "rcpp"], "comments": [{"owner": {"reputation": 91, "user_id": 3853375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fc4e3a72b9b03fdc73aa528051f7d1?s=128&d=identicon&r=PG&f=1", "display_name": "master_goon", "link": "https://stackoverflow.com/users/3853375/master-goon"}, "edited": false, "score": 0, "creation_date": 1437023144, "post_id": 31439134, "comment_id": 50860169, "body": "I tested the same problem using <b>sourceCpp()</b> and as a R package. I am having the same issue with large unexpected memory usage when I pass large objects to C++."}, {"owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "edited": false, "score": 2, "creation_date": 1437061776, "post_id": 31439134, "comment_id": 50884658, "body": "This doesn&#39;t seem to be an issue for an <code>arma::mat</code>, but I get exactly the same problem with an <code>arma::cube</code>. Might it relate to the lack of a proper 3d-array class within Rcpp?"}, {"owner": {"reputation": 91, "user_id": 3853375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fc4e3a72b9b03fdc73aa528051f7d1?s=128&d=identicon&r=PG&f=1", "display_name": "master_goon", "link": "https://stackoverflow.com/users/3853375/master-goon"}, "reply_to_user": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "edited": false, "score": 0, "creation_date": 1437093601, "post_id": 31439134, "comment_id": 50899599, "body": "Yeah. It works for arma::mat. But since <b>input_</b> is a Rcpp::NumericVector and I&#39;m using a pointer to initialize the arma::cube variable, should that matter? I&#39;m probably wrong though."}], "answers": [{"comments": [{"owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "edited": false, "score": 1, "creation_date": 1437132131, "post_id": 31473382, "comment_id": 50914370, "body": "Just posted an issue on the <a href=\"https://github.com/RcppCore/RcppArmadillo/issues/47\" rel=\"nofollow noreferrer\">RcppArmadillo github page</a>"}, {"owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "reply_to_user": {"reputation": 91, "user_id": 3853375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fc4e3a72b9b03fdc73aa528051f7d1?s=128&d=identicon&r=PG&f=1", "display_name": "master_goon", "link": "https://stackoverflow.com/users/3853375/master-goon"}, "edited": false, "score": 1, "creation_date": 1437135736, "post_id": 31473382, "comment_id": 50916480, "body": "It&#39;s an Armadillo rather than RcppArmadillo problem. I&#39;ll let Conrad Sanderson know."}, {"owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1437141985, "post_id": 31473382, "comment_id": 50920552, "body": "@DirkEddelbuettel thanks, and sorry for the assumption at one point that it was your package&#39;s code that was at fault!"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 3, "creation_date": 1437142303, "post_id": 31473382, "comment_id": 50920781, "body": "That is a fair assumption though. I usually start by thinking it is my fault.  That&#39;s how it goes if you have been married as long as I have ;-)"}, {"owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1438601780, "post_id": 31473382, "comment_id": 51501043, "body": "@DirkEddelbuettel now updated with the new prealloc_mat option in Armadillo 5.300"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1438602401, "post_id": 31473382, "comment_id": 51501420, "body": "Yes, the final Armadillo 5.300 (now 5.300.4) came out very late yesterday and I am preparing it now.  We had several prereleases in GitHub."}], "tags": [], "owner": {"reputation": 12012, "user_id": 4998761, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e38623efd528efef8abb6596d74e679a?s=128&d=identicon&r=PG", "display_name": "Nick Kennedy", "link": "https://stackoverflow.com/users/4998761/nick-kennedy"}, "is_accepted": true, "score": 4, "last_activity_date": 1438868976, "last_edit_date": 1495541170, "creation_date": 1437127761, "answer_id": 31473382, "question_id": 31439134, "link": "https://stackoverflow.com/questions/31439134/rcpparmadillo-issue-with-memory-usage/31473382#31473382", "title": "RcppArmadillo: Issue with memory usage", "body": "<p><strong>Edit after new version of Armadillo (5.300)</strong></p>\n\n<p>After this initial Q/A on StackOverflow, Conrad Sanderson and I engaged in some email discussion about this issue. By design, the <code>arma::cube</code> objects create an <code>arma::mat</code> for each slice (the third dimension) of the <code>cube</code>. This is done during the creation of the <code>cube</code>, even if the data is copied from existing memory (as in the original question). Since this is not always needed, I suggested there should be an option to disable the pre-allocation of matrices for the slices. As of the current version of Armadillo (5.300.4), there now is. This can be installed from CRAN.</p>\n\n<p>Example code:</p>\n\n<pre><code>library(RcppArmadillo)\nlibrary(inline)\ncode &lt;- \"\n  Rcpp::NumericVector input_(input);\n  arma::cube disturb(input_.begin(), 2, 2, 50000000, false, true, false);\n  return wrap(2);\n\"\nTest &lt;- cxxfunction(signature(input = \"numeric\"), plugin = \"RcppArmadillo\", body = code)\ninput &lt;- array(rnorm(2 * 2 * 50000000), dim = c(2, 2, 50000000))\nTest(input)\n</code></pre>\n\n<p>The key thing here is that the <code>cube</code> constructor is now called using <code>arma::cube disturb(input.begin(), 2, 2, 50000000, false, true, false);</code>. The final <code>false</code> here is the new <code>prealloc_mat</code> parameter which determines whether or not to pre-allocate the matrices. The <code>slice</code> method will still work fine on a <code>cube</code> without pre-allocated matrices - the matrix will be allocated on demand. However, if you're directly accessing the <code>mat_ptrs</code> member of a <code>cube</code> it will be filled with <code>NULL</code> pointers. <a href=\"http://arma.sourceforge.net/docs.html#Cube\" rel=\"nofollow noreferrer\">The help has also been updated.</a></p>\n\n<p>Many thanks to Conrad Sanderson for acting so quickly to provide this additional option, and to Dirk Eddelbuettel for all his work on Rcpp and RcppArmadillo!</p>\n\n<p><strong>Original answer</strong></p>\n\n<p>It's a slightly bizarre one. I've tried with a range of different array sizes, and the problem only occurs with arrays where the 3rd dimension is much bigger than the other 2. Here's a reproducible example:</p>\n\n<pre><code>library(\"RcppArmadillo\")\nlibrary(\"inline\")\ncode &lt;- \"\nRcpp::NumericVector input_(input);\nIntegerVector dim = input_.attr(\\\"dim\\\");\narma::cube disturb(input_.begin(), dim[0], dim[1], dim[2], false);\ndisturb[0, 0, 0] = 45;\nreturn wrap(2);\n\"\nTest &lt;- cxxfunction(signature(input = \"numeric\"), plugin = \"RcppArmadillo\", body = code)\ninput &lt;- array(0, c(1e7, 2, 2))\nTest(input)\n# no change in memory usage\n\ndim(input) &lt;- c(2, 1e7, 2)\ngc()\nTest(input)\n# no change in memory usage\n\ndim(input) &lt;- c(2, 2, 1e7)\ngc()\nTest(input)\n# spike in memory usage\n\ndim(input) &lt;- c(20, 2, 1e6)\ngc()\nTest(input)\n# no change in memory usage\n</code></pre>\n\n<p>This suggests it's something about the way that the <code>Aramadillo</code> library is implemented (or possibly <code>RcppArmadillo</code>). It certainly doesn't seem to be something you're doing wrong.</p>\n\n<p>Note I've included some modification in place of the data (setting the first element to 45), and you can confirm that in each case the data <strong>is</strong> modified in place, suggesting there isn't a copy going on.</p>\n\n<p>For now, I'd suggest if possible organising your 3d arrays such that the largest dimension isn't the third one.</p>\n\n<p><strong>EDIT</strong> After doing some more digging, it looks as though there <strong>is</strong> allocation of RAM during the creation of the <code>arma::cube</code>. In <code>Cube_meat.hpp</code>, in the <code>create_mat</code> method, there's the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if(n_slices &lt;= Cube_prealloc::mat_ptrs_size)\n  {\n  access::rw(mat_ptrs) = const_cast&lt; const Mat&lt;eT&gt;** &gt;(mat_ptrs_local);\n  }\nelse\n  {\n  access::rw(mat_ptrs) = new(std::nothrow) const Mat&lt;eT&gt;*[n_slices];\n\n  arma_check_bad_alloc( (mat_ptrs == 0), \"Cube::create_mat(): out of memory\" );\n  }\n}\n</code></pre>\n\n<p><code>Cube_prealloc::mat_ptrs_size</code> seems to be 4, so it's actually an issue for any array with more than 4 slices.</p>\n\n<p>I posted an <a href=\"https://github.com/RcppCore/RcppArmadillo/issues/47\" rel=\"nofollow noreferrer\">issue on github</a>.</p>\n\n<p><strong>EDIT2</strong> However, it's definitely an issue with the underlying Armadillo code. Here's a reproducible example which doesn't use Rcpp at all. This is linux-only - it uses code from <a href=\"https://stackoverflow.com/questions/669438/how-to-get-memory-usage-at-run-time-in-c\">How to get memory usage at run time in c++?</a> to pull out the current memory usage of the running process.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;armadillo&gt;\n#include &lt;unistd.h&gt;\n#include &lt;ios&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n//////////////////////////////////////////////////////////////////////////////\n//\n// process_mem_usage(double &amp;, double &amp;) - takes two doubles by reference,\n// attempts to read the system-dependent data for a process' virtual memory\n// size and resident set size, and return the results in KB.\n//\n// On failure, returns 0.0, 0.0\n\nvoid process_mem_usage(double&amp; vm_usage, double&amp; resident_set)\n{\n   using std::ios_base;\n   using std::ifstream;\n   using std::string;\n\n   vm_usage     = 0.0;\n   resident_set = 0.0;\n\n   // 'file' stat seems to give the most reliable results\n   //\n   ifstream stat_stream(\"/proc/self/stat\",ios_base::in);\n\n   // dummy vars for leading entries in stat that we don't care about\n   //\n   string pid, comm, state, ppid, pgrp, session, tty_nr;\n   string tpgid, flags, minflt, cminflt, majflt, cmajflt;\n   string utime, stime, cutime, cstime, priority, nice;\n   string O, itrealvalue, starttime;\n\n   // the two fields we want\n   //\n   unsigned long vsize;\n   long rss;\n\n   stat_stream &gt;&gt; pid &gt;&gt; comm &gt;&gt; state &gt;&gt; ppid &gt;&gt; pgrp &gt;&gt; session &gt;&gt; tty_nr\n               &gt;&gt; tpgid &gt;&gt; flags &gt;&gt; minflt &gt;&gt; cminflt &gt;&gt; majflt &gt;&gt; cmajflt\n               &gt;&gt; utime &gt;&gt; stime &gt;&gt; cutime &gt;&gt; cstime &gt;&gt; priority &gt;&gt; nice\n               &gt;&gt; O &gt;&gt; itrealvalue &gt;&gt; starttime &gt;&gt; vsize &gt;&gt; rss; // don't care about the rest\n\n   stat_stream.close();\n\n   long page_size_kb = sysconf(_SC_PAGE_SIZE) / 1024; // in case x86-64 is configured to use 2MB pages\n   vm_usage     = vsize / 1024.0;\n   resident_set = rss * page_size_kb;\n}\n\nusing namespace std;\nusing namespace arma;\n\nvoid test_cube(double* numvec, int dim1, int dim2, int dim3) {\n  double vm, rss;\n\n  cout &lt;&lt; \"Press enter to continue\";\n  cin.get();\n\n  process_mem_usage(vm, rss);\n  cout &lt;&lt; \"Before:- VM: \" &lt;&lt; vm &lt;&lt; \"; RSS: \" &lt;&lt; rss &lt;&lt; endl;\n\n  cout &lt;&lt; \"cube c1(numvec, \" &lt;&lt; dim1 &lt;&lt; \", \" &lt;&lt; dim2 &lt;&lt; \", \" &lt;&lt; dim3 &lt;&lt; \", false)\" &lt;&lt; endl;\n  cube c1(numvec, dim1, dim2, dim3, false);\n\n  process_mem_usage(vm, rss);\n  cout &lt;&lt; \"After:-  VM: \" &lt;&lt; vm &lt;&lt; \"; RSS: \" &lt;&lt; rss &lt;&lt; endl &lt;&lt; endl;\n}\n\nint\nmain(int argc, char** argv)\n  {\n  double* numvec = new double[40000000];\n\n  test_cube(numvec, 10000000, 2, 2);\n  test_cube(numvec, 2, 10000000, 2);\n  test_cube(numvec, 2, 2, 1000000);\n  test_cube(numvec, 2, 2, 2000000);\n  test_cube(numvec, 4, 2, 2000000);\n  test_cube(numvec, 2, 4, 2000000);\n  test_cube(numvec, 4, 4, 2000000);\n  test_cube(numvec, 2, 2, 10000000);\n\n  cout &lt;&lt; \"Press enter to finish\";\n  cin.get();\n\n  return 0;\n  }\n</code></pre>\n\n<p><strong>EDIT 3</strong> Per the <code>create_mat</code> code above, an <code>arma::mat</code> is created for <strong>each</strong> slice of a cube. On my 64-bit machine, this results in 184 bytes of overhead for each slice. For a cube with 5e7 slices, that equates to 8.6 GiB of overhead even though the underlying numeric data only takes up 1.5 GiB. I've emailed Conrad Sanderson to ask if this is fundamental to the way that Armadillo works or could be changed, but for now it definitely seems that you want your <code>slice</code> dimension (the third one) to be the smallest of the three if at all possible. It's also worth noting that this applies to <strong>all</strong> <code>cube</code>s, not just those created from existing memory. Using the <code>arma::cube(dim1, dim2, dim3)</code> constructor leads to the same memory usage.</p>\n"}], "owner": {"reputation": 91, "user_id": 3853375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fc4e3a72b9b03fdc73aa528051f7d1?s=128&d=identicon&r=PG&f=1", "display_name": "master_goon", "link": "https://stackoverflow.com/users/3853375/master-goon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 0, "accepted_answer_id": 31473382, "answer_count": 1, "score": 5, "last_activity_date": 1438868976, "creation_date": 1436987756, "last_edit_date": 1437055042, "question_id": 31439134, "link": "https://stackoverflow.com/questions/31439134/rcpparmadillo-issue-with-memory-usage", "title": "RcppArmadillo: Issue with memory usage", "body": "<p>I have started using Rcpp. I like it a lot. I am fairly new to programming. I have a question regarding memory usage. Below is a reproducible problem:</p>\n\n<pre><code>library(RcppArmadillo)\nlibrary(inline)\ncode &lt;- \"\n  Rcpp::NumericVector input_(input);\n  arma::cube disturb(input_.begin(), 2, 2, 50000000, false);\n  return wrap(2);\n\"\nTest &lt;- cxxfunction(signature(input = \"numeric\"), plugin = \"RcppArmadillo\", body = code)\ninput &lt;- array(rnorm(2 * 2 * 50000000), dim = c(2, 2, 50000000))\nTest(input)\n</code></pre>\n\n<p>My understanding is that in the problem above the only memory usage is when I assign an array to the variable <strong>input</strong> in R. So I should only be using around 1.6 gb (2*2*50*8 = 1600). When I go to Rcpp, I initialise the variable <strong>input_</strong> using SEXP object which is a pointer. So this should not use any additional memory. Then when I initialise the variable <strong>disturb</strong>, I also use a pointer and set copy_aux = FALSE. So I should not be using any memory. So if my understanding is correct, I should only be using 1.6 gb when I run the code. Is this correct?</p>\n\n<p>However, when I run the code, the memory usage (judging by looking at System Monitor in Ubuntu) jumps above 10 gb (from around 1 gb) before falling back down to around 4 gb. I don't understand what is going on. Did I use Rcpp incorrectly?</p>\n\n<p>Your help is appreciated. Many thanks.</p>\n"}, {"tags": ["c++", "yaml-cpp"], "answers": [{"tags": [], "owner": {"reputation": 29797, "user_id": 112, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8cff214f16c7c8e73244a8ed8dea7e0e?s=128&d=identicon&r=PG", "display_name": "Jesse Beder", "link": "https://stackoverflow.com/users/112/jesse-beder"}, "is_accepted": true, "score": 2, "last_activity_date": 1437003253, "creation_date": 1437003253, "answer_id": 31443014, "question_id": 31439034, "link": "https://stackoverflow.com/questions/31439034/get-a-pointer-to-a-subordinate-yamlnode/31443014#31443014", "title": "Get a pointer to a subordinate YAML::Node", "body": "<p>Just pass a <code>YAML::Node</code>, not a pointer. <code>YAML::Node</code> is already a reference type, so you can pass it like a pointer.</p>\n"}], "owner": {"reputation": 1098, "user_id": 429596, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f3dc2de9fad3266e19c054da2d76f38?s=128&d=identicon&r=PG", "display_name": "Fadecomic", "link": "https://stackoverflow.com/users/429596/fadecomic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 31443014, "answer_count": 1, "score": 1, "last_activity_date": 1437003253, "creation_date": 1436987392, "question_id": 31439034, "link": "https://stackoverflow.com/questions/31439034/get-a-pointer-to-a-subordinate-yamlnode", "title": "Get a pointer to a subordinate YAML::Node", "body": "<p>I am writing a config file library, and I'd like to have a pointer to a sub-node to pass to functions expecting <code>YAML::Node*</code>, for example for building up a YAML document.</p>\n\n<p>I can create a new Node and get a pointer easily enough:</p>\n\n<pre><code>YAML::Node* foo = new YAML::Node(); // Null node\n</code></pre>\n\n<p>and I can add a new sub node easily enough: </p>\n\n<pre><code>(*foo)[\"bar\"] = baz; \n</code></pre>\n\n<p>However, I don't know how to get a pointer to <code>(*foo)[\"bar\"]</code>. If I try </p>\n\n<pre><code>&amp;((*foo)[\"bar\"]);\n</code></pre>\n\n<p>I get <code>error: taking address of temporary</code>, which is true, because the <code>[]</code> operator returns a YAML::Node. Is there a way to get a pointer to <code>(*foo)[\"bar\"]</code> so that I can pass it to something like </p>\n\n<pre><code>void f(YAML::Node* const blah) \n{\n    (*blah)[\"banana\"] = 1;\n}\n</code></pre>\n\n<p>which is useful, because then I can build up a tree with recursive calls to <code>f</code>.</p>\n"}, {"tags": ["c++", "winapi", "file-management"], "comments": [{"owner": {"reputation": 9718, "user_id": 1424244, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d8d370542399af1afe3202ed1fc1ab88?s=128&d=identicon&r=PG", "display_name": "IS4", "link": "https://stackoverflow.com/users/1424244/is4"}, "edited": false, "score": 2, "creation_date": 1506172789, "post_id": 31439011, "comment_id": 79718412, "body": "Some targets may not be valid or representable without the prefix."}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 0, "creation_date": 1437053830, "post_id": 31439235, "comment_id": 50878551, "body": "Do you know if the \\\\?\\ is always prepended? Or does it vary from system to system?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 1, "creation_date": 1437059649, "post_id": 31439235, "comment_id": 50883137, "body": "I addressed that in my answer."}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "reply_to_user": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 0, "creation_date": 1519275743, "post_id": 31439235, "comment_id": 84846238, "body": "@amza: \\\\?\\ is the prefix that changes <code>CreateFile</code> to point at the NT namespace rather than the NT namespace."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 3, "creation_date": 1519277424, "post_id": 31439235, "comment_id": 84846807, "body": "@BillyONeal that makes no sense. Read what you wrote."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 5, "last_activity_date": 1436988492, "last_edit_date": 1436988492, "creation_date": 1436988089, "answer_id": 31439235, "question_id": 31439011, "link": "https://stackoverflow.com/questions/31439011/getfinalpathnamebyhandle-result-without-prepended/31439235#31439235", "title": "GetFinalPathNameByHandle() result without prepended &#39;\\\\?\\&#39;", "body": "<blockquote>\n  <p>how can I get it to return just C:\\mydir\\etc</p>\n</blockquote>\n\n<p>You cannot.  <code>VOLUME_NAME_DOS</code> and <code>VOLUME_NAME_GUID</code> <em>always</em> use that format, and is documented as such:</p>\n\n<blockquote>\n  <p>The string that is returned by this function uses the <code>\\\\?\\</code> syntax.</p>\n</blockquote>\n\n<p>See the <strong>example results</strong> in the Community Additions section of the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364962.aspx\" rel=\"noreferrer\">documentation</a>.</p>\n\n<blockquote>\n  <p>Note: I don't want to check for the string <code>\\\\?\\</code> and just memmove it, its a bit too hackish of a solution for this program. </p>\n</blockquote>\n\n<p>That is the easiest solution.  Otherwise, you have to use other APIs to translate the returned path into a more human-readable path.  Such as using the result of <code>VOLUME_NAME_NT</code> with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365461.aspx\" rel=\"noreferrer\"><code>QueryDosDevice()</code></a>, or using the result of <code>VOLUME_NAME_GUID</code> with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364998.aspx\" rel=\"noreferrer\"><code>GetVolumePathNamesForVolumeName()</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "is_accepted": false, "score": 1, "last_activity_date": 1582454209, "last_edit_date": 1582454209, "creation_date": 1539800366, "answer_id": 52861283, "question_id": 31439011, "link": "https://stackoverflow.com/questions/31439011/getfinalpathnamebyhandle-result-without-prepended/52861283#52861283", "title": "GetFinalPathNameByHandle() result without prepended &#39;\\\\?\\&#39;", "body": "<p>I know, you don't want to check for <code>\\\\?\\</code> and remove it, but as Remy explains in his <a href=\"https://stackoverflow.com/a/31439235/2675154\">answer</a>, that's the easiest solution. However, you should be careful, because local paths and network paths have different prefixes. As you know, a local path starts with <code>\\\\?\\</code>, but a network path starts with <code>\\\\?\\UNC\\</code> (as described <a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file\" rel=\"nofollow noreferrer\">here</a>), for example:</p>\n\n<pre><code>\\\\?\\UNC\\My server\\My share\\Directory\n</code></pre>\n\n<p>As a result, based on your code, my solution to remove the prefixes is as follows:</p>\n\n<pre><code>char existingTarget[MAX_PATH];\nHANDLE hFile = CreateFileA(linkPath.c_str(), GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);\nif (INVALID_HANDLE_VALUE != hFile)\n{\n    DWORD ret = GetFinalPathNameByHandleA(hFile, existingTarget, MAX_PATH, FILE_NAME_OPENED);\n    CloseHandle(hFile);\n\n    // Check whether existingTarget is large enough to hold the final path.\n    if (ret &lt; MAX_PATH)\n    {\n        // The local path prefix is also a prefix of the network path prefix.\n        // Therefore, look for the network path prefix first.\n        // Please note that backslashes have to be escaped.\n        std::string targetPath(existingTarget);\n        if (targetPath.substr(0, 8).compare(\"\\\\\\\\?\\\\UNC\\\\\") == 0)\n        {\n            // In case of a network path, replace `\\\\?\\UNC\\` with `\\\\`.\n            targetPath = \"\\\\\" + targetPath.substr(7);\n        }\n        else if (targetPath.substr(0, 4).compare(\"\\\\\\\\?\\\\\") == 0)\n        {\n            // In case of a local path, crop `\\\\?\\`.\n            targetPath = targetPath.substr(4);\n        }\n    }\n}\n</code></pre>\n\n<p>If needed, you can still use <code>memmove()</code> to copy <code>targetPath</code> into another variable.</p>\n"}], "owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3449, "favorite_count": 0, "accepted_answer_id": 31439235, "answer_count": 2, "score": 3, "last_activity_date": 1582454209, "creation_date": 1436987325, "last_edit_date": 1539801267, "question_id": 31439011, "link": "https://stackoverflow.com/questions/31439011/getfinalpathnamebyhandle-result-without-prepended", "title": "GetFinalPathNameByHandle() result without prepended &#39;\\\\?\\&#39;", "body": "<p>Here is my code snippet:</p>\n\n<pre><code>char existingTarget[MAX_PATH]; \nHANDLE hFile = CreateFile(linkPath.c_str(), GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);\nif (INVALID_HANDLE_VALUE != hFile)\n{\n    GetFinalPathNameByHandle(hFile, existingTarget, MAX_PATH, FILE_NAME_OPENED);\n    CloseHandle(hFile);\n}\n</code></pre>\n\n<p>However, <code>existingTarget</code> is coming out to be <code>\\\\?\\C:\\mydir\\etc</code>. How can I get it to return just <code>C:\\mydir\\etc</code>?</p>\n\n<p><em>Note</em>: I don't want to check for the string <code>\\\\?\\</code> and just <code>memmove</code> it, it's a bit too hackish of a solution for this program.</p>\n"}, {"tags": ["c++", "input", "enums"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436987432, "post_id": 31438979, "comment_id": 50847580, "body": "This code does not compile.  You must be running code that&#39;s different from what you&#39;re showing here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1436987435, "post_id": 31438979, "comment_id": 50847582, "body": "What&#39;s <code>Status</code> inn the <code>std::map&lt;std::string,Status&gt; m;</code> declaration actually? Shouldn&#39;t this be <code>Title</code>??"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1436987445, "post_id": 31438979, "comment_id": 50847589, "body": "problem is not with code but with your expectations, <code>cout</code> will not print stringified enum"}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 699, "user_id": 4029938, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Resolution", "link": "https://stackoverflow.com/users/4029938/resolution"}, "edited": false, "score": 0, "creation_date": 1436988054, "post_id": 31439062, "comment_id": 50847923, "body": "@Resolution Use the search function! <a href=\"http://stackoverflow.com/questions/3342726/c-print-out-enum-value-as-text\" title=\"c print out enum value as text\">stackoverflow.com/questions/3342726/&hellip;</a>"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 2, "last_activity_date": 1436989408, "last_edit_date": 1436989408, "creation_date": 1436987483, "answer_id": 31439062, "question_id": 31438979, "link": "https://stackoverflow.com/questions/31438979/how-to-map-user-input-with-enum-value/31439062#31439062", "title": "How to map user input with enum value?", "body": "<p>An <code>enum</code> does not really store a series of characters as you seem to think, it just provides new names for some values of the underlying type (in your case, <code>int</code>). (This is somewhat simplified of course, but good enough to explain the observed behavior.)</p>\n\n<p>Thus, printing an <code>enum</code>-element does not print its \"name\", but will result in the element being converted to the underlying type and then printed.</p>\n"}], "owner": {"reputation": 699, "user_id": 4029938, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Resolution", "link": "https://stackoverflow.com/users/4029938/resolution"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1436989583, "creation_date": 1436987221, "last_edit_date": 1436987974, "question_id": 31438979, "link": "https://stackoverflow.com/questions/31438979/how-to-map-user-input-with-enum-value", "title": "How to map user input with enum value?", "body": "<p>I have a basic <code>enum</code> declaration:</p>\n\n<pre><code>enum Title {Prof, Dr, Mr, Mdm, Mrs, Miss, NA};\n</code></pre>\n\n<p>I'm trying to map the user input(0,1,2,3,4,5,AnyNumber) with correct value from <code>enum</code> like this:</p>\n\n<pre><code>std::map&lt;std::string,Title&gt; m;\nm[\"0\"] = Prof;\nm[\"1\"] = Dr;\nm[\"2\"] = Mr;\nm[\"3\"] = Mdm;\nm[\"4\"] = Mrs;\nm[\"5\"] = Miss;\n\nstd::string stitle;\n\ncout &lt;&lt; \"\\n\" &lt;&lt; \"Title (0:Prof 1:Dr 2:Mr 3:Mdm 4:Mrs 5:Miss Any:NA): \";\ncin &gt;&gt; stitle;\nTitle title = m[stitle];\ncout &lt;&lt; title; // output 1 when I input 1, output 2 when I input 2 and so on \n</code></pre>\n\n<p>I expect the above code should be working but whatever I input will be the output from <code>cout</code> but not the value from <code>enum</code> list. What's the problem with my code?</p>\n"}, {"tags": ["c++", "cmake", "makefile"], "comments": [{"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 3, "creation_date": 1436987492, "post_id": 31438916, "comment_id": 50847613, "body": "The cmake manual says about link_libraries &quot;The command will apply only to targets created after it is called.&quot; Is the target created with the add_executable() command? Maybe you need to move the add_executable() command after the link_directories()."}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 1, "creation_date": 1436988313, "post_id": 31438916, "comment_id": 50848071, "body": "If I do this, I get the error <code>Cannot specify link libraries for target &quot;test&quot; which is not built by   this project.</code>"}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 2, "creation_date": 1436990071, "post_id": 31438916, "comment_id": 50848990, "body": "Just to be sure: the order of your commands is now 1) link_directories(), 2) add_executable(), and 3) target_link_libraries()?"}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1436990463, "post_id": 31438916, "comment_id": 50849210, "body": "Yes, in that order -- and it does not add libprotobuf.so to any of the files generated by cmake"}, {"owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 3, "creation_date": 1436990935, "post_id": 31438916, "comment_id": 50849502, "body": "Use <code>find_package(Protobuf)</code> instead of trying to locate it directly. See <a href=\"http://www.cmake.org/cmake/help/v3.3/module/FindProtobuf.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.3/module/FindProtobuf.html</a> for further information."}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 1, "creation_date": 1436991308, "post_id": 31438916, "comment_id": 50849713, "body": "And if find_package() does not work for you, the next best option would be find_library(PROTOBUF protobuf /usr/lib/x86_64-linux-gnu) and then use ${PROTOBUF} in your target_link_libraries() command. Looking around the net you will see many people recommending (sometimes strongly) against using link_directories(). Even the CMake doc seems to recommend using find_library() instead."}], "answers": [{"comments": [{"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 22, "creation_date": 1478891506, "post_id": 31471772, "comment_id": 68347474, "body": "... but, why doesn&#39;t it work? I realize it&#39;s advised against, but shouldn&#39;t it still work?"}, {"owner": {"reputation": 4065, "user_id": 1525300, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/r7ZeW.jpg?s=128&g=1", "display_name": "wojciii", "link": "https://stackoverflow.com/users/1525300/wojciii"}, "edited": false, "score": 0, "creation_date": 1495741647, "post_id": 31471772, "comment_id": 75391168, "body": "If you use pkg_check_modules to find a library you already have all the information you need and it makes sense to use pkg_check_modules."}, {"owner": {"reputation": 1269, "user_id": 3451686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8adf22fa3e6cb468e384370bb0c726?s=128&d=identicon&r=PG", "display_name": "landerlyoung", "link": "https://stackoverflow.com/users/3451686/landerlyoung"}, "reply_to_user": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 5, "creation_date": 1583323005, "post_id": 31471772, "comment_id": 107075176, "body": "@aardvarkk the doc says <code>The command will apply only to targets created after it is called. </code>"}, {"owner": {"reputation": 1378, "user_id": 1607937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eac48b60589f9a7e483887c07c26c2?s=128&d=identicon&r=PG", "display_name": "Den-Jason", "link": "https://stackoverflow.com/users/1607937/den-jason"}, "edited": false, "score": 0, "creation_date": 1602598629, "post_id": 31471772, "comment_id": 113767030, "body": "FYI on Windows I have found you may need to add <code>&#47;*</code> to the hint if the library is in a subdirectory"}], "tags": [], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": true, "score": 79, "last_activity_date": 1437123393, "last_edit_date": 1437123393, "creation_date": 1437122892, "answer_id": 31471772, "question_id": 31438916, "link": "https://stackoverflow.com/questions/31438916/cmake-cannot-find-library-using-link-directories/31471772#31471772", "title": "Cmake cannot find library using &quot;link_directories&quot;", "body": "<p>Do not use <code>link_directories</code> like this in CMake. </p>\n\n<p>This is a common beginner's mistake, as many other build environments work like this, but in CMake it's just asking for trouble. Even <a href=\"http://www.cmake.org/cmake/help/v3.2/command/link_directories.html\">the manpage</a> specifically advises against it:</p>\n\n<blockquote>\n  <p>Note that this command [<code>link_directories</code>] is rarely necessary. Library locations returned\n  by <code>find_package()</code> and <code>find_library()</code> are absolute paths. Pass these\n  absolute library file paths directly to the <code>target_link_libraries()</code>\n  command. CMake will ensure the linker finds them.</p>\n</blockquote>\n\n<p>So instead, <em>always pass absolute paths</em> to <code>target_link_libraries</code> and use <a href=\"http://www.cmake.org/cmake/help/v3.2/command/find_library.html\"><code>find_library</code></a> to resolve the link directory:</p>\n\n<pre><code>find_library(PROTOBUF_LIBRARY protobuf HINTS /usr/lib/x86_64-linux-gnu)\ntarget_link_libraries(test PUBLIC ${PROTOBUF_LIBRARY})\n</code></pre>\n\n<p>This has the huge benefit that you will probably get a diagnostic at CMake configure time if the expected library cannot be found, instead of a random linker error at compile time. Also, this allows the user to specify a library location via the GUI if the target machine has a non-standard directory layout.</p>\n\n<p>So if it doesn't work right away, be sure to check the result of the <code>find_library</code> call and consult the manpage to track down why it doesn't find your library as intended.</p>\n"}, {"comments": [{"owner": {"reputation": 1467, "user_id": 2947765, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0d8d16ae594d383e8066324d96cf15f8?s=128&d=identicon&r=PG&f=1", "display_name": "Aminos", "link": "https://stackoverflow.com/users/2947765/aminos"}, "edited": false, "score": 0, "creation_date": 1574420925, "post_id": 40554704, "comment_id": 104236549, "body": "Thank you for you answer ! I have a FindSomething.cmake file that uses link_directories and in fact when using target_link_libraries on a static library to link it with library &quot;Something&quot; then link that static library with a binary program, the linker fails to link the libraries because link_directories is not taken in account..."}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 0, "creation_date": 1594288932, "post_id": 40554704, "comment_id": 111076359, "body": "This is the correct answer to the problem. The keyword here is <code>before your call</code> ..."}], "tags": [], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "is_accepted": false, "score": 74, "last_activity_date": 1478891696, "creation_date": 1478891696, "answer_id": 40554704, "question_id": 31438916, "link": "https://stackoverflow.com/questions/31438916/cmake-cannot-find-library-using-link-directories/40554704#40554704", "title": "Cmake cannot find library using &quot;link_directories&quot;", "body": "<p>Make sure that your call to <code>link_directories</code> takes place <strong>before your call</strong> to the relevant <code>add_executable</code>. </p>\n\n<p>I had mistakenly believed it only needed to be before the call to <code>target_link_libraries</code>, but that's not the case. After moving the call, the library is linked properly.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6882413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d6c5ee3d0364eeb6d49627590046bc5?s=128&d=identicon&r=PG&f=1", "display_name": "user6882413", "link": "https://stackoverflow.com/users/6882413/user6882413"}, "is_accepted": false, "score": 4, "last_activity_date": 1531410025, "creation_date": 1531410025, "answer_id": 51309712, "question_id": 31438916, "link": "https://stackoverflow.com/questions/31438916/cmake-cannot-find-library-using-link-directories/51309712#51309712", "title": "Cmake cannot find library using &quot;link_directories&quot;", "body": "<p>Make sure that the order will be link_directories, set PROJECT_LINK_LIBS, add_executable and then target_link_libraries.</p>\n\n<p>Below is example to demonstarte it:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.9)\nproject (Logging)\ninclude_directories(include)\nfile(GLOB LOGGINGSOURCES \"libsrc/*.cpp\")\nfile(GLOB SOURCES \"src/*.cpp\")\nadd_library(convertString SHARED ${LOGGINGSOURCES})\ninstall(TARGETS convertString DESTINATION /root/Deepak/)\nlink_directories( /root/Deepak/ )\nset(PROJECT_LINK_LIBS libconvertString.so)\nadd_executable(hello ${SOURCES})\ntarget_link_libraries(hello ${PROJECT_LINK_LIBS} )\n</code></pre>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76779, "favorite_count": 27, "accepted_answer_id": 31471772, "answer_count": 3, "score": 56, "last_activity_date": 1531410025, "creation_date": 1436987007, "question_id": 31438916, "link": "https://stackoverflow.com/questions/31438916/cmake-cannot-find-library-using-link-directories", "title": "Cmake cannot find library using &quot;link_directories&quot;", "body": "<p>I Ubuntu, I am learning about cmake and make, and just trying a simple example. I have two directories: <code>src</code> and <code>build</code>. In <code>src</code>, I have two files: <code>main.cpp</code>, and <code>CMakeLists.txt</code>, which has (only) the following text:</p>\n\n<pre><code>add_executable(test main.cpp)\nlink_directories(/usr/lib/x86_64-linux-gnu)\ntarget_link_libraries(test protobuf)\n</code></pre>\n\n<p>In <code>/usr/lib/x86_64-linux-gnu</code>, there is a shared library called <code>libprotobuf.so</code>, which I want to link against. My <code>main.cpp</code> uses functions in this library, by including the releveant header file, <code>#include &lt;google/protobuf/message.h&gt;</code>.</p>\n\n<p>Now, in my <code>build</code> directory, I run <code>cmake ../src</code>, and then <code>make</code>. However, I then get linker errors telling me that there are undefined references to some of the functions in the protobuf library. If I do a search through all the files and subdirectories in <code>build</code>, there is not mention of anything related to protobuf.</p>\n\n<p>However, if I remove the <code>link_directories</code> line in my <code>CMakeLists.txt</code> file, and instead write the full path to the library when specifying the executable, i.e. <code>target_link_libraries(test /usr/lib/x86_64-linux-gnu/libprotobuf.so)</code>, it compiles and links fine.</p>\n\n<p>Why is <code>link_directories</code> not allowing cmake to find this library?</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 0, "creation_date": 1436987186, "post_id": 31438714, "comment_id": 50847451, "body": "@MeirGoldenberg, calling <code>reset</code> on a <code>shared_ptr</code> changes the managed object to that supplied by the pointer and it shouldn&#39;t be owner by any other <code>shared_ptr</code>.  Whereas <code>operator=</code> would imply sharing ownership with another <code>shared_ptr</code> (unless of course you&#39;re doing move-assign)."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 0, "creation_date": 1436987407, "post_id": 31438714, "comment_id": 50847560, "body": "&quot;Shouldn&#39;t be owned&quot;? Is this enforced or it&#39;s just an agreement? It would be nice if this comment along with an example became a full-fledged reply."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1436987720, "post_id": 31438714, "comment_id": 50847730, "body": "This boils down to the difference between constructing a <code>shared_ptr</code> from a raw pointer and using <code>make_shared</code>, which should be trivial to find out. Hint: There is a difference and sometimes it can be significant."}, {"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 0, "creation_date": 1436987854, "post_id": 31438714, "comment_id": 50847802, "body": "@MeirGoldenberg, its enforced by undefined behavior (if you can consider that &quot;enforced&quot;). Consider what would happen if you <code>new</code>ed up some memory and called <code>reset</code> on two <i>different</i> <code>shared_ptr</code>s passing in that block of memory. When the two go out of scope, they&#39;ll try deleting the same block - hence UB."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 3, "creation_date": 1436987960, "post_id": 31438714, "comment_id": 50847872, "body": "@UlrichEckhardt I could have used a raw pointer in both cases: <code>p = std::shared_ptr&lt;int&gt;(new int(5));</code> and <code>p.reset(new int(5));</code> as is. What is the difference now?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1436988244, "post_id": 31438714, "comment_id": 50848027, "body": "Um, sorry, what I wrote might be confusing, as it only addresses a side-issue of your question. What I was referring was the question whether the &quot;following two line [are] equivalent&quot;. One difference is the use of assignment vs <code>reset()</code>, the other is the use of raw <code>new</code> vs <code>make_shared</code>."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1436989468, "post_id": 31438714, "comment_id": 50848683, "body": "I am not really getting an answer to my question: what is the idiomatic use of <code>reset()</code>, where one would have a difficult time without it?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1436990325, "post_id": 31438714, "comment_id": 50849126, "body": "@MeirGoldenberg I think you did not make your question clear, this comment really should be the question instead of if that 2 lines are equivalent."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1436992732, "post_id": 31438714, "comment_id": 50850578, "body": "@Slava Thank you. I have added an EDIT at the bottom and hope that the real meaning of the question is more explicit now."}], "answers": [{"comments": [{"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 2, "creation_date": 1436988495, "post_id": 31439297, "comment_id": 50848156, "body": "I understand the different usage. My question is: is there a case where <code>reset()</code> lets me achieve something that is not easily achievable without it?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1436999264, "post_id": 31439297, "comment_id": 50853666, "body": "A shared ptr created by <code>make_shared</code> is different than one created by <code>.reset(new T)</code>."}, {"owner": {"reputation": 12086, "user_id": 3838691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11de3f70067be2739aed43b8876e82f9?s=128&d=identicon&r=PG&f=1", "display_name": "MaxNoe", "link": "https://stackoverflow.com/users/3838691/maxnoe"}, "edited": false, "score": 1, "creation_date": 1582040311, "post_id": 31439297, "comment_id": 106635100, "body": "In what way is it different?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 12086, "user_id": 3838691, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11de3f70067be2739aed43b8876e82f9?s=128&d=identicon&r=PG&f=1", "display_name": "MaxNoe", "link": "https://stackoverflow.com/users/3838691/maxnoe"}, "edited": false, "score": 2, "creation_date": 1582043072, "post_id": 31439297, "comment_id": 106636819, "body": "@MaxNoe With <code>make_shared</code> the pointer, and the shared state can be allocated into a single object using a single call to new.  When you do reset that has to be split into two separate allocations."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 32, "last_activity_date": 1509646899, "last_edit_date": 1509646899, "creation_date": 1436988269, "answer_id": 31439297, "question_id": 31438714, "link": "https://stackoverflow.com/questions/31438714/stdshared-ptr-reset-vs-assignment/31439297#31439297", "title": "std::shared_ptr: reset() vs. assignment", "body": "<p>When using <code>reset()</code> the parameter passed to reset need not be a managed object (nor can it be); whereas with <code>=</code> the right hand side must be a managed object.</p>\n\n<p>So these two lines give you the same end result:</p>\n\n<pre><code>p = std::make_shared&lt;int&gt;(5); // assign to a newly created shared pointer\np.reset(new int(5)); // take control of a newly created pointer\n</code></pre>\n\n<p>But we cannot do:</p>\n\n<pre><code>p = new int(5); // compiler error no suitable overload\np.reset(std::make_shared&lt;int&gt;(5).get()); // uh oh undefined behavior\n</code></pre>\n\n<p>Without <code>reset()</code> you would not be able to reassign a shared pointer to a different raw pointer without creating a shared pointer and assigning it. Without <code>=</code> you wouldn't be able to make a shared pointer point to another shared pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1436989184, "post_id": 31439356, "comment_id": 50848543, "body": "&quot;The latter [i.e. assignment] implies shared ownership with another <code>shared_ptr</code> &quot;. I think you mean to contrast it with <code>reset()</code>, which makes <code>p</code> an owner on a non-managed resource, which by definition means sole ownership. The more I read the more I am wondering: who would ever use <code>reset()</code>? Is there an example where this is the tool to use?"}, {"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1436990186, "post_id": 31439356, "comment_id": 50849048, "body": "@MeirGoldenberg, Updated with a potential example!"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 2, "creation_date": 1436990330, "post_id": 31439356, "comment_id": 50849130, "body": "I&#39;m not really sure why your example couldn&#39;t be done just as easily using the assignment operator."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1437028415, "post_id": 31439356, "comment_id": 50862204, "body": "<code>shared_resource = std::make_shared&lt;resource&gt;(...);</code> seems pretty concise to me."}], "tags": [], "owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "is_accepted": false, "score": 2, "last_activity_date": 1436990170, "last_edit_date": 1495540037, "creation_date": 1436988452, "answer_id": 31439356, "question_id": 31438714, "link": "https://stackoverflow.com/questions/31438714/stdshared-ptr-reset-vs-assignment/31439356#31439356", "title": "std::shared_ptr: reset() vs. assignment", "body": "<p>I won't include the rationale behind your first sub-question of the difference between construction via <code>make_shared</code> or from a pointer, as this difference is highlighted in several different locations, including <a href=\"https://stackoverflow.com/questions/20895648/difference-in-make-shared-and-normal-shared-ptr-in-c\">this excellent question</a>. </p>\n\n<p>However, I think it is constructive to distinguish between using <code>reset</code> and <code>operator=</code>. The former relinquishes ownership of the resource managed by the <code>shared_ptr</code>, either by destroying it if the <code>shared_ptr</code> happened to be the sole owner, or by decrementing the reference count. The latter implies shared ownership with another <code>shared_ptr</code> (unless you're move constructing).</p>\n\n<p>As I mentioned in the comments, it's important that the pointer passed in to <code>reset</code> not be owned by another shared or unique pointer, because it would yield undefined behavior upon the destruction of the two independent managers - they both would attempt to <code>delete</code> the resource.</p>\n\n<p>One use case of <code>reset</code> could be lazy initialization of a shared resource. You only want the <code>shared_ptr</code> to manage some resource, memory for example, if you really need it. Doing an outright allocation, such as:</p>\n\n<pre><code>std::shared_ptr&lt;resource&gt; shared_resource(new resource(/*construct a resource*/));\n</code></pre>\n\n<p>might be wasteful if its never actually needed. To do this with lazy initialization, something like this may apply:</p>\n\n<pre><code>std::shared_ptr&lt;resource&gt; shared_resource;\nvoid use_resource()\n{\n       if(!shared_resource)\n       {\n            shared_resource.reset(new resource(...));\n       }\n\n       shared_resource-&gt;do_foo();\n}\n</code></pre>\n\n<p>Using <code>reset</code> in this case is more concise than doing a <code>swap</code> or assigning to a temporary <code>shared_ptr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1436989917, "post_id": 31439561, "comment_id": 50848912, "body": "<code>shared_ptr</code> has only existed in the standard since C++11:<a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/shared_ptr</a>.  Boost does have a  C++03 <code>shared_ptr</code>"}, {"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1436992008, "post_id": 31439561, "comment_id": 50850142, "body": "@NathanOliver: Got my lines crossed, rephrased to avoid that statement but still mention that it could have had an influence. (although the general ability to make a logical modification without copying/moving is something that is common in either case)"}], "tags": [], "owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "is_accepted": false, "score": 1, "last_activity_date": 1436991933, "last_edit_date": 1436991933, "creation_date": 1436989089, "answer_id": 31439561, "question_id": 31438714, "link": "https://stackoverflow.com/questions/31438714/stdshared-ptr-reset-vs-assignment/31439561#31439561", "title": "std::shared_ptr: reset() vs. assignment", "body": "<p><code>reset()</code> changes the managed object of an existing <code>shared_ptr</code>.</p>\n\n<blockquote>\n  <p>p = std::shared_ptr(new int(5)); and p.reset(new int(5));</p>\n</blockquote>\n\n<p>The former involves creating a new <code>shared_ptr</code> and moving it into a variable. The latter does not create a new object, it simply changes the underlying pointer in managed by the <code>shared_ptr</code>.</p>\n\n<p>Put another way the two are meant to be used in different cases. Assignment is for when you have a <code>shared_ptr</code> and <code>reset</code> for when you have a raw pointer.</p>\n\n<p>Another thing to keep in mind is that <code>shared_ptr</code> was available in boost before move assignment existed and influenced the latest version heavily. Without move assignment being able to change a <code>shared_ptr</code> without making a copy is beneficial as it saves you the bookkeeping of the extra object.</p>\n"}, {"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1436990645, "post_id": 31439931, "comment_id": 50849333, "body": "I assume this won&#39;t apply when you create the original shared_ptr with make_shared?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1436995984, "post_id": 31439931, "comment_id": 50852293, "body": "@NirFriedman Less likely, but maybe not totally unreasonable. You could imagine a library implementation making a decision based on <code>sizeof(ControlBlock) + sizeof(T)</code> that it would be more worthwhile to avoid the dynamic allocation. It could then destroy the object, but not deallocate the control block and take ownership of the new pointer."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1437027731, "post_id": 31439931, "comment_id": 50861853, "body": "Generally, I think the use of <code>reset</code> encourages bad practice and should be avoided but I think this is a correct answer. There may some cases where use of <code>reset</code> is a performance optimization but I would check the improvement is measurable before making the change."}, {"owner": {"reputation": 1437, "user_id": 533837, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c8489de4d591d27ad9a2a943a52804e7?s=128&d=identicon&r=PG", "display_name": "AnorZaken", "link": "https://stackoverflow.com/users/533837/anorzaken"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1472572275, "post_id": 31439931, "comment_id": 65801090, "body": "@ChrisDrew Yes measuring would be important, because it&#39;s not obvious that reset is faster at all, in the larger scope, because make_shared creates both the control-block and object in a single allocation, meaning upon usage cache-locality could cause <code>make_shared</code> to win over <code>reset</code> depending on how the resulting <code>shared_ptr</code> is actually used. In other words it&#39;s not sufficient too only look at the performance of modifying a shared_ptr but rather the combined performance impact of modify + usage. (Which rules out small generalized tests without any real usage scenario)."}, {"owner": {"reputation": 319, "user_id": 621176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/251z8.jpg?s=128&g=1", "display_name": "Dvir Yitzchaki", "link": "https://stackoverflow.com/users/621176/dvir-yitzchaki"}, "edited": false, "score": 0, "creation_date": 1617778481, "post_id": 31439931, "comment_id": 118397590, "body": "it&#39;s worth noting that both <a href=\"https://github.com/llvm/llvm-project/blob/000cf84cf1bb2f5475600737c16c3ccf43096f58/libcxx/include/memory#L3294\" rel=\"nofollow noreferrer\">libc++</a> and <a href=\"https://github.com/gcc-mirror/gcc/blob/e0bdccac582c01c928a05f26edcd8f5ac24669eb/libstdc%2B%2B-v3/include/bits/shared_ptr_base.h#L1275\" rel=\"nofollow noreferrer\">libstdc++</a> implement <code>reset</code> by constructing a new <code>shared_ptr</code> (along with a new control block) and swapping with <code>*this</code>"}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": false, "score": 6, "last_activity_date": 1439429580, "last_edit_date": 1439429580, "creation_date": 1436990482, "answer_id": 31439931, "question_id": 31438714, "link": "https://stackoverflow.com/questions/31438714/stdshared-ptr-reset-vs-assignment/31439931#31439931", "title": "std::shared_ptr: reset() vs. assignment", "body": "<p>It's possible for <code>reset</code> to avoid a dynamic memory allocation in certain cases. Consider the code</p>\n\n<pre><code>std::shared_ptr&lt;int&gt; p{new int{}};  // 1\np.reset(new int{});                 // 2\n</code></pre>\n\n<p>On line 1 there are 2 dynamic memory allocations happening, one for the <code>int</code> object and a second one for the <code>shared_ptr</code>'s control block that'll keep track of the number of strong/weak references to the managed object.</p>\n\n<p>On line 2 there is again a dynamic memory allocation for a new <code>int</code> object. Within the body of <code>reset</code> the <code>shared_ptr</code> will determine that there are no other strong references to the previously managed <code>int</code>, so it must <code>delete</code> it. Since there aren't any weak references either, it could also deallocate the control block, but in this case it would be prudent for the implementation to reuse the same control block because it would otherwise have to allocate a new one anyway.</p>\n\n<p>The above behavior would not be possible if you always had to use assignment.</p>\n\n<pre><code>std::shared_ptr&lt;int&gt; p{new int{}};    // 1\np = std::shared_ptr&lt;int&gt;{new int{}};  // 2\n</code></pre>\n\n<p>In this case, the second call to the <code>shared_ptr</code> constructor on line 2 has already allocated a control block, so <code>p</code> will have to deallocate its own existing control block.</p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26541, "favorite_count": 5, "answer_count": 4, "score": 52, "last_activity_date": 1600261228, "creation_date": 1436986337, "last_edit_date": 1495541430, "question_id": 31438714, "link": "https://stackoverflow.com/questions/31438714/stdshared-ptr-reset-vs-assignment", "title": "std::shared_ptr: reset() vs. assignment", "body": "<p>This is a basic question, but I did not find a previous post about it. The title of the following question sounds like it might be the same question as mine, but the question itself does not match the title: <a href=\"https://stackoverflow.com/questions/14836691/is-it-better-to-use-shared-ptr-reset-or-operator\">is it better to use shared_ptr.reset or operator =?</a></p>\n\n<p>I am confused about the purpose of the <code>reset()</code> member function of <code>std::shared_ptr</code>: what does it contribute in addition to the assignment operator?</p>\n\n<p>To be concrete, given the definition:</p>\n\n<pre><code>auto p = std::make_shared&lt;int&gt;(1);\n</code></pre>\n\n<ol>\n<li><p>Are the following two lines equivalent:</p>\n\n<pre><code>p = std::make_shared&lt;int&gt;(5);\np.reset(new int(5));\n</code></pre></li>\n<li><p>What about these:</p>\n\n<pre><code>p = nullptr;\np.reset();\n</code></pre></li>\n</ol>\n\n<p>If the two lines are equivalent in both cases, then what is the purpose of <code>reset()</code>? </p>\n\n<hr>\n\n<p>EDIT: Let me re-phrase the question to better emphasize its point. The question is: is there a case where <code>reset()</code> lets us achieve something that is not as easily achievable without it?</p>\n"}, {"tags": ["c++", "file", "hierarchical-data"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1436985562, "post_id": 31438452, "comment_id": 50846539, "body": "XML and Json are two data formats that can be organized in that way."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436985971, "post_id": 31438452, "comment_id": 50846754, "body": "I wish I knew what approach you were thinking of that seems so &quot;very complex&quot;.  As it is, I can&#39;t even make a suggestion would be simpler than what you&#39;re imagining."}, {"owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436986589, "post_id": 31438452, "comment_id": 50847100, "body": "@DrewDormann - I&#39;ll add that into the question, my mistake"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1436986964, "last_edit_date": 1436986964, "creation_date": 1436985768, "answer_id": 31438531, "question_id": 31438452, "link": "https://stackoverflow.com/questions/31438452/writing-a-hierarchy-to-file/31438531#31438531", "title": "Writing a Hierarchy to file?", "body": "<blockquote>\n  <p><em>\"Is there a common approach ...\"</em></p>\n</blockquote>\n\n<p>No there isn't. There are many approaches, varying from XML data, over raw serialization (e.g. <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow\">google protobuf</a>), <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/serialization/doc/index.html\" rel=\"nofollow\">boost serialization</a>, to custom text or binary formats.</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1436990628, "accepted_answer_id": 31438531, "answer_count": 1, "score": -1, "last_activity_date": 1436986964, "creation_date": 1436985457, "last_edit_date": 1436986713, "question_id": 31438452, "link": "https://stackoverflow.com/questions/31438452/writing-a-hierarchy-to-file", "closed_reason": "Needs more focus", "title": "Writing a Hierarchy to file?", "body": "<p>Is there a common approach to writing a hierarchy of data to a file?  I'm having trouble visualizing how such a structure would exist in a 1 dimensional structure like that, without writing something as complex as an XML parser/emitter. The hierarchy in this case has a single root node, where each node can have an arbitrary number of children.  </p>\n\n<p>(In my case, it's a hierarchy of bones/transforms in an animation rig)</p>\n"}, {"tags": ["c++", "qt", "qtreeview"], "comments": [{"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1436990732, "post_id": 31438299, "comment_id": 50849389, "body": "Do you mean that you want to check when the icon is clicked ?"}, {"owner": {"reputation": 79, "user_id": 3842408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3bfedc961b73c92286f5c2c504be56?s=128&d=identicon&r=PG&f=1", "display_name": "user3842408", "link": "https://stackoverflow.com/users/3842408/user3842408"}, "reply_to_user": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1436991054, "post_id": 31438299, "comment_id": 50849575, "body": "The triangle on the left describing an item with children. Clicking on it expands the item and shows the children. I want to know then this thing is clicked, because for now when it is, it gives me the index of the item and I have no way of knowing from where comes the mouse press event. So it does expand and collapse or collapse and expand."}], "answers": [{"tags": [], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": true, "score": 2, "last_activity_date": 1436993960, "creation_date": 1436993960, "answer_id": 31440970, "question_id": 31438299, "link": "https://stackoverflow.com/questions/31438299/how-to-know-the-qtreeview-item-decoration-is-clicked/31440970#31440970", "title": "How to know the QTreeView item decoration is clicked", "body": "<p>Try this:</p>\n\n<pre><code>void MyTreeView::mousePressEvent( QMouseEvent* aEvent )\n{\n    QModelIndex index = indexAt( aEvent-&gt;pos() );\n\n    if ( index.isValid() )\n    {\n        const bool wasExpanded = isExpanded( index );\n\n        QTreeView::mousePressEvent( aEvent );\n\n        if ( aEvent-&gt;button() == Qt::LeftButton )\n        {\n            const bool expanded = isExpanded( index );\n\n            // QTreeView did not change the item's state ... but you want.\n            if ( wasExpanded == expanded )\n            {\n                expanded ? collapse( index ) : expand( index );\n            }\n        }\n    }\n    else\n    {\n        QTreeView::mousePressEvent( aEvent );\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 3842408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e3bfedc961b73c92286f5c2c504be56?s=128&d=identicon&r=PG&f=1", "display_name": "user3842408", "link": "https://stackoverflow.com/users/3842408/user3842408"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "accepted_answer_id": 31440970, "answer_count": 1, "score": 0, "last_activity_date": 1436993960, "creation_date": 1436984926, "question_id": 31438299, "link": "https://stackoverflow.com/questions/31438299/how-to-know-the-qtreeview-item-decoration-is-clicked", "title": "How to know the QTreeView item decoration is clicked", "body": "<p>I'm trying to know when the user selects the decoration of an item, because I was trying to implement a single click expand/collapse QTreeview and the decoration now does nothing. It doesn't expand or collapse the item where as if I click on the item it works properly.</p>\n\n<pre><code>void MyTreeView::mousePressEvent(QMouseEvent *event)\n{\n    QTreeView::mousePressEvent(event);\n\n    if (event-&gt;button() == Qt::LeftButton)\n    {\n        QModelIndex index = indexAt(event-&gt;pos());\n\n        isExpanded(index) ? collapse(index) : expand(index);\n    }\n}\n</code></pre>\n\n<p>The problem is that when the decoration is selected, it enters the if condition. If it was not, everything works fine.</p>\n\n<p>I don't know if I have to block the decoration action or have a condition in the if statement.</p>\n\n<p>How do I know the decoration is selected and not the item itself or how do I block decoration action ?</p>\n"}, {"tags": ["c++", "r", "memory", "match", "rcpp"], "comments": [{"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 1, "creation_date": 1436998965, "post_id": 31438251, "comment_id": 50853560, "body": "Please include the data and R code that produces the crash."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1437154511, "post_id": 31438251, "comment_id": 50928283, "body": "I think you still misunderstand what a <a href=\"http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example\">reproducible example</a> is."}, {"owner": {"reputation": 148, "user_id": 2588072, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db117ee4e8d12f9f1ab27568315b412?s=128&d=identicon&r=PG", "display_name": "user_123", "link": "https://stackoverflow.com/users/2588072/user-123"}, "edited": false, "score": 0, "creation_date": 1437161849, "post_id": 31438251, "comment_id": 50932032, "body": "Sorry about that. I have updated with code that reproduces a crash in R Studio"}, {"owner": {"reputation": 4273, "user_id": 4380497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68532781248c6eb05994709155e27466?s=128&d=identicon&r=PG&f=1", "display_name": "ExperimenteR", "link": "https://stackoverflow.com/users/4380497/experimenter"}, "edited": false, "score": 1, "creation_date": 1437163527, "post_id": 31438251, "comment_id": 50932831, "body": "Are you doing <code>merge</code>? <code>merge(baseflow_mat[[1]], baseflow_mat[[2]], by=c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;))</code>"}, {"owner": {"reputation": 148, "user_id": 2588072, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db117ee4e8d12f9f1ab27568315b412?s=128&d=identicon&r=PG", "display_name": "user_123", "link": "https://stackoverflow.com/users/2588072/user-123"}, "edited": false, "score": 0, "creation_date": 1437167019, "post_id": 31438251, "comment_id": 50934298, "body": "I completely overlooked using merge. That is exactly what I want, Thank you so much."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "reply_to_user": {"reputation": 4273, "user_id": 4380497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68532781248c6eb05994709155e27466?s=128&d=identicon&r=PG&f=1", "display_name": "ExperimenteR", "link": "https://stackoverflow.com/users/4380497/experimenter"}, "edited": false, "score": 0, "creation_date": 1437240509, "post_id": 31438251, "comment_id": 50950901, "body": "@ExperimenteR You should turn your comment into an answer so that this question is not left unresolved."}], "answers": [{"tags": [], "owner": {"reputation": 4273, "user_id": 4380497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/68532781248c6eb05994709155e27466?s=128&d=identicon&r=PG&f=1", "display_name": "ExperimenteR", "link": "https://stackoverflow.com/users/4380497/experimenter"}, "is_accepted": true, "score": 4, "last_activity_date": 1437368316, "creation_date": 1437368316, "answer_id": 31509094, "question_id": 31438251, "link": "https://stackoverflow.com/questions/31438251/r-studio-crashes-after-using-rcpp-function/31509094#31509094", "title": "R Studio crashes after using Rcpp function", "body": "<p>What you are doing inside the innermost loop is essentially a <code>merge</code>. If you need it to be faster, use <code>dplyr::left_join</code> (a fast alternative for <code>merge</code>).</p>\n\n<pre><code>big_match&lt;-list()\nfor(i in seq(1,2)){#length(baseflow_mat))){\n  match_baseflow_list&lt;-list()\n  for(j in seq(1,2)){#length(baseflow_mat))){\n    match_baseflow_list[[j]] &lt;- merge(baseflow_mat[[1]], baseflow_mat[[2]], by=c(\"year\", \"month\", \"day\"))\n  }\n  big_match[[i]]&lt;-match_baseflow_list\n}\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 2588072, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db117ee4e8d12f9f1ab27568315b412?s=128&d=identicon&r=PG", "display_name": "user_123", "link": "https://stackoverflow.com/users/2588072/user-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 31509094, "answer_count": 1, "score": 1, "last_activity_date": 1437368316, "creation_date": 1436984795, "last_edit_date": 1437162216, "question_id": 31438251, "link": "https://stackoverflow.com/questions/31438251/r-studio-crashes-after-using-rcpp-function", "title": "R Studio crashes after using Rcpp function", "body": "<p>What I'm trying to do is find matching dates between multiple large matrices. And what I want my C++ code to return is row indices where matches are found</p>\n\n<p>I am completely new to C++ and I have found it extremely useful to speed up my R code.</p>\n\n<p>My code seems to work in R Studio but crashes after the Rcpp function has been used through some iterations in another loop in my R code</p>\n\n<p>Here is some example data </p>\n\n<p>baseflow_mat[[1]] is a matrix formatted as so</p>\n\n<p>baseflow_mat[[2]] is an example of where I want to find matches</p>\n\n<pre><code>baseflow_mat&lt;-list()\n\nbaseflow_mat[[1]]&lt;-data.frame(year=c(1992,1992,1992,1992),month=c(7,7,7,7),day=c(5,10,13,17),flow=c(50,60,59,33))\n\nbaseflow_mat[[2]]&lt;-data.frame(year=c(1992,1992,1992,1992,1992,1992,1992,1992),month=c(7,7,7,7,7,7,8,8),day=c(4,10,13,18,26,27,2,6),flow=c(50,60,59,33,45,40,55,52))\n</code></pre>\n\n<p>And I want to find matching dates across all 170 large matrices of baseflow_mat</p>\n\n<p>baseflow_mat[[2]] is an example of where I want to find matches </p>\n\n<p>So what I want my C++ code to return is the row indices of baseflow_mat_2 of all matches from baseflow_mat_1. This works fine with small matrices but once I start to use all my data it starts to crash. My actual data has anywhere from 500 to 3000 rows in each matrix and I want to find matches for 170 separate matrices so 170*170 about 28900 results   </p>\n\n<p>Here is my R code</p>\n\n<pre><code>library(Rcpp)\nsourceCpp(\"Source1.cpp\")\n\nbig_match&lt;-list()\nfor(i in seq(1,2)){#length(baseflow_mat))){\n  match_baseflow_list&lt;-list()\n  for(j in seq(1,2)){#length(baseflow_mat))){\n     matches_wzeros&lt;-matchRows(nrow(baseflow_mat[[j]][,1:3]),nrow(baseflow_mat[[i]][,1:3]),baseflow_mat[[j]][,1:3],baseflow_mat[[i]][,1:3])\n     matches&lt;-matches_wzeros[matches_wzeros&gt;0]\n     match_baseflow_list[[j]]&lt;-baseflow_mat[[j]][matches,]\n   }\n  big_match[[i]]&lt;-match_baseflow_list\n}\n</code></pre>\n\n<p>Here is my C++ code</p>\n\n<pre><code>// [[Rcpp::export]]\n\nNumericVector matchRows(int rowSize, int matchRowSize, DataFrame nonMatchDF, DataFrame matchDF)\n{\n//0 is for year, 1 is for month, 2 is for day for both DF\nRcpp::NumericVector nonmatchYear = nonMatchDF[0];\nRcpp::NumericVector nonmatchMonth = nonMatchDF[1];\nRcpp::NumericVector nonmatchDay = nonMatchDF[2];\n\nRcpp::NumericVector matchYear = matchDF[0];\nRcpp::NumericVector matchMonth = matchDF[1];\nRcpp::NumericVector matchDay = matchDF[2];\n\nRcpp::NumericVector indexMatrix(matchRowSize*rowSize);\n\n\n//j is for going through the nonmatch dataframe\nint j;\n\n//i is for going through the other DF\nint i;\n\n//addIndex is to add correctly to the vector\nint addIndex = 0;\n\nfor (i = 0; i &lt; matchRowSize; i++)\n{\n    //Rcpp::NumericVector indexMatch(rowSize);\n\n\n    for (j = 0; j &lt; rowSize; j++)\n    {\n\n        if ((matchYear[i] == nonmatchYear[j]) &amp;&amp; (matchMonth[i] == nonmatchMonth[j]) &amp;&amp; (matchDay[i] == nonmatchDay[j]))\n        {\n            indexMatrix[addIndex + j] = j + 1 ;\n            //indexMatrix(i, j) = j+1;\n        }\n    }\n\n    addIndex = addIndex + (j+1);\n}\n\nreturn indexMatrix;\n  }\n</code></pre>\n\n<p>And sessionInfo() output</p>\n\n<pre><code>R version 3.1.1 (2014-07-10)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\n\nlocale:\n[1] LC_COLLATE=English_United States.1252 \n[2] LC_CTYPE=English_United States.1252   \n[3] LC_MONETARY=English_United States.1252\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.1252    \n\nattached base packages:\n[1] stats     graphics  grDevices utils    \n[5] datasets  methods   base     \n\nother attached packages:\n[1] Rcpp_0.11.6\n\nloaded via a namespace (and not attached):\n[1] tools_3.1.1\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "gcc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1436984489, "post_id": 31438084, "comment_id": 50845909, "body": "Trace all constructors and assignment operators and the destructor (C++11 has 5)"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 2, "creation_date": 1436984890, "post_id": 31438084, "comment_id": 50846135, "body": "Do you get the same output with full optimizations on (VC++ release build and GCC -O3)?"}], "answers": [{"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1436986153, "post_id": 31438399, "comment_id": 50846847, "body": "Standalone operators are better if you want to have implicit type conversion on both sides of it. On the other hand, implicit type conversions can be very, very surprising..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1436986550, "post_id": 31438399, "comment_id": 50847080, "body": "Passing the input <code>Num</code> objects by <code>const</code> reference also allows for implicit conversions.  Passing them by value does not. And you probably don&#39;t want an implicit conversion on the left-side of <code>+</code>, though, otherwise the compiler might call the wrong <code>+</code> operator to begin with."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1436985937, "last_edit_date": 1436985937, "creation_date": 1436985270, "answer_id": 31438399, "question_id": 31438084, "link": "https://stackoverflow.com/questions/31438084/why-does-visual-studio-call-the-destructor-here-but-gcc-does-not/31438399#31438399", "title": "Why does Visual Studio call the destructor here but GCC does not?", "body": "<p>You are not outputing anything in <code>Num</code>'s <strong>copy constructor</strong>, you need to add that:</p>\n\n<pre><code>Num(const Num &amp;i)\n{\n    printf(\"buidling %p\\n\", this);\n    this-&gt;value = i.value;\n}\n</code></pre>\n\n<p>Your <code>operator+()</code> implementation is taking its input <code>Num</code> objects <strong>by value</strong> so copies are being made. Change <code>operator+()</code> to take the objects <strong>by <code>const</code> reference</strong> instead to avoid that:</p>\n\n<pre><code>Num operator+(const Num &amp;i, const Num &amp;j)\n</code></pre>\n\n<p>Lastly, consider implementing <code>operator+()</code> as a member of <code>Num</code> instead of a standalone function:</p>\n\n<pre><code>class Num\n{\nprivate:\n    int value;\npublic:\n    //...\n\n    // Getter for value\n    int getVal() const\n    {\n        return value;\n    }\n\n    // Overload \"+\" operator\n    Num operator+(const Num &amp;j) const\n    {\n        printf(\"in operator+\\n\");\n        return (value + j.getVal());\n    }\n};\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>class Num\n{\nprivate:\n    int value;\npublic:\n    //...\n\n    // Getter for value\n    int getVal() const\n    {\n        return value;\n    }\n\n    // Overload \"+=\" operator\n    Num&amp; operator+=(const Num &amp;j)\n    {\n        printf(\"in operator+=\\n\");\n        value += j.getVal();\n        return *this;\n    }\n\n    // Overload \"+\" operator\n    Num operator+(const Num &amp;j) const\n    {\n        printf(\"in operator+\\n\");\n        Num tmp(*this);\n        tmp += j;\n        return tmp;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 2953867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a603b887a4fa63490e22bf2feb63029?s=128&d=identicon&r=PG&f=1", "display_name": "M D", "link": "https://stackoverflow.com/users/2953867/m-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436996958, "creation_date": 1436984185, "last_edit_date": 1436996958, "question_id": 31438084, "link": "https://stackoverflow.com/questions/31438084/why-does-visual-studio-call-the-destructor-here-but-gcc-does-not", "title": "Why does Visual Studio call the destructor here but GCC does not?", "body": "<p>Win32 Console Project in Visual C++ 2010 Express running on Win7, 64-bit.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;conio.h&gt;\n\nclass Num\n{\nprivate:\n    int value;\npublic:\n    friend Num operator+(Num, Num);\n\n    // Constructor\n    Num(int i)\n    {\n        printf(\"buidling %p\\n\", this);\n        this-&gt;value = i;\n    }\n    // Deconstructor\n    ~Num()\n    {\n        printf(\"destroying %p\\n\", this);\n    }\n    // Getter for value\n    int getVal()\n    {\n        return value;\n    }\n};\n\n// Overload \"+\" operator\nNum operator+(Num i, Num j)\n{\n    printf(\"in operator+\\n\");\n    return (i.value + j.value);\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    Num a = Num(42) + 17;\n    printf(\"done %p %d\\n\", &amp;a, a.getVal());\n\n    // Hold up\n    printf(\"Press any key to continue...\\n\");\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>When I watch the construction process in VC++, the object for Num(17) gets created, then the object for Num(42), then the Num a.  All good so far.  On destruction, there is a 4th object destructed prior to destruction of the temporary 17 and 42 objects, and finally a.  The <code>printf</code> reveals this has something to do with the overloaded operator+.  It would appear that VC++ creates 1 additional temporary Num object without using the constructor that it then copies to a and calls the destructor on.  By contrast, it seems that GCC creates this copy and then assigns a to that memory rather than creating this copy.</p>\n\n<p>Two questions:</p>\n\n<ol>\n<li>Am I correctly interpreting what VC++ is doing here?  Why is the destructor used, but not the constructor?</li>\n<li>Why are they handled differently?  It would seem that GCC's approach would be more efficient as it creates/destroys 1 fewer object.  Any benefits to the VC++ approach?</li>\n</ol>\n"}, {"tags": ["python", "c++", "boost-python"], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 4662832, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dca4947bb4c9662ac2b61fee1d46e45a?s=128&d=identicon&r=PG&f=1", "display_name": "maddisoj", "link": "https://stackoverflow.com/users/4662832/maddisoj"}, "is_accepted": true, "score": 1, "last_activity_date": 1437066831, "last_edit_date": 1495535309, "creation_date": 1437063054, "answer_id": 31459409, "question_id": 31437923, "link": "https://stackoverflow.com/questions/31437923/c-classes-and-python-objects/31459409#31459409", "title": "C++ Classes and Python Objects", "body": "<p>The issue is having to declare the abstract classes as <code>boost::noncopyable</code>. AS the <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/python/doc/v2/class.html\" rel=\"nofollow noreferrer\">documentation</a> states:</p>\n\n<blockquote>\n  <p><em><code>boost::noncopyable</code></em> [sic] Suppresses automatic registration of to_python conversions which copy T instances. Required when  T has no publicly-accessible copy constructor.</p>\n</blockquote>\n\n<p>So we can convert the python object to a C++ instance but not vica-versa which leads to the error in the question when we attempt to do just that.</p>\n\n<p>The solution was in fact in the comments of the answer to <a href=\"https://stackoverflow.com/questions/5336942/boost-python-call-by-reference-typeerror-no-to-python-by-value-converter-fo\">this</a> question.</p>\n\n<p>In the <strong>wrapper</strong> class, pass the object by reference instead of by value; so the class does not have to be converted to python. This leaves the wrapper looking like so:</p>\n\n<pre><code>struct B_wrapper : B, py::wrapper&lt;B&gt; {\n    void b(const A&amp; a) {\n        this-&gt;get_override(\"b\")(boost:ref(a));\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 555, "user_id": 4662832, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dca4947bb4c9662ac2b61fee1d46e45a?s=128&d=identicon&r=PG&f=1", "display_name": "maddisoj", "link": "https://stackoverflow.com/users/4662832/maddisoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "closed_date": 1437064781, "accepted_answer_id": 31459409, "answer_count": 1, "score": 3, "last_activity_date": 1437066984, "creation_date": 1436983694, "last_edit_date": 1437066984, "question_id": 31437923, "link": "https://stackoverflow.com/questions/31437923/c-classes-and-python-objects", "closed_reason": "Duplicate", "title": "C++ Classes and Python Objects", "body": "<p>I have two abstract C++ classes which I expose and derive in python. I am trying to extract those derived objects in C++ and call some method of one of the classes, passing an instance of the other class to the first. The classes are defined as such:</p>\n\n<pre><code>struct A {\n    std::vector&lt;int&gt; numbers;\n\n    virtual void a() = 0;\n};\n\nstruct B {\n    virtual void b(const A&amp; a) = 0;\n};\n</code></pre>\n\n<p>I expose them to Python using <code>boost::python</code></p>\n\n<pre><code>namespace py = boost::python;\n\nstruct A_wrapper : A, py:wrapper&lt;A&gt; {\n    void a() {\n        this-&gt;getoverride(\"a\")();\n    }\n};\n\nstruct B_wrapper : B, py::wrapper&lt;B&gt; {\n    void b(const A&amp; a) {\n        this-&gt;get_override(\"b\")(a);\n    }\n};\n\nBOOST_PYTHON_MODULE(example) {\n    typedef std::vector&lt;int&gt; int_vec_t;\n\n    py::class_&lt;int_vec_t&gt;(\"IntList\")\n        .def(py::vector_indexing_suite&lt;int_vec_t&gt;());\n\n    py::class_&lt;A_wrapper, boost::noncopyable&gt;(\"A\")\n        .def_readwrite(\"numbers\", &amp;A::numbers)\n        .def(\"a\", py::pure_virtual(&amp;A::a));\n\n    py::class_&lt;B_wrapper, boost::noncopyable&gt;(\"B\")\n        .def(\"b\", py::pure_virtual(&amp;B::b));\n}\n</code></pre>\n\n<p>My python classes just fill the numbers array with random numbers and <code>B::b</code> prints those numbers for debugging purposes.</p>\n\n<p>I can import them and extract the two classes to <code>boost::shared_ptr</code>s without problems. Any python code in their initializer's is even called.</p>\n\n<pre><code>auto pyA = py::extract&lt;boost::shared_ptr&lt;A&gt; &gt;(/*py object containing derivation of A*/)();\nauto pyB = py::extract&lt;boost::shared_ptr&lt;B&gt; &gt;(/*py object containing derivation of B*/)();\n</code></pre>\n\n<p>but when I try and call <code>pyB-&gt;b(*pyA)</code> I get the following error:</p>\n\n<pre><code>TypeError: No to_python (by-value) converter found for C++ type: A\n</code></pre>\n\n<p>What am I doing wrong? How can I call Python's derivation of <code>B::b</code> with an instance of <code>A</code>?</p>\n"}, {"tags": ["c++", "pgp", "gpgme"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1436984246, "post_id": 31437893, "comment_id": 50845788, "body": "<i>&quot;... but don&#39;t you need the passphrase ...&quot;</i> The answer points out you have some automatism installed taking the passphrase from a store connected to your User ID. Also you might check the <a href=\"https://www.gnupg.org/features.html\" rel=\"nofollow noreferrer\">GnuPg</a> reference documentation."}, {"owner": {"reputation": 11, "user_id": 5120580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d8dcd79c5ee408db6e675bc015ad1c?s=128&d=identicon&r=PG&f=1", "display_name": "peety", "link": "https://stackoverflow.com/users/5120580/peety"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1436984528, "post_id": 31437893, "comment_id": 50845931, "body": "But the gpg program asks me everytime I use it for the passphrase. If there was some passphrase cache so low-level that the gpgme lib uses it, wouldn&#39;t the gpg command also use this?"}, {"owner": {"reputation": 11, "user_id": 5120580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d8dcd79c5ee408db6e675bc015ad1c?s=128&d=identicon&r=PG&f=1", "display_name": "peety", "link": "https://stackoverflow.com/users/5120580/peety"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1436984947, "post_id": 31437893, "comment_id": 50846176, "body": "Just to be sure, I set the passphrase callback explicitly to NULL: <a href=\"https://www.gnupg.org/documentation/manuals/gpgme/Passphrase-Callback.html#Passphrase-Callback\" rel=\"nofollow noreferrer\">gnupg.org/documentation/manuals/gpgme/&hellip;</a>  but still no passphrase is asked for."}, {"owner": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "edited": false, "score": 0, "creation_date": 1437059637, "post_id": 31437893, "comment_id": 50883128, "body": "It seems like the <code>gpg-agent</code> is caching the passphrase. Using GnuPG 2 it might be possible you cannot prevent this using GPGME, although I&#39;m not familiar with this API. Try disabling caching in the <code>gpg-agent</code> configuration."}, {"owner": {"reputation": 11, "user_id": 5120580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d8dcd79c5ee408db6e675bc015ad1c?s=128&d=identicon&r=PG&f=1", "display_name": "peety", "link": "https://stackoverflow.com/users/5120580/peety"}, "edited": false, "score": 0, "creation_date": 1437233899, "post_id": 31437893, "comment_id": 50948915, "body": "Thank you both, it was indeed gpg-agent. The reason why the command line tool <code>gpg</code> did ask for the passphrase is that it uses gpg version 1 whereas gpgme uses gpg version 2."}], "owner": {"reputation": 11, "user_id": 5120580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d8dcd79c5ee408db6e675bc015ad1c?s=128&d=identicon&r=PG&f=1", "display_name": "peety", "link": "https://stackoverflow.com/users/5120580/peety"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436983617, "creation_date": 1436983617, "last_edit_date": 1495541644, "question_id": 31437893, "link": "https://stackoverflow.com/questions/31437893/gpgme-passphrase-protection-for-signature", "title": "gpgme passphrase protection for signature", "body": "<p>I am trying to dig myself into the gpgme library. My first step for this was to copy/paste the function given in the answer <a href=\"https://stackoverflow.com/questions/9596856/gnupgme-gpg-signature-c\">here</a>.\nI created a fresh key, which is the only one in my gpg installation:</p>\n\n<pre><code>&gt; gpg --list-keys\n/home/frank/.gnupg/pubring.gpg\n------------------------------\npub   4096R/XXXXXXXX 2015-07-11\nuid                  Frank Xxxxxx &lt;xxxxx@xxxxxxxx.xx&gt;\nsub   4096R/XXXXXXXX 2015-07-11\n</code></pre>\n\n<p>The key is passphrase protected.</p>\n\n<p>When I sign a test file with <code>gpg --sign testfile.txt</code> gpg asks me for the pass phrase, as expected. But when I use the copy/pasted function mentioned above it signs the test file without complaint and without knowing the pass phrase to my private key.</p>\n\n<p>I can verify both signatures with <code>gpg --verify testfile.txt.gpg</code> and it tells me in both cases that the signature was good (The time stamp of course differs):</p>\n\n<pre><code>gpg: Signature made Wed 15 Jul 2015 07:33:00 PM CEST using RSA key ID XXXXXXXX\ngpg: Good signature from \"Frank Xxxxxx &lt;xxxxx@xxxxxxxx.xx&gt;\"\n</code></pre>\n\n<p>Maybe this is a total crypto-noob question but don't you need the passphrase to decrypt the private key in order to sign anything?</p>\n"}, {"tags": ["c++", "arrays", "malloc"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1436983313, "post_id": 31437616, "comment_id": 50845219, "body": "This is really really really bad C++. Go read a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a>."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1436983539, "post_id": 31437616, "comment_id": 50845364, "body": "It may be real bad C++, but it is a valid and fairly well formed question.  Why all the neg votes?"}], "answers": [{"comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1436983286, "post_id": 31437751, "comment_id": 50845202, "body": "I can&#39;t decide if this is an answer to the question or a comment.  I suppose it depends on the interpretation of <i>&quot;What am I doing wrong?&quot;</i>"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1436983484, "post_id": 31437751, "comment_id": 50845324, "body": "vector of vector of char?  not a string?"}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1436983587, "post_id": 31437751, "comment_id": 50845393, "body": "@MichaelDorgan depending what author wants to achieve. I wanted to show how to create multidim in C++ :)"}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436983677, "post_id": 31437751, "comment_id": 50845449, "body": "@DrewDormann - true, it would be just less readable as comment... also question is the one of &quot;please do my debugging for me&quot;"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1436983740, "post_id": 31437751, "comment_id": 50845504, "body": "Was the second half a resonse for me?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436983883, "post_id": 31437751, "comment_id": 50845583, "body": "@Hcorg based on your comment, I would claim <b>that this answer should be a comment</b>.  It is a very helpful comment, nonetheless.  Please don&#39;t take it personally."}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1436984847, "post_id": 31437751, "comment_id": 50846110, "body": "@DrewDormann - don&#39;t worry, I won&#39;t. As I said - I was wondering what it should be (ans/comm), but I&#39;m still learning proper &#39;feels&#39; and &#39;smells&#39; of SO."}], "tags": [], "owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "is_accepted": true, "score": 4, "last_activity_date": 1437019647, "last_edit_date": 1437019647, "creation_date": 1436983196, "answer_id": 31437751, "question_id": 31437616, "link": "https://stackoverflow.com/questions/31437616/seg-fault-upon-accessing-mallocd-2d-array-in-class/31437751#31437751", "title": "Seg Fault upon accessing malloc&#39;d 2d array in class", "body": "<pre><code>    memset(map, 0, mapDimension*mapDimension*sizeof(char));\n</code></pre>\n\n<p>You are clearing <code>map</code> array (array of <em>pointers</em>), so map[x] now contains NULL. You probably should use <code>map[i]</code> in loop to clear allocated memory.</p>\n\n<p><strong>BUT</strong></p>\n\n<ol>\n<li>When you allocate memory you should deallocate it (there is malloc, no free visible)</li>\n<li>In C++ use <code>new[]</code> and <code>delete[]</code> instead of <code>malloc</code></li>\n<li>Even better - use <code>std::vector&lt;std::vector&lt;char&gt;&gt;</code>  </li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1436983964, "last_edit_date": 1436983964, "creation_date": 1436983343, "answer_id": 31437799, "question_id": 31437616, "link": "https://stackoverflow.com/questions/31437616/seg-fault-upon-accessing-mallocd-2d-array-in-class/31437799#31437799", "title": "Seg Fault upon accessing malloc&#39;d 2d array in class", "body": "<p>This statement is invalid</p>\n\n<pre><code>memset(map, 0, mapDimension*mapDimension*sizeof(char));\n</code></pre>\n\n<p>you allocated several extents of memory not one contiguous storage area.</p>\n\n<p>You have to use a loop. For example</p>\n\n<pre><code>    for ( i = 0; i &lt; mapDimension; i++ ) memset( map[i], 0, mapDimension );\n</code></pre>\n\n<p>And your class has to have a destructor that to free the allocated memory.</p>\n\n<p>For example</p>\n\n<pre><code>~Field()\n{\n    for( i = 0; i &lt; mapDimension; i++ ) free( map[i] );\n    free( map );\n}\n</code></pre>\n\n<p>It would be better to make <code>mapDimension</code> like a static constant variable of type <code>size_t</code> instead of using a macro definition.</p>\n\n<p>Take into account that in C++ you should use operator <code>new</code> instead of C function <code>malloc</code>.</p>\n\n<p>Also you could simply use container <code>std::vector&lt;std::string&gt;</code> instead of the manually allocated arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 0, "last_activity_date": 1436983978, "last_edit_date": 1436983978, "creation_date": 1436983505, "answer_id": 31437864, "question_id": 31437616, "link": "https://stackoverflow.com/questions/31437616/seg-fault-upon-accessing-mallocd-2d-array-in-class/31437864#31437864", "title": "Seg Fault upon accessing malloc&#39;d 2d array in class", "body": "<ul>\n<li><p>Firstly, it is possible to allocate your array so that you'll be able to <code>memset</code> the entire array in one shot. But for that you have to allocate the second-level memory as <em>one continuous memory block</em> and then distribute it between the rows</p>\n\n<pre><code>Field()\n{\n  char *data_memory = (char *) malloc(mapDimension * mapDimension * sizeof(char));\n\n  for (i = 0; i &lt; mapDimension; i++)\n    map[i] = data_memory + i * mapDimension;\n  ...\n}\n</code></pre></li>\n<li><p>Secondly, if you changed your allocation approach to a \"single block allocation\" (as described above) then in order to <code>memset</code> the whole thing, you have to do it as follows</p>\n\n<pre><code>memset(map[0], 0, mapDimension * mapDimension * sizeof(char));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>memset(&amp;map[0][0], 0, mapDimension * mapDimension * sizeof(char));\n</code></pre>\n\n<p>Note the fist argument of <code>memset</code>.</p>\n\n<p>But if you kept to your current allocation approach, then you can forget about using <code>memset</code> on the entire array. Your array is not continuous in memory. You can't <code>memset</code> the whole thing. All you can do is <code>memset</code> each row individually</p>\n\n<pre><code>for (i = 0; i &lt; mapDimension; i++)\n  memset(map[i], 0, mapDimension * sizeof(char));\n</code></pre></li>\n<li><p>Thirdly, declaring <code>i</code> as a member fo the class, instead of using a local variable <code>i</code> is bad idea. Also, using in-class initializer for the frist <code>malloc</code> is a bad idea too. Also, in C++ you should prefer to use <code>new/new[]</code> over <code>malloc</code>, not even mentioning that you should prefer to use <code>std::vector</code> over manual array memory management.</p></li>\n</ul>\n"}], "owner": {"reputation": 589, "user_id": 4352154, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-63Z0G5h6oFA/AAAAAAAAAAI/AAAAAAAAAHg/guAmotTzoqo/photo.jpg?sz=128", "display_name": "Kai Schmidt", "link": "https://stackoverflow.com/users/4352154/kai-schmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 31437751, "answer_count": 3, "score": 0, "last_activity_date": 1437019647, "creation_date": 1436982770, "question_id": 31437616, "link": "https://stackoverflow.com/questions/31437616/seg-fault-upon-accessing-mallocd-2d-array-in-class", "title": "Seg Fault upon accessing malloc&#39;d 2d array in class", "body": "<p>This is meant to be a class that contains a 2d array of chars called \"map\". First, I allocate [mapDimension] char*s to a char**. Then, I allocate [mapDimension] chars to each char*. I do it this way rather than the static: char map[mapDimension][mapDimension] because while that works for small numbers, once mapDimension gets above around 2500, it also segfaults. I wanted to allocate the memory on the heap rather than the stack so that I could hold more.</p>\n\n<p>The last two lines in the constructor are to initialize every char in the 2d array to 0 and then set the center one to 5.</p>\n\n<pre><code>#define mapDimension 1000    \n\nclass Field \n{\nprivate:\n    int i;\npublic:\n    char** map = (char**)malloc(mapDimension * sizeof(char*));\n    Field()\n    {\n        for(i = 0; i &lt; mapDimension; i++)\n            map[i] = (char*)malloc(mapDimension * sizeof(char));\n        memset(map, 0, mapDimension*mapDimension*sizeof(char));\n        map[mapDimension/2][mapDimension/2] = 5;\n    }\n};\n\nint main()\n{\n    Field field;\n    return 0;\n}\n</code></pre>\n\n<p>This dynamic approach also segfaults. What am I doing wrong?</p>\n"}, {"tags": ["c++", "c", "multithreading", "signals", "interrupt"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436983552, "post_id": 31437568, "comment_id": 50845371, "body": "Why are you using the signal to <i>interrupt</i> as an &quot;attention&quot; signal? It&#39;s usually the signal sent when trying to cancel a program with CTRL-C. If you catch it, and have a problem leading a user to wanting to interrupt your program, it would no longer be possible using the usual standard way. You may want to use e.g. <code>SIGUSR1</code> or <code>SIGUSR2</code>."}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1437067081, "post_id": 31437568, "comment_id": 50887892, "body": "@JoachimPileborg  I want to do it for windows also. I think I cannot use SIGUSER1 and SIGUSR2 for that. Please let me know if I am incorrect."}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1437069189, "post_id": 31437568, "comment_id": 50889042, "body": "@JoachimPileborg can you please have a look at <a href=\"http://stackoverflow.com/questions/31461171/signal-handler-getting-called-in-wrong-thread\" title=\"signal handler getting called in wrong thread\">stackoverflow.com/questions/31461171/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436983688, "post_id": 31437821, "comment_id": 50845460, "body": "By using <code>sigaction</code> one can <i>control</i> the behavior with a flag."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436984310, "post_id": 31437821, "comment_id": 50845822, "body": "Yes, not having to reinstall is an obvious advantage among other things."}, {"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1437069170, "post_id": 31437821, "comment_id": 50889032, "body": "@BlueMoon can you please have a look at <a href=\"http://stackoverflow.com/questions/31461171/signal-handler-getting-called-in-wrong-thread\" title=\"signal handler getting called in wrong thread\">stackoverflow.com/questions/31461171/&hellip;</a>"}, {"owner": {"reputation": 1497, "user_id": 4843379, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a3681737b6e2ecc037c83474eed2309c?s=128&d=identicon&r=PG&f=1", "display_name": "incompetent", "link": "https://stackoverflow.com/users/4843379/incompetent"}, "edited": false, "score": 0, "creation_date": 1437662166, "post_id": 31437821, "comment_id": 51132792, "body": "but still sigaction(or any method) can not guarantee to entertain all signals generated"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1436983692, "last_edit_date": 1436983692, "creation_date": 1436983401, "answer_id": 31437821, "question_id": 31437568, "link": "https://stackoverflow.com/questions/31437568/how-to-send-sigint-signal-multiple-times/31437821#31437821", "title": "how to send SIGINT signal multiple times", "body": "<p>Typically after the first signal, signal handler is reset to <code>SIG_DFL</code> (Unix V signals) and the default behaviour for <code>SIG_INT</code> to exit the program. This is what you observe. So it would require to reinstall the handler again. Install it again in the handler:</p>\n\n<pre><code>void signal_handler(int signal)\n{\n    signal(SIGINT, signal_handler);\n    printf(\"Received signal %d\\n\", signal);\n}\n</code></pre>\n\n<p>A better approach would be to use <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow\"><code>sigaction</code></a> instead as it doesn't have this behaviour.</p>\n"}], "owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1663, "favorite_count": 0, "accepted_answer_id": 31437821, "answer_count": 1, "score": 0, "last_activity_date": 1436983692, "creation_date": 1436982635, "question_id": 31437568, "link": "https://stackoverflow.com/questions/31437568/how-to-send-sigint-signal-multiple-times", "title": "how to send SIGINT signal multiple times", "body": "<p>I am trying to send a SIGINT signal to main thread from some other thread. The main thread has assigned a handler for for the signal. When I send first signal, it is caught in handler. But I want to send signal continuously. but after handling the first signal, the program terminates. I have put a while loop. So what I expect is that it should continue sending these signals. Following is my code</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n\nstatic void catch_function(int signo) {\n    puts(\"Interactive attention signal caught.\");\n}\n\nDWORD WINAPI MyThreadFunction( LPVOID lpParam ) \n{\n    while(1)\n    {\n        Sleep(50);\n        puts(\"Raising the interactive attention signal.\");\n        if (raise(SIGINT) != 0) \n        {\n            fputs(\"Error raising the signal.\\n\", stderr);\n            return EXIT_FAILURE;\n        }\n    }\nreturn 0;\n}\n\n\nint main(void) \n{\n     if (signal(SIGINT, catch_function) == SIG_ERR) {\n    fputs(\"An error occurred while setting a signal handler.\\n\", stderr);\n    return EXIT_FAILURE;\n    }\n\n    HANDLE thread;\n    DWORD  threadId;\n    thread = CreateThread(NULL, 0, &amp;MyThreadFunction, NULL, 0, &amp;threadId);\n    if(!thread)\n    {\n        printf(\"CreateThread() failed\");\n    }\n\n    while(1)\n    {\n        Sleep(50);\n    }\n    puts(\"Exiting.\");\n    return 0;\n}\n</code></pre>\n\n<p>The output of following code is </p>\n\n<pre><code>Raising the interactive attention signal.\nInteractive attention signal caught.\nRaising the interactive attention signal.\n</code></pre>\n\n<p>I have tried using a simple example also. Here I am sending a signal 3 times, but only first time the signal is caught. After that the program terminated. Following is the code</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid signal_handler(int signal)\n{\n    printf(\"Received signal %d\\n\", signal);\n}\n\nint main(void)\n{\n    // Install a signal handler.\n    signal(SIGINT, signal_handler);\n\n    printf(\"Sending signal %d\\n\", SIGINT);\n    raise(SIGINT);\n    raise(SIGINT);\n    raise(SIGINT);\n    printf(\"Exit main()\\n\");\n}\n</code></pre>\n\n<p>Output is </p>\n\n<pre><code>sending signal 2\nReceived signal 2\n</code></pre>\n\n<p>So I want to know how can I continue sending some signals from one thread  to some other thread? I want that one of my threads will send SIGINT signals and main will catch them and do some operations accordingly.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1436984841, "post_id": 31437566, "comment_id": 50846109, "body": "This looks dangerously close to <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">Three Star Programming</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1436982808, "creation_date": 1436982808, "answer_id": 31437634, "question_id": 31437566, "link": "https://stackoverflow.com/questions/31437566/why-do-my-pointer-change-itself-automatically/31437634#31437634", "title": "Why do my pointer change itself automatically?", "body": "<p>Because in the <code>test</code> function the variable <code>pT</code> is local, and it will go out of scope once the function returns. The pointer to it you get with <code>&amp;pT</code> will become invalid once you return from the function, and attempting to use it will lead to <em>undefined behavior</em>.</p>\n\n<p>And that's only <em>half</em> the problem, the other is that you pass a null pointer to the function, and dereference it inside the function. When you emulate pass by reference (what you do by using a pointer to a pointer) you need to use the address-of operator on a pointer, like</p>\n\n<pre><code>t* pA = 0;\ntest(&amp;pT);\n</code></pre>\n\n<p>This also brings into scope the question why you use a reference to a pointer-to-pointer, instead of just simply a reference to a pointer, like</p>\n\n<pre><code>void test(t*&amp; pT);\n...\nt* pT = nullptr;\ntest(pT);\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 4159812, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/af012235f3537ead591d7c77d89152c6?s=128&d=identicon&r=PG&f=1", "display_name": "Zhipeng YANG", "link": "https://stackoverflow.com/users/4159812/zhipeng-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437013655, "creation_date": 1436982634, "last_edit_date": 1437013655, "question_id": 31437566, "link": "https://stackoverflow.com/questions/31437566/why-do-my-pointer-change-itself-automatically", "title": "Why do my pointer change itself automatically?", "body": "<pre><code>struct t{\n    int a;\n    t(int i){\n        a = i;\n    }\n};\n\nvoid test(t**&amp; ppT){\n    t *pT = (t*)malloc(sizeof(t));\n    pT-&gt;a = 100;//works\n\n    t *pT = new t(100);//doesn't work\n\n    ppT = &amp;pT;\n}\n</code></pre>\n\n<p>I have a struct named <em>t</em>, and a function called <em>test</em>.</p>\n\n<p>In main(), I have</p>\n\n<pre><code>t **ppT = NULL;\ntest(ppT);\ncout &lt;&lt; ppT &lt;&lt; \" \" &lt;&lt; *ppT &lt;&lt; endl;\ncout &lt;&lt; ppT &lt;&lt; \" \" &lt;&lt; *ppT &lt;&lt; endl;\n</code></pre>\n\n<p>If I use malloc in <em>test</em>, it works.\nHowever, if I use new in <em>test</em>, it will show me</p>\n\n<pre><code>0049FCC8 0074C378\n0049FCC8 CCCCCCCC\n</code></pre>\n\n<p>What's the problem? Furthermore, I use Visual Studio 2013 as my compiler.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1436981486, "post_id": 31437157, "comment_id": 50844113, "body": "You&#39;re describing a &quot;temporary&quot;, or &quot;r-value&quot;"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1436981508, "post_id": 31437157, "comment_id": 50844129, "body": "The class is neither nameless (It&#39;s called <code>QSettings</code>) nor temporary (it&#39;s there and it will always be there)."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1436981591, "post_id": 31437157, "comment_id": 50844170, "body": "Kerrick SB is likely hinting that you may be confusing the terms &quot;class&quot; and &quot;instance&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1436981636, "post_id": 31437157, "comment_id": 50844205, "body": "Not the class is &#39;nameless&#39;, but the temporary variable used in <code>QSettings().setValue( DEST_FOLDER, destDir );</code> (Doing it is OK)"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1436982717, "post_id": 31437157, "comment_id": 50844855, "body": "whoever has voted down my question must know you are against spreading knowledge :)"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1436983526, "post_id": 31437157, "comment_id": 50845356, "body": "Why exactly is my question beng down voted..may I know the reason please?"}], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1436982637, "post_id": 31437217, "comment_id": 50844805, "body": "So basically you can call any constructor like this! This is what I wanted to know, it almost behaves like the constructor is static..well constructor is special but I have never seen this in any documentation that you can invoke a nameless class instance like this."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1436982820, "post_id": 31437217, "comment_id": 50844917, "body": "@zadane Well a constructor is not really <code>static</code>, but it does of course not need an existing instance to be invoked on since it is the mechanism to create an instance in the first place."}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 7, "last_activity_date": 1573505646, "last_edit_date": 1573505646, "creation_date": 1436981532, "answer_id": 31437217, "question_id": 31437157, "link": "https://stackoverflow.com/questions/31437157/creating-a-temporary-nameless-class-instance-in-c/31437217#31437217", "title": "Creating a temporary nameless class instance in C++", "body": "<pre><code>QSettings().setValue( DEST_FOLDER, destDir );\n</code></pre>\n\n<p>will give you a default constructed temporary <em>instance</em> of <code>QSettings</code> that will exist until the end of the full expression, in this case the <code>;</code> at the end of the line, and then call <code>setValue(...)</code> on said temporary.</p>\n\n<p>You can call every constructor you want this way, not just the default constuctor as you did in your example. If e.g. <code>class A</code> has a constructor and a member function <code>fun</code> that take a single <code>int</code>, </p>\n\n<pre><code>A(5).fun(20);\n</code></pre>\n\n<p>will create a temporary object of type <code>A</code> via <code>A::int(5)</code> and then call <code>A::fun(int i)</code> with <code>i = 20</code> on it. </p>\n\n<p>This is allowed and safe, whether this actually makes sense depends on what the method you call does in the end.</p>\n\n<p>Note that the class itself is neither nameless nor temporary, only the instance you create is.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1436982546, "creation_date": 1436982546, "answer_id": 31437543, "question_id": 31437157, "link": "https://stackoverflow.com/questions/31437157/creating-a-temporary-nameless-class-instance-in-c/31437543#31437543", "title": "Creating a temporary nameless class instance in C++", "body": "<blockquote>\n  <p><em>\"My question is its a little like calling the constructor..is there a name to this kind of syntax?\"</em></p>\n</blockquote>\n\n<p>Yes, it's called a creating a <em>temporary rvalue</em></p>\n\n<blockquote>\n  <p><em>\"Can someone explain or point me to documentation to this kind of initialization?\"</em></p>\n</blockquote>\n\n<p>It's a basic c++ feature, documentation may be given in the <a href=\"https://isocpp.org/files/papers/N3690.pdf\" rel=\"nofollow\">C++ standard specification</a>.</p>\n\n<blockquote>\n  <p><em>\"Dumb question but is it bad to do this?\"</em></p>\n</blockquote>\n\n<p>Totally depends on what features <a href=\"http://doc.qt.io/qt-5/qsettings.html\" rel=\"nofollow\"><code>QSettings</code></a> actually provides, and these kind of calls persist the settings, as you want to do.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 0, "accepted_answer_id": 31437217, "answer_count": 2, "score": -2, "last_activity_date": 1573505646, "creation_date": 1436981371, "last_edit_date": 1436981721, "question_id": 31437157, "link": "https://stackoverflow.com/questions/31437157/creating-a-temporary-nameless-class-instance-in-c", "title": "Creating a temporary nameless class instance in C++", "body": "<p>Sometimes I need to instantiate a class only to call its one methed. For example to read registry in Qt.</p>\n\n<pre><code>QSettings settings;\nsettings.setValue( DEST_FOLDER, destDir );\n</code></pre>\n\n<p>But I use this syntax instead.</p>\n\n<pre><code>QSettings().setValue( DEST_FOLDER, destDir );\n</code></pre>\n\n<p>It works but I haven't seen any documentation on it, what is it called? I searched 'nameless c++ class' but it doesn't come up. There is anonymous class but I think that's different.</p>\n\n<p>My question is its a little like calling the constructor..is there a name to this kind of syntax? Can someone explain or point me to documentation to this kind of initialization? Dumb question but is it bad to do this?</p>\n"}, {"tags": ["java", "c++", "keyboard", "simulate"], "comments": [{"owner": {"reputation": 2525, "user_id": 1762117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gt9Rc.jpg?s=128&g=1", "display_name": "MiltoxBeyond", "link": "https://stackoverflow.com/users/1762117/miltoxbeyond"}, "edited": false, "score": 0, "creation_date": 1436981254, "post_id": 31437067, "comment_id": 50843975, "body": "It may be that they don&#39;t use the normal means of receiving keyboard input.   Maybe they use either direct input or some other api for keyboard access."}, {"owner": {"reputation": 111, "user_id": 3187788, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/17676242a31157aa125d321870fe249a?s=128&d=identicon&r=PG&f=1", "display_name": "TheBeocro", "link": "https://stackoverflow.com/users/3187788/thebeocro"}, "reply_to_user": {"reputation": 2525, "user_id": 1762117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gt9Rc.jpg?s=128&g=1", "display_name": "MiltoxBeyond", "link": "https://stackoverflow.com/users/1762117/miltoxbeyond"}, "edited": false, "score": 0, "creation_date": 1436981360, "post_id": 31437067, "comment_id": 50844033, "body": "I read something about that, but I&#39;m not sure how to get around it if that is the case..."}, {"owner": {"reputation": 2525, "user_id": 1762117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gt9Rc.jpg?s=128&g=1", "display_name": "MiltoxBeyond", "link": "https://stackoverflow.com/users/1762117/miltoxbeyond"}, "edited": false, "score": 0, "creation_date": 1436981593, "post_id": 31437067, "comment_id": 50844174, "body": "Possibly emulating a keyboard driver if you reaaally need it badly"}], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 1830325, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c99e4f3db9f1075c99af0c807d54c5f?s=128&d=identicon&r=PG&f=1", "display_name": "Atocil", "link": "https://stackoverflow.com/users/1830325/atocil"}, "is_accepted": false, "score": 0, "last_activity_date": 1436981398, "creation_date": 1436981398, "answer_id": 31437167, "question_id": 31437067, "link": "https://stackoverflow.com/questions/31437067/both-java-and-c-refuse-to-emulate-arrow-keys/31437167#31437167", "title": "Both Java and C++ Refuse to Emulate Arrow Keys?", "body": "<p>You can indeed do this with C++ using the SendKeys class. As detailed in the article linked <a href=\"https://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys%28v=vs.110%29.aspx\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 3187788, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/17676242a31157aa125d321870fe249a?s=128&d=identicon&r=PG&f=1", "display_name": "TheBeocro", "link": "https://stackoverflow.com/users/3187788/thebeocro"}, "edited": false, "score": 0, "creation_date": 1436985415, "post_id": 31437351, "comment_id": 50846449, "body": "Sorry for the late response. My concern with this method (which I probably should&#39;ve mentioned) is that I&#39;m distributing this program to other people. I have zero experience with drivers, so would this be easy to give to other people?"}, {"owner": {"reputation": 235, "user_id": 5069335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1162b95b37e32225c314ba2fc124385?s=128&d=identicon&r=PG&f=1", "display_name": "citywall", "link": "https://stackoverflow.com/users/5069335/citywall"}, "reply_to_user": {"reputation": 111, "user_id": 3187788, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/17676242a31157aa125d321870fe249a?s=128&d=identicon&r=PG&f=1", "display_name": "TheBeocro", "link": "https://stackoverflow.com/users/3187788/thebeocro"}, "edited": false, "score": 0, "creation_date": 1436985654, "post_id": 31437351, "comment_id": 50846584, "body": "I have never written a driver, but I&#39;m sure that giving it to other people will be the least of you worries. Writing it should be the worst nightmare, getting it certified (unless you can live with warnings/manual install) might be very hard too ... but maybe it is not impossible? There is a sample so how hard can it be? :)"}, {"owner": {"reputation": 111, "user_id": 3187788, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/17676242a31157aa125d321870fe249a?s=128&d=identicon&r=PG&f=1", "display_name": "TheBeocro", "link": "https://stackoverflow.com/users/3187788/thebeocro"}, "edited": false, "score": 0, "creation_date": 1436986080, "post_id": 31437351, "comment_id": 50846813, "body": "I don&#39;t think I&#39;ll bother then. This is just a small program, no need to mess with drivers. Thanks though!"}], "tags": [], "owner": {"reputation": 235, "user_id": 5069335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1162b95b37e32225c314ba2fc124385?s=128&d=identicon&r=PG&f=1", "display_name": "citywall", "link": "https://stackoverflow.com/users/5069335/citywall"}, "is_accepted": false, "score": 2, "last_activity_date": 1436981992, "creation_date": 1436981992, "answer_id": 31437351, "question_id": 31437067, "link": "https://stackoverflow.com/questions/31437067/both-java-and-c-refuse-to-emulate-arrow-keys/31437351#31437351", "title": "Both Java and C++ Refuse to Emulate Arrow Keys?", "body": "<p>If it is important that it works on all apps in Windows, you might have to write a driver that emulates a HID - installing and registering your driver as a keyboard in Windows.\nSounds like a lot of work, but Microsoft has the Windows Driver Kit, and in the Windows Driver Kit Samples Pack there is a few interesting samples you can check out: <a href=\"https://msdn.microsoft.com/en-us/library/ff554118(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ff554118(v=vs.85).aspx</a></p>\n\n<p>I assume you only need it working on Windows, due to your C++ program.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 3187788, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/17676242a31157aa125d321870fe249a?s=128&d=identicon&r=PG&f=1", "display_name": "TheBeocro", "link": "https://stackoverflow.com/users/3187788/thebeocro"}, "edited": false, "score": 1, "creation_date": 1436992857, "post_id": 31439081, "comment_id": 50850647, "body": "Thanks for the suggestion, but it appears to have the same result as my current method. The arrow keys don&#39;t work on certain applications."}], "tags": [], "owner": {"reputation": 7786, "user_id": 999884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuL5q.jpg?s=128&g=1", "display_name": "Software_Designer", "link": "https://stackoverflow.com/users/999884/software-designer"}, "is_accepted": false, "score": 0, "last_activity_date": 1436987562, "creation_date": 1436987562, "answer_id": 31439081, "question_id": 31437067, "link": "https://stackoverflow.com/questions/31437067/both-java-and-c-refuse-to-emulate-arrow-keys/31439081#31439081", "title": "Both Java and C++ Refuse to Emulate Arrow Keys?", "body": "<p><code>keybd_event()</code> although <strong>deprecated</strong> is another function that synthesizes  a keypress. The key codes show up on keyloggers as long as that targeted program has focus. Simulating start menu key press is as easy as this -</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;windows.h&gt;\n\nusing namespace std; \n\n\nint main(){\n    cout&lt;&lt;\"Standby : Simulating start menu key press \\n\\n\";\n\n    keybd_event(VK_LWIN, 0, KEYEVENTF_EXTENDEDKEY, 0);\n    keybd_event(VK_LWIN, 0, KEYEVENTF_KEYUP, 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>To simulate the arrows keys being pressed up and down, try this:</p>\n\n<pre><code>// simulate RIGHT key press \nkeybd_event(VK_RIGHT,0,0,0);\nkeybd_event(VK_RIGHT,0,KEYEVENTF_KEYUP,0);\n\n// simulate LEFT key press \nkeybd_event(VK_LEFT,0,0,0);\nkeybd_event(VK_LEFT,0,KEYEVENTF_KEYUP,0);\n\n// simulate UP key press \nkeybd_event(VK_UP,0,0,0);\nkeybd_event(VK_UP,0,KEYEVENTF_KEYUP,0);\n\n// simulate DOWN key press \nkeybd_event(VK_DOWN,0,0,0);\nkeybd_event(VK_DOWN,0,KEYEVENTF_KEYUP,0);\n</code></pre>\n\n<p>keybd_event (deprecated) : <a href=\"https://msdn.microsoft.com/en-us/library/ee504289.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ee504289.aspx</a></p>\n\n<p>keybd_event : <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646304(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms646304(v=vs.85).aspx</a></p>\n\n<p>Virtual-Key Codes : <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 111, "user_id": 3187788, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/17676242a31157aa125d321870fe249a?s=128&d=identicon&r=PG&f=1", "display_name": "TheBeocro", "link": "https://stackoverflow.com/users/3187788/thebeocro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1436987562, "creation_date": 1436981075, "question_id": 31437067, "link": "https://stackoverflow.com/questions/31437067/both-java-and-c-refuse-to-emulate-arrow-keys", "title": "Both Java and C++ Refuse to Emulate Arrow Keys?", "body": "<p>Alright, so. This is driving me absolutely insane. I'm building an application in Java and it requires that the keyboard keys be simulated. Like, I want to fool the entire computer into thinking a key is being pressed. (Don't worry, my intentions are not malicious :P ) The problem is, I was using Java's Robot class to simulate the key presses, and there is a bug that doesn't allow for the arrow keys to be pressed in some applications, for whatever reason.</p>\n\n<p>So I figured I would just make a small C++ program to handle the input simulation and call it from Java. But here's the kicker: The arrow keys <em>still</em> do not work for some programs. Like, it just doesn't register. They are the same programs that didn't work for Java, as far as I can tell.</p>\n\n<p>Is there any way at all to simulate arrow key presses throughout all programs, 100% of the time? I'm open to any language at this point.</p>\n\n<p>Here's the C++ program I have so far, if it matters.</p>\n\n<pre><code>#define WINVER 0x0500\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nint main()\n{\n    INPUT ip;\n\n    Sleep(2000);\n\n    ip.type = INPUT_KEYBOARD;\n    ip.ki.wScan = 0;\n    ip.ki.time = 0;\n    ip.ki.dwExtraInfo = 0;\n\n    ip.ki.wVk = VK_RIGHT;\n    ip.ki.dwFlags = 0;\n    SendInput(1, &amp;ip, sizeof(INPUT));\n\n    Sleep(1000);\n\n    ip.ki.dwFlags = KEYEVENTF_KEYUP;\n    SendInput(1, &amp;ip, sizeof(INPUT));\n\n    return 0;\n}\n</code></pre>\n\n<p>I really hope somebody can help me, because I am out of ideas.</p>\n"}, {"tags": ["c++", "boost", "crc", "bitset"], "comments": [{"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 1, "creation_date": 1436982061, "post_id": 31437057, "comment_id": 50844467, "body": "Don&#39;t include the CRC as part of the data you use to calculate the CRC...  think of it as two fields: 80-bits of data and 32-bits of CRC...   the CRC only applies to the data"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1436997527, "last_edit_date": 1495542587, "creation_date": 1436995716, "answer_id": 31441465, "question_id": 31437057, "link": "https://stackoverflow.com/questions/31437057/checking-crc-using-boost-library-does-not-give-satisfactory-result/31441465#31441465", "title": "Checking CRC using boost library does not give satisfactory result", "body": "<p>First, like the commenter said, donot include the CRC bits once you check the sum. I suggest making a helper function to check <code>n</code> bits (80, in this case).</p>\n\n<p>Secondly, consider refactoring the code to be readable and expressive of the intent:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b6c763461c71bd59\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;bitset&gt;\n#include &lt;algorithm&gt;\n#include &lt;boost/crc.hpp&gt;\n#include &lt;cassert&gt;\n\ntemplate &lt;size_t N&gt;\nuint32_t crc32_n(std::bitset&lt;N&gt; const&amp; bs, size_t n) {\n    assert(n &lt;= N);\n\n    std::string const s = bs.template to_string&lt;char&gt;();\n    auto f = s.begin();\n\n    return std::for_each(f, f+n, boost::crc_32_type{})();\n}\n\nint main() {\n    std::bitset&lt;112&gt; b_data;\n\n    // set some random data (above the first 32 bits that are for CRC)\n    srand(time(0));\n    b_data.set(rand()%80 + 32);\n\n    auto const crc = crc32_n(b_data, 80);\n\n    std::cout &lt;&lt; crc                 &lt;&lt; \":\\t\" &lt;&lt; b_data &lt;&lt; \"\\n\";\n    b_data |= crc;\n    std::cout &lt;&lt; crc32_n(b_data, 80) &lt;&lt; \":\\t\" &lt;&lt; b_data &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints e.g.</p>\n\n<pre><code>1770803766: 0000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000\n1770803766: 0000000000000000000000000000000000000000000000000000000000000000000000010000000001101001100011000101001000110110\n</code></pre>\n\n<p>or (on another run)</p>\n\n<pre><code>2436181323: 0000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000\n2436181323: 0000000000000000000000000000000000000000000000000000000000000000000000100000000010010001001101010010110101001011\n</code></pre>\n\n<p>I would love to go on and remove the horrific <code>to_string</code> call but see <a href=\"https://stackoverflow.com/q/8297913/85371\">How do I convert bitset to array of bytes/uint8?</a></p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1437007517, "post_id": 31442943, "comment_id": 50856141, "body": "That&#39;s a sweet point (I hadn&#39;t realized it; showing that I don&#39;t use CRCs). It would be interesting to show a working example of this. My guess is that is precisely the OP&#39;s situation."}, {"owner": {"reputation": 43, "user_id": 3853511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb08230b0fa5412ad907dd717507203?s=128&d=identicon&r=PG&f=1", "display_name": "user3853511", "link": "https://stackoverflow.com/users/3853511/user3853511"}, "edited": false, "score": 0, "creation_date": 1437040532, "post_id": 31442943, "comment_id": 50869507, "body": "Yes, thats what I meant. My transmitted CRC is 1326744236 and when I calculate the CRC of the data and the transmitted crc appended, I would expect 0 as the result. But the result is 559431208."}, {"owner": {"reputation": 43, "user_id": 3853511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb08230b0fa5412ad907dd717507203?s=128&d=identicon&r=PG&f=1", "display_name": "user3853511", "link": "https://stackoverflow.com/users/3853511/user3853511"}, "edited": false, "score": 0, "creation_date": 1437041171, "post_id": 31442943, "comment_id": 50869950, "body": "I found the how-to on <a href=\"https://en.wikipedia.org/wiki/Cyclic_redundancy_check\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Cyclic_redundancy_check</a> in the computation section."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1437064923, "post_id": 31442943, "comment_id": 50886731, "body": "No, it&#39;s not always zero.  See my answer."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1437002852, "creation_date": 1437002852, "answer_id": 31442943, "question_id": 31437057, "link": "https://stackoverflow.com/questions/31437057/checking-crc-using-boost-library-does-not-give-satisfactory-result/31442943#31442943", "title": "Checking CRC using boost library does not give satisfactory result", "body": "<p>If you're going to include the CRC in the CRC check, which in my view is the correct technique, the expected result is always zero. Not the CRC that was transmitted.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 3853511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb08230b0fa5412ad907dd717507203?s=128&d=identicon&r=PG&f=1", "display_name": "user3853511", "link": "https://stackoverflow.com/users/3853511/user3853511"}, "edited": false, "score": 0, "creation_date": 1437041386, "post_id": 31445302, "comment_id": 50870081, "body": "Ok, that means boost does the crc calculation in a different way than I expected. But how can I check if the transmitted data is correct ? Just calculate the data&#180;s crc again and compare it with the received crc?"}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1437065104, "last_edit_date": 1437065104, "creation_date": 1437020402, "answer_id": 31445302, "question_id": 31437057, "link": "https://stackoverflow.com/questions/31437057/checking-crc-using-boost-library-does-not-give-satisfactory-result/31445302#31445302", "title": "Checking CRC using boost library does not give satisfactory result", "body": "<p>Your expectation of what is \"satisfactory\" is not correct.  A CRC has the property you expect only if it has a zero initialization and no exclusive-or of the result.  However the standard CRC-32 that you requested, <code>crc_32_type</code> initializes the CRC register with <code>0xffffffff</code>, and exclusive-ors the result with <code>0xffffffff</code>.</p>\n\n<p>However you will always get the same constant when you take the CRC of the message concatenated with the message's CRC (assuming that you order the bytes of the CRC correctly).  That constant is <code>0x2144df1c</code> for this particular CRC, and is the CRC of four zero bytes.</p>\n\n<p>It is common for CRC's to be defined in this way, so that the CRC of a string of zeros is not zero.  Since the initialization and exclusive-or are the same, the CRC of the empty set is conveniently zero.</p>\n\n<p>What you should be doing is simply computing the CRC on the message without the CRC, and compare that to the transmitted CRC.  That is what is normally done, and applies to all message hashes in general.</p>\n"}], "owner": {"reputation": 43, "user_id": 3853511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb08230b0fa5412ad907dd717507203?s=128&d=identicon&r=PG&f=1", "display_name": "user3853511", "link": "https://stackoverflow.com/users/3853511/user3853511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 1, "accepted_answer_id": 31445302, "answer_count": 3, "score": 0, "last_activity_date": 1437065104, "creation_date": 1436981046, "question_id": 31437057, "link": "https://stackoverflow.com/questions/31437057/checking-crc-using-boost-library-does-not-give-satisfactory-result", "title": "Checking CRC using boost library does not give satisfactory result", "body": "<p>I am using the boost crc library to calculate a 32-bit crc of an 112-bit (80-bit data + 32-bit crc) bitset. For testing, I reset all 80 data bits to 0. The calculation of the crc seems to work fine, but when I append the calculated crc to the data and calculate the crc again, I get a value > 0. But I expected a crc value of exactly 0. Here is the code:</p>\n\n<pre><code>    // creating 112-bit bitset and reset all values to 0\n    bitset&lt;112&gt; b_data;\n    b_data.reset();\n\n    // create string containing data and blank crc\n    string crc_string = b_data.to_string&lt;char,string::traits_type,string::allocator_type&gt;();\n\n    // calculating crc using boost library\n    boost::crc_32_type crc32;\n    crc32 = for_each(crc_string.begin(), crc_string.end(), crc32);\n    bitset&lt;32&gt; b_crc(crc32());\n\n    // writing calculated crc to the last 32-bit of the 112-bit bitset.\n    for(int i = 0; i!= b_crc.size(); i++){\n        b_data[i+80] = b_crc[i];\n    }\n\n    // create string containing data and calculated crc\n    string crc_string_check = b_data.to_string&lt;char,string::traits_type,string::allocator_type&gt;();\n\n    // calculate crc again to check if the data is correct\n    boost::crc_32_type crc32_check;\n    crc32_check = std::for_each(crc_string_check.begin(), crc_string_check.end(), crc32_check);\n\n    // output the result\n    cout &lt;&lt; crc32() &lt;&lt; endl;\n    cout &lt;&lt; crc32_check() &lt;&lt; endl;\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>    1326744236\n    559431208\n</code></pre>\n\n<p>The output I have expected is:</p>\n\n<pre><code>    1326744236\n    0\n</code></pre>\n\n<p>So something goes wrong, but what? Any ideas ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "qt", "file", "io"], "comments": [{"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 1, "creation_date": 1436981087, "post_id": 31436967, "comment_id": 50843881, "body": "Is the result of <code>qDebug() &lt;&lt; myFile.fileName();</code> really exist ?"}, {"owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "reply_to_user": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1436981366, "post_id": 31436967, "comment_id": 50844036, "body": "I&#39;m not sure I understand? Do you want me to try that?  I don&#39;t currently have that in my code."}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 1, "creation_date": 1436981461, "post_id": 31436967, "comment_id": 50844100, "body": "Yes, I tried to tell that please check it the debug window. Write it after the <code>QFile</code> instantiation. And then check if the displayed path is really exist."}, {"owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "reply_to_user": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1436981608, "post_id": 31436967, "comment_id": 50844186, "body": "this is my debug:  &quot;C:/Users/MyName/AppData/Roaming/File_IO_Practice/myfile.txt&zwnj;&#8203;&quot; File does not exist. attempting to create. . . not created :["}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 1, "creation_date": 1436981809, "post_id": 31436967, "comment_id": 50844312, "body": "Do you have write permission ? Try creating a file there."}, {"owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "reply_to_user": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "edited": false, "score": 0, "creation_date": 1436981924, "post_id": 31436967, "comment_id": 50844382, "body": "I just created a file in the roaming directory manually. However I noticed the File_IO_Practice file is just a file. It is not a file FOLDER. It shows up as a little white page icon instead of a yellow folder icon. Does this have anything to do with it?"}], "answers": [{"tags": [], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": true, "score": 2, "last_activity_date": 1436982777, "creation_date": 1436982777, "answer_id": 31437618, "question_id": 31436967, "link": "https://stackoverflow.com/questions/31436967/cant-open-file-using-qstandardpaths/31437618#31437618", "title": "Can&#39;t open file using QStandardPaths", "body": "<p>You should check if the given directory is exist. If not then you need to create the full path with for example:</p>\n\n<pre><code>QDir().mkpath( /**/ );\n</code></pre>\n\n<p>And you can create a file only after this.</p>\n\n<pre><code>QFile file( filename );\nif ( file.opne( /**/ ) )\n{\n    // ...\n}\n</code></pre>\n\n<p><em>(But all of these things are only after you are sure that you have permission.)</em></p>\n"}], "owner": {"reputation": 73, "user_id": 3381057, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d1d8f93dea0f2f7a0a019cbdf811e10?s=128&d=identicon&r=PG&f=1", "display_name": "Evan B", "link": "https://stackoverflow.com/users/3381057/evan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "accepted_answer_id": 31437618, "answer_count": 1, "score": 2, "last_activity_date": 1460455765, "creation_date": 1436980756, "last_edit_date": 1460455765, "question_id": 31436967, "link": "https://stackoverflow.com/questions/31436967/cant-open-file-using-qstandardpaths", "title": "Can&#39;t open file using QStandardPaths", "body": "<p>I am trying to create a program that opens a file when I push a button. I have created a <code>QStandardPath</code> in the header file. I then append /myfile.txt to the end of it and try to open it. I am just starting out with Qt and would like some advice.</p>\n\n<p>dialog.h:</p>\n\n<pre><code>#ifndef DIALOG_H\n#define DIALOG_H\n\n#include &lt;QDialog&gt;\n#include &lt;QStandardPaths&gt;\n\nnamespace Ui {\nclass Dialog;\n}\n\nclass Dialog : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    QString Location = QStandardPaths::writableLocation(QStandardPaths::AppDataLocation);\n    explicit Dialog(QWidget *parent = 0);\n    ~Dialog();\n\nprivate slots:\n    void on_btn_Read_clicked();\n\nprivate:\n    Ui::Dialog *ui;\n};\n\n#endif // DIALOG_H\n</code></pre>\n\n<p>dialog.cpp</p>\n\n<pre><code>#include \"dialog.h\"\n#include \"ui_dialog.h\"\n#include &lt;QDebug&gt;\n#include &lt;QStringList&gt;\n#include &lt;QFile&gt;\n\nDialog::Dialog(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::Dialog)\n{\n    ui-&gt;setupUi(this);\n}\n\nDialog::~Dialog()\n{\n    delete ui;\n}\n\nvoid Dialog::on_btn_Read_clicked()\n{\n    QFile myFile(Location.append(\"/myfile.txt\"));\n\n    if(!myFile.exists())\n    {\n        qDebug() &lt;&lt; \"File does not exist. attempting to create. . .\";\n        if (myFile.open(QIODevice::ReadWrite | QIODevice::Text)){\n            qDebug() &lt;&lt; \"created :]\";\n        }\n        else\n        {\n            qDebug() &lt;&lt; \"not created :[\";\n        }\n    }\n    myFile.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "sampling", "raytracing"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1437023948, "post_id": 31436931, "comment_id": 50860433, "body": "The way I did it (admittedly a long time ago) was to divide the output-pixmap&#39;s rows up into N roughly equal-sized sections and hand out each sub-section to one of the N render-workers.  That&#39;s good enough to start; then once that&#39;s working the problem is that some workers will finish faster than others; in that case a worker who has finished can contact a worker who has not finished yet and offer to help him; the still-working worker can then hand (half of the rows he still has yet to finish) over to the requesting worker.  Repeat until all rows are rendered, and then reassemble the image."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5087349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P-zhIJovOS4/AAAAAAAAAAI/AAAAAAAAAEU/YEGapa9c8IA/photo.jpg?sz=128", "display_name": "Joey Hammer", "link": "https://stackoverflow.com/users/5087349/joey-hammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1437004409, "creation_date": 1437004409, "answer_id": 31443182, "question_id": 31436931, "link": "https://stackoverflow.com/questions/31436931/basic-idea-of-a-distributed-ray-tracer/31443182#31443182", "title": "Basic idea of a distributed ray tracer", "body": "<p>There are a lot of different ways to do this and it is somewhat dependent on what you have working in your current ray tracer implementation.</p>\n\n<p>My approach would be to break the problem down into a job-based model.  In other words, you create a queue of jobs to be processed by each of your workers, where a worker could be a thread or a separate machine.</p>\n\n<p>All worker nodes are equal, meaning that there is no difference in the types of jobs they can do.  This allows you to add as many worker nodes as you want (NOTE: there will be a limit to how many you can add before you start getting negative returns).</p>\n\n<p>Another benefit to this is that you can scale according to your available resources-- maybe for testing you just use a few threads on your local machine, but when you're ready to make \"production\" images you may want to utilize additional machines.  Also, rendering with a single worker thread should work in this setup.</p>\n\n<p>Each worker node is going to need access to the scene, so that's the first chunk of data to send over.  Then they just start pulling from the job queue.  It is important to note that you need to do this in a safe manner -- only one worker should be allowed to claim a job.</p>\n\n<pre><code>while(active)\n{\n    fetch next job from job queue\n    if no job is available\n    {\n       sleep(1)\n       continue\n    }\n\n    process job\n}\n</code></pre>\n\n<p>Something you need to decide is what a \"job\" entails.  Is is a single ray?  Is is a single ray and all its subsequent bounces?  Is it a batch of rays?  This load balancing decision is going to be dependent on your ray tracer.  A single ray probably isn't enough work, but it's a good starting point.  In fact, you probably should start with just having a single ray per pixel and make one job per ray.  This will give you a good baseline to start from once you have it working.</p>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437050163, "post_id": 31452322, "comment_id": 50875730, "body": "Ok perfect! This gives me already a more clear idea of what I have to do. A couple of questions more if possible: 1) how do I find the size of a pixel? For example my image has a size of 512x512. If I need to jitter a little bit as you said I need the size of my pixel. 2) what&#39;s a &quot;good&quot; number of rays that can be shot into the pixel? Just to have an idea. In my mind it can be both 4 or 100 for example.. so.. just to have an idea of what &quot;usually&quot; gives already a good result. Thanks!"}, {"owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "reply_to_user": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437051437, "post_id": 31452322, "comment_id": 50876694, "body": "1) If your specify your viewpoint as in: <a href=\"http://www.povray.org/documentation/view/3.7.0/246/\" rel=\"nofollow noreferrer\">povray.org/documentation/view/3.7.0/246</a>, then you got a point (location) and three vectors (lookat, right and up). If location is at the orign, then the image plane is at a distance of tangent(angle) from the orign along the lookat direction, this gives the formula to map a pixel of coordinate (X,Y) into 3D:"}, {"owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "reply_to_user": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437051877, "post_id": 31452322, "comment_id": 50877005, "body": "(x,y,z) = orign + tangent(angle) * lookat + (X / width - 0.5 + jitterX) * right + (Y / height - 0.5 + jitterY) * up, where jitterX and jitterY are random floating point numbers between 0 and 1."}, {"owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "reply_to_user": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437051909, "post_id": 31452322, "comment_id": 50877025, "body": "2) typically 10 to 100 (but running time will be proportional to that, clearly), use trial and error to tune."}, {"owner": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437053914, "post_id": 31452322, "comment_id": 50878607, "body": "That&#39;s clear now! Thanks a lot!"}, {"owner": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437059431, "post_id": 31452322, "comment_id": 50882974, "body": "Sorry.. one more thing: the jitter values have to be within the range [-0.5 , 0.5] since with the formula you gave me we aim to the center of the pixel, right?"}, {"owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "reply_to_user": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "edited": false, "score": 0, "creation_date": 1437118586, "post_id": 31452322, "comment_id": 50906879, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/83511/discussion-between-brunolevy-and-tarta\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "is_accepted": true, "score": 1, "last_activity_date": 1437051997, "last_edit_date": 1437051997, "creation_date": 1437044445, "answer_id": 31452322, "question_id": 31436931, "link": "https://stackoverflow.com/questions/31436931/basic-idea-of-a-distributed-ray-tracer/31452322#31452322", "title": "Basic idea of a distributed ray tracer", "body": "<p>There are several usages of distributed ray tracing, it can be used for:</p>\n\n<p>(1) antialiasing</p>\n\n<p>(2) depth of field effects</p>\n\n<p>(3) motion blur effects</p>\n\n<p>For (1), the idea is simply to launch in each pixel a bunch of rays instead of a single ray. Each ray will be thrown through the center of the pixel <em>jittered a little bit</em> by random dx and dy (dx and dy will be smaller than the size of the pixel). </p>\n\n<p>For (2), it is slightly more complicated, but it is roughly the same idea: each ray is shot as a line that starts from the observer and that goes through the center of a pixel (possibly jittered if you do (1), but let us now forget about it for now). This time, this is the observer position that you are jittering, you will jitter the position of the observer a little bit in the direction orthogonal to the screen. Again, by averaging the contribution of a number of rays in each pixel, the background will be more \"blurred\" than the foreground, because the ray will deviate more in the background.</p>\n\n<p>For (3), it is just the same idea, but this time this is the position of the moving objects that are jittered.</p>\n\n<p>Note: there is also (4): complex materials with glossy effects (they require to understand a little bit of material, notion of BRDF = Bidirectional Reflection Distribution Function).</p>\n"}], "owner": {"reputation": 1357, "user_id": 2335172, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vFUCd.jpg?s=128&g=1", "display_name": "Tarta", "link": "https://stackoverflow.com/users/2335172/tarta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "closed_date": 1437052234, "accepted_answer_id": 31452322, "answer_count": 2, "score": -1, "last_activity_date": 1555015753, "creation_date": 1436980656, "last_edit_date": 1555015753, "question_id": 31436931, "link": "https://stackoverflow.com/questions/31436931/basic-idea-of-a-distributed-ray-tracer", "closed_reason": "Needs more focus", "title": "Basic idea of a distributed ray tracer", "body": "<p>what I am trying to do is improving my actual Ray Tracer to create a Distributed Ray Tracer. I have been wandering on internet and all I could found about its implementation was just short stuff like:</p>\n\n<p>-Replace single ray with distribution of rays\n-Shoot multiple rays distributed over an interval\n-Shoot multiple rays through each pixel and vary each ray randomly</p>\n\n<p>My question is: What does a \"distribution\" mean? How can I vary a distribution of rays that go through a pixel? In my normal Ray Tracer I shoot one ray per pixel. For \"distribution\" of rays I can understand that I should shoot multiple rays instead of only one. But at the same time I shoot the ray through my pixel with coordinates (x,y).</p>\n\n<pre><code>for (int x = 0; x &lt; WINDOW_WIDTH; x++)\n{\n    for (int y = 0; y &lt; WINDOW_HEIGHT; y++)\n    {\n        Vec3&lt;float&gt; rayDir = camera-&gt;pixelToWorld(x, y) - camera-&gt;position;\n    }\n}\n</code></pre>\n\n<p>So, how can I \"vary each ray randomly\" ? Thanks.</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 2399345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2p3Vk.jpg?s=128&g=1", "display_name": "mobooya", "link": "https://stackoverflow.com/users/2399345/mobooya"}, "edited": false, "score": 0, "creation_date": 1436981713, "post_id": 31437152, "comment_id": 50844252, "body": "yea for example you could check if the &quot;3&quot; appears in any 7 out of 10 frames and keep rolling that 10 frame window, dropping the first frame and adding a new frame as it streams in."}, {"owner": {"reputation": 532, "user_id": 5082661, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fbb1784a904ca744e585a7364d3a5c05?s=128&d=identicon&r=PG&f=1", "display_name": "Sridhar Thiagarajan", "link": "https://stackoverflow.com/users/5082661/sridhar-thiagarajan"}, "edited": false, "score": 0, "creation_date": 1437136423, "post_id": 31437152, "comment_id": 50916908, "body": "The problem is there is very minute chance that a number will occur continously for that period of time(1 second) out of 50 frames however..40 will be the number desired..and the others wrong..i need to find a way to filter this"}, {"owner": {"reputation": 82, "user_id": 5119611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a489c3e682d558eb402f70cffc5439?s=128&d=identicon&r=PG&f=1", "display_name": "darkfirewave", "link": "https://stackoverflow.com/users/5119611/darkfirewave"}, "edited": false, "score": 0, "creation_date": 1437139628, "post_id": 31437152, "comment_id": 50918940, "body": "Then do it frame based instead of timebased as supposed from mobooya."}], "tags": [], "owner": {"reputation": 82, "user_id": 5119611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a489c3e682d558eb402f70cffc5439?s=128&d=identicon&r=PG&f=1", "display_name": "darkfirewave", "link": "https://stackoverflow.com/users/5119611/darkfirewave"}, "is_accepted": false, "score": 2, "last_activity_date": 1436981357, "creation_date": 1436981357, "answer_id": 31437152, "question_id": 31436921, "link": "https://stackoverflow.com/questions/31436921/opencv-gesture-identification/31437152#31437152", "title": "OpenCv gesture identification", "body": "<p>how about some kind of lowpass filter. A concrete implementation of that would be a weighted average. (This is the direct answer to your question)\nBut regarding that the fluctuations are unwanted artifacts I would recommend to set a hard treshold regarding the minimum time interval a number has to be found over serveral images. \ne.g. you want to detect a three, but the two will appear serveral times for lets say less than a second -> you only want to update the displayed number if the new number was detected for more than 1 second. </p>\n"}], "owner": {"reputation": 532, "user_id": 5082661, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fbb1784a904ca744e585a7364d3a5c05?s=128&d=identicon&r=PG&f=1", "display_name": "Sridhar Thiagarajan", "link": "https://stackoverflow.com/users/5082661/sridhar-thiagarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436981357, "creation_date": 1436980630, "question_id": 31436921, "link": "https://stackoverflow.com/questions/31436921/opencv-gesture-identification", "title": "OpenCv gesture identification", "body": "<p>I am working on opencv gesture identification and have hit a small snitch.\nSuppose i am showing the number 3..the webcam identifies 3.\nWhat i have done is print the number 3 or write the text 3 on the image.\nHowever..due to minute variations..the output changes in small intervals of time..hence fluctuations arise.showing 2 for 0.1 second..and 3 for the next 1 second.\nI need some help to find a way to display..say the average number for a certain period of time(average rounded off to the nearest integer)\nThanks in advance for any help!</p>\n"}, {"tags": ["c++", "class", "malloc", "free"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1436980822, "post_id": 31436852, "comment_id": 50843725, "body": "None of it is strictly a mistake; all if it is completely awful code."}, {"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 2, "creation_date": 1436982320, "post_id": 31436852, "comment_id": 50844632, "body": "The mistakeis that by using <code>malloc</code>, it won&#39;t call the MyClass&#39;s constructor.."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1436982823, "post_id": 31436852, "comment_id": 50844919, "body": "Well, since he doesn&#39;t use any MyClass members through that pointer, using malloc there is technically okay."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1436986316, "post_id": 31436852, "comment_id": 50846948, "body": "What is the description of the &quot;mistake&quot;?  Are there compiler errors?  Are there linker errors?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5120434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cb23a3bc23650bd0e9e32aebc42c70?s=128&d=identicon&r=PG&f=1", "display_name": "Aseroth", "link": "https://stackoverflow.com/users/5120434/aseroth"}, "edited": false, "score": 0, "creation_date": 1436980609, "post_id": 31436878, "comment_id": 50843603, "body": "Mmm yes you&#39;re right, I thought it was a writing mistake when he sent it to me. I don&#39;t know if that&#39;s the mistake he was talking to....there&#39;s another one in that code? or it was just that?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 1, "user_id": 5120434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cb23a3bc23650bd0e9e32aebc42c70?s=128&d=identicon&r=PG&f=1", "display_name": "Aseroth", "link": "https://stackoverflow.com/users/5120434/aseroth"}, "edited": false, "score": 0, "creation_date": 1436980876, "post_id": 31436878, "comment_id": 50843759, "body": "@Aseroth, yes, there is one, please see my edited answer"}, {"owner": {"reputation": 1, "user_id": 5120434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cb23a3bc23650bd0e9e32aebc42c70?s=128&d=identicon&r=PG&f=1", "display_name": "Aseroth", "link": "https://stackoverflow.com/users/5120434/aseroth"}, "edited": false, "score": 0, "creation_date": 1436981194, "post_id": 31436878, "comment_id": 50843929, "body": "oooh I see, sorry the &quot;n&quot; and &quot;i&quot; thing was MY mistake, thanks I didn&#39;t know it. Looks like his mistake was the main inside MyClass. I focused in the malloc / free area and didn&#39;t see that huge mistake... Thanks for your help."}], "tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1436980818, "last_edit_date": 1436980818, "creation_date": 1436980466, "answer_id": 31436878, "question_id": 31436852, "link": "https://stackoverflow.com/questions/31436852/malloc-and-class/31436878#31436878", "title": "Malloc and class", "body": "<p>The biggest mistake is the lack of <code>main</code> function. It should be <strong>outside the class declaration</strong>.</p>\n\n<p>Moreover, in C++ one should prefer to use <code>new</code> like this:</p>\n\n<pre><code>MyClass *smth=new MyClass(some_arg);\ndelete smth;\n</code></pre>\n\n<p>Another mistake is with the undefined variable <code>i</code> that is referred to in the constructor and destructor of the class. You should probably be using <code>n</code> instead.</p>\n\n<p>To tell the truth, if I were g++ or clang or clang++ or smth like that, I'd optimize out everything as it does absolutely nothing: allocates memory and then frees it almost instantly, the constructor and destructor do nothing useful as the variable <code>i</code> <em>does not exist</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 4912702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1433ec0b5f602b8f093e633ab16bfe8?s=128&d=identicon&r=PG&f=1", "display_name": "YosefMac", "link": "https://stackoverflow.com/users/4912702/yosefmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1436981981, "creation_date": 1436981981, "answer_id": 31437345, "question_id": 31436852, "link": "https://stackoverflow.com/questions/31436852/malloc-and-class/31437345#31437345", "title": "Malloc and class", "body": "<p>I'm not sure the goal of your code, but fixing the errors it is something like this</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n\nclass  MyClass\n{\n   int *i;\n   MyClass()\n   {\n       i = new int;\n   }\n\n   ~MyClass()\n   {\n       delete i;\n   }\n};\n\nint main()\n{\n    MyClass *c = (MyClass*)malloc(sizeof(MyClass));\n    free(c);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5120434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cb23a3bc23650bd0e9e32aebc42c70?s=128&d=identicon&r=PG&f=1", "display_name": "Aseroth", "link": "https://stackoverflow.com/users/5120434/aseroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 2, "score": -9, "last_activity_date": 1436981981, "creation_date": 1436980371, "last_edit_date": 1436981125, "question_id": 31436852, "link": "https://stackoverflow.com/questions/31436852/malloc-and-class", "title": "Malloc and class", "body": "<p>today a friend of mine sent me this code, telling me there was a mistake on it, but I'm not sure where it is. Could someone help me?</p>\n\n<pre><code>class MyClass\n{\n    int *n;\n    MyClass()\n    {\n        n = new int;\n    }\n\n    ~MyClass()\n    {\n        delete n;\n    }\n\n    int main()\n    {\n        MyClass *c = (MyClass*)malloc(sizeof(MyClass));\n        free(c);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "codelite"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1436980424, "post_id": 31436846, "comment_id": 50843483, "body": "man g++ (or via internet looking for manpages (linux))"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1436980619, "post_id": 31436846, "comment_id": 50843612, "body": "Did you look up help/man pages of g++?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1436980727, "post_id": 31436846, "comment_id": 50843677, "body": "I&#39;m voting to close this question as off-topic because the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.0/gcc_3.html\" rel=\"nofollow noreferrer\">official manual</a> already explains each of those options and parameters in depth."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1436980927, "post_id": 31436846, "comment_id": 50843790, "body": "Probably, you do not need to add these options to CodeLite, most of them are probably on by default. Only the libraries, but that would go somewhere in the <b>Linker</b> settings."}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1436980934, "post_id": 31436846, "comment_id": 50843798, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 At least the <code>-lXXX</code> ones are relatively difficult to find there."}], "answers": [{"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 4, "last_activity_date": 1436980748, "creation_date": 1436980748, "answer_id": 31436964, "question_id": 31436846, "link": "https://stackoverflow.com/questions/31436846/g-wall-g-c-main-cpp-lgl-lglu-lglfw3-lx11-lxxf86vm-lxrandr-lpthread/31436964#31436964", "title": "g++ -Wall -g -c main.cpp -lGL -lGLU -lglfw3 -lX11 -lXxf86vm -lXrandr -lpthread -lXi - Could you explain this command?", "body": "<p>Sure:</p>\n\n<ul>\n<li><code>g++</code>: This is the C++ compiler from the GCC (GNU Compiler Collection).</li>\n<li><code>-Wall</code>: Switch on all usual warnings, that is the compiler will warn about a lot of things that, while not being technically an error, as suspicious.</li>\n<li><code>-g</code>: Generate debugging information, you know, to be able to use a debugger.</li>\n<li><code>-c</code>: Compile only, that will generate an object file, not an executable. You are expected to run the linker later to build the actual executable.</li>\n<li><code>main.cpp</code>: Your source file.</li>\n<li><code>-lGL -lGLU -lglfw3 -lX11 -lXxf86vm -lXrandr -lpthread -lXi</code>: Those are libraries. Each of the <code>-lXXX</code> will link to a library named <code>libXXX.so</code> or <code>libXXX.a</code>.</li>\n</ul>\n\n<p>Note that your command, as is, makes no sense, because you are setting <code>-c</code> to compile only, not linking, but you are adding libraries, and those are used only for linking. So the libraries are simply ignored.</p>\n\n<p>For more information, see <code>man g++</code>, <code>info g++</code> and <a href=\"http://gcc.gnu.org\" rel=\"nofollow\">http://gcc.gnu.org</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 3423588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d8db1729f667f76bbe7e3457892fe4?s=128&d=identicon&r=PG&f=1", "display_name": "Finn Krauss", "link": "https://stackoverflow.com/users/3423588/finn-krauss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "closed_date": 1437316566, "accepted_answer_id": 31436964, "answer_count": 1, "score": 0, "last_activity_date": 1436980796, "creation_date": 1436980359, "last_edit_date": 1436980796, "question_id": 31436846, "link": "https://stackoverflow.com/questions/31436846/g-wall-g-c-main-cpp-lgl-lglu-lglfw3-lx11-lxxf86vm-lxrandr-lpthread", "closed_reason": "Not suitable for this site", "title": "g++ -Wall -g -c main.cpp -lGL -lGLU -lglfw3 -lX11 -lXxf86vm -lXrandr -lpthread -lXi - Could you explain this command?", "body": "<p>I've got a really specific problem but I'm relatively new to C++. Could you explain me each part of the command?</p>\n\n<p>If you can, please also explain me, where to paste those options in CodeLite </p>\n\n<p><img src=\"https://i.stack.imgur.com/pU8T8.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1436980130, "post_id": 31436620, "comment_id": 50843326, "body": "<i>Any</i> access to an object with an incompatible pointer type is a violation of the aliasing rule."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436982034, "post_id": 31436620, "comment_id": 50844447, "body": "@xiver77 If you want dynamic memory, then use malloc. It will allocate on the heap and the storage duration is allocated. C has special rules that help with aliasing that apply almost perfectly with your case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436982167, "post_id": 31436620, "comment_id": 50844534, "body": "To circumvent this all, just use char* as the &quot;plain&quot; type of your heap and shift indexes by 3 bits..."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436982270, "post_id": 31436620, "comment_id": 50844594, "body": "@FelixPalmen That shows that you clearly don&#39;t understand the Standard. C allows for char to alias any type, but not vice-versa."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436982371, "post_id": 31436620, "comment_id": 50844665, "body": "Aliasing is about reads and writes, not about a declaration, any declaration is fine as long as it is not actually used for memory access -- and I stop &quot;discussing&quot; with you at that point if you still insist on your silly ideas."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436982631, "post_id": 31436620, "comment_id": 50844796, "body": "@FelixPalmen You can start at chapters 6.5 and 6.2.7 where you can read all about how aliasing, objects, declarations, and types actually matter."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1436982978, "post_id": 31436620, "comment_id": 50845013, "body": "Yes, this is technically a no-no. And it will work exactly as you expect on any compiler worth using."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436984197, "post_id": 31436620, "comment_id": 50845760, "body": "Just as a little hint ... why do you think the notion of an <i>allocated object</i> was introduced in C99? Does <code>alloca()</code> return an <i>allocated object</i>? Well, final words here, leaving the answer to you."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1437001460, "post_id": 31436620, "comment_id": 50854434, "body": "@FelixPalmen Really classy, introducing a straw-man argument. A function returning allocated duration will obviously cause different behavior, than the automatic duration of variables OP presented. And storage automatic duration is what is being discussed here."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436980818, "post_id": 31436801, "comment_id": 50843723, "body": "Well, in theory you&#39;re right, so I don&#39;t understand why this is downvoted -- but it should be commented: the <code>pc</code> pointer is fine, too, as long as it&#39;s used for single characters OR a char array of max 8 bytes OR a string of max 7 characters. For the sizes of <code>float</code> and <code>double</code>: yes, there&#39;s no guarantee. Do you know an implementation using more than 64bit for <code>double</code>?"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436980936, "post_id": 31436801, "comment_id": 50843801, "body": "@FelixPalmen Alignment, overlap, is irrelevant. The &quot;theory&quot; states that aliasing is undefined for those types. Full stop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436981267, "post_id": 31436801, "comment_id": 50843985, "body": "&quot;Those types&quot; aren&#39;t aliased here as long as <code>block</code> isn&#39;t used for accessing the contents. The only concern making this UB is that there&#39;s no guarantee for the sizes of <code>float</code> and <code>double</code>. So, dbush is right and you are (partly) wrong."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436981910, "post_id": 31436801, "comment_id": 50844374, "body": "@FelixPalmen No Felix you are Wrong. block is an object and its declared type is uint64_t. You cannot change the declared type of an automatic object. When you read from it using a pointer that isn&#39;t uint64_t you are causing undefined behavior because the type of that object is still uint64_t, regardless of <i>any</i> unspeakable acts that could have happened to that object before that read."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1436982013, "post_id": 31436801, "comment_id": 50844436, "body": "Oh my. Declaration doesn&#39;t matter, it&#39;s reads and writes that do. The declaration doesn&#39;t cause any reads or writes, it just reserves memory. Stop behaving like in kindergarten."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436982180, "post_id": 31436801, "comment_id": 50844543, "body": "@FelixPalmen I&#39;m interpreting the Standard, you are apparently using your intuition."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436982358, "post_id": 31436801, "comment_id": 50844658, "body": "@FelixPalmen And you you can read the Standard sometimes. Seriously, read it and apply some criticism to your blind beliefs."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1437497724, "post_id": 31436801, "comment_id": 51049291, "body": "Calm down people. I&#39;m not qualified to help with this particular problem, I think. But I can ask people to be more careful generally. In C99, for example, people often interpret 6.5.7 as the bit that makes everything undefined. But, the previous section, 6.5.6, really helps to narrow the extent of 6.5.7. Basically, don&#39;t be too quick to dismiss everything as a violation of the strict aliasing rule, without considering all relevant bits of the standard"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1436980245, "creation_date": 1436980245, "answer_id": 31436801, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31436801#31436801", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p>Yes, because the memory locations pointed to by <code>pf</code> could overlap depending on the size of <code>float</code> and <code>double</code>.  If they didn't, then the results of reading <code>*pd</code> and <code>*pf</code> would be well defined but not the results of reading from <code>block</code> or <code>pc</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1436981045, "post_id": 31436956, "comment_id": 50843854, "body": "Most of this is C++ specific.  What about C?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1436981054, "post_id": 31436956, "comment_id": 50843862, "body": "Is declaring an array (which just reserves memory of unspecified content) already a &quot;stored object&quot;? In my interpretation, the first &quot;stored object&quot; here is the character <code>&#39;\\n&#39;</code> and the array declaration is just a (silly) form of stack allocation, as long as its identifier isn&#39;t used for accessing its contents. Correct me if I&#39;m wrong."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1437497987, "post_id": 31436956, "comment_id": 51049454, "body": "&quot;a type that&#39;s not enumerated in the list of exceptions&quot;. In C99 at least, there is another source of exceptions listed in the previous paragraph (6.5.6 in one of the standards). Basically, a write to data with no <i>declared</i> type can be used to legally change the <i>effective</i> type of the object. So the type can legally change type many times during it&#39;s lifetime. Just don&#39;t write with one type, then read with another. That mightn&#39;t apply here, but it means we have to be more careful"}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 5, "last_activity_date": 1437992927, "last_edit_date": 1592644375, "creation_date": 1436980728, "answer_id": 31436956, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31436956#31436956", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p>Update for the new question:</p>\n<p>The great news is there's a simple and easy solution to your real problem: Allocate the memory with <code>new</code> (<code>unsigned char[size]</code>). Memory allocated with <code>new</code> is guaranteed in the standard to be aligned in a way suitable for use as any type, and you can safely alias any type with <code>char*</code>.</p>\n<p>The standard reference, 3.7.3.1/2, allocation functions:</p>\n<blockquote>\n<p>The pointer returned shall be suitably aligned so that it can be\nconverted to a pointer of any complete object type and then used to\naccess the object or array in the storage allocated</p>\n</blockquote>\n<hr />\n<p>Original answer for the original question:</p>\n<p>At least in C++98/03 in 3.10/15 we have the following which pretty clearly makes it still undefined behavior (since you're accessing the value through a type that's not enumerated in the list of exceptions):</p>\n<blockquote>\n<p>If a program attempts to access the stored value of an object through\nan lvalue of other than one of the following types the behavior is\nundefined):</p>\n<p>\u2014 the dynamic type of the object,</p>\n<p>\u2014 a cvqualified version of the dynamic type of the object,</p>\n<p>\u2014 a type that is the signed or unsigned type corresponding to the dynamic type of the object,</p>\n<p>\u2014 a type that is the signed or unsigned type corresponding to a cvqualified version of the dynamic type of the object,</p>\n<p>\u2014 an aggregate or union type that includes one of the aforementioned types among its members (including, recursively, a member of a subaggregate or contained union),</p>\n<p>\u2014 a type that is a (possibly cvqualified) base class type of the dynamic type of the object,</p>\n<p>\u2014 a char or unsigned char type.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 1, "last_activity_date": 1436981395, "creation_date": 1436981395, "answer_id": 31437166, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31437166#31437166", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p><code>pc</code> <code>pf</code> and <code>pd</code> are all different types that access memory specified in <code>block</code> as <code>uint64_t</code>, so for say '<code>pf</code> the shared types are <code>float</code> and <code>uint64_t</code>. </p>\n\n<p>One would violate the strict aliasing rule were once to write using one type and read using another since the compile could we reorder the operations thinking there is no shared access. This is not your case however, since the <code>uint64_t</code> array is only used for assignment, it is exactly the same as using <code>alloca</code> to allocate the memory.</p>\n\n<p>Incidentally there is no issue with the strict aliasing rule when casting from any type to a char type and visa versa. This is a common pattern used for data serialization and deserialization.</p>\n"}, {"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437498620, "post_id": 31441574, "comment_id": 51049830, "body": "I like your point about drawing a distinction between the standard and what happens in any sane implementation. I suspect all the implementations are implicitly following a more sensible definition of aliasing. I suspect that we can predictably read through any type, as long as: 1) the most recent write was of the same type (or of type <code>char[]</code>), 2) the alignment is respected, and 3) the write was not to a special read-only area reserved for <code>const</code> objects. <i>If</i> implementers confirm they do this, then we could &#39;grandfather&#39; it into the standards. This would be a great improvement, I think."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437515754, "post_id": 31441574, "comment_id": 51059138, "body": "No unfortunately it&#39;s not quite like this. Your point 1) might fail because of reordering, the reason for <i>strict aliasing</i> in the first place. But what the OP wants to do shouldn&#39;t fail, because an aliasing pointer isn&#39;t used in his code. The <i>declared type</i> isn&#39;t important in this case, but any change to the standard allowing such things would be full of constraints (think about size of types that aren&#39;t defined by the standard), so it would probably become very commplicated."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437550437, "post_id": 31441574, "comment_id": 51070092, "body": "It&#39;s true that the OP&#39;s code could be reordered in crazy ways under my (vague) reinterpretation of the standard, but it also suffers under the current standard. But if some <code>memmove</code>s (or another form of write) were added to the OP&#39;s code, then it would no longer suffer from alias confusion (under my interpretation): <a href=\"http://ideone.com/Vp2Pah\" rel=\"nofollow noreferrer\">Demo on ideone</a> - this particular example code is a bit messy, but the <code>memmove</code>s make it obvious to the compiler that it can&#39;t optimize much. And the memmove &quot;do nothing&quot; as the source and destination are identical (provably so, will be optimized out)."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437550660, "post_id": 31441574, "comment_id": 51070218, "body": "In simpler terms, there is already language in the C99 standard (yes, the OP is asking about C++, but it&#39;s still somewhat relevant) that allows the <i>effective type</i> of any object to change at any time, simply through writing. This &quot;changeability&quot; is currently limited only objects with &quot;no declared type&quot;. I would extend that to any object (subject to alignment perhaps). This simple change improve things a lot. And it is, I think, consistent with what compilers already do, so it shouldn&#39;t really be a problem.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437554230, "post_id": 31441574, "comment_id": 51072332, "body": "@AaronMcDaid simply setting the <i>effective type</i> by writing defeats the concept, reordering would still be a problem. BUT I would suggest that the first write access to allocated memory sets the <i>effective type</i>, this would probably introduce no changes in currently conforming implementations, as they do not reorder reads and writes through pointers of the same type."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437556377, "post_id": 31441574, "comment_id": 51073780, "body": "Maybe you already know this, but the effective type of an object that has no declared type can change <i>multiple</i> times in (C99). Despite this, and with good code, it is very possible to avoid any reordering issue. That fact that the compiler will respect all accesses through pointers of the same type is sufficient. Even when the careful programmer knows there is type punning going on and writes carefully for it. To clarify: the compiler &quot;knows&quot; that pointer of different type can&#39;t/shouldn&#39;t alias the same data; however that does not pose a problem to my approach."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1437559457, "post_id": 31441574, "comment_id": 51075960, "body": "(Ignore my last comment). <a href=\"http://ideone.com/D4sV6O\" rel=\"nofollow noreferrer\">This code on ideone</a> fully describes my intention - it also includes a long wall of text. That text will be my final word. Basically, <i>skilful</i> use of <code>memmove</code> will make a program uniquely-defined, even in the context of a compiler that is making very aggressive use of assumptions around aliasing. So, yes, even if the compiler assumes that a write through <code>T*</code> cannot by relevant for any reads through <code>U*</code> (whether before or after in the code), then my use of <code>memmove</code> will still save the day. Anyway, thanks for your time thus far!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1437029990, "last_edit_date": 1437029990, "creation_date": 1436996150, "answer_id": 31441574, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31441574#31441574", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p>A lot of discussion here and given some answers that are <em>slightly</em> wrong, but making up good points, I just try to summarize:</p>\n\n<ul>\n<li><p>exactly following the text of the standard (no matter what version) ... yes, this is undefined behaviour. Note the standard doesn't even have the term <em>strict aliasing</em> -- just a set of rules to enforce it no matter what implementations could define.</p></li>\n<li><p>understanding the reason behind the \"strict aliasing\" rule, it should work nicely on any implementation <strong>as long</strong> as neither <code>float</code> or <code>double</code> take more than 64 bits.</p></li>\n<li><p>the standard won't guarantee you anything about the size of <code>float</code> or <code>double</code> (intentionally) and that's the reason why it <em>is</em> that restrictive in the first place.</p></li>\n<li><p>you can get around all this by ensuring your \"heap\" is an <em>allocated object</em> (e.g. get it with <code>malloc()</code>) and access the aligned slots through <code>char *</code> and shifting your offset by 3 bits.</p></li>\n<li><p>you still have to make sure that anything you store in such a slot won't take more than 64 bits. (that's the hard part when it comes to portability)</p></li>\n</ul>\n\n<p>In a nutshell: your code should be safe on any \"sane\" implementation as long as size constraints aren't a problem (means: the answer to the question in your title is most likely <strong>no</strong>), BUT it's still undefined behaviour (means: the answer to your last paragraph is <strong>yes</strong>)</p>\n"}, {"comments": [{"owner": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 1, "creation_date": 1437165496, "post_id": 31483849, "comment_id": 50933742, "body": "cleanest solution out here! See also: <a href=\"http://stackoverflow.com/questions/4941793/new-operator-for-memory-allocation-on-heap\" title=\"new operator for memory allocation on heap\">stackoverflow.com/questions/4941793/&hellip;</a> which summarizes its usage nicely."}], "tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": true, "score": 14, "last_activity_date": 1437646164, "last_edit_date": 1592644375, "creation_date": 1437163422, "answer_id": 31483849, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31483849#31483849", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<h1>The global allocation functions</h1>\n<p>To allocate an arbitrary (untyped) block of memory, the global allocation functions (\u00a73.7.4/2);</p>\n<blockquote>\n<pre><code>void* operator new(std::size_t);\nvoid* operator new[](std::size_t);\n</code></pre>\n</blockquote>\n<p>Can be used to do this (\u00a73.7.4.1/2).</p>\n<p>\u00a73.7.4.1/2</p>\n<blockquote>\n<p>The allocation function attempts to allocate the requested amount of storage. If it is successful, it shall return the address of the start of a block of storage whose length in bytes shall be at least as large as the requested size. There are no constraints on the contents of the allocated storage on return from the allocation function. The order, contiguity, and initial value of storage allocated by successive calls to an allocation function are unspecified. The pointer returned shall be suitably aligned so that it can be converted to a pointer of any complete object type with a fundamental alignment requirement (3.11) and then used to access the object or array in the storage allocated (until the storage is explicitly deallocated by a call to a corresponding deallocation function).</p>\n</blockquote>\n<p>And 3.11 has this to say about a <em>fundamental alignment requirement</em>;</p>\n<p>\u00a73.11/2</p>\n<blockquote>\n<p>A fundamental alignment is represented by an alignment less than or equal to the greatest alignment supported by the implementation in all contexts, which is equal to <code>alignof(std::max_align_t)</code>.</p>\n</blockquote>\n<p>Just to be sure on the requirement that the allocation functions must behave like this;</p>\n<p>\u00a73.7.4/3</p>\n<blockquote>\n<p>Any allocation and/or deallocation functions defined in a C++ program, including the default versions in the library, shall conform to the semantics specified in 3.7.4.1 and 3.7.4.2.</p>\n</blockquote>\n<p>Quotes from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4527.pdf\" rel=\"noreferrer\">C++ WD n4527</a>.</p>\n<p>Assuming the 8-byte alignment is less than the fundamental alignment of the platform (and it looks like it is, but this can be verified on the target platform with <code>static_assert(alignof(std::max_align_t) &gt;= 8)</code>) - you can use the global <code>::operator new</code> to allocate the memory required. Once allocated, the memory can be segmented and used given the size and alignment requirements you have.</p>\n<p><em>An alternative here is</em> the <a href=\"http://en.cppreference.com/w/cpp/types/aligned_storage\" rel=\"noreferrer\"><code>std::aligned_storage</code></a> and it would be able to give you memory aligned at whatever the requirement is.</p>\n<pre><code>typename std::aligned_storage&lt;sizeof(T), alignof(T)&gt;::type buffer[100];\n</code></pre>\n<p>From the question, I assume here that the both the size and alignment of <code>T</code> would be 8.</p>\n<hr />\n<p>A sample of what the final memory block could look like is (basic RAII included);</p>\n<pre><code>struct DataBlock {\n    const std::size_t element_count;\n    static constexpr std::size_t element_size = 8;\n    void * data = nullptr;\n    explicit DataBlock(size_t elements) : element_count(elements)\n    {\n        data = ::operator new(elements * element_size);\n    }\n    ~DataBlock()\n    {\n        ::operator delete(data);\n    }\n    DataBlock(DataBlock&amp;) = delete; // no copy\n    DataBlock&amp; operator=(DataBlock&amp;) = delete; // no assign\n    // probably shouldn't move either\n    DataBlock(DataBlock&amp;&amp;) = delete;\n    DataBlock&amp; operator=(DataBlock&amp;&amp;) = delete;\n\n    template &lt;class T&gt;\n    T* get_location(std::size_t index)\n    {\n        // https://stackoverflow.com/a/6449951/3747990\n        // C++ WD n4527 3.9.2/4\n        void* t = reinterpret_cast&lt;void*&gt;(reinterpret_cast&lt;unsigned char*&gt;(data) + index*element_size);\n        // 5.2.9/13\n        return static_cast&lt;T*&gt;(t);\n\n        // C++ WD n4527 5.2.10/7 would allow this to be condensed\n        //T* t = reinterpret_cast&lt;T*&gt;(reinterpret_cast&lt;unsigned char*&gt;(data) + index*element_size);\n        //return t;\n    }\n};\n// ....\nDataBlock block(100);\n</code></pre>\n<p>I've constructed more detailed examples of the <code>DataBlock</code> with suitable template <code>construct</code> and <code>get</code> functions etc., <a href=\"http://coliru.stacked-crooked.com/a/37af4796160ecd8c\" rel=\"noreferrer\"><strong>live demo here</strong></a> and <a href=\"http://coliru.stacked-crooked.com/a/8b7251effad9b667\" rel=\"noreferrer\"><strong>here with further error checking etc.</strong></a>.</p>\n<h1>A note on the aliasing</h1>\n<p>It does look like there are some aliasing issues in the original code (strictly speaking); you allocate memory of one type and cast it to another type.</p>\n<p>It may probably work as you expect on your target platform, but you cannot rely on it. The most practical comment I've seen on this is;</p>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/31204824/why-give-a-c-compiler-warning-when-returning-an-rvalue-reference#comment50412114_31204824\">&quot;Undefined behaviour has the nasty result of usually doing what you think it should do, until it doesn\u2019t\u201d - hvd</a>.</p>\n</blockquote>\n<p>The code you have probably will work. I think it is better to use the appropriate global allocation functions and be sure that there is no undefined behaviour when allocating and using the memory you require.</p>\n<p>Aliasing will still be applicable; once the memory is allocated - aliasing is applicable in how it is used. Once you have an arbitrary block of memory allocated (as above with the global allocation functions) and the lifetime of an object begins (\u00a73.8/1) - aliasing rules apply.</p>\n<h1>What about <code>std::allocator</code>?</h1>\n<p>Whilst the <a href=\"http://en.cppreference.com/w/cpp/memory/allocator\" rel=\"noreferrer\"><code>std::allocator</code></a> is for homogenous data containers and what your are looking for is akin to heterogeneous allocations, the implementation in your standard library (given the <a href=\"http://en.cppreference.com/w/cpp/concept/Allocator\" rel=\"noreferrer\">Allocator concept</a>) offers some guidance on raw memory allocations and corresponding construction of the objects required.</p>\n"}, {"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 0, "last_activity_date": 1437200550, "creation_date": 1437200550, "answer_id": 31488443, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31488443#31488443", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p>The behavior of C++ and the CPU are distinct.  Although the standard provides memory suitable for any object, the rules and optimizations imposed by the CPU make the alignment for any given object \"undefined\" - an array of short would reasonably be 2 byte aligned, but an array of a 3 byte structure may be 8 byte aligned.  A union of all possible types can be created and used between your storage and the usage to ensure no alignment rules are broken.</p>\n\n<pre><code>union copyOut {\n      char Buffer[200]; // max string length\n      int16 shortVal;\n      int32 intVal;\n      int64 longIntVal;\n      float fltVal;\n      double doubleVal;\n} copyTarget;\nmemcpy( copyTarget.Buffer, Block[n], sizeof( data ) );  // move from unaligned space into union\n// use copyTarget member here.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 1, "creation_date": 1437489322, "post_id": 31541333, "comment_id": 51043376, "body": "I think you missed the point of my question. The code I showed is not real application level code, it is just an example to explain what my question is."}, {"owner": {"reputation": 371, "user_id": 4960518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d2441ba402398e738acd2f317e7e83c?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4960518/simon"}, "reply_to_user": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1437516907, "post_id": 31541333, "comment_id": 51059613, "body": "Of course it is not real production code. The points of my comment is the posted code is far from being close to let people understand your approach of memory management, and all my points are the basis for creating a memory management library. Yes, untyped memory blocks are the basis of memory management, but there are lots more."}], "tags": [], "owner": {"reputation": 371, "user_id": 4960518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d2441ba402398e738acd2f317e7e83c?s=128&d=identicon&r=PG&f=1", "display_name": "simon", "link": "https://stackoverflow.com/users/4960518/simon"}, "is_accepted": false, "score": -3, "last_activity_date": 1437487374, "creation_date": 1437487374, "answer_id": 31541333, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31541333#31541333", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p>If you tag this as C++ question,\n(1) why use uint64_t[] but not std::vector?\n(2) in term of memory management, your code lack of management logic, which should keep track of which blocks are in use and which are free and the tracking of contiguoous blocks, and of course the allocate and release block methods.\n(3) the code shows an unsafe way of using memory. For example, the char* is not const and therefore the block can be potentially be written to and overwrite the next block(s). The reinterpret_cast is consider danger and should be abstract from the memory user logic. \n(4) the code doesn't show the allocator logic. In C world, the malloc function is untyped and in C++ world, the operator new is typed. You should consider something like the new operator.</p>\n"}, {"tags": [], "owner": {"reputation": 22733, "user_id": 134841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51b7f05de9889e7212f949f0fd975922?s=128&d=identicon&r=PG", "display_name": "Marc Mutz - mmutz", "link": "https://stackoverflow.com/users/134841/marc-mutz-mmutz"}, "is_accepted": false, "score": 1, "last_activity_date": 1437638247, "creation_date": 1437638247, "answer_id": 31581365, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c/31581365#31581365", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p>I'll make it short: All your code works with defined semantics if you allocate the block using</p>\n\n<pre><code>std::unique_ptr&lt;char[], std::free&gt;\n    mem(static_cast&lt;char*&gt;(std::malloc(800)));\n</code></pre>\n\n<p>Because</p>\n\n<ol>\n<li>every type is allowed to alias with a <code>char[]</code> and</li>\n<li><code>malloc()</code> is guaranteed to return a block of memory sufficiently aligned for all types (except maybe SIMD ones).</li>\n</ol>\n\n<p>We pass <code>std::free</code> as a custom deleter, because we used <code>malloc()</code>, not <code>new[]</code>, so calling <code>delete[]</code>, the default, would be undefined behaviour.</p>\n\n<p>If you're a purist, you can also use <code>operator new</code>:</p>\n\n<pre><code>std::unique_ptr&lt;char[]&gt;\n    mem(static_cast&lt;char*&gt;(operator new[](800)));\n</code></pre>\n\n<p>Then we don't need a custom deleter. Or</p>\n\n<pre><code>std::unique_ptr&lt;char[]&gt; mem(new char[800]);\n</code></pre>\n\n<p>to avoid the <code>static_cast</code> from <code>void*</code> to <code>char*</code>. But <code>operator new</code> can be replaced by the user, so I'm always a bit wary of using it. OTOH; <code>malloc</code> cannot be replaced (only in platform-specific ways, such as <code>LD_PRELOAD</code>).</p>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2954, "favorite_count": 3, "accepted_answer_id": 31483849, "answer_count": 8, "score": 22, "last_activity_date": 1437992927, "creation_date": 1436979701, "last_edit_date": 1437977897, "question_id": 31436620, "link": "https://stackoverflow.com/questions/31436620/what-is-the-correct-way-to-allocate-and-use-an-untyped-memory-block-in-c", "title": "What is the correct way to allocate and use an untyped memory block in C++?", "body": "<p><em>The answers I got for this question until now has two exactly the opposite kinds of answers: \"it's safe\" and \"it's undefined behaviour\". I decided to rewrite the question in whole to get some better clarifying answers, for me and for anyone who might arrive here via Google.</em></p>\n\n<p><em>Also, I removed the <code>C</code> tag and now this question is C++ specific</em></p>\n\n<p>I am making an 8-byte-aligned memory heap that will be used in my virtual machine. The most obvious approach that I can think of is by allocating an array of <code>std::uint64_t</code>.</p>\n\n<pre><code>std::unique_ptr&lt;std::uint64_t[]&gt; block(new std::uint64_t[100]);\n</code></pre>\n\n<p>Let's assume <code>sizeof(float) == 4</code> and <code>sizeof(double) == 8</code>. I want to store a float and a double in <code>block</code> and print the value.</p>\n\n<pre><code>float* pf = reinterpret_cast&lt;float*&gt;(&amp;block[0]);\ndouble* pd = reinterpret_cast&lt;double*&gt;(&amp;block[1]);\n*pf = 1.1;\n*pd = 2.2;\nstd::cout &lt;&lt; *pf &lt;&lt; std::endl;\nstd::cout &lt;&lt; *pd &lt;&lt; std::endl;\n</code></pre>\n\n<p>I'd also like to store a C-string saying \"hello\".</p>\n\n<pre><code>char* pc = reinterpret_cast&lt;char*&gt;(&amp;block[2]);\nstd::strcpy(pc, \"hello\\n\");\nstd::cout &lt;&lt; pc;\n</code></pre>\n\n<p>Now I want to store \"Hello, world!\" which goes over 8 bytes, but I still can use 2 consecutive cells.</p>\n\n<pre><code>char* pc2 = reinterpret_cast&lt;char*&gt;(&amp;block[3]);\nstd::strcpy(pc2, \"Hello, world\\n\");\nstd::cout &lt;&lt; pc2;\n</code></pre>\n\n<p>For integers, I don't need a <code>reinterpret_cast</code>.</p>\n\n<pre><code>block[5] = 1;\nstd::cout &lt;&lt; block[5] &lt;&lt; std::endl;\n</code></pre>\n\n<p>I'm allocating <code>block</code> as an array of <code>std::uint64_t</code> for the sole purpose of memory alignment. I also do not expect anything larger than 8 bytes by its own to be stored in there. The type of the block can be anything if the starting address is guaranteed to be 8-byte-aligned.</p>\n\n<p>Some people already answered that what I'm doing is totally safe, but some others said that I'm definitely invoking undefined behaviour.</p>\n\n<p>Am I writing correct code to do what I intend? If not, what is the appropriate way?</p>\n"}, {"tags": ["python", "c++", "templates", "cython"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 1, "creation_date": 1436994919, "post_id": 31436593, "comment_id": 50851811, "body": "How about running it through some kind of string substitution to generate a different source file for each <code>T</code>?"}, {"owner": {"reputation": 389, "user_id": 3209516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c1df69a0524ff3c85a132c343e9930?s=128&d=identicon&r=PG&f=1", "display_name": "piotrMocz", "link": "https://stackoverflow.com/users/3209516/piotrmocz"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1436998352, "post_id": 31436593, "comment_id": 50853329, "body": "So in essence do what C++ compiler does for templates, but for cython wrappers? I&#39;ve thought about it. It&#39;s definitely an option I&#39;m considering, even though it&#39;s extending cython compiler in some way and quite a lot of work."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1437023308, "post_id": 31436593, "comment_id": 50860227, "body": "I think I meant something much simpler: 1) create a file containing <code>cdef class PyFoo_{T}: cdef Foo[{T}] *thisptr</code> etc. 2) Generate a bunch of cython files by doing <code>.format(T=&#39;std::vector&lt;int&gt;&#39;)</code>, and saving the results. 3) Include those files in your main Cython file (synatax <code>include &quot;filename.pxi&quot;</code>). You obviously have to pick the classes to generate manually, but you&#39;d always have to do that."}, {"owner": {"reputation": 389, "user_id": 3209516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c1df69a0524ff3c85a132c343e9930?s=128&d=identicon&r=PG&f=1", "display_name": "piotrMocz", "link": "https://stackoverflow.com/users/3209516/piotrmocz"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1437037949, "post_id": 31436593, "comment_id": 50867767, "body": "Oh, you&#39;re right, it&#39;s much simpler. There&#39;s one more tricky thing left: how to know which &quot;instantiations&quot; to generate? I would have to know all the usages beforehand (again, just like C++ does). However, there doesn&#39;t seem to be any better options."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1437043535, "post_id": 31436593, "comment_id": 50871508, "body": "Well, you&#39;d need to know them all at the point you compile the Cython code (generating them dynamically on demand from the Python interpretter is certainly impossible)."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1437043630, "post_id": 31436593, "comment_id": 50871589, "body": "One final thought - have you considered using a common base class for all instances of <code>Foo&lt;T&gt;</code>. Depending on your requirements it may or may not be possible, but if it was you could just wrap the base class and a few constructors."}, {"owner": {"reputation": 389, "user_id": 3209516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c1df69a0524ff3c85a132c343e9930?s=128&d=identicon&r=PG&f=1", "display_name": "piotrMocz", "link": "https://stackoverflow.com/users/3209516/piotrmocz"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1437053702, "post_id": 31436593, "comment_id": 50878444, "body": "That&#39;s an interesting idea I&#39;ll think about it. All in all, could you perhaps compile your suggestions into an answer so I can flag it as accepted? :)"}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 3209516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c1df69a0524ff3c85a132c343e9930?s=128&d=identicon&r=PG&f=1", "display_name": "piotrMocz", "link": "https://stackoverflow.com/users/3209516/piotrmocz"}, "edited": false, "score": 0, "creation_date": 1437058122, "post_id": 31457216, "comment_id": 50882066, "body": "I seem to have missed Boost Python in my research, I need to give it a closer look. Also: great answer, really clarifies many things, thanks."}], "tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 11, "last_activity_date": 1437057204, "creation_date": 1437057204, "answer_id": 31457216, "question_id": 31436593, "link": "https://stackoverflow.com/questions/31436593/cython-templates-in-python-class-wrappers/31457216#31457216", "title": "Cython: templates in python class wrappers", "body": "<p>As you say, Cython doesn't really support this.</p>\n\n<p>I think by far the simplest approach is just to manually generate a bunch of Cython files using string substitution. Start with a \"foowrapper.pxi.src\" file (name as you wish...):</p>\n\n<pre><code>cdef class PyFoo_{T}:\n  cdef Foo[{T}] *thisptr\n  def __cinit__(self, param):\n    self.thisptr = new Foo[{T}](param)\n    # etc\n</code></pre>\n\n<p>Next, run it through a simple program (may as well be Python) to load the file, do the string substitution, and save the file again under a new name. The key line is just:</p>\n\n<pre><code>output = code.format(T=T) # where T is a string with a C++ class name \n              # e.g. \"int\" or \"std::vector&lt;double&gt;\"\n</code></pre>\n\n<p>(There's obviously a bit of code relating to loading and saving that I've skipped out of laziness)</p>\n\n<p>Then, in your Cython file you just \"include\" the generated files for each class. The \"include\" command in Cython is a literal textual include (like the C preprocessor) and expects a .pxi file:</p>\n\n<pre><code>cdef extern from \"header.h\":\n    cdef cppclass Foo[T]:\n        Foo(T param)\n        # ...\n\ninclude \"foowrapper_int.pxi\"\ninclude \"foowrapper_vectordouble.pxi\n# etc\n</code></pre>\n\n<p>You have to pick the classes to generate at compile time, but this is unavoidable (templates are a compile-time feature), so you're never going to be able to generate them dynamically from a Python scripting environment since the corresponding C++ class won't be generated.</p>\n\n<p><strong>Other options</strong></p>\n\n<p>A couple of other options are worth brief consideration. First, you could inherit <code>Foo&lt;T&gt;</code> from a base class (say <code>FooBase</code>) which doesn't depend on the template parameter. You'd then wrap <code>FooBase</code> in Cython (generating constructor-like functions for the cases you care about). This is only really viable if the functions you want to call don't have arguments that depend on the template type. Obviously this also involves changing the C++ code.</p>\n\n<p>The section option is to look at a different way of wrapping. Boost Python will certainly support this natively (but comes with its own disadvantages). I imagine SIP/SWIG would also cope (but I don't know). You can could fairly cleanly mix-and-match these with Cython if necessary (by importing the generated module containing your template classes).</p>\n"}], "owner": {"reputation": 389, "user_id": 3209516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c1df69a0524ff3c85a132c343e9930?s=128&d=identicon&r=PG&f=1", "display_name": "piotrMocz", "link": "https://stackoverflow.com/users/3209516/piotrmocz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2544, "favorite_count": 0, "accepted_answer_id": 31457216, "answer_count": 1, "score": 12, "last_activity_date": 1437057204, "creation_date": 1436979591, "question_id": 31436593, "link": "https://stackoverflow.com/questions/31436593/cython-templates-in-python-class-wrappers", "title": "Cython: templates in python class wrappers", "body": "<h1>Question</h1>\n\n<p>Is there a way to create a Python wrapper for Cython-wrapped C++ class with templates? (i.e. do exactly what is show here but with templates: <a href=\"http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#create-cython-wrapper-class\">http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html#create-cython-wrapper-class</a>).</p>\n\n<p>I know about the fused types workaround (<a href=\"https://groups.google.com/forum/#!topic/cython-users/qQpMo3hGQqI\">https://groups.google.com/forum/#!topic/cython-users/qQpMo3hGQqI</a>) but that doesn't allow you to instatiate classes like <code>vector&lt;vector&lt;int&gt;&gt;</code>: the fused types have, quite unsurprisingly, no notion of recursion.</p>\n\n<h1>Rephrasing</h1>\n\n<p>What I would like to achieve is for a wrapped class like:</p>\n\n<pre><code>cdef extern from \"header.h\":\n    cdef cppclass Foo[T]:\n        Foo(T param)\n        # ...\n</code></pre>\n\n<p>create a simple Python wrapper:</p>\n\n<pre><code>cdef class PyFoo[T]:  # I know the '[T]' can't be here, it's a wish\n    cdef Foo[T] *thisptr\n    def __cinit__(self, param):\n        self.thisptr = new Foo[T](param)\n    # ...\n</code></pre>\n\n<p>I'm quite certain that Cython doesn't support that per se, but maybe someone can think of a workaround. I'm not looking for idiomatic or nice examples, I'm just wondering if that's possible in any way.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "visual-c++", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 2, "creation_date": 1436980734, "post_id": 31436558, "comment_id": 50843681, "body": "It&#39;s hard for anything to beat &quot;0 milliseconds&quot;  ;)"}, {"owner": {"reputation": 361, "user_id": 2831721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/117b25c65d8ab577933680fe1c4b4600?s=128&d=identicon&r=PG", "display_name": "JCF", "link": "https://stackoverflow.com/users/2831721/jcf"}, "reply_to_user": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 0, "creation_date": 1436982407, "post_id": 31436558, "comment_id": 50844678, "body": "jajaja, it&#39;s true but I expected 0 millisenconds to"}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 2831721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/117b25c65d8ab577933680fe1c4b4600?s=128&d=identicon&r=PG", "display_name": "JCF", "link": "https://stackoverflow.com/users/2831721/jcf"}, "edited": false, "score": 0, "creation_date": 1437151230, "post_id": 31447036, "comment_id": 50926560, "body": "When I increase the dataset the parallel program beats the secuencial, but I have another example (the mergesort problem) that in visual studio do not matter what I do the secuencial is better than the parallel, but when I run the program in linux with eclipse instead of windows with visual studio the parallel beats the secuencial somebody told me that is because visual studio dont use the real machine&#39;s cores, but I don&#39;t find this explanetion in any sites."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "reply_to_user": {"reputation": 361, "user_id": 2831721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/117b25c65d8ab577933680fe1c4b4600?s=128&d=identicon&r=PG", "display_name": "JCF", "link": "https://stackoverflow.com/users/2831721/jcf"}, "edited": false, "score": 0, "creation_date": 1437155730, "post_id": 31447036, "comment_id": 50928923, "body": "Mergesort is a very different algorithm that is not well suited for OpenMP because of its recursive nature. You can do this with OpenMP tasks, but its performance won&#39;t be optimal. And again, as I said in my answer, if each thread is doing very little work, you&#39;re never going to be getting great performance because too much time is spent in thread initialization/control as opposed to actually computing."}, {"owner": {"reputation": 361, "user_id": 2831721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/117b25c65d8ab577933680fe1c4b4600?s=128&d=identicon&r=PG", "display_name": "JCF", "link": "https://stackoverflow.com/users/2831721/jcf"}, "edited": false, "score": 0, "creation_date": 1456096009, "post_id": 31447036, "comment_id": 58775363, "body": "Ok that&#39;s fine, if each thread don&#39;t have enough work I can&#39;t note the diference, but, I can note the difference when I use Linux instead of Windows, with the same dataset the difference is huge in the performance between this operating systems."}], "tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": true, "score": 2, "last_activity_date": 1437029055, "creation_date": 1437029055, "answer_id": 31447036, "question_id": 31436558, "link": "https://stackoverflow.com/questions/31436558/performance-decrease-in-openmp-with-visual-studio-2013/31447036#31447036", "title": "Performance decrease in OpenMP with Visual Studio 2013", "body": "<p>There are probably 2 things happening here. </p>\n\n<p>The first is that you are treating OpenMP as MPI when it is unnecessary. In your case, all you really should be doing is parallelizing your for loop and remembering to perform a reduction for your <code>suma</code> variable. The way that you are calling OpenMP routines yourself and splitting up the domain looks much more like MPI code to me.</p>\n\n<p>Secondly, you are working on too small of a dataset. What you really need to be doing is testing this when it takes 60+ seconds in serial code and then comparing the time to an OpenMP run with 4 processors. Remember that creating your team of threads takes time, and if each thread is doing very little work, then the majority of your time will be spent in startup. </p>\n\n<p>Because you're doing so little actual work in the for loop, I suspect you won't get more than 2-3x performance with 4 cores.</p>\n\n<p>I would suggest doing this:</p>\n\n<pre><code>int integralParallel(int a, int b, int n_intervalos, int(*function)(int))\n{\n    int long_interv = (b - a) / n_intervalos;\n    int suma = 0;\n    #pragma omp parallel for default(shared) reduction(+:suma)\n    for (int i = a; i &lt; b; i+=long_interv)\n    {\n        int h = function(i);\n        suma += h * long_interv;\n    }\n    return suma;\n}\n</code></pre>\n\n<p>and calling it exactly as you call the serial code. Specify <code>num_threads(4)</code> if you want, but it shouldn't be necessary as long as OpenMP is picking up your 4 cores.</p>\n"}], "owner": {"reputation": 361, "user_id": 2831721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/117b25c65d8ab577933680fe1c4b4600?s=128&d=identicon&r=PG", "display_name": "JCF", "link": "https://stackoverflow.com/users/2831721/jcf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 31447036, "answer_count": 1, "score": 1, "last_activity_date": 1437029055, "creation_date": 1436979474, "question_id": 31436558, "link": "https://stackoverflow.com/questions/31436558/performance-decrease-in-openmp-with-visual-studio-2013", "title": "Performance decrease in OpenMP with Visual Studio 2013", "body": "<p>I coded a basic example of openmp with VisualStudio 2013, the example is the calculate of the area under a curve. This is the secuencial implementation</p>\n\n<pre><code>int integral(int a, int b, int n_intervalos, int(*function)(int))\n{\n    int long_interv = (b - a) / n_intervalos;\n    int suma = 0;\n    for (int i = a; i &lt; b; i+=long_interv)\n    {\n        int h = function(i);\n        suma += h * long_interv;\n    }\n    return suma;\n}\n</code></pre>\n\n<p>when i go to test this code i use this dataset</p>\n\n<pre><code>int intg = integral(0, 120, 120, funcion);\n</code></pre>\n\n<p>I want to use OpenMP the increase the performance then I did the following function</p>\n\n<pre><code>void integralParalelo(int a, int b, int n_intervalos, int(*function)(int), int *area)\n{\n    int max_threads = omp_get_max_threads();\n    int thread_id = omp_get_thread_num();\n    int sub_intervalo = n_intervalos / max_threads;\n\n    int long_interv = (a + b) / n_intervalos;\n    int ini = thread_id * long_interv * sub_intervalo;\n    int fin = sub_intervalo * long_interv + ini;\n    int suma = integral(ini, fin, sub_intervalo, function);\n\n    #pragma omp critical\n    {\n        (*area) = (*area) + suma;\n    }\n}\n</code></pre>\n\n<p>And I called this function in this way</p>\n\n<pre><code>#pragma omp parallel num_threads(4)\n{\n    integralParalelo(0, 120, 120, funcion, &amp;area);\n}\n</code></pre>\n\n<p>But the parallel solution is slower than the secuencial solution in the test the times were</p>\n\n<ul>\n<li>secuencial: 0 miliseconds</li>\n<li>parallel: 25 miliseconds!!!!</li>\n</ul>\n\n<p>Why this happens?</p>\n\n<p>I'm using Visual Studio Ultimate 2013 and my computer is an AMD A10-5745M </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1436979477, "post_id": 31436484, "comment_id": 50842942, "body": "What did you observe, when stepping through your code with a debugger?"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1436979615, "post_id": 31436484, "comment_id": 50843026, "body": "are you practicing function pointers? what is the reason for not calling the functions directly?"}, {"owner": {"reputation": 3, "user_id": 4267675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d46bb0178ed7f1e2f6c87d12347bf16?s=128&d=identicon&r=PG&f=1", "display_name": "Gogo gogo", "link": "https://stackoverflow.com/users/4267675/gogo-gogo"}, "edited": false, "score": 0, "creation_date": 1436980070, "post_id": 31436484, "comment_id": 50843286, "body": "It stops in this line int numberRandomNumber = numbers[randomNumber];"}, {"owner": {"reputation": 3, "user_id": 4267675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d46bb0178ed7f1e2f6c87d12347bf16?s=128&d=identicon&r=PG&f=1", "display_name": "Gogo gogo", "link": "https://stackoverflow.com/users/4267675/gogo-gogo"}, "edited": false, "score": 0, "creation_date": 1436980146, "post_id": 31436484, "comment_id": 50843333, "body": "Does not compile if a call functions directly."}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 5116493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43de09ef3f41651bc9e2e1580dc68cef?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5116493/dan"}, "is_accepted": true, "score": 1, "last_activity_date": 1436980414, "last_edit_date": 1436980414, "creation_date": 1436980139, "answer_id": 31436758, "question_id": 31436484, "link": "https://stackoverflow.com/questions/31436484/vector-subscript-out-of-range-vs2013/31436758#31436758", "title": "Vector subscript out of range VS2013", "body": "<blockquote>\n<pre><code>int number = min + (rand() % (int)(topNumber - min + 1));\n\nint randomNumber = pointerToRandomNumber(0, numbers.size());\n</code></pre>\n</blockquote>\n\n<p>These two lines are important. Say you have a vector of size 6, which means that you can access <code>vector[0]</code> - <code>vector[5]</code>. You pass (<code>0</code>,<code>6</code>) in to your get random number function which translates to the first line being:</p>\n\n<pre><code>int number = 0 + (rand() % (int)(6 - 0 + 1));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int number = rand() % (int)(7); \n</code></pre>\n\n<p>Which has the ability to return 6 and is out of the vectors range when you access the numbers array with the subsequent line. Remove the +1 and that problem should go away since you are using the vector.size() function.</p>\n\n<pre><code>int number = min + (rand() % (int)(topNumber - min));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1436980181, "creation_date": 1436980181, "answer_id": 31436775, "question_id": 31436484, "link": "https://stackoverflow.com/questions/31436484/vector-subscript-out-of-range-vs2013/31436775#31436775", "title": "Vector subscript out of range VS2013", "body": "<p>The problem is in the line</p>\n\n<pre><code>int number = min + (rand() % (int)(topNumber - min + 1));\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>int number = min + (rand() % (int)(topNumber - min));\n</code></pre>\n\n<p>Otherwise, you end up getting an index that is out of range.</p>\n\n<p>I used </p>\n\n<pre><code>  cout &lt;&lt; \"size: \" &lt;&lt; numbers.size() &lt;&lt; endl;\n  cout &lt;&lt; \"randomNumber: \" &lt;&lt; randomNumber &lt;&lt; endl;\n</code></pre>\n\n<p>before the line</p>\n\n<pre><code>  int numberRandomNumber = numbers[randomNumber];\n</code></pre>\n\n<p>to track the problem.</p>\n"}], "owner": {"reputation": 3, "user_id": 4267675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d46bb0178ed7f1e2f6c87d12347bf16?s=128&d=identicon&r=PG&f=1", "display_name": "Gogo gogo", "link": "https://stackoverflow.com/users/4267675/gogo-gogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 31436758, "answer_count": 2, "score": -1, "last_activity_date": 1436980414, "creation_date": 1436979266, "last_edit_date": 1436979512, "question_id": 31436484, "link": "https://stackoverflow.com/questions/31436484/vector-subscript-out-of-range-vs2013", "title": "Vector subscript out of range VS2013", "body": "<p>Can somebody explane to me what I am doing wrong? After I compile this code in VS2013 the program starts and prints 2-3 columns and I get this error:</p>\n\n<blockquote>\n  <p>Vector subscript out of range   </p>\n</blockquote>\n\n<p>what could be wrong?</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctime&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\nvector&lt;int&gt; printVector(vector&lt;int&gt; vectorToPrint)\n{\n        for (unsigned int i = 0; i &lt; vectorToPrint.size(); i++)\n        {\n                cout &lt;&lt; vectorToPrint[i] &lt;&lt; \",\";\n        }\n        cout &lt;&lt; endl;\n        return vectorToPrint;\n}\n\nint getRandomNumber(int min,int topNumber)\n{\n        int number = min + (rand() % (int)(topNumber - min + 1));\n        return number;\n}\n\nvector&lt;int&gt; getSixNumbers(vector&lt;int&gt; numbers){\n        vector&lt;int&gt; randomNumbers;\n        for (int i = 0; i &lt; 6; i++)\n        {\n\n                int(*pointerToRandomNumber)(int, int) = getRandomNumber;\n                int randomNumber = pointerToRandomNumber(0, numbers.size());\n                int numberRandomNumber = numbers[randomNumber];\n                numbers.erase(numbers.begin() + randomNumber);\n                randomNumbers.push_back(numberRandomNumber);\n        }\n        return  randomNumbers;\n}\nint _tmain(int argc, _TCHAR* argv[])\n{ \n\n        srand(time(NULL));\n        int g;\n        vector&lt;int&gt; numbers;\n        for ( int i = 1; i &lt; 50; i++)\n        {\n                numbers.push_back(i);\n        }\n        int a = 1;\n\n        do\n                {\n                        vector&lt;int&gt;(*pointerToSixNumbers)(vector&lt;int&gt;) = getSixNumbers;\n                        vector&lt;int&gt; newVector = pointerToSixNumbers(numbers);\n                        printVector(newVector);\n                        ++a;\n\n        }while (a &lt; 100);\n\n\n        cout &lt;&lt; endl;\n        cin &gt;&gt; g;\n        return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "sdl", "glew"], "comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1436991395, "post_id": 31436436, "comment_id": 50849760, "body": "Well, from the code posted so far, I is not at all clear that you use OpenGL &gt;= 3.0. You certainly don&#39;t request it anywhere. So make sure you actually got it. Another option would be that your mesh constructor is called before the context was created (and glew initialized)."}, {"owner": {"reputation": 244, "user_id": 3649790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bcf4d9357f65b3a28346fe2897a8573?s=128&d=identicon&r=PG&f=1", "display_name": "Java Man Tea Man", "link": "https://stackoverflow.com/users/3649790/java-man-tea-man"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1436991855, "post_id": 31436436, "comment_id": 50850046, "body": "I do call getString(Gl_VERSION) in display.cpp. It outputs this: 3.1.0 Build 8.15.10.2618 ; I will also update my question above to display my game class."}], "answers": [{"tags": [], "owner": {"reputation": 543, "user_id": 3027604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wUHYR.jpg?s=128&g=1", "display_name": "Hitokage", "link": "https://stackoverflow.com/users/3027604/hitokage"}, "is_accepted": false, "score": 0, "last_activity_date": 1436980352, "last_edit_date": 1436980352, "creation_date": 1436979982, "answer_id": 31436712, "question_id": 31436436, "link": "https://stackoverflow.com/questions/31436436/opengl-glgenvertexarray-exception/31436712#31436712", "title": "OpenGL glGenVertexArray() Exception", "body": "<p>Do you call the classes procedures in the right order? Like does it really create the context before generating the arrays? I had the same problem and this was the reason.\nYou can also try to update your graphic drivers if you haven't done so for some time ^^</p>\n"}, {"tags": [], "owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "is_accepted": true, "score": 2, "last_activity_date": 1437015286, "last_edit_date": 1495539902, "creation_date": 1437015286, "answer_id": 31444657, "question_id": 31436436, "link": "https://stackoverflow.com/questions/31436436/opengl-glgenvertexarray-exception/31444657#31444657", "title": "OpenGL glGenVertexArray() Exception", "body": "<p>The crash data suggests that the <code>glGenVertexArrays()</code> function is not available, which would most likely be a problem with your GLEW/SDL setup.</p>\n\n<p>However, there's also a subtle but very critical problem in your code. I don't think it should cause a crash, but it would definitely keep it from working. The harmful line is here:</p>\n\n<pre><code>_mesh = Mesh(_vertices, 3);\n</code></pre>\n\n<p>Here you assign a (newly constructed) <code>Mesh</code> instance to a variable. What happens on this line is the following:</p>\n\n<ol>\n<li>A new <code>Mesh</code> object is created.</li>\n<li>The constructor is invoked. In the constructor you create the VAO and other OpenGL object.</li>\n<li>The new object is assigned to the <code>_mesh</code> variable. Since your <code>Mesh</code> class does not have an assignment operator defined, default member-wise assignment is used.</li>\n<li>Since the newly created <code>Mesh</code> instance only exists within the statement, it is destroyed.</li>\n<li>The destructor of the object is invoked. In the destructor, you delete the VAO.</li>\n</ol>\n\n<p>So at the end of this statement, your VAO has been deleted. You still have the VAO id stored in a member of the <code>_mesh</code> variable, but this id is now invalid.</p>\n\n<p>Wrapping OpenGL objects in C++ classes often causes trouble if you don't have a firm grasp of C++, and understand exactly how to implement proper copy and assignment semantics.</p>\n\n<p>I elaborated on some options to fix this type of issue in my answer to a similar problem here: <a href=\"https://stackoverflow.com/questions/28929452/mesh-class-called-with-default-constructor-not-working-opengl-c/28930189#28930189\">Mesh class called with default constructor not working OpenGL C++</a>. The most straightforward approach is that you do not allow these kinds of objects to be copied, and reference them with (smart) pointers throughout your code.</p>\n"}], "owner": {"reputation": 244, "user_id": 3649790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bcf4d9357f65b3a28346fe2897a8573?s=128&d=identicon&r=PG&f=1", "display_name": "Java Man Tea Man", "link": "https://stackoverflow.com/users/3649790/java-man-tea-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 31444657, "answer_count": 2, "score": 0, "last_activity_date": 1447442030, "creation_date": 1436979116, "last_edit_date": 1447442030, "question_id": 31436436, "link": "https://stackoverflow.com/questions/31436436/opengl-glgenvertexarray-exception", "title": "OpenGL glGenVertexArray() Exception", "body": "<p>I am learning OpenGL with c++ right now using SDL, glew, and glm. I have gotten to the \"VAO and VBO\" stage. However, I am getting an error. When I run my program, I get a exception: Unhandled exception at 0x74DECB49 in LearningOpenGL.exe: 0xC0000005: Access violation executing location 0x00000000. There is an arrow pointing to the line glGenVertexArrays I initialized SDL, made an OpenGL Context, and am using OpenGL 3.0+. </p>\n\n<p>Here is Display.cpp (initializing everything)</p>\n\n<pre><code>    #include \"Display.h\"\n\n    Display::Display(int width, int height, std::string title)\n    {\n        _displayWidth = width;\n        _displayHeight = height;\n        _displayTitle = title;\n        _window = nullptr;\n    }\n\n    Display::Display()\n    {\n\n    }\n\n    Display::~Display()\n    {\n\n    }\n\n    void Display::createDisplay()\n    {\n        // Initialize SDL\n        SDL_Init(SDL_INIT_EVERYTHING);\n        // Setting attributes to our window\n        SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_BUFFER_SIZE, 32);\n        SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\n        // Create Window\n        _window = SDL_CreateWindow((_displayTitle.c_str()), SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, _displayWidth, _displayHeight, SDL_WINDOW_OPENGL);\n        // Error Check Window\n        if (_window == nullptr)\n        {\n            std::cerr &lt;&lt; \"Window could not be created!\" &lt;&lt; std::endl;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Window Created Successfully With SDL!\" &lt;&lt; std::endl;\n        }\n        // Create OpenGL Context\n        _glContext = SDL_GL_CreateContext(_window);\n\n        // Initialize GLEW\n        glewExperimental = GL_TRUE;\n        GLenum status = glewInit();\n\n        if (glewExperimental)\n        {\n            std::cout &lt;&lt; \"Glew Experimental: On\" &lt;&lt; std::endl;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Glew Experimental: Off\" &lt;&lt; std::endl;\n        }\n        // Error Check GLEW\n        if (status != GLEW_OK)\n        {\n            std::cerr &lt;&lt; \"GLEW could not be initialized!\" &lt;&lt; std::endl;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"GLEW Was Initilized Successfully!\" &lt;&lt; std::endl;\n        }\n\n        // Log OpenGL Version Number\n        std::cout &lt;&lt; \"Using OpenGL Version: \" &lt;&lt; glGetString(GL_VERSION) &lt;&lt; std::endl;\n\n        _closed = false;\n    }\n\n    void Display::destroyDisplay()\n    {\n        SDL_GL_DeleteContext(_glContext);\n        SDL_DestroyWindow(_window);\n        SDL_Quit();\n    }\n\n    void Display::update()\n    {\n        SDL_GL_SwapWindow(_window);\n\n        // Check for Input\n        while (SDL_PollEvent(&amp;_sdlEvent))\n        {\n            if (_sdlEvent.type == SDL_QUIT)\n            {\n                _closed = true;\n            }\n        }\n\n    }\n\n    bool Display::isClosed()\n    {\n        return _closed;\n    }\n</code></pre>\n\n<p>Here is Mesh.cpp</p>\n\n<pre><code>#include \"Mesh.h\"\n\nMesh::Mesh(Vertex* vertices, unsigned int numVertices)\n{\n    _renderCount = numVertices;\n\n    // Create VAO\n    glGenVertexArrays(1, &amp;_vaoID);\n    glBindVertexArray(_vaoID);\n\n    // Create VBO\n    glGenBuffers(1, _vboID);\n    glBindBuffer(GL_ARRAY_BUFFER, _vboID[POSITION_VB]);\n\n    // Put data into the VBO\n    glBufferData(GL_ARRAY_BUFFER, (numVertices * sizeof(vertices[0])), vertices, GL_STATIC_DRAW);\n\n    // Enable the first attibute of the VAO\n    glEnableVertexAttribArray(0);\n\n    // Put the data in the VAO\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    // Unbind the VAO and VBO and disable attribute 0\n    glDisableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n}\n\nMesh::Mesh()\n{\n\n}\n\nMesh::~Mesh()\n{\n    cleanUp();\n}\n\nvoid Mesh::render()\n{\n    glBindVertexArray(_vaoID);\n    glEnableVertexAttribArray(0);\n\n    glDrawArrays(GL_TRIANGLES, 0, _renderCount);\n\n    glDisableVertexAttribArray(0);\n    glBindVertexArray(0);\n}\n\nvoid Mesh::cleanUp()\n{\n    glDeleteBuffers(1, _vboID);\n    glDeleteVertexArrays(1, &amp;_vaoID);\n}\n</code></pre>\n\n<p>Here is Game.cpp</p>\n\n<pre><code>#include \"Game.h\"\n\nGame::Game()\n{\n    _display = Display(_displayWidth, _displayHeight, _displayTitle);\n\n    // TODO: Fix Hardcoded 3 below\n\n    _vertices[0] = Vertex(glm::vec3(-1.0f, -1.0f, 0.0f));\n    _vertices[1] = Vertex(glm::vec3(1.0f, -1.0f, 0.0f));\n    _vertices[2] = Vertex(glm::vec3(0.0f, 1.0f, 0.0f));\n\n    _mesh = Mesh(_vertices, 3);\n\n}\n\nGame::~Game()\n{\n\n}\n\nvoid Game::init()\n{\n    _display.createDisplay();\n}\n\nvoid Game::gameLoop()\n{\n    while (!_display.isClosed())\n    {\n        glClearColor(0.0f, 0.15f, 0.3f, 1.0f);\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        _mesh.render();\n\n        _display.update();\n    }\n    _display.destroyDisplay();\n}\n\nvoid Game::start()\n{\n    init();\n    gameLoop();\n}\n</code></pre>\n\n<p>I have read other posts on this problem, and the solution for them seemed to be \"set glewExperimental = GL_TRUE.\" As you can see, I did this, but still, exception. When I used the old graphics pipeline with OpenGL, it worked. Now however, it does not. I am using OpenGL 3.0+, so what is the problem?</p>\n"}, {"tags": ["c++", "point-cloud-library", "point-clouds"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1436979012, "post_id": 31436335, "comment_id": 50842642, "body": "What do you mean by <i>depth</i>? In PCL point clouds are most commonly stored in an un-ordered fashion? The Point itself holds your Cartesian information."}, {"owner": {"reputation": 43, "user_id": 4974700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b27e13b69eda92853373b6751b9ed3e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Varma", "link": "https://stackoverflow.com/users/4974700/sebastian-varma"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1436981838, "post_id": 31436335, "comment_id": 50844328, "body": "@Ben By depth I mean the z coordinate.  I am asking whether or not one can use cloud-&gt;points[i] to get a z value."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1436984420, "post_id": 31436335, "comment_id": 50845877, "body": "I have added an answer, you should format your question correctly and add some more detail about what you wanted. Then i will upvote and retract my close vote."}], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 0, "last_activity_date": 1436984357, "creation_date": 1436984357, "answer_id": 31438136, "question_id": 31436335, "link": "https://stackoverflow.com/questions/31436335/how-do-i-index-into-a-point-clouds-points/31438136#31438136", "title": "How do I index into a point cloud&#39;s points", "body": "<p>PLC most commonly stores its point cloud information in an un-ordered form. The point itself carries the information you might need.</p>\n\n<p>For example the type <code>PointXYZ</code> has the following structure:</p>\n\n<pre><code>pcl::PointXYZ::PointXYZ (   \n    float   _x,\n    float   _y,\n    float   _z \n)\n</code></pre>\n\n<p>Find out more about the point types <a href=\"http://docs.pointclouds.org/1.7.0/structpcl_1_1_point_x_y_z.html#a9e3c47eb692f08aca31885bb33942514\" rel=\"nofollow\">here.</a>      </p>\n\n<p>So in  order to get the z information, you would do the following:</p>\n\n<pre><code>cloud-&gt;points[i]._z; // Depth information from a point in your point cloud. \n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4974700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b27e13b69eda92853373b6751b9ed3e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Varma", "link": "https://stackoverflow.com/users/4974700/sebastian-varma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1813, "favorite_count": 0, "accepted_answer_id": 31438136, "answer_count": 1, "score": -2, "last_activity_date": 1436986777, "creation_date": 1436978818, "last_edit_date": 1436986777, "question_id": 31436335, "link": "https://stackoverflow.com/questions/31436335/how-do-i-index-into-a-point-clouds-points", "title": "How do I index into a point cloud&#39;s points", "body": "<p>I was working on a project and stumbled upon an issue with the indexing in three dimensions.</p>\n\n<p>How do I index into the z value of a point?</p>\n"}, {"tags": ["c#", "c++", "sockets"], "comments": [{"owner": {"reputation": 57221, "user_id": 3032289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c171ec0f2c8040d24436a40a3bf075b?s=128&d=identicon&r=PG", "display_name": "Luaan", "link": "https://stackoverflow.com/users/3032289/luaan"}, "edited": false, "score": 1, "creation_date": 1436978829, "post_id": 31436217, "comment_id": 50842515, "body": "Well, I&#39;m not an C++ socket expert... but isn&#39;t your C++ side using IPv4, while the C# side is using IPv6? The <code>AddressFamily.InterNetworkV6</code> seems to be a dead giveaway..."}, {"owner": {"reputation": 115, "user_id": 5021401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d0ad6078a404382ff0b31b6276d3792?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5021401/jim"}, "reply_to_user": {"reputation": 57221, "user_id": 3032289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c171ec0f2c8040d24436a40a3bf075b?s=128&d=identicon&r=PG", "display_name": "Luaan", "link": "https://stackoverflow.com/users/3032289/luaan"}, "edited": false, "score": 0, "creation_date": 1437005297, "post_id": 31436217, "comment_id": 50855646, "body": "@Luaan I cannot believe my error was so foolish, I didn&#39;t even notice it. I should probably have the server IPv6 instead :D Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5021401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d0ad6078a404382ff0b31b6276d3792?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5021401/jim"}, "edited": false, "score": 0, "creation_date": 1437038883, "post_id": 31447118, "comment_id": 50868409, "body": "Thanks a lot, unbelievable I made so much effort and I didn&#39;t spot the <code>V6</code> part."}], "tags": [], "owner": {"reputation": 57221, "user_id": 3032289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c171ec0f2c8040d24436a40a3bf075b?s=128&d=identicon&r=PG", "display_name": "Luaan", "link": "https://stackoverflow.com/users/3032289/luaan"}, "is_accepted": true, "score": 0, "last_activity_date": 1437029301, "creation_date": 1437029301, "answer_id": 31447118, "question_id": 31436217, "link": "https://stackoverflow.com/questions/31436217/connect-c-client-to-c-server/31447118#31447118", "title": "Connect C# client to C++ server", "body": "<p>As far as I can tell, your C++ side is using IPv4 (<code>AF_INET</code>), while your C# side is using IPv6 (<code>AddressFamily.InterNetworkV6</code>). Either change the server to use IPv6, or change the client to use IPv4. Or ideally, let them use whichever works best, and use hostnames instead of IP addresses.</p>\n"}], "owner": {"reputation": 115, "user_id": 5021401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d0ad6078a404382ff0b31b6276d3792?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5021401/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3237, "favorite_count": 0, "accepted_answer_id": 31447118, "answer_count": 1, "score": 1, "last_activity_date": 1437029301, "creation_date": 1436978430, "question_id": 31436217, "link": "https://stackoverflow.com/questions/31436217/connect-c-client-to-c-server", "title": "Connect C# client to C++ server", "body": "<p>I just can't get it to work, I'm frustrated.</p>\n\n<p>My C++ code ( <code>_details</code> is <code>addrinfo*</code> and <code>_socket</code> is <code>SOCKET</code>):</p>\n\n<pre><code>struct addrinfo hints;\n_socket = socket(AF_INET, SOCK_STREAM, 0);\nif (_socket &lt; 0)\n    throw \"Invalid socket\";\nZeroMemory(&amp;hints, sizeof(hints));\nhints.ai_family = AF_INET;\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_protocol = IPPROTO_TCP;\nhints.ai_flags = AI_PASSIVE;\n\n\nif (getaddrinfo(NULL, Port.c_str(), &amp;hints, &amp;_details) != 0)\n{\n    throw \"GetAddrInfo failed\";\n}\n\nif ((bind(_socket, _details-&gt;ai_addr, this-&gt;_details-&gt;ai_addrlen)) != 0)\n{\n    throw \"Bind Unsuccessful\";\n}\n\nfreeaddrinfo(this-&gt;_details);\nif (listen(this-&gt;_socket, SOMAXCONN) != 0)\n        throw \"Listen Unsuccessful\";\nclient = accept(this-&gt;_socket, (struct sockaddr*)&amp;client_addr, &amp;addrlen);\n</code></pre>\n\n<p>A simple C++ server. C++ and Python clients work perfectly with the above server, and doing everything as expected.</p>\n\n<p>Then comes the client:</p>\n\n<pre><code>        Socket s;\n\n        IPAddress ip = Dns.GetHostEntry(\"127.0.0.1\").AddressList[0];\n        int port = 7777;\n        IPEndPoint remoteEP = new IPEndPoint(ip, port);\n\n        s = new Socket(AddressFamily.InterNetworkV6,\n            SocketType.Stream, ProtocolType.Tcp);\n\n        bool isConnected = false;\n        while (!isConnected)\n        {\n            try\n            {\n                s.Connect(remoteEP);\n                isConnected = true;\n            }\n            catch (Exception e1)\n            {\n                System.Threading.Thread.Sleep(2000);\n            }\n        }\n</code></pre>\n\n<p>The C# client works perfectly with a C# server.</p>\n\n<p>Each of these work, together - they just don't. I try to connect to the server but the client always ends up throwing <code>System.Net.Sockets SocketException</code> with the error code of <code>10061</code>, claiming that the C++ server rejects it.</p>\n\n<p>One thread on SO asked a similar question, receiving the answer that he should sleep after every connection request and then try again (as you can see, done already).</p>\n\n<p>Another thread, on another site, claimed that the problem is in the server and that he converted the C++ server parameters from host byte order to network byte order:</p>\n\n<pre><code>listenSocketAddress.sin_port = htons((u_short)port);\nlistenSocketAddress.sin_addr.S_un.S_addr = htonl(INADDR_ANY);\n</code></pre>\n\n<p>but I use <code>addrinfo</code> which doesn't contain the same variables as <code>sockaddr_in</code>.</p>\n\n<p>How can I connect those two?</p>\n"}, {"tags": ["c++", "boost", "graph"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1436979608, "creation_date": 1436979608, "answer_id": 31436598, "question_id": 31436120, "link": "https://stackoverflow.com/questions/31436120/boost-graph-library-definition-of-vertex-index-t/31436598#31436598", "title": "boost graph library definition of vertex_index_t", "body": "<p>Unsurprisingly, it's defined in <code>properties.hpp</code> line 69:</p>\n\n<pre><code>   BOOST_DEF_PROPERTY(vertex, index);\n</code></pre>\n\n<p>which expands to</p>\n\n<pre><code>enum vertex_index_t { vertex_index };\ntemplate &lt;&gt; struct property_kind&lt;vertex_index_t&gt; {\n    typedef vertex_property_tag type; \n};\n</code></pre>\n"}], "owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 1, "accepted_answer_id": 31436598, "answer_count": 1, "score": 3, "last_activity_date": 1436979608, "creation_date": 1436978100, "question_id": 31436120, "link": "https://stackoverflow.com/questions/31436120/boost-graph-library-definition-of-vertex-index-t", "title": "boost graph library definition of vertex_index_t", "body": "<p>I am learning boost graph library. The following is an example given by boost website: <a href=\"http://www.boost.org/doc/libs/1_55_0/libs/graph/example/bfs-example.cpp\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_55_0/libs/graph/example/bfs-example.cpp</a>. I didn't find the definition of <code>vertex_index_t</code> in  </p>\n\n<pre><code>typedef\n    iterator_property_map&lt;std::vector&lt;Size&gt;::iterator,\n                          property_map&lt;graph_t, vertex_index_t&gt;::const_type&gt;\n    dtime_pm_type;\n</code></pre>\n\n<p>. But this code does work. I think <code>vertex_index_t</code> must be defined somewhere,  I searched it in the four header files it included, but still didn't find it. Could anyone tell me where it is defined?  </p>\n\n<pre><code>//=======================================================================\n// Copyright 2001 Jeremy G. Siek, Andrew Lumsdaine, Lie-Quan Lee, \n//\n// Distributed under the Boost Software License, Version 1.0. (See\n// accompanying file LICENSE_1_0.txt or copy at\n// http://www.boost.org/LICENSE_1_0.txt)\n//=======================================================================\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/breadth_first_search.hpp&gt;\n#include &lt;boost/pending/indirect_cmp.hpp&gt;\n#include &lt;boost/range/irange.hpp&gt;\n\n#include &lt;iostream&gt;\n\nusing namespace boost;\ntemplate &lt; typename TimeMap &gt; class bfs_time_visitor:public default_bfs_visitor {\n  typedef typename property_traits &lt; TimeMap &gt;::value_type T;\npublic:\n  bfs_time_visitor(TimeMap tmap, T &amp; t):m_timemap(tmap), m_time(t) { }\n  template &lt; typename Vertex, typename Graph &gt;\n    void discover_vertex(Vertex u, const Graph &amp; g) const\n  {\n    put(m_timemap, u, m_time++);\n  }\n  TimeMap m_timemap;\n  T &amp; m_time;\n};\n\n\nint\nmain()\n{\n  using namespace boost;\n  // Select the graph type we wish to use\n  typedef adjacency_list &lt; vecS, vecS, undirectedS &gt; graph_t;\n  // Set up the vertex IDs and names\n  enum { r, s, t, u, v, w, x, y, N };\n  const char *name = \"rstuvwxy\";\n  // Specify the edges in the graph\n  typedef std::pair &lt; int, int &gt;E;\n  E edge_array[] = { E(r, s), E(r, v), E(s, w), E(w, r), E(w, t),\n    E(w, x), E(x, t), E(t, u), E(x, y), E(u, y)\n  };\n  // Create the graph object\n  const int n_edges = sizeof(edge_array) / sizeof(E);\n#if defined(BOOST_MSVC) &amp;&amp; BOOST_MSVC &lt;= 1300\n  // VC++ has trouble with the edge iterator constructor\n  graph_t g(N);\n  for (std::size_t j = 0; j &lt; n_edges; ++j)\n    add_edge(edge_array[j].first, edge_array[j].second, g);\n#else\n  typedef graph_traits&lt;graph_t&gt;::vertices_size_type v_size_t;\n  graph_t g(edge_array, edge_array + n_edges, v_size_t(N));\n#endif\n\n  // Typedefs\n  typedef graph_traits &lt; graph_t &gt;::vertices_size_type Size;\n\n  // a vector to hold the discover time property for each vertex\n  std::vector &lt; Size &gt; dtime(num_vertices(g));\n  typedef\n    iterator_property_map&lt;std::vector&lt;Size&gt;::iterator,\n                          property_map&lt;graph_t, vertex_index_t&gt;::const_type&gt;\n    dtime_pm_type;\n  dtime_pm_type dtime_pm(dtime.begin(), get(vertex_index, g));\n\n  Size time = 0;\n  bfs_time_visitor &lt; dtime_pm_type &gt;vis(dtime_pm, time);\n  breadth_first_search(g, vertex(s, g), visitor(vis));\n\n  // Use std::sort to order the vertices by their discover time\n  std::vector&lt;graph_traits&lt;graph_t&gt;::vertices_size_type &gt; discover_order(N);\n  integer_range &lt; int &gt;range(0, N);\n  std::copy(range.begin(), range.end(), discover_order.begin());\n  std::sort(discover_order.begin(), discover_order.end(),\n            indirect_cmp &lt; dtime_pm_type, std::less &lt; Size &gt; &gt;(dtime_pm));\n\n  std::cout &lt;&lt; \"order of discovery: \";\n  for (int i = 0; i &lt; N; ++i)\n    std::cout &lt;&lt; name[discover_order[i]] &lt;&lt; \" \";\n  std::cout &lt;&lt; std::endl;\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "user-interface", "memory-management"], "answers": [{"tags": [], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1436980796, "creation_date": 1436980796, "answer_id": 31436977, "question_id": 31436113, "link": "https://stackoverflow.com/questions/31436113/do-layouts-become-your-children-when-you-use-setlayout-in-qt/31436977#31436977", "title": "Do Layouts become your children when you use setLayout in Qt", "body": "<p>As <a href=\"http://doc.qt.io/qt-5/qwidget.html#setLayout\" rel=\"nofollow\">the documentation</a> says the <code>setLayout</code> call will reparent the given layout. So this widget will be it's parent, so you don't need to manually delete it.</p>\n\n<p>I think you should use constructors with the argument if possible. And also you don't need to store the layouts as a members if you just initialize them.</p>\n"}], "owner": {"reputation": 85, "user_id": 4682263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/022462f15738a6bbf306077b5f429d13?s=128&d=identicon&r=PG&f=1", "display_name": "argetlam5", "link": "https://stackoverflow.com/users/4682263/argetlam5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 1, "accepted_answer_id": 31436977, "answer_count": 1, "score": 0, "last_activity_date": 1436980796, "creation_date": 1436978083, "question_id": 31436113, "link": "https://stackoverflow.com/questions/31436113/do-layouts-become-your-children-when-you-use-setlayout-in-qt", "title": "Do Layouts become your children when you use setLayout in Qt", "body": "<p>Here's the code:</p>\n\n<pre><code>class MyWidget: public QWidget\n{\n  public:\n    MyWidget();\n    ~MyWidget();\n  private:\n    QHBoxLayout* theLayout;\n    QVBoxLayout* subLayout1;\n    QVBoxLayout* subLayout2;\n    //More subLayouts\n}\n\nMyWidget::MyWidget()\n{\n  theLayout = new QHBoxLayout();\n  subLayout1 = new QVBoxLayout();\n  subLayout2 = new QVBoxLayout();\n  //More subLayouts\n\n  //-------- Fill subLayouts with widgets using addWidget --------\n\n  theLayout-&gt;addLayout(subLayout1);\n  theLayout-&gt;addLayout(subLayout2);\n  //add all subLayouts\n\n  setLayout(theLayout);\n}\n\nMyWidget::~MyWidget()\n{\n  //Destructor with nothing in it\n}\n</code></pre>\n\n<p>**Note: the layouts are members of the class. </p>\n\n<p>So I know that the widgets filled in the subLayouts are now MyWidget's children (or at least that's what I thought if not please tell me) so I don't need to delete them in the destructor (Qt cleans them up right?), but are the layouts also children of MyWidget or do I need to delete these in the destructor?</p>\n"}, {"tags": ["c++", "g++", "compiler-flags"], "comments": [{"owner": {"reputation": 4410, "user_id": 2157240, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/HFOjg.jpg?s=128&g=1", "display_name": "Shmil The Cat", "link": "https://stackoverflow.com/users/2157240/shmil-the-cat"}, "edited": false, "score": 0, "creation_date": 1436977215, "post_id": 31435771, "comment_id": 50841589, "body": "&quot;...offering a <i>reasonable</i> level of optimization ...&quot;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1436977727, "post_id": 31435771, "comment_id": 50841873, "body": "The compiler is allowed to optimize as long as the <i>as-if</i> rule is adhered to.  This could include the removal of variables (or conversion to constants), as well as the dropping of unused functions."}, {"owner": {"reputation": 1231, "user_id": 3198895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94591f80dfd7e879ae7888fc5d45a0c4?s=128&d=identicon&r=PG&f=1", "display_name": "Svaberg", "link": "https://stackoverflow.com/users/3198895/svaberg"}, "edited": false, "score": 0, "creation_date": 1436978205, "post_id": 31435771, "comment_id": 50842152, "body": "I see. My main problem is that the current line skips around, and in and out of different functions in a way I do not expect/understand. Would it be best for me then, to use the <code>-O0</code> option? Or is there a good way of making sense of the behavior and stick with <code>-Og</code>?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 4, "creation_date": 1436978895, "post_id": 31435771, "comment_id": 50842562, "body": "Either use -O0 or just get used to it"}, {"owner": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "reply_to_user": {"reputation": 4410, "user_id": 2157240, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/HFOjg.jpg?s=128&g=1", "display_name": "Shmil The Cat", "link": "https://stackoverflow.com/users/2157240/shmil-the-cat"}, "edited": false, "score": 6, "creation_date": 1458242436, "post_id": 31435771, "comment_id": 59785694, "body": "@ShmilTheCat: &quot;...enables optimizations that <i>do not interfere</i> with debugging...&quot;"}, {"owner": {"reputation": 7182, "user_id": 321730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9a0c2d45e55091e4c3875ec987cb50?s=128&d=identicon&r=PG", "display_name": "cdyson37", "link": "https://stackoverflow.com/users/321730/cdyson37"}, "edited": false, "score": 0, "creation_date": 1539939918, "post_id": 31435771, "comment_id": 92691017, "body": "Maybe it should be renamed -O0.5?"}], "answers": [{"comments": [{"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 27, "creation_date": 1508909748, "post_id": 37830258, "comment_id": 80796148, "body": "That behavior seems in direct contradiction to the claim in the documentation that <code>-Og</code> enables &quot;optimizations that do not interfere with debugging&quot;. Seeing the values of variables is a pretty component of debugging."}, {"owner": {"reputation": 580, "user_id": 487683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341ab71348532b291fe16ee64fd0c4ac?s=128&d=identicon&r=PG", "display_name": "Erik Corry", "link": "https://stackoverflow.com/users/487683/erik-corry"}, "edited": false, "score": 0, "creation_date": 1611246313, "post_id": 37830258, "comment_id": 116394963, "body": "Doesn&#39;t the as-if rule apply to any level of optimization?  It&#39;s directly from the standard and doesn&#39;t pertain to -Og.  As far as I can tell the -Og flag is totally broken.  It interferes massively with debugging."}], "tags": [], "owner": {"reputation": 1231, "user_id": 3198895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94591f80dfd7e879ae7888fc5d45a0c4?s=128&d=identicon&r=PG&f=1", "display_name": "Svaberg", "link": "https://stackoverflow.com/users/3198895/svaberg"}, "is_accepted": true, "score": 3, "last_activity_date": 1465979950, "creation_date": 1465979950, "answer_id": 37830258, "question_id": 31435771, "link": "https://stackoverflow.com/questions/31435771/variables-optimized-out-with-g-and-the-og-option/37830258#37830258", "title": "Variables optimized out with g++ and the -Og option", "body": "<p>This is normal behaviour when compiling with the <code>-Og</code> option. At this optimisation level the compiler is allowed to optimize as long as it adheres to the <a href=\"http://en.cppreference.com/w/cpp/language/as_if\" rel=\"nofollow\"><em>as-if</em> rule</a>. This could include the removal of variables (or conversion to constants), as well as the dropping of unused functions.</p>\n\n<p>The recommendation is either to get used to the skipping or to compile with the <code>-O0</code>option.</p>\n"}], "owner": {"reputation": 1231, "user_id": 3198895, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94591f80dfd7e879ae7888fc5d45a0c4?s=128&d=identicon&r=PG&f=1", "display_name": "Svaberg", "link": "https://stackoverflow.com/users/3198895/svaberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3579, "favorite_count": 2, "accepted_answer_id": 37830258, "answer_count": 1, "score": 22, "last_activity_date": 1465979950, "creation_date": 1436977005, "last_edit_date": 1436977831, "question_id": 31435771, "link": "https://stackoverflow.com/questions/31435771/variables-optimized-out-with-g-and-the-og-option", "title": "Variables optimized out with g++ and the -Og option", "body": "<p>When I compile my C++ program with <code>g++</code> using the <code>-Og</code> option I see variables that are <code>&lt;optimized out&gt;</code>, and also the current line sometimes skips around. Is this behaviour expected at this optimization level, or do I have some problem? The man page of gcc says:</p>\n\n<blockquote>\n  <p>-Og <br/><br/>Optimize debugging experience.  <code>-Og</code> enables optimizations that do not interfere with debugging. It should be the optimization level of choice for the standard edit-compile-debug cycle, offering a reasonable level of optimization while maintaining fast compilation and a good debugging experience.</p>\n</blockquote>\n\n<p>hence I did not expect this behaviour. On my system I have g++ version 4.9.2 and gdb version 7.7.1.</p>\n"}, {"tags": ["c++", "qt", "arduino", "serial-port", "qtserialport"], "comments": [{"owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "edited": false, "score": 0, "creation_date": 1437038065, "post_id": 31435681, "comment_id": 50867849, "body": "Just a question: dies <code>append</code> automatically add a new line? Because the reason can be that you receive the &quot;line packet&quot; divided into two &quot;bursts&quot;. Moreover why are you waiting for a complete line (<code>canReadLine</code>) but then read all the data (<code>readExisting</code>)? I&#39;d use the <code>readLine</code> function... You can try to add dummy chars (e.g. <code>ui-&gt;saida-&gt;append(&quot;@&quot; + QString(dados) + &quot;#&quot;);</code>) to detect the beginning and the end of the transmission, so that you can better understand what is happening... I bet it&#39;s the <code>readExisting</code> ;) Change it with a <code>readLine</code> and it should work..."}, {"owner": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1449250585, "post_id": 31435681, "comment_id": 55940655, "body": "What is the type of <code>ui-&gt;saida</code>?  Also, you are using <code>canReadLine</code> to indicate if a line (or more) of data is available, but you read all available data after checking for a line of data.  You might want to use <code>readLine</code> instead of <code>readAll</code> to get only the next line of data."}], "owner": {"reputation": 61, "user_id": 5120173, "user_type": "registered", "profile_image": "https://graph.facebook.com/754320694665766/picture?type=large", "display_name": "Arthur Ara&#250;jo", "link": "https://stackoverflow.com/users/5120173/arthur-ara%c3%bajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436976692, "creation_date": 1436976692, "question_id": 31435681, "link": "https://stackoverflow.com/questions/31435681/c-qserialport-reading-exceeding-characters", "title": "c++ QSerialPort reading exceeding characters", "body": "<p>I'm developing a Qt Program to acquire data from an Arduino MEGA and I'm constantly facing the receiving of eventual unwanted new line characters, which totally messes up with parsing and validation schemes. </p>\n\n<pre><code>//Setting up QSerialPort\n\nvoid MainWindow::on_abrirPorta_clicked()\n{\nserial_port-&gt;setPortName(ui-&gt;nomePorta-&gt;text());\nif(serial_port-&gt;open(QIODevice::ReadWrite))\n{\n    if(serial_port-&gt;setBaudRate(QSerialPort::Baud115200, QSerialPort::AllDirections)\n            &amp;&amp; serial_port-&gt;setParity(QSerialPort::NoParity)\n            &amp;&amp; serial_port-&gt;setDataBits(QSerialPort::Data8)\n            &amp;&amp; serial_port-&gt;setStopBits(QSerialPort::OneStop)\n            &amp;&amp; serial_port-&gt;setFlowControl(QSerialPort::NoFlowControl))\n    {\n        ui-&gt;lerPorta-&gt;setEnabled(true);\n    }\n    else\n    {\n        serial_port-&gt;close();\n        ui-&gt;saida-&gt;append(\"Failed to open USB port\");\n    }\n}\n}\n\n//Reading data\n\nvoid MainWindow::readData()\n{\nserial_port-&gt;write(\"a\");\nif(serial_port-&gt;waitForReadyRead(500))\n    if(serial_port-&gt;canReadLine())\n    {\n        QByteArray dados = serial_port-&gt;readAll();\n        ui-&gt;saida-&gt;append(QString(dados));\n    }\n}\n</code></pre>\n\n<p>Concerning Arduino, the following is executed every second.</p>\n\n<pre><code>       Serial.print(\"MV: \");\n       Serial.println(MV);\n       Serial.print(\"PV: \");\n       Serial.println(PV);\n       Serial.print(\"SV: \");\n       Serial.println(SV);\n</code></pre>\n\n<p>Within Arduino terminal, it all works fine, but under Qt, the following happens:</p>\n\n<pre><code> MV: 26.51\n PV: 24.\n 91\n SV: 30.00\n\n MV: 27.04\n PV: 24.91\n SV: 30.00\n\n MV: 27.57\n PV: 24.9\n 0\n SV: 30.00\n\n MV: 28.11\n PV: 24.89\n SV: 30.00\n\n MV: 29.18\n PV: 24.88\n\n\n SV: 30.00\n\n MV: 29.72\n PV: 24.87\n SV: 30.00\n\n MV: 31.86\n PV: 24.85\n\n SV: 30.00\n\n MV: 32.40\n PV: 24.84\n SV: 30.0\n 0\n</code></pre>\n\n<p>Basically, a bunch of newline characters are being inserted in various points of the each piece of data. Anybody there got any idea about what might be happening here? Thanks in advance :)</p>\n"}, {"tags": ["c++", "type-conversion", "implicit-conversion"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1436976984, "post_id": 31435664, "comment_id": 50841463, "body": "Are you asking if you can safely and reliably <i>ignore</i> the warning this code emits: &quot;Implicit conversion loses integer precision: &#39;unsigned long&#39; to &#39;int&#39;&quot; ? Per the C++, &#167; 4.7,4 [conv.integral] &quot;If the destination type is signed, the value is unchanged if it can be represented in the destination type (and bit-field width); <b>otherwise, the value is implementation-defined.</b>&quot; - I.e. at-best you&#39;re at the mercy of the implementation, not a place most prefer to dwell."}, {"owner": {"reputation": 325, "user_id": 3895204, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e23e255f01da12952bc6ab6f8cb45a0a?s=128&d=identicon&r=PG", "display_name": "MaviPranav", "link": "https://stackoverflow.com/users/3895204/mavipranav"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1437029318, "post_id": 31435664, "comment_id": 50862710, "body": "@VictorPolevoy: I fail to see why the question is trivial; the reply of Sneftel is quite technical, and I doubt whether the precise situations he listed as possible sources of failure --- which was my question --- are generally obvious to programmers."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 7, "last_activity_date": 1436977474, "last_edit_date": 1436977474, "creation_date": 1436977273, "answer_id": 31435859, "question_id": 31435664, "link": "https://stackoverflow.com/questions/31435664/implicit-conversion-in-c-between-main-and-function/31435859#31435859", "title": "Implicit conversion in C++ between main and function", "body": "<p>Since <code>size_t</code> type is unsigned, subtracting <code>1</code> is well defined:</p>\n\n<blockquote>\n  <p>A computation involving <code>unsigned</code> operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type.</p>\n</blockquote>\n\n<p>However, the resultant value of 2<sup>64</sup>-1 is out of <code>int</code>s range, so you get implementation-defined behavior:</p>\n\n<blockquote>\n  <p>[when] the new type is signed and the value cannot be represented in it, either the result is implementation-defined or an implementation-defined signal is raised.</p>\n</blockquote>\n\n<p>Therefore, the answer to your question is \"yes\": there are platforms where the value of <code>a</code> would be different; there are also platforms where instead of calling <code>SomeFunction</code> the program will raise a signal.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1436977363, "creation_date": 1436977363, "answer_id": 31435890, "question_id": 31435664, "link": "https://stackoverflow.com/questions/31435664/implicit-conversion-in-c-between-main-and-function/31435890#31435890", "title": "Implicit conversion in C++ between main and function", "body": "<p>It's easier to compare and contrast <code>signed</code> and <code>insigned</code> of type same basic type, say <code>signed int</code> and <code>unsigned int</code>.</p>\n\n<p>On a system that uses 32 bits for <code>int</code>, the range of <code>unsigned int</code> is [<code>0</code> - <code>4294967295</code>] and the range of <code>signed int</code> is [<code>-2147483647</code> - <code>2147483647</code>].</p>\n\n<p>Say you have a variable of type <code>unsigned int</code> and its value is greater than <code>2147483647</code>. If you pass such a variable to <code>SomeFunction</code>, you will see an incorrect value in the function.</p>\n\n<p>Conversely, say you have a variable of type <code>signed int</code> and its value is less than zero. If you pass such a variable to a function that expects an <code>unsigned int</code>, you will see an incorrect value in the function.</p>\n"}, {"tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 3, "last_activity_date": 1436978222, "last_edit_date": 1436978222, "creation_date": 1436977502, "answer_id": 31435935, "question_id": 31435664, "link": "https://stackoverflow.com/questions/31435664/implicit-conversion-in-c-between-main-and-function/31435935#31435935", "title": "Implicit conversion in C++ between main and function", "body": "<p>Not on your computer... but technically yes, there is a situation where things can go wrong.</p>\n\n<p>All modern PCs use the \"two's complement\" system for signed integer arithmetic (read Wikipedia for details). Two's complement has many advantages, but one of the biggest is this: <em>unsaturated addition and subtraction of signed integers is identical to that of unsigned integers</em>. As long as overflow/underflow causes the result to \"wrap around\" (i.e., 0-1 = UINT_MAX), the computer can add and subtract without even knowing whether you're interpreting the numbers as signed or unsigned.</p>\n\n<p>BUT! C/C++ do not technically <em>require</em> two's complement for signed integers. There are two other permissible systems, known as \"sign-magnitude\" and \"one's complement\". These are unusual systems, never found outside antique architectures and embedded processors (and rarely even there). But in those systems, signed and unsigned arithmetic do not match up, and <code>(signed)(a+b)</code> will not necessarily equal <code>(signed)a + (signed) b</code>.</p>\n\n<p>There's another, more mundane caveat when you're also narrowing types, as is the case between <code>size_t</code> and <code>int</code> on x64, because C/C++ don't require compilers to follow a particular rule when narrowing out-of-range values to signed types. This is likewise more a matter of language lawyering than actual unsafeness, though: VC++, GCC, Clang, and all other compilers I'm aware of narrow through truncation, leading to the expected behavior.</p>\n"}], "owner": {"reputation": 325, "user_id": 3895204, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e23e255f01da12952bc6ab6f8cb45a0a?s=128&d=identicon&r=PG", "display_name": "MaviPranav", "link": "https://stackoverflow.com/users/3895204/mavipranav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 31435859, "answer_count": 3, "score": -2, "last_activity_date": 1436978222, "creation_date": 1436976621, "last_edit_date": 1592644375, "question_id": 31435664, "link": "https://stackoverflow.com/questions/31435664/implicit-conversion-in-c-between-main-and-function", "title": "Implicit conversion in C++ between main and function", "body": "<p>I have the below simple program:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nvoid SomeFunction(int a)\n{\n  std::cout&lt;&lt;&quot;Value in function: a = &quot;&lt;&lt;a&lt;&lt;std::endl;\n}\n\nint main(){\n\n  size_t a(0);\n\n  std::cout&lt;&lt;&quot;Value in main: &quot;&lt;&lt;a-1&lt;&lt;std::endl;\n  SomeFunction(a-1);\n\n  return 0;\n\n}\n</code></pre>\n<p>Upon executing this I get:</p>\n<blockquote>\n<p>Value in main: 18446744073709551615</p>\n<p>Value in function: a = -1</p>\n</blockquote>\n<p>I think I roughly understand why the function gets the 'correct' value of -1: there is an implicit conversion from the unsigned type to the signed one i.e. 18446744073709551615(unsigned) = -1(signed).</p>\n<p>Is there any situation where the function will not get the 'correct' value?</p>\n"}, {"tags": ["c++", "arrays", "class", "struct", "cout"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436976831, "post_id": 31435568, "comment_id": 50841373, "body": "What does &quot;it isn&#39;t working&quot; mean? I mean, aside from declaring/defining your <code>rainfall</code> constructor wrong (typo in capitalisation, return type whatttt) and declaring only a <i>local</i> variable."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3088720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1021723558/picture?type=large", "display_name": "user3088720", "link": "https://stackoverflow.com/users/3088720/user3088720"}, "edited": false, "score": 0, "creation_date": 1436979725, "post_id": 31435773, "comment_id": 50843076, "body": "Thank you Let_Me_Be, I looked at your code, realized I needed to create my array outside my constructor.  Then I used your cout statement and all worked good."}], "tags": [], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "is_accepted": false, "score": 0, "last_activity_date": 1436977011, "creation_date": 1436977011, "answer_id": 31435773, "question_id": 31435568, "link": "https://stackoverflow.com/questions/31435568/c-struct-output-using-class/31435773#31435773", "title": "c++ Struct Output Using Class", "body": "<pre><code>class RainFall\n</code></pre>\n\n<p>Class names should start with an uppercase character, and if you are using the camel case convention, every first letter of the class name should be upper case as well.</p>\n\n<pre><code>struct Month\n{\n  string month;\n  double rain;\n};\n\nvector&lt;Month&gt; months;\n</code></pre>\n\n<p>You need a variable to store the months.</p>\n\n<pre><code>RainFall() : months{ { \"January\", 0 }, { \"February\", 0 }, { \"March\", 0 }, { \"April\", 0 }, { \"May\", 0 }, { \"June\", 0 }, { \"July\", 0 }, { \"August\", 0 }, { \"September\", 0 }, { \"October\", 0 }, { \"Novermber\", 0 }, { \"December\", 0 } }\n{\n}\n</code></pre>\n\n<p>The constructor of a class has to have the same name as the class and for initializing class attributes, you should use the initializer section.</p>\n\n<pre><code>cout &lt;&lt; newMonths.months[i].month &lt;&lt; \" \" &lt;&lt; newMonths.months[i].rain &lt;&lt; endl;\n</code></pre>\n\n<p>You are accessing the month attribute, so don't forget it.</p>\n\n<p>Here is the full code: <a href=\"https://gist.github.com/HappyCerberus/d9e5a8e0ad18c5e393b8\" rel=\"nofollow\">https://gist.github.com/HappyCerberus/d9e5a8e0ad18c5e393b8</a></p>\n"}], "owner": {"reputation": 21, "user_id": 3088720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1021723558/picture?type=large", "display_name": "user3088720", "link": "https://stackoverflow.com/users/3088720/user3088720"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436977011, "creation_date": 1436976334, "question_id": 31435568, "link": "https://stackoverflow.com/questions/31435568/c-struct-output-using-class", "title": "c++ Struct Output Using Class", "body": "<p>I once new a bit of c++, and am trying to relearn.  I am currently working on a project which will eventually store, sort, and display rainfall per month.  Right now I am trying to print out array of months (structs), but it isn't working.  How can I get this to correctly print out each months info(month, rain)? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass rainfall\n{\npublic:\nstruct Month\n{\n    string month;\n    double rain;\n};\n\n//private:\nvoid Rainfall()\n{\n    Month months[12] = { { \"January\", 0 }, { \"February\", 0 }, { \"March\", 0 }, { \"April\", 0 }, { \"May\", 0 }, { \"June\", 0 }, { \"July\", 0 }, { \"August\", 0 }, { \"September\", 0 }, { \"October\", 0 }, { \"Novermber\", 0 }, { \"December\", 0 }};\n}\n};\n\nint main()\n{\nrainfall newMonths;\nfor (int i = 0; i &lt; 12; i++)\n    {\n        cout &lt;&lt; newMonths[i].month  &lt;&lt; \"   \" &lt;&lt;  newMonths[i].rain &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "static-analysis"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1436976851, "post_id": 31435505, "comment_id": 50841385, "body": "The problem seems contrived to me. A constructor should establish the class&#39;s invariants; if you don&#39;t do that, no magic can help you."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1436976935, "post_id": 31435505, "comment_id": 50841433, "body": "@KerrekSB: In terms of program design and all that jazz, absolutely. But it&#39;s nice to have diagnostics when you fail to do so, no?"}, {"owner": {"reputation": 53, "user_id": 5120115, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Im7jvCujXEQ/AAAAAAAAAAI/AAAAAAAAAKk/st8aPqk3YcU/photo.jpg?sz=128", "display_name": "Artem Verkhoglyadov", "link": "https://stackoverflow.com/users/5120115/artem-verkhoglyadov"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1436977061, "post_id": 31435505, "comment_id": 50841498, "body": "@KerrekSB it&#39;s a simplified example. If you have 500 classes with 0-5 members each, you make same mistake eventually."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1436977111, "post_id": 31435505, "comment_id": 50841524, "body": "Since C++11 you might change your coding style and initialize in  the member declaration <code>int x = 0</code>.  This makes it easy to see uninitialized values."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1436977114, "post_id": 31435505, "comment_id": 50841525, "body": "@KerrekSB Do you compile with all warnings off because the code <i>should</i> be correct? I don&#39;t understand your objection."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436978950, "post_id": 31435505, "comment_id": 50842597, "body": "@Barry: I don&#39;t follow -- of course I compile with all warnings <i>on</i> so my compiler tells me when my code isn&#39;t correct. So I don&#39;t need a language feature to deal with this &quot;problem&quot;."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436978983, "post_id": 31435505, "comment_id": 50842625, "body": "@LightnessRacesinOrbit: Of course -- and thankfully you do have those diagnostics :-)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436989065, "post_id": 31435505, "comment_id": 50848468, "body": "@DieterL&#252;cking: Arguably it makes it <i>harder</i> to see when you&#39;ve not set the values to what you actually wanted them to be."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436976449, "post_id": 31435535, "comment_id": 50841119, "body": "Interestingly, Clang doesn&#39;t warn here even with -Wall -Wextra -Wuninitialized"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436976591, "post_id": 31435535, "comment_id": 50841205, "body": "Just waiting for Ira to show up promoting his static analysis product :P"}, {"owner": {"reputation": 7651, "user_id": 3131203, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dqdWI.gif?s=128&g=1", "display_name": "keshlam", "link": "https://stackoverflow.com/users/3131203/keshlam"}, "edited": false, "score": 0, "creation_date": 1436980300, "post_id": 31435535, "comment_id": 50843412, "body": "The traditional C answer was a separate strict checking tool, <i>lint</i>, because with the machines available at the timestrict checking slowed the compiler down too much to do every time. C++ compilers inherited that default. But with today&#39;s hardware, starting with -Wall is a cheap investment in better code!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1436976457, "last_edit_date": 1495542106, "creation_date": 1436976242, "answer_id": 31435535, "question_id": 31435505, "link": "https://stackoverflow.com/questions/31435505/how-to-find-and-avoid-uninitialised-primitive-members-in-c/31435535#31435535", "title": "How to find and avoid uninitialised primitive members in C++?", "body": "<p><a href=\"http://coliru.stacked-crooked.com/a/0ee30ff73da93de9\" rel=\"nofollow noreferrer\">Yes they do</a>&hellip; sort of:</p>\n\n<pre><code>main.cpp: In function 'int main()':\nmain.cpp:10:18: warning: 'a.A::x' is used uninitialized in this function [-Wuninitialized]\n   std::cout &lt;&lt; a.x;\n                  ^\n0\n</code></pre>\n\n<p>In the above linked example, I'm using GCC 5.1 trunk with <code>-Wall</code>.</p>\n\n<p><strong>Turn on more GCC warnings and/or upgrade.</strong></p>\n\n<p>Also tested, and found <em>not</em> to warn:</p>\n\n<ul>\n<li>GCC 4.4.7</li>\n<li>GCC 4.9.2 (by <a href=\"https://stackoverflow.com/users/768110/riad\">RiaD</a>)</li>\n<li>Clang 3.6.0</li>\n</ul>\n\n<p>Honestly I'm not sure what else you can do. You could create a tool to do this, but then you'd be creating a compiler or static analyser. :)</p>\n\n<p>So, I guess, just hope the people who know how to do that catch up&hellip;</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5120115, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Im7jvCujXEQ/AAAAAAAAAAI/AAAAAAAAAKk/st8aPqk3YcU/photo.jpg?sz=128", "display_name": "Artem Verkhoglyadov", "link": "https://stackoverflow.com/users/5120115/artem-verkhoglyadov"}, "edited": false, "score": 0, "creation_date": 1437119001, "post_id": 31461758, "comment_id": 50907111, "body": "Oh, thanks, I&#39;m already using g++-5.1, but it fails to detect tricky cases. Will try clang next week"}], "tags": [], "owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "is_accepted": false, "score": 1, "last_activity_date": 1437070898, "creation_date": 1437070898, "answer_id": 31461758, "question_id": 31435505, "link": "https://stackoverflow.com/questions/31435505/how-to-find-and-avoid-uninitialised-primitive-members-in-c/31461758#31461758", "title": "How to find and avoid uninitialised primitive members in C++?", "body": "<p>This bug is diagnosed by <code>valgrind</code> with the (default) tool <code>memcheck</code>, producing a number of warnings, including:</p>\n\n<pre><code>$ valgrind ./unin\n\u2026\n==12185== Use of uninitialised value of size 8 \n==12185==    at 0x4F39BC3: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)\n==12185==    by 0x4F3AD89: std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; std::num_put&lt;char, std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; &gt;::_M_insert_int&lt;long&gt;(std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt;, std::ios_base&amp;, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)\n==12185==    by 0x4F3AF8C: std::num_put&lt;char, std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; &gt;::do_put(std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt;, std::ios_base&amp;, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)\n==12185==    by 0x4F474E9: std::ostream&amp; std::ostream::_M_insert&lt;long&gt;(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)             \n==12185==    by 0x400763: main (in [censored]/unin)\n</code></pre>\n\n<p>It should also be found by Clang's address sanitizer. However, I realize you are most interested in a compile-time check. After all, the existing test suites may never execute some of the code, and catching a bug sooner is always better. You could use GCC 5.1 (even if you used it <em>only</em> for this purpose), or you could use a dedicated static analyzer. Fortunately, clang comes with a static analyzer invoked as <code>scan-build</code> (included in at least the Debian/Ubuntu packages):</p>\n\n<pre><code>$ scan-build clang -c unin.cxx \nscan-build: Using '/usr/lib/llvm-3.6/bin/clang' for static analysis\nunin.cxx:10:3: warning: Function call argument is an uninitialized value\n  std::cout &lt;&lt; a.x;\n  ^~~~~~~~~~~~~~~~\n1 warning generated.\nscan-build: 1 bug found.\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5120115, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Im7jvCujXEQ/AAAAAAAAAAI/AAAAAAAAAKk/st8aPqk3YcU/photo.jpg?sz=128", "display_name": "Artem Verkhoglyadov", "link": "https://stackoverflow.com/users/5120115/artem-verkhoglyadov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 31435535, "answer_count": 2, "score": 5, "last_activity_date": 1437070898, "creation_date": 1436976162, "last_edit_date": 1436976651, "question_id": 31435505, "link": "https://stackoverflow.com/questions/31435505/how-to-find-and-avoid-uninitialised-primitive-members-in-c", "title": "How to find and avoid uninitialised primitive members in C++?", "body": "<p>There is a common C++ bug with uninitialised primitive members:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\n  public:    \n    int x;\n};\n\nint main() {\n  A a;\n  std::cout &lt;&lt; a.x;\n  return 0; \n}\n</code></pre>\n\n<p><code>a.x</code> will be uninitialised. I understand why it happens and want to find a solution for catching such bugs. I checked gcc and cppcheck, they don't report these members.</p>\n\n<p><strong>EDIT</strong>\nChecked gcc with flags <code>-Wall -Wextra -Werror -pedantic -Wold-style-cast -Wconversion -Wsign-conversion -Wunreachable-code</code></p>\n\n<p>The first version of gcc that detects a bug is 5.1. g++-4.9 doesn't detect it, clang++-3.6 fails too.</p>\n"}, {"tags": ["android", "c++", "gcc", "android-ndk", "g++"], "comments": [{"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436976242, "post_id": 31435469, "comment_id": 50840974, "body": "Can you confirm the size still same after<code>strip</code> ?"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436977160, "post_id": 31435469, "comment_id": 50841552, "body": "Yes, strip brings it down to an expected size: <code>$ ll libzApp.so</code> -- <code>-rwxrwxr-x 1 bamboo bamboo 7301876 Jul 15 11:18 libzApp.so*</code>"}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436977316, "post_id": 31435469, "comment_id": 50841648, "body": "So is this solves your problem? Can you also try to remove ` -DNDEBUG` ?"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436977625, "post_id": 31435469, "comment_id": 50841814, "body": "Why do I need to <code>strip</code> the symbols? If I didn&#39;t tell gcc to build debug symbols, why do they exist in the first place? I&#39;ll try removing the NDEBUG and let you know how it goes, but I think we may have preprocessor conditionals that depend on this being set."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436977688, "post_id": 31435469, "comment_id": 50841851, "body": "Actually I can&#39;t remove NDEBUG, that&#39;s defined in the android toolchain file I pulled from here: <a href=\"https://github.com/taka-no-me/android-cmake\" rel=\"nofollow noreferrer\">github.com/taka-no-me/android-cmake</a>"}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436977734, "post_id": 31435469, "comment_id": 50841883, "body": "For example, Qt always strip the symbols in release mode before deployment."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436977885, "post_id": 31435469, "comment_id": 50841975, "body": "Also, try to pass <code>-s</code> parameter to the compiler."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1436987243, "post_id": 31435469, "comment_id": 50847478, "body": "I added a post build event to run the <code>strip</code> command, I didn&#39;t try the <code>-s</code> parameter but I think it would have worked as well, based on the docs I read. Feel free to provide a more detailed answer and I will mark it for you :)"}], "answers": [{"tags": [], "owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "is_accepted": true, "score": 2, "last_activity_date": 1437039332, "last_edit_date": 1592644375, "creation_date": 1436977259, "answer_id": 31435853, "question_id": 31435469, "link": "https://stackoverflow.com/questions/31435469/getting-debug-symbols-in-final-so-file-even-when-building-release-in-cmake/31435853#31435853", "title": "Getting debug symbols in final SO file even when building Release in CMake", "body": "<p>I can suggest you to use <code>strip</code> to remove the debugging information, eg:</p>\n<pre><code>strip libzApp.so\n</code></pre>\n<p>That is not so bad to do that because, for example, Qt's build system <code>qmake</code> always do that in it's <code>install</code> target of resulting Makefile.</p>\n<p>By default, compiler always add a relocation information and symbol table into the binary. It also adds a lot of other information which may be stripped out (see link on answer below).</p>\n<p>You may also use <code>-s</code> parameter to the compiler:</p>\n<pre><code>g++ -s ...\n</code></pre>\n<p>According to the docs:</p>\n<blockquote>\n<p>-s:</p>\n<pre><code>Remove all symbol table and relocation information from the executable.\n</code></pre>\n</blockquote>\n<p>This flag should work exactly as <code>strip</code>. Here is also <a href=\"https://stackoverflow.com/a/15314861/1750757\">some similiar answer on stackoverflow</a>.</p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1997, "favorite_count": 0, "accepted_answer_id": 31435853, "answer_count": 1, "score": 4, "last_activity_date": 1437039332, "creation_date": 1436976074, "last_edit_date": 1436977759, "question_id": 31435469, "link": "https://stackoverflow.com/questions/31435469/getting-debug-symbols-in-final-so-file-even-when-building-release-in-cmake", "title": "Getting debug symbols in final SO file even when building Release in CMake", "body": "<p>I'm using CMake (generator is ninja) to build a shared library using the NDK toolchain (g++ 4.9). Below is the verbose output for building a single CPP file in the library when I build with ninja:</p>\n\n<blockquote>\n  <p>[34/164] /usr/local/bin/android-ndk/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++   -DANDROID -DBOOST_ALL_NO_LIB -fexceptions -frtti -fpic -Wno-psabi --sysroot=/usr/local/bin/android-ndk/platforms/android-15/arch-arm -funwind-tables -finline-limit=64 -fsigned-char -no-canonical-prefixes -march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16 -fdata-sections -ffunction-sections -Wa,--noexecstack  -mthumb -fomit-frame-pointer -fno-strict-aliasing -O3 -DNDEBUG -isystem /usr/local/bin/android-ndk/platforms/android-15/arch-arm/usr/include -isystem /usr/local/bin/android-ndk/sources/cxx-stl/gnu-libstdc++/4.9/include -isystem /usr/local/bin/android-ndk/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi-v7a/include -isystem /usr/local/bin/android-ndk/sources/cxx-stl/gnu-libstdc++/4.9/include/backward -I/usr/local/bin/android-ndk/sources/android/cpufeatures -I/usr/local/bin/android-ndk/sources/android/native_app_glue -ICore/Artifacts/Android -IApplications/Survey/Source -ICore/UI/. -ICore/UI/Source -ICore/ThirdParty/PowerVR/sdk/Include -ICore/ThirdParty/PowerVR/tools/include -ICore/ThirdParty/PowerVR/tools/include/OGLES2 -ICore/ThirdParty/boost/include -ICore/ThirdParty/openssl/include -ICore/ThirdParty/sqlite/include -ICore/WebServices/Source    -std=gnu++14 -MMD -MT Applications/Survey/CMakeFiles/Survey.dir/Source/View/RadioGroup.cpp.o -MF Applications/Survey/CMakeFiles/Survey.dir/Source/View/RadioGroup.cpp.o.d -o Applications/Survey/CMakeFiles/Survey.dir/Source/View/RadioGroup.cpp.o -c Applications/Survey/Source/View/RadioGroup.cpp</p>\n</blockquote>\n\n<p>Note that I specify <code>-DCMAKE_BUILD_TYPE=Release</code> when I generate.</p>\n\n<p>The <code>-g</code> option is not present in the command line invocation, however the final binary is 19MB:</p>\n\n<pre><code>-rwxrwxr-x 1 bamboo bamboo 19173588 Jul 15 10:30 libzApp.so*\n</code></pre>\n\n<p>I ran <code>size</code> on it to determine what was making it so huge, but I got this:</p>\n\n<pre><code>$ size libzApp.so\n   text    data     bss     dec     hex filename\n7097019  201268   53488 7351775  702ddf libzApp.so\n</code></pre>\n\n<p>That only accounts for 7mb of data. So I ran this:</p>\n\n<pre><code>$ objdump --debugging libzApp.so | head -25\n\nlibzApp.so:     file format elf32-little\n\nContents of the .debug_abbrev section:\n\n  Number TAG (0x0)\n   1      DW_TAG_compile_unit    [has children]\n    DW_AT_producer     DW_FORM_strp\n    DW_AT_language     DW_FORM_data1\n    DW_AT_name         DW_FORM_strp\n    DW_AT_comp_dir     DW_FORM_strp\n    DW_AT_low_pc       DW_FORM_addr\n    DW_AT_entry_pc     DW_FORM_addr\n    DW_AT_ranges       DW_FORM_data4\n    DW_AT_stmt_list    DW_FORM_data4\n    DW_AT value: 0     DW_FORM value: 0\n   2      DW_TAG_typedef    [no children]\n    DW_AT_name         DW_FORM_strp\n    DW_AT_decl_file    DW_FORM_data1\n    DW_AT_decl_line    DW_FORM_data1\n    DW_AT_type         DW_FORM_ref4\n    DW_AT value: 0     DW_FORM value: 0\n   3      DW_TAG_base_type    [no children]\n    DW_AT_byte_size    DW_FORM_data1\n    DW_AT_encoding     DW_FORM_data1\n</code></pre>\n\n<p>I think this pretty much confirms that it has debug symbols. Can anyone help me understand why the .so is so large? Assuming it's because of debug symbols, what about the command line invocation would cause this?</p>\n\n<h2>EDIT</h2>\n\n<p>As suggested in the comments section, running <code>strip</code> on the SO file definitely brings its size down to expected value (basically what we see from the result of the <code>size</code> command). However, why would debug symbols be built into the shared object when I specifically told GCC to not build debug symbols? Am I missing something here?</p>\n"}, {"tags": ["c++", "asynchronous", "argument-passing", "lifetime"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1436976679, "post_id": 31435424, "comment_id": 50841270, "body": "There are no asynchronous function calls in C++. Threads are not functions, they are objects."}], "answers": [{"tags": [], "owner": {"reputation": 2017, "user_id": 4999494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e49247723efb14f33ad19a5ecdf1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Balabin", "link": "https://stackoverflow.com/users/4999494/alexander-balabin"}, "is_accepted": true, "score": 2, "last_activity_date": 1436976954, "creation_date": 1436976954, "answer_id": 31435755, "question_id": 31435424, "link": "https://stackoverflow.com/questions/31435424/argument-lifetime-of-an-asynchronous-function-call/31435755#31435755", "title": "Argument lifetime of an asynchronous function call", "body": "<p>1) Here you're passing a <em>pointer</em> into the ctor of <code>t1</code> so all the structured lieftime related statements only apply to the pointer rather than the object it points to.</p>\n\n<p>2) There are no asynchronous function calls here - you're calling a <code>std::thread</code> ctor and all structured lifetime statements apply to the ctor only rather than its side effects that eventually will make a call to myFunc.</p>\n"}], "owner": {"reputation": 241, "user_id": 1531175, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d3e1e4c907cdd2b8a78a7f797c8c5756?s=128&d=identicon&r=PG", "display_name": "StephenD", "link": "https://stackoverflow.com/users/1531175/stephend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 31435755, "answer_count": 1, "score": 1, "last_activity_date": 1436976954, "creation_date": 1436975952, "question_id": 31435424, "link": "https://stackoverflow.com/questions/31435424/argument-lifetime-of-an-asynchronous-function-call", "title": "Argument lifetime of an asynchronous function call", "body": "<p>Herb Sutter in <a href=\"http://herbsutter.com/2013/06/05/gotw-91-solution-smart-pointer-parameters/\" rel=\"nofollow\">GotW #91 Solution: Smart Pointer Parameters</a> states \"\nThanks to structured lifetimes, the called function\u2019s lifetime is a strict subset of the calling function\u2019s call expression.\"\nDoes this apply to asynchronous function calls?</p>\n\n<pre><code>void myFunc(Bar * arg);\n...\nauto bar = new Bar;\nstd::thread t1(myFunc,bar);\ndelete bar;\njoin t1;\n</code></pre>\n\n<p>I presume that in this case, deleting bar could invalidate the argument passed into myFunc on thread t1.</p>\n"}, {"tags": ["android", "c++", "android-ndk", "c-preprocessor"], "comments": [{"owner": {"reputation": 1317, "user_id": 1411115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364d95a6338c96d6380a91426e1e0a52?s=128&d=identicon&r=PG", "display_name": "erapert", "link": "https://stackoverflow.com/users/1411115/erapert"}, "edited": false, "score": 0, "creation_date": 1436977418, "post_id": 31435356, "comment_id": 50841693, "body": "Please tell us which version of Android and the NDK you&#39;re using."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1436977764, "post_id": 31435356, "comment_id": 50841895, "body": "I&#39;m going to assume that you have an Android-specific makefile, or at least a makefile that contains Android-specific parts. So it would be easy to just add any define you want there, and then check for those in your code."}, {"owner": {"reputation": 1180, "user_id": 1112856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/gxHHD.jpg?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/1112856/pankaj"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1437049182, "post_id": 31435356, "comment_id": 50875000, "body": "@Michael: Can you be more specific about how to achieve this, about creating defines in android make file ?"}, {"owner": {"reputation": 1180, "user_id": 1112856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/gxHHD.jpg?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/1112856/pankaj"}, "reply_to_user": {"reputation": 1317, "user_id": 1411115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364d95a6338c96d6380a91426e1e0a52?s=128&d=identicon&r=PG", "display_name": "erapert", "link": "https://stackoverflow.com/users/1411115/erapert"}, "edited": false, "score": 0, "creation_date": 1437049366, "post_id": 31435356, "comment_id": 50875144, "body": "@erapert: I am using Android NDK, Revision 10e,  to be more specific &#39;GNU Make 3.81&#39; 64bit ubuntu"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1437050387, "post_id": 31435356, "comment_id": 50875889, "body": "Just add <code>-DWHATEVER</code> to your <code>LOCAL_CFLAGS</code>"}, {"owner": {"reputation": 1180, "user_id": 1112856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/gxHHD.jpg?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/1112856/pankaj"}, "edited": false, "score": 0, "creation_date": 1437131176, "post_id": 31435356, "comment_id": 50913856, "body": "so, in order to use #ifdef __ANDROID__ do I have to add LOCAL_CFLAGS:=-DANDROID"}], "owner": {"reputation": 1180, "user_id": 1112856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/gxHHD.jpg?s=128&g=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/1112856/pankaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436975781, "creation_date": 1436975781, "question_id": 31435356, "link": "https://stackoverflow.com/questions/31435356/predefined-preprocessor-directive-in-ndk-not-working", "title": "Predefined Preprocessor Directive in NDK not working", "body": "<p>C++ Header for class <strong>XYZ.h</strong></p>\n\n<pre><code>//Default constructor will be used in multiple platforms\nXYZ();\n\n#ifdef __ANDROID__\n\n//parametrized constructors should be used only in Android platform\nXYZ(DirectorBase *director);\n\n#endif //End __ANDROID__\n</code></pre>\n\n<ul>\n<li>__ANDROID__ does not work and it removes parameterised constructor when compiled through NDK.</li>\n<li><p>Where in lot of blogs I can see that NDK have predefined preprocessor __ANDROID__</p></li>\n<li><p>How to make this work?\nWhere some code only should be work in android and ignored in other platforms.</p></li>\n</ul>\n"}, {"tags": ["c++", "cmake", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 36494, "user_id": 25450, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbf950615302e00a14bceec914af32ca?s=128&d=identicon&r=PG", "display_name": "sastanin", "link": "https://stackoverflow.com/users/25450/sastanin"}, "is_accepted": false, "score": 0, "last_activity_date": 1436977423, "last_edit_date": 1436977423, "creation_date": 1436976530, "answer_id": 31435634, "question_id": 31435251, "link": "https://stackoverflow.com/questions/31435251/cmake-is-not-adding-directories-correctly-with-target-link-directory/31435634#31435634", "title": "Cmake is not adding directories correctly with &quot;target_link_directory&quot;", "body": "<p>I've never seen <code>target_link_directory</code> used, and don't find the relevant documentation in CMake manual.</p>\n\n<p>If you want to link with <code>libCamera.so</code> in <code>/home/username/Libraries</code>, you may simply write CMakeLists.txt like this:</p>\n\n<pre><code>add_executable(main main.cpp)\ntarget_link_libraries(main /home/username/Libraries/libCamera.so)\n</code></pre>\n\n<p>If there're many libraries you want to link against, you may consider using <code>find_library</code> which accepts <code>PATHS</code> option. Something like this:</p>\n\n<pre><code>find_library(MY_CAMERA_LIBRARY Camera PATHS /home/username/Libraries)\nmessage(STATUS \"MY_CAMERA_LIBRARY: \" ${MY_CAMERA_LIBRARY})\ntarget_link_libraries(main ${MY_CAMERA_LIBRARY})\n</code></pre>\n\n<p>MY_CAMERA_LIBRARY variable will be set to the full path to your libCamera.so.</p>\n"}, {"comments": [{"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 2, "creation_date": 1534788903, "post_id": 31435832, "comment_id": 90822779, "body": "Note that link_directories must be called before the call to add_executable"}, {"owner": {"reputation": 3572, "user_id": 5710233, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5LmFgRhfZNQ/AAAAAAAAAAI/AAAAAAAAABk/Etcd11tdJGc/photo.jpg?sz=128", "display_name": "Mizux", "link": "https://stackoverflow.com/users/5710233/mizux"}, "edited": false, "score": 2, "creation_date": 1535037562, "post_id": 31435832, "comment_id": 90927857, "body": "@Julien-L for info <code>target_link_directories()</code> is currently feature requested cf <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/17215\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/cmake/issues/17215</a>"}], "tags": [], "owner": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "is_accepted": false, "score": 2, "last_activity_date": 1436977209, "creation_date": 1436977209, "answer_id": 31435832, "question_id": 31435251, "link": "https://stackoverflow.com/questions/31435251/cmake-is-not-adding-directories-correctly-with-target-link-directory/31435832#31435832", "title": "Cmake is not adding directories correctly with &quot;target_link_directory&quot;", "body": "<p>Use command <code>link_directories()</code> instead of <code>target_link_directories()</code> (which does not exist):</p>\n\n<pre><code>add_executable(test main.cpp)\nlink_directories(/home/karnivaurus/Libraries)\ntarget_link_libraries(test Camera)\n</code></pre>\n\n<p>NOTE: My CMake issued an error when it saw the command <code>target_link_directory()</code> I wonder why you did not see it (CMake 2.8.12).</p>\n"}, {"tags": [], "owner": {"reputation": 1309, "user_id": 3131579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzI4W.jpg?s=128&g=1", "display_name": "Victor Mwenda", "link": "https://stackoverflow.com/users/3131579/victor-mwenda"}, "is_accepted": false, "score": 2, "last_activity_date": 1554999121, "creation_date": 1554999121, "answer_id": 55636959, "question_id": 31435251, "link": "https://stackoverflow.com/questions/31435251/cmake-is-not-adding-directories-correctly-with-target-link-directory/55636959#55636959", "title": "Cmake is not adding directories correctly with &quot;target_link_directory&quot;", "body": "<p>This may help someone someday.</p>\n\n<p>You should use the <code>target_link_directories</code> after <code>add_executable</code></p>\n\n<p>Example:</p>\n\n<p><code>add_executable(main main.cpp)</code></p>\n\n<p>Then</p>\n\n<p><code>target_link_directories(target PUBLIC|PRIVATE|INTERFACE directory)</code></p>\n\n<p>So your end result may look like</p>\n\n<pre><code>add_executable(main main.cpp)\n\ntarget_link_directories(main INTERFACE /my/libs/dir)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>add_executable(main main.cpp)\ntarget_link_directories(main PUBLIC /my/libs/dir)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>add_executable(main main.cpp)\ntarget_link_directories(main PRIVATE /my/libs/dir)\n</code></pre>\n\n<p>Unfortunately, CMake does not encourage this, you should instead link the actual library you want</p>\n\n<pre><code>target_link_libraries (main /my/awesome/lib.so)\n</code></pre>\n\n<p>There is also another way to link directories.</p>\n\n<pre><code>link_directories(/my/libs/dir)\n</code></pre>\n\n<blockquote>\n  <p>Check the official documentation\n  (<a href=\"https://cmake.org/cmake/help/git-stage/command/target_link_directories.html\" rel=\"nofollow noreferrer\">https://cmake.org/cmake/help/git-stage/command/target_link_directories.html</a>)</p>\n</blockquote>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10964, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1554999121, "creation_date": 1436975531, "question_id": 31435251, "link": "https://stackoverflow.com/questions/31435251/cmake-is-not-adding-directories-correctly-with-target-link-directory", "title": "Cmake is not adding directories correctly with &quot;target_link_directory&quot;", "body": "<p>I Ubuntu, I am learning about cmake and make, and just trying a simple example. I have two directories: <code>src</code> and <code>build</code>. In <code>src</code>, I have three files: <code>main.cpp</code>, <code>camera.hpp</code>, and <code>CMakeLists.txt</code>, which has (only) the following text:</p>\n\n<pre><code>add_executable(test main.cpp)\ntarget_link_directory(/home/karnivaurus/Libraries)\ntarget_link_libraries(test Camera)\n</code></pre>\n\n<p>In <code>/home/karnivaurus/Libraries</code>, I have a shared library called <code>libCamera.so</code>, which I want to link against. My <code>main.cpp</code> uses functions in this library, which are declared in <code>camera.hpp</code>.</p>\n\n<p>Now, in my <code>build</code> directory, I run <code>cmake ../src</code>, and then <code>make</code>. However, I then get linker errors telling me that there are undefined references to some of the functions in my library. If I do a search through all the files and subdirectories in <code>build</code>, there is not mention of <code>libCamera.so</code>.</p>\n\n<p>However, if I remove the <code>target_link_directory</code> line in my <code>CMakeLists.txt</code> file, and instead write the full path to the library when specifying the executable, i.e. <code>target_link_libraries(test /home/karnivaurus/Libraries/libCamera.so)</code>, it compiles and links fine.</p>\n\n<p>Why is <code>target_link_directory</code> not working as expected?</p>\n"}, {"tags": ["c++", "visual-studio", "api"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 4, "creation_date": 1436975845, "post_id": 31435223, "comment_id": 50840706, "body": "Easy way is to provide libraries for each version of VS you support."}], "answers": [{"tags": [], "owner": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "is_accepted": false, "score": 1, "last_activity_date": 1436989281, "last_edit_date": 1495535244, "creation_date": 1436989281, "answer_id": 31439609, "question_id": 31435223, "link": "https://stackoverflow.com/questions/31435223/how-to-make-a-c-api-that-does-not-require-user-to-use-a-particular-version-of/31439609#31439609", "title": "How to make a C++ API that does not require user to use a particular version of Visual Studio?", "body": "<p>Since the abi can change between the different version of visual studio, you will need to flatten your class. As you said you wrap your class in a C Interface then you will be able to use any compiler you want.\nTo do so you can use extern \"C\". It will enforce the use of C Linkage for your methods. </p>\n\n<p>Quick example of extern \"C\"</p>\n\n<pre><code>extern \"C\"\n{\n    void myExternCFunction(int* outParam);\n}\n\n//Later in the code\nvoid myExternCFunction(int* outParam)\n{\n    *outParam = 42;\n}\n</code></pre>\n\n<p>Heres a <a href=\"https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c\">stackoverflow</a> post about extern \"C\"<br>\nIsoCpp <a href=\"https://isocpp.org/wiki/faq/mixing-c-and-cpp\" rel=\"nofollow noreferrer\">link</a> about extern \"C\"  </p>\n\n<p>If you don't know what the abi is well, long story short, it describe how parameters will be sent to the method, how the method will be called...</p>\n\n<p>Here's an <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">article</a> about abi</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1436990123, "creation_date": 1436990123, "answer_id": 31439826, "question_id": 31435223, "link": "https://stackoverflow.com/questions/31435223/how-to-make-a-c-api-that-does-not-require-user-to-use-a-particular-version-of/31439826#31439826", "title": "How to make a C++ API that does not require user to use a particular version of Visual Studio?", "body": "<p>The DLL itself should only export C-style functions, not C++ classes.  Then any compiler can use the DLL.  If you want to also provide a C++ API, create a .h header file that defines and implements the C++ class(es) you want, and have the class(es) internally use the DLL functions as needed.  Then any C++ compiler can use the C++ API (as long as you stay away from any compiler-specific extensions, unless you <code>#ifdef</code> them).</p>\n"}], "owner": {"reputation": 1340, "user_id": 834594, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9d89a0e03d745761252e27988b28d963?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/834594/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1436990123, "creation_date": 1436975475, "question_id": 31435223, "link": "https://stackoverflow.com/questions/31435223/how-to-make-a-c-api-that-does-not-require-user-to-use-a-particular-version-of", "title": "How to make a C++ API that does not require user to use a particular version of Visual Studio?", "body": "<p>I have created a C++ API that currently will only work on a particular version of Visual Studio (2008). Basically, I have a C++ DLL (and other libraries that this DLL depends on) all compiled with Visual Studio 2008. This will be a big problem for our users since they will be running newer versions of Visual Studio. I need to figure out a way to create a platform independent C++ API. I heard that one way to do this is to wrap all of the interface methods in C. Is this the right way to address this problem? How would I go about wrapping the C++ code in C such that the users are not bound to a particular version of Visual Studio on their end (and also be able to support a Linux environment as well)?</p>\n"}, {"tags": ["c++", "memory", "pass-by-reference"], "comments": [{"owner": {"reputation": 9041, "user_id": 3216312, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/532212e9b26bc1e386a9f13dd8fa520a?s=128&d=identicon&r=PG&f=1", "display_name": "Petr", "link": "https://stackoverflow.com/users/3216312/petr"}, "edited": false, "score": 0, "creation_date": 1436975181, "post_id": 31435086, "comment_id": 50840210, "body": "Does this at all compile?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1436975201, "post_id": 31435086, "comment_id": 50840222, "body": "This is not valid C++. Check your compiler&#39;s documentation."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1436975288, "post_id": 31435086, "comment_id": 50840278, "body": "You&#39;re not passing the member function as an argument, you&#39;re passing the value <i>returned by</i> the member function."}, {"owner": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436975697, "post_id": 31435086, "comment_id": 50840601, "body": "@CaptainObvlious I can&#39;t see where in my post am I contradicting your statement."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1436975782, "post_id": 31435086, "comment_id": 50840663, "body": "A reference stays a reference, no copies."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1436975961, "post_id": 31435086, "comment_id": 50840780, "body": "The title of your post."}, {"owner": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436976097, "post_id": 31435086, "comment_id": 50840870, "body": "@CaptainObvlious Oh? Isn&#39;t in my example a method being used as a parameter, in which definition it happens to be a reference?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1436976493, "post_id": 31435086, "comment_id": 50841143, "body": "@roymcclure, Taking a function by reference as a parameter would be <code>void foo(int(&amp;func)(int));</code> or equivalent. It&#39;s very different from taking an <code>int</code> by reference. Whether that <code>int</code> is the return value of a function makes no real difference."}, {"owner": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1436976584, "post_id": 31435086, "comment_id": 50841201, "body": "@chris As I explained to Captain, the &quot;reference&quot; word here makes...ehm.. reference, to the parameter, not to the funcion."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1436977634, "post_id": 31435086, "comment_id": 50841820, "body": "The title of your post doesn&#39;t match the contents or the actual problem. This may make it difficult for others to find, confuse them, or cause them to dismiss it completely."}], "answers": [{"comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1436975349, "post_id": 31435119, "comment_id": 50840317, "body": "<b>non-const</b> reference"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1436977189, "last_edit_date": 1436977189, "creation_date": 1436975214, "answer_id": 31435119, "question_id": 31435086, "link": "https://stackoverflow.com/questions/31435086/whats-really-happening-when-we-use-a-method-as-a-parameter-by-reference/31435119#31435119", "title": "What&#39;s really happening when we use a method as a parameter by reference?", "body": "<p>It will be a compiler error as you are trying to bind a non <code>const</code> reference to a temporary object.</p>\n\n<p>See this <a href=\"http://coliru.stacked-crooked.com/a/5f602717dcfc50a9\" rel=\"nofollow\">live example</a></p>\n\n<p>You can fix this by either having <code>someMethod()</code> return a reference which you might not want to do or you can take a <code>const</code> reference.</p>\n\n<p>See this <a href=\"http://coliru.stacked-crooked.com/a/c50bf7753f252b63\" rel=\"nofollow\">live example</a> of using a <code>const</code> reference</p>\n\n<p><strong>Edit based on OP changes</strong>:</p>\n\n<p>If you have a function that returns a reference and you call that function in the parameter list of another function then that function will be referencing whatever variable the first function returned.  No copy will be made in this instance.</p>\n"}, {"comments": [{"owner": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "edited": false, "score": 0, "creation_date": 1436976372, "post_id": 31435514, "comment_id": 50841062, "body": "Thanks Drew, I didn&#39;t know that reference implementation was up to the compiler. Your answer is exactly what I was after and the only useful reply by the way."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "edited": false, "score": 0, "creation_date": 1436976580, "post_id": 31435514, "comment_id": 50841196, "body": "@roymcclure I&#39;m glad you found an answer.  It seems that the many other replies <b>were</b> useful in helping you notice that your question had a typo, making it unanswerable.  You probably don&#39;t want a reputation for slighting most of the people who try to help you."}], "tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 2, "last_activity_date": 1436976191, "creation_date": 1436976191, "answer_id": 31435514, "question_id": 31435086, "link": "https://stackoverflow.com/questions/31435086/whats-really-happening-when-we-use-a-method-as-a-parameter-by-reference/31435514#31435514", "title": "What&#39;s really happening when we use a method as a parameter by reference?", "body": "<blockquote>\n  <p>what is exactly being received in anotherMethod()?</p>\n</blockquote>\n\n<p>A <em>reference</em> to that <strong>same variable</strong> is received.</p>\n\n<blockquote>\n  <p>Is it the memory address itself of m_someDataMember from object a\n   or the memory address of a copy of m_someDataMemeber returned by a.someMethod()?</p>\n</blockquote>\n\n<p>That reference <em>may be</em> a memory address, but C++ doesn't dictate <em>how</em> the compiler must implement references.  The entire class could exist in a CPU register as well, in which case it has no memory address.  </p>\n\n<p>But a copy of <code>m_someDataMember</code> is <strong>not</strong> made.  It refers to the same variable.</p>\n"}], "owner": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 31435514, "answer_count": 2, "score": -1, "last_activity_date": 1436977189, "creation_date": 1436975140, "last_edit_date": 1436975722, "question_id": 31435086, "link": "https://stackoverflow.com/questions/31435086/whats-really-happening-when-we-use-a-method-as-a-parameter-by-reference", "title": "What&#39;s really happening when we use a method as a parameter by reference?", "body": "<p>Suppose this:</p>\n\n<pre><code>class A\n{\n    public:\n        A(int x) : m_someDataMember(x) {}\n        ~A() {}\n        int&amp; someMethod(){ return m_someDataMember; }\n\n    private:\n        int m_someDataMember;\n};\n\nclass B\n{\n    public:\n    B(){}\n    ~B(){}\n    void anotherMethod(int&amp; someInt){ /*...*/}\n};\n</code></pre>\n\n<p>Now in main,</p>\n\n<pre><code>int main(/*..*/)\n{\n    A a(5);\n    B b;\n    b.anotherMethod(a.someMethod());\n}\n</code></pre>\n\n<p>My question being, what is exactly being received in <code>anotherMethod()</code>? Is it the memory address itself of <code>m_someDataMember</code> from object a, or the memory address of a copy of <code>m_someDataMemeber</code> returned by <code>a.someMethod()</code>?</p>\n\n<p>EDIT: Corrected typo, missing <code>&amp;</code> in <code>int&amp; someMethod()</code></p>\n"}, {"tags": ["c++", "c", "matlab", "signal-processing"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 11, "creation_date": 1436974992, "post_id": 31434959, "comment_id": 50840075, "body": "I think the best solution is to forget about Matlab, get a good linear algebra library for C++ (like Eigen) and implement the algorithms using that library, rather than looking for C++ analogues for each Matlab functionality."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1436975383, "post_id": 31434959, "comment_id": 50840342, "body": "Agree with @5gon12eder. Presumably you are porting this to C++ for speed, otherwise you could just keep it in matlab. Your best bet is to look at what the matlab code is doing, and think of the best way to implement that in C++ with the help of a good BLAS library. You could probably optimize it to make use of multi-threading and SIMD instructions, if you knew how to implement those and wanted to take the time."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1436975505, "post_id": 31434959, "comment_id": 50840443, "body": "As a gold badge holder in MATLAB, this is one of those times where I will side with the majority and discourage you from porting over MATLAB code.  Use a good C++ linear algebra library (Eigen, Armadillo, etc.) instead.  However, you can take a look at the overall logic in the article, but use those ideas and use the functions from the library to port it yourself - don&#39;t rely on MATLAB coder."}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1436975823, "post_id": 31434959, "comment_id": 50840692, "body": "@RyanP I use C++ because my app need a C++ code, and I also don&#39;t have Matlab license, just use a trial version"}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1436976227, "post_id": 31434959, "comment_id": 50840965, "body": "@5gon12eder thank you. I&#39;ll think about it, but I&#39;m not good at signal algorithm so I try to port code first. Beside Eigen, do you have any suggestions for me? I really need an advice now"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436976265, "post_id": 31434959, "comment_id": 50840990, "body": "Do you want to convert to C or to C++? They&#39;re two different languages; I suggest you pick one."}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1436976397, "post_id": 31434959, "comment_id": 50841077, "body": "@KeithThompson it isn&#39;t a problem. I know the difference between them and I think I can handle it"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1436976561, "post_id": 31434959, "comment_id": 50841185, "body": "Ok, it isn&#39;t a problem for you -- but it makes your question unclear and more difficult to answer."}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 3, "creation_date": 1436976730, "post_id": 31434959, "comment_id": 50841308, "body": "I&#39;ll join the chorus of people recommending that you look for an existing C++ library to do the heavy lifting. I&#39;ve had good luck with Armadillo; its API is very reminiscent of MATLAB. The documentation includes a handy section describing MATLAB constructs and the Armadillo analogs."}, {"owner": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "edited": false, "score": 1, "creation_date": 1436979240, "post_id": 31434959, "comment_id": 50842806, "body": "It depends on what you want to do. If you just want to write an isolated C++ code, I&#39;d use a good C++ matrix library like <a href=\"http://arma.sourceforge.net/\" rel=\"nofollow noreferrer\">Armadillo</a>.  Armadillo uses template meta programming to perform some lazy evaluations and is very fast. You&#39;ll get their nice interface and some pretty good speed. However, if you plan on doing image processing, I&#39;d use OpenCV&#39;s <code>mat</code> instead for better portability with their interface/functions."}, {"owner": {"reputation": 11922, "user_id": 765271, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t2IUe.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/765271/nasser"}, "edited": false, "score": 0, "creation_date": 1436982727, "post_id": 31434959, "comment_id": 50844862, "body": "If you must port the code, then port it to Fortran, not c/c++ :) Fortran is much closer to Matlab, and modern Fortran has all the C++ features in it and much better for matrix/vector operations. I recommend gfortran."}, {"owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "reply_to_user": {"reputation": 4529, "user_id": 1346994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AcJNr.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1346994/justin"}, "edited": false, "score": 0, "creation_date": 1437063408, "post_id": 31434959, "comment_id": 50885817, "body": "@jucestain Thank you, Armadillo looks good for me. Seems it has all things I need. But I have to look at matlab code and port line by line, as I really don&#39;t understand the algorithm behind the matlab code above."}], "answers": [{"comments": [{"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 1, "creation_date": 1436992419, "post_id": 31439926, "comment_id": 50850377, "body": "You probably have a license for the Matlab coder as well."}, {"owner": {"reputation": 356, "user_id": 1474013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSNwY.jpg?s=128&g=1", "display_name": "crbah", "link": "https://stackoverflow.com/users/1474013/crbah"}, "reply_to_user": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1436992639, "post_id": 31439926, "comment_id": 50850508, "body": "@Daniel yes but never used it"}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 0, "creation_date": 1437142228, "post_id": 31439926, "comment_id": 50920720, "body": "Also, there&#39;s been no need to copy and paste the code into a MATLAB Function Block for some time now. You can just call the function on the MATLAB path like any other."}], "tags": [], "owner": {"reputation": 356, "user_id": 1474013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSNwY.jpg?s=128&g=1", "display_name": "crbah", "link": "https://stackoverflow.com/users/1474013/crbah"}, "is_accepted": false, "score": 0, "last_activity_date": 1436990463, "creation_date": 1436990463, "answer_id": 31439926, "question_id": 31434959, "link": "https://stackoverflow.com/questions/31434959/convert-matlab-function-to-c-c/31439926#31439926", "title": "Convert matlab function to C/C++", "body": "<p>I've no experience on matlab coder but we solve this type of problems by using simulink code generator. It may seem weird but works fine. We create a simulink project and add a matlab function block, copy-paste the function there and start code generation.</p>\n\n<p>And of course matlab don't want to show us the key points of their algorithms thats why there are libraries in this method as well.</p>\n"}], "owner": {"reputation": 9545, "user_id": 719212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69211a100c0545e972aac3b398e44a16?s=128&d=identicon&r=PG", "display_name": "R4j", "link": "https://stackoverflow.com/users/719212/r4j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 913, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1436990463, "creation_date": 1436974776, "question_id": 31434959, "link": "https://stackoverflow.com/questions/31434959/convert-matlab-function-to-c-c", "title": "Convert matlab function to C/C++", "body": "<p>My goal is getting the spectrogram result like <a href=\"https://ccrma.stanford.edu/~juhan/super_spec.html\" rel=\"nofollow\">this article</a> in C++. They have example <code>matlab</code> source code and I want to port them into <code>C/C++</code>. Here are 3 <code>matlab</code> functions:</p>\n\n<ul>\n<li><a href=\"http://pastebin.com/7XN7Firx\" rel=\"nofollow\">Blurring function</a></li>\n<li><a href=\"http://pastebin.com/Vtc7P09t\" rel=\"nofollow\">PLCA</a></li>\n<li><a href=\"http://pastebin.com/NBA6wJN3\" rel=\"nofollow\">STFT</a></li>\n</ul>\n\n<p>I tried to use <code>Matlab Coder</code> to generate C code and get result like this:<a href=\"http://pastebin.com/FJv4rTrk\" rel=\"nofollow\">PLCA C</a></p>\n\n<p>There were many problems with this converted code: it depends on many lib and functions, there was some methods can't be ported, and I can't build it.<br><br>\nSo I decide to port code by hand, and then I faced with other problems:</p>\n\n<ul>\n<li>The data type in <code>matlab</code> is very flexible, for example, the array in matlab can add more columns at anytime, it can contain other array or vector, so it make confuse how to convert it into <code>C++</code></li>\n<li>There were some supported methods/operations in <code>matlab</code> and I don't know how to port it into <code>C++</code>. For example, <code>circshift</code>, <code>zeros</code>, divide two matrixes ... \n<br></li>\n</ul>\n\n<p>Is there any suggestion?</p>\n"}, {"tags": ["c++", "oop", "while-loop", "switch-statement"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436975003, "post_id": 31434923, "comment_id": 50840083, "body": "What is <code>selection</code>? What type is it? And why compare with magic numbers instead of using e.g. <a href=\"http://en.cppreference.com/w/cpp/string/byte/isdigit\" rel=\"nofollow noreferrer\"><code>std::isdigit</code></a> to make sure you have a digit? Or the very least use proper character literals like e.g. <code>&#39;0&#39;</code> instead of the cryptic <code>48</code>."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1436975068, "post_id": 31434923, "comment_id": 50840132, "body": "Entering a negative number will give you some clues."}, {"owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436979628, "post_id": 31434923, "comment_id": 50843030, "body": "@JoachimPileborg selection is a <code>char</code> and the number isn&#39;t magic. its the char code for the users menu selection."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436979920, "post_id": 31434923, "comment_id": 50843197, "body": "A &quot;magic number&quot; is an <a href=\"https://en.wikipedia.org/wiki/Magic_number_%28programming%29#Unnamed_numerical_constants\" rel=\"nofollow noreferrer\">&quot;Unnamed numerical constant&quot;</a>, and for readers of your code is just a number without any special meaning. A character literal <code>&#39;0&#39;</code> have a meaning, gives some context, and is always portable no matter the character encoding, the &quot;magic number&quot; <code>48</code> could mean anything, and will not work with encoding that do not derive from ASCII."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436980045, "post_id": 31434923, "comment_id": 50843275, "body": "Also, since <code>selection</code> is a character your input validation function will not work as expected, the second input operation will read the newline you entered for the first input operation."}, {"owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1436982816, "post_id": 31434923, "comment_id": 50844916, "body": "I&#39;m not sure I follow @JoachimPileborg. Are you saying the input for <code>in_yob</code> will read the newline entered for <code>selection</code> or that it will read the line entered for <code>in_genre</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "edited": false, "score": 0, "creation_date": 1436979698, "post_id": 31434992, "comment_id": 50843065, "body": "I tried this. Same result, infinite loop of &quot;Enter a positive integer for year of birth: &quot;"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "edited": false, "score": 0, "creation_date": 1436980373, "post_id": 31434992, "comment_id": 50843454, "body": "Code changed. Now works. Might as well be explicit that you want cin to be good. Also you want to check for in_yob to be invalid."}, {"owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "edited": false, "score": 0, "creation_date": 1436982728, "post_id": 31434992, "comment_id": 50844863, "body": "Now it just runs the cout for the remainder of the switch case taking no inputs, pulls up the menu and then runs the default case error."}, {"owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "edited": false, "score": 0, "creation_date": 1436983623, "post_id": 31434992, "comment_id": 50845416, "body": "if you run it inside of a switch as above it doesn&#39;t. That&#39;s why I&#39;m confused as your code indeed works outside of a switch.  See <a href=\"http://cpp.sh/2dgb\" rel=\"nofollow noreferrer\">c++ shell example</a>"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "edited": false, "score": 0, "creation_date": 1436988505, "post_id": 31434992, "comment_id": 50848160, "body": "Cleared the input stream on error. See <a href=\"http://stackoverflow.com/questions/5131647/why-would-we-call-cin-clear-and-cin-ignore-after-reading-input\" title=\"why would we call cin clear and cin ignore after reading input\">stackoverflow.com/questions/5131647/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1436988462, "last_edit_date": 1436988462, "creation_date": 1436974875, "answer_id": 31434992, "question_id": 31434923, "link": "https://stackoverflow.com/questions/31434923/using-a-while-loop-to-check-for-input-errors-within-a-switch-case/31434992#31434992", "title": "Using a while loop to check for input errors within a switch case", "body": "<p>You needed to clear the input stream.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nint in_yob = 0;\nint main()\n{\n    while(std::cin.good() &amp;&amp; in_yob &lt; 1){\n        std::cin.clear();\n        std::cout &lt;&lt; \"Enter a positive enter for year of birth: \";\n        if( !(std::cin &gt;&gt; in_yob) ) {\n            std::cin.clear();\n            std::cin.ignore(10000,'\\n');\n        }\n    }\n    std::cout &lt;&lt; \"YOB \" &lt;&lt; in_yob &lt;&lt; std::endl;\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "edited": false, "score": 0, "creation_date": 1436984193, "post_id": 31437816, "comment_id": 50845756, "body": "Oh now i see what you meant. I&#39;m still learning this but that is quite obvious and i feel dumb. How else could the following input request post on a newline save having a newline after the input character. Thank you."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1436983389, "creation_date": 1436983389, "answer_id": 31437816, "question_id": 31434923, "link": "https://stackoverflow.com/questions/31434923/using-a-while-loop-to-check-for-input-errors-within-a-switch-case/31437816#31437816", "title": "Using a while loop to check for input errors within a switch case", "body": "<p><sub>[To explain my self with more space and better formatting better than in a comment I post this as an answer instead as of a comment.]</sub></p>\n\n<p>When you enter input, like for example</p>\n\n<pre>\n1\n</pre>\n\n<p>the input buffer actually contains <em>two</em> characters, firs the digit <code>'1'</code> and then the newline <code>'\\n'</code>.</p>\n\n<p>When you read a single character, the input operation extracts the first character, the digit, and writes it to your variable.</p>\n\n<p>If you then read another character, it will read the newline, and not whatever comes after.</p>\n\n<p>There is a trick to \"ignore\" characters until, for example, a newline, and that is done by using the <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow\"><code>std::istream::ignore</code></a>, and if you follow the link to the reference you will see a very good example on how to ignore anything up to and including the newline.</p>\n\n<p>So in your case it's not enough to just call <code>clear</code> you need to call <code>ignore</code> as well in your input validation loop. And if you continue to read single characters, you need to call <code>ignore</code> before that as well.</p>\n"}], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 31437816, "answer_count": 2, "score": 0, "last_activity_date": 1436988462, "creation_date": 1436974679, "last_edit_date": 1436982433, "question_id": 31434923, "link": "https://stackoverflow.com/questions/31434923/using-a-while-loop-to-check-for-input-errors-within-a-switch-case", "title": "Using a while loop to check for input errors within a switch case", "body": "<p>I have a switch in which one case asks the user for several inputs to use for constructing a class object. One of these inputs should be in the form of a number. If a number is not entered it breaks the switch and ends up terminating the program. I want to set up a while(){} condition so that if a non integer is entered it will prompt the user to enter an integer and then continue on with the program.</p>\n\n<pre><code>int main(){\n  int in_yob, ranking;\n  string in_first_name, in_last_name, in_genre, in_fact, last_name, in_composer;\n  char selection, choice;\n    do {\n      DisplayMenu();\n      cin &gt;&gt; selection;\n      cout &lt;&lt; endl;\n      while (!cin || selection &lt; 48 || selection &gt; 53){\n        cin.clear();\n        cout &lt;&lt; \"Please make a valid selection\" &lt;&lt; endl;\n        DisplayMenu();\n        cin &gt;&gt; selection;\n      }\n      switch (selection) {\n        case 49 : {\n            cout &lt;&lt; \"First Name: \";\n            cin &gt;&gt; in_first_name;\n            cout &lt;&lt; \"Last Name: \";\n            cin &gt;&gt; in_last_name;\n            cout &lt;&lt; \"Genre: \";\n            cin &gt;&gt; in_genre;\n            cout &lt;&lt; \"Year of Birth: \";\n            cin &gt;&gt; in_yob;\n            cout &lt;&lt; \"Fact: \";\n            cin &gt;&gt; in_fact;\n            last_name = in_last_name;\n            transform(last_name.begin(), last_name.end(), last_name.begin(), ::tolower);\n            Composer&amp; last_name = myDB.AddComposer(in_first_name, in_last_name,\n                                                        in_genre, in_yob, in_fact);\n            cin.clear();\n        }   break;\n...\n        default: \n            cout &lt;&lt; \"Please make a valid selection\" &lt;&lt; endl;\n      }\n  } while (selection != 48);\n}\n</code></pre>\n\n<p>I have tried inserting a while loop after <code>cin &gt;&gt; in_yob;</code> as:</p>\n\n<pre><code>while(!cin || in_yob &gt; 1){\n    cin.clear();\n    cout &lt;&lt; \"Enter a positive enter for year of birth: \";\n    cin &gt;&gt; in_yob;\n}\n</code></pre>\n\n<p>but the result is an infinite loop of \"Enter a positive enter for year of birth: \". I know this construct for error checking works outside of a switch case so what is the reason that within a switch case i'm getting this result? Also how would you go about fixing this so that I can check for and prevent an input error?  Thanks.</p>\n"}, {"tags": ["javascript", "c++", "chromium-embedded"], "comments": [{"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1437007489, "post_id": 31434827, "comment_id": 50856135, "body": "Where did you get that information from? The same <code>Browser&#47;Frame</code> concepts apply regardless of <code>OSR</code> rendering. Under windows I&#39;d generally advise you use <code>CefSettings.multi_threaded_message_loop</code>, then <code>CEF</code> will handle that for you. (Only works on <code>Windows</code>)"}, {"owner": {"reputation": 685, "user_id": 63069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82d1ad548a1d750b0a13950afa9bba94?s=128&d=identicon&r=PG", "display_name": "PhysicalEd", "link": "https://stackoverflow.com/users/63069/physicaled"}, "edited": false, "score": 1, "creation_date": 1437080072, "post_id": 31434827, "comment_id": 50894954, "body": "If you just want the V8 Javascript engine, perhaps you&#39;d be better off running it alone instead of from within Chromium via CEF?  This might help: <a href=\"http://stackoverflow.com/questions/1802478/running-v8-javascript-engine-standalone\" title=\"running v8 javascript engine standalone\">stackoverflow.com/questions/1802478/&hellip;</a>"}], "owner": {"reputation": 657, "user_id": 1041999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd447e89ad88b78c7c9e30ccf56a41c?s=128&d=identicon&r=PG", "display_name": "Kevin Hopps", "link": "https://stackoverflow.com/users/1041999/kevin-hopps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 819, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1436975322, "creation_date": 1436974459, "last_edit_date": 1436975322, "question_id": 31434827, "link": "https://stackoverflow.com/questions/31434827/cef-headless-how-to-get-a-javascript-context", "title": "Cef headless: How to get a JavaScript context?", "body": "<p>I am trying to create a Cef C++ Windows app that has no windows but can execute JavaScript. How can I obtain a JavaScript context if I'm running Cef headless in this way? I know I can get a context from a frame, and a frame from a browser, but if I have no window then I have no browser.</p>\n\n<p>Running normally (with a window), I see that my OnAfterCreated(CefRefPtr&lt;CefBrowser&gt;) is called only after I invoke CefRunMessageLoop(), which I am trying to avoid. Any suggestions?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "google-chrome-extension", "google-nativeclient"], "answers": [{"tags": [], "owner": {"reputation": 6045, "user_id": 3983557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01A0D.jpg?s=128&g=1", "display_name": "JF Bastien", "link": "https://stackoverflow.com/users/3983557/jf-bastien"}, "is_accepted": true, "score": 1, "last_activity_date": 1436975710, "creation_date": 1436975710, "answer_id": 31435331, "question_id": 31434794, "link": "https://stackoverflow.com/questions/31434794/pnacl-using-winscard-lib/31435331#31435331", "title": "PNACL \u2013 using winscard lib", "body": "<p><code>windows.h</code> is a Windows-specific header. PNaCl doesn't support such headers because it has to be portable and work across operating systems while securing users from malicious / buggy <code>.pexe</code> files.</p>\n\n<p>winscard itself is Windows specific, and will not work either. There are <a href=\"http://www.w3.org/2012/webcrypto/webcrypto-next-workshop/papers/W3C_HID_Global_Submission.html\" rel=\"nofollow\">proposals</a> to make smart card access from the browser possible. I recommend looking there first. The answer to your question: this cannot work as-is in PNaCl.</p>\n\n<p>You can, however, look into using <a href=\"https://developer.chrome.com/extensions/nativeMessaging\" rel=\"nofollow\">native messaging</a> if its restrictions suit your needs.</p>\n"}], "owner": {"reputation": 33, "user_id": 1117450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f1043c321608c3b9c319cdd5abfb5473?s=128&d=identicon&r=PG", "display_name": "AGDev", "link": "https://stackoverflow.com/users/1117450/agdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 31435331, "answer_count": 1, "score": 0, "last_activity_date": 1436975710, "creation_date": 1436974389, "question_id": 31434794, "link": "https://stackoverflow.com/questions/31434794/pnacl-using-winscard-lib", "title": "PNACL \u2013 using winscard lib", "body": "<p>I\u2019m developing Portable Native Client application which works with the smart card. For this purpose, I want to include winscard library to my project. \nCurrently I failed at the stage of compilation.</p>\n\n<p>I added a line in my source file</p>\n\n<pre><code>#include &lt;winscard.h&gt;\n</code></pre>\n\n<p>and the path in Additional Include Directories</p>\n\n<blockquote>\n  <p>C: \\ Program Files (x86) \\ Microsoft SDKs \\ Windows \\ v7.1A \\</p>\n</blockquote>\n\n<p>I received an error</p>\n\n<blockquote>\n  <p>C: \\ Program Files (x86) \\ Microsoft SDKs \\ Windows \\ v7.1A \\ Include\n  \\ windows.h (151,10): fatal error: 'excpt.h' file not found</p>\n</blockquote>\n\n<p>Then I added a path to excpt.h</p>\n\n<blockquote>\n  <p>C: \\ Program Files (x86) \\ Microsoft Visual Studio 10.0 \\ VC \\ include</p>\n</blockquote>\n\n<p>and I received the following error</p>\n\n<blockquote>\n  <p>1>  chromesign.cc 1> \n  C:\\Dev\\Lib\\nacl_sdk\\vs_addin\\examples\\chromesign\\In file included from\n  chromesign.cc(27): 1> \n  C:\\Dev\\Lib\\nacl_sdk\\pepper_43\\include\\ppapi\\cpp\\instance.h(11):'In\n  file included from C'  1>  C:\\Program Files (x86)\\Microsoft Visual\n  Studio 10.0\\VC\\include\\map(6):'In file included from C'  1> \n  C:\\Program Files (x86)\\Microsoft Visual Studio\n  10.0\\VC\\include\\xtree(6):'In file included from C'  1>  C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\xfunctional(6):'In\n  file included from C'  1>  C:\\Program Files (x86)\\Microsoft Visual\n  Studio 10.0\\VC\\include\\cstdlib(5):'In file included from C'  1> \n  C:\\Program Files (x86)\\Microsoft Visual Studio\n  10.0\\VC\\include\\yvals.h(6):'In file included from C'  1>C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\crtdefs.h(44,2):\n  error : ERROR: Only Win32 target supported! 1>NACLCOMPILE : #error\n  error : Only Win32 target supported!</p>\n</blockquote>\n\n<p>Does anyone know how to fix this error or another way to use winscard lib in PNACL application? </p>\n"}, {"tags": ["c++", "stl", "stdlist"], "answers": [{"comments": [{"owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "edited": false, "score": 0, "creation_date": 1436975009, "post_id": 31435014, "comment_id": 50840087, "body": "I guessed that. But in C++98 size() is linea. why is splice linear as well?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "edited": false, "score": 0, "creation_date": 1436975803, "post_id": 31435014, "comment_id": 50840677, "body": "@IssamT. I don&#39;t have access to the pure C++98 standard, but in its 2003 version, <code>size()</code> is marked as &quot;should have constant complexity.&quot;"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1436974945, "creation_date": 1436974945, "answer_id": 31435014, "question_id": 31434658, "link": "https://stackoverflow.com/questions/31434658/splitting-and-merging-stdlist-in-c/31435014#31435014", "title": "splitting and merging std::list in C++", "body": "<p>That is a side-effect (some say a rather unfortunate one) of requiring <code>size()</code> to be constant-time. It is impossible to have both a constant-time <code>size()</code> and a constant-time <code>splice()</code> of sublists. Since all standard containers are required to have constant-time <code>size()</code>, this necessarily requires the sublist <code>splice()</code> to be linear.</p>\n"}], "owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 31435014, "answer_count": 1, "score": 1, "last_activity_date": 1436974945, "creation_date": 1436974048, "last_edit_date": 1436974623, "question_id": 31434658, "link": "https://stackoverflow.com/questions/31434658/splitting-and-merging-stdlist-in-c", "title": "splitting and merging std::list in C++", "body": "<p>Why <code>std::list</code>s can not be split/merged in constant time? Aren't they just linked lists?</p>\n\n<p>I m sure I am missing something. Can you please give an insight on the reasons behind that?</p>\n"}, {"tags": ["c++", "windows", "sockets", "visual-studio-2012", "static-linking"], "comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1436974474, "post_id": 31434556, "comment_id": 50839684, "body": "What can we do without a minimum code that reproduce the problem?"}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "reply_to_user": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1436974646, "post_id": 31434556, "comment_id": 50839814, "body": "@Jepessen there is not code, i just cannot build project if it does <code>#include &quot;udt.h&quot;</code>. You can follow the link, download archive, untar, open in visual studio and change <code>udt</code> build type to <code>static library</code>.Then remove <code>dllimport&#47;dllexport</code> expressions (there two, can be easily found) and should be just <code>#define UDT_API</code>. Then link udt to other empty project and do <code>include &quot;udt.h&quot;</code> in it.... That is what i did"}, {"owner": {"reputation": 1264, "user_id": 805509, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cebafd2b45bd29d976256e4e0e83104?s=128&d=identicon&r=PG", "display_name": "PuerNoctis", "link": "https://stackoverflow.com/users/805509/puernoctis"}, "edited": false, "score": 1, "creation_date": 1436974798, "post_id": 31434556, "comment_id": 50839919, "body": "I remember something about defining <code>WIN32_LEAN_AND_MEAN</code> before including the <code>windows.h</code> as it already includes <code>winsock</code> and there seems to be problems otherwise. Is this such a scenario? I don&#39;t know at the moment hence this is a comment and no answer..."}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "reply_to_user": {"reputation": 1264, "user_id": 805509, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cebafd2b45bd29d976256e4e0e83104?s=128&d=identicon&r=PG", "display_name": "PuerNoctis", "link": "https://stackoverflow.com/users/805509/puernoctis"}, "edited": false, "score": 0, "creation_date": 1436975348, "post_id": 31434556, "comment_id": 50840316, "body": "@PuerNoctis you&#39;ve pointed me to a right direction, now i can compile both my projects, but i cannot write UDT code because i cannot include winsock stuff to my code. If i type <code>#include &lt;winsock2.h&gt;</code> or    <code>#include &lt;ws2tcpip.h&gt;</code>    or <code>#include &lt;wspiapi.h&gt;</code>, i get same erros"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1436975740, "post_id": 31434556, "comment_id": 50840635, "body": "Windows is notorious for being picky about the order of include files.  Bad design in my opinion."}], "answers": [{"comments": [{"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1436975554, "post_id": 31435157, "comment_id": 50840488, "body": "Have just read <a href=\"http://stackoverflow.com/questions/22517036/socket-errors-cant-get-functions-in-winsock2-h\" title=\"socket errors cant get functions in winsock2 h\">stackoverflow.com/questions/22517036/&hellip;</a> and no, that does not help..If i try to include any winsock header, i get 159 errors (like in linked question)"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1436975651, "post_id": 31435157, "comment_id": 50840569, "body": "Did you check with <code>&#47;P</code>?"}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1436975854, "post_id": 31435157, "comment_id": 50840711, "body": "UDT or my project? Where and <i>what</i> should i watch after build with /P?"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1436976220, "post_id": 31435157, "comment_id": 50840961, "body": "Use <code>&#47;P</code> for one (any you like) of the files that can&#39;t compile."}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1436976888, "post_id": 31435157, "comment_id": 50841406, "body": "I just get this stupid another error. <a href=\"http://pastebin.com/6V5RdjQV\" rel=\"nofollow noreferrer\">pastebin.com/6V5RdjQV</a> I do not understand what does it mean."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1436977615, "post_id": 31435157, "comment_id": 50841810, "body": "That&#39;s not so bad. This means that the linker can&#39;t find the Output file. This is expected, as <code>&#47;P</code> only write the preprocessed file but does not compile. Now look into the file that was written by the Compiler (file.i)."}], "tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": true, "score": 8, "last_activity_date": 1436975328, "creation_date": 1436975328, "answer_id": 31435157, "question_id": 31434556, "link": "https://stackoverflow.com/questions/31434556/error-c2011-sockaddr-struct-type-redefinition-see-declaration-of-sockad/31435157#31435157", "title": "error C2011: &#39;sockaddr&#39; : &#39;struct&#39; type redefinition. see declaration of &#39;sockaddr&#39;", "body": "<p>If you include winsock.h and winsock2.h make sure that you include winsock2.h first. If the includes are not so obvious you can check cpp files in question if you <a href=\"https://msdn.microsoft.com/en-us/library/8z9z0bx6.aspx\" rel=\"noreferrer\">compile them with /P</a> and walk through the generated preprocessor output file.</p>\n"}, {"tags": [], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "is_accepted": false, "score": 1, "last_activity_date": 1436988927, "creation_date": 1436988927, "answer_id": 31439505, "question_id": 31434556, "link": "https://stackoverflow.com/questions/31434556/error-c2011-sockaddr-struct-type-redefinition-see-declaration-of-sockad/31439505#31439505", "title": "error C2011: &#39;sockaddr&#39; : &#39;struct&#39; type redefinition. see declaration of &#39;sockaddr&#39;", "body": "<p>Just to describe what problem was... Seems like i shouldnt include <code>udt.h</code> before any <code>winsock</code> headers. That's the fix:</p>\n\n<pre><code> #ifndef WIN32\n   #include &lt;unistd.h&gt;\n   #include &lt;cstdlib&gt;\n   #include &lt;cstring&gt;\n   #include &lt;netdb.h&gt;\n   #else\n   #define WIN32_LEAN_AND_MEAN\n    #include &lt;WinSock2.h&gt;\n    #include &lt;WS2tcpip.h&gt;\n    #include &lt;Windows.h&gt;\n   #endif\n\n   #include &lt;udt.h&gt;\n   #include &lt;singleton.h&gt;\n   #include &lt;excassert.h&gt;\n   #include &lt;SharedUtility.h&gt;\n\n   #ifndef WIN32\n   void* recvdata(void*);\n   #else\n   DWORD WINAPI recvdata(LPVOID);\n   #endif\n</code></pre>\n"}], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12113, "favorite_count": 1, "closed_date": 1467394404, "accepted_answer_id": 31435157, "answer_count": 2, "score": 4, "last_activity_date": 1436988927, "creation_date": 1436973799, "last_edit_date": 1436974484, "question_id": 31434556, "link": "https://stackoverflow.com/questions/31434556/error-c2011-sockaddr-struct-type-redefinition-see-declaration-of-sockad", "closed_reason": "Duplicate", "title": "error C2011: &#39;sockaddr&#39; : &#39;struct&#39; type redefinition. see declaration of &#39;sockaddr&#39;", "body": "<p>I use Visual Studio 2012 and trying to get static library <a href=\"http://udt.sourceforge.net/\" rel=\"nofollow\">UDT</a> get to work. Unfortunately, i cannot compile project that links UDT lib to itself, i get 159 strange errors about type or macro redefinitions in windows SDK headers.</p>\n\n<p><code>c:\\program files\\windows kits\\8.0\\include\\shared\\ws2def.h(96): warning C4005: 'AF_IPX' : macro redefinition\n2&gt;          c:\\program files\\windows kits\\8.0\\include\\um\\winsock.h(452) : see previous definition of 'AF_IPX'\n2&gt;c:\\program files\\windows kits\\8.0\\include\\shared\\ws2def.h(136): warning C4005: 'AF_MAX' : macro redefinition\n2&gt;          c:\\program files\\windows kits\\8.0\\include\\um\\winsock.h(471) : see previous definition of 'AF_MAX'\n2&gt;c:\\program files\\windows kits\\8.0\\include\\shared\\ws2def.h(173): warning C4005: 'SO_DONTLINGER' : macro redefinition\n2&gt;          c:\\program files\\windows kits\\8.0\\include\\um\\winsock.h(394) : see previous definition of 'SO_DONTLINGER'\n2&gt;c:\\program files\\windows kits\\8.0\\include\\shared\\ws2def.h(217): error C2011: 'sockaddr' : 'struct' type redefinition\n2&gt;          c:\\program files\\windows kits\\8.0\\include\\um\\winsock.h(477) : see declaration of 'sockaddr'</code></p>\n\n<p>Previously removed some code which was defining dllexport/dllimport for each UDT function:</p>\n\n<pre><code>#define UDT_API // no dllimport/export\n</code></pre>\n\n<p>I checked that library always use #ifdef to check if file is already included.\nAnd this error:</p>\n\n<p><code>windows kits\\8.0\\include\\um\\ws2tcpip.h(703): error C3861: 'WSASetLastError': identifier not found</code></p>\n\n<p>May reason be <code>const</code> keyword in that expression (somewhere inside udt):</p>\n\n<pre><code>UDT_API int bind(UDTSOCKET u, const struct sockaddr* name, int namelen);\n</code></pre>\n\n<p>What iam missing?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1436973618, "post_id": 31434420, "comment_id": 50839075, "body": "<code>Container cont(double(20)); Container cont(int(20));</code> etc etc..."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1436973723, "post_id": 31434420, "comment_id": 50839135, "body": "<code>Container(int o) : { &#47;* do same stuff as for long long *&#47; }</code> also don&#39;t pass ints and floats by const reference - that&#39;s at most less efficient"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1436974097, "post_id": 31434420, "comment_id": 50839377, "body": "I like how your simple code comments are completely lying..."}, {"owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436974170, "post_id": 31434420, "comment_id": 50839454, "body": "What do you mean by that @LightnessRacesinOrbit?"}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1436974251, "post_id": 31434420, "comment_id": 50839519, "body": "<code>Container cont(20.0)</code> will resolve the ambiguity, any way I think it&#39;s better to remove the <code>int</code> overload of the constructor as the float will do fine except if you don&#39;t want so, what&#39;s your goal of this class ?"}, {"owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1436974741, "post_id": 31434420, "comment_id": 50839873, "body": "It is sort of a container which may hold an <code>int</code>, a <code>float</code> or a <code>string</code> value. Merely for educational reasons, than for real world problems. Therefore leaving the <code>int</code> constructor out an always calling <code>Container cont(20.0)</code> would not satisfy me, there muste be a way to do this..."}, {"owner": {"reputation": 282, "user_id": 1134947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de2c1dc6cc067b25af0ea454cb8b1d73?s=128&d=identicon&r=PG", "display_name": "Www", "link": "https://stackoverflow.com/users/1134947/www"}, "edited": false, "score": 0, "creation_date": 1436974939, "post_id": 31434420, "comment_id": 50840036, "body": "Alternatively for long long: <code>Container cont(20LL)</code>"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436975004, "post_id": 31434420, "comment_id": 50840084, "body": "@M&#228;xM&#252;ller I think that @LightnessRacesInOrbit is referring to the fact that your comments say things like <code>&#47;&#47;construct the container with an int</code> when, and this is obviously compiler dependent, a <code>long long</code> doesn&#39;t always equal an <code>int</code>. In fact in MSVC it is equivalent to <code>__int64</code>. Or <code>long double</code> which is not a <code>float</code> as the comment says."}, {"owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1436975443, "post_id": 31434420, "comment_id": 50840386, "body": "I see that&#39;s a bit ambiguous itself, but as far as I understand it a <code>long long</code> is an integer with a guaranteed minimum width of <code>64 bits</code> and a <code>long double</code> is a float with double precision. I will edit the code though and please correct me if I got that wrong!"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1436975647, "post_id": 31434420, "comment_id": 50840563, "body": "@M&#228;xM&#252;ller I see where you are going with that... but <code>int</code> is actually a data type as well, and so is <code>float</code>. So when you use those, people will assume you are referencing the primitive type directly. For instance, for MSVC 2013: <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.120%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.120%29.aspx</a>"}, {"owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1436975810, "post_id": 31434420, "comment_id": 50840680, "body": "@RyanP Yeah I see what the problem is with my terminology (kind of ironic talking about ambiguity). Anyways, I edited the question to resolve this misunderstanding. Thanks for clarifying this."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1436976643, "post_id": 31434420, "comment_id": 50841247, "body": "Yes, you have a constructor taking a <code>long long</code> documented as taking an <code>int</code>, and a constructor taking a <code>long double</code> documented as taking a <code>float</code>, lol"}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1436974193, "post_id": 31434529, "comment_id": 50839477, "body": "Thanks, I will look into that."}], "tags": [], "owner": {"reputation": 2084, "user_id": 4436434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76Myg.png?s=128&g=1", "display_name": "BrunoLevy", "link": "https://stackoverflow.com/users/4436434/brunolevy"}, "is_accepted": false, "score": 0, "last_activity_date": 1436973742, "creation_date": 1436973742, "answer_id": 31434529, "question_id": 31434420, "link": "https://stackoverflow.com/questions/31434420/c-how-to-resolve-function-overload-ambiguity/31434529#31434529", "title": "C++ - how to resolve function overload ambiguity", "body": "<p>You may use a constructor templated by the type:</p>\n\n<pre><code>class Container {\n    template &lt;class T&gt; Container (const T&amp; rhs);\n};\n</code></pre>\n\n<p>See the implementation of \"any\" in Boost for an example similar to what you want to do:\n<a href=\"http://www.boost.org/doc/libs/1_58_0/doc/html/boost/any.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_58_0/doc/html/boost/any.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 282, "user_id": 1134947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de2c1dc6cc067b25af0ea454cb8b1d73?s=128&d=identicon&r=PG", "display_name": "Www", "link": "https://stackoverflow.com/users/1134947/www"}, "edited": false, "score": 0, "creation_date": 1436974791, "post_id": 31434618, "comment_id": 50839914, "body": "Alternatively casting before passing to the constructor should work: <code>Container cont(static_cast&lt;long long&gt;(20));</code>"}, {"owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1436975559, "post_id": 31434618, "comment_id": 50840491, "body": "Casting right before indeed works, but I would like it if that would not be necessary."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1436973962, "creation_date": 1436973962, "answer_id": 31434618, "question_id": 31434420, "link": "https://stackoverflow.com/questions/31434420/c-how-to-resolve-function-overload-ambiguity/31434618#31434618", "title": "C++ - how to resolve function overload ambiguity", "body": "<p>Just add a constructor for <code>int</code> that disambiguates it:</p>\n\n<pre><code>Container(int i)\n: Container(static_cast&lt;long long&gt;(i)) // or whichever version you want\n                                       // to call\n{ }\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 2538763, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/caa98f9b1be13df881e254e0f2eac578?s=128&d=identicon&r=PG", "display_name": "M&#228;x M&#252;ller", "link": "https://stackoverflow.com/users/2538763/m%c3%a4x-m%c3%bcller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1436975485, "creation_date": 1436973487, "last_edit_date": 1436975485, "question_id": 31434420, "link": "https://stackoverflow.com/questions/31434420/c-how-to-resolve-function-overload-ambiguity", "title": "C++ - how to resolve function overload ambiguity", "body": "<p>consider following simple class (please no debates about usefulness):</p>\n\n<pre><code>class Container\n{\n    public:\n        Container(const long long &amp;val); //construct the container with a long long\n        Container(const long double &amp;val); //construct the container with a long double\n        Container(const std::string &amp;val); //construct the container with a string\n        Container(const Container &amp;val); //copy constructor, implemented as copy and swap\n\n        //explicit conversions are also included for other data types\n        explicit operator long long() const; //explicit conversion to long long\n\n    private:\n        int dataType;\n        void *data;\n};\n</code></pre>\n\n<p>And to construct the object, I would call:</p>\n\n<pre><code>Container cont(20); //or\nContainer cont2(\"some string\");\n</code></pre>\n\n<p>But the compiler tells me he cannot resolve the ambiguous constructor call for int.</p>\n\n<p>This leads me to my question, what is the best and cleanest way to resolve this ambiguity.<br>\nShould I use some sort of templatized constructor looking somewhat like this:</p>\n\n<pre><code>Container&lt;int&gt; cont(20);\n</code></pre>\n\n<p>Or use an explicit cast or a dummy parameter?</p>\n\n<p>The templatized way looks like a compromise I could accept, though I'm sure the actual call would look different.</p>\n\n<p>Well thanks for any insights!</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates", "dynamic-cast", "perfect-forwarding"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1436973807, "post_id": 31434403, "comment_id": 50839190, "body": "To be clear - will you actually also instantiate <code>Derived&lt;int, int&amp;&gt;</code>? What should <code>b-&gt;doCast(10, 20);</code> do in such case?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436974177, "post_id": 31434403, "comment_id": 50839459, "body": "Or really, what should <code>b-&gt;doCast(x);</code> do if both <code>Derived&lt;int&gt;</code> and <code>Derived&lt;int&amp;&gt;</code> are possible?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436974415, "post_id": 31434403, "comment_id": 50839633, "body": "Ok, so they can be references to const. Same question stands, <code>Derived&lt;int&gt;</code> or <code>Derived&lt;int const&amp;&gt;</code>?"}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 0, "creation_date": 1436974519, "post_id": 31434403, "comment_id": 50839717, "body": "If <code>this</code> class is <code>int</code> or <code>const int &amp;</code> it should do both castings fine."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436975034, "post_id": 31434403, "comment_id": 50840102, "body": "@LoPiTaL So you want it do, potentially <code>2^N</code> different casts?"}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436975260, "post_id": 31434403, "comment_id": 50840261, "body": "@Barry No, I want the expression to succeed whether it receives a reference or not. I have simplified the description of the problem, and once this basic case is working, we will discuss other more complex types."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436976088, "post_id": 31434403, "comment_id": 50840864, "body": "@LoPiTaL Well if <code>Derived</code> doesn&#39;t take references, just have <code>doCast</code> not take references."}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1436976458, "post_id": 31434403, "comment_id": 50841128, "body": "@Barry Ok, without references it works fine. Just removing the &amp;&amp; of the doCast parameters and it dynamic_cast&#39;ed fine. Now, lets go back again to the const &amp; case, where I can receive a reference"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1436976603, "post_id": 31434403, "comment_id": 50841215, "body": "@LoPiTaL You&#39;re not understanding the issue. Let&#39;s say <code>doCast</code> gets called with 5 arguments of types <code>A</code>, <code>B</code>, ..., <code>E</code>. That means we&#39;d have to potentially check against {<code>A</code>, <code>A const&amp;</code>} x {<code>B</code>, <code>B const&amp;</code>} x {<code>C</code>, <code>C const&amp;</code>} x ... That&#39;s 32 potential <code>Derived</code> types!"}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 0, "creation_date": 1436977687, "post_id": 31434403, "comment_id": 50841850, "body": "Ok, I see the problem. Then I guess that my best shot is to go without references, and pay a little performance penalty. Thanks for your help"}], "answers": [{"comments": [{"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 0, "creation_date": 1437038338, "post_id": 31436460, "comment_id": 50868058, "body": "It works like a charm! Thank you very much! Just a side note, since I am not using c++14, I cannot use the type <code>std::remove_reference_t</code>, so in order to get the typename correct, the definition should be as follows: <code>Derived&lt;typename std::remove_reference&lt;P&gt;::type... &gt;*</code>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1436979179, "creation_date": 1436979179, "answer_id": 31436460, "question_id": 31434403, "link": "https://stackoverflow.com/questions/31434403/how-to-dynamic-cast-a-variadic-template-with-mismatch-reference-modifier-in-para/31436460#31436460", "title": "How to dynamic_cast a variadic template with mismatch reference modifier in parameters?", "body": "<p>Just moving my comments to an answer. In the typical case, if both <code>Derived&lt;int&gt;</code> and <code>Derived&lt;int const&amp;&gt;</code> are allowed as types, <code>Base::doCast</code> would have to perform potentially two different casts per argument type, or <code>2^N</code> total casts. This is unfeasible. </p>\n\n<p>However, what you can do instead is (1) require that <code>Derived</code>'s template arguments not be references and (2) have it take its arguments by reference. So we just remove the references on all of the <code>P</code>s:</p>\n\n<pre><code>template &lt;typename... P&gt;\nvoid doCast(P&amp;&amp;... p) {\n    if (auto res = dynamic_cast&lt;Derived&lt;std::remove_reference_t&lt;P&gt;...&gt;*&gt;(this)) {\n        std::cout &lt;&lt; \"Success.\" &lt;&lt; std::endl;\n        res-&gt;doSomethingWithP(p...); // NOT forward\n    }\n    else {\n        std::cout &lt;&lt; \"Failed.\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>And take by reference on the other side so that we don't incur the extra copy:</p>\n\n<pre><code>template &lt;typename... P&gt;\nstruct Derived: public Base\n{\n    void doSomethingWithP(P&amp;... ) {\n        /*Whatever, doesn't matter*/\n    }\n};\n</code></pre>\n\n<p>However, this still lets us make <code>Derived&lt;int&amp;&gt;</code>, which will <em>never</em> work in this model. So let's explicitly disallow that. First some boilerplate:</p>\n\n<pre><code>template&lt;bool...&gt; struct bool_pack;\n\ntemplate&lt;bool f, bool... bs&gt; \nusing all_same = std::is_same&lt;bool_pack&lt;bs..., f&gt;, bool_pack&lt;f, bs...&gt;&gt;;\n\ntemplate &lt;bool... bs&gt;\nusing none = all_same&lt;false, bs...&gt;;\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>template &lt;typename... P&gt;\nstruct Derived: public Base\n{\n    static_assert(none&lt;std::is_reference&lt;P&gt;::value...&gt;::value, \n                  \"Can't make Derived with references\");\n    ...\n};\n</code></pre>\n"}], "owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 31436460, "answer_count": 1, "score": 2, "last_activity_date": 1436979179, "creation_date": 1436973441, "last_edit_date": 1436978822, "question_id": 31434403, "link": "https://stackoverflow.com/questions/31434403/how-to-dynamic-cast-a-variadic-template-with-mismatch-reference-modifier-in-para", "title": "How to dynamic_cast a variadic template with mismatch reference modifier in parameters?", "body": "<p>I have a class hierarchy where the base class contains a function which tests for <code>dynamic_cast</code> the <code>this</code> pointer into a derived template type based on the arguments it receive.</p>\n\n<p>Problem is that <code>dynamic_cast</code> operator checks for exact match of the arguments, taking into account if they are ref or not. I need the following example to work on both cases, is there a way to do so?</p>\n\n<pre><code>template &lt;typename... P&gt;\nstruct Derived;\n\nstruct Base\n{\n    virtual ~Base() {}\n\n    template &lt;typename... P&gt;\n    void doCast(P&amp;&amp;... p) {\n        Derived&lt;P...&gt; *res=dynamic_cast&lt;Derived&lt;P...&gt; *&gt;(this);\n        if (!res)\n            std::cout&lt;&lt;\"Failed.\"&lt;&lt;std::endl;\n        else {\n            std::cout&lt;&lt;\"Success.\"&lt;&lt;std::endl;\n            res-&gt;doSomethingWithP(std::forward&lt;P&gt;(p)...);\n        }\n    }\n};\n\ntemplate &lt;typename... P&gt;\nstruct Derived: public Base\n{\n    void doSomethingWithP(P... p) {\n        /*Whatever, doesn't matter*/\n    }\n};\n\nint main(int argc, char **argv)\n{\n    Derived&lt;int, int, int&gt; derived;\n    Base *b=&amp;derived;\n\n    int x=10;\n    int y=20;\n    int z=30;\n\n    //The two calls must succeed.\n    b-&gt;doCast(x,y,z); //Failed.\n    b-&gt;doCast(10,20,30); //Success.\n\n    return 0;\n}\n</code></pre>\n\n<p><code>Derived</code> can accept types that are both values, references, and pointers - <em>cv</em>-qualified or not. </p>\n"}]