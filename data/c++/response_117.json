[{"tags": ["c++", "oop", "c++-standard-library"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1491436446, "post_id": 43243447, "comment_id": 73556908, "body": "There&#39;s no difference"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 6, "creation_date": 1491436519, "post_id": 43243447, "comment_id": 73556928, "body": "I think you&#39;re oversimplifying and misrepresenting. If you write your own code, then <i>you</i> can decide whether in your situation joining in the destructor is appropriate. But that does not mean that joining in the destructor is <i>always</i> appropriate for every user in <i>every</i> situation. In situations where auto-joining is a problem, you would of course <i>not</i> use a joining wrapper."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491436708, "post_id": 43243447, "comment_id": 73556992, "body": "The answer you link doesn&#39;t actually say to call <code>join</code> in the destructor. It says to wrap the thread in another class &quot;that will have desired behavior on destruction&quot;. If the behavior you desire is to join, and you&#39;re okay with the tradeoffs that involves, you can do that. It won&#39;t solve the problems with calling <code>join</code> in the destructor, and the answer doesn&#39;t claim it will."}, {"owner": {"reputation": 862, "user_id": 2625036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67b4f5e3be6c086e1d20aa4184477d28?s=128&d=identicon&r=PG", "display_name": "Ali", "link": "https://stackoverflow.com/users/2625036/ali"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1491437992, "post_id": 43243447, "comment_id": 73557305, "body": "@KerrekSB How would you even know if the situation is right for auto joining or not? If it was that simple wouldn&#39;t be already implemented in the standard?"}, {"owner": {"reputation": 862, "user_id": 2625036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67b4f5e3be6c086e1d20aa4184477d28?s=128&d=identicon&r=PG", "display_name": "Ali", "link": "https://stackoverflow.com/users/2625036/ali"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1491438361, "post_id": 43243447, "comment_id": 73557411, "body": "@user2357112 Yes, it doesn&#39;t explicitly say to call <code>join</code> but I think it is implied. It says <code>You could always workaround this using RAII</code>, and as far as I understand &quot;this&quot; refers to calling <code>join</code>/<code>detach</code> and &quot;workaround&quot; usually implies a solution to the problem."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1491438591, "post_id": 43243447, "comment_id": 73557470, "body": "@Ali: That&#39;s a super broad question that won&#39;t get anywhere near a concise answer. You analyze your requirements and design your implementation, and you&#39;ll discover in the process how your concurrency model should look. We don&#39;t have <code>auto_solve_everything</code> in the standard library (yet). Chances are you probably won&#39;t be exposing raw <code>std::thread</code>s to the user anyway and have a more comprehensive and integrated concurrency infrastructure."}, {"owner": {"reputation": 862, "user_id": 2625036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67b4f5e3be6c086e1d20aa4184477d28?s=128&d=identicon&r=PG", "display_name": "Ali", "link": "https://stackoverflow.com/users/2625036/ali"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1491439686, "post_id": 43243447, "comment_id": 73557757, "body": "@KerrekSB Thanks for your comment. I am not really an expert in concurrency, I am a noob actually,  but I feel that it&#39;s much better/safer to make sure all threads are joined properly rather than spending the time and effort to design a <code>sometime_joinable</code> class."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1491440281, "post_id": 43243447, "comment_id": 73557874, "body": "All class objects are known as <i>user defined types</i> including everything in the standard library. I think that one or two things in the standard library may require behind the scenes compiler magic though. But literally only one or two."}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 1, "creation_date": 1491456984, "post_id": 43243447, "comment_id": 73562444, "body": "@Galic which magic? Just wandering"}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 7452238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5339f527b561933b4e1eceaf7e42d9?s=128&d=identicon&r=PG&f=1", "display_name": "bobra", "link": "https://stackoverflow.com/users/7452238/bobra"}, "is_accepted": false, "score": 0, "last_activity_date": 1491454756, "last_edit_date": 1491454756, "creation_date": 1491454368, "answer_id": 43245953, "question_id": 43243447, "link": "https://stackoverflow.com/questions/43243447/is-there-a-difference-between-user-defined-classes-and-std-classes/43245953#43245953", "title": "Is there a difference between user defined classes and std classes?", "body": "<p>Okay @Ali , let's take a brief overview about some things (terms).</p>\n\n<p><code>namespace std</code> - is a simple namespace, like:</p>\n\n<pre><code>namespace my_namespace {\n    int my_integer;\n};\n</code></pre>\n\n<p>which contains tons of useful classes for programmers, written by ultra overpowered ones, and , as you understand it should be as flexible as possible (later \"Statement 1\"), casue different people have different needs.</p>\n\n<p>And of course it obeys the general rules of c++ standart, as it contents also do.</p>\n\n<hr>\n\n<p>Now lets talk about your desired <code>std::thread</code>.</p>\n\n<p>its a simple class that represents <a href=\"https://en.wikipedia.org/wiki/Thread_(computing)\" rel=\"nofollow noreferrer\">a single thread of execution</a>. It allows you to execue your functions in \"outerspace\", and keeps in touch with our abstract \"outerspace\", it also handles some data:</p>\n\n<ul>\n<li>_id - thread ID</li>\n<li>_handle - the secret variable, which is the key for communication with \"outerspace\"</li>\n<li>and of course it keeps some data\nabout state of execution (does any entity executes now somewhere in\nthe \"outerspace\" where the key leads us to)</li>\n</ul>\n\n<p>if you look up <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\">some references</a> in more details and keep in mind our \"Statement 1\", you will notice the following information:</p>\n\n<ul>\n<li>\"<code>std::thread</code> objects may also be in the state that does not represent any thread\"</li>\n<li>\"No two <code>std::thread</code> objects may represent the same thread of execution; <code>std::thread</code> is not CopyConstructible or CopyAssignable, although it is MoveConstructible and MoveAssignable.\"</li>\n</ul>\n\n<hr>\n\n<p>now you should come to a conclusion that <code>std::thread</code> variable and executing entity are separate, but trying to remove <code>std::thread</code> variable that is attached to an executing entity throws an exception.</p>\n\n<p>but when the entity finishes execution, <code>std::thread</code> variable keeps alive, and may be attached to any other entity.</p>\n\n<p>for theese needs there are following methods:   </p>\n\n<pre><code> join() // waits for a thread to finish its execution\n // if it is attached to something, the code execution will not go futher until our entity finishes its execution.\n\n detach() // permits the thread to execute independently from the thread handle \n// detaches our std:: thread variable from executing entity, now our entity lives its own life. std::thread variable may be removed while the entity keeps alive\n\njoinable() // checks whether the thread is joinable, i.e. potentially running in parallel context\n// if thread is attached to something which is executing now, it returns true, otherwise false\n</code></pre>\n\n<hr>\n\n<p>Here some code examples that will clear out your misunderstanding:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nusing namespace::std;\n\nvoid some_func1() {\n    cout &lt;&lt; \"some_func1 thread started \" &lt;&lt; endl;\n    this_thread::sleep_for(chrono::seconds(2));\n    cout &lt;&lt; \"some_func1 thread finished \" &lt;&lt; endl;\n}\n\nvoid some_func2() {\n    cout &lt;&lt; \"some_func2 thread started \" &lt;&lt; endl;\n    this_thread::sleep_for(chrono::seconds(2));\n    cout &lt;&lt; \"some_func2 thread finished \" &lt;&lt; endl;\n}\n\n\nint main() {    \n\n    thread some_thread;\n\n    cout &lt;&lt; \"Is some_thread joinable: \" &lt;&lt; some_thread.joinable() &lt;&lt; endl;\n\n    some_thread = thread(some_func1);\n\n    cout &lt;&lt; \"Is some_thread joinable: \" &lt;&lt; some_thread.joinable() &lt;&lt; endl;\n\n    some_thread.detach();\n\n    cout &lt;&lt; \"Is some_thread joinable: \" &lt;&lt; some_thread.joinable() &lt;&lt; endl;\n\n    this_thread::sleep_for(chrono::seconds(1)); \n\n    some_thread = thread(some_func2);\n\n    cout &lt;&lt; \"Is some_thread joinable: \" &lt;&lt; some_thread.joinable() &lt;&lt; endl;\n\n    some_thread.join();\n\n    cout &lt;&lt; \"Is some_thread joinable: \" &lt;&lt; some_thread.joinable() &lt;&lt; endl;\n}\n\n//  Output is:\n//  Is some_thread joinable: 0\n//  some_func1 thread started\n//  Is some_thread joinable: 1\n//  Is some_thread joinable: 0\n//  some_func2 thread started\n//  Is some_thread joinable: 1\n//  some_func1 thread finished\n//  some_func2 thread finished\n//  Is some_thread joinable: 0\n//  Press any key to continue . . .\n</code></pre>\n\n<hr>\n\n<p>If you want to be ensured, that your entity finishes execution before your thread variable removes you may wrap it in another class and call <code>join()</code> in destructor, as you mentioned in question.</p>\n\n<p>or you may also wrap it in another one which will call <code>detach()</code> in destructor.</p>\n\n<p>theese 2 ways will prevent you from huge amount of crushes.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\n\n\ntypedef void Myfunc();\n\nvoid some_func1() {\n    cout &lt;&lt; \"some_func1 thread started \" &lt;&lt; endl;\n    this_thread::sleep_for(chrono::seconds(2));\n    cout &lt;&lt; \"some_func1 thread finished \" &lt;&lt; endl;\n}\n\nvoid some_func2() {\n    cout &lt;&lt; \"some_func2 thread started \" &lt;&lt; endl;\n    this_thread::sleep_for(chrono::seconds(2));\n    cout &lt;&lt; \"some_func2 thread finished \" &lt;&lt; endl;\n}\n\nclass ICareAboutThread {\n    std::thread thread_;\npublic:\n    ICareAboutThread( Myfunc f = nullptr) : thread_(f) {};\n    ~ICareAboutThread() { join(); }\n    bool joinable() { return thread_.joinable();}\n    void join() { thread_.join();}\n    void detach() { thread_.detach();}\n\n    // other constructors : move , safe copying - if necessary;\n};\n\n\nclass IDontCareAboutThread {\n    std::thread thread_;\npublic:\n    IDontCareAboutThread(Myfunc f = nullptr) : thread_(f) {};\n    ~IDontCareAboutThread() { detach(); }\n    bool joinable() { return thread_.joinable(); }\n    void join() { thread_.join(); }\n    void detach() { thread_.detach(); }\n\n    // other constructors : move , safe copying - if necessary;\n};\n\nint main() {    \n\n    ICareAboutThread i_care(some_func1);\n\n    this_thread::sleep_for(chrono::seconds(1));\n\n    IDontCareAboutThread i_dont_care(some_func2);\n\n    return 0;\n}\n\n//  Output is:\n//  some_func1 thread started\n//  some_func2 thread started\n//  some_func1 thread finished\n//  Press any key to continue . . .\n</code></pre>\n\n<hr>\n\n<p>now i hope its crystal clear for you, if you understand when variable removes :D</p>\n"}], "owner": {"reputation": 862, "user_id": 2625036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67b4f5e3be6c086e1d20aa4184477d28?s=128&d=identicon&r=PG", "display_name": "Ali", "link": "https://stackoverflow.com/users/2625036/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491454756, "creation_date": 1491436394, "last_edit_date": 1495541382, "question_id": 43243447, "link": "https://stackoverflow.com/questions/43243447/is-there-a-difference-between-user-defined-classes-and-std-classes", "title": "Is there a difference between user defined classes and std classes?", "body": "<p>As far as I know the only difference in the way a constructor/destructor is called depends on the instantiation order. But is there any other difference between \"normal\" user classes and classes in std?</p>\n\n<p>Let's say I have a class called <code>myStackOverflow</code> and then I instantiate an object of this class. I also have an object of type <code>std::thread</code> in the same scope. Are there any differences in the way the constructors or destructors of these objects are called?</p>\n\n<p>The main reason I am asking this is that according to the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4640.pdf\" rel=\"nofollow noreferrer\">C++ standard</a> (section 30.3.2.3)  <code>join()</code> is not called inside a thread destructor. You can read the why <a href=\"https://stackoverflow.com/a/27392989/2625036\">here</a>. But in <a href=\"https://stackoverflow.com/a/27392780/2625036\">this</a> answer on stackoverflow it is mentioned to wrap the <code>std::thread</code> in another class and then call <code>join()</code> in the destructor of this new wrapper class. I don't understand how that would solve anything. A destructor is still a destructor and the dangers of calling <code>join()</code> in the <code>std::thread</code>'s destructor are still there. </p>\n\n<p>The only way that would make sense is that there is a difference between the way the destructor of these two different type is called.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1491436297, "post_id": 43243411, "comment_id": 73556868, "body": "It&#39;s explicitly allowed by C++. B doesn&#39;t need to be fully defined unless it&#39;s used inside <code>A</code> as a value type."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1491436444, "post_id": 43243411, "comment_id": 73556907, "body": "Don&#39;t post code that won&#39;t compile and then tell us it compiles.  In these cases, provide a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1491437488, "post_id": 43243411, "comment_id": 73557176, "body": "Replace the ellipses by <code>&#47;* ... *&#47;</code> and you have a MCVE or something trivially close."}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 3, "last_activity_date": 1491437982, "last_edit_date": 1491437982, "creation_date": 1491437098, "answer_id": 43243546, "question_id": 43243411, "link": "https://stackoverflow.com/questions/43243411/how-does-this-templated-code-compile/43243546#43243546", "title": "How does this templated code compile?", "body": "<p>At the line you\u2019re concerned about, <code>B</code> is declared as an \u201cincomplete type.\u201d  Here\u2019s a simpler example:</p>\n\n<pre><code>struct foo {\n  foo *p;\n};\n</code></pre>\n\n<p>You can also declare an incomplete type with a statement like <code>struct foo;</code>.  This doesn\u2019t give the compiler enough information to let you create a <code>foo</code> or store a <code>foo</code> within another structure, but it does let you use the name in contexts where knowing that <code>foo</code> is the name of a type is enough.  An example:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct foo;\nusing foovector = std::vector&lt;foo&gt;; // Legal.\n// foovector v(4); // Invalid.\n</code></pre>\n\n<p>If you uncomment the final line and try to compile, you\u2019ll get a bunch of error messages saying that <code>foo</code> is an incomplete type.  The compiler can\u2019t create a <code>vector</code> of <code>foo</code> because it doesn\u2019t know the size of a <code>foo</code>, or therefore how much memory to allocate.  But give the type a complete definition and it works:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct foo;\nusing foovector = std::vector&lt;foo&gt;; // Legal.\n\nstruct foo {\n  foo *p;\n};\n\nfoovector v(4); // Now this works.\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7823615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05435714f8a1ea24ba8ac8d9b917a2a7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7823615/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 43243546, "answer_count": 1, "score": 0, "last_activity_date": 1491437982, "creation_date": 1491436130, "question_id": 43243411, "link": "https://stackoverflow.com/questions/43243411/how-does-this-templated-code-compile", "title": "How does this templated code compile?", "body": "<p>I'm struggling to understand how this compiles:</p>\n\n<pre><code>template &lt;class T, class U&gt;\nstruct A { ... };\n\nstruct B {\n  template &lt;class T&gt;\n  using C = A&lt;T, B&gt;;\n  ...\n};\n</code></pre>\n\n<p>How can I pass 'B' as a template argument to 'A' within the definition of 'B' - that is, 'B' is not yet fully defined...</p>\n\n<p>Any help would be greatly appreciated,</p>\n\n<p>Cheers</p>\n"}, {"tags": ["c++", "boost", "bjam", "b2"], "owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 851, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1491435679, "creation_date": 1491435679, "question_id": 43243346, "link": "https://stackoverflow.com/questions/43243346/boost-b2-build-64-bit-results-in-argument-error-missing-argument", "title": "boost b2 build 64 bit results in argument error missing argument", "body": "<p>I am trying to build 64 bit libraries using boost's b2. I followed all the steps to the tee but I keep getting an annoying error about a missing argument setup-script. </p>\n\n<p>Here is my user-config.jam file that I put into my HOME directory:</p>\n\n<pre><code># -------------------\n# MSVC configuration.\n# -------------------\n\n# Configure msvc (default version, searched for in standard locations and PATH).\n# using msvc ;\n\n# Configure specific msvc version (searched for in standard locations and PATH).\nusing msvc : 12.0 : \"C:/Program Files (x86)/Microsoft Visual Studio 12.0/VC/bin/x86_amd64/cl.exe\" ;\n\n# ---------------------\n# Python configuration.\n# ---------------------\n\n# Configure specific Python version.\n# using python : 3.5 : C:\\\\Users\\\\jchen114\\\\Anaconda3 : C:\\\\Users\\\\jchen114\\\\Anaconda3\\\\include : C:\\\\Users\\\\jchen114\\\\Anaconda3\\\\Lib ;\n\nusing python \n    : 3.5                   # Version\n    : \"C:\\\\Users\\\\jchen114\\\\Anaconda3\\\\python.exe\"      # Python Path\n    : \"C:\\\\Users\\\\jchen114\\\\Anaconda3\\\\include\"         # include path\n    : \"C:\\\\Users\\\\jchen114\\\\Anaconda3\\\\libs\"            # lib path(s)\n    : &lt;define&gt;BOOST_ALL_NO_LIB=1\n    ;\n</code></pre>\n\n<p>I then run this command in my root boost directory: </p>\n\n<pre><code>./b2 msvc address-model=64 stage\n</code></pre>\n\n<p>Then I get this error:</p>\n\n<pre><code>*** argument error\n* rule maybe-rewrite-setup ( toolset : setup-script : setup-options : version : rewrite-setup ? )\n* called with: ( msvc :  :  : 12.0 :  )\n* missing argument setup-script\n</code></pre>\n\n<p>The funny thing is that if I get rid of the x86_amd64 directory in the msvc configuration line like this: </p>\n\n<pre><code>using msvc : 12.0 : \"C:/Program Files (x86)/Microsoft Visual Studio 12.0/VC/bin/cl.exe\" ;\n</code></pre>\n\n<p>It begins to build.</p>\n\n<p>How do I make boost build the 64 bit version of the libraries, correctly?</p>\n"}, {"tags": ["c++", "matrix", "graphics", "3d", "rotation"], "answers": [{"comments": [{"owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "edited": false, "score": 0, "creation_date": 1491466808, "post_id": 43244595, "comment_id": 73568148, "body": "I&#39;m afraid this doesn&#39;t work, there is no change. The model matrix is orthogonal in this case and so it&#39;s inverse transpose is actually the same thing. Many online sources though have said that when doing non uniform scaling (not orthogonal) for example the inverse transpose is needed when transforming normals."}, {"owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "reply_to_user": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "edited": false, "score": 0, "creation_date": 1491467474, "post_id": 43244595, "comment_id": 73568565, "body": "@Constan7ine Sorry. I mistakenly thought you were multiplying by the inverse. Inverse transpose makes sense. I&#39;ll take another look."}, {"owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "reply_to_user": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "edited": false, "score": 0, "creation_date": 1491548499, "post_id": 43244595, "comment_id": 73611551, "body": "@Constan7ine I can&#39;t see any other problems. I think your issue may lie elsewhere in your code base."}], "tags": [], "owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "is_accepted": false, "score": 1, "last_activity_date": 1491445356, "creation_date": 1491445356, "answer_id": 43244595, "question_id": 43243249, "link": "https://stackoverflow.com/questions/43243249/3d-graphics-mesh-normal-vector-rotation-is-doubled/43244595#43244595", "title": "3D graphics mesh normal vector rotation is doubled", "body": "<p>You should be transforming the normals using the model matrix, not its inverse. Your lighting is behaving as it is because you are rotating the vertex normals in the opposite direction to the vertex positions.</p>\n\n<pre><code>vec4 normal =  M * embed&lt;4&gt;(model-&gt;normal(iFace, nthVert), 0.f);\n</code></pre>\n\n<p>To avoid such confusion, I would recommend using the naming scheme <a href=\"https://tomforsyth1000.github.io/blog.wiki.html#%5B%5BMatrix%20maths%20and%20names%5D%5D\" rel=\"nofollow noreferrer\">advocated by Tom Forsyth</a>, and call <code>M</code> the <code>world_from_object</code> matrix, because it is the transformation from <em>object</em> space to <em>world</em> space.</p>\n\n<pre><code>vec4 light_world = vec4(0.f, 0.f, 1.f, 0.f);\nvec4 normal_object = embed&lt;4&gt;(model-&gt;normal(iFace, nthVert), 0.f);\nvec4 normal_world = world_from_object * normal_object;\nfloat intensity = std::max(0.f, light_world * normal_world);\n</code></pre>\n\n<p>If you had used this scheme, it would have been clear that you were using the wrong transformation.</p>\n\n<pre><code>mat4 object_from_world = world_from_object.invert_transpose();\nvec4 normal_world = object_from_world * normal_object; // wrong!\n</code></pre>\n\n<p>I personally use the following terminology to describe the different spaces:</p>\n\n<ul>\n<li><em>object space</em> \u2013 the local coordinate system of your model</li>\n<li><em>view space</em> \u2013 the local coordinate system of your camera</li>\n<li><em>light space</em> \u2013 the local coordinate system of your light</li>\n<li><em>world space</em> \u2013 the global coordinate system of your scene</li>\n<li><em>clip space</em> \u2013 the normalized screen coordinates</li>\n</ul>\n\n<p>As such, I would call the <code>MVP</code> matrix the <code>clip_from_object</code> matrix.</p>\n"}, {"comments": [{"owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "edited": false, "score": 0, "creation_date": 1491491118, "post_id": 43256102, "comment_id": 73586550, "body": "Yea, that&#39;s from the github repo isn&#39;t it, it&#39;s slightly outdated. The above images were taken when passing just the Model matrix. Thanks though."}], "tags": [], "owner": {"reputation": 13, "user_id": 4969831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5sgtviq9svc/AAAAAAAAAAI/AAAAAAAAAlY/T6MHtDrRDmw/photo.jpg?sz=128", "display_name": "Sourabh Prajapati", "link": "https://stackoverflow.com/users/4969831/sourabh-prajapati"}, "is_accepted": false, "score": 1, "last_activity_date": 1491483928, "creation_date": 1491483928, "answer_id": 43256102, "question_id": 43243249, "link": "https://stackoverflow.com/questions/43243249/3d-graphics-mesh-normal-vector-rotation-is-doubled/43256102#43256102", "title": "3D graphics mesh normal vector rotation is doubled", "body": "<p>You're passing the Model matrix to the Shader as:</p>\n\n<pre><code>                o-&gt;shader-&gt;M = cameraRotate * cameraTranslate * Model;\n</code></pre>\n\n<p>So the actual     M matrix is not Model Matrix but ModelView Matrix, i.e. you're now multiplying in ModelView Space. I'm not sure but probably that might be leading to ambiguous result.</p>\n"}], "owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1491483928, "creation_date": 1491434965, "last_edit_date": 1491468670, "question_id": 43243249, "link": "https://stackoverflow.com/questions/43243249/3d-graphics-mesh-normal-vector-rotation-is-doubled", "title": "3D graphics mesh normal vector rotation is doubled", "body": "<p>I'm currently implementing a software renderer that emulates OpenGL as a learning experience based on <a href=\"https://github.com/ssloy/tinyrenderer/wiki\" rel=\"nofollow noreferrer\">these lessons</a>. My code for the project can be <a href=\"https://github.com/Constan7ine/SoftRender\" rel=\"nofollow noreferrer\">found here.</a></p>\n\n<p>I'm having quite some difficulty dealing with vertex normals. I'd like to transform them with the model matrix, which I'm aware I should be using the inverse transpose of the model matrix when the matrix is not orthogonal. The light direction should be specified in world space, thus the normals should be transformed, then the dot product of the world space light direction used to calculate the light intensity. </p>\n\n<p>This is the problem though. It works fine here, note the camera is rotated 45 degrees in the up axis looking at the model.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7L6im.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7L6im.png\" alt=\"Front view\"></a></p>\n\n<p>If I rotate the model 90 degrees in any axis, take the up axis for now, the light direction flips to point the other way. As you can see here the light is coming from the back.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pNnqa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pNnqa.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I rotate to 180 degrees, it's fine again.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vaFLV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vaFLV.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I rotate to 45 degrees the light points at 90 degrees as is shown here. Note the spikes to see where the light is coming from.</p>\n\n<p><a href=\"https://i.stack.imgur.com/LCCSC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LCCSC.png\" alt=\"enter image description here\"></a></p>\n\n<p>This has puzzled me for hours. I cannot figure out what's wrong. It's as though rotations are being doubled up on the light. The light's vector isn't being changed though, look here:</p>\n\n<pre><code>vec4 SmoothShader::Vertex(int iFace, int nthVert)\n{\n    vec3 vposition = model-&gt;vert(iFace, nthVert);\n    vec4 projectionSpace = MVP * embed&lt;4&gt;(vposition);\n\n    vec3 light = vec3(0, 0, 1);\n\n    mat4 normTrans = M.invert_transpose();\n    vec4 normal =  normTrans * embed&lt;4&gt;(model-&gt;normal(iFace, nthVert), 0.f);\n    vec3 norm = proj&lt;3&gt;(normal);\n    intensity[nthVert] = std::max(0.0f, norm.normalise() * light.normalise());\n\n    return projectionSpace;\n}\n\nbool SmoothShader::Fragment(vec3 barycentric, vec3 &amp;Colour)\n{\n    float pixelIntensity = intensity * barycentric;\n    Colour = vec3(255, 122, 122) * pixelIntensity;\n    return true;\n}\n</code></pre>\n\n<p>The MVP (model, view, projection) and M (model) matrices are calculated like this:</p>\n\n<pre><code>// Model Matrix, converts to world space\nmat4 scale = MakeScale(o-&gt;scale); \nmat4 translate = MakeTranslate(o-&gt;position);\nmat4 rotate = MakeRotate(o-&gt;rotation);\n\n// Move objects backward from the camera's position\nmat4 cameraTranslate = MakeTranslate(vec3(-cameraPosition.x, -cameraPosition.y, -cameraPosition.z));\n\n// Get the camera's rotated basis vectors to rotate everything to camera space.\nvec3 Forward;\nvec3 Right;\nvec3 Up;\nGetAxesFromRotation(cameraRotation, Forward, Right, Up);\nmat4 cameraRotate = MakeLookAt(Forward, Up);\n\n// Convert from camera space to perspective projection space\nmat4 projection = MakePerspective(surf-&gt;w, surf-&gt;h, 1, 10, cameraFOV);\n\n// Convert from projection space (-1, 1) to viewport space\nmat4 viewport = MakeViewport(surf-&gt;w, surf-&gt;h);\n\nmat4 M = translate * rotate * scale;\nmat4 MVP = viewport * projection * cameraRotate * cameraTranslate * M;\n</code></pre>\n\n<p>Any idea what I'm doing wrong?</p>\n"}, {"tags": ["c++", "windows", "webrtc", "screen-capture", "window-handles"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1491437193, "post_id": 43243238, "comment_id": 73557104, "body": "Google Chrome uses Direct-X for rendering on Windows and can be captured with a Direct-X hook."}], "owner": {"reputation": 764, "user_id": 2727006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af31ad3125d34132cfbf5641c5095ae2?s=128&d=identicon&r=PG&f=1", "display_name": "Ebram", "link": "https://stackoverflow.com/users/2727006/ebram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 601, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1491436943, "creation_date": 1491434900, "last_edit_date": 1491436943, "question_id": 43243238, "link": "https://stackoverflow.com/questions/43243238/black-screen-trying-to-capture-google-chrome-window-and-each-application-uses-ha", "title": "Black Screen trying to capture Google Chrome Window and each application uses hardware acceleration", "body": "<p>I am Using Webrtc Native Module to capture a single window: </p>\n\n<pre><code>    webrtc::DesktopCaptureOptions co = webrtc::DesktopCaptureOptions::CreateDefault();\n            desktop_capturer = webrtc::DesktopCapturer::CreateWindowCapturer(co);\n            desktop_capturer-&gt;GetSourceList(&amp;desktop_screens);\n            desktop_capturer-&gt;SelectSource(desktop_screens[selectedIndex].id);\n            desktop_capturer-&gt;Start(this);\n</code></pre>\n\n<p>It works fine but for some applications like \"Google Chrome\" I get black screen and after searching I find that happen to any application which uses \"hardware acceleration\" and if I disabled the hardware acceleration in \"Google Chrome Settings\" I can capture its window without getting black screen but I can't do that for each application which uses \"hardware acceleration\"</p>\n\n<p>And I am tried to implement another window capturer and I got the same issue \"Black Image for each application uses hardware acceleration\":</p>\n\n<pre><code>  void CaptureFrame(int i, System::String ^ title){\nRECT rc;\nstd::string stdTitle = convertToStdString(title);\nstd::wstring tit = s2ws(stdTitle);\nLPCWSTR t = tit.c_str();\nHWND hwnd = FindWindow(0, t);\n\nif (hwnd == NULL)\n{\n    return;\n}\nGetClientRect(hwnd, &amp;rc);\n\nHDC hdcScreen = GetDC(NULL);\nHDC hdc = CreateCompatibleDC(hdcScreen);\nHBITMAP hbmp = CreateCompatibleBitmap(hdcScreen,\n    rc.right - rc.left, rc.bottom - rc.top);\nSelectObject(hdc, hbmp);\n\nPrintWindow(hwnd, hdc, PW_CLIENTONLY);\n\n\nOpenClipboard(NULL);\nEmptyClipboard();\nSetClipboardData(CF_BITMAP, hbmp);\nCloseClipboard();\nstd::string ind = std::to_string(i);\n\nstd::wstring stemp = s2ws(stdTitle + ind + \".jpeg\");\nLPCWSTR result = stemp.c_str();\nCImage image;\nimage.Attach(hbmp);\nimage.Save(result, Gdiplus::ImageFormatBMP);\n\n\nDeleteDC(hdc);\nDeleteObject(hbmp);\nReleaseDC(NULL, hdcScreen);}\n</code></pre>\n"}, {"tags": ["c++", "mongodb", "geospatial", "mongo-cxx-driver"], "answers": [{"tags": [], "owner": {"reputation": 31636, "user_id": 2614364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tQZrZ.jpg?s=128&g=1", "display_name": "Bertrand Martel", "link": "https://stackoverflow.com/users/2614364/bertrand-martel"}, "is_accepted": true, "score": 2, "last_activity_date": 1491439070, "creation_date": 1491439070, "answer_id": 43243799, "question_id": 43243200, "link": "https://stackoverflow.com/questions/43243200/how-to-use-mongodb-geospatial-index-in-c/43243799#43243799", "title": "How to use MongoDB GeoSpatial Index in C++", "body": "<p>You can use <a href=\"https://mongodb.github.io/mongo-cxx-driver/api/mongocxx-v3/classmongocxx_1_1options_1_1find.html#a50acf6a2aa55d552248cad1b825f014e\" rel=\"nofollow noreferrer\"><code>mongocxx::options::find::limit</code></a>. Check also <a href=\"https://mongodb.github.io/mongo-cxx-driver/api/mongocxx-v3/classmongocxx_1_1collection.html#ae3748d404ee8affee0103e75a276abe4\" rel=\"nofollow noreferrer\"><code>mongocxx::collection::find</code></a>. The following should work : </p>\n\n<pre><code>mongocxx::options::find opts;\nopts.limit(10);\n\nmongocxx::cursor cursor = coll.find(document{} &lt;&lt; \"loc\" &lt;&lt; open_document \n    &lt;&lt; \"$near\" &lt;&lt; bsoncxx::builder::stream::open_array \n    &lt;&lt; lon &lt;&lt; lat &lt;&lt; bsoncxx::builder::stream::close_array \n    &lt;&lt; close_document &lt;&lt; finalize, opts);\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6207795, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Q0vLf.png?s=128&g=1", "display_name": "SGM", "link": "https://stackoverflow.com/users/6207795/sgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 43243799, "answer_count": 1, "score": 1, "last_activity_date": 1491439070, "creation_date": 1491434598, "question_id": 43243200, "link": "https://stackoverflow.com/questions/43243200/how-to-use-mongodb-geospatial-index-in-c", "title": "How to use MongoDB GeoSpatial Index in C++", "body": "<p>In python, pymongo provides nice support for MongoDB GeoSpatial index. However, for C++ when I use mongocxx in C++, I am a little bit confused about the grammar. </p>\n\n<p>For example, in python (pymongo) I used</p>\n\n<pre><code>cursor = db.colection.find(\n    {\n        \"loc\": {\n            \"$near\": [lon, lat]\n        }\n    }\n).limit(10)\n</code></pre>\n\n<p>to get nearest 10 items for given location. But how can I do the same thing in C++? </p>\n\n<p>I tried:</p>\n\n<pre><code>mongocxx::cursor cursor = coll.find(document{} &lt;&lt; \"loc\" &lt;&lt; open_document &lt;&lt;\n                                    \"$near\" &lt;&lt; [lon, lat]\n                                    &lt;&lt; close_document &lt;&lt; finalize);\n</code></pre>\n\n<p>I am not sure if this is correct approach, and I failed to set the number of results. </p>\n\n<p>Could anyone give me some instructions on GeoSpatial index in C++? Documents/examples will be highly apreciated. </p>\n\n<p>Thank you very much. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 527, "user_id": 7696140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb513e8b2a5c6afb3383a722f9f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Meccano", "link": "https://stackoverflow.com/users/7696140/meccano"}, "edited": false, "score": 2, "creation_date": 1491434367, "post_id": 43243142, "comment_id": 73556374, "body": "The errors are in the &#39;Movie&#39; class, not in the include"}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1491436197, "post_id": 43243142, "comment_id": 73556842, "body": "You need to post an MCVE. Without the relevant code pertaining to your question, we are limited in our ability to help you."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491473351, "post_id": 43243245, "comment_id": 73572932, "body": "I have included Movie.h as well as Movie.cpp as an edit to the original question. When I am in Movie.h and hover over #include &lt;string.h&gt;, it says that there are uresolved includes inside string.h. When I ctrl+click on that it takes me to string.h and says that it could not include file &lt;stddef.h&gt;."}, {"owner": {"reputation": 527, "user_id": 7696140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb513e8b2a5c6afb3383a722f9f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Meccano", "link": "https://stackoverflow.com/users/7696140/meccano"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491495970, "post_id": 43243245, "comment_id": 73590195, "body": "&lt;string.h&gt; is for C. try to replace it with &lt;string&gt;."}], "tags": [], "owner": {"reputation": 527, "user_id": 7696140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb513e8b2a5c6afb3383a722f9f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Meccano", "link": "https://stackoverflow.com/users/7696140/meccano"}, "is_accepted": false, "score": 0, "last_activity_date": 1491434930, "creation_date": 1491434930, "answer_id": 43243245, "question_id": 43243142, "link": "https://stackoverflow.com/questions/43243142/there-are-unresolved-includes-inside-iostream/43243245#43243245", "title": "There are unresolved includes inside &lt;iostream&gt;", "body": "<p>The line under the #include  is just a warning (I'm not sure why).\nHowever, the errors are from the \"Movie\" class:\n1. add \"using namespace std\" on the top of this class.\n2. close the parenthesis on the constructor of 'Movie'.</p>\n"}, {"tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": false, "score": 0, "last_activity_date": 1491435297, "creation_date": 1491435297, "answer_id": 43243295, "question_id": 43243142, "link": "https://stackoverflow.com/questions/43243142/there-are-unresolved-includes-inside-iostream/43243295#43243295", "title": "There are unresolved includes inside &lt;iostream&gt;", "body": "<p>The error messages are fairly clear:</p>\n\n<pre><code>'string' does not name a type\n</code></pre>\n\n<p>That is, the compiler is unaware of the type <code>string</code> because either:</p>\n\n<ul>\n<li><p>you have not <code>#include &lt;string&gt;</code> in <code>Movie.h</code></p></li>\n<li><p>or you have, but have not brought it into your namespace with a <code>using namespace std;</code></p>\n\n<ul>\n<li>although why not just refer to it as <code>std::string</code>?</li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491480399, "post_id": 43243410, "comment_id": 73578019, "body": "When I am in Movie.h and hover over #include &lt;string.h&gt;, it says that there are uresolved includes inside string.h. When I ctrl+click on that it takes me to string.h and says that it could not include file &lt;stddef.h&gt;"}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491480497, "post_id": 43243410, "comment_id": 73578096, "body": "Read my answer, you should do <code>#include &lt;string&gt;</code> not <code>#include &lt;string.h&gt;</code>"}, {"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491481054, "post_id": 43243410, "comment_id": 73578517, "body": "I just tried that, still when I hover over #include &lt;string&gt; it comes up with unresolved includes inside #include &lt;string&gt;. The error comes up as <a href=\"https://puu.sh/vb9Jx/7648e5101b.png\" rel=\"nofollow noreferrer\">puu.sh/vb9Jx/7648e5101b.png</a>. I am sorry if I am missing something blatantly obvious but I just can not figure out what the issue is."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491481256, "post_id": 43243410, "comment_id": 73578679, "body": "@Exicode Try moving the <code>using namespace std;</code> under the include statements."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491481594, "post_id": 43243410, "comment_id": 73578927, "body": "@Exicode If that didn&#39;t work, then visit this link: <a href=\"https://www.eclipse.org/forums/index.php/t/1070816/\" rel=\"nofollow noreferrer\">eclipse.org/forums/index.php/t/1070816</a> . I don&#39;t know which IDE <i>you</i> are using, bu this is for Eclipse"}, {"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491481691, "post_id": 43243410, "comment_id": 73579003, "body": "Just tried that, still no luck. Can I just add that I reinstalled Cygwin both the 32bit version and the 64bit version. Made sure that gcc/g++ and gcc-core are the same version, I saw this fix in another post on this website but that still did not fix my issue. Having said that, this could not be in anyway related to the error that I am getting and could just be the code."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491481903, "post_id": 43243410, "comment_id": 73579167, "body": "@Exicode Try creating a new project, and when you get the sample main.cpp file, paste your code in there and run it."}, {"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491482603, "post_id": 43243410, "comment_id": 73579716, "body": "I tried creating a new project. The code from my other project did not run, I also tried to run a simple &quot;Hello World&quot; program too and although that one compiled, I still got an error when I hover over #include &lt;iostream&gt; saying: <a href=\"https://puu.sh/vbaJa/167b1a8350.png\" rel=\"nofollow noreferrer\">puu.sh/vbaJa/167b1a8350.png</a>. I am using NetBeans IDE for C++, but I will now have a look at the link you sent to see if I can see anything that could help me."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491484364, "post_id": 43243410, "comment_id": 73581100, "body": "@Exicode In my opinion, this looks like a compiler issue. Sincd I&#39;ve not used NetBeans, I frankly cannot provide deep insight into this issue. However, if you want, you can consider switching IDEs"}, {"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491485565, "post_id": 43243410, "comment_id": 73582034, "body": "I will try to reinstall Netbeans and Cygwin and see if that helps. Thank you for your help."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491487100, "post_id": 43243410, "comment_id": 73583321, "body": "@Exicode Consider installing another IDE, like CodeBlocks, Visual Studio, or eclipse. Therre isn&#39;t as much help available for the netbeans IDE as there is for other such IDEs. I&#39;m not trying to downvote netbeans or anything, but just offering a suggestion here."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491487134, "post_id": 43243410, "comment_id": 73583345, "body": "By the way, if my tips we helpful, then please select the checkmark next to my answer. It should turn green when you do so. Thanks!"}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491512286, "post_id": 43243410, "comment_id": 73599839, "body": "Also, you can consider installing MinGW. Many of the tutorials on how to install IDEs include demos on installing MinGW. And again, I&#39;m not downmarketing Cgywin, but just wanted to provide this suggestion"}, {"owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "edited": false, "score": 0, "creation_date": 1491656068, "post_id": 43243410, "comment_id": 73655469, "body": "So, in the end I decided to use Visual Studio instead and that is the fix for me. Did not find any fix to the problem I&#39;ve had with Netbeans but I am hoping that this will help someone else with the same problem."}], "tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": true, "score": 1, "last_activity_date": 1491479390, "last_edit_date": 1491479390, "creation_date": 1491436110, "answer_id": 43243410, "question_id": 43243142, "link": "https://stackoverflow.com/questions/43243142/there-are-unresolved-includes-inside-iostream/43243410#43243410", "title": "There are unresolved includes inside &lt;iostream&gt;", "body": "<p><strong>Firstly</strong>, in your Movie.h file, you have not included the <em>string header file</em> correctly. It should be:</p>\n\n<pre><code>#include &lt;string&gt; // without the .h extension\n</code></pre>\n\n<blockquote>\n  <p><em>error: 'string' does not name a type</em></p>\n</blockquote>\n\n<p><strong>Secondly</strong>, you have forgotten to add the closing parenthesis of the constructor function of class \"Movie\". I am assuming that you have added this now, after the edit</p>\n\n<p>As for the marking done by your compiler, you may find the following StackOverflow post helpful:</p>\n\n<blockquote>\n  <p><a href=\"https://www.eclipse.org/forums/index.php/t/200049/\" rel=\"nofollow noreferrer\"><strong>StackOverflow Post: Unresolved inclusion <em>iostream</em>.</strong></a></p>\n</blockquote>\n\n<p>The link is for the Eclipse IDE, but you can find a similar solution for your own IDE (I cannot tell which one you have).</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6929831, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/766625530144613/picture?type=large", "display_name": "Fabia Bushra Tamanna", "link": "https://stackoverflow.com/users/6929831/fabia-bushra-tamanna"}, "is_accepted": false, "score": -2, "last_activity_date": 1491485491, "last_edit_date": 1491485491, "creation_date": 1491438161, "answer_id": 43243686, "question_id": 43243142, "link": "https://stackoverflow.com/questions/43243142/there-are-unresolved-includes-inside-iostream/43243686#43243686", "title": "There are unresolved includes inside &lt;iostream&gt;", "body": "<p>You are missing</p>\n\n<pre><code>#include &lt;string&gt;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7823551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6285a52298b04ac03242e8552773c9?s=128&d=identicon&r=PG&f=1", "display_name": "Exicode", "link": "https://stackoverflow.com/users/7823551/exicode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 43243410, "answer_count": 4, "score": -3, "last_activity_date": 1491485491, "creation_date": 1491434223, "last_edit_date": 1491472745, "question_id": 43243142, "link": "https://stackoverflow.com/questions/43243142/there-are-unresolved-includes-inside-iostream", "title": "There are unresolved includes inside &lt;iostream&gt;", "body": "<p>I just tried to compile my C++ code and an error appears when I try to do so.</p>\n\n<p>The error appears on line 9</p>\n\n<p><img src=\"https://i.stack.imgur.com/nzI3r.png\" alt=\"\"></p>\n\n<p>Here are the versions of the gcc and g++ and such</p>\n\n<p><img src=\"https://i.stack.imgur.com/jfdny.png\" alt=\"\"></p>\n\n<p>Any help would be appreciated. </p>\n\n<p>Edit:</p>\n\n<p>I am also including Movie.h:\n<img src=\"https://i.stack.imgur.com/hjh1r.png\" alt=\"\"></p>\n\n<p>And also Movie.cpp:</p>\n\n<p><a href=\"https://puu.sh/vb53G/9e9abd1832.png\" rel=\"nofollow noreferrer\">https://puu.sh/vb53G/9e9abd1832.png</a> (I was not able to include more than 3 images due to restrictions)</p>\n"}, {"tags": ["c++", "pointers", "smart-pointers", "c++17", "typetraits"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1491434581, "post_id": 43243129, "comment_id": 73556422, "body": "You could try the detection techniques described in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4502.pdf\" rel=\"nofollow noreferrer\">N4502</a>."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1491444139, "post_id": 43243562, "comment_id": 73558863, "body": "User specializations must obey the rules of the standard, which are pretty restrictive in this case no?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1491444547, "post_id": 43243562, "comment_id": 73558971, "body": "@Yakk I think I&#39;m allowed to write <code>struct pointer_traits&lt;Foo&gt; { using element_type = int; };</code> as long as my <code>Foo</code> dereferences into that?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1491449026, "post_id": 43243562, "comment_id": 73560053, "body": "And I thought I could write a <code>std::less</code> specialization that didn&#39;t call <code>operator&lt;</code>, but apparently I was wrong about that...  I don&#39;t understand the &quot;your specializations must not violate the guarantees in of the version in std&quot; clause (whatever its wording is) and how it applies here.  It may be the case that you are <i>only</i> allowed to <code>element_type=int</code> <i>if</i> <code>Foo::element_type</code> is <code>int</code>.  I don&#39;t think this was intended, but it <i>may</i> be what the standard requires."}, {"owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 0, "creation_date": 1491520736, "post_id": 43243562, "comment_id": 73603089, "body": "@Barry That is a pity. Thanks for the answer."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1491437265, "creation_date": 1491437265, "answer_id": 43243562, "question_id": 43243129, "link": "https://stackoverflow.com/questions/43243129/testing-if-stdpointer-traits-can-work-with-my-type/43243562#43243562", "title": "Testing if std::pointer_traits can work with my type", "body": "<p>You can't. From <a href=\"http://eel.is/c++draft/pointer.traits.types\" rel=\"nofollow noreferrer\">[pointer.traits.types]</a>:</p>\n\n<blockquote>\n<pre><code>using element_type = see below ;\n</code></pre>\n  \n  <p><em>Type:</em> <code>Ptr::element_type</code> if the <em>qualified-id</em> <code>Ptr::element_type</code> is valid and denotes a type (14.8.2); otherwise, <code>T</code> if <code>Ptr</code> is a class template instantiation of the form <code>SomePointer&lt;T, Args&gt;</code>, where Args is\n  zero or more type arguments; <strong>otherwise, the specialization is ill-formed.</strong></p>\n</blockquote>\n\n<p>In order to be SFINAE-friendly, we would need <code>pointer_traits&lt;Foo&gt;</code>  to simply lack a type alias named <code>element_type</code>. The problem is, <code>element_type</code> is specified as being ill-formed - not absent. So you simply cannot use <code>pointer_traits</code> as a detector for whether or not something can be used as a pointer type.</p>\n\n<p>Even if you wrote your own type that was a SFINAE-friendly version of that specification, you wouldn't be able to catch user specializations of <code>pointer_traits</code> for their own type. Sad panda. </p>\n"}], "owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43243562, "answer_count": 1, "score": 3, "last_activity_date": 1491437265, "creation_date": 1491434149, "last_edit_date": 1491437197, "question_id": 43243129, "link": "https://stackoverflow.com/questions/43243129/testing-if-stdpointer-traits-can-work-with-my-type", "title": "Testing if std::pointer_traits can work with my type", "body": "<p>How can I check at compile-time whether or not an arbitrary type can be used with <code>std::pointer_traits</code>? I had hoped a simple SFINAE solution might work:</p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct pointer_traits_ready : std::false_type {};\n\ntemplate &lt;typename T&gt;\nstruct pointer_traits_ready&lt;\n         T,\n         std::void_t&lt;typename std::pointer_traits&lt;T&gt;::element_type&gt;\n       &gt; : std::true_type {};\n\nstatic_assert(!pointer_traits_ready&lt;int&gt;::value,\"\");\n</code></pre>\n\n<p>...but this invokes a static assert from within the standard library (ptr_traits.h). Obviously <code>std::is_pointer</code> doesn't accommodate smart pointers.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1491433102, "post_id": 43242967, "comment_id": 73556035, "body": "Why does <code>B</code> need to contain an instance of <code>A</code>?  Why not just create an <code>A</code> for each file you need to open inside <code>read_multiple_files</code> ?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1491433112, "post_id": 43242967, "comment_id": 73556038, "body": "There isn&#39;t anything in your example that couldn&#39;t be accomplished with a free function and a local file stream.  That would give you much more flexibility for handling errors as well."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1491433208, "post_id": 43242967, "comment_id": 73556066, "body": "Have you tried out your code?"}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1491433231, "post_id": 43242967, "comment_id": 73556072, "body": "@donkopotamus That was what I was thinking but wanted to make sure if that is an efficient way to go ?"}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1491433280, "post_id": 43242967, "comment_id": 73556093, "body": "@vantamula yes its fine ... what &quot;inefficiency&quot; are you worried about?"}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1491433411, "post_id": 43242967, "comment_id": 73556124, "body": "@donkopotamus I would have multiple instances of class A object inside read_multiple_files .. causing the stack size to grow"}], "answers": [{"tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": true, "score": 0, "last_activity_date": 1491433528, "creation_date": 1491433528, "answer_id": 43243045, "question_id": 43242967, "link": "https://stackoverflow.com/questions/43242967/how-to-reuse-class-containing-stdifstream/43243045#43243045", "title": "how to reuse class containing std::ifstream?", "body": "<p>This is probably a design issue.  There seems no reason for <code>B</code> to hold an instance of <code>A</code> unless it needs to keep a file handle across  different method calls.</p>\n\n<p>Instead, simply create an <code>A</code> to read each file:</p>\n\n<pre><code>class B {\n   void read_multiple_files() {\n        // read our files\n       auto result = A(\"another_file_1.txt\").read_file();\n       auto result_2 = A(\"another_file_2.txt\").read_file();\n       ...\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 43243045, "answer_count": 1, "score": -1, "last_activity_date": 1491433528, "creation_date": 1491432972, "question_id": 43242967, "link": "https://stackoverflow.com/questions/43242967/how-to-reuse-class-containing-stdifstream", "title": "how to reuse class containing std::ifstream?", "body": "<p>I have a class A which handles file by opening, reading and closing. I also have another class B that use A to read file. B has instance of A as private member data. I want to reuse the <code>a</code> and use it to read multiple files using this instance. I also read some where that we cannot copy any of the stream. So my question is how can I handle class A to read multiple files in B? </p>\n\n<pre><code>class A{\n   A(std::string s){\n      f.open(s);\n   }\n   void read_file(){\n        /// read file\n\n        // close after reading\n        f.close();\n    }\nprivate:\n   std::ifstream f;\n};\n\nclass B{\n   B(std::string s_):a(s_){}\n\n   void read_multiple_files(){\n       a.read_file();\n        // now lets read another file\n       a = A(\"another_file_1.txt\");\n       a.read_file();\n       ////////////////////\n        // now lets read another file\n       a = A(\"another_file_2.txt\");\n       a.read_file();\n   }\nprivate:\n    A a\n};\n</code></pre>\n"}, {"tags": ["c++", "variadic-templates", "constexpr", "c++17", "fold"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 5, "creation_date": 1491433002, "post_id": 43242923, "comment_id": 73556000, "body": "Fold expressions are C++17 only. Are you asking how to replace the fold expression and have <code>constexpr</code>-ness in C++14?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1491433058, "post_id": 43242923, "comment_id": 73556022, "body": "Also you probably want <code>[=]</code>, not <code>[&amp;]</code>..."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1491433108, "post_id": 43242923, "comment_id": 73556037, "body": "@VittorioRomeo No, I want t to keep the fold expression, but achieve the <code>constexpr</code>ness in the sense of C++14."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1491433169, "post_id": 43242923, "comment_id": 73556059, "body": "@Barry Thank your for noting that."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1491433202, "post_id": 43242923, "comment_id": 73556064, "body": "You never <i>have</i> to use lambda expressions. You&#39;re always more than welcome to create your own functor type, which can be just as constexpr as you care to make it."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1491433439, "post_id": 43242923, "comment_id": 73556131, "body": "@KerrekSB What do you suggest?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1491433485, "post_id": 43242923, "comment_id": 73556150, "body": "It looks like when compilers fully support C++ 17, you&#39;d be able to do this simply: <a href=\"http://stackoverflow.com/a/38848385/1896169\">stackoverflow.com/a/38848385/1896169</a> . <code>[=](float x, float y) constexpr { return (... * fs(x, y)); };</code>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1491433513, "post_id": 43242923, "comment_id": 73556157, "body": "@0xbadf00d: Write your own functor template?"}], "answers": [{"comments": [{"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1491433882, "post_id": 43243060, "comment_id": 73556245, "body": "My compiler is the one shipped with Visual Studio 2017. As many other compilers, MSVC only partially supports C++17 until now. So, as I&#39;ve written in the question, I want to keep the fold expression, but achieve <code>constexpr</code>ness in the sense of C++14 (since MSVC doesn&#39;t support <code>constexpr</code> lambdas)."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 2, "creation_date": 1491434162, "post_id": 43243060, "comment_id": 73556325, "body": "@0xbadf00d I don&#39;t understand the obsession with fold expressions that you want to bend over backwards to do it."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1491435146, "post_id": 43243060, "comment_id": 73556578, "body": "@Vittorio Why do you derive from the functions? Why not use a <code>std::tuple</code>? It just seems like a defect to me - you can&#39;t have final function objects and you can&#39;t use the same function class twice."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1491519385, "post_id": 43243060, "comment_id": 73602659, "body": "@Justin empty base optimization I&#39;d guess."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1491433650, "creation_date": 1491433650, "answer_id": 43243060, "question_id": 43242923, "link": "https://stackoverflow.com/questions/43242923/product-of-functions-with-a-fold-expression/43243060#43243060", "title": "Product of functions with a fold expression", "body": "<p>If you can use <em>fold expressions</em>, it means that your compiler supports C++17. If your compiler supports C++17, <em>lambda expressions</em> are implicitly <code>constexpr</code> where possible. I'm assuming that you need a C++14 solution.</p>\n\n<hr>\n\n<p>Just remember that <em>lambda expressions</em> are just syntactic sugar for <em>function objects</em> with overloaded <code>operator()</code>.</p>\n\n<p>Here's a C++14 solution that uses <code>initializer_list</code> for the variadic expansion.</p>\n\n<pre><code>template &lt;typename... TFs&gt;\nstruct product_of_fn : TFs...\n{\n    template &lt;typename... TFFwds&gt;\n    constexpr product_of_fn(TFFwds&amp;&amp;... fs) : TFs(std::forward&lt;TFFwds&gt;(fs))... { }\n\n    constexpr auto operator()(float x, float y)\n    {\n        std::initializer_list&lt;float&gt; results{static_cast&lt;TFs&amp;&gt;(*this)(x, y)...};\n        float acc = 1;\n        for(auto x : results) acc *= x;\n        return acc;\n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>template&lt;int&gt;\nstruct adder\n{\n    constexpr auto operator()(float x, float y){ return x + y; }\n};\n\ntemplate&lt;typename... TFs&gt;\nconstexpr auto product_of(TFs&amp;&amp;... fs) {\n    return product_of_fn&lt;std::decay_t&lt;TFs&gt;...&gt;(std::forward&lt;TFs&gt;(fs)...);\n}\n\nint main()\n{\n    auto f = product_of(adder&lt;0&gt;{}, adder&lt;1&gt;{});\n\n    static_assert(f(1, 2) == 3 * 3);\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/R269r9ofQzppmRK3\" rel=\"nofollow noreferrer\"><strong>live example on wandbox</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 1, "last_activity_date": 1491436047, "last_edit_date": 1495540950, "creation_date": 1491434913, "answer_id": 43243240, "question_id": 43242923, "link": "https://stackoverflow.com/questions/43242923/product-of-functions-with-a-fold-expression/43243240#43243240", "title": "Product of functions with a fold expression", "body": "<p>If you really want to bend over backwards to use a fold expression, you can still do it. You will need an auxiliary function class:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;typename... Fs&gt;\nclass product_of_fn\n{\n    std::tuple&lt;Fs...&gt; fs;\npublic:\n    template&lt;typename... FsFwd&gt;\n    constexpr explicit product_of_fn(FsFwd &amp;&amp;... fs)\n        : fs{ std::forward&lt;FsFwd&gt;(fs)... }\n    {}\n\n    constexpr auto operator()(float x, float y) {\n        return impl(x, y, std::make_index_sequence&lt;sizeof...(Fs)&gt;{});\n    }\nprivate:\n    template&lt;std::size_t... Is&gt;\n    constexpr auto impl(float x, float y, std::index_sequence&lt;Is...&gt;) {\n        return (... * std::get&lt;Is&gt;(fs)(x, y));\n    }\n};\n</code></pre>\n\n<p>Usage (using <a href=\"https://stackoverflow.com/a/43243060/1896169\">@VittorioRomeo</a>'s example)</p>\n\n<pre><code>template&lt;typename... Fs&gt;\nconstexpr auto product_of(Fs... fs) {\n    return product_of_fn&lt;std::decay_t&lt;Fs&gt;...&gt;{ std::forward&lt;Fs&gt;(fs)... };\n}\n\ntemplate&lt;int&gt;\nstruct adder\n{\n    constexpr auto operator()(float x, float y) { return x + y; }\n};\n\nint main()\n{\n    auto f = product_of(adder&lt;0&gt;{}, adder&lt;1&gt;{});\n\n    static_assert(f(1, 2) == 3 * 3);\n}\n</code></pre>\n\n<p>The idea is pretty much exactly the same as Vittorio's, except we use a <code>std::tuple</code> so that we can use the <code>product_of</code> function with function objects whose types are <code>final</code>, as well as multiple functions of the same type.</p>\n\n<p>A <code>std::index_sequence</code> is used to re-obtain a parameter pack just so that we can do a fold expression.</p>\n\n<hr>\n\n<p>Simply converting Vittorio's solution works as well, but with the caveats I mentioned (none of <code>Fs</code> can be final or the same):</p>\n\n<pre><code>#include &lt;utility&gt;\n\ntemplate&lt;typename... Fs&gt;\nclass product_of_fn : Fs...\n{\npublic:\n    template&lt;typename... FsFwd&gt;\n    constexpr explicit product_of_fn(FsFwd &amp;&amp;... fs)\n        : Fs{ std::forward&lt;FsFwd&gt;(fs) }...\n    {}\n\n    constexpr auto operator()(float x, float y) {\n        return (... * static_cast&lt;Fs &amp;&gt;(*this)(x, y));\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1162, "favorite_count": 0, "accepted_answer_id": 43243240, "answer_count": 2, "score": 1, "last_activity_date": 1491436047, "creation_date": 1491432751, "last_edit_date": 1491433227, "question_id": 43242923, "link": "https://stackoverflow.com/questions/43242923/product-of-functions-with-a-fold-expression", "title": "Product of functions with a fold expression", "body": "<p>I want to write a function which takes an arbitrary number of functions of the form <code>float(float, float)</code> and yields a callable object (e.g. a lambda expression) which represents the product (in the mathematical sense) of these functions.</p>\n\n<p>We can do this, for example, in the following way:</p>\n\n<pre><code>template&lt;typename... BinaryFunctions&gt;\nauto product_of(BinaryFunctions... fs) {\n    return [=](float x, float y) { return (... * fs(x, y)); };\n}\n</code></pre>\n\n<p>However, until C++17, the returned lambda is not a <code>constexpr</code> even when the <code>fs</code> are. So, the question is: I want to keep the fold expression, but how can I modify <code>product_of</code> such that the returned callable object is a <code>constexpr</code> in the sense of C++14?</p>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1491432290, "post_id": 43242818, "comment_id": 73555750, "body": "I think using <code>using</code> or <code>typedef</code> would simplify this a lot."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1491432585, "post_id": 43242818, "comment_id": 73555850, "body": "Why resize them? Why not create them the correct size, except for the 4th, and then resize that&gt;"}, {"owner": {"reputation": 11, "user_id": 6929831, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/766625530144613/picture?type=large", "display_name": "Fabia Bushra Tamanna", "link": "https://stackoverflow.com/users/6929831/fabia-bushra-tamanna"}, "edited": false, "score": 0, "creation_date": 1491432835, "post_id": 43242818, "comment_id": 73555938, "body": "because this vector has to be global and I think I can only declare the size of a vector inside a function @NeilButterworth"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1491432916, "post_id": 43242818, "comment_id": 73555967, "body": "&quot;I think I can only declare the size of a vector inside a function&quot; Nope. And I&#39;m pretty sure it doesn&#39;t have to be global."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491432965, "post_id": 43242818, "comment_id": 73555987, "body": "@FabiaBushraTamanna --  <i>I can&#39;t access any element from dimension 3</i> -- What error do you get?  A compiler error?  Runtime error?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1491433071, "post_id": 43242818, "comment_id": 73556025, "body": "Can I talk you into a nice, 1 dimensional vector with in a wrapper class that makes it look like a 4D array? Hell of a lot easier to use. Probably faster, too."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491433222, "post_id": 43242818, "comment_id": 73556069, "body": "After applying somewhat sane <code>typedef</code>&#39;s, <a href=\"http://ideone.com/6V8a5n\" rel=\"nofollow noreferrer\">cannot duplicate</a>.  The code above accesses the 3 dimensions with no issue.  So is it a runtime error you&#39;re getting, and not something to do with syntax?"}, {"owner": {"reputation": 11, "user_id": 6929831, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/766625530144613/picture?type=large", "display_name": "Fabia Bushra Tamanna", "link": "https://stackoverflow.com/users/6929831/fabia-bushra-tamanna"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491433453, "post_id": 43242818, "comment_id": 73556133, "body": "no I tried to insert element using vec[i][j][1].insert(). But no suggestion comes up, that means I couldn&#39;t allocate any space for that vector position @PaulMcKenzie"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491433573, "post_id": 43242818, "comment_id": 73556176, "body": "If you&#39;re going by IDE suggestions, change your code to <code>auto&amp; v1 = vec[i][j][1];</code>.  Then call <code>v1.insert(whatever);</code>"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1491435595, "post_id": 43242818, "comment_id": 73556707, "body": "This is a cache locality nightmare.  Until you know the 4th dimension, your structure cannot store any data, apart from a whole bunch of structure and pointers.  You&#39;re better off writing a simple class to keep your actual data in a single allocated block.  You can then use <code>std::valarray</code> or similar to interact with the data via whatever indexing methods you choose to provide."}, {"owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "edited": false, "score": 0, "creation_date": 1491439651, "post_id": 43242818, "comment_id": 73557748, "body": "<a href=\"https://stackoverflow.com/questions/35008089/elegantly-define-multi-dimensional-array-in-modern-c\" title=\"elegantly define multi dimensional array in modern c\">stackoverflow.com/questions/35008089/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 6929831, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/766625530144613/picture?type=large", "display_name": "Fabia Bushra Tamanna", "link": "https://stackoverflow.com/users/6929831/fabia-bushra-tamanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491432136, "creation_date": 1491432136, "question_id": 43242818, "link": "https://stackoverflow.com/questions/43242818/c-resizing-a-4d-stl-vector", "title": "C++ resizing a 4D stl vector", "body": "<p>I have a 4D vector of following type: </p>\n\n<p><code>vector&lt; vector&lt; vector&lt; vector&lt; unsigned &gt; &gt; &gt; &gt; vec</code>\nI don't know the size of the 4th dimension at the beginning, so I am trying to resize the first 3 dimension in the following way:</p>\n\n<pre><code>vec.resize(x.size(), vector&lt; vector&lt; vector&lt; unsigned &gt; &gt; &gt;\n(y.size(), vector&lt; vector&lt; unsigned &gt; &gt;(2)));\n</code></pre>\n\n<p>where x and y are of type <code>vector&lt;unsigned&gt;</code></p>\n\n<p>After I resized the first 3 dimensions in the above way mentioned I can't access any element from dimension 3(i.e <code>vec[i][j][1]</code>).</p>\n\n<p>Can anyone please suggest what am I missing here?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1491431908, "post_id": 43242714, "comment_id": 73555655, "body": "Before doing this, do you have a working copy constructor (that does not call the assignment operator) and destructor?  If so, the assignment operator is simple.  If not, write those two functions first, the assignment operator leave for last (since it will be simple)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5723057"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491432355, "post_id": 43242714, "comment_id": 73555769, "body": "@PaulMcKenzie I do have a copy constructor and destructor for this class."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1491432736, "post_id": 43242714, "comment_id": 73555892, "body": "Extending on Paul McKenzie&#39;s comment, make use of other stuff you have written. For example, if you already have an insert function for adding coefficients, call it to add copies of the source polynomial&#39;s coefficients. Why write the code twice? Here is an explanation of the simplification Paul McKenzie&#39;s talking about: <a href=\"http://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">What is the copy-and-swap idiom?</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491433410, "post_id": 43242714, "comment_id": 73556123, "body": "Yes, the assignment operator would only consist of creating a temp object, swapping 4 things from the temp to <code>*this</code>, and then returning <code>*this;</code>.  Much easier, safer, and guaranteed to work (providing you have a correct copy constructor and destructor) than writing frightening pointer code twice (once in the copy ctor and again for the assignment op)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491433853, "post_id": 43242714, "comment_id": 73556236, "body": "@Dabera For more reference and a good example, see <a href=\"http://stackoverflow.com/questions/42451647/how-to-implement-an-assignment-operator-in-linked-list-class\">this question and answer</a>"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1491438808, "post_id": 43242714, "comment_id": 73557519, "body": "<code>delete this;</code> is not appropriate here because you want the object to remain valid after the function returns.  <code>delete this</code> is also completely undefined behavior is the object is an automatic variable (allocated on the stack).  Any access to members after <code>delete this;</code> is also invalid."}], "owner": {"user_type": "does_not_exist", "display_name": "user5723057"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491431527, "creation_date": 1491431527, "question_id": 43242714, "link": "https://stackoverflow.com/questions/43242714/circular-linked-list-assignment-operator", "title": "circular linked list assignment operator", "body": "<p>I need to implement the assignment operator = on a circular linked list and here is the struct and my code so far. But i am not sure how to copy the coefficient and the power  </p>\n\n<pre><code>struct Term {                             // a term on the sparce polynomial\n\n    double coeff;                         // the coefficient of each term\n\n    int power;                                    // the degree of each term\n\n    Term *prev;                     // a pointer to the previous higher term\n    Term *next;                          // a pointer to the next lower term\n};\nint size;                               // # terms in the sparce polynomial\nTerm *head;               // a pointer to the doubly-linked circular list of\n\nPolynomial&amp; Polynomial::operator=(const Polynomial &amp;rightpoly){\n\n // check for self assignment\n if(&amp;rightpoly !=this){\n     // clear this\n     if(head !=NULL)\n         delete this;\n     if(rightpoly.head == NULL)\n         return *this;\n     // make new node for the head\n     Term *ptr = new Term;\n\n     head = ptr;\n     Term *curRight = rightpoly.head -&gt;next;\n     Term *curLeft = ptr;\n\n     // traverse the list, making a new node and copying data\n     // until rightpoly is empty\n     while (curRight !=NULL) {\n         curLeft -&gt;next = new Term;\n         curLeft = curLeft -&gt;next;\n         curRight = curRight -&gt;next;\n     }\n     curLeft -&gt;next = NULL;\n }\n return *this;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1491431472, "post_id": 43242682, "comment_id": 73555510, "body": "<code>(*last).next=fin</code> -- You could have simply written this as <code>last-&gt;next = fin;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1491431517, "post_id": 43242682, "comment_id": 73555521, "body": "Did you write a non-templated version of this class before you attempted the templated one?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1491431519, "post_id": 43242682, "comment_id": 73555522, "body": "I am going to guess that <code>last</code> is not initialized properly. It&#39;s hard telling what could be wrong without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 899, "user_id": 3108270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100006160059233/picture?type=large", "display_name": "alDiablo", "link": "https://stackoverflow.com/users/3108270/aldiablo"}, "edited": false, "score": 0, "creation_date": 1491431830, "post_id": 43242682, "comment_id": 73555632, "body": "Where is your <code>last</code> defined?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1491432010, "post_id": 43242682, "comment_id": 73555681, "body": "<code>SimpleList&lt;T&gt;::in_node_l();</code> assigns to the global variable <code>last</code>. This has nothing to do with <code>this-&gt;last</code>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1491432061, "post_id": 43242682, "comment_id": 73555693, "body": "<code>fin</code> is assigned twice, and <code>last-&gt;next</code> is lost..."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1570720844, "post_id": 43242682, "comment_id": 103010926, "body": "Please <a href=\"https://stackoverflow.com/posts/43242682/edit\">edit</a> your question to show us what kind of debugging you&#39;ve done.  I expect you to have run your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> within Valgrind or a similar checker, and to have investigated with a debugger such as GDB, for example.  Ensure you&#39;ve enabled a full set of compiler warnings, too.  What did the tools tell you, and what information are they missing?  And read Eric Lippert&#39;s <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "owner": {"reputation": 79, "user_id": 7795562, "user_type": "registered", "profile_image": "https://graph.facebook.com/1434464229938604/picture?type=large", "display_name": "Varouzan Knouni", "link": "https://stackoverflow.com/users/7795562/varouzan-knouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1491432028, "creation_date": 1491431305, "last_edit_date": 1491432028, "question_id": 43242682, "link": "https://stackoverflow.com/questions/43242682/segmentation-fault-core-dumped-issue-c-dynamic-memory", "title": "Segmentation fault (core dumped) issue c++: dynamic memory", "body": "<pre><code> template&lt;class T&gt;\n   void SimpleList&lt;T&gt;::in_node_l(void){\n       Node* fin;\n       fin=new Node;\n       (*last).next=fin;\n       last=fin;        \n       size++;\n}\n</code></pre>\n\n<p>I get Segmentation fault(core dumped) error when in_node_l member function is called by the function push </p>\n\n<pre><code> template&lt;class T&gt;\n   void stack&lt;T&gt;::push(T var){\n       SimpleList&lt;T&gt;::in_node_l();\n       (*(this-&gt;last)).data=var;\n       position++;\n       return;\n  } \n</code></pre>\n\n<p>stack is a derived class :    </p>\n\n<pre><code>    class stack : public SimpleList&lt;T&gt;\n</code></pre>\n\n<p>Node is declared as</p>\n\n<pre><code>template&lt;class T&gt;\nstruct SimpleList&lt;T&gt;::Node{\n  T data;\n  Node* next;\n };\n</code></pre>\n\n<p>if I call in_node_l in main however I do not get any errors.</p>\n\n<p>the constructor for class stack is:</p>\n\n<pre><code>template&lt;class T&gt;\n\nstack&lt;T&gt;::stack(int s,string n)\n:SimpleList&lt;T&gt;(s,n)\n{\n  position=1;\n}\n</code></pre>\n\n<p>constructor for SimpleList is given by</p>\n\n<pre><code>template&lt;class T&gt;\nSimpleList&lt;T&gt;::SimpleList(int s,string n){\nint i;\n//name= input name\nNode *prev,*current;\nsize=s;\nname=n;\nif(s==1){\n    current=new Node;\n    first=current;\n    last=current;\n    cout&lt;&lt;\"SIMPLELIST CONSTRUCTUR\"&lt;&lt;endl;\n}\nelse{\n    for (i=1;i&lt;s;i++){\n        current=new Node;\n        if(i==1){\n            first=current;\n        }\n        else{\n            (*prev).next=current;\n            if(i==s-1){\n                last=current;\n                if(last=(*prev).next){\n                    cout&lt;&lt;\"SIMPLELIST CONSTRUCTUR2\"&lt;&lt;endl;\n                }       \n            }\n        }\n        prev=current;\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "edited": false, "score": 0, "creation_date": 1491458673, "post_id": 43242469, "comment_id": 73563216, "body": "Thanks for the tip and pointing me to the right post."}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 3, "last_activity_date": 1491430520, "creation_date": 1491430520, "answer_id": 43242530, "question_id": 43242469, "link": "https://stackoverflow.com/questions/43242469/function-specialization-with-array-argument/43242530#43242530", "title": "Function specialization with array argument", "body": "<p>It is not possible to specialize function templates partially, so you will probably have to use a separate overload.</p>\n"}], "owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1491430716, "answer_count": 1, "score": 2, "last_activity_date": 1491430520, "creation_date": 1491430200, "question_id": 43242469, "link": "https://stackoverflow.com/questions/43242469/function-specialization-with-array-argument", "closed_reason": "Duplicate", "title": "Function specialization with array argument", "body": "<p>Is it possible to specialize a function for a specific array type?</p>\n\n<p>For example having a template function:</p>\n\n<pre><code>template &lt;typename T, size_t size&gt;\nvoid process(T (&amp;arr)[size])\n{\n    // do smth\n}\n</code></pre>\n\n<p>Could a function specialization for <code>T=uint8_t</code> be done in such case? Or is the only reasonable solution here to use an overload like the one below?</p>\n\n<pre><code>template &lt;size_t size&gt;\nvoid process(uint8_t (&amp;arr)[size])\n{\n    // do smth else\n}\n</code></pre>\n\n<p>Thanks for suggestions and comments.</p>\n"}, {"tags": ["c++", "winapi", "active-directory"], "owner": {"reputation": 31, "user_id": 425503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adf2d03813e1b33b9d6395f11712bf3?s=128&d=identicon&r=PG", "display_name": "user425503", "link": "https://stackoverflow.com/users/425503/user425503"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491429864, "creation_date": 1491429864, "question_id": 43242415, "link": "https://stackoverflow.com/questions/43242415/winapi-remote-update-of-cached-domain-credentials-using-logon", "title": "WINAPI remote update of cached domain credentials using logon", "body": "<p>I want to remotely update cached logon credentials for windows. I checked Ntsecapi.h to see if I could create a logon session remotely which could trigger this however I lack some good ideas. Anyone?</p>\n"}, {"tags": ["c++", "random", "do-while"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1491429106, "post_id": 43242237, "comment_id": 73554608, "body": "I do mind your poor formatting. Being new does not prevent you from spending some time and effort to format your code nicely. You can look at any number of existing, successful questions for examples. Stack Overflow has an excellent live post preview, so you can spend as much time as you need to make the post look good."}, {"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 1, "creation_date": 1491429221, "post_id": 43242237, "comment_id": 73554657, "body": "<code>if(retry==&#39;y&#39; || &#39;Y&#39;)</code> this doesnt do what you think it does"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7823259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c071a4c34b309190526c2f4288998948?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Ahapow", "link": "https://stackoverflow.com/users/7823259/cory-ahapow"}, "edited": false, "score": 0, "creation_date": 1491429699, "post_id": 43242320, "comment_id": 73554868, "body": "Thank you, I didn&#39;t even realize that. I edited my code, but it still does not restart the loop when the player types it in. I will continue looking for the problem. Thank you again!"}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 3, "user_id": 7823259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c071a4c34b309190526c2f4288998948?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Ahapow", "link": "https://stackoverflow.com/users/7823259/cory-ahapow"}, "edited": false, "score": 0, "creation_date": 1491431855, "post_id": 43242320, "comment_id": 73555643, "body": "@CoryAhapow If my answer worked, please select the checkmark next to my answer. It should turn green when you do so. Thanks!"}], "tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": false, "score": 2, "last_activity_date": 1491429378, "creation_date": 1491429378, "answer_id": 43242320, "question_id": 43242237, "link": "https://stackoverflow.com/questions/43242237/what-is-wrong-with-my-do-while-logic-and-continue-logic/43242320#43242320", "title": "What is wrong with my do...while logic, and continue logic?", "body": "<blockquote>\n<pre><code>if (retry == 'y' || 'Y')\n</code></pre>\n</blockquote>\n\n<p>This is incorrect logic, which is why your code does not work the way you want it to. You want it to be:</p>\n\n<pre><code>if (retry == 'y' || retry == 'Y')\n</code></pre>\n\n<p>Fix this logic error in your other if-else statements as well.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7823259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c071a4c34b309190526c2f4288998948?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Ahapow", "link": "https://stackoverflow.com/users/7823259/cory-ahapow"}, "edited": false, "score": 0, "creation_date": 1491432786, "post_id": 43242721, "comment_id": 73555914, "body": "Thank you for explaining. I couldn&#39;t see what was going on. I didn&#39;t know I had to reset the guess as well. Is the reason why I had to reset it because when it continued, it&#39;d check if guess was equal to random, and since the player got it right, it would automatically be false, exiting the while?"}], "tags": [], "owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1491431565, "creation_date": 1491431565, "answer_id": 43242721, "question_id": 43242237, "link": "https://stackoverflow.com/questions/43242237/what-is-wrong-with-my-do-while-logic-and-continue-logic/43242721#43242721", "title": "What is wrong with my do...while logic, and continue logic?", "body": "<p>You'll wanna take a look at <a href=\"http://en.cppreference.com/w/cpp/language/continue\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>Your <code>continue</code> statement is jumping to the end and checking the condition, <code>guess != random</code>, which evaluates to false and exits the <code>do while</code>. What you need to do is reset guess to a value such as 0 so that the condition does evaluate to <code>true</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7823259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c071a4c34b309190526c2f4288998948?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Ahapow", "link": "https://stackoverflow.com/users/7823259/cory-ahapow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43242721, "answer_count": 2, "score": -3, "last_activity_date": 1491432924, "creation_date": 1491429003, "last_edit_date": 1491432924, "question_id": 43242237, "link": "https://stackoverflow.com/questions/43242237/what-is-wrong-with-my-do-while-logic-and-continue-logic", "title": "What is wrong with my do...while logic, and continue logic?", "body": "<p>I'm new to stackoverflow, and also somewhat new to programming, so please don't mind my poor formatting of the code. I have two problems with my code.</p>\n\n<ol>\n<li>My continue statement, which I'm using to continue the loop if the player types 'y' or 'Y', doesn't work. It terminates the program after <em>only</em> getting the guess correctly, which leads me to: </li>\n</ol>\n\n<p>2.My continue counter goes past 0 without stopping, and I just can't see my error in the logic of the program.</p>\n\n<p>I can't see the problems with my logic.</p>\n\n<pre><code>    #include \"stdafx.h\"\n    #include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;ctime&gt;\n    #include &lt;random&gt;\n\n    using namespace std;\n\n    int getNumber(); //random number prototype\n    double getScore(); //gets score\n    int chances = 7; //chances to guess with\n    int main()\n    {\n    int guess = 0, \n        random;\n    char retry = 'y'; //initialize retry to 'y'\n    cout &lt;&lt; \"This is a random number guessing game. \" &lt;&lt; \"You will be guessing between 1-100.\"\n     &lt;&lt; \"You have 7 chances. Good luck! \\n \\n\" &lt;&lt; endl;\n\n\n    random = getNumber(); //give the function a variable\n\n  do\n  {\n\n    cout &lt;&lt; random &lt;&lt; \"\\n\" &lt;&lt; \"\\n\";\n    chances--;\n\n    cout &lt;&lt; \"Enter your guess: \";\n    cin &gt;&gt; guess;\n\n        if (guess == random)\n        {\n            cout &lt;&lt; \"You have won the game! \" &lt;&lt; \"Your score was: \" &lt;&lt; getScore();\n\n            cout &lt;&lt; \"Would you like to retry? (Y or N): \";\n            cin &gt;&gt; retry;\n\n            if (retry == 'y' || retry == 'Y')\n            {\n                chances = 7;\n                guess = 0;\n                getNumber();\n                continue; //player can retry the game\n            }\n            else if (chances == 0)\n            {\n                cout &lt;&lt; \"You have no chances left. Retry? (Y or N): \";\n                    cin &gt;&gt; retry;\n                if (retry == 'y' || retry == 'Y')\n                {\n                    chances = 7;\n                    guess = 0;\n                    getNumber();\n                    continue;\n                }\n            }\n\n                return 0;\n        }\n        else if (guess != random)\n            cout &lt;&lt; \"You got it wrong. \\n\" &lt;&lt; \"You have: \" &lt;&lt; chances &lt;&lt; \" chances left\" &lt;&lt; endl &lt;&lt; endl;\n        else\n            cout &lt;&lt; \"Incorrect Input. Please type a number.\" &lt;&lt; endl &lt;&lt; endl;\n   } while (guess != random);\n\n\nreturn 0;\n}\n\n int getNumber()\n    {\n     unsigned seed = time(0); //seed the random number\n     srand(seed);\n\n     int randNum = rand() % 10 + 1; //random number in the range of 1-10\n     return randNum;\n    }\n</code></pre>\n"}, {"tags": ["c++", "function", "class", "pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1491428993, "post_id": 43242215, "comment_id": 73554569, "body": "Please indent your code properly."}, {"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491429257, "post_id": 43242215, "comment_id": 73554686, "body": "How do you do that I just used ctrl k."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1491429458, "post_id": 43242215, "comment_id": 73554783, "body": "Have you heard of constructors? Where are you learning this stuff from?"}, {"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491429561, "post_id": 43242215, "comment_id": 73554830, "body": "Yes I know about constructor and destructor but I dont normally use them. Would this make it work?"}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 0, "creation_date": 1491429636, "post_id": 43242215, "comment_id": 73554853, "body": "The line      <code>LWgt = new double*[26];</code>  allocates 26 elements each of type pointer-to-double.  None of those elements point to anything."}, {"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491429710, "post_id": 43242215, "comment_id": 73554874, "body": "I also cannot initialise each object with a constructor or see how to with an array of objects so I just use init()."}, {"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491429771, "post_id": 43242215, "comment_id": 73554902, "body": "Yes but if I try and initialise it in init() I get a segfault."}, {"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491429828, "post_id": 43242215, "comment_id": 73554916, "body": "Any suggestions on the correct way of doing this though?"}, {"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491430252, "post_id": 43242215, "comment_id": 73555077, "body": "There is nothing incongruent with the following <a href=\"http://www.cplusplus.com/doc/tutorial/pointers/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/pointers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "edited": false, "score": 0, "creation_date": 1491431629, "post_id": 43242471, "comment_id": 73555562, "body": "Brilliant thanks for that its so obvious now that I think about it - I need to treat the pointer array as an array like any other. Thankyou."}], "tags": [], "owner": {"reputation": 25748, "user_id": 1334007, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/x29d6.png?s=128&g=1", "display_name": "d512", "link": "https://stackoverflow.com/users/1334007/d512"}, "is_accepted": true, "score": 0, "last_activity_date": 1491430551, "last_edit_date": 1491430551, "creation_date": 1491430218, "answer_id": 43242471, "question_id": 43242215, "link": "https://stackoverflow.com/questions/43242215/how-to-correctly-initialise-pointers-within-class-function/43242471#43242471", "title": "How to correctly initialise pointers within class function?", "body": "<p>That's because none of the pointers stored inside <code>LWgt</code> actually point to anything valid yet. Remember that a pointer will be initialized by the runtime with some random value that may or may not be a valid address. When you try to stuff a value inside an invalid address you're going to get an error.</p>\n\n<p>You need to initialize the pointers inside <code>LWgt</code> to point to some actual <code>double</code> memory locations before you can assign any values to them:</p>\n\n<pre><code>void init() {\n    Wgt = new double[26];\n    LWgt = new double*[26];\n\n    for(int i = 0; i &lt; 26; i++)\n        LWgt[i] = new double;\n\n    //segfault from here\n    *LWgt[5] = 22.34543; \n}\n</code></pre>\n\n<p>As a side note, this kind of initialization is probably best done inside a constructor for your class rather than a special initialization function. The point of constructors is that they always run automatically when the class is instantiated. You don't have to worry about remembering to call an init function right after you create the object.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user208608"}, "is_accepted": false, "score": 0, "last_activity_date": 1491430253, "creation_date": 1491430253, "answer_id": 43242481, "question_id": 43242215, "link": "https://stackoverflow.com/questions/43242215/how-to-correctly-initialise-pointers-within-class-function/43242481#43242481", "title": "How to correctly initialise pointers within class function?", "body": "<p>Lwgt is an array of pointers to double.  You'd have to allocate each element in the array or remove the ** in the declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1491430545, "creation_date": 1491430545, "answer_id": 43242536, "question_id": 43242215, "link": "https://stackoverflow.com/questions/43242215/how-to-correctly-initialise-pointers-within-class-function/43242536#43242536", "title": "How to correctly initialise pointers within class function?", "body": "<pre><code>    LWgt = new double*[26];\n</code></pre>\n\n<p>allocates memory for 26 <code>double*</code> but does not allocate memory for the pointers themselves.</p>\n\n<p>The line</p>\n\n<pre><code>    *LWgt[5] = 22.34543; \n</code></pre>\n\n<p>causes undefined behavior since memory hasn't been allocated for any of the elements of <code>LWgt</code>.</p>\n\n<p>In order to be able to use that, you have to allocate memory for <code>LWgt[5]</code> first.</p>\n\n<pre><code>LWgt[5] = new double[&lt;SOME_SIZE&gt;];  // Allocate an array\n</code></pre>\n\n<p>or</p>\n\n<pre><code>LWgt[5] = new double; // Allocate just one element.\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4429063, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8f795b551e525171de6e1df9877787fe?s=128&d=identicon&r=PG&f=1", "display_name": "hbyte", "link": "https://stackoverflow.com/users/4429063/hbyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 43242471, "answer_count": 3, "score": 0, "last_activity_date": 1491430551, "creation_date": 1491428902, "last_edit_date": 1491429674, "question_id": 43242215, "link": "https://stackoverflow.com/questions/43242215/how-to-correctly-initialise-pointers-within-class-function", "title": "How to correctly initialise pointers within class function?", "body": "<p>I am using a array of pointer's declared within a class to point to another array. When a pointer array element is initialised to a value within main that value is also carried to the array element it is pointing to. The following code show this and it works fine. However if I initialise the pointer within the init class function I get a segfault. Also if I try to access an element from the pointer array not initialised in main I also get a segfault.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass testclass {\npublic:\n    double  *Wgt;\n    double* *LWgt;\n\n    void init() {\n        Wgt = new double[26];\n        LWgt = new double*[26];\n\n        //segfault from here\n        *LWgt[5] = 22.34543; \n    }\n};\n\nint main() {\n\n    testclass *node;\n    node = new testclass[10];\n\n    for (int i = 0; i &lt; 10; i++) {\n        node[i].init();\n    }\n\n    for (int i = 0; i &lt; 5; i++) {               //init_nconn here\n        node[i].LWgt[23] = &amp;node[i + 5].Wgt[12];\n    }\n\n    node[6].Wgt[12] = 50.6987;\n    node[8].Wgt[12] = 0.999923;\n\n    cout &lt;&lt; *node[1].LWgt[23] &lt;&lt; *node[3].LWgt[23] &lt;&lt; \"--\\n\";\n\n    //No segfault\n    *node[1].LWgt[23] = 33.234;\n\n    cout &lt;&lt; node[6].Wgt[12] &lt;&lt; \"---\\n\";\n    //No segfault here\n    cout &lt;&lt; *node[1].LWgt[23] &lt;&lt; \"---\\n\";\n\n    //Segfault from here\n    cout &lt;&lt; *node[3].LWgt[5] &lt;&lt; \"---\\n\";\n}\n</code></pre>\n\n<p>Is there a way to initialise the pointer array within a class function without leading to a segfault?</p>\n"}, {"tags": ["c++", "algorithm", "external-sorting"], "comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 2, "creation_date": 1491430398, "post_id": 43242139, "comment_id": 73555141, "body": "For what it&#39;s worth, <a href=\"https://www.gnu.org/software/coreutils/manual/html_node/sort-invocation.html\" rel=\"nofollow noreferrer\">GNU sort</a> has a <code>-m</code>/<code>--merge</code> option, to merge already-sorted files. It may be easier to use that than to write a new program."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1491431082, "post_id": 43242139, "comment_id": 73555396, "body": "I think as a first step, you should try to find out whether IO or processing (CPU) is the bottleneck here. (iotop?)"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491432749, "post_id": 43242139, "comment_id": 73555898, "body": "<code>file &lt;&lt; lines[index] &lt;&lt; std::endl;</code> This could be an issue. <code>std::endl</code> flushes (at least for the C++ standard library) the internal buffer. Better use <code>&#39;\\n&#39;</code>."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491432957, "post_id": 43242139, "comment_id": 73555984, "body": "Further, the <code>std::all_of</code> is not necessary if you keep a counter of files with more input. Decrease everytime when <code>std::getline</code> in <code>checkRegex</code> fails (due to EOF)."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491433116, "post_id": 43242139, "comment_id": 73556040, "body": "Also I think there&#39;s a bug / corner case: When the regex fails in <code>checkRegex</code>, you&#39;ll end up writing the previous line. <code>lines[index] = line;</code> should probably be run regardless of whether the regex matches or not."}], "answers": [{"comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491430990, "post_id": 43242453, "comment_id": 73555368, "body": "Except for the heap, that&#39;s exactly what the code already does, no?"}, {"owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491431217, "post_id": 43242453, "comment_id": 73555440, "body": "@DanielJour The speed optimisation is the heap.  The memory optimisation is only having <code>N</code> lines in memory at the time, right?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491431482, "post_id": 43242453, "comment_id": 73555513, "body": "I doubt that the heap will bring a real improvement here ... the example in the questions has 82 files. Searching linearly through 82 lines for the smallest one won&#39;t be significantly slower than having to construct a heap and managing the insertions and removals. The code in the question already uses only <code>N</code> lines: <code>std::vector&lt;std::string&gt; lines(cnt);</code> where <code>cnt</code> is the number of files, <code>N</code>."}, {"owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1491432175, "post_id": 43242453, "comment_id": 73555720, "body": "@DanielJour <code>Log2(82)</code> is approx 6.357.  For the current implementation to benefit, the cost of heap management needs to be more than a factor of 12 than current handling.  I don&#39;t know how efficient C++ heaps are, but I think it is worth a shot to try it!"}, {"owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "edited": false, "score": 0, "creation_date": 1491467549, "post_id": 43242453, "comment_id": 73568614, "body": "Thank you very much to both of you for the tips. I have a doubt about using the heap. How can I link the min value (related with the timestamp of the line) in the heap with the line to insert into the file? The first idea that come up in my mind is to use an heap where each element is a <code>std::pair&lt;unsigned long, std::string&gt;</code>. Is it right? or is there another better solution?"}, {"owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "reply_to_user": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "edited": false, "score": 0, "creation_date": 1491513105, "post_id": 43242453, "comment_id": 73600244, "body": "@BugsFree Yes, I would do something like that.  They need to be stored together."}], "tags": [], "owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "is_accepted": false, "score": 2, "last_activity_date": 1491430365, "last_edit_date": 1491430365, "creation_date": 1491430063, "answer_id": 43242453, "question_id": 43242139, "link": "https://stackoverflow.com/questions/43242139/merge-n-log-files-maintaining-the-chronological-order/43242453#43242453", "title": "Merge N log files maintaining the chronological order", "body": "<p>This can be done faster and with low memory.  Consider first:</p>\n\n<ul>\n<li>Read a single line from each file (so only <code>N</code> lines are in memory at any one time).</li>\n<li>Find the smallest of the <code>N</code> lines, output it.</li>\n<li>In memory, replace the value just output with the next line from the file that the current output came from (take care of the EOF case).</li>\n</ul>\n\n<p>If <code>M</code> is the length of your output file (ie the length of all logs combined), then the trivial implementation would be <code>O(N * M)</code>.</p>\n\n<p>However, the above can be improved by using a heap, which reduces the time to <code>O(M log N)</code>.  That is, put the <code>N</code> in-memory elements on the heap.  Pop off the top one to output the smallest element.  Then, when you read a new line, just throw the line back on the heap.</p>\n"}], "owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491490649, "creation_date": 1491428554, "last_edit_date": 1491490649, "question_id": 43242139, "link": "https://stackoverflow.com/questions/43242139/merge-n-log-files-maintaining-the-chronological-order", "title": "Merge N log files maintaining the chronological order", "body": "<p>I have N different log files coming from N different services running on our device. I want to merge the N files into a single file maintaining the chronological order. The file size can vary from few KB to GB.</p>\n\n<p>The N log files have the same format, and it is like:</p>\n\n<pre><code>**********  LOGGING SESSION STARTED ************\n* Hmsoa Version: 2.4.0.12\n* Exe Path: c:\\program files (x86)\\silicon biosystems\\deparray300a_driver\\deparray300a_driver.exe\n* Exe Version: 1.6.0.154\n************************************************\n\n\nTIME = 2017/02/01 11:12:12,180 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'Connect'-&gt;Enter;\nTIME = 2017/02/01 11:12:12,196 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'Connect'-&gt;Exit=0;\nTIME = 2017/02/01 11:12:12,196 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'CCisProxyLocal CONNECT - ok'-&gt;Enter;\nTIME = 2017/02/01 11:12:12,196 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'CRecoveryAxesProxyLocal CONNECT - ok'-&gt;Enter;\nTIME = 2017/02/01 11:12:12,196 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'CAmplifierProxyLocalV3 CONNECT - ok'-&gt;Enter;\nTIME = 2017/02/01 11:12:12,196 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'SYSTEM_DIAGNOSIS_GET'-&gt;Enter;\nTIME = 2017/02/01 11:12:12,211 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'SYSTEM_DIAGNOSIS_GET'-&gt;Exit=0;\nTIME = 2017/02/01 11:12:12,211 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'LBL_SQUARE_SET'-&gt;Enter;\nTIME = 2017/02/01 11:12:12,219 ; THID = 4924; CAT = ; LVL = 1000; LOG = API 'LBL_SQUARE_SET'-&gt;Exit=0;\n</code></pre>\n\n<p>Since I already have N different files, what I did so far is to apply an external sorting algorithm reading a single line for each file:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"boost/regex.hpp\"\n#include \"boost/lexical_cast.hpp\"\n#include \"boost\\filesystem.hpp\"\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;sstream&gt;\n#include &lt;climits&gt;\n#include &lt;ctime&gt;\nnamespace fs = boost::filesystem;\n\nstatic const boost::regex expression(R\"(^(?:(?:TIME\\s=\\s\\d{4}\\/\\d{2}\\/\\d{2}\\s)|(?:@))([0-9:.,]+))\");\nstatic const boost::regex nameFileEx(R\"(^[\\d\\-\\_]+(\\w+\\s?\\w+|\\w+))\");\nstatic const std::string path(\"E:\\\\2017-02-01\"); \n//static const std::string path(\"E:\\\\TestLog\");\n\nunsigned long time2Milleseconds(const std::string &amp; time)\n{\n    int a, b, c, d;\n    if (sscanf_s(time.c_str(), \"%d:%d:%d,%d\", &amp;a, &amp;b, &amp;c, &amp;d) &gt;= 3)\n        return a * 3600000 + b * 60000 + c * 1000 + d;\n}\n\nvoid readAllFilesUntilLine7(std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; &amp; vifs)\n{\n    std::string line;\n    for (int i = 0; i &lt; vifs.size(); ++i)\n    {\n        int lineNumber = 0;\n        while (lineNumber != 7 &amp;&amp; std::getline(vifs[i].first, line))\n        { \n            ++lineNumber;\n        }\n    }\n}\n\nvoid checkRegex(std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; &amp; vifs, std::vector&lt;unsigned long&gt; &amp; logTime, std::vector&lt;std::string&gt; &amp; lines, int index, int &amp; counter)\n{\n    std::string line;\n    boost::smatch what;\n    if (std::getline(vifs[index].first, line))\n    {\n        if (boost::regex_search(line, what, expression))\n        {\n            logTime[index] = time2Milleseconds(what[1]);\n        }\n        lines[index] = line;\n    }\n    else\n    {\n        --counter;\n        logTime[index] = ULONG_MAX;\n    }\n}\n\nvoid mergeFiles(std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; &amp; vifs, std::vector&lt;unsigned long&gt; &amp; logTime, std::vector&lt;std::string&gt; &amp; lines, std::ofstream &amp; file, int &amp; counter)\n{\n    std::string line;\n    boost::smatch what;\n    int index = 0;\n    for (int i = 0; i &lt; vifs.size(); ++i)\n    {\n        checkRegex(vifs, logTime, lines, i, counter);\n    }\n    index = min_element(logTime.begin(), logTime.end()) - logTime.begin();\n    file &lt;&lt; lines[index] &lt;&lt; \" --&gt; \" &lt;&lt; vifs[index].second &lt;&lt; \"\\n\";\n    while (true)\n    {\n        checkRegex(vifs, logTime, lines, index, counter);\n        index = min_element(logTime.begin(), logTime.end()) - logTime.begin();\n        if (0 == counter)\n            break;\n        file &lt;&lt; lines[index] &lt;&lt; \" --&gt; \" &lt;&lt; vifs[index].second &lt;&lt; \"\\n\";\n    }\n}\n\nint main()\n{\n    clock_t begin = clock();\n    int cnt = std::count_if(fs::directory_iterator(path),fs::directory_iterator(),static_cast&lt;bool(*)(const fs::path&amp;)&gt;(fs::is_regular_file));\n    std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; vifs(cnt);\n    int index = 0;\n    boost::smatch what;\n    std::string file;\n    for (fs::directory_iterator d(path); d != fs::directory_iterator(); ++d)\n    {\n        if (fs::is_regular_file(d-&gt;path()))\n        {\n            file = d-&gt;path().filename().string();\n            if (boost::regex_search(file, what, nameFileEx))\n            {\n                vifs[index++] = std::make_pair(std::ifstream(d-&gt;path().string()), what[1]);\n            }\n        }\n    }\n    std::vector&lt;unsigned long&gt; logTime(cnt, ULONG_MAX);\n    std::vector&lt;std::string&gt; lines(cnt);\n    std::ofstream filename(path + \"\\\\TestLog.txt\");\n    readAllFilesUntilLine7(vifs);\n    mergeFiles(vifs, logTime, lines, filename, cnt);\n    filename.close();\n    clock_t end = clock();\n    double elapsed_secs = double(end - begin) / CLOCKS_PER_SEC;\n    std::cout &lt;&lt; \"Elapsed time = \" &lt;&lt; elapsed_secs &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>It does exactly what it is supposed to do but it is slow. To merge 82 files with sizes ranging from 1 KB to 250 MB and create a final file with more than 6000000 lines it takes 70 minutes.</p>\n\n<p>How can I speed up the algorithm? Any help is greatly appreciated!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I have implemented the version with the heap, too:</p>\n\n<p>Data.h:</p>\n\n<pre><code>#pragma once\n\n#include &lt;string&gt;\n\nclass Data\n{\npublic:\n    Data(DWORD index,\n         const std::string &amp; line,\n         ULONG time);\n    ~Data();\n    inline const ULONG getTime() const  {return time; }\n    inline const DWORD getIndex() const { return index; }\n    inline const std::string getLine() const { return line; }\nprivate:\n    DWORD index;\n    std::string line;\n    ULONG time;\n};\n\nclass Compare\n{\npublic:\n    bool operator()(const Data &amp; lhs, const Data &amp; rhs) { return lhs.getTime() &gt; rhs.getTime(); };\n};\n</code></pre>\n\n<p>Data.cpp:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Data.h\"\n\n\nData::Data(DWORD i_index,\n           const std::string &amp; i_line,\n           ULONG i_time)\n    : index(i_index)\n    , line(i_line)\n    , time(i_time)\n{\n}\n\n\nData::~Data()\n{\n}\n</code></pre>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"boost/regex.hpp\"\n#include \"boost/lexical_cast.hpp\"\n#include \"boost\\filesystem.hpp\"\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;sstream&gt;\n#include &lt;climits&gt;\n#include &lt;ctime&gt;\n#include &lt;queue&gt;\n#include \"Data.h\"\nnamespace fs = boost::filesystem;\n\nstatic const boost::regex expression(R\"(^(?:(?:TIME\\s=\\s\\d{4}\\/\\d{2}\\/\\d{2}\\s)|(?:@))([0-9:.,]+))\");\nstatic const boost::regex nameFileEx(R\"(^[\\d\\-\\_]+(\\w+\\s?\\w+|\\w+))\");\nstatic const std::string path(\"E:\\\\2017-02-01\");\n//static const std::string path(\"E:\\\\TestLog\");\n\nunsigned long time2Milleseconds(const std::string &amp; time)\n{\n    int a, b, c, d;\n    if (sscanf_s(time.c_str(), \"%d:%d:%d,%d\", &amp;a, &amp;b, &amp;c, &amp;d) &gt;= 3)\n        return a * 3600000 + b * 60000 + c * 1000 + d;\n}\n\nvoid initializeHeap(std::ifstream &amp; ifs, std::priority_queue&lt;Data, std::vector&lt;Data&gt;, Compare&gt; &amp; myHeap, const int index)\n{\n    ULONG time;\n    std::string line;\n    boost::smatch what;\n    bool match = false;\n    while (!match &amp;&amp; std::getline(ifs, line))\n    {\n        if (boost::regex_search(line, what, expression))\n        {\n            time = time2Milleseconds(what[1]);\n            myHeap.push(Data(index, line, time));\n            match = true;\n        }\n    }\n}\n\nvoid checkRegex(std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; &amp; vifs, std::priority_queue&lt;Data, std::vector&lt;Data&gt;, Compare&gt; &amp; myHeap, ULONG time, const int index)\n{\n    std::string line;\n    boost::smatch what;\n    if (std::getline(vifs[index].first, line))\n    {\n        if (boost::regex_search(line, what, expression))\n        {\n            time = time2Milleseconds(what[1]);\n        }\n        myHeap.push(Data(index, line, time));\n    }\n}\n\nvoid mergeFiles(std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; &amp; vifs, std::priority_queue&lt;Data, std::vector&lt;Data&gt;, Compare&gt; &amp; myHeap, std::ofstream &amp; file)\n{\n    int index = 0;\n    ULONG time = 0;\n    while (!myHeap.empty())\n    {\n        index = myHeap.top().getIndex();\n        time = myHeap.top().getTime();\n        file &lt;&lt; myHeap.top().getLine() &lt;&lt; \" --&gt; \" &lt;&lt; vifs[index].second &lt;&lt; \"\\n\";\n        myHeap.pop();\n        checkRegex(vifs, myHeap, time, index);\n    }\n}\n\nint main()\n{\n    clock_t begin = clock();\n    int cnt = std::count_if(fs::directory_iterator(path), fs::directory_iterator(), static_cast&lt;bool(*)(const fs::path&amp;)&gt;(fs::is_regular_file));\n    std::priority_queue&lt;Data, std::vector&lt;Data&gt;, Compare&gt; myHeap;\n    std::vector&lt;std::pair&lt;std::ifstream, std::string&gt;&gt; vifs(cnt);\n    int index = 0;\n    boost::smatch what;\n    std::string file;\n    for (fs::directory_iterator d(path); d != fs::directory_iterator(); ++d)\n    {\n        if (fs::is_regular_file(d-&gt;path()))\n        {\n            file = d-&gt;path().filename().string();\n            if (boost::regex_search(file, what, nameFileEx))\n            {\n                vifs[index] = std::make_pair(std::ifstream(d-&gt;path().string()), what[1]);\n                initializeHeap(vifs[index].first, myHeap, index);\n                ++index;\n            }\n        }\n    }\n    std::ofstream filename(path + \"\\\\TestLog.txt\");\n    mergeFiles(vifs, myHeap, filename);\n    filename.close();\n    clock_t end = clock();\n    double elapsed_secs = double(end - begin) / CLOCKS_PER_SEC;\n    std::cout &lt;&lt; \"Elapsed time = \" &lt;&lt; elapsed_secs &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>After all this work, I realized that yesterday I run the program in Debug. Launching both the implementations in Release, I got the following results:</p>\n\n<ul>\n<li>Vector implementation: about 25 seconds</li>\n<li>Heap implementation: about 27 seconds</li>\n</ul>\n\n<p>Thus, or my implementation with the heap structure is not optimized or the two implementation are equal in running time. </p>\n\n<p>Is there something else I can do to speed up the execution?</p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 392, "user_id": 5800773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrzfZ.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5800773/ahsan"}, "edited": false, "score": 0, "creation_date": 1491428129, "post_id": 43242012, "comment_id": 73554234, "body": "So you want to custom randomize it?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1491428139, "post_id": 43242012, "comment_id": 73554238, "body": "Yup, a bunch of stuff was thrown into the standard from C++ 11 and on, see the <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">reference</a> , if you want to roughly match the &quot;mathematical&quot; probability have a look at <code>std::uniform_int_distribution</code>"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1491428645, "post_id": 43242012, "comment_id": 73554429, "body": "<code>rand()</code> isn&#39;t that bad on any recent implementation."}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1491430277, "post_id": 43242012, "comment_id": 73555090, "body": "The problem he is facing will occur even if an implementation of <code>rand()</code> is able to distribute uniformly since it is based on the usage of module together with <code>rand()</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1491487944, "post_id": 43242012, "comment_id": 73584033, "body": "Pretend for a moment that <code>rand()</code> returns values uniformly distributed in the closed range [0, 6]. When you get values from 0 to 5, <code>rand() % 6</code> gives you values from 0 to 5. when <code>rand()</code> returns 6, <code>rand() % 6</code> gives you 0. So you&#39;ll get 0 twice as often as any other value. That&#39;s the problem with using the remainder operator (<code>%</code> is <b>not</b> modulus, although many people call it that) here."}], "answers": [{"tags": [], "owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "is_accepted": true, "score": 1, "last_activity_date": 1506348533, "last_edit_date": 1506348533, "creation_date": 1491429438, "answer_id": 43242341, "question_id": 43242012, "link": "https://stackoverflow.com/questions/43242012/do-you-have-a-function-else-than-random-to-find-random-dicefrom-1-to-6-numbe/43242341#43242341", "title": "Do you have a function (else than random) to find random dice(from 1 to 6) numbers(in C++)", "body": "<p>The problem you are facing is well known and a very natural result of using the modulo operator with random.</p>\n\n<p>C++11 solves these problems by providing not only uniformly distributed random numbers but several different types of distributions like the <a href=\"https://en.wikipedia.org/wiki/Bernoulli_distribution\" rel=\"nofollow noreferrer\">Bernoulli distribution</a>, the <a href=\"https://en.wikipedia.org/wiki/Normal_distribution\" rel=\"nofollow noreferrer\">normal distribution</a> and the <a href=\"https://en.wikipedia.org/wiki/Poisson_distribution\" rel=\"nofollow noreferrer\">Poisson distribution</a>. </p>\n\n<p>The new header providing all these generators and distributions is <a href=\"http://www.cplusplus.com/reference/random/\" rel=\"nofollow noreferrer\">random</a>. </p>\n\n<p>Let's do an example: We want do have a random number generator that gives us some numbers and we want to have a distribution that shapes these numbers as we want them (uniformly, Bernoulli ...).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nint main(){\n    std::mt19937(6473);    // The random number generator using a deterministic seed\n    std::uniform_int_distribution&lt;int&gt; dist(1,6);    // The distribution that gives us random numbers in [1, 6)\n\n    for(int i=0;i&lt;10;i++){\n        std::cout &lt;&lt; dist(mt) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>This gives us pseudo-random numbers <strong>uniformly distributed</strong> into an interval we chose! But C++11 provides even more! It provides a real random number generator (see implementations for more details) which we can use as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nint main(){\n    std::random_device rd;\n    std::mt19937 mt(rd());    // The random number generator using a non-deterministic random device\n    std::uniform_int_distribution&lt;int&gt; dist(1,6);    // The distribution that gives us random numbers in [1,6)\n\n    for(int i=0;i&lt;10;i++){\n        std::cout &lt;&lt; dist(mt) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>It is this easy to provide real high quality random numbers distributed as you want into and interval you want using C++11. I got the knowlege about this topic from a talk of Stephen T. Lavavej (STL) held at <em>GoingNative 2013</em> that you can watch on <a href=\"https://channel9.msdn.com/\" rel=\"nofollow noreferrer\">Channel 9</a> and that is called <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">rand() Considered Harmful</a>.</p>\n\n<p><em>Fun fact:</em> The title is a reference to an essay from the great <a href=\"https://en.wikipedia.org/wiki/Edsger_W._Dijkstra\" rel=\"nofollow noreferrer\">Edsger Wybe Dijkstra</a> called \"Go to considered harmful.\" in which Dijkstra explained why no programmer should use the goto statement.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5648311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6d8b7e07935cc806d8cbf068be2231?s=128&d=identicon&r=PG&f=1", "display_name": "daviCo", "link": "https://stackoverflow.com/users/5648311/davico"}, "is_accepted": false, "score": -1, "last_activity_date": 1491437493, "creation_date": 1491437493, "answer_id": 43243595, "question_id": 43242012, "link": "https://stackoverflow.com/questions/43242012/do-you-have-a-function-else-than-random-to-find-random-dicefrom-1-to-6-numbe/43243595#43243595", "title": "Do you have a function (else than random) to find random dice(from 1 to 6) numbers(in C++)", "body": "<p>If you want some good random numbers using the boost library random function is a good place to start. Also has the example of working with dice like you are asking. <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_random.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_61_0/doc/html/boost_random.html</a></p>\n"}], "owner": {"reputation": 15, "user_id": 7823251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e88e5a021fd2db91130d1f0b65e081?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7823251/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 43242341, "answer_count": 2, "score": -1, "last_activity_date": 1506348533, "creation_date": 1491427982, "question_id": 43242012, "link": "https://stackoverflow.com/questions/43242012/do-you-have-a-function-else-than-random-to-find-random-dicefrom-1-to-6-numbe", "title": "Do you have a function (else than random) to find random dice(from 1 to 6) numbers(in C++)", "body": "<p>I am writing a code for a game with seven dices and I have a problem. If I use a random function(dice = rand()%6 + 1) I realized the probability to get for instance a sequence such as 123456 (a sequence that makes points in my game) has a much higher probability to get out.\nMathematically, this sequence has 1.54% probability to show up but When I use a random function with 100 millions iterations it appears up to 5.4% of the time!</p>\n\n<p>That leads me to my question. Do you know another way I could randomize the dice so that they would respect the probability? Or a way to fix that problem anyway?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "visual-studio", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1491430655, "post_id": 43242003, "comment_id": 73555240, "body": "I think in the project properties you can only define preprocessor variables but not functions (only what&#39;s allowed for <a href=\"https://msdn.microsoft.com/en-us/library/hhzbb5c8.aspx\" rel=\"nofollow noreferrer\">compiler parameter -D</a>) . To make preproc function available for whole project without including header everywhere, you could include the header in &quot;stdafx.h&quot;, which normally is already included in all .cpp files."}, {"owner": {"user_type": "does_not_exist", "display_name": "user208608"}, "edited": false, "score": 0, "creation_date": 1491449655, "post_id": 43242003, "comment_id": 73560193, "body": "Use headers like the language intends you to do it.  You&#39;ll thank yourself later.  (Or maybe the next developer will anyway...)"}, {"owner": {"reputation": 81, "user_id": 7810426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f49329a43f0f1bc898aaa00744c9275?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Monte", "link": "https://stackoverflow.com/users/7810426/jim-monte"}, "edited": false, "score": 0, "creation_date": 1491496351, "post_id": 43242003, "comment_id": 73590465, "body": "The source code could use a good cleaning up. In fact, the macros I would like to make visible in the entire project work together to output &quot;FIXMEs&quot; during a build that have the file name and line number formatted so that they can be clicked to get to the right location for the issue. There are many files, as in hundreds. That too should be addressed, but one thing at a time. For now, it would be a disruptive and  time-consuming effort to add the macros to a header and the include that header in each of the header and source files. Currently there is no universal header where they can be put."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 7810426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f49329a43f0f1bc898aaa00744c9275?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Monte", "link": "https://stackoverflow.com/users/7810426/jim-monte"}, "edited": false, "score": 0, "creation_date": 1521807808, "post_id": 49422869, "comment_id": 85901030, "body": "Thank you! The /FI option is exactly what I had wanted."}], "tags": [], "owner": {"reputation": 1251, "user_id": 2298578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saqnG.jpg?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/2298578/matthias"}, "is_accepted": true, "score": 2, "last_activity_date": 1521703656, "creation_date": 1521703656, "answer_id": 49422869, "question_id": 43242003, "link": "https://stackoverflow.com/questions/43242003/options-for-defining-preprocessor-macros-with-parameters-for-entire-project-or-s/49422869#49422869", "title": "Options for defining preprocessor macros with parameters for entire project or solution in Visual Studio", "body": "<p>Place the macro in a file and automatically include it into all files using the /FI option:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/8c5ztk84.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/8c5ztk84.aspx</a></p>\n\n<p>Syntax: /FI[ ]pathname  </p>\n\n<p>The /FI option has the same effect as including the file at top of every source file.</p>\n"}], "owner": {"reputation": 81, "user_id": 7810426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f49329a43f0f1bc898aaa00744c9275?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Monte", "link": "https://stackoverflow.com/users/7810426/jim-monte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 1, "accepted_answer_id": 49422869, "answer_count": 1, "score": 4, "last_activity_date": 1521703656, "creation_date": 1491427942, "question_id": 43242003, "link": "https://stackoverflow.com/questions/43242003/options-for-defining-preprocessor-macros-with-parameters-for-entire-project-or-s", "title": "Options for defining preprocessor macros with parameters for entire project or solution in Visual Studio", "body": "<p>I want some macros having parameters to be available in all files in a project or better a complete solution. In VS2010, if I add them to the Preprocessor Definitions in properties->Configuration Properties->C/C++->Preprocessor using something like</p>\n\n<pre><code>SQUARE(x)=((x)*(x));CUBE(x)=(SQUARE(x)*x); \n</code></pre>\n\n<p>the macro definitions are not used by the compiler. However the approach may be close since IntelliSense provides the correct definitions when I hover over the macros in the source code.</p>\n\n<p>Is there a way to define the macros and make them visible without including a header with their definitions in every file?</p>\n\n<p>Thanks for any ideas!</p>\n"}, {"tags": ["java", "c++", "qt", "encoding"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1491428575, "post_id": 43241980, "comment_id": 73554404, "body": "See the group of QString::fromUtf* methods. Other than that the question is not unique and was answered here not just once."}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1491428627, "post_id": 43241980, "comment_id": 73554423, "body": "I&#39;ve tried everything, nothing works"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491429604, "post_id": 43242159, "comment_id": 73554840, "body": "hey, thanks for your answer, I understand now, but there is a little problem  OutputStream os.write() can not accept Charset.forName(&quot;UTF-8&quot;).encode(response) I have tried with Channels but it doesn&#39;t work  <a href=\"http://stackoverflow.com/a/579616/7823223\">stackoverflow.com/a/579616/7823223</a>"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491429845, "post_id": 43242159, "comment_id": 73554924, "body": "&quot;can not accept&quot; has no meaning... what error do you get? Did you do <code>import java.nio.charset.Charset;</code>?"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1491430199, "post_id": 43242159, "comment_id": 73555050, "body": "Seems a little odd to convert to and from UTF-8, since both Java and Qt use UTF-16 encoding."}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491430415, "post_id": 43242159, "comment_id": 73555151, "body": "Of course I imported that library. The method write(int) in the type OutputStream is not applicable for the arguments (ByteBuffer). I&#39;ve tried to apply method array():  os.write(Charset.forName(&quot;UTF-8&quot;).encode(response).array()); but I get emptry string in Qt client"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491431793, "post_id": 43242159, "comment_id": 73555620, "body": "<a href=\"http://stackoverflow.com/questions/579600/how-to-put-the-content-of-a-bytebuffer-into-an-outputstream\">Channels seem to be the way to go</a>, or you can get a byte array <a href=\"http://stackoverflow.com/questions/679298/gets-byte-array-from-a-bytebuffer-in-java\">like this</a>. Sorry but I never worked in Java, so my suggestions may be a bit off on that side."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1491431891, "post_id": 43242159, "comment_id": 73555651, "body": "@MrEricSir: and just think that every integer in network protocols travels in big endian, while virtually every machine is little endian; at least in this case there&#39;s a distinct advantage (UTF-8 being generally more compact than UTF-16)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491431980, "post_id": 43242159, "comment_id": 73555673, "body": "Oh gosh, there&#39;s another overload of the <code>getBytes</code> that takes the encoding as a parameter and returns a <code>byte[]</code>; it was way simpler than all this <code>ByteBuffer</code> mess. :-)"}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491432489, "post_id": 43242159, "comment_id": 73555814, "body": "I have just tried this os.write(response.getBytes(&quot;UTF-8&quot;)); but I still get empy string in qt, I am desperate with this :(  So simple task - just send response, with English text everything works well"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491432741, "post_id": 43242159, "comment_id": 73555894, "body": "Is it failing to encode, to decode or to transmit? If you write out the byte array on the Java side is it sane? What do you get in the <code>QByteArray</code> on the Qt side? Also, you&#39;ll quickly learn that there&#39;s no such a thing as a &quot;simple task&quot; when dealing with text and encodings."}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491432923, "post_id": 43242159, "comment_id": 73555973, "body": "It is failing to decode in qt, I tried this  os.write(response.getBytes(&quot;UTF-16&quot;)); (also UTF-8) and in qt   QString str1 = QString::fromUtf16(reinterpret_cast&lt;const ushort*&gt;(data.constData()), 10); and     QString str2 = QString::fromUtf8(data);  Convertation fromutf16 gives this  = &quot;\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\uFFFF\\uFFF&zwnj;&#8203;F&quot;"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491433020, "post_id": 43242159, "comment_id": 73556006, "body": "Again, what do you get if you do <code>qDebug()&lt;&lt;data</code>, as you did before?"}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491433099, "post_id": 43242159, "comment_id": 73556033, "body": "qDebug() &lt;&lt; data;  gives &quot;&quot; -empty"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491433246, "post_id": 43242159, "comment_id": 73556076, "body": "Well of course if you did <code>response.getBytes(&quot;UTF-16&quot;)</code>... use UTF-8. If it still gives you an empty string, check what you are sending on the java side (dump <code>response.getBytes(&quot;UTF-8&quot;)</code>)."}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491433334, "post_id": 43242159, "comment_id": 73556109, "body": "If I send text in English - everything is alright in qt, I get it, but the same doesn&#39;t work with russian text, it is like magic"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491433646, "post_id": 43242159, "comment_id": 73556189, "body": "Please update the post with the current code, I can&#39;t understand what you are testing now."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491434149, "post_id": 43242159, "comment_id": 73556321, "body": "Ok, now, I see that in the example above you call <code>Charset.forName(&quot;UTF-16&quot;).encode(response).array()</code> - don&#39;t do that, <code>.array()</code> is not guaranteed to return anything meaningful, and UTF-16 is not what we are after. Use the straight <code>os.write(response.getBytes(&quot;UTF-8&quot;))</code>. What do you get with <code>qDebug()&lt;&lt;data;</code> on the other side?"}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491434431, "post_id": 43242159, "comment_id": 73556389, "body": "QByteArray data = reply-&gt;readAll(); data.size() = 0, it is really weird, because if I send  text in English - it works and data is NOT null I tested with this java code: os.write(response.getBytes(&quot;UTF-8&quot;))"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491434623, "post_id": 43242159, "comment_id": 73556435, "body": "Aaaah there it is; the response length is wrong; you are writing in the number of UTF-16 <i>characters</i>, but you are sending UTF-8 bytes. I&#39;ll update my answer."}, {"owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "edited": false, "score": 0, "creation_date": 1491435028, "post_id": 43242159, "comment_id": 73556545, "body": "thank you! big thank you! \u0441\u043f\u0430\u0441\u0438\u0431\u043e \u0431\u043e\u043b\u044c\u0448\u043e\u0435:) I got this message in qt client, and I even displayed it in console and in label with correct encoding, everything works perfectly now!"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491435130, "post_id": 43242159, "comment_id": 73556571, "body": "You&#39;re welcome; I&#39;m sorry it took so long, but I didn&#39;t notice that you were passing the string size when writing the headers (which is actually quite obvious thinking about how the HTTP response has to be composed). Glad it helped. :-)"}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 3, "last_activity_date": 1491436380, "last_edit_date": 1592644375, "creation_date": 1491428616, "answer_id": 43242159, "question_id": 43241980, "link": "https://stackoverflow.com/questions/43241980/how-to-convert-qbytearray-to-qstring/43242159#43242159", "title": "How to convert QByteArray to QString?", "body": "<blockquote>\n<h2><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes()\" rel=\"nofollow noreferrer\">getBytes </a></h2>\n<pre><code>public byte[] getBytes()\n</code></pre>\n<p>Encodes this String into a sequence of bytes using the platform's default charset, storing the result into a new byte array.</p>\n<p>The behavior of this method when this string cannot be encoded in the default charset is unspecified. The <code>CharsetEncoder</code> class should be used when more control over the encoding process is required.</p>\n</blockquote>\n<p>Using this method to serialize the string is a <em>terrible</em> idea; the &quot;platform default encoding&quot; depends from current locale, operating system and whatnot, while you want a well-defined encoding to transmit data between applications.</p>\n<p>In facts, I trust you when you say &quot;I've tried everything, nothing works&quot; - that's because your string is encoded in the <a href=\"https://en.wikipedia.org/wiki/Windows-1251\" rel=\"nofollow noreferrer\">windows-1251</a> encoding, which probably happens to be the default 8-bit encoding of your Windows machine. When you try to decode it on the Qt side - which, from Qt5, always expects UTF-8 by default when decoding 8-bit strings, everything breaks.</p>\n<hr />\n<p>First of all, on the Java side <a href=\"https://stackoverflow.com/a/5729828/214671\">encode your string in UTF8</a>, making sure to specify the response length correctly (you have to provide the number of <em>bytes</em> you are writing, not of characters in the source string):</p>\n<pre><code>String response = &quot;\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435&quot;; //&quot;Response from server in Russian&quot;\nbyte[] response_data = response.getBytes(&quot;UTF-8&quot;);\nt.sendResponseHeaders(200, response_data.length());\nOutputStream os = t.getResponseBody();\nos.write(response_data);\nos.close();\n</code></pre>\n<p>Then, on the Qt side, you can build a <code>QString</code> from the <code>QByteArray</code>, specifying it's in UTF8.</p>\n<pre><code>QByteArray data = reply-&gt;readAll();\nQString str = QString::fromUtf8(data);\n</code></pre>\n<p>(notice that you may send your string in UTF-16 or UTF-32 as well, but of course the two sides must match; I chose UTF-8 because it's way more common as an &quot;on the wire&quot; format and because it's generally more compact)</p>\n"}], "owner": {"reputation": 23, "user_id": 7823223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36ceda6712f8f3cc9c33cee73d5fef4?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/7823223/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6230, "favorite_count": 1, "accepted_answer_id": 43242159, "answer_count": 1, "score": 2, "last_activity_date": 1491436380, "creation_date": 1491427841, "last_edit_date": 1491433970, "question_id": 43241980, "link": "https://stackoverflow.com/questions/43241980/how-to-convert-qbytearray-to-qstring", "title": "How to convert QByteArray to QString?", "body": "<p>Here is HttpServer in JAVA, that sends russian string to Qt application:</p>\n\n<pre><code> public void handle(HttpExchange t) throws IOException {\n        //Response from server in Russian\n        String response = \"\u041e\u0442\u0432\u0435\u0442 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435\"; //\"Response from server in Russian\"\n        t.sendResponseHeaders(200, response.length());\n        OutputStream os = t.getResponseBody();\n        //os.write(response.getBytes());\n       //right now I am trying this code\n      os.write(response.getBytes(Charset.forName(\"UTF-8\"))); //and UTF-16\n       //also I have tried this\n        os.write(Charset.forName(\"UTF-16\").encode(response).array());\n\n        os.close();\n    }\n</code></pre>\n\n<p>Application in Qt gets response from server (text in russian)</p>\n\n<pre><code> void MainWindow::Response(QNetworkReply *reply) {\n    QByteArray data = reply-&gt;readAll();\n   // Also I've tried this\n   // QString dataString = (QString)reply-&gt;readAll();\n   // QString dataLine = (QString)reply-&gt;readLine();\n   // QString str=  QString::fromUtf8(data);\n    qDebug() &lt;&lt; \"data from server: \" &lt;&lt; data;\n     label-&gt;setText(str);\n} \n</code></pre>\n\n<p>I just want to show normal string in console or in label component, but I have \nempty string or array of bytes or sequence of question marks</p>\n\n<p>\"\\xCE\\xF2\\xE2\\xE5\\xF2 \\xEE\\xF2 \\xF1\\xE5\\xF0\\xE2\\xE5\\xF0\\xE0 \\xED\\xE0 \\xF0\\xF3\\xF1\\xF1\\xEA\\xEE\\xEC \\xFF\\xE7\\xFB\\xEA\\xE5\"</p>\n\n<p>How can I solve this problem with encoding and convert this array to QString and finally see the normal text ?</p>\n"}, {"tags": ["c++", "openscenegraph"], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 3000724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53e6d3292a0ea5259ee6ce7ef7ee37fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3000724", "link": "https://stackoverflow.com/users/3000724/user3000724"}, "edited": false, "score": 0, "creation_date": 1491482956, "post_id": 43248444, "comment_id": 73580012, "body": "I figured I&#39;d have to just check for both combinations for each key pressed (if I decide to keep shift in final controls).  Thanks for the confirmation!"}], "tags": [], "owner": {"reputation": 801, "user_id": 878711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b439ae8956c87b26564542b75ad426?s=128&d=identicon&r=PG", "display_name": "rickyviking", "link": "https://stackoverflow.com/users/878711/rickyviking"}, "is_accepted": true, "score": 2, "last_activity_date": 1491463644, "creation_date": 1491463644, "answer_id": 43248444, "question_id": 43241877, "link": "https://stackoverflow.com/questions/43241877/how-do-you-handle-case-sensitivity-in-openscenegraph-keyboard-input-events/43248444#43248444", "title": "How do you handle case sensitivity in OpenSceneGraph keyboard input events?", "body": "<p>When you press a key, osg creates an event with the corresponding key code, which is different for a letter or its corresponding capitalized one.<br>\n<code>osgGA::KEY_W</code> it's simply an enum value corresponding to the lower case 'w' (119 ascii code), while 'W' has code 87.</p>\n\n<p>So if you want to get either the lower or upper case keypress, simply write something like:</p>\n\n<pre><code>if (ea.getEventType() == osgGA::GUIEventAdapter::KEYDOWN)\n{\n     if (ea.getKey() == osgGA::GUIEventAdapter::KEY_W || ea.getKey() == 'W')\n     { /*code when either w or W is pressed*/ }\n}\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 3000724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53e6d3292a0ea5259ee6ce7ef7ee37fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3000724", "link": "https://stackoverflow.com/users/3000724/user3000724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 43248444, "answer_count": 1, "score": 0, "last_activity_date": 1491463644, "creation_date": 1491427411, "question_id": 43241877, "link": "https://stackoverflow.com/questions/43241877/how-do-you-handle-case-sensitivity-in-openscenegraph-keyboard-input-events", "title": "How do you handle case sensitivity in OpenSceneGraph keyboard input events?", "body": "<p>(Please forgive my shorthand as this is from memory) I have code similar to:</p>\n\n<pre><code>bool myclass::handle(event ea){\n  switch (ea.getEventType()){\n    case(osgGA::KEYDOWN):\n      switch (ea.getkey() )\n      {\n        case (osgGA::KEY_Lshift):\n           down = true;\n           break;\n        case (osgGA::KEY_W):\n           forward = true;\n           break;\n      }\n      return false;\n\n    case(osgGA::KEYUP){\n      switch (ea.getkey() )\n      {\n        case (osgGA::KEY_Lshift):\n           down = false;\n           break;\n        case (osgGA::KEY_W):\n           forward = false;\n           break;\n      }\n      return false;        \n    }\n</code></pre>\n\n<p>I print the ea.getkey() and when I press 'w', I get the expected behavior of it moving forward.  However, if I press 'shift' next and then let go of 'w', I get my debug: \"KEYUP: W\".  Note that it's capitalized, and I continue to move forward until a lowercase 'w' is pressed and released.</p>\n\n<p>Am I expected to just use basic C++ functions to convert everything to lowercase?  I'm just trying to use standard WASD movement with Space/L-shift as move up and down around my environment.</p>\n"}, {"tags": ["c++", "templates", "vector", "template-templates"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1491427382, "post_id": 43241704, "comment_id": 73553914, "body": "You don&#39;t have default constructor, nor you have a public constructor at all."}, {"owner": {"reputation": 11, "user_id": 7821802, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211165073259494/picture?type=large", "display_name": "Ben Flint", "link": "https://stackoverflow.com/users/7821802/ben-flint"}, "reply_to_user": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1491480332, "post_id": 43241704, "comment_id": 73577956, "body": "Yeah, apologies, forgot to add the constructor to the example. This is just a much stripped down bit of code attempting to illustrate the problem without being too convoluted. The original code does have public default and parameterised constructors and still doesn&#39;t compile"}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1491450669, "post_id": 43241986, "comment_id": 73560450, "body": "std containers are copy-constructible. you can copy-initialise container_ in the Library&#39;s constructor initialisation list"}], "tags": [], "owner": {"reputation": 566, "user_id": 4667104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-rGRu3uu46Vg/AAAAAAAAAAI/AAAAAAAAAS4/sFeLdQuPwdU/photo.jpg?sz=128", "display_name": "Elvis Teixeira", "link": "https://stackoverflow.com/users/4667104/elvis-teixeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1491427857, "creation_date": 1491427857, "answer_id": 43241986, "question_id": 43241704, "link": "https://stackoverflow.com/questions/43241704/how-to-create-a-template-class-with-a-template-container-of-different-objects-as/43241986#43241986", "title": "How to create a template class with a template container of different objects as a parameter", "body": "<p>You only need to template the the container and then let it tell the stored type. The standard containers do that by means of the <code>value_type</code>  definition. Do something like:</p>\n\n<pre><code>template &lt;typename TContainer&gt;\nclass Library {\nprivate:\n\n    TContainer container_;\n\npublic:\n\n    using container_type = TContainer;\n    using value_type = typename TContainer::value_type;\n\n    Library(const container_type &amp;initValues) {\n        std::copy(initValues.begin(), initValues.end(),\n            std::back_inserter(container_));\n    }\n\n    [...]\n};\n</code></pre>\n\n<p>This should work with <code>vector</code>, <code>list</code> and everything that can be \"back_inserted\". Additionally you can reference the container and object types by means of <code>container_type</code> and <code>value_type</code>.</p>\n\n<p>Instances are declared like</p>\n\n<pre><code>Library&lt;std::vector&lt;int&gt; &gt; lib(someInitializer);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7821802, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211165073259494/picture?type=large", "display_name": "Ben Flint", "link": "https://stackoverflow.com/users/7821802/ben-flint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1491427857, "creation_date": 1491426712, "last_edit_date": 1495542351, "question_id": 43241704, "link": "https://stackoverflow.com/questions/43241704/how-to-create-a-template-class-with-a-template-container-of-different-objects-as", "title": "How to create a template class with a template container of different objects as a parameter", "body": "<p>How can i declare a template class (A library of components) which will take a vector containing the components as a parameter?\nHere is a stripped down version of code as an example:</p>\n\n<pre><code>    // In Library.h\n    using namespace std;\n\n    template&lt;typename T,\n        template &lt;typename, typename = std:allocator&lt;T&gt;&gt; class Container&gt;\n    class library {\n        Container&lt;T&gt; comp_lib;\n        library(Container&lt;T&gt; &amp;Vc) {comp_lib = Vc}\n    };\n\n    // In mainProgram.cpp\n    #include \"Library.h\"\n    // Other includes...\n    using namespace std;\n\n    int main() {\n    library&lt;int, vector&gt; intLib;\n    return(0);\n    }\n</code></pre>\n\n<p>As I mentioned before this is meant to be a library of components. So instead of holding vectors containing integers the library template is meant to hold vectors containing general components, vectors containing resistors, vectors containing capacitors and vectors containing inductors. Where resistors, capacitors and inductors are all derived classes from the component base class.</p>\n\n<p>When I run the code, it does not compile and I receive these error messages:</p>\n\n<p>C2079: 'intLib' uses undefined class 'library'  on line [ library intLib ] in mainProgram.cpp</p>\n\n<p>C3855 'library': template parameter 'C' is incompatible with the declaration\non line [ }; ] in library.h (The last line)</p>\n\n<p>C3855 'library': template parameter 'vector' is incompatible with the declaration on line [ }; ] in library.h (also, the last line)</p>\n\n<p>I've looked at lots of different articles concerning template template parameters, this answer has been especially useful so far although it doesn't seem to solve the problem I'm currently having:\n<a href=\"https://stackoverflow.com/questions/16596422/template-class-with-template-container?answertab=active#tab-top\">Template class with template container</a></p>\n\n<p>The desired result is to be able to write a statements such as:</p>\n\n<pre><code>      library&lt;resistor, vector&lt;resistor&gt;&gt; resistor_lib;\n      library&lt;capacitor, vector&lt;capacitor&gt;&gt; capacitor_lib;\n      library&lt;inductor, vector&lt;inductor&gt;&gt; inductor_lib;\n      library&lt;component, vector&lt;component&gt;&gt; component_lib;\n</code></pre>\n\n<p>in the main all using the same template.</p>\n\n<p>Thanks, any help is much appreciated</p>\n"}, {"tags": ["c++", "scope", "declare"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1491426820, "post_id": 43241676, "comment_id": 73553655, "body": "Order of definition/forward declaration. Btw, don&#39;t create long lists of uninitialized variables only to assign to them few lines later."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1491426839, "post_id": 43241676, "comment_id": 73553663, "body": "Imagine that the compiler reads your program text exactly one time from top to bottom.  At the point where it sees you calling displayBills(), it has not yet seen any declaration or definition of that function.  You can fix the problem by putting the displayBills() function definition <i>before</i> the main(...) function definition."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 2146530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0025ee96b0295ced65ef4a3b6c7dd2fa?s=128&d=identicon&r=PG", "display_name": "Huynh", "link": "https://stackoverflow.com/users/2146530/huynh"}, "is_accepted": false, "score": 0, "last_activity_date": 1491426818, "creation_date": 1491426818, "answer_id": 43241721, "question_id": 43241676, "link": "https://stackoverflow.com/questions/43241676/error-declaring-in-scope/43241721#43241721", "title": "Error declaring in scope", "body": "<p>You did not specify a forward declaration for your <code>displayBills</code> function.  You must either specify one or put your function before any calls to it.</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1491427257, "last_edit_date": 1491427257, "creation_date": 1491426839, "answer_id": 43241729, "question_id": 43241676, "link": "https://stackoverflow.com/questions/43241676/error-declaring-in-scope/43241729#43241729", "title": "Error declaring in scope", "body": "<p>In function <code>main</code>, you call function <code>displayBills</code>, yet the compiler does not know this function at this point (because it is declared/defined later in the file).</p>\n\n<p>Either put the definition of <code>displayBills(int dollars) { ...</code> before your function <code>main</code>, or put at least a forward declaration of this function before function <code>main</code>:</p>\n\n<pre><code>displayBills(int dollars);  // Forward declaration; implementation may follow later on;\n// Tells the compiler, that function `displayBills` takes one argument of type `int`.\n// Now the compiler can check if calls to function `displayBills` have the correct number/type of arguments.\n\nint main() {\n   displayBills(dollars);  // use of function; signature is now \"known\" by the compiler\n}\n\ndisplayBills(int dollars) {  // definition / implementation\n  ...\n}\n</code></pre>\n\n<p>BTW: there are several issues in your code which you should take care of, e.g. <code>using namespace std</code> is usually dangerous because of unintended name clashes, functions should have an explicit return type (or should be <code>void</code>), ...</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5648311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6d8b7e07935cc806d8cbf068be2231?s=128&d=identicon&r=PG&f=1", "display_name": "daviCo", "link": "https://stackoverflow.com/users/5648311/davico"}, "is_accepted": false, "score": 0, "last_activity_date": 1491437968, "creation_date": 1491437968, "answer_id": 43243658, "question_id": 43241676, "link": "https://stackoverflow.com/questions/43241676/error-declaring-in-scope/43243658#43243658", "title": "Error declaring in scope", "body": "<p>Like other people have been saying putting displayBills above main will help with your problem. But also declaring displayBills in a header file called displayBills.h and </p>\n\n<pre><code>#ifndef DISPLAYBILLS_H_INCLUDED\n#define DISPLAYBILLS_H_INCLUDED\n\ndisplayBills(int dollars);\n#endif DISPLAYBILLS_H_INCLUDED\n</code></pre>\n\n<p>then you can have a cpp file of displayBills.cpp where you will define the function displayBills (dont forget to include displayBills.h)</p>\n\n<pre><code> #include \"displayBills.h\"\n</code></pre>\n\n<p>and just move it from under your main function to its own cpp file. and then above your main function include your header file.</p>\n\n<p>I would do this because it makes it a lot easier to know which functions are where in your project instead of jamming all of your functions into the main.</p>\n"}], "owner": {"reputation": 35, "user_id": 7823174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51afb2e4c75e39ceaf2d43167eff4257?s=128&d=identicon&r=PG&f=1", "display_name": "Kole Gemmell", "link": "https://stackoverflow.com/users/7823174/kole-gemmell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 43241729, "answer_count": 3, "score": -4, "last_activity_date": 1491437968, "creation_date": 1491426591, "question_id": 43241676, "link": "https://stackoverflow.com/questions/43241676/error-declaring-in-scope", "title": "Error declaring in scope", "body": "<p>im having some trouble completing one of my assignments for my intro coding class. i keep getting the error when compiling, \"[Error] 'displayBills' was not declared in this scope. I will attach my code, any suggestions would be greatly appreciated, Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\nint main()\n{\nint dollars;\ncout &lt;&lt; \"Please enter the whole dollar amount (no cents!).  Input 0 to terminate: \";\ncin &gt;&gt; dollars;\nwhile (dollars != 0)\n    {\n    displayBills(dollars);\n    cout &lt;&lt; \"Please enter the a whole dollar amount (no cents!).  Input 0 to terminate: \";\n    cin &gt;&gt; dollars;\n    }\nreturn 0;\n}\n\ndisplayBills(int dollars)\n{\nint ones;\nint fives;\nint tens;\nint twenties;\nint temp;\n\ntwenties = dollars / 20;\ntemp = dollars % 20;\ntens = temp / 10;\ntemp = temp % 10;\nfives = temp / 5;\nones = temp % 5;\n\ncout &lt;&lt; \"The dollar amount of \", dollars, \" can be represented by the following monetary denominations\";\ncout &lt;&lt; \"     Twenties: \" &lt;&lt; twenties;\ncout &lt;&lt; \"     Tens: \" &lt;&lt; tens;\ncout &lt;&lt; \"     Fives: \" &lt;&lt; fives;\ncout &lt;&lt; \"     Ones: \" &lt;&lt; ones;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491426978, "post_id": 43241627, "comment_id": 73553735, "body": "why vote my post - ?"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1491426997, "post_id": 43241627, "comment_id": 73553745, "body": "How do you know it worked if you don&#39;t check the returned value?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1491427036, "post_id": 43241627, "comment_id": 73553760, "body": "This could change at any time. Memory is allocated and deallocation dynamically. What are you trying to do."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1491427071, "post_id": 43241627, "comment_id": 73553776, "body": "I mean, the above code looks just like an MSDN dump..."}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491427122, "post_id": 43241627, "comment_id": 73553801, "body": "hi David Heffernan , i know its change - i just want to get the last offset"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491427219, "post_id": 43241627, "comment_id": 73553845, "body": "hi ThingyWotsit - i just try to make it sample and short"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491427397, "post_id": 43241801, "comment_id": 73553926, "body": "hi , &quot;here are much better IPC APIs to do these things!&quot; ?? like what ?"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491427686, "post_id": 43241801, "comment_id": 73554065, "body": "It depends on what you have to do... if you have to just exchange data between two processes, you have shared memories, pipes, sockets, and many others..."}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491427969, "post_id": 43241801, "comment_id": 73554171, "body": "no no - i just want to get last ( used ) offset  of processmemory  - nothing else"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491428224, "post_id": 43241801, "comment_id": 73554276, "body": "but inside your process or inside another process??"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491428445, "post_id": 43241801, "comment_id": 73554356, "body": "another process - readprocess its work great ! now you know what i want - yes ? - see the picture  : <a href=\"https://i.stack.imgur.com/ukpZq.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/ukpZq.png</a>"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491429059, "post_id": 43241801, "comment_id": 73554593, "body": "I repeat that unless you are writing a debugger or similar, you probably on the wrong way... anyway, you could try with VirtualQueryEx to inspect the allocated memory. See here <a href=\"https://www.codeproject.com/kb/threads/mdumpall.aspx\" rel=\"nofollow noreferrer\">codeproject.com/kb/threads/mdumpall.aspx</a> and also <a href=\"http://stackoverflow.com/questions/10372872/read-process-memory-of-a-process-does-not-return-everything\" title=\"read process memory of a process does not return everything\">stackoverflow.com/questions/10372872/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491429271, "post_id": 43241801, "comment_id": 73554691, "body": "if you mean &quot;si.lpMaximumApplicationAddress&quot; - its for max address     &gt;&gt;&gt;&gt;&gt;its not for last address used"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491429428, "post_id": 43241801, "comment_id": 73554769, "body": "no that is the maximum address for your system, like 2^32 if you have 4GB of RAM or something like that. See <a href=\"http://stackoverflow.com/questions/10372872/read-process-memory-of-a-process-does-not-return-everything\" title=\"read process memory of a process does not return everything\">stackoverflow.com/questions/10372872/&hellip;</a> where it uses info.RegionSize"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491429605, "post_id": 43241801, "comment_id": 73554841, "body": "ok tnx - i will see it - and try it and will back to you - tnx again man"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491430000, "post_id": 43241801, "comment_id": 73554988, "body": "please upvote and mark resolved if you found an answer :-)"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491430184, "post_id": 43241801, "comment_id": 73555043, "body": "i stil trying to understand how use it - if its work - i will mark it"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491438958, "post_id": 43241801, "comment_id": 73557563, "body": "can i use it to find string without check all process memory ? - how ?"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491461872, "post_id": 43241801, "comment_id": 73564988, "body": "<a href=\"http://stackoverflow.com/questions/28231054/how-can-i-search-for-a-string-in-the-memory-of-another-process\" title=\"how can i search for a string in the memory of another process\">stackoverflow.com/questions/28231054/&hellip;</a>  and   <a href=\"http://stackoverflow.com/questions/36878017/searching-for-every-occurrence-of-a-string-in-another-processs-memory\" title=\"searching for every occurrence of a string in another processs memory\">stackoverflow.com/questions/36878017/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491588827, "post_id": 43241801, "comment_id": 73637456, "body": "man - its long code to i want - i need to a small code to do what is ask - to can understand it . and what is VirtualQueryEx is do ???"}, {"owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "reply_to_user": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491645457, "post_id": 43241801, "comment_id": 73652372, "body": "just take the answer here <a href=\"http://stackoverflow.com/questions/28231054/how-can-i-search-for-a-string-in-the-memory-of-another-process\" title=\"how can i search for a string in the memory of another process\">stackoverflow.com/questions/28231054/&hellip;</a>, you have a working solution. Smaller than this is not possible. Life of a programmer is hard, man."}, {"owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "edited": false, "score": 0, "creation_date": 1491660309, "post_id": 43241801, "comment_id": 73656863, "body": "ok i want to understand how code work ? - it is for find variable or find string or what ?? - what is VirtualQueryEx do ?"}], "tags": [], "owner": {"reputation": 59, "user_id": 2023294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58942b9f1f4a8f4955739a53ee5e2f5c?s=128&d=identicon&r=PG", "display_name": "Davide Capodaglio", "link": "https://stackoverflow.com/users/2023294/davide-capodaglio"}, "is_accepted": false, "score": 0, "last_activity_date": 1491427092, "creation_date": 1491427092, "answer_id": 43241801, "question_id": 43241627, "link": "https://stackoverflow.com/questions/43241627/c-how-to-find-last-offset-adress-used-in-processmemory-with-use-readproces/43241801#43241801", "title": "C++ how to find last (offset - adress) used in processmemory with use readprocessmemory", "body": "<p>Well it MAY work if you are absolutely sure that you CAN read the memory of the other process... anyway it is a quite dangerous method, there are much better IPC APIs to do these things!</p>\n\n<p>Unless you are writing a debugger yourself... in fact ReadProcessMemory is cited here \"Process Functions for Debugging\" <a href=\"https://msdn.microsoft.com/it-it/library/windows/desktop/ms680549(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/it-it/library/windows/desktop/ms680549(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5807813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e309e6b0c9889985b8baa5b09183a55?s=128&d=identicon&r=PG&f=1", "display_name": "king of the king", "link": "https://stackoverflow.com/users/5807813/king-of-the-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1491428972, "creation_date": 1491426388, "last_edit_date": 1491428972, "question_id": 43241627, "link": "https://stackoverflow.com/questions/43241627/c-how-to-find-last-offset-adress-used-in-processmemory-with-use-readproces", "title": "C++ how to find last (offset - adress) used in processmemory with use readprocessmemory", "body": "<p>i use this code to <code>readprocessmemory</code>  :</p>\n\n<pre><code>  BOOL WINAPI ReadProcessMemory(\n    _In_  HANDLE  hProcess,\n    _In_  LPCVOID lpBaseAddress,\n    _Out_ LPVOID  lpBuffer,\n    _In_  SIZE_T  nSize,\n    _Out_ SIZE_T  *lpNumberOfBytesRead\n    );\nchar value[5]; \nHANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, 0, 6500);\n{\n    ReadProcessMemory(hProcess, (LPVOID)105477, value, 5, 0);\n}\n</code></pre>\n\n<h2>its work 100%</h2>\n\n<p>but i want to know how know last Offset used in processmemory - before i read it</p>\n\n<p>see the picture : <a href=\"https://i.stack.imgur.com/ukpZq.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>the last offset in this processmemory is 7FFE0FFF - but how can i get it before i  read the processmemory</p>\n"}, {"tags": ["c++", "windows", "qt", "winapi", "screenshot"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1491427364, "post_id": 43241605, "comment_id": 73553905, "body": "<i>Why this can happen</i> -- Aren&#39;t functions such as <code>BitBlt</code> highly dependent on the device / hardware you&#39;re using?  What works on one device may not work on another (that&#39;s why there is a <i>device context</i> parameter).   Also, why are you not checking the return values for the Win API calls?  Since you&#39;re running this on different computers, it is practically mandatory to check return values from Win API calls."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491428291, "post_id": 43241605, "comment_id": 73554302, "body": "@PaulMcKenzie It&#39;s Qt code. why not checking? I don&#39;t know exactly, but as I know, that functions can&#39;t fail with exception. With device interesting idea, but not helpful. It&#39;s not ok that such functions freezes for 3 mins. Must be reason why."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491428776, "post_id": 43241605, "comment_id": 73554489, "body": "It is helpful, and the reason why I know this is that I personally had to debug code where device context related functions were failing for particular devices (in my case, printers).  Without checking return codes, you are just assuming that those functions &quot;work&quot;.  Again, since you plan on running this on various computers, it is imperative you check return codes.  You are missing <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183370%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">a lot of info if the function fails</a>"}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429060, "post_id": 43241605, "comment_id": 73554594, "body": "@PaulMcKenzie in my task it is ok to not receive screen a couple of times. Problem in freezing, not incorrect work or bad screens. That methods should not freeze for 3 (!!!) mins in any case."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429074, "post_id": 43241605, "comment_id": 73554598, "body": "In addition, you need to know the exact devices that are not working correctly.  Model, version, etc.  Again, these functions that use device contexts that represent hardware may, and probably will, work differently depending on the device&#39;s information."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429139, "post_id": 43241605, "comment_id": 73554618, "body": "And I had printers printing totally black pages, and other printers working ok with the same code.  By checking the return values, I discovered that the device context related functions were returning <code>FALSE</code> for the printers that were not working correctly.  In your case, maybe the device has slow memory -- again, you need to know what the display device&#39;s information is."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429354, "post_id": 43241605, "comment_id": 73554736, "body": "@PaulMcKenzie  &quot;Again, these functions that use device contexts that represent hardware may, and probably will, work differently depending on the device&#39;s information.&quot; &lt;------ 3 minutes on screen (1280x720) grabbing? Are you seriously? Such time can be only when something very serious happens, not &quot;working differently&quot;. For example, when some race or deadlock happens. Don&#39;t answer if you don&#39;t know."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429432, "post_id": 43241605, "comment_id": 73554772, "body": "You don&#39;t even want to check your return values.  What else is there to tell you?  You&#39;re flying blind if you&#39;re not logging return codes and / or pin down the hardware where this is not working."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429553, "post_id": 43241605, "comment_id": 73554825, "body": "It&#39;s code from official Qt repository. If you thinks that that values is some important, maybe then you will create bug in bug tracker?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491429700, "post_id": 43241605, "comment_id": 73554870, "body": "If it is from the Qt repository, the link to BitBlt should be the bug report, since this Qt code is lacking support for error checking.  Code like this should check return values, since 1) It doesn&#39;t know what the display hardware may be, thus those functions may fail and 2) Any responsible Win API programmer that releases code that is meant to be used by other programmers would log and check all API return codes.  I was burned by this type of lazy coding in the past, and on the device context part too."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491430140, "post_id": 43241605, "comment_id": 73555032, "body": "@PaulMcKenzie Can you understand that ALL FUNCTIONS WORKS, but sometimes RANDOMLY on the same PC IT WORKS 3 MINUTES???? Is that simple thing too hard for you?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1491431083, "post_id": 43241605, "comment_id": 73555397, "body": "Stop shouting.  Here is what you posted: --  <code>And on some computers,</code>.  I am giving you advice that I personally ran into with code similar to this.  You can take it or leave it."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491431149, "post_id": 43241605, "comment_id": 73555423, "body": "@PaulMcKenzie It&#39;s not shouting, I&#39;ve marked the most hard for your understanding parts."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1491431349, "post_id": 43241605, "comment_id": 73555476, "body": "Capitalized words are considered shouting in the Internet world.  Secondly, I spent my time trying to give you advice, but since you don&#39;t what to heed any of it, then keep waiting for someone else to respond to you."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491431550, "post_id": 43241605, "comment_id": 73555538, "body": "They mean what the author wants to mean. <a href=\"http://stackoverflow.com/questions/4903043/total-system-freezing-when-using-timers-in-graphical-application\" title=\"total system freezing when using timers in graphical application\">stackoverflow.com/questions/4903043/&hellip;</a> check examples of good answers, not for reputation."}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491431579, "post_id": 43241605, "comment_id": 73555546, "body": "@PaulMcKenzie you spent time for reputation hunt, not for advice."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491431753, "post_id": 43241605, "comment_id": 73555607, "body": "Reputation is gained by posting answers, not comments.  I get absolutely no points placing comments."}], "answers": [{"tags": [], "owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "is_accepted": true, "score": 0, "last_activity_date": 1491482497, "creation_date": 1491482497, "answer_id": 43255542, "question_id": 43241605, "link": "https://stackoverflow.com/questions/43241605/winapi-bitblt-freezes-for-minutes/43255542#43255542", "title": "WinAPI BitBlt freezes for minutes", "body": "<p>Problem was in Aero. Computers that freezes with BitBlt has Win7 and Aero. Without Aero all ok.</p>\n"}], "owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 43255542, "answer_count": 1, "score": 0, "last_activity_date": 1491482497, "creation_date": 1491426323, "last_edit_date": 1491428962, "question_id": 43241605, "link": "https://stackoverflow.com/questions/43241605/winapi-bitblt-freezes-for-minutes", "title": "WinAPI BitBlt freezes for minutes", "body": "<p>I have a little modified <a href=\"https://code.woboq.org/qt5/qtbase/src/plugins/platforms/windows/qwindowsscreen.cpp.html#_ZNK14QWindowsScreen10grabWindowEyiiii\" rel=\"nofollow noreferrer\">QScreen::grabWindow</a> function. And on some computers, unfortunately I didn't find relationship between them, BitBlt freezes for even minutes! Why this can happen and what can I do?</p>\n\n<pre><code>QPixmap DetectionFlow::grabScreen(HWND h)\n{\n    RECT rect;\n    GetClientRect(h, (LPRECT)&amp;rect);\n\n    // get the height and width of the screen\n    int height = rect.bottom - rect.top;\n    int width = rect.right - rect.left;\n\n    // Create and setup bitmap\n    HDC display_dc = GetDC(0);\n\n    HDC bitmap_dc = CreateCompatibleDC(display_dc);\n\n    HBITMAP bitmap = CreateCompatibleBitmap(display_dc, width, height);\n\n    HGDIOBJ null_bitmap = SelectObject(bitmap_dc, bitmap);\n\n    HDC window_dc = GetDC(h);\n    BitBlt(bitmap_dc, 0, 0, width, height, window_dc, 0, 0, SRCCOPY);\n\n    // clean up all but bitmap\n    ReleaseDC(h, window_dc);\n\n    SelectObject(bitmap_dc, null_bitmap);\n\n    DeleteDC(bitmap_dc);\n\n\n    const QPixmap pixmap = qt_pixmapFromWinHBITMAP(bitmap);\n\n    DeleteObject(bitmap);\n\n    ReleaseDC(0, display_dc);\n\n    return pixmap;\n}\n</code></pre>\n\n<p>PS. What is interesting, on computers, where freezes, it freezes randomly. So usually there it works fast (a couple of ms) and then freeze.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "opencl"], "comments": [{"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1491439637, "post_id": 43241488, "comment_id": 73557743, "body": "Does it make any difference if you don&#39;t <code>new</code> the buffer for <code>platforms</code>?  e.g., <code>cl_platform_id platforms[6];</code>"}, {"owner": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "reply_to_user": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1491440010, "post_id": 43241488, "comment_id": 73557824, "body": "Nope, since posting the question I&#39;ve tried mangling the parameters in many ways. Not only have I tried stack allocations but also making the allocated buffer much bigger than needed and pointing to somewhere in the middle of it (in case it tried to access too far before the pointer). I&#39;m pretty sure it&#39;s not due to the buffer since the address that is getting the access violation is 0x000008E0. If it was trying to read past the bounds of the array I would expect the address to be much farther in memory and not consistent."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 1, "creation_date": 1491441506, "post_id": 43241488, "comment_id": 73558151, "body": "I&#39;ve seen several examples that want to do a two-pass query and allocation.  From one of the code excerpts here: <a href=\"https://forums.khronos.org/showthread.php/7509-How-to-properly-create-Read-and-Write-Buffers\" rel=\"nofollow noreferrer\">How to properly create Read and Write Buffers</a>  <code>err = clGetPlatformIDs(0, NULL, &amp;numPlatforms);</code>  <code>if(numPlatforms &gt; 0)</code>  <code>{</code>  <code>&#47;&#47;we have at least one</code>  <code>cl_platform_id* platforms = new cl_platform_id[numPlatforms];</code>  <code>err = clGetPlatformIDs(numPlatforms, platforms, NULL);</code>  <code>platform_id = platforms[0];</code> <code>delete[] platforms;</code> <code>}</code>"}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1491441814, "post_id": 43241488, "comment_id": 73558240, "body": "Sorry I couldn&#39;t get that formatted correctly.  In any case I&#39;m not sure why it would make a difference, but it may be worth a shot."}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1491659007, "post_id": 43241488, "comment_id": 73656446, "body": "How many platforms does your device have, and what are they?"}, {"owner": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "reply_to_user": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492016710, "post_id": 43241488, "comment_id": 73813513, "body": "@PhilBrubaker Thanks for the tip but it&#39;s still getting an access violation just from running <code>clGetPlatformIDs(0, NULL, &amp;numPlatforms);</code> in Visual Studio @Dithermaster 3. CPU, GPU, and not sure where the third is coming from"}], "answers": [{"comments": [{"owner": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "edited": false, "score": 0, "creation_date": 1492016876, "post_id": 43314582, "comment_id": 73813615, "body": "Even when calling <code>clGetPlatformIDs(0, NULL, &amp;numPlatforms);</code> or <code>clGetPlatformIDs(numPlatformsToCheck, NULL, &amp;numPlatforms);</code> I get the same access violation error in VS (but not in the executable that&#39;s created)  While what you&#39;ve mentioned is a good practice, I don&#39;t think it&#39;s the issue here."}, {"owner": {"reputation": 1009, "user_id": 2521274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Klw0F.png?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2521274/austin"}, "reply_to_user": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "edited": false, "score": 0, "creation_date": 1492025377, "post_id": 43314582, "comment_id": 73818197, "body": "What is numPlatforms after the first call?"}, {"owner": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "edited": false, "score": 0, "creation_date": 1492033621, "post_id": 43314582, "comment_id": 73822433, "body": "Access violation halts execution, it never gets filled. In the standalone (since it works outside of visual studio) it&#39;s 3."}, {"owner": {"reputation": 1009, "user_id": 2521274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Klw0F.png?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2521274/austin"}, "reply_to_user": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "edited": false, "score": 0, "creation_date": 1492172607, "post_id": 43314582, "comment_id": 73881677, "body": "What compiler and linker options are you using for debug vs release? Are you linking to an old library in the debug?"}, {"owner": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "edited": false, "score": 0, "creation_date": 1492202696, "post_id": 43314582, "comment_id": 73896965, "body": "They both link to the same library. Also, I don&#39;t think it&#39;s a debug vs release issue as running in VS will halt in either configuration. Whereas the executable created in either configuration works when ran outside of VS"}], "tags": [], "owner": {"reputation": 1009, "user_id": 2521274, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Klw0F.png?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2521274/austin"}, "is_accepted": false, "score": 0, "last_activity_date": 1491795136, "creation_date": 1491795136, "answer_id": 43314582, "question_id": 43241488, "link": "https://stackoverflow.com/questions/43241488/opencl-clgetplatformids-causes-access-violation-only-when-ran-from-visual-studio/43314582#43314582", "title": "OpenCL clGetPlatformIDs causes access violation only when ran from Visual Studio", "body": "<p>I think you are using clGetPlatformIDs wrong. First, call <code>clGetPlatformIDs(numPlatformsToCheck, NULL, &amp;numPlatforms);</code></p>\n\n<p>Then:\n<code>cl_platform_id * platforms = new cl_platform_id[numPlatforms];</code></p>\n\n<p>Finally: <code>error = clGetPlatformIDs(numPlatformsToCheck, platforms, NULL);\nprintCLError( \"Getting Platforms\", error );</code></p>\n\n<p>In general OpenCL query commands are:</p>\n\n<ul>\n<li>Query to get number of items in a list</li>\n<li>Allocate the memory for the list</li>\n<li>Populate list</li>\n</ul>\n\n<p>The issue is probably that it is either trying to find 6 platforms where there are not 6 platforms or something is funky in the library when all parameters are entered.</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 2652655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dfda8cce6a7d6295f5a30079e7ec0bc?s=128&d=identicon&r=PG", "display_name": "devdot", "link": "https://stackoverflow.com/users/2652655/devdot"}, "is_accepted": false, "score": 2, "last_activity_date": 1512127036, "last_edit_date": 1512127036, "creation_date": 1512123819, "answer_id": 47591283, "question_id": 43241488, "link": "https://stackoverflow.com/questions/43241488/opencl-clgetplatformids-causes-access-violation-only-when-ran-from-visual-studio/47591283#47591283", "title": "OpenCL clGetPlatformIDs causes access violation only when ran from Visual Studio", "body": "<p>So I just had the same issue: I got an access violation exception on any OpenCL function. Fresh install of the Intel OpenCL SDK, all drivers up-to-date. Only happens when ran inside of Visual Studio.</p>\n\n<p><a href=\"https://github.com/shimat/opencvsharp/issues/243\" rel=\"nofollow noreferrer\">I found a solution.</a></p>\n\n<p>There would be an access violation in igdrcl64.dll, causing the exception. This library is part of the IntelHD Graphics drivers and there apparently used to be a bug in the DLL. But I don't have this driver installed (using NVIDIA graphics card), also the bug is supposedly fixed by now. It turns out the IntelHD driver's uninstaller does not remove all it's DLL's, so the buggy DLL's were left on my machine and not updated.</p>\n\n<p>Fix: Remove the DLL's manually (only if you don't use IntelHD graphics!)</p>\n\n<p>On 64-bit version of Windows OS:<br>\nC:\\Windows\\System32\\igdbcl64.dll<br>\nC:\\Windows\\System32\\igdfcl64.dll<br>\nC:\\Windows\\System32\\igdrcl64.dll<br>\nC:\\Windows\\SysWOW64\\igdbcl32.dll<br>\nC:\\Windows\\SysWOW64\\igdfcl32.dll<br>\nC:\\Windows\\SysWOW64\\igdrcl32.dll  </p>\n\n<p>On 32-bit version of Windows OS:<br>\nC:\\Windows\\System32\\igdbcl32.dll<br>\nC:\\Windows\\System32\\igdfcl32.dll<br>\nC:\\Windows\\System32\\igdrcl32.dll  </p>\n\n<p>I hope this will help someone.</p>\n"}], "owner": {"reputation": 651, "user_id": 1873665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/915e2ee7009b078f521734bd4115bb41?s=128&d=identicon&r=PG", "display_name": "Jonathan Pearl", "link": "https://stackoverflow.com/users/1873665/jonathan-pearl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1512127036, "creation_date": 1491425846, "question_id": 43241488, "link": "https://stackoverflow.com/questions/43241488/opencl-clgetplatformids-causes-access-violation-only-when-ran-from-visual-studio", "title": "OpenCL clGetPlatformIDs causes access violation only when ran from Visual Studio", "body": "<p>This is a strange one for me. I'm currently pulling a project from an old repo of mine that I've recently migrated to VS2015. The solution still builds and the executable works, but when running in visual studio I get an access violation in the call to <code>clGetPlatformIDs()</code> trying to read from 0x000008E0.</p>\n\n<p>I honestly have no clue what it could be as it's very strange: the builds work themselves but not from VS. Debugging through I can confirm all the parameters are as expected but the function still fails. I updated the OpenCL implementation to Intel's OpenCL SDK version 6.3 but that didn't fix the problem and I don't have the symbols to dig any deeper into the function.</p>\n\n<p>Code is simple, but I've posted it below anyway.</p>\n\n<pre><code>//Get Platforms\ncl_platform_id * platforms = new cl_platform_id[6];\ncl_uint numPlatforms = 0;\ncl_uint numPlatformsToCheck = 6;\nerror = clGetPlatformIDs(numPlatformsToCheck, platforms, &amp;numPlatforms);\nprintCLError( \"Getting Platforms\", error );\n</code></pre>\n"}, {"tags": ["c++", "winforms", "qt"], "comments": [{"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 1, "creation_date": 1491426085, "post_id": 43241483, "comment_id": 73553282, "body": "<a href=\"https://forum.qt.io/topic/1368/solved-how-to-make-always-top-window/5\" rel=\"nofollow noreferrer\">forum.qt.io/topic/1368/solved-how-to-make-always-top-window/&zwnj;&#8203;5</a>"}, {"owner": {"reputation": 55, "user_id": 7020770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/405e8279a70b3601ca479afc70b2d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "MarkJoy", "link": "https://stackoverflow.com/users/7020770/markjoy"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491426390, "post_id": 43241483, "comment_id": 73553461, "body": "I checked it but nothing mentioned stay on top without taking other&#39;s focus/cursor?"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491427564, "post_id": 43241483, "comment_id": 73554015, "body": "What do you mean exactly by stay on top without taking focus/cursor"}, {"owner": {"reputation": 55, "user_id": 7020770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/405e8279a70b3601ca479afc70b2d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "MarkJoy", "link": "https://stackoverflow.com/users/7020770/markjoy"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491428007, "post_id": 43241483, "comment_id": 73554189, "body": "Like on-screen keyboard. It is always on top but you can still do typing or working in other windows."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491428977, "post_id": 43241483, "comment_id": 73554563, "body": "On screen keyboard is most likely directing all of its input to the &quot;active&quot; window, if there&#39;s a way to direct user input to another window that would be the way I&#39;d go"}, {"owner": {"reputation": 55, "user_id": 7020770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/405e8279a70b3601ca479afc70b2d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "MarkJoy", "link": "https://stackoverflow.com/users/7020770/markjoy"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491430995, "post_id": 43241483, "comment_id": 73555370, "body": "ok.. I got it worked now. Seems that I misunderstood how stay on top works"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1491659745, "post_id": 43241483, "comment_id": 73656683, "body": "Can your formulate an answer and accept it, so other people can benefit from it too?"}, {"owner": {"reputation": 55, "user_id": 7020770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/405e8279a70b3601ca479afc70b2d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "MarkJoy", "link": "https://stackoverflow.com/users/7020770/markjoy"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1494160453, "post_id": 43241483, "comment_id": 74699990, "body": "@m7913d I updated my answer."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 7020770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/405e8279a70b3601ca479afc70b2d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "MarkJoy", "link": "https://stackoverflow.com/users/7020770/markjoy"}, "is_accepted": true, "score": 1, "last_activity_date": 1494160381, "creation_date": 1494160381, "answer_id": 43831490, "question_id": 43241483, "link": "https://stackoverflow.com/questions/43241483/how-to-make-a-windows-always-on-top-like-on-screen-keyboard/43831490#43831490", "title": "How to make a windows always on top like on-screen keyboard", "body": "<p>This is how I did in QT:</p>\n\n<p><code>window-&gt;setFlags(Qt::WindowStaysOnTopHint | window-&gt;flags());</code></p>\n"}], "owner": {"reputation": 55, "user_id": 7020770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/405e8279a70b3601ca479afc70b2d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "MarkJoy", "link": "https://stackoverflow.com/users/7020770/markjoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 43831490, "answer_count": 1, "score": -1, "last_activity_date": 1494160381, "creation_date": 1491425836, "last_edit_date": 1491431081, "question_id": 43241483, "link": "https://stackoverflow.com/questions/43241483/how-to-make-a-windows-always-on-top-like-on-screen-keyboard", "title": "How to make a windows always on top like on-screen keyboard", "body": "<p>Normally, when I bring a window up on top, it will affect other windows like taking their focus/cursor.</p>\n\n<p>How to make a windows always on top, but cursor/control/focus remains on other windows like on-screen keyboard?</p>\n\n<p>I am working on QT, but shed a light into visual C++ or windows api also help.</p>\n\n<p>EDIT: Ok.. I got it worked now. Seems that I misunderstood how stay on top works</p>\n"}, {"tags": ["c++", "mysql", "qt", "qsqldatabase"], "answers": [{"tags": [], "owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "is_accepted": true, "score": 1, "last_activity_date": 1525815786, "creation_date": 1525815786, "answer_id": 50242665, "question_id": 43241475, "link": "https://stackoverflow.com/questions/43241475/qt-c-qsqldatabase-qmysql-driver-not-loaded-on-os-x/50242665#50242665", "title": "QT/C++ QSqlDatabase: QMYSQL driver not loaded on OS X", "body": "<p>I had this problem on macOS High Sierra (10.13.4) with:</p>\n\n<ul>\n<li>mysql-5.6.40-macos10.13-x86_64.dmg</li>\n<li>mysql-connector-c-6.1.11-macos10.12-x86_64.dmg</li>\n<li>Qt 5.10.1</li>\n<li>clang: Apple LLVM version 9.0.0 (clang-900.0.39.2) Target: x86_64-apple-darwin17.5.0</li>\n</ul>\n\n<p>You were lucky, I didn't get this message at first. I had to enabled more debugging info by setting a new environment variable called <code>QT_DEBUG_PLUGINS</code> as <code>1</code> on <strong>Project Properties > Run</strong>. Executing my application again revealed pretty much the same error message as yours.</p>\n\n<p>To solve the problem, the first thing you need to do is find where <code>libmysqlclient.18.dylib</code> is located in the computer:</p>\n\n<pre><code>$ find / -iname libmysqlclient.18.dylib\n/usr/local/mysql/lib/libmysqlclient.18.dylib\n</code></pre>\n\n<p>Great, now find where Qt stores its plugins:</p>\n\n<pre><code>$ qmake -query QT_INSTALL_PLUGINS\n/Users/karlphillip/Qt/5.10.1/clang_64/plugins\n</code></pre>\n\n<p>and create a new environment variable on your Terminal with this information to make the next part easier:</p>\n\n<pre><code>$ export QT_PLUGIN_PATH=`qmake -query QT_INSTALL_PLUGINS`\n</code></pre>\n\n<p>Finally, go to the <code>sqldrivers</code> inside Qt plugins directory and update the shared library path with the information you found earlier:</p>\n\n<pre><code>$ cd /Users/karlphillip/Qt/5.10.1/clang_64/plugins/sqldrivers\n$ install_name_tool -change libmysqlclient.18.dylib /usr/local/mysql/lib/libmysqlclient.18.dylib $QT_PLUGIN_PATH/sqldrivers/libqsqlmysql.dylib\n</code></pre>\n\n<p>Done.</p>\n"}], "owner": {"reputation": 181, "user_id": 7541231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991d26e5c0ee299ddc901dacfa99fe4d?s=128&d=identicon&r=PG", "display_name": "ivan8m8", "link": "https://stackoverflow.com/users/7541231/ivan8m8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "accepted_answer_id": 50242665, "answer_count": 1, "score": 4, "last_activity_date": 1525815786, "creation_date": 1491425821, "question_id": 43241475, "link": "https://stackoverflow.com/questions/43241475/qt-c-qsqldatabase-qmysql-driver-not-loaded-on-os-x", "title": "QT/C++ QSqlDatabase: QMYSQL driver not loaded on OS X", "body": "<p>I'm using<br>\nOS X: 10.12.4<br>\nQt Creator 4.0.2<br>\nMySQL 5.0.12 (looks like that, not sure)<br>\nC++</p>\n\n<p>Under from QT I am trying to connect to a mysql database by following code:</p>\n\n<pre><code>QSqlDatabase db = QSqlDatabase::addDatabase(\"QMYSQL\");\ndb.setHostName(\"sql104.rf.gd\"); // 185.27.134.10\n//db.setPort(3306);\ndb.setUserName(\"correctname\");\ndb.setPassword(\"correctpw\");\ndb.setDatabaseName(\"rfgd_19926673_shop\");\n\nif (db.open()){\n   ui-&gt;label-&gt;setText(\"success\");\n   } else {\n   i-&gt;label-&gt;setText(\"fail\");\n}\n</code></pre>\n\n<p>And it fails with</p>\n\n<pre><code>QSqlDatabase: QMYSQL driver not loaded\nQSqlDatabase: available drivers: QSQLITE QMYSQL QMYSQL3 QODBC QODBC3 QPSQL QPSQL7\n</code></pre>\n\n<p>I've tried this with no result</p>\n\n<pre><code>QPluginLoader loader;\nloader.setFileName(\"/Users/Ivan/Qt/5.7/clang_64/plugins/sqldrivers/libqsqlmysql.dylib\");\n</code></pre>\n\n<p>It returns</p>\n\n<pre><code>Cannot load library \n/Users/Ivan/Qt/5.7/clang_64/plugins/sqldrivers/libqsqlmysql.dylib: (dlopen(/Users/Ivan/Qt/5.7/clang_64/plugins/sqldrivers/libqsqlmysql.dylib, 5): Library not loaded: /opt/local/lib/mysql55/mysql/libmysqlclient.18.dylib\nReferenced from: /Users/Ivan/Qt/5.7/clang_64/plugins/sqldrivers/libqsqlmysql.dylib\nReason: image not found)\n/Users/Ivan/build-CourierHelperDesktop-Desktop_Qt_5_7_0_clang_64bit-Release/CourierHelperDesktop.app/Contents/MacOS\n</code></pre>\n\n<p>I've got only</p>\n\n<pre><code>/usr/local/mysql-5.7.17-macos10.12-x86_64/lib/lib/mysqlclient.20.dylib\n</code></pre>\n\n<p>Have tried </p>\n\n<pre><code>mkdir /opt/local/lib/mysql55/mysql/\ncp /usr/local/mysql-5.7.17-macos10.12-x86_64/lib/lib/mysqlclient.20.dylib /opt/local/lib/mysql55/mysql\n</code></pre>\n\n<p>No help.</p>\n\n<p>Please, somebody, help me out. I am really stuck.</p>\n"}, {"tags": ["c++", "file", "inputstream"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1491425812, "post_id": 43241434, "comment_id": 73553134, "body": "Try <code>while(iss &gt;&gt; a)</code>."}, {"owner": {"reputation": 667, "user_id": 981403, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PrBma.png?s=128&g=1", "display_name": "Mazeryt", "link": "https://stackoverflow.com/users/981403/mazeryt"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1491426097, "post_id": 43241434, "comment_id": 73553291, "body": "That&#39;s help Thanks"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1491426198, "post_id": 43241434, "comment_id": 73553347, "body": "Do you understand why?"}], "answers": [{"comments": [{"owner": {"reputation": 667, "user_id": 981403, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PrBma.png?s=128&g=1", "display_name": "Mazeryt", "link": "https://stackoverflow.com/users/981403/mazeryt"}, "edited": false, "score": 0, "creation_date": 1491426853, "post_id": 43241613, "comment_id": 73553668, "body": "Thanks for explanation that was what wasn&#39;t intuitive for me"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 3, "last_activity_date": 1491426348, "creation_date": 1491426348, "answer_id": 43241613, "question_id": 43241434, "link": "https://stackoverflow.com/questions/43241434/istringstream-from-getline-return-double-for-last-element-in-line/43241613#43241613", "title": "istringstream from getline return double for last element in line", "body": "<p>Statement <code>while(iss)</code> calls the <code>bool</code>-operator on the <code>istringstream</code>, which indicates if a failure has occurred in a previous read.\nHence, when the last read has been successful, the loop is entered once more (because no failure has happened so far); the next read of <code>iss &gt;&gt; a</code> will then fail, but since you ignore the return value of operation <code>iss &gt;&gt; a</code>, the (unchanged) value of <code>a</code> will be pushed once more to your vector.</p>\n\n<p>Write <code>while(iss &gt;&gt; a)</code> instead.</p>\n"}], "owner": {"reputation": 667, "user_id": 981403, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PrBma.png?s=128&g=1", "display_name": "Mazeryt", "link": "https://stackoverflow.com/users/981403/mazeryt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 43241613, "answer_count": 1, "score": 0, "last_activity_date": 1491426348, "creation_date": 1491425611, "question_id": 43241434, "link": "https://stackoverflow.com/questions/43241434/istringstream-from-getline-return-double-for-last-element-in-line", "title": "istringstream from getline return double for last element in line", "body": "<p>I have a file with some number of chars separated by spaces:</p>\n\n<pre><code># cat file.txt\n. . . . . . . . . .\n. . . . . . . . . .\n. . . . . . . . . .\n. . . . . . . . . .\n. . . . . . . . . .\n. . . . . . . . . .\n</code></pre>\n\n<p>I am trying to put them to structure, for example vector, using ifstream and istringstream in followed way:</p>\n\n<pre><code>string line;\nifstream file(\"file.txt\");\nvector&lt;char&gt; row\n\nwhile(getline(file, line)){\n    char a; \n    istringstream iss(line);\n    vector&lt;char&gt; row;\n    while(iss){\n        iss &gt;&gt; a;\n        row.push_back(a);\n    }\n    table.pushback(row);\n}\n</code></pre>\n\n<p>The issue is that iss always return me last element twice in this configuration:</p>\n\n<pre><code>for(int i=0; i&lt;table.size(); i++) {\n    for(int j=0; j&lt;table[i].size(); j++){\n        cout &lt;&lt; table[i][j] &lt;&lt; \" \";\n    }\n    cout &lt;&lt;endl;\n}\n\n. . . . . . . . . . . \n. . . . . . . . . . . \n. . . . . . . . . . . \n. . . . . . . . . . . \n. . . . . . . . . . . \n. \n</code></pre>\n\n<p>I believe that issue is probably caused by end of line character, and for some reasons, last char is stored.</p>\n\n<p>Also when I read numbers line \"1 2 3 4 5 6 7\"\na program will print \"1 2 3 4 5 6 7 7\"</p>\n\n<p>Is any particular reason why this way of processing file is somehow wrong? Or maybe I am missing something trivial in this example.</p>\n"}, {"tags": ["c++", "qt", "qml", "qt5"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1491426310, "post_id": 43241285, "comment_id": 73553407, "body": "Have you tried renaming it to Rect.qml and consequently in window.qml?"}, {"owner": {"reputation": 21, "user_id": 7571483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd105eec8110cd5380409de3d0459ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eagle13559", "link": "https://stackoverflow.com/users/7571483/eagle13559"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1491567534, "post_id": 43241285, "comment_id": 73623673, "body": "You guys nailed it! Thank you for your time and feedback!"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1491428043, "creation_date": 1491428043, "answer_id": 43242022, "question_id": 43241285, "link": "https://stackoverflow.com/questions/43241285/qml-cannot-assign-to-non-existent-property/43242022#43242022", "title": "QML Cannot assign to non-existent property", "body": "<p>You must rename the file to <code>Rect.qml</code> and call it <code>Rect{}</code></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 7571483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd105eec8110cd5380409de3d0459ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eagle13559", "link": "https://stackoverflow.com/users/7571483/eagle13559"}, "edited": false, "score": 0, "creation_date": 1491567621, "post_id": 43242314, "comment_id": 73623725, "body": "Yes, the name was the problem. I agree, it&#39;s frustrating to be subject not-explicitly outlined limitations that is specific to this language. Thank you for your time!"}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 3, "last_activity_date": 1491429370, "creation_date": 1491429370, "answer_id": 43242314, "question_id": 43241285, "link": "https://stackoverflow.com/questions/43241285/qml-cannot-assign-to-non-existent-property/43242314#43242314", "title": "QML Cannot assign to non-existent property", "body": "<p>QML imposes some limitations on how you can name things, QML documents or exposed C++ enums keys must begin with capital letters, and properties or ids must <strong>not</strong> begin with a capital letter. I don't recall this being documented in one single, convenient article as it should. Most are documented, but it is spread all over the place.</p>\n"}], "owner": {"reputation": 21, "user_id": 7571483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd105eec8110cd5380409de3d0459ea?s=128&d=identicon&r=PG&f=1", "display_name": "Eagle13559", "link": "https://stackoverflow.com/users/7571483/eagle13559"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3447, "favorite_count": 0, "accepted_answer_id": 43242022, "answer_count": 2, "score": 1, "last_activity_date": 1502171142, "creation_date": 1491425067, "last_edit_date": 1502171142, "question_id": 43241285, "link": "https://stackoverflow.com/questions/43241285/qml-cannot-assign-to-non-existent-property", "title": "QML Cannot assign to non-existent property", "body": "<p>I'm trying to create a custom QML object. I started simple, by making a qml file called <strong>rect.qml</strong>:</p>\n\n<pre><code>import QtQuick 2.2\nRectangle \n{ }\n</code></pre>\n\n<p><em>In the same directory</em>, I wanted to use my rect object in a seperate qml file, called <strong>window.qml</strong>:</p>\n\n<pre><code>import QtQuick 2.2\nItem {\n  id: mainWindow\n  rect\n  { }\n}\n</code></pre>\n\n<p>Very high caliber stuff, I know. Anyway, when I try to run my application, I get the following error: </p>\n\n<p><strong>qrc:/qml/window.qml:3:13: Cannot assign to non-existent property \"rect\"</strong></p>\n\n<p>So I checked my QRC file, and it goes as such:</p>\n\n<pre><code>&lt;RCC&gt;\n    &lt;qresource prefix=\"/qml\"&gt;\n        &lt;file&gt;window.qml&lt;/file&gt;\n        &lt;file&gt;rect.qml&lt;/file&gt;\n    &lt;/qresource&gt;\n&lt;/RCC&gt;\n</code></pre>\n\n<p>According to the documentation (<a href=\"http://doc.qt.io/qt-5/qtqml-documents-definetypes.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtqml-documents-definetypes.html</a>) this application isn't very useful as it's so bare bones, (simplified for my question,) but there shouldn't be an error.</p>\n\n<p>Any help would be very appreciated!</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1491424655, "post_id": 43241117, "comment_id": 73552467, "body": "if you need <code>reinterpret_cast</code> something is badly wrong in this case.  Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 29, "user_id": 7814615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1483c49941e5fe9f9cd1761a07d67b9?s=128&d=identicon&r=PG&f=1", "display_name": "user7814615", "link": "https://stackoverflow.com/users/7814615/user7814615"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1491424894, "post_id": 43241117, "comment_id": 73552616, "body": "Sorry, I edited and tried to make it understandable."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7814615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1483c49941e5fe9f9cd1761a07d67b9?s=128&d=identicon&r=PG&f=1", "display_name": "user7814615", "link": "https://stackoverflow.com/users/7814615/user7814615"}, "edited": false, "score": 0, "creation_date": 1491425925, "post_id": 43241456, "comment_id": 73553189, "body": "So that means my function CTest::Create is not causing any memory leaks?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 29, "user_id": 7814615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1483c49941e5fe9f9cd1761a07d67b9?s=128&d=identicon&r=PG&f=1", "display_name": "user7814615", "link": "https://stackoverflow.com/users/7814615/user7814615"}, "edited": false, "score": 0, "creation_date": 1491426187, "post_id": 43241456, "comment_id": 73553340, "body": "Not obviously, but then it&#39;s not at all obvious what it <i>is</i> doing or why it is doing it. If you have to ask questions like this, I don&#39;t really think you are in a good position to design an application framework."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 0, "last_activity_date": 1491425741, "creation_date": 1491425741, "answer_id": 43241456, "question_id": 43241117, "link": "https://stackoverflow.com/questions/43241117/c-method-scope-pointer-management/43241456#43241456", "title": "C++ | Method scope pointer management", "body": "<p>You obviously don't need to delete every pointer, otherwise you would have to write code like this:</p>\n\n<pre><code> int main( int argc, char ** argv ) {\n      // stuff\n      delete argv;\n }\n</code></pre>\n\n<p>If you explicitly create something with <code>new</code> and assign the pointer new gives you to a raw pointer, then you need to <code>delete</code> that pointer. Of course, this is error prone, and can't be made exception-safe, and so you should be using things like std::unique_ptr and std::make_unique instead.</p>\n"}], "owner": {"reputation": 29, "user_id": 7814615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1483c49941e5fe9f9cd1761a07d67b9?s=128&d=identicon&r=PG&f=1", "display_name": "user7814615", "link": "https://stackoverflow.com/users/7814615/user7814615"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491425741, "creation_date": 1491424480, "last_edit_date": 1491424831, "question_id": 43241117, "link": "https://stackoverflow.com/questions/43241117/c-method-scope-pointer-management", "title": "C++ | Method scope pointer management", "body": "<p>I got a question about pointers:</p>\n\n<pre><code>class CAppFramework : public IBaseApp\n{\npublic:\n    CAppFramework( std::initializer_list&lt; CClientApp* &gt; input );\n    CAppFramework( );\n    ~CAppFramework( );\n\n    void Create( ) override;\n    void Release( ) override;\n\n    template&lt; class T &gt; T** Request( std::string c_appname )\n    {\n        for ( auto c_app : m_ClientApps )\n        {\n            if ( c_app -&gt; GetName( ) == c_appname )\n            {\n                T** t_app = reinterpret_cast&lt; T** &gt;( c_app );\n\n                return t_app;\n            }\n       }\n\n       return nullptr;\n   }\n\n   std::vector&lt; CClientApp* &gt;&amp; GetClientApps( );\n\nprivate:\n   std::vector&lt; CClientApp* &gt; m_ClientApps;\n};\n\n\nvoid CTest::Create( )\n{\n    std::cout &lt;&lt; \"Ayye\" &lt;&lt; std::endl;\n\n    CTest* test = *( m_Framework-&gt;Request&lt; CTest &gt;( \n    \"Test\" ) );\n    test -&gt; RunTest( );\n}\n</code></pre>\n\n<p>CTest is a derived class from CClientApp.</p>\n\n<p>Do I need to delete test? Cause if I do, I get an access violation.\nI suppose that is because \"Request\" is returning a pointer to a pointer that is inside a vector, so when I dereference it and delete it, it would delete the object in the vector which will / might still get used?</p>\n\n<p>This is more of a general question. Do I need to delete every pointer or just pointers that are dynamically allocated using \"new\"?</p>\n\n<p>I hope someone can help me.</p>\n"}, {"tags": ["c++", "time", "chrono"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491424461, "post_id": 43241025, "comment_id": 73552362, "body": "I know about different precisions, but when I&#39;m trying to &quot;cout&quot; precision of high_resolution_clock it is equal to steady_clock&#39;s one. Is it possible that &quot;int a = 0;&quot; takes less then 1 nanosecond or something?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491424595, "post_id": 43241025, "comment_id": 73552436, "body": "@PaulNewman: It is more likely that your std::lib&#39;s implementation of <code>high_resolution_clock</code> isn&#39;t very good.  VS-13?  Can you upgrade to VS-15 or VS-17?  On my platform, consecutive calls to <code>high_resoluiton_clock</code> and <code>steady_clock</code> always output an updated value (even with nothing in-between the calls to <code>now</code>)."}, {"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491424831, "post_id": 43241025, "comment_id": 73552569, "body": "I&#39;m using gcc 6.1.0 compiler actually."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491424923, "post_id": 43241025, "comment_id": 73552627, "body": "Interesting.  This is the first report I&#39;ve seen of this behavior with that compiler.  It leaves me wondering if the compiler has done some &quot;creative&quot; optimizations with the calls to <code>now</code>.  Another possibility is that the implementation of <code>high_resolution_clock</code> is calling something with only microseconds precision under the hood, and just bragging about nanosecond precision."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491425092, "post_id": 43241025, "comment_id": 73552724, "body": "Do repeated calls to <code>high_resolution_clock::now()</code> always produces <code>time_points</code> containing nanoseconds that are integral amounts of microseconds?"}, {"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491425342, "post_id": 43241025, "comment_id": 73552855, "body": "High_resolution_clock::now() printed 10 times gives exactly the same value."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491425587, "post_id": 43241025, "comment_id": 73552992, "body": "Interesting.  Not replicating here: <a href=\"https://wandbox.org/permlink/hptdOXMjHrgesM36\" rel=\"nofollow noreferrer\">wandbox.org/permlink/hptdOXMjHrgesM36</a>  It might be that gcc on your platform is configured to use a crappy clock for <code>high_resolution_clock</code>, but not at the wandbox link I&#39;m showing."}, {"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491425803, "post_id": 43241025, "comment_id": 73553122, "body": "So changing compiler is the only one rational solution?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491425840, "post_id": 43241025, "comment_id": 73553144, "body": "Or changing clocks.  <code>steady_clock</code> seems to be working for you, right?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491425944, "post_id": 43241025, "comment_id": 73553200, "body": "In your <code>high_resolution_clock</code> output, are the last 3 decimal digits always <code>0</code>?"}, {"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491426206, "post_id": 43241025, "comment_id": 73553352, "body": "It&#39;s weird. Now, with 100 times, result is more interesting: <a href=\"https://pastebin.com/KCFabwHF\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 1, "creation_date": 1491426418, "post_id": 43241025, "comment_id": 73553474, "body": "That is one lousy clock.  It is ticking at the rate of once per 0.015625s.  I&#39;ve got a grandfather pendulum clock that does nearly that good. ;-)"}, {"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491426686, "post_id": 43241025, "comment_id": 73553600, "body": "So what should I do? :/"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491426808, "post_id": 43241025, "comment_id": 73553652, "body": "File a bug.  Use <code>steady_clock</code> unless you need to time something longer than .5s, or need a datetime with a precision of not more than .01s.  I don&#39;t know if upgrading your gcc, or switching to clang would help.  Ultimately the std::lib has to depend on the underlying hardware, which I know nothing about on your platform."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491426866, "post_id": 43241025, "comment_id": 73553676, "body": "Fwiw, your <code>high_resolution_clock</code> is reporting nanoseconds since 1970-01-01 00:00:00 UTC, and is a <code>typedef</code> for your <code>system_clock</code>."}, {"owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "edited": false, "score": 0, "creation_date": 1491427354, "post_id": 43241025, "comment_id": 73553901, "body": "So I think that the only one rational solution is to use steady_clock. :)"}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 5, "last_activity_date": 1491424115, "creation_date": 1491424115, "answer_id": 43241025, "question_id": 43240987, "link": "https://stackoverflow.com/questions/43240987/stdchronohigh-resolution-clock-time-measurement/43241025#43241025", "title": "std::chrono::high_resolution_clock - time measurement", "body": "<p>No.  It's just that different clocks can have different precisions, and timing something so short might not take more than 1 tick of a clock.</p>\n\n<p>You can find out a clock's precision by inspecting <code>clock::duration::period::num</code> and <code>clock::duration::period::den</code>.</p>\n\n<p>Additionally, some implementations of <code>&lt;chrono&gt;</code> have had \"quality of implementation\" issues over the years.  So your experience might change as you switch compilers, and even versions of the same compiler.  Your experience will generally be better if you can work with the latest version of your compiler.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=P32hvk8b13M\" rel=\"noreferrer\">Here is a video tutorial for <code>&lt;chrono&gt;</code>.</a></p>\n"}], "owner": {"reputation": 21, "user_id": 6890240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/357e5a6538955c6a518cae788b74a7ba?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Newman", "link": "https://stackoverflow.com/users/6890240/paul-newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491424115, "creation_date": 1491423946, "question_id": 43240987, "link": "https://stackoverflow.com/questions/43240987/stdchronohigh-resolution-clock-time-measurement", "title": "std::chrono::high_resolution_clock - time measurement", "body": "<p>I'm learning &lt; chrono > right now and I don't understand one thing.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nint main()\n{\n    auto t1 = std::chrono::high_resolution_clock::now();\n    int a = 0;\n    auto t2 = std::chrono::high_resolution_clock::now();\n    auto result = t2 - t1;\n    std::cout &lt;&lt; result.count() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Value of \"result\" in this case equals \"0\".</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nint main()\n{\n    auto t1 = std::chrono::steady_clock::now();\n    int a = 0;\n    auto t2 = std::chrono::steady_clock::now();\n    auto result = t2 - t1;\n    std::cout &lt;&lt; result.count() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>And in this case \"result\" equals about \"5500\".</p>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["c++", "opencv", "computer-vision", "ellipse"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1491431010, "post_id": 43240944, "comment_id": 73555373, "body": "Only 1 ellipse per image? Troubles 1 states that there&#39;s no white outside the ellipse... what about the white background in your example images? Some constraints on the execution time?"}, {"owner": {"reputation": 339, "user_id": 2254364, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a23fa92d8301dc3de7e66f52b2e55689?s=128&d=identicon&r=PG", "display_name": "DouglasAdams", "link": "https://stackoverflow.com/users/2254364/douglasadams"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1491644194, "post_id": 43240944, "comment_id": 73652025, "body": "Only one &quot;black&quot; ellipse per image. The background is not white and not uniform, it&#39;s generally grey [50, 150]. Execution time must be around 1ms if possible. Larger execution time can be admitted, but no more than 3ms"}], "answers": [{"tags": [], "owner": {"reputation": 10288, "user_id": 1542806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b0522a428d374844f2efcb8b342a2?s=128&d=identicon&r=PG", "display_name": "Andrey  Smorodov", "link": "https://stackoverflow.com/users/1542806/andrey-smorodov"}, "is_accepted": false, "score": 1, "last_activity_date": 1491427777, "creation_date": 1491427777, "answer_id": 43241965, "question_id": 43240944, "link": "https://stackoverflow.com/questions/43240944/detect-border-of-partially-hidden-ellipse-with-known-center-opencv/43241965#43241965", "title": "Detect border of partially hidden ellipse with known center (OpenCV)", "body": "<p>Try RANSAC method, it will allow you avoid noise edges and fit ellipce accurate. Ellipse have 2 focuses, you can find them, knowing your ellipse equation, and then find middle between them. It will be you ellipse center of mass.</p>\n\n<p>Example of code for RANSAC ellipse fitting: <a href=\"https://github.com/seisgo/EllipseFit\" rel=\"nofollow noreferrer\">https://github.com/seisgo/EllipseFit</a> </p>\n"}], "owner": {"reputation": 339, "user_id": 2254364, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a23fa92d8301dc3de7e66f52b2e55689?s=128&d=identicon&r=PG", "display_name": "DouglasAdams", "link": "https://stackoverflow.com/users/2254364/douglasadams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1491644457, "creation_date": 1491423774, "last_edit_date": 1491644457, "question_id": 43240944, "link": "https://stackoverflow.com/questions/43240944/detect-border-of-partially-hidden-ellipse-with-known-center-opencv", "title": "Detect border of partially hidden ellipse with known center (OpenCV)", "body": "<p>I have to detect the border of ellipses in gray images. These images contains a lot of stuff, but there is always a (partially hidden) ellipse. I know where is the center of this ellipse in the image.</p>\n\n<p>Advantages: </p>\n\n<ol>\n<li><p>Ellipse is always visible</p></li>\n<li><p>Point near the center of the ellipse is known</p></li>\n<li>Ellipse is always black (value = [0, 50] on 8bits)</li>\n</ol>\n\n<p>Troubles:</p>\n\n<ol>\n<li><p>White blobs (value = [220, 255]) can appears into the ellipse (not outside)</p></li>\n<li><p>Black artefacts (value = [0, 80]) can hide 0% to 50% of the ellipse and white blobs (but the center is still known)</p></li>\n</ol>\n\n<p>Here are 4 examples images which represent the different situations that can appear :</p>\n\n<p><a href=\"https://i.stack.imgur.com/f6BaQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f6BaQ.jpg\" alt=\"Diagrams\"></a></p>\n\n<p>I've tried severals algo (Hough circle, ellipse detection, ..) but none of them managed all the different situations. Moreover, they don't benefit of the known center.\nAll suggestions are welcome !</p>\n"}, {"tags": ["c++", "c++11", "stdthread"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1491423678, "post_id": 43240891, "comment_id": 73551975, "body": "<code>std::unique_ptr&lt;std::function&lt;void()&gt;&gt;</code>"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1491424666, "post_id": 43240891, "comment_id": 73552471, "body": "Use lambda instead of <code>std::bind</code>."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1491436787, "post_id": 43240891, "comment_id": 73557015, "body": "@Zereges: and save it into what?"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1491462500, "post_id": 43240891, "comment_id": 73565438, "body": "@peppe Lambda is convertible to <code>std::function</code>."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1491462748, "post_id": 43240891, "comment_id": 73565574, "body": "But a <code>std::function</code> cannot store move-only lambdas. Or am I missing something?"}], "answers": [{"comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1491424552, "post_id": 43240941, "comment_id": 73552406, "body": "Right, what I would really need is some &quot;building block&quot; of <code>packaged_task</code>. Is there anything in the Standard Library? (Also, what would I store in the <code>packaged_task</code>? A lambda, capturing both the function and the arguments (in a tuple, after decay_copy), whose body is just a call to <code>apply</code>?)"}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1491436189, "post_id": 43240941, "comment_id": 73556840, "body": "I&#39;m settiling down on this solution for now (although it doesn&#39;t satisfy the original question). I&#39;ve also added a call to <code>(void)task.get_future().get()</code> to make it rethrow exceptions, trying to mimic <code>std::thread</code>..."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1491429698, "last_edit_date": 1491429698, "creation_date": 1491423773, "answer_id": 43240941, "question_id": 43240891, "link": "https://stackoverflow.com/questions/43240891/is-there-a-type-erased-function-wrapper-in-the-standard-library-that-matches-std/43240941#43240941", "title": "Is there a type-erased function wrapper in the Standard Library that matches std::thread&#39;s constructor semantics?", "body": "<p>Technically <code>std::packaged_task&lt;void()&gt;</code> matches your requirements.  It is serious overkill, as it can interact with threading and can produce futures.</p>\n\n<p>I have written a <code>task</code> that handles move-only invokation, it is pretty simple.  Getting the small buffer optimization right is harder.</p>\n\n<pre><code>class Async {\npublic:\n  template &lt;typename Function, typename... Args &gt;\n  explicit Async(Function&amp;&amp; f, Args &amp;&amp;... args) {\n    task = [f=std::forward&lt;Function&gt;(f), args=std::make_tuple(std::forward&lt;Args&gt;(args)...)]()mutable{\n      std::apply(std::move(f), std::move(args));\n    };\n  }\n\n  void call() {\n    task();\n    task={}; // don't call twice\n  }\n\nprivate:\n  std::packaged_task&lt;void()&gt; task;\n};\n</code></pre>\n\n<p>where I used C++17 std apply.  Just reimplement it, use google to find an implementaton.</p>\n"}, {"comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1491469163, "post_id": 43241770, "comment_id": 73569822, "body": "Nice one. Nitpicking, I think it requires <code>std::invoke</code> anyhow in there (e.g. if <code>f</code> is a PMF)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1491469478, "post_id": 43241770, "comment_id": 73570029, "body": "@peppe OK, fixed."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 3, "last_activity_date": 1491469435, "last_edit_date": 1491469435, "creation_date": 1491426954, "answer_id": 43241770, "question_id": 43240891, "link": "https://stackoverflow.com/questions/43240891/is-there-a-type-erased-function-wrapper-in-the-standard-library-that-matches-std/43241770#43241770", "title": "Is there a type-erased function wrapper in the Standard Library that matches std::thread&#39;s constructor semantics?", "body": "<pre><code>template&lt;class T&gt; T&amp;&amp; wrap_pm(T&amp;&amp; t) { return std::forward&lt;T&gt;(t); }\ntemplate&lt;class T, class U&gt; \nauto wrap_pm(U T::* p) -&gt; decltype(std::mem_fn(p)) { return std::mem_fn(p); }\n\nclass Async {\npublic:\n    template &lt;typename Function, typename... Args &gt;\n    explicit Async(Function&amp;&amp; f, Args &amp;&amp;... args)\n      : fut(std::async(std::launch::deferred, \n                       [f=std::forward&lt;Function&gt;(f)](auto&amp;&amp;... args) mutable\n                       {\n                           wrap_pm(std::move(f))(decltype(args)(args)...); \n                       }, std::forward&lt;Args&gt;(args)...)) \n    { }\n    void call() \n    {\n        fut.get();\n    }\n\nprivate:\n    std::future&lt;void&gt; fut;\n};\n</code></pre>\n\n<p>I make no promises as to efficiency.</p>\n"}], "owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491469435, "creation_date": 1491423572, "last_edit_date": 1491424183, "question_id": 43240891, "link": "https://stackoverflow.com/questions/43240891/is-there-a-type-erased-function-wrapper-in-the-standard-library-that-matches-std", "title": "Is there a type-erased function wrapper in the Standard Library that matches std::thread&#39;s constructor semantics?", "body": "<p>I need to create a non-template class\u00b9 that needs to hold a callable and its arguments, in order to invoke them at a later point.</p>\n\n<p>Since this class is modelling an async execution, I'd like to give it API and semantics matching the ones of <code>std::thread</code> / <code>std::async</code>: </p>\n\n<pre><code>class Async {\npublic:\n    template &lt;typename Function, typename... Args &gt;\n    explicit Async(Function&amp;&amp; f, Args &amp;&amp;... args)\n    {\n         // perform a (decay) copy of the args,\n         // store f and the copy somewhere\n    }\n\n    void call() \n    {\n        // to be possibly called in a different thread;\n        // call the function stored. no need to return the results\n    }\n\nprivate:\n    // which data members?\n};\n</code></pre>\n\n<p>The first thing that came into my mind is use a <code>std::function&lt;void()&gt;</code> as the only data member, and initialize it from a <code>std::bind</code> over the arguments. </p>\n\n<p>However, this doesn't work: <code>std::function</code> and <code>std::bind</code> don't support move-only types, and <code>std::bind</code> simply does not work in terms of <code>std::invoke</code> (and it does a lot of extra magic, like recursively resolve bindings).</p>\n\n<p>Am I missing some easy-to-reach solution available in the Standard Library to implement this, or should I deploy my own binder and type-erased function wrapper classes?</p>\n\n<hr>\n\n<p>\u00b9 Long story short: this class needs to inherit from a base class with virtual methods, so making this class a template class would cause the usual code bloat and clashes due to the duplication of virtual tables and virtual methods appearing everywhere.</p>\n"}, {"tags": ["c++", "dynamic", "lcs", "subsequence"], "comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 1, "creation_date": 1491434734, "post_id": 43240851, "comment_id": 73556464, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5752208/longest-common-subsequence-for-multiple-sequences\">Longest Common Subsequence for Multiple Sequences</a>"}], "answers": [{"tags": [], "owner": {"reputation": 994, "user_id": 2349174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c97cf2b020c357692218a9c46807ee6?s=128&d=identicon&r=PG", "display_name": "mateuszlewko", "link": "https://stackoverflow.com/users/2349174/mateuszlewko"}, "is_accepted": true, "score": 0, "last_activity_date": 1491425416, "creation_date": 1491425416, "answer_id": 43241390, "question_id": 43240851, "link": "https://stackoverflow.com/questions/43240851/longest-common-subsequence-of-three-sequences-of-int/43241390#43241390", "title": "Longest Common Subsequence of Three Sequences of int", "body": "<p>Your code looks really complicated for such problem, I'm guessing that issue isn't just an implementation but the whole idea for solving this.</p>\n\n<p>LCS of three sequences problem is similar to LCS of two sequences. In both cases we use dynamic programming approach. \nFor two sequences we have: </p>\n\n<pre><code>for i in 1 .. A.size()\n    for j in 1 .. B.size()\n        if A[i] = B[j]\n            lcs_len[i, j] = lcs_len[i - 1, j - 1] + 1\n        else\n            lcs_len[i, j] = max(lcs_len[i, j - 1], lcs_len[i - 1, j])\n</code></pre>\n\n<p>Later, if you want to get lcs (not just its length), you simply need to backtracing starting from position <code>(A.size(), B.size())</code>, and going towards previous values. You can read more about it <a href=\"https://en.wikipedia.org/wiki/Longest_common_subsequence_problem?oldformat=true\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Now for three sequences problem, you just need to add one more loop and if statement, you should be able to come up with this! If not, here is a <a href=\"http://www.geeksforgeeks.org/lcs-longest-common-subsequence-three-strings/\" rel=\"nofollow noreferrer\">spoiler</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7822960, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PXsvdiYqg_Y/AAAAAAAAAAI/AAAAAAAAB4U/RZ3tU3jcuAQ/photo.jpg?sz=128", "display_name": "carnote", "link": "https://stackoverflow.com/users/7822960/carnote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 43241390, "answer_count": 1, "score": -1, "last_activity_date": 1509917597, "creation_date": 1491423433, "last_edit_date": 1509917597, "question_id": 43240851, "link": "https://stackoverflow.com/questions/43240851/longest-common-subsequence-of-three-sequences-of-int", "title": "Longest Common Subsequence of Three Sequences of int", "body": "<p>I am tring to solve the Longest Common Subsequence of Three Sequences of int using C++. the problem is a classic:  </p>\n\n<blockquote>\n  <p><strong>Task</strong>. Given three sequences A = (a1, a2, . . . , an), B = (b1, b2, . . . , bm), and C = (c1, c2, . . . , cl), find the length of their\n  longest common subsequence, i.e., the largest non-negative integer p\n  such that there exist indices 1 \u2264 i1 &lt; i2 &lt; \u00b7 \u00b7 \u00b7 &lt; ip \u2264 n, 1 \u2264 j1 &lt;\n  j2 &lt; \u00b7 \u00b7 \u00b7 &lt; jp \u2264 m, 1 \u2264 k1 &lt; k2 &lt; \u00b7 \u00b7 \u00b7 &lt; kp \u2264 l such that ai1 = bj1\n  = ck1 , . . . , aip = bjp = ckp</p>\n  \n  <p><strong>Input Format</strong>. First line: n. Second line: a1, a2, . . . , an. Third line: m. Fourth line: b1, b2, . . . , bm. Fifth line: l. Sixth\n  line: c1, c2, . . . , cl .</p>\n  \n  <p><strong>Constraints</strong>. 1 \u2264 n, m, l \u2264 100; \u2212109 &lt; ai , bi , ci &lt; 109 .</p>\n  \n  <p><strong>Output Format</strong>. Output p.</p>\n</blockquote>\n\n<p>My solution was OK for 28 over 29 cases, however, I can't find the error</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\nusing std::vector;\n\nint get_position(int alpha,vector&lt;pair&lt;int,int&gt;&gt; vect, int A,int B ) {\n    if (alpha == 8) {\n        int gamma = 0;\n    }\n    if (A != B) {\n        if (vect[A].first == alpha) {\n            return vect[A].second;\n        }\n        if (vect[B].first == alpha) {\n            int petitb = B;\n            while ((petitb &gt; A) &amp;&amp; (vect[petitb].first == alpha))\n                petitb--;\n            if (vect[petitb].first == alpha) return vect[petitb].second;\n            else {\n                petitb++;\n                if (vect[petitb].first == alpha) return vect[petitb].second;\n            }\n\n            return vect[B].second;\n        }\n        int mid = (A + B) / 2;\n        if (vect[mid].first == alpha) {\n            return vect[mid].second;\n        }\n        if (vect[mid].first &gt; alpha) {\n            if (mid == B) return -1;\n            return get_position(alpha, vect, A, mid);\n        }\n        else {\n            if (mid == A) return -1;\n            return get_position(alpha, vect, mid, B);\n        }\n\n    }\n    else {\n        if (vect[A].first == alpha) {\n            return vect[A].second;\n        }\n\n    }\n    return -1;\n}\nint get_relative_pos(int alpha, vector&lt;pair&lt;int, int&gt;&gt; vect,vector&lt;int&gt; V, int A, int B) {\n\n    int absolute = get_position(alpha, vect, 0, vect.size()-1);\n    if ((absolute &gt;= A) &amp;&amp; (absolute &lt;= B)) {\n        return absolute;\n    }\n    if (absolute &gt; B)\n    return -1;\n    if (absolute &lt; A) {\n        if (V[A] == alpha) { return A; }\n        else { return -1; }\n    }\n    return -1;\n}\nbool comp1(pair&lt;int, int&gt;A, pair&lt;int, int&gt;B) {\n    if (A.first == B.first)\n        return A.second &lt; B.second;\n    return A.first &lt; B.first;\n}\nint explore(vector&lt;int&gt; &amp;a, vector&lt;int&gt; &amp;b, vector&lt;int&gt; &amp;c, int PA, int PB, int PC) {\n    int length = 0;\n    while ((PA&lt;a.size()) &amp;&amp; (PB&lt;b.size()) &amp;&amp; (PC&lt;c.size())) {\n        if ((a[PA] == b[PB]) &amp;&amp; (a[PA] == c[PC])) {\n            length++;\n            PA++;\n            PB++;\n            PC++;\n        }\n        else {\n            return length; \n\n\n        }\n\n    }\n    return length;\n}\nint explore2(vector&lt;int&gt; &amp;a, vector&lt;int&gt; &amp;b, vector&lt;int&gt; &amp;c, int PA, int PB, int PC, vector&lt;pair&lt;int, int&gt;&gt; SA, vector&lt;pair&lt;int, int&gt;&gt; SB, vector&lt;pair&lt;int, int&gt;&gt; SC) {\n    int length = 0;\n    while ((PA &lt; a.size()) &amp;&amp; (PB &lt; b.size()) &amp;&amp; (PC &lt; c.size())) {\n        if ((a[PA] == b[PB]) &amp;&amp; (a[PA] == c[PC])) {\n            length++;\n            PA++;\n            PB++;\n            PC++;\n        }\n        else {\n            //return length;\n            int Bprim = get_relative_pos(a[PA], SB,b, PB, SB.size() - 1);//get_position(a[PA], SB, PB, SB.size() - 1);\n            int Cprim = get_relative_pos(a[PA], SC,c, PC, SC.size() - 1);//get_position(a[PA], SC, PC, SC.size() - 1);\n            if ((Bprim != (-1)) &amp;&amp; (Cprim != (-1))) {\n                PB = Bprim;\n                PC = Cprim;\n            }\n            else { PA++; }\n        }\n\n    }\n    return length;\n}\nint cleanData(vector&lt;int&gt; &amp;a, vector&lt;int&gt; &amp;b, vector&lt;int&gt; &amp;c, vector&lt;pair&lt;int, int&gt;&gt; SA, vector&lt;pair&lt;int, int&gt;&gt; SB, vector&lt;pair&lt;int, int&gt;&gt; SC) \n{\n    int indexA, indexB, indexC;\n    for (int i = 0; i &lt; a.size(); i++) {\n        indexB = get_position(a[i],SB,0,SB.size()-1);\n        indexC = get_position(a[i], SC, 0, SC.size() - 1);\n        if ((indexB == (-1)) || (indexC == (-1)))\n            a.erase(a.begin()+i);\n    }\n    for (int i = 0; i &lt; b.size(); i++) {\n        indexA = get_position(b[i], SA, 0, SA.size() - 1);\n        indexC = get_position(b[i], SC, 0, SC.size() - 1);\n        if ((indexA == (-1)) || (indexC == (-1)))\n            b.erase(b.begin() + i);\n    }\n    for (int i = 0; i &lt; c.size(); i++) {\n        indexB = get_position(c[i], SB, 0, SB.size() - 1);\n        indexC = get_position(c[i], SC, 0, SC.size() - 1);\n        if ((indexB == (-1)) || (indexC == (-1)))\n            c.erase(c.begin() + i);\n    }\n    return 0;\n}\nint lcs3(vector&lt;int&gt; &amp;a, vector&lt;int&gt; &amp;b, vector&lt;int&gt; &amp;c) {\n    vector&lt;pair&lt;int, int&gt;&gt; SA;\n    vector&lt;pair&lt;int, int&gt;&gt; SB;\n    vector&lt;pair&lt;int, int&gt;&gt; SC;\n    for (int i = 0; i &lt; a.size(); i++) SA.push_back(make_pair(a[i],i));\n    for (int i = 0; i &lt; b.size(); i++) SB.push_back(make_pair(b[i], i));\n    for (int i = 0; i &lt; c.size(); i++) SC.push_back(make_pair(c[i], i));\n    sort(SA.begin(),SA.end());\n    sort(SB.begin(), SB.end());\n    sort(SC.begin(), SC.end());\n    /*cleanData(a,b,c,SA,SB,SC);\n    SC.clear();\n    SA.clear();\n    SB.clear();\n    for (int i = 0; i &lt; a.size(); i++) SA.push_back(make_pair(a[i], i));\n    for (int i = 0; i &lt; b.size(); i++) SB.push_back(make_pair(b[i], i));\n    for (int i = 0; i &lt; c.size(); i++) SC.push_back(make_pair(c[i], i));\n    sort(SA.begin(), SA.end());\n    sort(SB.begin(), SB.end());\n    sort(SC.begin(), SC.end());*/\n    //write your code here\n    int ptrA, ptrB, ptrC;\n    int currentMax = 0;\n    int lcs = 0;\n    ptrA = 0;\n    ptrB = 0;\n    ptrC = 0;\n    int val = 0;\n    for (int i = 0; i &lt; a.size(); i++) {\n        val = a[i];\n        ptrB = get_position(val,SB,0,SB.size()-1);\n        ptrC = get_position(val, SC, 0, SC.size() - 1);\n        if ((ptrB != (-1)) &amp;&amp; (ptrC!=(-1))) {\n            //currentMax = explore(a, b, c, i, ptrB, ptrC);\n            currentMax = explore2(a, b, c, i, ptrB, ptrC, SA, SB, SC);\n            lcs = max(lcs, currentMax);\n        }\n        if ((a.size() - i) &lt; lcs)return lcs;\n    }\n    return lcs;\n}\n\nint main() {\n    size_t an;\n    std::cin &gt;&gt; an;\n    vector&lt;int&gt; a(an);\n    for (size_t i = 0; i &lt; an; i++) {\n        std::cin &gt;&gt; a[i];\n    }\n    size_t bn;\n    std::cin &gt;&gt; bn;\n    vector&lt;int&gt; b(bn);\n    for (size_t i = 0; i &lt; bn; i++) {\n        std::cin &gt;&gt; b[i];\n    }\n    size_t cn;\n    std::cin &gt;&gt; cn;\n    vector&lt;int&gt; c(cn);\n    for (size_t i = 0; i &lt; cn; i++) {\n        std::cin &gt;&gt; c[i];\n    }\n    std::cout &lt;&lt; lcs3(a, b, c) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "sqlite"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1491423421, "post_id": 43240807, "comment_id": 73551844, "body": "How do you distribute the application?  If you use a updater to update the application then you can have the updater check for the presence of the column and update the DB as needed."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1491444692, "post_id": 43240807, "comment_id": 73559010, "body": "Thanks @NathanOliver. Unfortunately, I don&#39;t have an updater and the application (.exe) is distributed by a link sent by e-mail. However, I can check for the presence of the column directly on the application."}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1491432369, "post_id": 43242337, "comment_id": 73555780, "body": "Typically what you do is a &quot;version ladder&quot;, a function with all the single update steps to the each next version; so that wouldn&#39;t be a <code>switch</code>, but a series of <code>if</code>, with each step updating the version to the next one."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1491432450, "post_id": 43242337, "comment_id": 73555803, "body": "Right! I was just drawing my idea... I&#39;m updating the answer with this suggestion!"}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1491444603, "post_id": 43242337, "comment_id": 73558984, "body": "Thank you very much @cbuchart, it seems to be a great solution for my problem. I don&#39;t have a version number entry in the DB but I will search how to use this on <b>SQLite</b>."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 2, "creation_date": 1491463351, "post_id": 43242337, "comment_id": 73565947, "body": "Android uses <a href=\"http://www.sqlite.org/pragma.html#pragma_user_version\" rel=\"nofollow noreferrer\">PRAGMA user_version</a> for this, but you could just as well create a separate table."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 2, "creation_date": 1491463458, "post_id": 43242337, "comment_id": 73566003, "body": "@cbuchart This is a case where using a transaction is important; you&#39;d never want to have a partial update."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491464082, "post_id": 43242337, "comment_id": 73566418, "body": "@CL. that&#39;s true, the whole update must be done at once, atomically. I&#39;m not very fluent with SQL, maybe you can help with that part?"}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1491918207, "post_id": 43242337, "comment_id": 73758680, "body": "Good point @CL. I will certainly use a transaction to avoid inconsistency."}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 3, "last_activity_date": 1491432660, "last_edit_date": 1491432660, "creation_date": 1491429431, "answer_id": 43242337, "question_id": 43240807, "link": "https://stackoverflow.com/questions/43240807/how-to-properly-update-a-table-in-the-user-computer/43242337#43242337", "title": "How to properly update a table in the user computer?", "body": "<p>A more general solution may be to use a version number entry in the DB and centralise changes based on this. If you don't have it, you can create it with this update. At least I think it becomes clearer in the code and you have a single point for future modifications:</p>\n\n<pre><code>void update_database_to_current_version() {\n  const int version = current_db_version(); // returns 1 if version is not found\n\n  if (version &lt; 2) { // since version 2 table XYZ has new structure, match here\n      // 'ALTER TABLE' ...\n  }\n\n  // if (version &lt; N) // DB changes starting in version N\n  // ...\n\n  update_db_version_to_newest();\n}\n</code></pre>\n\n<p>On the other hand, as far as I now, you can run the <code>ALTER TABLE</code> several times without affecting the table, so that may be a quicker option if you prefer.</p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43242337, "answer_count": 1, "score": 1, "last_activity_date": 1491432660, "creation_date": 1491423285, "last_edit_date": 1491425043, "question_id": 43240807, "link": "https://stackoverflow.com/questions/43240807/how-to-properly-update-a-table-in-the-user-computer", "title": "How to properly update a table in the user computer?", "body": "<p>I have a conceptual doubt related to updating fields in a database.</p>\n\n<p>I have developed a <strong>Qt</strong> (<strong>C++</strong>) application that uses <strong>SQLite</strong> to store data. The <strong>SQLite</strong> file (.db) is stored in the user computer. The file is automatically created when the user opens the application for the first time.</p>\n\n<p>The problem is that I need to update one table in that database. I can do it using the <code>ALTER TABLE</code> command, but how can I properly update the table in the database that is allocated in the user computer?</p>\n\n<p>Do I need to create a function that checks if the table doesn't have the fields that I want and then runs the <code>ALTER TABLE</code> command or there is some other easy/correct way to to this?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1491425408, "post_id": 43240781, "comment_id": 73552901, "body": "Your code has tons of undefined variables (like <code>points</code> and <code>start</code> in <code>main</code>) and you removed important <code>#include</code> directives.  Like I said last time, you should be providing an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that someone can just copy and paste your code, compile it without having to mess around too much, and recreate your results."}, {"owner": {"reputation": 309, "user_id": 1224511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3c5348d61b3f9e765623d0004fa362f?s=128&d=identicon&r=PG", "display_name": "Q123", "link": "https://stackoverflow.com/users/1224511/q123"}, "reply_to_user": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1491428507, "post_id": 43240781, "comment_id": 73554387, "body": "@DavidGrayson Okay, I added more"}], "answers": [{"tags": [], "owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "is_accepted": true, "score": 1, "last_activity_date": 1491427324, "last_edit_date": 1491427324, "creation_date": 1491426808, "answer_id": 43241717, "question_id": 43240781, "link": "https://stackoverflow.com/questions/43240781/things-that-can-affect-time-taken-by-functions/43241717#43241717", "title": "Things that can affect time taken by functions", "body": "<p>Any local variables will be destroyed when they go out of scope (for variables that aren't declared inside loops or conditional blocks, that happens when your function returns); if any of those are complex types (e.g. <code>struct</code>/<code>class</code> instances not hidden behind pointers or references), their <a href=\"https://en.wikipedia.org/wiki/Destructor_%28computer_programming%29#In_C.2B.2B\" rel=\"nofollow noreferrer\">destructors</a> will be executed, which may take extra time.</p>\n\n<p>In this case, you have vectors of <code>Point</code> and <code>Equads</code> objects, each of which may need to have its destructor called. Your first algorithm is erasing elements from its <code>points</code> vector as it goes along (increasing the total run time within the function, but reducing the cleanup when it exits), while your second algorithm does not (making it run faster but take longer to cleanup).</p>\n"}], "owner": {"reputation": 309, "user_id": 1224511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3c5348d61b3f9e765623d0004fa362f?s=128&d=identicon&r=PG", "display_name": "Q123", "link": "https://stackoverflow.com/users/1224511/q123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 43241717, "answer_count": 1, "score": 0, "last_activity_date": 1491428478, "creation_date": 1491423185, "last_edit_date": 1491428478, "question_id": 43240781, "link": "https://stackoverflow.com/questions/43240781/things-that-can-affect-time-taken-by-functions", "title": "Things that can affect time taken by functions", "body": "<p>There is a set of points (say 100,000 points). What I try to do is </p>\n\n<ol>\n<li><p>Find four extreme points (minimum x and y, maximum x and y)</p></li>\n<li><p>Discard points inside of the first four extreme points</p></li>\n<li><p>Find the next four extreme points among remaining points. (until there is no points left. in the code it stops when second four extreme points are found)</p></li>\n</ol>\n\n<p>I implemented this in two ways. </p>\n\n<p>First way : erase the points from the points set</p>\n\n<p>Second way : only save the remaining points' index from the points set and use the index in order to find the next extreme points.</p>\n\n<p>My problem is I measured the time taken by each algorithm (firstAlgorithm and secondAlgorithm) as shown in the codes and it seems secondAlgorithm takes less time than the first one. The result looks like</p>\n\n<pre><code>algorithm1 time taken until second equad found  105181\nalgorithm2 time taken until second equad found  63047\n</code></pre>\n\n<p>However, in main() function I call these two functions and measure the time taken by each and the result is</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;fstream&gt;\n#include \"Point.h\"\n\nbool isInside(Equads&amp; eQuad, Point&amp; p)\n{\n    if(orientation(eQuad.extremePoints[0], eQuad.extremePoints[1], p) &lt; 0)\n    {\n      return false;\n    }\n    else if(orientation(eQuad.extremePoints[1], eQuad.extremePoints[2], p) &lt; 0)\n    {\n      return false;\n    }\n    else if(orientation(eQuad.extremePoints[2], eQuad.extremePoints[3], p) &lt; 0)\n    {\n      return false;\n    }\n    else if(orientation(eQuad.extremePoints[3], eQuad.extremePoints[0], p) &lt; 0)\n    {\n      return false;\n    }\n    else\n    {\n      return true;\n    }\n\n}\n\nvoid main()\n{\n    std::chrono::high_resolution_clock::time_point start;\n    std::chrono::high_resolution_clock::time_point end;\n    start = std::chrono::high_resolution_clock::now();\n    firstAlgorithm(points);\n    end = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"compute time of firstAlgorithm (microseconds)\" &lt;&lt; chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start).count() &lt;&lt; std::endl;\n\n    start = std::chrono::high_resolution_clock::now();\n    secondAlgorithm(points);\n    end = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"compute time of secondAlgorithm (microseconds)\" &lt;&lt; chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start).count() &lt;&lt; std::endl;\n}\n\n\n\ncompute time of firstAlgorithm (microseconds)  : 107282\ncompute time of secondAlgorithm (microseconds) : 142401\n</code></pre>\n\n<p>How come the secondAlgorithm becomes so slow when time is taken in the main() function?</p>\n\n<p>Below is the code for the first way. </p>\n\n<pre><code>vector&lt;Point&gt; firstAlgorithm(vector&lt;Point&gt;&amp; originalPoint)\n{\n    std::chrono::high_resolution_clock::time_point startTime;\n    std::chrono::high_resolution_clock::time_point endTime;\n    startTime = std::chrono::high_resolution_clock::now();\n\n    vector&lt;Point&gt; points = originalPoints;\n\n    PointSequence result;\n    Equads firstEquad; // Equads is array of points that store the four extreme points\n\n\n    findExtremePoints1(points, firstEquad);\n\n    Equads prev;\n    prev = firstEquad;\n    std::vector&lt;Equads&gt; eQuads;\n    Equads current;\n\n    int count = 0 ;\n\n    while(findExtremePoints2(points, prev, current) != false)\n    {\n        eQuads.push_back(current);\n        prev = current;\n\n        if(count == 0) break;\n    }\n    endTime = std::chrono::high_resolution_clock::now();\n\n    std::cout &lt;&lt; std::endl &lt;&lt; \"algorithm1 time taken until second equad found  \" &lt;&lt; std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(endTime - startTime).count() &lt;&lt; std::endl;\n\n    return result;\n}\n</code></pre>\n\n<p>and findExtremePoints1 and findExtremePoints2 look like below</p>\n\n<pre><code>void findExtremePoints1(vector&lt;Point&gt;&amp; points, Equads&amp; eQuad)\n{\n  Point minX(points[0]),minY(points[0]),maxX(points[0]),maxY(points[0]);\n\n  for(size_t i = 1; i &lt; points.size(); i++)\n  {\n    if(points[i].x &lt; minX.x)\n    {\n      minX = points[i];\n    }\n    if(points[i].x &gt; maxX.x)\n    {\n      maxX = points[i];\n    }\n    if(points[i].y &lt; minY.y)\n    {\n      minY = points[i];\n    }\n    if(points[i].y &gt; maxY.y)\n    {\n      maxY = points[i];\n    }\n  }\n  eQuad.extremePoints[0] = minX;\n  eQuad.extremePoints[1] = minY;\n  eQuad.extremePoints[2] = maxX;\n  eQuad.extremePoints[3] = maxY;\n\n  // erase the extreme points\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[0]), points.end());\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[1]), points.end());\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[2]), points.end());\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[3]), points.end());\n}\n\n// traverse the points and if any point is inside of previous equad(four extreme points) \n//then delete it from points set and if not inside find next four extreme points.\nbool findExtremePoints2(vector&lt;Point&gt; points, Equads&amp; prevEquad, Equads&amp; eQuad)\n{\n  Point minX,minY,maxX,maxY;\n  bool prevFound = false;\n  std::vector&lt;size_t&gt; deletedVal;\n\n  for(size_t i = 0; i &lt; points.size(); i++)\n  {\n    if(isInside(prevEquad, points[i]))\n    {\n      deletedVal.push_back(i);\n    }\n    else\n    {\n      if(prevFound)\n      {\n        if(points[i].x &lt; minX.x)\n        {\n          minX = points[i];\n        }\n        if(points[i].x &gt; maxX.x)\n        {\n          maxX = points[i];\n        }\n        if(points[i].y &lt; minY.y)\n        {\n          minY = points[i];\n        }\n        if(points[i].y &gt; maxY.y)\n        {\n          maxY = points[i];\n        }\n      }\n      else // not inside of the prev equad and the very first one. only meet this condition at very first time.\n      {\n        minX = points[i];\n        minY = points[i];\n        maxX = points[i];\n        maxY = points[i];\n        prevFound = true;\n      }\n    }\n  }\n  if (prevFound == false)\n  {\n    return false;\n  }\n  eQuad.extremePoints[0] = minX;\n  eQuad.extremePoints[1] = minY;\n  eQuad.extremePoints[2] = maxX;\n  eQuad.extremePoints[3] = maxY;\n\n\n  for(size_t i = deletedVal.size(); i-- &gt; 0;)\n  {\n    points[deletedVal.at(i)] = points.back();\n    points.pop_back();\n  }\n\n  // erase the extreme points\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[0]), points.end());\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[1]), points.end());\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[2]), points.end());\n  points.erase(remove(points.begin(),points.end(), eQuad.extremePoints[3]), points.end());\n\n  return prevFound;\n}\n</code></pre>\n\n<p>Below is for the code of second way.</p>\n\n<pre><code>vector&lt;Point&gt; secondAlgorithm(vector&lt;Point&gt;&amp; points)\n{\n\n  std::chrono::high_resolution_clock::time_point startTime;\n  std::chrono::high_resolution_clock::time_point endTime;\n\n  startTime = std::chrono::high_resolution_clock::now();\n\n  vector&lt;Point&gt; result;\n  std::vector&lt;Equads&gt; eQuads;\n  Equads firstEquad;\n\n  size_t sizeOfPoints = points.size();\n  std::forward_list&lt;size_t&gt; remainedPoints;\n\n  findExtremePointsAtFirst(points,firstEquad, sizeOfPoints);\n\n  discardInsidePointsAtFirst(points,firstEquad,remainedPoints,sizeOfPoints);\n\n  int count = 0 ;\n\n  while(sizeOfPoints &gt; 0)\n  {\n    Equads equads;\n    findExtremePoints3(points, equads, remainedPoints, sizeOfPoints);\n    eQuads.push_back(equads);\n    if(count == 0 ) break;\n  }\n\n  endTime = std::chrono::high_resolution_clock::now();\n\n  std::cout &lt;&lt; \"algorithm2 time taken until second equad found  \" &lt;&lt; std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(endTime - startTime).count() &lt;&lt; std::endl&lt;&lt; std::endl;\n  return result;\n}\n</code></pre>\n\n<p>and findExtremePointsAtFirst , discardInsidePointsAtFirst and findExtremePoints3 look like below.</p>\n\n<pre><code>void findExtremePointsAtFirst(vector&lt;Point&gt;&amp; points, Equads&amp; eQuad, size_t&amp; sizeOfPoints)\n{\n  Point minX(points[0]),minY(points[0]),maxX(points[0]),maxY(points[0]);\n\n  for(size_t i = 1; i &lt; sizeOfPoints; i++)\n  {\n    if(points[i].x &lt; minX.x)\n    {\n      minX = points[i];\n    }\n    if(points[i].x &gt; maxX.x)\n    {\n      maxX = points[i];\n    }\n    if(points[i].y &lt; minY.y)\n    {\n     minY = points[i];\n    }\n    if(points[i].y &gt; maxY.y)\n    {\n      maxY = points[i];\n    }\n  }\n  eQuad.extremePoints[0] = minX;\n  eQuad.extremePoints[1] = minY;\n  eQuad.extremePoints[2] = maxX;\n  eQuad.extremePoints[3] = maxY;\n} \n\nvoid discardInsidePointsAtFirst(vector&lt;Point&gt;&amp; points, Equads&amp; prevEquad, std::forward_list&lt;size_t&gt;&amp; remainedPoints, size_t&amp; sizeOfPoints)\n{\n  size_t remainedPointsSize = 0;\n  for(size_t i = 0; i &lt; points.size(); i++)\n  {\n    if(!isInside(prevEquad, points[i]))\n    {\n      remainedPoints.push_front(i+1);\n      remainedPointsSize++;\n    }\n  }\n  sizeOfPoints = remainedPointsSize;\n} \n\nvoid findExtremePoints3(vector&lt;Point&gt;&amp; points, Equads&amp; eQuad, std::forward_list&lt;size_t&gt;&amp; remainedPoints, size_t&amp; sizeOfPoints)\n{\n\n  Point minX(points[remainedPoints.front()-1]);\n  Point minY = minX, maxX = minX , maxY = minX;\n\n  for(size_t i : remainedPoints)\n  {\n    i--;\n    if(points[i].x &lt; minX.x)\n    {\n      minX = points[i];\n    }\n    if(points[i].x &gt; maxX.x)\n    {\n      maxX = points[i];\n    }\n    if(points[i].y &lt; minY.y)\n    {\n      minY = points[i];\n    }\n    if(points[i].y &gt; maxY.y)\n    {\n      maxY = points[i];\n    }\n  }\n\n  eQuad.extremePoints[0] = minX;\n  eQuad.extremePoints[1] = minY;\n  eQuad.extremePoints[2] = maxX;\n  eQuad.extremePoints[3] = maxY;\n}\n</code></pre>\n\n<p>FYI</p>\n\n<pre><code>// Point.h file\n    using CoordinateType = double;\n\n\n\nstruct Point\n{\n  CoordinateType x;\n  CoordinateType y;\n\n  // to find the leftmost point\n  bool operator &lt; (const Point&amp; operand);\n  bool operator ==(const Point&amp; operand) const;\n  Point&amp; operator=(const Point&amp; p);\n\n  friend std::ostream&amp; operator &lt;&lt;(std::ostream&amp; os, const Point&amp; p);\n\n  bool isLower(const Point&amp; p);\n  bool isHigher(const Point&amp; p);\n\n  Point(CoordinateType x = -9999.0, CoordinateType y = -9999.0):x(x),y(y) {}\n  Point(const Point&amp; p) : x(p.x), y(p.y) {}\n};\n\nusing PointSequence = std::vector&lt;Point&gt;;\n\nint orientation(const Point&amp; p, const Point&amp; q, const Point&amp; r);\n\nstruct Equads\n{\n  Point extremePoints[4]; // Xmin, Ymin, Xmax, Ymax order\n  Equads&amp; operator=(const Equads&amp; e);\n};\n\nEquads&amp; Equads::operator=(const Equads&amp; e)\n{\n  std::copy(std::begin(e.extremePoints), std::end(e.extremePoints), std::begin(extremePoints));\n  std::copy(std::begin(e.subRegions), std::end(e.subRegions), std::begin(subRegions));\n\n  return *this;\n}\n\n// Point.cpp\n#include \"Point.h\"\n\nbool Point::operator &lt;(const Point&amp; operand)\n{\n  if(this-&gt;x &lt; operand.x)\n    return true;\n  else if(this-&gt;x == operand.x &amp;&amp; this-&gt;y &lt; operand.y)\n    return true;\n  else\n    return false;\n}\n\nbool Point::operator ==(const Point&amp; operand) const\n{\n  if((this-&gt;x == operand.x) &amp;&amp; (this-&gt;y == operand.y))\n    return true;\n  else\n    return false;\n}\n\nPoint&amp; Point::operator=(const Point&amp; p)\n{\n  x = p.x;\n  y = p.y;\n\n  return *this;\n}\nstd::ostream&amp; operator&lt;&lt; (std::ostream&amp; os, const Point&amp; p)\n{\n  os &lt;&lt; p.x &lt;&lt; \" , \" &lt;&lt; p.y &lt;&lt; std::endl;\n  return os;\n}\n\nbool Point::isLower(const Point&amp; p)\n{\n  if(this-&gt;y &lt; p.y)\n  {\n    return true;\n  }\n  else if(this-&gt;y == p.y &amp;&amp; this-&gt;x &lt; p.x)\n  {\n    return true;\n  }\n  return false;\n}\n\nbool Point::isHigher(const Point&amp; p)\n{\n  if(this-&gt;y &gt; p.y)\n  {\n    return true;\n  }\n  else if(this-&gt;y == p.y &amp;&amp; this-&gt;x &gt; p.x)\n  {\n    return true;\n  }\n  return false;\n}\n\n// to see if it turns clockwise or counterclockwise\nint orientation(const Point&amp; p, const Point&amp; q, const Point&amp; r)\n{\n  double val = (q.x - p.x) * (r.y - p.y) - (q.y - p.y) * (r.x - p.x);\n\n  if (val == 0)\n    return 0; // colinear\n  return (val &lt; 0) ? -1 : 1; // right or left\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1491422749, "post_id": 43240609, "comment_id": 73551422, "body": "This is why you do not use <code>using namespace std;</code>. <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1491423088, "post_id": 43240609, "comment_id": 73551628, "body": "To be blatantly obvious, the library function <code>std::swap</code> is conflicting with your <code>swap</code> because you included all the symbols from <code>std</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7822598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba6f39784618dbe60813e1764370be6?s=128&d=identicon&r=PG&f=1", "display_name": "user135536", "link": "https://stackoverflow.com/users/7822598/user135536"}, "edited": false, "score": 0, "creation_date": 1491422805, "post_id": 43240667, "comment_id": 73551455, "body": "So my code is fine? Like I said, that part is included by the instructor and is not to be altered. The question is basically how would you turn overloaded functions given into a template function, and I&#39;ve done that correctly, yes?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 23, "user_id": 7822598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba6f39784618dbe60813e1764370be6?s=128&d=identicon&r=PG&f=1", "display_name": "user135536", "link": "https://stackoverflow.com/users/7822598/user135536"}, "edited": false, "score": 2, "creation_date": 1491422958, "post_id": 43240667, "comment_id": 73551550, "body": "@user135536 show your instructor this answer. <code>using namespace std;</code> is a <i>really bad idea</i> in real code."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1491422754, "creation_date": 1491422754, "answer_id": 43240667, "question_id": 43240609, "link": "https://stackoverflow.com/questions/43240609/is-this-c-template-declaration-genuinely-incorrect-or-is-my-compiler-mucking-u/43240667#43240667", "title": "Is this C++ template declaration genuinely incorrect or is my compiler mucking up?", "body": "<p>It's you.</p>\n\n<pre><code>//using namespace std;\nusing std::string;\nusing std::cout;\nusing std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 6738494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HDxVP.jpg?s=128&g=1", "display_name": "RazaUsman_k", "link": "https://stackoverflow.com/users/6738494/razausman-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1491423988, "last_edit_date": 1491423988, "creation_date": 1491423103, "answer_id": 43240754, "question_id": 43240609, "link": "https://stackoverflow.com/questions/43240609/is-this-c-template-declaration-genuinely-incorrect-or-is-my-compiler-mucking-u/43240754#43240754", "title": "Is this C++ template declaration genuinely incorrect or is my compiler mucking up?", "body": "<p>This is the cause of the error </p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>It's a really really really bad practice to declare <strong>\"using namespace std\"</strong>\nUsing the namespace will pull things in that you don't want</p>\n\n<p>There are two alternate solutions </p>\n\n<p><strong>ONE</strong> </p>\n\n<pre><code>using std::cout; \ncout &lt;&lt; \"Values:\";\n</code></pre>\n\n<p><strong>TWO</strong> (i'll suggest this one)</p>\n\n<pre><code>std::cout &lt;&lt; \"Values:\";\n</code></pre>\n\n<p>Note : you could change the name of your swap function but it's always better to adapt a better way so you encounter fewer problems in future </p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 6, "last_activity_date": 1491423693, "last_edit_date": 1491423693, "creation_date": 1491423338, "answer_id": 43240827, "question_id": 43240609, "link": "https://stackoverflow.com/questions/43240609/is-this-c-template-declaration-genuinely-incorrect-or-is-my-compiler-mucking-u/43240827#43240827", "title": "Is this C++ template declaration genuinely incorrect or is my compiler mucking up?", "body": "<p>The standard library comes with a template <code>std::swap</code> (see <a href=\"http://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"noreferrer\">cpp reference</a>), and you are defining your own <code>swap</code>-template function. So far no problem, but once you declare <code>using namespace std</code>, any use of <code>swap</code> is ambiguous, since the compiler cannot decide whether to take <code>std::swap</code> or your own <code>swap</code>.</p>\n\n<p>So, as mentioned already by others, avoid <code>using namespace std</code> statement.</p>\n\n<p>Additionally, you could think of declaring \"your\" <code>swap</code> in an own namespace, like:</p>\n\n<pre><code>namespace class1_exercise {\n\n    template &lt;class data_type&gt;\n    void swap(data_type &amp;a, data_type &amp;b) //swaps variables\n    {\n        data_type c;\n        c = a;\n        a = b;\n        b = c;\n    }\n}\n</code></pre>\n\n<p>Thereby, you can make the distinction between \"your\" swap and the std::swap even more explicit:</p>\n\n<pre><code>std::swap(x,y);\n// versus:\nclass1_exercise::swap(x,y);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7822598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba6f39784618dbe60813e1764370be6?s=128&d=identicon&r=PG&f=1", "display_name": "user135536", "link": "https://stackoverflow.com/users/7822598/user135536"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 43240827, "answer_count": 3, "score": 2, "last_activity_date": 1491436176, "creation_date": 1491422589, "last_edit_date": 1491436176, "question_id": 43240609, "link": "https://stackoverflow.com/questions/43240609/is-this-c-template-declaration-genuinely-incorrect-or-is-my-compiler-mucking-u", "title": "Is this C++ template declaration genuinely incorrect or is my compiler mucking up?", "body": "<p><strong><em>Edit: Thank you for your answers! Like I said, this is code provided for a class, so the namespace and name of the function were included. I'm glad to understand what exactly namespace std entails though, and I've included your inputs as comments within my answer (though my answer remains unchanged).</em></strong></p>\n\n<p>The code below includes the piece I created. This is for a class, so this is the <em>only</em> part that I need judged. My compiler isn't running it <strong>(ambiguous calls to overloaded function)</strong> but I feel like this is correct.</p>\n\n<pre><code>template &lt;class data_type&gt;\nvoid swap(data_type &amp;a, data_type &amp;b) //swaps 2 variables\n{\n   data_type c; //temp variable\n   c = a;\n   a = b;\n   b = c;\n}\n</code></pre>\n\n<p>Here is the full code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\ntemplate &lt;class data_type&gt;\nvoid swap(data_type &amp;a, data_type &amp;b) //swaps variables\n{\n   data_type c;\n   c = a;\n   a = b;\n   b = c;\n}\n\nint main( )\n{\n    string x = \"first\", y = \"second\";\n    int m = 10, n = 20;\n    char q = 'Q', r = 'R';\n\n    cout&lt;&lt;\"x before swap called = \"&lt;&lt;x&lt;&lt;\" and y before swap called = \"\n&lt;&lt;y&lt;&lt;endl;\n    swap(x,y);\n    cout&lt;&lt;\"x after swap called = \"&lt;&lt;x&lt;&lt;\" and y after swap called = \"\n&lt;&lt;y&lt;&lt;endl&lt;&lt;endl;\n\n    cout&lt;&lt;\"m before swap called = \"&lt;&lt;m&lt;&lt;\" and n before swap called = \"\n&lt;&lt;n&lt;&lt;endl;\n    swap(m,n);\n    cout&lt;&lt;\"m after swap called = \"&lt;&lt;m&lt;&lt;\" and n after swap called = \"\n&lt;&lt;n&lt;&lt;endl&lt;&lt;endl;\n\n    cout&lt;&lt;\"q before swap called = \"&lt;&lt;q&lt;&lt;\" and r before swap called = \"  \n&lt;&lt;r&lt;&lt;endl;\n    swap(q,r);\n    cout&lt;&lt;\"q after swap called = \"&lt;&lt;q&lt;&lt;\" and r after swap called = \"   \n&lt;&lt;r&lt;&lt;endl&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "stdvector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1491422436, "post_id": 43240527, "comment_id": 73551228, "body": "This is not supported by <code>std::vector</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491422489, "post_id": 43240527, "comment_id": 73551257, "body": "In c++, the preferred way of access a pointer&#39;s member is the <code>-&gt;</code> operator. <code>vec-&gt;push_back(1.0);</code>."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1491422513, "post_id": 43240527, "comment_id": 73551274, "body": "Heap allocated STL containers are a good way of shooting yourself in the foot. They are not suited for polymorphism and they goes well with value semantics. Doing <code>new std::vector</code> is kind of a way to have all inconveniences of the STL, whilst having no advantages."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1491422531, "post_id": 43240527, "comment_id": 73551284, "body": "Why are you creating the vector with <code>new</code>? There is almost never any good reason for doing that."}, {"owner": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "edited": false, "score": 0, "creation_date": 1491422771, "post_id": 43240527, "comment_id": 73551439, "body": "I&#39;m using <code>new</code> so that the data remains accessible in Fortran after going out of scope in C++"}, {"owner": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "edited": false, "score": 0, "creation_date": 1491423042, "post_id": 43240527, "comment_id": 73551601, "body": "Right now there&#39;s a memory leak. That&#39;s what I&#39;m trying to fix"}, {"owner": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "edited": false, "score": 0, "creation_date": 1491423240, "post_id": 43240527, "comment_id": 73551726, "body": "Fortran will take ownership of <code>arr</code>, but not the rest of <code>vec</code>"}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 1, "creation_date": 1491424450, "post_id": 43240527, "comment_id": 73552357, "body": "As for default vector manage memory by itself you need to write your own allocator. Far easier is to just copy content of vector to an array."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "edited": false, "score": 0, "creation_date": 1491423136, "post_id": 43240654, "comment_id": 73551664, "body": "I&#39;m using new so that the data remains accessible in Fortran after going out of scope in C++"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "edited": false, "score": 1, "creation_date": 1491423196, "post_id": 43240654, "comment_id": 73551704, "body": "new on the vector has no bearing on the data being available in Fortran. The vector allocates memory internally for its contents itself, as do all the STL containers."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1491425561, "post_id": 43240654, "comment_id": 73552976, "body": "@ChristopherPisz vector only by default manage memory by itself, but there is possibility to provide external memory management through non default allocator."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1491426125, "post_id": 43240654, "comment_id": 73553304, "body": "@Logman, sure, one can provide a custom allocator, but that is still a completely separate thing from newing the vector itself. Either way, the vector manages its internals either by allocating and releasing them itself of calling your allocator."}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 0, "last_activity_date": 1491422730, "creation_date": 1491422730, "answer_id": 43240654, "question_id": 43240527, "link": "https://stackoverflow.com/questions/43240527/delete-a-vector-without-deleting-the-array/43240654#43240654", "title": "Delete a vector without deleting the array", "body": "<p>What you are asking for is not possible. std::vector, being a well behaved template class will release the internals that it owns and manages when it is destroyed.</p>\n\n<p>You will have to keep vector alive while you are using its contents, which makes perfect sense. Otherwise, you will have to make a copy.</p>\n\n<p>Also, I don't see why you are allocating the vector on the heap, it doesn't seem needed at all.</p>\n"}, {"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1491422936, "post_id": 43240675, "comment_id": 73551534, "body": "It would be important to note though, that we are just moving the problem of lifetime management from the vector to the copy of the vector. Why not keep the vector from being destroyed while you are using its data in the first place?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1491423016, "post_id": 43240675, "comment_id": 73551581, "body": "@ChristopherPisz, That would be OK if <code>vec</code> is created in the same stack frame or scope where the call to FORTRAN is made."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1491423100, "post_id": 43240675, "comment_id": 73551638, "body": "@R Sahu, right, well more code is needed in his OP for it to make much sense. Just want to make sure the OP understand the concept of &quot;don&#39;t destroy things while you are using them&quot;"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1491424043, "last_edit_date": 1491424043, "creation_date": 1491422795, "answer_id": 43240675, "question_id": 43240527, "link": "https://stackoverflow.com/questions/43240527/delete-a-vector-without-deleting-the-array/43240675#43240675", "title": "Delete a vector without deleting the array", "body": "<blockquote>\n  <p>How do I delete vec while keeping arr intact? Is there a way to nullify the pointer to arr in vec so that I can then delete vec?</p>\n</blockquote>\n\n<p>The library does not provide any built-in capability to do that. You have to do the bookkeeping work yourself.</p>\n\n<ol>\n<li>Allocate memory for the data and copy data from the vector.</li>\n<li>Send the data to FORTRAN.</li>\n<li>Decide when it is safe to deallocate the data and then delete them.</li>\n</ol>\n\n<hr>\n\n<pre><code>// Fill up data in vec\nstd::vector&lt;double&gt; vec;\nvec.push_back(1.0);\nvec.push_back(2.0);\n\n// Allocate memory for arr and copy the data from vec\ndouble* arr = new double[vec.size()];\nstd::copy(vec.begin(), vec.end(), arr);\n\n// use arr\n\n// delete arr\ndelete [] arr;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "edited": false, "score": 0, "creation_date": 1491424226, "post_id": 43240773, "comment_id": 73552257, "body": "Thanks! This looks like exactly what I need"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1491432564, "post_id": 43240773, "comment_id": 73555841, "body": "To the downvoter: what is wrong with this answer? It&#39;s much similar to RSahu answer but with unique ptr instead of raw array."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": -1, "last_activity_date": 1491423154, "creation_date": 1491423154, "answer_id": 43240773, "question_id": 43240527, "link": "https://stackoverflow.com/questions/43240527/delete-a-vector-without-deleting-the-array/43240773#43240773", "title": "Delete a vector without deleting the array", "body": "<blockquote>\n  <p>How do I delete\u00a0vec\u00a0while keeping\u00a0arr\u00a0intact? Is there a way to nullify the pointer to\u00a0arr\u00a0in\u00a0vec\u00a0so that I can then delete\u00a0vec?</p>\n</blockquote>\n\n<p>You don't.</p>\n\n<hr>\n\n<p>I think you misuse or misunderstood what vector is for. It is not meant to expose memory management of the underlying array, but to represent a dynamically sized array as a regular type.</p>\n\n<p>If you need to explicitly manage memory, I'd suggest you to use <code>std::unique_ptr&lt;T[]&gt;</code>. Since unique pointers offers a way to manage memory and to release it's resource without deleting it, I think it's a good candidate to meet your needs.</p>\n\n<pre><code>auto arr = std::make_unique&lt;double[]&gt;(2);\narr[0] = 1.;\narr[1] = 2.;\nauto data = arr.release();\n\n// You have to manage `data` memory manually,\n// since the unique pointer released it's resource.\n\n// arr is null here\n// data is a pointer to an array, must be deleted manually later.\n\ndelete[] data;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 3, "last_activity_date": 1491423808, "creation_date": 1491423808, "answer_id": 43240955, "question_id": 43240527, "link": "https://stackoverflow.com/questions/43240527/delete-a-vector-without-deleting-the-array/43240955#43240955", "title": "Delete a vector without deleting the array", "body": "<p>You need to rethink your program design.</p>\n\n<p>Somehow, somewhere, you need to keep an array alive while Fortran is using it. So whatever context you're using to access Fortran should probably be responsible for ownership of this array.</p>\n\n<pre><code>class fortran_context {\n    /*Blah blah blah whatever API you're using to access Fortran*/\n    void * arr;\n    std::vector&lt;double&gt; vec; //Don't allocate this as a pointer; makes no sense!\npublic:\n    fortran_context() {\n        arr = //Do whatever is necessary to setup Fortran stuff. I'm assuming your\n        //api has some kind of \"get_array_pointer\" function that you'll use.\n    }\n\n    ~fortran_context() {\n        //Do the cleanup for the fortran stuff\n    }\n\n    //If you want to spend time figuring out a robust copy constructor, you may.\n    //Personally, I suspect it's better to just delete it, and make this object non-copyable.\n    fortran_context(fortran_context const&amp;) = delete;\n\n    std::vector&lt;double&gt; &amp; get_vector() {\n        return vec;\n    }\n\n    std::vector&lt;double&gt; const&amp; get_vector() const {\n        return vec;\n    }\n\n    void assign_vector_to_array() {\n        *arr = vec.data();\n    }\n\n    void do_stuff_with_fortran() {\n        assign_vector_to_array();\n        //???\n    }\n};\n\nint main() {\n    fortran_context context;\n    auto &amp; vec = context.get_vector();\n    vec.push_back(1.0);\n    vec.push_back(2.0);\n    context.do_stuff_with_fortran();\n    return 0;\n} //Cleanup happens automatically due to correct implementation of ~fortran_context()\n</code></pre>\n\n<p>I've abstracted a lot of this because I don't know what API you're using to access Fortran, and I don't know what kind of work you're doing with this array. But this is, by far, the safest way to ensure that</p>\n\n<ul>\n<li>The vector's allocated memory exists so long as you are doing stuff in Fortran</li>\n<li>The memory associated with the vector will be cleaned up properly when you're done.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7822677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6779cd03b133e85f90287f292397407f?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7822677/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1491429111, "creation_date": 1491422312, "last_edit_date": 1491429111, "question_id": 43240527, "link": "https://stackoverflow.com/questions/43240527/delete-a-vector-without-deleting-the-array", "title": "Delete a vector without deleting the array", "body": "<p>I'm trying to populate a vector of doubles in C++ and pass the associated array to Fortran. But I'm having trouble freeing the rest of the memory associated with the vector. I'd like to avoid copying. Here's what I have:</p>\n\n<pre><code>std::vector&lt;double&gt; *vec = new std::vector&lt;double&gt;();\n(*vec).push_back(1.0);\n(*vec).push_back(2.0);\n*arr = (*vec).data();            //arr goes to Fortran\n</code></pre>\n\n<p>How do I delete <code>vec</code> while keeping <code>arr</code> intact? Is there a way to nullify the pointer to <code>arr</code> in <code>vec</code> so that I can then delete <code>vec</code>?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I see that I didn't give enough information here. A couple things:</p>\n\n<ol>\n<li>I'm actually calling a C++ function in Fortran using iso_c_binding</li>\n<li>I don't know how large the <code>vec</code> needs to be. The vector class looks good for this situation</li>\n</ol>\n\n<p>I might try Guillaume's suggestion eventually, but for now, I'm passing <code>vec</code> to the Fortran and calling another C++ function to delete it once I'm done with the data</p>\n"}, {"tags": ["c++", "linux", "makefile", "shared-libraries", "gnu-make"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1491425221, "post_id": 43240505, "comment_id": 73552791, "body": "You must <i>compile</i> with <code>-fPIC</code>. <i>Linking</i> with <code>-fPIC</code> is meaningless."}], "answers": [{"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": true, "score": 2, "last_activity_date": 1491476413, "last_edit_date": 1495542744, "creation_date": 1491425143, "answer_id": 43241309, "question_id": 43240505, "link": "https://stackoverflow.com/questions/43240505/linux-c-link-shared-objects-and-main/43241309#43241309", "title": "linux C++. Link shared objects and main", "body": "<p>Firstly, a bit off topic, but in your makefile, it would be better to specify build_all as a phony target</p>\n\n<pre><code>.PHONY: build_all\n</code></pre>\n\n<p>Next, you are compiling <code>dll.cpp</code> without relocatable code. You need to add <code>-fpic</code> or <code>-fPIC</code> (see <a href=\"https://stackoverflow.com/questions/3544035/what-is-the-difference-between-fpic-and-fpic-gcc-parameters\">here</a> for an explanation of the difference).</p>\n\n<pre><code>$(CXX) -c dll.cpp -fpic\n</code></pre>\n\n<p>Lastly, unix doesn't automatically add file suffixes, so here you need to specify <code>.so</code>:</p>\n\n<pre><code>$(CXX) -shared -o dll.so dll.o\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 6818663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GYR8V.jpg?s=128&g=1", "display_name": "AJIOB", "link": "https://stackoverflow.com/users/6818663/ajiob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 43241309, "answer_count": 1, "score": -1, "last_activity_date": 1491476413, "creation_date": 1491422228, "last_edit_date": 1491424755, "question_id": 43240505, "link": "https://stackoverflow.com/questions/43240505/linux-c-link-shared-objects-and-main", "title": "linux C++. Link shared objects and main", "body": "<p>I write simple testing program in C++, which will tell <code>Hello, Alex</code> and exit.\nHere it's code:\n<code>main.cpp</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;dlfcn.h&gt;\n\n\nint main()\n{\n    void* descriptor = dlopen(\"dll.so\", RTLD_LAZY);\n    std::string (*fun)(const std::string name) = (std::string (*)(const std::string)) dlsym(descriptor, \"sayHello\");\n\n    std::cout &lt;&lt; fun(\"Alex\") &lt;&lt; std::endl;\n\n    dlclose(descriptor);\n    return 0;\n}\n</code></pre>\n\n<p><code>dll.h</code>:</p>\n\n<pre><code>#ifndef UNTITLED_DLL_H\n#define UNTITLED_DLL_H\n\n#include &lt;string&gt;    \nstd::string sayHello(const std::string name);\n#endif\n</code></pre>\n\n<p><code>dll.cpp</code>:</p>\n\n<pre><code>#include \"dll.h\"\n\nstd::string sayHello(const std::string name)\n{\n    return (\"Hello, \" + name);\n}\n</code></pre>\n\n<p><code>makefile</code>:</p>\n\n<pre><code>build_all : main dll.so\n\nmain : main.cpp\n    $(CXX) -c main.cpp\n    $(CXX) -o main main.o -ldl\n\ndll.so : dll.h dll.cpp\n    $(CXX) -c dll.cpp\n    $(CXX) -shared -o dll dll.o\n</code></pre>\n\n<p>But when I build my code with make, I have such error:</p>\n\n<blockquote>\n  <p>/usr/bin/ld: dll.o: relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC<br>\n  dll.o: error adding symbols: Bad value<br>\n  collect2: error: ld returned 1 exit status<br>\n  makefile:8: recipe for target 'dll.so' failed<br>\n  make: *** [dll.so] Error 1  </p>\n</blockquote>\n\n<p>What did I make not correct?<br>\nP.S. I use <code>GNU Make 3.81</code> on <code>Ubuntu Server 14.04.3</code> with <code>GNU GCC 4.8.4</code></p>\n\n<p><strong>Update</strong><br>\nIf I link <code>dll.so</code> file with -fPIC param, I have the same error</p>\n"}, {"tags": ["c++", "sdl-2"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1491422646, "post_id": 43240473, "comment_id": 73551351, "body": "Using your debugger, it should be easy to spot the problem."}, {"owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1491424230, "post_id": 43240473, "comment_id": 73552259, "body": "it might be. Unfortunately, I have no experience with debuggers."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1491424989, "post_id": 43240473, "comment_id": 73552669, "body": "Then it is a good opportunity to learn.  Debugging is something every programmer needs to be able to do."}, {"owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1491425371, "post_id": 43240473, "comment_id": 73552875, "body": "can you recommend any resources?"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1491430905, "post_id": 43240473, "comment_id": 73555343, "body": "Why are you calling <code>SDL_SetRenderDrawColor()</code> on a NULL <code>SDL_Renderer</code> in <code>init()</code>?"}, {"owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "edited": false, "score": 0, "creation_date": 1491431095, "post_id": 43240473, "comment_id": 73555402, "body": "...good question. that should be fixed now. doesn&#39;t affect the crash though."}, {"owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "edited": false, "score": 0, "creation_date": 1491431770, "post_id": 43240473, "comment_id": 73555612, "body": "also, I tried to use the debugger. when I do, it crashes immediately, even with the problem code completely removed."}, {"owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1491433879, "post_id": 43240473, "comment_id": 73556243, "body": "@1201ProgramAlarm so what is the problem?"}, {"owner": {"reputation": 3751, "user_id": 5716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/02fafea76cce335a6a9988649590b8f8?s=128&d=identicon&r=PG", "display_name": "program247365", "link": "https://stackoverflow.com/users/5716/program247365"}, "edited": false, "score": 0, "creation_date": 1491437219, "post_id": 43240473, "comment_id": 73557115, "body": "Assuming you&#39;re on a *nix system. You can use the commandline debugger. See <a href=\"http://stackoverflow.com/a/370627/5716\">stackoverflow.com/a/370627/5716</a>"}, {"owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1491442255, "post_id": 43240473, "comment_id": 73558348, "body": "@1201ProgramAlarm I&#39;m obviously missing some sort of conceptual thing. What information would I be looking for with a debugger?"}], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": false, "score": 0, "last_activity_date": 1491495344, "creation_date": 1491495344, "answer_id": 43260565, "question_id": 43240473, "link": "https://stackoverflow.com/questions/43240473/sdl-getrendererinfo-crash/43260565#43260565", "title": "SDL_GetRendererInfo crash", "body": "<p>You're asking <code>SDL_GetRendererInfo</code> to write renderer info to location <code>global_renderer_info</code> points to, which is NULL. Writing to NULL causes segmentation fault. This should be expected behaviour.</p>\n\n<p>Correct code should allocate memory for renderer info (preferably on stack or in global area) and write to that location, e.g.:</p>\n\n<pre><code>SDL_RendererInfo info = {0};\nSDL_GetRendererInfo(global_renderer, &amp;info);\n// ... use info fields\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "is_accepted": false, "score": 0, "last_activity_date": 1491510684, "creation_date": 1491510684, "answer_id": 43265231, "question_id": 43240473, "link": "https://stackoverflow.com/questions/43240473/sdl-getrendererinfo-crash/43265231#43265231", "title": "SDL_GetRendererInfo crash", "body": "<p>Fixed by: instead of declaring global_renderer_info as a pointer to an SDL_RendererInfo, I instead declared the object directly and changed the rest of the code accordingly. </p>\n"}], "owner": {"reputation": 1, "user_id": 7822858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c531284679dfb0ebf696ea203ca518?s=128&d=identicon&r=PG&f=1", "display_name": "Lutrin", "link": "https://stackoverflow.com/users/7822858/lutrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491510684, "creation_date": 1491422133, "last_edit_date": 1491431125, "question_id": 43240473, "link": "https://stackoverflow.com/questions/43240473/sdl-getrendererinfo-crash", "title": "SDL_GetRendererInfo crash", "body": "<p>the following program runs until SDL_GetRendererInfo is called (in function RenderInit()), and then stops working before SDL_GetError can do anything. replacing global_renderer with a null SDL_Renderer pointer doesn't cause a crash and the expected sdl error is gotten.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include \"SDL.h\"\nusing namespace std;\n//global variables:\nbool run = true; // whether or not the program should be running\n\nint global_window_width = 50; //width of window in tiles\n\nint global_window_height = 35; //height of window in tiles\n\nSDL_Window* global_window = NULL; //points to primary window\n\nSDL_Renderer* global_renderer = NULL; //points to renderer for main window\n\nSDL_RendererInfo* global_renderer_info = NULL; //points to info about above renderer once it's initialized\n\nSDL_Texture* spritesheet = NULL; //holds the spritesheet\n\nSDL_Event event; //for holding currently in-handling event\n\n//function declarations:\nint init();  //initialize SDL\n\nint windowInit(); //initialize window\n\nint renderInit(); //create renderers\n\nint viewInit(); //manages all window, rendering, etc stuff\n\nint loadSpritesheet(); //loads spritesheet\n\nvoid cleanup(); //free up memory, etc\n\nvoid dispatchEvent(); //main event handling\n\n//function definitions:\nint init()\n{\n    if ( SDL_Init(SDL_INIT_EVERYTHING) !=0 )\n    {\n        cout &lt;&lt; \"could not initialize SDL. \" &lt;&lt; SDL_GetError();\n        return 1;\n    }\n\n    return 0;\n}\n\nint windowInit()\n{\n    global_window = SDL_CreateWindow(\"roguelike\",\n                                  SDL_WINDOWPOS_UNDEFINED,\n                                  SDL_WINDOWPOS_UNDEFINED,\n                                  global_window_width * 10,\n                                  global_window_height * 10,\n                                  SDL_WINDOW_SHOWN);\n    if(global_window == NULL)\n    {\n        cout &lt;&lt; \"could create window. \" &lt;&lt; SDL_GetError();\n        return 1;\n    }\n    return 0;\n}\n\nint renderInit()\n{\n        global_renderer = SDL_CreateRenderer(global_window,\n                                             -1,\n                                             SDL_RENDERER_TARGETTEXTURE | SDL_RENDERER_ACCELERATED );\n        if (global_renderer == NULL)\n        {\n            cout &lt;&lt; \"could not create renderer\" &lt;&lt; SDL_GetError();\n            return 1;\n        }\n        SDL_SetRenderDrawColor(global_renderer,0xFF,0xFF,0xFF,0xFF);\n        if (SDL_GetRendererInfo(global_renderer, global_renderer_info) != 0)\n        {\n            cout &lt;&lt; \"could not get renderer info\" &lt;&lt; SDL_GetError();\n            return 1;\n        }\n\n        return 0;\n}\n\nint viewInit()\n{\n    if (windowInit() == 1)\n    {\n        return 1;\n    }\n    else if(renderInit() == 1)\n    {\n        return 1;\n    }\n    else if(loadSpritesheet() == 1)\n    {\n        return 1;\n    }\n    return 0;\n}\n\nint loadSpritesheet()\n{\n    SDL_Surface* tempsurf = NULL; //using surface to get image initially, but since surfaces use cpu rendering we switch to textures immediately\n\n    tempsurf = SDL_LoadBMP(\"spritesheet.bmp\"); //puts image in the surface\n\n    if (tempsurf == NULL)\n    {\n        cout &lt;&lt; \"failed to load spritesheet\";\n        SDL_FreeSurface(tempsurf); //we don't need tempsurf anymore\n        return 1;\n    }\n    spritesheet = SDL_CreateTextureFromSurface(global_renderer, tempsurf);\n    if (spritesheet == NULL)\n    {\n        cout &lt;&lt; \"failed to create spritesheet texture\";\n        SDL_FreeSurface(tempsurf); //we don't need tempsurf anymore\n        return 1;\n    }\n    SDL_FreeSurface(tempsurf); //we don't need tempsurf anymore\n    return 0;\n}\n\nvoid cleanup()\n{\n    SDL_DestroyWindow(global_window);\n    global_window = NULL;\n    SDL_DestroyRenderer(global_renderer);\n    global_renderer = NULL;\n    SDL_DestroyTexture(spritesheet);\n    spritesheet = NULL;\n    global_renderer_info = NULL;\n    SDL_Quit();\n}\n\nvoid dispatchEvent()\n{\n    SDL_PollEvent(&amp;event); //stores current event information\n    switch(event.type)\n    {\n        case SDL_QUIT:\n        {\n            run = false;\n            break;\n        }\n    }\n}\n//classes:\n\nclass Layer // each layer holds visuals for a certain subset of what is to be displayed; environment, HUD, menu, etc.\n{\n    Layer(){};\n};\n\nclass Camera  //renders environment, ui, etc in a series of layers\n{\n        int width, height; //in tiles\n        SDL_Texture* texture_draw; //texture the camera draws to and sends to be displayed\n        list&lt;Layer*&gt; layer_list; //list of layers to be rendered, back --&gt; front\n    public:\n        Camera(int x, int y, SDL_Renderer* renderer): width(x), height(y) //(width, height, renderer for camera to use)\n        {\n            texture_draw = SDL_CreateTexture(global_renderer,global_renderer_info-&gt;texture_formats[0] , SDL_TEXTUREACCESS_TARGET, 10*width, 10*height);\n        };\n};\n\n//main loop\nint main(int argc, char *argv[]) //main function, needed by SDL\n{\n    if(init() == 0)\n    {\n        if(viewInit() == 0)\n        {\n            while(run)\n            {\n                dispatchEvent();\n\n            }\n        }\n    }\n    cleanup();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "casting", "arduino"], "comments": [{"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1491422815, "post_id": 43240434, "comment_id": 73551462, "body": "Can you verify, that <code>check_refresh</code> is located in <code>res&#47;drawable</code> folder?"}], "answers": [{"comments": [{"owner": {"reputation": 62733, "user_id": 691688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de2b55e3d46ce8bac74421a91299cd5e?s=128&d=identicon&r=PG", "display_name": "Femi", "link": "https://stackoverflow.com/users/691688/femi"}, "reply_to_user": {"reputation": 311, "user_id": 6215210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28a5bcdbfb1879a53482d5e60b78ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Forntoh", "link": "https://stackoverflow.com/users/6215210/forntoh"}, "edited": false, "score": 0, "creation_date": 1491422724, "post_id": 43240574, "comment_id": 73551400, "body": "Sorry, don&#39;t mean version control like git: I mean versioned like inside a  <i>res/drawable-v21</i> folder."}], "tags": [], "owner": {"reputation": 62733, "user_id": 691688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de2b55e3d46ce8bac74421a91299cd5e?s=128&d=identicon&r=PG", "display_name": "Femi", "link": "https://stackoverflow.com/users/691688/femi"}, "is_accepted": false, "score": 0, "last_activity_date": 1491422504, "last_edit_date": 1491422504, "creation_date": 1491422447, "answer_id": 43240574, "question_id": 43240434, "link": "https://stackoverflow.com/questions/43240434/c-arduino-after-downcasting-child-fields-do-not-reference-the-original-addre/43240574#43240574", "title": "C++ Arduino: After downcasting, child fields do not reference the original addresses", "body": "<p>You're missing the file <code>res/drawable/check_refresh.xml</code>: that's the crash being reported. It might be in a version specific folder: what's the path from the project root? I expect you have some drawables in a v21 folder or something.</p>\n"}], "owner": {"reputation": 311, "user_id": 6215210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28a5bcdbfb1879a53482d5e60b78ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Forntoh", "link": "https://stackoverflow.com/users/6215210/forntoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1591106946, "creation_date": 1491421964, "last_edit_date": 1591106946, "question_id": 43240434, "link": "https://stackoverflow.com/questions/43240434/c-arduino-after-downcasting-child-fields-do-not-reference-the-original-addre", "title": "C++ Arduino: After downcasting, child fields do not reference the original addresses", "body": "<h1>Arduino: C++</h1>\n\n<p>I have the following classes: <code>ChildOne</code> and <code>ChildTwo</code> inherit from <code>Parent</code>, <code>ChildTwo</code> has fields specific to it.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const byte TYPE_1 = 0;\nconst byte TYPE_2 = 1;\nconst byte TYPE_3 = 2;\n\nclass Parent {\n   private:\n    byte type = TYPE_1;\n\n   public:\n    Parent(byte type) : type(type) {}\n};\n\nclass ChildOne : public Parent {\n   public:\n    ChildOne() : Parent(TYPE_2) {}\n};\n\nclass ChildTwo : public Parent {\n   public:\n    ChildTwo() : Parent(TYPE_3) {}\n\n    boolean isOn = false;\n    char* textOn = \"ON\";\n    char* textOff = \"OFF\";\n};\n</code></pre>\n\n<p>The problem I face is that when I create an array of type parent and add elements of <code>ChildOne</code> and <code>ChildTwo</code> and I get one element from the array and try to do a <code>static_cast</code>, it succeeds, but when I print the values of the fields specific to <code>ChildTwo</code>, the values are funny ASCII characters</p>\n\n<p><strong>e.g.</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Parent menu[] = {ChildOne(), ChildTwo(), ChildOne()};\n\nParent item = menu[1];\n\nif (item.type == TYPE_3) {\n\n    ChildTwo* child = static_cast&lt;ChildTwo*&gt;(&amp;item);\n    ...\n}\n</code></pre>\n\n<p>After type casting, when I print the values of the fields in <code>child</code> object:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    ...\n    Serial.print(child-&gt;isOn);\n    Serial.print(child-&gt;textOn);\n    ....\n</code></pre>\n\n<p>the values printed on the serial monitor are different from <strong>0</strong> and <strong>ON</strong> respectively <em>(instead, I see funny ASCII chars).</em> <em>they point to different addresses</em></p>\n\n<p>I want to know if there is anything I'm doing wrong.</p>\n\n<p>What do I do to obtain my objective?</p>\n\n<blockquote>\n  <p><strong>NB</strong>: I believe <code>dynamic_cast</code> will work but the compiler for <strong>Arduino Uno</strong> doesn't support it.</p>\n</blockquote>\n\n<p>\u200f\u200f\u200e \u200e\n\u200f\u200f\u200e \u200e\n\u200f\u200f\u200e \u200e\n\u200f\u200f\u200e \u200e\n\u200f\u200f\u200e \u200e\n<hr>\n<em>I am blocked from asking any more questions because of questions I posted about 4 yrs ago. The only option they gave me was to update my old questions (4 years old questions, that doesn't seem right), I no longer face those problems and the comments/answers will look irrelevant to people viewing now after the update.</em>\ud83d\ude25</p>\n"}, {"tags": ["c++", "qt", "opengl", "collision", "bounding-box"], "comments": [{"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 1, "creation_date": 1491422275, "post_id": 43240200, "comment_id": 73551143, "body": "If you&#39;re already able to create the bounding box, then what is the problem?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1491423401, "post_id": 43240200, "comment_id": 73551823, "body": "@Vallentin - if you have continued reading for another 2 lines, you&#39;d realize this is not the case. The OP creates a &quot;bounding&quot; box that isn&#39;t really bounding the geometry."}, {"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1491423560, "post_id": 43240200, "comment_id": 73551907, "body": "I did read it. Taking the min and max of x, y, z of all vertices would create a bounding box that fits. The only case which it wouldn&#39;t fit, is if the mesh later is rotated, which OP mentions nothing about being the case for it not fitting."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1491423742, "post_id": 43240200, "comment_id": 73552007, "body": "Rotation would not be a problem, as the bounding box only has to fit the original mesh, all transformations applied to the mesh are also applied to the bounding box."}, {"owner": {"reputation": 703, "user_id": 5778900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh1qL.png?s=128&g=1", "display_name": "pleluron", "link": "https://stackoverflow.com/users/5778900/pleluron"}, "edited": false, "score": 0, "creation_date": 1491427767, "post_id": 43240200, "comment_id": 73554104, "body": "AABB or OBB for bounding boxes?"}, {"owner": {"reputation": 11, "user_id": 6272118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5Eu6_Q6QRIE/AAAAAAAAAAI/AAAAAAAAAGs/sKxFfkbjUM4/photo.jpg?sz=128", "display_name": "maria", "link": "https://stackoverflow.com/users/6272118/maria"}, "edited": false, "score": 0, "creation_date": 1491441941, "post_id": 43240200, "comment_id": 73558266, "body": "The issues I am having is that I can&#39;t work out how to access the min and max vertices of the object, that is what I am asking about"}, {"owner": {"reputation": 11, "user_id": 6272118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5Eu6_Q6QRIE/AAAAAAAAAAI/AAAAAAAAAGs/sKxFfkbjUM4/photo.jpg?sz=128", "display_name": "maria", "link": "https://stackoverflow.com/users/6272118/maria"}, "edited": false, "score": 0, "creation_date": 1491441980, "post_id": 43240200, "comment_id": 73558274, "body": "Pleluron - AABB"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1491457483, "post_id": 43240200, "comment_id": 73562649, "body": "@Vallentin, that&#39;s only valid for a poligon, but suppose you have a circle, given it&#39;s center and radius, you&#39;ll have a bounding box that&#39;s calculated differently than your proposal.  Let&#39;s suppose you have a spline, given its control points.... the problem is not so easy and probably you&#39;ll need some polymorphic approach.  This is at least the approach followed in java2d approach, and I suggest reading that api to propose an alternative.  Either way, that&#39;s the reason of using the bounding box anyway: optimizing object interaction by means of some heuristic."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1491457604, "post_id": 43240200, "comment_id": 73562709, "body": "@dtech, nope.  Suppose you have a rectangle (or a square) and rotate it so one diagonal gets aligned to the Y axis, the bounding box will grow in heigth to allow for the larger dimension of the diagonal against the sides.  Your approach is not valid."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1491457722, "post_id": 43240200, "comment_id": 73562764, "body": "@maria, as you can guess from my comments, the bounding box is something that is dependent of the object geometry and normally each figure class has some means of calculating it from the actual geometry parameters you have.  Probably you&#39;ll have it precalculated or some method to allow you to get it.  Check that."}, {"owner": {"reputation": 703, "user_id": 5778900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh1qL.png?s=128&g=1", "display_name": "pleluron", "link": "https://stackoverflow.com/users/5778900/pleluron"}, "edited": false, "score": 0, "creation_date": 1491481665, "post_id": 43240200, "comment_id": 73578986, "body": "Accessing the min/max vertices of the object would require iterating over all vertices to obtain the min/max values of each dimension - For an AABB all dimensions would contribute to a single min value and a single max value."}], "answers": [{"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1491458995, "creation_date": 1491458995, "answer_id": 43247027, "question_id": 43240200, "link": "https://stackoverflow.com/questions/43240200/how-to-access-min-and-max-coordinates-of-a-3d-object-in-c/43247027#43247027", "title": "How to access min and max coordinates of a 3D object in C++?", "body": "<p>The problem you afford is that each object geometry has different means of internal storage and determination of a bounding box.</p>\n\n<p>Let's try some examples to illustrate this:</p>\n\n<ul>\n<li><p>Suppose we have a circle, whose drawing parameters stored internally are the center coordinates <code>x_center</code> and <code>y_center</code> and the radius <code>radius</code>.  If you try to determine the bounding box for this object, you'll see that it extends from <code>(x_center - radius, y_center - radius)</code> to <code>(x_center + radius, y_center + radius)</code>.</p></li>\n<li><p>In case you have an unrotated rectangle, given by the two points of it's principal diagonal, the bounding box just coincides with it's shape, so you have only to give the coordinates of the two same points that represent it.</p></li>\n<li><p>If, on the other way, we have a polygon, the bounding box will be determined by the minimum and maximum coordinates of all the polygon vertices.  If  you allow to rotate the polygon, you'll need to rotate all the vertices coordinates before determining their maximum and minimum values, to get the bounding box.</p></li>\n<li><p>If, for another example, we have a cubic spline, determined by the coordinates of its four control points you'll be determining the maximum and minimum values of two cubic polygons, which means solving two quadratic equations(after derivation), in the general case.</p></li>\n</ul>\n\n<p>To cope with all this stuff, a geometric shape normally includes some means of polymorphically  construct it's bounding box (it normally is even cached, so you don't have to calculate it, only after rotations or variations in it's position or scale) via some instance method.</p>\n\n<p>Of course, all of this depends on how and how has defined the way shapes are implemented.  perhaps your case is simpler than I'm exposing here, but you don't say.  You also don't show any code or input/output data, as stated in the <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> page. So you had better to edit your question and add your sample code, that will show more information about your exact problem.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7906463"}, "is_accepted": false, "score": -1, "last_activity_date": 1493076510, "creation_date": 1493076510, "answer_id": 43599216, "question_id": 43240200, "link": "https://stackoverflow.com/questions/43240200/how-to-access-min-and-max-coordinates-of-a-3d-object-in-c/43599216#43599216", "title": "How to access min and max coordinates of a 3D object in C++?", "body": "<p>if you have obj loader so you have an array. </p>\n\n<pre><code>float t[2100];\nint x = 2100;\nfloat xmax=-123243;\nwhile(x&gt;=0)\n{\n   if(xmax&lt;t[x]) xmax=t[x];\n   x-=3;\n}\n</code></pre>\n\n<p>So here is a maximum x of the object(?).</p>\n"}], "owner": {"reputation": 11, "user_id": 6272118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5Eu6_Q6QRIE/AAAAAAAAAAI/AAAAAAAAAGs/sKxFfkbjUM4/photo.jpg?sz=128", "display_name": "maria", "link": "https://stackoverflow.com/users/6272118/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1493076510, "creation_date": 1491421192, "last_edit_date": 1491427766, "question_id": 43240200, "link": "https://stackoverflow.com/questions/43240200/how-to-access-min-and-max-coordinates-of-a-3d-object-in-c", "title": "How to access min and max coordinates of a 3D object in C++?", "body": "<p>I am creating a game in qt Creator using c++ and OpenGL and an attempting to add bounding boxes to my scene in order to implement collision detection. I am using objects imported from Maya as .obj in my scene so their dimensions are not set in the code, only their position, rotation and scale. I am able to create a bounding box around each object which matches their position but am struggling to find a way to access the min and max x, y and z values of the objects in order to match the box to the size of the object. </p>\n\n<p>Does anyone have any ideas on how I could access the min and max coordinates? I know how to implement the code if I could access these values..</p>\n"}, {"tags": ["c++", "xcode"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1491420483, "post_id": 43239989, "comment_id": 73550093, "body": "<a href=\"http://stackoverflow.com/questions/36218138/xcode-debugger-not-showing-c-cout-output\">Duplicate?</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1491420542, "post_id": 43239989, "comment_id": 73550140, "body": "Does adding a newline help? <code>&lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1491420778, "post_id": 43239989, "comment_id": 73550277, "body": "Are you running it from a shell or from a GUI? If from a GUI then it probably runs, shows the output in a console window that then immediately closes when the program terminates. Try running it from a console/shell and you should see the output."}, {"owner": {"reputation": 602, "user_id": 6738494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HDxVP.jpg?s=128&g=1", "display_name": "RazaUsman_k", "link": "https://stackoverflow.com/users/6738494/razausman-k"}, "edited": false, "score": 0, "creation_date": 1491422390, "post_id": 43239989, "comment_id": 73551201, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/36218138/xcode-debugger-not-showing-c-cout-output\">Xcode debugger not showing C++ cout output</a>"}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 6152931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e82bdba0e0a25318a9c1e75640e9156?s=128&d=identicon&r=PG&f=1", "display_name": "Serid", "link": "https://stackoverflow.com/users/6152931/serid"}, "is_accepted": false, "score": 1, "last_activity_date": 1491422109, "creation_date": 1491422109, "answer_id": 43240466, "question_id": 43239989, "link": "https://stackoverflow.com/questions/43239989/no-output-in-c-xcode/43240466#43240466", "title": "No output in C++ xcode", "body": "<p>Your program exits right after typing \"Welcome to C++ programming\".</p>\n\n<pre><code>cout &lt;&lt; \"Welcome to C++ programming\";\n</code></pre>\n\n<p>So you should add</p>\n\n<pre><code>system(\"pause\")\n</code></pre>\n\n<p>before</p>\n\n<pre><code>return 0;\n</code></pre>\n\n<p>And your final code will look like this</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; \"Welcome to C++ programming\";\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 6890507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOWlv.jpg?s=128&g=1", "display_name": "bcm27", "link": "https://stackoverflow.com/users/6890507/bcm27"}, "is_accepted": false, "score": 0, "last_activity_date": 1491422850, "creation_date": 1491422850, "answer_id": 43240691, "question_id": 43239989, "link": "https://stackoverflow.com/questions/43239989/no-output-in-c-xcode/43240691#43240691", "title": "No output in C++ xcode", "body": "<p>First, your application is exiting with 'exit code 0' which is being applied because of your 'return 0' statement at the end of the application.</p>\n\n<p>I copied your code and ran it in Visual Studio 2017 on a windows machine and your code worked fine with one exception.</p>\n\n<p>It opens the console...runs the code...and closes it immediately because this is what your code <em>tells</em> it to do. </p>\n\n<p>There are multiple ways around this.</p>\n\n<ul>\n<li><p>One: add a (require user input) option to continue, this can be through the use of <code>system(\"pause\")</code> or a variety of <code>cin.get()</code>, etc. The use of 'system' is not encouraged as it leads to non portable code. This method is not encouraged as the issue you are experiencing would not occur when your application would be run from a real command line, ie closing upon completion of the code segments.</p></li>\n<li><p>Two: your application, and others like it hopefully have a 'leave command line open after execution' option or a similar setting. </p>\n\n<ul>\n<li><p>For xcode 4 follow these steps to accomplish this: open the 'Behaviors' tab in 'Preferences' and under 'Build Starts' (make sure that's checked\", enable the \"Show\" debugger with \"Console View\" section. <a href=\"https://i.stack.imgur.com/10Uwm.jpg\" rel=\"nofollow noreferrer\">example of preferences window</a></p></li>\n<li><p>for xcode 3: xcode preferences, under building select the 'Build Results Window', Open duing builds. set to Always</p></li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 72, "user_id": 7222988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde6c19011c94a1de3394efbceb8fc46?s=128&d=identicon&r=PG&f=1", "display_name": "Jish", "link": "https://stackoverflow.com/users/7222988/jish"}, "is_accepted": false, "score": 0, "last_activity_date": 1491448413, "last_edit_date": 1491448413, "creation_date": 1491447576, "answer_id": 43244909, "question_id": 43239989, "link": "https://stackoverflow.com/questions/43239989/no-output-in-c-xcode/43244909#43244909", "title": "No output in C++ xcode", "body": "<p>Add a new line after the output statement:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{   cout&lt;&lt; \"Welcome to C++ programming\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>If the console still doesn't appear, press shift-command-C to reactivate the console.</p>\n\n<p>EDIT:</p>\n\n<p>I should also note that your problem will be different in different IDEs. In Visual Studio, it will work, but the console will disappear, that's why the other answers here mentioned putting system(\"pause\") or other pausing functions at the end. In CLion, it works perfect as is. In Xcode, the output needs to end with a newline.</p>\n"}], "owner": {"reputation": 11, "user_id": 7822777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c696c2fb4bd54099b5f86f6cdb62fdc?s=128&d=identicon&r=PG&f=1", "display_name": "Arun Kejriwal", "link": "https://stackoverflow.com/users/7822777/arun-kejriwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1089, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1491448413, "creation_date": 1491420426, "question_id": 43239989, "link": "https://stackoverflow.com/questions/43239989/no-output-in-c-xcode", "title": "No output in C++ xcode", "body": "<p>I'm trying to code in C++ and this is what it is</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{   cout&lt;&lt; \"Welcome to C++ programming\";\n    return 0;\n}\n</code></pre>\n\n<p>there is no output showing up.\nIt just says \nProgram ended with exit code: 0\nTHis is the first time I'm coding in C++ and I'm using xcode.</p>\n"}, {"tags": ["c++", "floating-accuracy"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 6, "creation_date": 1491420198, "post_id": 43239885, "comment_id": 73549942, "body": "Here&#39;s some reading material: <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>"}, {"owner": {"reputation": 67, "user_id": 599622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/W4GZv.png?s=128&g=1", "display_name": "danutz_plusplus", "link": "https://stackoverflow.com/users/599622/danutz-plusplus"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1491420423, "post_id": 43239885, "comment_id": 73550067, "body": "@JohnnyMopp: Holy mackerel! I suspected it might be sophisticated stuff, but man. Thanks a bunch for the article. I kinda feel sorry I asked. Ignorance is bliss? Not really ... but maybe sometimes. :D"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1491421112, "post_id": 43239885, "comment_id": 73550471, "body": "Basically, you can&#39;t represent some (well, infinitely many) decimal values <i>exactly</i> using binary: these are finite fractions in decimal, but infinite ones in binary, so the computer has to cut them, which results in loss of precision, but you can&#39;t really do anything about this. Choose another base (like base-3, then fractions like 1/3 will be exactly representable), and you&#39;ll find it that there still are infinitely many values you can&#39;t represent exactly."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1491423513, "post_id": 43239885, "comment_id": 73551881, "body": "The layman&#39;s floating point guide <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}, {"owner": {"reputation": 67, "user_id": 599622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/W4GZv.png?s=128&g=1", "display_name": "danutz_plusplus", "link": "https://stackoverflow.com/users/599622/danutz-plusplus"}, "edited": false, "score": 0, "creation_date": 1491425201, "post_id": 43239885, "comment_id": 73552779, "body": "Much appreciated! Thanks"}, {"owner": {"reputation": 67, "user_id": 599622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/W4GZv.png?s=128&g=1", "display_name": "danutz_plusplus", "link": "https://stackoverflow.com/users/599622/danutz-plusplus"}, "edited": false, "score": 0, "creation_date": 1492060125, "post_id": 43239885, "comment_id": 73829556, "body": "Indeed, a duplicate is seems to be. I seem to have missed it when initially searching for a similar question to mine. Thanks for the reference. It&#39;s got a lot more information on the subject."}], "owner": {"reputation": 67, "user_id": 599622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/W4GZv.png?s=128&g=1", "display_name": "danutz_plusplus", "link": "https://stackoverflow.com/users/599622/danutz-plusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1492386958, "answer_count": 0, "score": 0, "last_activity_date": 1547033574, "creation_date": 1491420073, "last_edit_date": 1547033574, "question_id": 43239885, "link": "https://stackoverflow.com/questions/43239885/real-number-initialization-approximation", "closed_reason": "Duplicate", "title": "Real number initialization approximation", "body": "<p>I couldn't find any question about this, so I decided to post.\nBasically, I just noticed that whenever I initialize float or double variables, the actual values assigned are approximations of what I specified.</p>\n\n<p>Ex: </p>\n\n<p>float dx = 7.1; //upon debugging this is: 7.09999990</p>\n\n<p>float dy = 9.9; //upon debugging this is: 9.89999962</p>\n\n<p>I realize that they're approximations of what I asked, and that in a real calculation it's absolutely understood that the result would be a calculation, but I'm wondering and sort of expected the aproximation to be 7.10000000</p>\n\n<p>And also, if I use the constant 7.1 or 7.10000000 in something like if (7.10000000 == 7.1), it seems literal constant is approximated to 7.0999999999999996. (I guess this is a bit obvious now, it's first aproximated to a double and not a float; so this isn't a mystery anymore)</p>\n\n<p>So I guess my question is why is 7.1 approximated to 7.09999990, and not even 7.09999999 which is closer to 7.1 than 7.09999990. No? Am I missing something?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1491420886, "post_id": 43239853, "comment_id": 73550346, "body": "What line is emitting that error?"}, {"owner": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1491425513, "post_id": 43239853, "comment_id": 73552952, "body": "The following Line with the second boost_foreach, when i try to get the child of the child (child_tree.get_child(&quot;food&quot;))"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491468331, "post_id": 43247354, "comment_id": 73569207, "body": "Could I ask you something else ?"}, {"owner": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491468535, "post_id": 43247354, "comment_id": 73569363, "body": "I try to access to my link attributs values with the following line : std::string value = child_tree.second.get&lt;std::string&gt;(boost:propertu_tree::xml_&zwnj;&#8203;parser::xmlattr&lt;std:&zwnj;&#8203;:string()&gt;() + &quot;.name&quot;)      but I crash when I run my executable. I think I&#39;m not use correctly child_tree members functions, isn&#39;t it ?"}, {"owner": {"reputation": 462, "user_id": 7525292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c102a4e8064bab9ed147ea321255bc5?s=128&d=identicon&r=PG&f=1", "display_name": "JustRufus", "link": "https://stackoverflow.com/users/7525292/justrufus"}, "reply_to_user": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491470647, "post_id": 43247354, "comment_id": 73570912, "body": "@Miwa you can use <code>child_tree.second.get&lt;std::string&gt;(&quot;&lt;xmlattr&gt;.name&quot;)</code>.  But make sure that you are on <code>&lt;link name=&quot;*&quot; &#47;&gt;</code> subtree and not in food&#39;s name attribute.  <code>if ( child_tree.first != &quot;&lt;xmlattr&gt;&quot; ) {             std::cout &lt;&lt; &quot;I am in the child of child tree &quot; &lt;&lt; child_tree.second.get&lt;std::string&gt;(&quot;&lt;xmlattr&gt;.name&quot;) &lt;&lt; std::endl;         }</code>"}, {"owner": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491471494, "post_id": 43247354, "comment_id": 73571508, "body": "yes I am sure I am on &lt;link name=&quot;*&quot; /&gt;, I have the following code :    &#39;code&#39;BOOST_FOREACH(const boost::property_tree::ptree::value_type &amp;child_of_child_tree, child_tree.second) { std::string link_balise = child_of_child_tree.first ; std::string iei_name; if (link_balise != &quot;&lt;xmlattr&gt;&quot;) {   std::cout &lt;&lt; &quot;I am in the child of child tree &quot; &lt;&lt; std::endl;   std::string iei_name = child_of_the_child.second.get&lt;std::string&gt; (boost::property_tree::xml_parser::xmlattr&lt;std::string&gt;() + &quot;.name&quot;);  }&#39;code&#39; It is the same as yours, isn&#39;t it ?"}, {"owner": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491471966, "post_id": 43247354, "comment_id": 73571889, "body": "Oh, I just replace get&lt;std::string&gt;(boost::property_tree::xml_parser::xmlattr&lt;s&zwnj;&#8203;td::string&gt;() + &quot;.name&quot;); by get&lt;std::string&gt;(&quot;&lt;xmlattr&gt;.name&quot;) and it works.... why ?..."}, {"owner": {"reputation": 462, "user_id": 7525292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c102a4e8064bab9ed147ea321255bc5?s=128&d=identicon&r=PG&f=1", "display_name": "JustRufus", "link": "https://stackoverflow.com/users/7525292/justrufus"}, "reply_to_user": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491472053, "post_id": 43247354, "comment_id": 73571948, "body": "@Miwa I am not sure what <code>boost::property_tree::xml_parser::xmlattr&lt;std::string&gt;()</code> is. you can read docs"}, {"owner": {"reputation": 462, "user_id": 7525292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c102a4e8064bab9ed147ea321255bc5?s=128&d=identicon&r=PG&f=1", "display_name": "JustRufus", "link": "https://stackoverflow.com/users/7525292/justrufus"}, "reply_to_user": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "edited": false, "score": 0, "creation_date": 1491474559, "post_id": 43247354, "comment_id": 73573768, "body": "@Miwa <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}], "tags": [], "owner": {"reputation": 462, "user_id": 7525292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c102a4e8064bab9ed147ea321255bc5?s=128&d=identicon&r=PG&f=1", "display_name": "JustRufus", "link": "https://stackoverflow.com/users/7525292/justrufus"}, "is_accepted": true, "score": 3, "last_activity_date": 1491460095, "creation_date": 1491460095, "answer_id": 43247354, "question_id": 43239853, "link": "https://stackoverflow.com/questions/43239853/boost-property-tree-how-to-get-child-of-child-tree-with-a-xml-file/43247354#43247354", "title": "Boost property tree : how to get child of child tree with a xml file", "body": "<ol>\n<li><p>Actually <code>boost::property_tree::ptree::value_type</code> is a <code>pair</code> of <code>key_type</code> (<code>std::string</code> in your case) and <code>ptree</code>. So in 2nd <code>FOREACH</code> you have to use <code>child_tree.second</code> and error says that <code>pair</code> has no <code>get_child</code> member function.</p></li>\n<li><p>In 2nd <code>FOREACH</code> scope you are already in \"food\" subtree. So it doesn't have \"food\" child.</p>\n\n<pre><code>BOOST_FOREACH( const ptree::value_type &amp; child_tree, tree.get_child(\"down\") )\n{\n    std::string tree_balise = child_tree.first;\n\n    if (tree_balise == \"food\")\n    {\n        BOOST_FOREACH( const ptree::value_type &amp; child_of_child_tree, child_tree.second )\n        {\n            std::cout &lt;&lt; \"I am in the child of child tree \" &lt;&lt; child_of_child_tree.first &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>Also Note that you can directly get \"down.food\" subtree.</p>\n\n<pre><code>BOOST_FOREACH( const ptree::value_type &amp; child_tree, tree.get_child(\"down.food\") )\n{\n    std::cout &lt;&lt; \"I am in the child of child tree \" &lt;&lt; child_tree.first &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7822094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c615faa7d19fb7bd78a13610e03849a3?s=128&d=identicon&r=PG&f=1", "display_name": "Miwa", "link": "https://stackoverflow.com/users/7822094/miwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7735, "favorite_count": 1, "accepted_answer_id": 43247354, "answer_count": 1, "score": 2, "last_activity_date": 1491460095, "creation_date": 1491419951, "question_id": 43239853, "link": "https://stackoverflow.com/questions/43239853/boost-property-tree-how-to-get-child-of-child-tree-with-a-xml-file", "title": "Boost property tree : how to get child of child tree with a xml file", "body": "<p>I try to parse a simple xml file using Boost library (version 1.57.0.2) and I try to access to link field values.</p>\n\n<p>Please find, here below my xml file :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;down&gt;\n    &lt;food name=\"cream\"&gt;\n        &lt;link name=\"123\" /&gt;\n        &lt;link name=\"456\" /&gt;\n    &lt;/food&gt;\n    &lt;tel name=\"ice\"&gt;\n        &lt;link name=\"78\" /&gt;\n        &lt;link name=\"90\" /&gt;\n    &lt;/tel&gt;\n&lt;/down&gt;\n</code></pre>\n\n<p>I try to see how to get child of child from web and do the same but I don't understand why it doesn't work with my code.</p>\n\n<p>I have the following error :</p>\n\n<pre><code>error: 'const value_type {aka const struct std::pair&lt;const std::__cxx11::basic_string&lt;char&gt;, boost::property_tree::basic_ptree&lt;std::__cxx11::basic_string&lt;char&gt;, std::__cxx11::basic_string&lt;char&gt; &gt; &gt;}' has no member named 'get_child'|\n</code></pre>\n\n<p>Please find my code here below :</p>\n\n<pre><code>boost::property_tree::xml_parser::read_xml(path.xml, tree);\n\nBOOST_FOREACH(const boost::property_tree::ptree::value_type &amp;child_tree, tree.get_child(\"down\"))\n{\n    std::string tree_balise = tree.first;\n\n    if (tree_balise == \"food\")\n    {\n        BOOST_FOREACH(const boost::property_tree::ptree::value_type &amp;child_of_child_tree, child_tree.get_child(\"food\"))\n        {\n            std::cout &lt;&lt; \"I am in the child of child tree\" &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>Does somebody could tell me why this error appears ?\nAm I missing something ?</p>\n\n<p>Thank you for your help.</p>\n\n<p>Miwa.</p>\n"}, {"tags": ["c++", "gcc", "g++", "one-definition-rule"], "comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1491421067, "post_id": 43239762, "comment_id": 73550452, "body": "Looks like it might be internally treating them as if they were the same type; if so, it&#39;s probably a compiler bug, but I&#39;m not 100% sure what the standard says about that.  Just a guess, though, I don&#39;t have GCC installed, and the only online GCC environment I know of that allows multiple files is outdated."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1491422924, "post_id": 43239762, "comment_id": 73551522, "body": "Do two differently named namespaces in the source files (instead of anonymous namespaces) fix the problem as well?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1491423371, "post_id": 43239762, "comment_id": 73551807, "body": "If you change the order of the dynamic_test.cpp files on the command line, does it change which test the segfault comes from?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 2, "creation_date": 1491423569, "post_id": 43239762, "comment_id": 73551913, "body": "What you should also do is provide the compiling and linking commands you use here to make your repro case complete. Also try to separate out the linking and the compiling into separate steps. After you have compiled the .o files, you should run <code>nm</code> on them. <code>nm</code> should show the symbol <code>Types</code> with a lower case t."}, {"owner": {"reputation": 83, "user_id": 7822581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJ2O.jpg?s=128&g=1", "display_name": "ethortsen", "link": "https://stackoverflow.com/users/7822581/ethortsen"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491425754, "post_id": 43239762, "comment_id": 73553090, "body": "@JustinTime Thanks, that is our suspicioun as well, but also curious if incomplete types are a factor. We found a similar bug posted to GCC Bugzilla: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=70413\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=70413</a>"}, {"owner": {"reputation": 83, "user_id": 7822581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJ2O.jpg?s=128&g=1", "display_name": "ethortsen", "link": "https://stackoverflow.com/users/7822581/ethortsen"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1491425779, "post_id": 43239762, "comment_id": 73553108, "body": "@MarkB Yes, naming the namespace differently also resolves the issue."}, {"owner": {"reputation": 83, "user_id": 7822581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJ2O.jpg?s=128&g=1", "display_name": "ethortsen", "link": "https://stackoverflow.com/users/7822581/ethortsen"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1491425805, "post_id": 43239762, "comment_id": 73553125, "body": "@NirFriedman Yes, changing the ordering on the command line does change which test the segfault comes from. Also, thanks for the suggestion, I will try that."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1491432067, "post_id": 43239762, "comment_id": 73555696, "body": "@ethortsen If changing the ordering changes which test causes the segfault, with the second-linked test being the segfaulting one, what is most likely occurring is that the definition of <code>Types</code> from the first linked is being used in the second linked. I wouldn&#39;t expect that to happen with something that has internal linkage which is why I asked about nm. I tried to do a repro locally but I failed (different os, different gcc, who knows). You could try defining a static string for each <code>Types</code> differently and print it as part of test to try to prove it."}], "answers": [{"comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491437813, "post_id": 43243080, "comment_id": 73557257, "body": "Meanwhile, MSVC merrily does exactly what you want, because the compiler gives every anonymous namespace its own unique internal name, and thus it sees each <code>Bar&lt;Foo&gt;</code> as a separate entity.  (For example, compiling with VS2010 (after changing the typedefs from <code>using</code> to <code>typedef</code>, because it was faster than walking to the computer with VS2015 installed), it generates <code>?foo@?$Bar@UFoo@?A0x67d7c1f5@@@@SAHXZ</code> for <code>test1.cpp</code> and <code>?foo@?$Bar@UFoo@?A0xe143b35b@@@@SAHXZ</code> for <code>test2.cpp</code>., where each <code>A&lt;hex number&gt;</code> is an anonymous namespace.)"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491437845, "post_id": 43243080, "comment_id": 73557264, "body": "I&#39;m curious whether MSVC is too lenient with anonymous namespaces here, or whether GCC has trouble differentiating between anonymous namespaces."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491442013, "post_id": 43243080, "comment_id": 73558282, "body": "@Justin Time I&#39;m not really sure what you mean by too lenient. I doubt this is covered by the standard at all. Most linker behavior isn&#39;t. Happy to be proven wrong though. I&#39;ve come across many examples where msvcs linker is better behaved. On Linux it&#39;s hilariously easy to cause segfaults with valid code where globals, static and dynamic linking are mixed."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491445536, "post_id": 43243080, "comment_id": 73559208, "body": "By &quot;too lenient&quot;, I meant that if it was an ODR violation, then MSVC would be wrong for letting it compile; I wasn&#39;t sure whether it was an ODR violation or a bug, which is why I didn&#39;t know which compiler was at fault."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491445617, "post_id": 43243080, "comment_id": 73559222, "body": "I just took a look at the standard, though, and <code>[namespace.unnamed&#47;1]</code> says that each unnamed namespace is supposed to be treated as if it has a unique name, and that &quot;Although entities in an unnamed namespace might have external linkage, they are effectively qualified by a name unique to their translation unit and therefore can never be seen from any other translation unit.&quot;  I may be misinterpreting, but I believe this means it&#39;s a GCC bug."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491446712, "post_id": 43243080, "comment_id": 73559443, "body": "(And yeah, I&#39;ve noticed that the MSVC linker is more reliable, too.  I personally think a big part of it is that their name mangling scheme is more thorough than GCC&#39;s, especially where globals and return types are concerned.  It&#39;s a lot harder to break, whether accidentally or intentionally, because it preserves basically the entire declaration.)"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491489353, "post_id": 43243080, "comment_id": 73585208, "body": "@JustinTime You make a good point with that standard quote, it gets pretty ambiguous what with the templating. I may re-ask this separately. Re MSVC, my biggest example is not related to name mangling. Double deletion of globals in Linux for no good reason."}, {"owner": {"reputation": 83, "user_id": 7822581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJ2O.jpg?s=128&g=1", "display_name": "ethortsen", "link": "https://stackoverflow.com/users/7822581/ethortsen"}, "edited": false, "score": 2, "creation_date": 1491508111, "post_id": 43243080, "comment_id": 73597455, "body": "Just want to say, thanks for all the feedback and help so far. @NirFriedman, your example seems to get down to the crux of the issue, and looks a lot like the example provided on GCC Bugzilla, where it looks like the bug was recently confirmed (<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=70413\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=70413</a>). However, it is very interesting to try to understand what the standard intends in this case."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 83, "user_id": 7822581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJ2O.jpg?s=128&g=1", "display_name": "ethortsen", "link": "https://stackoverflow.com/users/7822581/ethortsen"}, "edited": false, "score": 0, "creation_date": 1491514344, "post_id": 43243080, "comment_id": 73600784, "body": "@ethortsen My pleasure, was an interesting problem. I&#39;ve edited my answer to include the highlights of the conversation in the comments and the bug link. I&#39;m not sure there&#39;s much more to say as I&#39;m not seeing anyone arguing against this being a bug. Let me know if there&#39;s anything else I should provide so you can mark this as accepted."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1491594976, "post_id": 43243080, "comment_id": 73640440, "body": "@NirFriedman I would assume that the uniqueness is supposed to remain even when members of the anonymous namespace are used as template parameters, to prevent ODR violations, but it could be worded more clearly.  I didn&#39;t know that GCC&#39;s linker had issues with double deleting globals, though, that&#39;s pretty strange."}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": true, "score": 4, "last_activity_date": 1491514235, "last_edit_date": 1491514235, "creation_date": 1491433815, "answer_id": 43243080, "question_id": 43239762, "link": "https://stackoverflow.com/questions/43239762/odr-violation-in-gcc-6-3-0-with-types-defined-in-two-separate-translation-units/43243080#43243080", "title": "ODR violation in GCC 6.3.0 with types defined in two separate translation units", "body": "<p>Okay, it took me a while of playing with this on and off, but I finally got a very simple duplicate that gets at the heart of the matter. First, consider <code>test1.cpp</code>:</p>\n\n<pre><code>#include \"header.h\"\n\n#include &lt;iostream&gt;\n\nnamespace {\n\ntemplate &lt;class T&gt;\nstruct Foo {\n   static int foo() { return 1; };\n};\n\nusing D = Bar&lt;Foo&gt;;\n\n}\n\nvoid test1() {\n    std::cerr &lt;&lt; \"Test1: \" &lt;&lt; D::foo() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Now, <code>test2.cpp</code> is exactly identical to this, except that <code>Foo::foo</code> returns 2, and the function declared at the bottom is called <code>test2</code> and prints <code>Test2:</code> and so on. Next, <code>header.h</code>:</p>\n\n<pre><code>template &lt;template &lt;class&gt; class TT&gt;\nstruct Bar {\n    using type = TT&lt;Bar&gt;;\n\n    static int foo() { return type::foo(); }\n};\n\n\nvoid test1();\nvoid test2();\n</code></pre>\n\n<p>Finally, <code>main.x.cpp</code>:</p>\n\n<pre><code>#include \"header.h\"\n\nint main() {\n    test1();\n    test2();\n    return 0;\n}\n</code></pre>\n\n<p>You may be surprised to learn that this program prints:</p>\n\n<pre><code>Test1: 1\nTest2: 1\n</code></pre>\n\n<p>Of course, that's only because I compile with:</p>\n\n<pre><code>g++ -std=c++14 main.x.cpp test1.cpp test2.cpp\n</code></pre>\n\n<p>If I reverse the order of the last two files, they both print 2.</p>\n\n<p>What's happening is that the linker ends up using the first definition it encounters of <code>Foo</code> everywhere it's needed. Hmm, but we defined <code>Foo</code> in an anonymous namespace, which should give it internal linkage, avoiding this issue. So we compile just one TU and then use <code>nm</code> on it:</p>\n\n<pre><code>g++ -std=c++14 -c test1.cpp\nnm -C test1.o\n</code></pre>\n\n<p>This yields the following:</p>\n\n<pre><code>                 U __cxa_atexit\n                 U __dso_handle\n0000000000000087 t _GLOBAL__sub_I__Z5test1v\n0000000000000049 t __static_initialization_and_destruction_0(int, int)\n0000000000000000 T test1()\n000000000000003e t (anonymous namespace)::Foo&lt;Bar&lt;(anonymous namespace)::Foo&gt; &gt;::foo()\n0000000000000000 W Bar&lt;(anonymous namespace)::Foo&gt;::foo()\n                 U std::ostream::operator&lt;&lt;(int)\n                 U std::ios_base::Init::Init()\n                 U std::ios_base::Init::~Init()\n                 U std::cerr\n0000000000000000 r std::piecewise_construct\n0000000000000000 b std::__ioinit\n                 U std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)\n</code></pre>\n\n<p>Don't worry about the letters for now, other than upper case versus lower case. Lower case symbols are private, the way we expect internal linkage symbols to be. Upper case symbols are public, and have external linkage and are exposed to the linker.</p>\n\n<p>What's interesting, and not really that surprising, is that while <code>Foo</code> may have internal linkage, <code>Bar</code> does not! The first translation unit already defines the symbol <code>Bar&lt;Foo&gt;</code> with external linkage. The second translation unit does the same. So when the linker links them, it sees two translation units trying to define the same symbol with external linkage. Note that it's an inline defined class member, so it's implicitly inline. So the linker handles this as it always does: it just silently drops all the definitions it runs into after the first (because the symbol is already defined; that's how the linker works, left to right).So <code>Foo</code> is correctly defined in each TU, but <code>Bar&lt;Foo&gt;</code> isn't.</p>\n\n<p>Bottom line is that this is an ODR violation. You'll want to rethink some stuff.</p>\n\n<p>Edit: it seems in fact like this is a bug in gcc. The standard's wording implies that the <code>Foo</code>s should be treated uniquely in this situation, and thus the <code>Bar</code> templated on each <code>Foo</code> should be separate. Link to bug: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=70413\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=70413</a>.</p>\n"}], "owner": {"reputation": 83, "user_id": 7822581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIJ2O.jpg?s=128&g=1", "display_name": "ethortsen", "link": "https://stackoverflow.com/users/7822581/ethortsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 1, "accepted_answer_id": 43243080, "answer_count": 1, "score": 8, "last_activity_date": 1563934597, "creation_date": 1491419599, "last_edit_date": 1563934597, "question_id": 43239762, "link": "https://stackoverflow.com/questions/43239762/odr-violation-in-gcc-6-3-0-with-types-defined-in-two-separate-translation-units", "title": "ODR violation in GCC 6.3.0 with types defined in two separate translation units", "body": "<p>We are seeing some strange behavior in GCC with the following code example. The strange behavior is ODR violation in GCC 6.3.0 with types defined in two separate translation units. It is possibly related to recursive type definitions or incomplete types.</p>\n\n<p>We are unsure whether our code is valid, or if we are depending on undefined behavior in the way our types are recursively defined. Please see how the variant-like Dynamic class template is defined and instantiated in two separate cpp files. </p>\n\n<p>dynamic_test.h:  </p>\n\n<pre><code>#pragma once\n\n#include &lt;algorithm&gt;\n#include &lt;type_traits&gt;\n\nnamespace dynamic\n{\n    template &lt;class T&gt;\n    void erasure_destroy( const void *p )\n    {\n        reinterpret_cast&lt;const T*&gt;( p )-&gt;~T();\n    }\n\n    template &lt;class T&gt;\n    void erasure_copy( void *pDest, const void *pSrc )\n    {\n        ::new( pDest ) T( *reinterpret_cast&lt;const T*&gt;( pSrc ) );\n    }\n\n    template &lt;class T&gt;\n    struct TypeArg {};\n\n    struct ErasureFuncs\n    {\n        template &lt;class T = ErasureFuncs&gt;\n        ErasureFuncs( TypeArg&lt;T&gt; t = TypeArg&lt;T&gt;() ) :\n            pDestroy( &amp;erasure_destroy&lt;T&gt; ),\n            pCopy( &amp;erasure_copy&lt;T&gt; )\n        {\n            (void)t;\n        }\n\n        std::add_pointer_t&lt;void( const void* )&gt; pDestroy;\n        std::add_pointer_t&lt;void( void*, const void* )&gt; pCopy;\n    };\n\n    enum class TypeValue\n    {\n        Null,\n        Number,\n        Vector\n    };\n\n    template &lt;typename T&gt;\n    using unqual = std::remove_cv_t&lt;std::remove_reference_t&lt;T&gt;&gt;;\n\n    template &lt;class Base, class Derived&gt;\n    using disable_if_same_or_derived = std::enable_if_t&lt;!std::is_base_of&lt;Base, unqual&lt;Derived&gt;&gt;::value&gt;;\n\n    template &lt;template &lt;class&gt; class TypesT&gt;\n    struct Dynamic\n    {\n        using Types = TypesT&lt;Dynamic&gt;;\n\n        using Null = typename Types::Null;\n        using Number = typename Types::Number;\n        using Vector = typename Types::Vector;\n\n        Dynamic()\n        {\n            construct&lt;Null&gt;( nullptr );\n        }\n\n        ~Dynamic()\n        {\n            m_erasureFuncs.pDestroy( &amp;m_data );\n        }\n\n        Dynamic( const Dynamic &amp;d ) :\n            m_typeValue( d.m_typeValue ),\n            m_erasureFuncs( d.m_erasureFuncs )\n        {\n            m_erasureFuncs.pCopy( &amp;m_data, &amp;d.m_data );\n        }\n\n        Dynamic( Dynamic &amp;&amp;d ) = delete;\n\n        template &lt;class T, class = disable_if_same_or_derived&lt;Dynamic, T&gt;&gt;\n        Dynamic( T &amp;&amp;value )\n        {\n            construct&lt;unqual&lt;T&gt;&gt;( std::forward&lt;T&gt;( value ) );\n        }\n\n        Dynamic &amp;operator=( const Dynamic &amp;d ) = delete;\n        Dynamic &amp;operator=( Dynamic &amp;&amp;d ) = delete;\n\n    private:\n        static TypeValue to_type_value( TypeArg&lt;Null&gt; )\n        {\n            return TypeValue::Null;\n        }\n\n        static TypeValue to_type_value( TypeArg&lt;Number&gt; )\n        {\n            return TypeValue::Number;\n        }\n\n        static TypeValue to_type_value( TypeArg&lt;Vector&gt; )\n        {\n            return TypeValue::Vector;\n        }\n\n        template &lt;class T, class...Args&gt;\n        void construct( Args&amp;&amp;...args )\n        {\n            m_typeValue = to_type_value( TypeArg&lt;T&gt;() );\n            m_erasureFuncs = TypeArg&lt;T&gt;();\n            new ( &amp;m_data ) T( std::forward&lt;Args&gt;( args )... );\n        }\n\n    private:\n        TypeValue m_typeValue;\n        ErasureFuncs m_erasureFuncs;\n        std::aligned_union_t&lt;0, Null, Number, Vector&gt; m_data;\n    };\n}\n\nvoid test1();\nvoid test2();\n</code></pre>\n\n<p>dynamic_test_1.cpp:  </p>\n\n<pre><code>#include \"dynamic_test.h\"\n\n#include &lt;vector&gt;\n\nnamespace\n{\n    template &lt;class DynamicType&gt;\n    struct Types\n    {\n        using Null = std::nullptr_t;\n        using Number = long double;\n        using Vector = std::vector&lt;DynamicType&gt;;\n    };\n\n    using D = dynamic::Dynamic&lt;Types&gt;;\n}\n\nvoid test1()\n{\n    D::Vector v1;\n    v1.emplace_back( D::Number( 0 ) );\n}\n</code></pre>\n\n<p>dynamic_test_2.cpp:  </p>\n\n<pre><code>#include \"dynamic_test.h\"\n\n#include &lt;vector&gt;\n\nnamespace\n{\n    template &lt;class DynamicType&gt;\n    struct Types\n    {\n        using Null = std::nullptr_t;\n        using Number = double;\n        using Vector = std::vector&lt;DynamicType&gt;;\n    };\n\n    using D = dynamic::Dynamic&lt;Types&gt;;\n}\n\nvoid test2()\n{\n    D::Vector v1;\n    v1.emplace_back( D::Number( 0 ) );\n}\n</code></pre>\n\n<p>main.cpp:  </p>\n\n<pre><code>#include \"dynamic_test.h\"\n\nint main( int, char* const [] )\n{\n    test1();\n    test2();\n    return 0;\n}\n</code></pre>\n\n<p>Running this code causes a SIGSEGV with the following stack trace:  </p>\n\n<pre><code>1 ??                                                                                                                                     0x1fa51  \n2 dynamic::Dynamic&lt;(anonymous namespace)::Types&gt;::~Dynamic                                                        dynamic_test.h     66  0x40152b \n3 std::_Destroy&lt;dynamic::Dynamic&lt;(anonymous namespace)::Types&gt;&gt;                                                   stl_construct.h    93  0x4013c1 \n4 std::_Destroy_aux&lt;false&gt;::__destroy&lt;dynamic::Dynamic&lt;(anonymous namespace)::Types&gt; *&gt;                           stl_construct.h    103 0x40126b \n5 std::_Destroy&lt;dynamic::Dynamic&lt;(anonymous namespace)::Types&gt; *&gt;                                                 stl_construct.h    126 0x400fa8 \n6 std::_Destroy&lt;dynamic::Dynamic&lt;(anonymous namespace)::Types&gt; *, dynamic::Dynamic&lt;(anonymous namespace)::Types&gt;&gt; stl_construct.h    151 0x400cd1 \n7 std::vector&lt;dynamic::Dynamic&lt;(anonymous namespace)::Types&gt;&gt;::~vector                                            stl_vector.h       426 0x400b75 \n8 test2                                                                                                           dynamic_test_2.cpp 20  0x401796 \n9 main                                                                                                            main.cpp           6   0x400a9f \n</code></pre>\n\n<p>It's odd that constructing a Vector takes us directly to a destructor.</p>\n\n<p>What is very strange, is that these errors go away when we do the following:  </p>\n\n<ol>\n<li>Rename \"Types\" in one of the cpp files, so that they do not use the\nsame name for the class template.</li>\n<li>Make the implementation of \"Types\" the same in each cpp file (change\nNumber to double in each file).</li>\n<li>Do not push a Number to a Vector.</li>\n<li>Change the implementation of Dynamic to not use this recursive type\ndefinition style.</li>\n</ol>\n\n<p>Here is a trimmed down example of an implementation which does work:</p>\n\n<pre><code>template &lt;class Types&gt;\nstruct Dynamic\n{\n    using Null = typename Types::Null;\n    using Number = typename Types::Number;\n    using Vector = typename Types::template Vector&lt;Dynamic&gt;;\n\n...\n\n    struct Types\n{\n    using Null = std::nullptr_t;\n    using Number = long double;\n\n    template &lt;class DynamicType&gt;\n    using Vector = std::vector&lt;DynamicType&gt;;\n};\n</code></pre>\n\n<p>We also see some warnings related to ODR violation when we compile with link time optimization (LTO):  </p>\n\n<pre><code>dynamic_test.h:51: warning: type \u2018struct Dynamic\u2019 violates the C++ One Definition Rule [-Wodr]\nstruct Dynamic\n         ^\n</code></pre>\n\n<p>Does anyone have some insight into what may be causing this issue?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 5, "creation_date": 1491418828, "post_id": 43239493, "comment_id": 73549151, "body": "Arrays have no concept of &quot;empty&quot;. It would be better to use <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">standard containers</a>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 4, "creation_date": 1491418849, "post_id": 43239493, "comment_id": 73549165, "body": "Don&#39;t use global variables or C-style arrays.  Use a vector which knows its size."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1491419218, "post_id": 43239493, "comment_id": 73549382, "body": "Haven&#39;t you noticed that you&#39;re using the <code>count</code> variable to keep track of how many elements there are?"}, {"owner": {"reputation": 1081, "user_id": 6764663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GlGjM.jpg?s=128&g=1", "display_name": "Tanuj Yadav", "link": "https://stackoverflow.com/users/6764663/tanuj-yadav"}, "edited": false, "score": 0, "creation_date": 1491421256, "post_id": 43239493, "comment_id": 73550545, "body": "in your code if count==0, then array is empty"}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 6152931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e82bdba0e0a25318a9c1e75640e9156?s=128&d=identicon&r=PG&f=1", "display_name": "Serid", "link": "https://stackoverflow.com/users/6152931/serid"}, "is_accepted": false, "score": 2, "last_activity_date": 1491423800, "creation_date": 1491423800, "answer_id": 43240954, "question_id": 43239493, "link": "https://stackoverflow.com/questions/43239493/check-if-array-is-empty-or-not-c/43240954#43240954", "title": "Check if array is empty or not C++", "body": "<p>You should add a \"check\" in your \"modify\" function.</p>\n\n<p>Original:</p>\n\n<pre><code>void ModifyValue(int a[]){\nint modification,position;\ncout&lt;&lt;\"Enter the position of a number to modify\";\ncin&gt;&gt;position;\ncout&lt;&lt;\"Enter a number to modify\";\ncin&gt;&gt;modification;\na[position-1]=modification;\n</code></pre>\n\n<p>With \"check\":</p>\n\n<pre><code>void ModifyValue(int a[]){\n//Check\nif(count == 0)\n{\n   cout &lt;&lt; \"Sorry no value added so far\";\n   return; //Exit from function\n}\n\nint modification,position;\ncout&lt;&lt;\"Enter the position of a number to modify\";\ncin&gt;&gt;position;\ncout&lt;&lt;\"Enter a number to modify\";\ncin&gt;&gt;modification;\na[position-1]=modification;\n}\n</code></pre>\n\n<p>Also I recommend you to use <a href=\"https://msdn.microsoft.com/en-gb/library/k0t5wee3.aspx\" rel=\"nofollow noreferrer\"><code>switch</code></a> instead of \"if else if\"</p>\n\n<pre><code>if (n==1){\n    AddNewValue(a);         //calling functions using if else statments\n}\nelse if(n==2){\n    SearchValue(a);\n}\nelse if(n==3){\n    ModifyValue(a);\n}\nelse if(n==4){\n    PrintValue(a);\n}\nelse if(n==5){\n    PrintSum(a);\n}\n</code></pre>\n\n<p>like:</p>\n\n<pre><code>switch (n)  \n  {  \n     case 1:  \n        AddNewValue(a);  \n        break;\n\n     case 2:  \n        SearchValue(a);  \n        break;\n\n     case 3:  \n        ModifyValue(a);;  \n        break;\n\n     //And so on...\n\n     default:  \n        cout &lt;&lt; \"Unknown option\";  \n  }\n</code></pre>\n\n<p>Also in this code you don't need any arguments in</p>\n\n<pre><code>  void menu(int n)\n</code></pre>\n\n<p>So you can make</p>\n\n<pre><code>  void menu()\n</code></pre>\n\n<p>instead.</p>\n\n<p>Also I recommend you to place whitespaces between operands and operators (words)</p>\n\n<pre><code>cout &lt;&lt; \"Enter a value\\n\";\ncin &gt;&gt; a[count];  //taking input to array\ncount++;\n</code></pre>\n\n<p>instead</p>\n\n<pre><code>cout&lt;&lt;\"Enter a value\\n\";\ncin&gt;&gt;a[count];  //taking input to array\ncount++;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7573927, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8380a11be4ec241b3327fcf8dd6f57ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7573927/jawad-adil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3960, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1491423800, "creation_date": 1491418736, "question_id": 43239493, "link": "https://stackoverflow.com/questions/43239493/check-if-array-is-empty-or-not-c", "title": "Check if array is empty or not C++", "body": "<p>Please tell me how to check whether array is empty on not?\nsee my code after the step of code modify comment.I want a message \"Sorry no value added so far\".</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint count=0;\n//----------------------------------------------------------//\n//---------menu items list start from this position---------//\n//----------------------------------------------------------//\nvoid menu(int n){cout&lt;&lt;\"\\nEnter an option: \\n\";\n    cout&lt;&lt;\"1- Add new value\\n2- Search Value\\n3- Modify value\\n4- Print Value\\n5- Print sum of all values\\n6- Quit/terminate\\n\";\n}\n//-----------------------------------------------------------//\n//---------Funtion to add new values starts from here--------//\n//-----------------------------------------------------------//\nvoid AddNewValue(int a[]){\n    cout&lt;&lt;\"Enter a value\\n\";\n    cin&gt;&gt;a[count];  //taking input to array\n    count++;\n}\n//------------------------------------------------------------------------//\n//---------Function to search a value from array starts from here---------//\n//------------------------------------------------------------------------//\nvoid SearchValue(int a[]){\n    int num,jawad=0;\n    cout&lt;&lt;\"Enter a number to search\\n\";\n    cin&gt;&gt;num;\n    for(int starter=0;starter&lt;count;starter++){         //starting loop from 1st value of array\n        if (num==a[starter])\n        jawad=1;        //switching jawad from 0 to 1 if value found\n    }\n    if(jawad==1)\n    cout&lt;&lt;\"value exists at \"&lt;&lt;count&lt;&lt;\"th position\\n\";\n    else cout&lt;&lt;\"Value does not exist\";\n}\n//-------------------------------------------------------------------//\n//---------Function to modify value in array start from here---------//\n//-------------------------------------------------------------------//\nvoid ModifyValue(int a[]){\n    int modification,position;\n    cout&lt;&lt;\"Enter the position of a number to modify\";\n    cin&gt;&gt;position;\n    cout&lt;&lt;\"Enter a number to modify\";\n    cin&gt;&gt;modification;\n    a[position-1]=modification;         //calculating index from enterd value and placing that equal to new number\n}\n//-----------------------------------------------------------//\n//---------Function to Print values starts from here---------//\n//-----------------------------------------------------------//\nvoid PrintValue(int a[]){\n    cout&lt;&lt;\"The stored values are : \";\n    for(int c=0;c&lt;count;c++)        //start loop and tak out all the values then print them\n    {cout&lt;&lt;a[c]&lt;&lt;' ';\n    if (a[c]==0)\n    cout&lt;&lt;\"jawad adil\";\n    }\n\n}\n//------------------------------------------------------------------------------//\n//----------Function to Take sum of the values of array starts from here--------//\n//------------------------------------------------------------------------------//\nvoid PrintSum(int a[]){\n    int r=0,sum=0;\n    cout&lt;&lt;\"The sum of all the values is : \";\n    while(r&lt;count){\n        sum=sum+a[r];           //taking sum of all the values using loop\n        r=r+1;\n    }\ncout&lt;&lt;sum&lt;&lt;'\\n';\n}\n//---------------------------------------------//\n//----------main body starts from here---------//\n//---------------------------------------------//\nint main(){\n    int n;\n    int a[100];\n    while(n!=6){\n    menu(n);\n    cin&gt;&gt;n;\n    if (n==1){\n        AddNewValue(a);         //calling functions using if else statments\n    }\n    else if(n==2){\n        SearchValue(a);\n    }\n    else if(n==3){\n        ModifyValue(a);\n    }\n    else if(n==4){\n        PrintValue(a);\n    }\n    else if(n==5){\n        PrintSum(a);\n    }}\n }\n</code></pre>\n\n<p>how can I do that? I am doing but it is not working.</p>\n"}, {"tags": ["c++", "winapi", "visual-c++"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1491418692, "post_id": 43239424, "comment_id": 73549072, "body": "Did you check the return value of <code>LockResource</code> to ensure that it wasn&#39;t null?"}, {"owner": {"reputation": 59, "user_id": 7804327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/43a164df02f821f6be99530cfb44fa6e?s=128&d=identicon&r=PG&f=1", "display_name": "Xor", "link": "https://stackoverflow.com/users/7804327/xor"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1491419475, "post_id": 43239424, "comment_id": 73549519, "body": "In memory window I can see that file variable has the bytes from my file."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1491421810, "post_id": 43239424, "comment_id": 73550881, "body": "Resources are in a read-only segment of the executable. You can&#39;t modify memory taken by the resource."}], "answers": [{"comments": [{"owner": {"reputation": 1672, "user_id": 86969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0972de716efa6fe812f0993f8f0df17?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/86969/dan"}, "edited": false, "score": 0, "creation_date": 1558898526, "post_id": 43241090, "comment_id": 99242415, "body": "Actually I found a way to alter resource that seemed locked, but I don&#39;t know if that would work here.  See here:  <a href=\"https://stackoverflow.com/questions/56302660/how-can-i-change-the-style-of-a-control-clistbox-initialized-with-ddx-control/56316671#56316671\" title=\"how can i change the style of a control clistbox initialized with ddx control\">stackoverflow.com/questions/56302660/&hellip;</a>"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1491424368, "creation_date": 1491424368, "answer_id": 43241090, "question_id": 43239424, "link": "https://stackoverflow.com/questions/43239424/write-access-violation-when-trying-to-modify-array/43241090#43241090", "title": "Write access violation when trying to modify array", "body": "<p>Resources exist in read-only memory, you cannot write to them directly.</p>\n\n<p>The only way to modify the contents of a resource is to use <code>UpdateResource()</code> (unless you <code>WriteFile()</code> directly to the executable file on disk), but you can't use either of those on a resource that belongs to an active running process, as the executable is locked by the OS.</p>\n\n<p>So, the only way to do what you are attempting is to allocate a separate copy of the resource data in writable memory, and then you can do whatever you want with that copy, eg:</p>\n\n<pre><code>INT CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR lpCmdLine, INT nCmdShow)\n{\n    HRSRC hRes = FindResource(NULL, L\"FILE\", RT_RCDATA);\n    if (hRes == NULL)\n    {\n        // print error\n    }\n    else\n    {\n        DWORD resSize = SizeofResource(NULL, hRes);\n        HGLOBAL resData = LoadResource(NULL, hRes);\n        LPVOID resDataPtr = LockResource(resData);\n\n        byte *copy = new byte[resSize];\n        memcpy(copy, resDataPtr, resSize);\n        Change(copy, resSize);\n        delete[] copy;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7804327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/43a164df02f821f6be99530cfb44fa6e?s=128&d=identicon&r=PG&f=1", "display_name": "Xor", "link": "https://stackoverflow.com/users/7804327/xor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 43241090, "answer_count": 1, "score": 0, "last_activity_date": 1585924207, "creation_date": 1491418503, "last_edit_date": 1585924207, "question_id": 43239424, "link": "https://stackoverflow.com/questions/43239424/write-access-violation-when-trying-to-modify-array", "title": "Write access violation when trying to modify array", "body": "<p>The file from resources is passed to function Change which should XOR each byte value, but then I get write access violation error.</p>\n\n<pre><code>INT CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,\nPSTR lpCmdLine, INT nCmdShow)\n{\n    HRSRC hRes = FindResource(NULL, L\"FILE\", RT_RCDATA);\n\n    if (hRes == NULL)\n    {\n        // print error\n    }\n\n    DWORD resSize = SizeofResource(NULL, hRes);\n    HGLOBAL resData = LoadResource(NULL, hRes);\n    byte *file = reinterpret_cast&lt;byte*&gt;(LockResource(resData));\n\n    Change(file, resSize);\n\n    return 0;\n}\n\nvoid Change(byte *data, int size)\n{\n    for (int i = 0; i &lt; size; ++i)\n    {\n        data[i] ^= 2;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1491418263, "post_id": 43239326, "comment_id": 73548805, "body": "Do note that <code>char s[j],p[k];</code> are variable length arrays and is not standard C++."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 2, "creation_date": 1491420243, "post_id": 43239326, "comment_id": 73549967, "body": "Why are you using char arrays instead of strings?"}, {"owner": {"reputation": 95, "user_id": 6543575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QhVu-mERWPQ/AAAAAAAAAAI/AAAAAAAAAKM/extxNXw-eHA/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6543575/sachin"}, "edited": false, "score": 0, "creation_date": 1491420415, "post_id": 43239326, "comment_id": 73550063, "body": "i think by that way we can interchange the very first character of both the string"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 6543575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QhVu-mERWPQ/AAAAAAAAAAI/AAAAAAAAAKM/extxNXw-eHA/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6543575/sachin"}, "edited": false, "score": 0, "creation_date": 1491419575, "post_id": 43239601, "comment_id": 73549582, "body": "this helped me to print the entire p but i&#39;m getting my output as:             &quot;blxecxsye @ dfjoosgukxgywz&quot;                                                                                 while there shouldn&#39;t be &quot;@&quot; in between them and multiple  number of spaces"}], "tags": [], "owner": {"reputation": 1, "user_id": 7814424, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AzVM9VlcLVU/AAAAAAAAAAI/AAAAAAAAADk/g-YyDL8xZKY/photo.jpg?sz=128", "display_name": "D&#225;vid Danaj", "link": "https://stackoverflow.com/users/7814424/d%c3%a1vid-danaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1491419078, "creation_date": 1491419078, "answer_id": 43239601, "question_id": 43239326, "link": "https://stackoverflow.com/questions/43239326/why-am-i-getting-false-output-in-string-swap-program/43239601#43239601", "title": "why am i getting false output in string swap program", "body": "<p>Your string p is of size k, which is size of input b (14).</p>\n\n<p>In your for cycle you iterate from 0 to size of input a (9), which in your case is smaller than size of input b.</p>\n\n<p>When you output content of p at the end of your code, chars at indexes from 9 to 13 are not set and you print something undesired from that place in a memory.</p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 95, "user_id": 6543575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QhVu-mERWPQ/AAAAAAAAAAI/AAAAAAAAAKM/extxNXw-eHA/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6543575/sachin"}, "edited": false, "score": 0, "creation_date": 1491422436, "post_id": 43239968, "comment_id": 73551226, "body": "Remember to check an answer if it helps resolve your issue."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1491420365, "creation_date": 1491420365, "answer_id": 43239968, "question_id": 43239326, "link": "https://stackoverflow.com/questions/43239326/why-am-i-getting-false-output-in-string-swap-program/43239968#43239968", "title": "why am i getting false output in string swap program", "body": "<p>I don't understand the need for the character arrays.  </p>\n\n<pre><code>// Swapping first characters\nchar temp = a[0];\nb[0] = a[0];\na[0] = temp;\n</code></pre>\n\n<p>Please use the debugger and verify that your <em>character</em> arrays are terminated by a nul character.  </p>\n\n<p>See also: <code>std::string::c_str()</code> and <code>strncpy</code>.</p>\n"}], "owner": {"reputation": 95, "user_id": 6543575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QhVu-mERWPQ/AAAAAAAAAAI/AAAAAAAAAKM/extxNXw-eHA/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6543575/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1491420533, "creation_date": 1491418197, "last_edit_date": 1491420533, "question_id": 43239326, "link": "https://stackoverflow.com/questions/43239326/why-am-i-getting-false-output-in-string-swap-program", "title": "why am i getting false output in string swap program", "body": "<p>`<br>\n   The asked program was to input two string and print their respective size as first line in output while the second line contains the concatenation  of two string and the third line of output contains the original string after the first character of both the string have been swapped..below is my code..everything is working except while printing the second string it is printing unnecessary characters because of which entire second string is not being printed\nPS: i'm new to c++</p>\n\n<pre><code>int main()\n{\nstring a,b,c;\n\n\n   cin&gt;&gt;a&gt;&gt;b;\n   int j=a.size();\n   int k=b.size();\n   char s[j],p[k];\n   cout&lt;&lt;a.size()&lt;&lt;\" \"&lt;&lt;b.size()&lt;&lt;endl;\n c=a+b;\n cout&lt;&lt;c&lt;&lt;endl;\nfor(int i=0;i&lt;a.size();i++)\n{\ns[i]=a[i];\n\n}\nfor(int i=0;i&lt;b.size();i++)\n{\np[i]=b[i];\n\n}\nchar t;\nt=s[0];\ns[0]=p[0];\np[0]=t;\ncout&lt;&lt;s&lt;&lt;\" \";\ncout&lt;&lt;p;\nreturn 0;\n}`\n</code></pre>\n\n<p>input:\ndlxecxsye\nbfjoosgukxgywz</p>\n\n<p>output:\n9 14\ndlxecxsyebfjoosgukxgywz\nblxecxsye\n@ dfjoosgukxgywz</p>\n\n<p>desired output:\n9 14\ndlxecxsyebfjoosgukxgywz\nblxecxsye dfjoosgukxgywz</p>\n"}, {"tags": ["c++", "tcp", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1491433327, "post_id": 43239208, "comment_id": 73556108, "body": "Gee. Why all the big words. &quot;Cheating&quot;. &quot;Cheating big!&quot;. &quot;Not real world!&quot;. I don&#39;t think they use shared_ptr &quot;for brevity&quot; - that&#39;s your words only. I use shared_ptr in my own application. And yes, I keep a collection of <code>weak_ptr</code> to keep track of them too. What is the problem with that? Are my servers &quot;not real world&quot;?"}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 1, "creation_date": 1491463822, "post_id": 43239208, "comment_id": 73566236, "body": "<code>shared_ptr</code> is not cheating and it&#39;s very real-world. It exists for a reason, and it&#39;s to be used in the real world in situations like this."}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 0, "creation_date": 1491467810, "post_id": 43239208, "comment_id": 73568782, "body": "Why do you think that having a <code>shared_ptr</code> means you have no collection ? Does <code>std::vector&lt;std::shared_ptr&lt;Connection&gt;&gt;</code> seems so unbelievable to you ?"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1491488088, "post_id": 43239208, "comment_id": 73584147, "body": "Look fellas, I am not against using shared_ptrs in your applications. I am pointing out that relying on an outstanding receive call rather than managing the lifetime of a connection yourself is cheating. Having a collection of weak_ptrs did not occur to me."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 0, "creation_date": 1491489078, "post_id": 43239208, "comment_id": 73584975, "body": "@drax Yes std::vector&lt;std::shared_ptr&lt;Connection&gt;&gt; seems absolutely unviable to me. If you keep an outstanding reference to the connection in your collection, it never gets destroyed. If you rely on removing it from the collection to destroy it, you&#39;ve just moved the problem rather than solve it. It then becomes &quot;When can I safely remove the ptr from my collection in order to destroy it&quot; rather than &quot;When can I destroy it&quot;, you cannot safely remove it while in a async callback and have the stack unwind."}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 0, "creation_date": 1491569134, "post_id": 43239208, "comment_id": 73624854, "body": "@ChristopherPisz You can safely remove the shared_ptr at any time you notice you don&#39;t need the connection anymore, it will not directly destroy it at taht instant if it is used anywhere else for the very reason that you are using shared_ptrs and the connection won&#39;t get destroyed until all actions requiring it were posted if they correctly copied the connection pointer. The probleme of &quot;when to remove the connection&quot; exist no matter how you store it."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 0, "creation_date": 1491580315, "post_id": 43239208, "comment_id": 73632852, "body": "@Drax now that I think about it, I might see your point. Maybe weakptr isn&#39;t even necessary either. In that case, the original answer on the other post is correct. What to do with this question then, since we probably don&#39;t want to lose the extra information we&#39;ve gathered."}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 1, "creation_date": 1491815106, "post_id": 43239208, "comment_id": 73702173, "body": "@ChristopherPisz Keep it up, it&#39;s useful for people who might wonder about the same problem :)"}], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1491419876, "post_id": 43239699, "comment_id": 73549756, "body": "This sounds good on paper, but I can&#39;t quite visualize it. Do you have a very bare bones simple example you can link?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491520029, "post_id": 43239699, "comment_id": 73602878, "body": "@RichardHodges I&#39;m also pretty curious whether you can show an example. Most of the things you mention never occurred to me outside the realm of Asio extensions."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491521340, "post_id": 43239699, "comment_id": 73603286, "body": "@sehe will knock something together after the weekend. I am on a delivery deadline at the Moment. But happy to share my experiences."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491521848, "post_id": 43239699, "comment_id": 73603463, "body": "Thank you. I&#39;ve marked the question as fav, although you might elect to post somewhere else if you think it better serves the purpose"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1498734906, "post_id": 43239699, "comment_id": 76626861, "body": "@RichardHodges It&#39;s holiday season where I live. Anything you can point me to give this a whirl for myself?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1498755506, "post_id": 43239699, "comment_id": 76642395, "body": "@sehe I am in the middle of delivering a hard deadline at the moment. If you look at the source code of asio you&#39;ll see that all io objects are implemented as a trio of handle, service and implementation. There is a one to one relationship between the service and the io_service. The service can keep track of all instances that it manages. It can also get hold of other services it might need via a call to use_service on its owning io loop. Thus, services can serve as caches of instances. They can track instances with shared/weak pointers if necessary. Note that from the users point of view"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1498755691, "post_id": 43239699, "comment_id": 76642521, "body": "@sehe the lifetime of an io object is governed by the lifetime of the handle class. The internal implementation can live longer, and is under control of the service. This allows objects with complex async cleanup operations to be simply deleted by the user while the service cleans up in the background. An example might be a clean shutdown of a web socket over ssl. There is the websocket shutdown protocol, the ssl shutdown protocol followed by the shutdown of the underlying socket. These can be handled by 3 separate services."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1499539570, "post_id": 43239699, "comment_id": 76953955, "body": "@sehe see latest commit. goblins implemented as state machines on a background thread pool, includes boost::future continuation compatibility. Want to make a fun game? <a href=\"https://github.com/madmongo1/goblins\" rel=\"nofollow noreferrer\">github.com/madmongo1/goblins</a>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1499539800, "post_id": 43239699, "comment_id": 76954020, "body": "@ChristopherPisz I (eventually) created a full demo here: <a href=\"https://github.com/madmongo1/goblins\" rel=\"nofollow noreferrer\">github.com/madmongo1/goblins</a>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1500137995, "post_id": 43239699, "comment_id": 77212159, "body": "@sehe another example of the value of separation of objects into handle, service and impl: <a href=\"https://stackoverflow.com/a/45120652/2015579\">stackoverflow.com/a/45120652/2015579</a>"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1491433158, "last_edit_date": 1491433158, "creation_date": 1491419392, "answer_id": 43239699, "question_id": 43239208, "link": "https://stackoverflow.com/questions/43239208/how-to-design-proper-release-of-a-boostasio-socket-or-wrapper-thereof/43239699#43239699", "title": "How to design proper release of a boost::asio socket or wrapper thereof", "body": "<p>The way that asio solves the \"deletion problem\" where there are outstanding async methods is that is splits each async-enabled object into 3 classes, eg:</p>\n\n<ul>\n<li>server</li>\n<li>server_service</li>\n<li>server_impl</li>\n</ul>\n\n<p>there is one service per io_loop (see <code>use_service&lt;&gt;</code>). The service creates an impl for the server, which is now a handle class.</p>\n\n<p>This has separated the lifetime of the handle and the lifetime of the implementation.</p>\n\n<p>Now, in the handle's destructor, a message can be sent (via the service) to the impl to cancel all outstanding IO. </p>\n\n<p>The handle's destructor is free to wait for those io calls to be queued if necessary (for example if the server's work is being delegated to a background io loop or thread pool).</p>\n\n<p>It has become a habit with me to implement all io_service-enabled objects this way as it makes coding with aiso very much simpler.</p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491436086, "post_id": 43243314, "comment_id": 73556814, "body": "PS. I tend to use a nifty small utility for lifetime synchronization too: <a href=\"http://paste.ubuntu.com/24323983/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/24323983</a>. This way an RPC server and it&#39;s background schedulers can easily coordinate shutdown of running tasks and other things that keep a reference to anything bound to the server&#39;s lifetime. (Note the fail safe so that a bug will not lead to indefinite shutdown hang)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 4, "last_activity_date": 1491435435, "creation_date": 1491435435, "answer_id": 43243314, "question_id": 43239208, "link": "https://stackoverflow.com/questions/43239208/how-to-design-proper-release-of-a-boostasio-socket-or-wrapper-thereof/43243314#43243314", "title": "How to design proper release of a boost::asio socket or wrapper thereof", "body": "<p>Like I said, I fail to see how using smart pointers is \"cheating, and cheating big\". I also do not think your assessment that \"they do this for brevity\" holds water.</p>\n\n<hr>\n\n<p>Here's a slightly redacted excerpt\u00b9 from our code base that exemplifies how using shared_ptrs doesn't preclude tracking connections. </p>\n\n<p>It shows just the server side of things, with</p>\n\n<ul>\n<li><p>a very simple <code>connection</code> object in connection.hpp; this uses the <code>enable_shared_from_this</code></p></li>\n<li><p>just the fixed size <code>connection_pool</code> (we have dynamically resizing pools too, hence the locking primitives). Note how we can do actions on all active connections.</p>\n\n<p>So you'd trivially write something like this to write to all clients, like on a timer:</p>\n\n<pre><code>_pool.for_each_active([] (auto const&amp; conn) {\n    send_message(conn, hello_world_packet);\n});\n</code></pre></li>\n<li><p>a sample <code>listener</code> that shows how it ties in with the <code>connection_pool</code> (which has a sample method to close all connections)</p></li>\n</ul>\n\n<h2>Code Listings</h2>\n\n<ul>\n<li><p>connection.hpp</p>\n\n<pre><code>#pragma once\n\n#include \"xxx/net/rpc/protocol.hpp\"\n#include \"log.hpp\"\n#include \"stats_filer.hpp\"\n#include &lt;memory&gt;\n\nnamespace xxx { namespace net { namespace rpc {\n\n    struct connection : std::enable_shared_from_this&lt;connection&gt;, protected LogSource {\n        typedef std::shared_ptr&lt;connection&gt; ptr;\n\n      private:\n        friend struct io;\n        friend struct listener;\n\n        boost::asio::io_service&amp; _svc;\n        protocol::socket _socket;\n        protocol::endpoint _ep;\n        protocol::endpoint _peer;\n      public:\n\n        connection(boost::asio::io_service&amp; svc, protocol::endpoint ep)\n            : LogSource(\"rpc::connection\"),\n              _svc(svc),\n              _socket(svc),\n              _ep(ep)\n        {}\n\n        void init() {\n            _socket.set_option(protocol::no_delay(true));\n            _peer = _socket.remote_endpoint();\n            g_stats_filer_p-&gt;inc_value(\"asio.\" + _ep.address().to_string() + \".sockets_accepted\");\n            debug() &lt;&lt; \"New connection from \" &lt;&lt; _peer;\n        }\n\n        protocol::endpoint endpoint() const { return _ep;     } \n        protocol::endpoint peer() const     { return _peer;   } \n        protocol::socket&amp;  socket()         { return _socket; } \n\n        // TODO encapsulation\n        int handle() {\n            return _socket.native_handle();\n        }\n\n        bool valid() const { return _socket.is_open(); }\n\n        void cancel() {\n            _svc.post([this] { _socket.cancel(); }); \n        }\n\n        using shutdown_type = boost::asio::ip::tcp::socket::shutdown_type;\n        void shutdown(shutdown_type what = shutdown_type::shutdown_both) {\n            _svc.post([=] { _socket.shutdown(what); }); \n        }\n\n        ~connection() {\n            g_stats_filer_p-&gt;inc_value(\"asio.\" + _ep.address().to_string() + \".sockets_disconnected\");\n        }\n    };\n\n} } }\n</code></pre></li>\n<li><p>connection_pool.hpp</p>\n\n<pre><code>#pragma once\n\n#include &lt;mutex&gt;\n#include \"xxx/threads/null_mutex.hpp\"\n#include \"xxx/net/rpc/connection.hpp\"\n#include \"stats_filer.hpp\"\n#include \"log.hpp\"\n\nnamespace xxx { namespace net { namespace rpc {\n\n    // not thread-safe by default, but pass e.g. std::mutex for `Mutex` if you need it\n    template &lt;typename Ptr = xxx::net::rpc::connection::ptr, typename Mutex = xxx::threads::null_mutex&gt;\n    struct basic_connection_pool : LogSource {\n        using WeakPtr = std::weak_ptr&lt;typename Ptr::element_type&gt;;\n\n        basic_connection_pool(std::string name = \"connection_pool\", size_t size)\n            : LogSource(std::move(name)), _pool(size) \n        { }\n\n        bool try_insert(Ptr const&amp; conn) {\n            std::lock_guard&lt;Mutex&gt; lk(_mx);\n\n            auto slot = std::find_if(_pool.begin(), _pool.end(), std::mem_fn(&amp;WeakPtr::expired));\n\n            if (slot == _pool.end()) {\n                g_stats_filer_p-&gt;inc_value(\"asio.\" + conn-&gt;endpoint().address().to_string() + \".connections_dropped\");\n                error() &lt;&lt; \"dropping connection from \" &lt;&lt; conn-&gt;peer() &lt;&lt; \": connection pool (\" &lt;&lt; _pool.size() &lt;&lt; \") saturated\";\n                return false;\n            }\n\n            *slot = conn;\n            return true;\n        }\n\n        template &lt;typename F&gt;\n        void for_each_active(F action) {\n            auto locked = [=] {\n                using namespace std;\n                lock_guard&lt;Mutex&gt; lk(_mx);\n                vector&lt;Ptr&gt; locked(_pool.size());\n                transform(_pool.begin(), _pool.end(), locked.begin(), mem_fn(&amp;WeakPtr::lock));\n                return locked;\n            }();\n\n            for (auto const&amp; p : locked)\n                if (p) action(p);\n        }\n\n        constexpr static bool synchronizing() {\n            return not std::is_same&lt;xxx::threads::null_mutex, Mutex&gt;();\n        }\n\n      private:\n        void dump_stats(LogSource::LogTx tx) const {\n            // lock is assumed!\n            size_t empty = 0, busy = 0, idle = 0;\n\n            for (auto&amp; p : _pool) {\n                switch (p.use_count()) {\n                    case 0:  empty++; break;\n                    case 1:  idle++;  break;\n                    default: busy++;  break;\n                }\n            }\n\n            tx &lt;&lt; \"usage empty:\" &lt;&lt; empty &lt;&lt; \" busy:\" &lt;&lt; busy &lt;&lt; \" idle:\" &lt;&lt; idle;\n        }\n\n        Mutex _mx;\n        std::vector&lt;WeakPtr&gt; _pool;\n    };\n\n    // TODO FIXME use null_mutex once growing is no longer required AND if\n    // en-pooling still only happens from the single IO thread (XXX-2535)\n    using server_connection_pool = basic_connection_pool&lt;xxx::net::rpc::connection::ptr, std::mutex&gt;;\n\n} } }\n</code></pre></li>\n<li><p>listener.hpp</p>\n\n<pre><code>#pragma once\n\n#include \"xxx/threads/null_mutex.hpp\"\n#include &lt;mutex&gt;\n#include \"xxx/net/rpc/connection_pool.hpp\"\n#include \"xxx/net/rpc/io_operations.hpp\"\n\nnamespace xxx { namespace net { namespace rpc {\n\n    struct listener : std::enable_shared_from_this&lt;listener&gt;, LogSource {\n        typedef std::shared_ptr&lt;listener&gt; ptr;\n\n        protocol::acceptor _acceptor;\n        protocol::endpoint _ep;\n\n        listener(boost::asio::io_service&amp; svc, protocol::endpoint ep, server_connection_pool&amp; pool) \n            : LogSource(\"rpc::listener\"), _acceptor(svc), _ep(ep), _pool(pool)\n        {\n            _acceptor.open(ep.protocol());\n\n            _acceptor.set_option(protocol::acceptor::reuse_address(true));\n            _acceptor.set_option(protocol::no_delay(true));\n            ::fcntl(_acceptor.native(), F_SETFD, FD_CLOEXEC); // FIXME use non-racy socket factory?\n            _acceptor.bind(ep);\n\n            _acceptor.listen(32);\n        }\n\n        void accept_loop(std::function&lt;void(connection::ptr conn)&gt; on_accept) {\n\n            auto self = shared_from_this();\n            auto conn = std::make_shared&lt;xxx::net::rpc::connection&gt;(_acceptor.get_io_service(), _ep);\n\n            _acceptor.async_accept(conn-&gt;_socket, [this,self,conn,on_accept](boost::system::error_code ec) {\n                if (ec) {\n                    auto tx = ec == boost::asio::error::operation_aborted? debug() : warn();\n                    tx &lt;&lt; \"failed accept \" &lt;&lt; ec.message();\n                } else {\n                    ::fcntl(conn-&gt;_socket.native(), F_SETFD, FD_CLOEXEC); // FIXME use non-racy socket factory?\n\n                    if (_pool.try_insert(conn)) {\n                        on_accept(conn);\n                    }\n\n                    self-&gt;accept_loop(on_accept);\n                }\n            });\n        }\n\n        void close() {\n            _acceptor.cancel();\n            _acceptor.close();\n\n            _acceptor.get_io_service().post([=] {\n                _pool.for_each_active([] (auto const&amp; sp) {\n                    sp-&gt;shutdown(connection::shutdown_type::shutdown_both);\n                    sp-&gt;cancel();\n                });\n            });\n\n            debug() &lt;&lt; \"shutdown\";\n        }\n\n        ~listener() {\n        }\n\n      private:\n        server_connection_pool&amp; _pool;\n    };\n\n} } }\n</code></pre></li>\n</ul>\n\n<p>\u00b9 download as gist <a href=\"https://gist.github.com/sehe/979af25b8ac4fd77e73cdf1da37ab4c2\" rel=\"nofollow noreferrer\">https://gist.github.com/sehe/979af25b8ac4fd77e73cdf1da37ab4c2</a></p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491463632, "post_id": 43248088, "comment_id": 73566114, "body": "Mmm. If the solution is only for single-threaded, a weak_ptr completely fails to add anything a raw pointer. Most importantly, it&#39;s Undefined Behaviour if the lifetime actually ended. I can&#39;t condone this idea."}, {"owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491467889, "post_id": 43248088, "comment_id": 73568851, "body": "@sehe I think that you have misunderstood my answer. The solution is certainly <b>not</b> only for single threaded solutions. It works with multiple connections handled by multiple threads whilst enabling a server to control the lifetime of the connections."}], "tags": [], "owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "is_accepted": false, "score": 1, "last_activity_date": 1491462537, "last_edit_date": 1495540444, "creation_date": 1491462537, "answer_id": 43248088, "question_id": 43239208, "link": "https://stackoverflow.com/questions/43239208/how-to-design-proper-release-of-a-boostasio-socket-or-wrapper-thereof/43248088#43248088", "title": "How to design proper release of a boost::asio socket or wrapper thereof", "body": "<p>Connection lifetime is a fundamental issue with <code>boost::asio</code>. Speaking from experience, I can assure you that getting it wrong causes \"undefined behaviour\"...</p>\n\n<p>The <code>asio</code> examples use <code>shared_ptr</code> to ensure that a connection is kept alive whilst it may have outstanding handlers in an <code>asio::io_service</code>. Note that even in a single thread, an <code>asio::io_service</code> runs asynchronously to the application code, see <a href=\"https://www.youtube.com/watch?v=rwOv_tw2eA4&amp;t=2009s\" rel=\"nofollow noreferrer\">CppCon 2016: Michael Caisse \"Asynchronous IO with Boost.Asio\"</a> for an excellent description of the precise mechanism.</p>\n\n<p>A <code>shared_ptr</code> enables the lifetime of a connection to be controlled by the <code>shared_ptr</code> instance count. IMHO it's not \"cheating and cheating big\"; but an elegant solution to complicated problem. </p>\n\n<p>However, I agree with you that just using <code>shared_ptr</code>'s to control connection lifetimes is not a complete solution since it can lead to resource leaks.</p>\n\n<p>In my answer here: <a href=\"https://stackoverflow.com/questions/11356742/boost-async-functions-and-shared-ptrs/19622084#19622084\">Boost async_* functions and shared_ptr's</a>, I proposed using a combination of <code>shared_ptr</code> and <code>weak_ptr</code> to manage connection lifetimes. An HTTP server using a combination of <code>shared_ptr</code>'s and <code>weak_ptr</code>'s can be found here: <a href=\"https://github.com/kenba/via-httplib\" rel=\"nofollow noreferrer\">via-httplib</a>.</p>\n\n<p>The HTTP server is built upon an asynchronous TCP server which uses a collection of (<code>shared_ptr</code>'s to) connections, created on connects and destroyed on disconnects as you propose.</p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1491519966, "post_id": 43258550, "comment_id": 73602862, "body": "Thanks for sharing the info you gathered back on this site. +1"}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": true, "score": 3, "last_activity_date": 1491490069, "creation_date": 1491490069, "answer_id": 43258550, "question_id": 43239208, "link": "https://stackoverflow.com/questions/43239208/how-to-design-proper-release-of-a-boostasio-socket-or-wrapper-thereof/43258550#43258550", "title": "How to design proper release of a boost::asio socket or wrapper thereof", "body": "<p>While others have answered similarly to the second half of this answer, it seems the most complete answer I can find, came from asking the same question on the Boost Mailing list.</p>\n\n<p><a href=\"http://boost.2283326.n4.nabble.com/How-to-design-proper-release-of-a-boost-asio-socket-or-wrapper-thereof-td4693442.html\" rel=\"nofollow noreferrer\">http://boost.2283326.n4.nabble.com/How-to-design-proper-release-of-a-boost-asio-socket-or-wrapper-thereof-td4693442.html</a></p>\n\n<p>I will summarize here in order to assist those that arrive here from a search in the future.</p>\n\n<p>There are 2 options</p>\n\n<p>1) Close the socket in order to cancel any outstanding io and then post a callback for the post-disconnection logic on the io_service and let the server class be called back when the socket has been disconnected. It can then safely release the connection. As long as there was only one thread that had called io_service::run, then other asynchronous operations will have been already been resolved when the callback is made. However, if there are multiple threads that had called io_service::run, then this is not safe.</p>\n\n<p>2) As others have been pointing out in their answers, using the shared_ptr to manage to connections lifetime, using outstanding io operations to keep them alive, is viable. We can use a collection weak_ptr to the connections in order to access them if we need to. The latter is the tidbit that had been omitted from other posts on the topic which confused me.</p>\n"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 2, "accepted_answer_id": 43258550, "answer_count": 4, "score": 6, "last_activity_date": 1491490268, "creation_date": 1491417710, "last_edit_date": 1495541423, "question_id": 43239208, "link": "https://stackoverflow.com/questions/43239208/how-to-design-proper-release-of-a-boostasio-socket-or-wrapper-thereof", "title": "How to design proper release of a boost::asio socket or wrapper thereof", "body": "<p>I am making a few attempts at making my own simple asynch TCP server using boost::asio after not having touched it for several years.</p>\n\n<p>The latest example listing I can find is:\n<a href=\"http://www.boost.org/doc/libs/1_54_0/doc/html/boost_asio/tutorial/tutdaytime3/src.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_54_0/doc/html/boost_asio/tutorial/tutdaytime3/src.html</a></p>\n\n<p>The problem I have with this example listing is that (I feel) it cheats and it cheats big, by making the tcp_connection a shared_ptr, such that it doesn't worry about the lifetime management of each connection. (I think) They do this for brevity, since it is a small tutorial, but that solution is not real world.</p>\n\n<p>What if you wanted to send a message to each client on a timer, or something similar? A collection of client connections is going to be necessary in any real world non-trivial server.</p>\n\n<p>I am worried about the lifetime management of each connection. I figure the natural thing to do would be to keep some collection of tcp_connection objects or pointers to them inside tcp_server. Adding to that collection from the OnConnect callback and removing from that collection OnDisconnect.</p>\n\n<p>Note that OnDisconnect would most likely be called from an actual Disconnect method, which in turn would be called from OnReceive callback or OnSend callback, in the case of an error.</p>\n\n<p>Well, therein lies the problem.</p>\n\n<p>Consider we'd have a callstack that looked something like this:</p>\n\n<pre><code>tcp_connection::~tcp_connection\ntcp_server::OnDisconnect\ntcp_connection::OnDisconnect\ntcp_connection::Disconnect\ntcp_connection::OnReceive\n</code></pre>\n\n<p>This would cause errors as the call stack unwinds and we are executing code in a object that has had its destructor called...I think, right?</p>\n\n<p>I imagine everyone doing server programming comes across this scenario in some fashion. What is a strategy for handling it?</p>\n\n<p>I hope the explanation is good enough to follow. If not let me know and I will create my own source listing, but it will be very large.</p>\n\n<hr>\n\n<p>Edit:\nRelated </p>\n\n<p>) <a href=\"https://stackoverflow.com/questions/24530771/memory-management-in-asynchronous-c-code\">Memory management in asynchronous C++ code</a> </p>\n\n<p>IMO not an acceptable answer, relies on cheating with shared_ptr outstanding on receive calls and nothing more, and is not real world. what if the server wanted to say \"Hi\" to all clients every 5 minutes. A collection of some kind is necessary. What if you are calling io_service.run on multiple threads?</p>\n\n<p>I am also asking on the boost mailing list:\n<a href=\"http://boost.2283326.n4.nabble.com/How-to-design-proper-release-of-a-boost-asio-socket-or-wrapper-thereof-td4693442.html\" rel=\"nofollow noreferrer\">http://boost.2283326.n4.nabble.com/How-to-design-proper-release-of-a-boost-asio-socket-or-wrapper-thereof-td4693442.html</a></p>\n"}, {"tags": ["c++", "opencv", "matrix"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1491420404, "post_id": 43239129, "comment_id": 73550058, "body": "should be nearly the fastest way, you could extract (introduce cariables) fx fy cx and cy from the mat and reduce function calls that way. And you could use row-pointers for the points, which is a little bit more efficient than .at function"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1491420471, "post_id": 43239129, "comment_id": 73550088, "body": "NO, you are iterating over cols in outer and rows in inner loop. Do it the other way around and it will be much more efficient! (row major order!!)"}], "answers": [{"tags": [], "owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "is_accepted": true, "score": 2, "last_activity_date": 1491633838, "creation_date": 1491633838, "answer_id": 43291037, "question_id": 43239129, "link": "https://stackoverflow.com/questions/43239129/opencv-how-to-efficiently-multiply-each-element-of-a-mat2d-matrix-by-a-mat1d-ma/43291037#43291037", "title": "OpenCV: How to Efficiently Multiply Each Element of a Mat2d matrix by a Mat1d matrix", "body": "<p>OpenCV <a href=\"http://docs.opencv.org/2.4/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html\" rel=\"nofollow noreferrer\">Documentation</a> has already detailed various methods of iterating the <code>cv::Mat</code> efficiently, Out of the presented methods, the most efficient way is to use <code>cv::LUT()</code>, but from the context of this question, I guess the range of input matrix values is not fixed, so a look-up table can't be created, It is very helpful in case of <code>RGB</code> images, because we  know beforehand that min value would be <code>0</code> and max value would be <code>255</code>, so we can easily create a lookUp table, but in this problem, we need to multiply two matrices which I assume are not images so we would go with <a href=\"http://docs.opencv.org/2.4/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html#the-efficient-way\" rel=\"nofollow noreferrer\">The efficient way</a>.</p>\n\n<pre><code>int cameraMatrix[] = {2, 0, 10, 0, 4, 20, 0, 0, 1};\ncv::Mat mat(2, 2, CV_32FC2, cv::Scalar(100, 20));\ncv::Size contSize = mat.size();\n\n// Calculate the length of array if the input matrix was flatten, in case of continuous matrix only.\nif (mat.isContinuous()) {\n    contSize.width *= contSize.height;\n    contSize.height = 1;\n}\n\ncv::Vec2f* ptr;\nfor (int i = 0; i &lt; contSize.height; ++i)\n{\n    ptr = mat.ptr&lt;cv::Vec2f&gt;(i);\n    for (int j = 0; j &lt; contSize.width; ++j)\n    {\n        ptr[j] = cv::Vec2f(ptr[j].val[0]*cameraMatrix[0] + cameraMatrix[2], ptr[j].val[1] * cameraMatrix[4] + cameraMatrix[5]);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1875, "user_id": 6651650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0of17.png?s=128&g=1", "display_name": "Paul Wintz", "link": "https://stackoverflow.com/users/6651650/paul-wintz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 43291037, "answer_count": 1, "score": 2, "last_activity_date": 1491633838, "creation_date": 1491417443, "last_edit_date": 1491422257, "question_id": 43239129, "link": "https://stackoverflow.com/questions/43239129/opencv-how-to-efficiently-multiply-each-element-of-a-mat2d-matrix-by-a-mat1d-ma", "title": "OpenCV: How to Efficiently Multiply Each Element of a Mat2d matrix by a Mat1d matrix", "body": "<p>I have a Mat2d matrix, where each element is a 2D vector. For example:</p>\n\n<pre><code>[[x0, y0], [x1, y1]\n [x2, y2], [x3, y3]]\n</code></pre>\n\n<p>I want to left multiply each of these vectors by a Mat1d camera matrix: </p>\n\n<pre><code>[fx, 0,  cx, \n 0,  fy, cy, \n 0,  0,  1]\n</code></pre>\n\n<p>(Each vector represents the location of a vertex in a grid which I want to convert from the camera space to the pixel space.)</p>\n\n<p>The resulting matrix, for this example, would be:</p>\n\n<pre><code>[[x0 * fx + cx, y0 * fy + cy], [x1 * fx + cx, y1 * fy + cy]\n [x2 * fx + cx, y2 * fy + cy], [x3 * fx + cx, y3 * fy + cy]]\n</code></pre>\n\n<p>What is the most straightforward and efficient way to accomplish this?</p>\n\n<hr>\n\n<p>Here is my current approach:</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Mat2d points = getMesh();\nMat1d cameraMtrx = getCameraMtrx();\n\nfor(int col = 0; col &lt; points.cols; col++){\n    for(int row = 0; row &lt; points.rows; row++){\n        points.at&lt;Vec2d&gt;(row, col).val[0] = points.at&lt;Vec2d&gt;(row, col)[0] * cameraMtrx.at&lt;double&gt;(0, 0) + cameraMtrx.at&lt;double&gt;(0, 2);\n        points.at&lt;Vec2d&gt;(row, col).val[1] = points.at&lt;Vec2d&gt;(row, col)[1] * cameraMtrx.at&lt;double&gt;(1, 1) + cameraMtrx.at&lt;double&gt;(1, 2);\n    }\n}\n</code></pre>\n\n\n"}, {"tags": ["c++", "qt-creator", "sdl-2"], "comments": [{"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1491420833, "post_id": 43239103, "comment_id": 73550315, "body": "What happens if you double-click on <code>C:\\...\\sdl_test\\debug\\sdl_test.exe</code> in Explorer? What happens if you run <code>C:\\...\\sdl_test\\debug\\sdl_test.exe</code> from <code>cmd</code>?"}, {"owner": {"reputation": 1, "user_id": 7822477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f465c7545122efff4bc9dd4ace429857?s=128&d=identicon&r=PG&f=1", "display_name": "Borjee", "link": "https://stackoverflow.com/users/7822477/borjee"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1491502745, "post_id": 43239103, "comment_id": 73594315, "body": "If I double click on the sdl_test.exe: &quot;This operating system is not supported by this application&quot; Same thing if I try to run from cmd. I am running a 64-bit OS."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1491521261, "post_id": 43239103, "comment_id": 73603259, "body": "Just a crazy idea - are you sure the compiler you are using produces the binaries for Windows? Maybe it&#39;s a Linux cross-compiler. If you have <code>file</code> utility in your <code>MinGW</code>, can you run <code>file sdl_test.exe</code> and see what it will print?"}, {"owner": {"reputation": 1, "user_id": 7822477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f465c7545122efff4bc9dd4ace429857?s=128&d=identicon&r=PG&f=1", "display_name": "Borjee", "link": "https://stackoverflow.com/users/7822477/borjee"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1491591842, "post_id": 43239103, "comment_id": 73638896, "body": "Alright so I checked that there is a <code>file</code> utility in MSYS at <code>C:\\MinGW\\msys\\1.0</code>. I can run the msys.bat file but once the terminal opens there is nothing to be found with <code>dir</code>. As in, I tried <code>file &lt;path&gt;&#47;sdl_test.exe</code> but it can&#39;t find it. I assume I have some sort of fundamental issue that is so obvious that I can&#39;t find an answer to it. I&#39;ll write back if I manage to solve this. @Paul EDIT: How couldn&#39;t I see this sooner? So I moved the exe file so that msys can see it and running <code>file sdl_test.exe</code> gives this: <code>PE32 executable for MS Windows (DLL) (console) Intel 80386 32-bit</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7822477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f465c7545122efff4bc9dd4ace429857?s=128&d=identicon&r=PG&f=1", "display_name": "Borjee", "link": "https://stackoverflow.com/users/7822477/borjee"}, "edited": false, "score": 0, "creation_date": 1491504380, "post_id": 43239995, "comment_id": 73595263, "body": "Thanks for the reply! 1. I am running a 64 bit system, shouldn&#39;t it be able to handle the 32? 2. I ran sfc /scannnow and it ended with no integrity violations found 3. I&#39;m not sure if this is happening so I added my .pro file to the original post. I also added the -lmingw32 flag to both LIBS"}], "tags": [], "owner": {"reputation": 2045, "user_id": 1077785, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/7131b485716736485a3d7a2e13846786?s=128&d=identicon&r=PG", "display_name": "Tomaz Canabrava", "link": "https://stackoverflow.com/users/1077785/tomaz-canabrava"}, "is_accepted": false, "score": 0, "last_activity_date": 1491420447, "creation_date": 1491420447, "answer_id": 43239995, "question_id": 43239103, "link": "https://stackoverflow.com/questions/43239103/cant-run-sdl2-project-cannot-execute-1-not-a-valid-win32-application/43239995#43239995", "title": "Can&#39;t run SDL2 project, &quot;Cannot execute &quot;&quot;: %1 Not a valid Win32-application&quot;", "body": "<p>The code you are showing to us works for Linux and any sane system :)</p>\n\n<p>There could be a few issues for your problem:</p>\n\n<p>1 - you are trying to run a 64 bit application in a 32 bit system</p>\n\n<p>2 - your dll's could be corrupt</p>\n\n<p>3 - your SDL dll's could be compiled with Microsoft Visual Studio (and you would need to get dll's generated with MinGW)</p>\n\n<p>also, you should pass a few flags to the compiler, since you told us that you are using Qt Creator, possibly you have a projectname.pro file or a CMakeLists.txt </p>\n\n<p>discover what you have, and pass those flags to the compiler:</p>\n\n<p>-Wl,-subsystem,windows </p>\n\n<p>and link against those libraries</p>\n\n<p>-lmingw32 -lSDL2main -lSDL2</p>\n"}], "owner": {"reputation": 1, "user_id": 7822477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f465c7545122efff4bc9dd4ace429857?s=128&d=identicon&r=PG&f=1", "display_name": "Borjee", "link": "https://stackoverflow.com/users/7822477/borjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491504028, "creation_date": 1491417363, "last_edit_date": 1491504028, "question_id": 43239103, "link": "https://stackoverflow.com/questions/43239103/cant-run-sdl2-project-cannot-execute-1-not-a-valid-win32-application", "title": "Can&#39;t run SDL2 project, &quot;Cannot execute &quot;&quot;: %1 Not a valid Win32-application&quot;", "body": "<p>I'm trying to teach myself how to use SDL2 with Qt Creator but keep getting into these \"just let me code\" situations. Currently, I'm just trying to open a window with a green picture on it (doing a tutorial) but I get this error:</p>\n\n<pre><code>Cannot execute \"\": %1 not a valid Win32-application\n</code></pre>\n\n<p>I'm using MinGw 5.3.0 32bit2 as the compiler and I've managed to run other projects without this error. I tried tinkering with the Build and Run configurations, but haven't had any luck. Currently my (essential) Run configurations look like this:</p>\n\n<pre><code>Executable C:\\...\\sdl_test\\debug\\sdl_test.exe\nWorking directory: C:\\...\\sdl_test\n</code></pre>\n\n<p>Also for reference, here's main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;SDL2/SDL.h&gt;\n#include &lt;SDL2/SDL_image.h&gt;\n\nusing namespace std;\n\n\n\nint main()\n{\n    bool quit = false;\n    SDL_Init(SDL_INIT_VIDEO);\n    SDL_Window* window = nullptr;\n    window = SDL_CreateWindow(\"MVP\", 100, 100, 600, 400,\n                              SDL_WINDOW_SHOWN);\n\n    if(window == nullptr){\n        cout &lt;&lt; \"Window could not be created.\" &lt;&lt; endl;\n        return 0;\n    }\n\n    SDL_Renderer* renderer = nullptr;\n    renderer = SDL_CreateRenderer(window, -1,\n                                  SDL_RENDERER_ACCELERATED);\n    SDL_Event* mainEvent = new SDL_Event();\n\n    SDL_Texture* grass_image = NULL;\n    grass_image = IMG_LoadTexture(renderer, \"grass.bmp\");\n\n    SDL_Rect grass_rect;\n    grass_rect.x = 10;\n    grass_rect.y = 50;\n    grass_rect.w = 250;\n    grass_rect.h = 250;\n\n    while(!quit &amp;&amp; mainEvent-&gt;type != SDL_QUIT){\n        SDL_PollEvent(mainEvent);\n        SDL_RenderClear(renderer);\n\n        SDL_RenderCopy(renderer, grass_image, NULL, &amp;grass_rect);\n\n        SDL_RenderPresent(renderer);\n    }\n    SDL_DestroyWindow(window);\n    SDL_DestroyRenderer(renderer);\n    delete mainEvent;\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Feeling hopeless, since I just want to open a window with a green rectangle on it... is that too much to ask?!</p>\n\n<p>EDIT:\nHere's my .pro file</p>\n\n<pre><code>TEMPLATE = app\nCONFIG += console c++11\nCONFIG -= app_bundle\nCONFIG -= qt\nSOURCES += main.cpp\n\n\nwin32: LIBS += -L$$PWD/../../../../SDL2-2.0.5/i686-w64-mingw32/lib/ -lmingw32 -lSDL2main -lSDL2\n\nINCLUDEPATH += $$PWD/../../../../SDL2-2.0.5/i686-w64-mingw32/include\nDEPENDPATH += $$PWD/../../../../SDL2-2.0.5/i686-w64-mingw32/include\n\nwin32: LIBS += -L$$PWD/../../../../SDL2_image-2.0.1/i686-w64-mingw32/lib/ -lmingw32 -lSDL2_image\n\nINCLUDEPATH += $$PWD/../../../../SDL2_image-2.0.1/i686-w64-mingw32/include\nDEPENDPATH += $$PWD/../../../../SDL2_image-2.0.1/i686-w64-mingw32/include\n\nwin32:QMAKE_LFLAGS += -shared\n</code></pre>\n"}, {"tags": ["c++", "vector", "boost"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1491417200, "post_id": 43239008, "comment_id": 73548172, "body": "Add more detail. &quot;I am having trouble with the get_all function and how to return the vector correctly&quot; - what problem(s) <i>specifically</i>? What have you tried? What results did you get? What did you expect instead? Also, rather than &quot;... main function&quot; you should form your question in the form of a <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a> so that other people can test and reproduce your results/problems."}, {"owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1491417330, "post_id": 43239008, "comment_id": 73548256, "body": "I&#39;m getting error: no match for &#39;operator*&#39; (operand type is &#39;std::vector&lt;boost::filesystem::path&gt;&#39;) return * ret"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491417583, "post_id": 43239008, "comment_id": 73548407, "body": "Why are you returning with <code>return *ret</code> in the middle of your <code>while</code> loop"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491417686, "post_id": 43239008, "comment_id": 73548461, "body": "I think if you move the <code>return</code> statement outside of the while loop you should be fine."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491417830, "post_id": 43239008, "comment_id": 73548549, "body": "Also the variable <code>ret</code> needs to be a <code>vector&lt;string&gt;</code> and shouldn&#39;t be passed in if you&#39;re returning it, if you&#39;re returning it create it in your code like such <code>vector&lt;string&gt; ret;</code> otherwise change the parameter of the function to <code>vector&lt;string&gt;&amp; ret){</code>"}, {"owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491417835, "post_id": 43239008, "comment_id": 73548552, "body": "@chbchb55 still getting the same error. In addition I&#39;m getting this error : error: conversion from \u2018std::vector&lt;std::basic_string&lt;char&gt; &gt;\u2019 to non-scalar type \u2018std::vector&lt;boost::filesystem::path&gt;\u2019 requested         vector&lt;boost::filesystem::path&gt; VolumeVec = get_all(boost::filesystem::path(string(argv[2])), string(&quot;.vol&quot;), retVec);                                                                                                                                          ^"}, {"owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "edited": false, "score": 0, "creation_date": 1491417879, "post_id": 43239008, "comment_id": 73548586, "body": "ill try what you just suggested and see what happens"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491418118, "post_id": 43239008, "comment_id": 73548717, "body": "Actually if the code <code>it-&gt;path().filename()</code> returns a <code>boost::filesystem::path</code> then your return statement just has to be the same or if you would like to keep the parameter to pass in a vector just change the return statement to void"}, {"owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "edited": false, "score": 0, "creation_date": 1491418690, "post_id": 43239008, "comment_id": 73549068, "body": "I don&#39;t care to pass in a vector, I just want to return a vector with the filenames so the former option would be what I&#39;m looking for. I removed the vector from the function definition and just put it in the function. When I try to return <code>it-&gt;path().filename()</code> I get error: could not convert boost::filesystem::path::filename() const()&#39; from &#39;boost::filesystem::path&#39; to &#39;std::vector&lt;std::basic_string&lt;char&gt; &gt;&#39;"}, {"owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "edited": false, "score": 1, "creation_date": 1491418806, "post_id": 43239008, "comment_id": 73549138, "body": "Wait, I think I just need to change my function defintion from a vector&lt;string&gt; to a vector &lt;boost::filesystem::path&gt;"}, {"owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1491421444, "post_id": 43239008, "comment_id": 73550667, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/140010/discussion-between-user2007843-and-chbchb55\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1491423064, "creation_date": 1491423064, "answer_id": 43240745, "question_id": 43239008, "link": "https://stackoverflow.com/questions/43239008/get-list-of-files-with-same-extension-and-process-them/43240745#43240745", "title": "Get list of files with same extension and process them", "body": "<p>Change return statement to <code>vector&lt;boost::filesystem::path&gt;</code> and remove <code>ret</code> from the parameters for the function and instead create <code>ret</code> in the function like so:</p>\n\n<pre><code>vector&lt;boost::filesystem::path&gt; ret;\n</code></pre>\n\n<p>Then you'll want to move the return statement of ret, <code>return ret;</code>, below the <code>while</code> loop so it appends all of the file names to <code>ret</code>.</p>\n\n<p>Your code will look something like this:</p>\n\n<pre><code>vector&lt;boost::filesystem::path&gt; get_all(const boost::filesystem::path&amp; root, const string&amp; ext){\n    if(!boost::filesystem::exists(root) || !boost::filesystem::is_directory(root)) return;\n\n    boost::filesystem::recursive_directory_iterator it(root);\n    boost::filesystem::recursive_directory_iterator endit;\n    vector&lt;boost::filesystem::path&gt; ret;\n    while(it != endit)\n    {\n        if(boost::filesystem::is_regular_file(*it) &amp;&amp; it-&gt;path().extension() == ext) ret.push_back(it-&gt;path().filename());\n        ++it;\n        cout &lt;&lt; *it &lt;&lt; endl; \n    }\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 2007843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/eb1e32c61d2047d1b4e8c3cdac6d9cb4?s=128&d=identicon&r=PG", "display_name": "user2007843", "link": "https://stackoverflow.com/users/2007843/user2007843"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 43240745, "answer_count": 1, "score": 0, "last_activity_date": 1491423064, "creation_date": 1491417058, "last_edit_date": 1495540465, "question_id": 43239008, "link": "https://stackoverflow.com/questions/43239008/get-list-of-files-with-same-extension-and-process-them", "title": "Get list of files with same extension and process them", "body": "<p>I'm having trouble implementing the top answer here: <a href=\"https://stackoverflow.com/questions/11140483/how-to-get-list-of-files-with-a-specific-extension-in-a-given-folder\">How to get list of files with a specific extension in a given folder</a></p>\n\n<p>I am attempting to get all of the \".vol\" files in the directory argv[2] and do  some batch processing with each file that I find. I want to pass each file to the ParseFile function which takes a string as an argument.</p>\n\n<pre><code>// return the filenames of all files that have the specified extension\n// in the specified directory and all subdirectories\nvector&lt;string&gt; get_all(const boost::filesystem::path&amp; root, const string&amp; ext, vector&lt;boost::filesystem::path&gt;&amp; ret){\n    if(!boost::filesystem::exists(root) || !boost::filesystem::is_directory(root)) return vector&lt;string&gt;();\n\n    boost::filesystem::recursive_directory_iterator it(root);\n    boost::filesystem::recursive_directory_iterator endit;\n\n    while(it != endit)\n    {\n        if(boost::filesystem::is_regular_file(*it) &amp;&amp; it-&gt;path().extension() == ext) ret.push_back(it-&gt;path().filename());\n        ++it;\n        cout &lt;&lt; *it &lt;&lt; endl; \n        return *ret;   // errors here\n    }\n}\n\n\n\n... main function\n\n\nif (batch) {\n   vector&lt;boost::filesystem::path&gt; retVec;\n   vector&lt;boost::filesystem::path&gt; volumeVec = get_all(boost::filesystem::path(string(argv[2])), string(\".vol\"), retVec);\n\n\n// convert volume files in volumeVec to strings and pass to ParseFile\n   ParseFile(volumeFileStrings);\n\n}\n</code></pre>\n\n<p>I am having trouble with the get_all function and how to return the vector correctly.</p>\n"}, {"tags": ["c++", "string", "algorithm", "boyer-moore", "quick-search"], "owner": {"reputation": 21, "user_id": 7658424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ac5480d77e4698c5ac30f2fa1c72032a?s=128&d=identicon&r=PG&f=1", "display_name": "JakaStudent7", "link": "https://stackoverflow.com/users/7658424/jakastudent7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491416852, "creation_date": 1491416852, "question_id": 43238938, "link": "https://stackoverflow.com/questions/43238938/boyer-moore-string-search-into-sunday-string-search-quick-string-search-c", "title": "Boyer - Moore string search into Sunday string search (quick string search) c++", "body": "<p>I want to turn my Boyer - Moore algorithm into a Sunday (Quick Search). Currently I have a working version of the Boyer - Moore string search algorithm: </p>\n\n<pre><code>vector &lt;int&gt; table(256);\nfill(table.begin(), table.end(), -1);\n\nfor (int i = 0; i &lt; target_size; i++) {\n    table[(int)target[i]] = i;\n}\n\nint s = 0;\nwhile (s &lt;= (text_size - target_size)) {\n    int j = target_size - 1;\n    while (j &gt;= 0 &amp;&amp; target[j] == text[s + j]) \n        j--;\n\n    if (j &lt; 0) {\n        cout &lt;&lt; s &lt;&lt; endl;\n        s += (s + target_size &lt; text_size) ? text_size- table[text[s + target_size]] : 1;\n    }\n    else\n        s += max(1, j - table[text[s + target_size]]);\n}\n</code></pre>\n\n<p>I have been looking at the following 2 links that explain Sunday (Quick search) algorithm, but I am not exactly sure how to change B-M into Sunday: </p>\n\n<p><a href=\"http://www.iti.fh-flensburg.de/lang/algorithmen/pattern/sundayen.htm\" rel=\"nofollow noreferrer\">http://www.iti.fh-flensburg.de/lang/algorithmen/pattern/sundayen.htm</a></p>\n\n<p><a href=\"http://www-igm.univ-mlv.fr/~lecroq/string/node19.html\" rel=\"nofollow noreferrer\">http://www-igm.univ-mlv.fr/~lecroq/string/node19.html</a></p>\n\n<p>I would appreciate any tips. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1491416415, "post_id": 43238783, "comment_id": 73547716, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1491416528, "post_id": 43238783, "comment_id": 73547787, "body": "@Rakete1111 I don&#39;t believe it is. Or, to be more precise, I think the OP&#39;s problem is perpendicular to the issue described in that question."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1491416709, "post_id": 43238783, "comment_id": 73547902, "body": "@Xirema If the issue is described in that FAQ question, then why isn&#39;t it a duplicate?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1491416895, "post_id": 43238783, "comment_id": 73548009, "body": "@Rakete1111 Because an undefined reference isn&#39;t the OP&#39;s &quot;problem&quot;, it&#39;s a symptom of their real problem. The OP&#39;s problem is that they&#39;re trying to invoke polymorphism in their code, but they aren&#39;t using the correct constructs to represent polymorphic objects in their class structure. Fixing the &quot;undefined reference&quot; problem would not fix their overall problem, it would just change the kind of error they get (probably from a compiler error to a runtime error)."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1491419774, "post_id": 43238783, "comment_id": 73549703, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3065154/undefined-reference-to-vtable\">Undefined reference to vtable</a>"}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1491416450, "post_id": 43238807, "comment_id": 73547732, "body": "I&#39;d appreciate an explanation from the downvoter."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1491416540, "post_id": 43238807, "comment_id": 73547795, "body": "I didn&#39;t down vote, but but your answer is incorrect. the code is slicing and not using virtual dispatch.  Note there are no pointers.  The OPs code looks like it is trying to use virtual calls, but forgotten they need to be pointers."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1491416587, "post_id": 43238807, "comment_id": 73547828, "body": "@RichardCritten His answer is one of the problems with the code."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1491416591, "post_id": 43238807, "comment_id": 73547831, "body": "@RichardCritten The question asks why the code doesn&#39;t compile."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1491416878, "post_id": 43238807, "comment_id": 73548001, "body": "When troubleshooting code you always troubleshoot the first error, in this case the first error deals with <code>tree::inorder()</code> not being implemented, once the function is implemented the rest of the errors go away."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 3, "last_activity_date": 1491416658, "last_edit_date": 1491416658, "creation_date": 1491416390, "answer_id": 43238807, "question_id": 43238783, "link": "https://stackoverflow.com/questions/43238783/what-is-wrong-with-following-c-program/43238807#43238807", "title": "What is wrong with following C++ program?", "body": "<p>You never implemented <code>tree::inorder</code>.</p>\n\n<pre><code>class tree{\npublic:\n    virtual void inorder();\n};\n</code></pre>\n\n<p>Here you claimed there was such a function -- where is its implementation?</p>\n\n<p>Also, this doesn't make sense:</p>\n\n<pre><code>tree leaf1 = non_emp_tree(1, emp_tree(), emp_tree());\n</code></pre>\n\n<p>You're setting a <code>tree</code>'s value equal to a <code>non_emp_tree</code>'s value. That certainly won't do anything useful.</p>\n"}, {"comments": [{"owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 1, "creation_date": 1491417217, "post_id": 43238877, "comment_id": 73548187, "body": "Either <code>{}</code> or <code>= 0;</code> would fix it; given that he&#39;s probably trying to implement polymorphism with <code>tree</code> as an abstract base class, the latter would make more sense."}, {"owner": {"reputation": 435, "user_id": 6738563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cc32c15f340476882f08161c3c41070?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Yadav", "link": "https://stackoverflow.com/users/6738563/mohit-yadav"}, "reply_to_user": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491417372, "post_id": 43238877, "comment_id": 73548280, "body": "yup you are right.Thanks for mentioning that"}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "reply_to_user": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "edited": false, "score": 0, "creation_date": 1491417402, "post_id": 43238877, "comment_id": 73548300, "body": "@Quietust if he defined it with <code>= 0;</code> he would have a new compiler error since the children dont override that function, in order to use the <code>= 0;</code> he would need to mark the child classes with virtual on the inorder function.  He also wouldn&#39;t be able to make an instance of the tree class. So the 3 variables in his main would error."}, {"owner": {"reputation": 237, "user_id": 7798069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yb7lvoA8AcI/AAAAAAAAAAI/AAAAAAAAACc/eX0qDnG9h3k/photo.jpg?sz=128", "display_name": "Quietust", "link": "https://stackoverflow.com/users/7798069/quietust"}, "reply_to_user": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1491417491, "post_id": 43238877, "comment_id": 73548349, "body": "@Eddge good point, overlooked that."}], "tags": [], "owner": {"reputation": 435, "user_id": 6738563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cc32c15f340476882f08161c3c41070?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Yadav", "link": "https://stackoverflow.com/users/6738563/mohit-yadav"}, "is_accepted": false, "score": 1, "last_activity_date": 1491416670, "creation_date": 1491416670, "answer_id": 43238877, "question_id": 43238783, "link": "https://stackoverflow.com/questions/43238783/what-is-wrong-with-following-c-program/43238877#43238877", "title": "What is wrong with following C++ program?", "body": "<p><code>virtual void inorder(){}</code> should be in your tree class you are missing <code>{}</code></p>\n"}, {"tags": [], "owner": {"reputation": 687, "user_id": 7814925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZmKV.jpg?s=128&g=1", "display_name": "gaFF", "link": "https://stackoverflow.com/users/7814925/gaff"}, "is_accepted": false, "score": 0, "last_activity_date": 1491416943, "creation_date": 1491416943, "answer_id": 43238965, "question_id": 43238783, "link": "https://stackoverflow.com/questions/43238783/what-is-wrong-with-following-c-program/43238965#43238965", "title": "What is wrong with following C++ program?", "body": "<p>The \"inorder\" method of class \"tree\" is not implemented, so you get an undefined reference to this method when calling it.</p>\n"}, {"comments": [{"owner": {"reputation": 629, "user_id": 5327962, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5b32f413b4d390ecd3e260189c40be2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5327962/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1491417780, "post_id": 43239137, "comment_id": 73548513, "body": "Above code doesn&#39;t compile, though <code>virtual void inorder() {};</code> compiles and behaves fine. Can you explain?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1491417840, "post_id": 43239137, "comment_id": 73548558, "body": "@Walter You need to add a defaulted <code>virtual</code> destructor to <code>tree</code>, or the cleanup won&#39;t work correctly."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1491417863, "post_id": 43239137, "comment_id": 73548575, "body": "the code <b>does</b> compile, I did it. You presumably are missing the relevant system headers. I&#39;ll add them in edit."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1491417881, "post_id": 43239137, "comment_id": 73548588, "body": "@Xirema good point. I will change the code."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 629, "user_id": 5327962, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5b32f413b4d390ecd3e260189c40be2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5327962/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1491417907, "post_id": 43239137, "comment_id": 73548605, "body": "@AbhishekKumar I was able to compile their code with no changes. <a href=\"http://ideone.com/eeKdkA\" rel=\"nofollow noreferrer\">ideone.com/eeKdkA</a>"}, {"owner": {"reputation": 629, "user_id": 5327962, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5b32f413b4d390ecd3e260189c40be2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5327962/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1491418276, "post_id": 43239137, "comment_id": 73548817, "body": "Yeah, it is compiling. I was doing some mistake. Thanks Still, can someone tell me difference b/w =0; and {}; ?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 629, "user_id": 5327962, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5b32f413b4d390ecd3e260189c40be2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5327962/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1491418524, "post_id": 43239137, "comment_id": 73548962, "body": "@AbhishekKumar <code>=0</code> explicitly tells the compiler &quot;a base object of this type cannot call this method&quot; (which basically implies that you cannot create objects of that type) whereas <code>{}</code> defines an empty body for the function, meaning &quot;a base object can call this method, and the method does nothing&quot; (which implies that you can create objects of that type). My advice is that you <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">find a good C++ book</a> and do some reading, since you may need to review the fundamentals."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1491418052, "last_edit_date": 1491418052, "creation_date": 1491417470, "answer_id": 43239137, "question_id": 43238783, "link": "https://stackoverflow.com/questions/43238783/what-is-wrong-with-following-c-program/43239137#43239137", "title": "What is wrong with following C++ program?", "body": "<p>What you presumably tried to do was to use polymorphism. However, for that you must use a reference or pointer to base not a base itself. I.e.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;memory&gt;\n\nstruct tree\n{\n  virtual void inorder() = 0;  // abstract: cannot be called\n  virtual ~tree() {}\n};\n\nstruct emp_tree : tree\n{\n  void inorder() override\n  {}\n};\n\nstruct non_emp_tree : tree\n{\n  std::unique_ptr&lt;tree&gt; left,right; \n  int val;\n  non_emp_tree(int v, tree*l, tree*r)\n  : left(l), right(r), val(v) {}\n  void inorder() override\n  {\n    left-&gt;inorder();\n    std::cout&lt;&lt;\" \"&lt;&lt;val&lt;&lt;\" \";\n    right-&gt;inorder();\n  }\n};\n\nint main() {\n  auto leaf1 = new non_emp_tree(1, new emp_tree, new emp_tree);\n  auto leaf2 = new non_emp_tree(3, new emp_tree, new emp_tree);\n  auto root  = new non_emp_tree(2, leaf1, leaf2);\n  root-&gt;inorder();\n}\n</code></pre>\n\n<p>compiled with clang, produces <code>1  2  3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 1, "last_activity_date": 1491417735, "creation_date": 1491417735, "answer_id": 43239216, "question_id": 43238783, "link": "https://stackoverflow.com/questions/43238783/what-is-wrong-with-following-c-program/43239216#43239216", "title": "What is wrong with following C++ program?", "body": "<p>First things first, if <code>tree::inorder</code> is meant to be an abstract method, you need to properly declare it as such:</p>\n\n<pre><code>class tree{\npublic:\n    virtual void inorder() = 0;\n};\n</code></pre>\n\n<p>However, this is very quickly going to lead to a bunch of other problems, because you're slicing up your objects left and right!</p>\n\n<pre><code>tree leaf1 = non_emp_tree(1, emp_tree(), emp_tree());\n</code></pre>\n\n<p>This code cannot possibly have the effect you intend. <code>non_emp_tree</code> contains member variables that a <code>tree</code> object doesn't have room to store. And even if it did, you'd have no guarantee that the object would behave the way you expect. Invocations of <code>inorder</code> on <code>leaf1</code> would attempt to call <code>tree::inorder</code>, not <code>non_emp_tree::inorder</code>, because the program has no way of knowing that you intended to store a subclass here.</p>\n\n<p>The way to fix this is to use pointers for all your <code>tree</code> objects.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;memory&gt;\n\nclass tree{\npublic:\n    virtual void inorder() = 0;\n    virtual ~tree() = default;\n};\n\nclass emp_tree: public tree{\npublic:\n    void inorder(){\n    }\n};\n\nclass non_emp_tree: public tree{\npublic:\n    std::unique_ptr&lt;tree&gt; left, right;\n    int val;\n    non_emp_tree(int v, tree *l, tree *r): val(v), left(l), right(r) {};\n    void inorder(){\n        if(left) left-&gt;inorder();\n        std::cout&lt;&lt;\" \"&lt;&lt;val&lt;&lt;\" \";\n        if(right) right-&gt;inorder();\n    }\n};\n\nint main() {\n    std::unique_ptr&lt;tree&gt; leaf1 = std::make_unique&lt;non_emp_tree&gt;(1, new emp_tree, new emp_tree);\n    std::unique_ptr&lt;tree&gt; leaf2 = std::make_unique&lt;non_emp_tree&gt;(3, new emp_tree, new emp_tree);\n    std::unique_ptr&lt;tree&gt; root = std::make_unique&lt;non_emp_tree&gt;(2, leaf1.release(), leaf2.release());\n    root-&gt;inorder();\n    return 0;\n}\n</code></pre>\n\n<p>A better implementation of this code would avoid any uses of naked <code>new</code> at all, but that would require some significant refactoring of your code.</p>\n"}], "owner": {"reputation": 629, "user_id": 5327962, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e5b32f413b4d390ecd3e260189c40be2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5327962/abhishek-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "closed_date": 1491453810, "answer_count": 5, "score": -5, "last_activity_date": 1491418052, "creation_date": 1491416312, "last_edit_date": 1491417361, "question_id": 43238783, "link": "https://stackoverflow.com/questions/43238783/what-is-wrong-with-following-c-program", "closed_reason": "Not suitable for this site", "title": "What is wrong with following C++ program?", "body": "<p>Why does following C++ code gives below mentioned error? Also why is not this the idiomatic way of writing recursive data-structures in C++? Is there something fundamentally wrong with this way of writing C++?</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\n\nclass tree{\npublic:\n    virtual void inorder() {};\n};\n\nclass emp_tree: public tree{\npublic:\n    void inorder(){\n    }\n};\n\nclass non_emp_tree: public tree{\npublic:\n    tree left, right;\n    int val;\n    non_emp_tree(int v, tree l, tree r): val(v), left(l), right(r) {};\n    void inorder(){\n        left.inorder();\n        cout&lt;&lt;\" \"&lt;&lt;val&lt;&lt;\" \";\n        right.inorder();\n    }\n};\n\n\n\n\nint main() {\n    tree leaf1 = non_emp_tree(1, emp_tree(), emp_tree());\n    tree leaf2 = non_emp_tree(3, emp_tree(), emp_tree());\n    tree root = non_emp_tree(2, leaf1, leaf2);\n    root.inorder();\n    return 0;\n}\n</code></pre>\n\n<p>Error given by compiler: (I'm unable to comprehend most of it)</p>\n\n<pre><code>/tmp/ccAjhirw.o: In function `main':\nb_t.cpp:(.text+0x16e): undefined reference to `tree::inorder()'\n/tmp/ccAjhirw.o: In function `tree::tree()':\nb_t.cpp:(.text._ZN4treeC2Ev[_ZN4treeC5Ev]+0x9): undefined reference to `vtable for tree'\n/tmp/ccAjhirw.o: In function `tree::tree(tree const&amp;)':\nb_t.cpp:(.text._ZN4treeC2ERKS_[_ZN4treeC5ERKS_]+0xd): undefined reference to `vtable for tree'\n/tmp/ccAjhirw.o: In function `non_emp_tree::inorder()':\nb_t.cpp:(.text._ZN12non_emp_tree7inorderEv[_ZN12non_emp_tree7inorderEv]+0x19): undefined reference to `tree::inorder()'\nb_t.cpp:(.text._ZN12non_emp_tree7inorderEv[_ZN12non_emp_tree7inorderEv]+0x56): undefined reference to `tree::inorder()'\n/tmp/ccAjhirw.o: In function `tree::tree(tree&amp;&amp;)':\nb_t.cpp:(.text._ZN4treeC2EOS_[_ZN4treeC5EOS_]+0xd): undefined reference to `vtable for tree'\n/tmp/ccAjhirw.o:(.rodata._ZTI12non_emp_tree[_ZTI12non_emp_tree]+0x10): undefined reference to `typeinfo for tree'\n/tmp/ccAjhirw.o:(.rodata._ZTI8emp_tree[_ZTI8emp_tree]+0x10): undefined reference to `typeinfo for tree'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Edit: I changed <code>virtual void inroder()</code> to <code>virtual void inorder() {}</code> i.e empty implementation. But still I am not getting desired output, it seems root, leaf1 and leaf2 are both calling tree's inorder not their respective inorders. </p>\n"}, {"tags": ["c++", "pointers", "reflection", "struct", "reinterpret-cast"], "answers": [{"comments": [{"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1491417446, "post_id": 43238999, "comment_id": 73548329, "body": "Thanks! Consulting that reference, as best as I can tell all the types I am working with are in standard layout, as all the data types are non-static and non-references (since the structs are all C structs, really). So, hopefully my luck continues. There might be thornier details down the road, especially regarding how memory is allocated for these structs..."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1491417039, "creation_date": 1491417039, "answer_id": 43238999, "question_id": 43238780, "link": "https://stackoverflow.com/questions/43238780/casting-a-pointer-to-a-struct-into-another-struct-type-with-a-smaller-number-of/43238999#43238999", "title": "Casting a pointer to a struct into another struct type with a smaller number of fields", "body": "<p>You are in luck.</p>\n\n<p>The classes you show as an example conform to the requirements of <em>standard layout</em> types.</p>\n\n<p>You can read more here:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/data_members#Standard_layout\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/data_members#Standard_layout</a></p>\n\n<p>You can test this premise in the compiler with:</p>\n\n<pre><code>static_assert(std::is_standard_layout&lt;gsl_block&gt;::value, \"not a standard layout\");\n</code></pre>\n"}], "owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 43238999, "answer_count": 1, "score": 2, "last_activity_date": 1491429801, "creation_date": 1491416292, "last_edit_date": 1491429801, "question_id": 43238780, "link": "https://stackoverflow.com/questions/43238780/casting-a-pointer-to-a-struct-into-another-struct-type-with-a-smaller-number-of", "title": "Casting a pointer to a struct into another struct type with a smaller number of fields", "body": "<p><strong>Basic problem</strong></p>\n\n<p>I'm in a tricky situation that requires taking a pointer to a struct <code>mainset</code> and turning this into a pointer to a struct <code>subset</code>, whose fields are a contiguous subset of the fields of <code>mainset</code>, starting from the first. Is such a thing possible, with well-defined behavior? I realize that this is a pretty terrible thing to do, but I have good and frustrating reasons to do it [explained at the bottom for patient readers].</p>\n\n<p>My attempt an an implementation <em>seems</em> to work, on OS X with the clang compiler:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct mainset {\n    size_t size;\n    uint32_t reflex_size;\n};\n\nstruct subset {\n    size_t size;\n};\n\nusing namespace std;\nint main(int argc, char *argv[]) {\n    mainset test = {1, 1};\n    subset* stest = reinterpret_cast&lt;subset*&gt;(&amp;test);\n    std::cout &lt;&lt; stest-&gt;size &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output is indeed 1, as I expect. However, I wonder: am I just getting lucky with a particular compiler and a simple case (in reality my structs are more complicated), or will this work in general?</p>\n\n<p>Also, a follow-up question: for other annoying reasons, I worry that I might need to make my larger struct</p>\n\n<pre><code>struct mainset {\n    uint32_t reflex_size;\n    size_t size;\n};\n</code></pre>\n\n<p>instead, with the extra field coming at the front. Could my implementation be extended to work in this case? I tried replacing <code>&amp;test</code> with <code>&amp;test+sizeof(test.reflex_size)</code> but this didn't work; the output of the <code>cout</code> statement was 0.</p>\n\n<p><strong>Explanation of why I have to do this</strong></p>\n\n<p>My project uses the GSL library for linear algebra. This library makes use of structs of the form</p>\n\n<pre><code>struct gsl_block {\n   size_t size;\n   double* data;\n}\n</code></pre>\n\n<p>and similar structs like <code>gsl_vector</code> and <code>gsl_matrix</code>. So, I've used these structs as members of my C++ classes; no problem. A recently demanded feature for my project, however, is to enable reflection to my classes with the <a href=\"https://root.cern.ch/how/how-use-reflex\" rel=\"nofollow noreferrer\">Reflex</a> tool, part of the ROOT ecosystem. To enable reflection for a struct like this in Reflex, I must add an annotation like</p>\n\n<pre><code>struct gsl_block {\n   size_t size;\n   double* data; //[size]\n}\n</code></pre>\n\n<p>This annotation tells Reflex that that the length of the array is provided by the field <code>size</code> of the same struct. Normally that would be that, <em>but</em> Reflex and ROOT have a very unfortunate limitation: the length field must be 32 bit. Having been informed that this limitation won't be fixed anytime soon, and not having the time/resources to fix it myself, I'm looking for workarounds. My idea is to somehow embed a struct bit-compatible with <code>gsl_block</code> within a larger struct:</p>\n\n<pre><code>struct extended_gsl_block {\n   size_t size;\n   double* data; //[reflex_size]\n   uint32_t reflex_size;\n}\n</code></pre>\n\n<p>and similar things for <code>gsl_vector</code> and <code>gsl_matrix</code>; I can ensure that <code>reflex_size</code> and <code>size</code> are always equal (neither is ever bigger than ~50) and Reflex will be able to parse this header correctly (I hope; if reflex_size is required to precede data as a field something more difficult would be required). Since GSL routines work with pointers to these structs, my idea is this: given a pointer <code>extended_gsl_block*</code>, somehow get a pointer to just the fields <code>size</code> and <code>data</code> and <code>reinterpret_cast</code> this into a <code>gsl_block*</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1491416328, "post_id": 43238746, "comment_id": 73547657, "body": "Iterate through the map and call <code>max_element</code> on each list?"}, {"owner": {"reputation": 15, "user_id": 5073583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b4b96f5ba42a97c94be454f664d700?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/5073583/mary"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1491416514, "post_id": 43238746, "comment_id": 73547773, "body": "I tries it, but it finds the maximum value according to the first elements of list. I want to find the list that the second value is maximum in"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1491416613, "post_id": 43238746, "comment_id": 73547844, "body": "You need to pass in a custom comparator if you only want to check the last element of the <code>tuple</code>."}, {"owner": {"reputation": 15, "user_id": 5073583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b4b96f5ba42a97c94be454f664d700?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/5073583/mary"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1491416773, "post_id": 43238746, "comment_id": 73547936, "body": "I do not know how to do it. would you please introduce me a reference about it?"}], "owner": {"reputation": 15, "user_id": 5073583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b4b96f5ba42a97c94be454f664d700?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/5073583/mary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491416202, "creation_date": 1491416202, "question_id": 43238746, "link": "https://stackoverflow.com/questions/43238746/find-maximum-value-in-one-element-of-dictionary-in-c", "title": "find maximum value in one element of dictionary in c++", "body": "<p>I have a map of lists and I want to find the maximum value in the list related to every key. for example, map[0](the lists related to the key 0) consists of 3 tuples {1,2},{4,2},{4,8} I want to find max{2,2,8}=8 in this list of dictionary. then I want to repeat it for every key in the dictionary. the code I wrote is as follow:</p>\n\n<pre><code>std::map&lt;int, list&lt;std::tuple&lt;int, int&gt; &gt;&gt; map1;\n\nlist&lt;std::tuple&lt;int, int&gt;&gt; t = list&lt;std::tuple&lt;int, int&gt;&gt;();\nt.push_back(make_tuple(4, 3));\nt.push_back(make_tuple(2, 6));\nmap1[0] = t;\n\nt.push_back(make_tuple(5, 6));\nmap1[1] = t;\n</code></pre>\n\n<p>how can I find the maximum value in the map1[0] and map1[1] separately? </p>\n"}, {"tags": ["c++", "visual-studio", "qt", "visual-studio-2012", "visual-studio-2015"], "answers": [{"tags": [], "owner": {"reputation": 1107, "user_id": 2862952, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/CbFt3.jpg?s=128&g=1", "display_name": "mathiasfk", "link": "https://stackoverflow.com/users/2862952/mathiasfk"}, "is_accepted": true, "score": 1, "last_activity_date": 1491487040, "last_edit_date": 1495541391, "creation_date": 1491487040, "answer_id": 43257369, "question_id": 43238422, "link": "https://stackoverflow.com/questions/43238422/qt-aplication-in-visual-studio-entry-point/43257369#43257369", "title": "Qt aplication in Visual Studio - entry point", "body": "<p>The solution I found is to set the entry point to <code>mainCRTStartup</code> in <strong>Configuration Properties -> Linker -> Advanced -> Entry Point</strong>. The difference between <code>main</code> and <code>mainCRTStartup</code> is discussed <a href=\"https://stackoverflow.com/questions/22934206/what-is-the-difference-between-main-and-maincrtstartup\">here</a>.</p>\n\n<p>Doing that, the arguments are passed correctly to the main function. </p>\n"}], "owner": {"reputation": 1107, "user_id": 2862952, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/CbFt3.jpg?s=128&g=1", "display_name": "mathiasfk", "link": "https://stackoverflow.com/users/2862952/mathiasfk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 43257369, "answer_count": 1, "score": 2, "last_activity_date": 1491487040, "creation_date": 1491415094, "last_edit_date": 1495540006, "question_id": 43238422, "link": "https://stackoverflow.com/questions/43238422/qt-aplication-in-visual-studio-entry-point", "title": "Qt aplication in Visual Studio - entry point", "body": "<p>I have a console application in Qt, which I would like to execute in Visual Studio, so I can use it's profiler.</p>\n\n<p>I'm using a plugin called Qt VS Tool, which seems to have imported the project correctly. I can also create a new Qt project and it works fine.</p>\n\n<p>However on this application that I imported, VS seems to be searching for a WinMain function as entry point instead of main, even if the \"SubSystem\" is set to <code>Console (/SUBSYSTEM:CONSOLE)</code> in <strong>Configuration Properties -> Linker -> System -> SubSystem</strong>. </p>\n\n<p>I am getting this error:</p>\n\n<blockquote>\n  <p>LNK2019   unresolved external symbol WinMain referenced in function\n  __tmainCRTStartup</p>\n</blockquote>\n\n<p>If I manually change the entry point to \"main\", in <strong>Configuration Properties -> Linker -> Advanced -> Entry Point</strong>, the application starts, but <code>argc</code> and <code>argv</code> contain trash. It seems that is <a href=\"https://stackoverflow.com/questions/13921924/how-do-i-access-arguments-for-a-new-main-function-in-c\">not possible</a> to pass arguments when specifying an entry point.</p>\n\n<p>How can I make it work properly with <code>int main(int argc, char *argv[])</code> ?</p>\n\n<p>I'm using VS 2015 Community with MSVC 11 compiler (VS 2012) due to a library. </p>\n"}, {"tags": ["c++", "gcc", "cross-platform", "game-engine", "compiler-optimization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1491415062, "post_id": 43238368, "comment_id": 73546937, "body": "Almost sounds like you need a arbitrary precision library or a fixed point library to give you cross platform results."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1491415438, "post_id": 43238368, "comment_id": 73547151, "body": "or avoid floating point."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1491416117, "post_id": 43238368, "comment_id": 73547511, "body": "I would avoid <code>-ffast-math</code> since it breaks the rules and thus you don&#39;t have any portability guarantees any more. If you want results that are <i>likely</i> to stay the same across platforms and compilers then the very least you should do is use compiler flags that forces the compiler to stick <i>strictly</i> to the standard (as much as possible)."}, {"owner": {"reputation": 91, "user_id": 5613357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3cd05df045948560b424a89cd8e7ac?s=128&d=identicon&r=PG", "display_name": "naezith", "link": "https://stackoverflow.com/users/5613357/naezith"}, "edited": false, "score": 0, "creation_date": 1491417627, "post_id": 43238368, "comment_id": 73548431, "body": "Using -O2 is the first step I guess. I will keep -msse2 -mfpmath=sse too, what else?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1491417963, "post_id": 43238368, "comment_id": 73548633, "body": "Using <code>-std=c++14</code> would ensure gcc sticks to allowing you to use constructs allowed by the standard rather than permitting GNU extensions (as it does by default) that won&#39;t be available on other platforms/compilers.  Also: <code>-O3</code> should also be OK as well as <code>-O2</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 2, "last_activity_date": 1491416005, "creation_date": 1491416005, "answer_id": 43238681, "question_id": 43238368, "link": "https://stackoverflow.com/questions/43238368/same-simulation-on-every-platform-with-correct-compiler-flags/43238681#43238681", "title": "Same simulation on every platform with correct compiler flags", "body": "<p>This will be very difficult to achieve.</p>\n\n<p>Certainly if you are targeting 32bit and 64bit x86/amd64 architectures you want to use SSE for both, otherwise on 32 bit x86 you may end up using x87 which will definitely cause differences.</p>\n\n<p>Even if you can iron out any differences in your own compiled code, you are likely to encounter differences in the standard library. For instance, I've come across differences in the implementation of std::pow() between FreeBSD/Solaris and Linux.</p>\n\n<p>I suppose that using a fixed point representation is out of the question?</p>\n"}], "owner": {"reputation": 91, "user_id": 5613357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3cd05df045948560b424a89cd8e7ac?s=128&d=identicon&r=PG", "display_name": "naezith", "link": "https://stackoverflow.com/users/5613357/naezith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491416382, "creation_date": 1491414924, "last_edit_date": 1491416382, "question_id": 43238368, "link": "https://stackoverflow.com/questions/43238368/same-simulation-on-every-platform-with-correct-compiler-flags", "title": "Same simulation on every platform with correct compiler flags", "body": "<p>I am developing the game Remnants of Naezith for around 2.5 years and the backbone of this game is the <strong>leaderboard</strong> which has <strong>replays</strong>. Game is fully deterministic so same inputs lead to same simulation every single time.\nGame is <strong>fully written from scratch in C++ and SFML</strong>. </p>\n\n<p>Months ago I changed my gcc compiler from 64bit to 32bit or reverse, I don't remember correctly but the problem was, old replays were not working in the new compiler. When I searched about it, floating point math were being different between two.</p>\n\n<p>I fixed it by putting <strong>-msse2 -mfpmath=sse</strong>. Then it was working same.</p>\n\n<p>Today I compiled and ran the game in Debug mode and for first time I saw some of the replays desync again. When I searched about it, it's caused by the <strong>-Ofast</strong> flag I use at Release build. Because <strong>-Ofast</strong> flag has <strong>-ffast-math</strong> in it. That makes a difference in calculations, so simulation also differs.</p>\n\n<p>Currently using this <strong>-Ofast</strong> flag does not cause any issues because everyone plays in the build which has that flag.</p>\n\n<p>In future I'd like to port my game to Mac, Linux, PS4, Xbox or something else. My leaderboards are on my own server so I want to use the same leaderboards shared for all platforms. That's why I need the game to work exactly the same on every platform. </p>\n\n<p>My doubt is that if I keep this <strong>-Ofast</strong>, everyone will play with it and when I need to port my game to another platform, I might need to change my compiler and that compiler might not have the same flag, or the math may be working differently in that compiler. </p>\n\n<p>Which flags should I avoid and which flags should I choose to make sure it will <strong>simulate the same replay, same in every platform</strong>?</p>\n\n<p><strong>Edit:</strong> Avoiding <strong>-Ofast</strong> to get rid of <strong>-ffast-math</strong> sounds obvious but what else should I use and will it be fine after that?</p>\n"}, {"tags": ["c++", "curl"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 1, "creation_date": 1491415986, "post_id": 43238051, "comment_id": 73547429, "body": "Use: <code>curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L); </code>"}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1491425996, "post_id": 43238051, "comment_id": 73553227, "body": "you&#39;re not checking that curl_easy_getinfo succeeds tho. like, it probably isn&#39;t, but why take the chance? i use <code>#define ecurl_easy_getinfo(curl,info,...){ \\ \tCURLcode ret=curl_easy_getinfo(curl,info,__VA_ARGS__); \\ \tif(unlikely(ret!=CURLE_OK)){ \\ \t\t myerror(EXIT_FAILURE,errno,&quot;curl_easy_getinfo failed to get info %i. CURLCode: %i curl_easy_strerror: %s\\n&quot;, info, ret, curl_easy_strerror(ret));   \\ \t} \\ }  </code> - but that&#39;s for C, a runtime_exception would probably fit better in C++"}, {"owner": {"reputation": 73, "user_id": 7501978, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6c04406cefa08a471776d368d0c64199?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Baumgartner", "link": "https://stackoverflow.com/users/7501978/alan-baumgartner"}, "reply_to_user": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "edited": false, "score": 0, "creation_date": 1491432842, "post_id": 43238051, "comment_id": 73555942, "body": "@hanshenrik This is just a snippet, in the full program it checks if every succeeds but that is irrelevant to the redirect question."}], "owner": {"reputation": 73, "user_id": 7501978, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6c04406cefa08a471776d368d0c64199?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Baumgartner", "link": "https://stackoverflow.com/users/7501978/alan-baumgartner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491413916, "creation_date": 1491413916, "question_id": 43238051, "link": "https://stackoverflow.com/questions/43238051/c-curl-response-after-redirects", "title": "c++ curl response after redirects", "body": "<p>so I am coming from python so c++ is pretty difficult to transition into so pardon anything that might be simple. </p>\n\n<p>I am looking to get a response code of a website after it redirects and I currently have this after a few google searches</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_POSTREDIR, CURL_REDIR_GET_ALL);\ncurl_easy_setopt(curl, CURLOPT_URL, url.c_str());\n\ncurl_easy_perform(curl);\n\nlong http_code;\n\ncurl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &amp;http_code);\n\ncout &lt;&lt; http_code &lt;&lt; endl;\n</code></pre>\n\n<p>but this only returns the initial response code. I might be missing something basic but I have a python script very similar to this and it prints a differen't response code than this program.</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 3, "creation_date": 1491413920, "post_id": 43238010, "comment_id": 73546211, "body": "Couldn&#39;t you just do <code>++mValues[*it];</code>. If it&#39;s not there, the default constructor of your <code>second</code> will be used. Wouldn&#39;t it be at 0 by default?"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 3, "creation_date": 1491413961, "post_id": 43238010, "comment_id": 73546240, "body": "What about using <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a>?"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491413969, "post_id": 43238010, "comment_id": 73546244, "body": "You can also use range-based loop, not sure if it&#39;s faster"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491414157, "post_id": 43238010, "comment_id": 73546367, "body": "<code>it can sometimes take 2 seconds to re-build the map</code> -- Are you running a &quot;debug&quot;, unoptimized build, or an optimized, &quot;release&quot; build?  if it is not an optimized build, the timings you&#39;re seeing are not meaningful.  Please post your compiler command line to see if you are using optimizations."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1491414272, "post_id": 43238010, "comment_id": 73546440, "body": "Try the suggestion by @WhiZTiM to use <code>std::unordered_map</code> first.  You don\u2019t need to compare the strings or do an in-order traversal, only count them.  Under the hood, <code>std::map</code> is usually some kind of self-balancing binary tree and <code>std::unordered_map</code> is a hash table, which should be faster."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1491414341, "post_id": 43238010, "comment_id": 73546494, "body": "Seriously, 10,000 words is not a lot that it would really take 2 seconds.  This looks like an issue of running a &quot;debug&quot; build instead of an optimized one."}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491414493, "post_id": 43238010, "comment_id": 73546578, "body": "I am not running in debug, but in release mode, (VS2015 default release settings for a default c++ project)."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1491414586, "post_id": 43238010, "comment_id": 73546650, "body": "One optimization for STL containers in general is to <code>reserve()</code> their memory ahead of time: in this case, you know that the maximum number of entries is the size of your input <code>vector</code>.  Try to find some heuristic to pass to <code>unordered_map::rehash()</code>.  If you\u2019re copying the strings, try to use weak pointers instead, since you know the vector will outlive the map and can retain ownership."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491415556, "post_id": 43238010, "comment_id": 73547204, "body": "@SimonGoodman Your loop is doing two <code>find</code>&#39;s, one explicit (you calling <code>find</code>) and one implicit by calling <code>map::operator [ ]</code>.  There is no need to call <code>std::find</code> yourself if all you want to do is use the <code>int</code> portion of the map as a counter.  Just use <code>[ ]</code> and increment the int value."}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1491415701, "post_id": 43238010, "comment_id": 73547279, "body": "Thanks @Davislor, I will try that as soon as I have tested the other 2 functions below."}], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491414701, "post_id": 43238134, "comment_id": 73546719, "body": "I will try that change to see what difference it makes, I will post back some times."}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491418381, "post_id": 43238134, "comment_id": 73548876, "body": "After a few tests, this approach was ~30% faster in general. I used <code>reserve</code> as well as <code>unordered_map</code>"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 6, "last_activity_date": 1491414199, "creation_date": 1491414199, "answer_id": 43238134, "question_id": 43238010, "link": "https://stackoverflow.com/questions/43238010/fast-group-by-count-stdvectorstdu16string-into-a-stdmapu16string-int/43238134#43238134", "title": "Fast &#39;group by/count&#39; std::vector&lt;std::u16string&gt; into a std::map&lt;u16string, int&gt;", "body": "<p>If you call <a href=\"http://en.cppreference.com/w/cpp/container/map/operator_at\" rel=\"noreferrer\"><code>std::map::operator[]</code></a> on a new key, the value of the key will be value initialized (to 0 for PODs like <code>int</code>). So, your loop can be simplified to:</p>\n\n<pre><code>for (auto it = vValues.begin(); it != vValues.end(); ++it)\n    ++mValues[*it];\n</code></pre>\n\n<p>If there is no key <code>*it</code>, then the default value will be <code>0</code>, but then it is incremented immediately, and it becomes <code>1</code>.</p>\n\n<p>If the key already exists, then it is simply incremented.</p>\n\n<p>Furthermore, it doesn't look like you need the map to be ordered, so you can use a <code>std::unordered_map</code> instead, as insertion is average constant time, instead of logarithmic, which would speed it up even further.</p>\n"}, {"comments": [{"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491414657, "post_id": 43238200, "comment_id": 73546693, "body": "I can mutate vValue, let me write a quick function to compare the old and new with 50000 word, (a doc I have handy)."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1491416788, "post_id": 43238200, "comment_id": 73547949, "body": "If this uses a conventional sorting algorithm, this should run in O(n log n) time.  Using <code>std::unordered_map</code> is effectively a radix sort that should take linear time, and should therefore be faster for large enough inputs."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1491417975, "post_id": 43238200, "comment_id": 73548644, "body": "@Davislor unordered map is, sadly, a node based container.  On 4 billion entries, lg(n) only hits 32; it doesn&#39;t take many cache misses to cost you a factor of 32.  And if you have that much data, you should be using a robust database usually."}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491418471, "post_id": 43238200, "comment_id": 73548925, "body": "After a few tests, this approach was ~50% <b>slower</b> in general. I used <code>reserve</code> as well as <code>unordered_map</code>. But I am re-looking at my code as it does not really make sense."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491419535, "post_id": 43238200, "comment_id": 73549564, "body": "@SimonGoodman Strange; my tests show this to be 2x as fast with modest changes to your code.  How likely are collisions?  How long are strings?"}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491420241, "post_id": 43238200, "comment_id": 73549965, "body": "@Yakk The string is ~4000000 characters, about 270000 words and 2000 unique words. But I get about the same result, (% difference), with a string 90% smaller."}, {"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491420392, "post_id": 43238200, "comment_id": 73550052, "body": "Looking at the examples you posted now, but I wonder if the fact that I am using <code>std::u16string</code> would make any difference. Also, the sample text I am using is random complete webpages, (of blogs)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491422754, "post_id": 43238200, "comment_id": 73551428, "body": "@SimonGoodman Aha!  You using g++?  What standard lib?  My tests do both clang and g++; the clang ones are far faster in the vector case, the g++ ones are <i>slower</i> somehow!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1491423502, "last_edit_date": 1491423502, "creation_date": 1491414398, "answer_id": 43238200, "question_id": 43238010, "link": "https://stackoverflow.com/questions/43238010/fast-group-by-count-stdvectorstdu16string-into-a-stdmapu16string-int/43238200#43238200", "title": "Fast &#39;group by/count&#39; std::vector&lt;std::u16string&gt; into a std::map&lt;u16string, int&gt;", "body": "<pre><code>std::vector&lt;std::u16string&gt; vValues;\nvValues.push_back( ... )\n...\n\nstd::sort( vValues.begin(), vValues.end() );\nstruct counted {\n  std::u16string value;\n  std::size_t count;\n};\nstd::vector&lt;counted&gt; result;\nauto it = vValues.begin();\nwhile (it != vValues.end()) {\n  auto r = std::equal_range( it, vValues.end(), *it );\n  result.push_back({ *it, r.second-r.first });\n  it = r.second;\n}\n</code></pre>\n\n<p>After this is done, <code>result</code> will contain <code>{value, count}</code> for each value and will be sorted.</p>\n\n<p>As all work was done in contiguous containers, it should be faster than your implementation.</p>\n\n<p>If you aren't allowed to mutate <code>vValues</code>, one thing you could do is create a vector of <code>gsl::span&lt;char16_t&gt;</code> from it then sort that, then create the <code>result</code> vector similarly.  (If you don't have <code>gsl::span</code>, write one, they aren't hard to write)</p>\n\n<p>Failing that, even copying <code>result</code> once may be faster than your original solution.</p>\n\n<p>Using a <code>gsl::span&lt;char16_t const&gt;</code> in <code>counted</code> would save some allocations as well (reuse the storage within the <code>vValues</code>, at the cost of tying their lifetimes together.</p>\n\n<p>One serious concern is that if your strings are extremely long, determining that two strings are equal is expensive.  And if they have common prefixes, determining they are different can be expensive.  We do log(n) comparisons <em>per distinct element</em> in the <code>equal_range</code> code, and n log(n) in the sort; sometimes sorting (hash of string, string) pairs can be faster than sorting (string)s alone, as it makes unlike strings easy to detect.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a1037519ce16ca07\" rel=\"nofollow noreferrer\">Live example</a> with 4 different versions.  Simply change the <code>test1</code> to <code>test2</code> or <code>test3</code> or <code>test4</code>.</p>\n\n<p><code>test3</code> is fastest in every test I did:</p>\n\n<pre><code>std::unordered_map&lt;std::string, int&gt; test3(std::vector&lt;std::string&gt; vValues)\n{\n  std::unordered_map&lt;std::string, int&gt; mValues;\n  for( auto it = vValues.begin(); it != vValues.end(); ++it )\n  {\n    ++mValues[std::move(*it)];\n  }\n  return mValues;\n}\n</code></pre>\n\n<p>than all the other versions.</p>\n"}, {"comments": [{"owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491458848, "post_id": 43240378, "comment_id": 73563316, "body": "Sorry, is that not the same solution as @Rakete1111?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "edited": false, "score": 0, "creation_date": 1491459230, "post_id": 43240378, "comment_id": 73563494, "body": "It came out pretty close after I edited to use Paul McKenzie\u2019s idea. I think we both used the best ideas from the comments, but I might be confused about who wrote what when."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1491423210, "last_edit_date": 1491423210, "creation_date": 1491421757, "answer_id": 43240378, "question_id": 43238010, "link": "https://stackoverflow.com/questions/43238010/fast-group-by-count-stdvectorstdu16string-into-a-stdmapu16string-int/43240378#43240378", "title": "Fast &#39;group by/count&#39; std::vector&lt;std::u16string&gt; into a std::map&lt;u16string, int&gt;", "body": "<p>And here\u2019s an alternative.  You might consider storing a non-owning shared pointer, but if you can\u2019t control the format of your inputs, Yakk\u2019s suggestion of <code>gsl::span</code> might work.  This is from <a href=\"https://github.com/Microsoft/GSL\" rel=\"nofollow noreferrer\">the Guidelines Support Library</a>.</p>\n\n<pre><code>std::unordered_map&lt;std::u16string, unsigned&gt; hash_corpus;\n// constexpr float heuristic_parameter = ?;\n// hash_corpus.max_load_factor(heuristic_parameter);\n/* The maximum possible number of entries in the hash table is the size of\n * the input vector.\n */\nhash_corpus.reserve(corpus.size());\n\n// Paul McKenzie suggested this trick in the comments:\nfor ( const std::u16string&amp; s : corpus)\n    ++hash_corpus[s]; // If the key is not in the table, [] inserts with value 0.\n</code></pre>\n"}], "owner": {"reputation": 1024, "user_id": 4584436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/531863b3a7cedebe5e7413e5ea762900?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Goodman", "link": "https://stackoverflow.com/users/4584436/simon-goodman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 43238134, "answer_count": 3, "score": 3, "last_activity_date": 1491423502, "creation_date": 1491413775, "question_id": 43238010, "link": "https://stackoverflow.com/questions/43238010/fast-group-by-count-stdvectorstdu16string-into-a-stdmapu16string-int", "title": "Fast &#39;group by/count&#39; std::vector&lt;std::u16string&gt; into a std::map&lt;u16string, int&gt;", "body": "<p>I have a function that reads ~10000 words into a vector, I then want to group all the words into a map to 'count' how many times a certain word appears.</p>\n\n<p>While the code 'works' it can sometimes take 2 seconds to re-build the map.</p>\n\n<p><strong>NB</strong>: Unfortunately, I cannot change the 'read' function, I have to work with the vector of <code>std::u16string</code>.</p>\n\n<pre><code>std::vector&lt;std::u16string&gt; vValues;\nvValues.push_back( ... )\n...\n\nstd::map&lt;std::u16string, int&gt; mValues;\nfor( auto it = vValues.begin(); it != vValues.end(); ++it )\n{\n  if( mValues.find( *it ) == mValues.end() )\n  {\n    mValues[*it] = 1;\n  }\n  else\n  {\n    ++mValues[*it];\n  }\n}\n</code></pre>\n\n<p>How could I speed up the 'group by' while keeping track of the number of times the word appears in the vector?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "unresolved-external", "cinder"], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 3333381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TaDlT.jpg?s=128&g=1", "display_name": "Onextrapixel", "link": "https://stackoverflow.com/users/3333381/onextrapixel"}, "is_accepted": false, "score": 0, "last_activity_date": 1493199334, "creation_date": 1493199334, "answer_id": 43630349, "question_id": 43237775, "link": "https://stackoverflow.com/questions/43237775/a-plethora-of-unresolved-externals-when-compiling-sample-cinder-projects/43630349#43630349", "title": "A plethora of unresolved externals when compiling sample Cinder projects", "body": "<p>At this time Cinder samples technically supports the v120 compiler so you need that to run the Cinder samples. According to this post on the Cinder forum <a href=\"https://forum.libcinder.org/topic/anyone-tried-cinder-with-visual-studio-2015\" rel=\"nofollow noreferrer\">link to forum post</a> it should work for VCS 2015 but you need to build Cinder for v140 to work. </p>\n"}], "owner": {"reputation": 31, "user_id": 7822096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1128ed13f5895c5ca44f060e987b4cb7?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud Nazemi", "link": "https://stackoverflow.com/users/7822096/masoud-nazemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493199334, "creation_date": 1491413036, "question_id": 43237775, "link": "https://stackoverflow.com/questions/43237775/a-plethora-of-unresolved-externals-when-compiling-sample-cinder-projects", "title": "A plethora of unresolved externals when compiling sample Cinder projects", "body": "<p>This is the directory structure for Cinder externals that concerns the question. I don't have any issues with includes, I don't know why I have so many problem with the externals.</p>\n\n<pre><code>+---lib\n|   \n|   +---msw\n|   |   +---x86\n|   |   |   +---debug\n|   |   |   +---release\n</code></pre>\n\n<p>See, inside release there this v120 folder that contains cinder.lib. Now, at first, each project is pointed to externals like this:</p>\n\n<pre><code>..\\..\\..\\..\\lib\\msw\\$(PlatformTarget);..\\..\\..\\..\\lib\\msw\\$(PlatformTarget)\\$(Configuration)\\$(PlatformToolset)\n</code></pre>\n\n<p>But VCS prompts for cinder.lib nonetheless. So I add the subfolder containing the file to the externals path so it finds it, but, amongst one of the many extern symbol errors it generates, \"Cannot open file cinder.lib\" is one of them. And again, it's not the only one. There's over 20 externs errors for each of the samples, which there are many. I haven't done anything, I'm just trying to compile some samples to learn what the package does, but it keeps generating other errors as well. Would they release their package with buggy code? I don't think so.</p>\n\n<p>The package says it's for VCS 2013. Should I install that instead? I have 2015 Community.</p>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491414932, "post_id": 43237618, "comment_id": 73546861, "body": "imho too broad and not really clear. None of the options you mention allow you to easily include new kind of data."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1491417053, "post_id": 43237618, "comment_id": 73548096, "body": "How many of these things do you have? Normally, the space requirement of a metadata object is trivial in comparison to the size of the data (time series in this case) and a few unused bytes really aren&#39;t worth worrying about."}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491429292, "post_id": 43237618, "comment_id": 73554704, "body": "@tobi303: The kinds of data are all written and available at compile time. Among them, what exactly to include is specified at startup time (think command line arguments)."}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1491429393, "post_id": 43237618, "comment_id": 73554755, "body": "@rici: As mentioned in the question, the size of <code>ProductionEntry</code> might be big. So, if not production data is not necessary, I do not want to carry the <code>ProductionEntry</code> field (i.e. <code>pde_</code>) in all the <code>DataEntry</code> objects in the <code>time_series</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491414808, "post_id": 43238164, "comment_id": 73546785, "body": "not sure if I understood the question correctly, but if OP wants to choose on the fly what a <code>DataEntry</code> should contain, then inheritance isnt a solution"}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "edited": false, "score": 0, "creation_date": 1491428997, "post_id": 43238164, "comment_id": 73554570, "body": "To setup the inheritance correctly, I would need to know which data is needed at the time I write the code, isn&#39;t it? I wanted to postpone the decision until the software startup time."}], "tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1491414286, "last_edit_date": 1495541384, "creation_date": 1491414286, "answer_id": 43238164, "question_id": 43237618, "link": "https://stackoverflow.com/questions/43237618/c-design-struct-with-content-preferences-specified-at-creation-time/43238164#43238164", "title": "C++ Design struct with content preferences specified at creation time", "body": "<blockquote>\n  <p>Create separate time series for each kind of data and populate only\n  those time series which are necessary. However, this copies TimePoint\n  data multiple times and spoils the locality of data by spreading the\n  collected data over multiple data structures.</p>\n</blockquote>\n\n<p>It's possible to acomplish this through inheritance. For example:</p>\n\n<pre><code>struct DataEntryV1: public ProductionDataEntry, public SalesDataEntry {};\n</code></pre>\n\n<p>You would still need to define each data type that you would use, but it wouldn't \"spoil the locality of the data\". As a bonus, look at all the reuse of code you would gain via polymorphism. </p>\n\n<p>I present this as a simply an option and you should read <a href=\"https://stackoverflow.com/questions/406081/why-should-i-avoid-multiple-inheritance-in-c\">this link</a> about multiple inheritance before you decide do this.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1491415260, "creation_date": 1491415260, "answer_id": 43238469, "question_id": 43237618, "link": "https://stackoverflow.com/questions/43237618/c-design-struct-with-content-preferences-specified-at-creation-time/43238469#43238469", "title": "C++ Design struct with content preferences specified at creation time", "body": "<p>If you know at compile time, you may use template:</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nstruct TimeSeriesEntry {\n    TimePoint timepoint_;\n    std::tuple&lt;Ts...&gt; entries_;\n};\n</code></pre>\n\n<p>And</p>\n\n<pre><code>// No Production\nstd::deque&lt;TimeSeriesEntry&lt;SalesDataEntry, InventoryDataEntry&gt;&gt; time_series;\n</code></pre>\n"}], "owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491415260, "creation_date": 1491412453, "last_edit_date": 1491414938, "question_id": 43237618, "link": "https://stackoverflow.com/questions/43237618/c-design-struct-with-content-preferences-specified-at-creation-time", "title": "C++ Design struct with content preferences specified at creation time", "body": "<p>I would like to create a data structure to capture time series of production, sales, and inventory data. However, for all cases, we don't need to track all the data. The exact data to track (for example sales and inventory but not production) is specified at the time the series is constructed/initiated.</p>\n\n<p>One approach could be the following.</p>\n\n<pre><code>struct ProductionDataEntry { ... };\nstruct SalesDataEntry { ... };\nstruct InventoryDataEntry { ... };\n// Each of the above struct could be arbitrarily large\n\nstruct DataEntryV1 {\n  ProductionDataEntry pde_;\n  SalesDataEntry      sde_;\n  InventoryDataEntry  ide_;\n};\n\ntypedef std::chrono::system_clock::time_point TimePoint;\n\nstruct TimeSeriesEntry {\n  TimePoint timepoint_;\n  DataEntry entry_;\n};\n\nstd::deque&lt;TimeSeriesEntry&gt; time_series;\n</code></pre>\n\n<p>The drawback of the above approach is the following. In the use case, where sales and inventory data is necessary, but not production, the data structure would still consume space for <code>ProductionDataEntry</code>.</p>\n\n<p>I am looking for an approach where I can avoid such space wastage.</p>\n\n<p>Two options come to mind:</p>\n\n<ol>\n<li><p>Create separate time series for each kind of data and populate only those time series which are necessary. However, this copies <code>TimePoint</code> data multiple times and spoils the locality of data by spreading the collected data over multiple data structures.</p></li>\n<li><p>Organize <code>DataEntry</code> as <strong>pointer</strong>s to individual data entries, something like</p>\n\n<pre><code>struct DataEntryV2 {\n  ProductionDataEntry * pde_{nullptr};\n  SalesDataEntry      * sde_{nullptr};\n  InventoryDataEntry  * ide_{nullptr};\n};\n</code></pre>\n\n<p>and construct only those data entry objects that are necessary. However, this fragments the memory and introduces additional overhead of allocation and deallocation which I would like to avoid if possible.</p></li>\n<li><p>Organize <code>DataEntry</code> with <code>std::optional</code>, something like</p>\n\n<pre><code>struct DataEntryV3 {\n  std::optional&lt;ProductionDataEntry&gt; pde_;\n  std::optional&lt;SalesDataEntry&gt;      sde_;\n  std::optional&lt;InventoryDataEntry&gt;  ide_;\n};\n</code></pre>\n\n<p>I think this requires one extra word per entry type. And it would still consume the space of unnecessary data.</p></li>\n</ol>\n\n<p>I would like to be aware, are there any other options in the design space?</p>\n\n<p>(Note: <code>DataEntry</code> may need to be extended to include new kind of data, e.g. <code>PreOrderData</code>.)</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1491412625, "post_id": 43237616, "comment_id": 73545363, "body": "It&#39;s because of floating point math. 0.1 is representable as a slightly larger number, and hence the result is slightly less than 101, so truncating will cut it off."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1491412642, "post_id": 43237616, "comment_id": 73545375, "body": "Please also see this answer <a href=\"http://stackoverflow.com/a/16268154/27678\">stackoverflow.com/a/16268154/27678</a>"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1491412716, "post_id": 43237616, "comment_id": 73545422, "body": "One possible hack is to add <code>0.5</code> to your floating point number then type-cast. As in <code>(int)(10.1 &#47; 0.1 + 0.5)</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1491413442, "post_id": 43237616, "comment_id": 73545889, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/q/588004/560648\">stackoverflow.com/q/588004/560648</a>"}], "owner": {"reputation": 694, "user_id": 5510713, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/66561dd2d76babfc2ecd7d5e4a653644?s=128&d=identicon&r=PG&f=1", "display_name": "DhiwaTdG", "link": "https://stackoverflow.com/users/5510713/dhiwatdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1491412624, "answer_count": 0, "score": 0, "last_activity_date": 1491412444, "creation_date": 1491412444, "question_id": 43237616, "link": "https://stackoverflow.com/questions/43237616/unexpected-output-after-typecasting", "closed_reason": "Duplicate", "title": "Unexpected output after typecasting", "body": "<p>For the following print statement</p>\n\n<pre><code>std::cout &lt;&lt; 10.1 / 0.1 &lt;&lt; \" \" &lt;&lt; (int)(10.1 / 0.1) &lt;&lt; std::endl;\n</code></pre>\n\n<p>My understanding is that <code>(10.1/0.1)</code> is <code>101.0</code> hence after typecasting as an int the result should be <code>101</code>. Instead I received <code>101 100</code>. Can somebody please explain me why it is so???</p>\n"}, {"tags": ["c++", "multithreading", "qt", "stdthread"], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491412264, "post_id": 43237534, "comment_id": 73545146, "body": "Question: since <code>doStuff</code> ask for a reference but it is running in another thread, there is nothing stopping you from deleting <code>a</code> and you will end up with a UB?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491412425, "post_id": 43237534, "comment_id": 73545247, "body": "@Ceros Of course, if you delete a variable something else is using there will be trouble :)"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491412589, "post_id": 43237534, "comment_id": 73545339, "body": "what is the purpose of <code>std::ref</code> in this case?"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491413343, "post_id": 43237534, "comment_id": 73545818, "body": "So apparently it&#39;s for template type deduction"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491413540, "post_id": 43237534, "comment_id": 73545953, "body": "@Ceros It puts the variable in a <code>std::reference_wrapper</code> <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/ref</a> It is needed when passing parameters that are accepted as references."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 3, "last_activity_date": 1491413397, "last_edit_date": 1491413397, "creation_date": 1491412185, "answer_id": 43237534, "question_id": 43237503, "link": "https://stackoverflow.com/questions/43237503/starting-a-member-function-with-arguments-in-a-separate-thread/43237534#43237534", "title": "Starting a member function with arguments in a separate thread", "body": "<p>Just add the arguments to the thread's constructor:</p>\n\n<pre><code>QString a(\"test\");\nstd::thread thr(&amp;MyClass::doStuff, this, a);\n</code></pre>\n\n<p>As your function accepts a <em>reference</em> you should use <code>std::ref()</code> like this:</p>\n\n<pre><code>MyClass::doStuff(QString&amp; str) { /* ... */ }\n\n// ...\n\nQString a(\"test\");\nstd::thread thr(&amp;MyClass::doStuff, this, std::ref(a)); // wrap references\n</code></pre>\n"}], "owner": {"reputation": 683, "user_id": 1721238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/dced2a811c2dbefabda27e2cf64a9a53?s=128&d=identicon&r=PG", "display_name": "Metal Wing", "link": "https://stackoverflow.com/users/1721238/metal-wing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 1, "accepted_answer_id": 43237534, "answer_count": 1, "score": 2, "last_activity_date": 1493316761, "creation_date": 1491412095, "last_edit_date": 1493316761, "question_id": 43237503, "link": "https://stackoverflow.com/questions/43237503/starting-a-member-function-with-arguments-in-a-separate-thread", "title": "Starting a member function with arguments in a separate thread", "body": "<p>I have a member function <code>MyClass::doStuff(QString &amp; str)</code></p>\n\n<p>I am trying to call that function from a thread like this:</p>\n\n<pre><code>std::thread thr(&amp;MyClass::doStuff, this);\n</code></pre>\n\n<p>However, that results in an error:</p>\n\n<p><code>/usr/include/c++/4.8.2/functional:1697: error: no type named \u2018type\u2019 in \u2018class std::result_of&lt;std::_Mem_fn&lt;void (MyClass::*)(QString&amp;)&gt;(MyClass*)&gt;\u2019\n       typedef typename result_of&lt;_Callable(_Args...)&gt;::type result_type;</code></p>\n\n<p>So I've attempted to give it the argument:</p>\n\n<pre><code>QString a(\"test\");\nstd::thread thr(&amp;MyClass::doStuff(a), this);\n</code></pre>\n\n<p>However, that results in this error: <code>lvalue required as unary \u2018&amp;\u2019 operand</code></p>\n\n<p>How would I go about running that member function with an argument, from a separate thread?</p>\n"}, {"tags": ["c++", "global-variables", "extern"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 4, "creation_date": 1491412009, "post_id": 43237427, "comment_id": 73544996, "body": "Why not ask for a reference to a matrix built in main() and fill that reference? Did you really measure the performance here or you are assuming that doing that will improve your application?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1491412132, "post_id": 43237427, "comment_id": 73545069, "body": "Is your code slow? Does it need to perform better? If not, then don&#39;t do anything. Else you measure and profile to find the bottlenecks and concentrate on fixing <i>those</i> instead of blindly fixing what you <i>think</i> might be slow. Always code for simplicity, readability and maintainability first and foremost. Then if the performance is not up to requirements you find the bottlenecks and optimize them, one by one, until the performance is okay."}, {"owner": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491413113, "post_id": 43237427, "comment_id": 73545668, "body": "@Ceros and @Someprogrammerdude I did with gprof. The biggest bottlenecks are all a bunch of calls of really long-named functions inside <code>Eigen.</code> All I&#39;m doing is sampling and inverting a bunch of these matrices. And yes, it needs to be faster."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491413686, "post_id": 43237427, "comment_id": 73546043, "body": "I am no familiar with Eigen but I believe that you would get a copy-elision in your case <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/copy_elision</a> &quot;When that local object is constructed, it is constructed directly in the storage where the function&#39;s return value would otherwise be moved or copied to.&quot;"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2918461"}, "is_accepted": false, "score": 1, "last_activity_date": 1491412556, "last_edit_date": 1495542737, "creation_date": 1491412556, "answer_id": 43237645, "question_id": 43237427, "link": "https://stackoverflow.com/questions/43237427/looking-up-global-variables-instead-of-constructing-them-inside-a-c-function/43237645#43237645", "title": "Looking up global variables instead of constructing them inside a c++ function", "body": "<p>In general</p>\n\n<ol>\n<li><p>Say it takes 1 second to write the matrix into memory and one second to read it. If you write it once, using a global variable  or a variable in main, and you read it N times, this takes 1 + N*1 seconds. If you recreate the object every time you want to use it, this takes 2*N seconds.</p></li>\n<li><p>It might be a good design decision to put constants in a namespace that makes sense for them. Maybe you would put \"pi\" in your math namespace, for example. <a href=\"https://stackoverflow.com/questions/2387083/where-should-you-put-global-constants-in-a-c-program\">Where should you put global constants in a C++ program?</a></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1491413383, "creation_date": 1491413383, "answer_id": 43237882, "question_id": 43237427, "link": "https://stackoverflow.com/questions/43237427/looking-up-global-variables-instead-of-constructing-them-inside-a-c-function/43237882#43237882", "title": "Looking up global variables instead of constructing them inside a c++ function", "body": "<p>Globals are quite possibly slower.</p>\n\n<p>That might be a bit of a surprise but often starting with a clean sheet is cheap. Globals have the downside that all code could change them, which can hamper optimization.</p>\n"}, {"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 3, "last_activity_date": 1491414500, "creation_date": 1491414500, "answer_id": 43238240, "question_id": 43237427, "link": "https://stackoverflow.com/questions/43237427/looking-up-global-variables-instead-of-constructing-them-inside-a-c-function/43238240#43238240", "title": "Looking up global variables instead of constructing them inside a c++ function", "body": "<p>If your <code>get</code> functions will always be returning the same matrix, you can generate it once the first time it is needed, without using a global variable, by using a static local one.</p>\n\n<pre><code>Eigen::MatrixXd getMatrix()\n{\n   static Eigen::MatrixXd myMatrix{[](){\n        Eigen::MatrixXd m(4,4);\n        for(int i = 0; i &lt; 4; ++i)\n        {\n            m(i,i) = 3.0;\n        }\n        return m;\n    }};\n    return myMatrix;\n}\n</code></pre>\n\n<p>This uses a lambda function to initialize the matrix, rather than another function.  It will also create a <em>copy</em> of the matrix every time, but the original matrix is hidden from all users and cannot be changed.  Copy elision cannot happen here, since the source is not a non-static local variable.  RVO  can still be done.</p>\n\n<p>Another option here is to return a reference to the matrix, by changing the function to</p>\n\n<pre><code>const &amp;Eigen::MatrixXd getMatrix()\n</code></pre>\n\n<p>This will avoid the copy and still hides the original matrix from changes unless the caller applies a <code>const_cast</code> to the returned value.</p>\n\n<p>For <code>getMatrix2</code>, you can just move the global variable you have into <code>getMatrix2</code> as a static.</p>\n"}], "owner": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 43238240, "answer_count": 3, "score": 0, "last_activity_date": 1491414500, "creation_date": 1491411831, "question_id": 43237427, "link": "https://stackoverflow.com/questions/43237427/looking-up-global-variables-instead-of-constructing-them-inside-a-c-function", "title": "Looking up global variables instead of constructing them inside a c++ function", "body": "<h2>Question:</h2>\n\n<p>I have some functions that are being called a <strong>lot</strong>. Inside each function, local variables are constructed. These variables are usually <code>Eigen::MatrixXd</code>s that are sort of small (usually under 10 x 10). Every call constructs the same variable, over and over again, then discards it.</p>\n\n<p>I started thinking it would be faster to define these variables outside of the function, and then look them up.</p>\n\n<ol>\n<li>Why is the \"looking up\" of some global variable likely to be faster than re-constructing it over and over again?</li>\n<li>Should I put the global constants in a namespace? What could go wrong with this approach?</li>\n</ol>\n\n<h2>First Code:</h2>\n\n<p>I started off with these three files.</p>\n\n<p>First: <code>functions.h</code></p>\n\n<pre><code>#ifndef FUNCTIONS_H\n#define FUNCTIONS_H\n\n#include &lt;Eigen/Dense&gt;\n\nEigen::MatrixXd getMatrix();\n\n#endif //FUNCTIONS_H\n</code></pre>\n\n<p>second: <code>functions.cpp</code></p>\n\n<pre><code>#include \"functions.h\"\n\nEigen::MatrixXd getMatrix()\n{\n    Eigen::MatrixXd myMatrix(4,4);\n    for(int i = 0; i &lt; 4; ++i)\n    {\n        myMatrix(i,i) = 3.0;\n    }\n    return myMatrix;\n}\n</code></pre>\n\n<p>Third, <code>main.cpp</code></p>\n\n<pre><code>#include \"functions.h\"\n\nint main()\n{\n\n    for(int i = 0; i &lt; 500000; ++i)\n        getMatrix();\n\n    return 0;\n}\n</code></pre>\n\n<h2>Second Code:</h2>\n\n<p>First, <code>functions2.h</code>:</p>\n\n<pre><code>#ifndef FUNCTIONS2_H\n#define FUNCTIONS2_H\n\n#include &lt;Eigen/Dense&gt;\n\nextern const Eigen::MatrixXd myMatrix;\n\nEigen::MatrixXd getMatrix2();\n\n#endif //FUNCTIONS2_H\n</code></pre>\n\n<p>then <code>functions2.cpp</code></p>\n\n<pre><code>#include \"functions2.h\"\n\nconst Eigen::MatrixXd myMatrix = Eigen::MatrixXd::Identity(2,2);\n\nEigen::MatrixXd getMatrix2()\n{\n    return myMatrix;\n}\n</code></pre>\n\n<p>then a different <code>main.cpp</code></p>\n\n<pre><code>#include \"functions2.h\"\n\nint main()\n{\n\n    for(int i = 0; i &lt; 500000; ++i)\n        getMatrix2();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1491410413, "post_id": 43236904, "comment_id": 73544078, "body": "Do you have what right?  Where is your confusion?  You say you already know what you are doing is invalidating the references."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 1, "creation_date": 1491410593, "post_id": 43236904, "comment_id": 73544182, "body": "@Eddge not exactly. They are pushing a local onto the vector (makes a copy), then saving the address of the position of the added vector element. Similar but different from directly storing the address of an automatic storage variable."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1491410704, "post_id": 43236904, "comment_id": 73544254, "body": "@crashmstr you&#39;re right thanks for the correction."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1491410817, "post_id": 43236904, "comment_id": 73544318, "body": "Yes this is not a good thing to do. never use references or pointers to members after changing its allocated size."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1491410855, "post_id": 43236904, "comment_id": 73544343, "body": "I believe the issue then is when a vector resize&#39;s it does not guarantee the data that was previous store will be at the same memory address, so us adding to the vector and storing the address of the back in a second vector, there is no guarantee that data after a resize will be at the same memory address."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1491410939, "post_id": 43236904, "comment_id": 73544395, "body": "good read: <a href=\"http://stackoverflow.com/questions/6438086/iterator-invalidation-rules\" title=\"iterator invalidation rules\">stackoverflow.com/questions/6438086/iterator-invalidation-ru&zwnj;&#8203;les</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1491411062, "post_id": 43236904, "comment_id": 73544481, "body": "Read about the vector invalidation rules here: <a href=\"http://en.cppreference.com/w/cpp/container/vector#Iterator_invalidation\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1491415781, "post_id": 43236904, "comment_id": 73547322, "body": "@NathanOliver: Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 1, "creation_date": 1491412483, "post_id": 43237570, "comment_id": 73545276, "body": "You can use <code>std::list</code> instead. <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/list</a> &quot;Addition, removal and moving the elements within the list or across several lists does not invalidate the iterators or references. &quot;"}, {"owner": {"reputation": 16, "user_id": 7809696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c28409134dc11803869b853706391f?s=128&d=identicon&r=PG&f=1", "display_name": "Darkblue", "link": "https://stackoverflow.com/users/7809696/darkblue"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1491413329, "post_id": 43237570, "comment_id": 73545812, "body": "@Ceros True, changing the container type would also work.  However, I was under the impression that the question was about the behavior of vector, not necessarily to solve the source code problem?  It&#39;s a rather strangely worded original question."}], "tags": [], "owner": {"reputation": 16, "user_id": 7809696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c28409134dc11803869b853706391f?s=128&d=identicon&r=PG&f=1", "display_name": "Darkblue", "link": "https://stackoverflow.com/users/7809696/darkblue"}, "is_accepted": true, "score": 0, "last_activity_date": 1491413369, "last_edit_date": 1491413369, "creation_date": 1491412277, "answer_id": 43237570, "question_id": 43236904, "link": "https://stackoverflow.com/questions/43236904/cpp-relocate-vector/43237570#43237570", "title": "Cpp relocate vector", "body": "<p>Correct, what you're doing with your vector doesn't exactly make sense.  When you call push_back() and the vector's size changes; there's an automatic reallocation of the storage for the entire vector.  So potentially, the previously added elements may no longer exist at their original address.</p>\n\n<p>A quick fix for this is to pre-allocate all of the indexes you'd wish to use using v.resize(). So the following code should work:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nclass Test{\n    public :\n        int wiek;\n};\n\nint main(int argc, char **argv)\n{\n    std::vector&lt;Test&gt; v;\n    std::vector&lt;Test*&gt; vv;\n\n    v.resize(36);\n\n    for (int i = 0; i &lt; 12; i++) {\n        Test t;\n        t.wiek = 10;\n        v.push_back(t);\n        vv.push_back(&amp;v.back());\n    }\n\n    Test&amp; m = v.back();\n\n    for (int i = 0; i &lt; 24; i++) {\n        Test t;\n        t.wiek = 123;\n        v.push_back(t);\n        vv.push_back(&amp;v.back());\n    }\n\n    for (int i = 0; i &lt; 36; i++) {\n\n        std::cout&lt;&lt;\"vv.at(i)-&gt;wiek : \"&lt;&lt;vv.at(i)-&gt;wiek&lt;&lt;\"\\n\";\n    }\n\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 10\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n//    vv.at(i)-&gt;wiek : 123\n\n    return 0;\n}\n</code></pre>\n\n<p>However, If you don't know what the final size would be.  You'd have to create the entirety of the \"v\" vector prior to assigning all of its element's addresses to \"vv\".  </p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1491412703, "creation_date": 1491412703, "answer_id": 43237688, "question_id": 43236904, "link": "https://stackoverflow.com/questions/43236904/cpp-relocate-vector/43237688#43237688", "title": "Cpp relocate vector", "body": "<p>If you need a container which permits random access and which guarantees that item references are not invalidated when the container grows, use <code>std::deque</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5889184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf373633dbf6f3f7d1e8caff18ef949?s=128&d=identicon&r=PG&f=1", "display_name": "ttmdear", "link": "https://stackoverflow.com/users/5889184/ttmdear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 43237570, "answer_count": 2, "score": 1, "last_activity_date": 1491418736, "creation_date": 1491410180, "last_edit_date": 1491416954, "question_id": 43236904, "link": "https://stackoverflow.com/questions/43236904/cpp-relocate-vector", "title": "Cpp relocate vector", "body": "<p>I have spent a lot of time to search reason of errors.\nBelow is a piece of my c++ program which is using vector to store data. I have seen that when <code>vector</code> increase self size, then all references are change. So save references to <code>push_back()</code> object by <code>back()</code> object is stupid and does not make sense.</p>\n\n<pre><code>class Test{\n    public :\n        int wiek;\n};\n\nint main(int argc, char **argv)\n{\n    std::vector&lt;Test&gt; v;\n    std::vector&lt;Test*&gt; vv;\n\n    for (int i = 0; i &lt; 12; i++) {\n        Test t;\n        t.wiek = 10;\n        v.push_back(t);\n        vv.push_back(&amp;v.back());\n    }\n\n    Test&amp; m = v.back();\n\n    for (int i = 0; i &lt; 24; i++) {\n        Test t;\n        t.wiek = 123;\n        v.push_back(t);\n        vv.push_back(&amp;v.back());\n    }\n\n    for (int i = 0; i &lt; 36; i++) {\n\n        std::cout&lt;&lt;\"vv.at(i)-&gt;wiek : \"&lt;&lt;vv.at(i)-&gt;wiek&lt;&lt;\"\\n\";\n    }\n\n    // vv.at(i)-&gt;wiek : 1619638984\n    // vv.at(i)-&gt;wiek : 167838876\n    // vv.at(i)-&gt;wiek : 167838896\n    // vv.at(i)-&gt;wiek : 167838900\n    // vv.at(i)-&gt;wiek : 167839152\n    // vv.at(i)-&gt;wiek : 167839156\n    // vv.at(i)-&gt;wiek : 167839160\n    // vv.at(i)-&gt;wiek : 167839164\n    // vv.at(i)-&gt;wiek : 167838872\n    // vv.at(i)-&gt;wiek : 167838876\n    // vv.at(i)-&gt;wiek : 167838880\n    // vv.at(i)-&gt;wiek : 167838884\n    // vv.at(i)-&gt;wiek : 167838888\n    // vv.at(i)-&gt;wiek : 167838892\n    // vv.at(i)-&gt;wiek : 167838896\n    // vv.at(i)-&gt;wiek : 167838900\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // vv.at(i)-&gt;wiek : 123\n    // ...\n    //\n    return 1;\n}\n</code></pre>\n\n<p>Do I have right?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1491410229, "post_id": 43236890, "comment_id": 73543970, "body": "Because 3.141592653589793116  is the <code>double</code> nearest to 3.141592653589793238."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 3, "creation_date": 1491410237, "post_id": 43236890, "comment_id": 73543974, "body": "Short answer: expecting exact results from floating-point approximations is a surefire recipe for disappointment."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1491410423, "post_id": 43236890, "comment_id": 73544084, "body": "In what sense is the answer wrong? It&#39;s not accurate enough for you? How accurate are you expecting it to be and why?"}, {"owner": {"reputation": 33, "user_id": 4655291, "user_type": "registered", "profile_image": "https://graph.facebook.com/881328005253490/picture?type=large", "display_name": "Ann", "link": "https://stackoverflow.com/users/4655291/ann"}, "edited": false, "score": 0, "creation_date": 1491410530, "post_id": 43236890, "comment_id": 73544142, "body": "But it is long double type, it should be more precise than double. Moreover, I set the most precision for long double, numeric_limits&lt;long double&gt;::digits10 + 1."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1491410575, "post_id": 43236890, "comment_id": 73544170, "body": "<code>longDoublePI</code> is a <code>long double</code> but <code>n.nnnnn</code> is a <code>double</code> unless you tell the compiler otherwise."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1491410670, "post_id": 43236890, "comment_id": 73544230, "body": "@Ann A very important rule to understand in both C and C++ is that what you do with a result has no effect on how that result is computed. C++&#39;s type system and promotion rules are complex enough without adding all the possible additional wrinkles that would add."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1491410673, "post_id": 43236890, "comment_id": 73544232, "body": "Read more about <a href=\"http://en.cppreference.com/w/cpp/language/floating_literal\" rel=\"nofollow noreferrer\">floating point literals</a>, pay close attention to the <i>suffixes</i>."}, {"owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1491410673, "post_id": 43236890, "comment_id": 73544233, "body": "The problem is that the type of the literal <code>3.141592653589793238</code> is just double; the type of <code>longDoublePI</code> doesn&#39;t change that.  Try <code>3.141592653589793238L</code>."}, {"owner": {"reputation": 33, "user_id": 4655291, "user_type": "registered", "profile_image": "https://graph.facebook.com/881328005253490/picture?type=large", "display_name": "Ann", "link": "https://stackoverflow.com/users/4655291/ann"}, "edited": false, "score": 0, "creation_date": 1491410695, "post_id": 43236890, "comment_id": 73544244, "body": "I think I got it!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1491415673, "post_id": 43236890, "comment_id": 73547266, "body": "All of these answers in the comments section. Sigh."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1491417507, "post_id": 43236890, "comment_id": 73548362, "body": "A must read: <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>."}, {"owner": {"reputation": 269, "user_id": 1087626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ea4c3a3eb95dee6222215087f5884c?s=128&d=identicon&r=PG", "display_name": "Oliver Sch&#246;nrock", "link": "https://stackoverflow.com/users/1087626/oliver-sch%c3%b6nrock"}, "edited": false, "score": 0, "creation_date": 1607861355, "post_id": 43236890, "comment_id": 115399968, "body": "this is not a dupe of <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a>  that question is about the general accuracy issues with FP. This question is about failing to designate the FP literal as being a <code>long double</code> by suffixing it with <code>L</code>."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1491415749, "post_id": 43238549, "comment_id": 73547301, "body": "Meh. See comments here: <a href=\"http://stackoverflow.com/a/1727886/560648\">stackoverflow.com/a/1727886/560648</a>"}], "tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 2, "last_activity_date": 1501155386, "last_edit_date": 1501155386, "creation_date": 1491415524, "answer_id": 43238549, "question_id": 43236890, "link": "https://stackoverflow.com/questions/43236890/there-are-wrong-answer-when-cout-the-long-double-value-c/43238549#43238549", "title": "There are wrong answer when cout the long double value, C++", "body": "<p>For a start, this is platform dependent. The standard (C++14, 3.9.1 Fundamental types [basic.fundamental] para 8) stipulates that long double only has at least as much precision as float. In practice, I would expect it to have the same or more precision than double, at least on desktop/server platforms.</p>\n\n<p>Generally I would use standard macros like M_PI to get well-known constants. I don't know of any standard long double versions, though GNU seems to have M_PIl as a non-standard extension.</p>\n\n<p>Finally, other than M_PI, the standard trick to get pi is to use</p>\n\n<p>4.0L*std::atan(1.0L)</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/1727881/how-to-use-the-pi-constant-in-c\">here</a> for more discussion.</p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 1087626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ea4c3a3eb95dee6222215087f5884c?s=128&d=identicon&r=PG", "display_name": "Oliver Sch&#246;nrock", "link": "https://stackoverflow.com/users/1087626/oliver-sch%c3%b6nrock"}, "edited": false, "score": 0, "creation_date": 1607861189, "post_id": 43238574, "comment_id": 115399926, "body": "Note that this is a particular trap when using the M_PI macro. You can&#39;t append an &#39;L&#39; to that, so it is always inaccurate to initialise <code>long double</code> varable with M_PI or to use M_PI in a <code>long double</code> calculation."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1491415622, "creation_date": 1491415622, "answer_id": 43238574, "question_id": 43236890, "link": "https://stackoverflow.com/questions/43236890/there-are-wrong-answer-when-cout-the-long-double-value-c/43238574#43238574", "title": "There are wrong answer when cout the long double value, C++", "body": "<p>Because, although <code>longDoublePI</code> is a <code>long double</code>, <strong>the literal from which you initialised it is only a <code>double</code></strong>, which does not have as much precision.</p>\n\n<p>You can use this instead:</p>\n\n<pre><code>const long double longDoublePI = 3.141592653589793238L;\n//                                                   ^\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4655291, "user_type": "registered", "profile_image": "https://graph.facebook.com/881328005253490/picture?type=large", "display_name": "Ann", "link": "https://stackoverflow.com/users/4655291/ann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "closed_date": 1492018855, "accepted_answer_id": 43238574, "answer_count": 2, "score": 2, "last_activity_date": 1501155386, "creation_date": 1491410119, "question_id": 43236890, "link": "https://stackoverflow.com/questions/43236890/there-are-wrong-answer-when-cout-the-long-double-value-c", "closed_reason": "Duplicate", "title": "There are wrong answer when cout the long double value, C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;limits&gt;\n\nusing namespace std;\n\nint main() {\n    const long double longDoublePI = 3.141592653589793238;\n    cout &lt;&lt; setw(16) &lt;&lt; \"longDoublePI = \" &lt;&lt; setprecision(numeric_limits&lt;long double&gt;::digits10 + 1) &lt;&lt; longDoublePI &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>But the result output is: </p>\n\n<p>longDoublePI = 3.141592653589793116</p>\n\n<p>Why the answer is wrong?</p>\n"}, {"tags": ["c++", "stack", "dynamic-memory-allocation", "member-functions", "static-memory-allocation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1491409580, "post_id": 43236723, "comment_id": 73543578, "body": "Do you mean the memory for the function code or the function&#39;s data?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 5, "creation_date": 1491409583, "post_id": 43236723, "comment_id": 73543581, "body": "Member functions are really no different to free functions under the hood."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1491409611, "post_id": 43236723, "comment_id": 73543599, "body": "Same as for regular functions: The function exists once, no matter how often it is called or how many objects are created."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1491409975, "post_id": 43236723, "comment_id": 73543812, "body": "A member function is just a regular function with an implicit <code>this</code> parameter. Nothing extra to allocate."}, {"owner": {"reputation": 167, "user_id": 6770922, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/36f2d618ccbde8f5671120528c6088be?s=128&d=identicon&r=PG&f=1", "display_name": "Catch_0x16", "link": "https://stackoverflow.com/users/6770922/catch-0x16"}, "edited": false, "score": 0, "creation_date": 1491410044, "post_id": 43236723, "comment_id": 73543851, "body": "Yup, under the hood all functions get turned into free functions. If you&#39;d like to learn more, take a look at <a href=\"https://msdn.microsoft.com/en-us/library/c1h23y6c.aspx\" rel=\"nofollow noreferrer\">dumpbin.exe</a>"}, {"owner": {"reputation": 91, "user_id": 7376458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de184ec007dadf6648a0f3adfc901d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Manisha P", "link": "https://stackoverflow.com/users/7376458/manisha-p"}, "edited": false, "score": 0, "creation_date": 1491410729, "post_id": 43236723, "comment_id": 73544268, "body": "I ask about the function&#39;s data. @Neil Butterworth"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1491417349, "creation_date": 1491417349, "answer_id": 43239098, "question_id": 43236723, "link": "https://stackoverflow.com/questions/43236723/where-is-a-member-function-allocated-memory-in-c-and-how-often/43239098#43239098", "title": "where is a member function allocated memory in c++ and how often?", "body": "<blockquote>\n  <p>where does a member function of class gets its memory allocated?  </p>\n</blockquote>\n\n<p>Allocation of memory for function data is implementation defined.</p>\n\n<blockquote>\n  <p>Is stack frame the answer for it?  </p>\n</blockquote>\n\n<p>There is no requirement for a C++ implementation to use a stack structure.<br>\nA stack structure for local variables is a convenience, but not a requirement.  </p>\n\n<blockquote>\n  <p>And does it gets allocated whenever we call the member function?  </p>\n</blockquote>\n\n<p>Function local variables <em>may</em> get created when execution enters the function.  There is no requirement that an implementation must create the variables.  The variables could exist in global memory and initialized when execution enters a function.  </p>\n\n<blockquote>\n  <p>Is that like whenever we call a member function using an object it gets allocated in the stack frame and when the function reaches it return statement that allocated stack frame gets deallocated?  </p>\n</blockquote>\n\n<p>A popular implementation is to allocate space on a stack for local variables.  Space allocation would involve incrementing or decrementing a stack pointer.<br>\nWhen execution leaves the scope, the stack is adjusted accordingly.  </p>\n\n<p>The implementation is allowed to use <em>registers</em>, so there is a possibility that no memory is allocated and the stack is not changed.  The implementation may push registers onto a stack before function execution and pop them afterwards.  </p>\n\n<p>The answers to your questions are implementation defined.  Small embedded systems may use more registers or global memory rather than using a stack.  There many possible data structures that can be used and still meet the C++ language standard.</p>\n"}], "owner": {"reputation": 91, "user_id": 7376458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de184ec007dadf6648a0f3adfc901d8e?s=128&d=identicon&r=PG&f=1", "display_name": "Manisha P", "link": "https://stackoverflow.com/users/7376458/manisha-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491417349, "creation_date": 1491409517, "last_edit_date": 1491416888, "question_id": 43236723, "link": "https://stackoverflow.com/questions/43236723/where-is-a-member-function-allocated-memory-in-c-and-how-often", "title": "where is a member function allocated memory in c++ and how often?", "body": "<p>where does a member function of class gets its memory allocated?  </p>\n\n<p>Is stack frame the answer for it?  </p>\n\n<p>And does it gets allocated whenever we call the member function?  </p>\n\n<p>Is that like whenever we call a member function using an object it gets allocated in the stack frame and when the function reaches it return statement that allocated stack frame gets deallocated?</p>\n"}, {"tags": ["c++", "ifstream"], "comments": [{"owner": {"reputation": 167, "user_id": 6770922, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/36f2d618ccbde8f5671120528c6088be?s=128&d=identicon&r=PG&f=1", "display_name": "Catch_0x16", "link": "https://stackoverflow.com/users/6770922/catch-0x16"}, "edited": false, "score": 1, "creation_date": 1491409709, "post_id": 43236620, "comment_id": 73543661, "body": "using ifstream twice shouldn&#39;t be a problem as they are different streams (fs1 and fs2)."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1491409715, "post_id": 43236620, "comment_id": 73543664, "body": "I&#39;m confused. Flag should <i>not</i> be set to false if the first file exists."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1491409734, "post_id": 43236620, "comment_id": 73543674, "body": "You only ever set <code>Flag</code> to <code>true</code>, except at initialization. So if either file exists, <code>Flag</code> will be <code>true</code>. You never set <code>Flag</code> to <code>false</code> in any <code>if</code>, contrary to your statement that <i>&quot;the first if is working fine and Flag is set to false&quot;</i>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1491409978, "post_id": 43236620, "comment_id": 73543814, "body": "I suspect something has changed during your retyping. Use copy and paste. (And by the way: <code>bool Flag = !fs1 || !fs2;</code> is much easier on the eyes.)"}, {"owner": {"reputation": 3, "user_id": 7821843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/331693c1d0ad094a8dcdc124543d88f0?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/7821843/nuke"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1491410014, "post_id": 43236620, "comment_id": 73543834, "body": "@Fran&#231;oisAndrieux:  <b>the first if is working fine and Flag is set to false</b>: I mean the value of <code>Flag</code> is not changed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1493382124, "post_id": 43236620, "comment_id": 74406251, "body": "Don&#39;t call your variables <code>Flag</code>. It&#39;s hugely uninformative."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1491410185, "last_edit_date": 1491410185, "creation_date": 1491409820, "answer_id": 43236801, "question_id": 43236620, "link": "https://stackoverflow.com/questions/43236620/check-if-a-given-multiple-file-exist/43236801#43236801", "title": "Check if a given multiple file exist", "body": "<p>If your compiler is C++17 compatible, you should use the <a href=\"http://en.cppreference.com/w/cpp/filesystem\" rel=\"nofollow noreferrer\"><code>&lt;filesystem&gt;</code></a> Library.</p>\n\n<pre><code>bool Flag = false;\nstring string_one = \"/blah/blah/bhah1.ext\";\nstring string_two = \"/blah/blah/bhah2.ext\";\n//MSVC\nnamespace fs = std::experimental::filesystem;\n//GCC or any other compiler which has moved filesystem out of the experimental namespace\n//namespace fs = std::filesystem;\nFlag = fs::exists(string_one) || fs::exists(string_two);\n</code></pre>\n\n<p>This code doesn't require you to actually <em>open</em> the files, which may be good for performance reasons.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7821843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/331693c1d0ad094a8dcdc124543d88f0?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/7821843/nuke"}, "edited": false, "score": 0, "creation_date": 1491410550, "post_id": 43236806, "comment_id": 73544153, "body": "Thanks! If <b>I want to set the flag if either (or both) files does not exist</b>, then is it going to work?  <code>if ( !fs1 || !fs2 )</code>"}], "tags": [], "owner": {"reputation": 428, "user_id": 4231251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1695e32e9db3d7225920ee78e329540c?s=128&d=identicon&r=PG&f=1", "display_name": "RyanL", "link": "https://stackoverflow.com/users/4231251/ryanl"}, "is_accepted": true, "score": 3, "last_activity_date": 1491410772, "last_edit_date": 1491410772, "creation_date": 1491409833, "answer_id": 43236806, "question_id": 43236620, "link": "https://stackoverflow.com/questions/43236620/check-if-a-given-multiple-file-exist/43236806#43236806", "title": "Check if a given multiple file exist", "body": "<p>From your post, you say that you want to set the flag if either (or both) file exists. Your current code sets the flag if they do not exist (they can't be opened for reading). Try something like this:</p>\n\n<pre><code>bool flag = false;\n\nstd::string string_one = \"/blah/blah/bhah1.ext\";\nstd::string string_two = \"/blah/blah/bhah2.ext\";\n\nstd::ifstream fs1(string_one.c_str());\nstd::ifstream fs2(string_two.c_str());\n\nif (fs1 || fs2) {\n  flag = true;\n}\n</code></pre>\n\n<p>This will set <code>flag</code> to <code>true</code> if either one is successfully opened for reading. If you would like to set the flag if either DO NOT exist, simply negate the expression in the <code>if</code> statement. You could also do the following (as mentioned above in a comment on your question):</p>\n\n<pre><code>flag = !fs1 || !fs2;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7821843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/331693c1d0ad094a8dcdc124543d88f0?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/7821843/nuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 43236806, "answer_count": 2, "score": -1, "last_activity_date": 1491410772, "creation_date": 1491409233, "last_edit_date": 1491410081, "question_id": 43236620, "link": "https://stackoverflow.com/questions/43236620/check-if-a-given-multiple-file-exist", "title": "Check if a given multiple file exist", "body": "<p>I'm new to C++. Got stuck in a portion of an existing code base, where I need to identify whether two files exist or not. If any of these are existing or both, we need to set a flag. </p>\n\n<p>The snippet looks like:</p>\n\n<pre><code>bool Flag = false;\nstring string_one, string_two;\nstring_one = \"/blah/blah/bhah1.ext\";\nstring_two = \"/blah/blah/bhah2.ext\";\n\nstd::ifstream fs1( string_one.c_str() );\nif ( (bool)fs1 ==  false )\n  Flag = true;\n\nstd::ifstream fs2( string_two.c_str() );\nif ( (bool)fs2 == false )\n  Flag = true;\n</code></pre>\n\n<p>Now, the issue is: </p>\n\n<p>if <code>string_one</code> is an existing file, the first <code>if</code> is working fine and value of Flag is not getting changed(still <code>false</code>). But if <code>string_two</code> is also existing, somehow the value of <code>Flag</code> is getting set to <code>true</code>. Ran debugger and have found that control is going inside <code>if ( (bool)fs2 == false )</code> at last. </p>\n\n<p>Is it because of using <code>std::ifstream</code> twice? </p>\n\n<p>I maybe asking a silly question. Thanks in advance!</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "visual-studio-2015", "shellexecute"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1491409347, "post_id": 43236596, "comment_id": 73543427, "body": "The IDE/compiler version has no effect on how <code>ShellExecute()</code> behaves, since it is a Win32 API function implemented at the OS layer. The same function gets called in both versions. In any case, try using <code>ShellExecuteEx()</code> instead, it provides more accurate error reporting than <code>ShellExecute()</code> does.  Also consider replacing <code>&quot;open&quot;</code> with <code>NULL</code> to invoke the default action, which might not be <code>&quot;open&quot;</code> to begin with, depending on the imaging software you have installed."}, {"owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1491410523, "post_id": 43236596, "comment_id": 73544139, "body": "Thank you for your comment. Tried to replace &quot;open&quot; with NULL but result is the same. Will try with ShellExecuteEx"}, {"owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1491411235, "post_id": 43236596, "comment_id": 73544592, "body": "tried with ShellExecuteEx, same problem, returns successful but it does not execute file :("}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1491412214, "post_id": 43236596, "comment_id": 73545117, "body": "Another variation to try, although this doesn&#39;t account for the call working in one version of Visual Studio and not another: see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ShellExecute function</a>, <b>Remarks</b> section closer to the bottom of the page.  There is a recommendation to use the <code>CoInitializeEx(...)</code> call to initialize COM before calls to <code>ShellExecute(...)</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1491413164, "post_id": 43236596, "comment_id": 73545696, "body": "@Flavio: it is quite possible that <code>ShellExecute&#47;Ex()</code> is successfully launching a new process, but that process is then failing to load the file.  From <code>ShellExecute&#47;Ex&#39;s</code> perspective, its portion of work was successful. Unfortunately, there is no way to detect this kind of failure when using <code>ShellExecute&#47;Ex()</code>. You would have to invoke the target app manually, such as by using <code>FindExecutable()</code> and <code>CreateProcess()</code> directly (which does not account for all the possible ways a file can be opened by the Shell, but should suffice for your particular example)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1491413351, "post_id": 43236596, "comment_id": 73545823, "body": "@Flavio: also note that <code>ShellExecuteEx()</code> returns a <code>BOOL</code>, not an <code>int</code>.  If it returns <code>FALSE</code>, use <code>GetLastError()</code> to get the actual error code."}], "answers": [{"comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1491414903, "post_id": 43238277, "comment_id": 73546847, "body": "Not a memory leak, a <i>resource</i> leak."}], "tags": [], "owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "is_accepted": false, "score": 0, "last_activity_date": 1491414635, "creation_date": 1491414635, "answer_id": 43238277, "question_id": 43236596, "link": "https://stackoverflow.com/questions/43236596/shellexecute-returns-success-but-does-not-execute-file/43238277#43238277", "title": "ShellExecute returns success, but does not execute file", "body": "<p>Well, looks like I found the problem and was weird indeed. Maybe a memory leak.\nCalling the function CreatePopupMenu() many times in a loop (like, tens of thousands) before a ShellExecute/ShellExecuteEx call, will make this problem happen.\nUnless we free the HMENUs using DestroyMenu BEFORE ShellExecute call.\nLooks like was a memory leak of some sort maybe, well thank you anyways for your answers.</p>\n"}], "owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491414635, "creation_date": 1491409149, "last_edit_date": 1491413320, "question_id": 43236596, "link": "https://stackoverflow.com/questions/43236596/shellexecute-returns-success-but-does-not-execute-file", "title": "ShellExecute returns success, but does not execute file", "body": "<p>I have a weird problem in one of my projects lately regarding the Win32 API <code>ShellExecute()</code> function.</p>\n\n<p>The program is compiled using Visual C++ 2015, in ANSI mode.</p>\n\n<pre><code>int ret = (int)ShellExecuteA(0, \"open\", \"C:\\\\Users\\\\Maverick\\\\stratum.jpg\", NULL, NULL, SW_SHOWNORMAL);\nprintf(\"ShellExecute return value: %i\\n\", ret);\n</code></pre>\n\n<p>In the above code, <code>ShellExecute()</code> returns 42, so it should be successful. However, it doesn't actually open the file.</p>\n\n<p>I don't have privilege problems, and it fails with the same problem even when running the program as an administrator.</p>\n\n<p>In fact, I can successfully run the file this way:</p>\n\n<pre><code>system(\"C:\\\\Users\\\\Maverick\\\\stratum.jpg\");\n</code></pre>\n\n<p>I don't want to be forced to use <code>system()</code>, though.</p>\n\n<p>Also, before I migrated the project to a newer Visual Studio, I was using Visual C++ 6.0, and the code worked fine.</p>\n\n<p>Any clues what may be the problem?</p>\n\n<hr>\n\n<p>EDIT: <code>ShellExecuteEx()</code> also returns successful (1), but does not open the file.</p>\n\n<pre><code>SHELLEXECUTEINFO ShExecInfo;\nShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);\nShExecInfo.fMask = NULL;\nShExecInfo.hwnd = NULL;\nShExecInfo.lpVerb = NULL;\nShExecInfo.lpFile = \"C:\\\\Users\\\\Maverick\\\\stratum.jpg\";\nShExecInfo.lpParameters = NULL;\nShExecInfo.lpDirectory = NULL;\nShExecInfo.nShow = SW_SHOWNORMAL;\nShExecInfo.hInstApp = NULL;\n\nint ret = (int)ShellExecuteExA(&amp;ShExecInfo);\n</code></pre>\n"}, {"tags": ["c++", "string", "algorithm", "find-occurrences"], "comments": [{"owner": {"reputation": 3944, "user_id": 5671993, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h7hZj.jpg?s=128&g=1", "display_name": "Vikhram", "link": "https://stackoverflow.com/users/5671993/vikhram"}, "edited": false, "score": 0, "creation_date": 1491409431, "post_id": 43236573, "comment_id": 73543477, "body": "Do the substrings have some interesting characteristics that can be exploited?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1491409557, "post_id": 43236573, "comment_id": 73543559, "body": "Just an idea: Did you try <code>strstr</code> on the <code>str.c_str()</code>?"}, {"owner": {"reputation": 4489, "user_id": 1809463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CNui3.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/1809463/mike"}, "edited": false, "score": 1, "creation_date": 1491409627, "post_id": 43236573, "comment_id": 73543608, "body": "Using a text index is magnitudes faster, but you have to create an index first. That wouldn&#39;t be worthwhile for only a few kB."}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 2, "creation_date": 1491409680, "post_id": 43236573, "comment_id": 73543639, "body": "As a quick recap of answers from that other question - do not search for each substring individually. There are algorithms to search for all substrings in single run which are much more efficient for such cases, like Aho-Corasick."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1491409811, "post_id": 43236573, "comment_id": 73543712, "body": "What is the <i>actual</i> problem you want to solve by this solution? <i>Why</i> do you need to find every possible sub-string? Maybe we can help you with that problem instead? Propose other data-structures or algorithms? Also please take some time to read about <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">the XY problem</a>."}, {"owner": {"reputation": 3944, "user_id": 5671993, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h7hZj.jpg?s=128&g=1", "display_name": "Vikhram", "link": "https://stackoverflow.com/users/5671993/vikhram"}, "edited": false, "score": 0, "creation_date": 1491409980, "post_id": 43236573, "comment_id": 73543817, "body": "You should try representing the substrings as a (Trie)[<a href=\"https://en.wikipedia.org/wiki/Trie]\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Trie]</a> and then match the <code>Trie</code> to the main string. This way, you will no be repeating the substring search 100K times (one for each substring). Also, partial string indexing on the string to be searched will provide you some relief"}, {"owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "reply_to_user": {"reputation": 3944, "user_id": 5671993, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h7hZj.jpg?s=128&g=1", "display_name": "Vikhram", "link": "https://stackoverflow.com/users/5671993/vikhram"}, "edited": false, "score": 0, "creation_date": 1491412741, "post_id": 43236573, "comment_id": 73545436, "body": "@Vikhram no, just bytes sequencies. Representing substring as Trie and then search looks similar to pre-KMP."}, {"owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1491412749, "post_id": 43236573, "comment_id": 73545442, "body": "@mch no, i didn&#39;t try, but this is not solution anyway - algos both of string::find, strstr non-optimized for counting"}, {"owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "reply_to_user": {"reputation": 4489, "user_id": 1809463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CNui3.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/1809463/mike"}, "edited": false, "score": 0, "creation_date": 1491412754, "post_id": 43236573, "comment_id": 73545445, "body": "@mike yep, but what kind of index? There is a lot of them: suffix/prefix trees/arrays and so on"}, {"owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1491412772, "post_id": 43236573, "comment_id": 73545457, "body": "@AndreyTurkin Thx, looks good. Where i can find list of that sort of algos (not only data structures)?"}, {"owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1491412782, "post_id": 43236573, "comment_id": 73545464, "body": "@Someprogrammerdude I don&#39;t need to find <i>every</i> possible substring. I&#39;ve already found those of i need and now i want to count their occurences. That&#39;s the actual problem."}, {"owner": {"reputation": 4489, "user_id": 1809463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CNui3.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/1809463/mike"}, "edited": false, "score": 0, "creation_date": 1491413398, "post_id": 43236573, "comment_id": 73545861, "body": "@EgorPuzyrev There are more, which have better performance guarantees (e.g. FM-Index). Just look at some succinct data structures/text indices and what their runtime and space complexity is. This is a state of the art C++ library: <a href=\"https://github.com/simongog/sdsl-lite\" rel=\"nofollow noreferrer\">github.com/simongog/sdsl-lite</a>"}], "owner": {"reputation": 99, "user_id": 2423017, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/39e350c60f19516c8637910f067a9f66?s=128&d=identicon&r=PG", "display_name": "EgorPuzyrev", "link": "https://stackoverflow.com/users/2423017/egorpuzyrev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "closed_date": 1491411663, "answer_count": 0, "score": 0, "last_activity_date": 1491409083, "creation_date": 1491409083, "question_id": 43236573, "link": "https://stackoverflow.com/questions/43236573/fastest-way-to-count-occurences-of-substrings-in-string", "closed_reason": "Duplicate", "title": "Fastest way to count occurences of substring(s) in string?", "body": "<p>I have large list of substrings (more than 100000) to count occurrences in large string (few hundred kb). The most common algo for cpp that i found in the internet is:</p>\n\n<pre><code>size_t countSubstring(const std::string&amp; str, const std::string&amp; sub) {\n    if (sub.length() == 0) return 0;\n    size_t count = 0, l = sub.length();\n    for (size_t offset = str.find(sub); offset != std::string::npos;\n    offset = str.find(sub, offset + l))\n    {\n        ++count;\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>But it's too slow for my purposes. Is there any faster way to do that?</p>\n\n<p>P.S. Also tried KMP algo, but it even slower.</p>\n\n<pre><code>std::vector&lt;size_t&gt; prefix_function(const std::string&amp; s) {\n    size_t n = (size_t)s.length();\n    std::vector&lt;size_t&gt; pi(n);\n    pi[0] = 0;\n\n    size_t j;\n    for(size_t i=1; i&lt;n; ++i) {\n        j = pi[i-1];\n        while(j&gt;0 &amp;&amp; s[i]!=s[j])\n            j = pi[j-1];\n        if(s[i]==s[j]) ++j;\n        pi[i] = j;\n    }\n    return pi;\n}\n\n\nsize_t count_using_KMP(const std::string&amp; S, const std::string&amp; pattern, size_t start) {\n\n    std::vector&lt;size_t&gt; prefix = prefix_function(pattern);\n\n    size_t counter=0, l=pattern.length(), k=0;\n    for(size_t i=start; i&lt;S.length(); ++i) {\n        while((k&gt;0) &amp;&amp; (pattern[k]!=S[i])) {\n            k = prefix[k-1];\n        }\n        if(pattern[k]==S[i]) {\n            k++;\n        }\n        if(k==l) {\n            counter++;\n            k=0;\n        }\n    }\n    return counter;\n}\n</code></pre>\n"}, {"tags": ["c++", "googlemock"], "answers": [{"tags": [], "owner": {"reputation": 1767, "user_id": 4110406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/64150ed89bffb39ecd38f1f573afaaed?s=128&d=identicon&r=PG&f=1", "display_name": "Ludwig Schulze", "link": "https://stackoverflow.com/users/4110406/ludwig-schulze"}, "is_accepted": true, "score": 6, "last_activity_date": 1491463109, "creation_date": 1491463109, "answer_id": 43248283, "question_id": 43236519, "link": "https://stackoverflow.com/questions/43236519/how-can-i-check-a-string-parameter-in-googlemock-that-is-passed-as-void-pointer/43248283#43248283", "title": "How can I check a string parameter in googlemock that is passed as void pointer", "body": "<p>This helped: <a href=\"https://groups.google.com/forum/#!topic/googlemock/-zGadl0Qj1c\" rel=\"noreferrer\">https://groups.google.com/forum/#!topic/googlemock/-zGadl0Qj1c</a></p>\n\n<p>The solution is to write my own parameter matcher that performs the necessary cast:</p>\n\n<pre><code>MATCHER_P(StrEqVoidPointer, expected, \"\") {\n  return std::string(static_cast&lt;char*&gt;(arg)) == expected;\n}\n</code></pre>\n\n<p>And use it instead of StrEq</p>\n\n<pre><code>  EXPECT_CALL(m, foo(StrEqVoidPointer(\"ExpectedString\"),2));\n</code></pre>\n"}], "owner": {"reputation": 1767, "user_id": 4110406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/64150ed89bffb39ecd38f1f573afaaed?s=128&d=identicon&r=PG&f=1", "display_name": "Ludwig Schulze", "link": "https://stackoverflow.com/users/4110406/ludwig-schulze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3410, "favorite_count": 0, "accepted_answer_id": 43248283, "answer_count": 1, "score": 2, "last_activity_date": 1491463109, "creation_date": 1491408927, "question_id": 43236519, "link": "https://stackoverflow.com/questions/43236519/how-can-i-check-a-string-parameter-in-googlemock-that-is-passed-as-void-pointer", "title": "How can I check a string parameter in googlemock that is passed as void pointer", "body": "<p>I would like to mock free C functions from a 3rd-party library. I know googlemock recommends to wrap the functions as methods in an interface class.</p>\n\n<p>Some C functions expect void* parameters, the interpretation of which depends on context. In one test case, a 0-terminated string is used for a void* parameter.</p>\n\n<p>In the mock object, I would like to check the string's content, when it was transmitted as a void*. When I try to use StrEq to check the string content, then it does not work:</p>\n\n<pre><code>error: no matching function for call to std::__cxx11::basic_string&lt;char&gt;::basic_string(void*&amp;)\n</code></pre>\n\n<p>I do not want to change the data type in the wrapper from void* to char* to make this work, since the data passed through this parameter can also be something else. What can I do to check the data pointed to by a void* with googlemock's parameter matchers, preferably comparing for string equality?</p>\n\n<p>The code. It would compile if you add some definition for function Foo and link against gmock_main.a, except for the above error.</p>\n\n<pre><code>#include &lt;gmock/gmock.h&gt;\n\n// 3rd party library function, interpretation of arg depends on mode\nextern \"C\" int Foo(void * arg, int mode);\n\n// Interface class to 3rd party library functions\nclass cFunctionWrapper {\npublic:\n  virtual int foo(void * arg, int mode) { Foo(arg,mode); }\n  virtual ~cFunctionWrapper() {}\n};\n\n// Mock class to avoid actually calling 3rd party library during tests\nclass mockWrapper : public cFunctionWrapper {\npublic:\n  MOCK_METHOD2(foo, int(void * arg, int mode));\n};\n\nusing ::testing::StrEq;\nTEST(CFunctionClient, CallsFoo) {\n  mockWrapper m;\n  EXPECT_CALL(m, foo(StrEq(\"ExpectedString\"),2));\n  char arg[] = \"ExpectedString\";\n  m.foo(arg, 2);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1491409003, "post_id": 43236477, "comment_id": 73543185, "body": "I believe the closest you can get is to use std::array instead of a C array."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1491409268, "post_id": 43236477, "comment_id": 73543379, "body": "STL containers manage their own memory, so, no, this isn&#39;t possible."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1491409279, "post_id": 43236477, "comment_id": 73543390, "body": "you know that you can loop from <code>begin</code> to <code>end</code> through a c array without having to get the data into a std container ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1491409506, "post_id": 43236477, "comment_id": 73543527, "body": "I wonder if a reinterpret cast can portably get you an <code>array&lt;T,N&gt;</code> reference to an array <code>T[N]</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1491409775, "post_id": 43236477, "comment_id": 73543695, "body": "C is a different language. Don&#39;t spam tags."}, {"owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1491467896, "post_id": 43236477, "comment_id": 73568861, "body": "I have to write a C-interface for another language and I want to be able to use my C++ code to access the data that is passed to me without having to copy it (I added an explanation in the question)"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1491409212, "creation_date": 1491409212, "answer_id": 43236611, "question_id": 43236477, "link": "https://stackoverflow.com/questions/43236477/stl-array-from-c-array-without-copying/43236611#43236611", "title": "STL array from C array without copying", "body": "<p>No, there's not anything in the standard library for that particular task (though <code>std::array</code> sort of reverses the situation: it doesn't let you wrap around an existing array, but does basically guarantee that its storage will be a simple array).</p>\n\n<p>The <a href=\"https://github.com/Microsoft/GSL/tree/master/include/gsl\" rel=\"nofollow noreferrer\">Guideline Support Library</a> does include a <code>span</code> class for pretty much this purpose though.</p>\n"}, {"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491409591, "post_id": 43236628, "comment_id": 73543588, "body": "yeah, this is part of the reason for preferring the new (well, C++11) free functions to the old methods."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1491409623, "post_id": 43236628, "comment_id": 73543606, "body": "The first example doesn&#39;t use the <code>b</code> and <code>e</code> variables in the <code>for</code> loop. They can be used in the second example, though: <code>for (auto i = std::begin(a); i != std::end(a); ++i)</code>, which is essentially what <code>for (auto i : a)</code> does internally."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1491409733, "post_id": 43236628, "comment_id": 73543673, "body": "True, that&#39;s just a disconnected snippet showing that the functions exist."}, {"owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1491466559, "post_id": 43236628, "comment_id": 73568000, "body": "Yeah, I wanted <code>a.begin()</code> and <code>a.end()</code>. But I guess I shouldn&#39;t have been using them in the first place to access STL containers."}, {"owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "edited": false, "score": 0, "creation_date": 1491467794, "post_id": 43236628, "comment_id": 73568773, "body": "Actually. This doesn&#39;t solve the issue when I need to handle an pointer of type <code>int*</code> which I know points to an array of a certain size."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1491471915, "post_id": 43236628, "comment_id": 73571843, "body": "True - if the array already decayed to a pointer, you need something to explicitly reintroduce information about the length - avoiding decay in the first place is probably simplest."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 6, "last_activity_date": 1491410430, "last_edit_date": 1491410430, "creation_date": 1491409260, "answer_id": 43236628, "question_id": 43236477, "link": "https://stackoverflow.com/questions/43236477/stl-array-from-c-array-without-copying/43236628#43236628", "title": "STL array from C array without copying", "body": "<blockquote>\n  <p>but implements the usual functions ...</p>\n</blockquote>\n\n<p>You mean like the array overloads of <a href=\"http://en.cppreference.com/w/cpp/iterator/begin\" rel=\"nofollow noreferrer\"><code>std::begin</code></a> and <a href=\"http://en.cppreference.com/w/cpp/iterator/end\" rel=\"nofollow noreferrer\"><code>std::end</code></a>, which enable new-style <code>for</code> loops to work automatically?</p>\n\n<blockquote>\n  <p>...and iterators</p>\n</blockquote>\n\n<p>And the fact that raw pointers are automatically RandomAccessIterators, because that's how iterators were designed?</p>\n\n<hr>\n\n<p>That is, the modern idioms</p>\n\n<pre><code>int a[] = {1, 2, 3, 4, 5, 6};\n// demonstrate that the overloads exist ...\nauto b = std::begin(a);\nauto e = std::end(a);\n// and that b,e work correctly as InputIterators ...\nstd::cout &lt;&lt; \"distance=\" &lt;&lt; (std::distance(b, e)) &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"elements=\" &lt;&lt; (sizeof(a)/sizeof(a[0])) &lt;&lt; '\\n';\n// and further that they're explicitly described as RandomAccessIterators ...\nstd::cout &lt;&lt; \"random access=\"\n    &lt;&lt; std::is_same&lt;std::iterator_traits&lt;decltype(b)&gt;::iterator_category,\n                    std::random_access_iterator_tag&gt;::value &lt;&lt; '\\n';\n// and finally that new-style for just works ...\nstd::cout &lt;&lt; \"{\";\nfor (auto i : a) {\n    std::cout &lt;&lt; i &lt;&lt; ',';\n}\nstd::cout &lt;&lt; \"}\\n\";\n</code></pre>\n\n<p>will give the expected output:</p>\n\n<pre><code>distance=6\nelements=6\nrandom access=1\n{1,2,3,4,5,6,}\n</code></pre>\n\n<p>You're out of luck if you wanted to write</p>\n\n<pre><code>for (auto i = a.begin(); i != a.end(); ++i)\n</code></pre>\n\n<p>instead, but why would you?</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1491409996, "creation_date": 1491409996, "answer_id": 43236853, "question_id": 43236477, "link": "https://stackoverflow.com/questions/43236477/stl-array-from-c-array-without-copying/43236853#43236853", "title": "STL array from C array without copying", "body": "<p>Visual Studio has an <a href=\"https://msdn.microsoft.com/en-us/library/hh305260.aspx\" rel=\"nofollow noreferrer\"><code>array_view</code> class</a> for this very purpose:</p>\n\n<blockquote>\n  <p>Represents an N-dimensional view over the data held in another container.</p>\n</blockquote>\n"}], "owner": {"reputation": 1366, "user_id": 4007564, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01af7cacfa049e7dc6a9f6132bcdafce?s=128&d=identicon&r=PG&f=1", "display_name": "Tohiko", "link": "https://stackoverflow.com/users/4007564/tohiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 2, "accepted_answer_id": 43236628, "answer_count": 3, "score": 2, "last_activity_date": 1491467999, "creation_date": 1491408791, "last_edit_date": 1491467999, "question_id": 43236477, "link": "https://stackoverflow.com/questions/43236477/stl-array-from-c-array-without-copying", "title": "STL array from C array without copying", "body": "<p>Is there a way to encapsulate a C-array with a fixed size in an STL container?\nIn other words, let's say I have a C-array <code>arrC</code> with size <code>size</code>, I want a container (that does not involve copying) that uses <code>arrC</code> but implements the usual functions and iterators. This is the use case I am thinking about:</p>\n\n<pre><code>int arrC[] = {1,2,3,4,5,6};\nauto myarr = c_array(arrC, 6);   // The data is not saved internally here, just the pointer and the size\nfor (auto itr=myarr.begin();itr!=myarr.end();++itr)\n     std::cout &lt;&lt; *itr &lt;&lt; std::endl;\n</code></pre>\n\n<p>Of course, I understand that this might be unsafe since I can free arrC.</p>\n\n<p>EDIT: The reason I need this is because my C++ provides a C-interface to other languages (including Python) and I want to be able to process the data that is passed to my C++ functions without having to copy it.</p>\n"}, {"tags": ["android", "c++", "multithreading", "boost"], "comments": [{"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1491413223, "post_id": 43236466, "comment_id": 73545735, "body": "Do you have a backtrace showing where the pure virtual method is called from?"}, {"owner": {"reputation": 1, "user_id": 7819834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc0d047b03f3a45903f28c26794bfb9?s=128&d=identicon&r=PG&f=1", "display_name": "guikitach", "link": "https://stackoverflow.com/users/7819834/guikitach"}, "reply_to_user": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1491474898, "post_id": 43236466, "comment_id": 73574009, "body": "Sadly not,  I ran it again today and got a segfault. I will try to run gdb on it to see what&#39;s going on. I will post the results when I get them."}], "owner": {"reputation": 1, "user_id": 7819834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc0d047b03f3a45903f28c26794bfb9?s=128&d=identicon&r=PG&f=1", "display_name": "guikitach", "link": "https://stackoverflow.com/users/7819834/guikitach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491408748, "creation_date": 1491408748, "question_id": 43236466, "link": "https://stackoverflow.com/questions/43236466/c-boost-log-stop-multi-thread-on-android", "title": "c++ boost log stop: multi-thread on android", "body": "<p>I'm working on logs for a project which need the possibility to filter those logs (there is currently a tone of them, so much that a lambda person cannot track the flow of error and debug).</p>\n\n<p>For this I tried using boost::log since it's rich in features and provided all I needed, however boost::log crash for a reason I don't understand.\nThe project is running under android, we use boost 1.57 and gcc 4.9.2.</p>\n\n<p>We tried running the code on a linux machine and there is no problem.\nHere is a small app in which the problem arise.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;boost/log/sources/logger.hpp&gt;\n#include &lt;boost/log/common.hpp&gt;\n#include &lt;boost/log/expressions.hpp&gt;\n#include &lt;boost/log/attributes.hpp&gt;\n#include &lt;boost/log/support/date_time.hpp&gt;\n\n#include &lt;boost/log/utility/setup/file.hpp&gt;\n#include &lt;boost/log/utility/setup/console.hpp&gt;\n\nnamespace logging = boost::log;\nnamespace expr = boost::log::expressions;\nnamespace attrs = boost::log::attributes;\nnamespace src = boost::log::sources;\nnamespace keywords = boost::log::keywords;\n\n\n// Here we define our application severity levels.\nenum class SeverityLevel : size_t {\n    TRACE,\n        DEBUG,\n        INFO,\n        WARN,\n        ERROR\n        };\n\n// The formatting logic for the severity level\ntemplate&lt; typename CharT, typename TraitsT &gt;\ninline std::basic_ostream&lt;CharT, TraitsT&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;CharT, TraitsT&gt; &amp;strm, SeverityLevel lvl) {\n    static const char* const str[] = {\n        \"TRACE\",\n        \"DEBUG\",\n        \"INFO \",\n        \"WARN \",\n        \"ERROR\"\n    };\n\n    if (static_cast&lt;size_t&gt;(lvl) &lt; (sizeof(str) / sizeof(*str))) {\n        strm &lt;&lt; str[static_cast&lt;size_t&gt;(lvl)];\n    } else {\n        strm &lt;&lt; static_cast&lt;size_t&gt;(lvl);\n    }\n\n    return strm;\n}\n\nconst size_t N = 30;\n\n//NA_LOG_SUBSYSTEM(DEFAULT);\n\nBOOST_LOG_INLINE_GLOBAL_LOGGER_INIT(my_logger, src::severity_logger_mt&lt;SeverityLevel&gt;)\n{\n    src::severity_logger_mt&lt;SeverityLevel&gt; logger;\n    logger.add_attribute(\"Tag\",  attrs::constant&lt;std::string&gt;(\"DEFAULT\"));\n    logger.add_attribute(\"File\", attrs::constant&lt;std::string&gt;(__FILE__));\n\n    return logger;\n}\nvoid init() {\n\n    // The first thing we have to do is\n    // to set up the logging sinks - i.e. where the logs will be written to.\n    logging::add_console_log(std::clog,\n                            keywords::format = expr::format(\"%1%|%2%|%3%| %4%\")\n                            % expr::format_date_time&lt;boost::posix_time::ptime&gt;(\"TimeStamp\", \"%d.%m.%Y %H:%M:%S.%f\")\n                            % expr::attr&lt;SeverityLevel&gt;(\"Severity\")\n                            % expr::attr&lt;std::string&gt;(\"Tag\")\n                            % expr::message\n        );\n\n    attrs::local_clock TimeStamp;\n    logging::core::get()-&gt;add_global_attribute(\"TimeStamp\", TimeStamp);\n\n    logging::core::get()-&gt;set_filter (\n        //Write all records with \"info\" severity or higher\n        expr::attr&lt;SeverityLevel&gt;(\"Severity\").or_default(SeverityLevel::INFO) &gt;= SeverityLevel::INFO\n        );\n\n}\n\nint main(int argc, char *argv[]) {\n\n\n    std::cout &lt;&lt; \"------------ Test Log2 ----------------\" &lt;&lt; std::endl;\n\n    init();\n    src::logger_mt lg;\n    std::vector&lt;std::thread&gt; threads;\n    for (size_t i=0; i&lt;N; ++i) {\n        threads.emplace_back([&amp;lg, i]{\n\n                while (true) {\n                    BOOST_LOG_SEV(my_logger::get(), SeverityLevel::INFO) &lt;&lt; \"Thread: \" &lt;&lt; i;\n                }\n            });\n    }\n\n    for (auto&amp; t : threads) {\n        t.join();\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Here is a sample of the error I get, the program crash after few minutes.</p>\n\n<pre><code>05.04.2017 18:07:37.806122|INFO |DEFAULT| Thread: 5\n05.04.2017 18:07:37.806015|INFO |DEFAULT| Thread: 15\n05.04.2017 18:07:37.801120|INFO |DEFAULT| Thread: 4\n05.04.2017 18:07:37.800895|INFO |DEFAULT| Thread: 25\n05.04.2017 18:07:37.799257|INFO |DEFAULT| Thread: 21\n05.04.2017 18:07:37.797030|INFO |DEFAULT| Thread: 16\n05.04.2017 18:07:37.800260|INFO |DEFAULT| Thread: 8\n05.04.2017 18:07:37.797222|INFO |DEFAULT| Thread: 14\n05.04.2017 18:07:37.793293|INFO |DEFAULT| Thread: 3\n05.04.2017 18:07:37.806708|INFO |DEFAULT| Thread: 18\n05.04.2017 18:07:37.793732|INFO |DEFAULT| Thread: 12\n05.04.2017 18:07:37.784446|INFO |DEFAULT| Thread: 23\n05.04.2017 18:07:37.807030|INFO |DEFAULT| Thread: 20\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\npure virtual method called\nterminate called without an active exception\nterminate called recursively\nterminate called recursively\n</code></pre>\n"}, {"tags": ["c++", "function-pointers", "function-parameter"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1491408707, "post_id": 43236420, "comment_id": 73543004, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The error is from how you call the function. You try to call it with a pointer to a member function while it expects a pointer to a free function"}, {"owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491408742, "post_id": 43236420, "comment_id": 73543028, "body": "How can I make it expect a pointer to a member function instead?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491408933, "post_id": 43236420, "comment_id": 73543146, "body": "...btw the error already tells you all you need to know ;)"}, {"owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1491409232, "post_id": 43236420, "comment_id": 73543359, "body": "Okay, but when I change the signature of the function to expect <code>Solution::f</code>, I get <code>qualified name is not allowed</code>. I did some googling, and apparently I am not allowed to specify a class name here? What gives?"}], "answers": [{"comments": [{"owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "edited": false, "score": 0, "creation_date": 1491411378, "post_id": 43237037, "comment_id": 73544667, "body": "I&#39;m aware; unfortunately, my requirements dictate that I do it by passing a function parameter in such a manner."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "edited": false, "score": 0, "creation_date": 1491411538, "post_id": 43237037, "comment_id": 73544749, "body": "@Airhead not sure if I understand you. If the answer didnt help, you need to provide the code (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)"}, {"owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "edited": false, "score": 0, "creation_date": 1491411595, "post_id": 43237037, "comment_id": 73544779, "body": "My solution ended up being just to use a free function instead. Thanks though!"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 3, "last_activity_date": 1491410974, "last_edit_date": 1491410974, "creation_date": 1491410616, "answer_id": 43237037, "question_id": 43236420, "link": "https://stackoverflow.com/questions/43236420/c-function-parameters-wont-compile/43237037#43237037", "title": "C++ function parameters wont compile", "body": "<p>Function pointers can be tedious to work with, this is where <code>typedef</code>s come in handy:</p>\n\n<pre><code>typdef R (*FREE_FUNC)(ARGS);\n</code></pre>\n\n<p>makes <code>FREE_FUNC</code> an alias for function pointers of type <code>R(*)(ARGS)</code>, ie functions with <code>ARGS</code> parameter and <code>R</code> return type. It may look a bit strange, that the new name appears in the middle on the typdef. However, everywhere else using function pointers is then much nicer, for example</p>\n\n<pre><code>typedef void (*LOGGER)(R,ARGS);\nR decorate(FREE_FUNC func,LOGGER logger,ARGS args){\n    R result = func(args);\n    logger(result,args);\n    return result;\n}\n</code></pre>\n\n<p>Member function pointers are different, because you need an object to call them:</p>\n\n<pre><code>struct Foo {\n    void foo(){std::cout &lt;&lt; \"moo \\n\";}\n    void moo(){std::cout &lt;&lt; \"xyz \\n\";}\n};\n\ntypedef void (Foo::*FOO_MEMBER_FUNC)();\n\nvoid fooCaller(Foo f,FOO_MEMBER_FUNC mf){\n    (f.*mf)();\n    // ... or ...\n    Foo* f_ptr = &amp;f;\n    (f_ptr-&gt;*mf)();\n}\n\nint main() {\n    FOO_MEMBER_FUNC foo_ptr = &amp;Foo::foo;\n    FOO_MEMBER_FUNC moo_ptr = &amp;Foo::moo;\n    Foo f;\n    fooCaller(f,foo_ptr);\n    fooCaller(f,moo_ptr);\n}\n</code></pre>\n\n<p>I should also mention, that there are better ways to pass functions. You can take a look at <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">std::function</a>.</p>\n"}], "owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1491411634, "accepted_answer_id": 43237037, "answer_count": 1, "score": 0, "last_activity_date": 1491410974, "creation_date": 1491408604, "last_edit_date": 1491408790, "question_id": 43236420, "link": "https://stackoverflow.com/questions/43236420/c-function-parameters-wont-compile", "closed_reason": "Duplicate", "title": "C++ function parameters wont compile", "body": "<p>So I have a function with the prototype</p>\n\n<pre><code>double Solution::bisect\n(\n    double xLeft,\n    double xRight,\n    double epsilon,\n    double f(double x, EquCoeffs coeffsStruct),\n    bool &amp;error\n);\n</code></pre>\n\n<p>where function <code>f</code> is prototyped like this</p>\n\n<pre><code>double Solution::f(double x, EquCoeffs coeffsStruct);\n</code></pre>\n\n<p>The error I am getting in Visual Studio is <code>argument of type \"double(Solution::*)(double x, Solution::EquCoeffs coeffsStruct)\" is incompatible with parameter of type \"double(*)(double x, Solution::EquCoeffs coeffsStruct)\"</code></p>\n\n<p>which occurs when I try to call <code>bisect(xLeft, xRight, epsilon, f, error);</code>\nwhere <code>xRight</code> <code>xLeft</code> <code>epsilon</code>, are type <code>double</code> and <code>error</code> is type <code>bool</code>.</p>\n\n<p>Why won't this compile? I'm not sure I understand the error. How is a <code>double(Solution::*)</code> different than <code>double(*)</code>?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491408804, "post_id": 43236412, "comment_id": 73543067, "body": "<code>auto myStack = getStack();</code> makes a copy, it does not deduce the reference."}, {"owner": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491408880, "post_id": 43236412, "comment_id": 73543113, "body": "So, how would I go about properly accessing the stack by reference?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491409068, "post_id": 43236412, "comment_id": 73543229, "body": "You can probably use <code>auto &amp; myStack = getStack();</code>, but you haven&#39;t shown what <code>getStack()</code> is. You have the same issue with <code>std::vector&lt;Layer&gt; layerStack = Stack::getLayers();</code>."}, {"owner": {"reputation": 167, "user_id": 6770922, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/36f2d618ccbde8f5671120528c6088be?s=128&d=identicon&r=PG&f=1", "display_name": "Catch_0x16", "link": "https://stackoverflow.com/users/6770922/catch-0x16"}, "edited": false, "score": 0, "creation_date": 1491409126, "post_id": 43236412, "comment_id": 73543284, "body": "Please show us the main.cpp and where you are creating it. I&#39;d guess (but don&#39;t have any evidence to back it up) that the stack created in &#39;getStack()&#39; is going out of scope immediately."}, {"owner": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "edited": false, "score": 0, "creation_date": 1491409924, "post_id": 43236412, "comment_id": 73543783, "body": "Why was this question down voted?"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491409280, "post_id": 43236540, "comment_id": 73543392, "body": "<code>Layer newLayer = Layer();</code> might as well just be <code>Layer newLayer;</code>."}, {"owner": {"reputation": 514, "user_id": 7671559, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wcE1huhny94/AAAAAAAAAAI/AAAAAAAAAGU/Wmov4fen7p0/photo.jpg?sz=128", "display_name": "Gert Wollny", "link": "https://stackoverflow.com/users/7671559/gert-wollny"}, "edited": false, "score": 1, "creation_date": 1491409768, "post_id": 43236540, "comment_id": 73543692, "body": "Considering that <code>AddLayer()</code>is a member function of <code>Stack</code> it would be simpler to skip calling <code>Stack::GetLayers()</code> and directly call <code>_layer.push_back(newLayer)</code>"}, {"owner": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "edited": false, "score": 0, "creation_date": 1491410055, "post_id": 43236540, "comment_id": 73543859, "body": "I didn&#39;t realize I could call _layers directly. Thanks."}], "tags": [], "owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "is_accepted": false, "score": 0, "last_activity_date": 1491408990, "creation_date": 1491408990, "answer_id": 43236540, "question_id": 43236412, "link": "https://stackoverflow.com/questions/43236412/accessing-a-protected-member/43236540#43236540", "title": "Accessing a protected member", "body": "<p>There are 3 issues you have to address.</p>\n\n<p>1.<code> Layer* newLayer = new Layer()</code> will dynamically allocate a Layer object, but when you insert it into your vector, you dereference it, so you end up doing a <code>push_back</code> on a COPY of your <code>Layer</code> object. You could have just used <code>Layer newLayer = Layer()</code>, or if I understand your intent correctly a vector of Layer pointers:</p>\n\n<pre><code>vector&lt;Layer*&gt; _layers;\n</code></pre>\n\n<ol start=\"2\">\n<li><p>In order to be editable, your <code>getLayers()</code> function must NOT return a const-ref to the _layers vector. Change it to <code>std::vector&amp; getLayers();</code></p></li>\n<li><p>Finally, <code> std::vector layerStack = Stack::getLayers();</code> creates a COPY of the vector returned by <code>getLayers()</code>. Change it to <code> std::vector&amp; layerStack = Stack::getLayers()</code></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "edited": false, "score": 0, "creation_date": 1491409729, "post_id": 43236542, "comment_id": 73543670, "body": "I think this was the best example which now seems to work.  I changed my getter function to look like your last one (updating both the header and cpp file).  Then, I call the getter like this: <code>std::vector&lt;Layer&gt;&amp; layerStack = Stack::getLayers();</code>  Then, I&#39;m able to call <code>layerStack.push_back(*newLayer);</code> and it appears to add it to the stack."}, {"owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "reply_to_user": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "edited": false, "score": 0, "creation_date": 1491409994, "post_id": 43236542, "comment_id": 73543824, "body": "@andyopayne Keep in mind that the other comments about you pushing a <i>copy</i> of your layer are accurate. The layer returned from <code>AddLayer</code> is not the same as the layer in the <code>_layers</code>. You probably need to make <code>_layers</code> a <code>vector&lt;unique_ptr&lt;Layer&gt;&gt;</code> instead (safer than a raw pointer)."}, {"owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "reply_to_user": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "edited": false, "score": 0, "creation_date": 1491410159, "post_id": 43236542, "comment_id": 73543921, "body": "Also, FYI, you don&#39;t need to qualify the call to <code>getLayers</code> with <code>Stack::</code> from inside a member function of <code>Stack</code>."}], "tags": [], "owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "is_accepted": true, "score": 2, "last_activity_date": 1491408991, "creation_date": 1491408991, "answer_id": 43236542, "question_id": 43236412, "link": "https://stackoverflow.com/questions/43236412/accessing-a-protected-member/43236542#43236542", "title": "Accessing a protected member", "body": "<p>The problem is that <code>layerStack</code> is a local copy of <code>_layers</code>:</p>\n\n<pre><code>std::vector&lt;Layer&gt; layerStack = Stack::getLayers();\n</code></pre>\n\n<p>You are pushing your new layer to this local copy, not to your data member. You need to take a reference to your data member instead:</p>\n\n<pre><code>std::vector&lt;Layer&gt;&amp; layerStack = Stack::getLayers();\n</code></pre>\n\n<p>Alas, this won't compile because your <code>getLayers</code> function returns a <code>const</code> reference. You need to add a non-<code>const</code> counterpart:</p>\n\n<pre><code>std::vector&lt;Layer&gt;&amp; getLayers();\n</code></pre>\n"}], "owner": {"reputation": 1122, "user_id": 1394922, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/dbc3851e1aa347c35ae22b2d9650d647?s=128&d=identicon&r=PG", "display_name": "andyopayne", "link": "https://stackoverflow.com/users/1394922/andyopayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 43236542, "answer_count": 2, "score": -1, "last_activity_date": 1491408991, "creation_date": 1491408575, "last_edit_date": 1491408718, "question_id": 43236412, "link": "https://stackoverflow.com/questions/43236412/accessing-a-protected-member", "title": "Accessing a protected member", "body": "<p>I'm new to C++ and struggling to setup a proper class with private members and accessing them. Basically, I have a vector of Layers which make up a Stack.  I'd like to create a simple function which simply adds a layer to the stack.  I've tried to simplify this example to explain my problem.</p>\n\n<pre><code>// Stack.h\nnamespace NS {\n    class Stack\n    {\n    public:\n        Stack() {\n\n        }\n        virtual ~Stack() {\n\n        }\n\n        std::vector&lt;Layer&gt; const &amp;getLayers() const;\n\n        virtual Layer* AddLayer(TextureBase texture);\n\n    protected:\n        std::vector&lt;Layer&gt; _layers;\n}\n</code></pre>\n\n<p>This is my cpp file</p>\n\n<pre><code>//Stack.cpp\nnamespace NS {\n\n    std::vector&lt;Layer&gt; const &amp;Stack::getLayers() const { \n        return _layers; \n    }\n\n    Layer* Stack::AddLayer(TextureBase texture) {\n        Layer* newLayer = new Layer();\n        newLayer-&gt;setTexture(texture);\n\n        std::vector&lt;Layer&gt; layerStack = Stack::getLayers();\n        layerStack.push_back(*newLayer);\n\n        return newLayer;\n    }\n}\n</code></pre>\n\n<p>In my main file I create the stack and then try to add the layer like this:</p>\n\n<pre><code>auto myStack = getStack();\nmyStack-&gt;AddLayer(myTexture);\n</code></pre>\n\n<p>However, when I place a breakpoint after this line, myStack doesn't contain any layers (the size is 0).  I can step through the AddLayer function and it does appear to add the Layer to the Stack... but perhaps it's not referencing the vector correctly.  Can anyone provide some guidance as to why this is occurring?</p>\n"}, {"tags": ["c++", "string", "parsing", "fractions"], "comments": [{"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1491408384, "post_id": 43236254, "comment_id": 73542749, "body": "Well you can do: <a href=\"http://stackoverflow.com/questions/14265581/parse-split-a-string-in-c-using-string-delimiter-standard-c\" title=\"parse split a string in c using string delimiter standard c\">stackoverflow.com/questions/14265581/&hellip;</a> to split the string and you can do <a href=\"http://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c\" title=\"how to parse a string to an int in c\">stackoverflow.com/questions/194465/&hellip;</a>  to convert the strings to an int."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1491408578, "post_id": 43236254, "comment_id": 73542890, "body": "For simple tasks you can do this <code>int a, b;  char c; std::cin &gt;&gt; a &gt;&gt; c &gt;&gt; b;</code>"}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1491408962, "post_id": 43236254, "comment_id": 73543166, "body": "I forgot to add that you can use <code>stringstream</code> object instead <code>cin</code>"}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 6770922, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/36f2d618ccbde8f5671120528c6088be?s=128&d=identicon&r=PG&f=1", "display_name": "Catch_0x16", "link": "https://stackoverflow.com/users/6770922/catch-0x16"}, "is_accepted": false, "score": 1, "last_activity_date": 1491408651, "creation_date": 1491408651, "answer_id": 43236434, "question_id": 43236254, "link": "https://stackoverflow.com/questions/43236254/c-splitting-string-input-into-two-ints/43236434#43236434", "title": "C++ splitting string input into two ints", "body": "<p>For something quite simple like \"2/3\" you could use <a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow noreferrer\">string.find</a> and <a href=\"http://www.cplusplus.com/reference/string/string/substr/\" rel=\"nofollow noreferrer\">string.substr</a></p>\n\n<p><a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow noreferrer\">string.find</a> will return the position in your string that the '/' character resides. You can then use <a href=\"http://www.cplusplus.com/reference/string/string/substr/\" rel=\"nofollow noreferrer\">string.substr</a> to split the string both before and after the '/' character. Don't have time to write a code example but if you're really stuck, PM me and I'll knock something up when I get home.</p>\n"}, {"tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": false, "score": 0, "last_activity_date": 1491409117, "creation_date": 1491409117, "answer_id": 43236583, "question_id": 43236254, "link": "https://stackoverflow.com/questions/43236254/c-splitting-string-input-into-two-ints/43236583#43236583", "title": "C++ splitting string input into two ints", "body": "<p>Run the following with the -std=c++ 11 flag specified if using g++. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nvoid find_num_denom(int&amp; num, int&amp; denom, std::string input) {\n    int slash_index = input.find(\"/\");\n    num = std::stoi(input.substr(0, slash_index));\n    denom = std::stoi(input.substr(slash_index + 1, input.length()));\n}\n\nint main() {\n    int n,d;\n    find_num_denom(n, d, \"23/52\");\n    std::cout&lt;&lt;n&lt;&lt;\"  \"&lt;&lt;d&lt;&lt;\"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>this returns 23   52 for me. Let me know if you have any problems</p>\n"}], "owner": {"reputation": 11, "user_id": 7492494, "user_type": "registered", "profile_image": "https://graph.facebook.com/1452377934773574/picture?type=large", "display_name": "Alex Duane Breault", "link": "https://stackoverflow.com/users/7492494/alex-duane-breault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491425711, "creation_date": 1491408164, "last_edit_date": 1491425711, "question_id": 43236254, "link": "https://stackoverflow.com/questions/43236254/c-splitting-string-input-into-two-ints", "title": "C++ splitting string input into two ints", "body": "<p>How do I split a <code>string</code> input into two different <code>int</code>s?</p>\n\n<p>I am writing a program to input two different fractions (like <code>2/3</code>) and am wanting to read in the <code>2/3</code> as a string and split it by a delimiter (the <code>/</code>).</p>\n\n<p>Example:</p>\n\n<pre><code>Input: 2/3\nValues:\nint num = 2;\nint denom = 3;\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>Input: 11/5\nValues:\nint num = 11;\nint denom = 5;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1491408511, "post_id": 43236206, "comment_id": 73542846, "body": "You may consider using a template aliases instead of a type. Or at least inherit vector&#39;s constructors."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7821748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SSvGEekMCRE/AAAAAAAAAAI/AAAAAAAAAnE/OI8hED9G5dE/photo.jpg?sz=128", "display_name": "Tom Saunders", "link": "https://stackoverflow.com/users/7821748/tom-saunders"}, "edited": false, "score": 0, "creation_date": 1491408684, "post_id": 43236288, "comment_id": 73542982, "body": "Thanks! that is a much more helpful message. That fixes it for me."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1491408265, "creation_date": 1491408265, "answer_id": 43236288, "question_id": 43236206, "link": "https://stackoverflow.com/questions/43236206/inherit-from-property-of-templated-class-within-templated-class/43236288#43236288", "title": "inherit from property of templated class within templated class", "body": "<p>Clang is more helpful here:</p>\n\n<pre>main.cpp:12:39: fatal error: template argument for template type parameter\n                             must be a type; did you forget 'typename'?</pre>\n\n<p>And indeed, you need <code>typename</code> to disambiguate the dependent type:</p>\n\n<pre><code>class BaseVector : public std::vector&lt;typename Base&lt;T&gt;::SharedPtr&gt;\n//                                    ^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7821748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SSvGEekMCRE/AAAAAAAAAAI/AAAAAAAAAnE/OI8hED9G5dE/photo.jpg?sz=128", "display_name": "Tom Saunders", "link": "https://stackoverflow.com/users/7821748/tom-saunders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 43236288, "answer_count": 1, "score": 1, "last_activity_date": 1491408379, "creation_date": 1491408065, "last_edit_date": 1491408379, "question_id": 43236206, "link": "https://stackoverflow.com/questions/43236206/inherit-from-property-of-templated-class-within-templated-class", "title": "inherit from property of templated class within templated class", "body": "<p>I'm trying to do the following:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T&gt;\nclass Base\n{\npublic:\n    using SharedPtr = std::shared_ptr&lt;Base&lt;T&gt;&gt;;\n};\n\ntemplate&lt;typename T&gt;\nclass BaseVector : public std::vector&lt;Base&lt;T&gt;::SharedPtr&gt;\n{};\n\nint main(int argc, char* argv[])\n{\n    BaseVector&lt;int&gt; v;\n    return 0;\n}\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>$ g++ -std=c++11 -o template template.cpp\ntemplate.cpp:12:57: error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;class _Tp, class _Alloc&gt; class std::vector\u2019\nclass BaseVector : public std::vector&lt;Base&lt;T&gt;::SharedPtr&gt;\ntemplate.cpp:12:57: note:   expected a type, got \u2018Base&lt;T&gt;::SharedPtr\u2019\ntemplate.cpp:12:57: error: template argument 2 is invalid\n</code></pre>\n\n<p>I gather this is because the compiler does not know that Base::SharedPtr is a type. How do I define it in the template arguments of BaseVector such that I can inherit from properties of Base?</p>\n"}, {"tags": ["c++", "algorithm", "recursion", "graph"], "comments": [{"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 1, "creation_date": 1491408281, "post_id": 43236187, "comment_id": 73542677, "body": "Maybe it has something to do with passing <code>g</code> by value. Try passing it by reference. The <code>g</code> in which you mark all nodes as visited is not the same <code>g</code> available to the other recursive calls."}, {"owner": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "edited": false, "score": 0, "creation_date": 1491408414, "post_id": 43236187, "comment_id": 73542761, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>  Specifically in this case, you seem sure that it&#39;s staying in a for loop -- therefore <code>i&lt;(s-&gt;get_no_edges())</code> is true. So look at <code>i</code> and <code>s-&gt;get_no_edges()</code> in a debugger (or use <code>cout</code>, the poor-man&#39;s-debugger), and see for yourself why the condition remains true."}, {"owner": {"reputation": 160, "user_id": 5731841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NSoa0.jpg?s=128&g=1", "display_name": "sigma", "link": "https://stackoverflow.com/users/5731841/sigma"}, "reply_to_user": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "edited": false, "score": 0, "creation_date": 1491408550, "post_id": 43236187, "comment_id": 73542873, "body": "@IVlad I tried it and it seems to be working now! Such a silly mistake. Thanks!"}, {"owner": {"reputation": 69, "user_id": 7793566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff9f77ee10ff5760e03e397a6027e4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Stante", "link": "https://stackoverflow.com/users/7793566/alexander-stante"}, "edited": false, "score": 0, "creation_date": 1491408589, "post_id": 43236187, "comment_id": 73542903, "body": "I don&#39;t know your implementation of <code>graph</code> but are you sure you want to pass it by value and not by reference to <code>dfs</code>? Maybe you create a copy of your graph every time you invoke it? But in general, for a DFS implementation there are <b>many</b> issues in your code."}, {"owner": {"reputation": 160, "user_id": 5731841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NSoa0.jpg?s=128&g=1", "display_name": "sigma", "link": "https://stackoverflow.com/users/5731841/sigma"}, "reply_to_user": {"reputation": 69, "user_id": 7793566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff9f77ee10ff5760e03e397a6027e4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Stante", "link": "https://stackoverflow.com/users/7793566/alexander-stante"}, "edited": false, "score": 0, "creation_date": 1491409694, "post_id": 43236187, "comment_id": 73543649, "body": "@AlexanderStante Specifically?"}, {"owner": {"reputation": 69, "user_id": 7793566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff9f77ee10ff5760e03e397a6027e4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Stante", "link": "https://stackoverflow.com/users/7793566/alexander-stante"}, "edited": false, "score": 0, "creation_date": 1491410494, "post_id": 43236187, "comment_id": 73544127, "body": "I&#39;m referring to your design. What happens with <code>path</code> if you want to execute a DFS on an other graph? You mark the fact that a node was visited directly on a node. You add every visited note to <code>path</code>. You stop your recursion by marking all nodes as &quot;visited&quot;. Recursion is also questionable of DFS if you can&#39;t do tail call optimization. I know it&#39;s a toy example, but there is so much computer science literature about proper DFS and Graph Implementations."}, {"owner": {"reputation": 160, "user_id": 5731841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NSoa0.jpg?s=128&g=1", "display_name": "sigma", "link": "https://stackoverflow.com/users/5731841/sigma"}, "reply_to_user": {"reputation": 69, "user_id": 7793566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff9f77ee10ff5760e03e397a6027e4?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Stante", "link": "https://stackoverflow.com/users/7793566/alexander-stante"}, "edited": false, "score": 0, "creation_date": 1491410863, "post_id": 43236187, "comment_id": 73544353, "body": "@AlexanderStante For my particular assignment, I don&#39;t have to run it on another graph. Rather, I need to run many search algorithms on the same graph. As for every visited node being added to path, I am fixing that now but first wanted to make sure that this was working. What would you suggest doing instead of marking all nodes as visited to stop recursion? Thanks for your help."}], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "is_accepted": false, "score": 1, "last_activity_date": 1491409382, "creation_date": 1491409382, "answer_id": 43236669, "question_id": 43236187, "link": "https://stackoverflow.com/questions/43236187/for-loop-in-recursive-function-continues-after-end-of-recursion/43236669#43236669", "title": "For loop in recursive function continues after end of recursion", "body": "<p>You're passing <code>g</code> by value instead of by reference. This means that whenever you found a goal node and are coming back from a recursive call, that instance of <code>g</code> still has its nodes set as unvisited. That's why the repetition occurs.</p>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 1119979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/863badf665d0c783a35987a34b9a5050?s=128&d=identicon&r=PG", "display_name": "Chakradar Raju", "link": "https://stackoverflow.com/users/1119979/chakradar-raju"}, "is_accepted": false, "score": 1, "last_activity_date": 1491411297, "creation_date": 1491411297, "answer_id": 43237271, "question_id": 43236187, "link": "https://stackoverflow.com/questions/43236187/for-loop-in-recursive-function-continues-after-end-of-recursion/43237271#43237271", "title": "For loop in recursive function continues after end of recursion", "body": "<p>I know your primary question is answered, still I would give few suggestions:</p>\n\n<p>1) Don't use static vector, you can't reuse the function. You can instead create a vector where you're expecting the path and pass pointer to the vector.</p>\n\n<p>2) To make sure you don't have all visited nodes in path, you can return a bool from dfs function to denote if there is a path to destination. You can also avoid passing graph object this way.</p>\n\n<p>With those changes your code will become:</p>\n\n<pre><code>bool dfs(node* s, vector&lt;char&gt;* path){\n\n    s-&gt;set_visited();\n\n    if(s-&gt;is_goal()){\n        path.push_back(s-&gt;get_tag());\n        return true;\n    }\n\n    else{\n        for(int i=0; i&lt;(s-&gt;get_no_edges()); i++){\n            if(!(s-&gt;get_edge(i)-&gt;get_dest()-&gt;is_visited())) //If it is unvisited, apply recursion\n                if(dfs(s-&gt;get_edge(i)-&gt;get_dest(), path)) {\n                    path.push_back(s-&gt;get_tag());\n                    return true;\n                }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>This will return reverse path, ie path from destination to source, there is std::reverse.</p>\n\n<p>If you do a BFS, you'll get shortest path instead of some random path, assuming the edges are of equal weight.</p>\n"}], "owner": {"reputation": 160, "user_id": 5731841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NSoa0.jpg?s=128&g=1", "display_name": "sigma", "link": "https://stackoverflow.com/users/5731841/sigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1491411297, "creation_date": 1491408023, "question_id": 43236187, "link": "https://stackoverflow.com/questions/43236187/for-loop-in-recursive-function-continues-after-end-of-recursion", "title": "For loop in recursive function continues after end of recursion", "body": "<p>I am implementing a Depth First Search on a graph in C++. Given a starting vertex, the algorithm should perform DFS until a goal node is found (i.e. a node with <code>goal</code> set to true), and return the path taken.  I am trying to do this recursively, here is my code:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>vector&lt;char&gt;* dfs(graph g, node* s){\n\n    static vector&lt;char&gt; path;\n    s-&gt;set_visited();\n    path.push_back(s-&gt;get_tag()); //Adds node to path\n\n    if(s-&gt;is_goal()){\n        g.set_all_visited();\n    }\n\n    else{\n        for(int i=0; i&lt;(s-&gt;get_no_edges()); i++){\n            if(!(s-&gt;get_edge(i)-&gt;get_dest()-&gt;is_visited())) //If it is unvisited, apply recursion\n                dfs(g, s-&gt;get_edge(i)-&gt;get_dest());\n        }\n    }\n\n    return &amp;path;\n}\n</code></pre>\n\n<p>I am aware that the resulting path will just list the nodes in the order they were visited by the DFS, as opposed to an actual path from the start to a goal node. </p>\n\n<p>The problem is that the function continues to print nodes even after a goal node is found. To avoid this, I set all nodes in the graph <code>g</code> to visited using <code>set_all_visited()</code>, and checked in the <code>else</code> part whether a node was visited or not before proceeding, but this does not seem to be working. When I performed dry runs, the function kept on visiting all the edges of a node in the <code>for</code> loop even after a goal node was found, and I do not know how I can stop this from happening.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1491408016, "post_id": 43236153, "comment_id": 73542465, "body": "<code>int m[size]</code> is not standard c++. Some compilers support it as an extension, but it is not portable. <code>std::vector</code> is a portable alternative."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1491408041, "post_id": 43236153, "comment_id": 73542489, "body": "Why not use standard container classes (e.g. <code>std::vector</code>, <code>std::array</code>), then pass some by reference and others by value?"}, {"owner": {"reputation": 31, "user_id": 7821747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a24c1e49402621be4e7970f247bd38?s=128&d=identicon&r=PG&f=1", "display_name": "HadK", "link": "https://stackoverflow.com/users/7821747/hadk"}, "edited": false, "score": 0, "creation_date": 1491408220, "post_id": 43236153, "comment_id": 73542632, "body": "Ok thank you Francois and crashmstr. I will try your suggestions."}], "answers": [{"tags": [], "owner": {"reputation": 7915, "user_id": 1563039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xmppU.png?s=128&g=1", "display_name": "Joseph Thomson", "link": "https://stackoverflow.com/users/1563039/joseph-thomson"}, "is_accepted": false, "score": 4, "last_activity_date": 1491408319, "creation_date": 1491408319, "answer_id": 43236320, "question_id": 43236153, "link": "https://stackoverflow.com/questions/43236153/how-to-modify-some-arrays-and-not-modifying-others-when-we-pass-them-in-an-argum/43236320#43236320", "title": "How to modify some arrays and not modifying others when we pass them in an argument in C++?", "body": "<p>Make the parameter <code>f</code> of <code>modify</code> an array of <code>const int</code>. This way, no modifications can be made to the contents of <code>f</code>.</p>\n\n<pre><code>void modify(int y[], const int f[], const int size)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 1, "last_activity_date": 1491408505, "creation_date": 1491408505, "answer_id": 43236380, "question_id": 43236153, "link": "https://stackoverflow.com/questions/43236153/how-to-modify-some-arrays-and-not-modifying-others-when-we-pass-them-in-an-argum/43236380#43236380", "title": "How to modify some arrays and not modifying others when we pass them in an argument in C++?", "body": "<p>In c++, you can use the <code>const</code> keyword to specify that something must not be changed.</p>\n\n<p>The statement <code>void modify(int y[], const int f[], const int size)</code> indicates that <code>f</code> will not be changed by the function, therefore you may provide a <code>const</code> argument. Attempting to modify the object through <code>f</code> will produce a compilation error.</p>\n\n<p>The statement <code>const int z[6] = {1,2,3,4,5,6};</code> indicates that <code>z</code> must not be changed. If you accidentally try to modify <code>z</code> or use it in a context where it may change, the compiler will produce a compilation error.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7821747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a24c1e49402621be4e7970f247bd38?s=128&d=identicon&r=PG&f=1", "display_name": "HadK", "link": "https://stackoverflow.com/users/7821747/hadk"}, "is_accepted": true, "score": 1, "last_activity_date": 1491409730, "creation_date": 1491409730, "answer_id": 43236778, "question_id": 43236153, "link": "https://stackoverflow.com/questions/43236153/how-to-modify-some-arrays-and-not-modifying-others-when-we-pass-them-in-an-argum/43236778#43236778", "title": "How to modify some arrays and not modifying others when we pass them in an argument in C++?", "body": "<p>Thank you all for your help. This is the final code after the fix. I don't want to change on z but without using const.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nvoid modify(int [], int [], int);\n\nint main()\n{\n\nint x[6] = {1,2,3,4,5,6};\nint z[6] = {1,2,3,4,5,6};\nfor (int i = 0; i &lt;= 5; i++)\n{\n    cout &lt;&lt; \"x[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; x[i]&lt;&lt;\"\\t\"&lt;&lt;endl;\n    cout &lt;&lt; \"z[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; z[i] &lt;&lt; \"\\t\"&lt;&lt;endl;\n}\ncout &lt;&lt; endl;\nmodify(x,z,6);\nfor (int i = 0; i &lt;= 5; i++)\n{\n    cout &lt;&lt; \"x[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; x[i] &lt;&lt; \"\\t\" &lt;&lt; endl;\n    cout &lt;&lt; \"z[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; z[i] &lt;&lt; \"\\t\" &lt;&lt; endl;\n}\ncout &lt;&lt; endl;\nsystem(\"pause\");\nreturn 0;\n}\n\nvoid modify(int y[], int f[], int size)   \n{\nvector&lt;int&gt; m;\nfor (int i = 0; i &lt; size; i++)\n{\n    m.push_back(f[i]);\n}\nfor (int i = 0; i &lt;= 5; i++)\n{\n    y[i] = 2 * y[i];\n    m[i] = 2 * m[i];\n    cout &lt;&lt; \"y[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; y[i] &lt;&lt; \"\\t\"&lt;&lt;endl;\n    cout &lt;&lt; \"m[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; m[i] &lt;&lt; \"\\t\"&lt;&lt;endl;\n}\ncout &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7821747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a24c1e49402621be4e7970f247bd38?s=128&d=identicon&r=PG&f=1", "display_name": "HadK", "link": "https://stackoverflow.com/users/7821747/hadk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43236778, "answer_count": 3, "score": 2, "last_activity_date": 1491409730, "creation_date": 1491407924, "last_edit_date": 1491408011, "question_id": 43236153, "link": "https://stackoverflow.com/questions/43236153/how-to-modify-some-arrays-and-not-modifying-others-when-we-pass-them-in-an-argum", "title": "How to modify some arrays and not modifying others when we pass them in an argument in C++?", "body": "<p>I have the following C++ code. I am okay with modification on the content of array x[] as we pass it through the function modify but I don't want the content of the array z to be modified as we pass it. I am getting several errors in my attempt to do that. Could you help me please?\nIt seems I have errors with the initialization of the matrix m in the function also.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nvoid modify(int y[], int f[], const int size)\n{\n    int m[size];\n    for (int i = 0; i &lt; size; i++)\n    {\n        m[i] = f[i];\n    }\n    for (int i = 0; i &lt;= 5; i++)\n    {\n        y[i] = 2 * y[i];\n        m[i] = 2 * m[i];\n        cout &lt;&lt; \"y[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; y[i] &lt;&lt; \"\\t\"&lt;&lt;endl;\n        cout &lt;&lt; \"m[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; m[i] &lt;&lt; \"\\t\"&lt;&lt;endl;\n    }\n    cout &lt;&lt; endl;\n}\nint main(){\n    int x[6] = {1,2,3,4,5,6};\n    int z[6] = {1,2,3,4,5,6};\n    for (int i = 0; i &lt;= 5; i++)\n    {   cout &lt;&lt; \"x[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; x[i]&lt;&lt;\"\\t\"&lt;&lt;endl;\n        cout &lt;&lt; \"z[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; z[i] &lt;&lt; \"\\t\"&lt;&lt;endl;\n    }\n    cout &lt;&lt; endl;\n    modify(x,z,6);\n    for (int i = 0; i &lt;= 5; i++)\n    {\n        cout &lt;&lt; \"x[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; x[i] &lt;&lt; \"\\t\" &lt;&lt; endl;\n        cout &lt;&lt; \"z[\" &lt;&lt; i &lt;&lt; \"]=\" &lt;&lt; z[i] &lt;&lt; \"\\t\" &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "memory-leaks", "python-c-api"], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 775938, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/832ef6bda320b48e1feb903f011196ec?s=128&d=identicon&r=PG", "display_name": "Zwackelmann", "link": "https://stackoverflow.com/users/775938/zwackelmann"}, "edited": false, "score": 0, "creation_date": 1491418778, "post_id": 43237059, "comment_id": 73549123, "body": "Thanks, I also thought that this might be the problem. So this means when I set a value in a dict using <code>PyDict_SetItem(dict, PyString_FromString(&quot;version&quot;), PyInt_FromLong(version));</code> I will end up with a string and a long with ref count of 2 also causing memory leaks?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 523, "user_id": 775938, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/832ef6bda320b48e1feb903f011196ec?s=128&d=identicon&r=PG", "display_name": "Zwackelmann", "link": "https://stackoverflow.com/users/775938/zwackelmann"}, "edited": false, "score": 0, "creation_date": 1491423160, "post_id": 43237059, "comment_id": 73551681, "body": "Yes. Browsing <i>Python</i>&#39;s  source code, you&#39;ll notice that every object created <b>locally</b> (in order to be passed to <code>PyDict_SetItem</code>) is <code>Py_DECREF</code>ed (or its <code>Py_REFCNT</code> decremented) afterwards."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 1, "last_activity_date": 1556659871, "last_edit_date": 1556659871, "creation_date": 1491410670, "answer_id": 43237059, "question_id": 43236127, "link": "https://stackoverflow.com/questions/43236127/python-c-api-assigning-pyobjects-to-a-dictionary-causes-memory-leak/43237059#43237059", "title": "Python C API: Assigning PyObjects to a dictionary causes memory leak", "body": "<p>It's a matter of <a href=\"https://docs.python.org/2.0/ext/ownershipRules.html\" rel=\"nofollow noreferrer\">[Python 2.0.Docs]: Ownership rules</a>. I'm going to exemplify on <em>Python 2.7.10</em> (pretty old, but I don't think that the behavior has (significantly) changed along the way).</p>\n\n<p><em>PyByteArray_FromStringAndSize</em> (<em>bytearrayobject.c</em>: <em>168</em>) creates a new object (using <em>PyObject_New</em>, and allocates memory for the buffer as well).</p>\n\n<p>By default, the <em>refcount</em> of that object (or better: of any newly created object) is <strong>1</strong> (set by <em>_Py_NewReference</em>), so that when the user calls <em>del</em> upon it, or at program exit, the <em>refcount</em> will be decreased, and when reaching 0, the object will be deallocated.</p>\n\n<ul>\n<li><p>This is the behavior on the flow where the object is returned</p></li>\n<li><p>But, in <em>dummyArrInDict</em>'s case, <em>PyDict_SetItem</em> does (indirectly) a <em>Py_INCREF</em> of <em>pyData</em> (it does other stuff, but only this is relevant in the current situation), ending up with a <em>refcount</em> of <strong>2</strong> and therefore the memory leak</p></li>\n</ul>\n\n<p>It's basically same thing that you're doing with <em>data</em>: you allocate memory for it, and when you no longer need it, you free it (this is because you're not returning it, you only use it temporarily).</p>\n\n<p><strong>Note</strong>: It's safer to use the <strong>X</strong> macros (e.g. <a href=\"https://docs.python.org/2/c-api/refcounting.html#c.Py_XDECREF\" rel=\"nofollow noreferrer\">[Python 2.Docs]: <strong>Py_XDECREF</strong></a>, especially since you're not testing for <em>NULL</em> the returned <em>PyObject</em>s).</p>\n\n<p>For more details, also take a look at <a href=\"https://docs.python.org/2/c-api/intro.html\" rel=\"nofollow noreferrer\">[Python 2.Docs]: C API Reference</a>.</p>\n"}], "owner": {"reputation": 523, "user_id": 775938, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/832ef6bda320b48e1feb903f011196ec?s=128&d=identicon&r=PG", "display_name": "Zwackelmann", "link": "https://stackoverflow.com/users/775938/zwackelmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22418, "favorite_count": 0, "accepted_answer_id": 43237059, "answer_count": 1, "score": 3, "last_activity_date": 1556659871, "creation_date": 1491407830, "last_edit_date": 1491467142, "question_id": 43236127, "link": "https://stackoverflow.com/questions/43236127/python-c-api-assigning-pyobjects-to-a-dictionary-causes-memory-leak", "title": "Python C API: Assigning PyObjects to a dictionary causes memory leak", "body": "<p>I am writing a C++ wrapper for Python using the Python C API. In my case I have to make bigger amounts of byte oriented data accessible for the Python script. For this purpose I use the <code>PyByteArray_FromStringAndSize</code> method  to produce a Python bytearray (<a href=\"https://docs.python.org/2.7/c-api/bytearray.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2.7/c-api/bytearray.html</a>). </p>\n\n<p>When returning this bytearray directly I have not experienced any problems. When however adding the bytearray into a Python dict, the memory from the bytearray will not be released once the dict is destroyed.</p>\n\n<p>This can be solved by calling <code>Py_DECREF</code> on the bytearray object after adding the bytearray object to the Python dict. </p>\n\n<p>Below is a complete working example of my code containing a method <code>dummyArrPlain</code> returning the plain bytearray and a method <code>dummyArrInDict</code> returning a bytearray in a dict. The second method will produce a memory leak unless <code>Py_DECREF(pyData);</code> is called.</p>\n\n<p><strong>My question is:</strong> Why is <code>Py_DECREF</code> necessary at this point. Intuitively I would have expected that <code>Py_DECREF</code> should be called once the dict is destroyed.</p>\n\n<p>Also I assign values like in the following to a dict: </p>\n\n<pre><code>PyDict_SetItem(dict, PyString_FromString(\"i\"), PyInt_FromLong(i));\n</code></pre>\n\n<p>Will this also produce a memory leak when not calling <code>Py_DECREF</code> on the created string and long?</p>\n\n<p>This is my dummy C++ wrapper:</p>\n\n<pre><code>#include &lt;python2.7/Python.h&gt;\n\nstatic char module_docstring[] = \"This is a module causing a memory leak\";\n\nstatic PyObject *dummyArrPlain(PyObject *self, PyObject *args);\nstatic PyObject *dummyArrInDict(PyObject *self, PyObject *args);\n\nstatic PyMethodDef module_methods[] = {\n    {\"dummy_arr_plain\", dummyArrPlain, METH_VARARGS, \"returns a plain dummy bytearray\"},\n    {\"dummy_arr_in_dict\", dummyArrInDict, METH_VARARGS, \"returns a dummy bytearray in a dict\"},\n    {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC initlibdummy(void)\n{\n    PyObject *m = Py_InitModule(\"libdummy\", module_methods);\n    if (m == NULL)\n        return;\n}\n\n\nstatic PyObject *dummyArrPlain(PyObject *self, PyObject *args)\n{\n    int len = 10000000;\n    char* data = new char[len];\n    for(int i=0; i&lt;len; i++) {\n        data[i] = 0;\n    }\n\n    PyObject * pyData = PyByteArray_FromStringAndSize(data, len);\n    delete [] data;\n\n    return pyData;\n}\n\n\nstatic PyObject *dummyArrInDict(PyObject *self, PyObject *args)\n{\n    int len = 10000000;\n    char* data = new char[len];\n    for(int i=0; i&lt;len; i++) {\n        data[i] = 0;\n    }\n    PyObject * pyData = PyByteArray_FromStringAndSize(data, len);\n    delete [] data;\n\n    PyObject *dict = PyDict_New();\n    PyDict_SetItem(dict, PyString_FromString(\"data\"), pyData);\n\n    // memory leak without Py_DECREF(pyData);\n\n    return dict;\n}\n</code></pre>\n\n<p>And a dummy python script using the wrapper:</p>\n\n<pre><code>import libdummy\nimport time\n\nwhile True:\n    a = libdummy.dummy_arr_in_dict()\n    time.sleep(0.01)\n</code></pre>\n"}, {"tags": ["c++", "linux", "opencv", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5935698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5887774950d984bc39c5860cdc4f3147?s=128&d=identicon&r=PG&f=1", "display_name": "der_flori", "link": "https://stackoverflow.com/users/5935698/der-flori"}, "is_accepted": false, "score": 2, "last_activity_date": 1491423150, "creation_date": 1491423150, "answer_id": 43240770, "question_id": 43236034, "link": "https://stackoverflow.com/questions/43236034/opencv-3-2-includes-libmir-and-protobuf-2-6-which-is-conflicting-with-protobuf/43240770#43240770", "title": "OpenCV 3.2 includes libmir* and protobuf 2.6 which is conflicting with protobuf 3.1", "body": "<p>Ok, building <strong>WITH_QT=ON</strong> removes the need for libmir and therefore libprotobuf 2.6</p>\n\n<p>here is the full cmake command, that worked:</p>\n\n<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D WITH_V4L=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5935698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5887774950d984bc39c5860cdc4f3147?s=128&d=identicon&r=PG&f=1", "display_name": "der_flori", "link": "https://stackoverflow.com/users/5935698/der-flori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1271, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1536147826, "creation_date": 1491407543, "last_edit_date": 1491409161, "question_id": 43236034, "link": "https://stackoverflow.com/questions/43236034/opencv-3-2-includes-libmir-and-protobuf-2-6-which-is-conflicting-with-protobuf", "title": "OpenCV 3.2 includes libmir* and protobuf 2.6 which is conflicting with protobuf 3.1", "body": "<p>I have some issues with installing OpenCV with contrib modules from sources codes and Protobuf libraries.</p>\n\n<p>I have a program, that needs Protobuf 3.1. and OpenCV 3.2 with contrib modules. After compiling and installing both from sources, the program itself compiles and linked well. When executing the program, I get the following error:</p>\n\n<blockquote>\n  <p>[libprotobuf FATAL google/protobuf/stubs/common.cc:78] This program was compiled against version 2.6.1 of the Protocol Buffer runtime library, which is not compatible with the installed version (3.1.0).  Contact the program author for an update.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in \"/build/mir-pkdHET/mir-0.21.0+16.04.20160330/obj-x86_64-linux-gnu/src/protobuf/mir_protobuf.pb.cc\".)\n  terminate called after throwing an instance of 'google::protobuf::FatalException'\n    what():  This program was compiled against version 2.6.1 of the Protocol Buffer runtime library, which is not compatible with the installed version (3.1.0).  Contact the program author for an update.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in \"/build/mir-pkdHET/mir-0.21.0+16.04.20160330/obj-x86_64-linux-gnu/src/protobuf/mir_protobuf.pb.cc\".)</p>\n</blockquote>\n\n<p>Checking the linked libraries of my software, I see that protobuf was included in 2.6. (so.9) and 3.1 (so.11) as well as libmir*.so</p>\n\n<pre><code>ldd localization | grep protobuf*\nlibprotobuf.so.11 =&gt; /usr/local/lib/libprotobuf.so.11 (0x00007f1797df8000)\nlibmirprotobuf.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libmirprotobuf.so.3 (0x00007f178a751000)\nlibprotobuf-lite.so.9 =&gt; /usr/lib/x86_64-linux-gnu/libprotobuf-lite.so.9 (0x00007f178a31b000)\n</code></pre>\n\n<p>Looking into the linked libraries, I found out that Opencv linked </p>\n\n<ul>\n<li>libmir libraries (which are using protobuf) with</li>\n<li>Protobuf 2.6 (libprotobuf-lite.so.9 in usr/lib/x86_64-linux-gnu/)</li>\n</ul>\n\n<p>while my Protobuf 3.1 is in /usr/local/ \nAlso opencv uses libprotobuf 3.1. when building DNN parts etc.</p>\n\n<pre><code>~$ ldd /usr/local/bin/opencv* | grep libproto* \nlibprotobuf-lite.so.9 =&gt; /usr/lib/x86_64-linux-gnu/libprotobuf-lite.so.9\n\nldd /usr/local/bin/opencv* | grep libmir*\nlibmirclient.so.9 =&gt; /usr/lib/x86_64-linux-gnu/libmirclient.so.9 (0x00007f1d59b4c000)\nlibmircommon.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libmircommon.so.5 (0x00007f1d56d5f000)\nlibmirprotobuf.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libmirprotobuf.so.3 (0x00007f1d56afe000)\n</code></pre>\n\n<ul>\n<li>What is libmir* (libmirclient9 or libmirclient-dev or libmircommon5 etc. are installed via apt apparently) and what is it used for / by?</li>\n<li>Which part / library / module of Opencv 3 uses libprotobuf 2.6 and libmir? </li>\n<li>How can I configure a build of Opencv 3 not using any protobuf library (or which links to it)</li>\n<li>Any other way to compile my own program without protobuf 2.6 or libmirprotobuf</li>\n</ul>\n\n<p>Thank you very much for your effort.</p>\n\n<p>BR Florian</p>\n"}, {"tags": ["c++", "ofstream"], "comments": [{"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1491407916, "post_id": 43236002, "comment_id": 73542390, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/478898/how-to-execute-a-command-and-get-output-of-command-within-c-using-posix\">How to execute a command and get output of command within C++ using POSIX?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "is_accepted": false, "score": 1, "last_activity_date": 1491407738, "creation_date": 1491407738, "answer_id": 43236098, "question_id": 43236002, "link": "https://stackoverflow.com/questions/43236002/printing-system-command-to-text-file-c/43236098#43236098", "title": "printing system command to text file c++", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/program/system\" rel=\"nofollow noreferrer\">system</a> returns an <code>int</code> and not the \"output\" from the command that is executed.</p>\n\n<p>One way to do this would be to redirect the command to the file you want:</p>\n\n<pre><code>    std::system(\"head -n 1024 words.txt &gt; test.txt\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6904350, "user_type": "registered", "profile_image": "https://graph.facebook.com/566436856899420/picture?type=large", "display_name": "Rijul Mehra", "link": "https://stackoverflow.com/users/6904350/rijul-mehra"}, "is_accepted": false, "score": 0, "last_activity_date": 1491408162, "creation_date": 1491408162, "answer_id": 43236252, "question_id": 43236002, "link": "https://stackoverflow.com/questions/43236002/printing-system-command-to-text-file-c/43236252#43236252", "title": "printing system command to text file c++", "body": "<p>you can also use \nfor printing the output in a text file\nfreopen(); command</p>\n\n<pre><code>freopen(\"input file name.txt\", \"r\", stdin);\nfreopen(\"output file name.txt\", \"w\", stdout);\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 3086806, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/28a75e468fff56f5e9b44da5697d3e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeugasce", "link": "https://stackoverflow.com/users/3086806/jeugasce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491414491, "creation_date": 1491407452, "last_edit_date": 1491414491, "question_id": 43236002, "link": "https://stackoverflow.com/questions/43236002/printing-system-command-to-text-file-c", "title": "printing system command to text file c++", "body": "<p>I have the following code, but when I run it, the output is printed instead of being copied to the text file.</p>\n\n<pre><code>void checkText()\n{\n    ifstream my_file(\"test.txt\");\n    if (my_file.good()) {\n        cout &lt;&lt; \"File exist\" ;\n    }\n    else {\n        ofstream outputFile;\n        outputFile.open(\"test.txt\");\n        outputFile &lt;&lt; system(\"head -n 1024 words.txt\");\n        outputFile.close();\n        cout &lt;&lt; \"Done!\\n\";\n    }\n}\n</code></pre>\n\n<p>How do I print the system command to my text file?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "visual-studio-2015", "std"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4462820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ea8845ea8ca2dc5db49d89fde49fcf?s=128&d=identicon&r=PG", "display_name": "rboc", "link": "https://stackoverflow.com/users/4462820/rboc"}, "edited": false, "score": 1, "creation_date": 1491408959, "post_id": 43236476, "comment_id": 73543165, "body": "I thought that on 37th of February it should set the fail bit. :-)"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1491408790, "creation_date": 1491408790, "answer_id": 43236476, "question_id": 43235953, "link": "https://stackoverflow.com/questions/43235953/stdget-time-on-visual-2015-does-not-fail-on-incorrect-date/43236476#43236476", "title": "std::get_time on Visual 2015 does not fail on incorrect date", "body": "<p>Welcome to the world of the grey zone of the standard! <code>std::get_time</code> (various overloads) is specified in chapters 22 Localization library, and 27 Input/output library of the standard.</p>\n\n<p>AFAIK, the standard requires:</p>\n\n<ul>\n<li>if the input string correctly describes a valid date in valid format, the <code>std::tm</code> object is populated accordingly</li>\n<li>if the input string cannot be parsed, the fail bit on the input string shall be set</li>\n</ul>\n\n<p>But here, the input string can be parsed, and some implementations can assume that the march 32 is just the april 1. Said differently it is unspecified by standard what controls an implementation shall do on the input value. A non numeric day shall give an error, but this is implementation dependant.</p>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 4462820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ea8845ea8ca2dc5db49d89fde49fcf?s=128&d=identicon&r=PG", "display_name": "rboc", "link": "https://stackoverflow.com/users/4462820/rboc"}, "edited": false, "score": 0, "creation_date": 1491484124, "post_id": 43240887, "comment_id": 73580893, "body": "Thanks for your answer Howard, your library works for me! Anyway I still don&#39;t understand why there is no a strptime function for Windows or why std::get_time does not verify the dates are correct on Visual 2015."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 165, "user_id": 4462820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ea8845ea8ca2dc5db49d89fde49fcf?s=128&d=identicon&r=PG", "display_name": "rboc", "link": "https://stackoverflow.com/users/4462820/rboc"}, "edited": false, "score": 0, "creation_date": 1491487078, "post_id": 43240887, "comment_id": 73583303, "body": "@rboc:  Glad it worked for you!  <code>strptime</code> is not standard C++, but specified by POSIX.  Though <code>std::get_time</code> is specified in terms of <code>strptime</code>.  POSIX says this about <code>strptime</code>:  &quot;No errors are defined.&quot; (<a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strptime.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/strptime.&zwnj;&#8203;html</a>)"}, {"owner": {"reputation": 165, "user_id": 4462820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ea8845ea8ca2dc5db49d89fde49fcf?s=128&d=identicon&r=PG", "display_name": "rboc", "link": "https://stackoverflow.com/users/4462820/rboc"}, "edited": false, "score": 0, "creation_date": 1491487554, "post_id": 43240887, "comment_id": 73583705, "body": "Yes, but at least strptime returns a null pointer on unsuccessful completion (February 37th). I expected to std::get_time to do something similar on Visual Studio 2015."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 165, "user_id": 4462820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ea8845ea8ca2dc5db49d89fde49fcf?s=128&d=identicon&r=PG", "display_name": "rboc", "link": "https://stackoverflow.com/users/4462820/rboc"}, "edited": false, "score": 1, "creation_date": 1491487874, "post_id": 43240887, "comment_id": 73583979, "body": "@rboc:  I am trying to get my library standardized.  I will try to get a more precise specification into the standard."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 3, "last_activity_date": 1491423556, "creation_date": 1491423556, "answer_id": 43240887, "question_id": 43235953, "link": "https://stackoverflow.com/questions/43235953/stdget-time-on-visual-2015-does-not-fail-on-incorrect-date/43240887#43240887", "title": "std::get_time on Visual 2015 does not fail on incorrect date", "body": "<p>You can use <a href=\"https://howardhinnant.github.io/date/date.html\" rel=\"nofollow noreferrer\">Howard Hinnant's free, open-source header-only datetime library</a> on Windows to give you the desired behavior.  The syntax is only slightly different, and it is much easier to use, and compatible with <code>&lt;chrono&gt;</code>.  It is also better documented and specified than the time-parsing parts of the C++ standard.</p>\n\n<pre><code>#include \"date.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nint\nmain()\n{\n    std::string date = \"2019-2-37 23:00:00\"; // day (37) is wrong. \n    std::string format = \"%Y-%m-%d %H:%M:%S\";\n    date::sys_seconds tm_object{};\n    std::istringstream input(date);        \n    input &gt;&gt; date::parse(format, tm_object);\n    if (input.fail()) \n    {\n        std::cout &lt;&lt; \"Parsing failed!\";\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Parsing ok!\\n\";\n        date::year_month_day ymd = date::floor&lt;date::days&gt;(tm_object);\n        std::cout &lt;&lt; \"Day is : \" &lt;&lt; ymd.day();\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Parsing failed!\n</code></pre>\n\n<p>This library also works with g++ 5.4.0 and clang.</p>\n\n<p>You can also simplify your <code>format</code> down to <code>\"%F %T\"</code>, and it can also work with subsecond precision if desired.</p>\n"}], "owner": {"reputation": 165, "user_id": 4462820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ea8845ea8ca2dc5db49d89fde49fcf?s=128&d=identicon&r=PG", "display_name": "rboc", "link": "https://stackoverflow.com/users/4462820/rboc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 43240887, "answer_count": 2, "score": 3, "last_activity_date": 1491423556, "creation_date": 1491407297, "question_id": 43235953, "link": "https://stackoverflow.com/questions/43235953/stdget-time-on-visual-2015-does-not-fail-on-incorrect-date", "title": "std::get_time on Visual 2015 does not fail on incorrect date", "body": "<p>I'm executing the following code on Windows with Visual Studio 2015. Basically I use <code>std::get_time</code> to parse a date, but when the date is invalid, for example, a day greater than 31, it does not seem to set the fail bit on the stream. </p>\n\n<p>I have tried this on Ubuntu with g++ 5.4.0 and it sets the fail bit and prints \"Parsing failed!\". Is this a bug on Windows or am I doing something wrong.</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>std::string date = \"2019-2-37 23:00:00\"; // day (37) is wrong. \nstd::string format = \"%Y-%m-%d %H:%M:%S\";\nstd::tm tm_object{};\nstd::istringstream input(date);        \ninput.imbue(std::locale(std::setlocale(LC_ALL, nullptr)));\ninput &gt;&gt; std::get_time(&amp;tm_object, format.c_str());\nif (input.fail()) \n{\n    std::cout &lt;&lt; \"Parsing failed!\";\n}\nelse\n{\n    std::cout &lt;&lt; \"Parsing ok!\\n\";\n    std::cout &lt;&lt; \"Day is : \" &lt;&lt; tm_object.tm_mday;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pointers", "polymorphism"], "comments": [{"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 4, "creation_date": 1491407363, "post_id": 43235923, "comment_id": 73542046, "body": "Make the abstractClass have a pure virtual call Clone() which both class1 and class2 implement and class3 will just call Clone() on the abstractClass."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1491409090, "post_id": 43235923, "comment_id": 73543244, "body": "What Adrian Lis is describing is commonly called the &quot;Clone Idiom&quot; if you wish to google it further."}], "owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1491407717, "answer_count": 0, "score": 0, "last_activity_date": 1491407211, "creation_date": 1491407211, "question_id": 43235923, "link": "https://stackoverflow.com/questions/43235923/deep-copy-of-a-polymorphic-pointer", "closed_reason": "Duplicate", "title": "Deep copy of a polymorphic pointer", "body": "<p>I have an inheritance hierarchy: class1 and class2 inherit from abstract class abstractClass.   In my main program I create the following handle:</p>\n\n<pre><code>abstractClass * myPointer = new class1(parameter1);\n</code></pre>\n\n<p>myPointer could point to class2 object too. I will use myPointer for polymorphic calls.\nNow I have another class(we say class3) which uses composition and it has a member that is a pointer to abstractClass. Namely:</p>\n\n<pre><code>class class3\n{\n    private:\n    abstractClass *ptr;\n};\n</code></pre>\n\n<p>I want can do:</p>\n\n<pre><code>abstractClass * myPointer = new class1(parameter1);\nclass3 *myObject=new class3(myPointer);\n</code></pre>\n\n<p>like this, the class class3 has a pointer wherewith make polymorphic call.\nThe problem is that i must do a deep copy, namely is bad do in the constructor of class3:</p>\n\n<pre><code>abstractClass * myPointer = new class1(parameter1);\nclass3 *myObject=new class3(myPointer);\n\nclass3::class3(abstractClass *pointer)\n{\n    ptr = pointer; //ptr is the member of the class\n}\n</code></pre>\n\n<p>I must do a deep copy. And I can't write</p>\n\n<pre><code>ptr = new Class1(.....)\nor\nptr = new Class2()\n</code></pre>\n\n<p>because I don't know the type of object pointed from abstractClass *pointer. How can I do? (May be I must use the downcast and an if for understand the type of the object. But is there a more elegant solution?)</p>\n\n<p>I use g++ -std=gnu++11  compiler</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "pointers", "swap"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 4, "creation_date": 1491407209, "post_id": 43235909, "comment_id": 73541936, "body": "<code>std::swap(x, y);</code> If you want to do it by hand use a <code>int temp;</code>. A pointer doesn&#39;t help you here."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1491407212, "post_id": 43235909, "comment_id": 73541939, "body": "hint: you need another int"}, {"owner": {"reputation": 11230, "user_id": 895876, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4faa8f0b88cbd856f4baafd59e660aaf?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/895876/jason"}, "edited": false, "score": 1, "creation_date": 1491407277, "post_id": 43235909, "comment_id": 73541983, "body": "you could also do it with xor"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1491408242, "post_id": 43235909, "comment_id": 73542645, "body": "<a href=\"https://en.wikipedia.org/wiki/XOR_swap_algorithm\" rel=\"nofollow noreferrer\">XOR swap algorithm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 4, "last_activity_date": 1491407324, "creation_date": 1491407324, "answer_id": 43235961, "question_id": 43235909, "link": "https://stackoverflow.com/questions/43235909/how-to-swapping-two-variables-with-a-pointer/43235961#43235961", "title": "How to swapping two variables with a pointer", "body": "<pre><code>void swap(int *x, int *y)\n{\n    int tmp;\n\n    tmp = *x;\n    *x = *y;\n    *y = tmp;\n}\nint main()\n{\n    int a = 7, b = 3;\n\n    std::cout &lt;&lt; a &lt;&lt; ' ' &lt;&lt; b &lt;&lt; '\\n';\n    swap(&amp;a, &amp;b);\n    std::cout &lt;&lt; a &lt;&lt; ' ' &lt;&lt; b &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Also consider <a href=\"http://www.cplusplus.com/reference/algorithm/swap/\" rel=\"nofollow noreferrer\"><code>std::swap</code></a></p>\n"}, {"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1491407557, "post_id": 43236015, "comment_id": 73542166, "body": "unless you overflow your signed ints... which is UB."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1491407601, "post_id": 43236015, "comment_id": 73542200, "body": "minus 1 for overflow vulnerabilities"}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1491407927, "post_id": 43236015, "comment_id": 73542395, "body": "@stackptr, this was to just get OP going with the basics. Look at the alternate answer I have posted."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1491408067, "post_id": 43236015, "comment_id": 73542518, "body": "<a href=\"http://stackoverflow.com/questions/11644362/are-the-results-of-bitwise-operations-on-signed-integers-defined\" title=\"are the results of bitwise operations on signed integers defined\">stackoverflow.com/questions/11644362/&hellip;</a>"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1491408654, "post_id": 43236015, "comment_id": 73542954, "body": "@VHS XOR swap isn&#39;t good either. Just stick to the straightforward temp-variable approach"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1491416096, "post_id": 43236015, "comment_id": 73547499, "body": "Three examples of <b>horrible</b> code. All of these have serious drawbacks. These hacks do not belong in anyone&#39;s notion of &quot;basics&quot;."}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1491424777, "post_id": 43236015, "comment_id": 73552539, "body": "@PeteBecker, you might want to check the definition of <code>horrible</code> and <code>basics</code>. Yes, there is a limitation with this code which is now documented in the answer."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1491430413, "post_id": 43236015, "comment_id": 73555149, "body": "The third one looks a sequencing issue with UB to me. PS: Accepting and learning from your mistakes is a virtue."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1491485050, "post_id": 43236015, "comment_id": 73581659, "body": "The &quot;old fashioned temp variable approach&quot; is the right way to do this. And note that the <b>only</b> guarantee you have on the range of <code>int</code> variables is that they can hold values in [-32727, 32767]. Yes, you can write a long list of qualifiers explaining when this hacky code will give the right answer and when it won&#39;t, but that&#39;s just too much work and too much risk. The straightforward &quot;old fashioned&quot; approach works just fine, and there is simply no need for these things. Engineering is about <b>solving</b> problems, not <b>creating</b> them."}], "tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": true, "score": -2, "last_activity_date": 1491424620, "last_edit_date": 1491424620, "creation_date": 1491407494, "answer_id": 43236015, "question_id": 43235909, "link": "https://stackoverflow.com/questions/43235909/how-to-swapping-two-variables-with-a-pointer/43236015#43236015", "title": "How to swapping two variables with a pointer", "body": "<p>Here's another good old way of swapping values of two variables without using a third variable:</p>\n\n<pre><code>x = x + y;  // x now becomes 15\ny = x - y;  // y becomes 10\nx = x - y;  // x becomes 5\n</code></pre>\n\n<p>Yet another way of doing it, as already pointed out by someone is using <code>xor</code>.</p>\n\n<pre><code>x = x ^ y;  // x now becomes 15 (1111)\ny = x ^ y;  // y becomes 10 (1010)\nx = x ^ y;  // x becomes 5 (0101)\n</code></pre>\n\n<p>There is also a one liner way of doing it:</p>\n\n<pre><code>x = x + y - (y = x);\n</code></pre>\n\n<p>You don't necessarily need pointers.</p>\n\n<p><strong>Limitation</strong> - As all the commentators have indicated, there is a limitation with all these approaches. These approaches may give you incorrect results if the sum of <code>x</code> and <code>y</code> exceeds <code>INT_MAX</code> (which may be equal to 2,147,483,647 on positive side and -2,147,483,648 on a negative side on a 32 bit system) AND your C implementation doesn't wrap around signed integers. However for your program, if you are working with relatively smaller numbers or your C implementation wraps around signed integers too, you should not have any issues using any of these 3 methods. But if you think that the sum might exceed <code>INT_MAX</code>, you can use the old fashioned temp variable approach to swap the values or use the standard <code>swap</code> function provided in the libraries. </p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 1, "last_activity_date": 1491407736, "creation_date": 1491407736, "answer_id": 43236096, "question_id": 43235909, "link": "https://stackoverflow.com/questions/43235909/how-to-swapping-two-variables-with-a-pointer/43236096#43236096", "title": "How to swapping two variables with a pointer", "body": "<p>The problem is that you are overwriting the original value of <code>y</code> with the value of <code>x</code>, then copying that value back to <code>x</code>.</p>\n\n<p>What you want to do is to stash the value of <code>x</code>, copy the value of <code>y</code> to it, then move the stashed value to <code>y</code>.</p>\n\n<p>Since you are trying to do this with pointers, you should probably change the operation <code>x=y</code> to use pointers as well. Here is an example:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int x=5, y=10, stash;\n    int *px, *py;\n\n    cout &lt;&lt; \"Before: x=\" &lt;&lt; x &lt;&lt; \" y=\" &lt;&lt; y;\n\n    px = &amp;x;\n    py = &amp;y;\n\n    stash = *px;\n    *px = *py;\n    *py = stash;\n\n    cout &lt;&lt; \"After: x=\" &lt;&lt; x &lt;&lt; \" y=\" &lt;&lt; y;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7458409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca063bca1fb2d61dc7b549431f41b5c?s=128&d=identicon&r=PG&f=1", "display_name": "Axl_TT", "link": "https://stackoverflow.com/users/7458409/axl-tt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 43236015, "answer_count": 3, "score": 1, "last_activity_date": 1491564809, "creation_date": 1491407138, "question_id": 43235909, "link": "https://stackoverflow.com/questions/43235909/how-to-swapping-two-variables-with-a-pointer", "title": "How to swapping two variables with a pointer", "body": "<p>I have a problem, I can't create a simple program for swapping two variables with a pointer. I tried in this way:</p>\n\n<pre><code>int main() {\n\nint x=5, y=10;\nint *p=nullptr;\n\np=&amp;x;\ny=*p;\nx=y;\n\ncout&lt;&lt;x&lt;&lt;\" \"&lt;&lt;y;\n}\n</code></pre>\n\n<p>How can I do?</p>\n"}, {"tags": ["c++", "opencv", "parallel-processing", "openmp", "intel-ipp"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1491410368, "post_id": 43235820, "comment_id": 73544050, "body": "It may be using <code>Intel TBB</code> - check your config... <code>getBuildInformation()</code>"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1491410542, "post_id": 43235820, "comment_id": 73544149, "body": "@MarkSetchell <code>cv::setNumThreads</code> should deal with that (as described <a href=\"http://stackoverflow.com/questions/18478159/is-there-a-way-to-disable-tbb-in-opencv\">here</a> )"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1491423932, "post_id": 43235820, "comment_id": 73552108, "body": "Do any SO folk know if any OpenCV folk/developers participate on SO and can answer in-depth questions such as this? It has always been a mystery to me as to how to know what optimisations (SIMD, OpenMP, TBB, CUDA) are actually being used in any OpenCV function.... or where anyone tells us typical performance numbers for all the OpenCV functions on any particular hardware? Anyone?"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1491424085, "post_id": 43235820, "comment_id": 73552189, "body": "I think that the only way in this case is to rebuild the whole OpenCV with all parallel options disabled and ipp too. I&#39;m sorry to say this, but if that&#39;s the case...well, what a pain in the ass."}, {"owner": {"reputation": 1199, "user_id": 4749396, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2669c87a991c3d4b778abbf662fce0c1?s=128&d=identicon&r=PG&f=1", "display_name": "nnrales", "link": "https://stackoverflow.com/users/4749396/nnrales"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518043904, "post_id": 43235820, "comment_id": 84347754, "body": "@MarkSetchell I think it all depends on how you compiled opencv. There are different options in the CMake file for the build which control all that."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8033366, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g5XeKti535k/AAAAAAAAAAI/AAAAAAAAAXk/xTQDLNHao1A/photo.jpg?sz=128", "display_name": "Sergio", "link": "https://stackoverflow.com/users/8033366/sergio"}, "is_accepted": false, "score": 0, "last_activity_date": 1495676776, "creation_date": 1495676776, "answer_id": 44171004, "question_id": 43235820, "link": "https://stackoverflow.com/questions/43235820/how-to-disable-parallelism-in-opencv/44171004#44171004", "title": "How to disable parallelism in OpenCV?", "body": "<p>add <code>ippSetNumThreads(1);</code> before the first IPP call in your code. This should set number of OpenMP threads in IPP to 1. More info can be found <a href=\"https://software.intel.com/en-us/articles/openmp-and-the-intel-ipp-library\" rel=\"nofollow noreferrer\">here</a> in the \"Controlling OpenMP Threading in the Intel IPP Primitives\" section</p>\n"}, {"tags": [], "owner": {"reputation": 1199, "user_id": 4749396, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2669c87a991c3d4b778abbf662fce0c1?s=128&d=identicon&r=PG&f=1", "display_name": "nnrales", "link": "https://stackoverflow.com/users/4749396/nnrales"}, "is_accepted": false, "score": 0, "last_activity_date": 1518043837, "creation_date": 1518043837, "answer_id": 48674643, "question_id": 43235820, "link": "https://stackoverflow.com/questions/43235820/how-to-disable-parallelism-in-opencv/48674643#48674643", "title": "How to disable parallelism in OpenCV?", "body": "<p>Are you using opencv from multi threads ? You have to disable opencv's multi threading from each thread, atleast in my experience with it. </p>\n\n<p>Opencv' parallel_for functions creates multiple threads to distribute the work across. </p>\n"}, {"tags": [], "owner": {"reputation": 365, "user_id": 2841150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8634a32c9e505e4177491c0bd69a09c?s=128&d=identicon&r=PG&f=1", "display_name": "Devymex", "link": "https://stackoverflow.com/users/2841150/devymex"}, "is_accepted": false, "score": 4, "last_activity_date": 1558639431, "creation_date": 1558639431, "answer_id": 56281760, "question_id": 43235820, "link": "https://stackoverflow.com/questions/43235820/how-to-disable-parallelism-in-opencv/56281760#56281760", "title": "How to disable parallelism in OpenCV?", "body": "<p>Re-building OpenCV from source with following CMake parameters should works:</p>\n\n<pre><code>cmake .. -DWITH_IPP=OFF -DWITH_TBB=OFF -DWITH_OPENMP=OFF -DWITH_PTHREADS_PF=OFF\n</code></pre>\n\n<p>and you will find the macro CV_PARALLEL_FRAMEWORK is not defined to something in <a href=\"https://github.com/opencv/opencv/blob/master/modules/core/src/parallel.cpp#L121\" rel=\"nofollow noreferrer\">modules/core/src/parallel.cpp</a> any more:</p>\n\n<pre><code>#if defined HAVE_TBB\n#  define CV_PARALLEL_FRAMEWORK \"tbb\"\n#elif defined HAVE_HPX\n#  define CV_PARALLEL_FRAMEWORK \"hpx\"\n#elif defined HAVE_OPENMP\n#  define CV_PARALLEL_FRAMEWORK \"openmp\"\n#elif defined HAVE_GCD\n#  define CV_PARALLEL_FRAMEWORK \"gcd\"\n#elif defined WINRT\n#  define CV_PARALLEL_FRAMEWORK \"winrt-concurrency\"\n#elif defined HAVE_CONCURRENCY\n#  define CV_PARALLEL_FRAMEWORK \"ms-concurrency\"\n#elif defined HAVE_PTHREADS_PF\n#  define CV_PARALLEL_FRAMEWORK \"pthreads\"\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 620, "user_id": 5052296, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JzSlE.jpg?s=128&g=1", "display_name": "y30", "link": "https://stackoverflow.com/users/5052296/y30"}, "is_accepted": false, "score": 0, "last_activity_date": 1611244214, "creation_date": 1611244214, "answer_id": 65830958, "question_id": 43235820, "link": "https://stackoverflow.com/questions/43235820/how-to-disable-parallelism-in-opencv/65830958#65830958", "title": "How to disable parallelism in OpenCV?", "body": "<p>You can disable it with:</p>\n<pre><code>cv::setNumThreads(0);\n</code></pre>\n<blockquote>\n<p>OpenCV will try to set the number of threads for the next parallel region.<br><br>If threads == 0, OpenCV will disable threading optimizations and run all it's\nfunctions sequentially. Passing threads &lt; 0 will reset threads number to system\ndefault. This function must be called outside of parallel region.</p>\n</blockquote>\n<p><a href=\"https://docs.opencv.org/4.5.1/db/de0/group__core__utils.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/4.5.1/db/de0/group__core__utils.html</a></p>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3142, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1611244214, "creation_date": 1491406891, "question_id": 43235820, "link": "https://stackoverflow.com/questions/43235820/how-to-disable-parallelism-in-opencv", "title": "How to disable parallelism in OpenCV?", "body": "<p>I've built OpenCV using Intel IPP, so I suppose that whenever possible it's used (e.g. matrix multiplication).</p>\n\n<p>I want to test the scalability of my parallel application by comparing it with a serial version. In order to do so, when it I do:</p>\n\n<pre><code>omp_set_num_threads(1);\ncv::setNumThreads(1);\n</code></pre>\n\n<p>However, by monitoring the CPU usage I see that multiple CPUs are still used. Why is that? And how can I force the program execution by using just one CPU?</p>\n"}, {"tags": ["c++", "macros"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1491408871, "post_id": 43235805, "comment_id": 73543107, "body": "No. This is not supported in any compiler I am aware of because whitespace is stripped during tokenization. Second, because of token substitution in the preprocessor, it would be difficult to tell if a given location in a line (after a function call or whatnot) was after a macro and would involve another pass of the preprocessor."}], "answers": [{"tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 2, "last_activity_date": 1491407087, "creation_date": 1491407087, "answer_id": 43235889, "question_id": 43235805, "link": "https://stackoverflow.com/questions/43235805/c-macro-similar-to-line-but-to-find-position-in-the-given-line/43235889#43235889", "title": "C++ macro similar to __LINE__ but to find position in the given line?", "body": "<p>Not to my knowledge, no. While some are defined by C99 standard, the rest of these macros are specific to your compiler and AFAIK are not defined by the language itself.</p>\n\n<p>If you are using Visual Studio, here is a list of the predefined macros:\n<a href=\"https://msdn.microsoft.com/en-us/library/b0084kay.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/b0084kay.aspx</a> \nThe ones that are standard there as well.</p>\n\n<p>I do wonder what you would use such a macro for. For </p>\n\n<pre><code>__LINE__\n</code></pre>\n\n<p>it is often to mark the expression where an error occurred, for use as a field in an exception for example. I can't fathom a use for column, since things are evaluated as statements and expressions, not one character at a time.</p>\n"}], "owner": {"reputation": 3, "user_id": 7714479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d687d7a84445a2f89345a661a80fcd?s=128&d=identicon&r=PG&f=1", "display_name": "RSch", "link": "https://stackoverflow.com/users/7714479/rsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491407087, "creation_date": 1491406812, "question_id": 43235805, "link": "https://stackoverflow.com/questions/43235805/c-macro-similar-to-line-but-to-find-position-in-the-given-line", "title": "C++ macro similar to __LINE__ but to find position in the given line?", "body": "<p>So, what I am interested in is a macro that would be similar to <code>__LINE__</code>, but instead of returning the line number, it could return the position within the given line.</p>\n\n<p>It could be the position in the line both in terms of columns or of chars. For instance, in the code:</p>\n\n<pre><code>#define THISCHAR\nint main(void)\n{\n    THISCHAR\n}\n</code></pre>\n\n<p>The macro <code>CHAR</code> should return either 5, because it is in the position of character 5 of its line, or maybe return 1, because it is the first non-empty char of the line. Either option could work for me.</p>\n\n<p>Is such a thing possible to achieve during compile time?</p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1491406699, "post_id": 43235736, "comment_id": 73541565, "body": "Did you include the header file where you declared <code>GameObject</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1491406709, "post_id": 43235736, "comment_id": 73541577, "body": "Please <b><a href=\"https://stackoverflow.com/posts/43235736/edit\">edit</a></b> your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "edited": false, "score": 0, "creation_date": 1491406994, "post_id": 43235736, "comment_id": 73541795, "body": "No but could you explain why should I include my header file? I have a global namespace already."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1491407188, "post_id": 43235736, "comment_id": 73541923, "body": "@MahmoudArafa Source code files in a c++ project are not implicitly aware of each other or of each other&#39;s content. You must use <a href=\"http://en.cppreference.com/w/cpp/preprocessor/include\" rel=\"nofollow noreferrer\"><code>#include</code></a> to specify, in each file, what headers it relies on. Namespaces cannot fulfill this function."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "edited": false, "score": 0, "creation_date": 1491407227, "post_id": 43235846, "comment_id": 73541949, "body": "But I could remove my namespace from &quot;Foo.h&quot; and it will work the same as yours."}, {"owner": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "edited": false, "score": 0, "creation_date": 1491407301, "post_id": 43235846, "comment_id": 73541996, "body": "I used namespaces so that I can escape from these &quot;includes&quot;. You know like C# namespaces."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "reply_to_user": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "edited": false, "score": 1, "creation_date": 1491407387, "post_id": 43235846, "comment_id": 73542065, "body": "@MahmoudArafa you cannot &#39;escape&#39; from includes.. and why would you try to do that anyway ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "edited": false, "score": 1, "creation_date": 1491407420, "post_id": 43235846, "comment_id": 73542085, "body": "@MahmoudArafa c++ includes and c++ namespaces preform different functions and one cannot be used as a substitute for the other. Perhaps <a href=\"http://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\">this question</a> would be of interest to you."}, {"owner": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "edited": false, "score": 0, "creation_date": 1491408042, "post_id": 43235846, "comment_id": 73542491, "body": "@All OK it seems like I have to read about namespaces. I just wanted it to work easier like C# namespaces, where every class is shared globally in the project."}], "tags": [], "owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "is_accepted": false, "score": 0, "last_activity_date": 1491406955, "creation_date": 1491406955, "answer_id": 43235846, "question_id": 43235736, "link": "https://stackoverflow.com/questions/43235736/c-global-namespace-in-a-project/43235846#43235846", "title": "C++ Global Namespace in a project", "body": "<p>The simplest thing is to use <code>namespace</code> in your header files</p>\n\n<pre><code>// Foo.h\nnamespace Pacman_AI{\n\n// STUFF HERE\n\n};\n</code></pre>\n\n<p>and then <code>using namespace</code> in your .cpp files</p>\n\n<pre><code>//Foo.cpp\n#include \"Foo.h\"\n\nusing namespace Pacman_AI;\n\n// define your functions here\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 2731041, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100004073032637/picture?type=large", "display_name": "Mahmoud Arafa", "link": "https://stackoverflow.com/users/2731041/mahmoud-arafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 593, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491406955, "creation_date": 1491406600, "last_edit_date": 1491406822, "question_id": 43235736, "link": "https://stackoverflow.com/questions/43235736/c-global-namespace-in-a-project", "title": "C++ Global Namespace in a project", "body": "<p>I have multiple C++ classes in a Pacman Game project (Maze, Food, Pacman, ...). I made a namespace 'Pacman_AI' so that the classes can be seen every where in the project. However, I got an error for 'GameObject' class: \"name followed by '::' must be a class or namespace name\".</p>\n\n<p>Here is my \"GameObject.cpp\" in which I get the error above:</p>\n\n<pre><code>namespace Pacman_AI{\n\nvector &lt;pair &lt;int, int&gt; &gt; GameObject::getPoints(){\n    return points;\n}\n\nstring GameObject::getType(){\n    return type;\n}\n\n}\n</code></pre>\n\n<p>I already defined my \"GameObject\" class in a different file \"GameObject.h\".</p>\n\n<p>Your help is highly appreciated.</p>\n"}, {"tags": ["c++", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1491406593, "post_id": 43235559, "comment_id": 73541484, "body": "Which line is causing the crash? Have you stepped through with a debugger? A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is invaluable for tracking down a run-time problem."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491406664, "post_id": 43235559, "comment_id": 73541546, "body": "When deleting the <code>head</code> you set the next node (<code>head-&gt;right</code>) as the new <code>head</code> but you do not seem to set that node&#39;s <code>left</code> to <code>null</code>. It still points to the deleted node."}, {"owner": {"reputation": 35, "user_id": 7820673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc9JQ.jpg?s=128&g=1", "display_name": "Brian Ho", "link": "https://stackoverflow.com/users/7820673/brian-ho"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491407227, "post_id": 43235559, "comment_id": 73541950, "body": "@Fran&#231;oisAndrieux Thanks so much for that link! It&#39;s super helpful, I&#39;ll work on it right away. And yes, you&#39;re absolutely right, my bad for the sloppy logic hole. I&#39;ll fix that now and see if it does the trick."}, {"owner": {"reputation": 35, "user_id": 7820673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc9JQ.jpg?s=128&g=1", "display_name": "Brian Ho", "link": "https://stackoverflow.com/users/7820673/brian-ho"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491407696, "post_id": 43235559, "comment_id": 73542255, "body": "Quick update: The bug remains. I&#39;ll work on that MCV method now."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1491408404, "post_id": 43235559, "comment_id": 73542757, "body": "@BrianHo -- Using the terms <code>right</code> and <code>left</code> are more appropriate for a binary tree, not linked list.  For a linked list, the terms that are more appropriate are <code>previous</code> and <code>next</code> or similar words."}, {"owner": {"reputation": 35, "user_id": 7820673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc9JQ.jpg?s=128&g=1", "display_name": "Brian Ho", "link": "https://stackoverflow.com/users/7820673/brian-ho"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1491408439, "post_id": 43235559, "comment_id": 73542786, "body": "@PaulMcKenzie Thanks, I&#39;ll make a note of that :)"}, {"owner": {"reputation": 532, "user_id": 7258651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2PhS7.jpg?s=128&g=1", "display_name": "Marek Chochol&#225;\u010dek", "link": "https://stackoverflow.com/users/7258651/marek-chochol%c3%a1%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1491409117, "post_id": 43235559, "comment_id": 73543273, "body": "@Brain Ho check into smart pointers, especially unique_ptr. They manage resource they point to as well, so you won&#39;t need to use new/delete in your code. With combination of unique_ptr and raw pointers you can write a nice double-linked list. (assuming you are using at least c++11)"}], "owner": {"reputation": 35, "user_id": 7820673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc9JQ.jpg?s=128&g=1", "display_name": "Brian Ho", "link": "https://stackoverflow.com/users/7820673/brian-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491406055, "creation_date": 1491406055, "question_id": 43235559, "link": "https://stackoverflow.com/questions/43235559/c-doubly-linked-list-deleting-first-node-causes-crash", "title": "C++ Doubly Linked List (Deleting First Node Causes Crash)", "body": "<p>I'm building a doubly-linked list using C++, and I have the basic Chain and Node structures up and running \u2013\u2013</p>\n\n<p>The Nodes have 2 pointers \u2013 one for left one for right \u2013 and 1 integer for the data to be held. A constructor and a destructor are both included, and the format looks like so:</p>\n\n<p><code>Node(const int e, Node* left, Node* right)</code></p>\n\n<p>The Chain has 4 functions I'm trying to implement: <strong>InsertBack</strong>, <strong>InsertAfter</strong>, <strong>Delete</strong>, and <strong>DeleteAll</strong>. The first two work as planned, but here is the code for <strong>InsertBack</strong> because I think it is relevant to the problem (shown below). I use a pointer named <code>head</code> (declared as <code>Node* head = NULL;</code>) to keep track of the first node, and scan through the linked list starting from it every time. The if-else logic here is to determine if the first node is being created.</p>\n\n<pre><code>void Implement::InsertBack(int num)\n{\n    if(head == NULL){\n        head = new Node(num, NULL, NULL);\n    }\n    else{\n    Node* tmp = this-&gt;head;\n    while(tmp-&gt;right != NULL) {\n        tmp = tmp-&gt;right;\n    }\n    tmp-&gt;right = new Node(num, tmp, NULL);\n  }\n}\n</code></pre>\n\n<p>My problem lies in <strong>Delete</strong> and <strong>DeleteAll</strong> causing the compiled exe file to crash <em>when it deletes the first node</em> (i.e. the one I'm pointing to with <code>head</code>). Below is my implementation of <strong>Delete</strong>, which is supposed to delete the first node with data of <code>int num</code> that it scans through from the start (and do nothing if <code>int num</code> isn't found):</p>\n\n<pre><code>void Implement::Delete(int num)\n{\n  Node* tmp = this-&gt;head;\n  while(tmp != NULL) {\n    if(tmp-&gt;data != num){\n      tmp = tmp-&gt;right;\n    }\n    else{\n      if(tmp-&gt;left == NULL){\n        head = tmp-&gt;right;\n        delete tmp;\n        break;\n      }\n      else if(tmp-&gt;right == NULL){\n        Node* leftnode = tmp-&gt;left;\n        leftnode-&gt;right = NULL;\n        delete tmp;\n        break;\n      }\n      else{\n        Node* leftnode = tmp-&gt;left;\n        Node* rightnode = tmp-&gt;right;\n        leftnode-&gt;right = rightnode;\n        rightnode-&gt;left = leftnode;\n        delete tmp;\n        break;\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>I designed it to scan through the entire loop, moving to the next node when the number isn't the same, and dealing with 3 different cases when it finds the number: (1) If the node is the first node / (2) If the node is the last node / (3) If the node is any other node in between. In each case, the <code>tmp</code> pointer always points to the node that needs to be deleted.</p>\n\n<p>As for the <strong>DeleteAll</strong> function, I simply altered <strong>Delete</strong> to continue scanning even after finding a node with the right number. It fails on all inputs so far; the code looks like this:</p>\n\n<pre><code>void Implement::DeleteAll(int num)\n{\n  Node* tmp = this-&gt;head;\n  while(tmp != NULL) {\n    if(tmp-&gt;data != num){\n      tmp = tmp-&gt;right;\n    }\n    else{\n      if(tmp-&gt;left == NULL){\n        Node* rightnode = tmp-&gt;right;\n        head = tmp-&gt;right;\n        delete tmp;\n        Node* tmp = rightnode;\n      }\n      else if(tmp-&gt;right == NULL){\n        Node* leftnode = tmp-&gt;left;\n        leftnode-&gt;right = NULL;\n        delete tmp;\n        break;\n      }\n      else{\n        Node* leftnode = tmp-&gt;left;\n        Node* rightnode = tmp-&gt;right;\n        leftnode-&gt;right = rightnode;\n        rightnode-&gt;left = leftnode;\n        delete tmp;\n        Node* tmp = rightnode;\n      }\n\n    }\n  }\n}\n</code></pre>\n\n<p>I cannot figure out the problem that causes <strong>Delete</strong> and <strong>DeleteAll</strong> to crash. Any form of help or ideas would be greatly appreciated. Thanks so much.</p>\n"}, {"tags": ["c++", "cuda", "global-variables", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1491407247, "post_id": 43235548, "comment_id": 73541958, "body": "Don&#39;t instantiate global objects of classes that expect to call or must call cuda runtime API functions in the constructor or destructor.   The CUDA runtime initialization/teardown can play havoc on this both at program start up and shut down, depending on exactly what you do in the class constructor and destructor.    There is no way to detect if the cuda driver is shutting down (in a way that will not be flagged in <code>cuda-memcheck</code>) and not call <code>cudaFree</code> in that instance."}], "answers": [{"comments": [{"owner": {"reputation": 758, "user_id": 1388104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/600787e614f453f06608954a8897dbaa?s=128&d=identicon&r=PG", "display_name": "Aaron Swan", "link": "https://stackoverflow.com/users/1388104/aaron-swan"}, "edited": false, "score": 0, "creation_date": 1492028462, "post_id": 43278592, "comment_id": 73819995, "body": "I considered using a shared pointer, but the global object is actually part of a library. Ultimately, I think the real solution will require restructuring the code. For the time being, I&#39;ve added a parameter to the constructor to indicate memory handling of the destructor. I just let the system take care of the cudaFree."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 758, "user_id": 1388104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/600787e614f453f06608954a8897dbaa?s=128&d=identicon&r=PG", "display_name": "Aaron Swan", "link": "https://stackoverflow.com/users/1388104/aaron-swan"}, "edited": false, "score": 0, "creation_date": 1492028925, "post_id": 43278592, "comment_id": 73820254, "body": "@AaronS: Fair enough; remember, though, that other users will read this question, and for them the second alternative might still be relevant."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 2, "last_activity_date": 1492028860, "last_edit_date": 1492028860, "creation_date": 1491569248, "answer_id": 43278592, "question_id": 43235548, "link": "https://stackoverflow.com/questions/43235548/how-to-handle-cudafree-on-globally-instantiated-variables/43278592#43278592", "title": "How to handle cudaFree on globally instantiated variables", "body": "<p>Instead of making this object global, instantiate it in your <code>main()</code> function (or somewhere that gets called by <code>main()</code> and wraps the entire execution of your application). This will ensure your <code>cudaFree()</code> call gets called before the CUDA tear-down happens.</p>\n\n<p>Another alternative is to use an <code>std::shared_ptr</code> with a <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/shared_ptr\" rel=\"nofollow noreferrer\">custom deleter</a>, which calls <code>cudaFree()</code>. If you do that, then the <code>cudaFree()</code> call will happen after the last \"user\" destructs its copy of the shared pointer - which is before <code>main()</code> is done and before CUDA tear-down.</p>\n"}], "owner": {"reputation": 758, "user_id": 1388104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/600787e614f453f06608954a8897dbaa?s=128&d=identicon&r=PG", "display_name": "Aaron Swan", "link": "https://stackoverflow.com/users/1388104/aaron-swan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 43278592, "answer_count": 1, "score": 1, "last_activity_date": 1492028860, "creation_date": 1491406020, "last_edit_date": 1491569293, "question_id": 43235548, "link": "https://stackoverflow.com/questions/43235548/how-to-handle-cudafree-on-globally-instantiated-variables", "title": "How to handle cudaFree on globally instantiated variables", "body": "<p>I have a class that I use to instantiate a global variable:</p>\n\n<pre><code>class BitUnpackPtrs\n{\npublic:\n    ushort* d_dataIn;\n\n    BitUnpackPtrs() : d_dataIn(NULL) {};\n\n    ~BitUnpackPtrs()\n    {\n        cudaFree(d_dataIn);\n    }\n\n    void update(...) { ... }\n};\n</code></pre>\n\n<p>The class is instantiated globally as a handle to reduce frequent allocation of cuda memory. However, when my program terminates, cuda-memcheck produces a warning:</p>\n\n<blockquote>\n  <p>Program hit cudaErrorCudartUnloading (error 29) due to \"driver shutting down\" on CUDA API call to cudaFree.</p>\n</blockquote>\n\n<p>What is the proper way to handle this? I could remove the cudaFree, but if this class is used at a non-global level at some later point, that would result in a memory leak. I could use a flag in the constructor to indicate how the memory should be handled.</p>\n\n<p>Alternately, is there a way to detect if the cuda driver is shutting down and not call cudaFree in that instance?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1491405705, "post_id": 43235335, "comment_id": 73540852, "body": "fyi g++ 5.1.0 compiles it with no problems and MSVC 2017 duplicates with language standard set to <b>ISO C++14 Standard (/std:c++14)</b>"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1491405755, "post_id": 43235335, "comment_id": 73540896, "body": "Cannot reproduce with gcc or clang - this is likely to be a MSVC defect."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 1, "creation_date": 1491405823, "post_id": 43235335, "comment_id": 73540948, "body": "This is super basic, but did you make sure C++11 compilation mode is enabled in your project?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1491405831, "post_id": 43235335, "comment_id": 73540955, "body": "I updated &quot;latest&quot; to &quot;2017&quot; so future readers will not get confused. Please correct if I made a mistake."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1491406200, "post_id": 43235335, "comment_id": 73541193, "body": "It compiles on my visual studio 2015 update 3. might be a regression. I usually update to the latest VS on the second or third update. it isn&#39;t stable enough otherwise."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1491406320, "post_id": 43235335, "comment_id": 73541279, "body": "@DeiDei: That&#39;s what it is, apparently. GodBolt could have told you that..."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 3, "creation_date": 1491406490, "post_id": 43235335, "comment_id": 73541409, "body": "File a bug report with MSVC."}], "answers": [{"comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1491407317, "post_id": 43235881, "comment_id": 73542013, "body": "Essentially you&#39;re saying there is no way to have <code>vector&lt;list&lt;unique_ptr&gt;&gt;</code>? The move constructor of <code>list</code> could be as simple as swapping two pointers."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1491409284, "post_id": 43235881, "comment_id": 73543396, "body": "@DeiDei: I believe the underlying reason for this problem is the fact that MSVC allocates memory for an empty <code>std::list</code>, and that can throw. You can observe that nicely by debugging a program which does nothing but create an empty <code>std::list&lt;int&gt;</code>. Step into the constructor and see what happens in <code>_List_alloc()</code>. Now, when the move constructor is called, the moved-from list is swapped with an empty list (a comment in the <code>list</code> file also confirms that by saying <code>swap with empty *this</code>). Hence no <code>noexcept</code>. GCC apparently uses a different but likewise valid <code>std::list</code> implementation."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1491410561, "post_id": 43235881, "comment_id": 73544162, "body": "@DeiDei: What about using <code>v.emplace_back()</code> instead of <code>v.push_back()</code>? <code>v.emplace_back(); auto &amp;l = v.back(); l.push_back(std::make_unique&lt;int&gt;(0)); l.push_back(std::make_unique&lt;int&gt;(1));</code>"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1491415652, "post_id": 43235881, "comment_id": 73547255, "body": "Summary of noexcept on container special members for the different std::libs: <a href=\"http://howardhinnant.github.io/container_summary.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/container_summary.html</a>"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 2, "creation_date": 1491416259, "post_id": 43235881, "comment_id": 73547606, "body": "Work around: <code>v.insert(v.end(), std::move(l));</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1491427344, "post_id": 43235881, "comment_id": 73553896, "body": "The real problem, tracked by LWG issue 2158, is that containers of move-only types pretend that they are copyable to the type traits. Fix that and the problem disappears."}], "tags": [], "owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "is_accepted": true, "score": 17, "last_activity_date": 1491407490, "last_edit_date": 1491407490, "creation_date": 1491407064, "answer_id": 43235881, "question_id": 43235335, "link": "https://stackoverflow.com/questions/43235335/moving-stdliststdunique-ptr-into-vector-attempts-to-reference-a-deleted-fu/43235881#43235881", "title": "Moving std::list&lt;std::unique_ptr&gt; into vector attempts to reference a deleted function", "body": "<blockquote>\n  <p>Since I'm moving the list into the vector, I assume no copy constructors will be called on the elements of the list.</p>\n</blockquote>\n\n<p>The move constructor of <code>std::list</code> is not <code>noexcept</code> (<a href=\"http://eel.is/c++draft/list.overview\" rel=\"noreferrer\">[list.overview]</a>), so <code>std::vector</code> needs to call its copy constructor in order to provide strong exception guarantee. The copy constructor of <code>std::list</code> (unsurprisingly) calls copy constructors on the elements of the list.</p>\n\n<p>Apparently libstdc++ declares <code>std::list</code>'s move constructor as <code>noexcept</code>, which is permitted but not required by the standard. (<a href=\"http://eel.is/c++draft/res.on.exception.handling#5\" rel=\"noreferrer\">[res.on.exception.handling]/5</a>)</p>\n"}], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 0, "accepted_answer_id": 43235881, "answer_count": 1, "score": 18, "last_activity_date": 1525865133, "creation_date": 1491405531, "last_edit_date": 1525865133, "question_id": 43235335, "link": "https://stackoverflow.com/questions/43235335/moving-stdliststdunique-ptr-into-vector-attempts-to-reference-a-deleted-fu", "title": "Moving std::list&lt;std::unique_ptr&gt; into vector attempts to reference a deleted function", "body": "<p>Here is a complete program which reproduces my problem.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;list&gt;\n#include &lt;memory&gt;\n#include &lt;utility&gt;\n\nint main()\n{\n    std::vector&lt;std::list&lt;std::unique_ptr&lt;int&gt;&gt;&gt; v;\n\n    std::list&lt;std::unique_ptr&lt;int&gt;&gt; l;\n    l.push_back(std::make_unique&lt;int&gt;(0));\n    l.push_back(std::make_unique&lt;int&gt;(1));\n\n    v.push_back(std::move(l)); // error\n}\n</code></pre>\n\n<p>On the last line the compiler is complaining that the <code>delete</code>d copy constructor of <code>std::unique_ptr</code> is being referenced. </p>\n\n<p>Since I'm <em>moving</em> the list into the vector, I assume no copy constructors will be called on the elements of the list. </p>\n\n<p>Why is this happening? How would I go about fixing it?</p>\n\n<p>I'm using MSVC 2017. </p>\n\n<p><a href=\"https://godbolt.org/g/Ky2JyN\" rel=\"noreferrer\"><strong>live example on godbolt</strong></a></p>\n\n<p>Full text from the error:</p>\n\n<pre><code>example.cpp\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/xmemory0(840): error C2280: 'std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': attempting to reference a deleted function\n        with\n        [\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/memory(1857): note: see declaration of 'std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr'\n        with\n        [\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/xmemory0(959): note: see reference to function template instantiation 'void std::allocator&lt;_Other&gt;::construct&lt;_Objty,const std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;&amp;&gt;(_Objty *,const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Other=std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;,\n            _Objty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/xmemory0(959): note: see reference to function template instantiation 'void std::allocator&lt;_Other&gt;::construct&lt;_Objty,const std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;&amp;&gt;(_Objty *,const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Other=std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;,\n            _Objty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/xmemory0(1097): note: see reference to function template instantiation 'void std::allocator_traits&lt;_Alloc&gt;::construct&lt;_Ty,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&amp;&gt;(std::allocator&lt;_Other&gt; &amp;,_Objty *,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Alloc=std::allocator&lt;std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;&gt;,\n            _Ty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,\n            _Other=std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;,\n            _Objty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/xmemory0(1096): note: see reference to function template instantiation 'void std::allocator_traits&lt;_Alloc&gt;::construct&lt;_Ty,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&amp;&gt;(std::allocator&lt;_Other&gt; &amp;,_Objty *,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Alloc=std::allocator&lt;std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;&gt;,\n            _Ty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,\n            _Other=std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;,\n            _Objty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(853): note: see reference to function template instantiation 'void std::_Wrap_alloc&lt;std::allocator&lt;_Other&gt;&gt;::construct&lt;_Ty,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&amp;&gt;(_Ty *,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Other=std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;,\n            _Ty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(851): note: see reference to function template instantiation 'void std::_Wrap_alloc&lt;std::allocator&lt;_Other&gt;&gt;::construct&lt;_Ty,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&amp;&gt;(_Ty *,const std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Other=std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;,void *&gt;,\n            _Ty=std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(1086): note: see reference to function template instantiation 'std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,void *&gt; *std::_List_buy&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,_Alloc&gt;::_Buynode&lt;const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&amp;&gt;(std::_List_node&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,void *&gt; *,std::_List_node&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,void *&gt; *,const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Ty=int,\n            _Alloc=std::allocator&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(1085): note: see reference to function template instantiation 'std::_List_node&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,void *&gt; *std::_List_buy&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,_Alloc&gt;::_Buynode&lt;const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&amp;&gt;(std::_List_node&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,void *&gt; *,std::_List_node&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,void *&gt; *,const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Ty=int,\n            _Alloc=std::allocator&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(1463): note: see reference to function template instantiation 'void std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::_Insert&lt;const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&amp;&gt;(std::_List_unchecked_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;,std::_Iterator_base0&gt;,const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(1463): note: see reference to function template instantiation 'void std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::_Insert&lt;const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&amp;&gt;(std::_List_unchecked_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;,std::_Iterator_base0&gt;,const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(1423): note: see reference to function template instantiation 'void std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::_Insert_range&lt;_Iter&gt;(std::_List_unchecked_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;,std::_Iterator_base0&gt;,_Iter,_Iter,std::forward_iterator_tag)' being compiled\n        with\n        [\n            _Ty=int,\n            _Iter=std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&gt;&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(1422): note: see reference to function template instantiation 'void std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::_Insert_range&lt;_Iter&gt;(std::_List_unchecked_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;,std::_Iterator_base0&gt;,_Iter,_Iter,std::forward_iterator_tag)' being compiled\n        with\n        [\n            _Ty=int,\n            _Iter=std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&gt;&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(939): note: see reference to function template instantiation 'std::_List_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;&gt; std::list&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::insert&lt;std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;&gt;&gt;(std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;&gt;,_Iter,_Iter)' being compiled\n        with\n        [\n            _Ty=int,\n            _Iter=std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&gt;&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(939): note: see reference to function template instantiation 'std::_List_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;&gt; std::list&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::insert&lt;std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;&gt;&gt;(std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;&gt;,_Iter,_Iter)' being compiled\n        with\n        [\n            _Ty=int,\n            _Iter=std::_List_const_iterator&lt;std::_List_val&lt;std::_List_simple_types&lt;std::unique_ptr&lt;int,std::default_delete&lt;int&gt;&gt;&gt;&gt;&gt;\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/list(935): note: while compiling class template member function 'std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::list(const std::list&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt; &amp;)'\n        with\n        [\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/xmemory0(840): note: see reference to function template instantiation 'std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;::list(const std::list&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt; &amp;)' being compiled\n        with\n        [\n            _Ty=int\n        ]\n&lt;source&gt;(10): note: see reference to class template instantiation 'std::list&lt;std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;,std::allocator&lt;std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt;&gt;&gt;' being compiled\n        with\n        [\n            _Ty=int\n        ]\n/opt/compiler-explorer/windows/19.10.25017/lib/native/include/memory(1857): note: 'std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': function was explicitly deleted\n        with\n        [\n            _Ty=int\n        ]\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x64\nCopyright (C) Microsoft Corporation.  All rights reserved.\nCompiler exited with result code 2\n</code></pre>\n"}, {"tags": ["c++", "macros", "mfc", "release", "ole"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1879225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGHS4.jpg?s=128&g=1", "display_name": "Christian A Strasser", "link": "https://stackoverflow.com/users/1879225/christian-a-strasser"}, "edited": false, "score": 0, "creation_date": 1491499880, "post_id": 43242954, "comment_id": 73592678, "body": "Thanks! When I right-clicked on the macro to go to the definition, it took me back to my application&#39;s own code.  For some reason I missed it in  the FINDSTR output."}], "tags": [], "owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": true, "score": 1, "last_activity_date": 1491432903, "creation_date": 1491432903, "answer_id": 43242954, "question_id": 43235304, "link": "https://stackoverflow.com/questions/43235304/release-c-macro-definition/43242954#43242954", "title": "RELEASE C++ Macro Definition", "body": "<p>It's in oleimpl2.h in the MFC src directory...</p>\n\n<pre><code>#ifndef _DEBUG\n// generate smaller code in release build\n#define RELEASE(lpUnk) _AfxRelease((LPUNKNOWN*)&amp;lpUnk)\n#else\n// generate larger but typesafe code in debug build\n#define RELEASE(lpUnk) do \\\n    { if ((lpUnk) != NULL) { (lpUnk)-&gt;Release(); (lpUnk) = NULL; } } while (0)\n#endif\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 1879225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGHS4.jpg?s=128&g=1", "display_name": "Christian A Strasser", "link": "https://stackoverflow.com/users/1879225/christian-a-strasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 43242954, "answer_count": 1, "score": 0, "last_activity_date": 1491432903, "creation_date": 1491405455, "question_id": 43235304, "link": "https://stackoverflow.com/questions/43235304/release-c-macro-definition", "title": "RELEASE C++ Macro Definition", "body": "<p>My company's main application uses OLE documents.  Periodically, and unpredictably, the program closes its template documents improperly.  So that at seemingly random times when they're opened, the OS throws <code>STG_E_SHAREVIOLATION</code> </p>\n\n<p>I thought the problem might be the way we're closing the files when the user either exits the application or chooses File / Close from the menu.  After a lot of debugging / tracing, it comes down to </p>\n\n<pre><code>/////////////////////////////////////////////////////////////////////////////\n// 'Compound File' enabling in COleDocument\n\nBOOL COleDocument::OnNewDocument()\n{\n    // call base class, which destroys all items\n    if (!CDocument::OnNewDocument())\n        return FALSE;\n\n    // for file-based compound files, need to create temporary file\n    if (m_bCompoundFile &amp;&amp; !m_bEmbedded)\n    {\n        // abort changes to the current docfile\n        RELEASE(m_lpRootStg);\n\n        // create new temporary docfile\n        LPSTORAGE lpStorage;\n        SCODE sc = ::StgCreateDocfile(NULL, STGM_DELETEONRELEASE|\n            STGM_READWRITE|STGM_TRANSACTED|STGM_SHARE_EXCLUSIVE|STGM_CREATE,\n            0, &amp;lpStorage);\n        if (sc != S_OK)\n            return FALSE;\n\n        ASSERT(lpStorage != NULL);\n        m_lpRootStg = lpStorage;\n    }\n\n    return TRUE;\n}\n</code></pre>\n\n<p>in OLEDOC1.CPP (part of the MFC libraries).  Specifically the RELEASE(m_lpRootStg) macro line.  Prior to executing this line, trying to move or delete the document results in the OS saying that the file is in use.  After this line, the file is closed and able to be moved.</p>\n\n<p>I'd like to subclass this method to experiment with alternative ways of closing the file.  But, I cannot find the definition of the RELEASE macro anywhere.  The closest I came was some code from IBM.  Where is this macro defined?  What is the definition?</p>\n"}, {"tags": ["c++", "c++11", "vector", "move", "rvalue-reference"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1491404865, "post_id": 43234946, "comment_id": 73540259, "body": "Great question, great answer, and great duplicate spot."}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 14, "last_activity_date": 1491405068, "last_edit_date": 1491405068, "creation_date": 1491404727, "answer_id": 43235042, "question_id": 43234946, "link": "https://stackoverflow.com/questions/43234946/c11-vector-makes-copies-on-rvalue/43235042#43235042", "title": "C++11 vector makes copies on rvalue", "body": "<p>The <code>std::vector</code> is copying your elements during <em>internal buffer reallocation</em>. It is choosing to copy instead of moving because your move constructor is not marked <code>noexcept</code>. Marking it...</p>\n\n<pre><code>A(A &amp;&amp;) noexcept {      std::cout &lt;&lt; \"moved \" &lt;&lt; std::endl; }\n</code></pre>\n\n<p>...will fix the issue. </p>\n\n<p>Telling the compiler that your <em>move constructor</em> will not throw allows <code>std::vector</code>'s implementation to move during internal reallocation, fulfilling the <em>exception guarantees</em> demanded by the C++ Standard.</p>\n\n<p>Alternatively, you can <code>std::vector::reserve</code> your container in advance to prevent the growth of the internal buffer.</p>\n"}], "owner": {"reputation": 190, "user_id": 3169606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8790d10c9ab0f5ccc52b17dec453e967?s=128&d=identicon&r=PG&f=1", "display_name": "Sorcerer", "link": "https://stackoverflow.com/users/3169606/sorcerer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 3, "closed_date": 1491404717, "accepted_answer_id": 43235042, "answer_count": 1, "score": 10, "last_activity_date": 1544199442, "creation_date": 1491404536, "last_edit_date": 1544199442, "question_id": 43234946, "link": "https://stackoverflow.com/questions/43234946/c11-vector-makes-copies-on-rvalue", "closed_reason": "Duplicate", "title": "C++11 vector makes copies on rvalue", "body": "<p>I have some strange behavior on std::vector with adding rvalues:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass A {\npublic:\n    A():i_{5}{std::cout &lt;&lt; \"default\" &lt;&lt; std::endl;}\n    A(const A &amp;data) { std::cout &lt;&lt; \"copied!\" &lt;&lt; std::endl; }\n    A(A &amp;&amp;data) {      std::cout &lt;&lt; \"moved \" &lt;&lt; std::endl; }\n    int i_;\n};\n\nint main(int argc, char *argv[]) {\n    std::vector&lt;A&gt; datavec;\n    datavec.push_back(A{});\n    datavec.push_back(A{});\n    return 0;\n}\n</code></pre>\n\n<p>output is:</p>\n\n<pre><code>default\nmoved \ndefault\nmoved \ncopied!\n</code></pre>\n\n<p>So vector still creates copies of A, the more pushes I do - the more copies I get.\nHowever, if I replace move constructor with default one <strong>A(A &amp;&amp;data) = default;</strong> or delete copy constructor with <strong>A(const A &amp;data) = delete;</strong> I get right result where no copies are made. I also have no copies if I first call datavec.reserve with enough size.\nI use gcc version 5.4.0 with no specific arguments </p>\n\n<pre><code>g++ -std=c++11 -o main ../main.cpp\n</code></pre>\n\n<p>Have you got any thoughts on why vector makes copies of obvious rvalues? I hope it is not some bug of STL</p>\n"}, {"tags": ["c++", "gps", "bit-manipulation", "bitset"], "comments": [{"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1491609584, "post_id": 43234902, "comment_id": 73645346, "body": "How is this data received?  Each <i>&quot;word&quot;</i> is only 30 bits!  The message frame of 300 bits would not be byte aligned for the second frame."}], "answers": [{"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": true, "score": 0, "last_activity_date": 1491942994, "creation_date": 1491942994, "answer_id": 43355754, "question_id": 43234902, "link": "https://stackoverflow.com/questions/43234902/combining-two-part-of-a-word-with-a-part-of-another-word-and-using-a-scale-facto/43355754#43355754", "title": "Combining two part of a word with a part of another word and using a scale factor", "body": "<p>This might not be \"c++\" enough, but I'd do bit manipulation on the corresponding integers:</p>\n\n<pre><code>ulong roota_binary = (((word8_binary.to_ulong() &gt;&gt; 6) &amp; 0xFF) &lt;&lt;24) +\n                     ((word9_binary.to_ulong() &gt;&gt;6) &amp; 0xFFFFFF); \n</code></pre>\n\n<p>The <code>&gt;&gt;6</code> gets rid of the parity bits, the masks isolate the bits you need, and the <code>&lt;&lt;24</code> puts the high ones on top.        </p>\n"}], "owner": {"reputation": 321, "user_id": 6805830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c220c56cf6ab9fa1768179dd02057c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ariel Baron", "link": "https://stackoverflow.com/users/6805830/ariel-baron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 43355754, "answer_count": 1, "score": 0, "last_activity_date": 1491942994, "creation_date": 1491404429, "last_edit_date": 1491407689, "question_id": 43234902, "link": "https://stackoverflow.com/questions/43234902/combining-two-part-of-a-word-with-a-part-of-another-word-and-using-a-scale-facto", "title": "Combining two part of a word with a part of another word and using a scale factor", "body": "<p>I am trying to extract data from a GPS receiver. The way they transmit their information is shown in the following figure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UQhsa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UQhsa.png\" alt=\"Bit information\"></a></p>\n\n<p>I am trying to get roota. I have word 8 and word 9 in seperate bitsets. How do I combine the relevant bits into one bitset?</p>\n\n<p>I also need to use this scale factor information to get a double precision number. The scale factor information is shown below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ybwqa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ybwqa.png\" alt=\"scale factor information\"></a></p>\n\n<p>I have tried</p>\n\n<pre><code>std::bitset&lt;32&gt; word8_binary; // is filled with word 8 data.\nstd::bitset&lt;32&gt; word9_binary; // is filled with word 9 data.\n\nstd::bitset&lt;32&gt; roota_binary;\n\nfor (int i=13; i&gt;5; i--)\n{             \n    roota_binary = word8_binary[i] &lt;&lt; 32 | word9_binary[i];\n} \n</code></pre>\n\n<p>But this is not giving me the result I want. I also don't know how to sue the scale factor.</p>\n\n<p>Your help would be much appreciated.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1491404107, "post_id": 43234716, "comment_id": 73539662, "body": "Using <code>release</code> would defeat the purpose. The purpose of a <code>unique_ptr</code> is to remove the burden to remember to free the resource. <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/release\" rel=\"nofollow noreferrer\"><code>std::unique_ptr::release</code></a> does the opposite, calling it is a statement that you do <b>not</b> want the object to be automatically deleted."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1491404158, "post_id": 43234716, "comment_id": 73539710, "body": "Consider using <code>std::make_unique&lt;stEx&gt;()</code> instead of using <code>new</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1491404179, "post_id": 43234716, "comment_id": 73539725, "body": "Why are you even using a pointer here? Why not make it a normal value member of the class and you then get automatic cleanup."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1491404183, "post_id": 43234716, "comment_id": 73539726, "body": "Try copy constructing or assigning a <code>Foo</code> object."}, {"owner": {"reputation": 8739, "user_id": 5603247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c27998979eedac7a3737411e77b0bf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Olsson", "link": "https://stackoverflow.com/users/5603247/hans-olsson"}, "edited": false, "score": 0, "creation_date": 1491404759, "post_id": 43234716, "comment_id": 73540172, "body": "If you want to copy construct Foo: see <a href=\"http://stackoverflow.com/questions/16030081/copy-constructor-for-a-class-with-unique-ptr\" title=\"copy constructor for a class with unique ptr\">stackoverflow.com/questions/16030081/&hellip;</a>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1491406451, "post_id": 43234716, "comment_id": 73541390, "body": "There is a big difference between &quot;necessary&quot; and &quot;good style&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1491404385, "post_id": 43234780, "comment_id": 73539893, "body": "@Fran&#231;oisAndrieux addended."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1491404379, "last_edit_date": 1491404379, "creation_date": 1491404153, "answer_id": 43234780, "question_id": 43234716, "link": "https://stackoverflow.com/questions/43234716/is-it-necessary-to-use-a-unique-ptr-in-this-case/43234780#43234780", "title": "Is it necessary to use a unique_ptr in this case?", "body": "<blockquote>\n  <p>And how do I destroy/free a unique pointer?</p>\n</blockquote>\n\n<p>You don't. That's the whole point of <code>unique_ptr</code>: <code>Foo::E</code> is destructed along with <code>Foo</code>, and destructs its pointee too. No manual cleanup.</p>\n\n<p>Also, you will almost never have to use <code>release</code>. This function makes the <code>unique_ptr</code> release its pointee, in the sense that it <em>won't</em> destroy it, and you'll have to <code>delete</code> it yourself as before.</p>\n"}, {"tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 1, "last_activity_date": 1491405455, "last_edit_date": 1491405455, "creation_date": 1491404343, "answer_id": 43234850, "question_id": 43234716, "link": "https://stackoverflow.com/questions/43234716/is-it-necessary-to-use-a-unique-ptr-in-this-case/43234850#43234850", "title": "Is it necessary to use a unique_ptr in this case?", "body": "<p>In this case, I can't see the need to use <code>unique_ptr</code>, because you have only one object, and the life time of it is within the life time of the class, so you can use just a member.</p>\n\n<pre><code>typedef struct st{\n    int counter;\n    int fields[128];\n}stEx;\n\nclass Foo {\n    stEx E;\n    int index;\npublic : \n    Foo(){\n        index = 0;\n    }\n}\n</code></pre>\n\n<p>Also you don't need to use the pointer this to access to the class members.</p>\n\n<p>And there is no need to call:</p>\n\n<pre><code>E.release; // ?\n</code></pre>\n\n<p>The memory allocated with this line:</p>\n\n<pre><code>this-&gt;E = std::unique_ptr&lt;stEx&gt;(new stEx());\n</code></pre>\n\n<p>Plus the overhead of the smart pointer handle, is freed when the smart pointer goes our of scope.</p>\n\n<p>In your case is implicitly in <code>Foo</code> destructor.</p>\n\n<p>Note: <code>unique_ptr::release()</code> Releases the ownership of the managed object \nIf you need that the <code>new stEx</code> object be no longer owned by <code>E</code>.\nYou have to:</p>\n\n<pre><code>Foo* stExPtr = up.release(); //stEx is no longer owned by unique_ptr\ndelete stExPtr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 250, "user_id": 254119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/09ecd03729bc4c8e7f05136097dc5856?s=128&d=identicon&r=PG", "display_name": "hakos", "link": "https://stackoverflow.com/users/254119/hakos"}, "is_accepted": false, "score": 1, "last_activity_date": 1491404433, "creation_date": 1491404433, "answer_id": 43234904, "question_id": 43234716, "link": "https://stackoverflow.com/questions/43234716/is-it-necessary-to-use-a-unique-ptr-in-this-case/43234904#43234904", "title": "Is it necessary to use a unique_ptr in this case?", "body": "<p>In the destructor, the compiler will automatically insert calls the destructors for all non-static members of the class. So you don't have to add any code for that to happen.</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 7563260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d557f4efb03b8c22c7b0cc6b560c94?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/7563260/john-smith"}, "is_accepted": false, "score": 7, "last_activity_date": 1491406595, "last_edit_date": 1491406595, "creation_date": 1491404837, "answer_id": 43235089, "question_id": 43234716, "link": "https://stackoverflow.com/questions/43234716/is-it-necessary-to-use-a-unique-ptr-in-this-case/43235089#43235089", "title": "Is it necessary to use a unique_ptr in this case?", "body": "<p>The idiomatic way to do this would be:</p>\n\n<pre><code>class Foo\n{\n    std::unique_ptr&lt;stEx&gt; E;\n    int index;\npublic: \n    Foo() : E(std::make_unique&lt;stEx&gt;()), index(0)\n    {}\n};\n</code></pre>\n\n<ul>\n<li>use initialization list</li>\n<li>use make_unique (never type <code>new</code>)</li>\n<li>don't have a destructor</li>\n</ul>\n\n<p>This type will automatically be move-enabled, but copy-disabled</p>\n"}], "owner": {"reputation": 444, "user_id": 5837437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b82ff10306f28a2c7e5029a7fab5b69f?s=128&d=identicon&r=PG&f=1", "display_name": "El Mostafa IDRASSI", "link": "https://stackoverflow.com/users/5837437/el-mostafa-idrassi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 43234780, "answer_count": 4, "score": 0, "last_activity_date": 1491406595, "creation_date": 1491403981, "question_id": 43234716, "link": "https://stackoverflow.com/questions/43234716/is-it-necessary-to-use-a-unique-ptr-in-this-case", "title": "Is it necessary to use a unique_ptr in this case?", "body": "<p>So, here is an example of a class I'm creating : </p>\n\n<pre><code>typedef struct st{\n    int counter;\n    int fields[128];\n}stEx;\n\nclass Foo {\n    stEx *E;\n    int index;\npublic : \n    Foo(){\n        this-&gt;index = 0;\n        this-&gt;E = new stEx;\n    }\n    ~Foo(){\n        delete E;\n    }\n}\n</code></pre>\n\n<p>Since I want E to be the instance of the Foo object alone, the E object has to be destroyed automatically when the Foo object gets destroyed, and should'nt therefore outlive that object. That's how I came across the notion of smart pointers, and unique pointers in particular.</p>\n\n<p>However, I can't seem to understand why I need to use unique pointers. \nAnd how do I destroy/free a unique pointer?</p>\n\n<p>Here is my attempt with unique pointers.</p>\n\n<pre><code>#include &lt;memory&gt;\n\ntypedef struct st{\n    int counter;\n    int fields[128];\n}stEx;\n\nclass Foo {\n    std::unique_ptr&lt;stEx&gt; E;\n    int index;\npublic : \n    Foo(){\n        this-&gt;index = 0;\n        this-&gt;E = std::unique_ptr&lt;stEx&gt;(new stEx());\n    }\n    ~Foo(){\n        E.release; // ?\n    }\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1491403785, "post_id": 43234596, "comment_id": 73539368, "body": "You have a buffer overflow somewhere. Now your job is to read the code and run it with a debugger to find it."}, {"owner": {"reputation": 21, "user_id": 7821061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8904b927288d2ddd111254577ed56fc5?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Khatri", "link": "https://stackoverflow.com/users/7821061/chirag-khatri"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1491404258, "post_id": 43234596, "comment_id": 73539791, "body": "I don&#39;t understand. Can you please elaborate."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1491404856, "post_id": 43234596, "comment_id": 73540250, "body": "You&#39;re most likely writing outside the bounds of one of the arrays. Add some bounds checking. (And spend some time finding a minimal, less arbitrary, test case so you can work out in advance what&#39;s supposed to happen.)"}], "owner": {"reputation": 21, "user_id": 7821061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8904b927288d2ddd111254577ed56fc5?s=128&d=identicon&r=PG&f=1", "display_name": "Chirag Khatri", "link": "https://stackoverflow.com/users/7821061/chirag-khatri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491426551, "creation_date": 1491403675, "last_edit_date": 1491426551, "question_id": 43234596, "link": "https://stackoverflow.com/questions/43234596/array-values-are-changing-automatically-cpp", "title": "array values are changing automatically cpp", "body": "<p>I have created following code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\n\nstruct node{\n    long long int a;\n    long long int b;\n    long long int h;\n    long long int ind;\n    };\n\nstruct node_seg{\n    long long int a;\n    long long int b;\n    long long int h;\n    long long int ind;\n    long long int val;\n};\n\nbool bcomp(struct node l, struct node r){\n    if(l.b!=r.b)\n        return l.b&gt;r.b;\n    else\n        return l.a&gt;r.a;\n}\n\nbool acomp(struct node_seg l, struct node_seg r){\n    return l.a&gt;r.a;\n}\n\nvoid build_seg_tree(long long int l,\n                    long long int r,\n                    long long int node,\n                    long long int tree[],\n                    node_seg arr[]) {\n    if(l==r) {\n        tree[node]=arr[l].val;\n        return;\n    }\n\n    long long int mid=(l+r)/2;\n    build_seg_tree(l,mid,2*node+1,tree,arr);\n    build_seg_tree(mid+1,r,2*node+2,tree,arr);\n\n    tree[node]=max(tree[2*node+1],tree[2*node+2]);\n}\n\nvoid update(long long int l,\n            long long int r,\n            long long int node,\n            long long int tree[],\n            long long int c_i,\n            long long int v) {\n    if(l==r) {\n        tree[node]=v;\n        return;\n    }\n\n    long long int mid=(l+r)/2;\n\n    if(l&lt;=c_i &amp;&amp; c_i&lt;=mid)\n        update(l,mid,2*node+1,tree,c_i,v);\n    else if(mid+1&lt;=c_i &amp;&amp; c_i&lt;=r)\n        update(mid+1,r,2*node+2,tree,c_i,v);\n\n    tree[node]=max(tree[2*node+1],tree[2*node+2]);\n}\n\nlong long int query(long long int t_l,\n                    long long int t_r,\n                    long long int node,\n                    long long int q_l,\n                    long long int q_r,\n                    long long int tree[]) {\n    if(t_r&lt;q_l || q_r&lt;t_l) {\n        return 0;\n    } else if(q_l&lt;=t_l &amp;&amp; t_r&lt;=q_r) {\n        return tree[node];\n    } else{\n        long long int mid=(t_l+t_r)/2;\n        return max(query(t_l,mid,2*node+1,q_l,q_r,tree),\n                   query(mid+1,t_r,2*node+2,q_l,q_r,tree));\n    }\n}\n\nlong long int bin_search(long long int val,\n                         long long int l,\n                         long long int r,\n                         node_seg arr[]) {\n    if(l==r) {\n        return l;\n    }\n\n    long long int mid=l+(r-l)/2;\n\n    if(arr[mid].a&lt;val) {\n        return bin_search(val,l,mid,arr);\n    } else {\n        return bin_search(val,mid+1,r,arr);\n    }\n}\n\nlong long int find(long long int val,\n                   struct node_seg arr[],\n                   long long int n,\n                   long long int my_seg_tree[]) {\n    long long int l=bin_search(val,0,n-1,arr);\n    long long int r=n-1;\n    //if(val==641)\n//  cout&lt;&lt;\"l is \"&lt;&lt;l&lt;&lt;endl;\n    long long int res=query(0,n-1,0,l,r,my_seg_tree);\n    //cout&lt;&lt;\"and result is \"&lt;&lt;res&lt;&lt;endl;\n    return res;\n}\n\nint main() {\n    long long int n,i,temp,u,v,w,res;\n    cin&gt;&gt;n;\n    struct node arr[n];\n    struct node arr_sort_b[n];\n    struct node_seg arr_sort_a[n];\n    for(i=0; i&lt;n; i++) {\n        cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;\n        struct node nd;\n        nd.a=u;\n        nd.b=v;\n        nd.h=w;\n        nd.ind=i;\n        arr[i]=nd;\n    }\n\n    for(i=0; i&lt;n; i++) {\n        arr_sort_b[i]=arr[i];\n        struct node_seg ns;\n        ns.a=arr[i].a;\n        ns.b=arr[i].b;\n        ns.h=arr[i].h;\n        ns.ind=arr[i].ind;\n        ns.val=0;\n        arr_sort_a[i]=ns;\n    }\n\n    sort(arr_sort_b,arr_sort_b+n,bcomp);\n\n    sort(arr_sort_a,arr_sort_a+n,acomp);\n\n    for(i=0; i&lt;n; i++) {\n        cout&lt;&lt;arr_sort_b[i].a&lt;&lt;\"  \"&lt;&lt;arr_sort_b[i].b&lt;&lt;\"  \"&lt;&lt;arr_sort_b[i].h;\n        cout&lt;&lt;endl;\n    }\n\n    cout&lt;&lt;endl&lt;&lt;endl;\n\n    for(i=0; i&lt;n; i++) {\n        cout&lt;&lt;arr_sort_a[i].a&lt;&lt;\"  \"&lt;&lt;arr_sort_a[i].b&lt;&lt;\"  \"&lt;&lt;arr_sort_a[i].h;\n        cout&lt;&lt;endl;\n    }\n\n    int mapping2[n];\n\n    for(i=0; i&lt;n; i++) {\n        temp=arr_sort_a[i].ind;\n        mapping2[temp]=i;\n    }\n\n    for(i=0; i&lt;n; i++) {\n        cout&lt;&lt;mapping2[i]&lt;&lt;\"  \";\n    }\n\n    cout&lt;&lt;endl;\n\n    long long int my_seg_tree[2*n];\n\n    build_seg_tree(0,n-1,0,my_seg_tree,arr_sort_a);\n    long long int ans[n];\n\n    for(i=0;i&lt;n;i++) {\n        if(i==0) {\n            ans[i]=arr_sort_b[i].h;\n            temp=mapping2[arr_sort_b[i].ind];\n            arr_sort_a[temp].val=ans[i];\n            update(0,n-1,0,my_seg_tree,temp,ans[i]);\n            res=ans[i];\n        } else {\n            ans[i]=arr_sort_b[i].h+find(arr_sort_b[i].b,arr_sort_a,n,my_seg_tree);\n\n            if(ans[i]&gt;res)\n                res=ans[i];\n\n            //cout&lt;&lt;\"temp is \"&lt;&lt;temp&lt;&lt;\"   \"&lt;&lt;arr_sort_b[i].ind&lt;&lt;endl;\n            cout&lt;&lt;\"index is \"&lt;&lt;arr_sort_b[i].ind&lt;&lt;endl;\n\n            for(int j=0; j&lt;n; j++) {\n                cout&lt;&lt;mapping2[j]&lt;&lt;\"  \";\n            }\n\n            cout&lt;&lt;endl;\n            temp=mapping2[arr_sort_b[i].ind];\n\n            arr_sort_a[temp].val=ans[i];\n            update(0,n-1,0,my_seg_tree,temp,ans[i]);\n        }\n        cout&lt;&lt;ans[i]&lt;&lt;endl;\n    }\n    cout&lt;&lt;res;\n\n    return 0;\n}\n</code></pre>\n\n<p>Here I have an array <code>mapping2</code>. I am using it to map indices. \nI am not changing its value anywhere, But when I am accessing its values in the last loop, they are changing.</p>\n\n<p>I cannot understand why it is happening.\nThe input I am using is:</p>\n\n<pre><code>10\n312 838 197\n713 996 320\n427 767 520\n490 800 465\n575 681 995\n781 843 908\n545 615 400\n36 667 129\n85 641 27\n396 539 350\n</code></pre>\n\n<p>And the output I am getting is:</p>\n\n<pre><code>Runtime error   time: 0 memory: 15248 signal:11\n713  996  320\n781  843  908\n312  838  197\n490  800  465\n427  767  520\n575  681  995\n36  667  129\n85  641  27\n545  615  400\n396  539  350\n\n\n781  843  908\n713  996  320\n575  681  995\n545  615  400\n490  800  465\n427  767  520\n396  539  350\n312  838  197\n85  641  27\n36  667  129\n7  1  5  4  2  0  3  9  8  6  \n320\nindex is 5\n7  1  5  4  2  0  0  0  0  0  \n1228\nindex is 0\n7  1  5  4  2  0  0  0  0  0  \n1425\nindex is 3\n7  1  5  4  2  0  0  0  0  0  \n1890\nindex is 2\n7  1  5  4  2  0  0  0  0  0  \n2410\nindex is 4\n7  1  5  4  2  0  2410  0  0  0  \n3405\nindex is 7\n7  1  5  4  2  0  2410  0  0  0  \n3534\nindex is 8\n7  1  5  4  2  0  2410  0  0  0  \n3432\nindex is 6\n7  1  5  4  2  0  2410  0  0  0 \n</code></pre>\n\n<p>Initially <code>mapping2</code> values were: \n7  1  5  4  2  0  3  9  8  6  </p>\n\n<p>But as loop iterates these values are automatically changing. But they are supposed to be same at each iteration for reliable mapping.</p>\n"}]